(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=a(i);fetch(i.href,l)}})();var ES=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ns(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uN={exports:{}},zw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u6;function fne(){if(u6)return zw;u6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(r,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var n in i)n!=="key"&&(l[n]=i[n])}else l=i;return i=l.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:l}}return zw.Fragment=e,zw.jsx=a,zw.jsxs=a,zw}var c6;function pne(){return c6||(c6=1,uN.exports=fne()),uN.exports}var $=pne(),cN={exports:{}},vi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d6;function mne(){if(d6)return vi;d6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.iterator;function L(ke){return ke===null||typeof ke!="object"?null:(ke=N&&ke[N]||ke["@@iterator"],typeof ke=="function"?ke:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,H={};function q(ke,Ge,Se){this.props=ke,this.context=Ge,this.refs=H,this.updater=Se||F}q.prototype.isReactComponent={},q.prototype.setState=function(ke,Ge){if(typeof ke!="object"&&typeof ke!="function"&&ke!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ke,Ge,"setState")},q.prototype.forceUpdate=function(ke){this.updater.enqueueForceUpdate(this,ke,"forceUpdate")};function W(){}W.prototype=q.prototype;function ee(ke,Ge,Se){this.props=ke,this.context=Ge,this.refs=H,this.updater=Se||F}var oe=ee.prototype=new W;oe.constructor=ee,j(oe,q.prototype),oe.isPureReactComponent=!0;var fe=Array.isArray,se={H:null,A:null,T:null,S:null},me=Object.prototype.hasOwnProperty;function ge(ke,Ge,Se,Te,qe,Ze){return Se=Ze.ref,{$$typeof:t,type:ke,key:Ge,ref:Se!==void 0?Se:null,props:Ze}}function Re(ke,Ge){return ge(ke.type,Ge,void 0,void 0,void 0,ke.props)}function we(ke){return typeof ke=="object"&&ke!==null&&ke.$$typeof===t}function Ee(ke){var Ge={"=":"=0",":":"=2"};return"$"+ke.replace(/[=:]/g,function(Se){return Ge[Se]})}var ae=/\/+/g;function _e(ke,Ge){return typeof ke=="object"&&ke!==null&&ke.key!=null?Ee(""+ke.key):Ge.toString(36)}function Ie(){}function xe(ke){switch(ke.status){case"fulfilled":return ke.value;case"rejected":throw ke.reason;default:switch(typeof ke.status=="string"?ke.then(Ie,Ie):(ke.status="pending",ke.then(function(Ge){ke.status==="pending"&&(ke.status="fulfilled",ke.value=Ge)},function(Ge){ke.status==="pending"&&(ke.status="rejected",ke.reason=Ge)})),ke.status){case"fulfilled":return ke.value;case"rejected":throw ke.reason}}throw ke}function ze(ke,Ge,Se,Te,qe){var Ze=typeof ke;(Ze==="undefined"||Ze==="boolean")&&(ke=null);var lt=!1;if(ke===null)lt=!0;else switch(Ze){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(ke.$$typeof){case t:case e:lt=!0;break;case x:return lt=ke._init,ze(lt(ke._payload),Ge,Se,Te,qe)}}if(lt)return qe=qe(ke),lt=Te===""?"."+_e(ke,0):Te,fe(qe)?(Se="",lt!=null&&(Se=lt.replace(ae,"$&/")+"/"),ze(qe,Ge,Se,"",function(He){return He})):qe!=null&&(we(qe)&&(qe=Re(qe,Se+(qe.key==null||ke&&ke.key===qe.key?"":(""+qe.key).replace(ae,"$&/")+"/")+lt)),Ge.push(qe)),1;lt=0;var st=Te===""?".":Te+":";if(fe(ke))for(var ht=0;ht<ke.length;ht++)Te=ke[ht],Ze=st+_e(Te,ht),lt+=ze(Te,Ge,Se,Ze,qe);else if(ht=L(ke),typeof ht=="function")for(ke=ht.call(ke),ht=0;!(Te=ke.next()).done;)Te=Te.value,Ze=st+_e(Te,ht++),lt+=ze(Te,Ge,Se,Ze,qe);else if(Ze==="object"){if(typeof ke.then=="function")return ze(xe(ke),Ge,Se,Te,qe);throw Ge=String(ke),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(ke).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.")}return lt}function Me(ke,Ge,Se){if(ke==null)return ke;var Te=[],qe=0;return ze(ke,Te,"","",function(Ze){return Ge.call(Se,Ze,qe++)}),Te}function je(ke){if(ke._status===-1){var Ge=ke._result;Ge=Ge(),Ge.then(function(Se){(ke._status===0||ke._status===-1)&&(ke._status=1,ke._result=Se)},function(Se){(ke._status===0||ke._status===-1)&&(ke._status=2,ke._result=Se)}),ke._status===-1&&(ke._status=0,ke._result=Ge)}if(ke._status===1)return ke._result.default;throw ke._result}var Ue=typeof reportError=="function"?reportError:function(ke){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ke=="object"&&ke!==null&&typeof ke.message=="string"?String(ke.message):String(ke),error:ke});if(!window.dispatchEvent(Ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ke);return}console.error(ke)};function Qe(){}return vi.Children={map:Me,forEach:function(ke,Ge,Se){Me(ke,function(){Ge.apply(this,arguments)},Se)},count:function(ke){var Ge=0;return Me(ke,function(){Ge++}),Ge},toArray:function(ke){return Me(ke,function(Ge){return Ge})||[]},only:function(ke){if(!we(ke))throw Error("React.Children.only expected to receive a single React element child.");return ke}},vi.Component=q,vi.Fragment=a,vi.Profiler=i,vi.PureComponent=ee,vi.StrictMode=r,vi.Suspense=v,vi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,vi.act=function(){throw Error("act(...) is not supported in production builds of React.")},vi.cache=function(ke){return function(){return ke.apply(null,arguments)}},vi.cloneElement=function(ke,Ge,Se){if(ke==null)throw Error("The argument must be a React element, but you passed "+ke+".");var Te=j({},ke.props),qe=ke.key,Ze=void 0;if(Ge!=null)for(lt in Ge.ref!==void 0&&(Ze=void 0),Ge.key!==void 0&&(qe=""+Ge.key),Ge)!me.call(Ge,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&Ge.ref===void 0||(Te[lt]=Ge[lt]);var lt=arguments.length-2;if(lt===1)Te.children=Se;else if(1<lt){for(var st=Array(lt),ht=0;ht<lt;ht++)st[ht]=arguments[ht+2];Te.children=st}return ge(ke.type,qe,void 0,void 0,Ze,Te)},vi.createContext=function(ke){return ke={$$typeof:c,_currentValue:ke,_currentValue2:ke,_threadCount:0,Provider:null,Consumer:null},ke.Provider=ke,ke.Consumer={$$typeof:l,_context:ke},ke},vi.createElement=function(ke,Ge,Se){var Te,qe={},Ze=null;if(Ge!=null)for(Te in Ge.key!==void 0&&(Ze=""+Ge.key),Ge)me.call(Ge,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(qe[Te]=Ge[Te]);var lt=arguments.length-2;if(lt===1)qe.children=Se;else if(1<lt){for(var st=Array(lt),ht=0;ht<lt;ht++)st[ht]=arguments[ht+2];qe.children=st}if(ke&&ke.defaultProps)for(Te in lt=ke.defaultProps,lt)qe[Te]===void 0&&(qe[Te]=lt[Te]);return ge(ke,Ze,void 0,void 0,null,qe)},vi.createRef=function(){return{current:null}},vi.forwardRef=function(ke){return{$$typeof:n,render:ke}},vi.isValidElement=we,vi.lazy=function(ke){return{$$typeof:x,_payload:{_status:-1,_result:ke},_init:je}},vi.memo=function(ke,Ge){return{$$typeof:R,type:ke,compare:Ge===void 0?null:Ge}},vi.startTransition=function(ke){var Ge=se.T,Se={};se.T=Se;try{var Te=ke(),qe=se.S;qe!==null&&qe(Se,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(Qe,Ue)}catch(Ze){Ue(Ze)}finally{se.T=Ge}},vi.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},vi.use=function(ke){return se.H.use(ke)},vi.useActionState=function(ke,Ge,Se){return se.H.useActionState(ke,Ge,Se)},vi.useCallback=function(ke,Ge){return se.H.useCallback(ke,Ge)},vi.useContext=function(ke){return se.H.useContext(ke)},vi.useDebugValue=function(){},vi.useDeferredValue=function(ke,Ge){return se.H.useDeferredValue(ke,Ge)},vi.useEffect=function(ke,Ge){return se.H.useEffect(ke,Ge)},vi.useId=function(){return se.H.useId()},vi.useImperativeHandle=function(ke,Ge,Se){return se.H.useImperativeHandle(ke,Ge,Se)},vi.useInsertionEffect=function(ke,Ge){return se.H.useInsertionEffect(ke,Ge)},vi.useLayoutEffect=function(ke,Ge){return se.H.useLayoutEffect(ke,Ge)},vi.useMemo=function(ke,Ge){return se.H.useMemo(ke,Ge)},vi.useOptimistic=function(ke,Ge){return se.H.useOptimistic(ke,Ge)},vi.useReducer=function(ke,Ge,Se){return se.H.useReducer(ke,Ge,Se)},vi.useRef=function(ke){return se.H.useRef(ke)},vi.useState=function(ke){return se.H.useState(ke)},vi.useSyncExternalStore=function(ke,Ge,Se){return se.H.useSyncExternalStore(ke,Ge,Se)},vi.useTransition=function(){return se.H.useTransition()},vi.version="19.0.0",vi}var h6;function i3(){return h6||(h6=1,cN.exports=mne()),cN.exports}var le=i3();const Ot=ns(le);var dN={exports:{}},Dw={},hN={exports:{}},fN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f6;function gne(){return f6||(f6=1,function(t){function e(Me,je){var Ue=Me.length;Me.push(je);e:for(;0<Ue;){var Qe=Ue-1>>>1,ke=Me[Qe];if(0<i(ke,je))Me[Qe]=je,Me[Ue]=ke,Ue=Qe;else break e}}function a(Me){return Me.length===0?null:Me[0]}function r(Me){if(Me.length===0)return null;var je=Me[0],Ue=Me.pop();if(Ue!==je){Me[0]=Ue;e:for(var Qe=0,ke=Me.length,Ge=ke>>>1;Qe<Ge;){var Se=2*(Qe+1)-1,Te=Me[Se],qe=Se+1,Ze=Me[qe];if(0>i(Te,Ue))qe<ke&&0>i(Ze,Te)?(Me[Qe]=Ze,Me[qe]=Ue,Qe=qe):(Me[Qe]=Te,Me[Se]=Ue,Qe=Se);else if(qe<ke&&0>i(Ze,Ue))Me[Qe]=Ze,Me[qe]=Ue,Qe=qe;else break e}}return je}function i(Me,je){var Ue=Me.sortIndex-je.sortIndex;return Ue!==0?Ue:Me.id-je.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,n=c.now();t.unstable_now=function(){return c.now()-n}}var v=[],R=[],x=1,N=null,L=3,F=!1,j=!1,H=!1,q=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function oe(Me){for(var je=a(R);je!==null;){if(je.callback===null)r(R);else if(je.startTime<=Me)r(R),je.sortIndex=je.expirationTime,e(v,je);else break;je=a(R)}}function fe(Me){if(H=!1,oe(Me),!j)if(a(v)!==null)j=!0,xe();else{var je=a(R);je!==null&&ze(fe,je.startTime-Me)}}var se=!1,me=-1,ge=5,Re=-1;function we(){return!(t.unstable_now()-Re<ge)}function Ee(){if(se){var Me=t.unstable_now();Re=Me;var je=!0;try{e:{j=!1,H&&(H=!1,W(me),me=-1),F=!0;var Ue=L;try{t:{for(oe(Me),N=a(v);N!==null&&!(N.expirationTime>Me&&we());){var Qe=N.callback;if(typeof Qe=="function"){N.callback=null,L=N.priorityLevel;var ke=Qe(N.expirationTime<=Me);if(Me=t.unstable_now(),typeof ke=="function"){N.callback=ke,oe(Me),je=!0;break t}N===a(v)&&r(v),oe(Me)}else r(v);N=a(v)}if(N!==null)je=!0;else{var Ge=a(R);Ge!==null&&ze(fe,Ge.startTime-Me),je=!1}}break e}finally{N=null,L=Ue,F=!1}je=void 0}}finally{je?ae():se=!1}}}var ae;if(typeof ee=="function")ae=function(){ee(Ee)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Ie=_e.port2;_e.port1.onmessage=Ee,ae=function(){Ie.postMessage(null)}}else ae=function(){q(Ee,0)};function xe(){se||(se=!0,ae())}function ze(Me,je){me=q(function(){Me(t.unstable_now())},je)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Me){Me.callback=null},t.unstable_continueExecution=function(){j||F||(j=!0,xe())},t.unstable_forceFrameRate=function(Me){0>Me||125<Me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<Me?Math.floor(1e3/Me):5},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_getFirstCallbackNode=function(){return a(v)},t.unstable_next=function(Me){switch(L){case 1:case 2:case 3:var je=3;break;default:je=L}var Ue=L;L=je;try{return Me()}finally{L=Ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Me,je){switch(Me){case 1:case 2:case 3:case 4:case 5:break;default:Me=3}var Ue=L;L=Me;try{return je()}finally{L=Ue}},t.unstable_scheduleCallback=function(Me,je,Ue){var Qe=t.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?Qe+Ue:Qe):Ue=Qe,Me){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=Ue+ke,Me={id:x++,callback:je,priorityLevel:Me,startTime:Ue,expirationTime:ke,sortIndex:-1},Ue>Qe?(Me.sortIndex=Ue,e(R,Me),a(v)===null&&Me===a(R)&&(H?(W(me),me=-1):H=!0,ze(fe,Ue-Qe))):(Me.sortIndex=ke,e(v,Me),j||F||(j=!0,xe())),Me},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(Me){var je=L;return function(){var Ue=L;L=je;try{return Me.apply(this,arguments)}finally{L=Ue}}}}(fN)),fN}var p6;function yne(){return p6||(p6=1,hN.exports=gne()),hN.exports}var pN={exports:{}},od={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m6;function Ane(){if(m6)return od;m6=1;var t=i3();function e(v){var R="https://react.dev/errors/"+v;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)R+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(v,R,x){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:N==null?null:""+N,children:v,containerInfo:R,implementation:x}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(v,R){if(v==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return od.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,od.createPortal=function(v,R){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(e(299));return l(v,R,null,x)},od.flushSync=function(v){var R=c.T,x=r.p;try{if(c.T=null,r.p=2,v)return v()}finally{c.T=R,r.p=x,r.d.f()}},od.preconnect=function(v,R){typeof v=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,r.d.C(v,R))},od.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},od.preinit=function(v,R){if(typeof v=="string"&&R&&typeof R.as=="string"){var x=R.as,N=n(x,R.crossOrigin),L=typeof R.integrity=="string"?R.integrity:void 0,F=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;x==="style"?r.d.S(v,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:N,integrity:L,fetchPriority:F}):x==="script"&&r.d.X(v,{crossOrigin:N,integrity:L,fetchPriority:F,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},od.preinitModule=function(v,R){if(typeof v=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var x=n(R.as,R.crossOrigin);r.d.M(v,{crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&r.d.M(v)},od.preload=function(v,R){if(typeof v=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var x=R.as,N=n(x,R.crossOrigin);r.d.L(v,x,{crossOrigin:N,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},od.preloadModule=function(v,R){if(typeof v=="string")if(R){var x=n(R.as,R.crossOrigin);r.d.m(v,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else r.d.m(v)},od.requestFormReset=function(v){r.d.r(v)},od.unstable_batchedUpdates=function(v,R){return v(R)},od.useFormState=function(v,R,x){return c.H.useFormState(v,R,x)},od.useFormStatus=function(){return c.H.useHostTransitionStatus()},od.version="19.0.0",od}var g6;function z$(){if(g6)return pN.exports;g6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pN.exports=Ane(),pN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y6;function vne(){if(y6)return Dw;y6=1;var t=yne(),e=i3(),a=z$();function r(p){var w="https://react.dev/errors/"+p;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var P=2;P<arguments.length;P++)w+="&args[]="+encodeURIComponent(arguments[P])}return"Minified React error #"+p+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),F=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),fe=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function me(p){return p===null||typeof p!="object"?null:(p=se&&p[se]||p["@@iterator"],typeof p=="function"?p:null)}var ge=Symbol.for("react.client.reference");function Re(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===ge?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case v:return"Fragment";case n:return"Portal";case x:return"Profiler";case R:return"StrictMode";case H:return"Suspense";case q:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case F:return(p.displayName||"Context")+".Provider";case L:return(p._context.displayName||"Context")+".Consumer";case j:var w=p.render;return p=p.displayName,p||(p=w.displayName||w.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case W:return w=p.displayName||null,w!==null?w:Re(p.type)||"Memo";case ee:w=p._payload,p=p._init;try{return Re(p(w))}catch{}}return null}var we=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=Object.assign,ae,_e;function Ie(p){if(ae===void 0)try{throw Error()}catch(P){var w=P.stack.trim().match(/\n( *(at )?)/);ae=w&&w[1]||"",_e=-1<P.stack.indexOf(`
    at`)?" (<anonymous>)":-1<P.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+p+_e}var xe=!1;function ze(p,w){if(!p||xe)return"";xe=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var U={DetermineComponentFrameRoot:function(){try{if(w){var sr=function(){throw Error()};if(Object.defineProperty(sr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(sr,[])}catch(qa){var xa=qa}Reflect.construct(p,[],sr)}else{try{sr.call()}catch(qa){xa=qa}p.call(sr.prototype)}}else{try{throw Error()}catch(qa){xa=qa}(sr=p())&&typeof sr.catch=="function"&&sr.catch(function(){})}}catch(qa){if(qa&&xa&&typeof qa.stack=="string")return[qa.stack,xa.stack]}return[null,null]}};U.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var X=Object.getOwnPropertyDescriptor(U.DetermineComponentFrameRoot,"name");X&&X.configurable&&Object.defineProperty(U.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ue=U.DetermineComponentFrameRoot(),Be=ue[0],ft=ue[1];if(Be&&ft){var Bt=Be.split(`
`),la=ft.split(`
`);for(X=U=0;U<Bt.length&&!Bt[U].includes("DetermineComponentFrameRoot");)U++;for(;X<la.length&&!la[X].includes("DetermineComponentFrameRoot");)X++;if(U===Bt.length||X===la.length)for(U=Bt.length-1,X=la.length-1;1<=U&&0<=X&&Bt[U]!==la[X];)X--;for(;1<=U&&0<=X;U--,X--)if(Bt[U]!==la[X]){if(U!==1||X!==1)do if(U--,X--,0>X||Bt[U]!==la[X]){var Za=`
`+Bt[U].replace(" at new "," at ");return p.displayName&&Za.includes("<anonymous>")&&(Za=Za.replace("<anonymous>",p.displayName)),Za}while(1<=U&&0<=X);break}}}finally{xe=!1,Error.prepareStackTrace=P}return(P=p?p.displayName||p.name:"")?Ie(P):""}function Me(p){switch(p.tag){case 26:case 27:case 5:return Ie(p.type);case 16:return Ie("Lazy");case 13:return Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return p=ze(p.type,!1),p;case 11:return p=ze(p.type.render,!1),p;case 1:return p=ze(p.type,!0),p;default:return""}}function je(p){try{var w="";do w+=Me(p),p=p.return;while(p);return w}catch(P){return`
Error generating stack: `+P.message+`
`+P.stack}}function Ue(p){var w=p,P=p;if(p.alternate)for(;w.return;)w=w.return;else{p=w;do w=p,(w.flags&4098)!==0&&(P=w.return),p=w.return;while(p)}return w.tag===3?P:null}function Qe(p){if(p.tag===13){var w=p.memoizedState;if(w===null&&(p=p.alternate,p!==null&&(w=p.memoizedState)),w!==null)return w.dehydrated}return null}function ke(p){if(Ue(p)!==p)throw Error(r(188))}function Ge(p){var w=p.alternate;if(!w){if(w=Ue(p),w===null)throw Error(r(188));return w!==p?null:p}for(var P=p,U=w;;){var X=P.return;if(X===null)break;var ue=X.alternate;if(ue===null){if(U=X.return,U!==null){P=U;continue}break}if(X.child===ue.child){for(ue=X.child;ue;){if(ue===P)return ke(X),p;if(ue===U)return ke(X),w;ue=ue.sibling}throw Error(r(188))}if(P.return!==U.return)P=X,U=ue;else{for(var Be=!1,ft=X.child;ft;){if(ft===P){Be=!0,P=X,U=ue;break}if(ft===U){Be=!0,U=X,P=ue;break}ft=ft.sibling}if(!Be){for(ft=ue.child;ft;){if(ft===P){Be=!0,P=ue,U=X;break}if(ft===U){Be=!0,U=ue,P=X;break}ft=ft.sibling}if(!Be)throw Error(r(189))}}if(P.alternate!==U)throw Error(r(190))}if(P.tag!==3)throw Error(r(188));return P.stateNode.current===P?p:w}function Se(p){var w=p.tag;if(w===5||w===26||w===27||w===6)return p;for(p=p.child;p!==null;){if(w=Se(p),w!==null)return w;p=p.sibling}return null}var Te=Array.isArray,qe=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze={pending:!1,data:null,method:null,action:null},lt=[],st=-1;function ht(p){return{current:p}}function He(p){0>st||(p.current=lt[st],lt[st]=null,st--)}function Ae(p,w){st++,lt[st]=p.current,p.current=w}var zt=ht(null),kt=ht(null),ma=ht(null),It=ht(null);function Ht(p,w){switch(Ae(ma,w),Ae(kt,p),Ae(zt,null),p=w.nodeType,p){case 9:case 11:w=(w=w.documentElement)&&(w=w.namespaceURI)?U1(w):0;break;default:if(p=p===8?w.parentNode:w,w=p.tagName,p=p.namespaceURI)p=U1(p),w=B1(p,w);else switch(w){case"svg":w=1;break;case"math":w=2;break;default:w=0}}He(zt),Ae(zt,w)}function _t(){He(zt),He(kt),He(ma)}function ir(p){p.memoizedState!==null&&Ae(It,p);var w=zt.current,P=B1(w,p.type);w!==P&&(Ae(kt,p),Ae(zt,P))}function Ea(p){kt.current===p&&(He(zt),He(kt)),It.current===p&&(He(It),hy._currentValue=Ze)}var Na=Object.prototype.hasOwnProperty,Ja=t.unstable_scheduleCallback,cr=t.unstable_cancelCallback,dr=t.unstable_shouldYield,Sr=t.unstable_requestPaint,ka=t.unstable_now,Gr=t.unstable_getCurrentPriorityLevel,dn=t.unstable_ImmediatePriority,Cn=t.unstable_UserBlockingPriority,fn=t.unstable_NormalPriority,va=t.unstable_LowPriority,Wa=t.unstable_IdlePriority,ua=t.log,Xa=t.unstable_setDisableYieldValue,pr=null,Mn=null;function Sn(p){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(pr,p,void 0,(p.current.flags&128)===128)}catch{}}function hn(p){if(typeof ua=="function"&&Xa(p),Mn&&typeof Mn.setStrictMode=="function")try{Mn.setStrictMode(pr,p)}catch{}}var $r=Math.clz32?Math.clz32:zi,br=Math.log,$i=Math.LN2;function zi(p){return p>>>=0,p===0?32:31-(br(p)/$i|0)|0}var Ui=128,ao=4194304;function di(p){var w=p&42;if(w!==0)return w;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function rn(p,w){var P=p.pendingLanes;if(P===0)return 0;var U=0,X=p.suspendedLanes,ue=p.pingedLanes,Be=p.warmLanes;p=p.finishedLanes!==0;var ft=P&134217727;return ft!==0?(P=ft&~X,P!==0?U=di(P):(ue&=ft,ue!==0?U=di(ue):p||(Be=ft&~Be,Be!==0&&(U=di(Be))))):(ft=P&~X,ft!==0?U=di(ft):ue!==0?U=di(ue):p||(Be=P&~Be,Be!==0&&(U=di(Be)))),U===0?0:w!==0&&w!==U&&(w&X)===0&&(X=U&-U,Be=w&-w,X>=Be||X===32&&(Be&4194176)!==0)?w:U}function Jn(p,w){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&w)===0}function vu(p,w){switch(p){case 1:case 2:case 4:case 8:return w+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function us(){var p=Ui;return Ui<<=1,(Ui&4194176)===0&&(Ui=128),p}function Xt(){var p=ao;return ao<<=1,(ao&62914560)===0&&(ao=4194304),p}function Ne(p){for(var w=[],P=0;31>P;P++)w.push(p);return w}function Fe(p,w){p.pendingLanes|=w,w!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function Xe(p,w,P,U,X,ue){var Be=p.pendingLanes;p.pendingLanes=P,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=P,p.entangledLanes&=P,p.errorRecoveryDisabledLanes&=P,p.shellSuspendCounter=0;var ft=p.entanglements,Bt=p.expirationTimes,la=p.hiddenUpdates;for(P=Be&~P;0<P;){var Za=31-$r(P),sr=1<<Za;ft[Za]=0,Bt[Za]=-1;var xa=la[Za];if(xa!==null)for(la[Za]=null,Za=0;Za<xa.length;Za++){var qa=xa[Za];qa!==null&&(qa.lane&=-536870913)}P&=~sr}U!==0&&wt(p,U,0),ue!==0&&X===0&&p.tag!==0&&(p.suspendedLanes|=ue&~(Be&~w))}function wt(p,w,P){p.pendingLanes|=w,p.suspendedLanes&=~w;var U=31-$r(w);p.entangledLanes|=w,p.entanglements[U]=p.entanglements[U]|1073741824|P&4194218}function yt(p,w){var P=p.entangledLanes|=w;for(p=p.entanglements;P;){var U=31-$r(P),X=1<<U;X&w|p[U]&w&&(p[U]|=w),P&=~X}}function bt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Gt(){var p=qe.p;return p!==0?p:(p=window.event,p===void 0?32:HC(p.type))}function Et(p,w){var P=qe.p;try{return qe.p=p,w()}finally{qe.p=P}}var Kt=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Kt,$t="__reactProps$"+Kt,Ta="__reactContainer$"+Kt,Ma="__reactEvents$"+Kt,ja="__reactListeners$"+Kt,_r="__reactHandles$"+Kt,Vr="__reactResources$"+Kt,zr="__reactMarker$"+Kt;function Zr(p){delete p[Wt],delete p[$t],delete p[Ma],delete p[ja],delete p[_r]}function In(p){var w=p[Wt];if(w)return w;for(var P=p.parentNode;P;){if(w=P[Ta]||P[Wt]){if(P=w.alternate,w.child!==null||P!==null&&P.child!==null)for(p=q1(p);p!==null;){if(P=p[Wt])return P;p=q1(p)}return w}p=P,P=p.parentNode}return null}function ei(p){if(p=p[Wt]||p[Ta]){var w=p.tag;if(w===5||w===6||w===13||w===26||w===27||w===3)return p}return null}function Hr(p){var w=p.tag;if(w===5||w===26||w===27||w===6)return p.stateNode;throw Error(r(33))}function An(p){var w=p[Vr];return w||(w=p[Vr]={hoistableStyles:new Map,hoistableScripts:new Map}),w}function Kr(p){p[zr]=!0}var Fn=new Set,Di={};function Ki(p,w){bs(p,w),bs(p+"Capture",w)}function bs(p,w){for(Di[p]=w,p=0;p<w.length;p++)Fn.add(w[p])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ps={},qs={};function fc(p){return Na.call(qs,p)?!0:Na.call(Ps,p)?!1:Uo.test(p)?qs[p]=!0:(Ps[p]=!0,!1)}function el(p,w,P){if(fc(w))if(P===null)p.removeAttribute(w);else{switch(typeof P){case"undefined":case"function":case"symbol":p.removeAttribute(w);return;case"boolean":var U=w.toLowerCase().slice(0,5);if(U!=="data-"&&U!=="aria-"){p.removeAttribute(w);return}}p.setAttribute(w,""+P)}}function Mi(p,w,P){if(P===null)p.removeAttribute(w);else{switch(typeof P){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(w);return}p.setAttribute(w,""+P)}}function Yl(p,w,P,U){if(U===null)p.removeAttribute(P);else{switch(typeof U){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(P);return}p.setAttributeNS(w,P,""+U)}}function Bo(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Pd(p){var w=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(w==="checkbox"||w==="radio")}function Fc(p){var w=Pd(p)?"checked":"value",P=Object.getOwnPropertyDescriptor(p.constructor.prototype,w),U=""+p[w];if(!p.hasOwnProperty(w)&&typeof P<"u"&&typeof P.get=="function"&&typeof P.set=="function"){var X=P.get,ue=P.set;return Object.defineProperty(p,w,{configurable:!0,get:function(){return X.call(this)},set:function(Be){U=""+Be,ue.call(this,Be)}}),Object.defineProperty(p,w,{enumerable:P.enumerable}),{getValue:function(){return U},setValue:function(Be){U=""+Be},stopTracking:function(){p._valueTracker=null,delete p[w]}}}}function fh(p){p._valueTracker||(p._valueTracker=Fc(p))}function _u(p){if(!p)return!1;var w=p._valueTracker;if(!w)return!0;var P=w.getValue(),U="";return p&&(U=Pd(p)?p.checked?"true":"false":p.value),p=U,p!==P?(w.setValue(p),!0):!1}function kc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var yl=/[\n"\\]/g;function ro(p){return p.replace(yl,function(w){return"\\"+w.charCodeAt(0).toString(16)+" "})}function jo(p,w,P,U,X,ue,Be,ft){p.name="",Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"?p.type=Be:p.removeAttribute("type"),w!=null?Be==="number"?(w===0&&p.value===""||p.value!=w)&&(p.value=""+Bo(w)):p.value!==""+Bo(w)&&(p.value=""+Bo(w)):Be!=="submit"&&Be!=="reset"||p.removeAttribute("value"),w!=null?wu(p,Be,Bo(w)):P!=null?wu(p,Be,Bo(P)):U!=null&&p.removeAttribute("value"),X==null&&ue!=null&&(p.defaultChecked=!!ue),X!=null&&(p.checked=X&&typeof X!="function"&&typeof X!="symbol"),ft!=null&&typeof ft!="function"&&typeof ft!="symbol"&&typeof ft!="boolean"?p.name=""+Bo(ft):p.removeAttribute("name")}function Xl(p,w,P,U,X,ue,Be,ft){if(ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(p.type=ue),w!=null||P!=null){if(!(ue!=="submit"&&ue!=="reset"||w!=null))return;P=P!=null?""+Bo(P):"",w=w!=null?""+Bo(w):P,ft||w===p.value||(p.value=w),p.defaultValue=w}U=U??X,U=typeof U!="function"&&typeof U!="symbol"&&!!U,p.checked=ft?p.checked:!!U,p.defaultChecked=!!U,Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"&&(p.name=Be)}function wu(p,w,P){w==="number"&&kc(p.ownerDocument)===p||p.defaultValue===""+P||(p.defaultValue=""+P)}function po(p,w,P,U){if(p=p.options,w){w={};for(var X=0;X<P.length;X++)w["$"+P[X]]=!0;for(P=0;P<p.length;P++)X=w.hasOwnProperty("$"+p[P].value),p[P].selected!==X&&(p[P].selected=X),X&&U&&(p[P].defaultSelected=!0)}else{for(P=""+Bo(P),w=null,X=0;X<p.length;X++){if(p[X].value===P){p[X].selected=!0,U&&(p[X].defaultSelected=!0);return}w!==null||p[X].disabled||(w=p[X])}w!==null&&(w.selected=!0)}}function Go(p,w,P){if(w!=null&&(w=""+Bo(w),w!==p.value&&(p.value=w),P==null)){p.defaultValue!==w&&(p.defaultValue=w);return}p.defaultValue=P!=null?""+Bo(P):""}function Ed(p,w,P,U){if(w==null){if(U!=null){if(P!=null)throw Error(r(92));if(Te(U)){if(1<U.length)throw Error(r(93));U=U[0]}P=U}P==null&&(P=""),w=P}P=Bo(w),p.defaultValue=P,U=p.textContent,U===P&&U!==""&&U!==null&&(p.value=U)}function $u(p,w){if(w){var P=p.firstChild;if(P&&P===p.lastChild&&P.nodeType===3){P.nodeValue=w;return}}p.textContent=w}var Rf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jl(p,w,P){var U=w.indexOf("--")===0;P==null||typeof P=="boolean"||P===""?U?p.setProperty(w,""):w==="float"?p.cssFloat="":p[w]="":U?p.setProperty(w,P):typeof P!="number"||P===0||Rf.has(w)?w==="float"?p.cssFloat=P:p[w]=(""+P).trim():p[w]=P+"px"}function Zo(p,w,P){if(w!=null&&typeof w!="object")throw Error(r(62));if(p=p.style,P!=null){for(var U in P)!P.hasOwnProperty(U)||w!=null&&w.hasOwnProperty(U)||(U.indexOf("--")===0?p.setProperty(U,""):U==="float"?p.cssFloat="":p[U]="");for(var X in w)U=w[X],w.hasOwnProperty(X)&&P[X]!==U&&Jl(p,X,U)}else for(var ue in w)w.hasOwnProperty(ue)&&Jl(p,ue,w[ue])}function Ku(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function En(p){return tl.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var mo=null;function mr(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Uc=null,vn=null;function mh(p){var w=ei(p);if(w&&(p=w.stateNode)){var P=p[$t]||null;e:switch(p=w.stateNode,w.type){case"input":if(jo(p,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name),w=P.name,P.type==="radio"&&w!=null){for(P=p;P.parentNode;)P=P.parentNode;for(P=P.querySelectorAll('input[name="'+ro(""+w)+'"][type="radio"]'),w=0;w<P.length;w++){var U=P[w];if(U!==p&&U.form===p.form){var X=U[$t]||null;if(!X)throw Error(r(90));jo(U,X.value,X.defaultValue,X.defaultValue,X.checked,X.defaultChecked,X.type,X.name)}}for(w=0;w<P.length;w++)U=P[w],U.form===p.form&&_u(U)}break e;case"textarea":Go(p,P.value,P.defaultValue);break e;case"select":w=P.value,w!=null&&po(p,!!P.multiple,w,!1)}}}var bn=!1;function Hs(p,w,P){if(bn)return p(w,P);bn=!0;try{var U=p(w);return U}finally{if(bn=!1,(Uc!==null||vn!==null)&&(Qv(),Uc&&(w=Uc,p=vn,vn=Uc=null,mh(w),p)))for(w=0;w<p.length;w++)mh(p[w])}}function pc(p,w){var P=p.stateNode;if(P===null)return null;var U=P[$t]||null;if(U===null)return null;P=U[w];e:switch(w){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(U=!U.disabled)||(p=p.type,U=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!U;break e;default:p=!1}if(p)return null;if(P&&typeof P!="function")throw Error(r(231,w,typeof P));return P}var mc=!1;if(xs)try{var er={};Object.defineProperty(er,"passive",{get:function(){mc=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{mc=!1}var nn=null,_n=null,$s=null;function Nd(){if($s)return $s;var p,w=_n,P=w.length,U,X="value"in nn?nn.value:nn.textContent,ue=X.length;for(p=0;p<P&&w[p]===X[p];p++);var Be=P-p;for(U=1;U<=Be&&w[P-U]===X[ue-U];U++);return $s=X.slice(p,1<U?1-U:void 0)}function pn(p){var w=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&w===13&&(p=13)):p=w,p===10&&(p=13),32<=p||p===13?p:0}function qo(){return!0}function Ru(){return!1}function Es(p){function w(P,U,X,ue,Be){this._reactName=P,this._targetInst=X,this.type=U,this.nativeEvent=ue,this.target=Be,this.currentTarget=null;for(var ft in p)p.hasOwnProperty(ft)&&(P=p[ft],this[ft]=P?P(ue):ue[ft]);return this.isDefaultPrevented=(ue.defaultPrevented!=null?ue.defaultPrevented:ue.returnValue===!1)?qo:Ru,this.isPropagationStopped=Ru,this}return Ee(w.prototype,{preventDefault:function(){this.defaultPrevented=!0;var P=this.nativeEvent;P&&(P.preventDefault?P.preventDefault():typeof P.returnValue!="unknown"&&(P.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var P=this.nativeEvent;P&&(P.stopPropagation?P.stopPropagation():typeof P.cancelBubble!="unknown"&&(P.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),w}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Es(Gi),go=Ee({},Gi,{view:0,detail:0}),Od=Es(go),gh,gc,yc,al=Ee({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==yc&&(yc&&p.type==="mousemove"?(gh=p.screenX-yc.screenX,gc=p.screenY-yc.screenY):gc=gh=0,yc=p),gh)},movementY:function(p){return"movementY"in p?p.movementY:gc}}),ms=Es(al),Wu=Ee({},al,{dataTransfer:0}),Ns=Es(Wu),Vl=Ee({},go,{relatedTarget:0}),rl=Es(Vl),Wi=Ee({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ks=Es(Wi),Ql=Ee({},Gi,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),cs=Es(Ql),Bh=Ee({},Gi,{data:0}),Ho=Es(Bh),Vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(p){var w=this.nativeEvent;return w.getModifierState?w.getModifierState(p):(p=Cu[p])?!!w[p]:!1}function eu(){return sp}var Jm=Ee({},go,{key:function(p){if(p.key){var w=Vd[p.key]||p.key;if(w!=="Unidentified")return w}return p.type==="keypress"?(p=pn(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Tu[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(p){return p.type==="keypress"?pn(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?pn(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),zd=Es(Jm),Ws=Ee({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=Es(Ws),tu=Ee({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),Cf=Es(tu),ce=Ee({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Es(ce),Mt=Ee({},al,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Jt=Es(Mt),ha=Ee({},Gi,{newState:0,oldState:0}),Da=Es(ha),nr=[9,13,27,32],Rr=xs&&"CompositionEvent"in window,Wr=null;xs&&"documentMode"in document&&(Wr=document.documentMode);var xn=xs&&"TextEvent"in window&&!Wr,zn=xs&&(!Rr||Wr&&8<Wr&&11>=Wr),yi=" ",Os=!1;function Vs(p,w){switch(p){case"keyup":return nr.indexOf(w.keyCode)!==-1;case"keydown":return w.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var is=!1;function Nr(p,w){switch(p){case"compositionend":return no(w);case"keypress":return w.which!==32?null:(Os=!0,yi);case"textInput":return p=w.data,p===yi&&Os?null:p;default:return null}}function or(p,w){if(is)return p==="compositionend"||!Rr&&Vs(p,w)?(p=Nd(),$s=_n=nn=null,is=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(w.ctrlKey||w.altKey||w.metaKey)||w.ctrlKey&&w.altKey){if(w.char&&1<w.char.length)return w.char;if(w.which)return String.fromCharCode(w.which)}return null;case"compositionend":return zn&&w.locale!=="ko"?null:w.data;default:return null}}var Al={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tr(p){var w=p&&p.nodeName&&p.nodeName.toLowerCase();return w==="input"?!!Al[p.type]:w==="textarea"}function Su(p,w,P,U){Uc?vn?vn.push(U):vn=[U]:Uc=U,w=Uf(w,"onChange"),0<w.length&&(P=new Ei("onChange","change",null,P,U),p.push({event:P,listeners:w}))}var au=null,wr=null;function yh(p){s0(p,0)}function ru(p){var w=Hr(p);if(_u(w))return p}function Ac(p,w){if(p==="change")return w}var Dd=!1;if(xs){var zs;if(xs){var wi="oninput"in document;if(!wi){var vc=document.createElement("div");vc.setAttribute("oninput","return;"),wi=typeof vc.oninput=="function"}zs=wi}else zs=!1;Dd=zs&&(!document.documentMode||9<document.documentMode)}function Va(){au&&(au.detachEvent("onpropertychange",Md),wr=au=null)}function Md(p){if(p.propertyName==="value"&&ru(wr)){var w=[];Su(w,wr,p,mr(p)),Hs(yh,w)}}function Ys(p,w,P){p==="focusin"?(Va(),au=w,wr=P,au.attachEvent("onpropertychange",Md)):p==="focusout"&&Va()}function yo(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return ru(wr)}function Sf(p,w){if(p==="click")return ru(w)}function jh(p,w){if(p==="input"||p==="change")return ru(w)}function Ao(p,w){return p===w&&(p!==0||1/p===1/w)||p!==p&&w!==w}var Us=typeof Object.is=="function"?Object.is:Ao;function zl(p,w){if(Us(p,w))return!0;if(typeof p!="object"||p===null||typeof w!="object"||w===null)return!1;var P=Object.keys(p),U=Object.keys(w);if(P.length!==U.length)return!1;for(U=0;U<P.length;U++){var X=P[U];if(!Na.call(w,X)||!Us(p[X],w[X]))return!1}return!0}function Bc(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function nu(p,w){var P=Bc(p);p=0;for(var U;P;){if(P.nodeType===3){if(U=p+P.textContent.length,p<=w&&U>=w)return{node:P,offset:w-p};p=U}e:{for(;P;){if(P.nextSibling){P=P.nextSibling;break e}P=P.parentNode}P=void 0}P=Bc(P)}}function Ah(p,w){return p&&w?p===w?!0:p&&p.nodeType===3?!1:w&&w.nodeType===3?Ah(p,w.parentNode):"contains"in p?p.contains(w):p.compareDocumentPosition?!!(p.compareDocumentPosition(w)&16):!1:!1}function Dl(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var w=kc(p.document);w instanceof p.HTMLIFrameElement;){try{var P=typeof w.contentWindow.location.href=="string"}catch{P=!1}if(P)p=w.contentWindow;else break;w=kc(p.document)}return w}function Po(p){var w=p&&p.nodeName&&p.nodeName.toLowerCase();return w&&(w==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||w==="textarea"||p.contentEditable==="true")}function Id(p,w){var P=Dl(w);w=p.focusedElem;var U=p.selectionRange;if(P!==w&&w&&w.ownerDocument&&Ah(w.ownerDocument.documentElement,w)){if(U!==null&&Po(w)){if(p=U.start,P=U.end,P===void 0&&(P=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(P,w.value.length);else if(P=(p=w.ownerDocument||document)&&p.defaultView||window,P.getSelection){P=P.getSelection();var X=w.textContent.length,ue=Math.min(U.start,X);U=U.end===void 0?ue:Math.min(U.end,X),!P.extend&&ue>U&&(X=U,U=ue,ue=X),X=nu(w,ue);var Be=nu(w,U);X&&Be&&(P.rangeCount!==1||P.anchorNode!==X.node||P.anchorOffset!==X.offset||P.focusNode!==Be.node||P.focusOffset!==Be.offset)&&(p=p.createRange(),p.setStart(X.node,X.offset),P.removeAllRanges(),ue>U?(P.addRange(p),P.extend(Be.node,Be.offset)):(p.setEnd(Be.node,Be.offset),P.addRange(p)))}}for(p=[],P=w;P=P.parentNode;)P.nodeType===1&&p.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)P=p[w],P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}var jc=xs&&"documentMode"in document&&11>=document.documentMode,Ml=null,_c=null,bu=null,Yi=!1;function bf(p,w,P){var U=P.window===P?P.document:P.nodeType===9?P:P.ownerDocument;Yi||Ml==null||Ml!==kc(U)||(U=Ml,"selectionStart"in U&&Po(U)?U={start:U.selectionStart,end:U.selectionEnd}:(U=(U.ownerDocument&&U.ownerDocument.defaultView||window).getSelection(),U={anchorNode:U.anchorNode,anchorOffset:U.anchorOffset,focusNode:U.focusNode,focusOffset:U.focusOffset}),bu&&zl(bu,U)||(bu=U,U=Uf(_c,"onSelect"),0<U.length&&(w=new Ei("onSelect","select",null,w,P),p.push({event:w,listeners:U}),w.target=Ml)))}function io(p,w){var P={};return P[p.toLowerCase()]=w.toLowerCase(),P["Webkit"+p]="webkit"+w,P["Moz"+p]="moz"+w,P}var vo={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionrun:io("Transition","TransitionRun"),transitionstart:io("Transition","TransitionStart"),transitioncancel:io("Transition","TransitionCancel"),transitionend:io("Transition","TransitionEnd")},Ld={},Fd={};xs&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function so(p){if(Ld[p])return Ld[p];if(!vo[p])return p;var w=vo[p],P;for(P in w)if(w.hasOwnProperty(P)&&P in Fd)return Ld[p]=w[P];return p}var Gc=so("animationend"),wc=so("animationiteration"),xu=so("animationstart"),Zc=so("transitionrun"),Pu=so("transitionstart"),qc=so("transitioncancel"),Rc=so("transitionend"),Yu=new Map,$o="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function gs(p,w){Yu.set(p,w),Ki(w,[p])}var Qn=[],ni=0,Xi=0;function ds(){for(var p=ni,w=Xi=ni=0;w<p;){var P=Qn[w];Qn[w++]=null;var U=Qn[w];Qn[w++]=null;var X=Qn[w];Qn[w++]=null;var ue=Qn[w];if(Qn[w++]=null,U!==null&&X!==null){var Be=U.pending;Be===null?X.next=X:(X.next=Be.next,Be.next=X),U.pending=X}ue!==0&&su(P,X,ue)}}function iu(p,w,P,U){Qn[ni++]=p,Qn[ni++]=w,Qn[ni++]=P,Qn[ni++]=U,Xi|=U,p.lanes|=U,p=p.alternate,p!==null&&(p.lanes|=U)}function Hc(p,w,P,U){return iu(p,w,P,U),an(p)}function nl(p,w){return iu(p,null,null,w),an(p)}function su(p,w,P){p.lanes|=P;var U=p.alternate;U!==null&&(U.lanes|=P);for(var X=!1,ue=p.return;ue!==null;)ue.childLanes|=P,U=ue.alternate,U!==null&&(U.childLanes|=P),ue.tag===22&&(p=ue.stateNode,p===null||p._visibility&1||(X=!0)),p=ue,ue=ue.return;X&&w!==null&&p.tag===3&&(ue=p.stateNode,X=31-$r(P),ue=ue.hiddenUpdates,p=ue[X],p===null?ue[X]=[w]:p.push(w),w.lane=P|536870912)}function an(p){if(50<Sl)throw Sl=0,Jd=null,Error(r(185));for(var w=p.return;w!==null;)p=w,w=p.return;return p.tag===3?p.stateNode:null}var $c={},Il=new WeakMap;function ss(p,w){if(typeof p=="object"&&p!==null){var P=Il.get(p);return P!==void 0?P:(w={value:p,source:w,stack:je(w)},Il.set(p,w),w)}return{value:p,source:w,stack:je(w)}}var Tc=[],kd=0,fi=null,Gh=0,il=[],vl=0,Kc=null,Eu=1,Xu="";function Cc(p,w){Tc[kd++]=Gh,Tc[kd++]=fi,fi=p,Gh=w}function em(p,w,P){il[vl++]=Eu,il[vl++]=Xu,il[vl++]=Kc,Kc=p;var U=Eu;p=Xu;var X=32-$r(U)-1;U&=~(1<<X),P+=1;var ue=32-$r(w)+X;if(30<ue){var Be=X-X%5;ue=(U&(1<<Be)-1).toString(32),U>>=Be,X-=Be,Eu=1<<32-$r(w)+X|P<<X|U,Xu=ue+p}else Eu=1<<ue|P<<X|U,Xu=p}function Zh(p){p.return!==null&&(Cc(p,1),em(p,1,0))}function qh(p){for(;p===fi;)fi=Tc[--kd],Tc[kd]=null,Gh=Tc[--kd],Tc[kd]=null;for(;p===Kc;)Kc=il[--vl],il[vl]=null,Xu=il[--vl],il[vl]=null,Eu=il[--vl],il[vl]=null}var sl=null,Ji=null,Ri=!1,ou=null,Nu=!1,op=Error(r(519));function Sc(p){var w=Error(r(418,""));throw Bd(ss(w,p)),op}function xf(p){var w=p.stateNode,P=p.type,U=p.memoizedProps;switch(w[Wt]=p,w[$t]=U,P){case"dialog":Fi("cancel",w),Fi("close",w);break;case"iframe":case"object":case"embed":Fi("load",w);break;case"video":case"audio":for(P=0;P<ug.length;P++)Fi(ug[P],w);break;case"source":Fi("error",w);break;case"img":case"image":case"link":Fi("error",w),Fi("load",w);break;case"details":Fi("toggle",w);break;case"input":Fi("invalid",w),Xl(w,U.value,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name,!0),fh(w);break;case"select":Fi("invalid",w);break;case"textarea":Fi("invalid",w),Ed(w,U.value,U.defaultValue,U.children),fh(w)}P=U.children,typeof P!="string"&&typeof P!="number"&&typeof P!="bigint"||w.textContent===""+P||U.suppressHydrationWarning===!0||Bf(w.textContent,P)?(U.popover!=null&&(Fi("beforetoggle",w),Fi("toggle",w)),U.onScroll!=null&&Fi("scroll",w),U.onScrollEnd!=null&&Fi("scrollend",w),U.onClick!=null&&(w.onclick=oy),w=!0):w=!1,w||Sc(p)}function Ud(p){for(sl=p.return;sl;)switch(sl.tag){case 3:case 27:Nu=!0;return;case 5:case 13:Nu=!1;return;default:sl=sl.return}}function Hh(p){if(p!==sl)return!1;if(!Ri)return Ud(p),Ri=!0,!1;var w=!1,P;if((P=p.tag!==3&&p.tag!==27)&&((P=p.tag===5)&&(P=p.type,P=!(P!=="form"&&P!=="button")||d0(p.type,p.memoizedProps)),P=!P),P&&(w=!0),w&&Ji&&Sc(p),Ud(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,w=0;p;){if(p.nodeType===8)if(P=p.data,P==="/$"){if(w===0){Ji=Bu(p.nextSibling);break e}w--}else P!=="$"&&P!=="$!"&&P!=="$?"||w++;p=p.nextSibling}Ji=null}}else Ji=sl?Bu(p.stateNode.nextSibling):null;return!0}function $h(){Ji=sl=null,Ri=!1}function Bd(p){ou===null?ou=[p]:ou.push(p)}var Pf=Error(r(460)),Qm=Error(r(474)),vh={then:function(){}};function qg(p){return p=p.status,p==="fulfilled"||p==="rejected"}function bc(){}function Ju(p,w,P){switch(P=p[P],P===void 0?p.push(w):P!==w&&(w.then(bc,bc),w=P),w.status){case"fulfilled":return w.value;case"rejected":throw p=w.reason,p===Pf?Error(r(483)):p;default:if(typeof w.status=="string")w.then(bc,bc);else{if(p=Ur,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=w,p.status="pending",p.then(function(U){if(w.status==="pending"){var X=w;X.status="fulfilled",X.value=U}},function(U){if(w.status==="pending"){var X=w;X.status="rejected",X.reason=U}})}switch(w.status){case"fulfilled":return w.value;case"rejected":throw p=w.reason,p===Pf?Error(r(483)):p}throw Ou=w,Pf}}var Ou=null;function Hg(){if(Ou===null)throw Error(r(459));var p=Ou;return Ou=null,p}var Kh=null,_l=0;function ol(p){var w=_l;return _l+=1,Kh===null&&(Kh=[]),Ju(Kh,p,w)}function Wh(p,w){w=w.props.ref,p.ref=w!==void 0?w:null}function jd(p,w){throw w.$$typeof===l?Error(r(525)):(p=Object.prototype.toString.call(w),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":p)))}function tm(p){var w=p._init;return w(p._payload)}function am(p){function w(ya,ia){if(p){var Ca=ya.deletions;Ca===null?(ya.deletions=[ia],ya.flags|=16):Ca.push(ia)}}function P(ya,ia){if(!p)return null;for(;ia!==null;)w(ya,ia),ia=ia.sibling;return null}function U(ya){for(var ia=new Map;ya!==null;)ya.key!==null?ia.set(ya.key,ya):ia.set(ya.index,ya),ya=ya.sibling;return ia}function X(ya,ia){return ya=Sa(ya,ia),ya.index=0,ya.sibling=null,ya}function ue(ya,ia,Ca){return ya.index=Ca,p?(Ca=ya.alternate,Ca!==null?(Ca=Ca.index,Ca<ia?(ya.flags|=33554434,ia):Ca):(ya.flags|=33554434,ia)):(ya.flags|=1048576,ia)}function Be(ya){return p&&ya.alternate===null&&(ya.flags|=33554434),ya}function ft(ya,ia,Ca,tr){return ia===null||ia.tag!==6?(ia=ta(Ca,ya.mode,tr),ia.return=ya,ia):(ia=X(ia,Ca),ia.return=ya,ia)}function Bt(ya,ia,Ca,tr){var Yr=Ca.type;return Yr===v?Za(ya,ia,Ca.props.children,tr,Ca.key):ia!==null&&(ia.elementType===Yr||typeof Yr=="object"&&Yr!==null&&Yr.$$typeof===ee&&tm(Yr)===ia.type)?(ia=X(ia,Ca.props),Wh(ia,Ca),ia.return=ya,ia):(ia=sa(Ca.type,Ca.key,Ca.props,null,ya.mode,tr),Wh(ia,Ca),ia.return=ya,ia)}function la(ya,ia,Ca,tr){return ia===null||ia.tag!==4||ia.stateNode.containerInfo!==Ca.containerInfo||ia.stateNode.implementation!==Ca.implementation?(ia=da(Ca,ya.mode,tr),ia.return=ya,ia):(ia=X(ia,Ca.children||[]),ia.return=ya,ia)}function Za(ya,ia,Ca,tr,Yr){return ia===null||ia.tag!==7?(ia=Vt(Ca,ya.mode,tr,Yr),ia.return=ya,ia):(ia=X(ia,Ca),ia.return=ya,ia)}function sr(ya,ia,Ca){if(typeof ia=="string"&&ia!==""||typeof ia=="number"||typeof ia=="bigint")return ia=ta(""+ia,ya.mode,Ca),ia.return=ya,ia;if(typeof ia=="object"&&ia!==null){switch(ia.$$typeof){case c:return Ca=sa(ia.type,ia.key,ia.props,null,ya.mode,Ca),Wh(Ca,ia),Ca.return=ya,Ca;case n:return ia=da(ia,ya.mode,Ca),ia.return=ya,ia;case ee:var tr=ia._init;return ia=tr(ia._payload),sr(ya,ia,Ca)}if(Te(ia)||me(ia))return ia=Vt(ia,ya.mode,Ca,null),ia.return=ya,ia;if(typeof ia.then=="function")return sr(ya,ol(ia),Ca);if(ia.$$typeof===F)return sr(ya,ac(ya,ia),Ca);jd(ya,ia)}return null}function xa(ya,ia,Ca,tr){var Yr=ia!==null?ia.key:null;if(typeof Ca=="string"&&Ca!==""||typeof Ca=="number"||typeof Ca=="bigint")return Yr!==null?null:ft(ya,ia,""+Ca,tr);if(typeof Ca=="object"&&Ca!==null){switch(Ca.$$typeof){case c:return Ca.key===Yr?Bt(ya,ia,Ca,tr):null;case n:return Ca.key===Yr?la(ya,ia,Ca,tr):null;case ee:return Yr=Ca._init,Ca=Yr(Ca._payload),xa(ya,ia,Ca,tr)}if(Te(Ca)||me(Ca))return Yr!==null?null:Za(ya,ia,Ca,tr,null);if(typeof Ca.then=="function")return xa(ya,ia,ol(Ca),tr);if(Ca.$$typeof===F)return xa(ya,ia,ac(ya,Ca),tr);jd(ya,Ca)}return null}function qa(ya,ia,Ca,tr,Yr){if(typeof tr=="string"&&tr!==""||typeof tr=="number"||typeof tr=="bigint")return ya=ya.get(Ca)||null,ft(ia,ya,""+tr,Yr);if(typeof tr=="object"&&tr!==null){switch(tr.$$typeof){case c:return ya=ya.get(tr.key===null?Ca:tr.key)||null,Bt(ia,ya,tr,Yr);case n:return ya=ya.get(tr.key===null?Ca:tr.key)||null,la(ia,ya,tr,Yr);case ee:var Ai=tr._init;return tr=Ai(tr._payload),qa(ya,ia,Ca,tr,Yr)}if(Te(tr)||me(tr))return ya=ya.get(Ca)||null,Za(ia,ya,tr,Yr,null);if(typeof tr.then=="function")return qa(ya,ia,Ca,ol(tr),Yr);if(tr.$$typeof===F)return qa(ya,ia,Ca,ac(ia,tr),Yr);jd(ia,tr)}return null}function Jr(ya,ia,Ca,tr){for(var Yr=null,Ai=null,un=ia,On=ia=0,du=null;un!==null&&On<Ca.length;On++){un.index>On?(du=un,un=null):du=un.sibling;var os=xa(ya,un,Ca[On],tr);if(os===null){un===null&&(un=du);break}p&&un&&os.alternate===null&&w(ya,un),ia=ue(os,ia,On),Ai===null?Yr=os:Ai.sibling=os,Ai=os,un=du}if(On===Ca.length)return P(ya,un),Ri&&Cc(ya,On),Yr;if(un===null){for(;On<Ca.length;On++)un=sr(ya,Ca[On],tr),un!==null&&(ia=ue(un,ia,On),Ai===null?Yr=un:Ai.sibling=un,Ai=un);return Ri&&Cc(ya,On),Yr}for(un=U(un);On<Ca.length;On++)du=qa(un,ya,On,Ca[On],tr),du!==null&&(p&&du.alternate!==null&&un.delete(du.key===null?On:du.key),ia=ue(du,ia,On),Ai===null?Yr=du:Ai.sibling=du,Ai=du);return p&&un.forEach(function(Cm){return w(ya,Cm)}),Ri&&Cc(ya,On),Yr}function ti(ya,ia,Ca,tr){if(Ca==null)throw Error(r(151));for(var Yr=null,Ai=null,un=ia,On=ia=0,du=null,os=Ca.next();un!==null&&!os.done;On++,os=Ca.next()){un.index>On?(du=un,un=null):du=un.sibling;var Cm=xa(ya,un,os.value,tr);if(Cm===null){un===null&&(un=du);break}p&&un&&Cm.alternate===null&&w(ya,un),ia=ue(Cm,ia,On),Ai===null?Yr=Cm:Ai.sibling=Cm,Ai=Cm,un=du}if(os.done)return P(ya,un),Ri&&Cc(ya,On),Yr;if(un===null){for(;!os.done;On++,os=Ca.next())os=sr(ya,os.value,tr),os!==null&&(ia=ue(os,ia,On),Ai===null?Yr=os:Ai.sibling=os,Ai=os);return Ri&&Cc(ya,On),Yr}for(un=U(un);!os.done;On++,os=Ca.next())os=qa(un,ya,On,os.value,tr),os!==null&&(p&&os.alternate!==null&&un.delete(os.key===null?On:os.key),ia=ue(os,ia,On),Ai===null?Yr=os:Ai.sibling=os,Ai=os);return p&&un.forEach(function(yE){return w(ya,yE)}),Ri&&Cc(ya,On),Yr}function Jo(ya,ia,Ca,tr){if(typeof Ca=="object"&&Ca!==null&&Ca.type===v&&Ca.key===null&&(Ca=Ca.props.children),typeof Ca=="object"&&Ca!==null){switch(Ca.$$typeof){case c:e:{for(var Yr=Ca.key;ia!==null;){if(ia.key===Yr){if(Yr=Ca.type,Yr===v){if(ia.tag===7){P(ya,ia.sibling),tr=X(ia,Ca.props.children),tr.return=ya,ya=tr;break e}}else if(ia.elementType===Yr||typeof Yr=="object"&&Yr!==null&&Yr.$$typeof===ee&&tm(Yr)===ia.type){P(ya,ia.sibling),tr=X(ia,Ca.props),Wh(tr,Ca),tr.return=ya,ya=tr;break e}P(ya,ia);break}else w(ya,ia);ia=ia.sibling}Ca.type===v?(tr=Vt(Ca.props.children,ya.mode,tr,Ca.key),tr.return=ya,ya=tr):(tr=sa(Ca.type,Ca.key,Ca.props,null,ya.mode,tr),Wh(tr,Ca),tr.return=ya,ya=tr)}return Be(ya);case n:e:{for(Yr=Ca.key;ia!==null;){if(ia.key===Yr)if(ia.tag===4&&ia.stateNode.containerInfo===Ca.containerInfo&&ia.stateNode.implementation===Ca.implementation){P(ya,ia.sibling),tr=X(ia,Ca.children||[]),tr.return=ya,ya=tr;break e}else{P(ya,ia);break}else w(ya,ia);ia=ia.sibling}tr=da(Ca,ya.mode,tr),tr.return=ya,ya=tr}return Be(ya);case ee:return Yr=Ca._init,Ca=Yr(Ca._payload),Jo(ya,ia,Ca,tr)}if(Te(Ca))return Jr(ya,ia,Ca,tr);if(me(Ca)){if(Yr=me(Ca),typeof Yr!="function")throw Error(r(150));return Ca=Yr.call(Ca),ti(ya,ia,Ca,tr)}if(typeof Ca.then=="function")return Jo(ya,ia,ol(Ca),tr);if(Ca.$$typeof===F)return Jo(ya,ia,ac(ya,Ca),tr);jd(ya,Ca)}return typeof Ca=="string"&&Ca!==""||typeof Ca=="number"||typeof Ca=="bigint"?(Ca=""+Ca,ia!==null&&ia.tag===6?(P(ya,ia.sibling),tr=X(ia,Ca),tr.return=ya,ya=tr):(P(ya,ia),tr=ta(Ca,ya.mode,tr),tr.return=ya,ya=tr),Be(ya)):P(ya,ia)}return function(ya,ia,Ca,tr){try{_l=0;var Yr=Jo(ya,ia,Ca,tr);return Kh=null,Yr}catch(un){if(un===Pf)throw un;var Ai=ra(29,un,null,ya.mode);return Ai.lanes=tr,Ai.return=ya,Ai}finally{}}}var Wc=am(!0),Ef=am(!1),ll=ht(null),Gd=ht(0);function Vu(p,w){p=mn,Ae(Gd,p),Ae(ll,w),mn=p|w.baseLanes}function Zd(){Ae(Gd,mn),Ae(ll,ll.current)}function Yc(){mn=Gd.current,He(ll),He(Gd)}var Ll=ht(null),Qu=null;function Xc(p){var w=p.alternate;Ae(Bs,Bs.current&1),Ae(Ll,p),Qu===null&&(w===null||ll.current!==null||w.memoizedState!==null)&&(Qu=p)}function lp(p){if(p.tag===22){if(Ae(Bs,Bs.current),Ae(Ll,p),Qu===null){var w=p.alternate;w!==null&&w.memoizedState!==null&&(Qu=p)}}else qd()}function qd(){Ae(Bs,Bs.current),Ae(Ll,Ll.current)}function Jc(p){He(Ll),Qu===p&&(Qu=null),He(Bs)}var Bs=ht(0);function rm(p){for(var w=p;w!==null;){if(w.tag===13){var P=w.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||P.data==="$?"||P.data==="$!"))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var eg=typeof AbortController<"u"?AbortController:function(){var p=[],w=this.signal={aborted:!1,addEventListener:function(P,U){p.push(U)}};this.abort=function(){w.aborted=!0,p.forEach(function(P){return P()})}},Nf=t.unstable_scheduleCallback,nm=t.unstable_NormalPriority,oo={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new eg,data:new Map,refCount:0}}function G(p){p.refCount--,p.refCount===0&&Nf(nm,function(){p.controller.abort()})}var Q=null,ye=0,De=0,Ke=null;function rt(p,w){if(Q===null){var P=Q=[];ye=0,De=EA(),Ke={status:"pending",value:void 0,then:function(U){P.push(U)}}}return ye++,w.then(it,it),w}function it(){if(--ye===0&&Q!==null){Ke!==null&&(Ke.status="fulfilled");var p=Q;Q=null,De=0,Ke=null;for(var w=0;w<p.length;w++)(0,p[w])()}}function dt(p,w){var P=[],U={status:"pending",value:null,reason:null,then:function(X){P.push(X)}};return p.then(function(){U.status="fulfilled",U.value=w;for(var X=0;X<P.length;X++)(0,P[X])(w)},function(X){for(U.status="rejected",U.reason=X,X=0;X<P.length;X++)(0,P[X])(void 0)}),U}var mt=we.S;we.S=function(p,w){typeof w=="object"&&w!==null&&typeof w.then=="function"&&rt(p,w),mt!==null&&mt(p,w)};var St=ht(null);function ea(){var p=St.current;return p!==null?p:Ur.pooledCache}function Pt(p,w){w===null?Ae(St,St.current):Ae(St,w.pool)}function _a(){var p=ea();return p===null?null:{parent:oo._currentValue,pool:p}}var na=0,Ra=null,fa=null,Rt=null,aa=!1,Ga=!1,Ya=!1,Ha=0,xr=0,gr=null,sn=0;function hr(){throw Error(r(321))}function Ti(p,w){if(w===null)return!1;for(var P=0;P<w.length&&P<p.length;P++)if(!Us(p[P],w[P]))return!1;return!0}function Ni(p,w,P,U,X,ue){return na=ue,Ra=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,we.H=p===null||p.memoizedState===null?xc:lu,Ya=!1,ue=P(U,X),Ya=!1,Ga&&(ue=ii(w,P,U,X)),$n(p),ue}function $n(p){we.H=Lu;var w=fa!==null&&fa.next!==null;if(na=0,Rt=fa=Ra=null,aa=!1,xr=0,gr=null,w)throw Error(r(300));p===null||dl||(p=p.dependencies,p!==null&&Df(p)&&(dl=!0))}function ii(p,w,P,U){Ra=p;var X=0;do{if(Ga&&(gr=null),xr=0,Ga=!1,25<=X)throw Error(r(301));if(X+=1,Rt=fa=null,p.updateQueue!=null){var ue=p.updateQueue;ue.lastEffect=null,ue.events=null,ue.stores=null,ue.memoCache!=null&&(ue.memoCache.index=0)}we.H=Pc,ue=w(P,U)}while(Ga);return ue}function Qi(){var p=we.H,w=p.useState()[0];return w=typeof w.then=="function"?Ci(w):w,p=p.useState()[0],(fa!==null?fa.memoizedState:null)!==p&&(Ra.flags|=1024),w}function jn(){var p=Ha!==0;return Ha=0,p}function wn(p,w,P){w.updateQueue=p.updateQueue,w.flags&=-2053,p.lanes&=~P}function ys(p){if(aa){for(p=p.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}aa=!1}na=0,Rt=fa=Ra=null,Ga=!1,xr=Ha=0,gr=null}function Zi(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ra.memoizedState=Rt=p:Rt=Rt.next=p,Rt}function Gn(){if(fa===null){var p=Ra.alternate;p=p!==null?p.memoizedState:null}else p=fa.next;var w=Rt===null?Ra.memoizedState:Rt.next;if(w!==null)Rt=w,fa=p;else{if(p===null)throw Ra.alternate===null?Error(r(467)):Error(r(310));fa=p,p={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},Rt===null?Ra.memoizedState=Rt=p:Rt=Rt.next=p}return Rt}var _o;_o=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ci(p){var w=xr;return xr+=1,gr===null&&(gr=[]),p=Ju(gr,p,w),w=Ra,(Rt===null?w.memoizedState:Rt.next)===null&&(w=w.alternate,we.H=w===null||w.memoizedState===null?xc:lu),p}function hs(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Ci(p);if(p.$$typeof===F)return Qs(p)}throw Error(r(438,String(p)))}function Rn(p){var w=null,P=Ra.updateQueue;if(P!==null&&(w=P.memoCache),w==null){var U=Ra.alternate;U!==null&&(U=U.updateQueue,U!==null&&(U=U.memoCache,U!=null&&(w={data:U.data.map(function(X){return X.slice()}),index:0})))}if(w==null&&(w={data:[],index:0}),P===null&&(P=_o(),Ra.updateQueue=P),P.memoCache=w,P=w.data[w.index],P===void 0)for(P=w.data[w.index]=Array(p),U=0;U<p;U++)P[U]=fe;return w.index++,P}function Bi(p,w){return typeof w=="function"?w(p):w}function Xs(p){var w=Gn();return Eo(w,fa,p)}function Eo(p,w,P){var U=p.queue;if(U===null)throw Error(r(311));U.lastRenderedReducer=P;var X=p.baseQueue,ue=U.pending;if(ue!==null){if(X!==null){var Be=X.next;X.next=ue.next,ue.next=Be}w.baseQueue=X=ue,U.pending=null}if(ue=p.baseState,X===null)p.memoizedState=ue;else{w=X.next;var ft=Be=null,Bt=null,la=w,Za=!1;do{var sr=la.lane&-536870913;if(sr!==la.lane?(fr&sr)===sr:(na&sr)===sr){var xa=la.revertLane;if(xa===0)Bt!==null&&(Bt=Bt.next={lane:0,revertLane:0,action:la.action,hasEagerState:la.hasEagerState,eagerState:la.eagerState,next:null}),sr===De&&(Za=!0);else if((na&xa)===xa){la=la.next,xa===De&&(Za=!0);continue}else sr={lane:0,revertLane:la.revertLane,action:la.action,hasEagerState:la.hasEagerState,eagerState:la.eagerState,next:null},Bt===null?(ft=Bt=sr,Be=ue):Bt=Bt.next=sr,Ra.lanes|=xa,ts|=xa;sr=la.action,Ya&&P(ue,sr),ue=la.hasEagerState?la.eagerState:P(ue,sr)}else xa={lane:sr,revertLane:la.revertLane,action:la.action,hasEagerState:la.hasEagerState,eagerState:la.eagerState,next:null},Bt===null?(ft=Bt=xa,Be=ue):Bt=Bt.next=xa,Ra.lanes|=sr,ts|=sr;la=la.next}while(la!==null&&la!==w);if(Bt===null?Be=ue:Bt.next=ft,!Us(ue,p.memoizedState)&&(dl=!0,Za&&(P=Ke,P!==null)))throw P;p.memoizedState=ue,p.baseState=Be,p.baseQueue=Bt,U.lastRenderedState=ue}return X===null&&(U.lanes=0),[p.memoizedState,U.dispatch]}function ul(p){var w=Gn(),P=w.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=p;var U=P.dispatch,X=P.pending,ue=w.memoizedState;if(X!==null){P.pending=null;var Be=X=X.next;do ue=p(ue,Be.action),Be=Be.next;while(Be!==X);Us(ue,w.memoizedState)||(dl=!0),w.memoizedState=ue,w.baseQueue===null&&(w.baseState=ue),P.lastRenderedState=ue}return[ue,U]}function Fl(p,w,P){var U=Ra,X=Gn(),ue=Ri;if(ue){if(P===void 0)throw Error(r(407));P=P()}else P=w();var Be=!Us((fa||X).memoizedState,P);if(Be&&(X.memoizedState=P,dl=!0),X=X.queue,td(zu.bind(null,U,X,p),[p]),X.getSnapshot!==w||Be||Rt!==null&&Rt.memoizedState.tag&1){if(U.flags|=2048,Ul(9,kl.bind(null,U,X,P,w),{destroy:void 0},null),Ur===null)throw Error(r(349));ue||(na&60)!==0||Ds(U,w,P)}return P}function Ds(p,w,P){p.flags|=16384,p={getSnapshot:w,value:P},w=Ra.updateQueue,w===null?(w=_o(),Ra.updateQueue=w,w.stores=[p]):(P=w.stores,P===null?w.stores=[p]:P.push(p))}function kl(p,w,P,U){w.value=P,w.getSnapshot=U,ba(w)&&Ua(p)}function zu(p,w,P){return P(function(){ba(w)&&Ua(p)})}function ba(p){var w=p.getSnapshot;p=p.value;try{var P=w();return!Us(p,P)}catch{return!0}}function Ua(p){var w=nl(p,2);w!==null&&Gl(w,p,2)}function es(p){var w=Zi();if(typeof p=="function"){var P=p;if(p=P(),Ya){hn(!0);try{P()}finally{hn(!1)}}}return w.memoizedState=w.baseState=p,w.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:p},w}function Ii(p,w,P,U){return p.baseState=P,Eo(p,fa,typeof U=="function"?U:Bi)}function Zt(p,w,P,U,X){if(nd(p))throw Error(r(485));if(p=w.action,p!==null){var ue={payload:X,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Be){ue.listeners.push(Be)}};we.T!==null?P(!0):ue.isTransition=!1,U(ue),P=w.pending,P===null?(ue.next=w.pending=ue,im(w,ue)):(ue.next=P.next,w.pending=P.next=ue)}}function im(p,w){var P=w.action,U=w.payload,X=p.state;if(w.isTransition){var ue=we.T,Be={};we.T=Be;try{var ft=P(X,U),Bt=we.S;Bt!==null&&Bt(Be,ft),_h(p,w,ft)}catch(la){Rh(p,w,la)}finally{we.T=ue}}else try{ue=P(X,U),_h(p,w,ue)}catch(la){Rh(p,w,la)}}function _h(p,w,P){P!==null&&typeof P=="object"&&typeof P.then=="function"?P.then(function(U){wh(p,w,U)},function(U){return Rh(p,w,U)}):wh(p,w,P)}function wh(p,w,P){w.status="fulfilled",w.value=P,Du(w),p.state=P,w=p.pending,w!==null&&(P=w.next,P===w?p.pending=null:(P=P.next,w.next=P,im(p,P)))}function Rh(p,w,P){var U=p.pending;if(p.pending=null,U!==null){U=U.next;do w.status="rejected",w.reason=P,Du(w),w=w.next;while(w!==U)}p.action=null}function Du(p){p=p.listeners;for(var w=0;w<p.length;w++)(0,p[w])()}function Th(p,w){return w}function ec(p,w){if(Ri){var P=Ur.formState;if(P!==null){e:{var U=Ra;if(Ri){if(Ji){t:{for(var X=Ji,ue=Nu;X.nodeType!==8;){if(!ue){X=null;break t}if(X=Bu(X.nextSibling),X===null){X=null;break t}}ue=X.data,X=ue==="F!"||ue==="F"?X:null}if(X){Ji=Bu(X.nextSibling),U=X.data==="F!";break e}}Sc(U)}U=!1}U&&(w=P[0])}}return P=Zi(),P.memoizedState=P.baseState=w,U={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Th,lastRenderedState:w},P.queue=U,P=fp.bind(null,Ra,U),U.dispatch=P,U=es(!1),ue=rd.bind(null,Ra,!1,U.queue),U=Zi(),X={state:w,dispatch:null,action:p,pending:null},U.queue=X,P=Zt.bind(null,Ra,X,ue,P),X.dispatch=P,U.memoizedState=p,[w,P,!1]}function tg(p){var w=Gn();return up(w,fa,p)}function up(p,w,P){w=Eo(p,w,Th)[0],p=Xs(Bi)[0],w=typeof w=="object"&&w!==null&&typeof w.then=="function"?Ci(w):w;var U=Gn(),X=U.queue,ue=X.dispatch;return P!==U.memoizedState&&(Ra.flags|=2048,Ul(9,ag.bind(null,X,P),{destroy:void 0},null)),[w,ue,p]}function ag(p,w){p.action=w}function Ch(p){var w=Gn(),P=fa;if(P!==null)return up(w,P,p);Gn(),w=w.memoizedState,P=Gn();var U=P.queue.dispatch;return P.memoizedState=p,[w,U,!1]}function Ul(p,w,P,U){return p={tag:p,create:w,inst:P,deps:U,next:null},w=Ra.updateQueue,w===null&&(w=_o(),Ra.updateQueue=w),P=w.lastEffect,P===null?w.lastEffect=p.next=p:(U=P.next,P.next=p,p.next=U,w.lastEffect=p),p}function Xh(){return Gn().memoizedState}function Qc(p,w,P,U){var X=Zi();Ra.flags|=p,X.memoizedState=Ul(1|w,P,{destroy:void 0},U===void 0?null:U)}function ed(p,w,P,U){var X=Gn();U=U===void 0?null:U;var ue=X.memoizedState.inst;fa!==null&&U!==null&&Ti(U,fa.memoizedState.deps)?X.memoizedState=Ul(w,P,ue,U):(Ra.flags|=p,X.memoizedState=Ul(1|w,P,ue,U))}function cp(p,w){Qc(8390656,8,p,w)}function td(p,w){ed(2048,8,p,w)}function cl(p,w){return ed(4,2,p,w)}function rg(p,w){return ed(4,4,p,w)}function lo(p,w){if(typeof w=="function"){p=p();var P=w(p);return function(){typeof P=="function"?P():w(null)}}if(w!=null)return p=p(),w.current=p,function(){w.current=null}}function $g(p,w,P){P=P!=null?P.concat([p]):null,ed(4,4,lo.bind(null,w,p),P)}function Sh(){}function si(p,w){var P=Gn();w=w===void 0?null:w;var U=P.memoizedState;return w!==null&&Ti(w,U[1])?U[0]:(P.memoizedState=[p,w],p)}function Nn(p,w){var P=Gn();w=w===void 0?null:w;var U=P.memoizedState;if(w!==null&&Ti(w,U[1]))return U[0];if(U=p(),Ya){hn(!0);try{p()}finally{hn(!1)}}return P.memoizedState=[U,w],U}function dp(p,w,P){return P===void 0||(na&1073741824)!==0?p.memoizedState=w:(p.memoizedState=P,p=Vh(),Ra.lanes|=p,ts|=p,P)}function Mu(p,w,P,U){return Us(P,w)?P:ll.current!==null?(p=dp(p,P,U),Us(p,w)||(dl=!0),p):(na&42)===0?(dl=!0,p.memoizedState=P):(p=Vh(),Ra.lanes|=p,ts|=p,w)}function Hd(p,w,P,U,X){var ue=qe.p;qe.p=ue!==0&&8>ue?ue:8;var Be=we.T,ft={};we.T=ft,rd(p,!1,w,P);try{var Bt=X(),la=we.S;if(la!==null&&la(ft,Bt),Bt!==null&&typeof Bt=="object"&&typeof Bt.then=="function"){var Za=dt(Bt,U);bh(p,w,Za,To(p))}else bh(p,w,U,To(p))}catch(sr){bh(p,w,{then:function(){},status:"rejected",reason:sr},To())}finally{qe.p=ue,we.T=Be}}function Iu(){}function ad(p,w,P,U){if(p.tag!==5)throw Error(r(476));var X=Of(p).queue;Hd(p,X,w,Ze,P===null?Iu:function(){return Jh(p),P(U)})}function Of(p){var w=p.memoizedState;if(w!==null)return w;w={memoizedState:Ze,baseState:Ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:Ze},next:null};var P={};return w.next={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:P},next:null},p.memoizedState=w,p=p.alternate,p!==null&&(p.memoizedState=w),w}function Jh(p){var w=Of(p).next.queue;bh(p,w,{},To())}function Bl(){return Qs(hy)}function Vf(){return Gn().memoizedState}function No(){return Gn().memoizedState}function $d(p){for(var w=p.return;w!==null;){switch(w.tag){case 24:case 3:var P=To();p=Mf(P);var U=If(w,p,P);U!==null&&(Gl(U,w,P),Lf(U,w,P)),w={cache:Yh()},p.payload=w;return}w=w.return}}function hp(p,w,P){var U=To();P={lane:U,revertLane:0,action:P,hasEagerState:!1,eagerState:null,next:null},nd(p)?pp(w,P):(P=Hc(p,w,P,U),P!==null&&(Gl(P,p,U),Kd(P,w,U)))}function fp(p,w,P){var U=To();bh(p,w,P,U)}function bh(p,w,P,U){var X={lane:U,revertLane:0,action:P,hasEagerState:!1,eagerState:null,next:null};if(nd(p))pp(w,X);else{var ue=p.alternate;if(p.lanes===0&&(ue===null||ue.lanes===0)&&(ue=w.lastRenderedReducer,ue!==null))try{var Be=w.lastRenderedState,ft=ue(Be,P);if(X.hasEagerState=!0,X.eagerState=ft,Us(ft,Be))return iu(p,w,X,0),Ur===null&&ds(),!1}catch{}finally{}if(P=Hc(p,w,X,U),P!==null)return Gl(P,p,U),Kd(P,w,U),!0}return!1}function rd(p,w,P,U){if(U={lane:2,revertLane:EA(),action:U,hasEagerState:!1,eagerState:null,next:null},nd(p)){if(w)throw Error(r(479))}else w=Hc(p,P,U,2),w!==null&&Gl(w,p,2)}function nd(p){var w=p.alternate;return p===Ra||w!==null&&w===Ra}function pp(p,w){Ga=aa=!0;var P=p.pending;P===null?w.next=w:(w.next=P.next,P.next=w),p.pending=w}function Kd(p,w,P){if((P&4194176)!==0){var U=w.lanes;U&=p.pendingLanes,P|=U,w.lanes=P,yt(p,P)}}var Lu={readContext:Qs,use:hs,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useLayoutEffect:hr,useInsertionEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useSyncExternalStore:hr,useId:hr};Lu.useCacheRefresh=hr,Lu.useMemoCache=hr,Lu.useHostTransitionStatus=hr,Lu.useFormState=hr,Lu.useActionState=hr,Lu.useOptimistic=hr;var xc={readContext:Qs,use:hs,useCallback:function(p,w){return Zi().memoizedState=[p,w===void 0?null:w],p},useContext:Qs,useEffect:cp,useImperativeHandle:function(p,w,P){P=P!=null?P.concat([p]):null,Qc(4194308,4,lo.bind(null,w,p),P)},useLayoutEffect:function(p,w){return Qc(4194308,4,p,w)},useInsertionEffect:function(p,w){Qc(4,2,p,w)},useMemo:function(p,w){var P=Zi();w=w===void 0?null:w;var U=p();if(Ya){hn(!0);try{p()}finally{hn(!1)}}return P.memoizedState=[U,w],U},useReducer:function(p,w,P){var U=Zi();if(P!==void 0){var X=P(w);if(Ya){hn(!0);try{P(w)}finally{hn(!1)}}}else X=w;return U.memoizedState=U.baseState=X,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:X},U.queue=p,p=p.dispatch=hp.bind(null,Ra,p),[U.memoizedState,p]},useRef:function(p){var w=Zi();return p={current:p},w.memoizedState=p},useState:function(p){p=es(p);var w=p.queue,P=fp.bind(null,Ra,w);return w.dispatch=P,[p.memoizedState,P]},useDebugValue:Sh,useDeferredValue:function(p,w){var P=Zi();return dp(P,p,w)},useTransition:function(){var p=es(!1);return p=Hd.bind(null,Ra,p.queue,!0,!1),Zi().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,w,P){var U=Ra,X=Zi();if(Ri){if(P===void 0)throw Error(r(407));P=P()}else{if(P=w(),Ur===null)throw Error(r(349));(fr&60)!==0||Ds(U,w,P)}X.memoizedState=P;var ue={value:P,getSnapshot:w};return X.queue=ue,cp(zu.bind(null,U,ue,p),[p]),U.flags|=2048,Ul(9,kl.bind(null,U,ue,P,w),{destroy:void 0},null),P},useId:function(){var p=Zi(),w=Ur.identifierPrefix;if(Ri){var P=Xu,U=Eu;P=(U&~(1<<32-$r(U)-1)).toString(32)+P,w=":"+w+"R"+P,P=Ha++,0<P&&(w+="H"+P.toString(32)),w+=":"}else P=sn++,w=":"+w+"r"+P.toString(32)+":";return p.memoizedState=w},useCacheRefresh:function(){return Zi().memoizedState=$d.bind(null,Ra)}};xc.useMemoCache=Rn,xc.useHostTransitionStatus=Bl,xc.useFormState=ec,xc.useActionState=ec,xc.useOptimistic=function(p){var w=Zi();w.memoizedState=w.baseState=p;var P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return w.queue=P,w=rd.bind(null,Ra,!0,P),P.dispatch=w,[p,w]};var lu={readContext:Qs,use:hs,useCallback:si,useContext:Qs,useEffect:td,useImperativeHandle:$g,useInsertionEffect:cl,useLayoutEffect:rg,useMemo:Nn,useReducer:Xs,useRef:Xh,useState:function(){return Xs(Bi)},useDebugValue:Sh,useDeferredValue:function(p,w){var P=Gn();return Mu(P,fa.memoizedState,p,w)},useTransition:function(){var p=Xs(Bi)[0],w=Gn().memoizedState;return[typeof p=="boolean"?p:Ci(p),w]},useSyncExternalStore:Fl,useId:Vf};lu.useCacheRefresh=No,lu.useMemoCache=Rn,lu.useHostTransitionStatus=Bl,lu.useFormState=tg,lu.useActionState=tg,lu.useOptimistic=function(p,w){var P=Gn();return Ii(P,fa,p,w)};var Pc={readContext:Qs,use:hs,useCallback:si,useContext:Qs,useEffect:td,useImperativeHandle:$g,useInsertionEffect:cl,useLayoutEffect:rg,useMemo:Nn,useReducer:ul,useRef:Xh,useState:function(){return ul(Bi)},useDebugValue:Sh,useDeferredValue:function(p,w){var P=Gn();return fa===null?dp(P,p,w):Mu(P,fa.memoizedState,p,w)},useTransition:function(){var p=ul(Bi)[0],w=Gn().memoizedState;return[typeof p=="boolean"?p:Ci(p),w]},useSyncExternalStore:Fl,useId:Vf};Pc.useCacheRefresh=No,Pc.useMemoCache=Rn,Pc.useHostTransitionStatus=Bl,Pc.useFormState=Ch,Pc.useActionState=Ch,Pc.useOptimistic=function(p,w){var P=Gn();return fa!==null?Ii(P,fa,p,w):(P.baseState=p,[p,P.queue.dispatch])};function Ms(p,w,P,U){w=p.memoizedState,P=P(U,w),P=P==null?w:Ee({},w,P),p.memoizedState=P,p.lanes===0&&(p.updateQueue.baseState=P)}var uu={isMounted:function(p){return(p=p._reactInternals)?Ue(p)===p:!1},enqueueSetState:function(p,w,P){p=p._reactInternals;var U=To(),X=Mf(U);X.payload=w,P!=null&&(X.callback=P),w=If(p,X,U),w!==null&&(Gl(w,p,U),Lf(w,p,U))},enqueueReplaceState:function(p,w,P){p=p._reactInternals;var U=To(),X=Mf(U);X.tag=1,X.payload=w,P!=null&&(X.callback=P),w=If(p,X,U),w!==null&&(Gl(w,p,U),Lf(w,p,U))},enqueueForceUpdate:function(p,w){p=p._reactInternals;var P=To(),U=Mf(P);U.tag=2,w!=null&&(U.callback=w),w=If(p,U,P),w!==null&&(Gl(w,p,P),Lf(w,p,P))}};function tc(p,w,P,U,X,ue,Be){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(U,ue,Be):w.prototype&&w.prototype.isPureReactComponent?!zl(P,U)||!zl(X,ue):!0}function Js(p,w,P,U){p=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(P,U),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(P,U),w.state!==p&&uu.enqueueReplaceState(w,w.state,null)}function Fu(p,w){var P=w;if("ref"in w){P={};for(var U in w)U!=="ref"&&(P[U]=w[U])}if(p=p.defaultProps){P===w&&(P=Ee({},P));for(var X in p)P[X]===void 0&&(P[X]=p[X])}return P}var xh=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var w=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(w))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function mp(p){xh(p)}function Qh(p){console.error(p)}function Ph(p){xh(p)}function Wd(p,w){try{var P=p.onUncaughtError;P(w.value,{componentStack:w.stack})}catch(U){setTimeout(function(){throw U})}}function ng(p,w,P){try{var U=p.onCaughtError;U(P.value,{componentStack:P.stack,errorBoundary:w.tag===1?w.stateNode:null})}catch(X){setTimeout(function(){throw X})}}function sm(p,w,P){return P=Mf(P),P.tag=3,P.payload={element:null},P.callback=function(){Wd(p,w)},P}function ig(p){return p=Mf(p),p.tag=3,p}function Kg(p,w,P,U){var X=P.type.getDerivedStateFromError;if(typeof X=="function"){var ue=U.value;p.payload=function(){return X(ue)},p.callback=function(){ng(w,P,U)}}var Be=P.stateNode;Be!==null&&typeof Be.componentDidCatch=="function"&&(p.callback=function(){ng(w,P,U),typeof X!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var ft=U.stack;this.componentDidCatch(U.value,{componentStack:ft!==null?ft:""})})}function fA(p,w,P,U,X){if(P.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){if(w=P.alternate,w!==null&&_p(w,P,X,!0),P=Ll.current,P!==null){switch(P.tag){case 13:return Qu===null?t0():P.alternate===null&&Dn===0&&(Dn=3),P.flags&=-257,P.flags|=65536,P.lanes=X,U===vh?P.flags|=16384:(w=P.updateQueue,w===null?P.updateQueue=new Set([U]):w.add(U),M1(p,U,X)),!1;case 22:return P.flags|=65536,U===vh?P.flags|=16384:(w=P.updateQueue,w===null?(w={transitions:null,markerInstances:null,retryQueue:new Set([U])},P.updateQueue=w):(P=w.retryQueue,P===null?w.retryQueue=new Set([U]):P.add(U)),M1(p,U,X)),!1}throw Error(r(435,P.tag))}return M1(p,U,X),t0(),!1}if(Ri)return w=Ll.current,w!==null?((w.flags&65536)===0&&(w.flags|=256),w.flags|=65536,w.lanes=X,U!==op&&(p=Error(r(422),{cause:U}),Bd(ss(p,P)))):(U!==op&&(w=Error(r(423),{cause:U}),Bd(ss(w,P))),p=p.current.alternate,p.flags|=65536,X&=-X,p.lanes|=X,U=ss(U,P),X=sm(p.stateNode,U,X),Xg(p,X),Dn!==4&&(Dn=2)),!1;var ue=Error(r(520),{cause:U});if(ue=ss(ue,P),Pn===null?Pn=[ue]:Pn.push(ue),Dn!==4&&(Dn=2),w===null)return!0;U=ss(U,P),P=w;do{switch(P.tag){case 3:return P.flags|=65536,p=X&-X,P.lanes|=p,p=sm(P.stateNode,U,p),Xg(P,p),!1;case 1:if(w=P.type,ue=P.stateNode,(P.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(fs===null||!fs.has(ue))))return P.flags|=65536,X&=-X,P.lanes|=X,X=ig(X),Kg(X,p,P,U),Xg(P,X),!1}P=P.return}while(P!==null);return!1}var om=Error(r(461)),dl=!1;function wl(p,w,P,U){w.child=p===null?Ef(w,null,P,U):Wc(w,p.child,P,U)}function pA(p,w,P,U,X){P=P.render;var ue=w.ref;if("ref"in U){var Be={};for(var ft in U)ft!=="ref"&&(Be[ft]=U[ft])}else Be=U;return Nc(w),U=Ni(p,w,P,Be,ue,X),ft=jn(),p!==null&&!dl?(wn(p,w,X),Ec(p,w,X)):(Ri&&ft&&Zh(w),w.flags|=1,wl(p,w,U,X),w.child)}function mA(p,w,P,U,X){if(p===null){var ue=P.type;return typeof ue=="function"&&!ca(ue)&&ue.defaultProps===void 0&&P.compare===null?(w.tag=15,w.type=ue,gA(p,w,ue,U,X)):(p=sa(P.type,null,U,w,w.mode,X),p.ref=w.ref,p.return=w,w.child=p)}if(ue=p.child,!Rs(p,X)){var Be=ue.memoizedProps;if(P=P.compare,P=P!==null?P:zl,P(Be,U)&&p.ref===w.ref)return Ec(p,w,X)}return w.flags|=1,p=Sa(ue,U),p.ref=w.ref,p.return=w,w.child=p}function gA(p,w,P,U,X){if(p!==null){var ue=p.memoizedProps;if(zl(ue,U)&&p.ref===w.ref)if(dl=!1,w.pendingProps=U=ue,Rs(p,X))(p.flags&131072)!==0&&(dl=!0);else return w.lanes=p.lanes,Ec(p,w,X)}return gp(p,w,P,U,X)}function lm(p,w,P){var U=w.pendingProps,X=U.children,ue=(w.stateNode._pendingVisibility&2)!==0,Be=p!==null?p.memoizedState:null;if(Rl(p,w),U.mode==="hidden"||ue){if((w.flags&128)!==0){if(U=Be!==null?Be.baseLanes|P:P,p!==null){for(X=w.child=p.child,ue=0;X!==null;)ue=ue|X.lanes|X.childLanes,X=X.sibling;w.childLanes=ue&~U}else w.childLanes=0,w.child=null;return um(p,w,U,P)}if((P&536870912)!==0)w.memoizedState={baseLanes:0,cachePool:null},p!==null&&Pt(w,Be!==null?Be.cachePool:null),Be!==null?Vu(w,Be):Zd(),lp(w);else return w.lanes=w.childLanes=536870912,um(p,w,Be!==null?Be.baseLanes|P:P,P)}else Be!==null?(Pt(w,Be.cachePool),Vu(w,Be),qd(),w.memoizedState=null):(p!==null&&Pt(w,null),Zd(),qd());return wl(p,w,X,P),w.child}function um(p,w,P,U){var X=ea();return X=X===null?null:{parent:oo._currentValue,pool:X},w.memoizedState={baseLanes:P,cachePool:X},p!==null&&Pt(w,null),Zd(),lp(w),p!==null&&_p(p,w,U,!0),null}function Rl(p,w){var P=w.ref;if(P===null)p!==null&&p.ref!==null&&(w.flags|=2097664);else{if(typeof P!="function"&&typeof P!="object")throw Error(r(284));(p===null||p.ref!==P)&&(w.flags|=2097664)}}function gp(p,w,P,U,X){return Nc(w),P=Ni(p,w,P,U,void 0,X),U=jn(),p!==null&&!dl?(wn(p,w,X),Ec(p,w,X)):(Ri&&U&&Zh(w),w.flags|=1,wl(p,w,P,X),w.child)}function yA(p,w,P,U,X,ue){return Nc(w),w.updateQueue=null,P=ii(w,U,P,X),$n(p),U=jn(),p!==null&&!dl?(wn(p,w,ue),Ec(p,w,ue)):(Ri&&U&&Zh(w),w.flags|=1,wl(p,w,P,ue),w.child)}function AA(p,w,P,U,X){if(Nc(w),w.stateNode===null){var ue=$c,Be=P.contextType;typeof Be=="object"&&Be!==null&&(ue=Qs(Be)),ue=new P(U,ue),w.memoizedState=ue.state!==null&&ue.state!==void 0?ue.state:null,ue.updater=uu,w.stateNode=ue,ue._reactInternals=w,ue=w.stateNode,ue.props=U,ue.state=w.memoizedState,ue.refs={},Nh(w),Be=P.contextType,ue.context=typeof Be=="object"&&Be!==null?Qs(Be):$c,ue.state=w.memoizedState,Be=P.getDerivedStateFromProps,typeof Be=="function"&&(Ms(w,P,Be,U),ue.state=w.memoizedState),typeof P.getDerivedStateFromProps=="function"||typeof ue.getSnapshotBeforeUpdate=="function"||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(Be=ue.state,typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount(),Be!==ue.state&&uu.enqueueReplaceState(ue,ue.state,null),hm(w,U,ue,X),Oh(),ue.state=w.memoizedState),typeof ue.componentDidMount=="function"&&(w.flags|=4194308),U=!0}else if(p===null){ue=w.stateNode;var ft=w.memoizedProps,Bt=Fu(P,ft);ue.props=Bt;var la=ue.context,Za=P.contextType;Be=$c,typeof Za=="object"&&Za!==null&&(Be=Qs(Za));var sr=P.getDerivedStateFromProps;Za=typeof sr=="function"||typeof ue.getSnapshotBeforeUpdate=="function",ft=w.pendingProps!==ft,Za||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(ft||la!==Be)&&Js(w,ue,U,Be),rc=!1;var xa=w.memoizedState;ue.state=xa,hm(w,U,ue,X),Oh(),la=w.memoizedState,ft||xa!==la||rc?(typeof sr=="function"&&(Ms(w,P,sr,U),la=w.memoizedState),(Bt=rc||tc(w,P,Bt,U,xa,la,Be))?(Za||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=U,w.memoizedState=la),ue.props=U,ue.state=la,ue.context=Be,U=Bt):(typeof ue.componentDidMount=="function"&&(w.flags|=4194308),U=!1)}else{ue=w.stateNode,RA(p,w),Be=w.memoizedProps,Za=Fu(P,Be),ue.props=Za,sr=w.pendingProps,xa=ue.context,la=P.contextType,Bt=$c,typeof la=="object"&&la!==null&&(Bt=Qs(la)),ft=P.getDerivedStateFromProps,(la=typeof ft=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Be!==sr||xa!==Bt)&&Js(w,ue,U,Bt),rc=!1,xa=w.memoizedState,ue.state=xa,hm(w,U,ue,X),Oh();var qa=w.memoizedState;Be!==sr||xa!==qa||rc||p!==null&&p.dependencies!==null&&Df(p.dependencies)?(typeof ft=="function"&&(Ms(w,P,ft,U),qa=w.memoizedState),(Za=rc||tc(w,P,Za,U,xa,qa,Bt)||p!==null&&p.dependencies!==null&&Df(p.dependencies))?(la||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(U,qa,Bt),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(U,qa,Bt)),typeof ue.componentDidUpdate=="function"&&(w.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Be===p.memoizedProps&&xa===p.memoizedState||(w.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Be===p.memoizedProps&&xa===p.memoizedState||(w.flags|=1024),w.memoizedProps=U,w.memoizedState=qa),ue.props=U,ue.state=qa,ue.context=Bt,U=Za):(typeof ue.componentDidUpdate!="function"||Be===p.memoizedProps&&xa===p.memoizedState||(w.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Be===p.memoizedProps&&xa===p.memoizedState||(w.flags|=1024),U=!1)}return ue=U,Rl(p,w),U=(w.flags&128)!==0,ue||U?(ue=w.stateNode,P=U&&typeof P.getDerivedStateFromError!="function"?null:ue.render(),w.flags|=1,p!==null&&U?(w.child=Wc(w,p.child,null,X),w.child=Wc(w,null,P,X)):wl(p,w,P,X),w.memoizedState=ue.state,p=w.child):p=Ec(p,w,X),p}function Jv(p,w,P,U){return $h(),w.flags|=256,wl(p,w,P,U),w.child}var vA={dehydrated:null,treeContext:null,retryLane:0};function Li(p){return{baseLanes:p,cachePool:_a()}}function Wg(p,w,P){return p=p!==null?p.childLanes&~P:0,w&&(p|=eo),p}function Yg(p,w,P){var U=w.pendingProps,X=!1,ue=(w.flags&128)!==0,Be;if((Be=ue)||(Be=p!==null&&p.memoizedState===null?!1:(Bs.current&2)!==0),Be&&(X=!0,w.flags&=-129),Be=(w.flags&32)!==0,w.flags&=-33,p===null){if(Ri){if(X?Xc(w):qd(),Ri){var ft=Ji,Bt;if(Bt=ft){e:{for(Bt=ft,ft=Nu;Bt.nodeType!==8;){if(!ft){ft=null;break e}if(Bt=Bu(Bt.nextSibling),Bt===null){ft=null;break e}}ft=Bt}ft!==null?(w.memoizedState={dehydrated:ft,treeContext:Kc!==null?{id:Eu,overflow:Xu}:null,retryLane:536870912},Bt=ra(18,null,null,0),Bt.stateNode=ft,Bt.return=w,w.child=Bt,sl=w,Ji=null,Bt=!0):Bt=!1}Bt||Sc(w)}if(ft=w.memoizedState,ft!==null&&(ft=ft.dehydrated,ft!==null))return ft.data==="$!"?w.lanes=16:w.lanes=536870912,null;Jc(w)}return ft=U.children,U=U.fallback,X?(qd(),X=w.mode,ft=yp({mode:"hidden",children:ft},X),U=Vt(U,X,P,null),ft.return=w,U.return=w,ft.sibling=U,w.child=ft,X=w.child,X.memoizedState=Li(P),X.childLanes=Wg(p,Be,P),w.memoizedState=vA,U):(Xc(w),_A(w,ft))}if(Bt=p.memoizedState,Bt!==null&&(ft=Bt.dehydrated,ft!==null)){if(ue)w.flags&256?(Xc(w),w.flags&=-257,w=sg(p,w,P)):w.memoizedState!==null?(qd(),w.child=p.child,w.flags|=128,w=null):(qd(),X=U.fallback,ft=w.mode,U=yp({mode:"visible",children:U.children},ft),X=Vt(X,ft,P,null),X.flags|=2,U.return=w,X.return=w,U.sibling=X,w.child=U,Wc(w,p.child,null,P),U=w.child,U.memoizedState=Li(P),U.childLanes=Wg(p,Be,P),w.memoizedState=vA,w=X);else if(Xc(w),ft.data==="$!"){if(Be=ft.nextSibling&&ft.nextSibling.dataset,Be)var la=Be.dgst;Be=la,U=Error(r(419)),U.stack="",U.digest=Be,Bd({value:U,source:null,stack:null}),w=sg(p,w,P)}else if(dl||_p(p,w,P,!1),Be=(P&p.childLanes)!==0,dl||Be){if(Be=Ur,Be!==null){if(U=P&-P,(U&42)!==0)U=1;else switch(U){case 2:U=1;break;case 8:U=4;break;case 32:U=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:U=64;break;case 268435456:U=134217728;break;default:U=0}if(U=(U&(Be.suspendedLanes|P))!==0?0:U,U!==0&&U!==Bt.retryLane)throw Bt.retryLane=U,nl(p,U),Gl(Be,p,U),om}ft.data==="$?"||t0(),w=sg(p,w,P)}else ft.data==="$?"?(w.flags|=128,w.child=p.child,w=nE.bind(null,p),ft._reactRetry=w,w=null):(p=Bt.treeContext,Ji=Bu(ft.nextSibling),sl=w,Ri=!0,ou=null,Nu=!1,p!==null&&(il[vl++]=Eu,il[vl++]=Xu,il[vl++]=Kc,Eu=p.id,Xu=p.overflow,Kc=w),w=_A(w,U.children),w.flags|=4096);return w}return X?(qd(),X=U.fallback,ft=w.mode,Bt=p.child,la=Bt.sibling,U=Sa(Bt,{mode:"hidden",children:U.children}),U.subtreeFlags=Bt.subtreeFlags&31457280,la!==null?X=Sa(la,X):(X=Vt(X,ft,P,null),X.flags|=2),X.return=w,U.return=w,U.sibling=X,w.child=U,U=X,X=w.child,ft=p.child.memoizedState,ft===null?ft=Li(P):(Bt=ft.cachePool,Bt!==null?(la=oo._currentValue,Bt=Bt.parent!==la?{parent:la,pool:la}:Bt):Bt=_a(),ft={baseLanes:ft.baseLanes|P,cachePool:Bt}),X.memoizedState=ft,X.childLanes=Wg(p,Be,P),w.memoizedState=vA,U):(Xc(w),P=p.child,p=P.sibling,P=Sa(P,{mode:"visible",children:U.children}),P.return=w,P.sibling=null,p!==null&&(Be=w.deletions,Be===null?(w.deletions=[p],w.flags|=16):Be.push(p)),w.child=P,w.memoizedState=null,P)}function _A(p,w){return w=yp({mode:"visible",children:w},p.mode),w.return=p,p.child=w}function yp(p,w){return oa(p,w,0,null)}function sg(p,w,P){return Wc(w,p.child,null,P),p=_A(w,w.pendingProps.children),p.flags|=2,w.memoizedState=null,p}function cm(p,w,P){p.lanes|=w;var U=p.alternate;U!==null&&(U.lanes|=w),wA(p.return,w,P)}function dm(p,w,P,U,X){var ue=p.memoizedState;ue===null?p.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:U,tail:P,tailMode:X}:(ue.isBackwards=w,ue.rendering=null,ue.renderingStartTime=0,ue.last=U,ue.tail=P,ue.tailMode=X)}function Yd(p,w,P){var U=w.pendingProps,X=U.revealOrder,ue=U.tail;if(wl(p,w,U.children,P),U=Bs.current,(U&2)!==0)U=U&1|2,w.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=w.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&cm(p,P,w);else if(p.tag===19)cm(p,P,w);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===w)break e;for(;p.sibling===null;){if(p.return===null||p.return===w)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}U&=1}switch(Ae(Bs,U),X){case"forwards":for(P=w.child,X=null;P!==null;)p=P.alternate,p!==null&&rm(p)===null&&(X=P),P=P.sibling;P=X,P===null?(X=w.child,w.child=null):(X=P.sibling,P.sibling=null),dm(w,!1,X,P,ue);break;case"backwards":for(P=null,X=w.child,w.child=null;X!==null;){if(p=X.alternate,p!==null&&rm(p)===null){w.child=X;break}p=X.sibling,X.sibling=P,P=X,X=p}dm(w,!0,P,null,ue);break;case"together":dm(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Ec(p,w,P){if(p!==null&&(w.dependencies=p.dependencies),ts|=w.lanes,(P&w.childLanes)===0)if(p!==null){if(_p(p,w,P,!1),(P&w.childLanes)===0)return null}else return null;if(p!==null&&w.child!==p.child)throw Error(r(153));if(w.child!==null){for(p=w.child,P=Sa(p,p.pendingProps),w.child=P,P.return=w;p.sibling!==null;)p=p.sibling,P=P.sibling=Sa(p,p.pendingProps),P.return=w;P.sibling=null}return w.child}function Rs(p,w){return(p.lanes&w)!==0?!0:(p=p.dependencies,!!(p!==null&&Df(p)))}function id(p,w,P){switch(w.tag){case 3:Ht(w,w.stateNode.containerInfo),sd(w,oo,p.memoizedState.cache),$h();break;case 27:case 5:ir(w);break;case 4:Ht(w,w.stateNode.containerInfo);break;case 10:sd(w,w.type,w.memoizedProps.value);break;case 13:var U=w.memoizedState;if(U!==null)return U.dehydrated!==null?(Xc(w),w.flags|=128,null):(P&w.child.childLanes)!==0?Yg(p,w,P):(Xc(w),p=Ec(p,w,P),p!==null?p.sibling:null);Xc(w);break;case 19:var X=(p.flags&128)!==0;if(U=(P&w.childLanes)!==0,U||(_p(p,w,P,!1),U=(P&w.childLanes)!==0),X){if(U)return Yd(p,w,P);w.flags|=128}if(X=w.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),Ae(Bs,Bs.current),U)break;return null;case 22:case 23:return w.lanes=0,lm(p,w,P);case 24:sd(w,oo,p.memoizedState.cache)}return Ec(p,w,P)}function Ap(p,w,P){if(p!==null)if(p.memoizedProps!==w.pendingProps)dl=!0;else{if(!Rs(p,P)&&(w.flags&128)===0)return dl=!1,id(p,w,P);dl=(p.flags&131072)!==0}else dl=!1,Ri&&(w.flags&1048576)!==0&&em(w,Gh,w.index);switch(w.lanes=0,w.tag){case 16:e:{p=w.pendingProps;var U=w.elementType,X=U._init;if(U=X(U._payload),w.type=U,typeof U=="function")ca(U)?(p=Fu(U,p),w.tag=1,w=AA(null,w,U,p,P)):(w.tag=0,w=gp(null,w,U,p,P));else{if(U!=null){if(X=U.$$typeof,X===j){w.tag=11,w=pA(null,w,U,p,P);break e}else if(X===W){w.tag=14,w=mA(null,w,U,p,P);break e}}throw w=Re(U)||U,Error(r(306,w,""))}}return w;case 0:return gp(p,w,w.type,w.pendingProps,P);case 1:return U=w.type,X=Fu(U,w.pendingProps),AA(p,w,U,X,P);case 3:e:{if(Ht(w,w.stateNode.containerInfo),p===null)throw Error(r(387));var ue=w.pendingProps;X=w.memoizedState,U=X.element,RA(p,w),hm(w,ue,null,P);var Be=w.memoizedState;if(ue=Be.cache,sd(w,oo,ue),ue!==X.cache&&og(w,[oo],P,!0),Oh(),ue=Be.element,X.isDehydrated)if(X={element:ue,isDehydrated:!1,cache:Be.cache},w.updateQueue.baseState=X,w.memoizedState=X,w.flags&256){w=Jv(p,w,ue,P);break e}else if(ue!==U){U=ss(Error(r(424)),w),Bd(U),w=Jv(p,w,ue,P);break e}else for(Ji=Bu(w.stateNode.containerInfo.firstChild),sl=w,Ri=!0,ou=null,Nu=!0,P=Ef(w,null,ue,P),w.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if($h(),ue===U){w=Ec(p,w,P);break e}wl(p,w,ue,P)}w=w.child}return w;case 26:return Rl(p,w),p===null?(P=K1(w.type,null,w.pendingProps,null))?w.memoizedState=P:Ri||(P=w.type,p=w.pendingProps,U=ly(ma.current).createElement(P),U[Wt]=w,U[$t]=p,Oo(U,P,p),Kr(U),w.stateNode=U):w.memoizedState=K1(w.type,p.memoizedProps,w.pendingProps,p.memoizedState),null;case 27:return ir(w),p===null&&Ri&&(U=w.stateNode=DA(w.type,w.pendingProps,ma.current),sl=w,Nu=!0,Ji=Bu(U.firstChild)),U=w.pendingProps.children,p!==null||Ri?wl(p,w,U,P):w.child=Wc(w,null,U,P),Rl(p,w),w.child;case 5:return p===null&&Ri&&((X=U=Ji)&&(U=dE(U,w.type,w.pendingProps,Nu),U!==null?(w.stateNode=U,sl=w,Ji=Bu(U.firstChild),Nu=!1,X=!0):X=!1),X||Sc(w)),ir(w),X=w.type,ue=w.pendingProps,Be=p!==null?p.memoizedProps:null,U=ue.children,d0(X,ue)?U=null:Be!==null&&d0(X,Be)&&(w.flags|=32),w.memoizedState!==null&&(X=Ni(p,w,Qi,null,null,P),hy._currentValue=X),Rl(p,w),wl(p,w,U,P),w.child;case 6:return p===null&&Ri&&((p=P=Ji)&&(P=hE(P,w.pendingProps,Nu),P!==null?(w.stateNode=P,sl=w,Ji=null,p=!0):p=!1),p||Sc(w)),null;case 13:return Yg(p,w,P);case 4:return Ht(w,w.stateNode.containerInfo),U=w.pendingProps,p===null?w.child=Wc(w,null,U,P):wl(p,w,U,P),w.child;case 11:return pA(p,w,w.type,w.pendingProps,P);case 7:return wl(p,w,w.pendingProps,P),w.child;case 8:return wl(p,w,w.pendingProps.children,P),w.child;case 12:return wl(p,w,w.pendingProps.children,P),w.child;case 10:return U=w.pendingProps,sd(w,w.type,U.value),wl(p,w,U.children,P),w.child;case 9:return X=w.type._context,U=w.pendingProps.children,Nc(w),X=Qs(X),U=U(X),w.flags|=1,wl(p,w,U,P),w.child;case 14:return mA(p,w,w.type,w.pendingProps,P);case 15:return gA(p,w,w.type,w.pendingProps,P);case 19:return Yd(p,w,P);case 22:return lm(p,w,P);case 24:return Nc(w),U=Qs(oo),p===null?(X=ea(),X===null&&(X=Ur,ue=Yh(),X.pooledCache=ue,ue.refCount++,ue!==null&&(X.pooledCacheLanes|=P),X=ue),w.memoizedState={parent:U,cache:X},Nh(w),sd(w,oo,X)):((p.lanes&P)!==0&&(RA(p,w),hm(w,null,null,P),Oh()),X=p.memoizedState,ue=w.memoizedState,X.parent!==U?(X={parent:U,cache:U},w.memoizedState=X,w.lanes===0&&(w.memoizedState=w.updateQueue.baseState=X),sd(w,oo,U)):(U=ue.cache,sd(w,oo,U),U!==X.cache&&og(w,[oo],P,!0))),wl(p,w,w.pendingProps.children,P),w.child;case 29:throw w.pendingProps}throw Error(r(156,w.tag))}var vp=ht(null),zf=null,Eh=null;function sd(p,w,P){Ae(vp,w._currentValue),w._currentValue=P}function Xd(p){p._currentValue=vp.current,He(vp)}function wA(p,w,P){for(;p!==null;){var U=p.alternate;if((p.childLanes&w)!==w?(p.childLanes|=w,U!==null&&(U.childLanes|=w)):U!==null&&(U.childLanes&w)!==w&&(U.childLanes|=w),p===P)break;p=p.return}}function og(p,w,P,U){var X=p.child;for(X!==null&&(X.return=p);X!==null;){var ue=X.dependencies;if(ue!==null){var Be=X.child;ue=ue.firstContext;e:for(;ue!==null;){var ft=ue;ue=X;for(var Bt=0;Bt<w.length;Bt++)if(ft.context===w[Bt]){ue.lanes|=P,ft=ue.alternate,ft!==null&&(ft.lanes|=P),wA(ue.return,P,p),U||(Be=null);break e}ue=ft.next}}else if(X.tag===18){if(Be=X.return,Be===null)throw Error(r(341));Be.lanes|=P,ue=Be.alternate,ue!==null&&(ue.lanes|=P),wA(Be,P,p),Be=null}else Be=X.child;if(Be!==null)Be.return=X;else for(Be=X;Be!==null;){if(Be===p){Be=null;break}if(X=Be.sibling,X!==null){X.return=Be.return,Be=X;break}Be=Be.return}X=Be}}function _p(p,w,P,U){p=null;for(var X=w,ue=!1;X!==null;){if(!ue){if((X.flags&524288)!==0)ue=!0;else if((X.flags&262144)!==0)break}if(X.tag===10){var Be=X.alternate;if(Be===null)throw Error(r(387));if(Be=Be.memoizedProps,Be!==null){var ft=X.type;Us(X.pendingProps.value,Be.value)||(p!==null?p.push(ft):p=[ft])}}else if(X===It.current){if(Be=X.alternate,Be===null)throw Error(r(387));Be.memoizedState.memoizedState!==X.memoizedState.memoizedState&&(p!==null?p.push(hy):p=[hy])}X=X.return}p!==null&&og(w,p,P,U),w.flags|=262144}function Df(p){for(p=p.firstContext;p!==null;){if(!Us(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function Nc(p){zf=p,Eh=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Qs(p){return ef(zf,p)}function ac(p,w){return zf===null&&Nc(p),ef(p,w)}function ef(p,w){var P=w._currentValue;if(w={context:w,memoizedValue:P,next:null},Eh===null){if(p===null)throw Error(r(308));Eh=w,p.dependencies={lanes:0,firstContext:w},p.flags|=524288}else Eh=Eh.next=w;return P}var rc=!1;function Nh(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function RA(p,w){p=p.updateQueue,w.updateQueue===p&&(w.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Mf(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function If(p,w,P){var U=p.updateQueue;if(U===null)return null;if(U=U.shared,(Or&2)!==0){var X=U.pending;return X===null?w.next=w:(w.next=X.next,X.next=w),U.pending=w,w=an(p),su(p,null,P),w}return iu(p,U,w,P),an(p)}function Lf(p,w,P){if(w=w.updateQueue,w!==null&&(w=w.shared,(P&4194176)!==0)){var U=w.lanes;U&=p.pendingLanes,P|=U,w.lanes=P,yt(p,P)}}function Xg(p,w){var P=p.updateQueue,U=p.alternate;if(U!==null&&(U=U.updateQueue,P===U)){var X=null,ue=null;if(P=P.firstBaseUpdate,P!==null){do{var Be={lane:P.lane,tag:P.tag,payload:P.payload,callback:null,next:null};ue===null?X=ue=Be:ue=ue.next=Be,P=P.next}while(P!==null);ue===null?X=ue=w:ue=ue.next=w}else X=ue=w;P={baseState:U.baseState,firstBaseUpdate:X,lastBaseUpdate:ue,shared:U.shared,callbacks:U.callbacks},p.updateQueue=P;return}p=P.lastBaseUpdate,p===null?P.firstBaseUpdate=w:p.next=w,P.lastBaseUpdate=w}var Tl=!1;function Oh(){if(Tl){var p=Ke;if(p!==null)throw p}}function hm(p,w,P,U){Tl=!1;var X=p.updateQueue;rc=!1;var ue=X.firstBaseUpdate,Be=X.lastBaseUpdate,ft=X.shared.pending;if(ft!==null){X.shared.pending=null;var Bt=ft,la=Bt.next;Bt.next=null,Be===null?ue=la:Be.next=la,Be=Bt;var Za=p.alternate;Za!==null&&(Za=Za.updateQueue,ft=Za.lastBaseUpdate,ft!==Be&&(ft===null?Za.firstBaseUpdate=la:ft.next=la,Za.lastBaseUpdate=Bt))}if(ue!==null){var sr=X.baseState;Be=0,Za=la=Bt=null,ft=ue;do{var xa=ft.lane&-536870913,qa=xa!==ft.lane;if(qa?(fr&xa)===xa:(U&xa)===xa){xa!==0&&xa===De&&(Tl=!0),Za!==null&&(Za=Za.next={lane:0,tag:ft.tag,payload:ft.payload,callback:null,next:null});e:{var Jr=p,ti=ft;xa=w;var Jo=P;switch(ti.tag){case 1:if(Jr=ti.payload,typeof Jr=="function"){sr=Jr.call(Jo,sr,xa);break e}sr=Jr;break e;case 3:Jr.flags=Jr.flags&-65537|128;case 0:if(Jr=ti.payload,xa=typeof Jr=="function"?Jr.call(Jo,sr,xa):Jr,xa==null)break e;sr=Ee({},sr,xa);break e;case 2:rc=!0}}xa=ft.callback,xa!==null&&(p.flags|=64,qa&&(p.flags|=8192),qa=X.callbacks,qa===null?X.callbacks=[xa]:qa.push(xa))}else qa={lane:xa,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},Za===null?(la=Za=qa,Bt=sr):Za=Za.next=qa,Be|=xa;if(ft=ft.next,ft===null){if(ft=X.shared.pending,ft===null)break;qa=ft,ft=qa.next,qa.next=null,X.lastBaseUpdate=qa,X.shared.pending=null}}while(!0);Za===null&&(Bt=sr),X.baseState=Bt,X.firstBaseUpdate=la,X.lastBaseUpdate=Za,ue===null&&(X.shared.lanes=0),ts|=Be,p.lanes=Be,p.memoizedState=sr}}function TA(p,w){if(typeof p!="function")throw Error(r(191,p));p.call(w)}function wp(p,w){var P=p.callbacks;if(P!==null)for(p.callbacks=null,p=0;p<P.length;p++)TA(P[p],w)}function Ff(p,w){try{var P=w.updateQueue,U=P!==null?P.lastEffect:null;if(U!==null){var X=U.next;P=X;do{if((P.tag&p)===p){U=void 0;var ue=P.create,Be=P.inst;U=ue(),Be.destroy=U}P=P.next}while(P!==X)}}catch(ft){js(w,w.return,ft)}}function Ko(p,w,P){try{var U=w.updateQueue,X=U!==null?U.lastEffect:null;if(X!==null){var ue=X.next;U=ue;do{if((U.tag&p)===p){var Be=U.inst,ft=Be.destroy;if(ft!==void 0){Be.destroy=void 0,X=w;var Bt=P;try{ft()}catch(la){js(X,Bt,la)}}}U=U.next}while(U!==ue)}}catch(la){js(w,w.return,la)}}function nc(p){var w=p.updateQueue;if(w!==null){var P=p.stateNode;try{wp(w,P)}catch(U){js(p,p.return,U)}}}function Rp(p,w,P){P.props=Fu(p.type,p.memoizedProps),P.state=p.memoizedState;try{P.componentWillUnmount()}catch(U){js(p,w,U)}}function Oc(p,w){try{var P=p.ref;if(P!==null){var U=p.stateNode;switch(p.tag){case 26:case 27:case 5:var X=U;break;default:X=U}typeof P=="function"?p.refCleanup=P(X):P.current=X}}catch(ue){js(p,w,ue)}}function hl(p,w){var P=p.ref,U=p.refCleanup;if(P!==null)if(typeof U=="function")try{U()}catch(X){js(p,w,X)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof P=="function")try{P(null)}catch(X){js(p,w,X)}else P.current=null}function Jg(p){var w=p.type,P=p.memoizedProps,U=p.stateNode;try{e:switch(w){case"button":case"input":case"select":case"textarea":P.autoFocus&&U.focus();break e;case"img":P.src?U.src=P.src:P.srcSet&&(U.srcset=P.srcSet)}}catch(X){js(p,p.return,X)}}function kn(p,w,P){try{var U=p.stateNode;lE(U,p.type,P,w),U[$t]=w}catch(X){js(p,p.return,X)}}function tf(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27||p.tag===4}function CA(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||tf(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==27&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function SA(p,w,P){var U=p.tag;if(U===5||U===6)p=p.stateNode,w?P.nodeType===8?P.parentNode.insertBefore(p,w):P.insertBefore(p,w):(P.nodeType===8?(w=P.parentNode,w.insertBefore(p,P)):(w=P,w.appendChild(p)),P=P._reactRootContainer,P!=null||w.onclick!==null||(w.onclick=oy));else if(U!==4&&U!==27&&(p=p.child,p!==null))for(SA(p,w,P),p=p.sibling;p!==null;)SA(p,w,P),p=p.sibling}function Tp(p,w,P){var U=p.tag;if(U===5||U===6)p=p.stateNode,w?P.insertBefore(p,w):P.appendChild(p);else if(U!==4&&U!==27&&(p=p.child,p!==null))for(Tp(p,w,P),p=p.sibling;p!==null;)Tp(p,w,P),p=p.sibling}var Cl=!1,Oi=!1,Wo=!1,ku=typeof WeakSet=="function"?WeakSet:Set,Si=null,Qg=!1;function Uu(p,w){if(p=p.containerInfo,Qd=wm,p=Dl(p),Po(p)){if("selectionStart"in p)var P={start:p.selectionStart,end:p.selectionEnd};else e:{P=(P=p.ownerDocument)&&P.defaultView||window;var U=P.getSelection&&P.getSelection();if(U&&U.rangeCount!==0){P=U.anchorNode;var X=U.anchorOffset,ue=U.focusNode;U=U.focusOffset;try{P.nodeType,ue.nodeType}catch{P=null;break e}var Be=0,ft=-1,Bt=-1,la=0,Za=0,sr=p,xa=null;t:for(;;){for(var qa;sr!==P||X!==0&&sr.nodeType!==3||(ft=Be+X),sr!==ue||U!==0&&sr.nodeType!==3||(Bt=Be+U),sr.nodeType===3&&(Be+=sr.nodeValue.length),(qa=sr.firstChild)!==null;)xa=sr,sr=qa;for(;;){if(sr===p)break t;if(xa===P&&++la===X&&(ft=Be),xa===ue&&++Za===U&&(Bt=Be),(qa=sr.nextSibling)!==null)break;sr=xa,xa=sr.parentNode}sr=qa}P=ft===-1||Bt===-1?null:{start:ft,end:Bt}}else P=null}P=P||{start:0,end:0}}else P=null;for(zA={focusedElem:p,selectionRange:P},wm=!1,Si=w;Si!==null;)if(w=Si,p=w.child,(w.subtreeFlags&1028)!==0&&p!==null)p.return=w,Si=p;else for(;Si!==null;){switch(w=Si,ue=w.alternate,p=w.flags,w.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&ue!==null){p=void 0,P=w,X=ue.memoizedProps,ue=ue.memoizedState,U=P.stateNode;try{var Jr=Fu(P.type,X,P.elementType===P.type);p=U.getSnapshotBeforeUpdate(Jr,ue),U.__reactInternalSnapshotBeforeUpdate=p}catch(ti){js(P,P.return,ti)}}break;case 3:if((p&1024)!==0){if(p=w.stateNode.containerInfo,P=p.nodeType,P===9)Z1(p);else if(P===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":Z1(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=w.sibling,p!==null){p.return=w.return,Si=p;break}Si=w.return}return Jr=Qg,Qg=!1,Jr}function bA(p,w,P){var U=P.flags;switch(P.tag){case 0:case 11:case 15:re(p,P),U&4&&Ff(5,P);break;case 1:if(re(p,P),U&4)if(p=P.stateNode,w===null)try{p.componentDidMount()}catch(ft){js(P,P.return,ft)}else{var X=Fu(P.type,w.memoizedProps);w=w.memoizedState;try{p.componentDidUpdate(X,w,p.__reactInternalSnapshotBeforeUpdate)}catch(ft){js(P,P.return,ft)}}U&64&&nc(P),U&512&&Oc(P,P.return);break;case 3:if(re(p,P),U&64&&(U=P.updateQueue,U!==null)){if(p=null,P.child!==null)switch(P.child.tag){case 27:case 5:p=P.child.stateNode;break;case 1:p=P.child.stateNode}try{wp(U,p)}catch(ft){js(P,P.return,ft)}}break;case 26:re(p,P),U&512&&Oc(P,P.return);break;case 27:case 5:re(p,P),w===null&&U&4&&Jg(P),U&512&&Oc(P,P.return);break;case 12:re(p,P);break;case 13:re(p,P),U&4&&A(p,P);break;case 22:if(X=P.memoizedState!==null||Cl,!X){w=w!==null&&w.memoizedState!==null||Oi;var ue=Cl,Be=Oi;Cl=X,(Oi=w)&&!Be?pe(p,P,(P.subtreeFlags&8772)!==0):re(p,P),Cl=ue,Oi=Be}U&512&&(P.memoizedProps.mode==="manual"?Oc(P,P.return):hl(P,P.return));break;default:re(p,P)}}function af(p){var w=p.alternate;w!==null&&(p.alternate=null,af(w)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(w=p.stateNode,w!==null&&Zr(w)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Yo=null,y=!1;function o(p,w,P){for(P=P.child;P!==null;)d(p,w,P),P=P.sibling}function d(p,w,P){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(pr,P)}catch{}switch(P.tag){case 26:Oi||hl(P,w),o(p,w,P),P.memoizedState?P.memoizedState.count--:P.stateNode&&(P=P.stateNode,P.parentNode.removeChild(P));break;case 27:Oi||hl(P,w);var U=Yo,X=y;for(Yo=P.stateNode,o(p,w,P),P=P.stateNode,w=P.attributes;w.length;)P.removeAttributeNode(w[0]);Zr(P),Yo=U,y=X;break;case 5:Oi||hl(P,w);case 6:X=Yo;var ue=y;if(Yo=null,o(p,w,P),Yo=X,y=ue,Yo!==null)if(y)try{p=Yo,U=P.stateNode,p.nodeType===8?p.parentNode.removeChild(U):p.removeChild(U)}catch(Be){js(P,w,Be)}else try{Yo.removeChild(P.stateNode)}catch(Be){js(P,w,Be)}break;case 18:Yo!==null&&(y?(w=Yo,P=P.stateNode,w.nodeType===8?G1(w.parentNode,P):w.nodeType===1&&G1(w,P),jA(w)):G1(Yo,P.stateNode));break;case 4:U=Yo,X=y,Yo=P.stateNode.containerInfo,y=!0,o(p,w,P),Yo=U,y=X;break;case 0:case 11:case 14:case 15:Oi||Ko(2,P,w),Oi||Ko(4,P,w),o(p,w,P);break;case 1:Oi||(hl(P,w),U=P.stateNode,typeof U.componentWillUnmount=="function"&&Rp(P,w,U)),o(p,w,P);break;case 21:o(p,w,P);break;case 22:Oi||hl(P,w),Oi=(U=Oi)||P.memoizedState!==null,o(p,w,P),Oi=U;break;default:o(p,w,P)}}function A(p,w){if(w.memoizedState===null&&(p=w.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{jA(p)}catch(P){js(w,w.return,P)}}function T(p){switch(p.tag){case 13:case 19:var w=p.stateNode;return w===null&&(w=p.stateNode=new ku),w;case 22:return p=p.stateNode,w=p._retryCache,w===null&&(w=p._retryCache=new ku),w;default:throw Error(r(435,p.tag))}}function S(p,w){var P=T(p);w.forEach(function(U){var X=iE.bind(null,p,U);P.has(U)||(P.add(U),U.then(X,X))})}function E(p,w){var P=w.deletions;if(P!==null)for(var U=0;U<P.length;U++){var X=P[U],ue=p,Be=w,ft=Be;e:for(;ft!==null;){switch(ft.tag){case 27:case 5:Yo=ft.stateNode,y=!1;break e;case 3:Yo=ft.stateNode.containerInfo,y=!0;break e;case 4:Yo=ft.stateNode.containerInfo,y=!0;break e}ft=ft.return}if(Yo===null)throw Error(r(160));d(ue,Be,X),Yo=null,y=!1,ue=X.alternate,ue!==null&&(ue.return=null),X.return=null}if(w.subtreeFlags&13878)for(w=w.child;w!==null;)Z(w,p),w=w.sibling}var k=null;function Z(p,w){var P=p.alternate,U=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:E(w,p),K(p),U&4&&(Ko(3,p,p.return),Ff(3,p),Ko(5,p,p.return));break;case 1:E(w,p),K(p),U&512&&(Oi||P===null||hl(P,P.return)),U&64&&Cl&&(p=p.updateQueue,p!==null&&(U=p.callbacks,U!==null&&(P=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=P===null?U:P.concat(U))));break;case 26:var X=k;if(E(w,p),K(p),U&512&&(Oi||P===null||hl(P,P.return)),U&4){var ue=P!==null?P.memoizedState:null;if(U=p.memoizedState,P===null)if(U===null)if(p.stateNode===null){e:{U=p.type,P=p.memoizedProps,X=X.ownerDocument||X;t:switch(U){case"title":ue=X.getElementsByTagName("title")[0],(!ue||ue[zr]||ue[Wt]||ue.namespaceURI==="http://www.w3.org/2000/svg"||ue.hasAttribute("itemprop"))&&(ue=X.createElement(U),X.head.insertBefore(ue,X.querySelector("head > title"))),Oo(ue,U,P),ue[Wt]=p,Kr(ue),U=ue;break e;case"link":var Be=W1("link","href",X).get(U+(P.href||""));if(Be){for(var ft=0;ft<Be.length;ft++)if(ue=Be[ft],ue.getAttribute("href")===(P.href==null?null:P.href)&&ue.getAttribute("rel")===(P.rel==null?null:P.rel)&&ue.getAttribute("title")===(P.title==null?null:P.title)&&ue.getAttribute("crossorigin")===(P.crossOrigin==null?null:P.crossOrigin)){Be.splice(ft,1);break t}}ue=X.createElement(U),Oo(ue,U,P),X.head.appendChild(ue);break;case"meta":if(Be=W1("meta","content",X).get(U+(P.content||""))){for(ft=0;ft<Be.length;ft++)if(ue=Be[ft],ue.getAttribute("content")===(P.content==null?null:""+P.content)&&ue.getAttribute("name")===(P.name==null?null:P.name)&&ue.getAttribute("property")===(P.property==null?null:P.property)&&ue.getAttribute("http-equiv")===(P.httpEquiv==null?null:P.httpEquiv)&&ue.getAttribute("charset")===(P.charSet==null?null:P.charSet)){Be.splice(ft,1);break t}}ue=X.createElement(U),Oo(ue,U,P),X.head.appendChild(ue);break;default:throw Error(r(468,U))}ue[Wt]=p,Kr(ue),U=ue}p.stateNode=U}else Y1(X,p.type,p.stateNode);else p.stateNode=bp(X,U,p.memoizedProps);else ue!==U?(ue===null?P.stateNode!==null&&(P=P.stateNode,P.parentNode.removeChild(P)):ue.count--,U===null?Y1(X,p.type,p.stateNode):bp(X,U,p.memoizedProps)):U===null&&p.stateNode!==null&&kn(p,p.memoizedProps,P.memoizedProps)}break;case 27:if(U&4&&p.alternate===null){X=p.stateNode,ue=p.memoizedProps;try{for(var Bt=X.firstChild;Bt;){var la=Bt.nextSibling,Za=Bt.nodeName;Bt[zr]||Za==="HEAD"||Za==="BODY"||Za==="SCRIPT"||Za==="STYLE"||Za==="LINK"&&Bt.rel.toLowerCase()==="stylesheet"||X.removeChild(Bt),Bt=la}for(var sr=p.type,xa=X.attributes;xa.length;)X.removeAttributeNode(xa[0]);Oo(X,sr,ue),X[Wt]=p,X[$t]=ue}catch(Jr){js(p,p.return,Jr)}}case 5:if(E(w,p),K(p),U&512&&(Oi||P===null||hl(P,P.return)),p.flags&32){X=p.stateNode;try{$u(X,"")}catch(Jr){js(p,p.return,Jr)}}U&4&&p.stateNode!=null&&(X=p.memoizedProps,kn(p,X,P!==null?P.memoizedProps:X)),U&1024&&(Wo=!0);break;case 6:if(E(w,p),K(p),U&4){if(p.stateNode===null)throw Error(r(162));U=p.memoizedProps,P=p.stateNode;try{P.nodeValue=U}catch(Jr){js(p,p.return,Jr)}}break;case 3:if(_m=null,X=k,k=hg(w.containerInfo),E(w,p),k=X,K(p),U&4&&P!==null&&P.memoizedState.isDehydrated)try{jA(w.containerInfo)}catch(Jr){js(p,p.return,Jr)}Wo&&(Wo=!1,Y(p));break;case 4:U=k,k=hg(p.stateNode.containerInfo),E(w,p),K(p),k=U;break;case 12:E(w,p),K(p);break;case 13:E(w,p),K(p),p.child.flags&8192&&p.memoizedState!==null!=(P!==null&&P.memoizedState!==null)&&(ui=ka()),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,S(p,U)));break;case 22:if(U&512&&(Oi||P===null||hl(P,P.return)),Bt=p.memoizedState!==null,la=P!==null&&P.memoizedState!==null,Za=Cl,sr=Oi,Cl=Za||Bt,Oi=sr||la,E(w,p),Oi=sr,Cl=Za,K(p),w=p.stateNode,w._current=p,w._visibility&=-3,w._visibility|=w._pendingVisibility&2,U&8192&&(w._visibility=Bt?w._visibility&-2:w._visibility|1,Bt&&(w=Cl||Oi,P===null||la||w||ne(p)),p.memoizedProps===null||p.memoizedProps.mode!=="manual"))e:for(P=null,w=p;;){if(w.tag===5||w.tag===26||w.tag===27){if(P===null){la=P=w;try{if(X=la.stateNode,Bt)ue=X.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{Be=la.stateNode,ft=la.memoizedProps.style;var qa=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;Be.style.display=qa==null||typeof qa=="boolean"?"":(""+qa).trim()}}catch(Jr){js(la,la.return,Jr)}}}else if(w.tag===6){if(P===null){la=w;try{la.stateNode.nodeValue=Bt?"":la.memoizedProps}catch(Jr){js(la,la.return,Jr)}}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===p)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break e;for(;w.sibling===null;){if(w.return===null||w.return===p)break e;P===w&&(P=null),w=w.return}P===w&&(P=null),w.sibling.return=w.return,w=w.sibling}U&4&&(U=p.updateQueue,U!==null&&(P=U.retryQueue,P!==null&&(U.retryQueue=null,S(p,P))));break;case 19:E(w,p),K(p),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,S(p,U)));break;case 21:break;default:E(w,p),K(p)}}function K(p){var w=p.flags;if(w&2){try{if(p.tag!==27){e:{for(var P=p.return;P!==null;){if(tf(P)){var U=P;break e}P=P.return}throw Error(r(160))}switch(U.tag){case 27:var X=U.stateNode,ue=CA(p);Tp(p,ue,X);break;case 5:var Be=U.stateNode;U.flags&32&&($u(Be,""),U.flags&=-33);var ft=CA(p);Tp(p,ft,Be);break;case 3:case 4:var Bt=U.stateNode.containerInfo,la=CA(p);SA(p,la,Bt);break;default:throw Error(r(161))}}}catch(Za){js(p,p.return,Za)}p.flags&=-3}w&4096&&(p.flags&=-4097)}function Y(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var w=p;Y(w),w.tag===5&&w.flags&1024&&w.stateNode.reset(),p=p.sibling}}function re(p,w){if(w.subtreeFlags&8772)for(w=w.child;w!==null;)bA(p,w.alternate,w),w=w.sibling}function ne(p){for(p=p.child;p!==null;){var w=p;switch(w.tag){case 0:case 11:case 14:case 15:Ko(4,w,w.return),ne(w);break;case 1:hl(w,w.return);var P=w.stateNode;typeof P.componentWillUnmount=="function"&&Rp(w,w.return,P),ne(w);break;case 26:case 27:case 5:hl(w,w.return),ne(w);break;case 22:hl(w,w.return),w.memoizedState===null&&ne(w);break;default:ne(w)}p=p.sibling}}function pe(p,w,P){for(P=P&&(w.subtreeFlags&8772)!==0,w=w.child;w!==null;){var U=w.alternate,X=p,ue=w,Be=ue.flags;switch(ue.tag){case 0:case 11:case 15:pe(X,ue,P),Ff(4,ue);break;case 1:if(pe(X,ue,P),U=ue,X=U.stateNode,typeof X.componentDidMount=="function")try{X.componentDidMount()}catch(la){js(U,U.return,la)}if(U=ue,X=U.updateQueue,X!==null){var ft=U.stateNode;try{var Bt=X.shared.hiddenCallbacks;if(Bt!==null)for(X.shared.hiddenCallbacks=null,X=0;X<Bt.length;X++)TA(Bt[X],ft)}catch(la){js(U,U.return,la)}}P&&Be&64&&nc(ue),Oc(ue,ue.return);break;case 26:case 27:case 5:pe(X,ue,P),P&&U===null&&Be&4&&Jg(ue),Oc(ue,ue.return);break;case 12:pe(X,ue,P);break;case 13:pe(X,ue,P),P&&Be&4&&A(X,ue);break;case 22:ue.memoizedState===null&&pe(X,ue,P),Oc(ue,ue.return);break;default:pe(X,ue,P)}w=w.sibling}}function Pe(p,w){var P=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(P=p.memoizedState.cachePool.pool),p=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(p=w.memoizedState.cachePool.pool),p!==P&&(p!=null&&p.refCount++,P!=null&&G(P))}function Ce(p,w){p=null,w.alternate!==null&&(p=w.alternate.memoizedState.cache),w=w.memoizedState.cache,w!==p&&(w.refCount++,p!=null&&G(p))}function Ve(p,w,P,U){if(w.subtreeFlags&10256)for(w=w.child;w!==null;)Le(p,w,P,U),w=w.sibling}function Le(p,w,P,U){var X=w.flags;switch(w.tag){case 0:case 11:case 15:Ve(p,w,P,U),X&2048&&Ff(9,w);break;case 3:Ve(p,w,P,U),X&2048&&(p=null,w.alternate!==null&&(p=w.alternate.memoizedState.cache),w=w.memoizedState.cache,w!==p&&(w.refCount++,p!=null&&G(p)));break;case 12:if(X&2048){Ve(p,w,P,U),p=w.stateNode;try{var ue=w.memoizedProps,Be=ue.id,ft=ue.onPostCommit;typeof ft=="function"&&ft(Be,w.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Bt){js(w,w.return,Bt)}}else Ve(p,w,P,U);break;case 23:break;case 22:ue=w.stateNode,w.memoizedState!==null?ue._visibility&4?Ve(p,w,P,U):nt(p,w):ue._visibility&4?Ve(p,w,P,U):(ue._visibility|=4,$e(p,w,P,U,(w.subtreeFlags&10256)!==0)),X&2048&&Pe(w.alternate,w);break;case 24:Ve(p,w,P,U),X&2048&&Ce(w.alternate,w);break;default:Ve(p,w,P,U)}}function $e(p,w,P,U,X){for(X=X&&(w.subtreeFlags&10256)!==0,w=w.child;w!==null;){var ue=p,Be=w,ft=P,Bt=U,la=Be.flags;switch(Be.tag){case 0:case 11:case 15:$e(ue,Be,ft,Bt,X),Ff(8,Be);break;case 23:break;case 22:var Za=Be.stateNode;Be.memoizedState!==null?Za._visibility&4?$e(ue,Be,ft,Bt,X):nt(ue,Be):(Za._visibility|=4,$e(ue,Be,ft,Bt,X)),X&&la&2048&&Pe(Be.alternate,Be);break;case 24:$e(ue,Be,ft,Bt,X),X&&la&2048&&Ce(Be.alternate,Be);break;default:$e(ue,Be,ft,Bt,X)}w=w.sibling}}function nt(p,w){if(w.subtreeFlags&10256)for(w=w.child;w!==null;){var P=p,U=w,X=U.flags;switch(U.tag){case 22:nt(P,U),X&2048&&Pe(U.alternate,U);break;case 24:nt(P,U),X&2048&&Ce(U.alternate,U);break;default:nt(P,U)}w=w.sibling}}var at=8192;function pt(p){if(p.subtreeFlags&at)for(p=p.child;p!==null;)ot(p),p=p.sibling}function ot(p){switch(p.tag){case 26:pt(p),p.flags&at&&p.memoizedState!==null&&BC(k,p.memoizedState,p.memoizedProps);break;case 5:pt(p);break;case 3:case 4:var w=k;k=hg(p.stateNode.containerInfo),pt(p),k=w;break;case 22:p.memoizedState===null&&(w=p.alternate,w!==null&&w.memoizedState!==null?(w=at,at=16777216,pt(p),at=w):pt(p));break;default:pt(p)}}function ut(p){var w=p.alternate;if(w!==null&&(p=w.child,p!==null)){w.child=null;do w=p.sibling,p.sibling=null,p=w;while(p!==null)}}function ct(p){var w=p.deletions;if((p.flags&16)!==0){if(w!==null)for(var P=0;P<w.length;P++){var U=w[P];Si=U,Qt(U,p)}ut(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)At(p),p=p.sibling}function At(p){switch(p.tag){case 0:case 11:case 15:ct(p),p.flags&2048&&Ko(9,p,p.return);break;case 3:ct(p);break;case 12:ct(p);break;case 22:var w=p.stateNode;p.memoizedState!==null&&w._visibility&4&&(p.return===null||p.return.tag!==13)?(w._visibility&=-5,Tt(p)):ct(p);break;default:ct(p)}}function Tt(p){var w=p.deletions;if((p.flags&16)!==0){if(w!==null)for(var P=0;P<w.length;P++){var U=w[P];Si=U,Qt(U,p)}ut(p)}for(p=p.child;p!==null;){switch(w=p,w.tag){case 0:case 11:case 15:Ko(8,w,w.return),Tt(w);break;case 22:P=w.stateNode,P._visibility&4&&(P._visibility&=-5,Tt(w));break;default:Tt(w)}p=p.sibling}}function Qt(p,w){for(;Si!==null;){var P=Si;switch(P.tag){case 0:case 11:case 15:Ko(8,P,w);break;case 23:case 22:if(P.memoizedState!==null&&P.memoizedState.cachePool!==null){var U=P.memoizedState.cachePool.pool;U!=null&&U.refCount++}break;case 24:G(P.memoizedState.cache)}if(U=P.child,U!==null)U.return=P,Si=U;else e:for(P=p;Si!==null;){U=Si;var X=U.sibling,ue=U.return;if(af(U),U===P){Si=null;break e}if(X!==null){X.return=ue,Si=X;break e}Si=ue}}}function Ut(p,w,P,U){this.tag=p,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(p,w,P,U){return new Ut(p,w,P,U)}function ca(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Sa(p,w){var P=p.alternate;return P===null?(P=ra(p.tag,w,p.key,p.mode),P.elementType=p.elementType,P.type=p.type,P.stateNode=p.stateNode,P.alternate=p,p.alternate=P):(P.pendingProps=w,P.type=p.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=p.flags&31457280,P.childLanes=p.childLanes,P.lanes=p.lanes,P.child=p.child,P.memoizedProps=p.memoizedProps,P.memoizedState=p.memoizedState,P.updateQueue=p.updateQueue,w=p.dependencies,P.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},P.sibling=p.sibling,P.index=p.index,P.ref=p.ref,P.refCleanup=p.refCleanup,P}function Ft(p,w){p.flags&=31457282;var P=p.alternate;return P===null?(p.childLanes=0,p.lanes=w,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=P.childLanes,p.lanes=P.lanes,p.child=P.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=P.memoizedProps,p.memoizedState=P.memoizedState,p.updateQueue=P.updateQueue,p.type=P.type,w=P.dependencies,p.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),p}function sa(p,w,P,U,X,ue){var Be=0;if(U=p,typeof p=="function")ca(p)&&(Be=1);else if(typeof p=="string")Be=UC(p,P,zt.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case v:return Vt(P.children,X,ue,w);case R:Be=8,X|=24;break;case x:return p=ra(12,P,w,X|2),p.elementType=x,p.lanes=ue,p;case H:return p=ra(13,P,w,X),p.elementType=H,p.lanes=ue,p;case q:return p=ra(19,P,w,X),p.elementType=q,p.lanes=ue,p;case oe:return oa(P,X,ue,w);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case N:case F:Be=10;break e;case L:Be=9;break e;case j:Be=11;break e;case W:Be=14;break e;case ee:Be=16,U=null;break e}Be=29,P=Error(r(130,p===null?"null":typeof p,"")),U=null}return w=ra(Be,P,w,X),w.elementType=p,w.type=U,w.lanes=ue,w}function Vt(p,w,P,U){return p=ra(7,p,U,w),p.lanes=P,p}function oa(p,w,P,U){p=ra(22,p,U,w),p.elementType=oe,p.lanes=P;var X={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ue=X._current;if(ue===null)throw Error(r(456));if((X._pendingVisibility&2)===0){var Be=nl(ue,2);Be!==null&&(X._pendingVisibility|=2,Gl(Be,ue,2))}},attach:function(){var ue=X._current;if(ue===null)throw Error(r(456));if((X._pendingVisibility&2)!==0){var Be=nl(ue,2);Be!==null&&(X._pendingVisibility&=-3,Gl(Be,ue,2))}}};return p.stateNode=X,p}function ta(p,w,P){return p=ra(6,p,null,w),p.lanes=P,p}function da(p,w,P){return w=ra(4,p.children!==null?p.children:[],p.key,w),w.lanes=P,w.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},w}function Yt(p){p.flags|=4}function pa(p,w){if(w.type!=="stylesheet"||(w.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!X1(w)){if(w=Ll.current,w!==null&&((fr&4194176)===fr?Qu!==null:(fr&62914560)!==fr&&(fr&536870912)===0||w!==Qu))throw Ou=vh,Qm;p.flags|=8192}}function Ia(p,w){w!==null&&(p.flags|=4),p.flags&16384&&(w=p.tag!==22?Xt():536870912,p.lanes|=w,wo|=w)}function La(p,w){if(!Ri)switch(p.tailMode){case"hidden":w=p.tail;for(var P=null;w!==null;)w.alternate!==null&&(P=w),w=w.sibling;P===null?p.tail=null:P.sibling=null;break;case"collapsed":P=p.tail;for(var U=null;P!==null;)P.alternate!==null&&(U=P),P=P.sibling;U===null?w||p.tail===null?p.tail=null:p.tail.sibling=null:U.sibling=null}}function Oa(p){var w=p.alternate!==null&&p.alternate.child===p.child,P=0,U=0;if(w)for(var X=p.child;X!==null;)P|=X.lanes|X.childLanes,U|=X.subtreeFlags&31457280,U|=X.flags&31457280,X.return=p,X=X.sibling;else for(X=p.child;X!==null;)P|=X.lanes|X.childLanes,U|=X.subtreeFlags,U|=X.flags,X.return=p,X=X.sibling;return p.subtreeFlags|=U,p.childLanes=P,w}function lr(p,w,P){var U=w.pendingProps;switch(qh(w),w.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oa(w),null;case 1:return Oa(w),null;case 3:return P=w.stateNode,U=null,p!==null&&(U=p.memoizedState.cache),w.memoizedState.cache!==U&&(w.flags|=2048),Xd(oo),_t(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(p===null||p.child===null)&&(Hh(w)?Yt(w):p===null||p.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,ou!==null&&(fm(ou),ou=null))),Oa(w),null;case 26:return P=w.memoizedState,p===null?(Yt(w),P!==null?(Oa(w),pa(w,P)):(Oa(w),w.flags&=-16777217)):P?P!==p.memoizedState?(Yt(w),Oa(w),pa(w,P)):(Oa(w),w.flags&=-16777217):(p.memoizedProps!==U&&Yt(w),Oa(w),w.flags&=-16777217),null;case 27:Ea(w),P=ma.current;var X=w.type;if(p!==null&&w.stateNode!=null)p.memoizedProps!==U&&Yt(w);else{if(!U){if(w.stateNode===null)throw Error(r(166));return Oa(w),null}p=zt.current,Hh(w)?xf(w):(p=DA(X,U,P),w.stateNode=p,Yt(w))}return Oa(w),null;case 5:if(Ea(w),P=w.type,p!==null&&w.stateNode!=null)p.memoizedProps!==U&&Yt(w);else{if(!U){if(w.stateNode===null)throw Error(r(166));return Oa(w),null}if(p=zt.current,Hh(w))xf(w);else{switch(X=ly(ma.current),p){case 1:p=X.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:p=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":p=X.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":p=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof U.is=="string"?X.createElement("select",{is:U.is}):X.createElement("select"),U.multiple?p.multiple=!0:U.size&&(p.size=U.size);break;default:p=typeof U.is=="string"?X.createElement(P,{is:U.is}):X.createElement(P)}}p[Wt]=w,p[$t]=U;e:for(X=w.child;X!==null;){if(X.tag===5||X.tag===6)p.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===w)break e;for(;X.sibling===null;){if(X.return===null||X.return===w)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}w.stateNode=p;e:switch(Oo(p,P,U),P){case"button":case"input":case"select":case"textarea":p=!!U.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Yt(w)}}return Oa(w),w.flags&=-16777217,null;case 6:if(p&&w.stateNode!=null)p.memoizedProps!==U&&Yt(w);else{if(typeof U!="string"&&w.stateNode===null)throw Error(r(166));if(p=ma.current,Hh(w)){if(p=w.stateNode,P=w.memoizedProps,U=null,X=sl,X!==null)switch(X.tag){case 27:case 5:U=X.memoizedProps}p[Wt]=w,p=!!(p.nodeValue===P||U!==null&&U.suppressHydrationWarning===!0||Bf(p.nodeValue,P)),p||Sc(w)}else p=ly(p).createTextNode(U),p[Wt]=w,w.stateNode=p}return Oa(w),null;case 13:if(U=w.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(X=Hh(w),U!==null&&U.dehydrated!==null){if(p===null){if(!X)throw Error(r(318));if(X=w.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(r(317));X[Wt]=w}else $h(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;Oa(w),X=!1}else ou!==null&&(fm(ou),ou=null),X=!0;if(!X)return w.flags&256?(Jc(w),w):(Jc(w),null)}if(Jc(w),(w.flags&128)!==0)return w.lanes=P,w;if(P=U!==null,p=p!==null&&p.memoizedState!==null,P){U=w.child,X=null,U.alternate!==null&&U.alternate.memoizedState!==null&&U.alternate.memoizedState.cachePool!==null&&(X=U.alternate.memoizedState.cachePool.pool);var ue=null;U.memoizedState!==null&&U.memoizedState.cachePool!==null&&(ue=U.memoizedState.cachePool.pool),ue!==X&&(U.flags|=2048)}return P!==p&&P&&(w.child.flags|=8192),Ia(w,w.updateQueue),Oa(w),null;case 4:return _t(),p===null&&l0(w.stateNode.containerInfo),Oa(w),null;case 10:return Xd(w.type),Oa(w),null;case 19:if(He(Bs),X=w.memoizedState,X===null)return Oa(w),null;if(U=(w.flags&128)!==0,ue=X.rendering,ue===null)if(U)La(X,!1);else{if(Dn!==0||p!==null&&(p.flags&128)!==0)for(p=w.child;p!==null;){if(ue=rm(p),ue!==null){for(w.flags|=128,La(X,!1),p=ue.updateQueue,w.updateQueue=p,Ia(w,p),w.subtreeFlags=0,p=P,P=w.child;P!==null;)Ft(P,p),P=P.sibling;return Ae(Bs,Bs.current&1|2),w.child}p=p.sibling}X.tail!==null&&ka()>Ro&&(w.flags|=128,U=!0,La(X,!1),w.lanes=4194304)}else{if(!U)if(p=rm(ue),p!==null){if(w.flags|=128,U=!0,p=p.updateQueue,w.updateQueue=p,Ia(w,p),La(X,!0),X.tail===null&&X.tailMode==="hidden"&&!ue.alternate&&!Ri)return Oa(w),null}else 2*ka()-X.renderingStartTime>Ro&&P!==536870912&&(w.flags|=128,U=!0,La(X,!1),w.lanes=4194304);X.isBackwards?(ue.sibling=w.child,w.child=ue):(p=X.last,p!==null?p.sibling=ue:w.child=ue,X.last=ue)}return X.tail!==null?(w=X.tail,X.rendering=w,X.tail=w.sibling,X.renderingStartTime=ka(),w.sibling=null,p=Bs.current,Ae(Bs,U?p&1|2:p&1),w):(Oa(w),null);case 22:case 23:return Jc(w),Yc(),U=w.memoizedState!==null,p!==null?p.memoizedState!==null!==U&&(w.flags|=8192):U&&(w.flags|=8192),U?(P&536870912)!==0&&(w.flags&128)===0&&(Oa(w),w.subtreeFlags&6&&(w.flags|=8192)):Oa(w),P=w.updateQueue,P!==null&&Ia(w,P.retryQueue),P=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(P=p.memoizedState.cachePool.pool),U=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(U=w.memoizedState.cachePool.pool),U!==P&&(w.flags|=2048),p!==null&&He(St),null;case 24:return P=null,p!==null&&(P=p.memoizedState.cache),w.memoizedState.cache!==P&&(w.flags|=2048),Xd(oo),Oa(w),null;case 25:return null}throw Error(r(156,w.tag))}function kr(p,w){switch(qh(w),w.tag){case 1:return p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 3:return Xd(oo),_t(),p=w.flags,(p&65536)!==0&&(p&128)===0?(w.flags=p&-65537|128,w):null;case 26:case 27:case 5:return Ea(w),null;case 13:if(Jc(w),p=w.memoizedState,p!==null&&p.dehydrated!==null){if(w.alternate===null)throw Error(r(340));$h()}return p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 19:return He(Bs),null;case 4:return _t(),null;case 10:return Xd(w.type),null;case 22:case 23:return Jc(w),Yc(),p!==null&&He(St),p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 24:return Xd(oo),null;case 25:return null;default:return null}}function yr(p,w){switch(qh(w),w.tag){case 3:Xd(oo),_t();break;case 26:case 27:case 5:Ea(w);break;case 4:_t();break;case 13:Jc(w);break;case 19:He(Bs);break;case 10:Xd(w.type);break;case 22:case 23:Jc(w),Yc(),p!==null&&He(St);break;case 24:Xd(oo)}}var Dr={getCacheForType:function(p){var w=Qs(oo),P=w.data.get(p);return P===void 0&&(P=p(),w.data.set(p,P)),P}},Pr=typeof WeakMap=="function"?WeakMap:Map,Or=0,Ur=null,Lr=null,fr=0,on=0,Cr=null,ar=!1,ln=!1,Kn=!1,mn=0,Dn=0,ts=0,As=0,uo=0,eo=0,wo=0,Pn=null,oi=null,Ln=!1,ui=0,Ro=1/0,bi=null,fs=null,Vc=!1,Xo=null,cu=0,jl=0,ic=null,Sl=0,Jd=null;function To(){if((Or&2)!==0&&fr!==0)return fr&-fr;if(we.T!==null){var p=De;return p!==0?p:EA()}return Gt()}function Vh(){eo===0&&(eo=(fr&536870912)===0||Ri?us():536870912);var p=Ll.current;return p!==null&&(p.flags|=32),eo}function Gl(p,w,P){(p===Ur&&on===2||p.cancelPendingCommit!==null)&&(lg(p,0),Sp(p,fr,eo,!1)),Fe(p,P),((Or&2)===0||p!==Ur)&&(p===Ur&&((Or&2)===0&&(As|=P),Dn===4&&Sp(p,fr,eo,!1)),rf(p))}function Cp(p,w,P){if((Or&6)!==0)throw Error(r(327));var U=!P&&(w&60)===0&&(w&p.expiredLanes)===0||Jn(p,w),X=U?pm(p,w):a0(p,w,!0),ue=U;do{if(X===0){ln&&!U&&Sp(p,w,0,!1);break}else if(X===6)Sp(p,w,0,!ar);else{if(P=p.current.alternate,ue&&!_C(P)){X=a0(p,w,!1),ue=!1;continue}if(X===2){if(ue=w,p.errorRecoveryDisabledLanes&ue)var Be=0;else Be=p.pendingLanes&-536870913,Be=Be!==0?Be:Be&536870912?536870912:0;if(Be!==0){w=Be;e:{var ft=p;X=Pn;var Bt=ft.current.memoizedState.isDehydrated;if(Bt&&(lg(ft,Be).flags|=256),Be=a0(ft,Be,!1),Be!==2){if(Kn&&!Bt){ft.errorRecoveryDisabledLanes|=ue,As|=ue,X=4;break e}ue=oi,oi=X,ue!==null&&fm(ue)}X=Be}if(ue=!1,X!==2)continue}}if(X===1){lg(p,0),Sp(p,w,0,!0);break}e:{switch(U=p,X){case 0:case 1:throw Error(r(345));case 4:if((w&4194176)===w){Sp(U,w,eo,!ar);break e}break;case 2:oi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(U.finishedWork=P,U.finishedLanes=w,(w&62914560)===w&&(ue=ui+300-ka(),10<ue)){if(Sp(U,w,eo,!ar),rn(U,0)!==0)break e;U.timeoutHandle=nf(ey.bind(null,U,P,oi,bi,Ln,w,eo,As,wo,ar,2,-0,0),ue);break e}ey(U,P,oi,bi,Ln,w,eo,As,wo,ar,0,-0,0)}}break}while(!0);rf(p)}function fm(p){oi===null?oi=p:oi.push.apply(oi,p)}function ey(p,w,P,U,X,ue,Be,ft,Bt,la,Za,sr,xa){var qa=w.subtreeFlags;if((qa&8192||(qa&16785408)===16785408)&&(IA={stylesheets:null,count:0,unsuspend:mE},ot(w),w=m0(),w!==null)){p.cancelPendingCommit=w(RC.bind(null,p,P,U,X,Be,ft,Bt,1,sr,xa)),Sp(p,ue,Be,!la);return}RC(p,P,U,X,Be,ft,Bt,Za,sr,xa)}function _C(p){for(var w=p;;){var P=w.tag;if((P===0||P===11||P===15)&&w.flags&16384&&(P=w.updateQueue,P!==null&&(P=P.stores,P!==null)))for(var U=0;U<P.length;U++){var X=P[U],ue=X.getSnapshot;X=X.value;try{if(!Us(ue(),X))return!1}catch{return!1}}if(P=w.child,w.subtreeFlags&16384&&P!==null)P.return=w,w=P;else{if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Sp(p,w,P,U){w&=~uo,w&=~As,p.suspendedLanes|=w,p.pingedLanes&=~w,U&&(p.warmLanes|=w),U=p.expirationTimes;for(var X=w;0<X;){var ue=31-$r(X),Be=1<<ue;U[ue]=-1,X&=~Be}P!==0&&wt(p,P,w)}function Qv(){return(Or&6)===0?(gm(0),!1):!0}function e0(){if(Lr!==null){if(on===0)var p=Lr.return;else p=Lr,Eh=zf=null,ys(p),Kh=null,_l=0,p=Lr;for(;p!==null;)yr(p.alternate,p),p=p.return;Lr=null}}function lg(p,w){p.finishedWork=null,p.finishedLanes=0;var P=p.timeoutHandle;P!==-1&&(p.timeoutHandle=-1,OC(P)),P=p.cancelPendingCommit,P!==null&&(p.cancelPendingCommit=null,P()),e0(),Ur=p,Lr=P=Sa(p.current,null),fr=w,on=0,Cr=null,ar=!1,ln=Jn(p,w),Kn=!1,wo=eo=uo=As=ts=Dn=0,oi=Pn=null,Ln=!1,(w&8)!==0&&(w|=w&32);var U=p.entangledLanes;if(U!==0)for(p=p.entanglements,U&=w;0<U;){var X=31-$r(U),ue=1<<X;w|=p[X],U&=~ue}return mn=w,ds(),P}function E1(p,w){Ra=null,we.H=Lu,w===Pf?(w=Hg(),on=3):w===Qm?(w=Hg(),on=4):on=w===om?8:w!==null&&typeof w=="object"&&typeof w.then=="function"?6:1,Cr=w,Lr===null&&(Dn=1,Wd(p,ss(w,p.current)))}function N1(){var p=we.H;return we.H=Lu,p===null?Lu:p}function O1(){var p=we.A;return we.A=Dr,p}function t0(){Dn=4,ar||(fr&4194176)!==fr&&Ll.current!==null||(ln=!0),(ts&134217727)===0&&(As&134217727)===0||Ur===null||Sp(Ur,fr,eo,!1)}function a0(p,w,P){var U=Or;Or|=2;var X=N1(),ue=O1();(Ur!==p||fr!==w)&&(bi=null,lg(p,w)),w=!1;var Be=Dn;e:do try{if(on!==0&&Lr!==null){var ft=Lr,Bt=Cr;switch(on){case 8:e0(),Be=6;break e;case 3:case 2:case 6:Ll.current===null&&(w=!0);var la=on;if(on=0,Cr=null,ay(p,ft,Bt,la),P&&ln){Be=0;break e}break;default:la=on,on=0,Cr=null,ay(p,ft,Bt,la)}}V1(),Be=Dn;break}catch(Za){E1(p,Za)}while(!0);return w&&p.shellSuspendCounter++,Eh=zf=null,Or=U,we.H=X,we.A=ue,Lr===null&&(Ur=null,fr=0,ds()),Be}function V1(){for(;Lr!==null;)z1(Lr)}function pm(p,w){var P=Or;Or|=2;var U=N1(),X=O1();Ur!==p||fr!==w?(bi=null,Ro=ka()+500,lg(p,w)):ln=Jn(p,w);e:do try{if(on!==0&&Lr!==null){w=Lr;var ue=Cr;t:switch(on){case 1:on=0,Cr=null,ay(p,w,ue,1);break;case 2:if(qg(ue)){on=0,Cr=null,ty(w);break}w=function(){on===2&&Ur===p&&(on=7),rf(p)},ue.then(w,w);break e;case 3:on=7;break e;case 4:on=5;break e;case 7:qg(ue)?(on=0,Cr=null,ty(w)):(on=0,Cr=null,ay(p,w,ue,7));break;case 5:var Be=null;switch(Lr.tag){case 26:Be=Lr.memoizedState;case 5:case 27:var ft=Lr;if(!Be||X1(Be)){on=0,Cr=null;var Bt=ft.sibling;if(Bt!==null)Lr=Bt;else{var la=ft.return;la!==null?(Lr=la,r0(la)):Lr=null}break t}}on=0,Cr=null,ay(p,w,ue,5);break;case 6:on=0,Cr=null,ay(p,w,ue,6);break;case 8:e0(),Dn=6;break e;default:throw Error(r(462))}}bl();break}catch(Za){E1(p,Za)}while(!0);return Eh=zf=null,we.H=U,we.A=X,Or=P,Lr!==null?0:(Ur=null,fr=0,ds(),Dn)}function bl(){for(;Lr!==null&&!dr();)z1(Lr)}function z1(p){var w=Ap(p.alternate,p,mn);p.memoizedProps=p.pendingProps,w===null?r0(p):Lr=w}function ty(p){var w=p,P=w.alternate;switch(w.tag){case 15:case 0:w=yA(P,w,w.pendingProps,w.type,void 0,fr);break;case 11:w=yA(P,w,w.pendingProps,w.type.render,w.ref,fr);break;case 5:ys(w);default:yr(P,w),w=Lr=Ft(w,mn),w=Ap(P,w,mn)}p.memoizedProps=p.pendingProps,w===null?r0(p):Lr=w}function ay(p,w,P,U){Eh=zf=null,ys(w),Kh=null,_l=0;var X=w.return;try{if(fA(p,X,w,P,fr)){Dn=1,Wd(p,ss(P,p.current)),Lr=null;return}}catch(ue){if(X!==null)throw Lr=X,ue;Dn=1,Wd(p,ss(P,p.current)),Lr=null;return}w.flags&32768?(Ri||U===1?p=!0:ln||(fr&536870912)!==0?p=!1:(ar=p=!0,(U===2||U===3||U===6)&&(U=Ll.current,U!==null&&U.tag===13&&(U.flags|=16384))),wC(w,p)):r0(w)}function r0(p){var w=p;do{if((w.flags&32768)!==0){wC(w,ar);return}p=w.return;var P=lr(w.alternate,w,mn);if(P!==null){Lr=P;return}if(w=w.sibling,w!==null){Lr=w;return}Lr=w=p}while(w!==null);Dn===0&&(Dn=5)}function wC(p,w){do{var P=kr(p.alternate,p);if(P!==null){P.flags&=32767,Lr=P;return}if(P=p.return,P!==null&&(P.flags|=32768,P.subtreeFlags=0,P.deletions=null),!w&&(p=p.sibling,p!==null)){Lr=p;return}Lr=p=P}while(p!==null);Dn=6,Lr=null}function RC(p,w,P,U,X,ue,Be,ft,Bt,la){var Za=we.T,sr=qe.p;try{qe.p=2,we.T=null,xA(p,w,P,U,sr,X,ue,Be,ft,Bt,la)}finally{we.T=Za,qe.p=sr}}function xA(p,w,P,U,X,ue,Be,ft){do zh();while(Xo!==null);if((Or&6)!==0)throw Error(r(327));var Bt=p.finishedWork;if(U=p.finishedLanes,Bt===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Bt===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var la=Bt.lanes|Bt.childLanes;if(la|=Xi,Xe(p,U,la,ue,Be,ft),p===Ur&&(Lr=Ur=null,fr=0),(Bt.subtreeFlags&10256)===0&&(Bt.flags&10256)===0||Vc||(Vc=!0,jl=la,ic=P,sE(fn,function(){return zh(),null})),P=(Bt.flags&15990)!==0,(Bt.subtreeFlags&15990)!==0||P?(P=we.T,we.T=null,ue=qe.p,qe.p=2,Be=Or,Or|=4,Uu(p,Bt),Z(Bt,p),Id(zA,p.containerInfo),wm=!!Qd,zA=Qd=null,p.current=Bt,bA(p,Bt.alternate,Bt),Sr(),Or=Be,qe.p=ue,we.T=P):p.current=Bt,Vc?(Vc=!1,Xo=p,cu=U):D1(p,la),la=p.pendingLanes,la===0&&(fs=null),Sn(Bt.stateNode),rf(p),w!==null)for(X=p.onRecoverableError,Bt=0;Bt<w.length;Bt++)la=w[Bt],X(la.value,{componentStack:la.stack});return(cu&3)!==0&&zh(),la=p.pendingLanes,(U&4194218)!==0&&(la&42)!==0?p===Jd?Sl++:(Sl=0,Jd=p):Sl=0,gm(0),null}function D1(p,w){(p.pooledCacheLanes&=w)===0&&(w=p.pooledCache,w!=null&&(p.pooledCache=null,G(w)))}function zh(){if(Xo!==null){var p=Xo,w=jl;jl=0;var P=bt(cu),U=we.T,X=qe.p;try{if(qe.p=32>P?32:P,we.T=null,Xo===null)var ue=!1;else{P=ic,ic=null;var Be=Xo,ft=cu;if(Xo=null,cu=0,(Or&6)!==0)throw Error(r(331));var Bt=Or;if(Or|=4,At(Be.current),Le(Be,Be.current,ft,P),Or=Bt,gm(0,!1),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(pr,Be)}catch{}ue=!0}return ue}finally{qe.p=X,we.T=U,D1(p,w)}}return!1}function ry(p,w,P){w=ss(P,w),w=sm(p.stateNode,w,2),p=If(p,w,2),p!==null&&(Fe(p,2),rf(p))}function js(p,w,P){if(p.tag===3)ry(p,p,P);else for(;w!==null;){if(w.tag===3){ry(w,p,P);break}else if(w.tag===1){var U=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(fs===null||!fs.has(U))){p=ss(P,p),P=ig(2),U=If(w,P,2),U!==null&&(Kg(P,U,w,p),Fe(U,2),rf(U));break}}w=w.return}}function M1(p,w,P){var U=p.pingCache;if(U===null){U=p.pingCache=new Pr;var X=new Set;U.set(w,X)}else X=U.get(w),X===void 0&&(X=new Set,U.set(w,X));X.has(P)||(Kn=!0,X.add(P),p=rE.bind(null,p,w,P),w.then(p,p))}function rE(p,w,P){var U=p.pingCache;U!==null&&U.delete(w),p.pingedLanes|=p.suspendedLanes&P,p.warmLanes&=~P,Ur===p&&(fr&P)===P&&(Dn===4||Dn===3&&(fr&62914560)===fr&&300>ka()-ui?(Or&2)===0&&lg(p,0):uo|=P,wo===fr&&(wo=0)),rf(p)}function TC(p,w){w===0&&(w=Xt()),p=nl(p,w),p!==null&&(Fe(p,w),rf(p))}function nE(p){var w=p.memoizedState,P=0;w!==null&&(P=w.retryLane),TC(p,P)}function iE(p,w){var P=0;switch(p.tag){case 13:var U=p.stateNode,X=p.memoizedState;X!==null&&(P=X.retryLane);break;case 19:U=p.stateNode;break;case 22:U=p.stateNode._retryCache;break;default:throw Error(r(314))}U!==null&&U.delete(w),TC(p,P)}function sE(p,w){return Ja(p,w)}var ny=null,iy=null,mm=!1,n0=!1,co=!1,kf=0;function rf(p){p!==iy&&p.next===null&&(iy===null?ny=iy=p:iy=iy.next=p),n0=!0,mm||(mm=!0,PA(i0))}function gm(p,w){if(!co&&n0){co=!0;do for(var P=!1,U=ny;U!==null;){if(p!==0){var X=U.pendingLanes;if(X===0)var ue=0;else{var Be=U.suspendedLanes,ft=U.pingedLanes;ue=(1<<31-$r(42|p)+1)-1,ue&=X&~(Be&~ft),ue=ue&201326677?ue&201326677|1:ue?ue|2:0}ue!==0&&(P=!0,L1(U,ue))}else ue=fr,ue=rn(U,U===Ur?ue:0),(ue&3)===0||Jn(U,ue)||(P=!0,L1(U,ue));U=U.next}while(P);co=!1}}function i0(){n0=mm=!1;var p=0;kf!==0&&(j1()&&(p=kf),kf=0);for(var w=ka(),P=null,U=ny;U!==null;){var X=U.next,ue=sy(U,w);ue===0?(U.next=null,P===null?ny=X:P.next=X,X===null&&(iy=P)):(P=U,(p!==0||(ue&3)!==0)&&(n0=!0)),U=X}gm(p)}function sy(p,w){for(var P=p.suspendedLanes,U=p.pingedLanes,X=p.expirationTimes,ue=p.pendingLanes&-62914561;0<ue;){var Be=31-$r(ue),ft=1<<Be,Bt=X[Be];Bt===-1?((ft&P)===0||(ft&U)!==0)&&(X[Be]=vu(ft,w)):Bt<=w&&(p.expiredLanes|=ft),ue&=~ft}if(w=Ur,P=fr,P=rn(p,p===w?P:0),U=p.callbackNode,P===0||p===w&&on===2||p.cancelPendingCommit!==null)return U!==null&&U!==null&&cr(U),p.callbackNode=null,p.callbackPriority=0;if((P&3)===0||Jn(p,P)){if(w=P&-P,w===p.callbackPriority)return w;switch(U!==null&&cr(U),bt(P)){case 2:case 8:P=Cn;break;case 32:P=fn;break;case 268435456:P=Wa;break;default:P=fn}return U=I1.bind(null,p),P=Ja(P,U),p.callbackPriority=w,p.callbackNode=P,w}return U!==null&&U!==null&&cr(U),p.callbackPriority=2,p.callbackNode=null,2}function I1(p,w){var P=p.callbackNode;if(zh()&&p.callbackNode!==P)return null;var U=fr;return U=rn(p,p===Ur?U:0),U===0?null:(Cp(p,U,w),sy(p,ka()),p.callbackNode!=null&&p.callbackNode===P?I1.bind(null,p):null)}function L1(p,w){if(zh())return null;Cp(p,w,!0)}function PA(p){uE(function(){(Or&6)!==0?Ja(dn,p):p()})}function EA(){return kf===0&&(kf=us()),kf}function NA(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:En(""+p)}function CC(p,w){var P=w.ownerDocument.createElement("input");return P.name=w.name,P.value=w.value,p.id&&P.setAttribute("form",p.id),w.parentNode.insertBefore(P,w),p=new FormData(p),P.parentNode.removeChild(P),p}function SC(p,w,P,U,X){if(w==="submit"&&P&&P.stateNode===X){var ue=NA((X[$t]||null).action),Be=U.submitter;Be&&(w=(w=Be[$t]||null)?NA(w.formAction):Be.getAttribute("formAction"),w!==null&&(ue=w,Be=null));var ft=new Ei("action","action",null,U,X);p.push({event:ft,listeners:[{instance:null,listener:function(){if(U.defaultPrevented){if(kf!==0){var Bt=Be?CC(X,Be):new FormData(X);ad(P,{pending:!0,data:Bt,method:X.method,action:ue},null,Bt)}}else typeof ue=="function"&&(ft.preventDefault(),Bt=Be?CC(X,Be):new FormData(X),ad(P,{pending:!0,data:Bt,method:X.method,action:ue},ue,Bt))},currentTarget:X}]})}}for(var OA=0;OA<$o.length;OA++){var VA=$o[OA],F1=VA.toLowerCase(),bC=VA[0].toUpperCase()+VA.slice(1);gs(F1,"on"+bC)}gs(Gc,"onAnimationEnd"),gs(wc,"onAnimationIteration"),gs(xu,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(Zc,"onTransitionRun"),gs(Pu,"onTransitionStart"),gs(qc,"onTransitionCancel"),gs(Rc,"onTransitionEnd"),bs("onMouseEnter",["mouseout","mouseover"]),bs("onMouseLeave",["mouseout","mouseover"]),bs("onPointerEnter",["pointerout","pointerover"]),bs("onPointerLeave",["pointerout","pointerover"]),Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ug="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ug));function s0(p,w){w=(w&4)!==0;for(var P=0;P<p.length;P++){var U=p[P],X=U.event;U=U.listeners;e:{var ue=void 0;if(w)for(var Be=U.length-1;0<=Be;Be--){var ft=U[Be],Bt=ft.instance,la=ft.currentTarget;if(ft=ft.listener,Bt!==ue&&X.isPropagationStopped())break e;ue=ft,X.currentTarget=la;try{ue(X)}catch(Za){xh(Za)}X.currentTarget=null,ue=Bt}else for(Be=0;Be<U.length;Be++){if(ft=U[Be],Bt=ft.instance,la=ft.currentTarget,ft=ft.listener,Bt!==ue&&X.isPropagationStopped())break e;ue=ft,X.currentTarget=la;try{ue(X)}catch(Za){xh(Za)}X.currentTarget=null,ue=Bt}}}}function Fi(p,w){var P=w[Ma];P===void 0&&(P=w[Ma]=new Set);var U=p+"__bubble";P.has(U)||(k1(w,p,2,!1),P.add(U))}function o0(p,w,P){var U=0;w&&(U|=4),k1(P,p,U,w)}var cg="_reactListening"+Math.random().toString(36).slice(2);function l0(p){if(!p[cg]){p[cg]=!0,Fn.forEach(function(P){P!=="selectionchange"&&(xC.has(P)||o0(P,!1,p),o0(P,!0,p))});var w=p.nodeType===9?p:p.ownerDocument;w===null||w[cg]||(w[cg]=!0,o0("selectionchange",!1,w))}}function k1(p,w,P,U){switch(HC(w)){case 2:var X=ZC;break;case 8:X=qC;break;default:X=rw}P=X.bind(null,w,P,p),X=void 0,!mc||w!=="touchstart"&&w!=="touchmove"&&w!=="wheel"||(X=!0),U?X!==void 0?p.addEventListener(w,P,{capture:!0,passive:X}):p.addEventListener(w,P,!0):X!==void 0?p.addEventListener(w,P,{passive:X}):p.addEventListener(w,P,!1)}function u0(p,w,P,U,X){var ue=U;if((w&1)===0&&(w&2)===0&&U!==null)e:for(;;){if(U===null)return;var Be=U.tag;if(Be===3||Be===4){var ft=U.stateNode.containerInfo;if(ft===X||ft.nodeType===8&&ft.parentNode===X)break;if(Be===4)for(Be=U.return;Be!==null;){var Bt=Be.tag;if((Bt===3||Bt===4)&&(Bt=Be.stateNode.containerInfo,Bt===X||Bt.nodeType===8&&Bt.parentNode===X))return;Be=Be.return}for(;ft!==null;){if(Be=In(ft),Be===null)return;if(Bt=Be.tag,Bt===5||Bt===6||Bt===26||Bt===27){U=ue=Be;continue e}ft=ft.parentNode}}U=U.return}Hs(function(){var la=ue,Za=mr(P),sr=[];e:{var xa=Yu.get(p);if(xa!==void 0){var qa=Ei,Jr=p;switch(p){case"keypress":if(pn(P)===0)break e;case"keydown":case"keyup":qa=zd;break;case"focusin":Jr="focus",qa=rl;break;case"focusout":Jr="blur",qa=rl;break;case"beforeblur":case"afterblur":qa=rl;break;case"click":if(P.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qa=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qa=Ns;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qa=Cf;break;case Gc:case wc:case xu:qa=Ks;break;case Rc:qa=Je;break;case"scroll":case"scrollend":qa=Od;break;case"wheel":qa=Jt;break;case"copy":case"cut":case"paste":qa=cs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qa=Tf;break;case"toggle":case"beforetoggle":qa=Da}var ti=(w&4)!==0,Jo=!ti&&(p==="scroll"||p==="scrollend"),ya=ti?xa!==null?xa+"Capture":null:xa;ti=[];for(var ia=la,Ca;ia!==null;){var tr=ia;if(Ca=tr.stateNode,tr=tr.tag,tr!==5&&tr!==26&&tr!==27||Ca===null||ya===null||(tr=pc(ia,ya),tr!=null&&ti.push(Dh(ia,tr,Ca))),Jo)break;ia=ia.return}0<ti.length&&(xa=new qa(xa,Jr,null,P,Za),sr.push({event:xa,listeners:ti}))}}if((w&7)===0){e:{if(xa=p==="mouseover"||p==="pointerover",qa=p==="mouseout"||p==="pointerout",xa&&P!==mo&&(Jr=P.relatedTarget||P.fromElement)&&(In(Jr)||Jr[Ta]))break e;if((qa||xa)&&(xa=Za.window===Za?Za:(xa=Za.ownerDocument)?xa.defaultView||xa.parentWindow:window,qa?(Jr=P.relatedTarget||P.toElement,qa=la,Jr=Jr?In(Jr):null,Jr!==null&&(Jo=Ue(Jr),ti=Jr.tag,Jr!==Jo||ti!==5&&ti!==27&&ti!==6)&&(Jr=null)):(qa=null,Jr=la),qa!==Jr)){if(ti=ms,tr="onMouseLeave",ya="onMouseEnter",ia="mouse",(p==="pointerout"||p==="pointerover")&&(ti=Tf,tr="onPointerLeave",ya="onPointerEnter",ia="pointer"),Jo=qa==null?xa:Hr(qa),Ca=Jr==null?xa:Hr(Jr),xa=new ti(tr,ia+"leave",qa,P,Za),xa.target=Jo,xa.relatedTarget=Ca,tr=null,In(Za)===la&&(ti=new ti(ya,ia+"enter",Jr,P,Za),ti.target=Ca,ti.relatedTarget=Jo,tr=ti),Jo=tr,qa&&Jr)t:{for(ti=qa,ya=Jr,ia=0,Ca=ti;Ca;Ca=dg(Ca))ia++;for(Ca=0,tr=ya;tr;tr=dg(tr))Ca++;for(;0<ia-Ca;)ti=dg(ti),ia--;for(;0<Ca-ia;)ya=dg(ya),Ca--;for(;ia--;){if(ti===ya||ya!==null&&ti===ya.alternate)break t;ti=dg(ti),ya=dg(ya)}ti=null}else ti=null;qa!==null&&PC(sr,xa,qa,ti,!1),Jr!==null&&Jo!==null&&PC(sr,Jo,Jr,ti,!0)}}e:{if(xa=la?Hr(la):window,qa=xa.nodeName&&xa.nodeName.toLowerCase(),qa==="select"||qa==="input"&&xa.type==="file")var Yr=Ac;else if(Tr(xa))if(Dd)Yr=jh;else{Yr=yo;var Ai=Ys}else qa=xa.nodeName,!qa||qa.toLowerCase()!=="input"||xa.type!=="checkbox"&&xa.type!=="radio"?la&&Ku(la.elementType)&&(Yr=Ac):Yr=Sf;if(Yr&&(Yr=Yr(p,la))){Su(sr,Yr,P,Za);break e}Ai&&Ai(p,xa,la),p==="focusout"&&la&&xa.type==="number"&&la.memoizedProps.value!=null&&wu(xa,"number",xa.value)}switch(Ai=la?Hr(la):window,p){case"focusin":(Tr(Ai)||Ai.contentEditable==="true")&&(Ml=Ai,_c=la,bu=null);break;case"focusout":bu=_c=Ml=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":Yi=!1,bf(sr,P,Za);break;case"selectionchange":if(jc)break;case"keydown":case"keyup":bf(sr,P,Za)}var un;if(Rr)e:{switch(p){case"compositionstart":var On="onCompositionStart";break e;case"compositionend":On="onCompositionEnd";break e;case"compositionupdate":On="onCompositionUpdate";break e}On=void 0}else is?Vs(p,P)&&(On="onCompositionEnd"):p==="keydown"&&P.keyCode===229&&(On="onCompositionStart");On&&(zn&&P.locale!=="ko"&&(is||On!=="onCompositionStart"?On==="onCompositionEnd"&&is&&(un=Nd()):(nn=Za,_n="value"in nn?nn.value:nn.textContent,is=!0)),Ai=Uf(la,On),0<Ai.length&&(On=new Ho(On,p,null,P,Za),sr.push({event:On,listeners:Ai}),un?On.data=un:(un=no(P),un!==null&&(On.data=un)))),(un=xn?Nr(p,P):or(p,P))&&(On=Uf(la,"onBeforeInput"),0<On.length&&(Ai=new Ho("onBeforeInput","beforeinput",null,P,Za),sr.push({event:Ai,listeners:On}),Ai.data=un)),SC(sr,p,la,P,Za)}s0(sr,w)})}function Dh(p,w,P){return{instance:p,listener:w,currentTarget:P}}function Uf(p,w){for(var P=w+"Capture",U=[];p!==null;){var X=p,ue=X.stateNode;X=X.tag,X!==5&&X!==26&&X!==27||ue===null||(X=pc(p,P),X!=null&&U.unshift(Dh(p,X,ue)),X=pc(p,w),X!=null&&U.push(Dh(p,X,ue))),p=p.return}return U}function dg(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function PC(p,w,P,U,X){for(var ue=w._reactName,Be=[];P!==null&&P!==U;){var ft=P,Bt=ft.alternate,la=ft.stateNode;if(ft=ft.tag,Bt!==null&&Bt===U)break;ft!==5&&ft!==26&&ft!==27||la===null||(Bt=la,X?(la=pc(P,ue),la!=null&&Be.unshift(Dh(P,la,Bt))):X||(la=pc(P,ue),la!=null&&Be.push(Dh(P,la,Bt)))),P=P.return}Be.length!==0&&p.push({event:w,listeners:Be})}var EC=/\r\n?/g,oE=/\u0000|\uFFFD/g;function NC(p){return(typeof p=="string"?p:""+p).replace(EC,`
`).replace(oE,"")}function Bf(p,w){return w=NC(w),NC(p)===w}function oy(){}function Is(p,w,P,U,X,ue){switch(P){case"children":typeof U=="string"?w==="body"||w==="textarea"&&U===""||$u(p,U):(typeof U=="number"||typeof U=="bigint")&&w!=="body"&&$u(p,""+U);break;case"className":Mi(p,"class",U);break;case"tabIndex":Mi(p,"tabindex",U);break;case"dir":case"role":case"viewBox":case"width":case"height":Mi(p,P,U);break;case"style":Zo(p,U,ue);break;case"data":if(w!=="object"){Mi(p,"data",U);break}case"src":case"href":if(U===""&&(w!=="a"||P!=="href")){p.removeAttribute(P);break}if(U==null||typeof U=="function"||typeof U=="symbol"||typeof U=="boolean"){p.removeAttribute(P);break}U=En(""+U),p.setAttribute(P,U);break;case"action":case"formAction":if(typeof U=="function"){p.setAttribute(P,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ue=="function"&&(P==="formAction"?(w!=="input"&&Is(p,w,"name",X.name,X,null),Is(p,w,"formEncType",X.formEncType,X,null),Is(p,w,"formMethod",X.formMethod,X,null),Is(p,w,"formTarget",X.formTarget,X,null)):(Is(p,w,"encType",X.encType,X,null),Is(p,w,"method",X.method,X,null),Is(p,w,"target",X.target,X,null)));if(U==null||typeof U=="symbol"||typeof U=="boolean"){p.removeAttribute(P);break}U=En(""+U),p.setAttribute(P,U);break;case"onClick":U!=null&&(p.onclick=oy);break;case"onScroll":U!=null&&Fi("scroll",p);break;case"onScrollEnd":U!=null&&Fi("scrollend",p);break;case"dangerouslySetInnerHTML":if(U!=null){if(typeof U!="object"||!("__html"in U))throw Error(r(61));if(P=U.__html,P!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=P}}break;case"multiple":p.multiple=U&&typeof U!="function"&&typeof U!="symbol";break;case"muted":p.muted=U&&typeof U!="function"&&typeof U!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(U==null||typeof U=="function"||typeof U=="boolean"||typeof U=="symbol"){p.removeAttribute("xlink:href");break}P=En(""+U),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":U!=null&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,""+U):p.removeAttribute(P);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":U&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,""):p.removeAttribute(P);break;case"capture":case"download":U===!0?p.setAttribute(P,""):U!==!1&&U!=null&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,U):p.removeAttribute(P);break;case"cols":case"rows":case"size":case"span":U!=null&&typeof U!="function"&&typeof U!="symbol"&&!isNaN(U)&&1<=U?p.setAttribute(P,U):p.removeAttribute(P);break;case"rowSpan":case"start":U==null||typeof U=="function"||typeof U=="symbol"||isNaN(U)?p.removeAttribute(P):p.setAttribute(P,U);break;case"popover":Fi("beforetoggle",p),Fi("toggle",p),el(p,"popover",U);break;case"xlinkActuate":Yl(p,"http://www.w3.org/1999/xlink","xlink:actuate",U);break;case"xlinkArcrole":Yl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",U);break;case"xlinkRole":Yl(p,"http://www.w3.org/1999/xlink","xlink:role",U);break;case"xlinkShow":Yl(p,"http://www.w3.org/1999/xlink","xlink:show",U);break;case"xlinkTitle":Yl(p,"http://www.w3.org/1999/xlink","xlink:title",U);break;case"xlinkType":Yl(p,"http://www.w3.org/1999/xlink","xlink:type",U);break;case"xmlBase":Yl(p,"http://www.w3.org/XML/1998/namespace","xml:base",U);break;case"xmlLang":Yl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",U);break;case"xmlSpace":Yl(p,"http://www.w3.org/XML/1998/namespace","xml:space",U);break;case"is":el(p,"is",U);break;case"innerText":case"textContent":break;default:(!(2<P.length)||P[0]!=="o"&&P[0]!=="O"||P[1]!=="n"&&P[1]!=="N")&&(P=ph.get(P)||P,el(p,P,U))}}function c0(p,w,P,U,X,ue){switch(P){case"style":Zo(p,U,ue);break;case"dangerouslySetInnerHTML":if(U!=null){if(typeof U!="object"||!("__html"in U))throw Error(r(61));if(P=U.__html,P!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=P}}break;case"children":typeof U=="string"?$u(p,U):(typeof U=="number"||typeof U=="bigint")&&$u(p,""+U);break;case"onScroll":U!=null&&Fi("scroll",p);break;case"onScrollEnd":U!=null&&Fi("scrollend",p);break;case"onClick":U!=null&&(p.onclick=oy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Di.hasOwnProperty(P))e:{if(P[0]==="o"&&P[1]==="n"&&(X=P.endsWith("Capture"),w=P.slice(2,X?P.length-7:void 0),ue=p[$t]||null,ue=ue!=null?ue[P]:null,typeof ue=="function"&&p.removeEventListener(w,ue,X),typeof U=="function")){typeof ue!="function"&&ue!==null&&(P in p?p[P]=null:p.hasAttribute(P)&&p.removeAttribute(P)),p.addEventListener(w,U,X);break e}P in p?p[P]=U:U===!0?p.setAttribute(P,""):el(p,P,U)}}}function Oo(p,w,P){switch(w){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fi("error",p),Fi("load",p);var U=!1,X=!1,ue;for(ue in P)if(P.hasOwnProperty(ue)){var Be=P[ue];if(Be!=null)switch(ue){case"src":U=!0;break;case"srcSet":X=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,w));default:Is(p,w,ue,Be,P,null)}}X&&Is(p,w,"srcSet",P.srcSet,P,null),U&&Is(p,w,"src",P.src,P,null);return;case"input":Fi("invalid",p);var ft=ue=Be=X=null,Bt=null,la=null;for(U in P)if(P.hasOwnProperty(U)){var Za=P[U];if(Za!=null)switch(U){case"name":X=Za;break;case"type":Be=Za;break;case"checked":Bt=Za;break;case"defaultChecked":la=Za;break;case"value":ue=Za;break;case"defaultValue":ft=Za;break;case"children":case"dangerouslySetInnerHTML":if(Za!=null)throw Error(r(137,w));break;default:Is(p,w,U,Za,P,null)}}Xl(p,ue,ft,Bt,la,Be,X,!1),fh(p);return;case"select":Fi("invalid",p),U=Be=ue=null;for(X in P)if(P.hasOwnProperty(X)&&(ft=P[X],ft!=null))switch(X){case"value":ue=ft;break;case"defaultValue":Be=ft;break;case"multiple":U=ft;default:Is(p,w,X,ft,P,null)}w=ue,P=Be,p.multiple=!!U,w!=null?po(p,!!U,w,!1):P!=null&&po(p,!!U,P,!0);return;case"textarea":Fi("invalid",p),ue=X=U=null;for(Be in P)if(P.hasOwnProperty(Be)&&(ft=P[Be],ft!=null))switch(Be){case"value":U=ft;break;case"defaultValue":X=ft;break;case"children":ue=ft;break;case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(91));break;default:Is(p,w,Be,ft,P,null)}Ed(p,U,X,ue),fh(p);return;case"option":for(Bt in P)if(P.hasOwnProperty(Bt)&&(U=P[Bt],U!=null))switch(Bt){case"selected":p.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Is(p,w,Bt,U,P,null)}return;case"dialog":Fi("cancel",p),Fi("close",p);break;case"iframe":case"object":Fi("load",p);break;case"video":case"audio":for(U=0;U<ug.length;U++)Fi(ug[U],p);break;case"image":Fi("error",p),Fi("load",p);break;case"details":Fi("toggle",p);break;case"embed":case"source":case"link":Fi("error",p),Fi("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(la in P)if(P.hasOwnProperty(la)&&(U=P[la],U!=null))switch(la){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,w));default:Is(p,w,la,U,P,null)}return;default:if(Ku(w)){for(Za in P)P.hasOwnProperty(Za)&&(U=P[Za],U!==void 0&&c0(p,w,Za,U,P,void 0));return}}for(ft in P)P.hasOwnProperty(ft)&&(U=P[ft],U!=null&&Is(p,w,ft,U,P,null))}function lE(p,w,P,U){switch(w){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var X=null,ue=null,Be=null,ft=null,Bt=null,la=null,Za=null;for(qa in P){var sr=P[qa];if(P.hasOwnProperty(qa)&&sr!=null)switch(qa){case"checked":break;case"value":break;case"defaultValue":Bt=sr;default:U.hasOwnProperty(qa)||Is(p,w,qa,null,U,sr)}}for(var xa in U){var qa=U[xa];if(sr=P[xa],U.hasOwnProperty(xa)&&(qa!=null||sr!=null))switch(xa){case"type":ue=qa;break;case"name":X=qa;break;case"checked":la=qa;break;case"defaultChecked":Za=qa;break;case"value":Be=qa;break;case"defaultValue":ft=qa;break;case"children":case"dangerouslySetInnerHTML":if(qa!=null)throw Error(r(137,w));break;default:qa!==sr&&Is(p,w,xa,qa,U,sr)}}jo(p,Be,ft,Bt,la,Za,ue,X);return;case"select":qa=Be=ft=xa=null;for(ue in P)if(Bt=P[ue],P.hasOwnProperty(ue)&&Bt!=null)switch(ue){case"value":break;case"multiple":qa=Bt;default:U.hasOwnProperty(ue)||Is(p,w,ue,null,U,Bt)}for(X in U)if(ue=U[X],Bt=P[X],U.hasOwnProperty(X)&&(ue!=null||Bt!=null))switch(X){case"value":xa=ue;break;case"defaultValue":ft=ue;break;case"multiple":Be=ue;default:ue!==Bt&&Is(p,w,X,ue,U,Bt)}w=ft,P=Be,U=qa,xa!=null?po(p,!!P,xa,!1):!!U!=!!P&&(w!=null?po(p,!!P,w,!0):po(p,!!P,P?[]:"",!1));return;case"textarea":qa=xa=null;for(ft in P)if(X=P[ft],P.hasOwnProperty(ft)&&X!=null&&!U.hasOwnProperty(ft))switch(ft){case"value":break;case"children":break;default:Is(p,w,ft,null,U,X)}for(Be in U)if(X=U[Be],ue=P[Be],U.hasOwnProperty(Be)&&(X!=null||ue!=null))switch(Be){case"value":xa=X;break;case"defaultValue":qa=X;break;case"children":break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:X!==ue&&Is(p,w,Be,X,U,ue)}Go(p,xa,qa);return;case"option":for(var Jr in P)if(xa=P[Jr],P.hasOwnProperty(Jr)&&xa!=null&&!U.hasOwnProperty(Jr))switch(Jr){case"selected":p.selected=!1;break;default:Is(p,w,Jr,null,U,xa)}for(Bt in U)if(xa=U[Bt],qa=P[Bt],U.hasOwnProperty(Bt)&&xa!==qa&&(xa!=null||qa!=null))switch(Bt){case"selected":p.selected=xa&&typeof xa!="function"&&typeof xa!="symbol";break;default:Is(p,w,Bt,xa,U,qa)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ti in P)xa=P[ti],P.hasOwnProperty(ti)&&xa!=null&&!U.hasOwnProperty(ti)&&Is(p,w,ti,null,U,xa);for(la in U)if(xa=U[la],qa=P[la],U.hasOwnProperty(la)&&xa!==qa&&(xa!=null||qa!=null))switch(la){case"children":case"dangerouslySetInnerHTML":if(xa!=null)throw Error(r(137,w));break;default:Is(p,w,la,xa,U,qa)}return;default:if(Ku(w)){for(var Jo in P)xa=P[Jo],P.hasOwnProperty(Jo)&&xa!==void 0&&!U.hasOwnProperty(Jo)&&c0(p,w,Jo,void 0,U,xa);for(Za in U)xa=U[Za],qa=P[Za],!U.hasOwnProperty(Za)||xa===qa||xa===void 0&&qa===void 0||c0(p,w,Za,xa,U,qa);return}}for(var ya in P)xa=P[ya],P.hasOwnProperty(ya)&&xa!=null&&!U.hasOwnProperty(ya)&&Is(p,w,ya,null,U,xa);for(sr in U)xa=U[sr],qa=P[sr],!U.hasOwnProperty(sr)||xa===qa||xa==null&&qa==null||Is(p,w,sr,xa,U,qa)}var Qd=null,zA=null;function ly(p){return p.nodeType===9?p:p.ownerDocument}function U1(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B1(p,w){if(p===0)switch(w){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&w==="foreignObject"?0:p}function d0(p,w){return p==="textarea"||p==="noscript"||typeof w.children=="string"||typeof w.children=="number"||typeof w.children=="bigint"||typeof w.dangerouslySetInnerHTML=="object"&&w.dangerouslySetInnerHTML!==null&&w.dangerouslySetInnerHTML.__html!=null}var h0=null;function j1(){var p=window.event;return p&&p.type==="popstate"?p===h0?!1:(h0=p,!0):(h0=null,!1)}var nf=typeof setTimeout=="function"?setTimeout:void 0,OC=typeof clearTimeout=="function"?clearTimeout:void 0,VC=typeof Promise=="function"?Promise:void 0,uE=typeof queueMicrotask=="function"?queueMicrotask:typeof VC<"u"?function(p){return VC.resolve(null).then(p).catch(cE)}:nf;function cE(p){setTimeout(function(){throw p})}function G1(p,w){var P=w,U=0;do{var X=P.nextSibling;if(p.removeChild(P),X&&X.nodeType===8)if(P=X.data,P==="/$"){if(U===0){p.removeChild(X),jA(w);return}U--}else P!=="$"&&P!=="$?"&&P!=="$!"||U++;P=X}while(P);jA(w)}function Z1(p){var w=p.firstChild;for(w&&w.nodeType===10&&(w=w.nextSibling);w;){var P=w;switch(w=w.nextSibling,P.nodeName){case"HTML":case"HEAD":case"BODY":Z1(P),Zr(P);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(P.rel.toLowerCase()==="stylesheet")continue}p.removeChild(P)}}function dE(p,w,P,U){for(;p.nodeType===1;){var X=P;if(p.nodeName.toLowerCase()!==w.toLowerCase()){if(!U&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(U){if(!p[zr])switch(w){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(ue=p.getAttribute("rel"),ue==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(ue!==X.rel||p.getAttribute("href")!==(X.href==null?null:X.href)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin)||p.getAttribute("title")!==(X.title==null?null:X.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(ue=p.getAttribute("src"),(ue!==(X.src==null?null:X.src)||p.getAttribute("type")!==(X.type==null?null:X.type)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin))&&ue&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(w==="input"&&p.type==="hidden"){var ue=X.name==null?null:""+X.name;if(X.type==="hidden"&&p.getAttribute("name")===ue)return p}else return p;if(p=Bu(p.nextSibling),p===null)break}return null}function hE(p,w,P){if(w==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!P||(p=Bu(p.nextSibling),p===null))return null;return p}function Bu(p){for(;p!=null;p=p.nextSibling){var w=p.nodeType;if(w===1||w===3)break;if(w===8){if(w=p.data,w==="$"||w==="$!"||w==="$?"||w==="F!"||w==="F")break;if(w==="/$")return null}}return p}function q1(p){p=p.previousSibling;for(var w=0;p;){if(p.nodeType===8){var P=p.data;if(P==="$"||P==="$!"||P==="$?"){if(w===0)return p;w--}else P==="/$"&&w++}p=p.previousSibling}return null}function DA(p,w,P){switch(w=ly(P),p){case"html":if(p=w.documentElement,!p)throw Error(r(452));return p;case"head":if(p=w.head,!p)throw Error(r(453));return p;case"body":if(p=w.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}var eh=new Map,H1=new Set;function hg(p){return typeof p.getRootNode=="function"?p.getRootNode():p.ownerDocument}var jf=qe.d;qe.d={f:f0,r:zC,D:DC,C:fE,L:MC,m:IC,X:FC,S:LC,M:$1};function f0(){var p=jf.f(),w=Qv();return p||w}function zC(p){var w=ei(p);w!==null&&w.tag===5&&w.type==="form"?Jh(w):jf.r(p)}var ym=typeof document>"u"?null:document;function p0(p,w,P){var U=ym;if(U&&typeof w=="string"&&w){var X=ro(w);X='link[rel="'+p+'"][href="'+X+'"]',typeof P=="string"&&(X+='[crossorigin="'+P+'"]'),H1.has(X)||(H1.add(X),p={rel:p,crossOrigin:P,href:w},U.querySelector(X)===null&&(w=U.createElement("link"),Oo(w,"link",p),Kr(w),U.head.appendChild(w)))}}function DC(p){jf.D(p),p0("dns-prefetch",p,null)}function fE(p,w){jf.C(p,w),p0("preconnect",p,w)}function MC(p,w,P){jf.L(p,w,P);var U=ym;if(U&&p&&w){var X='link[rel="preload"][as="'+ro(w)+'"]';w==="image"&&P&&P.imageSrcSet?(X+='[imagesrcset="'+ro(P.imageSrcSet)+'"]',typeof P.imageSizes=="string"&&(X+='[imagesizes="'+ro(P.imageSizes)+'"]')):X+='[href="'+ro(p)+'"]';var ue=X;switch(w){case"style":ue=Am(p);break;case"script":ue=uy(p)}eh.has(ue)||(p=Ee({rel:"preload",href:w==="image"&&P&&P.imageSrcSet?void 0:p,as:w},P),eh.set(ue,p),U.querySelector(X)!==null||w==="style"&&U.querySelector(MA(ue))||w==="script"&&U.querySelector(cy(ue))||(w=U.createElement("link"),Oo(w,"link",p),Kr(w),U.head.appendChild(w)))}}function IC(p,w){jf.m(p,w);var P=ym;if(P&&p){var U=w&&typeof w.as=="string"?w.as:"script",X='link[rel="modulepreload"][as="'+ro(U)+'"][href="'+ro(p)+'"]',ue=X;switch(U){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ue=uy(p)}if(!eh.has(ue)&&(p=Ee({rel:"modulepreload",href:p},w),eh.set(ue,p),P.querySelector(X)===null)){switch(U){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(P.querySelector(cy(ue)))return}U=P.createElement("link"),Oo(U,"link",p),Kr(U),P.head.appendChild(U)}}}function LC(p,w,P){jf.S(p,w,P);var U=ym;if(U&&p){var X=An(U).hoistableStyles,ue=Am(p);w=w||"default";var Be=X.get(ue);if(!Be){var ft={loading:0,preload:null};if(Be=U.querySelector(MA(ue)))ft.loading=5;else{p=Ee({rel:"stylesheet",href:p,"data-precedence":w},P),(P=eh.get(ue))&&fg(p,P);var Bt=Be=U.createElement("link");Kr(Bt),Oo(Bt,"link",p),Bt._p=new Promise(function(la,Za){Bt.onload=la,Bt.onerror=Za}),Bt.addEventListener("load",function(){ft.loading|=1}),Bt.addEventListener("error",function(){ft.loading|=2}),ft.loading|=4,vm(Be,w,U)}Be={type:"stylesheet",instance:Be,count:1,state:ft},X.set(ue,Be)}}}function FC(p,w){jf.X(p,w);var P=ym;if(P&&p){var U=An(P).hoistableScripts,X=uy(p),ue=U.get(X);ue||(ue=P.querySelector(cy(X)),ue||(p=Ee({src:p,async:!0},w),(w=eh.get(X))&&dy(p,w),ue=P.createElement("script"),Kr(ue),Oo(ue,"link",p),P.head.appendChild(ue)),ue={type:"script",instance:ue,count:1,state:null},U.set(X,ue))}}function $1(p,w){jf.M(p,w);var P=ym;if(P&&p){var U=An(P).hoistableScripts,X=uy(p),ue=U.get(X);ue||(ue=P.querySelector(cy(X)),ue||(p=Ee({src:p,async:!0,type:"module"},w),(w=eh.get(X))&&dy(p,w),ue=P.createElement("script"),Kr(ue),Oo(ue,"link",p),P.head.appendChild(ue)),ue={type:"script",instance:ue,count:1,state:null},U.set(X,ue))}}function K1(p,w,P,U){var X=(X=ma.current)?hg(X):null;if(!X)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof P.precedence=="string"&&typeof P.href=="string"?(w=Am(P.href),P=An(X).hoistableStyles,U=P.get(w),U||(U={type:"style",instance:null,count:0,state:null},P.set(w,U)),U):{type:"void",instance:null,count:0,state:null};case"link":if(P.rel==="stylesheet"&&typeof P.href=="string"&&typeof P.precedence=="string"){p=Am(P.href);var ue=An(X).hoistableStyles,Be=ue.get(p);if(Be||(X=X.ownerDocument||X,Be={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ue.set(p,Be),(ue=X.querySelector(MA(p)))&&!ue._p&&(Be.instance=ue,Be.state.loading=5),eh.has(p)||(P={rel:"preload",as:"style",href:P.href,crossOrigin:P.crossOrigin,integrity:P.integrity,media:P.media,hrefLang:P.hrefLang,referrerPolicy:P.referrerPolicy},eh.set(p,P),ue||pE(X,p,P,Be.state))),w&&U===null)throw Error(r(528,""));return Be}if(w&&U!==null)throw Error(r(529,""));return null;case"script":return w=P.async,P=P.src,typeof P=="string"&&w&&typeof w!="function"&&typeof w!="symbol"?(w=uy(P),P=An(X).hoistableScripts,U=P.get(w),U||(U={type:"script",instance:null,count:0,state:null},P.set(w,U)),U):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function Am(p){return'href="'+ro(p)+'"'}function MA(p){return'link[rel="stylesheet"]['+p+"]"}function kC(p){return Ee({},p,{"data-precedence":p.precedence,precedence:null})}function pE(p,w,P,U){p.querySelector('link[rel="preload"][as="style"]['+w+"]")?U.loading=1:(w=p.createElement("link"),U.preload=w,w.addEventListener("load",function(){return U.loading|=1}),w.addEventListener("error",function(){return U.loading|=2}),Oo(w,"link",P),Kr(w),p.head.appendChild(w))}function uy(p){return'[src="'+ro(p)+'"]'}function cy(p){return"script[async]"+p}function bp(p,w,P){if(w.count++,w.instance===null)switch(w.type){case"style":var U=p.querySelector('style[data-href~="'+ro(P.href)+'"]');if(U)return w.instance=U,Kr(U),U;var X=Ee({},P,{"data-href":P.href,"data-precedence":P.precedence,href:null,precedence:null});return U=(p.ownerDocument||p).createElement("style"),Kr(U),Oo(U,"style",X),vm(U,P.precedence,p),w.instance=U;case"stylesheet":X=Am(P.href);var ue=p.querySelector(MA(X));if(ue)return w.state.loading|=4,w.instance=ue,Kr(ue),ue;U=kC(P),(X=eh.get(X))&&fg(U,X),ue=(p.ownerDocument||p).createElement("link"),Kr(ue);var Be=ue;return Be._p=new Promise(function(ft,Bt){Be.onload=ft,Be.onerror=Bt}),Oo(ue,"link",U),w.state.loading|=4,vm(ue,P.precedence,p),w.instance=ue;case"script":return ue=uy(P.src),(X=p.querySelector(cy(ue)))?(w.instance=X,Kr(X),X):(U=P,(X=eh.get(ue))&&(U=Ee({},P),dy(U,X)),p=p.ownerDocument||p,X=p.createElement("script"),Kr(X),Oo(X,"link",U),p.head.appendChild(X),w.instance=X);case"void":return null;default:throw Error(r(443,w.type))}else w.type==="stylesheet"&&(w.state.loading&4)===0&&(U=w.instance,w.state.loading|=4,vm(U,P.precedence,p));return w.instance}function vm(p,w,P){for(var U=P.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),X=U.length?U[U.length-1]:null,ue=X,Be=0;Be<U.length;Be++){var ft=U[Be];if(ft.dataset.precedence===w)ue=ft;else if(ue!==X)break}ue?ue.parentNode.insertBefore(p,ue.nextSibling):(w=P.nodeType===9?P.head:P,w.insertBefore(p,w.firstChild))}function fg(p,w){p.crossOrigin==null&&(p.crossOrigin=w.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=w.referrerPolicy),p.title==null&&(p.title=w.title)}function dy(p,w){p.crossOrigin==null&&(p.crossOrigin=w.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=w.referrerPolicy),p.integrity==null&&(p.integrity=w.integrity)}var _m=null;function W1(p,w,P){if(_m===null){var U=new Map,X=_m=new Map;X.set(P,U)}else X=_m,U=X.get(P),U||(U=new Map,X.set(P,U));if(U.has(p))return U;for(U.set(p,null),P=P.getElementsByTagName(p),X=0;X<P.length;X++){var ue=P[X];if(!(ue[zr]||ue[Wt]||p==="link"&&ue.getAttribute("rel")==="stylesheet")&&ue.namespaceURI!=="http://www.w3.org/2000/svg"){var Be=ue.getAttribute(w)||"";Be=p+Be;var ft=U.get(Be);ft?ft.push(ue):U.set(Be,[ue])}}return U}function Y1(p,w,P){p=p.ownerDocument||p,p.head.insertBefore(P,w==="title"?p.querySelector("head > title"):null)}function UC(p,w,P){if(P===1||w.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof w.precedence!="string"||typeof w.href!="string"||w.href==="")break;return!0;case"link":if(typeof w.rel!="string"||typeof w.href!="string"||w.href===""||w.onLoad||w.onError)break;switch(w.rel){case"stylesheet":return p=w.disabled,typeof w.precedence=="string"&&p==null;default:return!0}case"script":if(w.async&&typeof w.async!="function"&&typeof w.async!="symbol"&&!w.onLoad&&!w.onError&&w.src&&typeof w.src=="string")return!0}return!1}function X1(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var IA=null;function mE(){}function BC(p,w,P){if(IA===null)throw Error(r(475));var U=IA;if(w.type==="stylesheet"&&(typeof P.media!="string"||matchMedia(P.media).matches!==!1)&&(w.state.loading&4)===0){if(w.instance===null){var X=Am(P.href),ue=p.querySelector(MA(X));if(ue){p=ue._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(U.count++,U=LA.bind(U),p.then(U,U)),w.state.loading|=4,w.instance=ue,Kr(ue);return}ue=p.ownerDocument||p,P=kC(P),(X=eh.get(X))&&fg(P,X),ue=ue.createElement("link"),Kr(ue);var Be=ue;Be._p=new Promise(function(ft,Bt){Be.onload=ft,Be.onerror=Bt}),Oo(ue,"link",P),w.instance=ue}U.stylesheets===null&&(U.stylesheets=new Map),U.stylesheets.set(w,p),(p=w.state.preload)&&(w.state.loading&3)===0&&(U.count++,w=LA.bind(U),p.addEventListener("load",w),p.addEventListener("error",w))}}function m0(){if(IA===null)throw Error(r(475));var p=IA;return p.stylesheets&&p.count===0&&y0(p,p.stylesheets),0<p.count?function(w){var P=setTimeout(function(){if(p.stylesheets&&y0(p,p.stylesheets),p.unsuspend){var U=p.unsuspend;p.unsuspend=null,U()}},6e4);return p.unsuspend=w,function(){p.unsuspend=null,clearTimeout(P)}}:null}function LA(){if(this.count--,this.count===0){if(this.stylesheets)y0(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var g0=null;function y0(p,w){p.stylesheets=null,p.unsuspend!==null&&(p.count++,g0=new Map,w.forEach(J1,p),g0=null,LA.call(p))}function J1(p,w){if(!(w.state.loading&4)){var P=g0.get(p);if(P)var U=P.get(null);else{P=new Map,g0.set(p,P);for(var X=p.querySelectorAll("link[data-precedence],style[data-precedence]"),ue=0;ue<X.length;ue++){var Be=X[ue];(Be.nodeName==="LINK"||Be.getAttribute("media")!=="not all")&&(P.set(Be.dataset.precedence,Be),U=Be)}U&&P.set(null,U)}X=w.instance,Be=X.getAttribute("data-precedence"),ue=P.get(Be)||U,ue===U&&P.set(null,X),P.set(Be,X),this.count++,U=LA.bind(this),X.addEventListener("load",U),X.addEventListener("error",U),ue?ue.parentNode.insertBefore(X,ue.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(X,p.firstChild)),w.state.loading|=4}}var hy={$$typeof:F,Provider:null,Consumer:null,_currentValue:Ze,_currentValue2:Ze,_threadCount:0};function jC(p,w,P,U,X,ue,Be,ft){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=U,this.onUncaughtError=X,this.onCaughtError=ue,this.onRecoverableError=Be,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ft,this.incompleteTransitions=new Map}function Q1(p,w,P,U,X,ue,Be,ft,Bt,la,Za,sr){return p=new jC(p,w,P,Be,ft,Bt,la,sr),w=1,ue===!0&&(w|=24),ue=ra(3,null,null,w),p.current=ue,ue.stateNode=p,w=Yh(),w.refCount++,p.pooledCache=w,w.refCount++,ue.memoizedState={element:U,isDehydrated:P,cache:w},Nh(ue),p}function ew(p){return p?(p=$c,p):$c}function tw(p,w,P,U,X,ue){X=ew(X),U.context===null?U.context=X:U.pendingContext=X,U=Mf(w),U.payload={element:P},ue=ue===void 0?null:ue,ue!==null&&(U.callback=ue),P=If(p,U,w),P!==null&&(Gl(P,p,w),Lf(P,p,w))}function GC(p,w){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var P=p.retryLane;p.retryLane=P!==0&&P<w?P:w}}function A0(p,w){GC(p,w),(p=p.alternate)&&GC(p,w)}function aw(p){if(p.tag===13){var w=nl(p,67108864);w!==null&&Gl(w,p,67108864),A0(p,67108864)}}var wm=!0;function ZC(p,w,P,U){var X=we.T;we.T=null;var ue=qe.p;try{qe.p=2,rw(p,w,P,U)}finally{qe.p=ue,we.T=X}}function qC(p,w,P,U){var X=we.T;we.T=null;var ue=qe.p;try{qe.p=8,rw(p,w,P,U)}finally{qe.p=ue,we.T=X}}function rw(p,w,P,U){if(wm){var X=nw(U);if(X===null)u0(p,w,U,v0,P),lw(p,U);else if($C(X,p,w,P,U))U.stopPropagation();else if(lw(p,U),w&4&&-1<ow.indexOf(p)){for(;X!==null;){var ue=ei(X);if(ue!==null)switch(ue.tag){case 3:if(ue=ue.stateNode,ue.current.memoizedState.isDehydrated){var Be=di(ue.pendingLanes);if(Be!==0){var ft=ue;for(ft.pendingLanes|=2,ft.entangledLanes|=2;Be;){var Bt=1<<31-$r(Be);ft.entanglements[1]|=Bt,Be&=~Bt}rf(ue),(Or&6)===0&&(Ro=ka()+500,gm(0))}}break;case 13:ft=nl(ue,2),ft!==null&&Gl(ft,ue,2),Qv(),A0(ue,2)}if(ue=nw(U),ue===null&&u0(p,w,U,v0,P),ue===X)break;X=ue}X!==null&&U.stopPropagation()}else u0(p,w,U,null,P)}}function nw(p){return p=mr(p),iw(p)}var v0=null;function iw(p){if(v0=null,p=In(p),p!==null){var w=Ue(p);if(w===null)p=null;else{var P=w.tag;if(P===13){if(p=Qe(w),p!==null)return p;p=null}else if(P===3){if(w.stateNode.current.memoizedState.isDehydrated)return w.tag===3?w.stateNode.containerInfo:null;p=null}else w!==p&&(p=null)}}return v0=p,null}function HC(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gr()){case dn:return 2;case Cn:return 8;case fn:case va:return 32;case Wa:return 268435456;default:return 32}default:return 32}}var sw=!1,Rm=null,xp=null,Tm=null,FA=new Map,kA=new Map,Gf=[],ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lw(p,w){switch(p){case"focusin":case"focusout":Rm=null;break;case"dragenter":case"dragleave":xp=null;break;case"mouseover":case"mouseout":Tm=null;break;case"pointerover":case"pointerout":FA.delete(w.pointerId);break;case"gotpointercapture":case"lostpointercapture":kA.delete(w.pointerId)}}function fy(p,w,P,U,X,ue){return p===null||p.nativeEvent!==ue?(p={blockedOn:w,domEventName:P,eventSystemFlags:U,nativeEvent:ue,targetContainers:[X]},w!==null&&(w=ei(w),w!==null&&aw(w)),p):(p.eventSystemFlags|=U,w=p.targetContainers,X!==null&&w.indexOf(X)===-1&&w.push(X),p)}function $C(p,w,P,U,X){switch(w){case"focusin":return Rm=fy(Rm,p,w,P,U,X),!0;case"dragenter":return xp=fy(xp,p,w,P,U,X),!0;case"mouseover":return Tm=fy(Tm,p,w,P,U,X),!0;case"pointerover":var ue=X.pointerId;return FA.set(ue,fy(FA.get(ue)||null,p,w,P,U,X)),!0;case"gotpointercapture":return ue=X.pointerId,kA.set(ue,fy(kA.get(ue)||null,p,w,P,U,X)),!0}return!1}function uw(p){var w=In(p.target);if(w!==null){var P=Ue(w);if(P!==null){if(w=P.tag,w===13){if(w=Qe(P),w!==null){p.blockedOn=w,Et(p.priority,function(){if(P.tag===13){var U=To(),X=nl(P,U);X!==null&&Gl(X,P,U),A0(P,U)}});return}}else if(w===3&&P.stateNode.current.memoizedState.isDehydrated){p.blockedOn=P.tag===3?P.stateNode.containerInfo:null;return}}}p.blockedOn=null}function UA(p){if(p.blockedOn!==null)return!1;for(var w=p.targetContainers;0<w.length;){var P=nw(p.nativeEvent);if(P===null){P=p.nativeEvent;var U=new P.constructor(P.type,P);mo=U,P.target.dispatchEvent(U),mo=null}else return w=ei(P),w!==null&&aw(w),p.blockedOn=P,!1;w.shift()}return!0}function cw(p,w,P){UA(p)&&P.delete(w)}function KC(){sw=!1,Rm!==null&&UA(Rm)&&(Rm=null),xp!==null&&UA(xp)&&(xp=null),Tm!==null&&UA(Tm)&&(Tm=null),FA.forEach(cw),kA.forEach(cw)}function BA(p,w){p.blockedOn===w&&(p.blockedOn=null,sw||(sw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KC)))}var py=null;function dw(p){py!==p&&(py=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){py===p&&(py=null);for(var w=0;w<p.length;w+=3){var P=p[w],U=p[w+1],X=p[w+2];if(typeof U!="function"){if(iw(U||P)===null)continue;break}var ue=ei(P);ue!==null&&(p.splice(w,3),w-=3,ad(ue,{pending:!0,data:X,method:P.method,action:U},U,X))}}))}function jA(p){function w(Bt){return BA(Bt,p)}Rm!==null&&BA(Rm,p),xp!==null&&BA(xp,p),Tm!==null&&BA(Tm,p),FA.forEach(w),kA.forEach(w);for(var P=0;P<Gf.length;P++){var U=Gf[P];U.blockedOn===p&&(U.blockedOn=null)}for(;0<Gf.length&&(P=Gf[0],P.blockedOn===null);)uw(P),P.blockedOn===null&&Gf.shift();if(P=(p.ownerDocument||p).$$reactFormReplay,P!=null)for(U=0;U<P.length;U+=3){var X=P[U],ue=P[U+1],Be=X[$t]||null;if(typeof ue=="function")Be||dw(P);else if(Be){var ft=null;if(ue&&ue.hasAttribute("formAction")){if(X=ue,Be=ue[$t]||null)ft=Be.formAction;else if(iw(X)!==null)continue}else ft=Be.action;typeof ft=="function"?P[U+1]=ft:(P.splice(U,3),U-=3),dw(P)}}}function pg(p){this._internalRoot=p}GA.prototype.render=pg.prototype.render=function(p){var w=this._internalRoot;if(w===null)throw Error(r(409));var P=w.current,U=To();tw(P,U,p,w,null,null)},GA.prototype.unmount=pg.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var w=p.containerInfo;p.tag===0&&zh(),tw(p.current,2,null,p,null,null),Qv(),w[Ta]=null}};function GA(p){this._internalRoot=p}GA.prototype.unstable_scheduleHydration=function(p){if(p){var w=Gt();p={blockedOn:null,target:p,priority:w};for(var P=0;P<Gf.length&&w!==0&&w<Gf[P].priority;P++);Gf.splice(P,0,p),P===0&&uw(p)}};var WC=e.version;if(WC!=="19.0.0")throw Error(r(527,WC,"19.0.0"));qe.findDOMNode=function(p){var w=p._reactInternals;if(w===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=Ge(w),p=p!==null?Se(p):null,p=p===null?null:p.stateNode,p};var gE={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:we,findFiberByHostInstance:In,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_0.isDisabled&&_0.supportsFiber)try{pr=_0.inject(gE),Mn=_0}catch{}}return Dw.createRoot=function(p,w){if(!i(p))throw Error(r(299));var P=!1,U="",X=mp,ue=Qh,Be=Ph,ft=null;return w!=null&&(w.unstable_strictMode===!0&&(P=!0),w.identifierPrefix!==void 0&&(U=w.identifierPrefix),w.onUncaughtError!==void 0&&(X=w.onUncaughtError),w.onCaughtError!==void 0&&(ue=w.onCaughtError),w.onRecoverableError!==void 0&&(Be=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(ft=w.unstable_transitionCallbacks)),w=Q1(p,1,!1,null,null,P,U,X,ue,Be,ft,null),p[Ta]=w.current,l0(p.nodeType===8?p.parentNode:p),new pg(w)},Dw.hydrateRoot=function(p,w,P){if(!i(p))throw Error(r(299));var U=!1,X="",ue=mp,Be=Qh,ft=Ph,Bt=null,la=null;return P!=null&&(P.unstable_strictMode===!0&&(U=!0),P.identifierPrefix!==void 0&&(X=P.identifierPrefix),P.onUncaughtError!==void 0&&(ue=P.onUncaughtError),P.onCaughtError!==void 0&&(Be=P.onCaughtError),P.onRecoverableError!==void 0&&(ft=P.onRecoverableError),P.unstable_transitionCallbacks!==void 0&&(Bt=P.unstable_transitionCallbacks),P.formState!==void 0&&(la=P.formState)),w=Q1(p,1,!0,w,P??null,U,X,ue,Be,ft,Bt,la),w.context=ew(null),P=w.current,U=To(),X=Mf(U),X.callback=null,If(P,X,U),w.current.lanes=U,Fe(w,U),rf(w),p[Ta]=w.current,l0(p),new GA(w)},Dw.version="19.0.0",Dw}var A6;function _ne(){if(A6)return dN.exports;A6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dN.exports=vne(),dN.exports}var wne=_ne(),Mw={},v6;function Rne(){if(v6)return Mw;v6=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.parse=c,Mw.serialize=R;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=(()=>{const L=function(){};return L.prototype=Object.create(null),L})();function c(L,F){const j=new l,H=L.length;if(H<2)return j;const q=(F==null?void 0:F.decode)||x;let W=0;do{const ee=L.indexOf("=",W);if(ee===-1)break;const oe=L.indexOf(";",W),fe=oe===-1?H:oe;if(ee>fe){W=L.lastIndexOf(";",ee-1)+1;continue}const se=n(L,W,ee),me=v(L,ee,se),ge=L.slice(se,me);if(j[ge]===void 0){let Re=n(L,ee+1,fe),we=v(L,fe,Re);const Ee=q(L.slice(Re,we));j[ge]=Ee}W=fe+1}while(W<H);return j}function n(L,F,j){do{const H=L.charCodeAt(F);if(H!==32&&H!==9)return F}while(++F<j);return j}function v(L,F,j){for(;F>j;){const H=L.charCodeAt(--F);if(H!==32&&H!==9)return F+1}return j}function R(L,F,j){const H=(j==null?void 0:j.encode)||encodeURIComponent;if(!t.test(L))throw new TypeError(`argument name is invalid: ${L}`);const q=H(F);if(!e.test(q))throw new TypeError(`argument val is invalid: ${F}`);let W=L+"="+q;if(!j)return W;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);W+="; Max-Age="+j.maxAge}if(j.domain){if(!a.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);W+="; Domain="+j.domain}if(j.path){if(!r.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);W+="; Path="+j.path}if(j.expires){if(!N(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);W+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(W+="; HttpOnly"),j.secure&&(W+="; Secure"),j.partitioned&&(W+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return W}function x(L){if(L.indexOf("%")===-1)return L;try{return decodeURIComponent(L)}catch{return L}}function N(L){return i.call(L)==="[object Date]"}return Mw}Rne();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _6="popstate";function Tne(t={}){function e(i,l){let{pathname:c="/",search:n="",hash:v=""}=Fv(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ED("",{pathname:c,search:n,hash:v},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(i,l){let c=i.document.querySelector("base"),n="";if(c&&c.getAttribute("href")){let v=i.location.href,R=v.indexOf("#");n=R===-1?v:v.slice(0,R)}return n+"#"+(typeof l=="string"?l:VR(l))}function r(i,l){qp(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Sne(e,a,r,t)}function ml(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Cne(){return Math.random().toString(36).substring(2,10)}function w6(t,e){return{usr:t.state,key:t.key,idx:e}}function ED(t,e,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Fv(e):e,state:a,key:e&&e.key||r||Cne()}}function VR({pathname:t="/",search:e="",hash:a=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Fv(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Sne(t,e,a,r={}){let{window:i=document.defaultView,v5Compat:l=!1}=r,c=i.history,n="POP",v=null,R=x();R==null&&(R=0,c.replaceState({...c.state,idx:R},""));function x(){return(c.state||{idx:null}).idx}function N(){n="POP";let q=x(),W=q==null?null:q-R;R=q,v&&v({action:n,location:H.location,delta:W})}function L(q,W){n="PUSH";let ee=ED(H.location,q,W);a&&a(ee,q),R=x()+1;let oe=w6(ee,R),fe=H.createHref(ee);try{c.pushState(oe,"",fe)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;i.location.assign(fe)}l&&v&&v({action:n,location:H.location,delta:1})}function F(q,W){n="REPLACE";let ee=ED(H.location,q,W);a&&a(ee,q),R=x();let oe=w6(ee,R),fe=H.createHref(ee);c.replaceState(oe,"",fe),l&&v&&v({action:n,location:H.location,delta:0})}function j(q){let W=i.location.origin!=="null"?i.location.origin:i.location.href,ee=typeof q=="string"?q:VR(q);return ee=ee.replace(/ $/,"%20"),ml(W,`No window.location.(origin|href) available to create URL for href: ${ee}`),new URL(ee,W)}let H={get action(){return n},get location(){return t(i,c)},listen(q){if(v)throw new Error("A history only accepts one active listener");return i.addEventListener(_6,N),v=q,()=>{i.removeEventListener(_6,N),v=null}},createHref(q){return e(i,q)},createURL:j,encodeLocation(q){let W=j(q);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:L,replace:F,go(q){return c.go(q)}};return H}function D$(t,e,a="/"){return bne(t,e,a,!1)}function bne(t,e,a,r){let i=typeof e=="string"?Fv(e):e,l=Ng(i.pathname||"/",a);if(l==null)return null;let c=M$(t);xne(c);let n=null;for(let v=0;n==null&&v<c.length;++v){let R=Fne(l);n=Ine(c[v],R,r)}return n}function M$(t,e=[],a=[],r=""){let i=(l,c,n)=>{let v={relativePath:n===void 0?l.path||"":n,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};v.relativePath.startsWith("/")&&(ml(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length));let R=bg([r,v.relativePath]),x=a.concat(v);l.children&&l.children.length>0&&(ml(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),M$(l.children,e,x,R)),!(l.path==null&&!l.index)&&e.push({path:R,score:Dne(R,l.index),routesMeta:x})};return t.forEach((l,c)=>{var n;if(l.path===""||!((n=l.path)!=null&&n.includes("?")))i(l,c);else for(let v of I$(l.path))i(l,c,v)}),e}function I$(t){let e=t.split("/");if(e.length===0)return[];let[a,...r]=e,i=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let c=I$(r.join("/")),n=[];return n.push(...c.map(v=>v===""?l:[l,v].join("/"))),i&&n.push(...c),n.map(v=>t.startsWith("/")&&v===""?"/":v)}function xne(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:Mne(e.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var Pne=/^:[\w-]+$/,Ene=3,Nne=2,One=1,Vne=10,zne=-2,R6=t=>t==="*";function Dne(t,e){let a=t.split("/"),r=a.length;return a.some(R6)&&(r+=zne),e&&(r+=Nne),a.filter(i=>!R6(i)).reduce((i,l)=>i+(Pne.test(l)?Ene:l===""?One:Vne),r)}function Mne(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Ine(t,e,a=!1){let{routesMeta:r}=t,i={},l="/",c=[];for(let n=0;n<r.length;++n){let v=r[n],R=n===r.length-1,x=l==="/"?e:e.slice(l.length)||"/",N=Ib({path:v.relativePath,caseSensitive:v.caseSensitive,end:R},x),L=v.route;if(!N&&R&&a&&!r[r.length-1].route.index&&(N=Ib({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},x)),!N)return null;Object.assign(i,N.params),c.push({params:i,pathname:bg([l,N.pathname]),pathnameBase:jne(bg([l,N.pathnameBase])),route:L}),N.pathnameBase!=="/"&&(l=bg([l,N.pathnameBase]))}return c}function Ib(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=Lne(t.path,t.caseSensitive,t.end),i=e.match(a);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),n=i.slice(1);return{params:r.reduce((R,{paramName:x,isOptional:N},L)=>{if(x==="*"){let j=n[L]||"";c=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const F=n[L];return N&&!F?R[x]=void 0:R[x]=(F||"").replace(/%2F/g,"/"),R},{}),pathname:l,pathnameBase:c,pattern:t}}function Lne(t,e=!1,a=!0){qp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,n,v)=>(r.push({paramName:n,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Fne(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qp(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ng(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function kne(t,e="/"){let{pathname:a,search:r="",hash:i=""}=typeof t=="string"?Fv(t):t;return{pathname:a?a.startsWith("/")?a:Une(a,e):e,search:Gne(r),hash:Zne(i)}}function Une(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?a.length>1&&a.pop():i!=="."&&a.push(i)}),a.length>1?a.join("/"):"/"}function mN(t,e,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bne(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function L$(t){let e=Bne(t);return e.map((a,r)=>r===e.length-1?a.pathname:a.pathnameBase)}function F$(t,e,a,r=!1){let i;typeof t=="string"?i=Fv(t):(i={...t},ml(!i.pathname||!i.pathname.includes("?"),mN("?","pathname","search",i)),ml(!i.pathname||!i.pathname.includes("#"),mN("#","pathname","hash",i)),ml(!i.search||!i.search.includes("#"),mN("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,n;if(c==null)n=a;else{let N=e.length-1;if(!r&&c.startsWith("..")){let L=c.split("/");for(;L[0]==="..";)L.shift(),N-=1;i.pathname=L.join("/")}n=N>=0?e[N]:"/"}let v=kne(i,n),R=c&&c!=="/"&&c.endsWith("/"),x=(l||c===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(R||x)&&(v.pathname+="/"),v}var bg=t=>t.join("/").replace(/\/\/+/g,"/"),jne=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gne=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Zne=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qne(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var k$=["POST","PUT","PATCH","DELETE"];new Set(k$);var Hne=["GET",...k$];new Set(Hne);var n1=le.createContext(null);n1.displayName="DataRouter";var T2=le.createContext(null);T2.displayName="DataRouterState";var U$=le.createContext({isTransitioning:!1});U$.displayName="ViewTransition";var $ne=le.createContext(new Map);$ne.displayName="Fetchers";var Kne=le.createContext(null);Kne.displayName="Await";var $m=le.createContext(null);$m.displayName="Navigation";var IT=le.createContext(null);IT.displayName="Location";var kg=le.createContext({outlet:null,matches:[],isDataRoute:!1});kg.displayName="Route";var s3=le.createContext(null);s3.displayName="RouteError";function Wne(t,{relative:e}={}){ml(LT(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=le.useContext($m),{hash:i,pathname:l,search:c}=FT(t,{relative:e}),n=l;return a!=="/"&&(n=l==="/"?a:bg([a,l])),r.createHref({pathname:n,search:c,hash:i})}function LT(){return le.useContext(IT)!=null}function aA(){return ml(LT(),"useLocation() may be used only in the context of a <Router> component."),le.useContext(IT).location}var B$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j$(t){le.useContext($m).static||le.useLayoutEffect(t)}function o3(){let{isDataRoute:t}=le.useContext(kg);return t?lie():Yne()}function Yne(){ml(LT(),"useNavigate() may be used only in the context of a <Router> component.");let t=le.useContext(n1),{basename:e,navigator:a}=le.useContext($m),{matches:r}=le.useContext(kg),{pathname:i}=aA(),l=JSON.stringify(L$(r)),c=le.useRef(!1);return j$(()=>{c.current=!0}),le.useCallback((v,R={})=>{if(qp(c.current,B$),!c.current)return;if(typeof v=="number"){a.go(v);return}let x=F$(v,JSON.parse(l),i,R.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:bg([e,x.pathname])),(R.replace?a.replace:a.push)(x,R.state,R)},[e,a,l,i,t])}le.createContext(null);function FT(t,{relative:e}={}){let{matches:a}=le.useContext(kg),{pathname:r}=aA(),i=JSON.stringify(L$(a));return le.useMemo(()=>F$(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Xne(t,e){return G$(t,e)}function G$(t,e,a,r){var ee;ml(LT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=le.useContext($m),{matches:c}=le.useContext(kg),n=c[c.length-1],v=n?n.params:{},R=n?n.pathname:"/",x=n?n.pathnameBase:"/",N=n&&n.route;{let oe=N&&N.path||"";Z$(R,!N||oe.endsWith("*")||oe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${oe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${oe}"> to <Route path="${oe==="/"?"*":`${oe}/*`}">.`)}let L=aA(),F;if(e){let oe=typeof e=="string"?Fv(e):e;ml(x==="/"||((ee=oe.pathname)==null?void 0:ee.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${oe.pathname}" was given in the \`location\` prop.`),F=oe}else F=L;let j=F.pathname||"/",H=j;if(x!=="/"){let oe=x.replace(/^\//,"").split("/");H="/"+j.replace(/^\//,"").split("/").slice(oe.length).join("/")}let q=!l&&a&&a.matches&&a.matches.length>0?a.matches:D$(t,{pathname:H});qp(N||q!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),qp(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=aie(q&&q.map(oe=>Object.assign({},oe,{params:Object.assign({},v,oe.params),pathname:bg([x,i.encodeLocation?i.encodeLocation(oe.pathname).pathname:oe.pathname]),pathnameBase:oe.pathnameBase==="/"?x:bg([x,i.encodeLocation?i.encodeLocation(oe.pathnameBase).pathname:oe.pathnameBase])})),c,a,r);return e&&W?le.createElement(IT.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},W):W}function Jne(){let t=oie(),e=qne(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=le.createElement(le.Fragment,null,le.createElement("p",null," Hey developer "),le.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",le.createElement("code",{style:l},"ErrorBoundary")," or"," ",le.createElement("code",{style:l},"errorElement")," prop on your route.")),le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),a?le.createElement("pre",{style:i},a):null,c)}var Qne=le.createElement(Jne,null),eie=class extends le.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?le.createElement(kg.Provider,{value:this.props.routeContext},le.createElement(s3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tie({routeContext:t,match:e,children:a}){let r=le.useContext(n1);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),le.createElement(kg.Provider,{value:t},a)}function aie(t,e=[],a=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,l=a==null?void 0:a.errors;if(l!=null){let v=i.findIndex(R=>R.route.id&&(l==null?void 0:l[R.route.id])!==void 0);ml(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,v+1))}let c=!1,n=-1;if(a)for(let v=0;v<i.length;v++){let R=i[v];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(n=v),R.route.id){let{loaderData:x,errors:N}=a,L=R.route.loader&&!x.hasOwnProperty(R.route.id)&&(!N||N[R.route.id]===void 0);if(R.route.lazy||L){c=!0,n>=0?i=i.slice(0,n+1):i=[i[0]];break}}}return i.reduceRight((v,R,x)=>{let N,L=!1,F=null,j=null;a&&(N=l&&R.route.id?l[R.route.id]:void 0,F=R.route.errorElement||Qne,c&&(n<0&&x===0?(Z$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,j=null):n===x&&(L=!0,j=R.route.hydrateFallbackElement||null)));let H=e.concat(i.slice(0,x+1)),q=()=>{let W;return N?W=F:L?W=j:R.route.Component?W=le.createElement(R.route.Component,null):R.route.element?W=R.route.element:W=v,le.createElement(tie,{match:R,routeContext:{outlet:v,matches:H,isDataRoute:a!=null},children:W})};return a&&(R.route.ErrorBoundary||R.route.errorElement||x===0)?le.createElement(eie,{location:a.location,revalidation:a.revalidation,component:F,error:N,children:q(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):q()},null)}function l3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rie(t){let e=le.useContext(n1);return ml(e,l3(t)),e}function nie(t){let e=le.useContext(T2);return ml(e,l3(t)),e}function iie(t){let e=le.useContext(kg);return ml(e,l3(t)),e}function u3(t){let e=iie(t),a=e.matches[e.matches.length-1];return ml(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function sie(){return u3("useRouteId")}function oie(){var r;let t=le.useContext(s3),e=nie("useRouteError"),a=u3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[a]}function lie(){let{router:t}=rie("useNavigate"),e=u3("useNavigate"),a=le.useRef(!1);return j$(()=>{a.current=!0}),le.useCallback(async(i,l={})=>{qp(a.current,B$),a.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...l}))},[t,e])}var T6={};function Z$(t,e,a){!e&&!T6[t]&&(T6[t]=!0,qp(!1,a))}le.memo(uie);function uie({routes:t,future:e,state:a}){return G$(t,void 0,a,e)}function Kf(t){ml(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cie({basename:t="/",children:e=null,location:a,navigationType:r="POP",navigator:i,static:l=!1}){ml(!LT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),n=le.useMemo(()=>({basename:c,navigator:i,static:l,future:{}}),[c,i,l]);typeof a=="string"&&(a=Fv(a));let{pathname:v="/",search:R="",hash:x="",state:N=null,key:L="default"}=a,F=le.useMemo(()=>{let j=Ng(v,c);return j==null?null:{location:{pathname:j,search:R,hash:x,state:N,key:L},navigationType:r}},[c,v,R,x,N,L,r]);return qp(F!=null,`<Router basename="${c}"> is not able to match the URL "${v}${R}${x}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:le.createElement($m.Provider,{value:n},le.createElement(IT.Provider,{children:e,value:F}))}function die({children:t,location:e}){return Xne(ND(t),e)}function ND(t,e=[]){let a=[];return le.Children.forEach(t,(r,i)=>{if(!le.isValidElement(r))return;let l=[...e,i];if(r.type===le.Fragment){a.push.apply(a,ND(r.props.children,l));return}ml(r.type===Kf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ml(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ND(r.props.children,l)),a.push(c)}),a}var cb="get",db="application/x-www-form-urlencoded";function C2(t){return t!=null&&typeof t.tagName=="string"}function hie(t){return C2(t)&&t.tagName.toLowerCase()==="button"}function fie(t){return C2(t)&&t.tagName.toLowerCase()==="form"}function pie(t){return C2(t)&&t.tagName.toLowerCase()==="input"}function mie(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gie(t,e){return t.button===0&&(!e||e==="_self")&&!mie(t)}var NS=null;function yie(){if(NS===null)try{new FormData(document.createElement("form"),0),NS=!1}catch{NS=!0}return NS}var Aie=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gN(t){return t!=null&&!Aie.has(t)?(qp(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${db}"`),null):t}function vie(t,e){let a,r,i,l,c;if(fie(t)){let n=t.getAttribute("action");r=n?Ng(n,e):null,a=t.getAttribute("method")||cb,i=gN(t.getAttribute("enctype"))||db,l=new FormData(t)}else if(hie(t)||pie(t)&&(t.type==="submit"||t.type==="image")){let n=t.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=t.getAttribute("formaction")||n.getAttribute("action");if(r=v?Ng(v,e):null,a=t.getAttribute("formmethod")||n.getAttribute("method")||cb,i=gN(t.getAttribute("formenctype"))||gN(n.getAttribute("enctype"))||db,l=new FormData(n,t),!yie()){let{name:R,type:x,value:N}=t;if(x==="image"){let L=R?`${R}.`:"";l.append(`${L}x`,"0"),l.append(`${L}y`,"0")}else R&&l.append(R,N)}}else{if(C2(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=cb,r=null,i=db,c=t}return l&&i==="text/plain"&&(c=l,l=void 0),{action:r,method:a.toLowerCase(),encType:i,formData:l,body:c}}function c3(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function _ie(t,e){if(t.id in e)return e[t.id];try{let a=await import(t.module);return e[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wie(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Rie(t,e,a){let r=await Promise.all(t.map(async i=>{let l=e.routes[i.route.id];if(l){let c=await _ie(l,a);return c.links?c.links():[]}return[]}));return bie(r.flat(1).filter(wie).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function C6(t,e,a,r,i,l){let c=(v,R)=>a[R]?v.route.id!==a[R].route.id:!0,n=(v,R)=>{var x;return a[R].pathname!==v.pathname||((x=a[R].route.path)==null?void 0:x.endsWith("*"))&&a[R].params["*"]!==v.params["*"]};return l==="assets"?e.filter((v,R)=>c(v,R)||n(v,R)):l==="data"?e.filter((v,R)=>{var N;let x=r.routes[v.route.id];if(!x||!x.hasLoader)return!1;if(c(v,R)||n(v,R))return!0;if(v.route.shouldRevalidate){let L=v.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((N=a[0])==null?void 0:N.params)||{},nextUrl:new URL(t,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof L=="boolean")return L}return!0}):[]}function Tie(t,e,{includeHydrateFallback:a}={}){return Cie(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),a&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function Cie(t){return[...new Set(t)]}function Sie(t){let e={},a=Object.keys(t).sort();for(let r of a)e[r]=t[r];return e}function bie(t,e){let a=new Set;return new Set(e),t.reduce((r,i)=>{let l=JSON.stringify(Sie(i));return a.has(l)||(a.add(l),r.push({key:l,link:i})),r},[])}function xie(t,e){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname="_root.data":e&&Ng(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function q$(){let t=le.useContext(n1);return c3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Pie(){let t=le.useContext(T2);return c3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var d3=le.createContext(void 0);d3.displayName="FrameworkContext";function H$(){let t=le.useContext(d3);return c3(t,"You must render this element inside a <HydratedRouter> element"),t}function Eie(t,e){let a=le.useContext(d3),[r,i]=le.useState(!1),[l,c]=le.useState(!1),{onFocus:n,onBlur:v,onMouseEnter:R,onMouseLeave:x,onTouchStart:N}=e,L=le.useRef(null);le.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let H=W=>{W.forEach(ee=>{c(ee.isIntersecting)})},q=new IntersectionObserver(H,{threshold:.5});return L.current&&q.observe(L.current),()=>{q.disconnect()}}},[t]),le.useEffect(()=>{if(r){let H=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(H)}}},[r]);let F=()=>{i(!0)},j=()=>{i(!1),c(!1)};return a?t!=="intent"?[l,L,{}]:[l,L,{onFocus:Iw(n,F),onBlur:Iw(v,j),onMouseEnter:Iw(R,F),onMouseLeave:Iw(x,j),onTouchStart:Iw(N,F)}]:[!1,L,{}]}function Iw(t,e){return a=>{t&&t(a),a.defaultPrevented||e(a)}}function Nie({page:t,...e}){let{router:a}=q$(),r=le.useMemo(()=>D$(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?le.createElement(Vie,{page:t,matches:r,...e}):null}function Oie(t){let{manifest:e,routeModules:a}=H$(),[r,i]=le.useState([]);return le.useEffect(()=>{let l=!1;return Rie(t,e,a).then(c=>{l||i(c)}),()=>{l=!0}},[t,e,a]),r}function Vie({page:t,matches:e,...a}){let r=aA(),{manifest:i,routeModules:l}=H$(),{basename:c}=q$(),{loaderData:n,matches:v}=Pie(),R=le.useMemo(()=>C6(t,e,v,i,r,"data"),[t,e,v,i,r]),x=le.useMemo(()=>C6(t,e,v,i,r,"assets"),[t,e,v,i,r]),N=le.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let j=new Set,H=!1;if(e.forEach(W=>{var oe;let ee=i.routes[W.route.id];!ee||!ee.hasLoader||(!R.some(fe=>fe.route.id===W.route.id)&&W.route.id in n&&((oe=l[W.route.id])!=null&&oe.shouldRevalidate)||ee.hasClientLoader?H=!0:j.add(W.route.id))}),j.size===0)return[];let q=xie(t,c);return H&&j.size>0&&q.searchParams.set("_routes",e.filter(W=>j.has(W.route.id)).map(W=>W.route.id).join(",")),[q.pathname+q.search]},[c,n,r,i,R,e,t,l]),L=le.useMemo(()=>Tie(x,i),[x,i]),F=Oie(x);return le.createElement(le.Fragment,null,N.map(j=>le.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...a})),L.map(j=>le.createElement("link",{key:j,rel:"modulepreload",href:j,...a})),F.map(({key:j,link:H})=>le.createElement("link",{key:j,...H})))}function zie(...t){return e=>{t.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var $$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$$&&(window.__reactRouterVersion="7.3.0")}catch{}function Die({basename:t,children:e,window:a}){let r=le.useRef();r.current==null&&(r.current=Tne({window:a,v5Compat:!0}));let i=r.current,[l,c]=le.useState({action:i.action,location:i.location}),n=le.useCallback(v=>{le.startTransition(()=>c(v))},[c]);return le.useLayoutEffect(()=>i.listen(n),[i,n]),le.createElement(cie,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:i})}var K$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W$=le.forwardRef(function({onClick:e,discover:a="render",prefetch:r="none",relative:i,reloadDocument:l,replace:c,state:n,target:v,to:R,preventScrollReset:x,viewTransition:N,...L},F){let{basename:j}=le.useContext($m),H=typeof R=="string"&&K$.test(R),q,W=!1;if(typeof R=="string"&&H&&(q=R,$$))try{let we=new URL(window.location.href),Ee=R.startsWith("//")?new URL(we.protocol+R):new URL(R),ae=Ng(Ee.pathname,j);Ee.origin===we.origin&&ae!=null?R=ae+Ee.search+Ee.hash:W=!0}catch{qp(!1,`<Link to="${R}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=Wne(R,{relative:i}),[oe,fe,se]=Eie(r,L),me=Fie(R,{replace:c,state:n,target:v,preventScrollReset:x,relative:i,viewTransition:N});function ge(we){e&&e(we),we.defaultPrevented||me(we)}let Re=le.createElement("a",{...L,...se,href:q||ee,onClick:W||l?e:ge,ref:zie(F,fe),target:v,"data-discover":!H&&a==="render"?"true":void 0});return oe&&!H?le.createElement(le.Fragment,null,Re,le.createElement(Nie,{page:ee})):Re});W$.displayName="Link";var Mie=le.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:r="",end:i=!1,style:l,to:c,viewTransition:n,children:v,...R},x){let N=FT(c,{relative:R.relative}),L=aA(),F=le.useContext(T2),{navigator:j,basename:H}=le.useContext($m),q=F!=null&&Gie(N)&&n===!0,W=j.encodeLocation?j.encodeLocation(N).pathname:N.pathname,ee=L.pathname,oe=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;a||(ee=ee.toLowerCase(),oe=oe?oe.toLowerCase():null,W=W.toLowerCase()),oe&&H&&(oe=Ng(oe,H)||oe);const fe=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let se=ee===W||!i&&ee.startsWith(W)&&ee.charAt(fe)==="/",me=oe!=null&&(oe===W||!i&&oe.startsWith(W)&&oe.charAt(W.length)==="/"),ge={isActive:se,isPending:me,isTransitioning:q},Re=se?e:void 0,we;typeof r=="function"?we=r(ge):we=[r,se?"active":null,me?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let Ee=typeof l=="function"?l(ge):l;return le.createElement(W$,{...R,"aria-current":Re,className:we,ref:x,style:Ee,to:c,viewTransition:n},typeof v=="function"?v(ge):v)});Mie.displayName="NavLink";var Iie=le.forwardRef(({discover:t="render",fetcherKey:e,navigate:a,reloadDocument:r,replace:i,state:l,method:c=cb,action:n,onSubmit:v,relative:R,preventScrollReset:x,viewTransition:N,...L},F)=>{let j=Bie(),H=jie(n,{relative:R}),q=c.toLowerCase()==="get"?"get":"post",W=typeof n=="string"&&K$.test(n),ee=oe=>{if(v&&v(oe),oe.defaultPrevented)return;oe.preventDefault();let fe=oe.nativeEvent.submitter,se=(fe==null?void 0:fe.getAttribute("formmethod"))||c;j(fe||oe.currentTarget,{fetcherKey:e,method:se,navigate:a,replace:i,state:l,relative:R,preventScrollReset:x,viewTransition:N})};return le.createElement("form",{ref:F,method:q,action:H,onSubmit:r?v:ee,...L,"data-discover":!W&&t==="render"?"true":void 0})});Iie.displayName="Form";function Lie(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y$(t){let e=le.useContext(n1);return ml(e,Lie(t)),e}function Fie(t,{target:e,replace:a,state:r,preventScrollReset:i,relative:l,viewTransition:c}={}){let n=o3(),v=aA(),R=FT(t,{relative:l});return le.useCallback(x=>{if(gie(x,e)){x.preventDefault();let N=a!==void 0?a:VR(v)===VR(R);n(t,{replace:N,state:r,preventScrollReset:i,relative:l,viewTransition:c})}},[v,n,R,a,r,e,t,i,l,c])}var kie=0,Uie=()=>`__${String(++kie)}__`;function Bie(){let{router:t}=Y$("useSubmit"),{basename:e}=le.useContext($m),a=sie();return le.useCallback(async(r,i={})=>{let{action:l,method:c,encType:n,formData:v,body:R}=vie(r,e);if(i.navigate===!1){let x=i.fetcherKey||Uie();await t.fetch(x,a,i.action||l,{preventScrollReset:i.preventScrollReset,formData:v,body:R,formMethod:i.method||c,formEncType:i.encType||n,flushSync:i.flushSync})}else await t.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:v,body:R,formMethod:i.method||c,formEncType:i.encType||n,replace:i.replace,state:i.state,fromRouteId:a,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,a])}function jie(t,{relative:e}={}){let{basename:a}=le.useContext($m),r=le.useContext(kg);ml(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),l={...FT(t||".",{relative:e})},c=aA();if(t==null){l.search=c.search;let n=new URLSearchParams(l.search),v=n.getAll("index");if(v.some(x=>x==="")){n.delete("index"),v.filter(N=>N).forEach(N=>n.append("index",N));let x=n.toString();l.search=x?`?${x}`:""}}return(!t||t===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:bg([a,l.pathname])),VR(l)}function Gie(t,e={}){let a=le.useContext(U$);ml(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Y$("useViewTransitionState"),i=FT(t,{relative:e.relative});if(!a.isTransitioning)return!1;let l=Ng(a.currentLocation.pathname,r)||a.currentLocation.pathname,c=Ng(a.nextLocation.pathname,r)||a.nextLocation.pathname;return Ib(i.pathname,c)!=null||Ib(i.pathname,l)!=null}new TextEncoder;var i1=z$(),S6={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=function(t){const e=[];let a=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[a++]=i:i<2048?(e[a++]=i>>6|192,e[a++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[a++]=i>>18|240,e[a++]=i>>12&63|128,e[a++]=i>>6&63|128,e[a++]=i&63|128):(e[a++]=i>>12|224,e[a++]=i>>6&63|128,e[a++]=i&63|128)}return e},Zie=function(t){const e=[];let a=0,r=0;for(;a<t.length;){const i=t[a++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const l=t[a++];e[r++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=t[a++],c=t[a++],n=t[a++],v=((i&7)<<18|(l&63)<<12|(c&63)<<6|n&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const l=t[a++],c=t[a++];e[r++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},J$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const l=t[i],c=i+1<t.length,n=c?t[i+1]:0,v=i+2<t.length,R=v?t[i+2]:0,x=l>>2,N=(l&3)<<4|n>>4;let L=(n&15)<<2|R>>6,F=R&63;v||(F=64,c||(L=64)),r.push(a[x],a[N],a[L],a[F])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(X$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Zie(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const a=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const l=a[t.charAt(i++)],n=i<t.length?a[t.charAt(i)]:0;++i;const R=i<t.length?a[t.charAt(i)]:64;++i;const N=i<t.length?a[t.charAt(i)]:64;if(++i,l==null||n==null||R==null||N==null)throw new qie;const L=l<<2|n>>4;if(r.push(L),R!==64){const F=n<<4&240|R>>2;if(r.push(F),N!==64){const j=R<<6&192|N;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hie=function(t){const e=X$(t);return J$.encodeByteArray(e,!0)},Lb=function(t){return Hie(t).replace(/\./g,"")},Q$=function(t){try{return J$.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kie=()=>$ie().__FIREBASE_DEFAULTS__,Wie=()=>{if(typeof process>"u"||typeof S6>"u")return;const t=S6.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Yie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Q$(t[1]);return e&&JSON.parse(e)},S2=()=>{try{return Kie()||Wie()||Yie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eK=t=>{var e,a;return(a=(e=S2())===null||e===void 0?void 0:e.emulatorHosts)===null||a===void 0?void 0:a[t]},tK=t=>{const e=eK(t);if(!e)return;const a=e.lastIndexOf(":");if(a<=0||a+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(a+1),10);return e[0]==="["?[e.substring(1,a-1),r]:[e.substring(0,a),r]},aK=()=>{var t;return(t=S2())===null||t===void 0?void 0:t.config},rK=t=>{var e;return(e=S2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}wrapCallback(e){return(a,r)=>{a?this.reject(a):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(a):e(a,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lb(JSON.stringify(a)),Lb(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bd())}function Qie(){var t;const e=(t=S2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ese(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ase(){const t=bd();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rse(){try{return typeof indexedDB=="object"}catch{return!1}}function nse(){return new Promise((t,e)=>{try{let a=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),a||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{a=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(a){e(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ise="FirebaseError";class Km extends Error{constructor(e,a,r){super(a),this.code=e,this.customData=r,this.name=ise,Object.setPrototypeOf(this,Km.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kT.prototype.create)}}class kT{constructor(e,a,r){this.service=e,this.serviceName=a,this.errors=r}create(e,...a){const r=a[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?sse(l,r):"Error",n=`${this.serviceName}: ${c} (${i}).`;return new Km(i,n,r)}}function sse(t,e){return t.replace(ose,(a,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ose=/\{\$([^}]+)}/g;function lse(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fb(t,e){if(t===e)return!0;const a=Object.keys(t),r=Object.keys(e);for(const i of a){if(!r.includes(i))return!1;const l=t[i],c=e[i];if(b6(l)&&b6(c)){if(!Fb(l,c))return!1}else if(l!==c)return!1}for(const i of r)if(!a.includes(i))return!1;return!0}function b6(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){const e=[];for(const[a,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(a)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(a)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rR(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,l]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function nR(t){const e=t.indexOf("?");if(!e)return"";const a=t.indexOf("#",e);return t.substring(e,a>0?a:void 0)}function use(t,e){const a=new cse(t,e);return a.subscribe.bind(a)}class cse{constructor(e,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(a=>{a.next(e)})}error(e){this.forEachObserver(a=>{a.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,a,r){let i;if(e===void 0&&a===void 0&&r===void 0)throw new Error("Missing Observer.");dse(e,["next","error","complete"])?i=e:i={next:e,error:a,complete:r},i.next===void 0&&(i.next=yN),i.error===void 0&&(i.error=yN),i.complete===void 0&&(i.complete=yN);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,e)}sendOne(e,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{a(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dse(t,e){if(typeof t!="object"||t===null)return!1;for(const a of e)if(a in t&&typeof t[a]=="function")return!0;return!1}function yN(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){return t&&t._delegate?t._delegate:t}class Wy{constructor(e,a,r){this.name=e,this.instanceFactory=a,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(e,a){this.name=e,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const a=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(a)){const r=new Xie;if(this.instancesDeferred.set(a,r),this.isInitialized(a)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:a});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(e){var a;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(a=e==null?void 0:e.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pse(e))try{this.getOrInitializeService({instanceIdentifier:av})}catch{}for(const[a,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(a);try{const l=this.getOrInitializeService({instanceIdentifier:i});r.resolve(l)}catch{}}}}clearInstance(e=av){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...e.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=av){return this.instances.has(e)}getOptions(e=av){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:a={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:a});for(const[l,c]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(l);r===n&&c.resolve(i)}return i}onInit(e,a){var r;const i=this.normalizeInstanceIdentifier(a),l=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,a){const r=this.onInitCallbacks.get(a);if(r)for(const i of r)try{i(e,a)}catch{}}getOrInitializeService({instanceIdentifier:e,options:a={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fse(e),options:a}),this.instances.set(e,r),this.instancesOptions.set(e,a),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=av){return this.component?this.component.multipleInstances?e:av:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fse(t){return t===av?void 0:t}function pse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const a=this.getProvider(e.name);if(a.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);a.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const a=new hse(e,this);return this.providers.set(e,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _s;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_s||(_s={}));const gse={debug:_s.DEBUG,verbose:_s.VERBOSE,info:_s.INFO,warn:_s.WARN,error:_s.ERROR,silent:_s.SILENT},yse=_s.INFO,Ase={[_s.DEBUG]:"log",[_s.VERBOSE]:"log",[_s.INFO]:"info",[_s.WARN]:"warn",[_s.ERROR]:"error"},vse=(t,e,...a)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Ase[e];if(i)console[i](`[${r}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h3{constructor(e){this.name=e,this._logLevel=yse,this._logHandler=vse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _s))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_s.DEBUG,...e),this._logHandler(this,_s.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_s.VERBOSE,...e),this._logHandler(this,_s.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_s.INFO,...e),this._logHandler(this,_s.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_s.WARN,...e),this._logHandler(this,_s.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_s.ERROR,...e),this._logHandler(this,_s.ERROR,...e)}}const _se=(t,e)=>e.some(a=>t instanceof a);let x6,P6;function wse(){return x6||(x6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rse(){return P6||(P6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iK=new WeakMap,OD=new WeakMap,sK=new WeakMap,AN=new WeakMap,f3=new WeakMap;function Tse(t){const e=new Promise((a,r)=>{const i=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{a(Zy(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(a=>{a instanceof IDBCursor&&iK.set(a,t)}).catch(()=>{}),f3.set(e,t),e}function Cse(t){if(OD.has(t))return;const e=new Promise((a,r)=>{const i=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{a(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});OD.set(t,e)}let VD={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return OD.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sK.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Zy(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sse(t){VD=t(VD)}function bse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const r=t.call(vN(this),e,...a);return sK.set(r,e.sort?e.sort():[e]),Zy(r)}:Rse().includes(t)?function(...e){return t.apply(vN(this),e),Zy(iK.get(this))}:function(...e){return Zy(t.apply(vN(this),e))}}function xse(t){return typeof t=="function"?bse(t):(t instanceof IDBTransaction&&Cse(t),_se(t,wse())?new Proxy(t,VD):t)}function Zy(t){if(t instanceof IDBRequest)return Tse(t);if(AN.has(t))return AN.get(t);const e=xse(t);return e!==t&&(AN.set(t,e),f3.set(e,t)),e}const vN=t=>f3.get(t);function Pse(t,e,{blocked:a,upgrade:r,blocking:i,terminated:l}={}){const c=indexedDB.open(t,e),n=Zy(c);return r&&c.addEventListener("upgradeneeded",v=>{r(Zy(c.result),v.oldVersion,v.newVersion,Zy(c.transaction),v)}),a&&c.addEventListener("blocked",v=>a(v.oldVersion,v.newVersion,v)),n.then(v=>{l&&v.addEventListener("close",()=>l()),i&&v.addEventListener("versionchange",R=>i(R.oldVersion,R.newVersion,R))}).catch(()=>{}),n}const Ese=["get","getKey","getAll","getAllKeys","count"],Nse=["put","add","delete","clear"],_N=new Map;function E6(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_N.get(e))return _N.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,i=Nse.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ese.includes(a)))return;const l=async function(c,...n){const v=this.transaction(c,i?"readwrite":"readonly");let R=v.store;return r&&(R=R.index(n.shift())),(await Promise.all([R[a](...n),i&&v.done]))[0]};return _N.set(e,l),l}Sse(t=>({...t,get:(e,a,r)=>E6(e,a)||t.get(e,a,r),has:(e,a)=>!!E6(e,a)||t.has(e,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(Vse(a)){const r=a.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(a=>a).join(" ")}}function Vse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zD="@firebase/app",N6="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new h3("@firebase/app"),zse="@firebase/app-compat",Dse="@firebase/analytics-compat",Mse="@firebase/analytics",Ise="@firebase/app-check-compat",Lse="@firebase/app-check",Fse="@firebase/auth",kse="@firebase/auth-compat",Use="@firebase/database",Bse="@firebase/database-compat",jse="@firebase/functions",Gse="@firebase/functions-compat",Zse="@firebase/installations",qse="@firebase/installations-compat",Hse="@firebase/messaging",$se="@firebase/messaging-compat",Kse="@firebase/performance",Wse="@firebase/performance-compat",Yse="@firebase/remote-config",Xse="@firebase/remote-config-compat",Jse="@firebase/storage",Qse="@firebase/storage-compat",eoe="@firebase/firestore",toe="@firebase/firestore-compat",aoe="firebase",roe="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="[DEFAULT]",noe={[zD]:"fire-core",[zse]:"fire-core-compat",[Mse]:"fire-analytics",[Dse]:"fire-analytics-compat",[Lse]:"fire-app-check",[Ise]:"fire-app-check-compat",[Fse]:"fire-auth",[kse]:"fire-auth-compat",[Use]:"fire-rtdb",[Bse]:"fire-rtdb-compat",[jse]:"fire-fn",[Gse]:"fire-fn-compat",[Zse]:"fire-iid",[qse]:"fire-iid-compat",[Hse]:"fire-fcm",[$se]:"fire-fcm-compat",[Kse]:"fire-perf",[Wse]:"fire-perf-compat",[Yse]:"fire-rc",[Xse]:"fire-rc-compat",[Jse]:"fire-gcs",[Qse]:"fire-gcs-compat",[eoe]:"fire-fst",[toe]:"fire-fst-compat","fire-js":"fire-js",[aoe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Map,MD=new Map;function ioe(t,e){try{t.container.addComponent(e)}catch(a){Sv.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,a)}}function bv(t){const e=t.name;if(MD.has(e))return Sv.debug(`There were multiple attempts to register component ${e}.`),!1;MD.set(e,t);for(const a of kb.values())ioe(a,t);return!0}function b2(t,e){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const soe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},qy=new kT("app","Firebase",soe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ooe{constructor(e,a,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qy.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=roe;function oK(t,e={}){let a=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:DD,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qy.create("bad-app-name",{appName:String(i)});if(a||(a=aK()),!a)throw qy.create("no-options");const l=kb.get(i);if(l){if(Fb(a,l.options)&&Fb(r,l.config))return l;throw qy.create("duplicate-app",{appName:i})}const c=new mse(i);for(const v of MD.values())c.addComponent(v);const n=new ooe(a,r,c);return kb.set(i,n),n}function p3(t=DD){const e=kb.get(t);if(!e&&t===DD&&aK())return oK();if(!e)throw qy.create("no-app",{appName:t});return e}function Im(t,e,a){var r;let i=(r=noe[t])!==null&&r!==void 0?r:t;a&&(i+=`-${a}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const n=[`Unable to register library "${i}" with version "${e}":`];l&&n.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&n.push("and"),c&&n.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sv.warn(n.join(" "));return}bv(new Wy(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const loe="firebase-heartbeat-database",uoe=1,zR="firebase-heartbeat-store";let wN=null;function lK(){return wN||(wN=Pse(loe,uoe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(zR)}}}).catch(t=>{throw qy.create("idb-open",{originalErrorMessage:t.message})})),wN}async function coe(t){try{return await(await lK()).transaction(zR).objectStore(zR).get(uK(t))}catch(e){if(e instanceof Km)Sv.warn(e.message);else{const a=qy.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sv.warn(a.message)}}}async function O6(t,e){try{const r=(await lK()).transaction(zR,"readwrite");await r.objectStore(zR).put(e,uK(t)),await r.done}catch(a){if(a instanceof Km)Sv.warn(a.message);else{const r=qy.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});Sv.warn(r.message)}}}function uK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const doe=1024,hoe=30*24*60*60*1e3;class foe{constructor(e){this.container=e,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new moe(a),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=V6();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=hoe}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=V6(),{heartbeatsToSend:a,unsentEntries:r}=poe(this._heartbeatsCache.heartbeats),i=Lb(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function V6(){return new Date().toISOString().substring(0,10)}function poe(t,e=doe){const a=[];let r=t.slice();for(const i of t){const l=a.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),z6(a)>e){l.dates.pop();break}}else if(a.push({agent:i.agent,dates:[i.date]}),z6(a)>e){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class moe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rse()?nse().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await coe(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return O6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return O6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function z6(t){return Lb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function goe(t){bv(new Wy("platform-logger",e=>new Ose(e),"PRIVATE")),bv(new Wy("heartbeat",e=>new foe(e),"PRIVATE")),Im(zD,N6,t),Im(zD,N6,"esm2017"),Im("fire-js","")}goe("");var yoe="firebase",Aoe="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Im(yoe,Aoe,"app");function m3(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(a[r[i]]=t[r[i]]);return a}function cK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const voe=cK,dK=new kT("auth","Firebase",cK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new h3("@firebase/auth");function _oe(t,...e){Ub.logLevel<=_s.WARN&&Ub.warn(`Auth (${kv}): ${t}`,...e)}function hb(t,...e){Ub.logLevel<=_s.ERROR&&Ub.error(`Auth (${kv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t,...e){throw g3(t,...e)}function Lm(t,...e){return g3(t,...e)}function woe(t,e,a){const r=Object.assign(Object.assign({},voe()),{[e]:a});return new kT("auth","Firebase",r).create(e,{appName:t.name})}function g3(t,...e){if(typeof t!="string"){const a=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(a,...r)}return dK.create(t,...e)}function ai(t,e,...a){if(!t)throw g3(e,...a)}function _g(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hb(e),new Error(e)}function Og(t,e){t||_g(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Roe(){return D6()==="http:"||D6()==="https:"}function D6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Toe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Roe()||ese()||"connection"in navigator)?navigator.onLine:!0}function Coe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,a){this.shortDelay=e,this.longDelay=a,Og(a>e,"Short delay should be less than long delay!"),this.isMobile=Jie()||tse()}get(){return Toe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t,e){Og(t.emulator,"Emulator should always be set here");const{url:a}=t.emulator;return e?`${a}${e.startsWith("/")?e.slice(1):e}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{static initialize(e,a,r){this.fetchImpl=e,a&&(this.headersImpl=a),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;_g("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;_g("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;_g("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Soe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const boe=new BT(3e4,6e4);function s1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function o1(t,e,a,r,i={}){return fK(t,i,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const n=UT(Object.assign({key:t.config.apiKey},c)).slice(1),v=await t._getAdditionalHeaders();return v["Content-Type"]="application/json",t.languageCode&&(v["X-Firebase-Locale"]=t.languageCode),hK.fetch()(pK(t,t.config.apiHost,a,n),Object.assign({method:e,headers:v,referrerPolicy:"no-referrer"},l))})}async function fK(t,e,a){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Soe),e);try{const i=new xoe(t),l=await Promise.race([a(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw OS(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const n=l.ok?c.errorMessage:c.error.message,[v,R]=n.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw OS(t,"credential-already-in-use",c);if(v==="EMAIL_EXISTS")throw OS(t,"email-already-in-use",c);if(v==="USER_DISABLED")throw OS(t,"user-disabled",c);const x=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(R)throw woe(t,x,R);Hp(t,x)}}catch(i){if(i instanceof Km)throw i;Hp(t,"network-request-failed",{message:String(i)})}}async function jT(t,e,a,r,i={}){const l=await o1(t,e,a,r,i);return"mfaPendingCredential"in l&&Hp(t,"multi-factor-auth-required",{_serverResponse:l}),l}function pK(t,e,a,r){const i=`${e}${a}?${r}`;return t.config.emulator?y3(t.config,i):`${t.config.apiScheme}://${i}`}class xoe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((a,r)=>{this.timer=setTimeout(()=>r(Lm(this.auth,"network-request-failed")),boe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function OS(t,e,a){const r={appName:t.name};a.email&&(r.email=a.email),a.phoneNumber&&(r.phoneNumber=a.phoneNumber);const i=Lm(t,e,r);return i.customData._tokenResponse=a,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Poe(t,e){return o1(t,"POST","/v1/accounts:delete",e)}async function Eoe(t,e){return o1(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Noe(t,e=!1){const a=gl(t),r=await a.getIdToken(e),i=A3(r);ai(i&&i.exp&&i.auth_time&&i.iat,a.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:r,authTime:pR(RN(i.auth_time)),issuedAtTime:pR(RN(i.iat)),expirationTime:pR(RN(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function RN(t){return Number(t)*1e3}function A3(t){const[e,a,r]=t.split(".");if(e===void 0||a===void 0||r===void 0)return hb("JWT malformed, contained fewer than 3 sections"),null;try{const i=Q$(a);return i?JSON.parse(i):(hb("Failed to decode base64 JWT payload"),null)}catch(i){return hb("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ooe(t){const e=A3(t);return ai(e,"internal-error"),ai(typeof e.exp<"u","internal-error"),ai(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e,a=!1){if(a)return e;try{return await e}catch(r){throw r instanceof Km&&Voe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Voe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var a;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const a=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e,a){this.createdAt=e,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=pR(this.lastLoginAt),this.creationTime=pR(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(t){var e;const a=t.auth,r=await t.getIdToken(),i=await DR(t,Eoe(a,{idToken:r}));ai(i==null?void 0:i.users.length,a,"internal-error");const l=i.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Ioe(l.providerUserInfo):[],n=Moe(t.providerData,c),v=t.isAnonymous,R=!(t.email&&l.passwordHash)&&!(n!=null&&n.length),x=v?R:!1,N={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:n,metadata:new mK(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(t,N)}async function Doe(t){const e=gl(t);await Bb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Moe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ioe(t){return t.map(e=>{var{providerId:a}=e,r=m3(e,["providerId"]);return{providerId:a,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Loe(t,e){const a=await fK(t,{},async()=>{const r=UT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=t.config,c=pK(t,i,"/v1/token",`key=${l}`),n=await t._getAdditionalHeaders();return n["Content-Type"]="application/x-www-form-urlencoded",hK.fetch()(c,{method:"POST",headers:n,body:r})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ai(e.idToken,"internal-error"),ai(typeof e.idToken<"u","internal-error"),ai(typeof e.refreshToken<"u","internal-error");const a="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ooe(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,a)}async getToken(e,a=!1){return ai(!this.accessToken||this.refreshToken,e,"user-token-expired"),!a&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,a){const{accessToken:r,refreshToken:i,expiresIn:l}=await Loe(e,a);this.updateTokensAndExpiration(r,i,Number(l))}updateTokensAndExpiration(e,a,r){this.refreshToken=a||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,a){const{refreshToken:r,accessToken:i,expirationTime:l}=a,c=new MR;return r&&(ai(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ai(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(ai(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new MR,this.toJSON())}_performRefresh(){return _g("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t,e){ai(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Av{constructor(e){var{uid:a,auth:r,stsTokenManager:i}=e,l=m3(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zoe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new mK(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const a=await DR(this,this.stsTokenManager.getToken(this.auth,e));return ai(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(e){return Noe(this,e)}reload(){return Doe(this)}_assign(e){this!==e&&(ai(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(a=>Object.assign({},a)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const a=new Av(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(e){ai(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,a=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),a&&await Bb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await DR(this,Poe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,a){var r,i,l,c,n,v,R,x;const N=(r=a.displayName)!==null&&r!==void 0?r:void 0,L=(i=a.email)!==null&&i!==void 0?i:void 0,F=(l=a.phoneNumber)!==null&&l!==void 0?l:void 0,j=(c=a.photoURL)!==null&&c!==void 0?c:void 0,H=(n=a.tenantId)!==null&&n!==void 0?n:void 0,q=(v=a._redirectEventId)!==null&&v!==void 0?v:void 0,W=(R=a.createdAt)!==null&&R!==void 0?R:void 0,ee=(x=a.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:oe,emailVerified:fe,isAnonymous:se,providerData:me,stsTokenManager:ge}=a;ai(oe&&ge,e,"internal-error");const Re=MR.fromJSON(this.name,ge);ai(typeof oe=="string",e,"internal-error"),Ty(N,e.name),Ty(L,e.name),ai(typeof fe=="boolean",e,"internal-error"),ai(typeof se=="boolean",e,"internal-error"),Ty(F,e.name),Ty(j,e.name),Ty(H,e.name),Ty(q,e.name),Ty(W,e.name),Ty(ee,e.name);const we=new Av({uid:oe,auth:e,email:L,emailVerified:fe,displayName:N,isAnonymous:se,photoURL:j,phoneNumber:F,tenantId:H,stsTokenManager:Re,createdAt:W,lastLoginAt:ee});return me&&Array.isArray(me)&&(we.providerData=me.map(Ee=>Object.assign({},Ee))),q&&(we._redirectEventId=q),we}static async _fromIdTokenResponse(e,a,r=!1){const i=new MR;i.updateFromServerResponse(a);const l=new Av({uid:a.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bb(l),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=new Map;function wg(t){Og(t instanceof Function,"Expected a class definition");let e=M6.get(t);return e?(Og(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M6.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,a){this.storage[e]=a}async _get(e){const a=this.storage[e];return a===void 0?null:a}async _remove(e){delete this.storage[e]}_addListener(e,a){}_removeListener(e,a){}}gK.type="NONE";const I6=gK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t,e,a){return`firebase:${t}:${e}:${a}`}class n_{constructor(e,a,r){this.persistence=e,this.auth=a,this.userKey=r;const{config:i,name:l}=this.auth;this.fullUserKey=fb(this.userKey,i.apiKey,l),this.fullPersistenceKey=fb("persistence",i.apiKey,l),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Av._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,a,r="authUser"){if(!a.length)return new n_(wg(I6),e,r);const i=(await Promise.all(a.map(async R=>{if(await R._isAvailable())return R}))).filter(R=>R);let l=i[0]||wg(I6);const c=fb(r,e.config.apiKey,e.name);let n=null;for(const R of a)try{const x=await R._get(c);if(x){const N=Av._fromJSON(e,x);R!==l&&(n=N),l=R;break}}catch{}const v=i.filter(R=>R._shouldAllowMigration);return!l._shouldAllowMigration||!v.length?new n_(l,e,r):(l=v[0],n&&await l._set(c,n.toJSON()),await Promise.all(a.map(async R=>{if(R!==l)try{await R._remove(c)}catch{}})),new n_(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vK(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wK(e))return"Blackberry";if(RK(e))return"Webos";if(v3(e))return"Safari";if((e.includes("chrome/")||AK(e))&&!e.includes("edge/"))return"Chrome";if(_K(e))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(a);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yK(t=bd()){return/firefox\//i.test(t)}function v3(t=bd()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AK(t=bd()){return/crios\//i.test(t)}function vK(t=bd()){return/iemobile/i.test(t)}function _K(t=bd()){return/android/i.test(t)}function wK(t=bd()){return/blackberry/i.test(t)}function RK(t=bd()){return/webos/i.test(t)}function x2(t=bd()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Foe(t=bd()){var e;return x2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function koe(){return ase()&&document.documentMode===10}function TK(t=bd()){return x2(t)||_K(t)||RK(t)||wK(t)||/windows phone/i.test(t)||vK(t)}function Uoe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CK(t,e=[]){let a;switch(t){case"Browser":a=L6(bd());break;case"Worker":a=`${L6(bd())}-${t}`;break;default:a=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${a}/JsCore/${kv}/${r}`}async function SK(t,e){return o1(t,"GET","/v2/recaptchaConfig",s1(t,e))}function F6(t){return t!==void 0&&t.enterprise!==void 0}class bK{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(a=>a.provider==="EMAIL_PASSWORD_PROVIDER"&&a.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Boe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function xK(t){return new Promise((e,a)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const l=Lm("internal-error");l.customData=i,a(l)},r.type="text/javascript",r.charset="UTF-8",Boe().appendChild(r)})}function joe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Goe="https://www.google.com/recaptcha/enterprise.js?render=",Zoe="recaptcha-enterprise",qoe="NO_RECAPTCHA";class PK{constructor(e){this.type=Zoe,this.auth=l1(e)}async verify(e="verify",a=!1){async function r(l){if(!a){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,n)=>{SK(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)n(new Error("recaptcha Enterprise site key undefined"));else{const R=new bK(v);return l.tenantId==null?l._agentRecaptchaConfig=R:l._tenantRecaptchaConfigs[l.tenantId]=R,c(R.siteKey)}}).catch(v=>{n(v)})})}function i(l,c,n){const v=window.grecaptcha;F6(v)?v.enterprise.ready(()=>{v.enterprise.execute(l,{action:e}).then(R=>{c(R)}).catch(()=>{c(qoe)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,c)=>{r(this.auth).then(n=>{if(!a&&F6(window.grecaptcha))i(n,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}xK(Goe+n).then(()=>{i(n,l,c)}).catch(v=>{c(v)})}}).catch(n=>{c(n)})})}}async function jb(t,e,a,r=!1){const i=new PK(t);let l;try{l=await i.verify(a)}catch{l=await i.verify(a,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,a){const r=l=>new Promise((c,n)=>{try{const v=e(l);c(v)}catch(v){n(v)}});r.onAbort=a,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const a=[];try{for(const r of this.queue)await r(e),r.onAbort&&a.push(r.onAbort)}catch(r){a.reverse();for(const i of a)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $oe{constructor(e,a,r,i){this.app=e,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k6(this),this.idTokenSubscription=new k6(this),this.beforeStateQueue=new Hoe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,a){return a&&(this._popupRedirectResolver=wg(a)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await n_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var a;const r=await this.assertedPersistence.getCurrentUser();let i=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,n=i==null?void 0:i._redirectEventId,v=await this.tryRedirectSignIn(e);(!c||c===n)&&(v!=null&&v.user)&&(i=v.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ai(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(e){try{await Bb(e)}catch(a){if((a==null?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Coe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const a=e?gl(e):null;return a&&ai(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(e,a=!1){if(!this._deleted)return e&&ai(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(wg(e))})}async initializeRecaptchaConfig(){const e=await SK(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new bK(e);this.tenantId==null?this._agentRecaptchaConfig=a:this._tenantRecaptchaConfigs[this.tenantId]=a,a.emailPasswordEnabled&&new PK(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kT("auth","Firebase",e())}onAuthStateChanged(e,a,r){return this.registerStateListener(this.authStateSubscription,e,a,r)}beforeAuthStateChanged(e,a){return this.beforeStateQueue.pushCallback(e,a)}onIdTokenChanged(e,a,r){return this.registerStateListener(this.idTokenSubscription,e,a,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,a){const r=await this.getOrInitRedirectPersistenceManager(a);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const a=e&&wg(e)||this._popupRedirectResolver;ai(a,this,"argument-error"),this.redirectPersistenceManager=await n_.create(this,[wg(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var a,r;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(a=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,a,r,i){if(this._deleted)return()=>{};const l=typeof a=="function"?a:a.next.bind(a),c=this._isInitialized?Promise.resolve():this._initializationPromise;return ai(c,this,"internal-error"),c.then(()=>l(this.currentUser)),typeof a=="function"?e.addObserver(a,r,i):e.addObserver(a)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ai(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(a["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(a["X-Firebase-AppCheck"]=i),a}async _getAppCheckToken(){var e;const a=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return a!=null&&a.error&&_oe(`Error while retrieving App Check token: ${a.error}`),a==null?void 0:a.token}}function l1(t){return gl(t)}class k6{constructor(e){this.auth=e,this.observer=null,this.addObserver=use(a=>this.observer=a)}get next(){return ai(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Koe(t,e){const a=b2(t,"auth");if(a.isInitialized()){const i=a.getImmediate(),l=a.getOptions();if(Fb(l,e??{}))return i;Hp(i,"already-initialized")}return a.initialize({options:e})}function Woe(t,e){const a=(e==null?void 0:e.persistence)||[],r=(Array.isArray(a)?a:[a]).map(wg);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Yoe(t,e,a){const r=l1(t);ai(r._canInitEmulator,r,"emulator-config-failed"),ai(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,l=EK(e),{host:c,port:n}=Xoe(e),v=n===null?"":`:${n}`;r.config.emulator={url:`${l}//${c}${v}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:n,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})}),Joe()}function EK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Xoe(t){const e=EK(t),a=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!a)return{host:"",port:null};const r=a[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const l=i[1];return{host:l,port:U6(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:U6(c)}}}function U6(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Joe(){function t(){const e=document.createElement("p"),a=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,a){this.providerId=e,this.signInMethod=a}toJSON(){return _g("not implemented")}_getIdTokenResponse(e){return _g("not implemented")}_linkToIdToken(e,a){return _g("not implemented")}_getReauthenticationResolver(e){return _g("not implemented")}}async function Qoe(t,e){return o1(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(t,e){return jT(t,"POST","/v1/accounts:signInWithPassword",s1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ele(t,e){return jT(t,"POST","/v1/accounts:signInWithEmailLink",s1(t,e))}async function tle(t,e){return jT(t,"POST","/v1/accounts:signInWithEmailLink",s1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR extends _3{constructor(e,a,r,i=null){super("password",r),this._email=e,this._password=a,this._tenantId=i}static _fromEmailAndPassword(e,a){return new IR(e,a,"password")}static _fromEmailAndCode(e,a,r=null){return new IR(e,a,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e;if(a!=null&&a.email&&(a!=null&&a.password)){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(e){var a;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.emailPasswordEnabled){const i=await jb(e,r,"signInWithPassword");return TN(e,i)}else return TN(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await jb(e,r,"signInWithPassword");return TN(e,l)}else return Promise.reject(i)});case"emailLink":return ele(e,{email:this._email,oobCode:this._password});default:Hp(e,"internal-error")}}async _linkToIdToken(e,a){switch(this.signInMethod){case"password":return Qoe(e,{idToken:a,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return tle(e,{idToken:a,email:this._email,oobCode:this._password});default:Hp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(t,e){return jT(t,"POST","/v1/accounts:signInWithIdp",s1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ale="http://localhost";class xv extends _3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const a=new xv(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(a.idToken=e.idToken),e.accessToken&&(a.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(a.nonce=e.nonce),e.pendingToken&&(a.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(a.accessToken=e.oauthToken,a.secret=e.oauthTokenSecret):Hp("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,l=m3(a,["providerId","signInMethod"]);if(!r||!i)return null;const c=new xv(r,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const a=this.buildRequest();return i_(e,a)}_linkToIdToken(e,a){const r=this.buildRequest();return r.idToken=a,i_(e,r)}_getReauthenticationResolver(e){const a=this.buildRequest();return a.autoCreate=!1,i_(e,a)}buildRequest(){const e={requestUri:ale,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),e.postBody=UT(a)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rle(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nle(t){const e=rR(nR(t)).link,a=e?rR(nR(e)).deep_link_id:null,r=rR(nR(t)).deep_link_id;return(r?rR(nR(r)).link:null)||r||a||e||t}class w3{constructor(e){var a,r,i,l,c,n;const v=rR(nR(e)),R=(a=v.apiKey)!==null&&a!==void 0?a:null,x=(r=v.oobCode)!==null&&r!==void 0?r:null,N=rle((i=v.mode)!==null&&i!==void 0?i:null);ai(R&&x&&N,"argument-error"),this.apiKey=R,this.operation=N,this.code=x,this.continueUrl=(l=v.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=v.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(n=v.tenantId)!==null&&n!==void 0?n:null}static parseLink(e){const a=nle(e);try{return new w3(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.providerId=u1.PROVIDER_ID}static credential(e,a){return IR._fromEmailAndPassword(e,a)}static credentialWithLink(e,a){const r=w3.parseLink(a);return ai(r,"argument-error"),IR._fromEmailAndCode(e,r.code,r.tenantId)}}u1.PROVIDER_ID="password";u1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";u1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT extends NK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends GT{constructor(){super("facebook.com")}static credential(e){return xv._fromParams({providerId:Vy.PROVIDER_ID,signInMethod:Vy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vy.credentialFromTaggedObject(e)}static credentialFromError(e){return Vy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vy.credential(e.oauthAccessToken)}catch{return null}}}Vy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends GT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,a){return xv._fromParams({providerId:zy.PROVIDER_ID,signInMethod:zy.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:a})}static credentialFromResult(e){return zy.credentialFromTaggedObject(e)}static credentialFromError(e){return zy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:a,oauthAccessToken:r}=e;if(!a&&!r)return null;try{return zy.credential(a,r)}catch{return null}}}zy.GOOGLE_SIGN_IN_METHOD="google.com";zy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends GT{constructor(){super("github.com")}static credential(e){return xv._fromParams({providerId:Dy.PROVIDER_ID,signInMethod:Dy.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dy.credentialFromTaggedObject(e)}static credentialFromError(e){return Dy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dy.credential(e.oauthAccessToken)}catch{return null}}}Dy.GITHUB_SIGN_IN_METHOD="github.com";Dy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends GT{constructor(){super("twitter.com")}static credential(e,a){return xv._fromParams({providerId:My.PROVIDER_ID,signInMethod:My.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:a})}static credentialFromResult(e){return My.credentialFromTaggedObject(e)}static credentialFromError(e){return My.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:a,oauthTokenSecret:r}=e;if(!a||!r)return null;try{return My.credential(a,r)}catch{return null}}}My.TWITTER_SIGN_IN_METHOD="twitter.com";My.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e){return jT(t,"POST","/v1/accounts:signUp",s1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,a,r,i=!1){const l=await Av._fromIdTokenResponse(e,r,i),c=B6(r);return new Pv({user:l,providerId:c,_tokenResponse:r,operationType:a})}static async _forOperation(e,a,r){await e._updateTokensIfNecessary(r,!0);const i=B6(r);return new Pv({user:e,providerId:i,_tokenResponse:r,operationType:a})}}function B6(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Km{constructor(e,a,r,i){var l;super(a.code,a.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gb.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:a.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,a,r,i){return new Gb(e,a,r,i)}}function OK(t,e,a,r){return(e==="reauthenticate"?a._getReauthenticationResolver(t):a._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Gb._fromErrorAndOperation(t,l,e,r):l})}async function ile(t,e,a=!1){const r=await DR(t,e._linkToIdToken(t.auth,await t.getIdToken()),a);return Pv._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sle(t,e,a=!1){const{auth:r}=t,i="reauthenticate";try{const l=await DR(t,OK(r,i,e,t),a);ai(l.idToken,r,"internal-error");const c=A3(l.idToken);ai(c,r,"internal-error");const{sub:n}=c;return ai(t.uid===n,r,"user-mismatch"),Pv._forOperation(t,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Hp(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VK(t,e,a=!1){const r="signIn",i=await OK(t,r,e),l=await Pv._fromIdTokenResponse(t,r,i);return a||await t._updateCurrentUser(l.user),l}async function ole(t,e){return VK(l1(t),e)}async function lle(t,e,a){var r;const i=l1(t),l={returnSecureToken:!0,email:e,password:a,clientType:"CLIENT_TYPE_WEB"};let c;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const R=await jb(i,l,"signUpPassword");c=CN(i,R)}else c=CN(i,l).catch(async R=>{if(R.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const x=await jb(i,l,"signUpPassword");return CN(i,x)}else return Promise.reject(R)});const n=await c.catch(R=>Promise.reject(R)),v=await Pv._fromIdTokenResponse(i,"signIn",n);return await i._updateCurrentUser(v.user),v}function ule(t,e,a){return ole(gl(t),u1.credential(e,a))}function cle(t,e,a,r){return gl(t).onIdTokenChanged(e,a,r)}function dle(t,e,a){return gl(t).beforeAuthStateChanged(e,a)}const Zb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(e,a){this.storageRetriever=e,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(Zb,"1"),this.storage.removeItem(Zb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,a){return this.storage.setItem(e,JSON.stringify(a)),Promise.resolve()}_get(e){const a=this.storage.getItem(e);return Promise.resolve(a?JSON.parse(a):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hle(){const t=bd();return v3(t)||x2(t)}const fle=1e3,ple=10;class DK extends zK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,a)=>this.onStorageEvent(e,a),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=hle()&&Uoe(),this.fallbackToPolling=TK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const a of Object.keys(this.listeners)){const r=this.storage.getItem(a),i=this.localCache[a];r!==i&&e(a,i,r)}}onStorageEvent(e,a=!1){if(!e.key){this.forAllChangedKeys((c,n,v)=>{this.notifyListeners(c,v)});return}const r=e.key;if(a?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!a)return}const i=()=>{const c=this.storage.getItem(r);!a&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);koe()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ple):i()}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,a,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:a,newValue:r}),!0)})},fle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,a){await super._set(e,a),this.localCache[e]=JSON.stringify(a)}async _get(e){const a=await super._get(e);return this.localCache[e]=JSON.stringify(a),a}async _remove(e){await super._remove(e),delete this.localCache[e]}}DK.type="LOCAL";const mle=DK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK extends zK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,a){}_removeListener(e,a){}}MK.type="SESSION";const IK=MK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gle(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const a=this.receivers.find(i=>i.isListeningto(e));if(a)return a;const r=new P2(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const a=e,{eventId:r,eventType:i,data:l}=a.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;a.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const n=Array.from(c).map(async R=>R(a.origin,l)),v=await gle(n);a.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:v})}_subscribe(e,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(a)}_unsubscribe(e,a){this.handlersMap[e]&&a&&this.handlersMap[e].delete(a),(!a||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}P2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t="",e=10){let a="";for(let r=0;r<e;r++)a+=Math.floor(Math.random()*10);return t+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yle{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,a,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((n,v)=>{const R=R3("",20);i.port1.start();const x=setTimeout(()=>{v(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(N){const L=N;if(L.data.eventId===R)switch(L.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),n(L.data.response);break;default:clearTimeout(x),clearTimeout(l),v(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:R,data:a},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(){return window}function Ale(t){Fm().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LK(){return typeof Fm().WorkerGlobalScope<"u"&&typeof Fm().importScripts=="function"}async function vle(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _le(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wle(){return LK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FK="firebaseLocalStorageDb",Rle=1,qb="firebaseLocalStorage",kK="fbase_key";class ZT{constructor(e){this.request=e}toPromise(){return new Promise((e,a)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function E2(t,e){return t.transaction([qb],e?"readwrite":"readonly").objectStore(qb)}function Tle(){const t=indexedDB.deleteDatabase(FK);return new ZT(t).toPromise()}function LD(){const t=indexedDB.open(FK,Rle);return new Promise((e,a)=>{t.addEventListener("error",()=>{a(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qb,{keyPath:kK})}catch(i){a(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qb)?e(r):(r.close(),await Tle(),e(await LD()))})})}async function j6(t,e,a){const r=E2(t,!0).put({[kK]:e,value:a});return new ZT(r).toPromise()}async function Cle(t,e){const a=E2(t,!1).get(e),r=await new ZT(a).toPromise();return r===void 0?null:r.value}function G6(t,e){const a=E2(t,!0).delete(e);return new ZT(a).toPromise()}const Sle=800,ble=3;class UK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LD(),this.db)}async _withRetries(e){let a=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(a++>ble)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=P2._getInstance(wle()),this.receiver._subscribe("keyChanged",async(e,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(e,a)=>["keyChanged"])}async initializeSender(){var e,a;if(this.activeServiceWorker=await vle(),!this.activeServiceWorker)return;this.sender=new yle(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((a=r[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_le()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await LD();return await j6(e,Zb,"1"),await G6(e,Zb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,a){return this._withPendingWrite(async()=>(await this._withRetries(r=>j6(r,e,a)),this.localCache[e]=a,this.notifyServiceWorker(e)))}async _get(e){const a=await this._withRetries(r=>Cle(r,e));return this.localCache[e]=a,a}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(a=>G6(a,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=E2(i,!1).getAll();return new ZT(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const a=[],r=new Set;for(const{fbase_key:i,value:l}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),a.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),a.push(i));return a}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Sle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UK.type="LOCAL";const xle=UK;new BT(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ple(t,e){return e?wg(e):(ai(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3 extends _3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return i_(e,this._buildIdpRequest())}_linkToIdToken(e,a){return i_(e,this._buildIdpRequest(a))}_getReauthenticationResolver(e){return i_(e,this._buildIdpRequest())}_buildIdpRequest(e){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(a.idToken=e),a}}function Ele(t){return VK(t.auth,new T3(t),t.bypassAuthState)}function Nle(t){const{auth:e,user:a}=t;return ai(a,e,"internal-error"),sle(a,new T3(t),t.bypassAuthState)}async function Ole(t){const{auth:e,user:a}=t;return ai(a,e,"internal-error"),ile(a,new T3(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(e,a,r,i,l=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(e,a)=>{this.pendingPromise={resolve:e,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:a,sessionId:r,postBody:i,tenantId:l,error:c,type:n}=e;if(c){this.reject(c);return}const v={auth:this.auth,requestUri:a,sessionId:r,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(n)(v))}catch(R){this.reject(R)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ele;case"linkViaPopup":case"linkViaRedirect":return Ole;case"reauthViaPopup":case"reauthViaRedirect":return Nle;default:Hp(this.auth,"internal-error")}}resolve(e){Og(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Og(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vle=new BT(2e3,1e4);class K0 extends BK{constructor(e,a,r,i,l){super(e,a,i,l),this.provider=r,this.authWindow=null,this.pollId=null,K0.currentPopupAction&&K0.currentPopupAction.cancel(),K0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ai(e,this.auth,"internal-error"),e}async onExecution(){Og(this.filter.length===1,"Popup operations only handle one event");const e=R3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(Lm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,K0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var a,r;if(!((r=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lm(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Vle.get())};e()}}K0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zle="pendingRedirect",pb=new Map;class Dle extends BK{constructor(e,a,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,r),this.eventId=null}async execute(){let e=pb.get(this.auth._key());if(!e){try{const r=await Mle(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(a){e=()=>Promise.reject(a)}pb.set(this.auth._key(),e)}return this.bypassAuthState||pb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const a=await this.auth._redirectUserForId(e.eventId);if(a)return this.user=a,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mle(t,e){const a=Fle(e),r=Lle(t);if(!await r._isAvailable())return!1;const i=await r._get(a)==="true";return await r._remove(a),i}function Ile(t,e){pb.set(t._key(),e)}function Lle(t){return wg(t._redirectPersistence)}function Fle(t){return fb(zle,t.config.apiKey,t.name)}async function kle(t,e,a=!1){const r=l1(t),i=Ple(r,e),c=await new Dle(r,i,a).execute();return c&&!a&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ule=10*60*1e3;class Ble{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let a=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(a=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jle(e)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=e,a=!0)),a}sendToConsumer(e,a){var r;if(e.error&&!jK(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";a.onError(Lm(this.auth,i))}else a.onAuthEvent(e)}isEventForConsumer(e,a){const r=a.eventId===null||!!e.eventId&&e.eventId===a.eventId;return a.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ule&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z6(e))}saveEventToCache(e){this.cachedEventUids.add(Z6(e)),this.lastProcessedEventTime=Date.now()}}function Z6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jK({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jle(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jK(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gle(t,e={}){return o1(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qle=/^https?/;async function Hle(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gle(t);for(const a of e)try{if($le(a))return}catch{}Hp(t,"unauthorized-domain")}function $le(t){const e=ID(),{protocol:a,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?a==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):a==="chrome-extension:"&&c.hostname===r}if(!qle.test(a))return!1;if(Zle.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kle=new BT(3e4,6e4);function q6(){const t=Fm().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let a=0;a<t.CP.length;a++)t.CP[a]=null}}function Wle(t){return new Promise((e,a)=>{var r,i,l;function c(){q6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q6(),a(Lm(t,"network-request-failed"))},timeout:Kle.get()})}if(!((i=(r=Fm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=Fm().gapi)===null||l===void 0)&&l.load)c();else{const n=joe("iframefcb");return Fm()[n]=()=>{gapi.load?c():a(Lm(t,"network-request-failed"))},xK(`https://apis.google.com/js/api.js?onload=${n}`).catch(v=>a(v))}}).catch(e=>{throw mb=null,e})}let mb=null;function Yle(t){return mb=mb||Wle(t),mb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xle=new BT(5e3,15e3),Jle="__/auth/iframe",Qle="emulator/auth/iframe",eue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aue(t){const e=t.config;ai(e.authDomain,t,"auth-domain-config-required");const a=e.emulator?y3(e,Qle):`https://${t.config.authDomain}/${Jle}`,r={apiKey:e.apiKey,appName:t.name,v:kv},i=tue.get(t.config.apiHost);i&&(r.eid=i);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${a}?${UT(r).slice(1)}`}async function rue(t){const e=await Yle(t),a=Fm().gapi;return ai(a,t,"internal-error"),e.open({where:document.body,url:aue(t),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eue,dontclear:!0},r=>new Promise(async(i,l)=>{await r.restyle({setHideOnLeave:!1});const c=Lm(t,"network-request-failed"),n=Fm().setTimeout(()=>{l(c)},Xle.get());function v(){Fm().clearTimeout(n),i(r)}r.ping(v).then(v,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iue=500,sue=600,oue="_blank",lue="http://localhost";class H6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uue(t,e,a,r=iue,i=sue){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let n="";const v=Object.assign(Object.assign({},nue),{width:r.toString(),height:i.toString(),top:l,left:c}),R=bd().toLowerCase();a&&(n=AK(R)?oue:a),yK(R)&&(e=e||lue,v.scrollbars="yes");const x=Object.entries(v).reduce((L,[F,j])=>`${L}${F}=${j},`,"");if(Foe(R)&&n!=="_self")return cue(e||"",n),new H6(null);const N=window.open(e||"",n,x);ai(N,t,"popup-blocked");try{N.focus()}catch{}return new H6(N)}function cue(t,e){const a=document.createElement("a");a.href=t,a.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const due="__/auth/handler",hue="emulator/auth/handler",fue=encodeURIComponent("fac");async function $6(t,e,a,r,i,l){ai(t.config.authDomain,t,"auth-domain-config-required"),ai(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:a,redirectUrl:r,v:kv,eventId:i};if(e instanceof NK){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",lse(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,N]of Object.entries({}))c[x]=N}if(e instanceof GT){const x=e.getScopes().filter(N=>N!=="");x.length>0&&(c.scopes=x.join(","))}t.tenantId&&(c.tid=t.tenantId);const n=c;for(const x of Object.keys(n))n[x]===void 0&&delete n[x];const v=await t._getAppCheckToken(),R=v?`#${fue}=${encodeURIComponent(v)}`:"";return`${pue(t)}?${UT(n).slice(1)}${R}`}function pue({config:t}){return t.emulator?y3(t,hue):`https://${t.authDomain}/${due}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="webStorageSupport";class mue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IK,this._completeRedirectFn=kle,this._overrideRedirectResult=Ile}async _openPopup(e,a,r,i){var l;Og((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await $6(e,a,r,ID(),i);return uue(e,c,R3())}async _openRedirect(e,a,r,i){await this._originValidation(e);const l=await $6(e,a,r,ID(),i);return Ale(l),new Promise(()=>{})}_initialize(e){const a=e._key();if(this.eventManagers[a]){const{manager:i,promise:l}=this.eventManagers[a];return i?Promise.resolve(i):(Og(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[a]={promise:r},r.catch(()=>{delete this.eventManagers[a]}),r}async initAndGetManager(e){const a=await rue(e),r=new Ble(e);return a.register("authEvent",i=>(ai(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=a,r}_isIframeWebStorageSupported(e,a){this.iframes[e._key()].send(SN,{type:SN},i=>{var l;const c=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[SN];c!==void 0&&a(!!c),Hp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const a=e._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=Hle(e)),this.originValidationPromises[a]}get _shouldInitProactively(){return TK()||v3()||x2()}}const gue=mue;var K6="@firebase/auth",W6="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const a=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,a),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const a=this.internalListeners.get(e);a&&(this.internalListeners.delete(e),a(),this.updateProactiveRefresh())}assertAuthConfigured(){ai(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aue(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function vue(t){bv(new Wy("auth",(e,{options:a})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:n}=r.options;ai(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:c,authDomain:n,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CK(t)},R=new $oe(r,i,l,v);return Woe(R,a),R},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,a,r)=>{e.getProvider("auth-internal").initialize()})),bv(new Wy("auth-internal",e=>{const a=l1(e.getProvider("auth").getImmediate());return(r=>new yue(r))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),Im(K6,W6,Aue(t)),Im(K6,W6,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ue=5*60,wue=rK("authIdTokenMaxAge")||_ue;let Y6=null;const Rue=t=>async e=>{const a=e&&await e.getIdTokenResult(),r=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(r&&r>wue)return;const i=a==null?void 0:a.token;Y6!==i&&(Y6=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GK(t=p3()){const e=b2(t,"auth");if(e.isInitialized())return e.getImmediate();const a=Koe(t,{popupRedirectResolver:gue,persistence:[xle,mle,IK]}),r=rK("authTokenSyncURL");if(r){const l=Rue(r);dle(a,l,()=>l(a.currentUser)),cle(a,c=>l(c))}const i=eK("auth");return i&&Yoe(a,`http://${i}`),a}vue("Browser");var Tue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jr,C3=C3||{},li=Tue||self;function N2(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function O2(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Cue(t,e,a){return t.call.apply(t.bind,arguments)}function Sue(t,e,a){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Rd(t,e,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Rd=Cue:Rd=Sue,Rd.apply(null,arguments)}function VS(t,e){var a=Array.prototype.slice.call(arguments,1);return function(){var r=a.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function dc(t,e){function a(){}a.prototype=e.prototype,t.$=e.prototype,t.prototype=new a,t.prototype.constructor=t,t.ac=function(r,i,l){for(var c=Array(arguments.length-2),n=2;n<arguments.length;n++)c[n-2]=arguments[n];return e.prototype[i].apply(r,c)}}function rA(){this.s=this.s,this.o=this.o}var bue=0;rA.prototype.s=!1;rA.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),bue!=0)};rA.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZK=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let a=0;a<t.length;a++)if(a in t&&t[a]===e)return a;return-1};function S3(t){const e=t.length;if(0<e){const a=Array(e);for(let r=0;r<e;r++)a[r]=t[r];return a}return[]}function X6(t,e){for(let a=1;a<arguments.length;a++){const r=arguments[a];if(N2(r)){const i=t.length||0,l=r.length||0;t.length=i+l;for(let c=0;c<l;c++)t[i+c]=r[c]}else t.push(r)}}function Td(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Td.prototype.h=function(){this.defaultPrevented=!0};var xue=function(){if(!li.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{li.addEventListener("test",()=>{},e),li.removeEventListener("test",()=>{},e)}catch{}return t}();function LR(t){return/^[\s\xa0]*$/.test(t)}function V2(){var t=li.navigator;return t&&(t=t.userAgent)?t:""}function Em(t){return V2().indexOf(t)!=-1}function b3(t){return b3[" "](t),t}b3[" "]=function(){};function Pue(t,e){var a=wce;return Object.prototype.hasOwnProperty.call(a,t)?a[t]:a[t]=e(t)}var Eue=Em("Opera"),v_=Em("Trident")||Em("MSIE"),qK=Em("Edge"),FD=qK||v_,HK=Em("Gecko")&&!(V2().toLowerCase().indexOf("webkit")!=-1&&!Em("Edge"))&&!(Em("Trident")||Em("MSIE"))&&!Em("Edge"),Nue=V2().toLowerCase().indexOf("webkit")!=-1&&!Em("Edge");function $K(){var t=li.document;return t?t.documentMode:void 0}var kD;e:{var bN="",xN=function(){var t=V2();if(HK)return/rv:([^\);]+)(\)|;)/.exec(t);if(qK)return/Edge\/([\d\.]+)/.exec(t);if(v_)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Nue)return/WebKit\/(\S+)/.exec(t);if(Eue)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(xN&&(bN=xN?xN[1]:""),v_){var PN=$K();if(PN!=null&&PN>parseFloat(bN)){kD=String(PN);break e}}kD=bN}var UD;if(li.document&&v_){var J6=$K();UD=J6||parseInt(kD,10)||void 0}else UD=void 0;var Oue=UD;function FR(t,e){if(Td.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(HK){e:{try{b3(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else a=="mouseover"?e=t.fromElement:a=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Vue[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&FR.$.h.call(this)}}dc(FR,Td);var Vue={2:"touch",3:"pen",4:"mouse"};FR.prototype.h=function(){FR.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var z2="closure_listenable_"+(1e6*Math.random()|0),zue=0;function Due(t,e,a,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=a,this.capture=!!r,this.la=i,this.key=++zue,this.fa=this.ia=!1}function D2(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function x3(t,e,a){for(const r in t)e.call(a,t[r],r,t)}function Mue(t,e){for(const a in t)e.call(void 0,t[a],a,t)}function KK(t){const e={};for(const a in t)e[a]=t[a];return e}const Q6="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WK(t,e){let a,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(a in r)t[a]=r[a];for(let l=0;l<Q6.length;l++)a=Q6[l],Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}}function M2(t){this.src=t,this.g={},this.h=0}M2.prototype.add=function(t,e,a,r,i){var l=t.toString();t=this.g[l],t||(t=this.g[l]=[],this.h++);var c=jD(t,e,r,i);return-1<c?(e=t[c],a||(e.ia=!1)):(e=new Due(e,this.src,l,!!r,i),e.ia=a,t.push(e)),e};function BD(t,e){var a=e.type;if(a in t.g){var r=t.g[a],i=ZK(r,e),l;(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(D2(e),t.g[a].length==0&&(delete t.g[a],t.h--))}}function jD(t,e,a,r){for(var i=0;i<t.length;++i){var l=t[i];if(!l.fa&&l.listener==e&&l.capture==!!a&&l.la==r)return i}return-1}var P3="closure_lm_"+(1e6*Math.random()|0),EN={};function YK(t,e,a,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)YK(t,e[l],a,r,i);return null}return a=QK(a),t&&t[z2]?t.O(e,a,O2(r)?!!r.capture:!1,i):Iue(t,e,a,!1,r,i)}function Iue(t,e,a,r,i,l){if(!e)throw Error("Invalid event type");var c=O2(i)?!!i.capture:!!i,n=N3(t);if(n||(t[P3]=n=new M2(t)),a=n.add(e,a,r,c,l),a.proxy)return a;if(r=Lue(),a.proxy=r,r.src=t,r.listener=a,t.addEventListener)xue||(i=c),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(JK(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return a}function Lue(){function t(a){return e.call(t.src,t.listener,a)}const e=Fue;return t}function XK(t,e,a,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)XK(t,e[l],a,r,i);else r=O2(r)?!!r.capture:!!r,a=QK(a),t&&t[z2]?(t=t.i,e=String(e).toString(),e in t.g&&(l=t.g[e],a=jD(l,a,r,i),-1<a&&(D2(l[a]),Array.prototype.splice.call(l,a,1),l.length==0&&(delete t.g[e],t.h--)))):t&&(t=N3(t))&&(e=t.g[e.toString()],t=-1,e&&(t=jD(e,a,r,i)),(a=-1<t?e[t]:null)&&E3(a))}function E3(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[z2])BD(e.i,t);else{var a=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(a,r,t.capture):e.detachEvent?e.detachEvent(JK(a),r):e.addListener&&e.removeListener&&e.removeListener(r),(a=N3(e))?(BD(a,t),a.h==0&&(a.src=null,e[P3]=null)):D2(t)}}}function JK(t){return t in EN?EN[t]:EN[t]="on"+t}function Fue(t,e){if(t.fa)t=!0;else{e=new FR(e,this);var a=t.listener,r=t.la||t.src;t.ia&&E3(t),t=a.call(r,e)}return t}function N3(t){return t=t[P3],t instanceof M2?t:null}var NN="__closure_events_fn_"+(1e9*Math.random()>>>0);function QK(t){return typeof t=="function"?t:(t[NN]||(t[NN]=function(e){return t.handleEvent(e)}),t[NN])}function cc(){rA.call(this),this.i=new M2(this),this.S=this,this.J=null}dc(cc,rA);cc.prototype[z2]=!0;cc.prototype.removeEventListener=function(t,e,a,r){XK(this,t,e,a,r)};function Lc(t,e){var a,r=t.J;if(r)for(a=[];r;r=r.J)a.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Td(e,t);else if(e instanceof Td)e.target=e.target||t;else{var i=e;e=new Td(r,t),WK(e,i)}if(i=!0,a)for(var l=a.length-1;0<=l;l--){var c=e.g=a[l];i=zS(c,r,!0,e)&&i}if(c=e.g=t,i=zS(c,r,!0,e)&&i,i=zS(c,r,!1,e)&&i,a)for(l=0;l<a.length;l++)c=e.g=a[l],i=zS(c,r,!1,e)&&i}cc.prototype.N=function(){if(cc.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var a=t.g[e],r=0;r<a.length;r++)D2(a[r]);delete t.g[e],t.h--}}this.J=null};cc.prototype.O=function(t,e,a,r){return this.i.add(String(t),e,!1,a,r)};cc.prototype.P=function(t,e,a,r){return this.i.add(String(t),e,!0,a,r)};function zS(t,e,a,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var c=e[l];if(c&&!c.fa&&c.capture==a){var n=c.listener,v=c.la||c.src;c.ia&&BD(t.i,c),i=n.call(v,r)!==!1&&i}}return i&&!r.defaultPrevented}var O3=li.JSON.stringify;class kue{constructor(e,a){this.i=e,this.j=a,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Uue(){var t=V3;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Bue{constructor(){this.h=this.g=null}add(e,a){const r=eW.get();r.set(e,a),this.h?this.h.next=r:this.g=r,this.h=r}}var eW=new kue(()=>new jue,t=>t.reset());class jue{constructor(){this.next=this.g=this.h=null}set(e,a){this.h=e,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}function Gue(t){var e=1;t=t.split(":");const a=[];for(;0<e&&t.length;)a.push(t.shift()),e--;return t.length&&a.push(t.join(":")),a}function Zue(t){li.setTimeout(()=>{throw t},0)}let kR,UR=!1,V3=new Bue,tW=()=>{const t=li.Promise.resolve(void 0);kR=()=>{t.then(que)}};var que=()=>{for(var t;t=Uue();){try{t.h.call(t.g)}catch(a){Zue(a)}var e=eW;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}UR=!1};function I2(t,e){cc.call(this),this.h=t||1,this.g=e||li,this.j=Rd(this.qb,this),this.l=Date.now()}dc(I2,cc);jr=I2.prototype;jr.ga=!1;jr.T=null;jr.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lc(this,"tick"),this.ga&&(z3(this),this.start()))}};jr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function z3(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}jr.N=function(){I2.$.N.call(this),z3(this),delete this.g};function D3(t,e,a){if(typeof t=="function")a&&(t=Rd(t,a));else if(t&&typeof t.handleEvent=="function")t=Rd(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:li.setTimeout(t,e||0)}function aW(t){t.g=D3(()=>{t.g=null,t.i&&(t.i=!1,aW(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Hue extends rA{constructor(e,a){super(),this.m=e,this.j=a,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:aW(this)}N(){super.N(),this.g&&(li.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function BR(t){rA.call(this),this.h=t,this.g={}}dc(BR,rA);var eU=[];function rW(t,e,a,r){Array.isArray(a)||(a&&(eU[0]=a.toString()),a=eU);for(var i=0;i<a.length;i++){var l=YK(e,a[i],r||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function nW(t){x3(t.g,function(e,a){this.g.hasOwnProperty(a)&&E3(e)},t),t.g={}}BR.prototype.N=function(){BR.$.N.call(this),nW(this)};BR.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function L2(){this.g=!0}L2.prototype.Ea=function(){this.g=!1};function $ue(t,e,a,r,i,l){t.info(function(){if(t.g)if(l)for(var c="",n=l.split("&"),v=0;v<n.length;v++){var R=n[v].split("=");if(1<R.length){var x=R[0];R=R[1];var N=x.split("_");c=2<=N.length&&N[1]=="type"?c+(x+"="+R+"&"):c+(x+"=redacted&")}}else c=null;else c=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+a+`
`+c})}function Kue(t,e,a,r,i,l,c){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+a+`
`+l+" "+c})}function W0(t,e,a,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Yue(t,a)+(r?" "+r:"")})}function Wue(t,e){t.info(function(){return"TIMEOUT: "+e})}L2.prototype.info=function(){};function Yue(t,e){if(!t.g)return e;if(!e)return null;try{var a=JSON.parse(e);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var r=a[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if(l!="noop"&&l!="stop"&&l!="close")for(var c=1;c<i.length;c++)i[c]=""}}}}return O3(a)}catch{return e}}var Uv={},tU=null;function F2(){return tU=tU||new cc}Uv.Ta="serverreachability";function iW(t){Td.call(this,Uv.Ta,t)}dc(iW,Td);function jR(t){const e=F2();Lc(e,new iW(e))}Uv.STAT_EVENT="statevent";function sW(t,e){Td.call(this,Uv.STAT_EVENT,t),this.stat=e}dc(sW,Td);function ih(t){const e=F2();Lc(e,new sW(e,t))}Uv.Ua="timingevent";function oW(t,e){Td.call(this,Uv.Ua,t),this.size=e}dc(oW,Td);function qT(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return li.setTimeout(function(){t()},e)}var k2={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lW={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function M3(){}M3.prototype.h=null;function aU(t){return t.h||(t.h=t.i())}function uW(){}var HT={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function I3(){Td.call(this,"d")}dc(I3,Td);function L3(){Td.call(this,"c")}dc(L3,Td);var GD;function U2(){}dc(U2,M3);U2.prototype.g=function(){return new XMLHttpRequest};U2.prototype.i=function(){return{}};GD=new U2;function $T(t,e,a,r){this.l=t,this.j=e,this.m=a,this.W=r||1,this.U=new BR(this),this.P=Xue,t=FD?125:void 0,this.V=new I2(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new cW}function cW(){this.i=null,this.g="",this.h=!1}var Xue=45e3,ZD={},Hb={};jr=$T.prototype;jr.setTimeout=function(t){this.P=t};function qD(t,e,a){t.L=1,t.v=j2(Vg(e)),t.s=a,t.S=!0,dW(t,null)}function dW(t,e){t.G=Date.now(),KT(t),t.A=Vg(t.v);var a=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),vW(a.i,"t",r),t.C=0,a=t.l.J,t.h=new cW,t.g=UW(t.l,a?e:null,!t.s),0<t.O&&(t.M=new Hue(Rd(t.Pa,t,t.g),t.O)),rW(t.U,t.g,"readystatechange",t.nb),e=t.I?KK(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),jR(),$ue(t.j,t.u,t.A,t.m,t.W,t.s)}jr.nb=function(t){t=t.target;const e=this.M;e&&Nm(t)==3?e.l():this.Pa(t)};jr.Pa=function(t){try{if(t==this.g)e:{const x=Nm(this.g);var e=this.g.Ia();const N=this.g.da();if(!(3>x)&&(x!=3||FD||this.g&&(this.h.h||this.g.ja()||sU(this.g)))){this.J||x!=4||e==7||(e==8||0>=N?jR(3):jR(2)),B2(this);var a=this.g.da();this.ca=a;t:if(hW(this)){var r=sU(this.g);t="";var i=r.length,l=Nm(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){uv(this),mR(this);var c="";break t}this.h.i=new li.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=a==200,Kue(this.j,this.u,this.A,this.m,this.W,x,a),this.i){if(this.aa&&!this.K){t:{if(this.g){var n,v=this.g;if((n=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!LR(n)){var R=n;break t}}R=null}if(a=R)W0(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,HD(this,a);else{this.i=!1,this.o=3,ih(12),uv(this),mR(this);break e}}this.S?(fW(this,x,c),FD&&this.i&&x==3&&(rW(this.U,this.V,"tick",this.mb),this.V.start())):(W0(this.j,this.m,c,null),HD(this,c)),x==4&&uv(this),this.i&&!this.J&&(x==4?IW(this.l,this):(this.i=!1,KT(this)))}else Ace(this.g),a==400&&0<c.indexOf("Unknown SID")?(this.o=3,ih(12)):(this.o=0,ih(13)),uv(this),mR(this)}}}catch{}finally{}};function hW(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function fW(t,e,a){let r=!0,i;for(;!t.J&&t.C<a.length;)if(i=Jue(t,a),i==Hb){e==4&&(t.o=4,ih(14),r=!1),W0(t.j,t.m,null,"[Incomplete Response]");break}else if(i==ZD){t.o=4,ih(15),W0(t.j,t.m,a,"[Invalid Chunk]"),r=!1;break}else W0(t.j,t.m,i,null),HD(t,i);hW(t)&&i!=Hb&&i!=ZD&&(t.h.g="",t.C=0),e!=4||a.length!=0||t.h.h||(t.o=1,ih(16),r=!1),t.i=t.i&&r,r?0<a.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+a.length),G3(e),e.M=!0,ih(11))):(W0(t.j,t.m,a,"[Invalid Chunked Response]"),uv(t),mR(t))}jr.mb=function(){if(this.g){var t=Nm(this.g),e=this.g.ja();this.C<e.length&&(B2(this),fW(this,t,e),this.i&&t!=4&&KT(this))}};function Jue(t,e){var a=t.C,r=e.indexOf(`
`,a);return r==-1?Hb:(a=Number(e.substring(a,r)),isNaN(a)?ZD:(r+=1,r+a>e.length?Hb:(e=e.slice(r,r+a),t.C=r+a,e)))}jr.cancel=function(){this.J=!0,uv(this)};function KT(t){t.Y=Date.now()+t.P,pW(t,t.P)}function pW(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=qT(Rd(t.lb,t),e)}function B2(t){t.B&&(li.clearTimeout(t.B),t.B=null)}jr.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Wue(this.j,this.A),this.L!=2&&(jR(),ih(17)),uv(this),this.o=2,mR(this)):pW(this,this.Y-t)};function mR(t){t.l.H==0||t.J||IW(t.l,t)}function uv(t){B2(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,z3(t.V),nW(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function HD(t,e){try{var a=t.l;if(a.H!=0&&(a.g==t||$D(a.i,t))){if(!t.K&&$D(a.i,t)&&a.H==3){try{var r=a.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!a.u){if(a.g)if(a.g.G+3e3<t.G)Wb(a),q2(a);else break e;j3(a),ih(18)}}else a.Fa=i[1],0<a.Fa-a.V&&37500>i[2]&&a.G&&a.A==0&&!a.v&&(a.v=qT(Rd(a.ib,a),6e3));if(1>=RW(a.i)&&a.oa){try{a.oa()}catch{}a.oa=void 0}}else cv(a,11)}else if((t.K||a.g==t)&&Wb(a),!LR(e))for(i=a.Ja.g.parse(e),e=0;e<i.length;e++){let R=i[e];if(a.V=R[0],R=R[1],a.H==2)if(R[0]=="c"){a.K=R[1],a.pa=R[2];const x=R[3];x!=null&&(a.ra=x,a.l.info("VER="+a.ra));const N=R[4];N!=null&&(a.Ga=N,a.l.info("SVER="+a.Ga));const L=R[5];L!=null&&typeof L=="number"&&0<L&&(r=1.5*L,a.L=r,a.l.info("backChannelRequestTimeoutMs_="+r)),r=a;const F=t.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var l=r.i;l.g||j.indexOf("spdy")==-1&&j.indexOf("quic")==-1&&j.indexOf("h2")==-1||(l.j=l.l,l.g=new Set,l.h&&(F3(l,l.h),l.h=null))}if(r.F){const H=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(r.Da=H,Mo(r.I,r.F,H))}}a.H=3,a.h&&a.h.Ba(),a.ca&&(a.S=Date.now()-t.G,a.l.info("Handshake RTT: "+a.S+"ms")),r=a;var c=t;if(r.wa=kW(r,r.J?r.pa:null,r.Y),c.K){TW(r.i,c);var n=c,v=r.L;v&&n.setTimeout(v),n.B&&(B2(n),KT(n)),r.g=c}else DW(r);0<a.j.length&&H2(a)}else R[0]!="stop"&&R[0]!="close"||cv(a,7);else a.H==3&&(R[0]=="stop"||R[0]=="close"?R[0]=="stop"?cv(a,7):B3(a):R[0]!="noop"&&a.h&&a.h.Aa(R),a.A=0)}}jR(4)}catch{}}function Que(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(N2(t)){for(var e=[],a=t.length,r=0;r<a;r++)e.push(t[r]);return e}e=[],a=0;for(r in t)e[a++]=t[r];return e}function ece(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(N2(t)||typeof t=="string"){var e=[];t=t.length;for(var a=0;a<t;a++)e.push(a);return e}e=[],a=0;for(const r in t)e[a++]=r;return e}}}function mW(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(N2(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var a=ece(t),r=Que(t),i=r.length,l=0;l<i;l++)e.call(void 0,r[l],a&&a[l],t)}var gW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tce(t,e){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var r=t[a].indexOf("="),i=null;if(0<=r){var l=t[a].substring(0,r);i=t[a].substring(r+1)}else l=t[a];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function vv(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof vv){this.h=t.h,$b(this,t.j),this.s=t.s,this.g=t.g,Kb(this,t.m),this.l=t.l;var e=t.i,a=new GR;a.i=e.i,e.g&&(a.g=new Map(e.g),a.h=e.h),rU(this,a),this.o=t.o}else t&&(e=String(t).match(gW))?(this.h=!1,$b(this,e[1]||"",!0),this.s=iR(e[2]||""),this.g=iR(e[3]||"",!0),Kb(this,e[4]),this.l=iR(e[5]||"",!0),rU(this,e[6]||"",!0),this.o=iR(e[7]||"")):(this.h=!1,this.i=new GR(null,this.h))}vv.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sR(e,nU,!0),":");var a=this.g;return(a||e=="file")&&(t.push("//"),(e=this.s)&&t.push(sR(e,nU,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.m,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(sR(a,a.charAt(0)=="/"?nce:rce,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.o)&&t.push("#",sR(a,sce)),t.join("")};function Vg(t){return new vv(t)}function $b(t,e,a){t.j=a?iR(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Kb(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function rU(t,e,a){e instanceof GR?(t.i=e,oce(t.i,t.h)):(a||(e=sR(e,ice)),t.i=new GR(e,t.h))}function Mo(t,e,a){t.i.set(e,a)}function j2(t){return Mo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function iR(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sR(t,e,a){return typeof t=="string"?(t=encodeURI(t).replace(e,ace),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ace(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var nU=/[#\/\?@]/g,rce=/[#\?:]/g,nce=/[#\?]/g,ice=/[#\?@]/g,sce=/#/g;function GR(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function nA(t){t.g||(t.g=new Map,t.h=0,t.i&&tce(t.i,function(e,a){t.add(decodeURIComponent(e.replace(/\+/g," ")),a)}))}jr=GR.prototype;jr.add=function(t,e){nA(this),this.i=null,t=c1(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(e),this.h+=1,this};function yW(t,e){nA(t),e=c1(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function AW(t,e){return nA(t),e=c1(t,e),t.g.has(e)}jr.forEach=function(t,e){nA(this),this.g.forEach(function(a,r){a.forEach(function(i){t.call(e,i,r,this)},this)},this)};jr.ta=function(){nA(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),a=[];for(let r=0;r<e.length;r++){const i=t[r];for(let l=0;l<i.length;l++)a.push(e[r])}return a};jr.Z=function(t){nA(this);let e=[];if(typeof t=="string")AW(this,t)&&(e=e.concat(this.g.get(c1(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)e=e.concat(t[a])}return e};jr.set=function(t,e){return nA(this),this.i=null,t=c1(this,t),AW(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};jr.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function vW(t,e,a){yW(t,e),0<a.length&&(t.i=null,t.g.set(c1(t,e),S3(a)),t.h+=a.length)}jr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var a=0;a<e.length;a++){var r=e[a];const l=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=l;c[r]!==""&&(i+="="+encodeURIComponent(String(c[r]))),t.push(i)}}return this.i=t.join("&")};function c1(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function oce(t,e){e&&!t.j&&(nA(t),t.i=null,t.g.forEach(function(a,r){var i=r.toLowerCase();r!=i&&(yW(this,r),vW(this,i,a))},t)),t.j=e}var lce=class{constructor(t,e){this.g=t,this.map=e}};function _W(t){this.l=t||uce,li.PerformanceNavigationTiming?(t=li.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(li.g&&li.g.Ka&&li.g.Ka()&&li.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var uce=10;function wW(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function RW(t){return t.h?1:t.g?t.g.size:0}function $D(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function F3(t,e){t.g?t.g.add(e):t.h=e}function TW(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}_W.prototype.cancel=function(){if(this.i=CW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function CW(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const a of t.g.values())e=e.concat(a.F);return e}return S3(t.i)}var cce=class{stringify(t){return li.JSON.stringify(t,void 0)}parse(t){return li.JSON.parse(t,void 0)}};function dce(){this.g=new cce}function hce(t,e,a){const r=a||"";try{mW(t,function(i,l){let c=i;O2(i)&&(c=O3(i)),e.push(r+l+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fce(t,e){const a=new L2;if(li.Image){const r=new Image;r.onload=VS(DS,a,r,"TestLoadImage: loaded",!0,e),r.onerror=VS(DS,a,r,"TestLoadImage: error",!1,e),r.onabort=VS(DS,a,r,"TestLoadImage: abort",!1,e),r.ontimeout=VS(DS,a,r,"TestLoadImage: timeout",!1,e),li.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function DS(t,e,a,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function WT(t){this.l=t.fc||null,this.j=t.ob||!1}dc(WT,M3);WT.prototype.g=function(){return new G2(this.l,this.j)};WT.prototype.i=function(t){return function(){return t}}({});function G2(t,e){cc.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=k3,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dc(G2,cc);var k3=0;jr=G2.prototype;jr.open=function(t,e){if(this.readyState!=k3)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ZR(this)};jr.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||li).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};jr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,YT(this)),this.readyState=k3};jr.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ZR(this)),this.g&&(this.readyState=3,ZR(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof li.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;SW(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function SW(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}jr.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?YT(this):ZR(this),this.readyState==3&&SW(this)}};jr.Za=function(t){this.g&&(this.response=this.responseText=t,YT(this))};jr.Ya=function(t){this.g&&(this.response=t,YT(this))};jr.ka=function(){this.g&&YT(this)};function YT(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ZR(t)}jr.setRequestHeader=function(t,e){this.v.append(t,e)};jr.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};jr.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var a=e.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=e.next();return t.join(`\r
`)};function ZR(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(G2.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var pce=li.JSON.parse;function El(t){cc.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bW,this.L=this.M=!1}dc(El,cc);var bW="",mce=/^https?$/i,gce=["POST","PUT"];jr=El.prototype;jr.Oa=function(t){this.M=t};jr.ha=function(t,e,a,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():GD.g(),this.C=this.u?aU(this.u):aU(GD),this.g.onreadystatechange=Rd(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(l){iU(this,l);return}if(t=a||"",a=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)a.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const l of r.keys())a.set(l,r.get(l));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(a.keys()).find(l=>l.toLowerCase()=="content-type"),i=li.FormData&&t instanceof li.FormData,!(0<=ZK(gce,e))||r||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,c]of a)this.g.setRequestHeader(l,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{EW(this),0<this.B&&((this.L=yce(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rd(this.ua,this)):this.A=D3(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){iU(this,l)}};function yce(t){return v_&&typeof t.timeout=="number"&&t.ontimeout!==void 0}jr.ua=function(){typeof C3<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lc(this,"timeout"),this.abort(8))};function iU(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xW(t),Z2(t)}function xW(t){t.F||(t.F=!0,Lc(t,"complete"),Lc(t,"error"))}jr.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Lc(this,"complete"),Lc(this,"abort"),Z2(this))};jr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Z2(this,!0)),El.$.N.call(this)};jr.La=function(){this.s||(this.G||this.v||this.l?PW(this):this.kb())};jr.kb=function(){PW(this)};function PW(t){if(t.h&&typeof C3<"u"&&(!t.C[1]||Nm(t)!=4||t.da()!=2)){if(t.v&&Nm(t)==4)D3(t.La,0,t);else if(Lc(t,"readystatechange"),Nm(t)==4){t.h=!1;try{const c=t.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var a;if(!(a=e)){var r;if(r=c===0){var i=String(t.I).match(gW)[1]||null;!i&&li.self&&li.self.location&&(i=li.self.location.protocol.slice(0,-1)),r=!mce.test(i?i.toLowerCase():"")}a=r}if(a)Lc(t,"complete"),Lc(t,"success");else{t.m=6;try{var l=2<Nm(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.da()+"]",xW(t)}}finally{Z2(t)}}}}function Z2(t,e){if(t.g){EW(t);const a=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Lc(t,"ready");try{a.onreadystatechange=r}catch{}}}function EW(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(li.clearTimeout(t.A),t.A=null)}jr.isActive=function(){return!!this.g};function Nm(t){return t.g?t.g.readyState:0}jr.da=function(){try{return 2<Nm(this)?this.g.status:-1}catch{return-1}};jr.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};jr.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),pce(e)}};function sU(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case bW:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Ace(t){const e={};t=(t.g&&2<=Nm(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(LR(t[r]))continue;var a=Gue(t[r]);const i=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();const l=e[i]||[];e[i]=l,l.push(a)}Mue(e,function(r){return r.join(", ")})}jr.Ia=function(){return this.m};jr.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function NW(t){let e="";return x3(t,function(a,r){e+=r,e+=":",e+=a,e+=`\r
`}),e}function U3(t,e,a){e:{for(r in a){var r=!1;break e}r=!0}r||(a=NW(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):Mo(t,e,a))}function Lw(t,e,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||e}function OW(t){this.Ga=0,this.j=[],this.l=new L2,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lw("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lw("baseRetryDelayMs",5e3,t),this.hb=Lw("retryDelaySeedMs",1e4,t),this.eb=Lw("forwardChannelMaxRetries",2,t),this.xa=Lw("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new _W(t&&t.concurrentRequestLimit),this.Ja=new dce,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}jr=OW.prototype;jr.ra=8;jr.H=1;function B3(t){if(VW(t),t.H==3){var e=t.W++,a=Vg(t.I);if(Mo(a,"SID",t.K),Mo(a,"RID",e),Mo(a,"TYPE","terminate"),XT(t,a),e=new $T(t,t.l,e),e.L=2,e.v=j2(Vg(a)),a=!1,li.navigator&&li.navigator.sendBeacon)try{a=li.navigator.sendBeacon(e.v.toString(),"")}catch{}!a&&li.Image&&(new Image().src=e.v,a=!0),a||(e.g=UW(e.l,null),e.g.ha(e.v)),e.G=Date.now(),KT(e)}FW(t)}function q2(t){t.g&&(G3(t),t.g.cancel(),t.g=null)}function VW(t){q2(t),t.u&&(li.clearTimeout(t.u),t.u=null),Wb(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&li.clearTimeout(t.m),t.m=null)}function H2(t){if(!wW(t.i)&&!t.m){t.m=!0;var e=t.Na;kR||tW(),UR||(kR(),UR=!0),V3.add(e,t),t.C=0}}function vce(t,e){return RW(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=qT(Rd(t.Na,t,e),LW(t,t.C)),t.C++,!0)}jr.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new $T(this,this.l,t);let l=this.s;if(this.U&&(l?(l=KK(l),WK(l,this.U)):l=this.U),this.o!==null||this.O||(i.I=l,l=null),this.P)e:{for(var e=0,a=0;a<this.j.length;a++){t:{var r=this.j[a];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=a;break e}if(e===4096||a===this.j.length-1){e=a+1;break e}}e=1e3}else e=1e3;e=zW(this,i,e),a=Vg(this.I),Mo(a,"RID",t),Mo(a,"CVER",22),this.F&&Mo(a,"X-HTTP-Session-Id",this.F),XT(this,a),l&&(this.O?e="headers="+encodeURIComponent(String(NW(l)))+"&"+e:this.o&&U3(a,this.o,l)),F3(this.i,i),this.bb&&Mo(a,"TYPE","init"),this.P?(Mo(a,"$req",e),Mo(a,"SID","null"),i.aa=!0,qD(i,a,null)):qD(i,a,e),this.H=2}}else this.H==3&&(t?oU(this,t):this.j.length==0||wW(this.i)||oU(this))};function oU(t,e){var a;e?a=e.m:a=t.W++;const r=Vg(t.I);Mo(r,"SID",t.K),Mo(r,"RID",a),Mo(r,"AID",t.V),XT(t,r),t.o&&t.s&&U3(r,t.o,t.s),a=new $T(t,t.l,a,t.C+1),t.o===null&&(a.I=t.s),e&&(t.j=e.F.concat(t.j)),e=zW(t,a,1e3),a.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),F3(t.i,a),qD(a,r,e)}function XT(t,e){t.na&&x3(t.na,function(a,r){Mo(e,r,a)}),t.h&&mW({},function(a,r){Mo(e,r,a)})}function zW(t,e,a){a=Math.min(t.j.length,a);var r=t.h?Rd(t.h.Va,t.h,t):null;e:{var i=t.j;let l=-1;for(;;){const c=["count="+a];l==-1?0<a?(l=i[0].g,c.push("ofs="+l)):l=0:c.push("ofs="+l);let n=!0;for(let v=0;v<a;v++){let R=i[v].g;const x=i[v].map;if(R-=l,0>R)l=Math.max(0,i[v].g-100),n=!1;else try{hce(x,c,"req"+R+"_")}catch{r&&r(x)}}if(n){r=c.join("&");break e}}}return t=t.j.splice(0,a),e.F=t,r}function DW(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;kR||tW(),UR||(kR(),UR=!0),V3.add(e,t),t.A=0}}function j3(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=qT(Rd(t.Ma,t),LW(t,t.A)),t.A++,!0)}jr.Ma=function(){if(this.u=null,MW(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=qT(Rd(this.jb,this),t)}};jr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ih(10),q2(this),MW(this))};function G3(t){t.B!=null&&(li.clearTimeout(t.B),t.B=null)}function MW(t){t.g=new $T(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Vg(t.wa);Mo(e,"RID","rpc"),Mo(e,"SID",t.K),Mo(e,"AID",t.V),Mo(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Mo(e,"TO",t.qa),Mo(e,"TYPE","xmlhttp"),XT(t,e),t.o&&t.s&&U3(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var a=t.g;t=t.pa,a.L=1,a.v=j2(Vg(e)),a.s=null,a.S=!0,dW(a,t)}jr.ib=function(){this.v!=null&&(this.v=null,q2(this),j3(this),ih(19))};function Wb(t){t.v!=null&&(li.clearTimeout(t.v),t.v=null)}function IW(t,e){var a=null;if(t.g==e){Wb(t),G3(t),t.g=null;var r=2}else if($D(t.i,e))a=e.F,TW(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){a=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=F2(),Lc(r,new oW(r,a)),H2(t)}else DW(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&vce(t,e)||r==2&&j3(t)))switch(a&&0<a.length&&(e=t.i,e.i=e.i.concat(a)),i){case 1:cv(t,5);break;case 4:cv(t,10);break;case 3:cv(t,6);break;default:cv(t,2)}}}function LW(t,e){let a=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(a*=2),a*e}function cv(t,e){if(t.l.info("Error code "+e),e==2){var a=null;t.h&&(a=null);var r=Rd(t.pb,t);a||(a=new vv("//www.google.com/images/cleardot.gif"),li.location&&li.location.protocol=="http"||$b(a,"https"),j2(a)),fce(a.toString(),r)}else ih(2);t.H=0,t.h&&t.h.za(e),FW(t),VW(t)}jr.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ih(2)):(this.l.info("Failed to ping google.com"),ih(1))};function FW(t){if(t.H=0,t.ma=[],t.h){const e=CW(t.i);(e.length!=0||t.j.length!=0)&&(X6(t.ma,e),X6(t.ma,t.j),t.i.i.length=0,S3(t.j),t.j.length=0),t.h.ya()}}function kW(t,e,a){var r=a instanceof vv?Vg(a):new vv(a);if(r.g!="")e&&(r.g=e+"."+r.g),Kb(r,r.m);else{var i=li.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var l=new vv(null);r&&$b(l,r),e&&(l.g=e),i&&Kb(l,i),a&&(l.l=a),r=l}return a=t.F,e=t.Da,a&&e&&Mo(r,a,e),Mo(r,"VER",t.ra),XT(t,r),r}function UW(t,e,a){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=a&&t.Ha&&!t.va?new El(new WT({ob:!0})):new El(t.va),e.Oa(t.J),e}jr.isActive=function(){return!!this.h&&this.h.isActive(this)};function BW(){}jr=BW.prototype;jr.Ba=function(){};jr.Aa=function(){};jr.za=function(){};jr.ya=function(){};jr.isActive=function(){return!0};jr.Va=function(){};function Yb(){if(v_&&!(10<=Number(Oue)))throw Error("Environmental error: no available transport.")}Yb.prototype.g=function(t,e){return new wf(t,e)};function wf(t,e){cc.call(this),this.g=new OW(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!LR(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!LR(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new d1(this)}dc(wf,cc);wf.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,a=this.h||void 0;ih(0),t.Y=e,t.na=a||{},t.G=t.aa,t.I=kW(t,null,t.Y),H2(t)};wf.prototype.close=function(){B3(this.g)};wf.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.v&&(a={},a.__data__=O3(t),t=a);e.j.push(new lce(e.fb++,t)),e.H==3&&H2(e)};wf.prototype.N=function(){this.g.h=null,delete this.j,B3(this.g),delete this.g,wf.$.N.call(this)};function jW(t){I3.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const a in e){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dc(jW,I3);function GW(){L3.call(this),this.status=1}dc(GW,L3);function d1(t){this.g=t}dc(d1,BW);d1.prototype.Ba=function(){Lc(this.g,"a")};d1.prototype.Aa=function(t){Lc(this.g,new jW(t))};d1.prototype.za=function(t){Lc(this.g,new GW)};d1.prototype.ya=function(){Lc(this.g,"b")};function _ce(){this.blockSize=-1}function $p(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}dc($p,_ce);$p.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ON(t,e,a){a||(a=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(a++)|e.charCodeAt(a++)<<8|e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<24;else for(i=0;16>i;++i)r[i]=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;e=t.g[0],a=t.g[1],i=t.g[2];var l=t.g[3],c=e+(l^a&(i^l))+r[0]+3614090360&4294967295;e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[1]+3905402710&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[2]+606105819&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[3]+3250441966&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[4]+4118548399&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[5]+1200080426&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[6]+2821735955&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[7]+4249261313&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[8]+1770035416&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[9]+2336552879&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[10]+4294925233&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[11]+2304563134&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[12]+1804603682&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[13]+4254626195&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[14]+2792965006&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[15]+1236535329&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(i^l&(a^i))+r[1]+4129170786&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[6]+3225465664&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[11]+643717713&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[0]+3921069994&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[5]+3593408605&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[10]+38016083&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[15]+3634488961&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[4]+3889429448&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[9]+568446438&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[14]+3275163606&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[3]+4107603335&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[8]+1163531501&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[13]+2850285829&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[2]+4243563512&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[7]+1735328473&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[12]+2368359562&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(a^i^l)+r[5]+4294588738&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[8]+2272392833&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[11]+1839030562&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[14]+4259657740&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[1]+2763975236&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[4]+1272893353&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[7]+4139469664&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[10]+3200236656&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[13]+681279174&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[0]+3936430074&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[3]+3572445317&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[6]+76029189&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[9]+3654602809&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[12]+3873151461&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[15]+530742520&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[2]+3299628645&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(i^(a|~l))+r[0]+4096336452&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[7]+1126891415&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[14]+2878612391&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[5]+4237533241&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[12]+1700485571&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[3]+2399980690&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[10]+4293915773&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[1]+2240044497&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[8]+1873313359&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[15]+4264355552&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[6]+2734768916&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[13]+1309151649&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[4]+4149444226&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[11]+3174756917&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[2]+718787259&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+l&4294967295}$p.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var a=e-this.blockSize,r=this.m,i=this.h,l=0;l<e;){if(i==0)for(;l<=a;)ON(this,t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<e;)if(r[i++]=t.charCodeAt(l++),i==this.blockSize){ON(this,r),i=0;break}}else for(;l<e;)if(r[i++]=t[l++],i==this.blockSize){ON(this,r),i=0;break}}this.h=i,this.i+=e};$p.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var a=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=a&255,a/=256;for(this.j(t),t=Array(16),e=a=0;4>e;++e)for(var r=0;32>r;r+=8)t[a++]=this.g[e]>>>r&255;return t};function Zs(t,e){this.h=e;for(var a=[],r=!0,i=t.length-1;0<=i;i--){var l=t[i]|0;r&&l==e||(a[i]=l,r=!1)}this.g=a}var wce={};function Z3(t){return-128<=t&&128>t?Pue(t,function(e){return new Zs([e|0],0>e?-1:0)}):new Zs([t|0],0>t?-1:0)}function Om(t){if(isNaN(t)||!isFinite(t))return s_;if(0>t)return Ic(Om(-t));for(var e=[],a=1,r=0;t>=a;r++)e[r]=t/a|0,a*=KD;return new Zs(e,0)}function ZW(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ic(ZW(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=Om(Math.pow(e,8)),r=s_,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),e);8>l?(l=Om(Math.pow(e,l)),r=r.R(l).add(Om(c))):(r=r.R(a),r=r.add(Om(c)))}return r}var KD=4294967296,s_=Z3(0),WD=Z3(1),lU=Z3(16777216);jr=Zs.prototype;jr.ea=function(){if(Jf(this))return-Ic(this).ea();for(var t=0,e=1,a=0;a<this.g.length;a++){var r=this.D(a);t+=(0<=r?r:KD+r)*e,e*=KD}return t};jr.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Rg(this))return"0";if(Jf(this))return"-"+Ic(this).toString(t);for(var e=Om(Math.pow(t,6)),a=this,r="";;){var i=Jb(a,e).g;a=Xb(a,i.R(e));var l=((0<a.g.length?a.g[0]:a.h)>>>0).toString(t);if(a=i,Rg(a))return l+r;for(;6>l.length;)l="0"+l;r=l+r}};jr.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Rg(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Jf(t){return t.h==-1}jr.X=function(t){return t=Xb(this,t),Jf(t)?-1:Rg(t)?0:1};function Ic(t){for(var e=t.g.length,a=[],r=0;r<e;r++)a[r]=~t.g[r];return new Zs(a,~t.h).add(WD)}jr.abs=function(){return Jf(this)?Ic(this):this};jr.add=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0,i=0;i<=e;i++){var l=r+(this.D(i)&65535)+(t.D(i)&65535),c=(l>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=c>>>16,l&=65535,c&=65535,a[i]=c<<16|l}return new Zs(a,a[a.length-1]&-2147483648?-1:0)};function Xb(t,e){return t.add(Ic(e))}jr.R=function(t){if(Rg(this)||Rg(t))return s_;if(Jf(this))return Jf(t)?Ic(this).R(Ic(t)):Ic(Ic(this).R(t));if(Jf(t))return Ic(this.R(Ic(t)));if(0>this.X(lU)&&0>t.X(lU))return Om(this.ea()*t.ea());for(var e=this.g.length+t.g.length,a=[],r=0;r<2*e;r++)a[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var l=this.D(r)>>>16,c=this.D(r)&65535,n=t.D(i)>>>16,v=t.D(i)&65535;a[2*r+2*i]+=c*v,MS(a,2*r+2*i),a[2*r+2*i+1]+=l*v,MS(a,2*r+2*i+1),a[2*r+2*i+1]+=c*n,MS(a,2*r+2*i+1),a[2*r+2*i+2]+=l*n,MS(a,2*r+2*i+2)}for(r=0;r<e;r++)a[r]=a[2*r+1]<<16|a[2*r];for(r=e;r<2*e;r++)a[r]=0;return new Zs(a,0)};function MS(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fw(t,e){this.g=t,this.h=e}function Jb(t,e){if(Rg(e))throw Error("division by zero");if(Rg(t))return new Fw(s_,s_);if(Jf(t))return e=Jb(Ic(t),e),new Fw(Ic(e.g),Ic(e.h));if(Jf(e))return e=Jb(t,Ic(e)),new Fw(Ic(e.g),e.h);if(30<t.g.length){if(Jf(t)||Jf(e))throw Error("slowDivide_ only works with positive integers.");for(var a=WD,r=e;0>=r.X(t);)a=uU(a),r=uU(r);var i=M0(a,1),l=M0(r,1);for(r=M0(r,2),a=M0(a,2);!Rg(r);){var c=l.add(r);0>=c.X(t)&&(i=i.add(a),l=c),r=M0(r,1),a=M0(a,1)}return e=Xb(t,i.R(e)),new Fw(i,e)}for(i=s_;0<=t.X(e);){for(a=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(a)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),l=Om(a),c=l.R(e);Jf(c)||0<c.X(t);)a-=r,l=Om(a),c=l.R(e);Rg(l)&&(l=WD),i=i.add(l),t=Xb(t,c)}return new Fw(i,t)}jr.gb=function(t){return Jb(this,t).h};jr.and=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)&t.D(r);return new Zs(a,this.h&t.h)};jr.or=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)|t.D(r);return new Zs(a,this.h|t.h)};jr.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)^t.D(r);return new Zs(a,this.h^t.h)};function uU(t){for(var e=t.g.length+1,a=[],r=0;r<e;r++)a[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Zs(a,t.h)}function M0(t,e){var a=e>>5;e%=32;for(var r=t.g.length-a,i=[],l=0;l<r;l++)i[l]=0<e?t.D(l+a)>>>e|t.D(l+a+1)<<32-e:t.D(l+a);return new Zs(i,t.h)}Yb.prototype.createWebChannel=Yb.prototype.g;wf.prototype.send=wf.prototype.u;wf.prototype.open=wf.prototype.m;wf.prototype.close=wf.prototype.close;k2.NO_ERROR=0;k2.TIMEOUT=8;k2.HTTP_ERROR=6;lW.COMPLETE="complete";uW.EventType=HT;HT.OPEN="a";HT.CLOSE="b";HT.ERROR="c";HT.MESSAGE="d";cc.prototype.listen=cc.prototype.O;El.prototype.listenOnce=El.prototype.P;El.prototype.getLastError=El.prototype.Sa;El.prototype.getLastErrorCode=El.prototype.Ia;El.prototype.getStatus=El.prototype.da;El.prototype.getResponseJson=El.prototype.Wa;El.prototype.getResponseText=El.prototype.ja;El.prototype.send=El.prototype.ha;El.prototype.setWithCredentials=El.prototype.Oa;$p.prototype.digest=$p.prototype.l;$p.prototype.reset=$p.prototype.reset;$p.prototype.update=$p.prototype.j;Zs.prototype.add=Zs.prototype.add;Zs.prototype.multiply=Zs.prototype.R;Zs.prototype.modulo=Zs.prototype.gb;Zs.prototype.compare=Zs.prototype.X;Zs.prototype.toNumber=Zs.prototype.ea;Zs.prototype.toString=Zs.prototype.toString;Zs.prototype.getBits=Zs.prototype.D;Zs.fromNumber=Om;Zs.fromString=ZW;var Rce=function(){return new Yb},Tce=function(){return F2()},VN=k2,Cce=lW,Sce=Uv,cU={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bce=WT,IS=uW,xce=El,Pce=$p,o_=Zs;const dU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pd.UNAUTHENTICATED=new pd(null),pd.GOOGLE_CREDENTIALS=new pd("google-credentials-uid"),pd.FIRST_PARTY=new pd("first-party-uid"),pd.MOCK_USER=new pd("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h1="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new h3("@firebase/firestore");function hU(){return Ev.logLevel}function yn(t,...e){if(Ev.logLevel<=_s.DEBUG){const a=e.map(q3);Ev.debug(`Firestore (${h1}): ${t}`,...a)}}function zg(t,...e){if(Ev.logLevel<=_s.ERROR){const a=e.map(q3);Ev.error(`Firestore (${h1}): ${t}`,...a)}}function __(t,...e){if(Ev.logLevel<=_s.WARN){const a=e.map(q3);Ev.warn(`Firestore (${h1}): ${t}`,...a)}}function q3(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t="Unexpected state"){const e=`FIRESTORE (${h1}) INTERNAL ASSERTION FAILED: `+t;throw zg(e),new Error(e)}function Fo(t,e){t||ri()}function gi(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let qr=class extends Km{constructor(e,a){super(e,a),this.code=e,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xg=class{constructor(){this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qW=class{constructor(e,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ece=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,a){e.enqueueRetryable(()=>a(pd.UNAUTHENTICATED))}shutdown(){}},Nce=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,a){this.changeListener=a,e.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}},Oce=class{constructor(e){this.t=e,this.currentUser=pd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,a){let r=this.i;const i=v=>this.i!==r?(r=this.i,a(v)):Promise.resolve();let l=new xg;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xg,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const v=l;e.enqueueRetryable(async()=>{await v.promise,await i(this.currentUser)})},n=v=>{yn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(v=>n(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?n(v):(yn("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xg)}},0),c()}getToken(){const e=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(r=>this.i!==e?(yn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fo(typeof r.accessToken=="string"),new qW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Fo(e===null||typeof e=="string"),new pd(e)}},Vce=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r,this.type="FirstParty",this.user=pd.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},zce=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r}getToken(){return Promise.resolve(new Vce(this.h,this.l,this.m))}start(e,a){e.enqueueRetryable(()=>a(pd.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Dce=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mce=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,a){const r=l=>{l.error!=null&&yn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.T;return this.T=l.token,yn("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?a(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{yn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?i(l):yn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(a=>a?(Fo(typeof a.token=="string"),this.T=a.token,new Dce(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ice(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(a);else for(let r=0;r<t;r++)a[r]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HW=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ice(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<a&&(r+=e.charAt(i[l]%e.length))}return r}};function Cs(t,e){return t<e?-1:t>e?1:0}function w_(t,e,a){return t.length===e.length&&t.every((r,i)=>a(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=class gb{constructor(e,a){if(this.seconds=e,this.nanoseconds=a,a<0)throw new qr(rr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new qr(rr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(e<-62135596800)throw new qr(rr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qr(rr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gb.fromMillis(Date.now())}static fromDate(e){return gb.fromMillis(e.getTime())}static fromMillis(e){const a=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*a));return new gb(a,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Cs(this.nanoseconds,e.nanoseconds):Cs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pi=class yb{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yb(e)}static min(){return new yb(new uh(0,0))}static max(){return new yb(new uh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $W=class YD{constructor(e,a,r){a===void 0?a=0:a>e.length&&ri(),r===void 0?r=e.length-a:r>e.length-a&&ri(),this.segments=e,this.offset=a,this.len=r}get length(){return this.len}isEqual(e){return YD.comparator(this,e)===0}child(e){const a=this.segments.slice(this.offset,this.limit());return e instanceof YD?e.forEach(r=>{a.push(r)}):a.push(e),this.construct(a)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}forEach(e){for(let a=this.offset,r=this.limit();a<r;a++)e(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,a){const r=Math.min(e.length,a.length);for(let i=0;i<r;i++){const l=e.get(i),c=a.get(i);if(l<c)return-1;if(l>c)return 1}return e.length<a.length?-1:e.length>a.length?1:0}},ql=class Ab extends $W{construct(e,a,r){return new Ab(e,a,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const a=[];for(const r of e){if(r.indexOf("//")>=0)throw new qr(rr.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);a.push(...r.split("/").filter(i=>i.length>0))}return new Ab(a)}static emptyPath(){return new Ab([])}};const Lce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Gm=class G0 extends $W{construct(e,a,r){return new G0(e,a,r)}static isValidIdentifier(e){return Lce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),G0.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new G0(["__name__"])}static fromServerFormat(e){const a=[];let r="",i=0;const l=()=>{if(r.length===0)throw new qr(rr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(r),r=""};let c=!1;for(;i<e.length;){const n=e[i];if(n==="\\"){if(i+1===e.length)throw new qr(rr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new qr(rr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else n==="`"?(c=!c,i++):n!=="."||c?(r+=n,i++):(l(),i++)}if(l(),c)throw new qr(rr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new G0(a)}static emptyPath(){return new G0([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xn=class oR{constructor(e){this.path=e}static fromPath(e){return new oR(ql.fromString(e))}static fromName(e){return new oR(ql.fromString(e).popFirst(5))}static empty(){return new oR(ql.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ql.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,a){return ql.comparator(e.path,a.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oR(new ql(e.slice()))}};function Fce(t,e){const a=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Pi.fromTimestamp(r===1e9?new uh(a+1,0):new uh(a,r));return new qR(i,Xn.empty(),e)}function kce(t){return new qR(t.readTime,t.key,-1)}let qR=class XD{constructor(e,a,r){this.readTime=e,this.documentKey=a,this.largestBatchId=r}static min(){return new XD(Pi.min(),Xn.empty(),-1)}static max(){return new XD(Pi.max(),Xn.empty(),-1)}};function Uce(t,e){let a=t.readTime.compareTo(e.readTime);return a!==0?a:(a=Xn.comparator(t.documentKey,e.documentKey),a!==0?a:Cs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let jce=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(t){if(t.code!==rr.FAILED_PRECONDITION||t.message!==Bce)throw t;yn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ir=class Mh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(e){return this.next(void 0,e)}next(e,a){return this.callbackAttached&&ri(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(e,this.result):new Mh((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(a,l).next(r,i)}})}toPromise(){return new Promise((e,a)=>{this.next(e,a)})}wrapUserFunction(e){try{const a=e();return a instanceof Mh?a:Mh.resolve(a)}catch(a){return Mh.reject(a)}}wrapSuccess(e,a){return e?this.wrapUserFunction(()=>e(a)):Mh.resolve(a)}wrapFailure(e,a){return e?this.wrapUserFunction(()=>e(a)):Mh.reject(a)}static resolve(e){return new Mh((a,r)=>{a(e)})}static reject(e){return new Mh((a,r)=>{r(e)})}static waitFor(e){return new Mh((a,r)=>{let i=0,l=0,c=!1;e.forEach(n=>{++i,n.next(()=>{++l,c&&l===i&&a()},v=>r(v))}),c=!0,l===i&&a()})}static or(e){let a=Mh.resolve(!1);for(const r of e)a=a.next(i=>i?Mh.resolve(i):r());return a}static forEach(e,a){const r=[];return e.forEach((i,l)=>{r.push(a.call(this,i,l))}),this.waitFor(r)}static mapArray(e,a){return new Mh((r,i)=>{const l=e.length,c=new Array(l);let n=0;for(let v=0;v<l;v++){const R=v;a(e[R]).next(x=>{c[R]=x,++n,n===l&&r(c)},x=>i(x))}})}static doWhile(e,a){return new Mh((r,i)=>{const l=()=>{e()===!0?a().next(()=>{l()},i):r()};l()})}};function QT(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H3=class{constructor(e,a){this.previousValue=e,a&&(a.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>a.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};H3.ct=-1;function $2(t){return t==null}function Qb(t){return t===0&&1/t==-1/0}function Gce(t){return typeof t=="number"&&Number.isInteger(t)&&!Qb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e}function Bv(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e(a,t[a])}function KW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au=class JD{constructor(e,a){this.comparator=e,this.root=a||Mc.EMPTY}insert(e,a){return new JD(this.comparator,this.root.insert(e,a,this.comparator).copy(null,null,Mc.BLACK,null,null))}remove(e){return new JD(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mc.BLACK,null,null))}get(e){let a=this.root;for(;!a.isEmpty();){const r=this.comparator(e,a.key);if(r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}indexOf(e){let a=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return a+r.left.size;i<0?r=r.left:(a+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((a,r)=>(e(a,r),!1))}toString(){const e=[];return this.inorderTraversal((a,r)=>(e.push(`${a}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new LS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new LS(this.root,e,this.comparator,!1)}getReverseIterator(){return new LS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new LS(this.root,e,this.comparator,!0)}};class LS{constructor(e,a,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=a?r(e.key,a):1,a&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const a={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mc{constructor(e,a,r,i,l){this.key=e,this.value=a,this.color=r??Mc.RED,this.left=i??Mc.EMPTY,this.right=l??Mc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,a,r,i,l){return new Mc(e??this.key,a??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,a,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,a,r),null):l===0?i.copy(null,a,null,null,null):i.copy(null,null,null,null,i.right.insert(e,a,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,a){let r,i=this;if(a(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,a),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),a(e,i.key)===0){if(i.right.isEmpty())return Mc.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,a))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,a)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ri();const e=this.left.check();if(e!==this.right.check())throw ri();return e+(this.isRed()?0:1)}}Mc.EMPTY=null,Mc.RED=!0,Mc.BLACK=!1;Mc.EMPTY=new class{constructor(){this.size=0}get key(){throw ri()}get value(){throw ri()}get color(){throw ri()}get left(){throw ri()}get right(){throw ri()}copy(t,e,a,r,i){return this}insert(t,e,a){return new Mc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.comparator=e,this.data=new Au(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((a,r)=>(e(a),!1))}forEachInRange(e,a){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;a(i.key)}}forEachWhile(e,a){let r;for(r=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const a=this.data.getIteratorFrom(e);return a.hasNext()?a.getNext().key:null}getIterator(){return new pU(this.data.getIterator())}getIteratorFrom(e){return new pU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let a=this;return a.size<e.size&&(a=e,e=this),e.forEach(r=>{a=a.add(r)}),a}isEqual(e){if(!(e instanceof Cd)||this.size!==e.size)return!1;const a=this.data.getIterator(),r=e.data.getIterator();for(;a.hasNext();){const i=a.getNext().key,l=r.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(a=>{e.push(a)}),e}toString(){const e=[];return this.forEach(a=>e.push(a)),"SortedSet("+e.toString()+")"}copy(e){const a=new Cd(this.comparator);return a.data=e,a}}class pU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e){this.fields=e,e.sort(Gm.comparator)}static empty(){return new gf([])}unionWith(e){let a=new Cd(Gm.comparator);for(const r of this.fields)a=a.add(r);for(const r of e)a=a.add(r);return new gf(a.toArray())}covers(e){for(const a of this.fields)if(a.isPrefixOf(e))return!0;return!1}isEqual(e){return w_(this.fields,e.fields,(a,r)=>a.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.binaryString=e}static fromBase64String(e){const a=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new WW("Invalid base64 string: "+i):i}}(e);return new xd(a)}static fromUint8Array(e){const a=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new xd(a)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const a=new Uint8Array(e.length);for(let r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xd.EMPTY_BYTE_STRING=new xd("");const Zce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yy(t){if(Fo(!!t),typeof t=="string"){let e=0;const a=Zce.exec(t);if(Fo(!!a),a[1]){let i=a[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pu(t.seconds),nanos:pu(t.nanos)}}function pu(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nv(t){return typeof t=="string"?xd.fromBase64String(t):xd.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){var e,a;return((a=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function K3(t){const e=t.mapValue.fields.__previous_value__;return $3(e)?K3(e):e}function HR(t){const e=Yy(t.mapValue.fields.__local_write_time__.timestampValue);return new uh(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qce{constructor(e,a,r,i,l,c,n,v,R){this.databaseId=e,this.appId=a,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=n,this.longPollingOptions=v,this.useFetchStreams=R}}class $R{constructor(e,a){this.projectId=e,this.database=a||"(default)"}static empty(){return new $R("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $R&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={mapValue:{}};function Ov(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$3(t)?4:Hce(t)?9007199254740991:10:ri()}function Zm(t,e){if(t===e)return!0;const a=Ov(t);if(a!==Ov(e))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return HR(t).isEqual(HR(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Yy(r.timestampValue),c=Yy(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Nv(r.bytesValue).isEqual(Nv(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return pu(r.geoPointValue.latitude)===pu(i.geoPointValue.latitude)&&pu(r.geoPointValue.longitude)===pu(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return pu(r.integerValue)===pu(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=pu(r.doubleValue),c=pu(i.doubleValue);return l===c?Qb(l)===Qb(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return w_(t.arrayValue.values||[],e.arrayValue.values||[],Zm);case 10:return function(r,i){const l=r.mapValue.fields||{},c=i.mapValue.fields||{};if(fU(l)!==fU(c))return!1;for(const n in l)if(l.hasOwnProperty(n)&&(c[n]===void 0||!Zm(l[n],c[n])))return!1;return!0}(t,e);default:return ri()}}function KR(t,e){return(t.values||[]).find(a=>Zm(a,e))!==void 0}function R_(t,e){if(t===e)return 0;const a=Ov(t),r=Ov(e);if(a!==r)return Cs(a,r);switch(a){case 0:case 9007199254740991:return 0;case 1:return Cs(t.booleanValue,e.booleanValue);case 2:return function(i,l){const c=pu(i.integerValue||i.doubleValue),n=pu(l.integerValue||l.doubleValue);return c<n?-1:c>n?1:c===n?0:isNaN(c)?isNaN(n)?0:-1:1}(t,e);case 3:return mU(t.timestampValue,e.timestampValue);case 4:return mU(HR(t),HR(e));case 5:return Cs(t.stringValue,e.stringValue);case 6:return function(i,l){const c=Nv(i),n=Nv(l);return c.compareTo(n)}(t.bytesValue,e.bytesValue);case 7:return function(i,l){const c=i.split("/"),n=l.split("/");for(let v=0;v<c.length&&v<n.length;v++){const R=Cs(c[v],n[v]);if(R!==0)return R}return Cs(c.length,n.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,l){const c=Cs(pu(i.latitude),pu(l.latitude));return c!==0?c:Cs(pu(i.longitude),pu(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,l){const c=i.values||[],n=l.values||[];for(let v=0;v<c.length&&v<n.length;++v){const R=R_(c[v],n[v]);if(R)return R}return Cs(c.length,n.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,l){if(i===FS.mapValue&&l===FS.mapValue)return 0;if(i===FS.mapValue)return 1;if(l===FS.mapValue)return-1;const c=i.fields||{},n=Object.keys(c),v=l.fields||{},R=Object.keys(v);n.sort(),R.sort();for(let x=0;x<n.length&&x<R.length;++x){const N=Cs(n[x],R[x]);if(N!==0)return N;const L=R_(c[n[x]],v[R[x]]);if(L!==0)return L}return Cs(n.length,R.length)}(t.mapValue,e.mapValue);default:throw ri()}}function mU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Cs(t,e);const a=Yy(t),r=Yy(e),i=Cs(a.seconds,r.seconds);return i!==0?i:Cs(a.nanos,r.nanos)}function T_(t){return QD(t)}function QD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Yy(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Nv(t.bytesValue).toBase64():"referenceValue"in t?(a=t.referenceValue,Xn.fromName(a).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",l=!0;for(const c of r.values||[])l?l=!1:i+=",",i+=QD(c);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const n of i)c?c=!1:l+=",",l+=`${n}:${QD(r.fields[n])}`;return l+"}"}(t.mapValue):ri();var e,a}function gU(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function eM(t){return!!t&&"integerValue"in t}function W3(t){return!!t&&"arrayValue"in t}function yU(t){return!!t&&"nullValue"in t}function AU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vb(t){return!!t&&"mapValue"in t}function gR(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bv(t.mapValue.fields,(a,r)=>e.mapValue.fields[a]=gR(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let a=0;a<(t.arrayValue.values||[]).length;++a)e.arrayValue.values[a]=gR(t.arrayValue.values[a]);return e}return Object.assign({},t)}function Hce(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.value=e}static empty(){return new Ih({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let a=this.value;for(let r=0;r<e.length-1;++r)if(a=(a.mapValue.fields||{})[e.get(r)],!vb(a))return null;return a=(a.mapValue.fields||{})[e.lastSegment()],a||null}}set(e,a){this.getFieldsMap(e.popLast())[e.lastSegment()]=gR(a)}setAll(e){let a=Gm.emptyPath(),r={},i=[];e.forEach((c,n)=>{if(!a.isImmediateParentOf(n)){const v=this.getFieldsMap(a);this.applyChanges(v,r,i),r={},i=[],a=n.popLast()}c?r[n.lastSegment()]=gR(c):i.push(n.lastSegment())});const l=this.getFieldsMap(a);this.applyChanges(l,r,i)}delete(e){const a=this.field(e.popLast());vb(a)&&a.mapValue.fields&&delete a.mapValue.fields[e.lastSegment()]}isEqual(e){return Zm(this.value,e.value)}getFieldsMap(e){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=a.mapValue.fields[e.get(r)];vb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},a.mapValue.fields[e.get(r)]=i),a=i}return a.mapValue.fields}applyChanges(e,a,r){Bv(a,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new Ih(gR(this.value))}}function YW(t){const e=[];return Bv(t.fields,(a,r)=>{const i=new Gm([a]);if(vb(r)){const l=YW(r.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)}),new gf(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,a,r,i,l,c,n){this.key=e,this.documentType=a,this.version=r,this.readTime=i,this.createTime=l,this.data=c,this.documentState=n}static newInvalidDocument(e){return new yd(e,0,Pi.min(),Pi.min(),Pi.min(),Ih.empty(),0)}static newFoundDocument(e,a,r,i){return new yd(e,1,a,Pi.min(),r,i,0)}static newNoDocument(e,a){return new yd(e,2,a,Pi.min(),Pi.min(),Ih.empty(),0)}static newUnknownDocument(e,a){return new yd(e,3,a,Pi.min(),Pi.min(),Ih.empty(),2)}convertToFoundDocument(e,a){return!this.createTime.isEqual(Pi.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ih.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ih.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,a){this.position=e,this.inclusive=a}}function vU(t,e,a){let r=0;for(let i=0;i<t.position.length;i++){const l=e[i],c=t.position[i];if(l.field.isKeyField()?r=Xn.comparator(Xn.fromName(c.referenceValue),a.key):r=R_(c,a.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function _U(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let a=0;a<t.position.length;a++)if(!Zm(t.position[a],e.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,a="asc"){this.field=e,this.dir=a}}function $ce(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{}class gu extends XW{constructor(e,a,r){super(),this.field=e,this.op=a,this.value=r}static create(e,a,r){return e.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(e,a,r):new Wce(e,a,r):a==="array-contains"?new Jce(e,r):a==="in"?new Qce(e,r):a==="not-in"?new ede(e,r):a==="array-contains-any"?new tde(e,r):new gu(e,a,r)}static createKeyFieldInFilter(e,a,r){return a==="in"?new Yce(e,r):new Xce(e,r)}matches(e){const a=e.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(R_(a,this.value)):a!==null&&Ov(this.value)===Ov(a)&&this.matchesComparison(R_(a,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ri()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Kp extends XW{constructor(e,a){super(),this.filters=e,this.op=a,this.lt=null}static create(e,a){return new Kp(e,a)}matches(e){return JW(this)?this.filters.find(a=>!a.matches(e))===void 0:this.filters.find(a=>a.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,a)=>e.concat(a.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(a=>a.isInequality());return e!==null?e.field:null}ft(e){for(const a of this.getFlattenedFilters())if(e(a))return a;return null}}function JW(t){return t.op==="and"}function QW(t){return Kce(t)&&JW(t)}function Kce(t){for(const e of t.filters)if(e instanceof Kp)return!1;return!0}function tM(t){if(t instanceof gu)return t.field.canonicalString()+t.op.toString()+T_(t.value);if(QW(t))return t.filters.map(e=>tM(e)).join(",");{const e=t.filters.map(a=>tM(a)).join(",");return`${t.op}(${e})`}}function eY(t,e){return t instanceof gu?function(a,r){return r instanceof gu&&a.op===r.op&&a.field.isEqual(r.field)&&Zm(a.value,r.value)}(t,e):t instanceof Kp?function(a,r){return r instanceof Kp&&a.op===r.op&&a.filters.length===r.filters.length?a.filters.reduce((i,l,c)=>i&&eY(l,r.filters[c]),!0):!1}(t,e):void ri()}function tY(t){return t instanceof gu?function(e){return`${e.field.canonicalString()} ${e.op} ${T_(e.value)}`}(t):t instanceof Kp?function(e){return e.op.toString()+" {"+e.getFilters().map(tY).join(" ,")+"}"}(t):"Filter"}class Wce extends gu{constructor(e,a,r){super(e,a,r),this.key=Xn.fromName(r.referenceValue)}matches(e){const a=Xn.comparator(e.key,this.key);return this.matchesComparison(a)}}class Yce extends gu{constructor(e,a){super(e,"in",a),this.keys=aY("in",a)}matches(e){return this.keys.some(a=>a.isEqual(e.key))}}class Xce extends gu{constructor(e,a){super(e,"not-in",a),this.keys=aY("not-in",a)}matches(e){return!this.keys.some(a=>a.isEqual(e.key))}}function aY(t,e){var a;return(((a=e.arrayValue)===null||a===void 0?void 0:a.values)||[]).map(r=>Xn.fromName(r.referenceValue))}class Jce extends gu{constructor(e,a){super(e,"array-contains",a)}matches(e){const a=e.data.field(this.field);return W3(a)&&KR(a.arrayValue,this.value)}}class Qce extends gu{constructor(e,a){super(e,"in",a)}matches(e){const a=e.data.field(this.field);return a!==null&&KR(this.value.arrayValue,a)}}class ede extends gu{constructor(e,a){super(e,"not-in",a)}matches(e){if(KR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=e.data.field(this.field);return a!==null&&!KR(this.value.arrayValue,a)}}class tde extends gu{constructor(e,a){super(e,"array-contains-any",a)}matches(e){const a=e.data.field(this.field);return!(!W3(a)||!a.arrayValue.values)&&a.arrayValue.values.some(r=>KR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(e,a=null,r=[],i=[],l=null,c=null,n=null){this.path=e,this.collectionGroup=a,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=c,this.endAt=n,this.dt=null}}function wU(t,e=null,a=[],r=[],i=null,l=null,c=null){return new ade(t,e,a,r,i,l,c)}function Y3(t){const e=gi(t);if(e.dt===null){let a=e.path.canonicalString();e.collectionGroup!==null&&(a+="|cg:"+e.collectionGroup),a+="|f:",a+=e.filters.map(r=>tM(r)).join(","),a+="|ob:",a+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$2(e.limit)||(a+="|l:",a+=e.limit),e.startAt&&(a+="|lb:",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>T_(r)).join(",")),e.endAt&&(a+="|ub:",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>T_(r)).join(",")),e.dt=a}return e.dt}function X3(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<t.orderBy.length;a++)if(!$ce(t.orderBy[a],e.orderBy[a]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let a=0;a<t.filters.length;a++)if(!eY(t.filters[a],e.filters[a]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_U(t.startAt,e.startAt)&&_U(t.endAt,e.endAt)}function aM(t){return Xn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,a=null,r=[],i=[],l=null,c="F",n=null,v=null){this.path=e,this.collectionGroup=a,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=c,this.startAt=n,this.endAt=v,this.wt=null,this._t=null,this.startAt,this.endAt}}function rde(t,e,a,r,i,l,c,n){return new f1(t,e,a,r,i,l,c,n)}function K2(t){return new f1(t)}function RU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function J3(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function W2(t){for(const e of t.filters){const a=e.getFirstInequalityField();if(a!==null)return a}return null}function rY(t){return t.collectionGroup!==null}function u_(t){const e=gi(t);if(e.wt===null){e.wt=[];const a=W2(e),r=J3(e);if(a!==null&&r===null)a.isKeyField()||e.wt.push(new l_(a)),e.wt.push(new l_(Gm.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new l_(Gm.keyField(),l))}}}return e.wt}function Dg(t){const e=gi(t);if(!e._t)if(e.limitType==="F")e._t=wU(e.path,e.collectionGroup,u_(e),e.filters,e.limit,e.startAt,e.endAt);else{const a=[];for(const l of u_(e)){const c=l.dir==="desc"?"asc":"desc";a.push(new l_(l.field,c))}const r=e.endAt?new ex(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ex(e.startAt.position,e.startAt.inclusive):null;e._t=wU(e.path,e.collectionGroup,a,e.filters,e.limit,r,i)}return e._t}function rM(t,e){e.getFirstInequalityField(),W2(t);const a=t.filters.concat([e]);return new f1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),a,t.limit,t.limitType,t.startAt,t.endAt)}function nM(t,e,a){return new f1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,a,t.startAt,t.endAt)}function Y2(t,e){return X3(Dg(t),Dg(e))&&t.limitType===e.limitType}function nY(t){return`${Y3(Dg(t))}|lt:${t.limitType}`}function iM(t){return`Query(target=${function(e){let a=e.path.canonicalString();return e.collectionGroup!==null&&(a+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(a+=`, filters: [${e.filters.map(r=>tY(r)).join(", ")}]`),$2(e.limit)||(a+=", limit: "+e.limit),e.orderBy.length>0&&(a+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(a+=", startAt: ",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>T_(r)).join(",")),e.endAt&&(a+=", endAt: ",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>T_(r)).join(",")),`Target(${a})`}(Dg(t))}; limitType=${t.limitType})`}function X2(t,e){return e.isFoundDocument()&&function(a,r){const i=r.key.path;return a.collectionGroup!==null?r.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(i):Xn.isDocumentKey(a.path)?a.path.isEqual(i):a.path.isImmediateParentOf(i)}(t,e)&&function(a,r){for(const i of u_(a))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(a,r){for(const i of a.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(a,r){return!(a.startAt&&!function(i,l,c){const n=vU(i,l,c);return i.inclusive?n<=0:n<0}(a.startAt,u_(a),r)||a.endAt&&!function(i,l,c){const n=vU(i,l,c);return i.inclusive?n>=0:n>0}(a.endAt,u_(a),r))}(t,e)}function nde(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iY(t){return(e,a)=>{let r=!1;for(const i of u_(t)){const l=ide(i,e,a);if(l!==0)return l;r=r||i.field.isKeyField()}return 0}}function ide(t,e,a){const r=t.field.isKeyField()?Xn.comparator(e.key,a.key):function(i,l,c){const n=l.data.field(i),v=c.data.field(i);return n!==null&&v!==null?R_(n,v):ri()}(t.field,e,a);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ri()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,a){this.mapKeyFn=e,this.equalsFn=a,this.inner={},this.innerSize=0}get(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r!==void 0){for(const[i,l]of r)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,a){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,a]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,a]);i.push([e,a]),this.innerSize++}delete(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[a]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bv(this.inner,(a,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return KW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sde=new Au(Xn.comparator);function Mg(){return sde}const sY=new Au(Xn.comparator);function lR(...t){let e=sY;for(const a of t)e=e.insert(a.key,a);return e}function oY(t){let e=sY;return t.forEach((a,r)=>e=e.insert(a,r.overlayedDocument)),e}function dv(){return yR()}function lY(){return yR()}function yR(){return new p1(t=>t.toString(),(t,e)=>t.isEqual(e))}const ode=new Au(Xn.comparator),lde=new Cd(Xn.comparator);function Hi(...t){let e=lde;for(const a of t)e=e.add(a);return e}const ude=new Cd(Cs);function cde(){return ude}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uY(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qb(e)?"-0":e}}function cY(t){return{integerValue:""+t}}function dde(t,e){return Gce(e)?cY(e):uY(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this._=void 0}}function hde(t,e,a){return t instanceof tx?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&$3(i)&&(i=K3(i)),i&&(l.fields.__previous_value__=i),{mapValue:l}}(a,e):t instanceof WR?hY(t,e):t instanceof YR?fY(t,e):function(r,i){const l=dY(r,i),c=TU(l)+TU(r.gt);return eM(l)&&eM(r.gt)?cY(c):uY(r.serializer,c)}(t,e)}function fde(t,e,a){return t instanceof WR?hY(t,e):t instanceof YR?fY(t,e):a}function dY(t,e){return t instanceof ax?eM(a=e)||function(r){return!!r&&"doubleValue"in r}(a)?e:{integerValue:0}:null;var a}class tx extends J2{}class WR extends J2{constructor(e){super(),this.elements=e}}function hY(t,e){const a=pY(e);for(const r of t.elements)a.some(i=>Zm(i,r))||a.push(r);return{arrayValue:{values:a}}}class YR extends J2{constructor(e){super(),this.elements=e}}function fY(t,e){let a=pY(e);for(const r of t.elements)a=a.filter(i=>!Zm(i,r));return{arrayValue:{values:a}}}class ax extends J2{constructor(e,a){super(),this.serializer=e,this.gt=a}}function TU(t){return pu(t.integerValue||t.doubleValue)}function pY(t){return W3(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pde(t,e){return t.field.isEqual(e.field)&&function(a,r){return a instanceof WR&&r instanceof WR||a instanceof YR&&r instanceof YR?w_(a.elements,r.elements,Zm):a instanceof ax&&r instanceof ax?Zm(a.gt,r.gt):a instanceof tx&&r instanceof tx}(t.transform,e.transform)}class mde{constructor(e,a){this.version=e,this.transformResults=a}}class ch{constructor(e,a){this.updateTime=e,this.exists=a}static none(){return new ch}static exists(e){return new ch(void 0,e)}static updateTime(e){return new ch(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _b(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Q2{}function mY(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new eP(t.key,ch.none()):new eC(t.key,t.data,ch.none());{const a=t.data,r=Ih.empty();let i=new Cd(Gm.comparator);for(let l of e.fields)if(!i.has(l)){let c=a.field(l);c===null&&l.length>1&&(l=l.popLast(),c=a.field(l)),c===null?r.delete(l):r.set(l,c),i=i.add(l)}return new iA(t.key,r,new gf(i.toArray()),ch.none())}}function gde(t,e,a){t instanceof eC?function(r,i,l){const c=r.value.clone(),n=SU(r.fieldTransforms,i,l.transformResults);c.setAll(n),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,a):t instanceof iA?function(r,i,l){if(!_b(r.precondition,i))return void i.convertToUnknownDocument(l.version);const c=SU(r.fieldTransforms,i,l.transformResults),n=i.data;n.setAll(gY(r)),n.setAll(c),i.convertToFoundDocument(l.version,n).setHasCommittedMutations()}(t,e,a):function(r,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,a)}function AR(t,e,a,r){return t instanceof eC?function(i,l,c,n){if(!_b(i.precondition,l))return c;const v=i.value.clone(),R=bU(i.fieldTransforms,n,l);return v.setAll(R),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),null}(t,e,a,r):t instanceof iA?function(i,l,c,n){if(!_b(i.precondition,l))return c;const v=bU(i.fieldTransforms,n,l),R=l.data;return R.setAll(gY(i)),R.setAll(v),l.convertToFoundDocument(l.version,R).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(x=>x.field))}(t,e,a,r):function(i,l,c){return _b(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,a)}function yde(t,e){let a=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),l=dY(r.transform,i||null);l!=null&&(a===null&&(a=Ih.empty()),a.set(r.field,l))}return a||null}function CU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,r){return a===void 0&&r===void 0||!(!a||!r)&&w_(a,r,(i,l)=>pde(i,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eC extends Q2{constructor(e,a,r,i=[]){super(),this.key=e,this.value=a,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class iA extends Q2{constructor(e,a,r,i,l=[]){super(),this.key=e,this.data=a,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gY(t){const e=new Map;return t.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const r=t.data.field(a);e.set(a,r)}}),e}function SU(t,e,a){const r=new Map;Fo(t.length===a.length);for(let i=0;i<a.length;i++){const l=t[i],c=l.transform,n=e.data.field(l.field);r.set(l.field,fde(c,n,a[i]))}return r}function bU(t,e,a){const r=new Map;for(const i of t){const l=i.transform,c=a.data.field(i.field);r.set(i.field,hde(l,c,e))}return r}class eP extends Q2{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ade extends Q2{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vde{constructor(e,a,r,i){this.batchId=e,this.localWriteTime=a,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,a){const r=a.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&gde(l,e,r[i])}}applyToLocalView(e,a){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(a=AR(r,e,a,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(a=AR(r,e,a,this.localWriteTime));return a}applyToLocalDocumentSet(e,a){const r=lY();return this.mutations.forEach(i=>{const l=e.get(i.key),c=l.overlayedDocument;let n=this.applyToLocalView(c,l.mutatedFields);n=a.has(i.key)?null:n;const v=mY(c,n);v!==null&&r.set(i.key,v),c.isValidDocument()||c.convertToNoDocument(Pi.min())}),r}keys(){return this.mutations.reduce((e,a)=>e.add(a.key),Hi())}isEqual(e){return this.batchId===e.batchId&&w_(this.mutations,e.mutations,(a,r)=>CU(a,r))&&w_(this.baseMutations,e.baseMutations,(a,r)=>CU(a,r))}}class Q3{constructor(e,a,r,i){this.batch=e,this.commitVersion=a,this.mutationResults=r,this.docVersions=i}static from(e,a,r){Fo(e.mutations.length===r.length);let i=ode;const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,r[c].version);return new Q3(e,a,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _de{constructor(e,a){this.largestBatchId=e,this.mutation=a}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wde{constructor(e,a){this.count=e,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hu,ls;function Rde(t){switch(t){default:return ri();case rr.CANCELLED:case rr.UNKNOWN:case rr.DEADLINE_EXCEEDED:case rr.RESOURCE_EXHAUSTED:case rr.INTERNAL:case rr.UNAVAILABLE:case rr.UNAUTHENTICATED:return!1;case rr.INVALID_ARGUMENT:case rr.NOT_FOUND:case rr.ALREADY_EXISTS:case rr.PERMISSION_DENIED:case rr.FAILED_PRECONDITION:case rr.ABORTED:case rr.OUT_OF_RANGE:case rr.UNIMPLEMENTED:case rr.DATA_LOSS:return!0}}function yY(t){if(t===void 0)return zg("GRPC error has no .code"),rr.UNKNOWN;switch(t){case hu.OK:return rr.OK;case hu.CANCELLED:return rr.CANCELLED;case hu.UNKNOWN:return rr.UNKNOWN;case hu.DEADLINE_EXCEEDED:return rr.DEADLINE_EXCEEDED;case hu.RESOURCE_EXHAUSTED:return rr.RESOURCE_EXHAUSTED;case hu.INTERNAL:return rr.INTERNAL;case hu.UNAVAILABLE:return rr.UNAVAILABLE;case hu.UNAUTHENTICATED:return rr.UNAUTHENTICATED;case hu.INVALID_ARGUMENT:return rr.INVALID_ARGUMENT;case hu.NOT_FOUND:return rr.NOT_FOUND;case hu.ALREADY_EXISTS:return rr.ALREADY_EXISTS;case hu.PERMISSION_DENIED:return rr.PERMISSION_DENIED;case hu.FAILED_PRECONDITION:return rr.FAILED_PRECONDITION;case hu.ABORTED:return rr.ABORTED;case hu.OUT_OF_RANGE:return rr.OUT_OF_RANGE;case hu.UNIMPLEMENTED:return rr.UNIMPLEMENTED;case hu.DATA_LOSS:return rr.DATA_LOSS;default:return ri()}}(ls=hu||(hu={}))[ls.OK=0]="OK",ls[ls.CANCELLED=1]="CANCELLED",ls[ls.UNKNOWN=2]="UNKNOWN",ls[ls.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ls[ls.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ls[ls.NOT_FOUND=5]="NOT_FOUND",ls[ls.ALREADY_EXISTS=6]="ALREADY_EXISTS",ls[ls.PERMISSION_DENIED=7]="PERMISSION_DENIED",ls[ls.UNAUTHENTICATED=16]="UNAUTHENTICATED",ls[ls.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ls[ls.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ls[ls.ABORTED=10]="ABORTED",ls[ls.OUT_OF_RANGE=11]="OUT_OF_RANGE",ls[ls.UNIMPLEMENTED=12]="UNIMPLEMENTED",ls[ls.INTERNAL=13]="INTERNAL",ls[ls.UNAVAILABLE=14]="UNAVAILABLE",ls[ls.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return kS}static getOrCreateInstance(){return kS===null&&(kS=new eL),kS}onExistenceFilterMismatch(e){const a=Symbol();return this.onExistenceFilterMismatchCallbacks.set(a,e),()=>this.onExistenceFilterMismatchCallbacks.delete(a)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(a=>a(e))}}let kS=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tde(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cde=new o_([4294967295,4294967295],0);function xU(t){const e=Tde().encode(t),a=new Pce;return a.update(e),new Uint8Array(a.digest())}function PU(t){const e=new DataView(t.buffer),a=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new o_([a,r],0),new o_([i,l],0)]}class tL{constructor(e,a,r){if(this.bitmap=e,this.padding=a,this.hashCount=r,a<0||a>=8)throw new uR(`Invalid padding: ${a}`);if(r<0)throw new uR(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uR(`Invalid hash count: ${r}`);if(e.length===0&&a!==0)throw new uR(`Invalid padding when bitmap length is 0: ${a}`);this.It=8*e.length-a,this.Tt=o_.fromNumber(this.It)}Et(e,a,r){let i=e.add(a.multiply(o_.fromNumber(r)));return i.compare(Cde)===1&&(i=new o_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const a=xU(e),[r,i]=PU(a);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);if(!this.At(c))return!1}return!0}static create(e,a,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new tL(l,i,a);return r.forEach(n=>c.insert(n)),c}insert(e){if(this.It===0)return;const a=xU(e),[r,i]=PU(a);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);this.Rt(c)}}Rt(e){const a=Math.floor(e/8),r=e%8;this.bitmap[a]|=1<<r}}class uR extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,a,r,i,l){this.snapshotVersion=e,this.targetChanges=a,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,a,r){const i=new Map;return i.set(e,tC.createSynthesizedTargetChangeForCurrentChange(e,a,r)),new tP(Pi.min(),i,new Au(Cs),Mg(),Hi())}}class tC{constructor(e,a,r,i,l){this.resumeToken=e,this.current=a,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,a,r){return new tC(r,a,Hi(),Hi(),Hi())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,a,r,i){this.Pt=e,this.removedTargetIds=a,this.key=r,this.bt=i}}let AY=class{constructor(e,a){this.targetId=e,this.Vt=a}};class vY{constructor(e,a,r=xd.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=a,this.resumeToken=r,this.cause=i}}class EU{constructor(){this.St=0,this.Dt=OU(),this.Ct=xd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Hi(),a=Hi(),r=Hi();return this.Dt.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:a=a.add(i);break;case 1:r=r.add(i);break;default:ri()}}),new tC(this.Ct,this.xt,e,a,r)}Ft(){this.Nt=!1,this.Dt=OU()}Bt(e,a){this.Nt=!0,this.Dt=this.Dt.insert(e,a)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Sde{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Mg(),this.zt=NU(),this.Wt=new Au(Cs)}Ht(e){for(const a of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(a,e.bt):this.Yt(a,e.key,e.bt);for(const a of e.removedTargetIds)this.Yt(a,e.key,e.bt)}Xt(e){this.forEachTarget(e,a=>{const r=this.Zt(a);switch(e.state){case 0:this.te(a)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(a);break;case 3:this.te(a)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(a)&&(this.ee(a),r.$t(e.resumeToken));break;default:ri()}})}forEachTarget(e,a){e.targetIds.length>0?e.targetIds.forEach(a):this.Qt.forEach((r,i)=>{this.te(i)&&a(i)})}ne(e){var a;const r=e.targetId,i=e.Vt.count,l=this.se(r);if(l){const c=l.target;if(aM(c))if(i===0){const n=new Xn(c.path);this.Yt(r,n,yd.newNoDocument(n,Pi.min()))}else Fo(i===1);else{const n=this.ie(r);if(n!==i){const v=this.re(e,n);if(v!==0){this.ee(r);const R=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,R)}(a=eL.instance)===null||a===void 0||a.notifyOnExistenceFilterMismatch(function(R,x,N){var L,F,j,H,q,W;const ee={localCacheCount:x,existenceFilterCount:N.count},oe=N.unchangedNames;return oe&&(ee.bloomFilter={applied:R===0,hashCount:(L=oe==null?void 0:oe.hashCount)!==null&&L!==void 0?L:0,bitmapLength:(H=(j=(F=oe==null?void 0:oe.bits)===null||F===void 0?void 0:F.bitmap)===null||j===void 0?void 0:j.length)!==null&&H!==void 0?H:0,padding:(W=(q=oe==null?void 0:oe.bits)===null||q===void 0?void 0:q.padding)!==null&&W!==void 0?W:0}),ee}(v,n,e.Vt))}}}}re(e,a){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:c=0},hashCount:n=0}=r;let v,R;try{v=Nv(l).toUint8Array()}catch(x){if(x instanceof WW)return __("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{R=new tL(v,c,n)}catch(x){return __(x instanceof uR?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return R.It===0?1:i!==a-this.oe(e.targetId,R)?2:0}oe(e,a){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(l=>{const c=this.Gt.ue(),n=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;a.vt(n)||(this.Yt(e,l,null),i++)}),i}ce(e){const a=new Map;this.Qt.forEach((l,c)=>{const n=this.se(c);if(n){if(l.current&&aM(n.target)){const v=new Xn(n.target.path);this.jt.get(v)!==null||this.ae(c,v)||this.Yt(c,v,yd.newNoDocument(v,e))}l.Mt&&(a.set(c,l.Ot()),l.Ft())}});let r=Hi();this.zt.forEach((l,c)=>{let n=!0;c.forEachWhile(v=>{const R=this.se(v);return!R||R.purpose==="TargetPurposeLimboResolution"||(n=!1,!1)}),n&&(r=r.add(l))}),this.jt.forEach((l,c)=>c.setReadTime(e));const i=new tP(e,a,this.Wt,this.jt,r);return this.jt=Mg(),this.zt=NU(),this.Wt=new Au(Cs),i}Jt(e,a){if(!this.te(e))return;const r=this.ae(e,a.key)?2:0;this.Zt(e).Bt(a.key,r),this.jt=this.jt.insert(a.key,a),this.zt=this.zt.insert(a.key,this.he(a.key).add(e))}Yt(e,a,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,a)?i.Bt(a,1):i.Lt(a),this.zt=this.zt.insert(a,this.he(a).delete(e)),r&&(this.jt=this.jt.insert(a,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const a=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+a.addedDocuments.size-a.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let a=this.Qt.get(e);return a||(a=new EU,this.Qt.set(e,a)),a}he(e){let a=this.zt.get(e);return a||(a=new Cd(Cs),this.zt=this.zt.insert(e,a)),a}te(e){const a=this.se(e)!==null;return a||yn("WatchChangeAggregator","Detected inactive target",e),a}se(e){const a=this.Qt.get(e);return a&&a.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new EU),this.Gt.getRemoteKeysForTarget(e).forEach(a=>{this.Yt(e,a,null)})}ae(e,a){return this.Gt.getRemoteKeysForTarget(e).has(a)}}function NU(){return new Au(Xn.comparator)}function OU(){return new Au(Xn.comparator)}const bde={asc:"ASCENDING",desc:"DESCENDING"},xde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pde={and:"AND",or:"OR"};class Ede{constructor(e,a){this.databaseId=e,this.useProto3Json=a}}function sM(t,e){return t.useProto3Json||$2(e)?e:{value:e}}function rx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _Y(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Nde(t,e){return rx(t,e.toTimestamp())}function km(t){return Fo(!!t),Pi.fromTimestamp(function(e){const a=Yy(e);return new uh(a.seconds,a.nanos)}(t))}function aL(t,e){return function(a){return new ql(["projects",a.projectId,"databases",a.database])}(t).child("documents").child(e).canonicalString()}function wY(t){const e=ql.fromString(t);return Fo(SY(e)),e}function oM(t,e){return aL(t.databaseId,e.path)}function zN(t,e){const a=wY(e);if(a.get(1)!==t.databaseId.projectId)throw new qr(rr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+t.databaseId.projectId);if(a.get(3)!==t.databaseId.database)throw new qr(rr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+t.databaseId.database);return new Xn(RY(a))}function lM(t,e){return aL(t.databaseId,e)}function Ode(t){const e=wY(t);return e.length===4?ql.emptyPath():RY(e)}function uM(t){return new ql(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RY(t){return Fo(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function VU(t,e,a){return{name:oM(t,e),fields:a.value.mapValue.fields}}function Vde(t,e){let a;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ri()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=function(v,R){return v.useProto3Json?(Fo(R===void 0||typeof R=="string"),xd.fromBase64String(R||"")):(Fo(R===void 0||R instanceof Uint8Array),xd.fromUint8Array(R||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,n=c&&function(v){const R=v.code===void 0?rr.UNKNOWN:yY(v.code);return new qr(R,v.message||"")}(c);a=new vY(r,i,l,n||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zN(t,r.document.name),l=km(r.document.updateTime),c=r.document.createTime?km(r.document.createTime):Pi.min(),n=new Ih({mapValue:{fields:r.document.fields}}),v=yd.newFoundDocument(i,l,c,n),R=r.targetIds||[],x=r.removedTargetIds||[];a=new wb(R,x,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zN(t,r.document),l=r.readTime?km(r.readTime):Pi.min(),c=yd.newNoDocument(i,l),n=r.removedTargetIds||[];a=new wb([],n,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zN(t,r.document),l=r.removedTargetIds||[];a=new wb([],l,i,null)}else{if(!("filter"in e))return ri();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:l}=r,c=new wde(i,l),n=r.targetId;a=new AY(n,c)}}return a}function zde(t,e){let a;if(e instanceof eC)a={update:VU(t,e.key,e.value)};else if(e instanceof eP)a={delete:oM(t,e.key)};else if(e instanceof iA)a={update:VU(t,e.key,e.data),updateMask:jde(e.fieldMask)};else{if(!(e instanceof Ade))return ri();a={verify:oM(t,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const c=l.transform;if(c instanceof tx)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof WR)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof YR)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ax)return{fieldPath:l.field.canonicalString(),increment:c.gt};throw ri()}(0,r))),e.precondition.isNone||(a.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Nde(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ri()}(t,e.precondition)),a}function Dde(t,e){return t&&t.length>0?(Fo(e!==void 0),t.map(a=>function(r,i){let l=r.updateTime?km(r.updateTime):km(i);return l.isEqual(Pi.min())&&(l=km(i)),new mde(l,r.transformResults||[])}(a,e))):[]}function Mde(t,e){return{documents:[lM(t,e.path)]}}function Ide(t,e){const a={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(a.parent=lM(t,r),a.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a.parent=lM(t,r.popLast()),a.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(v.length!==0)return CY(Kp.create(v,"and"))}(e.filters);i&&(a.structuredQuery.where=i);const l=function(v){if(v.length!==0)return v.map(R=>function(x){return{field:Z0(x.field),direction:kde(x.dir)}}(R))}(e.orderBy);l&&(a.structuredQuery.orderBy=l);const c=sM(t,e.limit);var n;return c!==null&&(a.structuredQuery.limit=c),e.startAt&&(a.structuredQuery.startAt={before:(n=e.startAt).inclusive,values:n.position}),e.endAt&&(a.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),a}function Lde(t){let e=Ode(t.parent);const a=t.structuredQuery,r=a.from?a.from.length:0;let i=null;if(r>0){Fo(r===1);const x=a.from[0];x.allDescendants?i=x.collectionId:e=e.child(x.collectionId)}let l=[];a.where&&(l=function(x){const N=TY(x);return N instanceof Kp&&QW(N)?N.getFilters():[N]}(a.where));let c=[];a.orderBy&&(c=a.orderBy.map(x=>function(N){return new l_(q0(N.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x)));let n=null;a.limit&&(n=function(x){let N;return N=typeof x=="object"?x.value:x,$2(N)?null:N}(a.limit));let v=null;a.startAt&&(v=function(x){const N=!!x.before,L=x.values||[];return new ex(L,N)}(a.startAt));let R=null;return a.endAt&&(R=function(x){const N=!x.before,L=x.values||[];return new ex(L,N)}(a.endAt)),rde(e,i,c,l,n,"F",v,R)}function Fde(t,e){const a=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ri()}}(e.purpose);return a==null?null:{"goog-listen-tags":a}}function TY(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const a=q0(e.unaryFilter.field);return gu.create(a,"==",{doubleValue:NaN});case"IS_NULL":const r=q0(e.unaryFilter.field);return gu.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=q0(e.unaryFilter.field);return gu.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=q0(e.unaryFilter.field);return gu.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ri()}}(t):t.fieldFilter!==void 0?function(e){return gu.create(q0(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ri()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Kp.create(e.compositeFilter.filters.map(a=>TY(a)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ri()}}(e.compositeFilter.op))}(t):ri()}function kde(t){return bde[t]}function Ude(t){return xde[t]}function Bde(t){return Pde[t]}function Z0(t){return{fieldPath:t.canonicalString()}}function q0(t){return Gm.fromServerFormat(t.fieldPath)}function CY(t){return t instanceof gu?function(e){if(e.op==="=="){if(AU(e.value))return{unaryFilter:{field:Z0(e.field),op:"IS_NAN"}};if(yU(e.value))return{unaryFilter:{field:Z0(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(AU(e.value))return{unaryFilter:{field:Z0(e.field),op:"IS_NOT_NAN"}};if(yU(e.value))return{unaryFilter:{field:Z0(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Z0(e.field),op:Ude(e.op),value:e.value}}}(t):t instanceof Kp?function(e){const a=e.getFilters().map(r=>CY(r));return a.length===1?a[0]:{compositeFilter:{op:Bde(e.op),filters:a}}}(t):ri()}function jde(t){const e=[];return t.fields.forEach(a=>e.push(a.canonicalString())),{fieldPaths:e}}function SY(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,a,r,i,l=Pi.min(),c=Pi.min(),n=xd.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=a,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=n,this.expectedCount=v}withSequenceNumber(e){return new Fy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,a){return new Fy(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gde{constructor(e){this.fe=e}}function Zde(t){const e=Lde({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nM(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qde{constructor(){this.rn=new Hde}addToCollectionParentIndex(e,a){return this.rn.add(a),Ir.resolve()}getCollectionParents(e,a){return Ir.resolve(this.rn.getEntries(a))}addFieldIndex(e,a){return Ir.resolve()}deleteFieldIndex(e,a){return Ir.resolve()}getDocumentsMatchingTarget(e,a){return Ir.resolve(null)}getIndexType(e,a){return Ir.resolve(0)}getFieldIndexes(e,a){return Ir.resolve([])}getNextCollectionGroupToUpdate(e){return Ir.resolve(null)}getMinOffset(e,a){return Ir.resolve(qR.min())}getMinOffsetFromCollectionGroup(e,a){return Ir.resolve(qR.min())}updateCollectionGroup(e,a,r){return Ir.resolve()}updateIndexEntries(e,a){return Ir.resolve()}}class Hde{constructor(){this.index={}}add(e){const a=e.lastSegment(),r=e.popLast(),i=this.index[a]||new Cd(ql.comparator),l=!i.has(r);return this.index[a]=i.add(r),l}has(e){const a=e.lastSegment(),r=e.popLast(),i=this.index[a];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Cd(ql.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new C_(0)}static Mn(){return new C_(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $de{constructor(){this.changes=new p1(e=>e.toString(),(e,a)=>e.isEqual(a)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,a){this.assertNotApplied(),this.changes.set(e,yd.newInvalidDocument(e).setReadTime(a))}getEntry(e,a){this.assertNotApplied();const r=this.changes.get(a);return r!==void 0?Ir.resolve(r):this.getFromCache(e,a)}getEntries(e,a){return this.getAllFromCache(e,a)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(e,a){this.overlayedDocument=e,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wde{constructor(e,a,r,i){this.remoteDocumentCache=e,this.mutationQueue=a,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,a){let r=null;return this.documentOverlayCache.getOverlay(e,a).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,a))).next(i=>(r!==null&&AR(r.mutation,i,gf.empty(),uh.now()),i))}getDocuments(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.getLocalViewOfDocuments(e,r,Hi()).next(()=>r))}getLocalViewOfDocuments(e,a,r=Hi()){const i=dv();return this.populateOverlays(e,i,a).next(()=>this.computeViews(e,a,i,r).next(l=>{let c=lR();return l.forEach((n,v)=>{c=c.insert(n,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,a){const r=dv();return this.populateOverlays(e,r,a).next(()=>this.computeViews(e,a,r,Hi()))}populateOverlays(e,a,r){const i=[];return r.forEach(l=>{a.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((c,n)=>{a.set(c,n)})})}computeViews(e,a,r,i){let l=Mg();const c=yR(),n=yR();return a.forEach((v,R)=>{const x=r.get(R.key);i.has(R.key)&&(x===void 0||x.mutation instanceof iA)?l=l.insert(R.key,R):x!==void 0?(c.set(R.key,x.mutation.getFieldMask()),AR(x.mutation,R,x.mutation.getFieldMask(),uh.now())):c.set(R.key,gf.empty())}),this.recalculateAndSaveOverlays(e,l).next(v=>(v.forEach((R,x)=>c.set(R,x)),a.forEach((R,x)=>{var N;return n.set(R,new Kde(x,(N=c.get(R))!==null&&N!==void 0?N:null))}),n))}recalculateAndSaveOverlays(e,a){const r=yR();let i=new Au((c,n)=>c-n),l=Hi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,a).next(c=>{for(const n of c)n.keys().forEach(v=>{const R=a.get(v);if(R===null)return;let x=r.get(v)||gf.empty();x=n.applyToLocalView(R,x),r.set(v,x);const N=(i.get(n.batchId)||Hi()).add(v);i=i.insert(n.batchId,N)})}).next(()=>{const c=[],n=i.getReverseIterator();for(;n.hasNext();){const v=n.getNext(),R=v.key,x=v.value,N=lY();x.forEach(L=>{if(!l.has(L)){const F=mY(a.get(L),r.get(L));F!==null&&N.set(L,F),l=l.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,R,N))}return Ir.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,a,r){return function(i){return Xn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(e,a.path):rY(a)?this.getDocumentsMatchingCollectionGroupQuery(e,a,r):this.getDocumentsMatchingCollectionQuery(e,a,r)}getNextDocuments(e,a,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,a,r,i).next(l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,a,r.largestBatchId,i-l.size):Ir.resolve(dv());let n=-1,v=l;return c.next(R=>Ir.forEach(R,(x,N)=>(n<N.largestBatchId&&(n=N.largestBatchId),l.get(x)?Ir.resolve():this.remoteDocumentCache.getEntry(e,x).next(L=>{v=v.insert(x,L)}))).next(()=>this.populateOverlays(e,R,l)).next(()=>this.computeViews(e,v,R,Hi())).next(x=>({batchId:n,changes:oY(x)})))})}getDocumentsMatchingDocumentQuery(e,a){return this.getDocument(e,new Xn(a)).next(r=>{let i=lR();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,a,r){const i=a.collectionGroup;let l=lR();return this.indexManager.getCollectionParents(e,i).next(c=>Ir.forEach(c,n=>{const v=function(R,x){return new f1(x,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(a,n.child(i));return this.getDocumentsMatchingCollectionQuery(e,v,r).next(R=>{R.forEach((x,N)=>{l=l.insert(x,N)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,a,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,a.path,r.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,a,r,i))).next(l=>{i.forEach((n,v)=>{const R=v.getKey();l.get(R)===null&&(l=l.insert(R,yd.newInvalidDocument(R)))});let c=lR();return l.forEach((n,v)=>{const R=i.get(n);R!==void 0&&AR(R.mutation,v,gf.empty(),uh.now()),X2(a,v)&&(c=c.insert(n,v))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yde{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,a){return Ir.resolve(this.cs.get(a))}saveBundleMetadata(e,a){var r;return this.cs.set(a.id,{id:(r=a).id,version:r.version,createTime:km(r.createTime)}),Ir.resolve()}getNamedQuery(e,a){return Ir.resolve(this.hs.get(a))}saveNamedQuery(e,a){return this.hs.set(a.name,function(r){return{name:r.name,query:Zde(r.bundledQuery),readTime:km(r.readTime)}}(a)),Ir.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xde{constructor(){this.overlays=new Au(Xn.comparator),this.ls=new Map}getOverlay(e,a){return Ir.resolve(this.overlays.get(a))}getOverlays(e,a){const r=dv();return Ir.forEach(a,i=>this.getOverlay(e,i).next(l=>{l!==null&&r.set(i,l)})).next(()=>r)}saveOverlays(e,a,r){return r.forEach((i,l)=>{this.we(e,a,l)}),Ir.resolve()}removeOverlaysForBatchId(e,a,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),Ir.resolve()}getOverlaysForCollection(e,a,r){const i=dv(),l=a.length+1,c=new Xn(a.child("")),n=this.overlays.getIteratorFrom(c);for(;n.hasNext();){const v=n.getNext().value,R=v.getKey();if(!a.isPrefixOf(R.path))break;R.path.length===l&&v.largestBatchId>r&&i.set(v.getKey(),v)}return Ir.resolve(i)}getOverlaysForCollectionGroup(e,a,r,i){let l=new Au((R,x)=>R-x);const c=this.overlays.getIterator();for(;c.hasNext();){const R=c.getNext().value;if(R.getKey().getCollectionGroup()===a&&R.largestBatchId>r){let x=l.get(R.largestBatchId);x===null&&(x=dv(),l=l.insert(R.largestBatchId,x)),x.set(R.getKey(),R)}}const n=dv(),v=l.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((R,x)=>n.set(R,x)),!(n.size()>=i)););return Ir.resolve(n)}we(e,a,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new _de(a,r));let l=this.ls.get(a);l===void 0&&(l=Hi(),this.ls.set(a,l)),this.ls.set(a,l.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.fs=new Cd(sc.ds),this.ws=new Cd(sc._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,a){const r=new sc(e,a);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,a){e.forEach(r=>this.addReference(r,a))}removeReference(e,a){this.ys(new sc(e,a))}ps(e,a){e.forEach(r=>this.removeReference(r,a))}Is(e){const a=new Xn(new ql([])),r=new sc(a,e),i=new sc(a,e+1),l=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),l.push(c.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const a=new Xn(new ql([])),r=new sc(a,e),i=new sc(a,e+1);let l=Hi();return this.ws.forEachInRange([r,i],c=>{l=l.add(c.key)}),l}containsKey(e){const a=new sc(e,0),r=this.fs.firstAfterOrEqual(a);return r!==null&&e.isEqual(r.key)}}class sc{constructor(e,a){this.key=e,this.As=a}static ds(e,a){return Xn.comparator(e.key,a.key)||Cs(e.As,a.As)}static _s(e,a){return Cs(e.As,a.As)||Xn.comparator(e.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jde{constructor(e,a){this.indexManager=e,this.referenceDelegate=a,this.mutationQueue=[],this.vs=1,this.Rs=new Cd(sc.ds)}checkEmpty(e){return Ir.resolve(this.mutationQueue.length===0)}addMutationBatch(e,a,r,i){const l=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new vde(l,a,r,i);this.mutationQueue.push(c);for(const n of i)this.Rs=this.Rs.add(new sc(n.key,l)),this.indexManager.addToCollectionParentIndex(e,n.key.path.popLast());return Ir.resolve(c)}lookupMutationBatch(e,a){return Ir.resolve(this.Ps(a))}getNextMutationBatchAfterBatchId(e,a){const r=a+1,i=this.bs(r),l=i<0?0:i;return Ir.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ir.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return Ir.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){const r=new sc(a,0),i=new sc(a,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,i],c=>{const n=this.Ps(c.As);l.push(n)}),Ir.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,a){let r=new Cd(Cs);return a.forEach(i=>{const l=new sc(i,0),c=new sc(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,c],n=>{r=r.add(n.As)})}),Ir.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,a){const r=a.path,i=r.length+1;let l=r;Xn.isDocumentKey(l)||(l=l.child(""));const c=new sc(new Xn(l),0);let n=new Cd(Cs);return this.Rs.forEachWhile(v=>{const R=v.key.path;return!!r.isPrefixOf(R)&&(R.length===i&&(n=n.add(v.As)),!0)},c),Ir.resolve(this.Vs(n))}Vs(e){const a=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&a.push(i)}),a}removeMutationBatch(e,a){Fo(this.Ss(a.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return Ir.forEach(a.mutations,i=>{const l=new sc(i.key,a.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,a){const r=new sc(a,0),i=this.Rs.firstAfterOrEqual(r);return Ir.resolve(a.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ir.resolve()}Ss(e,a){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const a=this.bs(e);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qde{constructor(e){this.Ds=e,this.docs=new Au(Xn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,a){const r=a.key,i=this.docs.get(r),l=i?i.size:0,c=this.Ds(a);return this.docs=this.docs.insert(r,{document:a.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const a=this.docs.get(e);a&&(this.docs=this.docs.remove(e),this.size-=a.size)}getEntry(e,a){const r=this.docs.get(a);return Ir.resolve(r?r.document.mutableCopy():yd.newInvalidDocument(a))}getEntries(e,a){let r=Mg();return a.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():yd.newInvalidDocument(i))}),Ir.resolve(r)}getDocumentsMatchingQuery(e,a,r,i){let l=Mg();const c=a.path,n=new Xn(c.child("")),v=this.docs.getIteratorFrom(n);for(;v.hasNext();){const{key:R,value:{document:x}}=v.getNext();if(!c.isPrefixOf(R.path))break;R.path.length>c.length+1||Uce(kce(x),r)<=0||(i.has(x.key)||X2(a,x))&&(l=l.insert(x.key,x.mutableCopy()))}return Ir.resolve(l)}getAllFromCollectionGroup(e,a,r,i){ri()}Cs(e,a){return Ir.forEach(this.docs,r=>a(r))}newChangeBuffer(e){return new ehe(this)}getSize(e){return Ir.resolve(this.size)}}class ehe extends $de{constructor(e){super(),this.os=e}applyChanges(e){const a=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?a.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Ir.waitFor(a)}getFromCache(e,a){return this.os.getEntry(e,a)}getAllFromCache(e,a){return this.os.getEntries(e,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(e){this.persistence=e,this.xs=new p1(a=>Y3(a),X3),this.lastRemoteSnapshotVersion=Pi.min(),this.highestTargetId=0,this.Ns=0,this.ks=new rL,this.targetCount=0,this.Ms=C_.kn()}forEachTarget(e,a){return this.xs.forEach((r,i)=>a(i)),Ir.resolve()}getLastRemoteSnapshotVersion(e){return Ir.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ir.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ir.resolve(this.highestTargetId)}setTargetsMetadata(e,a,r){return r&&(this.lastRemoteSnapshotVersion=r),a>this.Ns&&(this.Ns=a),Ir.resolve()}Fn(e){this.xs.set(e.target,e);const a=e.targetId;a>this.highestTargetId&&(this.Ms=new C_(a),this.highestTargetId=a),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,a){return this.Fn(a),this.targetCount+=1,Ir.resolve()}updateTargetData(e,a){return this.Fn(a),Ir.resolve()}removeTargetData(e,a){return this.xs.delete(a.target),this.ks.Is(a.targetId),this.targetCount-=1,Ir.resolve()}removeTargets(e,a,r){let i=0;const l=[];return this.xs.forEach((c,n)=>{n.sequenceNumber<=a&&r.get(n.targetId)===null&&(this.xs.delete(c),l.push(this.removeMatchingKeysForTargetId(e,n.targetId)),i++)}),Ir.waitFor(l).next(()=>i)}getTargetCount(e){return Ir.resolve(this.targetCount)}getTargetData(e,a){const r=this.xs.get(a)||null;return Ir.resolve(r)}addMatchingKeys(e,a,r){return this.ks.gs(a,r),Ir.resolve()}removeMatchingKeys(e,a,r){this.ks.ps(a,r);const i=this.persistence.referenceDelegate,l=[];return i&&a.forEach(c=>{l.push(i.markPotentiallyOrphaned(e,c))}),Ir.waitFor(l)}removeMatchingKeysForTargetId(e,a){return this.ks.Is(a),Ir.resolve()}getMatchingKeysForTargetId(e,a){const r=this.ks.Es(a);return Ir.resolve(r)}containsKey(e,a){return Ir.resolve(this.ks.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ahe{constructor(e,a){this.$s={},this.overlays={},this.Os=new H3(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new the(this),this.indexManager=new qde,this.remoteDocumentCache=function(r){return new Qde(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new Gde(a),this.qs=new Yde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let a=this.overlays[e.toKey()];return a||(a=new Xde,this.overlays[e.toKey()]=a),a}getMutationQueue(e,a){let r=this.$s[e.toKey()];return r||(r=new Jde(a,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,a,r){yn("MemoryPersistence","Starting transaction:",e);const i=new rhe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(l=>this.referenceDelegate.Ks(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Gs(e,a){return Ir.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,a)))}}class rhe extends jce{constructor(e){super(),this.currentSequenceNumber=e}}class nL{constructor(e){this.persistence=e,this.Qs=new rL,this.js=null}static zs(e){return new nL(e)}get Ws(){if(this.js)return this.js;throw ri()}addReference(e,a,r){return this.Qs.addReference(r,a),this.Ws.delete(r.toString()),Ir.resolve()}removeReference(e,a,r){return this.Qs.removeReference(r,a),this.Ws.add(r.toString()),Ir.resolve()}markPotentiallyOrphaned(e,a){return this.Ws.add(a.toString()),Ir.resolve()}removeTarget(e,a){this.Qs.Is(a.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,a.targetId).next(i=>{i.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,a))}Us(){this.js=new Set}Ks(e){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ir.forEach(this.Ws,r=>{const i=Xn.fromPath(r);return this.Hs(e,i).next(l=>{l||a.removeEntry(i,Pi.min())})}).next(()=>(this.js=null,a.apply(e)))}updateLimboDocument(e,a){return this.Hs(e,a).next(r=>{r?this.Ws.delete(a.toString()):this.Ws.add(a.toString())})}Ls(e){return 0}Hs(e,a){return Ir.or([()=>Ir.resolve(this.Qs.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(e,a),()=>this.persistence.Gs(e,a)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,a,r,i){this.targetId=e,this.fromCache=a,this.Fi=r,this.Bi=i}static Li(e,a){let r=Hi(),i=Hi();for(const l of a.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new iL(e,a.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{constructor(){this.qi=!1}initialize(e,a){this.Ui=e,this.indexManager=a,this.qi=!0}getDocumentsMatchingQuery(e,a,r,i){return this.Ki(e,a).next(l=>l||this.Gi(e,a,i,r)).next(l=>l||this.Qi(e,a))}Ki(e,a){if(RU(a))return Ir.resolve(null);let r=Dg(a);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(a.limit!==null&&i===1&&(a=nM(a,null,"F"),r=Dg(a)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Hi(...l);return this.Ui.getDocuments(e,c).next(n=>this.indexManager.getMinOffset(e,r).next(v=>{const R=this.ji(a,n);return this.zi(a,R,c,v.readTime)?this.Ki(e,nM(a,null,"F")):this.Wi(e,R,a,v)}))})))}Gi(e,a,r,i){return RU(a)||i.isEqual(Pi.min())?this.Qi(e,a):this.Ui.getDocuments(e,r).next(l=>{const c=this.ji(a,l);return this.zi(a,c,r,i)?this.Qi(e,a):(hU()<=_s.DEBUG&&yn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),iM(a)),this.Wi(e,c,a,Fce(i,-1)))})}ji(e,a){let r=new Cd(iY(e));return a.forEach((i,l)=>{X2(e,l)&&(r=r.add(l))}),r}zi(e,a,r,i){if(e.limit===null)return!1;if(r.size!==a.size)return!0;const l=e.limitType==="F"?a.last():a.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Qi(e,a){return hU()<=_s.DEBUG&&yn("QueryEngine","Using full collection scan to execute query:",iM(a)),this.Ui.getDocumentsMatchingQuery(e,a,qR.min())}Wi(e,a,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(l=>(a.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ihe{constructor(e,a,r,i){this.persistence=e,this.Hi=a,this.serializer=i,this.Ji=new Au(Cs),this.Yi=new p1(l=>Y3(l),X3),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wde(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>e.collect(a,this.Ji))}}function she(t,e,a,r){return new ihe(t,e,a,r)}async function bY(t,e){const a=gi(t);return await a.persistence.runTransaction("Handle user change","readonly",r=>{let i;return a.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,a.tr(e),a.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],n=[];let v=Hi();for(const R of i){c.push(R.batchId);for(const x of R.mutations)v=v.add(x.key)}for(const R of l){n.push(R.batchId);for(const x of R.mutations)v=v.add(x.key)}return a.localDocuments.getDocuments(r,v).next(R=>({er:R,removedBatchIds:c,addedBatchIds:n}))})})}function ohe(t,e){const a=gi(t);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=a.Zi.newChangeBuffer({trackRemovals:!0});return function(c,n,v,R){const x=v.batch,N=x.keys();let L=Ir.resolve();return N.forEach(F=>{L=L.next(()=>R.getEntry(n,F)).next(j=>{const H=v.docVersions.get(F);Fo(H!==null),j.version.compareTo(H)<0&&(x.applyToRemoteDocument(j,v),j.isValidDocument()&&(j.setReadTime(v.commitVersion),R.addEntry(j)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(n,x))}(a,r,e,l).next(()=>l.apply(r)).next(()=>a.mutationQueue.performConsistencyCheck(r)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let n=Hi();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(n=n.add(c.batch.mutations[v].key));return n}(e))).next(()=>a.localDocuments.getDocuments(r,i))})}function xY(t){const e=gi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",a=>e.Bs.getLastRemoteSnapshotVersion(a))}function lhe(t,e){const a=gi(t),r=e.snapshotVersion;let i=a.Ji;return a.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=a.Zi.newChangeBuffer({trackRemovals:!0});i=a.Ji;const n=[];e.targetChanges.forEach((x,N)=>{const L=i.get(N);if(!L)return;n.push(a.Bs.removeMatchingKeys(l,x.removedDocuments,N).next(()=>a.Bs.addMatchingKeys(l,x.addedDocuments,N)));let F=L.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(N)!==null?F=F.withResumeToken(xd.EMPTY_BYTE_STRING,Pi.min()).withLastLimboFreeSnapshotVersion(Pi.min()):x.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(x.resumeToken,r)),i=i.insert(N,F),function(j,H,q){return j.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(L,F,x)&&n.push(a.Bs.updateTargetData(l,F))});let v=Mg(),R=Hi();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&n.push(a.persistence.referenceDelegate.updateLimboDocument(l,x))}),n.push(uhe(l,c,e.documentUpdates).next(x=>{v=x.nr,R=x.sr})),!r.isEqual(Pi.min())){const x=a.Bs.getLastRemoteSnapshotVersion(l).next(N=>a.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));n.push(x)}return Ir.waitFor(n).next(()=>c.apply(l)).next(()=>a.localDocuments.getLocalViewOfDocuments(l,v,R)).next(()=>v)}).then(l=>(a.Ji=i,l))}function uhe(t,e,a){let r=Hi(),i=Hi();return a.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let c=Mg();return a.forEach((n,v)=>{const R=l.get(n);v.isFoundDocument()!==R.isFoundDocument()&&(i=i.add(n)),v.isNoDocument()&&v.version.isEqual(Pi.min())?(e.removeEntry(n,v.readTime),c=c.insert(n,v)):!R.isValidDocument()||v.version.compareTo(R.version)>0||v.version.compareTo(R.version)===0&&R.hasPendingWrites?(e.addEntry(v),c=c.insert(n,v)):yn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",R.version," Watch version:",v.version)}),{nr:c,sr:i}})}function che(t,e){const a=gi(t);return a.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),a.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dhe(t,e){const a=gi(t);return a.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return a.Bs.getTargetData(r,e).next(l=>l?(i=l,Ir.resolve(i)):a.Bs.allocateTargetId(r).next(c=>(i=new Fy(e,c,"TargetPurposeListen",r.currentSequenceNumber),a.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=a.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(a.Ji=a.Ji.insert(r.targetId,r),a.Yi.set(e,r.targetId)),r})}async function cM(t,e,a){const r=gi(t),i=r.Ji.get(e),l=a?"readwrite":"readwrite-primary";try{a||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!QT(c))throw c;yn("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function zU(t,e,a){const r=gi(t);let i=Pi.min(),l=Hi();return r.persistence.runTransaction("Execute query","readonly",c=>function(n,v,R){const x=gi(n),N=x.Yi.get(R);return N!==void 0?Ir.resolve(x.Ji.get(N)):x.Bs.getTargetData(v,R)}(r,c,Dg(e)).next(n=>{if(n)return i=n.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,n.targetId).next(v=>{l=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,a?i:Pi.min(),a?l:Hi())).next(n=>(hhe(r,nde(e),n),{documents:n,ir:l})))}function hhe(t,e,a){let r=t.Xi.get(e)||Pi.min();a.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.Xi.set(e,r)}class DU{constructor(){this.activeTargetIds=cde()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fhe{constructor(){this.Hr=new DU,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,a,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,a,r){this.Jr[e]=a}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new DU,Promise.resolve()}handleUserChange(e,a,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phe{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){yn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){yn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let US=null;function DN(){return US===null?US=268435456+Math.round(2147483648*Math.random()):US++,"0x"+US.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ghe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="WebChannelConnection";class yhe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const a=e.ssl?"https":"http";this.mo=a+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,a,r,i,l){const c=DN(),n=this.To(e,a);yn("RestConnection",`Sending RPC '${e}' ${c}:`,n,r);const v={};return this.Eo(v,i,l),this.Ao(e,n,v,r).then(R=>(yn("RestConnection",`Received RPC '${e}' ${c}: `,R),R),R=>{throw __("RestConnection",`RPC '${e}' ${c} failed with error: `,R,"url: ",n,"request:",r),R})}vo(e,a,r,i,l,c){return this.Io(e,a,r,i,l)}Eo(e,a,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+h1,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}To(e,a){const r=mhe[e];return`${this.mo}/v1/${a}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,a,r,i){const l=DN();return new Promise((c,n)=>{const v=new xce;v.setWithCredentials(!0),v.listenOnce(Cce.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case VN.NO_ERROR:const x=v.getResponseJson();yn(ld,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),c(x);break;case VN.TIMEOUT:yn(ld,`RPC '${e}' ${l} timed out`),n(new qr(rr.DEADLINE_EXCEEDED,"Request time out"));break;case VN.HTTP_ERROR:const N=v.getStatus();if(yn(ld,`RPC '${e}' ${l} failed with status:`,N,"response text:",v.getResponseText()),N>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const F=L==null?void 0:L.error;if(F&&F.status&&F.message){const j=function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(rr).indexOf(q)>=0?q:rr.UNKNOWN}(F.status);n(new qr(j,F.message))}else n(new qr(rr.UNKNOWN,"Server responded with status "+v.getStatus()))}else n(new qr(rr.UNAVAILABLE,"Connection failed."));break;default:ri()}}finally{yn(ld,`RPC '${e}' ${l} completed.`)}});const R=JSON.stringify(i);yn(ld,`RPC '${e}' ${l} sending request:`,i),v.send(a,"POST",R,r,15)})}Ro(e,a,r){const i=DN(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Rce(),n=Tce(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},R=this.longPollingOptions.timeoutSeconds;R!==void 0&&(v.longPollingTimeout=Math.round(1e3*R)),this.useFetchStreams&&(v.xmlHttpFactory=new bce({})),this.Eo(v.initMessageHeaders,a,r),v.encodeInitMessageHeaders=!0;const x=l.join("");yn(ld,`Creating RPC '${e}' stream ${i}: ${x}`,v);const N=c.createWebChannel(x,v);let L=!1,F=!1;const j=new ghe({ro:q=>{F?yn(ld,`Not sending because RPC '${e}' stream ${i} is closed:`,q):(L||(yn(ld,`Opening RPC '${e}' stream ${i} transport.`),N.open(),L=!0),yn(ld,`RPC '${e}' stream ${i} sending:`,q),N.send(q))},oo:()=>N.close()}),H=(q,W,ee)=>{q.listen(W,oe=>{try{ee(oe)}catch(fe){setTimeout(()=>{throw fe},0)}})};return H(N,IS.EventType.OPEN,()=>{F||yn(ld,`RPC '${e}' stream ${i} transport opened.`)}),H(N,IS.EventType.CLOSE,()=>{F||(F=!0,yn(ld,`RPC '${e}' stream ${i} transport closed`),j.wo())}),H(N,IS.EventType.ERROR,q=>{F||(F=!0,__(ld,`RPC '${e}' stream ${i} transport errored:`,q),j.wo(new qr(rr.UNAVAILABLE,"The operation could not be completed")))}),H(N,IS.EventType.MESSAGE,q=>{var W;if(!F){const ee=q.data[0];Fo(!!ee);const oe=ee,fe=oe.error||((W=oe[0])===null||W===void 0?void 0:W.error);if(fe){yn(ld,`RPC '${e}' stream ${i} received error:`,fe);const se=fe.status;let me=function(Re){const we=hu[Re];if(we!==void 0)return yY(we)}(se),ge=fe.message;me===void 0&&(me=rr.INTERNAL,ge="Unknown error status: "+se+" with message "+fe.message),F=!0,j.wo(new qr(me,ge)),N.close()}else yn(ld,`RPC '${e}' stream ${i} received:`,ee),j._o(ee)}}),H(n,Sce.STAT_EVENT,q=>{q.stat===cU.PROXY?yn(ld,`RPC '${e}' stream ${i} detected buffering proxy`):q.stat===cU.NOPROXY&&yn(ld,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.fo()},0),j}}function MN(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){return new Ede(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{constructor(e,a,r=1e3,i=1.5,l=6e4){this.ii=e,this.timerId=a,this.Po=r,this.bo=i,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const a=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,a-r);i>0&&yn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${a} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{constructor(e,a,r,i,l,c,n,v){this.ii=e,this.$o=r,this.Oo=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=n,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new PY(e,a)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,a){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():a&&a.code===rr.RESOURCE_EXHAUSTED?(zg(a.toString()),zg("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):a&&a.code===rr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(a)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),a=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===a&&this.Zo(r,i)},r=>{e(()=>{const i=new qr(rr.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,a){const r=this.Xo(this.Fo);this.stream=this.eu(e,a),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return yn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return a=>{this.ii.enqueueAndForget(()=>this.Fo===e?a():(yn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ahe extends EY{constructor(e,a,r,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,r,i,c),this.serializer=l}eu(e,a){return this.connection.Ro("Listen",e,a)}onMessage(e){this.qo.reset();const a=Vde(this.serializer,e),r=function(i){if(!("targetChange"in i))return Pi.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Pi.min():l.readTime?km(l.readTime):Pi.min()}(e);return this.listener.nu(a,r)}su(e){const a={};a.database=uM(this.serializer),a.addTarget=function(i,l){let c;const n=l.target;if(c=aM(n)?{documents:Mde(i,n)}:{query:Ide(i,n)},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=_Y(i,l.resumeToken);const v=sM(i,l.expectedCount);v!==null&&(c.expectedCount=v)}else if(l.snapshotVersion.compareTo(Pi.min())>0){c.readTime=rx(i,l.snapshotVersion.toTimestamp());const v=sM(i,l.expectedCount);v!==null&&(c.expectedCount=v)}return c}(this.serializer,e);const r=Fde(this.serializer,e);r&&(a.labels=r),this.Wo(a)}iu(e){const a={};a.database=uM(this.serializer),a.removeTarget=e,this.Wo(a)}}class vhe extends EY{constructor(e,a,r,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,r,i,c),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,a){return this.connection.Ro("Write",e,a)}onMessage(e){if(Fo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const a=Dde(e.writeResults,e.commitTime),r=km(e.commitTime);return this.listener.cu(r,a)}return Fo(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=uM(this.serializer),this.Wo(e)}uu(e){const a={streamToken:this.lastStreamToken,writes:e.map(r=>zde(this.serializer,r))};this.Wo(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _he extends class{}{constructor(e,a,r,i){super(),this.authCredentials=e,this.appCheckCredentials=a,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new qr(rr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,a,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Io(e,a,r,i,l)).catch(i=>{throw i.name==="FirebaseError"?(i.code===rr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new qr(rr.UNKNOWN,i.toString())})}vo(e,a,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.vo(e,a,r,l,c,i)).catch(l=>{throw l.name==="FirebaseError"?(l.code===rr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new qr(rr.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class whe{constructor(e,a){this.asyncQueue=e,this.onlineStateHandler=a,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const a=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(zg(a),this.mu=!1):yn("OnlineStateTracker",a)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(e,a,r,i,l){this.localStore=e,this.datastore=a,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(c=>{r.enqueueAndForget(async()=>{jv(this)&&(yn("RemoteStore","Restarting streams for network reachability change."),await async function(n){const v=gi(n);v.vu.add(4),await aC(v),v.bu.set("Unknown"),v.vu.delete(4),await rP(v)}(this))})}),this.bu=new whe(r,i)}}async function rP(t){if(jv(t))for(const e of t.Ru)await e(!0)}async function aC(t){for(const e of t.Ru)await e(!1)}function NY(t,e){const a=gi(t);a.Au.has(e.targetId)||(a.Au.set(e.targetId,e),lL(a)?oL(a):m1(a).Ko()&&sL(a,e))}function OY(t,e){const a=gi(t),r=m1(a);a.Au.delete(e),r.Ko()&&VY(a,e),a.Au.size===0&&(r.Ko()?r.jo():jv(a)&&a.bu.set("Unknown"))}function sL(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pi.min())>0){const a=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(a)}m1(t).su(e)}function VY(t,e){t.Vu.qt(e),m1(t).iu(e)}function oL(t){t.Vu=new Sde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),m1(t).start(),t.bu.gu()}function lL(t){return jv(t)&&!m1(t).Uo()&&t.Au.size>0}function jv(t){return gi(t).vu.size===0}function zY(t){t.Vu=void 0}async function The(t){t.Au.forEach((e,a)=>{sL(t,e)})}async function Che(t,e){zY(t),lL(t)?(t.bu.Iu(e),oL(t)):t.bu.set("Unknown")}async function She(t,e,a){if(t.bu.set("Online"),e instanceof vY&&e.state===2&&e.cause)try{await async function(r,i){const l=i.cause;for(const c of i.targetIds)r.Au.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Au.delete(c),r.Vu.removeTarget(c))}(t,e)}catch(r){yn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nx(t,r)}else if(e instanceof wb?t.Vu.Ht(e):e instanceof AY?t.Vu.ne(e):t.Vu.Xt(e),!a.isEqual(Pi.min()))try{const r=await xY(t.localStore);a.compareTo(r)>=0&&await function(i,l){const c=i.Vu.ce(l);return c.targetChanges.forEach((n,v)=>{if(n.resumeToken.approximateByteSize()>0){const R=i.Au.get(v);R&&i.Au.set(v,R.withResumeToken(n.resumeToken,l))}}),c.targetMismatches.forEach((n,v)=>{const R=i.Au.get(n);if(!R)return;i.Au.set(n,R.withResumeToken(xd.EMPTY_BYTE_STRING,R.snapshotVersion)),VY(i,n);const x=new Fy(R.target,n,v,R.sequenceNumber);sL(i,x)}),i.remoteSyncer.applyRemoteEvent(c)}(t,a)}catch(r){yn("RemoteStore","Failed to raise snapshot:",r),await nx(t,r)}}async function nx(t,e,a){if(!QT(e))throw e;t.vu.add(1),await aC(t),t.bu.set("Offline"),a||(a=()=>xY(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{yn("RemoteStore","Retrying IndexedDB access"),await a(),t.vu.delete(1),await rP(t)})}function DY(t,e){return e().catch(a=>nx(t,a,e))}async function nP(t){const e=gi(t),a=Xy(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;bhe(e);)try{const i=await che(e.localStore,r);if(i===null){e.Eu.length===0&&a.jo();break}r=i.batchId,xhe(e,i)}catch(i){await nx(e,i)}MY(e)&&IY(e)}function bhe(t){return jv(t)&&t.Eu.length<10}function xhe(t,e){t.Eu.push(e);const a=Xy(t);a.Ko()&&a.ou&&a.uu(e.mutations)}function MY(t){return jv(t)&&!Xy(t).Uo()&&t.Eu.length>0}function IY(t){Xy(t).start()}async function Phe(t){Xy(t).hu()}async function Ehe(t){const e=Xy(t);for(const a of t.Eu)e.uu(a.mutations)}async function Nhe(t,e,a){const r=t.Eu.shift(),i=Q3.from(r,e,a);await DY(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nP(t)}async function Ohe(t,e){e&&Xy(t).ou&&await async function(a,r){if(i=r.code,Rde(i)&&i!==rr.ABORTED){const l=a.Eu.shift();Xy(a).Qo(),await DY(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,r)),await nP(a)}var i}(t,e),MY(t)&&IY(t)}async function IU(t,e){const a=gi(t);a.asyncQueue.verifyOperationInProgress(),yn("RemoteStore","RemoteStore received new credentials");const r=jv(a);a.vu.add(3),await aC(a),r&&a.bu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(e),a.vu.delete(3),await rP(a)}async function Vhe(t,e){const a=gi(t);e?(a.vu.delete(2),await rP(a)):e||(a.vu.add(2),await aC(a),a.bu.set("Unknown"))}function m1(t){return t.Su||(t.Su=function(e,a,r){const i=gi(e);return i.fu(),new Ahe(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:The.bind(null,t),ao:Che.bind(null,t),nu:She.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),lL(t)?oL(t):t.bu.set("Unknown")):(await t.Su.stop(),zY(t))})),t.Su}function Xy(t){return t.Du||(t.Du=function(e,a,r){const i=gi(e);return i.fu(),new vhe(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:Phe.bind(null,t),ao:Ohe.bind(null,t),au:Ehe.bind(null,t),cu:Nhe.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await nP(t)):(await t.Du.stop(),t.Eu.length>0&&(yn("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,a,r,i,l){this.asyncQueue=e,this.timerId=a,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new xg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,a,r,i,l){const c=Date.now()+r,n=new uL(e,a,c,i,l);return n.start(r),n}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qr(rr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cL(t,e){if(zg("AsyncQueue",`${e}: ${t}`),QT(t))return new qr(rr.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.comparator=e?(a,r)=>e(a,r)||Xn.comparator(a.key,r.key):(a,r)=>Xn.comparator(a.key,r.key),this.keyedMap=lR(),this.sortedSet=new Au(this.comparator)}static emptySet(e){return new c_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const a=this.keyedMap.get(e);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((a,r)=>(e(a),!1))}add(e){const a=this.delete(e.key);return a.copy(a.keyedMap.insert(e.key,e),a.sortedSet.insert(e,null))}delete(e){const a=this.get(e);return a?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(a)):this}isEqual(e){if(!(e instanceof c_)||this.size!==e.size)return!1;const a=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;a.hasNext();){const i=a.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(a=>{e.push(a.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,a){const r=new c_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=a,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.Cu=new Au(Xn.comparator)}track(e){const a=e.doc.key,r=this.Cu.get(a);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(a,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(a,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(a,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(a):e.type===1&&r.type===2?this.Cu=this.Cu.insert(a,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):ri():this.Cu=this.Cu.insert(a,e)}xu(){const e=[];return this.Cu.inorderTraversal((a,r)=>{e.push(r)}),e}}class S_{constructor(e,a,r,i,l,c,n,v,R){this.query=e,this.docs=a,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=n,this.excludesMetadataChanges=v,this.hasCachedResults=R}static fromInitialDocuments(e,a,r,i,l){const c=[];return a.forEach(n=>{c.push({type:0,doc:n})}),new S_(e,a,c_.emptySet(a),c,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Y2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const a=this.docChanges,r=e.docChanges;if(a.length!==r.length)return!1;for(let i=0;i<a.length;i++)if(a[i].type!==r[i].type||!a[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zhe{constructor(){this.Nu=void 0,this.listeners=[]}}class Dhe{constructor(){this.queries=new p1(e=>nY(e),Y2),this.onlineState="Unknown",this.ku=new Set}}async function dL(t,e){const a=gi(t),r=e.query;let i=!1,l=a.queries.get(r);if(l||(i=!0,l=new zhe),i)try{l.Nu=await a.onListen(r)}catch(c){const n=cL(c,`Initialization of query '${iM(e.query)}' failed`);return void e.onError(n)}a.queries.set(r,l),l.listeners.push(e),e.Mu(a.onlineState),l.Nu&&e.$u(l.Nu)&&fL(a)}async function hL(t,e){const a=gi(t),r=e.query;let i=!1;const l=a.queries.get(r);if(l){const c=l.listeners.indexOf(e);c>=0&&(l.listeners.splice(c,1),i=l.listeners.length===0)}if(i)return a.queries.delete(r),a.onUnlisten(r)}function Mhe(t,e){const a=gi(t);let r=!1;for(const i of e){const l=i.query,c=a.queries.get(l);if(c){for(const n of c.listeners)n.$u(i)&&(r=!0);c.Nu=i}}r&&fL(a)}function Ihe(t,e,a){const r=gi(t),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(a);r.queries.delete(e)}function fL(t){t.ku.forEach(e=>{e.next()})}class pL{constructor(e,a,r){this.query=e,this.Ou=a,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new S_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let a=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),a=!0),a}qu(e,a){if(!e.fromCache)return!0;const r=a!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||a==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const a=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Uu(e){e=S_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(e){this.key=e}}class FY{constructor(e){this.key=e}}class Lhe{constructor(e,a){this.query=e,this.Yu=a,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Hi(),this.mutatedKeys=Hi(),this.tc=iY(e),this.ec=new c_(this.tc)}get nc(){return this.Yu}sc(e,a){const r=a?a.ic:new LU,i=a?a.ec:this.ec;let l=a?a.mutatedKeys:this.mutatedKeys,c=i,n=!1;const v=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,R=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((x,N)=>{const L=i.get(x),F=X2(this.query,N)?N:null,j=!!L&&this.mutatedKeys.has(L.key),H=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let q=!1;L&&F?L.data.isEqual(F.data)?j!==H&&(r.track({type:3,doc:F}),q=!0):this.rc(L,F)||(r.track({type:2,doc:F}),q=!0,(v&&this.tc(F,v)>0||R&&this.tc(F,R)<0)&&(n=!0)):!L&&F?(r.track({type:0,doc:F}),q=!0):L&&!F&&(r.track({type:1,doc:L}),q=!0,(v||R)&&(n=!0)),q&&(F?(c=c.add(F),l=H?l.add(x):l.delete(x)):(c=c.delete(x),l=l.delete(x)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{ec:c,ic:r,zi:n,mutatedKeys:l}}rc(e,a){return e.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(e,a,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((R,x)=>function(N,L){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ri()}};return F(N)-F(L)}(R.type,x.type)||this.tc(R.doc,x.doc)),this.oc(r);const c=a?this.uc():[],n=this.Zu.size===0&&this.current?1:0,v=n!==this.Xu;return this.Xu=n,l.length!==0||v?{snapshot:new S_(this.query,e.ec,i,l,e.mutatedKeys,n===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new LU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(a=>this.Yu=this.Yu.add(a)),e.modifiedDocuments.forEach(a=>{}),e.removedDocuments.forEach(a=>this.Yu=this.Yu.delete(a)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Hi(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const a=[];return e.forEach(r=>{this.Zu.has(r)||a.push(new FY(r))}),this.Zu.forEach(r=>{e.has(r)||a.push(new LY(r))}),a}hc(e){this.Yu=e.ir,this.Zu=Hi();const a=this.sc(e.documents);return this.applyChanges(a,!0)}lc(){return S_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class Fhe{constructor(e,a,r){this.query=e,this.targetId=a,this.view=r}}class khe{constructor(e){this.key=e,this.fc=!1}}class Uhe{constructor(e,a,r,i,l,c){this.localStore=e,this.remoteStore=a,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new p1(n=>nY(n),Y2),this._c=new Map,this.mc=new Set,this.gc=new Au(Xn.comparator),this.yc=new Map,this.Ic=new rL,this.Tc={},this.Ec=new Map,this.Ac=C_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function Bhe(t,e){const a=Xhe(t);let r,i;const l=a.wc.get(e);if(l)r=l.targetId,a.sharedClientState.addLocalQueryTarget(r),i=l.view.lc();else{const c=await dhe(a.localStore,Dg(e)),n=a.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=await jhe(a,e,r,n==="current",c.resumeToken),a.isPrimaryClient&&NY(a.remoteStore,c)}return i}async function jhe(t,e,a,r,i){t.Rc=(N,L,F)=>async function(j,H,q,W){let ee=H.view.sc(q);ee.zi&&(ee=await zU(j.localStore,H.query,!1).then(({documents:se})=>H.view.sc(se,ee)));const oe=W&&W.targetChanges.get(H.targetId),fe=H.view.applyChanges(ee,j.isPrimaryClient,oe);return kU(j,H.targetId,fe.cc),fe.snapshot}(t,N,L,F);const l=await zU(t.localStore,e,!0),c=new Lhe(e,l.ir),n=c.sc(l.documents),v=tC.createSynthesizedTargetChangeForCurrentChange(a,r&&t.onlineState!=="Offline",i),R=c.applyChanges(n,t.isPrimaryClient,v);kU(t,a,R.cc);const x=new Fhe(e,a,c);return t.wc.set(e,x),t._c.has(a)?t._c.get(a).push(e):t._c.set(a,[e]),R.snapshot}async function Ghe(t,e){const a=gi(t),r=a.wc.get(e),i=a._c.get(r.targetId);if(i.length>1)return a._c.set(r.targetId,i.filter(l=>!Y2(l,e))),void a.wc.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(r.targetId),a.sharedClientState.isActiveQueryTarget(r.targetId)||await cM(a.localStore,r.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(r.targetId),OY(a.remoteStore,r.targetId),dM(a,r.targetId)}).catch(JT)):(dM(a,r.targetId),await cM(a.localStore,r.targetId,!0))}async function Zhe(t,e,a){const r=Jhe(t);try{const i=await function(l,c){const n=gi(l),v=uh.now(),R=c.reduce((L,F)=>L.add(F.key),Hi());let x,N;return n.persistence.runTransaction("Locally write mutations","readwrite",L=>{let F=Mg(),j=Hi();return n.Zi.getEntries(L,R).next(H=>{F=H,F.forEach((q,W)=>{W.isValidDocument()||(j=j.add(q))})}).next(()=>n.localDocuments.getOverlayedDocuments(L,F)).next(H=>{x=H;const q=[];for(const W of c){const ee=yde(W,x.get(W.key).overlayedDocument);ee!=null&&q.push(new iA(W.key,ee,YW(ee.value.mapValue),ch.exists(!0)))}return n.mutationQueue.addMutationBatch(L,v,q,c)}).next(H=>{N=H;const q=H.applyToLocalDocumentSet(x,j);return n.documentOverlayCache.saveOverlays(L,H.batchId,q)})}).then(()=>({batchId:N.batchId,changes:oY(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,n){let v=l.Tc[l.currentUser.toKey()];v||(v=new Au(Cs)),v=v.insert(c,n),l.Tc[l.currentUser.toKey()]=v}(r,i.batchId,a),await rC(r,i.changes),await nP(r.remoteStore)}catch(i){const l=cL(i,"Failed to persist write");a.reject(l)}}async function kY(t,e){const a=gi(t);try{const r=await lhe(a.localStore,e);e.targetChanges.forEach((i,l)=>{const c=a.yc.get(l);c&&(Fo(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Fo(c.fc):i.removedDocuments.size>0&&(Fo(c.fc),c.fc=!1))}),await rC(a,r,e)}catch(r){await JT(r)}}function FU(t,e,a){const r=gi(t);if(r.isPrimaryClient&&a===0||!r.isPrimaryClient&&a===1){const i=[];r.wc.forEach((l,c)=>{const n=c.view.Mu(e);n.snapshot&&i.push(n.snapshot)}),function(l,c){const n=gi(l);n.onlineState=c;let v=!1;n.queries.forEach((R,x)=>{for(const N of x.listeners)N.Mu(c)&&(v=!0)}),v&&fL(n)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qhe(t,e,a){const r=gi(t);r.sharedClientState.updateQueryState(e,"rejected",a);const i=r.yc.get(e),l=i&&i.key;if(l){let c=new Au(Xn.comparator);c=c.insert(l,yd.newNoDocument(l,Pi.min()));const n=Hi().add(l),v=new tP(Pi.min(),new Map,new Au(Cs),c,n);await kY(r,v),r.gc=r.gc.remove(l),r.yc.delete(e),mL(r)}else await cM(r.localStore,e,!1).then(()=>dM(r,e,a)).catch(JT)}async function Hhe(t,e){const a=gi(t),r=e.batch.batchId;try{const i=await ohe(a.localStore,e);BY(a,r,null),UY(a,r),a.sharedClientState.updateMutationState(r,"acknowledged"),await rC(a,i)}catch(i){await JT(i)}}async function $he(t,e,a){const r=gi(t);try{const i=await function(l,c){const n=gi(l);return n.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let R;return n.mutationQueue.lookupMutationBatch(v,c).next(x=>(Fo(x!==null),R=x.keys(),n.mutationQueue.removeMutationBatch(v,x))).next(()=>n.mutationQueue.performConsistencyCheck(v)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(v,R,c)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,R)).next(()=>n.localDocuments.getDocuments(v,R))})}(r.localStore,e);BY(r,e,a),UY(r,e),r.sharedClientState.updateMutationState(e,"rejected",a),await rC(r,i)}catch(i){await JT(i)}}function UY(t,e){(t.Ec.get(e)||[]).forEach(a=>{a.resolve()}),t.Ec.delete(e)}function BY(t,e,a){const r=gi(t);let i=r.Tc[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(a?l.reject(a):l.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function dM(t,e,a=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),a&&t.dc.Pc(r,a);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||jY(t,r)})}function jY(t,e){t.mc.delete(e.path.canonicalString());const a=t.gc.get(e);a!==null&&(OY(t.remoteStore,a),t.gc=t.gc.remove(e),t.yc.delete(a),mL(t))}function kU(t,e,a){for(const r of a)r instanceof LY?(t.Ic.addReference(r.key,e),Khe(t,r)):r instanceof FY?(yn("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||jY(t,r.key)):ri()}function Khe(t,e){const a=e.key,r=a.path.canonicalString();t.gc.get(a)||t.mc.has(r)||(yn("SyncEngine","New document in limbo: "+a),t.mc.add(r),mL(t))}function mL(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const a=new Xn(ql.fromString(e)),r=t.Ac.next();t.yc.set(r,new khe(a)),t.gc=t.gc.insert(a,r),NY(t.remoteStore,new Fy(Dg(K2(a.path)),r,"TargetPurposeLimboResolution",H3.ct))}}async function rC(t,e,a){const r=gi(t),i=[],l=[],c=[];r.wc.isEmpty()||(r.wc.forEach((n,v)=>{c.push(r.Rc(v,e,a).then(R=>{if((R||a)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,R!=null&&R.fromCache?"not-current":"current"),R){i.push(R);const x=iL.Li(v.targetId,R);l.push(x)}}))}),await Promise.all(c),r.dc.nu(i),await async function(n,v){const R=gi(n);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Ir.forEach(v,N=>Ir.forEach(N.Fi,L=>R.persistence.referenceDelegate.addReference(x,N.targetId,L)).next(()=>Ir.forEach(N.Bi,L=>R.persistence.referenceDelegate.removeReference(x,N.targetId,L)))))}catch(x){if(!QT(x))throw x;yn("LocalStore","Failed to update sequence numbers: "+x)}for(const x of v){const N=x.targetId;if(!x.fromCache){const L=R.Ji.get(N),F=L.snapshotVersion,j=L.withLastLimboFreeSnapshotVersion(F);R.Ji=R.Ji.insert(N,j)}}}(r.localStore,l))}async function Whe(t,e){const a=gi(t);if(!a.currentUser.isEqual(e)){yn("SyncEngine","User change. New user:",e.toKey());const r=await bY(a.localStore,e);a.currentUser=e,function(i,l){i.Ec.forEach(c=>{c.forEach(n=>{n.reject(new qr(rr.CANCELLED,l))})}),i.Ec.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rC(a,r.er)}}function Yhe(t,e){const a=gi(t),r=a.yc.get(e);if(r&&r.fc)return Hi().add(r.key);{let i=Hi();const l=a._c.get(e);if(!l)return i;for(const c of l){const n=a.wc.get(c);i=i.unionWith(n.view.nc)}return i}}function Xhe(t){const e=gi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kY.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qhe.bind(null,e),e.dc.nu=Mhe.bind(null,e.eventManager),e.dc.Pc=Ihe.bind(null,e.eventManager),e}function Jhe(t){const e=gi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$he.bind(null,e),e}class UU{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=aP(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,a){return null}createIndexBackfillerScheduler(e,a){return null}createLocalStore(e){return she(this.persistence,new nhe,e.initialUser,this.serializer)}createPersistence(e){return new ahe(nL.zs,this.serializer)}createSharedClientState(e){return new fhe}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Qhe{async initialize(e,a){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Whe.bind(null,this.syncEngine),await Vhe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dhe}createDatastore(e){const a=aP(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new yhe(i));var i;return function(l,c,n,v){return new _he(l,c,n,v)}(e.authCredentials,e.appCheckCredentials,r,a)}createRemoteStore(e){return a=this.localStore,r=this.datastore,i=e.asyncQueue,l=n=>FU(this.syncEngine,n,0),c=MU.D()?new MU:new phe,new Rhe(a,r,i,l,c);var a,r,i,l,c}createSyncEngine(e,a){return function(r,i,l,c,n,v,R){const x=new Uhe(r,i,l,c,n,v);return R&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,a)}terminate(){return async function(e){const a=gi(e);yn("RemoteStore","RemoteStore shutting down."),a.vu.add(5),await aC(a),a.Pu.shutdown(),a.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):zg("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,a){this.muted||setTimeout(()=>{this.muted||e(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class efe{constructor(e,a,r,i){this.authCredentials=e,this.appCheckCredentials=a,this.asyncQueue=r,this.databaseInfo=i,this.user=pd.UNAUTHENTICATED,this.clientId=HW.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async l=>{yn("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(yn("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qr(rr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(a){const r=cL(a,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function IN(t,e){t.asyncQueue.verifyOperationInProgress(),yn("FirestoreClient","Initializing OfflineComponentProvider");const a=await t.getConfiguration();await e.initialize(a);let r=a.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bY(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function BU(t,e){t.asyncQueue.verifyOperationInProgress();const a=await afe(t);yn("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(a,r),t.setCredentialChangeListener(i=>IU(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,l)=>IU(e.remoteStore,l)),t._onlineComponents=e}function tfe(t){return t.name==="FirebaseError"?t.code===rr.FAILED_PRECONDITION||t.code===rr.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function afe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){yn("FirestoreClient","Using user provided OfflineComponentProvider");try{await IN(t,t._uninitializedComponentsProvider._offline)}catch(e){const a=e;if(!tfe(a))throw a;__("Error using user provided cache. Falling back to memory cache: "+a),await IN(t,new UU)}}else yn("FirestoreClient","Using default OfflineComponentProvider"),await IN(t,new UU);return t._offlineComponents}async function GY(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(yn("FirestoreClient","Using user provided OnlineComponentProvider"),await BU(t,t._uninitializedComponentsProvider._online)):(yn("FirestoreClient","Using default OnlineComponentProvider"),await BU(t,new Qhe))),t._onlineComponents}function rfe(t){return GY(t).then(e=>e.syncEngine)}async function ix(t){const e=await GY(t),a=e.eventManager;return a.onListen=Bhe.bind(null,e.syncEngine),a.onUnlisten=Ghe.bind(null,e.syncEngine),a}function nfe(t,e,a={}){const r=new xg;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,c,n,v){const R=new gL({next:N=>{l.enqueueAndForget(()=>hL(i,x));const L=N.docs.has(c);!L&&N.fromCache?v.reject(new qr(rr.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&n&&n.source==="server"?v.reject(new qr(rr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),x=new pL(K2(c.path),R,{includeMetadataChanges:!0,Ku:!0});return dL(i,x)}(await ix(t),t.asyncQueue,e,a,r)),r.promise}function ife(t,e,a={}){const r=new xg;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,c,n,v){const R=new gL({next:N=>{l.enqueueAndForget(()=>hL(i,x)),N.fromCache&&n.source==="server"?v.reject(new qr(rr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),x=new pL(c,R,{includeMetadataChanges:!0,Ku:!0});return dL(i,x)}(await ix(t),t.asyncQueue,e,a,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZY(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(t,e,a){if(!a)throw new qr(rr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sfe(t,e,a,r){if(e===!0&&r===!0)throw new qr(rr.INVALID_ARGUMENT,`${t} and ${a} cannot be used together.`)}function GU(t){if(!Xn.isDocumentKey(t))throw new qr(rr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ZU(t){if(Xn.isDocumentKey(t))throw new qr(rr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iP(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ri()}function dh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qr(rr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=iP(t);throw new qr(rr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${a}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){var a,r;if(e.host===void 0){if(e.ssl!==void 0)throw new qr(rr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(a=e.ssl)===null||a===void 0||a;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new qr(rr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sfe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZY((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new qr(rr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new qr(rr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new qr(rr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(a=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,a.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var a,r}}class sP{constructor(e,a,r,i){this._authCredentials=e,this._appCheckCredentials=a,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new qr(rr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new qr(rr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qU(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Ece;switch(a.type){case"firstParty":return new zce(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new qr(rr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const a=jU.get(e);a&&(yn("ComponentProvider","Removing Datastore"),jU.delete(e),a.terminate())}(this),Promise.resolve()}}function ofe(t,e,a,r={}){var i;const l=(t=dh(t,sP))._getSettings(),c=`${e}:${a}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&__("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let n,v;if(typeof r.mockUserToken=="string")n=r.mockUserToken,v=pd.MOCK_USER;else{n=nK(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const R=r.mockUserToken.sub||r.mockUserToken.user_id;if(!R)throw new qr(rr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new pd(R)}t._authCredentials=new Nce(new qW(n,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,a,r){this.converter=a,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sd(this.firestore,e,this._key)}}class sA{constructor(e,a,r){this.converter=a,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sA(this.firestore,e,this._query)}}class Hy extends sA{constructor(e,a,r){super(e,a,K2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sd(this.firestore,null,new Xn(e))}withConverter(e){return new Hy(this.firestore,e,this._path)}}function Hn(t,e,...a){if(t=gl(t),qY("collection","path",e),t instanceof sP){const r=ql.fromString(e,...a);return ZU(r),new Hy(t,null,r)}{if(!(t instanceof Sd||t instanceof Hy))throw new qr(rr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ql.fromString(e,...a));return ZU(r),new Hy(t.firestore,null,r)}}function Ss(t,e,...a){if(t=gl(t),arguments.length===1&&(e=HW.A()),qY("doc","path",e),t instanceof sP){const r=ql.fromString(e,...a);return GU(r),new Sd(t,null,new Xn(r))}{if(!(t instanceof Sd||t instanceof Hy))throw new qr(rr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ql.fromString(e,...a));return GU(r),new Sd(t.firestore,t instanceof Hy?t.converter:null,new Xn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lfe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new PY(this,"async_queue_retry"),this.Xc=()=>{const a=MN();a&&yn("AsyncQueue","Visibility state changed to "+a.visibilityState),this.qo.Mo()};const e=MN();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const a=MN();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const a=new xg;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!QT(e))throw e;yn("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const a=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw zg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=a,a}enqueueAfterDelay(e,a,r){this.Zc(),this.Yc.indexOf(e)>-1&&(a=0);const i=uL.createAndSchedule(this,e,a,r,l=>this.na(l));return this.zc.push(i),i}Zc(){this.Wc&&ri()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const a of this.zc)if(a.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((a,r)=>a.targetTimeMs-r.targetTimeMs);for(const a of this.zc)if(a.skipDelay(),e!=="all"&&a.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const a=this.zc.indexOf(e);this.zc.splice(a,1)}}function HU(t){return function(e,a){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of a)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class qm extends sP{constructor(e,a,r,i){super(e,a,r,i),this.type="firestore",this._queue=new lfe,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||HY(this),this._firestoreClient.terminate()}}function ufe(t,e){const a=typeof t=="object"?t:p3(),r=typeof t=="string"?t:"(default)",i=b2(a,"firestore").getImmediate({identifier:r});if(!i._initialized){const l=tK("firestore");l&&ofe(i,...l)}return i}function nC(t){return t._firestoreClient||HY(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function HY(t){var e,a,r;const i=t._freezeSettings(),l=function(c,n,v,R){return new qce(c,n,v,R.host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,ZY(R.experimentalLongPollingOptions),R.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new efe(t._authCredentials,t._appCheckCredentials,t._queue,l),!((a=i.cache)===null||a===void 0)&&a._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new b_(xd.fromBase64String(e))}catch(a){throw new qr(rr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(e){return new b_(xd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(...e){for(let a=0;a<e.length;++a)if(e[a].length===0)throw new qr(rr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,a){if(!isFinite(e)||e<-90||e>90)throw new qr(rr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(a)||a<-180||a>180)throw new qr(rr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=e,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cs(this._lat,e._lat)||Cs(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cfe=/^__.*__$/;class dfe{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return this.fieldMask!==null?new iA(e,this.data,this.fieldMask,a,this.fieldTransforms):new eC(e,this.data,a,this.fieldTransforms)}}class $Y{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return new iA(e,this.data,this.fieldMask,a,this.fieldTransforms)}}function KY(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ri()}}class vL{constructor(e,a,r,i,l,c){this.settings=e,this.databaseId=a,this.serializer=r,this.ignoreUndefinedProperties=i,l===void 0&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new vL(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return sx(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(a=>e.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>e.isPrefixOf(a.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(KY(this.ca)&&cfe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class hfe{constructor(e,a,r){this.databaseId=e,this.ignoreUndefinedProperties=a,this.serializer=r||aP(e)}ya(e,a,r,i=!1){return new vL({ca:e,methodName:a,ga:r,path:Gm.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sC(t){const e=t._freezeSettings(),a=aP(t._databaseId);return new hfe(t._databaseId,!!e.ignoreUndefinedProperties,a)}function _L(t,e,a,r,i,l={}){const c=t.ya(l.merge||l.mergeFields?2:0,e,a,i);wL("Data must be an object, but it was:",c,r);const n=XY(r,c);let v,R;if(l.merge)v=new gf(c.fieldMask),R=c.fieldTransforms;else if(l.mergeFields){const x=[];for(const N of l.mergeFields){const L=hM(e,N,a);if(!c.contains(L))throw new qr(rr.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);QY(x,L)||x.push(L)}v=new gf(x),R=c.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,R=c.fieldTransforms;return new dfe(new Ih(n),v,R)}class oP extends yL{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oP}}function WY(t,e,a,r){const i=t.ya(1,e,a);wL("Data must be an object, but it was:",i,r);const l=[],c=Ih.empty();Bv(r,(v,R)=>{const x=RL(e,v,a);R=gl(R);const N=i.da(x);if(R instanceof oP)l.push(x);else{const L=oC(R,N);L!=null&&(l.push(x),c.set(x,L))}});const n=new gf(l);return new $Y(c,n,i.fieldTransforms)}function YY(t,e,a,r,i,l){const c=t.ya(1,e,a),n=[hM(e,r,a)],v=[i];if(l.length%2!=0)throw new qr(rr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<l.length;L+=2)n.push(hM(e,l[L])),v.push(l[L+1]);const R=[],x=Ih.empty();for(let L=n.length-1;L>=0;--L)if(!QY(R,n[L])){const F=n[L];let j=v[L];j=gl(j);const H=c.da(F);if(j instanceof oP)R.push(F);else{const q=oC(j,H);q!=null&&(R.push(F),x.set(F,q))}}const N=new gf(R);return new $Y(x,N,c.fieldTransforms)}function ffe(t,e,a,r=!1){return oC(a,t.ya(r?4:3,e))}function oC(t,e){if(JY(t=gl(t)))return wL("Unsupported field value:",e,t),XY(t,e);if(t instanceof yL)return function(a,r){if(!KY(r.ca))throw r._a(`${a._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${a._methodName}() is not currently supported inside arrays`);const i=a._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(a,r){const i=[];let l=0;for(const c of a){let n=oC(c,r.wa(l));n==null&&(n={nullValue:"NULL_VALUE"}),i.push(n),l++}return{arrayValue:{values:i}}}(t,e)}return function(a,r){if((a=gl(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return dde(r.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const i=uh.fromDate(a);return{timestampValue:rx(r.serializer,i)}}if(a instanceof uh){const i=new uh(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:rx(r.serializer,i)}}if(a instanceof AL)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof b_)return{bytesValue:_Y(r.serializer,a._byteString)};if(a instanceof Sd){const i=r.databaseId,l=a.firestore._databaseId;if(!l.isEqual(i))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:aL(a.firestore._databaseId||r.databaseId,a._key.path)}}throw r._a(`Unsupported field value: ${iP(a)}`)}(t,e)}function XY(t,e){const a={};return KW(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bv(t,(r,i)=>{const l=oC(i,e.ha(r));l!=null&&(a[r]=l)}),{mapValue:{fields:a}}}function JY(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof uh||t instanceof AL||t instanceof b_||t instanceof Sd||t instanceof yL)}function wL(t,e,a){if(!JY(a)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(a)){const r=iP(a);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function hM(t,e,a){if((e=gl(e))instanceof iC)return e._internalPath;if(typeof e=="string")return RL(t,e);throw sx("Field path arguments must be of type string or ",t,!1,void 0,a)}const pfe=new RegExp("[~\\*/\\[\\]]");function RL(t,e,a){if(e.search(pfe)>=0)throw sx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,a);try{return new iC(...e.split("."))._internalPath}catch{throw sx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,a)}}function sx(t,e,a,r,i){const l=r&&!r.isEmpty(),c=i!==void 0;let n=`Function ${e}() called with invalid data`;a&&(n+=" (via `toFirestore()`)"),n+=". ";let v="";return(l||c)&&(v+=" (found",l&&(v+=` in field ${r}`),c&&(v+=` in document ${i}`),v+=")"),new qr(rr.INVALID_ARGUMENT,n+t+v)}function QY(t,e){return t.some(a=>a.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eX{constructor(e,a,r,i,l){this._firestore=e,this._userDataWriter=a,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Sd(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const a=this._document.data.field(lP("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a)}}}class mfe extends eX{data(){return super.data()}}function lP(t,e){return typeof e=="string"?RL(t,e):e instanceof iC?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tX(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qr(rr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TL{}class aX extends TL{}function Y0(t,e,...a){let r=[];e instanceof TL&&r.push(e),r=r.concat(a),function(i){const l=i.filter(n=>n instanceof CL).length,c=i.filter(n=>n instanceof uP).length;if(l>1||l>0&&c>0)throw new qr(rr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class uP extends aX{constructor(e,a,r){super(),this._field=e,this._op=a,this._value=r,this.type="where"}static _create(e,a,r){return new uP(e,a,r)}_apply(e){const a=this._parse(e);return nX(e._query,a),new sA(e.firestore,e.converter,rM(e._query,a))}_parse(e){const a=sC(e.firestore);return function(i,l,c,n,v,R,x){let N;if(v.isKeyField()){if(R==="array-contains"||R==="array-contains-any")throw new qr(rr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${R}' queries on documentId().`);if(R==="in"||R==="not-in"){KU(x,R);const L=[];for(const F of x)L.push($U(n,i,F));N={arrayValue:{values:L}}}else N=$U(n,i,x)}else R!=="in"&&R!=="not-in"&&R!=="array-contains-any"||KU(x,R),N=ffe(c,l,x,R==="in"||R==="not-in");return gu.create(v,R,N)}(e._query,"where",a,e.firestore._databaseId,this._field,this._op,this._value)}}function BS(t,e,a){const r=e,i=lP("where",t);return uP._create(i,r,a)}class CL extends TL{constructor(e,a){super(),this.type=e,this._queryConstraints=a}static _create(e,a){return new CL(e,a)}_parse(e){const a=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return a.length===1?a[0]:Kp.create(a,this._getOperator())}_apply(e){const a=this._parse(e);return a.getFilters().length===0?e:(function(r,i){let l=r;const c=i.getFlattenedFilters();for(const n of c)nX(l,n),l=rM(l,n)}(e._query,a),new sA(e.firestore,e.converter,rM(e._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class SL extends aX{constructor(e,a){super(),this._field=e,this._direction=a,this.type="orderBy"}static _create(e,a){return new SL(e,a)}_apply(e){const a=function(r,i,l){if(r.startAt!==null)throw new qr(rr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new qr(rr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new l_(i,l);return function(n,v){if(J3(n)===null){const R=W2(n);R!==null&&iX(n,R,v.field)}}(r,c),c}(e._query,this._field,this._direction);return new sA(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new f1(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,a))}}function rX(t,e="asc"){const a=e,r=lP("orderBy",t);return SL._create(r,a)}function $U(t,e,a){if(typeof(a=gl(a))=="string"){if(a==="")throw new qr(rr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rY(e)&&a.indexOf("/")!==-1)throw new qr(rr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const r=e.path.child(ql.fromString(a));if(!Xn.isDocumentKey(r))throw new qr(rr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gU(t,new Xn(r))}if(a instanceof Sd)return gU(t,a._key);throw new qr(rr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iP(a)}.`)}function KU(t,e){if(!Array.isArray(t)||t.length===0)throw new qr(rr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nX(t,e){if(e.isInequality()){const r=W2(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new qr(rr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const l=J3(t);l!==null&&iX(t,i,l)}const a=function(r,i){for(const l of r)for(const c of l.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(a!==null)throw a===e.op?new qr(rr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qr(rr.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${a.toString()}' filters.`)}function iX(t,e,a){if(!a.isEqual(e))throw new qr(rr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${a.toString()}' instead.`)}class gfe{convertValue(e,a="none"){switch(Ov(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,a);case 5:return e.stringValue;case 6:return this.convertBytes(Nv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,a);case 10:return this.convertObject(e.mapValue,a);default:throw ri()}}convertObject(e,a){return this.convertObjectMap(e.fields,a)}convertObjectMap(e,a="none"){const r={};return Bv(e,(i,l)=>{r[i]=this.convertValue(l,a)}),r}convertGeoPoint(e){return new AL(pu(e.latitude),pu(e.longitude))}convertArray(e,a){return(e.values||[]).map(r=>this.convertValue(r,a))}convertServerTimestamp(e,a){switch(a){case"previous":const r=K3(e);return r==null?null:this.convertValue(r,a);case"estimate":return this.convertTimestamp(HR(e));default:return null}}convertTimestamp(e){const a=Yy(e);return new uh(a.seconds,a.nanos)}convertDocumentKey(e,a){const r=ql.fromString(e);Fo(SY(r));const i=new $R(r.get(1),r.get(3)),l=new Xn(r.popFirst(5));return i.isEqual(a)||zg(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t,e,a){let r;return r=t?a&&(a.merge||a.mergeFields)?t.toFirestore(e,a):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,a){this.hasPendingWrites=e,this.fromCache=a}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sX extends eX{constructor(e,a,r,i,l,c){super(e,a,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const a=new Rb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,a={}){if(this._document){const r=this._document.data.field(lP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,a.serverTimestamps)}}}class Rb extends sX{data(e={}){return super.data(e)}}class oX{constructor(e,a,r,i){this._firestore=e,this._userDataWriter=a,this._snapshot=i,this.metadata=new cR(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(a=>e.push(a)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,a){this._snapshot.docs.forEach(r=>{e.call(a,new Rb(this._firestore,this._userDataWriter,r.key,r,new cR(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const a=!!e.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new qr(rr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(c=>{const n=new Rb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cR(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:n,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const n=new Rb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cR(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,R=-1;return c.type!==0&&(v=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),R=l.indexOf(c.doc.key)),{type:yfe(c.type),doc:n,oldIndex:v,newIndex:R}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function yfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ri()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){t=dh(t,Sd);const e=dh(t.firestore,qm);return nfe(nC(e),t._key).then(a=>lX(e,t,a))}class xL extends gfe{constructor(e){super(),this.firestore=e}convertBytes(e){return new b_(e)}convertReference(e){const a=this.convertDocumentKey(e,this.firestore._databaseId);return new Sd(this.firestore,null,a)}}function rs(t){t=dh(t,sA);const e=dh(t.firestore,qm),a=nC(e),r=new xL(e);return tX(t._query),ife(a,t._query).then(i=>new oX(e,r,t,i))}function Afe(t,e,a){t=dh(t,Sd);const r=dh(t.firestore,qm),i=bL(t.converter,e,a);return lC(r,[_L(sC(r),"setDoc",t._key,i,t.converter!==null,a).toMutation(t._key,ch.none())])}function Ad(t,e,a,...r){t=dh(t,Sd);const i=dh(t.firestore,qm),l=sC(i);let c;return c=typeof(e=gl(e))=="string"||e instanceof iC?YY(l,"updateDoc",t._key,e,a,r):WY(l,"updateDoc",t._key,e),lC(i,[c.toMutation(t._key,ch.exists(!0))])}function PL(t){return lC(dh(t.firestore,qm),[new eP(t._key,ch.none())])}function x_(t,e){const a=dh(t.firestore,qm),r=Ss(t),i=bL(t.converter,e);return lC(a,[_L(sC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ch.exists(!1))]).then(()=>r)}function Ag(t,...e){var a,r,i;t=gl(t);let l={includeMetadataChanges:!1},c=0;typeof e[c]!="object"||HU(e[c])||(l=e[c],c++);const n={includeMetadataChanges:l.includeMetadataChanges};if(HU(e[c])){const N=e[c];e[c]=(a=N.next)===null||a===void 0?void 0:a.bind(N),e[c+1]=(r=N.error)===null||r===void 0?void 0:r.bind(N),e[c+2]=(i=N.complete)===null||i===void 0?void 0:i.bind(N)}let v,R,x;if(t instanceof Sd)R=dh(t.firestore,qm),x=K2(t._key.path),v={next:N=>{e[c]&&e[c](lX(R,t,N))},error:e[c+1],complete:e[c+2]};else{const N=dh(t,sA);R=dh(N.firestore,qm),x=N._query;const L=new xL(R);v={next:F=>{e[c]&&e[c](new oX(R,L,N,F))},error:e[c+1],complete:e[c+2]},tX(t._query)}return function(N,L,F,j){const H=new gL(j),q=new pL(L,H,F);return N.asyncQueue.enqueueAndForget(async()=>dL(await ix(N),q)),()=>{H.Dc(),N.asyncQueue.enqueueAndForget(async()=>hL(await ix(N),q))}}(nC(R),x,n,v)}function lC(t,e){return function(a,r){const i=new xg;return a.asyncQueue.enqueueAndForget(async()=>Zhe(await rfe(a),r,i)),i.promise}(nC(t),e)}function lX(t,e,a){const r=a.docs.get(e._key),i=new xL(t);return new sX(t,i,e._key,r,new cR(a.hasPendingWrites,a.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vfe{constructor(e,a){this._firestore=e,this._commitHandler=a,this._mutations=[],this._committed=!1,this._dataReader=sC(e)}set(e,a,r){this._verifyNotCommitted();const i=LN(e,this._firestore),l=bL(i.converter,a,r),c=_L(this._dataReader,"WriteBatch.set",i._key,l,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,ch.none())),this}update(e,a,r,...i){this._verifyNotCommitted();const l=LN(e,this._firestore);let c;return c=typeof(a=gl(a))=="string"||a instanceof iC?YY(this._dataReader,"WriteBatch.update",l._key,a,r,i):WY(this._dataReader,"WriteBatch.update",l._key,a),this._mutations.push(c.toMutation(l._key,ch.exists(!0))),this}delete(e){this._verifyNotCommitted();const a=LN(e,this._firestore);return this._mutations=this._mutations.concat(new eP(a._key,ch.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qr(rr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function LN(t,e){if((t=gl(t)).firestore!==e)throw new qr(rr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fe(t){return nC(t=dh(t,qm)),new vfe(t,e=>lC(t,e))}(function(t,e=!0){(function(a){h1=a})(kv),bv(new Wy("firestore",(a,{instanceIdentifier:r,options:i})=>{const l=a.getProvider("app").getImmediate(),c=new qm(new Oce(a.getProvider("auth-internal")),new Mce(a.getProvider("app-check-internal")),function(n,v){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new qr(rr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $R(n.options.projectId,v)}(l,r),l);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Im(dU,"3.13.0",t),Im(dU,"3.13.0","esm2017")})();const wfe={apiKey:"AIzaSyAqEefB5cZ1jVzeqdhxfRYHUzOqgyUqieo",authDomain:"ecp-caps.firebaseapp.com",projectId:"ecp-caps",storageBucket:"ecp-caps.firebasestorage.app",messagingSenderId:"1040391525167",appId:"1:1040391525167:web:c4b9bff139a86daacf47da"},uX=oK(wfe),g1=GK(uX),Er=ufe(uX);var cX={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},WU=Ot.createContext&&Ot.createContext(cX),Rfe=["attr","size","title"];function Tfe(t,e){if(t==null)return{};var a=Cfe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Cfe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ox(){return ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ox.apply(this,arguments)}function YU(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function lx(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(a),!0).forEach(function(r){Sfe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):YU(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Sfe(t,e,a){return e=bfe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function bfe(t){var e=xfe(t,"string");return typeof e=="symbol"?e:e+""}function xfe(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dX(t){return t&&t.map((e,a)=>Ot.createElement(e.tag,lx({key:a},e.attr),dX(e.child)))}function ko(t){return e=>Ot.createElement(Pfe,ox({attr:lx({},t.attr)},e),dX(t.child))}function Pfe(t){var e=a=>{var{attr:r,size:i,title:l}=t,c=Tfe(t,Rfe),n=i||a.size||"1em",v;return a.className&&(v=a.className),t.className&&(v=(v?v+" ":"")+t.className),Ot.createElement("svg",ox({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,c,{className:v,style:lx(lx({color:t.color||a.color},a.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),l&&Ot.createElement("title",null,l),t.children)};return WU!==void 0?Ot.createElement(WU.Consumer,null,a=>e(a)):e(cX)}function Efe(t){return ko({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Nfe(t){return ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(t)}function XU(t){return ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function Ofe(t){return ko({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Vfe(t){return ko({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function zfe(t){return ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function vR(t){return ko({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function Dfe(t){return ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function Mfe(t){return ko({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function Ife(t){return ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(t)}function EL(t){return ko({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function hX(t){return ko({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function fX(t){return ko({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function JU(t){return ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Lfe(t){return ko({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M630.6 364.9l-90.3-90.2c-12-12-28.3-18.7-45.3-18.7h-79.3c-17.7 0-32 14.3-32 32v79.2c0 17 6.7 33.2 18.7 45.2l90.3 90.2c12.5 12.5 32.8 12.5 45.3 0l92.5-92.5c12.6-12.5 12.6-32.7.1-45.2zm-182.8-21c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24c0 13.2-10.7 24-24 24zm-223.8-88c70.7 0 128-57.3 128-128C352 57.3 294.7 0 224 0S96 57.3 96 128c0 70.6 57.3 127.9 128 127.9zm127.8 111.2V294c-12.2-3.6-24.9-6.2-38.2-6.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 287.9 0 348.1 0 422.3v41.6c0 26.5 21.5 48 48 48h352c15.5 0 29.1-7.5 37.9-18.9l-58-58c-18.1-18.1-28.1-42.2-28.1-67.9z"},child:[]}]})(t)}const oA=()=>{const[t,e]=le.useState("Loading..."),[a,r]=le.useState([]),[i,l]=le.useState(!1),[c,n]=le.useState(0),v="https://ecorideupload.s3.ap-southeast-2.amazonaws.com/uploads/profile/1742829316204_image.png";le.useEffect(()=>{const F=Hn(Er,"notifications"),j=Y0(F,rX("timestamp","desc")),H=Ag(j,q=>{const W=[];q.forEach(ee=>{W.push({id:ee.id,...ee.data()})}),r(W),n(W.filter(ee=>!ee.read).length)});return()=>H()},[]),le.useEffect(()=>{const F=g1.onAuthStateChanged(async j=>{if(j)try{const H=Ss(Er,"users",j.uid),q=await Xf(H);q.exists()?e(q.data().name):e("Super Admin")}catch(H){console.error("Error fetching user data:",H)}else e("Unknown User")});return()=>F()},[]);const R=()=>{l(!i)},x=async()=>{try{const F=_fe(Er);a.filter(j=>!j.read).forEach(j=>{const H=Ss(Er,"notifications",j.id);F.update(H,{read:!0})}),await F.commit(),r(a.map(j=>({...j,read:!0}))),n(0)}catch(F){console.error("Error marking notifications as read:",F)}},N=F=>{if(!F)return"";const j=F.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(j)},L=F=>{switch(F.type){case"status_update":return $.jsxs("div",{className:"notification-message",children:[$.jsx("p",{children:F.message}),$.jsx("span",{className:`status-badge ${F.status.toLowerCase().replace(" ","-")}`,children:F.status})]});case"battery_update":return $.jsxs("div",{className:"notification-message",children:[$.jsx("p",{children:F.message}),$.jsx("div",{className:"battery-indicator",children:$.jsx("span",{className:"battery-level",style:{width:`${F.batteryLevel}%`}})})]});default:return $.jsx("p",{children:F.message})}};return $.jsx("div",{className:"header",children:$.jsxs("div",{className:"user-profile",children:[$.jsxs("div",{className:"profile",children:[$.jsx("img",{src:v,alt:"Profile",className:"profile-img"}),$.jsxs("div",{className:"profile-name",children:[$.jsx("p",{children:t}),$.jsx("small",{children:"Super Admin"})]})]}),$.jsxs("div",{className:"notification-container",children:[$.jsx(Efe,{className:"icon",onClick:R}),c>0&&$.jsx("span",{className:"notification-badge",children:c}),i&&$.jsxs("div",{className:"notifications-modal",children:[$.jsxs("div",{className:"notifications-header",children:[$.jsx("h3",{children:"Notifications"}),$.jsx("button",{className:"mark-all-read",onClick:x,disabled:c===0,children:"Mark all as read"})]}),$.jsx("div",{className:"notifications-list",children:a.length>0?a.map(F=>$.jsx("div",{className:`notification-item ${F.read?"":"unread"}`,children:$.jsxs("div",{className:"notification-content",children:[L(F),$.jsx("span",{className:"notification-time",children:N(F.timestamp)})]})},F.id)):$.jsx("p",{className:"no-notifications",children:"No notifications"})})]})]})]})})};function Ffe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2zm0 14H5V5c0-.806.55-.988 1-1h13v12z"},child:[]}]})(t)}function kfe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 15.414V20h2v-4.586c0-.526-.214-1.042-.586-1.414l-2-2L13 9.414l2 2c.372.372.888.586 1.414.586H20v-2h-3.586l-3.707-3.707a.999.999 0 0 0-1.414 0L8 9.586c-.378.378-.586.88-.586 1.414s.208 1.036.586 1.414l3 3z"},child:[]},{tag:"circle",attr:{cx:"16",cy:"5",r:"2"},child:[]},{tag:"path",attr:{d:"M18 14c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM6 22c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]}]})(t)}function Ufe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"},child:[]}]})(t)}function Bfe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 13v-2H7V8l-5 4 5 4v-3z"},child:[]},{tag:"path",attr:{d:"M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"},child:[]}]})(t)}function jfe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 14c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]},{tag:"path",attr:{d:"M11.42 21.814a.998.998 0 0 0 1.16 0C12.884 21.599 20.029 16.44 20 10c0-4.411-3.589-8-8-8S4 5.589 4 9.995c-.029 6.445 7.116 11.604 7.42 11.819zM12 4c3.309 0 6 2.691 6 6.005.021 4.438-4.388 8.423-6 9.73-1.611-1.308-6.021-5.294-6-9.735 0-3.309 2.691-6 6-6z"},child:[]}]})(t)}function Gfe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 12a2 2 0 0 0-.703.133l-2.398-1.963c.059-.214.101-.436.101-.67C17 8.114 15.886 7 14.5 7S12 8.114 12 9.5c0 .396.1.765.262 1.097l-2.909 3.438A2.06 2.06 0 0 0 9 14c-.179 0-.348.03-.512.074l-2.563-2.563C5.97 11.348 6 11.179 6 11c0-1.108-.892-2-2-2s-2 .892-2 2 .892 2 2 2c.179 0 .348-.03.512-.074l2.563 2.563A1.906 1.906 0 0 0 7 16c0 1.108.892 2 2 2s2-.892 2-2c0-.237-.048-.46-.123-.671l2.913-3.442c.227.066.462.113.71.113a2.48 2.48 0 0 0 1.133-.281l2.399 1.963A2.077 2.077 0 0 0 18 14c0 1.108.892 2 2 2s2-.892 2-2-.892-2-2-2z"},child:[]}]})(t)}function Zfe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h15.893c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zm0-2v-5h4v5H4zM14 7v5h-4V7h4zM8 7v5H4V7h4zm2 12v-5h4v5h-4zm6 0v-5h3.894v5H16zm3.893-7H16V7h3.893v5z"},child:[]}]})(t)}function qfe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1H5c-1.103 0-2 .897-2 2v15c0 1.103.897 2 2 2zM5 5h2v2h10V5h2v15H5V5z"},child:[]},{tag:"path",attr:{d:"m11 13.586-1.793-1.793-1.414 1.414L11 16.414l5.207-5.207-1.414-1.414z"},child:[]}]})(t)}function Hfe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.29 8.29 16 12.58l-1.3-1.29-1.41 1.42 2.7 2.7 5.72-5.7zM4 8a3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4 3.91 3.91 0 0 0-4 4zm6 0a1.91 1.91 0 0 1-2 2 1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2zM4 18a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h2v-1a5 5 0 0 0-5-5H7a5 5 0 0 0-5 5v1h2z"},child:[]}]})(t)}function $fe(t){return ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m20 8-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM9 19H7v-9h2v9zm4 0h-2v-6h2v6zm4 0h-2v-3h2v3zM14 9h-1V4l5 5h-4z"},child:[]}]})(t)}const NL=()=>{const t=o3(),e=aA(),a=async()=>{try{await g1.signOut(),t("/login")}catch(i){console.error("Error signing out: ",i.message)}},r=i=>e.pathname===i;return $.jsxs("div",{className:"sidebar",children:[$.jsx("div",{className:"logo",children:$.jsx("img",{src:"/ecpcaps/assets/ecoridelogo2.png",alt:"EcoRide Logo",style:{width:"100%",maxWidth:"100px",height:"auto"}})}),$.jsxs("div",{className:"menu-list",children:[$.jsxs("div",{className:`menu-item ${r("/dashboard")?"active":""}`,onClick:()=>t("/dashboard"),children:[$.jsx(Ufe,{}),$.jsx("span",{children:"Dashboard"})]}),$.jsxs("div",{className:`menu-item ${r("/stations")?"active":""}`,onClick:()=>t("/stations"),children:[$.jsx(Ffe,{}),$.jsx("span",{children:"Manage Stations"})]}),$.jsxs("div",{className:`menu-item ${r("/user-management")?"active":""}`,onClick:()=>t("/user-management"),children:[$.jsx(Hfe,{}),$.jsx("span",{children:"Manage User"})]}),$.jsxs("div",{className:`menu-item ${r("/admin-management")?"active":""}`,onClick:()=>t("/admin-management"),children:[$.jsx($fe,{}),$.jsx("span",{children:"Manage & Create Admin"})]}),$.jsxs("div",{className:`menu-item ${r("/bike-management")?"active":""}`,onClick:()=>t("/bike-management"),children:[$.jsx(kfe,{}),$.jsx("span",{children:"Manage Bikes"})]}),$.jsxs("div",{className:`menu-item ${r("/rate-management")?"active":""}`,onClick:()=>t("/rate-management"),children:[$.jsx(qfe,{}),$.jsx("span",{children:"Rate Management"})]}),$.jsxs("div",{className:`menu-item ${r("/system-analytics")?"active":""}`,onClick:()=>t("/system-analytics"),children:[$.jsx(Gfe,{}),$.jsx("span",{children:"System Analytics"})]}),$.jsxs("div",{className:`menu-item ${r("/ride-details")?"active":""}`,onClick:()=>t("/ride-details"),children:[$.jsx(Zfe,{}),$.jsx("span",{children:"Ride Details"})]}),$.jsxs("div",{className:`menu-item ${r("/coverage-area")?"active":""}`,onClick:()=>t("/coverage-area"),children:[$.jsx(jfe,{}),$.jsx("span",{children:"Coverage Area"})]}),$.jsxs("div",{className:"menu-item logout",onClick:a,children:[$.jsx(Bfe,{}),$.jsx("span",{children:"Logout"})]})]})]})};var Tb={exports:{}},Kfe=Tb.exports,QU;function Wfe(){return QU||(QU=1,function(t,e){(function(a,r){t.exports=r()})(Kfe,function(){var a,r,i;function l(n,v){if(!a)a=v;else if(!r)r=v;else{var R="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};a(x),i=v(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}l(["exports"],function(n){function v(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var R,x={},N={};function L(){if(R)return N;R=1,Object.defineProperty(N,"__esModule",{value:!0}),N.setMatrixArrayType=function(g){N.ARRAY_TYPE=s=g},N.toRadian=function(g){return g*f},N.equals=function(g,m){return Math.abs(g-m)<=h*Math.max(1,Math.abs(g),Math.abs(m))},N.RANDOM=N.ARRAY_TYPE=N.EPSILON=void 0;var h=1e-6;N.EPSILON=h;var s=typeof Float32Array<"u"?Float32Array:Array;N.ARRAY_TYPE=s;var u=Math.random;N.RANDOM=u;var f=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var g=0,m=arguments.length;m--;)g+=arguments[m]*arguments[m];return Math.sqrt(g)}),N}var F,j={};function H(){if(F)return j;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}F=1,Object.defineProperty(j,"__esModule",{value:!0}),j.create=function(){var m=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},j.clone=function(m){var _=new s.ARRAY_TYPE(4);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_},j.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m},j.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},j.fromValues=function(m,_,b,O){var D=new s.ARRAY_TYPE(4);return D[0]=m,D[1]=_,D[2]=b,D[3]=O,D},j.set=function(m,_,b,O,D){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m},j.transpose=function(m,_){if(m===_){var b=_[1];m[1]=_[2],m[2]=b}else m[0]=_[0],m[1]=_[2],m[2]=_[1],m[3]=_[3];return m},j.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=b*C-D*O;return V?(m[0]=C*(V=1/V),m[1]=-O*V,m[2]=-D*V,m[3]=b*V,m):null},j.adjoint=function(m,_){var b=_[0];return m[0]=_[3],m[1]=-_[1],m[2]=-_[2],m[3]=b,m},j.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},j.multiply=f,j.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=Math.sin(b),z=Math.cos(b);return m[0]=O*z+C*I,m[1]=D*z+V*I,m[2]=O*-I+C*z,m[3]=D*-I+V*z,m},j.scale=function(m,_,b){var O=_[1],D=_[2],C=_[3],V=b[0],I=b[1];return m[0]=_[0]*V,m[1]=O*V,m[2]=D*I,m[3]=C*I,m},j.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=-b,m[3]=O,m},j.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m},j.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},j.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},j.LDU=function(m,_,b,O){return m[2]=O[2]/O[0],b[0]=O[0],b[1]=O[1],b[3]=O[3]-m[2]*b[1],[m,_,b]},j.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m},j.subtract=g,j.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]},j.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=_[0],I=_[1],z=_[2],M=_[3];return Math.abs(b-V)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(O-I)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(I))&&Math.abs(D-z)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(z))&&Math.abs(C-M)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(M))},j.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m},j.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m},j.sub=j.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(L());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=b[0],z=b[1],M=b[2],B=b[3];return m[0]=O*I+C*z,m[1]=D*I+V*z,m[2]=O*M+C*B,m[3]=D*M+V*B,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m}return j.mul=f,j.sub=g,j}var q,W={};function ee(){if(q)return W;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}q=1,Object.defineProperty(W,"__esModule",{value:!0}),W.create=function(){var m=new s.ARRAY_TYPE(6);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},W.clone=function(m){var _=new s.ARRAY_TYPE(6);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_},W.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m},W.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},W.fromValues=function(m,_,b,O,D,C){var V=new s.ARRAY_TYPE(6);return V[0]=m,V[1]=_,V[2]=b,V[3]=O,V[4]=D,V[5]=C,V},W.set=function(m,_,b,O,D,C,V){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m[4]=C,m[5]=V,m},W.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=b*C-O*D;return z?(m[0]=C*(z=1/z),m[1]=-O*z,m[2]=-D*z,m[3]=b*z,m[4]=(D*I-C*V)*z,m[5]=(O*V-b*I)*z,m):null},W.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},W.multiply=f,W.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=Math.sin(b),B=Math.cos(b);return m[0]=O*B+C*M,m[1]=D*B+V*M,m[2]=O*-M+C*B,m[3]=D*-M+V*B,m[4]=I,m[5]=z,m},W.scale=function(m,_,b){var O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=b[0],M=b[1];return m[0]=_[0]*z,m[1]=O*z,m[2]=D*M,m[3]=C*M,m[4]=V,m[5]=I,m},W.translate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=b[0],B=b[1];return m[0]=O,m[1]=D,m[2]=C,m[3]=V,m[4]=O*M+C*B+I,m[5]=D*M+V*B+z,m},W.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=-b,m[3]=O,m[4]=0,m[5]=0,m},W.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m[4]=0,m[5]=0,m},W.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=_[0],m[5]=_[1],m},W.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},W.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},W.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m},W.subtract=g,W.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m},W.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m[4]=_[4]+b[4]*O,m[5]=_[5]+b[5]*O,m},W.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]},W.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=m[4],I=m[5],z=_[0],M=_[1],B=_[2],J=_[3],te=_[4],he=_[5];return Math.abs(b-z)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(z))&&Math.abs(O-M)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(M))&&Math.abs(D-B)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(B))&&Math.abs(C-J)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(J))&&Math.abs(V-te)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(te))&&Math.abs(I-he)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(he))},W.sub=W.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(L());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=b[0],B=b[1],J=b[2],te=b[3],he=b[4],de=b[5];return m[0]=O*M+C*B,m[1]=D*M+V*B,m[2]=O*J+C*te,m[3]=D*J+V*te,m[4]=O*he+C*de+I,m[5]=D*he+V*de+z,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m}return W.mul=f,W.sub=g,W}var oe,fe={};function se(){if(oe)return fe;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}oe=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.create=function(){var m=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},fe.fromMat4=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[4],m[4]=_[5],m[5]=_[6],m[6]=_[8],m[7]=_[9],m[8]=_[10],m},fe.clone=function(m){var _=new s.ARRAY_TYPE(9);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_[6]=m[6],_[7]=m[7],_[8]=m[8],_},fe.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},fe.fromValues=function(m,_,b,O,D,C,V,I,z){var M=new s.ARRAY_TYPE(9);return M[0]=m,M[1]=_,M[2]=b,M[3]=O,M[4]=D,M[5]=C,M[6]=V,M[7]=I,M[8]=z,M},fe.set=function(m,_,b,O,D,C,V,I,z,M){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m[4]=C,m[5]=V,m[6]=I,m[7]=z,m[8]=M,m},fe.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},fe.transpose=function(m,_){if(m===_){var b=_[1],O=_[2],D=_[5];m[1]=_[3],m[2]=_[6],m[3]=b,m[5]=_[7],m[6]=O,m[7]=D}else m[0]=_[0],m[1]=_[3],m[2]=_[6],m[3]=_[1],m[4]=_[4],m[5]=_[7],m[6]=_[2],m[7]=_[5],m[8]=_[8];return m},fe.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=_[6],M=_[7],B=_[8],J=B*V-I*M,te=-B*C+I*z,he=M*C-V*z,de=b*J+O*te+D*he;return de?(m[0]=J*(de=1/de),m[1]=(-B*O+D*M)*de,m[2]=(I*O-D*V)*de,m[3]=te*de,m[4]=(B*b-D*z)*de,m[5]=(-I*b+D*C)*de,m[6]=he*de,m[7]=(-M*b+O*z)*de,m[8]=(V*b-O*C)*de,m):null},fe.adjoint=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=_[6],M=_[7],B=_[8];return m[0]=V*B-I*M,m[1]=D*M-O*B,m[2]=O*I-D*V,m[3]=I*z-C*B,m[4]=b*B-D*z,m[5]=D*C-b*I,m[6]=C*M-V*z,m[7]=O*z-b*M,m[8]=b*V-O*C,m},fe.determinant=function(m){var _=m[3],b=m[4],O=m[5],D=m[6],C=m[7],V=m[8];return m[0]*(V*b-O*C)+m[1]*(-V*_+O*D)+m[2]*(C*_-b*D)},fe.multiply=f,fe.translate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=_[6],B=_[7],J=_[8],te=b[0],he=b[1];return m[0]=O,m[1]=D,m[2]=C,m[3]=V,m[4]=I,m[5]=z,m[6]=te*O+he*V+M,m[7]=te*D+he*I+B,m[8]=te*C+he*z+J,m},fe.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=_[6],B=_[7],J=_[8],te=Math.sin(b),he=Math.cos(b);return m[0]=he*O+te*V,m[1]=he*D+te*I,m[2]=he*C+te*z,m[3]=he*V-te*O,m[4]=he*I-te*D,m[5]=he*z-te*C,m[6]=M,m[7]=B,m[8]=J,m},fe.scale=function(m,_,b){var O=b[0],D=b[1];return m[0]=O*_[0],m[1]=O*_[1],m[2]=O*_[2],m[3]=D*_[3],m[4]=D*_[4],m[5]=D*_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},fe.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=_[0],m[7]=_[1],m[8]=1,m},fe.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=0,m[3]=-b,m[4]=O,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},fe.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=0,m[4]=_[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},fe.fromMat2d=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=0,m[3]=_[2],m[4]=_[3],m[5]=0,m[6]=_[4],m[7]=_[5],m[8]=1,m},fe.fromQuat=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=b+b,I=O+O,z=D+D,M=b*V,B=O*V,J=O*I,te=D*V,he=D*I,de=D*z,ie=C*V,ve=C*I,be=C*z;return m[0]=1-J-de,m[3]=B-be,m[6]=te+ve,m[1]=B+be,m[4]=1-M-de,m[7]=he-ie,m[2]=te-ve,m[5]=he+ie,m[8]=1-M-J,m},fe.normalFromMat4=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=_[6],M=_[7],B=_[8],J=_[9],te=_[10],he=_[11],de=_[12],ie=_[13],ve=_[14],be=_[15],Oe=b*I-O*V,et=b*z-D*V,We=b*M-C*V,Ye=O*z-D*I,gt=O*M-C*I,tt=D*M-C*z,vt=B*ie-J*de,xt=B*ve-te*de,Ct=B*be-he*de,Dt=J*ve-te*ie,Nt=J*be-he*ie,jt=te*be-he*ve,Lt=Oe*jt-et*Nt+We*Dt+Ye*Ct-gt*xt+tt*vt;return Lt?(m[0]=(I*jt-z*Nt+M*Dt)*(Lt=1/Lt),m[1]=(z*Ct-V*jt-M*xt)*Lt,m[2]=(V*Nt-I*Ct+M*vt)*Lt,m[3]=(D*Nt-O*jt-C*Dt)*Lt,m[4]=(b*jt-D*Ct+C*xt)*Lt,m[5]=(O*Ct-b*Nt-C*vt)*Lt,m[6]=(ie*tt-ve*gt+be*Ye)*Lt,m[7]=(ve*We-de*tt-be*et)*Lt,m[8]=(de*gt-ie*We+be*Oe)*Lt,m):null},fe.projection=function(m,_,b){return m[0]=2/_,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/b,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},fe.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},fe.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},fe.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m[6]=_[6]+b[6],m[7]=_[7]+b[7],m[8]=_[8]+b[8],m},fe.subtract=g,fe.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m[6]=_[6]*b,m[7]=_[7]*b,m[8]=_[8]*b,m},fe.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m[4]=_[4]+b[4]*O,m[5]=_[5]+b[5]*O,m[6]=_[6]+b[6]*O,m[7]=_[7]+b[7]*O,m[8]=_[8]+b[8]*O,m},fe.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]&&m[6]===_[6]&&m[7]===_[7]&&m[8]===_[8]},fe.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=m[4],I=m[5],z=m[6],M=m[7],B=m[8],J=_[0],te=_[1],he=_[2],de=_[3],ie=_[4],ve=_[5],be=_[6],Oe=_[7],et=_[8];return Math.abs(b-J)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(J))&&Math.abs(O-te)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(te))&&Math.abs(D-he)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(he))&&Math.abs(C-de)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(de))&&Math.abs(V-ie)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(ie))&&Math.abs(I-ve)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(ve))&&Math.abs(z-be)<=s.EPSILON*Math.max(1,Math.abs(z),Math.abs(be))&&Math.abs(M-Oe)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(Oe))&&Math.abs(B-et)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(et))},fe.sub=fe.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(L());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=_[6],B=_[7],J=_[8],te=b[0],he=b[1],de=b[2],ie=b[3],ve=b[4],be=b[5],Oe=b[6],et=b[7],We=b[8];return m[0]=te*O+he*V+de*M,m[1]=te*D+he*I+de*B,m[2]=te*C+he*z+de*J,m[3]=ie*O+ve*V+be*M,m[4]=ie*D+ve*I+be*B,m[5]=ie*C+ve*z+be*J,m[6]=Oe*O+et*V+We*M,m[7]=Oe*D+et*I+We*B,m[8]=Oe*C+et*z+We*J,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m[6]=_[6]-b[6],m[7]=_[7]-b[7],m[8]=_[8]-b[8],m}return fe.mul=f,fe.sub=g,fe}var me,ge={};function Re(){if(me)return ge;function h(C){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},h(C)}me=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.create=function(){var C=new s.ARRAY_TYPE(16);return s.ARRAY_TYPE!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},ge.clone=function(C){var V=new s.ARRAY_TYPE(16);return V[0]=C[0],V[1]=C[1],V[2]=C[2],V[3]=C[3],V[4]=C[4],V[5]=C[5],V[6]=C[6],V[7]=C[7],V[8]=C[8],V[9]=C[9],V[10]=C[10],V[11]=C[11],V[12]=C[12],V[13]=C[13],V[14]=C[14],V[15]=C[15],V},ge.copy=function(C,V){return C[0]=V[0],C[1]=V[1],C[2]=V[2],C[3]=V[3],C[4]=V[4],C[5]=V[5],C[6]=V[6],C[7]=V[7],C[8]=V[8],C[9]=V[9],C[10]=V[10],C[11]=V[11],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15],C},ge.fromValues=function(C,V,I,z,M,B,J,te,he,de,ie,ve,be,Oe,et,We){var Ye=new s.ARRAY_TYPE(16);return Ye[0]=C,Ye[1]=V,Ye[2]=I,Ye[3]=z,Ye[4]=M,Ye[5]=B,Ye[6]=J,Ye[7]=te,Ye[8]=he,Ye[9]=de,Ye[10]=ie,Ye[11]=ve,Ye[12]=be,Ye[13]=Oe,Ye[14]=et,Ye[15]=We,Ye},ge.set=function(C,V,I,z,M,B,J,te,he,de,ie,ve,be,Oe,et,We,Ye){return C[0]=V,C[1]=I,C[2]=z,C[3]=M,C[4]=B,C[5]=J,C[6]=te,C[7]=he,C[8]=de,C[9]=ie,C[10]=ve,C[11]=be,C[12]=Oe,C[13]=et,C[14]=We,C[15]=Ye,C},ge.identity=f,ge.transpose=function(C,V){if(C===V){var I=V[1],z=V[2],M=V[3],B=V[6],J=V[7],te=V[11];C[1]=V[4],C[2]=V[8],C[3]=V[12],C[4]=I,C[6]=V[9],C[7]=V[13],C[8]=z,C[9]=B,C[11]=V[14],C[12]=M,C[13]=J,C[14]=te}else C[0]=V[0],C[1]=V[4],C[2]=V[8],C[3]=V[12],C[4]=V[1],C[5]=V[5],C[6]=V[9],C[7]=V[13],C[8]=V[2],C[9]=V[6],C[10]=V[10],C[11]=V[14],C[12]=V[3],C[13]=V[7],C[14]=V[11],C[15]=V[15];return C},ge.invert=function(C,V){var I=V[0],z=V[1],M=V[2],B=V[3],J=V[4],te=V[5],he=V[6],de=V[7],ie=V[8],ve=V[9],be=V[10],Oe=V[11],et=V[12],We=V[13],Ye=V[14],gt=V[15],tt=I*te-z*J,vt=I*he-M*J,xt=I*de-B*J,Ct=z*he-M*te,Dt=z*de-B*te,Nt=M*de-B*he,jt=ie*We-ve*et,Lt=ie*Ye-be*et,qt=ie*gt-Oe*et,Aa=ve*Ye-be*We,ga=ve*gt-Oe*We,Qa=be*gt-Oe*Ye,Pa=tt*Qa-vt*ga+xt*Aa+Ct*qt-Dt*Lt+Nt*jt;return Pa?(C[0]=(te*Qa-he*ga+de*Aa)*(Pa=1/Pa),C[1]=(M*ga-z*Qa-B*Aa)*Pa,C[2]=(We*Nt-Ye*Dt+gt*Ct)*Pa,C[3]=(be*Dt-ve*Nt-Oe*Ct)*Pa,C[4]=(he*qt-J*Qa-de*Lt)*Pa,C[5]=(I*Qa-M*qt+B*Lt)*Pa,C[6]=(Ye*xt-et*Nt-gt*vt)*Pa,C[7]=(ie*Nt-be*xt+Oe*vt)*Pa,C[8]=(J*ga-te*qt+de*jt)*Pa,C[9]=(z*qt-I*ga-B*jt)*Pa,C[10]=(et*Dt-We*xt+gt*tt)*Pa,C[11]=(ve*xt-ie*Dt-Oe*tt)*Pa,C[12]=(te*Lt-J*Aa-he*jt)*Pa,C[13]=(I*Aa-z*Lt+M*jt)*Pa,C[14]=(We*vt-et*Ct-Ye*tt)*Pa,C[15]=(ie*Ct-ve*vt+be*tt)*Pa,C):null},ge.adjoint=function(C,V){var I=V[0],z=V[1],M=V[2],B=V[3],J=V[4],te=V[5],he=V[6],de=V[7],ie=V[8],ve=V[9],be=V[10],Oe=V[11],et=V[12],We=V[13],Ye=V[14],gt=V[15];return C[0]=te*(be*gt-Oe*Ye)-ve*(he*gt-de*Ye)+We*(he*Oe-de*be),C[1]=-(z*(be*gt-Oe*Ye)-ve*(M*gt-B*Ye)+We*(M*Oe-B*be)),C[2]=z*(he*gt-de*Ye)-te*(M*gt-B*Ye)+We*(M*de-B*he),C[3]=-(z*(he*Oe-de*be)-te*(M*Oe-B*be)+ve*(M*de-B*he)),C[4]=-(J*(be*gt-Oe*Ye)-ie*(he*gt-de*Ye)+et*(he*Oe-de*be)),C[5]=I*(be*gt-Oe*Ye)-ie*(M*gt-B*Ye)+et*(M*Oe-B*be),C[6]=-(I*(he*gt-de*Ye)-J*(M*gt-B*Ye)+et*(M*de-B*he)),C[7]=I*(he*Oe-de*be)-J*(M*Oe-B*be)+ie*(M*de-B*he),C[8]=J*(ve*gt-Oe*We)-ie*(te*gt-de*We)+et*(te*Oe-de*ve),C[9]=-(I*(ve*gt-Oe*We)-ie*(z*gt-B*We)+et*(z*Oe-B*ve)),C[10]=I*(te*gt-de*We)-J*(z*gt-B*We)+et*(z*de-B*te),C[11]=-(I*(te*Oe-de*ve)-J*(z*Oe-B*ve)+ie*(z*de-B*te)),C[12]=-(J*(ve*Ye-be*We)-ie*(te*Ye-he*We)+et*(te*be-he*ve)),C[13]=I*(ve*Ye-be*We)-ie*(z*Ye-M*We)+et*(z*be-M*ve),C[14]=-(I*(te*Ye-he*We)-J*(z*Ye-M*We)+et*(z*he-M*te)),C[15]=I*(te*be-he*ve)-J*(z*be-M*ve)+ie*(z*he-M*te),C},ge.determinant=function(C){var V=C[0],I=C[1],z=C[2],M=C[3],B=C[4],J=C[5],te=C[6],he=C[7],de=C[8],ie=C[9],ve=C[10],be=C[11],Oe=C[12],et=C[13],We=C[14],Ye=C[15];return(V*J-I*B)*(ve*Ye-be*We)-(V*te-z*B)*(ie*Ye-be*et)+(V*he-M*B)*(ie*We-ve*et)+(I*te-z*J)*(de*Ye-be*Oe)-(I*he-M*J)*(de*We-ve*Oe)+(z*he-M*te)*(de*et-ie*Oe)},ge.multiply=g,ge.translate=function(C,V,I){var z,M,B,J,te,he,de,ie,ve,be,Oe,et,We=I[0],Ye=I[1],gt=I[2];return V===C?(C[12]=V[0]*We+V[4]*Ye+V[8]*gt+V[12],C[13]=V[1]*We+V[5]*Ye+V[9]*gt+V[13],C[14]=V[2]*We+V[6]*Ye+V[10]*gt+V[14],C[15]=V[3]*We+V[7]*Ye+V[11]*gt+V[15]):(M=V[1],B=V[2],J=V[3],te=V[4],he=V[5],de=V[6],ie=V[7],ve=V[8],be=V[9],Oe=V[10],et=V[11],C[0]=z=V[0],C[1]=M,C[2]=B,C[3]=J,C[4]=te,C[5]=he,C[6]=de,C[7]=ie,C[8]=ve,C[9]=be,C[10]=Oe,C[11]=et,C[12]=z*We+te*Ye+ve*gt+V[12],C[13]=M*We+he*Ye+be*gt+V[13],C[14]=B*We+de*Ye+Oe*gt+V[14],C[15]=J*We+ie*Ye+et*gt+V[15]),C},ge.scale=function(C,V,I){var z=I[0],M=I[1],B=I[2];return C[0]=V[0]*z,C[1]=V[1]*z,C[2]=V[2]*z,C[3]=V[3]*z,C[4]=V[4]*M,C[5]=V[5]*M,C[6]=V[6]*M,C[7]=V[7]*M,C[8]=V[8]*B,C[9]=V[9]*B,C[10]=V[10]*B,C[11]=V[11]*B,C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15],C},ge.rotate=function(C,V,I,z){var M,B,J,te,he,de,ie,ve,be,Oe,et,We,Ye,gt,tt,vt,xt,Ct,Dt,Nt,jt,Lt,qt,Aa,ga=z[0],Qa=z[1],Pa=z[2],za=Math.hypot(ga,Qa,Pa);return za<s.EPSILON?null:(ga*=za=1/za,Qa*=za,Pa*=za,M=Math.sin(I),B=Math.cos(I),he=V[1],de=V[2],ie=V[3],be=V[5],Oe=V[6],et=V[7],Ye=V[9],gt=V[10],tt=V[11],vt=ga*ga*(J=1-B)+B,Dt=ga*Qa*J-Pa*M,Nt=Qa*Qa*J+B,jt=Pa*Qa*J+ga*M,Lt=ga*Pa*J+Qa*M,qt=Qa*Pa*J-ga*M,Aa=Pa*Pa*J+B,C[0]=(te=V[0])*vt+(ve=V[4])*(xt=Qa*ga*J+Pa*M)+(We=V[8])*(Ct=Pa*ga*J-Qa*M),C[1]=he*vt+be*xt+Ye*Ct,C[2]=de*vt+Oe*xt+gt*Ct,C[3]=ie*vt+et*xt+tt*Ct,C[4]=te*Dt+ve*Nt+We*jt,C[5]=he*Dt+be*Nt+Ye*jt,C[6]=de*Dt+Oe*Nt+gt*jt,C[7]=ie*Dt+et*Nt+tt*jt,C[8]=te*Lt+ve*qt+We*Aa,C[9]=he*Lt+be*qt+Ye*Aa,C[10]=de*Lt+Oe*qt+gt*Aa,C[11]=ie*Lt+et*qt+tt*Aa,V!==C&&(C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C)},ge.rotateX=function(C,V,I){var z=Math.sin(I),M=Math.cos(I),B=V[4],J=V[5],te=V[6],he=V[7],de=V[8],ie=V[9],ve=V[10],be=V[11];return V!==C&&(C[0]=V[0],C[1]=V[1],C[2]=V[2],C[3]=V[3],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[4]=B*M+de*z,C[5]=J*M+ie*z,C[6]=te*M+ve*z,C[7]=he*M+be*z,C[8]=de*M-B*z,C[9]=ie*M-J*z,C[10]=ve*M-te*z,C[11]=be*M-he*z,C},ge.rotateY=function(C,V,I){var z=Math.sin(I),M=Math.cos(I),B=V[0],J=V[1],te=V[2],he=V[3],de=V[8],ie=V[9],ve=V[10],be=V[11];return V!==C&&(C[4]=V[4],C[5]=V[5],C[6]=V[6],C[7]=V[7],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[0]=B*M-de*z,C[1]=J*M-ie*z,C[2]=te*M-ve*z,C[3]=he*M-be*z,C[8]=B*z+de*M,C[9]=J*z+ie*M,C[10]=te*z+ve*M,C[11]=he*z+be*M,C},ge.rotateZ=function(C,V,I){var z=Math.sin(I),M=Math.cos(I),B=V[0],J=V[1],te=V[2],he=V[3],de=V[4],ie=V[5],ve=V[6],be=V[7];return V!==C&&(C[8]=V[8],C[9]=V[9],C[10]=V[10],C[11]=V[11],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[0]=B*M+de*z,C[1]=J*M+ie*z,C[2]=te*M+ve*z,C[3]=he*M+be*z,C[4]=de*M-B*z,C[5]=ie*M-J*z,C[6]=ve*M-te*z,C[7]=be*M-he*z,C},ge.fromTranslation=function(C,V){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=V[0],C[13]=V[1],C[14]=V[2],C[15]=1,C},ge.fromScaling=function(C,V){return C[0]=V[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=V[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=V[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromRotation=function(C,V,I){var z,M,B,J=I[0],te=I[1],he=I[2],de=Math.hypot(J,te,he);return de<s.EPSILON?null:(J*=de=1/de,te*=de,he*=de,z=Math.sin(V),M=Math.cos(V),C[0]=J*J*(B=1-M)+M,C[1]=te*J*B+he*z,C[2]=he*J*B-te*z,C[3]=0,C[4]=J*te*B-he*z,C[5]=te*te*B+M,C[6]=he*te*B+J*z,C[7]=0,C[8]=J*he*B+te*z,C[9]=te*he*B-J*z,C[10]=he*he*B+M,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C)},ge.fromXRotation=function(C,V){var I=Math.sin(V),z=Math.cos(V);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=z,C[6]=I,C[7]=0,C[8]=0,C[9]=-I,C[10]=z,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromYRotation=function(C,V){var I=Math.sin(V),z=Math.cos(V);return C[0]=z,C[1]=0,C[2]=-I,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=I,C[9]=0,C[10]=z,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromZRotation=function(C,V){var I=Math.sin(V),z=Math.cos(V);return C[0]=z,C[1]=I,C[2]=0,C[3]=0,C[4]=-I,C[5]=z,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromRotationTranslation=m,ge.fromQuat2=function(C,V){var I=new s.ARRAY_TYPE(3),z=-V[0],M=-V[1],B=-V[2],J=V[3],te=V[4],he=V[5],de=V[6],ie=V[7],ve=z*z+M*M+B*B+J*J;return ve>0?(I[0]=2*(te*J+ie*z+he*B-de*M)/ve,I[1]=2*(he*J+ie*M+de*z-te*B)/ve,I[2]=2*(de*J+ie*B+te*M-he*z)/ve):(I[0]=2*(te*J+ie*z+he*B-de*M),I[1]=2*(he*J+ie*M+de*z-te*B),I[2]=2*(de*J+ie*B+te*M-he*z)),m(C,V,I),C},ge.getTranslation=function(C,V){return C[0]=V[12],C[1]=V[13],C[2]=V[14],C},ge.getScaling=_,ge.getRotation=function(C,V){var I=new s.ARRAY_TYPE(3);_(I,V);var z=1/I[0],M=1/I[1],B=1/I[2],J=V[0]*z,te=V[1]*M,he=V[2]*B,de=V[4]*z,ie=V[5]*M,ve=V[6]*B,be=V[8]*z,Oe=V[9]*M,et=V[10]*B,We=J+ie+et,Ye=0;return We>0?(Ye=2*Math.sqrt(We+1),C[3]=.25*Ye,C[0]=(ve-Oe)/Ye,C[1]=(be-he)/Ye,C[2]=(te-de)/Ye):J>ie&&J>et?(Ye=2*Math.sqrt(1+J-ie-et),C[3]=(ve-Oe)/Ye,C[0]=.25*Ye,C[1]=(te+de)/Ye,C[2]=(be+he)/Ye):ie>et?(Ye=2*Math.sqrt(1+ie-J-et),C[3]=(be-he)/Ye,C[0]=(te+de)/Ye,C[1]=.25*Ye,C[2]=(ve+Oe)/Ye):(Ye=2*Math.sqrt(1+et-J-ie),C[3]=(te-de)/Ye,C[0]=(be+he)/Ye,C[1]=(ve+Oe)/Ye,C[2]=.25*Ye),C},ge.fromRotationTranslationScale=function(C,V,I,z){var M=V[0],B=V[1],J=V[2],te=V[3],he=M+M,de=B+B,ie=J+J,ve=M*he,be=M*de,Oe=M*ie,et=B*de,We=B*ie,Ye=J*ie,gt=te*he,tt=te*de,vt=te*ie,xt=z[0],Ct=z[1],Dt=z[2];return C[0]=(1-(et+Ye))*xt,C[1]=(be+vt)*xt,C[2]=(Oe-tt)*xt,C[3]=0,C[4]=(be-vt)*Ct,C[5]=(1-(ve+Ye))*Ct,C[6]=(We+gt)*Ct,C[7]=0,C[8]=(Oe+tt)*Dt,C[9]=(We-gt)*Dt,C[10]=(1-(ve+et))*Dt,C[11]=0,C[12]=I[0],C[13]=I[1],C[14]=I[2],C[15]=1,C},ge.fromRotationTranslationScaleOrigin=function(C,V,I,z,M){var B=V[0],J=V[1],te=V[2],he=V[3],de=B+B,ie=J+J,ve=te+te,be=B*de,Oe=B*ie,et=B*ve,We=J*ie,Ye=J*ve,gt=te*ve,tt=he*de,vt=he*ie,xt=he*ve,Ct=z[0],Dt=z[1],Nt=z[2],jt=M[0],Lt=M[1],qt=M[2],Aa=(1-(We+gt))*Ct,ga=(Oe+xt)*Ct,Qa=(et-vt)*Ct,Pa=(Oe-xt)*Dt,za=(1-(be+gt))*Dt,wa=(Ye+tt)*Dt,vr=(et+vt)*Nt,Ka=(Ye-tt)*Nt,ur=(1-(be+We))*Nt;return C[0]=Aa,C[1]=ga,C[2]=Qa,C[3]=0,C[4]=Pa,C[5]=za,C[6]=wa,C[7]=0,C[8]=vr,C[9]=Ka,C[10]=ur,C[11]=0,C[12]=I[0]+jt-(Aa*jt+Pa*Lt+vr*qt),C[13]=I[1]+Lt-(ga*jt+za*Lt+Ka*qt),C[14]=I[2]+qt-(Qa*jt+wa*Lt+ur*qt),C[15]=1,C},ge.fromQuat=function(C,V){var I=V[0],z=V[1],M=V[2],B=V[3],J=I+I,te=z+z,he=M+M,de=I*J,ie=z*J,ve=z*te,be=M*J,Oe=M*te,et=M*he,We=B*J,Ye=B*te,gt=B*he;return C[0]=1-ve-et,C[1]=ie+gt,C[2]=be-Ye,C[3]=0,C[4]=ie-gt,C[5]=1-de-et,C[6]=Oe+We,C[7]=0,C[8]=be+Ye,C[9]=Oe-We,C[10]=1-de-ve,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.frustum=function(C,V,I,z,M,B,J){var te=1/(I-V),he=1/(M-z),de=1/(B-J);return C[0]=2*B*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=2*B*he,C[6]=0,C[7]=0,C[8]=(I+V)*te,C[9]=(M+z)*he,C[10]=(J+B)*de,C[11]=-1,C[12]=0,C[13]=0,C[14]=J*B*2*de,C[15]=0,C},ge.perspectiveNO=b,ge.perspectiveZO=function(C,V,I,z,M){var B,J=1/Math.tan(V/2);return C[0]=J/I,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=J,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,M!=null&&M!==1/0?(C[10]=M*(B=1/(z-M)),C[14]=M*z*B):(C[10]=-1,C[14]=-z),C},ge.perspectiveFromFieldOfView=function(C,V,I,z){var M=Math.tan(V.upDegrees*Math.PI/180),B=Math.tan(V.downDegrees*Math.PI/180),J=Math.tan(V.leftDegrees*Math.PI/180),te=Math.tan(V.rightDegrees*Math.PI/180),he=2/(J+te),de=2/(M+B);return C[0]=he,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=de,C[6]=0,C[7]=0,C[8]=-(J-te)*he*.5,C[9]=(M-B)*de*.5,C[10]=z/(I-z),C[11]=-1,C[12]=0,C[13]=0,C[14]=z*I/(I-z),C[15]=0,C},ge.orthoNO=O,ge.orthoZO=function(C,V,I,z,M,B,J){var te=1/(V-I),he=1/(z-M),de=1/(B-J);return C[0]=-2*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*he,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=de,C[11]=0,C[12]=(V+I)*te,C[13]=(M+z)*he,C[14]=B*de,C[15]=1,C},ge.lookAt=function(C,V,I,z){var M,B,J,te,he,de,ie,ve,be,Oe,et=V[0],We=V[1],Ye=V[2],gt=z[0],tt=z[1],vt=z[2],xt=I[0],Ct=I[1],Dt=I[2];return Math.abs(et-xt)<s.EPSILON&&Math.abs(We-Ct)<s.EPSILON&&Math.abs(Ye-Dt)<s.EPSILON?f(C):(ie=et-xt,ve=We-Ct,be=Ye-Dt,M=tt*(be*=Oe=1/Math.hypot(ie,ve,be))-vt*(ve*=Oe),B=vt*(ie*=Oe)-gt*be,J=gt*ve-tt*ie,(Oe=Math.hypot(M,B,J))?(M*=Oe=1/Oe,B*=Oe,J*=Oe):(M=0,B=0,J=0),te=ve*J-be*B,he=be*M-ie*J,de=ie*B-ve*M,(Oe=Math.hypot(te,he,de))?(te*=Oe=1/Oe,he*=Oe,de*=Oe):(te=0,he=0,de=0),C[0]=M,C[1]=te,C[2]=ie,C[3]=0,C[4]=B,C[5]=he,C[6]=ve,C[7]=0,C[8]=J,C[9]=de,C[10]=be,C[11]=0,C[12]=-(M*et+B*We+J*Ye),C[13]=-(te*et+he*We+de*Ye),C[14]=-(ie*et+ve*We+be*Ye),C[15]=1,C)},ge.targetTo=function(C,V,I,z){var M=V[0],B=V[1],J=V[2],te=z[0],he=z[1],de=z[2],ie=M-I[0],ve=B-I[1],be=J-I[2],Oe=ie*ie+ve*ve+be*be;Oe>0&&(ie*=Oe=1/Math.sqrt(Oe),ve*=Oe,be*=Oe);var et=he*be-de*ve,We=de*ie-te*be,Ye=te*ve-he*ie;return(Oe=et*et+We*We+Ye*Ye)>0&&(et*=Oe=1/Math.sqrt(Oe),We*=Oe,Ye*=Oe),C[0]=et,C[1]=We,C[2]=Ye,C[3]=0,C[4]=ve*Ye-be*We,C[5]=be*et-ie*Ye,C[6]=ie*We-ve*et,C[7]=0,C[8]=ie,C[9]=ve,C[10]=be,C[11]=0,C[12]=M,C[13]=B,C[14]=J,C[15]=1,C},ge.str=function(C){return"mat4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+", "+C[9]+", "+C[10]+", "+C[11]+", "+C[12]+", "+C[13]+", "+C[14]+", "+C[15]+")"},ge.frob=function(C){return Math.hypot(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],C[8],C[9],C[10],C[11],C[12],C[13],C[14],C[15])},ge.add=function(C,V,I){return C[0]=V[0]+I[0],C[1]=V[1]+I[1],C[2]=V[2]+I[2],C[3]=V[3]+I[3],C[4]=V[4]+I[4],C[5]=V[5]+I[5],C[6]=V[6]+I[6],C[7]=V[7]+I[7],C[8]=V[8]+I[8],C[9]=V[9]+I[9],C[10]=V[10]+I[10],C[11]=V[11]+I[11],C[12]=V[12]+I[12],C[13]=V[13]+I[13],C[14]=V[14]+I[14],C[15]=V[15]+I[15],C},ge.subtract=D,ge.multiplyScalar=function(C,V,I){return C[0]=V[0]*I,C[1]=V[1]*I,C[2]=V[2]*I,C[3]=V[3]*I,C[4]=V[4]*I,C[5]=V[5]*I,C[6]=V[6]*I,C[7]=V[7]*I,C[8]=V[8]*I,C[9]=V[9]*I,C[10]=V[10]*I,C[11]=V[11]*I,C[12]=V[12]*I,C[13]=V[13]*I,C[14]=V[14]*I,C[15]=V[15]*I,C},ge.multiplyScalarAndAdd=function(C,V,I,z){return C[0]=V[0]+I[0]*z,C[1]=V[1]+I[1]*z,C[2]=V[2]+I[2]*z,C[3]=V[3]+I[3]*z,C[4]=V[4]+I[4]*z,C[5]=V[5]+I[5]*z,C[6]=V[6]+I[6]*z,C[7]=V[7]+I[7]*z,C[8]=V[8]+I[8]*z,C[9]=V[9]+I[9]*z,C[10]=V[10]+I[10]*z,C[11]=V[11]+I[11]*z,C[12]=V[12]+I[12]*z,C[13]=V[13]+I[13]*z,C[14]=V[14]+I[14]*z,C[15]=V[15]+I[15]*z,C},ge.exactEquals=function(C,V){return C[0]===V[0]&&C[1]===V[1]&&C[2]===V[2]&&C[3]===V[3]&&C[4]===V[4]&&C[5]===V[5]&&C[6]===V[6]&&C[7]===V[7]&&C[8]===V[8]&&C[9]===V[9]&&C[10]===V[10]&&C[11]===V[11]&&C[12]===V[12]&&C[13]===V[13]&&C[14]===V[14]&&C[15]===V[15]},ge.equals=function(C,V){var I=C[0],z=C[1],M=C[2],B=C[3],J=C[4],te=C[5],he=C[6],de=C[7],ie=C[8],ve=C[9],be=C[10],Oe=C[11],et=C[12],We=C[13],Ye=C[14],gt=C[15],tt=V[0],vt=V[1],xt=V[2],Ct=V[3],Dt=V[4],Nt=V[5],jt=V[6],Lt=V[7],qt=V[8],Aa=V[9],ga=V[10],Qa=V[11],Pa=V[12],za=V[13],wa=V[14],vr=V[15];return Math.abs(I-tt)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(tt))&&Math.abs(z-vt)<=s.EPSILON*Math.max(1,Math.abs(z),Math.abs(vt))&&Math.abs(M-xt)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(xt))&&Math.abs(B-Ct)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(Ct))&&Math.abs(J-Dt)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(Dt))&&Math.abs(te-Nt)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Nt))&&Math.abs(he-jt)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(jt))&&Math.abs(de-Lt)<=s.EPSILON*Math.max(1,Math.abs(de),Math.abs(Lt))&&Math.abs(ie-qt)<=s.EPSILON*Math.max(1,Math.abs(ie),Math.abs(qt))&&Math.abs(ve-Aa)<=s.EPSILON*Math.max(1,Math.abs(ve),Math.abs(Aa))&&Math.abs(be-ga)<=s.EPSILON*Math.max(1,Math.abs(be),Math.abs(ga))&&Math.abs(Oe-Qa)<=s.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Qa))&&Math.abs(et-Pa)<=s.EPSILON*Math.max(1,Math.abs(et),Math.abs(Pa))&&Math.abs(We-za)<=s.EPSILON*Math.max(1,Math.abs(We),Math.abs(za))&&Math.abs(Ye-wa)<=s.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(wa))&&Math.abs(gt-vr)<=s.EPSILON*Math.max(1,Math.abs(gt),Math.abs(vr))},ge.sub=ge.mul=ge.ortho=ge.perspective=void 0;var s=function(C,V){if(C&&C.__esModule)return C;if(C===null||h(C)!=="object"&&typeof C!="function")return{default:C};var I=u(void 0);if(I&&I.has(C))return I.get(C);var z={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in C)if(B!=="default"&&Object.prototype.hasOwnProperty.call(C,B)){var J=M?Object.getOwnPropertyDescriptor(C,B):null;J&&(J.get||J.set)?Object.defineProperty(z,B,J):z[B]=C[B]}return z.default=C,I&&I.set(C,z),z}(L());function u(C){if(typeof WeakMap!="function")return null;var V=new WeakMap,I=new WeakMap;return(u=function(z){return z?I:V})(C)}function f(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function g(C,V,I){var z=V[0],M=V[1],B=V[2],J=V[3],te=V[4],he=V[5],de=V[6],ie=V[7],ve=V[8],be=V[9],Oe=V[10],et=V[11],We=V[12],Ye=V[13],gt=V[14],tt=V[15],vt=I[0],xt=I[1],Ct=I[2],Dt=I[3];return C[0]=vt*z+xt*te+Ct*ve+Dt*We,C[1]=vt*M+xt*he+Ct*be+Dt*Ye,C[2]=vt*B+xt*de+Ct*Oe+Dt*gt,C[3]=vt*J+xt*ie+Ct*et+Dt*tt,C[4]=(vt=I[4])*z+(xt=I[5])*te+(Ct=I[6])*ve+(Dt=I[7])*We,C[5]=vt*M+xt*he+Ct*be+Dt*Ye,C[6]=vt*B+xt*de+Ct*Oe+Dt*gt,C[7]=vt*J+xt*ie+Ct*et+Dt*tt,C[8]=(vt=I[8])*z+(xt=I[9])*te+(Ct=I[10])*ve+(Dt=I[11])*We,C[9]=vt*M+xt*he+Ct*be+Dt*Ye,C[10]=vt*B+xt*de+Ct*Oe+Dt*gt,C[11]=vt*J+xt*ie+Ct*et+Dt*tt,C[12]=(vt=I[12])*z+(xt=I[13])*te+(Ct=I[14])*ve+(Dt=I[15])*We,C[13]=vt*M+xt*he+Ct*be+Dt*Ye,C[14]=vt*B+xt*de+Ct*Oe+Dt*gt,C[15]=vt*J+xt*ie+Ct*et+Dt*tt,C}function m(C,V,I){var z=V[0],M=V[1],B=V[2],J=V[3],te=z+z,he=M+M,de=B+B,ie=z*te,ve=z*he,be=z*de,Oe=M*he,et=M*de,We=B*de,Ye=J*te,gt=J*he,tt=J*de;return C[0]=1-(Oe+We),C[1]=ve+tt,C[2]=be-gt,C[3]=0,C[4]=ve-tt,C[5]=1-(ie+We),C[6]=et+Ye,C[7]=0,C[8]=be+gt,C[9]=et-Ye,C[10]=1-(ie+Oe),C[11]=0,C[12]=I[0],C[13]=I[1],C[14]=I[2],C[15]=1,C}function _(C,V){var I=V[4],z=V[5],M=V[6],B=V[8],J=V[9],te=V[10];return C[0]=Math.hypot(V[0],V[1],V[2]),C[1]=Math.hypot(I,z,M),C[2]=Math.hypot(B,J,te),C}function b(C,V,I,z,M){var B,J=1/Math.tan(V/2);return C[0]=J/I,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=J,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,M!=null&&M!==1/0?(C[10]=(M+z)*(B=1/(z-M)),C[14]=2*M*z*B):(C[10]=-1,C[14]=-2*z),C}function O(C,V,I,z,M,B,J){var te=1/(V-I),he=1/(z-M),de=1/(B-J);return C[0]=-2*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*he,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*de,C[11]=0,C[12]=(V+I)*te,C[13]=(M+z)*he,C[14]=(J+B)*de,C[15]=1,C}function D(C,V,I){return C[0]=V[0]-I[0],C[1]=V[1]-I[1],C[2]=V[2]-I[2],C[3]=V[3]-I[3],C[4]=V[4]-I[4],C[5]=V[5]-I[5],C[6]=V[6]-I[6],C[7]=V[7]-I[7],C[8]=V[8]-I[8],C[9]=V[9]-I[9],C[10]=V[10]-I[10],C[11]=V[11]-I[11],C[12]=V[12]-I[12],C[13]=V[13]-I[13],C[14]=V[14]-I[14],C[15]=V[15]-I[15],C}return ge.perspective=b,ge.ortho=O,ge.mul=g,ge.sub=D,ge}var we,Ee={},ae={};function _e(){if(we)return ae;function h(M){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},h(M)}we=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.create=f,ae.clone=function(M){var B=new s.ARRAY_TYPE(3);return B[0]=M[0],B[1]=M[1],B[2]=M[2],B},ae.length=g,ae.fromValues=function(M,B,J){var te=new s.ARRAY_TYPE(3);return te[0]=M,te[1]=B,te[2]=J,te},ae.copy=function(M,B){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M},ae.set=function(M,B,J,te){return M[0]=B,M[1]=J,M[2]=te,M},ae.add=function(M,B,J){return M[0]=B[0]+J[0],M[1]=B[1]+J[1],M[2]=B[2]+J[2],M},ae.subtract=m,ae.multiply=_,ae.divide=b,ae.ceil=function(M,B){return M[0]=Math.ceil(B[0]),M[1]=Math.ceil(B[1]),M[2]=Math.ceil(B[2]),M},ae.floor=function(M,B){return M[0]=Math.floor(B[0]),M[1]=Math.floor(B[1]),M[2]=Math.floor(B[2]),M},ae.min=function(M,B,J){return M[0]=Math.min(B[0],J[0]),M[1]=Math.min(B[1],J[1]),M[2]=Math.min(B[2],J[2]),M},ae.max=function(M,B,J){return M[0]=Math.max(B[0],J[0]),M[1]=Math.max(B[1],J[1]),M[2]=Math.max(B[2],J[2]),M},ae.round=function(M,B){return M[0]=Math.round(B[0]),M[1]=Math.round(B[1]),M[2]=Math.round(B[2]),M},ae.scale=function(M,B,J){return M[0]=B[0]*J,M[1]=B[1]*J,M[2]=B[2]*J,M},ae.scaleAndAdd=function(M,B,J,te){return M[0]=B[0]+J[0]*te,M[1]=B[1]+J[1]*te,M[2]=B[2]+J[2]*te,M},ae.distance=O,ae.squaredDistance=D,ae.squaredLength=C,ae.negate=function(M,B){return M[0]=-B[0],M[1]=-B[1],M[2]=-B[2],M},ae.inverse=function(M,B){return M[0]=1/B[0],M[1]=1/B[1],M[2]=1/B[2],M},ae.normalize=function(M,B){var J=B[0],te=B[1],he=B[2],de=J*J+te*te+he*he;return de>0&&(de=1/Math.sqrt(de)),M[0]=B[0]*de,M[1]=B[1]*de,M[2]=B[2]*de,M},ae.dot=V,ae.cross=function(M,B,J){var te=B[0],he=B[1],de=B[2],ie=J[0],ve=J[1],be=J[2];return M[0]=he*be-de*ve,M[1]=de*ie-te*be,M[2]=te*ve-he*ie,M},ae.lerp=function(M,B,J,te){var he=B[0],de=B[1],ie=B[2];return M[0]=he+te*(J[0]-he),M[1]=de+te*(J[1]-de),M[2]=ie+te*(J[2]-ie),M},ae.hermite=function(M,B,J,te,he,de){var ie=de*de,ve=ie*(2*de-3)+1,be=ie*(de-2)+de,Oe=ie*(de-1),et=ie*(3-2*de);return M[0]=B[0]*ve+J[0]*be+te[0]*Oe+he[0]*et,M[1]=B[1]*ve+J[1]*be+te[1]*Oe+he[1]*et,M[2]=B[2]*ve+J[2]*be+te[2]*Oe+he[2]*et,M},ae.bezier=function(M,B,J,te,he,de){var ie=1-de,ve=ie*ie,be=de*de,Oe=ve*ie,et=3*de*ve,We=3*be*ie,Ye=be*de;return M[0]=B[0]*Oe+J[0]*et+te[0]*We+he[0]*Ye,M[1]=B[1]*Oe+J[1]*et+te[1]*We+he[1]*Ye,M[2]=B[2]*Oe+J[2]*et+te[2]*We+he[2]*Ye,M},ae.random=function(M,B){B=B||1;var J=2*s.RANDOM()*Math.PI,te=2*s.RANDOM()-1,he=Math.sqrt(1-te*te)*B;return M[0]=Math.cos(J)*he,M[1]=Math.sin(J)*he,M[2]=te*B,M},ae.transformMat4=function(M,B,J){var te=B[0],he=B[1],de=B[2],ie=J[3]*te+J[7]*he+J[11]*de+J[15];return M[0]=(J[0]*te+J[4]*he+J[8]*de+J[12])/(ie=ie||1),M[1]=(J[1]*te+J[5]*he+J[9]*de+J[13])/ie,M[2]=(J[2]*te+J[6]*he+J[10]*de+J[14])/ie,M},ae.transformMat3=function(M,B,J){var te=B[0],he=B[1],de=B[2];return M[0]=te*J[0]+he*J[3]+de*J[6],M[1]=te*J[1]+he*J[4]+de*J[7],M[2]=te*J[2]+he*J[5]+de*J[8],M},ae.transformQuat=function(M,B,J){var te=J[0],he=J[1],de=J[2],ie=B[0],ve=B[1],be=B[2],Oe=he*be-de*ve,et=de*ie-te*be,We=te*ve-he*ie,Ye=he*We-de*et,gt=de*Oe-te*We,tt=te*et-he*Oe,vt=2*J[3];return et*=vt,We*=vt,gt*=2,tt*=2,M[0]=ie+(Oe*=vt)+(Ye*=2),M[1]=ve+et+gt,M[2]=be+We+tt,M},ae.rotateX=function(M,B,J,te){var he=[],de=[];return he[0]=B[0]-J[0],he[1]=B[1]-J[1],he[2]=B[2]-J[2],de[0]=he[0],de[1]=he[1]*Math.cos(te)-he[2]*Math.sin(te),de[2]=he[1]*Math.sin(te)+he[2]*Math.cos(te),M[0]=de[0]+J[0],M[1]=de[1]+J[1],M[2]=de[2]+J[2],M},ae.rotateY=function(M,B,J,te){var he=[],de=[];return he[0]=B[0]-J[0],he[1]=B[1]-J[1],he[2]=B[2]-J[2],de[0]=he[2]*Math.sin(te)+he[0]*Math.cos(te),de[1]=he[1],de[2]=he[2]*Math.cos(te)-he[0]*Math.sin(te),M[0]=de[0]+J[0],M[1]=de[1]+J[1],M[2]=de[2]+J[2],M},ae.rotateZ=function(M,B,J,te){var he=[],de=[];return he[0]=B[0]-J[0],he[1]=B[1]-J[1],he[2]=B[2]-J[2],de[0]=he[0]*Math.cos(te)-he[1]*Math.sin(te),de[1]=he[0]*Math.sin(te)+he[1]*Math.cos(te),de[2]=he[2],M[0]=de[0]+J[0],M[1]=de[1]+J[1],M[2]=de[2]+J[2],M},ae.angle=function(M,B){var J=M[0],te=M[1],he=M[2],de=B[0],ie=B[1],ve=B[2],be=Math.sqrt(J*J+te*te+he*he)*Math.sqrt(de*de+ie*ie+ve*ve),Oe=be&&V(M,B)/be;return Math.acos(Math.min(Math.max(Oe,-1),1))},ae.zero=function(M){return M[0]=0,M[1]=0,M[2]=0,M},ae.str=function(M){return"vec3("+M[0]+", "+M[1]+", "+M[2]+")"},ae.exactEquals=function(M,B){return M[0]===B[0]&&M[1]===B[1]&&M[2]===B[2]},ae.equals=function(M,B){var J=M[0],te=M[1],he=M[2],de=B[0],ie=B[1],ve=B[2];return Math.abs(J-de)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(de))&&Math.abs(te-ie)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(ie))&&Math.abs(he-ve)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(ve))},ae.forEach=ae.sqrLen=ae.len=ae.sqrDist=ae.dist=ae.div=ae.mul=ae.sub=void 0;var s=function(M,B){if(M&&M.__esModule)return M;if(M===null||h(M)!=="object"&&typeof M!="function")return{default:M};var J=u(void 0);if(J&&J.has(M))return J.get(M);var te={},he=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var de in M)if(de!=="default"&&Object.prototype.hasOwnProperty.call(M,de)){var ie=he?Object.getOwnPropertyDescriptor(M,de):null;ie&&(ie.get||ie.set)?Object.defineProperty(te,de,ie):te[de]=M[de]}return te.default=M,J&&J.set(M,te),te}(L());function u(M){if(typeof WeakMap!="function")return null;var B=new WeakMap,J=new WeakMap;return(u=function(te){return te?J:B})(M)}function f(){var M=new s.ARRAY_TYPE(3);return s.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0),M}function g(M){return Math.hypot(M[0],M[1],M[2])}function m(M,B,J){return M[0]=B[0]-J[0],M[1]=B[1]-J[1],M[2]=B[2]-J[2],M}function _(M,B,J){return M[0]=B[0]*J[0],M[1]=B[1]*J[1],M[2]=B[2]*J[2],M}function b(M,B,J){return M[0]=B[0]/J[0],M[1]=B[1]/J[1],M[2]=B[2]/J[2],M}function O(M,B){return Math.hypot(B[0]-M[0],B[1]-M[1],B[2]-M[2])}function D(M,B){var J=B[0]-M[0],te=B[1]-M[1],he=B[2]-M[2];return J*J+te*te+he*he}function C(M){var B=M[0],J=M[1],te=M[2];return B*B+J*J+te*te}function V(M,B){return M[0]*B[0]+M[1]*B[1]+M[2]*B[2]}ae.sub=m,ae.mul=_,ae.div=b,ae.dist=O,ae.sqrDist=D,ae.len=g,ae.sqrLen=C;var I,z=(I=f(),function(M,B,J,te,he,de){var ie,ve;for(B||(B=3),J||(J=0),ve=te?Math.min(te*B+J,M.length):M.length,ie=J;ie<ve;ie+=B)I[0]=M[ie],I[1]=M[ie+1],I[2]=M[ie+2],he(I,I,de),M[ie]=I[0],M[ie+1]=I[1],M[ie+2]=I[2];return M});return ae.forEach=z,ae}var Ie,xe,ze={};function Me(){if(Ie)return ze;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}Ie=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.create=f,ze.clone=function(z){var M=new s.ARRAY_TYPE(4);return M[0]=z[0],M[1]=z[1],M[2]=z[2],M[3]=z[3],M},ze.fromValues=function(z,M,B,J){var te=new s.ARRAY_TYPE(4);return te[0]=z,te[1]=M,te[2]=B,te[3]=J,te},ze.copy=function(z,M){return z[0]=M[0],z[1]=M[1],z[2]=M[2],z[3]=M[3],z},ze.set=function(z,M,B,J,te){return z[0]=M,z[1]=B,z[2]=J,z[3]=te,z},ze.add=function(z,M,B){return z[0]=M[0]+B[0],z[1]=M[1]+B[1],z[2]=M[2]+B[2],z[3]=M[3]+B[3],z},ze.subtract=g,ze.multiply=m,ze.divide=_,ze.ceil=function(z,M){return z[0]=Math.ceil(M[0]),z[1]=Math.ceil(M[1]),z[2]=Math.ceil(M[2]),z[3]=Math.ceil(M[3]),z},ze.floor=function(z,M){return z[0]=Math.floor(M[0]),z[1]=Math.floor(M[1]),z[2]=Math.floor(M[2]),z[3]=Math.floor(M[3]),z},ze.min=function(z,M,B){return z[0]=Math.min(M[0],B[0]),z[1]=Math.min(M[1],B[1]),z[2]=Math.min(M[2],B[2]),z[3]=Math.min(M[3],B[3]),z},ze.max=function(z,M,B){return z[0]=Math.max(M[0],B[0]),z[1]=Math.max(M[1],B[1]),z[2]=Math.max(M[2],B[2]),z[3]=Math.max(M[3],B[3]),z},ze.round=function(z,M){return z[0]=Math.round(M[0]),z[1]=Math.round(M[1]),z[2]=Math.round(M[2]),z[3]=Math.round(M[3]),z},ze.scale=function(z,M,B){return z[0]=M[0]*B,z[1]=M[1]*B,z[2]=M[2]*B,z[3]=M[3]*B,z},ze.scaleAndAdd=function(z,M,B,J){return z[0]=M[0]+B[0]*J,z[1]=M[1]+B[1]*J,z[2]=M[2]+B[2]*J,z[3]=M[3]+B[3]*J,z},ze.distance=b,ze.squaredDistance=O,ze.length=D,ze.squaredLength=C,ze.negate=function(z,M){return z[0]=-M[0],z[1]=-M[1],z[2]=-M[2],z[3]=-M[3],z},ze.inverse=function(z,M){return z[0]=1/M[0],z[1]=1/M[1],z[2]=1/M[2],z[3]=1/M[3],z},ze.normalize=function(z,M){var B=M[0],J=M[1],te=M[2],he=M[3],de=B*B+J*J+te*te+he*he;return de>0&&(de=1/Math.sqrt(de)),z[0]=B*de,z[1]=J*de,z[2]=te*de,z[3]=he*de,z},ze.dot=function(z,M){return z[0]*M[0]+z[1]*M[1]+z[2]*M[2]+z[3]*M[3]},ze.cross=function(z,M,B,J){var te=B[0]*J[1]-B[1]*J[0],he=B[0]*J[2]-B[2]*J[0],de=B[0]*J[3]-B[3]*J[0],ie=B[1]*J[2]-B[2]*J[1],ve=B[1]*J[3]-B[3]*J[1],be=B[2]*J[3]-B[3]*J[2],Oe=M[0],et=M[1],We=M[2],Ye=M[3];return z[0]=et*be-We*ve+Ye*ie,z[1]=-Oe*be+We*de-Ye*he,z[2]=Oe*ve-et*de+Ye*te,z[3]=-Oe*ie+et*he-We*te,z},ze.lerp=function(z,M,B,J){var te=M[0],he=M[1],de=M[2],ie=M[3];return z[0]=te+J*(B[0]-te),z[1]=he+J*(B[1]-he),z[2]=de+J*(B[2]-de),z[3]=ie+J*(B[3]-ie),z},ze.random=function(z,M){var B,J,te,he,de,ie;M=M||1;do de=(B=2*s.RANDOM()-1)*B+(J=2*s.RANDOM()-1)*J;while(de>=1);do ie=(te=2*s.RANDOM()-1)*te+(he=2*s.RANDOM()-1)*he;while(ie>=1);var ve=Math.sqrt((1-de)/ie);return z[0]=M*B,z[1]=M*J,z[2]=M*te*ve,z[3]=M*he*ve,z},ze.transformMat4=function(z,M,B){var J=M[0],te=M[1],he=M[2],de=M[3];return z[0]=B[0]*J+B[4]*te+B[8]*he+B[12]*de,z[1]=B[1]*J+B[5]*te+B[9]*he+B[13]*de,z[2]=B[2]*J+B[6]*te+B[10]*he+B[14]*de,z[3]=B[3]*J+B[7]*te+B[11]*he+B[15]*de,z},ze.transformQuat=function(z,M,B){var J=M[0],te=M[1],he=M[2],de=B[0],ie=B[1],ve=B[2],be=B[3],Oe=be*J+ie*he-ve*te,et=be*te+ve*J-de*he,We=be*he+de*te-ie*J,Ye=-de*J-ie*te-ve*he;return z[0]=Oe*be+Ye*-de+et*-ve-We*-ie,z[1]=et*be+Ye*-ie+We*-de-Oe*-ve,z[2]=We*be+Ye*-ve+Oe*-ie-et*-de,z[3]=M[3],z},ze.zero=function(z){return z[0]=0,z[1]=0,z[2]=0,z[3]=0,z},ze.str=function(z){return"vec4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+")"},ze.exactEquals=function(z,M){return z[0]===M[0]&&z[1]===M[1]&&z[2]===M[2]&&z[3]===M[3]},ze.equals=function(z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=M[0],ie=M[1],ve=M[2],be=M[3];return Math.abs(B-de)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(de))&&Math.abs(J-ie)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(ie))&&Math.abs(te-ve)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(ve))&&Math.abs(he-be)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(be))},ze.forEach=ze.sqrLen=ze.len=ze.sqrDist=ze.dist=ze.div=ze.mul=ze.sub=void 0;var s=function(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var B=u(void 0);if(B&&B.has(z))return B.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in z)if(he!=="default"&&Object.prototype.hasOwnProperty.call(z,he)){var de=te?Object.getOwnPropertyDescriptor(z,he):null;de&&(de.get||de.set)?Object.defineProperty(J,he,de):J[he]=z[he]}return J.default=z,B&&B.set(z,J),J}(L());function u(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(J){return J?B:M})(z)}function f(){var z=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0),z}function g(z,M,B){return z[0]=M[0]-B[0],z[1]=M[1]-B[1],z[2]=M[2]-B[2],z[3]=M[3]-B[3],z}function m(z,M,B){return z[0]=M[0]*B[0],z[1]=M[1]*B[1],z[2]=M[2]*B[2],z[3]=M[3]*B[3],z}function _(z,M,B){return z[0]=M[0]/B[0],z[1]=M[1]/B[1],z[2]=M[2]/B[2],z[3]=M[3]/B[3],z}function b(z,M){return Math.hypot(M[0]-z[0],M[1]-z[1],M[2]-z[2],M[3]-z[3])}function O(z,M){var B=M[0]-z[0],J=M[1]-z[1],te=M[2]-z[2],he=M[3]-z[3];return B*B+J*J+te*te+he*he}function D(z){return Math.hypot(z[0],z[1],z[2],z[3])}function C(z){var M=z[0],B=z[1],J=z[2],te=z[3];return M*M+B*B+J*J+te*te}ze.sub=g,ze.mul=m,ze.div=_,ze.dist=b,ze.sqrDist=O,ze.len=D,ze.sqrLen=C;var V,I=(V=f(),function(z,M,B,J,te,he){var de,ie;for(M||(M=4),B||(B=0),ie=J?Math.min(J*M+B,z.length):z.length,de=B;de<ie;de+=M)V[0]=z[de],V[1]=z[de+1],V[2]=z[de+2],V[3]=z[de+3],te(V,V,he),z[de]=V[0],z[de+1]=V[1],z[de+2]=V[2],z[de+3]=V[3];return z});return ze.forEach=I,ze}function je(){if(xe)return Ee;function h(tt){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vt){return typeof vt}:function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt},h(tt)}xe=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.create=b,Ee.identity=function(tt){return tt[0]=0,tt[1]=0,tt[2]=0,tt[3]=1,tt},Ee.setAxisAngle=O,Ee.getAxisAngle=function(tt,vt){var xt=2*Math.acos(vt[3]),Ct=Math.sin(xt/2);return Ct>s.EPSILON?(tt[0]=vt[0]/Ct,tt[1]=vt[1]/Ct,tt[2]=vt[2]/Ct):(tt[0]=1,tt[1]=0,tt[2]=0),xt},Ee.getAngle=function(tt,vt){var xt=B(tt,vt);return Math.acos(2*xt*xt-1)},Ee.multiply=D,Ee.rotateX=function(tt,vt,xt){xt*=.5;var Ct=vt[0],Dt=vt[1],Nt=vt[2],jt=vt[3],Lt=Math.sin(xt),qt=Math.cos(xt);return tt[0]=Ct*qt+jt*Lt,tt[1]=Dt*qt+Nt*Lt,tt[2]=Nt*qt-Dt*Lt,tt[3]=jt*qt-Ct*Lt,tt},Ee.rotateY=function(tt,vt,xt){xt*=.5;var Ct=vt[0],Dt=vt[1],Nt=vt[2],jt=vt[3],Lt=Math.sin(xt),qt=Math.cos(xt);return tt[0]=Ct*qt-Nt*Lt,tt[1]=Dt*qt+jt*Lt,tt[2]=Nt*qt+Ct*Lt,tt[3]=jt*qt-Dt*Lt,tt},Ee.rotateZ=function(tt,vt,xt){xt*=.5;var Ct=vt[0],Dt=vt[1],Nt=vt[2],jt=vt[3],Lt=Math.sin(xt),qt=Math.cos(xt);return tt[0]=Ct*qt+Dt*Lt,tt[1]=Dt*qt-Ct*Lt,tt[2]=Nt*qt+jt*Lt,tt[3]=jt*qt-Nt*Lt,tt},Ee.calculateW=function(tt,vt){var xt=vt[0],Ct=vt[1],Dt=vt[2];return tt[0]=xt,tt[1]=Ct,tt[2]=Dt,tt[3]=Math.sqrt(Math.abs(1-xt*xt-Ct*Ct-Dt*Dt)),tt},Ee.exp=C,Ee.ln=V,Ee.pow=function(tt,vt,xt){return V(tt,vt),M(tt,tt,xt),C(tt,tt),tt},Ee.slerp=I,Ee.random=function(tt){var vt=s.RANDOM(),xt=s.RANDOM(),Ct=s.RANDOM(),Dt=Math.sqrt(1-vt),Nt=Math.sqrt(vt);return tt[0]=Dt*Math.sin(2*Math.PI*xt),tt[1]=Dt*Math.cos(2*Math.PI*xt),tt[2]=Nt*Math.sin(2*Math.PI*Ct),tt[3]=Nt*Math.cos(2*Math.PI*Ct),tt},Ee.invert=function(tt,vt){var xt=vt[0],Ct=vt[1],Dt=vt[2],Nt=vt[3],jt=xt*xt+Ct*Ct+Dt*Dt+Nt*Nt,Lt=jt?1/jt:0;return tt[0]=-xt*Lt,tt[1]=-Ct*Lt,tt[2]=-Dt*Lt,tt[3]=Nt*Lt,tt},Ee.conjugate=function(tt,vt){return tt[0]=-vt[0],tt[1]=-vt[1],tt[2]=-vt[2],tt[3]=vt[3],tt},Ee.fromMat3=z,Ee.fromEuler=function(tt,vt,xt,Ct){var Dt=.5*Math.PI/180;vt*=Dt,xt*=Dt,Ct*=Dt;var Nt=Math.sin(vt),jt=Math.cos(vt),Lt=Math.sin(xt),qt=Math.cos(xt),Aa=Math.sin(Ct),ga=Math.cos(Ct);return tt[0]=Nt*qt*ga-jt*Lt*Aa,tt[1]=jt*Lt*ga+Nt*qt*Aa,tt[2]=jt*qt*Aa-Nt*Lt*ga,tt[3]=jt*qt*ga+Nt*Lt*Aa,tt},Ee.str=function(tt){return"quat("+tt[0]+", "+tt[1]+", "+tt[2]+", "+tt[3]+")"},Ee.setAxes=Ee.sqlerp=Ee.rotationTo=Ee.equals=Ee.exactEquals=Ee.normalize=Ee.sqrLen=Ee.squaredLength=Ee.len=Ee.length=Ee.lerp=Ee.dot=Ee.scale=Ee.mul=Ee.add=Ee.set=Ee.copy=Ee.fromValues=Ee.clone=void 0;var s=_(L()),u=_(se()),f=_(_e()),g=_(Me());function m(tt){if(typeof WeakMap!="function")return null;var vt=new WeakMap,xt=new WeakMap;return(m=function(Ct){return Ct?xt:vt})(tt)}function _(tt,vt){if(tt&&tt.__esModule)return tt;if(tt===null||h(tt)!=="object"&&typeof tt!="function")return{default:tt};var xt=m(vt);if(xt&&xt.has(tt))return xt.get(tt);var Ct={},Dt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nt in tt)if(Nt!=="default"&&Object.prototype.hasOwnProperty.call(tt,Nt)){var jt=Dt?Object.getOwnPropertyDescriptor(tt,Nt):null;jt&&(jt.get||jt.set)?Object.defineProperty(Ct,Nt,jt):Ct[Nt]=tt[Nt]}return Ct.default=tt,xt&&xt.set(tt,Ct),Ct}function b(){var tt=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(tt[0]=0,tt[1]=0,tt[2]=0),tt[3]=1,tt}function O(tt,vt,xt){xt*=.5;var Ct=Math.sin(xt);return tt[0]=Ct*vt[0],tt[1]=Ct*vt[1],tt[2]=Ct*vt[2],tt[3]=Math.cos(xt),tt}function D(tt,vt,xt){var Ct=vt[0],Dt=vt[1],Nt=vt[2],jt=vt[3],Lt=xt[0],qt=xt[1],Aa=xt[2],ga=xt[3];return tt[0]=Ct*ga+jt*Lt+Dt*Aa-Nt*qt,tt[1]=Dt*ga+jt*qt+Nt*Lt-Ct*Aa,tt[2]=Nt*ga+jt*Aa+Ct*qt-Dt*Lt,tt[3]=jt*ga-Ct*Lt-Dt*qt-Nt*Aa,tt}function C(tt,vt){var xt=vt[0],Ct=vt[1],Dt=vt[2],Nt=vt[3],jt=Math.sqrt(xt*xt+Ct*Ct+Dt*Dt),Lt=Math.exp(Nt),qt=jt>0?Lt*Math.sin(jt)/jt:0;return tt[0]=xt*qt,tt[1]=Ct*qt,tt[2]=Dt*qt,tt[3]=Lt*Math.cos(jt),tt}function V(tt,vt){var xt=vt[0],Ct=vt[1],Dt=vt[2],Nt=vt[3],jt=Math.sqrt(xt*xt+Ct*Ct+Dt*Dt),Lt=jt>0?Math.atan2(jt,Nt)/jt:0;return tt[0]=xt*Lt,tt[1]=Ct*Lt,tt[2]=Dt*Lt,tt[3]=.5*Math.log(xt*xt+Ct*Ct+Dt*Dt+Nt*Nt),tt}function I(tt,vt,xt,Ct){var Dt,Nt,jt,Lt,qt,Aa=vt[0],ga=vt[1],Qa=vt[2],Pa=vt[3],za=xt[0],wa=xt[1],vr=xt[2],Ka=xt[3];return(Nt=Aa*za+ga*wa+Qa*vr+Pa*Ka)<0&&(Nt=-Nt,za=-za,wa=-wa,vr=-vr,Ka=-Ka),1-Nt>s.EPSILON?(Dt=Math.acos(Nt),jt=Math.sin(Dt),Lt=Math.sin((1-Ct)*Dt)/jt,qt=Math.sin(Ct*Dt)/jt):(Lt=1-Ct,qt=Ct),tt[0]=Lt*Aa+qt*za,tt[1]=Lt*ga+qt*wa,tt[2]=Lt*Qa+qt*vr,tt[3]=Lt*Pa+qt*Ka,tt}function z(tt,vt){var xt,Ct=vt[0]+vt[4]+vt[8];if(Ct>0)xt=Math.sqrt(Ct+1),tt[3]=.5*xt,tt[0]=(vt[5]-vt[7])*(xt=.5/xt),tt[1]=(vt[6]-vt[2])*xt,tt[2]=(vt[1]-vt[3])*xt;else{var Dt=0;vt[4]>vt[0]&&(Dt=1),vt[8]>vt[3*Dt+Dt]&&(Dt=2);var Nt=(Dt+1)%3,jt=(Dt+2)%3;xt=Math.sqrt(vt[3*Dt+Dt]-vt[3*Nt+Nt]-vt[3*jt+jt]+1),tt[Dt]=.5*xt,tt[3]=(vt[3*Nt+jt]-vt[3*jt+Nt])*(xt=.5/xt),tt[Nt]=(vt[3*Nt+Dt]+vt[3*Dt+Nt])*xt,tt[jt]=(vt[3*jt+Dt]+vt[3*Dt+jt])*xt}return tt}Ee.clone=g.clone,Ee.fromValues=g.fromValues,Ee.copy=g.copy,Ee.set=g.set,Ee.add=g.add,Ee.mul=D;var M=g.scale;Ee.scale=M;var B=g.dot;Ee.dot=B,Ee.lerp=g.lerp;var J=g.length;Ee.length=J,Ee.len=J;var te=g.squaredLength;Ee.squaredLength=te,Ee.sqrLen=te;var he=g.normalize;Ee.normalize=he,Ee.exactEquals=g.exactEquals,Ee.equals=g.equals;var de,ie,ve,be=(de=f.create(),ie=f.fromValues(1,0,0),ve=f.fromValues(0,1,0),function(tt,vt,xt){var Ct=f.dot(vt,xt);return Ct<-.999999?(f.cross(de,ie,vt),f.len(de)<1e-6&&f.cross(de,ve,vt),f.normalize(de,de),O(tt,de,Math.PI),tt):Ct>.999999?(tt[0]=0,tt[1]=0,tt[2]=0,tt[3]=1,tt):(f.cross(de,vt,xt),tt[0]=de[0],tt[1]=de[1],tt[2]=de[2],tt[3]=1+Ct,he(tt,tt))});Ee.rotationTo=be;var Oe,et,We=(Oe=b(),et=b(),function(tt,vt,xt,Ct,Dt,Nt){return I(Oe,vt,Dt,Nt),I(et,xt,Ct,Nt),I(tt,Oe,et,2*Nt*(1-Nt)),tt});Ee.sqlerp=We;var Ye,gt=(Ye=u.create(),function(tt,vt,xt,Ct){return Ye[0]=xt[0],Ye[3]=xt[1],Ye[6]=xt[2],Ye[1]=Ct[0],Ye[4]=Ct[1],Ye[7]=Ct[2],Ye[2]=-vt[0],Ye[5]=-vt[1],Ye[8]=-vt[2],he(tt,z(tt,Ye))});return Ee.setAxes=gt,Ee}var Ue,Qe={};function ke(){if(Ue)return Qe;function h(I){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},h(I)}Ue=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.create=function(){var I=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},Qe.clone=function(I){var z=new s.ARRAY_TYPE(8);return z[0]=I[0],z[1]=I[1],z[2]=I[2],z[3]=I[3],z[4]=I[4],z[5]=I[5],z[6]=I[6],z[7]=I[7],z},Qe.fromValues=function(I,z,M,B,J,te,he,de){var ie=new s.ARRAY_TYPE(8);return ie[0]=I,ie[1]=z,ie[2]=M,ie[3]=B,ie[4]=J,ie[5]=te,ie[6]=he,ie[7]=de,ie},Qe.fromRotationTranslationValues=function(I,z,M,B,J,te,he){var de=new s.ARRAY_TYPE(8);de[0]=I,de[1]=z,de[2]=M,de[3]=B;var ie=.5*J,ve=.5*te,be=.5*he;return de[4]=ie*B+ve*M-be*z,de[5]=ve*B+be*I-ie*M,de[6]=be*B+ie*z-ve*I,de[7]=-ie*I-ve*z-be*M,de},Qe.fromRotationTranslation=_,Qe.fromTranslation=function(I,z){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*z[0],I[5]=.5*z[1],I[6]=.5*z[2],I[7]=0,I},Qe.fromRotation=function(I,z){return I[0]=z[0],I[1]=z[1],I[2]=z[2],I[3]=z[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},Qe.fromMat4=function(I,z){var M=u.create();f.getRotation(M,z);var B=new s.ARRAY_TYPE(3);return f.getTranslation(B,z),_(I,M,B),I},Qe.copy=b,Qe.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},Qe.set=function(I,z,M,B,J,te,he,de,ie){return I[0]=z,I[1]=M,I[2]=B,I[3]=J,I[4]=te,I[5]=he,I[6]=de,I[7]=ie,I},Qe.getDual=function(I,z){return I[0]=z[4],I[1]=z[5],I[2]=z[6],I[3]=z[7],I},Qe.setDual=function(I,z){return I[4]=z[0],I[5]=z[1],I[6]=z[2],I[7]=z[3],I},Qe.getTranslation=function(I,z){var M=z[4],B=z[5],J=z[6],te=z[7],he=-z[0],de=-z[1],ie=-z[2],ve=z[3];return I[0]=2*(M*ve+te*he+B*ie-J*de),I[1]=2*(B*ve+te*de+J*he-M*ie),I[2]=2*(J*ve+te*ie+M*de-B*he),I},Qe.translate=function(I,z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=.5*M[0],ie=.5*M[1],ve=.5*M[2],be=z[4],Oe=z[5],et=z[6],We=z[7];return I[0]=B,I[1]=J,I[2]=te,I[3]=he,I[4]=he*de+J*ve-te*ie+be,I[5]=he*ie+te*de-B*ve+Oe,I[6]=he*ve+B*ie-J*de+et,I[7]=-B*de-J*ie-te*ve+We,I},Qe.rotateX=function(I,z,M){var B=-z[0],J=-z[1],te=-z[2],he=z[3],de=z[4],ie=z[5],ve=z[6],be=z[7],Oe=de*he+be*B+ie*te-ve*J,et=ie*he+be*J+ve*B-de*te,We=ve*he+be*te+de*J-ie*B,Ye=be*he-de*B-ie*J-ve*te;return u.rotateX(I,z,M),I[4]=Oe*(he=I[3])+Ye*(B=I[0])+et*(te=I[2])-We*(J=I[1]),I[5]=et*he+Ye*J+We*B-Oe*te,I[6]=We*he+Ye*te+Oe*J-et*B,I[7]=Ye*he-Oe*B-et*J-We*te,I},Qe.rotateY=function(I,z,M){var B=-z[0],J=-z[1],te=-z[2],he=z[3],de=z[4],ie=z[5],ve=z[6],be=z[7],Oe=de*he+be*B+ie*te-ve*J,et=ie*he+be*J+ve*B-de*te,We=ve*he+be*te+de*J-ie*B,Ye=be*he-de*B-ie*J-ve*te;return u.rotateY(I,z,M),I[4]=Oe*(he=I[3])+Ye*(B=I[0])+et*(te=I[2])-We*(J=I[1]),I[5]=et*he+Ye*J+We*B-Oe*te,I[6]=We*he+Ye*te+Oe*J-et*B,I[7]=Ye*he-Oe*B-et*J-We*te,I},Qe.rotateZ=function(I,z,M){var B=-z[0],J=-z[1],te=-z[2],he=z[3],de=z[4],ie=z[5],ve=z[6],be=z[7],Oe=de*he+be*B+ie*te-ve*J,et=ie*he+be*J+ve*B-de*te,We=ve*he+be*te+de*J-ie*B,Ye=be*he-de*B-ie*J-ve*te;return u.rotateZ(I,z,M),I[4]=Oe*(he=I[3])+Ye*(B=I[0])+et*(te=I[2])-We*(J=I[1]),I[5]=et*he+Ye*J+We*B-Oe*te,I[6]=We*he+Ye*te+Oe*J-et*B,I[7]=Ye*he-Oe*B-et*J-We*te,I},Qe.rotateByQuatAppend=function(I,z,M){var B=M[0],J=M[1],te=M[2],he=M[3],de=z[0],ie=z[1],ve=z[2],be=z[3];return I[0]=de*he+be*B+ie*te-ve*J,I[1]=ie*he+be*J+ve*B-de*te,I[2]=ve*he+be*te+de*J-ie*B,I[3]=be*he-de*B-ie*J-ve*te,I[4]=(de=z[4])*he+(be=z[7])*B+(ie=z[5])*te-(ve=z[6])*J,I[5]=ie*he+be*J+ve*B-de*te,I[6]=ve*he+be*te+de*J-ie*B,I[7]=be*he-de*B-ie*J-ve*te,I},Qe.rotateByQuatPrepend=function(I,z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=M[0],ie=M[1],ve=M[2],be=M[3];return I[0]=B*be+he*de+J*ve-te*ie,I[1]=J*be+he*ie+te*de-B*ve,I[2]=te*be+he*ve+B*ie-J*de,I[3]=he*be-B*de-J*ie-te*ve,I[4]=B*(be=M[7])+he*(de=M[4])+J*(ve=M[6])-te*(ie=M[5]),I[5]=J*be+he*ie+te*de-B*ve,I[6]=te*be+he*ve+B*ie-J*de,I[7]=he*be-B*de-J*ie-te*ve,I},Qe.rotateAroundAxis=function(I,z,M,B){if(Math.abs(B)<s.EPSILON)return b(I,z);var J=Math.hypot(M[0],M[1],M[2]);B*=.5;var te=Math.sin(B),he=te*M[0]/J,de=te*M[1]/J,ie=te*M[2]/J,ve=Math.cos(B),be=z[0],Oe=z[1],et=z[2],We=z[3];I[0]=be*ve+We*he+Oe*ie-et*de,I[1]=Oe*ve+We*de+et*he-be*ie,I[2]=et*ve+We*ie+be*de-Oe*he,I[3]=We*ve-be*he-Oe*de-et*ie;var Ye=z[4],gt=z[5],tt=z[6],vt=z[7];return I[4]=Ye*ve+vt*he+gt*ie-tt*de,I[5]=gt*ve+vt*de+tt*he-Ye*ie,I[6]=tt*ve+vt*ie+Ye*de-gt*he,I[7]=vt*ve-Ye*he-gt*de-tt*ie,I},Qe.add=function(I,z,M){return I[0]=z[0]+M[0],I[1]=z[1]+M[1],I[2]=z[2]+M[2],I[3]=z[3]+M[3],I[4]=z[4]+M[4],I[5]=z[5]+M[5],I[6]=z[6]+M[6],I[7]=z[7]+M[7],I},Qe.multiply=O,Qe.scale=function(I,z,M){return I[0]=z[0]*M,I[1]=z[1]*M,I[2]=z[2]*M,I[3]=z[3]*M,I[4]=z[4]*M,I[5]=z[5]*M,I[6]=z[6]*M,I[7]=z[7]*M,I},Qe.lerp=function(I,z,M,B){var J=1-B;return D(z,M)<0&&(B=-B),I[0]=z[0]*J+M[0]*B,I[1]=z[1]*J+M[1]*B,I[2]=z[2]*J+M[2]*B,I[3]=z[3]*J+M[3]*B,I[4]=z[4]*J+M[4]*B,I[5]=z[5]*J+M[5]*B,I[6]=z[6]*J+M[6]*B,I[7]=z[7]*J+M[7]*B,I},Qe.invert=function(I,z){var M=V(z);return I[0]=-z[0]/M,I[1]=-z[1]/M,I[2]=-z[2]/M,I[3]=z[3]/M,I[4]=-z[4]/M,I[5]=-z[5]/M,I[6]=-z[6]/M,I[7]=z[7]/M,I},Qe.conjugate=function(I,z){return I[0]=-z[0],I[1]=-z[1],I[2]=-z[2],I[3]=z[3],I[4]=-z[4],I[5]=-z[5],I[6]=-z[6],I[7]=z[7],I},Qe.normalize=function(I,z){var M=V(z);if(M>0){M=Math.sqrt(M);var B=z[0]/M,J=z[1]/M,te=z[2]/M,he=z[3]/M,de=z[4],ie=z[5],ve=z[6],be=z[7],Oe=B*de+J*ie+te*ve+he*be;I[0]=B,I[1]=J,I[2]=te,I[3]=he,I[4]=(de-B*Oe)/M,I[5]=(ie-J*Oe)/M,I[6]=(ve-te*Oe)/M,I[7]=(be-he*Oe)/M}return I},Qe.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},Qe.exactEquals=function(I,z){return I[0]===z[0]&&I[1]===z[1]&&I[2]===z[2]&&I[3]===z[3]&&I[4]===z[4]&&I[5]===z[5]&&I[6]===z[6]&&I[7]===z[7]},Qe.equals=function(I,z){var M=I[0],B=I[1],J=I[2],te=I[3],he=I[4],de=I[5],ie=I[6],ve=I[7],be=z[0],Oe=z[1],et=z[2],We=z[3],Ye=z[4],gt=z[5],tt=z[6],vt=z[7];return Math.abs(M-be)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(be))&&Math.abs(B-Oe)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(Oe))&&Math.abs(J-et)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(et))&&Math.abs(te-We)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(We))&&Math.abs(he-Ye)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ye))&&Math.abs(de-gt)<=s.EPSILON*Math.max(1,Math.abs(de),Math.abs(gt))&&Math.abs(ie-tt)<=s.EPSILON*Math.max(1,Math.abs(ie),Math.abs(tt))&&Math.abs(ve-vt)<=s.EPSILON*Math.max(1,Math.abs(ve),Math.abs(vt))},Qe.sqrLen=Qe.squaredLength=Qe.len=Qe.length=Qe.dot=Qe.mul=Qe.setReal=Qe.getReal=void 0;var s=m(L()),u=m(je()),f=m(Re());function g(I){if(typeof WeakMap!="function")return null;var z=new WeakMap,M=new WeakMap;return(g=function(B){return B?M:z})(I)}function m(I,z){if(I&&I.__esModule)return I;if(I===null||h(I)!=="object"&&typeof I!="function")return{default:I};var M=g(z);if(M&&M.has(I))return M.get(I);var B={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in I)if(te!=="default"&&Object.prototype.hasOwnProperty.call(I,te)){var he=J?Object.getOwnPropertyDescriptor(I,te):null;he&&(he.get||he.set)?Object.defineProperty(B,te,he):B[te]=I[te]}return B.default=I,M&&M.set(I,B),B}function _(I,z,M){var B=.5*M[0],J=.5*M[1],te=.5*M[2],he=z[0],de=z[1],ie=z[2],ve=z[3];return I[0]=he,I[1]=de,I[2]=ie,I[3]=ve,I[4]=B*ve+J*ie-te*de,I[5]=J*ve+te*he-B*ie,I[6]=te*ve+B*de-J*he,I[7]=-B*he-J*de-te*ie,I}function b(I,z){return I[0]=z[0],I[1]=z[1],I[2]=z[2],I[3]=z[3],I[4]=z[4],I[5]=z[5],I[6]=z[6],I[7]=z[7],I}function O(I,z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=M[4],ie=M[5],ve=M[6],be=M[7],Oe=z[4],et=z[5],We=z[6],Ye=z[7],gt=M[0],tt=M[1],vt=M[2],xt=M[3];return I[0]=B*xt+he*gt+J*vt-te*tt,I[1]=J*xt+he*tt+te*gt-B*vt,I[2]=te*xt+he*vt+B*tt-J*gt,I[3]=he*xt-B*gt-J*tt-te*vt,I[4]=B*be+he*de+J*ve-te*ie+Oe*xt+Ye*gt+et*vt-We*tt,I[5]=J*be+he*ie+te*de-B*ve+et*xt+Ye*tt+We*gt-Oe*vt,I[6]=te*be+he*ve+B*ie-J*de+We*xt+Ye*vt+Oe*tt-et*gt,I[7]=he*be-B*de-J*ie-te*ve+Ye*xt-Oe*gt-et*tt-We*vt,I}Qe.getReal=u.copy,Qe.setReal=u.copy,Qe.mul=O;var D=u.dot;Qe.dot=D;var C=u.length;Qe.length=C,Qe.len=C;var V=u.squaredLength;return Qe.squaredLength=V,Qe.sqrLen=V,Qe}var Ge,Se,Te={};function qe(){if(Ge)return Te;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}Ge=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.create=f,Te.clone=function(z){var M=new s.ARRAY_TYPE(2);return M[0]=z[0],M[1]=z[1],M},Te.fromValues=function(z,M){var B=new s.ARRAY_TYPE(2);return B[0]=z,B[1]=M,B},Te.copy=function(z,M){return z[0]=M[0],z[1]=M[1],z},Te.set=function(z,M,B){return z[0]=M,z[1]=B,z},Te.add=function(z,M,B){return z[0]=M[0]+B[0],z[1]=M[1]+B[1],z},Te.subtract=g,Te.multiply=m,Te.divide=_,Te.ceil=function(z,M){return z[0]=Math.ceil(M[0]),z[1]=Math.ceil(M[1]),z},Te.floor=function(z,M){return z[0]=Math.floor(M[0]),z[1]=Math.floor(M[1]),z},Te.min=function(z,M,B){return z[0]=Math.min(M[0],B[0]),z[1]=Math.min(M[1],B[1]),z},Te.max=function(z,M,B){return z[0]=Math.max(M[0],B[0]),z[1]=Math.max(M[1],B[1]),z},Te.round=function(z,M){return z[0]=Math.round(M[0]),z[1]=Math.round(M[1]),z},Te.scale=function(z,M,B){return z[0]=M[0]*B,z[1]=M[1]*B,z},Te.scaleAndAdd=function(z,M,B,J){return z[0]=M[0]+B[0]*J,z[1]=M[1]+B[1]*J,z},Te.distance=b,Te.squaredDistance=O,Te.length=D,Te.squaredLength=C,Te.negate=function(z,M){return z[0]=-M[0],z[1]=-M[1],z},Te.inverse=function(z,M){return z[0]=1/M[0],z[1]=1/M[1],z},Te.normalize=function(z,M){var B=M[0],J=M[1],te=B*B+J*J;return te>0&&(te=1/Math.sqrt(te)),z[0]=M[0]*te,z[1]=M[1]*te,z},Te.dot=function(z,M){return z[0]*M[0]+z[1]*M[1]},Te.cross=function(z,M,B){var J=M[0]*B[1]-M[1]*B[0];return z[0]=z[1]=0,z[2]=J,z},Te.lerp=function(z,M,B,J){var te=M[0],he=M[1];return z[0]=te+J*(B[0]-te),z[1]=he+J*(B[1]-he),z},Te.random=function(z,M){M=M||1;var B=2*s.RANDOM()*Math.PI;return z[0]=Math.cos(B)*M,z[1]=Math.sin(B)*M,z},Te.transformMat2=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[2]*te,z[1]=B[1]*J+B[3]*te,z},Te.transformMat2d=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[2]*te+B[4],z[1]=B[1]*J+B[3]*te+B[5],z},Te.transformMat3=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[3]*te+B[6],z[1]=B[1]*J+B[4]*te+B[7],z},Te.transformMat4=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[4]*te+B[12],z[1]=B[1]*J+B[5]*te+B[13],z},Te.rotate=function(z,M,B,J){var te=M[0]-B[0],he=M[1]-B[1],de=Math.sin(J),ie=Math.cos(J);return z[0]=te*ie-he*de+B[0],z[1]=te*de+he*ie+B[1],z},Te.angle=function(z,M){var B=z[0],J=z[1],te=M[0],he=M[1],de=Math.sqrt(B*B+J*J)*Math.sqrt(te*te+he*he);return Math.acos(Math.min(Math.max(de&&(B*te+J*he)/de,-1),1))},Te.zero=function(z){return z[0]=0,z[1]=0,z},Te.str=function(z){return"vec2("+z[0]+", "+z[1]+")"},Te.exactEquals=function(z,M){return z[0]===M[0]&&z[1]===M[1]},Te.equals=function(z,M){var B=z[0],J=z[1],te=M[0],he=M[1];return Math.abs(B-te)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(te))&&Math.abs(J-he)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(he))},Te.forEach=Te.sqrLen=Te.sqrDist=Te.dist=Te.div=Te.mul=Te.sub=Te.len=void 0;var s=function(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var B=u(void 0);if(B&&B.has(z))return B.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in z)if(he!=="default"&&Object.prototype.hasOwnProperty.call(z,he)){var de=te?Object.getOwnPropertyDescriptor(z,he):null;de&&(de.get||de.set)?Object.defineProperty(J,he,de):J[he]=z[he]}return J.default=z,B&&B.set(z,J),J}(L());function u(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(J){return J?B:M})(z)}function f(){var z=new s.ARRAY_TYPE(2);return s.ARRAY_TYPE!=Float32Array&&(z[0]=0,z[1]=0),z}function g(z,M,B){return z[0]=M[0]-B[0],z[1]=M[1]-B[1],z}function m(z,M,B){return z[0]=M[0]*B[0],z[1]=M[1]*B[1],z}function _(z,M,B){return z[0]=M[0]/B[0],z[1]=M[1]/B[1],z}function b(z,M){return Math.hypot(M[0]-z[0],M[1]-z[1])}function O(z,M){var B=M[0]-z[0],J=M[1]-z[1];return B*B+J*J}function D(z){return Math.hypot(z[0],z[1])}function C(z){var M=z[0],B=z[1];return M*M+B*B}Te.len=D,Te.sub=g,Te.mul=m,Te.div=_,Te.dist=b,Te.sqrDist=O,Te.sqrLen=C;var V,I=(V=f(),function(z,M,B,J,te,he){var de,ie;for(M||(M=2),B||(B=0),ie=J?Math.min(J*M+B,z.length):z.length,de=B;de<ie;de+=M)V[0]=z[de],V[1]=z[de+1],te(V,V,he),z[de]=V[0],z[de+1]=V[1];return z});return Te.forEach=I,Te}function Ze(){if(Se)return x;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}Se=1,Object.defineProperty(x,"__esModule",{value:!0}),x.vec4=x.vec3=x.vec2=x.quat2=x.quat=x.mat4=x.mat3=x.mat2d=x.mat2=x.glMatrix=void 0;var s=I(L());x.glMatrix=s;var u=I(H());x.mat2=u;var f=I(ee());x.mat2d=f;var g=I(se());x.mat3=g;var m=I(Re());x.mat4=m;var _=I(je());x.quat=_;var b=I(ke());x.quat2=b;var O=I(qe());x.vec2=O;var D=I(_e());x.vec3=D;var C=I(Me());function V(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(V=function(J){return J?B:M})(z)}function I(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var B=V(M);if(B&&B.has(z))return B.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in z)if(he!=="default"&&Object.prototype.hasOwnProperty.call(z,he)){var de=te?Object.getOwnPropertyDescriptor(z,he):null;de&&(de.get||de.set)?Object.defineProperty(J,he,de):J[he]=z[he]}return J.default=z,B&&B.set(z,J),J}return x.vec4=C,x}var lt,st,ht,He,Ae=Ze(),zt=function(){if(st)return lt;function h(s,u,f,g){this.cx=3*s,this.bx=3*(f-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(g-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=f,this.p2y=g}return st=1,lt=h,h.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var f=s,g=0;g<8;g++){var m=this.sampleCurveX(f)-s;if(Math.abs(m)<u)return f;var _=this.sampleCurveDerivativeX(f);if(Math.abs(_)<1e-6)break;f-=m/_}var b=0,O=1;for(f=s,g=0;g<20&&(m=this.sampleCurveX(f),!(Math.abs(m-s)<u));g++)s>m?b=f:O=f,f=.5*(O-b)+b;return f},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},lt}(),kt=v(zt);function ma(){if(He)return ht;function h(s,u){this.x=s,this.y=u}return He=1,ht=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,u){return this.clone()._rotateAround(s,u)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var u=s.x-this.x,f=s.y-this.y;return u*u+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,u){return Math.atan2(this.x*u-this.y*s,this.x*s+this.y*u)},_matMult:function(s){var u=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=u,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var u=Math.cos(s),f=Math.sin(s),g=f*this.x+u*this.y;return this.x=u*this.x-f*this.y,this.y=g,this},_rotateAround:function(s,u){var f=Math.cos(s),g=Math.sin(s),m=u.y+g*(this.x-u.x)+f*(this.y-u.y);return this.x=u.x+f*(this.x-u.x)-g*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(s){return s instanceof h?s:Array.isArray(s)?new h(s[0],s[1]):s},ht}var It=v(ma());function Ht(h,s){if(Array.isArray(h)){if(!Array.isArray(s)||h.length!==s.length)return!1;for(let u=0;u<h.length;u++)if(!Ht(h[u],s[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&s!==null){if(typeof s!="object"||Object.keys(h).length!==Object.keys(s).length)return!1;for(const u in h)if(!Ht(h[u],s[u]))return!1;return!0}return h===s}const _t=Math.PI/180,ir=180/Math.PI;function Ea(h){return h*_t}function Na(h){return h*ir}const Ja=[[0,0],[1,0],[1,1],[0,1]];function cr(h){if(h<=0)return 0;if(h>=1)return 1;const s=h*h,u=s*h;return 4*(h<.5?u:3*(h-s)+u-.75)}function dr(h,s,u,f){const g=new kt(h,s,u,f);return function(m){return g.solve(m)}}const Sr=dr(.25,.1,.25,1);function ka(h,s,u){return Math.min(u,Math.max(s,h))}function Gr(h,s,u){return(u=ka((u-h)/(s-h),0,1))*u*(3-2*u)}function dn(h,s,u){const f=u-s,g=((h-s)%f+f)%f+s;return g===s?u:g}function Cn(h,s,u){if(!h.length)return u(null,[]);let f=h.length;const g=new Array(h.length);let m=null;h.forEach((_,b)=>{s(_,(O,D)=>{O&&(m=O),g[b]=D,--f==0&&u(m,g)})})}function fn(h,...s){for(const u of s)for(const f in u)h[f]=u[f];return h}let va=1;function Wa(){return va++}function ua(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))}function Xa(h,s){h.forEach(u=>{s[u]&&(s[u]=s[u].bind(s))})}function pr(h,s,u){const f={};for(const g in h)f[g]=s.call(this,h[g],g,h);return f}function Mn(h,s,u){const f={};for(const g in h)s.call(this,h[g],g,h)&&(f[g]=h[g]);return f}function Sn(h){return Array.isArray(h)?h.map(Sn):typeof h=="object"&&h?pr(h,Sn):h}const hn={};function $r(h){hn[h]||(typeof console<"u"&&console.warn(h),hn[h]=!0)}function br(h,s,u){return(u.y-h.y)*(s.x-h.x)>(s.y-h.y)*(u.x-h.x)}function $i(h){let s=0;for(let u,f,g=0,m=h.length,_=m-1;g<m;_=g++)u=h[g],f=h[_],s+=(f.x-u.x)*(u.y+f.y);return s}function zi([h,s,u]){const f=Ea(s+90),g=Ea(u);return{x:h*Math.cos(f)*Math.sin(g),y:h*Math.sin(f)*Math.sin(g),z:h*Math.cos(g),azimuthal:s,polar:u}}function Ui(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ao(h){const s={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,g,m)=>{const _=g||m;return s[f]=!_||_.toLowerCase(),""}),s["max-age"]){const u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s}let di=null;function rn(h,s){return[h[4*s],h[4*s+1],h[4*s+2],h[4*s+3]]}function Jn(h,s,u,f){for(;s<u;){const g=s+u>>1;h[g]<f?s=g+1:u=g}return s}function vu(h,s,u,f){for(;s<u;){const g=s+u>>1;h[g]<=f?s=g+1:u=g}return s}function us(h){return h>0?1/(1.001-h):1+h}function Xt(h){return h>0?1-1/(1.001-h):-h}const Ne={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ne.API_URL)return null;try{const h=new URL(Ne.API_URL);return h.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":h.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Fe(h){return Ne.API_URL_REGEX.test(h)}function Xe(h){return Ne.API_SPRITE_REGEX.test(h)}let wt,yt,bt,Gt,Et,Kt;function Wt(){return wt==null&&(wt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),wt}const $t={now:()=>Gt!==void 0?Gt:performance.now(),setNow(h){Gt=h},restoreNow(){Gt=void 0},frame(h){const s=requestAnimationFrame(h);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(h,s=0){const{width:u,height:f}=h;Et||(Et=document.createElement("canvas"));const g=Et.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>Et.width||f>Et.height)&&(Et.width=u,Et.height=f),g.clearRect(-s,-s,u+2*s,f+2*s),g.drawImage(h,0,0,u,f),g.getImageData(-s,-s,u+2*s,f+2*s)},resolveURL:h=>(yt||(yt=document.createElement("a")),yt.href=h,yt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(bt==null&&(bt=window.matchMedia("(prefers-reduced-motion: reduce)")),bt.matches)},hasCanvasFingerprintNoise(){if(Kt!==void 0)return Kt;if(!Wt())return Kt=!1,!1;const h=new OffscreenCanvas(85,1),s=h.getContext("2d",{willReadFrequently:!0});let u=0;for(let g=0;g<h.width;++g)s.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,s.fillRect(g,0,1,1);const f=s.getImageData(0,0,h.width,h.height);u=0;for(let g=0;g<f.data.length;++g)if(g%4!=3&&u++!==f.data[g])return Kt=!0,!0;return Kt=!1,!1}};function Ta(h,s){const u=h.indexOf("?");if(u<0)return`${h}?${new URLSearchParams(s).toString()}`;const f=new URLSearchParams(h.slice(u));for(const g in s)f.set(g,s[g]);return`${h.slice(0,u)}?${f.toString()}`}function Ma(h,s={persistentParams:[]}){const u=h.indexOf("?");if(u<0)return h;const f=new URLSearchParams,g=new URLSearchParams(h.slice(u));for(const _ of s.persistentParams){const b=g.get(_);b&&f.set(_,b)}const m=f.toString();return`${h.slice(0,u)}${m.length>0?`?${m}`:""}`}const ja="mapbox-tiles";let _r=500,Vr=50;const zr=["language","worldview","jobid"];let Zr,In;function ei(){try{return caches}catch{}}function Hr(){const h=ei();h&&Zr==null&&(Zr=h.open(ja))}let An=1/0;const Kr={supported:!1,testSupport:function(h){!Ki&&Di&&(bs?Uo(h):Fn=h)}};let Fn,Di,Ki=!1,bs=!1;const xs=typeof self<"u"?self:{};function Uo(h){const s=h.createTexture();h.bindTexture(h.TEXTURE_2D,s);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,Di),h.isContextLost())return;Kr.supported=!0}catch{}h.deleteTexture(s),Ki=!0}xs.document&&(Di=xs.document.createElement("img"),Di.onload=function(){Fn&&Uo(Fn),Fn=null,bs=!0},Di.onerror=function(){Ki=!0,Fn=null},Di.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ps={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ps);class qs extends Error{constructor(s,u,f){u===401&&Fe(f)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const fc=Ui()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,el=function(h,s){if(!(/^file:/.test(u=h.url)||/^file:/.test(fc())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,g){const m=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:fc(),referrerPolicy:f.referrerPolicy,signal:m.signal});let b=!1,O=!1;const D=(C=_.url).indexOf("sku=")>0&&Fe(C);var C;f.type==="json"&&_.headers.set("Accept","application/json");const V=(z,M,B)=>{if(O)return;if(z&&z.message!=="SecurityError"&&$r(z.toString()),M&&B)return I(M);const J=Date.now();fetch(_).then(te=>{if(te.ok){const he=D?te.clone():null;return I(te,he,J)}return g(new qs(te.statusText,te.status,f.url))}).catch(te=>{te.name!=="AbortError"&&g(new Error(`${te.message} ${f.url}`))})},I=(z,M,B)=>{(f.type==="arrayBuffer"?z.arrayBuffer():f.type==="json"?z.json():z.text()).then(J=>{O||(M&&B&&function(te,he,de){if(Hr(),Zr==null)return;const ie=ao(he.headers.get("Cache-Control")||"");if(ie["no-store"])return;const ve={status:he.status,statusText:he.statusText,headers:new Headers};he.headers.forEach((et,We)=>ve.headers.set(We,et)),ie["max-age"]&&ve.headers.set("Expires",new Date(de+1e3*ie["max-age"]).toUTCString());const be=ve.headers.get("Expires");if(!be||new Date(be).getTime()-de<42e4)return;let Oe=Ma(te.url,{persistentParams:zr});if(he.status===206){const et=te.headers.get("Range");if(!et)return;ve.status=200,Oe=Ta(Oe,{range:et})}(function(et,We){if(In===void 0)try{new Response(new ReadableStream),In=!0}catch{In=!1}In?We(et.body):et.blob().then(We)})(he,et=>{const We=new Response((Ye=he.status)!==200&&Ye!==404&&[101,103,204,205,304].includes(Ye)?null:et,ve);var Ye;Hr(),Zr!=null&&Zr.then(gt=>gt.put(Oe,We)).catch(gt=>$r(gt.message))})}(_,M,B),b=!0,g(null,J,z.headers.get("Cache-Control"),z.headers.get("Expires")))}).catch(J=>{O||g(new Error(J.message))})};return D?function(z,M){if(Hr(),Zr==null)return M(null);Zr.then(B=>{let J=Ma(z.url,{persistentParams:zr});const te=z.headers.get("Range");te&&(J=Ta(J,{range:te})),B.match(J).then(he=>{const de=function(ie){if(!ie)return!1;const ve=new Date(ie.headers.get("Expires")||0),be=ao(ie.headers.get("Cache-Control")||"");return ve>Date.now()&&!be["no-cache"]}(he);B.delete(J),de&&B.put(J,he.clone()),M(null,he,de)}).catch(M)}).catch(M)}(_,V):V(null,null),{cancel:()=>{O=!0,b||m.abort()}}}(h,s);if(Ui()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,s,void 0,!0)}var u;return function(f,g){const m=new XMLHttpRequest;m.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in f.headers)m.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=f.credentials==="include",m.onerror=()=>{g(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(f.type==="json")try{_=JSON.parse(m.response)}catch(b){return g(b)}g(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else g(new qs(m.statusText,m.status,f.url))},m.send(f.body),{cancel:()=>m.abort()}}(h,s)},Mi=function(h,s){return el(fn(h,{type:"arrayBuffer"}),s)};function Yl(h){const s=document.createElement("a");return s.href=h,s.protocol===location.protocol&&s.host===location.host}const Bo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Pd,Fc;Pd=[],Fc=0;const fh=function(h,s){if(Kr.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),Fc>=Ne.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:h,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Pd.push(m),m}Fc++;let u=!1;const f=()=>{if(!u)for(u=!0,Fc--;Pd.length&&Fc<Ne.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Pd.shift(),{requestParameters:_,callback:b,cancelled:O}=m;O||(m.cancel=fh(_,b).cancel)}},g=Mi(h,(m,_,b,O)=>{f(),m?s(m):_&&(self.createImageBitmap?function(D,C){const V=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(V).then(I=>{C(null,I)}).catch(I=>{C(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(D,C)=>s(D,C,b,O)):function(D,C){const V=new Image;V.onload=()=>{C(null,V),URL.revokeObjectURL(V.src),V.onload=null,requestAnimationFrame(()=>{V.src=Bo})},V.onerror=()=>C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(D)],{type:"image/png"});V.src=D.byteLength?URL.createObjectURL(I):Bo}(_,(D,C)=>s(D,C,b,O)))});return{cancel:()=>{g.cancel(),f()}}};var _u,kc,yl,ro={exports:{}},jo={exports:{}},Xl={exports:{}},wu=function(){if(yl)return ro.exports;yl=1;var h=(_u||(_u=1,jo.exports=function(u,f){var g,m,_,b,O,D,C,V;for(m=u.length-(g=3&u.length),_=f,O=3432918353,D=461845907,V=0;V<m;)C=255&u.charCodeAt(V)|(255&u.charCodeAt(++V))<<8|(255&u.charCodeAt(++V))<<16|(255&u.charCodeAt(++V))<<24,++V,_=27492+(65535&(b=5*(65535&(_=(_^=C=(65535&(C=(C=(65535&C)*O+(((C>>>16)*O&65535)<<16)&4294967295)<<15|C>>>17))*D+(((C>>>16)*D&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(C=0,g){case 3:C^=(255&u.charCodeAt(V+2))<<16;case 2:C^=(255&u.charCodeAt(V+1))<<8;case 1:_^=C=(65535&(C=(C=(65535&(C^=255&u.charCodeAt(V)))*O+(((C>>>16)*O&65535)<<16)&4294967295)<<15|C>>>17))*D+(((C>>>16)*D&65535)<<16)&4294967295}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),jo.exports),s=(kc||(kc=1,Xl.exports=function(u,f){for(var g,m=u.length,_=f^m,b=0;m>=4;)g=1540483477*(65535&(g=255&u.charCodeAt(b)|(255&u.charCodeAt(++b))<<8|(255&u.charCodeAt(++b))<<16|(255&u.charCodeAt(++b))<<24))+((1540483477*(g>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),m-=4,++b;switch(m){case 3:_^=(255&u.charCodeAt(b+2))<<16;case 2:_^=(255&u.charCodeAt(b+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(b)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Xl.exports);return ro.exports=h,ro.exports.murmur3=h,ro.exports.murmur2=s,ro.exports}(),po=v(wu);class Go{constructor(s,...u){fn(this,u[0]||{}),this.type=s}}class Ed extends Go{constructor(s,u={}){super("error",fn({error:s},u))}}function $u(h,s,u){u[h]&&u[h].indexOf(s)!==-1||(u[h]=u[h]||[],u[h].push(s))}function Rf(h,s,u){if(u&&u[h]){const f=u[h].indexOf(s);f!==-1&&u[h].splice(f,1)}}class Jl{on(s,u){return this._listeners=this._listeners||{},$u(s,u,this._listeners),this}off(s,u){return Rf(s,u,this._listeners),Rf(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},$u(s,u,this._oneTimeListeners),this):new Promise(f=>{this.once(s,f)})}fire(s,u){const f=typeof s=="string"?new Go(s,u):s,g=f.type;if(this.listens(g)){f.target=this;const m=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const O of m)O.call(this,f);const _=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const O of _)Rf(g,O,this._oneTimeListeners),O.call(this,f);const b=this._eventedParent;b&&(fn(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(f))}else f instanceof Ed&&console.error(f.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}class Zo{constructor(s){typeof s=="string"?this.name=s:(this.name=s.name,this.iconsetId=s.iconsetId)}static from(s){return new Zo(s)}static toString(s){return s.iconsetId?`${s.name}${s.iconsetId}`:s.name}static parse(s){const[u,f]=s.split("");return new Zo({name:u,iconsetId:f})}static isEqual(s,u){return s.name===u.name&&s.iconsetId===u.iconsetId}toString(){return Zo.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Ku,ph={},tl=function(){if(Ku)return ph;Ku=1;var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return s(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function f(m){return(_=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:_>1?1:_;var _}function g(m,_,b){return b<0?b+=1:b>1&&(b-=1),6*b<1?m+(_-m)*b*6:2*b<1?_:3*b<2?m+(_-m)*(2/3-b)*6:m}try{ph.parseCSSColor=function(m){var _,b=m.replace(/ /g,"").toLowerCase();if(b in h)return h[b].slice();if(b[0]==="#")return b.length===4?(_=parseInt(b.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:b.length===7&&(_=parseInt(b.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var O=b.indexOf("("),D=b.indexOf(")");if(O!==-1&&D+1===b.length){var C=b.substr(0,O),V=b.substr(O+1,D-(O+1)).split(","),I=1;switch(C){case"rgba":if(V.length!==4)return null;I=f(V.pop());case"rgb":return V.length!==3?null:[u(V[0]),u(V[1]),u(V[2]),I];case"hsla":if(V.length!==4)return null;I=f(V.pop());case"hsl":if(V.length!==3)return null;var z=(parseFloat(V[0])%360+360)%360/360,M=f(V[1]),B=f(V[2]),J=B<=.5?B*(M+1):B+M-B*M,te=2*B-J;return[s(255*g(te,J,z+1/3)),s(255*g(te,J,z)),s(255*g(te,J,z-1/3)),I];default:return null}}return null}}catch{}return ph}();class En{constructor(s,u,f,g=1){this.r=s,this.g=u,this.b=f,this.a=g}static parse(s){if(!s)return;if(s instanceof En)return s;if(typeof s!="string")return;const u=tl.parseCSSColor(s);return u?new En(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[s,u,f,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(s)},${Math.round(u)},${Math.round(f)},${g})`}toString(){const[s,u,f,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*s)},${Math.round(255*u)},${Math.round(255*f)},${g})`}toRenderColor(s){const{r:u,g:f,b:g,a:m}=this;return new mo(s,u,f,g,m)}clone(){return new En(this.r,this.g,this.b,this.a)}}class mo{constructor(s,u,f,g,m){if(s){const _=s.image.height,b=_*_;u=m===0?0:u/m*(_-1),f=m===0?0:f/m*(_-1),g=m===0?0:g/m*(_-1);const O=Math.floor(u),D=Math.floor(f),C=Math.floor(g),V=Math.ceil(u),I=Math.ceil(f),z=Math.ceil(g),M=u-O,B=f-D,J=g-C,te=s.image.data,he=4*(O+D*b+C*_),de=4*(O+D*b+z*_),ie=4*(O+I*b+C*_),ve=4*(O+I*b+z*_),be=4*(V+D*b+C*_),Oe=4*(V+D*b+z*_),et=4*(V+I*b+C*_),We=4*(V+I*b+z*_);if(he<0||We>=te.length)throw new Error("out of range");this.r=mr(mr(mr(te[he],te[de],J),mr(te[ie],te[ve],J),B),mr(mr(te[be],te[Oe],J),mr(te[et],te[We],J),B),M)/255*m,this.g=mr(mr(mr(te[he+1],te[de+1],J),mr(te[ie+1],te[ve+1],J),B),mr(mr(te[be+1],te[Oe+1],J),mr(te[et+1],te[We+1],J),B),M)/255*m,this.b=mr(mr(mr(te[he+2],te[de+2],J),mr(te[ie+2],te[ve+2],J),B),mr(mr(te[be+2],te[Oe+2],J),mr(te[et+2],te[We+2],J),B),M)/255*m,this.a=m}else this.r=u,this.g=f,this.b=g,this.a=m}toArray(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*s/g,255*u/g,255*f/g,g]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:s,g:u,b:f,a:g}=this,m=Math.min(Math.max(s/g,0),1),_=Math.min(Math.max(u/g,0),1),b=Math.min(Math.max(f/g,0),1),O=Math.min(m,_,b),D=Math.max(m,_,b),C=(O+D)/2;if(O===D)return[0,0,100*C,g];const V=D-O,I=C>.5?V/(2-D-O):V/(D+O);let z=0;return D===m?z=(_-b)/V+(_<b?6:0):D===_?z=(b-m)/V+2:D===b&&(z=(m-_)/V+4),z*=60,[Math.min(Math.max(z,0),360),Math.min(Math.max(100*I,0),100),Math.min(Math.max(100*C,0),100),g]}toArray01(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[s/g,u/g,f/g,g]}toArray01Scaled(s){const{r:u,g:f,b:g,a:m}=this;return m===0?[0,0,0]:[u/m*s,f/m*s,g/m*s]}toArray01PremultipliedAlpha(){const{r:s,g:u,b:f,a:g}=this;return[s,u,f,g]}toArray01Linear(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(s/g,2.2),Math.pow(u/g,2.2),Math.pow(f/g,2.2),g]}}function mr(h,s,u){return h*(1-u)+s*u}function Uc(h,s,u){return h.map((f,g)=>mr(f,s[g],u))}function vn(h){return h*h*h*h*h}En.black=new En(0,0,0,1),En.white=new En(1,1,1,1),En.transparent=new En(0,0,0,0),En.red=new En(1,0,0,1),En.blue=new En(0,0,1,1);var mh=Object.freeze({__proto__:null,array:Uc,color:function(h,s,u){return new En(mr(h.r,s.r,u),mr(h.g,s.g,u),mr(h.b,s.b,u),mr(h.a,s.a,u))},easeIn:vn,number:mr});function bn(h,...s){for(const u of s)for(const f in u)h[f]=u[f];return h}class Hs extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class pc{constructor(s,u=[]){this.parent=s,this.bindings={};for(const[f,g]of u)this.bindings[f]=g}concat(s){return new pc(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const mc={kind:"null"},er={kind:"number"},nn={kind:"string"},_n={kind:"boolean"},$s={kind:"color"},Nd={kind:"object"},pn={kind:"value"},qo={kind:"collator"},Ru={kind:"formatted"},Es={kind:"resolvedImage"};function Gi(h,s){return{kind:"array",itemType:h,N:s}}function Ei(h){if(h.kind==="array"){const s=Ei(h.itemType);return typeof h.N=="number"?`array<${s}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${s}>`}return h.kind}const go=[mc,er,nn,_n,$s,Ru,Nd,Gi(pn),Es];function Od(h,s){if(s.kind==="error")return null;if(h.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Od(h.itemType,s.itemType))&&(typeof h.N!="number"||h.N===s.N))return null}else{if(h.kind===s.kind)return null;if(h.kind==="value"){for(const u of go)if(!Od(u,s))return null}}return`Expected ${Ei(h)} but found ${Ei(s)} instead.`}function gh(h,s){return s.some(u=>u.kind===h.kind)}function gc(h,s){return s.some(u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h)}class yc{constructor(s,u,f){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class al{constructor(s,u,f,g,m){this.text=s.normalize?s.normalize():s,this.image=u,this.scale=f,this.fontStack=g,this.textColor=m}}class ms{constructor(s){this.sections=s}static fromString(s){return new ms([new al(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||!!s.image&&s.image.hasPrimary())}static factory(s){return s instanceof ms?s:ms.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const u of this.sections){if(u.image){const g=u.image.getPrimary().id.toString();s.push(["image",g]);continue}s.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),s.push(f)}return s}}class Wu{constructor(s,u={}){if(this.id=Zo.from(s),this.options=Object.assign({},u),u.transform){const{a:f,b:g,c:m,d:_,e:b,f:O}=u.transform;this.options.transform=new DOMMatrix([f,g,m,_,b,O])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:s,b:u,c:f,d:g,e:m,f:_}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:s,b:u,c:f,d:g,e:m,f:_}})}static parse(s){let u,f,g,m;try{({name:u,iconsetId:f,params:g,transform:m}=JSON.parse(s)||{})}catch{return null}if(!u)return null;const{a:_,b,c:O,d:D,e:C,f:V}=m||{};return new Wu({name:u,iconsetId:f},{params:g,transform:new DOMMatrix([_,b,O,D,C,V])})}scaleSelf(s){return this.options.transform.scaleSelf(s),this}}class Ns{constructor(s,u,f,g,m=!1){this.primaryId=Zo.from(s),this.primaryOptions=u,f&&(this.secondaryId=Zo.from(f)),this.secondaryOptions=g,this.available=m}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Wu(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Wu(this.secondaryId,this.secondaryOptions):null}static from(s){return typeof s=="string"?Ns.build({name:s}):s}static build(s,u,f,g){return!s||typeof s=="object"&&!("name"in s)?null:new Ns(s,f,u,g)}}function Vl(h,s,u,f){return typeof h=="number"&&h>=0&&h<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[h,s,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[h,s,u,f]:[h,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rl(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof En||h instanceof yc||h instanceof ms||h instanceof Ns)return!0;if(Array.isArray(h)){for(const s of h)if(!rl(s))return!1;return!0}if(typeof h=="object"){for(const s in h)if(!rl(h[s]))return!1;return!0}return!1}function Wi(h){if(h===null)return mc;if(typeof h=="string")return nn;if(typeof h=="boolean")return _n;if(typeof h=="number")return er;if(h instanceof En)return $s;if(h instanceof yc)return qo;if(h instanceof ms)return Ru;if(h instanceof Ns)return Es;if(Array.isArray(h)){const s=h.length;let u;for(const f of h){const g=Wi(f);if(u){if(u===g)continue;u=pn;break}u=g}return Gi(u||pn,s)}return Nd}function Ks(h){const s=typeof h;return h===null?"":s==="string"||s==="number"||s==="boolean"?String(h):h instanceof En?h.toStringPremultipliedAlpha():h instanceof ms||h instanceof Ns?h.toString():JSON.stringify(h)}class Ql{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(s.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!rl(s[1]))return u.error("invalid value");const f=s[1];let g=Wi(f);const m=u.expectedType;return g.kind!=="array"||g.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(g=m),new Ql(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof En?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof ms?this.value.serialize():this.value}}class cs{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Bh={string:nn,number:er,boolean:_n,object:Nd};class Ho{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let f,g=1;const m=s[0];if(m==="array"){let b,O;if(s.length>2){const D=s[1];if(typeof D!="string"||!(D in Bh)||D==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);b=Bh[D],g++}else b=pn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=s[2],g++}f=Gi(b,O)}else f=Bh[m];const _=[];for(;g<s.length;g++){const b=u.parse(s[g],g,pn);if(!b)return null;_.push(b)}return new Ho(f,_)}evaluate(s){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(s);if(!Od(this.type,Wi(f)))return f;if(u===this.args.length-1)throw new cs(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${Ei(Wi(f))} but was expected to be of type ${Ei(this.type)}.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,u=[s.kind];if(s.kind==="array"){const f=s.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);const g=s.N;(typeof g=="number"||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(f=>f.serialize()))}}class Vd{constructor(s){this.type=Ru,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const f=s[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const g=[];let m=!1;for(let _=1;_<=s.length-1;++_){const b=s[_];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let O=null;if(b["font-scale"]&&(O=u.parseObjectValue(b["font-scale"],_,"font-scale",er),!O))return null;let D=null;if(b["text-font"]&&(D=u.parseObjectValue(b["text-font"],_,"text-font",Gi(nn)),!D))return null;let C=null;if(b["text-color"]&&(C=u.parseObjectValue(b["text-color"],_,"text-color",$s),!C))return null;const V=g[g.length-1];V.scale=O,V.font=D,V.textColor=C}else{const O=u.parse(s[_],_,pn);if(!O)return null;const D=O.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,g.push({content:O,scale:null,font:null,textColor:null})}}return new Vd(g)}evaluate(s){return new ms(this.sections.map(u=>{const f=u.content.evaluate(s);return Wi(f)===Es?new al("",f,null,null,null):new al(Ks(f),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)}))}eachChild(s){for(const u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const u of this.sections){s.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),s.push(f)}return s}}class Tu{constructor(s,u,f,g){this._imageWarnHistory={},this.type=Es,this.namePrimary=s,this.nameSecondary=u,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),g&&(this.paramsSecondary=g.params,this.iconsetIdSecondary=g.iconset?g.iconset.id:void 0)}static parse(s,u){if(s.length<2)return u.error("Expected two or more arguments.");let f=1;const g=[];function m(){if(f<s.length){const b=u.parse(s[f],f++,nn);return b?(g.push({image:b,options:{}}),!0):(u.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function _(){if(f<s.length){const O=s[f];if((b=O)===null||typeof b!="object"||Array.isArray(b))return!0;const D=O.params,C=O.iconset,V=u.concat(f);if(!D&&!C)return f++,!0;if(D){if(typeof D!="object"||D.constructor!==Object)return V.error('Image options "params" should be an object'),!1;const I={},z=V.concat(void 0,"params");for(const M in D){if(!M)return z.error("Image parameter name should be non-empty"),!1;const B=z.concat(void 0,M).parse(D[M],void 0,$s,void 0,{typeAnnotation:"coerce"});if(!B)return!1;I[M]=B}g[g.length-1].options.params=I}if(C){if(typeof C!="object"||C.constructor!==Object)return V.error('Image options "iconset" should be an object'),!1;if(!C.id)return V.error('Image options "iconset" should have an "id" property'),!1;g[g.length-1].options.iconset=C}return f++,!0}var b;return!0}for(let b=0;b<2;b++)if(!m()||!_())return;return new Tu(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(s,u){const f={};if(u){for(const g in u)if(u[g])try{f[g]=u[g].evaluate(s)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(s){const u={name:this.namePrimary.evaluate(s),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(s),iconsetId:this.iconsetIdSecondary}:void 0,g=Ns.build(u,f,this.paramsPrimary?this.evaluateParams(s,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(s,this.paramsSecondary):void 0);if(g&&s.availableImages){const m=g.getPrimary().id;if(g.available=s.availableImages.some(_=>Zo.isEqual(_,m)),g.available){const _=g.getSecondary()?g.getSecondary().id:null;_&&(g.available=s.availableImages.some(b=>Zo.isEqual(b,_)))}}return g}eachChild(s){if(s(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&s(this.paramsPrimary[u]);if(this.nameSecondary&&(s(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&s(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(s,u){const f={};if(u&&(f.iconset={id:u}),s){f.params={};for(const g in s)s[g]&&(f.params[g]=s[g].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const s=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&s.push(u)}if(this.nameSecondary&&(s.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&s.push(u)}return s}}function Cu(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}const sp={"to-boolean":_n,"to-color":$s,"to-number":er,"to-string":nn};class eu{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const f=s[0],g=[];let m=mc;if(f==="to-array"){if(!Array.isArray(s[1]))return null;const _=s[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Gi(u.expectedType.itemType,_)}else{if(!(_>0&&rl(s[1][0])))return null;m=Gi(Wi(s[1][0]),_)}for(let b=0;b<_;b++){const O=s[1][b];let D;if(Cu(O)==="array")D=u.parse(O,void 0,m.itemType);else{const C=Cu(O);if(C!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${C}.`);D=u.registry.literal.parse(["literal",O===void 0?null:O],u)}if(!D)return null;g.push(D)}}else{if((f==="to-boolean"||f==="to-string")&&s.length!==2)return u.error("Expected one argument.");m=sp[f];for(let _=1;_<s.length;_++){const b=u.parse(s[_],_,pn);if(!b)return null;g.push(b)}}return new eu(m,g)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let u,f;for(const g of this.args){if(u=g.evaluate(s),f=null,u instanceof En)return u;if(typeof u=="string"){const m=s.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Vl(u[0],u[1],u[2],u[3]),!f))return new En(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new cs(f||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(s),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new cs(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?ms.fromString(Ks(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?Ns.build(Ks(this.args[0].evaluate(s))):this.type.kind==="array"?this.args.map(u=>u.evaluate(s)):Ks(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Vd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Tu(this.args[0]).serialize();const s=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{s.push(u.serialize())}),s}}const Jm=["Unknown","Point","LineString","Polygon"];class zd{constructor(s,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=s,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Jm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(s){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:f,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*u-s[0])+this.featureDistanceData.bearing[1]*(g*u-s[1])}return 0}parseColor(s){let u=this._parseColorCache[s];return u||(u=this._parseColorCache[s]=En.parse(s)),u}getConfig(s){return this.options?this.options.get(s):null}}class Ws{constructor(s,u,f,g,m){this.name=s,this.type=u,this._evaluate=f,this.args=g,this._overloadIndex=m}evaluate(s){if(!this._evaluate){const u=Ws.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,u){const f=s[0],g=Ws.definitions[f];if(!g)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(g)?g[0]:g.type,_=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,b=[];let O=null,D=-1;for(const[C,V]of _){if(Array.isArray(C)&&C.length!==s.length-1)continue;b.push(C),D++,O=new iu(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const I=[];let z=!1;for(let M=1;M<s.length;M++){const B=s[M],J=Array.isArray(C)?C[M-1]:C.type,te=O.parse(B,1+I.length,J);if(!te){z=!0;break}I.push(te)}if(!z)if(Array.isArray(C)&&C.length!==I.length)O.error(`Expected ${C.length} arguments, but found ${I.length} instead.`);else{for(let M=0;M<I.length;M++){const B=Array.isArray(C)?C[M]:C.type,J=I[M];O.concat(M+1).checkSubtype(B,J.type)}if(O.errors.length===0)return new Ws(f,m,V,I,D)}}if(b.length===1)u.errors.push(...O.errors);else{const C=(b.length?b:_.map(([I])=>I)).map(Tf).join(" | "),V=[];for(let I=1;I<s.length;I++){const z=u.parse(s[I],1+V.length);if(!z)return null;V.push(Ei(z.type))}u.error(`Expected arguments of type ${C}, but found (${V.join(", ")}) instead.`)}return null}static register(s,u){Ws.definitions=u;for(const f in u)s[f]=Ws}}function Tf(h){return Array.isArray(h)?`(${h.map(Ei).join(", ")})`:`(${Ei(h.type)}...)`}class tu{constructor(s,u,f){this.type=qo,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(s.length!==2)return u.error("Expected one argument.");const f=s[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const g=f["case-sensitive"]===void 0?u.parse(!1,1,_n):u.parseObjectValue(f["case-sensitive"],1,"case-sensitive",_n);if(!g)return null;const m=f["diacritic-sensitive"]===void 0?u.parse(!1,1,_n):u.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",_n);if(!m)return null;let _=null;return f.locale&&(_=u.parseObjectValue(f.locale,1,"locale",nn),!_)?null:new tu(g,m,_)}evaluate(s){return new yc(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}function Cf(h,s,u=0,f=h.length-1,g=Je){for(;f>u;){if(f-u>600){const O=f-u+1,D=s-u+1,C=Math.log(O),V=.5*Math.exp(2*C/3),I=.5*Math.sqrt(C*V*(O-V)/O)*(D-O/2<0?-1:1);Cf(h,s,Math.max(u,Math.floor(s-D*V/O+I)),Math.min(f,Math.floor(s+(O-D)*V/O+I)),g)}const m=h[s];let _=u,b=f;for(ce(h,u,s),g(h[f],m)>0&&ce(h,u,f);_<b;){for(ce(h,_,b),_++,b--;g(h[_],m)<0;)_++;for(;g(h[b],m)>0;)b--}g(h[u],m)===0?ce(h,u,b):(b++,ce(h,b,f)),b<=s&&(u=b+1),s<=b&&(f=b-1)}}function ce(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}function Je(h,s){return h<s?-1:h>s?1:0}function Mt(h){let s=0;for(let u,f,g=0,m=h.length,_=m-1;g<m;_=g++)u=h[g],f=h[_],s+=(f.x-u.x)*(u.y+f.y);return s}function Jt(h,s){h[0]=Math.min(h[0],s[0]),h[1]=Math.min(h[1],s[1]),h[2]=Math.max(h[2],s[0]),h[3]=Math.max(h[3],s[1])}function ha(h,s){return!(h[0]<=s[0]||h[2]>=s[2]||h[1]<=s[1]||h[3]>=s[3])}function Da(h,s,u){const f=h[0]-s[0],g=h[1]-s[1],m=h[0]-u[0],_=h[1]-u[1];return f*_-m*g==0&&f*m<=0&&g*_<=0}function nr(h,s,u=!1){let f=!1;for(let b=0,O=s.length;b<O;b++){const D=s[b];for(let C=0,V=D.length,I=V-1;C<V;I=C++){const z=D[I],M=D[C];if(Da(h,z,M))return u;(m=z)[1]>(g=h)[1]!=(_=M)[1]>g[1]&&g[0]<(_[0]-m[0])*(g[1]-m[1])/(_[1]-m[1])+m[0]&&(f=!f)}}var g,m,_;return f}function Rr(h,s,u,f){const g=f[0]-u[0],m=f[1]-u[1],_=(h[0]-u[0])*m-g*(h[1]-u[1]),b=(s[0]-u[0])*m-g*(s[1]-u[1]);return _>0&&b<0||_<0&&b>0}function Wr(h,s,u,f){return(g=[f[0]-u[0],f[1]-u[1]])[0]*(m=[s[0]-h[0],s[1]-h[1]])[1]-g[1]*m[0]!=0&&!(!Rr(h,s,u,f)||!Rr(u,f,h,s));var g,m}const xn=8192;function zn(h,s){const u=(180+h[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,g=Math.pow(2,s.z);return[Math.round(u*g*xn),Math.round(f*g*xn)]}function yi(h,s){for(let u=0;u<s.length;u++)if(nr(h,s[u]))return!0;return!1}function Os(h,s,u){for(const f of u)for(let g=0,m=f.length,_=m-1;g<m;_=g++)if(Wr(h,s,f[_],f[g]))return!0;return!1}function Vs(h,s){for(let u=0;u<h.length;++u)if(!nr(h[u],s))return!1;for(let u=0;u<h.length-1;++u)if(Os(h[u],h[u+1],s))return!1;return!0}function no(h,s){for(let u=0;u<s.length;u++)if(Vs(h,s[u]))return!0;return!1}function is(h,s,u){const f=[];for(let g=0;g<h.length;g++){const m=[];for(let _=0;_<h[g].length;_++){const b=zn(h[g][_],u);Jt(s,b),m.push(b)}f.push(m)}return f}function Nr(h,s,u){const f=[];for(let g=0;g<h.length;g++){const m=is(h[g],s,u);f.push(m)}return f}function or(h,s,u,f){if(h[0]<u[0]||h[0]>u[2]){const g=.5*f;let m=h[0]-u[0]>g?-f:u[0]-h[0]>g?f:0;m===0&&(m=h[0]-u[2]>g?-f:u[2]-h[0]>g?f:0),h[0]+=m}Jt(s,h)}function Al(h,s,u,f){const g=Math.pow(2,f.z)*xn,m=[f.x*xn,f.y*xn],_=[];if(!h)return _;for(const b of h)for(const O of b){const D=[O.x+m[0],O.y+m[1]];or(D,s,u,g),_.push(D)}return _}function Tr(h,s,u,f){const g=Math.pow(2,f.z)*xn,m=[f.x*xn,f.y*xn],_=[];if(!h)return _;for(const O of h){const D=[];for(const C of O){const V=[C.x+m[0],C.y+m[1]];Jt(s,V),D.push(V)}_.push(D)}if(s[2]-s[0]<=g/2){(b=s)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const O of _)for(const D of O)or(D,s,u,g)}var b;return _}class Su{constructor(s,u){this.type=_n,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(rl(s[1])){const f=s[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const m=f.features[g].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Su(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Su(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Su(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=is(f.coordinates,m,_),O=Al(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!nr(D,b))return!1}if(f.type==="MultiPolygon"){const b=Nr(f.coordinates,m,_),O=Al(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!yi(D,b))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=is(f.coordinates,m,_),O=Tr(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!Vs(D,b))return!1}if(f.type==="MultiPolygon"){const b=Nr(f.coordinates,m,_),O=Tr(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!no(D,b))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const au={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},wr=1/298.257223563,yh=wr*(2-wr),ru=Math.PI/180;class Ac{static fromTile(s,u,f){const g=Math.PI*(1-2*(s+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/ru;return new Ac(m,f)}static get units(){return au}constructor(s,u){if(s===void 0)throw new Error("No latitude given.");if(u&&!au[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(au).join(", ")}`);const f=6378.137*ru*(u?au[u]:1),g=Math.cos(s*ru),m=1/(1-yh*(1-g*g)),_=Math.sqrt(m);this.kx=f*_*g,this.ky=f*_*m*(1-yh)}distance(s,u){const f=wi(s[0]-u[0])*this.kx,g=(s[1]-u[1])*this.ky;return Math.sqrt(f*f+g*g)}bearing(s,u){const f=wi(u[0]-s[0])*this.kx;return Math.atan2(f,(u[1]-s[1])*this.ky)/ru}destination(s,u,f){const g=f*ru;return this.offset(s,Math.sin(g)*u,Math.cos(g)*u)}offset(s,u,f){return[s[0]+u/this.kx,s[1]+f/this.ky]}lineDistance(s){let u=0;for(let f=0;f<s.length-1;f++)u+=this.distance(s[f],s[f+1]);return u}area(s){let u=0;for(let f=0;f<s.length;f++){const g=s[f];for(let m=0,_=g.length,b=_-1;m<_;b=m++)u+=wi(g[m][0]-g[b][0])*(g[m][1]+g[b][1])*(f?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(s,u){let f=0;if(u<=0)return s[0];for(let g=0;g<s.length-1;g++){const m=s[g],_=s[g+1],b=this.distance(m,_);if(f+=b,f>u)return zs(m,_,(u-(f-b))/b)}return s[s.length-1]}pointToSegmentDistance(s,u,f){let[g,m]=u,_=wi(f[0]-g)*this.kx,b=(f[1]-m)*this.ky;if(_!==0||b!==0){const O=(wi(s[0]-g)*this.kx*_+(s[1]-m)*this.ky*b)/(_*_+b*b);O>1?(g=f[0],m=f[1]):O>0&&(g+=_/this.kx*O,m+=b/this.ky*O)}return _=wi(s[0]-g)*this.kx,b=(s[1]-m)*this.ky,Math.sqrt(_*_+b*b)}pointOnLine(s,u){let f=1/0,g=s[0][0],m=s[0][1],_=0,b=0;for(let O=0;O<s.length-1;O++){let D=s[O][0],C=s[O][1],V=wi(s[O+1][0]-D)*this.kx,I=(s[O+1][1]-C)*this.ky,z=0;V===0&&I===0||(z=(wi(u[0]-D)*this.kx*V+(u[1]-C)*this.ky*I)/(V*V+I*I),z>1?(D=s[O+1][0],C=s[O+1][1]):z>0&&(D+=V/this.kx*z,C+=I/this.ky*z)),V=wi(u[0]-D)*this.kx,I=(u[1]-C)*this.ky;const M=V*V+I*I;M<f&&(f=M,g=D,m=C,_=O,b=z)}return{point:[g,m],index:_,t:Math.max(0,Math.min(1,b))}}lineSlice(s,u,f){let g=this.pointOnLine(f,s),m=this.pointOnLine(f,u);if(g.index>m.index||g.index===m.index&&g.t>m.t){const D=g;g=m,m=D}const _=[g.point],b=g.index+1,O=m.index;!Dd(f[b],_[0])&&b<=O&&_.push(f[b]);for(let D=b+1;D<=O;D++)_.push(f[D]);return Dd(f[O],m.point)||_.push(m.point),_}lineSliceAlong(s,u,f){let g=0;const m=[];for(let _=0;_<f.length-1;_++){const b=f[_],O=f[_+1],D=this.distance(b,O);if(g+=D,g>s&&m.length===0&&m.push(zs(b,O,(s-(g-D))/D)),g>=u)return m.push(zs(b,O,(u-(g-D))/D)),m;g>s&&m.push(O)}return m}bufferPoint(s,u){const f=u/this.ky,g=u/this.kx;return[s[0]-g,s[1]-f,s[0]+g,s[1]+f]}bufferBBox(s,u){const f=u/this.ky,g=u/this.kx;return[s[0]-g,s[1]-f,s[2]+g,s[3]+f]}insideBBox(s,u){return wi(s[0]-u[0])>=0&&wi(s[0]-u[2])<=0&&s[1]>=u[1]&&s[1]<=u[3]}}function Dd(h,s){return h[0]===s[0]&&h[1]===s[1]}function zs(h,s,u){const f=wi(s[0]-h[0]);return[h[0]+f*u,h[1]+(s[1]-h[1])*u]}function wi(h){for(;h<-180;)h+=360;for(;h>180;)h-=360;return h}class vc{constructor(s=[],u=(f,g)=>f<g?-1:f>g?1:0){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:u,compare:f}=this,g=u[s];for(;s>0;){const m=s-1>>1,_=u[m];if(f(g,_)>=0)break;u[s]=_,s=m}u[s]=g}_down(s){const{data:u,compare:f}=this,g=this.length>>1,m=u[s];for(;s<g;){let _=1+(s<<1);const b=_+1;if(b<this.length&&f(u[b],u[_])<0&&(_=b),f(u[_],m)>=0)break;u[s]=u[_],s=_}u[s]=m}}var Va=8192;function Md(h,s){return s.dist-h.dist}const Ys=100,yo=50;function Sf(h){const s=[1/0,1/0,-1/0,-1/0];if(s.length!==h.length)return!1;for(let u=0;u<s.length;u++)if(s[u]!==h[u])return!1;return!0}function jh(h){return h[1]-h[0]+1}function Ao(h,s){const u=h[1]>=h[0]&&h[1]<s;return u||console.warn("Distance Expression: Index is out of range"),u}function Us(h,s){if(h[0]>h[1])return[null,null];const u=jh(h);if(s){if(u===2)return[h,null];const f=Math.floor(u/2);return[[h[0],h[0]+f],[h[0]+f,h[1]]]}{if(u===1)return[h,null];const f=Math.floor(u/2)-1;return[[h[0],h[0]+f],[h[0]+f+1,h[1]]]}}function zl(h,s){const u=[1/0,1/0,-1/0,-1/0];if(!Ao(s,h.length))return u;for(let f=s[0];f<=s[1];++f)Jt(u,h[f]);return u}function Bc(h){const s=[1/0,1/0,-1/0,-1/0];for(let u=0;u<h.length;++u)for(let f=0;f<h[u].length;++f)Jt(s,h[u][f]);return s}function nu(h,s,u){if(Sf(h)||Sf(s))return NaN;let f=0,g=0;return h[2]<s[0]&&(f=s[0]-h[2]),h[0]>s[2]&&(f=h[0]-s[2]),h[1]>s[3]&&(g=h[1]-s[3]),h[3]<s[1]&&(g=s[1]-h[3]),u.distance([0,0],[f,g])}function Ah(h){return 360*h-180}function Dl(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function Po(h,s){const u=Math.pow(2,s.z),f=(h.y/Va+s.y)/u;return[Ah((h.x/Va+s.x)/u),Dl(f)]}function Id(h,s){const u=[];for(let f=0;f<h.length;++f)u.push(Po(h[f],s));return u}function jc(h,s,u){const f=u.pointOnLine(s,h).point;return u.distance(h,f)}function Ml(h,s,u,f,g){const m=u.slice(f[0],f[1]+1);let _=1/0;for(let b=s[0];b<=s[1];++b)if((_=Math.min(_,jc(h[b],m,g)))===0)return 0;return _}function _c(h,s,u,f,g){const m=Math.min(g.pointToSegmentDistance(h,u,f),g.pointToSegmentDistance(s,u,f)),_=Math.min(g.pointToSegmentDistance(u,h,s),g.pointToSegmentDistance(f,h,s));return Math.min(m,_)}function bu(h,s,u,f,g){if(!Ao(s,h.length)||!Ao(f,u.length))return NaN;let m=1/0;for(let _=s[0];_<s[1];++_)for(let b=f[0];b<f[1];++b){if(Wr(h[_],h[_+1],u[b],u[b+1]))return 0;m=Math.min(m,_c(h[_],h[_+1],u[b],u[b+1],g))}return m}function Yi(h,s,u,f,g){if(!Ao(s,h.length)||!Ao(f,u.length))return NaN;let m=1/0;for(let _=s[0];_<=s[1];++_)for(let b=f[0];b<=f[1];++b)if((m=Math.min(m,g.distance(h[_],u[b])))===0)return m;return m}function bf(h,s,u){if(nr(h,s,!0))return 0;let f=1/0;for(const g of s){const m=g.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[m-1]&&(f=Math.min(f,u.pointToSegmentDistance(h,g[m-1],g[0])))===0||(f=Math.min(f,jc(h,g,u)))===0)return f}return f}function io(h,s,u,f){if(!Ao(s,h.length))return NaN;for(let m=s[0];m<=s[1];++m)if(nr(h[m],u,!0))return 0;let g=1/0;for(let m=s[0];m<s[1];++m)for(const _ of u)for(let b=0,O=_.length,D=O-1;b<O;D=b++){if(Wr(h[m],h[m+1],_[D],_[b]))return 0;g=Math.min(g,_c(h[m],h[m+1],_[D],_[b],f))}return g}function vo(h,s){for(const u of h)for(let f=0;f<=u.length-1;++f)if(nr(u[f],s,!0))return!0;return!1}function Ld(h,s,u,f=1/0){const g=Bc(h),m=Bc(s);if(f!==1/0&&nu(g,m,u)>=f)return f;if(ha(g,m)){if(vo(h,s))return 0}else if(vo(s,h))return 0;let _=f;for(const b of h)for(let O=0,D=b.length,C=D-1;O<D;C=O++)for(const V of s)for(let I=0,z=V.length,M=z-1;I<z;M=I++){if(Wr(b[C],b[O],V[M],V[I]))return 0;_=Math.min(_,_c(b[C],b[O],V[M],V[I],u))}return _}function Fd(h,s,u,f,g,m,_){if(m===null||_===null)return;const b=nu(zl(f,m),zl(g,_),u);b<s&&h.push({dist:b,range1:m,range2:_})}function so(h,s,u,f,g=1/0){let m=Math.min(f.distance(h[0],u[0][0]),g);if(m===0)return m;const _=new vc([{dist:0,range1:[0,h.length-1],range2:[0,0]}],Md),b=s?yo:Ys,O=Bc(u);for(;_.length;){const D=_.pop();if(D.dist>=m)continue;const C=D.range1;if(jh(C)<=b){if(!Ao(C,h.length))return NaN;if(s){const V=io(h,C,u,f);if((m=Math.min(m,V))===0)return m}else for(let V=C[0];V<=C[1];++V){const I=bf(h[V],u,f);if((m=Math.min(m,I))===0)return m}}else{const V=Us(C,s);if(V[0]!==null){const I=nu(zl(h,V[0]),O,f);I<m&&_.push({dist:I,range1:V[0],range2:[0,0]})}if(V[1]!==null){const I=nu(zl(h,V[1]),O,f);I<m&&_.push({dist:I,range1:V[1],range2:[0,0]})}}}return m}function Gc(h,s,u,f,g,m=1/0){let _=Math.min(m,g.distance(h[0],u[0]));if(_===0)return _;const b=new vc([{dist:0,range1:[0,h.length-1],range2:[0,u.length-1]}],Md),O=s?yo:Ys,D=f?yo:Ys;for(;b.length;){const C=b.pop();if(C.dist>=_)continue;const V=C.range1,I=C.range2;if(jh(V)<=O&&jh(I)<=D){if(!Ao(V,h.length)||!Ao(I,u.length))return NaN;if(s&&f?_=Math.min(_,bu(h,V,u,I,g)):s||f?s&&!f?_=Math.min(_,Ml(u,I,h,V,g)):!s&&f&&(_=Math.min(_,Ml(h,V,u,I,g))):_=Math.min(_,Yi(h,V,u,I,g)),_===0)return _}else{const z=Us(V,s),M=Us(I,f);Fd(b,_,g,h,u,z[0],M[0]),Fd(b,_,g,h,u,z[0],M[1]),Fd(b,_,g,h,u,z[1],M[0]),Fd(b,_,g,h,u,z[1],M[1])}}return _}function wc(h,s,u,f,g=1/0){let m=g;const _=zl(h,[0,h.length-1]);for(const b of u)if(!(m!==1/0&&nu(_,zl(b,[0,b.length-1]),f)>=m)&&(m=Math.min(m,Gc(h,s,b,!0,f,m)),m===0))return m;return m}function xu(h,s,u,f,g=1/0){let m=g;const _=zl(h,[0,h.length-1]);for(const b of u){if(m!==1/0&&nu(_,Bc(b),f)>=m)continue;const O=so(h,s,b,f,m);if(isNaN(O))return O;if((m=Math.min(m,O))===0)return m}return m}function Zc(h){return h==="Point"||h==="MultiPoint"||h==="LineString"||h==="MultiLineString"||h==="Polygon"||h==="MultiPolygon"}class Pu{constructor(s,u){this.type=er,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${s.length-1} instead.`);if(rl(s[1])){const f=s[1];if(f.type==="FeatureCollection"){for(let g=0;g<f.features.length;++g)if(Zc(f.features[g].geometry.type))return new Pu(f,f.features[g].geometry)}else if(f.type==="Feature"){if(Zc(f.geometry.type))return new Pu(f,f.geometry)}else if(Zc(f.type))return new Pu(f,f)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(s){const u=s.geometry(),f=s.canonicalID();if(u!=null&&f!=null){if(s.geometryType()==="Point")return function(g,m,_){const b=[];for(const D of g)for(const C of D)b.push(Po(C,m));const O=new Ac(b[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?Gc(b,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",O):_.type==="MultiLineString"?wc(b,!1,_.coordinates,O):_.type==="Polygon"||_.type==="MultiPolygon"?xu(b,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,O):null}(u,f,this.geometries);if(s.geometryType()==="LineString")return function(g,m,_){const b=[];for(const D of g){const C=[];for(const V of D)C.push(Po(V,m));b.push(C)}const O=new Ac(b[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return wc(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,O);if(_.type==="MultiLineString"){let D=1/0;for(let C=0;C<_.coordinates.length;C++){const V=wc(_.coordinates[C],!0,b,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}if(_.type==="Polygon"||_.type==="MultiPolygon"){let D=1/0;for(let C=0;C<b.length;C++){const V=xu(b[C],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return null}(u,f,this.geometries);if(s.geometryType()==="Polygon")return function(g,m,_){const b=[];for(const D of function(C,V){const I=C.length;if(I<=1)return[C];const z=[];let M,B;for(let J=0;J<I;J++){const te=Mt(C[J]);te!==0&&(C[J].area=Math.abs(te),B===void 0&&(B=te<0),B===te<0?(M&&z.push(M),M=[C[J]]):M.push(C[J]))}return M&&z.push(M),z}(g)){const C=[];for(let V=0;V<D.length;++V)C.push(Id(D[V],m));b.push(C)}const O=new Ac(b[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return xu(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,O);if(_.type==="MultiLineString"){let D=1/0;for(let C=0;C<_.coordinates.length;C++){const V=xu(_.coordinates[C],!0,b,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return _.type==="Polygon"||_.type==="MultiPolygon"?function(D,C,V){let I=1/0;for(const z of D)for(const M of C){const B=Ld(z,M,V,I);if(isNaN(B))return B;if((I=Math.min(I,B))===0)return I}return I}(_.type==="Polygon"?[_.coordinates]:_.coordinates,b,O):null}(u,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function qc(h,s){switch(h){case"string":return Ks(s);case"number":return+s;case"boolean":return!!s;case"color":return En.parse(s);case"formatted":return ms.fromString(Ks(s));case"resolvedImage":return Ns.build(Ks(s))}return s}function Rc(h,s,u,f){return f!==void 0&&(h=f*Math.round(h/f)),s!==void 0&&h<s&&(h=s),u!==void 0&&h>u&&(h=u),h}class Yu{constructor(s,u,f){this.type=s,this.key=u,this.scope=f}static parse(s,u){let f=u.expectedType;if(f==null&&(f=pn),s.length<2||s.length>3)return u.error("Invalid number of arguments for 'config' expression.");const g=u.parse(s[1],1);if(!(g instanceof Ql))return u.error("Key name of 'config' expression must be a string literal.");if(s.length>=3){const m=u.parse(s[2],2);return m instanceof Ql?new Yu(f,Ks(g.value),Ks(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new Yu(f,Ks(g.value))}evaluate(s){const u=[this.key,this.scope,s.scope].filter(Boolean).join(""),f=s.getConfig(u);if(!f)return null;const{type:g,value:m,values:_,minValue:b,maxValue:O,stepValue:D}=f,C=f.default.evaluate(s);let V=C;if(m){const I=s.scope;s.scope=(I||"").split("").slice(1).join(""),V=m.evaluate(s),s.scope=I}return g&&(V=qc(g,V)),V===void 0||b===void 0&&O===void 0&&D===void 0||(typeof V=="number"?V=Rc(V,b,O,D):Array.isArray(V)&&(V=V.map(I=>typeof I=="number"?Rc(I,b,O,D):I))),m!==void 0&&V!==void 0&&_&&!_.includes(V)&&(V=C,g&&(V=qc(g,V))),(g&&g!==this.type||V!==void 0&&Wi(V)!==this.type)&&(V=qc(this.type.kind,V)),V}eachChild(){}outputDefined(){return!1}serialize(){const s=["config",this.key];return this.scope&&s.concat(this.key),s}}function $o(h){if(h instanceof Ws&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Su||h instanceof Pu)return!1;let s=!0;return h.eachChild(u=>{s&&!$o(u)&&(s=!1)}),s}function gs(h){if(h instanceof Ws&&h.name==="feature-state")return!1;let s=!0;return h.eachChild(u=>{s&&!gs(u)&&(s=!1)}),s}function Qn(h){if(h instanceof Yu)return new Set([h.key]);let s=new Set;return h.eachChild(u=>{s=new Set([...s,...Qn(u)])}),s}function ni(h,s){if(h instanceof Ws&&s.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild(f=>{u&&!ni(f,s)&&(u=!1)}),u}class Xi{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=s[1];return u.scope.has(f)?new Xi(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ds{constructor(s,u=[],f,g=new pc,m=[],_,b){this.registry=s,this.path=u,this.key=u.map(O=>typeof O=="string"?`['${O}']`:`[${O}]`).join(""),this.scope=g,this.errors=m,this.expectedType=f,this._scope=_,this.options=b}parse(s,u,f,g,m={}){return u||f?this.concat(u,null,f,g)._parse(s,m):this._parse(s,m)}parseObjectValue(s,u,f,g,m,_={}){return this.concat(u,f,g,m)._parse(s,_)}_parse(s,u){function f(g,m,_){return _==="assert"?new Ho(m,[g]):_==="coerce"?new eu(m,[g]):g}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof s[0]=="string"?this.registry[s[0]]:void 0;if(g){let m=g.parse(s,this);if(!m)return null;if(this.expectedType){const _=this.expectedType,b=m.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||b.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(_,b))return null}else m=f(m,_,u.typeAnnotation||"coerce");else m=f(m,_,u.typeAnnotation||"assert")}if(!(m instanceof Ql)&&m.type.kind!=="resolvedImage"&&Hc(m)){const _=new zd(this._scope,this.options);try{m=new Ql(m.type,m.evaluate(_))}catch(b){return this.error(b.message),null}}return m}return eu.parse(["to-array",s],this)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,u,f,g){let m=typeof s=="number"?this.path.concat(s):this.path;m=typeof u=="string"?m.concat(u):m;const _=g?this.scope.concat(g):this.scope;return new ds(this.registry,m,f||null,_,this.errors,this._scope,this.options)}error(s,...u){const f=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new Hs(f,s))}checkSubtype(s,u){const f=Od(s,u);return f&&this.error(f),f}}var iu=ds;function Hc(h){if(h instanceof Xi)return Hc(h.boundExpression);if(h instanceof Ws&&h.name==="error"||h instanceof tu||h instanceof Su||h instanceof Pu||h instanceof Yu)return!1;const s=h instanceof eu||h instanceof Ho;let u=!0;return h.eachChild(f=>{u=s?u&&Hc(f):u&&f instanceof Ql}),!!u&&$o(h)&&ni(h,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function nl(h,s){const u=h.length-1;let f,g,m=0,_=u,b=0;for(;m<=_;)if(b=Math.floor((m+_)/2),f=h[b],g=h[b+1],f<=s){if(b===u||s<g)return b;m=b+1}else{if(!(f>s))throw new cs("Input is not a number.");_=b-1}return 0}class su{constructor(s,u,f){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(const[g,m]of f)this.labels.push(g),this.outputs.push(m)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(s[1],1,er);if(!f)return null;const g=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let _=1;_<s.length;_+=2){const b=_===1?-1/0:s[_],O=s[_+1],D=_,C=_+1;if(typeof b!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=b)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=u.parse(O,C,m);if(!V)return null;m=m||V.type,g.push([b,V])}return new su(m,f,g)}evaluate(s){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);const g=this.input.evaluate(s);if(g<=u[0])return f[0].evaluate(s);const m=u.length;return g>=u[m-1]?f[m-1].evaluate(s):f[nl(u,g)].evaluate(s)}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&s.push(this.labels[u]),s.push(this.outputs[u].serialize());return s}}const an=.95047,$c=1.08883,Il=4/29,ss=6/29,Tc=3*ss*ss,kd=ss*ss*ss,fi=Math.PI/180,Gh=180/Math.PI;function il(h){return h>kd?Math.pow(h,1/3):h/Tc+Il}function vl(h){return h>ss?h*h*h:Tc*(h-Il)}function Kc(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Eu(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Xu(h){const s=Eu(h.r),u=Eu(h.g),f=Eu(h.b),g=il((.4124564*s+.3575761*u+.1804375*f)/an),m=il((.2126729*s+.7151522*u+.072175*f)/1);return{l:116*m-16,a:500*(g-m),b:200*(m-il((.0193339*s+.119192*u+.9503041*f)/$c)),alpha:h.a}}function Cc(h){let s=(h.l+16)/116,u=isNaN(h.a)?s:s+h.a/500,f=isNaN(h.b)?s:s-h.b/200;return s=1*vl(s),u=an*vl(u),f=$c*vl(f),new En(Kc(3.2404542*u-1.5371385*s-.4985314*f),Kc(-.969266*u+1.8760108*s+.041556*f),Kc(.0556434*u-.2040259*s+1.0572252*f),h.alpha)}function em(h,s,u){const f=s-h;return h+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Zh={forward:Xu,reverse:Cc,interpolate:function(h,s,u){return{l:mr(h.l,s.l,u),a:mr(h.a,s.a,u),b:mr(h.b,s.b,u),alpha:mr(h.alpha,s.alpha,u)}}},qh={forward:function(h){const{l:s,a:u,b:f}=Xu(h),g=Math.atan2(f,u)*Gh;return{h:g<0?g+360:g,c:Math.sqrt(u*u+f*f),l:s,alpha:h.a}},reverse:function(h){const s=h.h*fi,u=h.c;return Cc({l:h.l,a:Math.cos(s)*u,b:Math.sin(s)*u,alpha:h.alpha})},interpolate:function(h,s,u){return{h:em(h.h,s.h,u),c:mr(h.c,s.c,u),l:mr(h.l,s.l,u),alpha:mr(h.alpha,s.alpha,u)}}};var sl=Object.freeze({__proto__:null,hcl:qh,lab:Zh});class Ji{constructor(s,u,f,g,m){this.type=s,this.operator=u,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[_,b]of m)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(s,u,f,g){let m=0;if(s.name==="exponential")m=Ri(u,s.base,f,g);else if(s.name==="linear")m=Ri(u,1,f,g);else if(s.name==="cubic-bezier"){const _=s.controlPoints;m=new kt(_[0],_[1],_[2],_[3]).solve(Ri(u,1,f,g))}return m}static parse(s,u){let[f,g,m,..._]=s;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some(C=>typeof C!="number"||C<0||C>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length-1>3&&(s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,er),!m)return null;const b=[];let O=null;f==="interpolate-hcl"||f==="interpolate-lab"?O=$s:u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType);for(let D=0;D<_.length;D+=2){const C=_[D],V=_[D+1],I=D+3,z=D+4;if(typeof C!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(b.length&&b[b.length-1][0]>=C)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const M=u.parse(V,z,O);if(!M)return null;O=O||M.type,b.push([C,M])}return O.kind==="number"||O.kind==="color"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new Ji(O,f,g,m,b):u.error(`Type ${Ei(O)} is not interpolatable.`)}evaluate(s){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);const g=this.input.evaluate(s);if(g<=u[0])return f[0].evaluate(s);const m=u.length;if(g>=u[m-1])return f[m-1].evaluate(s);const _=nl(u,g),b=Ji.interpolationFactor(this.interpolation,g,u[_],u[_+1]),O=f[_].evaluate(s),D=f[_+1].evaluate(s);return this.operator==="interpolate"?mh[this.type.kind.toLowerCase()](O,D,b):this.operator==="interpolate-hcl"?qh.reverse(qh.interpolate(qh.forward(O),qh.forward(D),b)):Zh.reverse(Zh.interpolate(Zh.forward(O),Zh.forward(D),b))}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,s,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function Ri(h,s,u,f){const g=f-u,m=h-u;return g===0?0:s===1?m/g:(Math.pow(s,m)-1)/(Math.pow(s,g)-1)}class ou{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expectected at least one argument.");let f=null;const g=u.expectedType;g&&g.kind!=="value"&&(f=g);const m=[];for(const b of s.slice(1)){const O=u.parse(b,1+m.length,f,void 0,{typeAnnotation:"omit"});if(!O)return null;f=f||O.type,m.push(O)}const _=g&&m.some(b=>Od(g,b.type));return new ou(_?pn:f,m)}evaluate(s){let u,f=null,g=0;for(const m of this.args){if(g++,f=m.evaluate(s),f&&f instanceof Ns&&!f.available&&(u||(u=f),f=null,g===this.args.length))return u;if(f!==null)break}return f}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class Nu{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const f=[];for(let m=1;m<s.length-1;m+=2){const _=s[m];if(typeof _!="string")return u.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=u.parse(s[m+1],m+1);if(!b)return null;f.push([_,b])}const g=u.parse(s[s.length-1],s.length-1,u.expectedType,f);return g?new Nu(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[u,f]of this.bindings)s.push(u,f.serialize());return s.push(this.result.serialize()),s}}class op{constructor(s,u,f){this.type=s,this.index=u,this.input=f}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,er),g=u.parse(s[2],2,Gi(u.expectedType||pn));return f&&g?new op(g.type.itemType,f,g):null}evaluate(s){const u=this.index.evaluate(s),f=this.input.evaluate(s);if(u<0)throw new cs(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new cs(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new cs(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Sc{constructor(s,u,f){this.type=s,this.index=u,this.input=f}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,er),g=u.parse(s[2],2,Gi(u.expectedType||pn));return f&&g?new Sc(g.type.itemType,f,g):null}evaluate(s){const u=this.index.evaluate(s),f=this.input.evaluate(s);if(u<0)throw new cs(`Array index out of bounds: ${u} < 0.`);if(u>f.length-1)throw new cs(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u===Math.floor(u))return f[u];const g=Math.floor(u),m=Math.ceil(u),_=f[g],b=f[m];if(typeof _!="number"||typeof b!="number")throw new cs(`Cannot interpolate between non-number values at index ${u}.`);const O=u-g;return _*(1-O)+b*O}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class xf{constructor(s,u){this.type=_n,this.needle=s,this.haystack=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,pn),g=u.parse(s[2],2,pn);return f&&g?gh(f.type,[_n,nn,er,mc,pn])?new xf(f,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(f.type)} instead`):null}evaluate(s){const u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(f==null)return!1;if(!gc(u,["boolean","string","number","null"]))throw new cs(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(Wi(u))} instead.`);if(!gc(f,["string","array"]))throw new cs(`Expected second argument to be of type array or string, but found ${Ei(Wi(f))} instead.`);return f.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ud{constructor(s,u,f){this.type=er,this.needle=s,this.haystack=u,this.fromIndex=f}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,pn),g=u.parse(s[2],2,pn);if(!f||!g)return null;if(!gh(f.type,[_n,nn,er,mc,pn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(f.type)} instead`);if(s.length===4){const m=u.parse(s[3],3,er);return m?new Ud(f,g,m):null}return new Ud(f,g)}evaluate(s){const u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!gc(u,["boolean","string","number","null"]))throw new cs(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(Wi(u))} instead.`);if(!gc(f,["string","array"]))throw new cs(`Expected second argument to be of type array or string, but found ${Ei(Wi(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(s);return f.indexOf(u,g)}return f.indexOf(u)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Hh{constructor(s,u,f,g,m,_){this.inputType=s,this.type=u,this.input=f,this.cases=g,this.outputs=m,this.otherwise=_}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let f,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const m={},_=[];for(let D=2;D<s.length-1;D+=2){let C=s[D];const V=s[D+1];Array.isArray(C)||(C=[C]);const I=u.concat(D);if(C.length===0)return I.error("Expected at least one branch label.");for(const M of C){if(typeof M!="number"&&typeof M!="string")return I.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return I.error("Numeric branch labels must be integer values.");if(f){if(I.checkSubtype(f,Wi(M)))return null}else f=Wi(M);if(m[String(M)]!==void 0)return I.error("Branch labels must be unique.");m[String(M)]=_.length}const z=u.parse(V,D,g);if(!z)return null;g=g||z.type,_.push(z)}const b=u.parse(s[1],1,pn);if(!b)return null;const O=u.parse(s[s.length-1],s.length-1,g);return O?b.type.kind!=="value"&&u.concat(1).checkSubtype(f,b.type)?null:new Hh(f,g,b,m,_,O):null}evaluate(s){const u=this.input.evaluate(s);return(Wi(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],g={};for(const _ of u){const b=g[this.cases[_]];b===void 0?(g[this.cases[_]]=f.length,f.push([this.cases[_],[_]])):f[b][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of f)s.push(b.length===1?m(b[0]):b.map(m)),s.push(this.outputs[_].serialize());return s.push(this.otherwise.serialize()),s}}class $h{constructor(s,u,f){this.type=s,this.branches=u,this.otherwise=f}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const g=[];for(let _=1;_<s.length-1;_+=2){const b=u.parse(s[_],_,_n);if(!b)return null;const O=u.parse(s[_+1],_+1,f);if(!O)return null;g.push([b,O]),f=f||O.type}const m=u.parse(s[s.length-1],s.length-1,f);return m?new $h(f,g,m):null}evaluate(s){for(const[u,f]of this.branches)if(u.evaluate(s))return f.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[u,f]of this.branches)s(u),s(f);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class Bd{constructor(s,u,f,g){this.type=s,this.input=u,this.beginIndex=f,this.endIndex=g}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,pn),g=u.parse(s[2],2,er);if(!f||!g)return null;if(!gh(f.type,[Gi(pn),nn,pn]))return u.error(`Expected first argument to be of type array or string, but found ${Ei(f.type)} instead`);if(s.length===4){const m=u.parse(s[3],3,er);return m?new Bd(f.type,f,g,m):null}return new Bd(f.type,f,g)}evaluate(s){const u=this.input.evaluate(s),f=this.beginIndex.evaluate(s);if(!gc(u,["string","array"]))throw new cs(`Expected first argument to be of type array or string, but found ${Ei(Wi(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(s);return u.slice(f,g)}return u.slice(f)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Pf(h,s){return h==="=="||h==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Qm(h,s,u,f){return f.compare(s,u)===0}function vh(h,s,u){const f=h!=="=="&&h!=="!=";return class pX{constructor(m,_,b){this.type=_n,this.lhs=m,this.rhs=_,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const b=m[0];let O=_.parse(m[1],1,pn);if(!O)return null;if(!Pf(b,O.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Ei(O.type)}'.`);let D=_.parse(m[2],2,pn);if(!D)return null;if(!Pf(b,D.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Ei(D.type)}'.`);if(O.type.kind!==D.type.kind&&O.type.kind!=="value"&&D.type.kind!=="value")return _.error(`Cannot compare types '${Ei(O.type)}' and '${Ei(D.type)}'.`);f&&(O.type.kind==="value"&&D.type.kind!=="value"?O=new Ho(D.type,[O]):O.type.kind!=="value"&&D.type.kind==="value"&&(D=new Ho(O.type,[D])));let C=null;if(m.length===4){if(O.type.kind!=="string"&&D.type.kind!=="string"&&O.type.kind!=="value"&&D.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(C=_.parse(m[3],3,qo),!C)return null}return new pX(O,D,C)}evaluate(m){const _=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(f&&this.hasUntypedArgument){const O=Wi(_),D=Wi(b);if(O.kind!==D.kind||O.kind!=="string"&&O.kind!=="number")throw new cs(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${O.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const O=Wi(_),D=Wi(b);if(O.kind!=="string"||D.kind!=="string")return s(m,_,b)}return this.collator?u(m,_,b,this.collator.evaluate(m)):s(m,_,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[h];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const qg=vh("==",function(h,s,u){return s===u},Qm),bc=vh("!=",function(h,s,u){return s!==u},function(h,s,u,f){return!Qm(0,s,u,f)}),Ju=vh("<",function(h,s,u){return s<u},function(h,s,u,f){return f.compare(s,u)<0}),Ou=vh(">",function(h,s,u){return s>u},function(h,s,u,f){return f.compare(s,u)>0}),Hg=vh("<=",function(h,s,u){return s<=u},function(h,s,u,f){return f.compare(s,u)<=0}),Kh=vh(">=",function(h,s,u){return s>=u},function(h,s,u,f){return f.compare(s,u)>=0});class _l{constructor(s,u,f,g,m,_){this.type=nn,this.number=s,this.locale=u,this.currency=f,this.unit=g,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(s,u){if(s.length!==3)return u.error("Expected two arguments.");const f=u.parse(s[1],1,er);if(!f)return null;const g=s[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let m=null;if(g.locale&&(m=u.parseObjectValue(g.locale,2,"locale",nn),!m))return null;let _=null;if(g.currency&&(_=u.parseObjectValue(g.currency,2,"currency",nn),!_))return null;let b=null;if(g.unit&&(b=u.parseObjectValue(g.unit,2,"unit",nn),!b))return null;let O=null;if(g["min-fraction-digits"]&&(O=u.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",er),!O))return null;let D=null;return g["max-fraction-digits"]&&(D=u.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",er),!D)?null:new _l(f,m,_,b,O,D)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class ol{constructor(s){this.type=er,this.input=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);const f=u.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Ei(f.type)} instead.`):new ol(f):null}evaluate(s){const u=this.input.evaluate(s);if(typeof u=="string"||Array.isArray(u))return u.length;throw new cs(`Expected value to be of type string or array, but found ${Ei(Wi(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(u=>{s.push(u.serialize())}),s}}function Wh(h){return function(){h=1831565813+(h|=0)|0;let s=Math.imul(h^h>>>15,1|h);return s=s+Math.imul(s^s>>>7,61|s)^s,((s^s>>>14)>>>0)/4294967296}}const jd={"==":qg,"!=":bc,">":Ou,"<":Ju,">=":Kh,"<=":Hg,array:Ho,at:op,"at-interpolated":Sc,boolean:Ho,case:$h,coalesce:ou,collator:tu,format:Vd,image:Tu,in:xf,"index-of":Ud,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:ol,let:Nu,literal:Ql,match:Hh,number:Ho,"number-format":_l,object:Ho,slice:Bd,step:su,string:Ho,"to-boolean":eu,"to-color":eu,"to-number":eu,"to-string":eu,var:Xi,within:Su,distance:Pu,config:Yu};function tm(h,[s,u,f,g]){s=s.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const m=g?g.evaluate(h):1,_=Vl(s,u,f,m);if(_)throw new cs(_);return new En(s/255*m,u/255*m,f/255*m,m)}function am(h,[s,u,f,g]){s=s.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const m=g?g.evaluate(h):1,_=function(D,C,V,I){return typeof D=="number"&&D>=0&&D<=360?typeof C=="number"&&C>=0&&C<=100&&typeof V=="number"&&V>=0&&V<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[D,C,V,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[D,C,V,I]:[D,C,V]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[D,C,V,I]:[D,C,V]).join(", ")}]: 'h' must be between 0 and 360.`}(s,u,f,m);if(_)throw new cs(_);const b=`hsla(${s}, ${u}%, ${f}%, ${m})`,O=En.parse(b);if(!O)throw new cs(`Failed to parse HSLA color: ${b}`);return O}function Wc(h,s){return h in s}function Ef(h,s){const u=s[h];return u===void 0?null:u}function ll(h){return{type:h}}function Gd(h){return{result:"success",value:h}}function Vu(h){return{result:"error",value:h}}function Zd(h,s){return!!h&&!!h.parameters&&h.parameters.indexOf(s)>-1}function Yc(h){return h["property-type"]==="data-driven"}function Ll(h){return Zd(h.expression,"measure-light")}function Qu(h){return Zd(h.expression,"zoom")}function Xc(h){return!!h.expression&&h.expression.interpolated}function lp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function qd(h){return h}function Jc(h,s){const u=s.type==="color",f=h.stops&&typeof h.stops[0][0]=="object",g=f||!(f||h.property!==void 0),m=h.type||(Xc(s)?"exponential":"interval");if(u&&((h=bn({},h)).stops&&(h.stops=h.stops.map(D=>[D[0],En.parse(D[1])])),h.default=En.parse(h.default?h.default:s.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!sl[h.colorSpace])throw new Error(`Unknown color space: ${h.colorSpace}`);let _,b,O;if(m==="exponential")_=Nf;else if(m==="interval")_=eg;else if(m==="categorical"){_=rm,b=Object.create(null);for(const D of h.stops)b[D[0]]=D[1];O=typeof h.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=nm}if(f){const D={},C=[];for(let z=0;z<h.stops.length;z++){const M=h.stops[z],B=M[0].zoom;D[B]===void 0&&(D[B]={zoom:B,type:h.type,property:h.property,default:h.default,stops:[]},C.push(B)),D[B].stops.push([M[0].value,M[1]])}const V=[];for(const z of C)V.push([D[z].zoom,Jc(D[z],s)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Ji.interpolationFactor.bind(void 0,I),zoomStops:V.map(z=>z[0]),evaluate:({zoom:z},M)=>Nf({stops:V,base:h.base},s,z).evaluate(z,M)}}if(g){const D=m==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Ji.interpolationFactor.bind(void 0,D),zoomStops:h.stops.map(C=>C[0]),evaluate:({zoom:C})=>_(h,s,C,b,O)}}return{kind:"source",evaluate(D,C){const V=C&&C.properties?C.properties[h.property]:void 0;return V===void 0?Bs(h.default,s.default):_(h,s,V,b,O)}}}function Bs(h,s,u){return h!==void 0?h:s!==void 0?s:u!==void 0?u:void 0}function rm(h,s,u,f,g){return Bs(typeof u===g?f[u]:void 0,h.default,s.default)}function eg(h,s,u){if(Cu(u)!=="number")return Bs(h.default,s.default);const f=h.stops.length;if(f===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[f-1][0])return h.stops[f-1][1];const g=nl(h.stops.map(m=>m[0]),u);return h.stops[g][1]}function Nf(h,s,u){const f=h.base!==void 0?h.base:1;if(Cu(u)!=="number")return Bs(h.default,s.default);const g=h.stops.length;if(g===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[g-1][0])return h.stops[g-1][1];const m=nl(h.stops.map(C=>C[0]),u),_=function(C,V,I,z){const M=z-I,B=C-I;return M===0?0:V===1?B/M:(Math.pow(V,B)-1)/(Math.pow(V,M)-1)}(u,f,h.stops[m][0],h.stops[m+1][0]),b=h.stops[m][1],O=h.stops[m+1][1];let D=mh[s.type]||qd;if(h.colorSpace&&h.colorSpace!=="rgb"){const C=sl[h.colorSpace];D=(V,I)=>C.reverse(C.interpolate(C.forward(V),C.forward(I),_))}return typeof b.evaluate=="function"?{evaluate(...C){const V=b.evaluate.apply(void 0,C),I=O.evaluate.apply(void 0,C);if(V!==void 0&&I!==void 0)return D(V,I,_)}}:D(b,O,_)}function nm(h,s,u){return s.type==="color"?u=En.parse(u):s.type==="formatted"?u=ms.fromString(u.toString()):s.type==="resolvedImage"?u=Ns.build(u.toString()):Cu(u)===s.type||s.type==="enum"&&s.values[u]||(u=void 0),Bs(u,h.default,s.default)}Ws.register(jd,{error:[{kind:"error"},[nn],(h,[s])=>{throw new cs(s.evaluate(h))}],typeof:[nn,[pn],(h,[s])=>Ei(Wi(s.evaluate(h)))],"to-rgba":[Gi(er,4),[$s],(h,[s])=>s.evaluate(h).toRenderColor(null).toArray()],"to-hsla":[Gi(er,4),[$s],(h,[s])=>s.evaluate(h).toRenderColor(null).toHslaArray()],rgb:[$s,[er,er,er],tm],rgba:[$s,[er,er,er,er],tm],hsl:[$s,[er,er,er],am],hsla:[$s,[er,er,er,er],am],has:{type:_n,overloads:[[[nn],(h,[s])=>Wc(s.evaluate(h),h.properties())],[[nn,Nd],(h,[s,u])=>Wc(s.evaluate(h),u.evaluate(h))]]},get:{type:pn,overloads:[[[nn],(h,[s])=>Ef(s.evaluate(h),h.properties())],[[nn,Nd],(h,[s,u])=>Ef(s.evaluate(h),u.evaluate(h))]]},"feature-state":[pn,[nn],(h,[s])=>Ef(s.evaluate(h),h.featureState||{})],properties:[Nd,[],h=>h.properties()],"geometry-type":[nn,[],h=>h.geometryType()],id:[pn,[],h=>h.id()],zoom:[er,[],h=>h.globals.zoom],pitch:[er,[],h=>h.globals.pitch||0],"distance-from-center":[er,[],h=>h.distanceFromCenter()],"measure-light":[er,[nn],(h,[s])=>h.measureLight(s.evaluate(h))],"heatmap-density":[er,[],h=>h.globals.heatmapDensity||0],"line-progress":[er,[],h=>h.globals.lineProgress||0],"raster-value":[er,[],h=>h.globals.rasterValue||0],"raster-particle-speed":[er,[],h=>h.globals.rasterParticleSpeed||0],"sky-radial-progress":[er,[],h=>h.globals.skyRadialProgress||0],accumulated:[pn,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[er,ll(er),(h,s)=>{let u=0;for(const f of s)u+=f.evaluate(h);return u}],"*":[er,ll(er),(h,s)=>{let u=1;for(const f of s)u*=f.evaluate(h);return u}],"-":{type:er,overloads:[[[er,er],(h,[s,u])=>s.evaluate(h)-u.evaluate(h)],[[er],(h,[s])=>-s.evaluate(h)]]},"/":[er,[er,er],(h,[s,u])=>s.evaluate(h)/u.evaluate(h)],"%":[er,[er,er],(h,[s,u])=>s.evaluate(h)%u.evaluate(h)],ln2:[er,[],()=>Math.LN2],pi:[er,[],()=>Math.PI],e:[er,[],()=>Math.E],"^":[er,[er,er],(h,[s,u])=>Math.pow(s.evaluate(h),u.evaluate(h))],sqrt:[er,[er],(h,[s])=>Math.sqrt(s.evaluate(h))],log10:[er,[er],(h,[s])=>Math.log(s.evaluate(h))/Math.LN10],ln:[er,[er],(h,[s])=>Math.log(s.evaluate(h))],log2:[er,[er],(h,[s])=>Math.log(s.evaluate(h))/Math.LN2],sin:[er,[er],(h,[s])=>Math.sin(s.evaluate(h))],cos:[er,[er],(h,[s])=>Math.cos(s.evaluate(h))],tan:[er,[er],(h,[s])=>Math.tan(s.evaluate(h))],asin:[er,[er],(h,[s])=>Math.asin(s.evaluate(h))],acos:[er,[er],(h,[s])=>Math.acos(s.evaluate(h))],atan:[er,[er],(h,[s])=>Math.atan(s.evaluate(h))],min:[er,ll(er),(h,s)=>Math.min(...s.map(u=>u.evaluate(h)))],max:[er,ll(er),(h,s)=>Math.max(...s.map(u=>u.evaluate(h)))],abs:[er,[er],(h,[s])=>Math.abs(s.evaluate(h))],round:[er,[er],(h,[s])=>{const u=s.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[er,[er],(h,[s])=>Math.floor(s.evaluate(h))],ceil:[er,[er],(h,[s])=>Math.ceil(s.evaluate(h))],"filter-==":[_n,[nn,pn],(h,[s,u])=>h.properties()[s.value]===u.value],"filter-id-==":[_n,[pn],(h,[s])=>h.id()===s.value],"filter-type-==":[_n,[nn],(h,[s])=>h.geometryType()===s.value],"filter-<":[_n,[nn,pn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f<g}],"filter-id-<":[_n,[pn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u<f}],"filter->":[_n,[nn,pn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f>g}],"filter-id->":[_n,[pn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u>f}],"filter-<=":[_n,[nn,pn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[_n,[pn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u<=f}],"filter->=":[_n,[nn,pn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[_n,[pn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u>=f}],"filter-has":[_n,[pn],(h,[s])=>s.value in h.properties()],"filter-has-id":[_n,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[_n,[Gi(nn)],(h,[s])=>s.value.indexOf(h.geometryType())>=0],"filter-id-in":[_n,[Gi(pn)],(h,[s])=>s.value.indexOf(h.id())>=0],"filter-in-small":[_n,[nn,Gi(pn)],(h,[s,u])=>u.value.indexOf(h.properties()[s.value])>=0],"filter-in-large":[_n,[nn,Gi(pn)],(h,[s,u])=>function(f,g,m,_){for(;m<=_;){const b=m+_>>1;if(g[b]===f)return!0;g[b]>f?_=b-1:m=b+1}return!1}(h.properties()[s.value],u.value,0,u.value.length-1)],all:{type:_n,overloads:[[[_n,_n],(h,[s,u])=>s.evaluate(h)&&u.evaluate(h)],[ll(_n),(h,s)=>{for(const u of s)if(!u.evaluate(h))return!1;return!0}]]},any:{type:_n,overloads:[[[_n,_n],(h,[s,u])=>s.evaluate(h)||u.evaluate(h)],[ll(_n),(h,s)=>{for(const u of s)if(u.evaluate(h))return!0;return!1}]]},"!":[_n,[_n],(h,[s])=>!s.evaluate(h)],"is-supported-script":[_n,[nn],(h,[s])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(s.evaluate(h))}],upcase:[nn,[nn],(h,[s])=>s.evaluate(h).toUpperCase()],downcase:[nn,[nn],(h,[s])=>s.evaluate(h).toLowerCase()],concat:[nn,ll(pn),(h,s)=>s.map(u=>Ks(u.evaluate(h))).join("")],"resolved-locale":[nn,[qo],(h,[s])=>s.evaluate(h).resolvedLocale()],random:[er,[er,er,pn],(h,s)=>{const[u,f,g]=s.map(_=>_.evaluate(h));if(u>f||u===f)return u;let m;if(typeof g=="string")m=function(_){let b=0;if(_.length===0)return b;for(let O=0;O<_.length;O++)b=(b<<5)-b+_.charCodeAt(O),b|=0;return b}(g);else{if(typeof g!="number")throw new cs(`Invalid seed input: ${g}`);m=g}return u+Wh(m)()*(f-u)}]});class oo{constructor(s,u,f,g){this.expression=s,this._warningHistory={},this._evaluator=new zd(f,g),this._defaultValue=u?function(m){return m.type==="color"&&(lp(m.default)||Array.isArray(m.default))?new En(0,0,0,0):m.type==="color"?En.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=Qn(s)}evaluateWithoutErrorHandling(s,u,f,g,m,_,b,O){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=O||null,this.expression.evaluate(this._evaluator)}evaluate(s,u,f,g,m,_,b,O){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=O||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new cs(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${D.message}`)),this._defaultValue}}}function Yh(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in jd}function G(h,s,u,f){const g=new iu(jd,[],s?function(_){const b={color:$s,string:nn,number:er,enum:nn,boolean:_n,formatted:Ru,resolvedImage:Es};return _.type==="array"?Gi(b[_.value]||pn,_.length):b[_.type]}(s):void 0,void 0,void 0,u,f),m=g.parse(h,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Gd(new oo(m,s,u,f)):Vu(g.errors)}class Q{constructor(s,u,f,g){this.kind=s,this._styleExpression=u,this.isLightConstant=f,this.isLineProgressConstant=g,this.isStateDependent=s!=="constant"&&!gs(u.expression),this.configDependencies=Qn(u.expression)}evaluateWithoutErrorHandling(s,u,f,g,m,_){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,g,m,_)}evaluate(s,u,f,g,m,_){return this._styleExpression.evaluate(s,u,f,g,m,_)}}class ye{constructor(s,u,f,g,m,_){this.kind=s,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!gs(u.expression),this.isLightConstant=m,this.isLineProgressConstant=_,this.configDependencies=Qn(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(s,u,f,g,m,_){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,g,m,_)}evaluate(s,u,f,g,m,_){return this._styleExpression.evaluate(s,u,f,g,m,_)}interpolationFactor(s,u,f){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,s,u,f):0}}function De(h,s,u,f){if((h=G(h,s,u,f)).result==="error")return h;const g=h.value.expression,m=$o(g);if(!m&&!Yc(s))return Vu([new Hs("","data expressions not supported")]);const _=ni(g,["zoom","pitch","distance-from-center"]);if(!_&&!Qu(s))return Vu([new Hs("","zoom expressions not supported")]);const b=ni(g,["measure-light"]);if(!b&&!Ll(s))return Vu([new Hs("","measure-light expression not supported")]);const O=ni(g,["line-progress"]);if(!O&&!function(V){return Zd(V.expression,"line-progress")}(s))return Vu([new Hs("","line-progress expression not supported")]);const D=s.expression&&s.expression.relaxZoomRestriction,C=rt(g);return C||_||D?C instanceof Hs?Vu([C]):C instanceof Ji&&!Xc(s)?Vu([new Hs("",'"interpolate" expressions cannot be used with this property')]):Gd(C?new ye(m&&O?"camera":"composite",h.value,C.labels,C instanceof Ji?C.interpolation:void 0,b,O):new Q(m&&O?"constant":"source",h.value,b,O)):Vu([new Hs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Ke{constructor(s,u){this._parameters=s,this._specification=u,bn(this,Jc(this._parameters,this._specification))}static deserialize(s){return new Ke(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function rt(h){let s=null;if(h instanceof Nu)s=rt(h.result);else if(h instanceof ou){for(const u of h.args)if(s=rt(u),s)break}else(h instanceof su||h instanceof Ji)&&h.input instanceof Ws&&h.input.name==="zoom"&&(s=h);return s instanceof Hs||h.eachChild(u=>{const f=rt(u);f instanceof Hs?s=f:s&&f&&s!==f&&(s=new Hs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}var it,dt,mt=function(){if(dt)return it;dt=1,it=s;var h=3;function s(u,f,g){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var _=new Int32Array(this.arrayBuffer);u=_[0],this.d=(f=_[1])+2*(g=_[2]);for(var b=0;b<this.d*this.d;b++){var O=_[h+b],D=_[h+b+1];m.push(O===D?null:_.subarray(O,D))}var C=_[h+m.length+1];this.keys=_.subarray(_[h+m.length],C),this.bboxes=_.subarray(C),this.insert=this._insertReadonly}else{this.d=f+2*g;for(var V=0;V<this.d*this.d;V++)m.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=g,this.scale=f/u,this.uid=0;var I=g/f*u;this.min=-I,this.max=u+I}return s.prototype.insert=function(u,f,g,m,_){this._forEachCell(f,g,m,_,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(m),this.bboxes.push(_)},s.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},s.prototype._insertCell=function(u,f,g,m,_,b){this.cells[_].push(b)},s.prototype.query=function(u,f,g,m,_){var b=this.min,O=this.max;if(u<=b&&f<=b&&O<=g&&O<=m&&!_)return Array.prototype.slice.call(this.keys);var D=[];return this._forEachCell(u,f,g,m,this._queryCell,D,{},_),D},s.prototype._queryCell=function(u,f,g,m,_,b,O,D){var C=this.cells[_];if(C!==null)for(var V=this.keys,I=this.bboxes,z=0;z<C.length;z++){var M=C[z];if(O[M]===void 0){var B=4*M;(D?D(I[B+0],I[B+1],I[B+2],I[B+3]):u<=I[B+2]&&f<=I[B+3]&&g>=I[B+0]&&m>=I[B+1])?(O[M]=!0,b.push(V[M])):O[M]=!1}}},s.prototype._forEachCell=function(u,f,g,m,_,b,O,D){for(var C=this._convertToCellCoord(u),V=this._convertToCellCoord(f),I=this._convertToCellCoord(g),z=this._convertToCellCoord(m),M=C;M<=I;M++)for(var B=V;B<=z;B++){var J=this.d*B+M;if((!D||D(this._convertFromCellCoord(M),this._convertFromCellCoord(B),this._convertFromCellCoord(M+1),this._convertFromCellCoord(B+1)))&&_.call(this,u,f,g,m,J,b,O,D))return}},s.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},s.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},s.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,f=h+this.cells.length+1+1,g=0,m=0;m<this.cells.length;m++)g+=this.cells[m].length;var _=new Int32Array(f+g+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var b=f,O=0;O<u.length;O++){var D=u[O];_[h+O]=b,_.set(D,b),b+=D.length}return _[h+u.length]=b,_.set(this.keys,b),_[h+u.length+1]=b+=this.keys.length,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer},it}(),St=v(mt);const ea={};function Pt(h,s,u={}){Object.defineProperty(h,"_classRegistryKey",{value:s,writable:!1}),ea[s]={klass:h,omit:u.omit||[]}}Pt(Object,"Object"),St.serialize=function(h,s){const u=h.toArrayBuffer();return s&&s.add(u),{buffer:u}},St.deserialize=function(h){return new St(h.buffer)},Object.defineProperty(St,"name",{value:"Grid"}),Pt(St,"Grid"),typeof DOMMatrix<"u"&&Pt(DOMMatrix,"DOMMatrix"),Pt(En,"Color"),Pt(Error,"Error"),Pt(ms,"Formatted"),Pt(al,"FormattedSection"),Pt(qs,"AJAXError"),Pt(Ns,"ResolvedImage"),Pt(Ke,"StylePropertyFunction"),Pt(oo,"StyleExpression",{omit:["_evaluator"]}),Pt(Zo,"ImageId"),Pt(Wu,"ImageVariant"),Pt(ye,"ZoomDependentExpression"),Pt(Q,"ZoomConstantExpression"),Pt(Ws,"CompoundExpression",{omit:["_evaluate"]});for(const h in jd)ea[jd[h]._classRegistryKey]||Pt(jd[h],`Expression${h}`);function _a(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function na(h){return self.ImageBitmap&&h instanceof ImageBitmap}function Ra(h,s){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(_a(h)||na(h))return s&&s.add(h),h;if(ArrayBuffer.isView(h))return s&&s.add(h.buffer),h;if(h instanceof ImageData)return s&&s.add(h.data.buffer),h;if(Array.isArray(h)){const u=[];for(const f of h)u.push(Ra(f,s));return u}if(h instanceof Map){const u={$name:"Map",entries:[]};for(const[f,g]of h.entries())u.entries.push(Ra(f),Ra(g));return u}if(h instanceof Set){const u={$name:"Set"};let f=0;for(const g of h.values())u[++f]=Ra(g);return u}if(h instanceof DOMMatrix){const u={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const g of f)u[g]=h[g];return u}if(typeof h=="bigint")return{$name:"BigInt",value:h.toString()};if(typeof h=="object"){const u=h.constructor,f=u._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const g=u.serialize?u.serialize(h,s):{};if(!u.serialize){for(const m in h)h.hasOwnProperty(m)&&(ea[f].omit.indexOf(m)>=0||(g[m]=Ra(h[m],s)));h instanceof Error&&(g.message=h.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof h)}function fa(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||_a(h)||na(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(fa);if(typeof h=="object"){const s=h.$name||"Object";if(s==="Map"){const g=h.entries||[],m=new Map;for(let _=0;_<g.length;_+=2)m.set(fa(g[_]),fa(g[_+1]));return m}if(s==="Set"){const g=new Set;for(const m of Object.keys(h))m!=="$name"&&g.add(fa(h[m]));return g}if(s==="DOMMatrix"){let g;return g=h.is2D?[h.a,h.b,h.c,h.d,h.e,h.f]:[h.m11,h.m12,h.m13,h.m14,h.m21,h.m22,h.m23,h.m24,h.m31,h.m32,h.m33,h.m34,h.m41,h.m42,h.m43,h.m44],new DOMMatrix(g)}if(s==="BigInt")return BigInt(h.value);const{klass:u}=ea[s];if(!u)throw new Error(`Can't deserialize unregistered class "${s}".`);if(u.deserialize)return u.deserialize(h);const f=Object.create(u.prototype);for(const g of Object.keys(h))g!=="$name"&&(f[g]=fa(h[g]));return f}throw new Error("can't deserialize object of type "+typeof h)}const Rt={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519,Osage:h=>h>=66736&&h<=66815,"CJK Unified Ideographs Extension B":h=>h>=131072&&h<=173791};function aa(h){for(const s of h)if(Ha(s.charCodeAt(0)))return!0;return!1}function Ga(h){for(const s of h)if(!Ya(s.charCodeAt(0)))return!1;return!0}function Ya(h){return!(Rt.Arabic(h)||Rt["Arabic Supplement"](h)||Rt["Arabic Extended-A"](h)||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h))}function Ha(h){return!(h!==746&&h!==747&&(h<4352||!(Rt["Bopomofo Extended"](h)||Rt.Bopomofo(h)||Rt["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Rt["CJK Compatibility Ideographs"](h)||Rt["CJK Compatibility"](h)||Rt["CJK Radicals Supplement"](h)||Rt["CJK Strokes"](h)||!(!Rt["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Rt["CJK Unified Ideographs Extension A"](h)||Rt["CJK Unified Ideographs"](h)||Rt["Enclosed CJK Letters and Months"](h)||Rt["Hangul Compatibility Jamo"](h)||Rt["Hangul Jamo Extended-A"](h)||Rt["Hangul Jamo Extended-B"](h)||Rt["Hangul Jamo"](h)||Rt["Hangul Syllables"](h)||Rt.Hiragana(h)||Rt["Ideographic Description Characters"](h)||Rt.Kanbun(h)||Rt["Kangxi Radicals"](h)||Rt["Katakana Phonetic Extensions"](h)||Rt.Katakana(h)&&h!==12540||!(!Rt["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Rt["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Rt["Unified Canadian Aboriginal Syllabics"](h)||Rt["Unified Canadian Aboriginal Syllabics Extended"](h)||Rt["Vertical Forms"](h)||Rt["Yijing Hexagram Symbols"](h)||Rt["Yi Syllables"](h)||Rt["Yi Radicals"](h))))}function xr(h){return!(Ha(h)||function(s){return!!(Rt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Rt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Rt["Letterlike Symbols"](s)||Rt["Number Forms"](s)||Rt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Rt["Control Pictures"](s)&&s!==9251||Rt["Optical Character Recognition"](s)||Rt["Enclosed Alphanumerics"](s)||Rt["Geometric Shapes"](s)||Rt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Rt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Rt["CJK Symbols and Punctuation"](s)||Rt.Katakana(s)||Rt["Private Use Area"](s)||Rt["CJK Compatibility Forms"](s)||Rt["Small Form Variants"](s)||Rt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(h))}function gr(h){return Rt.Arabic(h)||Rt["Arabic Supplement"](h)||Rt["Arabic Extended-A"](h)||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h)}function sn(h){return h>=1424&&h<=2303||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h)}function hr(h,s){return!(!s&&sn(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Rt.Khmer(h))}function Ti(h){for(const s of h)if(sn(s.charCodeAt(0)))return!0;return!1}const Ni="deferred",$n="loading",ii="loaded";let Qi=null,jn="unavailable",wn=null;const ys=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(jn="error"),Qi&&Qi(h)};function Zi(){Gn.fire(new Go("pluginStateChange",{pluginStatus:jn,pluginURL:wn}))}const Gn=new Jl,_o=function(){return jn},Ci=function(){if(jn!==Ni||!wn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");jn=$n,Zi(),wn&&Mi({url:wn},h=>{h?ys(h):(jn=ii,Zi())})},hs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>jn===ii||hs.applyArabicShaping!=null,isLoading:()=>jn===$n,setState(h){jn=h.pluginStatus,wn=h.pluginURL},isParsed:()=>hs.applyArabicShaping!=null&&hs.processBidirectionalText!=null&&hs.processStyledBidirectionalText!=null,getPluginURL:()=>wn};class Rn{constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(s){return function(u,f){for(const g of u)if(!hr(g.charCodeAt(0),f))return!1;return!0}(s,hs.isLoaded())}}class Bi{constructor(s,u,f,g){this.property=s,this.value=u,this.expression=function(m,_,b,O){if(lp(m))return new Ke(m,_);if(Yh(m)||Array.isArray(m)&&m.length>0){const D=De(m,_,b,O);if(D.result==="error")throw new Error(D.value.map(C=>`${C.key}: ${C.message}`).join(", "));return D.value}{let D=m;return typeof m=="string"&&_.type==="color"&&(D=En.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>D}}}(u===void 0?s.specification.default:u,s.specification,f,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,u,f){return this.property.possiblyEvaluate(this,s,u,f)}}class Xs{constructor(s,u,f){this.property=s,this.value=new Bi(s,void 0,u,f)}transitioned(s,u){return new ul(this.property,this.value,u,fn({},s.transition,this.transition),s.now)}untransitioned(){return new ul(this.property,this.value,null,{},0)}}class Eo{constructor(s,u,f){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(s){return Sn(this._values[s].value.value)}setValue(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Xs(this._values[s].property,this._scope,this._options)),this._values[s].value=new Bi(this._values[s].property,u===null?void 0:Sn(u),this._scope,this._options),this._values[s].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].value.expression.configDependencies]))}setTransitionOrValue(s,u){u&&(this._options=u);const f=this._properties.properties;if(s)for(const g in s){const m=s[g];if(g.endsWith("-transition")){const _=g.slice(0,-11);f[_]&&this.setTransition(_,m)}else f.hasOwnProperty(g)&&this.setValue(g,m)}}getTransition(s){return Sn(this._values[s].transition)}setTransition(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Xs(this._values[s].property)),this._values[s].transition=Sn(u)||void 0}serialize(){const s={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(s[u]=f);const g=this.getTransition(u);g!==void 0&&(s[`${u}-transition`]=g)}return s}transitioned(s,u){const f=new Fl(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(s,u._values[g]);return f}untransitioned(){const s=new Fl(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class ul{constructor(s,u,f,g,m){const _=g.delay||0,b=g.duration||0;m=m||0,this.property=s,this.value=u,this.begin=m+_,this.end=this.begin+b,s.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(s,u,f){const g=s.now||0,m=this.value.possiblyEvaluate(s,u,f),_=this.prior;if(_){if(g>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(g<this.begin)return _.possiblyEvaluate(s,u,f);{const b=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(s,u,f),m,cr(b))}}return m}}class Fl{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,f){const g=new zu(this._properties);for(const m of Object.keys(this._values))g._values[m]=this._values[m].possiblyEvaluate(s,u,f);return g}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Ds{constructor(s,u,f){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(s){return Sn(this._values[s].value)}setValue(s,u){this._values[s]=new Bi(this._values[s].property,u===null?void 0:Sn(u),this._scope,this._options),this._values[s].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].expression.configDependencies]))}serialize(){const s={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(s[u]=f)}return s}possiblyEvaluate(s,u,f){const g=new zu(this._properties);for(const m of Object.keys(this._values))g._values[m]=this._values[m].possiblyEvaluate(s,u,f);return g}}class kl{constructor(s,u,f){this.property=s,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,u,f,g){return this.property.evaluate(this.value,this.parameters,s,u,f,g)}}class zu{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class ba{constructor(s){this.specification=s}possiblyEvaluate(s,u){return s.expression.evaluate(u)}interpolate(s,u,f){const g=mh[this.specification.type];return g?g(s,u,f):s}}class Ua{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,f,g){return new kl(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},f,g)}:s.expression,u)}interpolate(s,u,f){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new kl(this,{kind:"constant",value:void 0},s.parameters);const g=mh[this.specification.type];return g?new kl(this,{kind:"constant",value:g(s.value.value,u.value.value,f)},s.parameters):s}evaluate(s,u,f,g,m,_){return s.kind==="constant"?s.value:s.evaluate(u,f,g,m,_)}}class es{constructor(s){this.specification=s}possiblyEvaluate(s,u,f,g){return!!s.expression.evaluate(u,null,{},f,g)}interpolate(){return!1}}class Ii{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new Rn(0,{});for(const f in s){const g=s[f];g.specification.overridable&&this.overridableProperties.push(f);const m=this.defaultPropertyValues[f]=new Bi(g,void 0),_=this.defaultTransitionablePropertyValues[f]=new Xs(g);this.defaultTransitioningPropertyValues[f]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=m.possiblyEvaluate(u)}}}Pt(Ua,"DataDrivenProperty"),Pt(ba,"DataConstantProperty"),Pt(es,"ColorRampProperty");var Zt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"iconsets":{"experimental":true,"type":"iconsets"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":1}},"url":{"required":true,"type":"string"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":1}},"source":{"required":true,"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","experimental":true,"private":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","experimental":true,"private":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function im(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function _h(h){if(Array.isArray(h))return h.map(_h);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const s={};for(const u in h)s[u]=_h(h[u]);return s}return im(h)}function wh(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const s of h.slice(1))if(!wh(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}function Rh(h,s="",u=null,f="fill"){if(h==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};wh(h)||(h=Ch(h));const g=h;let m=!0;try{m=function(C){if(!ec(C))return C;let V=_h(C);return Th(V),V=Du(V),V}(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let _=null,b=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){b=Zt[`filter_${f}`];const C=G(m,b,s,u);if(C.result==="error")throw new Error(C.value.map(V=>`${V.key}: ${V.message}`).join(", "));_=(V,I,z)=>C.value.evaluate(V,I,{},z)}let O=null,D=null;if(m!==g){const C=G(g,b,s,u);if(C.result==="error")throw new Error(C.value.map(V=>`${V.key}: ${V.message}`).join(", "));O=(V,I,z,M,B)=>C.value.evaluate(V,I,{},z,void 0,void 0,M,B),D=!$o(C.value.expression)}return{filter:_,dynamicFilter:O||void 0,needGeometry:ag(m),needFeature:!!D}}function Du(h){if(!Array.isArray(h))return h;const s=function(u){if(tg.has(u[0])){for(let f=1;f<u.length;f++)if(ec(u[f]))return!0}return u}(h);return s===!0?s:s.map(u=>Du(u))}function Th(h){let s=!1;const u=[];if(h[0]==="case"){for(let f=1;f<h.length-1;f+=2)s=s||ec(h[f]),u.push(h[f+1]);u.push(h[h.length-1])}else if(h[0]==="match"){s=s||ec(h[1]);for(let f=2;f<h.length-1;f+=2)u.push(h[f+1]);u.push(h[h.length-1])}else if(h[0]==="step"){s=s||ec(h[1]);for(let f=1;f<h.length-1;f+=2)u.push(h[f+1])}s&&(h.length=0,h.push("any",...u));for(let f=1;f<h.length;f++)Th(h[f])}function ec(h){if(!Array.isArray(h))return!1;if((s=h[0])==="pitch"||s==="distance-from-center")return!0;var s;for(let u=1;u<h.length;u++)if(ec(h[u]))return!0;return!1}const tg=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function up(h,s){return h<s?-1:h>s?1:0}function ag(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let s=1;s<h.length;s++)if(ag(h[s]))return!0;return!1}function Ch(h){if(!h)return!0;const s=h[0];return h.length<=1?s!=="any":s==="=="?Ul(h[1],h[2],"=="):s==="!="?ed(Ul(h[1],h[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Ul(h[1],h[2],s):s==="any"?(u=h.slice(1),["any"].concat(u.map(Ch))):s==="all"?["all"].concat(h.slice(1).map(Ch)):s==="none"?["all"].concat(h.slice(1).map(Ch).map(ed)):s==="in"?Xh(h[1],h.slice(2)):s==="!in"?ed(Xh(h[1],h.slice(2))):s==="has"?Qc(h[1]):s!=="!has"||ed(Qc(h[1]));var u}function Ul(h,s,u){switch(h){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,h,s]}}function Xh(h,s){if(s.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",h,["literal",s.sort(up)]]:["filter-in-small",h,["literal",s]]}}function Qc(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function ed(h){return["!",h]}const cp="";function td(h,s){return s?`${h}${cp}${s}`:h}const cl="-transition",rg=new Set(["fill","line","background","hillshade","raster"]);class lo extends Jl{constructor(s,u,f,g,m){if(super(),this.id=s.id,this.fqid=td(this.id,f),this.type=s.type,this.scope=f,this.lut=g,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,s.type!=="custom"){if(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type&&s.type!=="background"&&s.type!=="sky"&&s.type!=="slot"){this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter;const _=G(this.filter,Zt[`filter_${s.type}`]);_.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,..._.value.configDependencies]))}if(s.slot&&(this.slot=s.slot),u.layout&&(this._unevaluatedLayout=new Ds(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new Eo(u.paint,this.scope,m);for(const _ in s.paint)this.setPaintProperty(_,s.paint[_]);for(const _ in s.layout)this.setLayoutProperty(_,s.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zu(u.paint)}}}onAdd(s){}onRemove(s){}isDraped(s){return!this.is3D(!0)&&rg.has(this.type)}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u){if(this.type==="custom"&&s==="visibility")return void(this.visibility=u);const f=this._unevaluatedLayout;f._properties.properties[s]&&(f.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),s==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(s){return s.endsWith(cl)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u){const f=this._transitionablePaint,g=f._properties.properties;if(s.endsWith(cl)){const V=s.slice(0,-11);return g[V]&&f.setTransition(V,u||void 0),!1}if(!g[s])return!1;const m=f._values[s],_=m.value.isDataDriven(),b=m.value;f.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(s);const O=f._values[s].value,D=O.isDataDriven(),C=s.endsWith("pattern")||s==="line-dasharray";return D||_||C||this._handleOverridablePaintPropertyUpdate(s,b,O)}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getDefaultProgramParams(s,u,f){return null}_handleOverridablePaintPropertyUpdate(s,u,f){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){return Mn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(s,u)=>!(s===void 0||u==="layout"&&!Object.keys(s).length||u==="paint"&&!Object.keys(s).length))}is3D(s){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const s in this.paint._values){const u=this.paint.get(s);if(u instanceof kl&&Yc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(s){this._filterCompiled||(this._featureFilter=Rh(this.filter,this.scope,s),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(s){this._stats&&(s.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(s){}queryIntersectsFeature(s,u,f,g,m,_,b,O,D){}}const $g={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Sh{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class si{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.add(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...s){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...s){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Nn(h,s=1){let u=0,f=0;return{members:h.map(g=>{const m=$g[g.type].BYTES_PER_ELEMENT,_=u=dp(u,Math.max(s,m)),b=g.components||1;return f=Math.max(f,m),u+=m*b,{name:g.name,type:g.type,components:b,offset:_}}),size:dp(u,Math.max(f,s)),alignment:s}}function dp(h,s){return Math.ceil(h/s)*s}class Mu extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.int16[g+0]=u,this.int16[g+1]=f,s}}Mu.prototype.bytesPerElement=4,Pt(Mu,"StructArrayLayout2i4");class Hd extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=g,s}}Hd.prototype.bytesPerElement=6,Pt(Hd,"StructArrayLayout3i6");class Iu extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.int16[_+0]=u,this.int16[_+1]=f,this.int16[_+2]=g,this.int16[_+3]=m,s}}Iu.prototype.bytesPerElement=8,Pt(Iu,"StructArrayLayout4i8");class ad extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}ad.prototype.bytesPerElement=4,Pt(ad,"StructArrayLayout1f4");class Of extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=4*s,_=2*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.float32[_+1]=g,s}}Of.prototype.bytesPerElement=8,Pt(Of,"StructArrayLayout2i1f8");class Jh extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=4*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=g,s}}Jh.prototype.bytesPerElement=8,Pt(Jh,"StructArrayLayout3i8");class Bl extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=5*s;return this.int16[b+0]=u,this.int16[b+1]=f,this.int16[b+2]=g,this.int16[b+3]=m,this.int16[b+4]=_,s}}Bl.prototype.bytesPerElement=10,Pt(Bl,"StructArrayLayout5i10");class Vf extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=6*s,C=12*s,V=3*s;return this.int16[D+0]=u,this.int16[D+1]=f,this.uint8[C+4]=g,this.uint8[C+5]=m,this.uint8[C+6]=_,this.uint8[C+7]=b,this.float32[V+2]=O,s}}Vf.prototype.bytesPerElement=12,Pt(Vf,"StructArrayLayout2i4ub1f12");class No extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.float32[m+0]=u,this.float32[m+1]=f,this.float32[m+2]=g,s}}No.prototype.bytesPerElement=12,Pt(No,"StructArrayLayout3f12");class $d extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=6*s,O=3*s;return this.uint16[b+0]=u,this.uint16[b+1]=f,this.uint16[b+2]=g,this.uint16[b+3]=m,this.float32[O+2]=_,s}}$d.prototype.bytesPerElement=12,Pt($d,"StructArrayLayout4ui1f12");class hp extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.uint16[_+0]=u,this.uint16[_+1]=f,this.uint16[_+2]=g,this.uint16[_+3]=m,s}}hp.prototype.bytesPerElement=8,Pt(hp,"StructArrayLayout4ui8");class fp extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=6*s;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=g,this.int16[O+3]=m,this.int16[O+4]=_,this.int16[O+5]=b,s}}fp.prototype.bytesPerElement=12,Pt(fp,"StructArrayLayout6i12");class bh extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I){const z=this.length;return this.resize(z+1),this.emplace(z,s,u,f,g,m,_,b,O,D,C,V,I)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z){const M=12*s;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=g,this.int16[M+3]=m,this.uint16[M+4]=_,this.uint16[M+5]=b,this.uint16[M+6]=O,this.uint16[M+7]=D,this.int16[M+8]=C,this.int16[M+9]=V,this.int16[M+10]=I,this.int16[M+11]=z,s}}bh.prototype.bytesPerElement=24,Pt(bh,"StructArrayLayout4i4ui4i24");class rd extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=10*s,D=5*s;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=g,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,s}}rd.prototype.bytesPerElement=20,Pt(rd,"StructArrayLayout3i3f20");class nd extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.float32[_+0]=u,this.float32[_+1]=f,this.float32[_+2]=g,this.float32[_+3]=m,s}}nd.prototype.bytesPerElement=16,Pt(nd,"StructArrayLayout4f16");class pp extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}pp.prototype.bytesPerElement=4,Pt(pp,"StructArrayLayout1ul4");class Kd extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.uint16[g+0]=u,this.uint16[g+1]=f,s}}Kd.prototype.bytesPerElement=4,Pt(Kd,"StructArrayLayout2ui4");class Lu extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z){const M=this.length;return this.resize(M+1),this.emplace(M,s,u,f,g,m,_,b,O,D,C,V,I,z)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M){const B=20*s,J=10*s;return this.int16[B+0]=u,this.int16[B+1]=f,this.int16[B+2]=g,this.int16[B+3]=m,this.int16[B+4]=_,this.float32[J+3]=b,this.float32[J+4]=O,this.float32[J+5]=D,this.float32[J+6]=C,this.int16[B+14]=V,this.uint32[J+8]=I,this.uint16[B+18]=z,this.uint16[B+19]=M,s}}Lu.prototype.bytesPerElement=40,Pt(Lu,"StructArrayLayout5i4f1i1ul2ui40");class xc extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=8*s;return this.int16[D+0]=u,this.int16[D+1]=f,this.int16[D+2]=g,this.int16[D+4]=m,this.int16[D+5]=_,this.int16[D+6]=b,this.int16[D+7]=O,s}}xc.prototype.bytesPerElement=16,Pt(xc,"StructArrayLayout3i2i2i16");class lu extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=4*s,O=8*s;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=g,this.int16[O+6]=m,this.int16[O+7]=_,s}}lu.prototype.bytesPerElement=16,Pt(lu,"StructArrayLayout2f1f2i16");class Pc extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=20*s,D=5*s;return this.uint8[O+0]=u,this.uint8[O+1]=f,this.float32[D+1]=g,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,s}}Pc.prototype.bytesPerElement=20,Pt(Pc,"StructArrayLayout2ub4f20");class Ms extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.uint16[m+0]=u,this.uint16[m+1]=f,this.uint16[m+2]=g,s}}Ms.prototype.bytesPerElement=6,Pt(Ms,"StructArrayLayout3ui6");class uu extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ie,ve){const be=this.length;return this.resize(be+1),this.emplace(be,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ie,ve)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ie,ve,be){const Oe=30*s,et=15*s,We=60*s;return this.int16[Oe+0]=u,this.int16[Oe+1]=f,this.int16[Oe+2]=g,this.float32[et+2]=m,this.float32[et+3]=_,this.uint16[Oe+8]=b,this.uint16[Oe+9]=O,this.uint32[et+5]=D,this.uint32[et+6]=C,this.uint32[et+7]=V,this.uint16[Oe+16]=I,this.uint16[Oe+17]=z,this.uint16[Oe+18]=M,this.float32[et+10]=B,this.float32[et+11]=J,this.uint8[We+48]=te,this.uint8[We+49]=he,this.uint8[We+50]=de,this.uint32[et+13]=ie,this.int16[Oe+28]=ve,this.uint8[We+58]=be,s}}uu.prototype.bytesPerElement=60,Pt(uu,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class tc extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ie,ve,be,Oe,et,We,Ye,gt,tt,vt,xt,Ct,Dt,Nt){const jt=this.length;return this.resize(jt+1),this.emplace(jt,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ie,ve,be,Oe,et,We,Ye,gt,tt,vt,xt,Ct,Dt,Nt)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ie,ve,be,Oe,et,We,Ye,gt,tt,vt,xt,Ct,Dt,Nt,jt){const Lt=20*s,qt=40*s,Aa=80*s;return this.float32[Lt+0]=u,this.float32[Lt+1]=f,this.int16[qt+4]=g,this.int16[qt+5]=m,this.int16[qt+6]=_,this.int16[qt+7]=b,this.int16[qt+8]=O,this.int16[qt+9]=D,this.int16[qt+10]=C,this.int16[qt+11]=V,this.int16[qt+12]=I,this.uint16[qt+13]=z,this.uint16[qt+14]=M,this.uint16[qt+15]=B,this.uint16[qt+16]=J,this.uint16[qt+17]=te,this.uint16[qt+18]=he,this.uint16[qt+19]=de,this.uint16[qt+20]=ie,this.uint16[qt+21]=ve,this.uint16[qt+22]=be,this.uint16[qt+23]=Oe,this.uint16[qt+24]=et,this.uint16[qt+25]=We,this.uint16[qt+26]=Ye,this.uint16[qt+27]=gt,this.uint32[Lt+14]=tt,this.float32[Lt+15]=vt,this.float32[Lt+16]=xt,this.float32[Lt+17]=Ct,this.float32[Lt+18]=Dt,this.uint8[Aa+76]=Nt,this.uint16[qt+39]=jt,s}}tc.prototype.bytesPerElement=80,Pt(tc,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Js extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=5*s;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=g,this.float32[b+3]=m,this.float32[b+4]=_,s}}Js.prototype.bytesPerElement=20,Pt(Js,"StructArrayLayout5f20");class Fu extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=7*s;return this.float32[D+0]=u,this.float32[D+1]=f,this.float32[D+2]=g,this.float32[D+3]=m,this.float32[D+4]=_,this.float32[D+5]=b,this.float32[D+6]=O,s}}Fu.prototype.bytesPerElement=28,Pt(Fu,"StructArrayLayout7f28");class xh extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,f,g,m,_,b,O,D,C,V)}emplace(s,u,f,g,m,_,b,O,D,C,V,I){const z=11*s;return this.float32[z+0]=u,this.float32[z+1]=f,this.float32[z+2]=g,this.float32[z+3]=m,this.float32[z+4]=_,this.float32[z+5]=b,this.float32[z+6]=O,this.float32[z+7]=D,this.float32[z+8]=C,this.float32[z+9]=V,this.float32[z+10]=I,s}}xh.prototype.bytesPerElement=44,Pt(xh,"StructArrayLayout11f44");class mp extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D){const C=this.length;return this.resize(C+1),this.emplace(C,s,u,f,g,m,_,b,O,D)}emplace(s,u,f,g,m,_,b,O,D,C){const V=9*s;return this.float32[V+0]=u,this.float32[V+1]=f,this.float32[V+2]=g,this.float32[V+3]=m,this.float32[V+4]=_,this.float32[V+5]=b,this.float32[V+6]=O,this.float32[V+7]=D,this.float32[V+8]=C,s}}mp.prototype.bytesPerElement=36,Pt(mp,"StructArrayLayout9f36");class Qh extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.float32[g+0]=u,this.float32[g+1]=f,s}}Qh.prototype.bytesPerElement=8,Pt(Qh,"StructArrayLayout2f8");class Ph extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=6*s;return this.uint32[3*s+0]=u,this.uint16[_+2]=f,this.uint16[_+3]=g,this.uint16[_+4]=m,s}}Ph.prototype.bytesPerElement=12,Pt(Ph,"StructArrayLayout1ul3ui12");class Wd extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}Wd.prototype.bytesPerElement=2,Pt(Wd,"StructArrayLayout1ui2");class ng extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J){const te=this.length;return this.resize(te+1),this.emplace(te,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te){const he=16*s;return this.float32[he+0]=u,this.float32[he+1]=f,this.float32[he+2]=g,this.float32[he+3]=m,this.float32[he+4]=_,this.float32[he+5]=b,this.float32[he+6]=O,this.float32[he+7]=D,this.float32[he+8]=C,this.float32[he+9]=V,this.float32[he+10]=I,this.float32[he+11]=z,this.float32[he+12]=M,this.float32[he+13]=B,this.float32[he+14]=J,this.float32[he+15]=te,s}}ng.prototype.bytesPerElement=64,Pt(ng,"StructArrayLayout16f64");class sm extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=10*s,C=5*s;return this.uint16[D+0]=u,this.uint16[D+1]=f,this.uint16[D+2]=g,this.uint16[D+3]=m,this.float32[C+2]=_,this.float32[C+3]=b,this.float32[C+4]=O,s}}sm.prototype.bytesPerElement=20,Pt(sm,"StructArrayLayout4ui3f20");class ig extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.int16[1*s+0]=u,s}}ig.prototype.bytesPerElement=2,Pt(ig,"StructArrayLayout1i2");class Kg extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint8[1*s+0]=u,s}}Kg.prototype.bytesPerElement=1,Pt(Kg,"StructArrayLayout1ub1");class fA extends Sh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}fA.prototype.size=40;class om extends Lu{get(s){return new fA(this,s)}}Pt(om,"CollisionBoxArray");class dl extends Sh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}dl.prototype.size=60;class wl extends uu{get(s){return new dl(this,s)}}Pt(wl,"PlacedSymbolArray");class pA extends Sh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(s){this._structArray.uint32[this._pos4+14]=s}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(s){this._structArray.float32[this._pos4+18]=s}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}pA.prototype.size=80;class mA extends tc{get(s){return new pA(this,s)}}Pt(mA,"SymbolInstanceArray");class gA extends ad{getoffsetX(s){return this.float32[1*s+0]}}Pt(gA,"GlyphOffsetArray");class lm extends Mu{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}Pt(lm,"SymbolLineVertexArray");class um extends Sh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}um.prototype.size=12;class Rl extends Ph{get(s){return new um(this,s)}}Pt(Rl,"FeatureIndexArray");class gp extends Kd{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}Pt(gp,"FillExtrusionCentroidArray");class yA extends Sh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}yA.prototype.size=6;class AA extends Hd{get(s){return new yA(this,s)}}Pt(AA,"FillExtrusionWallArray");const Jv=Nn([{name:"a_pos",components:2,type:"Int16"}],4),vA=Nn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Li{constructor(s=[]){this.segments=s}_prepareSegment(s,u,f,g){let m=this.segments[this.segments.length-1];return s>Li.MAX_VERTEX_ARRAY_LENGTH&&$r(`Max vertices per segment is ${Li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!m||m.vertexLength+s>Li.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==g)&&(m={vertexOffset:u,primitiveOffset:f,vertexLength:0,primitiveLength:0},g!==void 0&&(m.sortKey=g),this.segments.push(m)),m}prepareSegment(s,u,f,g){return this._prepareSegment(s,u.length,f.length,g)}get(){return this.segments}destroy(){for(const s of this.segments)for(const u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,f,g){return new Li([{vertexOffset:s,primitiveOffset:u,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function Wg(h,s){return 256*(h=ka(Math.floor(h),0,255))+ka(Math.floor(s),0,255)}Li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt(Li,"SegmentVector");const Yg=Nn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),_A=Nn([{name:"a_dash",components:4,type:"Uint16"}]);class yp{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(s,u,f,g){this.ids.push(sg(s)),this.positions.push(u,f,g)}eachPosition(s,u){const f=sg(s);let g=0,m=this.ids.length-1;for(;g<m;){const _=g+m>>1;this.ids[_]>=f?m=_:g=_+1}for(;this.ids[g]===f;)u(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(s,u){const f=new Float64Array(s.ids),g=new Uint32Array(s.positions);return cm(f,g,0,f.length-1),u&&(u.add(f.buffer),u.add(g.buffer)),{ids:f,positions:g}}static deserialize(s){const u=new yp;let f;u.ids=s.ids,u.positions=s.positions;for(const g of u.ids)g!==f&&u.uniqueIds.push(g),f=g;return u.indexed=!0,u}}function sg(h){const s=+h;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:po(String(h))}function cm(h,s,u,f){for(;u<f;){const g=h[u+f>>1];let m=u-1,_=f+1;for(;;){do m++;while(h[m]<g);do _--;while(h[_]>g);if(m>=_)break;dm(h,m,_),dm(s,3*m,3*_),dm(s,3*m+1,3*_+1),dm(s,3*m+2,3*_+2)}_-u<f-_?(cm(h,s,u,_),u=_+1):(cm(h,s,_+1,f),f=_)}}function dm(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}Pt(yp,"FeaturePositionMap");class Yd{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,u),this.initialized=!0),!!this.location}set(s,u,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Ec extends Yd{constructor(s){super(s),this.current=0}set(s,u,f){this.fetchUniformLocation(s,u)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class Rs extends Yd{constructor(s){super(s),this.current=0}set(s,u,f){this.fetchUniformLocation(s,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class id extends Yd{constructor(s){super(s),this.current=[0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class Ap extends Yd{constructor(s){super(s),this.current=[0,0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class vp extends Yd{constructor(s){super(s),this.current=[0,0,0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class zf extends Yd{constructor(s){super(s),this.current=En.transparent.toRenderColor(null)}set(s,u,f){this.fetchUniformLocation(s,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const Eh=new Float32Array(16);class sd extends Yd{constructor(s){super(s),this.current=Eh}set(s,u,f){if(this.fetchUniformLocation(s,u)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let g=1;g<16;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const Xd=new Float32Array(9),wA=new Float32Array(4);class og extends Yd{constructor(s){super(s),this.current=wA}set(s,u,f){if(this.fetchUniformLocation(s,u)){for(let g=0;g<4;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function _p(h){return[Wg(255*h.r,255*h.g),Wg(255*h.b,255*h.a)]}class Df{constructor(s,u,f,g){this.value=s,this.uniformNames=u.map(m=>`u_${m}`),this.type=f,this.context=g}setUniform(s,u,f,g,m){const _=g.constantOr(this.value);u.set(s,m,_ instanceof En?_.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):_)}getBinding(s,u){return this.type==="color"?new zf(s):new Rs(s)}}class Nc{constructor(s,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,u,f,g,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&u.set(s,m,_)}getBinding(s,u){return u==="u_pattern"||u==="u_dash"?new vp(s):new Rs(s)}}class Qs{constructor(s,u,f,g){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(m=>({name:`a_${m}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(s,u,f,g,m,_,b){const O=this.paintVertexArray.length,D=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Rn(0,{brightness:_}),u,{},m,g,b):this.expression.kind==="constant"&&this.expression.value,C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Rn(0,{brightness:_}),u,{},m,g,b):this.lutExpression.value)==="none";this.paintVertexArray.resize(s),this._setPaintValue(O,s,D,C?null:this.context.lut)}updatePaintArray(s,u,f,g,m,_,b){const O=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:b},f,g,void 0,m):this.expression.kind==="constant"&&this.expression.value,D=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Rn(0,{brightness:b}),f,g,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(s,u,O,D?null:this.context.lut)}_setPaintValue(s,u,f,g){if(this.type==="color"){const m=_p(f.toRenderColor(g));for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=s;m<u;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ac{constructor(s,u,f,g,m,_){this.expression=s,this.uniformNames=u.map(b=>`u_${b}_t`),this.type=f,this.useIntegerZoom=g,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,u,f,g,m,_,b){const O=this.expression.evaluate(new Rn(this.context.zoom,{brightness:_}),u,{},m,g,b),D=this.expression.evaluate(new Rn(this.context.zoom+1,{brightness:_}),u,{},m,g,b),C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Rn(0,{brightness:_}),u,{},m,g,b):this.lutExpression.value)==="none",V=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(V,s,O,D,C?null:this.context.lut)}updatePaintArray(s,u,f,g,m,_,b){const O=this.expression.evaluate({zoom:this.context.zoom,brightness:b},f,g,void 0,m),D=this.expression.evaluate({zoom:this.context.zoom+1,brightness:b},f,g,void 0,m),C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Rn(0,{brightness:b}),f,g,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(s,u,O,D,C?null:this.context.lut)}_setPaintValue(s,u,f,g,m){if(this.type==="color"){const _=_p(f.toRenderColor(m)),b=_p(f.toRenderColor(m));for(let O=s;O<u;O++)this.paintVertexArray.emplace(O,_[0],_[1],b[0],b[1])}else{for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u,f,g,m){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,b=ka(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);u.set(s,m,b)}getBinding(s,u){return new Rs(s)}}class ef{constructor(s,u,f,g,m){this.expression=s,this.layerId=m,this.paintVertexAttributes=(f==="array"?_A:Yg).members;for(let _=0;_<u.length;++_);this.paintVertexArray=new g}populatePaintArray(s,u,f,g){const m=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(m,s,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(s,u,f,g,m,_,b){this._setPaintValues(s,u,f.patterns&&f.patterns[this.layerId],_)}_setPaintValues(s,u,f,g){if(!g||!f)return;const m=g[f];if(!m)return;const{tl:_,br:b,pixelRatio:O}=m;for(let D=s;D<u;D++)this.paintVertexArray.emplace(D,_[0],_[1],b[0],b[1],O)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class rc{constructor(s,u,f=()=>!0){this.binders={},this._buffers=[],this.context=u;const g=[];for(const m in s.paint._values){const _=s.paint.get(m);if(m.endsWith("-use-theme")||!f(m)||!(_ instanceof kl&&Yc(_.property.specification)))continue;const b=Mf(m,s.type),O=_.value,D=_.property.specification.type,C=!!_.property.useIntegerZoom,V=m==="line-dasharray"||m.endsWith("pattern"),I=s.paint.get(`${m}-use-theme`),z=m==="line-dasharray"&&s.layout.get("line-cap").value.kind!=="constant"||I&&I.value.kind!=="constant";if(O.kind!=="constant"||z)if(O.kind==="source"||z||V){const M=Xg(m,D,"source");this.binders[m]=V?new ef(O,b,D,M,s.id):new Qs(O,b,D,M),g.push(`/a_${m}`)}else{const M=Xg(m,D,"composite");this.binders[m]=new ac(O,b,D,C,u,M),g.push(`/z_${m}`)}else this.binders[m]=V?new Nc(O.value,b):new Df(O.value,b,D,u),g.push(`/u_${m}`);I&&(this.binders[m].lutExpression=I.value)}this.cacheKey=g.sort().join("")}getMaxValue(s){const u=this.binders[s];return u instanceof Qs||u instanceof ac?u.maxValue:0}populatePaintArrays(s,u,f,g,m,_,b){for(const O in this.binders){const D=this.binders[O];D.context=this.context,(D instanceof Qs||D instanceof ac||D instanceof ef)&&D.populatePaintArray(s,u,f,g,m,_,b)}}setConstantPatternPositions(s){for(const u in this.binders){const f=this.binders[u];f instanceof Nc&&f.setConstantPatternPositions(s)}}updatePaintArrays(s,u,f,g,m,_,b,O,D){let C=!1;const V=Object.keys(s),I=V.length!==0&&!O,z=I?V:u.uniqueIds;this.context.lut=m.lut;for(const M in this.binders){const B=this.binders[M];if(B.context=this.context,(B instanceof Qs||B instanceof ac||B instanceof ef)&&B.expression&&B.expression.kind&&B.expression.kind!=="constant"&&(B.expression.isStateDependent===!0||B.expression.isLightConstant===!1)){const J=m.paint.get(M);B.expression=J.value;for(const te of z){const he=s[te.toString()];u.eachPosition(te,(de,ie,ve)=>{const be=g.feature(de);B.updatePaintArray(ie,ve,be,he,_,b,D)})}if(!I)for(const te of f.uniqueIds){const he=s[te.toString()];f.eachPosition(te,(de,ie,ve)=>{const be=g.feature(de);B.updatePaintArray(ie,ve,be,he,_,b,D)})}C=!0}}return C}defines(){const s=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Df||f instanceof Nc)&&s.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return s}getBinderAttributes(){const s=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Qs||f instanceof ac||f instanceof ef)for(let g=0;g<f.paintVertexAttributes.length;g++)s.push(f.paintVertexAttributes[g].name)}return s}getBinderUniforms(){const s=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Df||f instanceof Nc||f instanceof ac)for(const g of f.uniformNames)s.push(g)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const u=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof Df||g instanceof Nc||g instanceof ac)for(const m of g.uniformNames)u.push({name:m,property:f,binding:g.getBinding(s,m)})}return u}setUniforms(s,u,f,g,m){for(const{name:_,property:b,binding:O}of f)this.binders[b].setUniform(s,O,m,g.get(b),_)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const u=this.binders[s];(u instanceof Qs||u instanceof ac||u instanceof ef)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(s){for(const u in this.binders){const f=this.binders[u];(f instanceof Qs||f instanceof ac||f instanceof ef)&&f.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const u=this.binders[s];(u instanceof Qs||u instanceof ac||u instanceof ef)&&u.destroy()}}}class Nh{constructor(s,u,f=()=>!0){this.programConfigurations={};for(const g of s)this.programConfigurations[g.id]=new rc(g,u,f);this.needsUpload=!1,this._featureMap=new yp,this._featureMapWithoutIds=new yp,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(s,u,f,g,m,_,b,O){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(s,u,g,m,_,b,O);u.id!==void 0?this._featureMap.add(u.id,f,this._bufferOffset,s):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,s),this._idlessCounter+=1),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,f,g,m,_,b){for(const O of f)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(s,this._featureMap,this._featureMapWithoutIds,u,O,g,m,_,b||0)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const RA={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Mf(h,s){return RA[h]||[h.replace(`${s}-`,"").replace(/-/g,"_")]}const If={"line-pattern":{source:$d,composite:$d},"fill-pattern":{source:$d,composite:$d},"fill-extrusion-pattern":{source:$d,composite:$d},"line-dasharray":{source:hp,composite:hp}},Lf={color:{source:Qh,composite:nd},number:{source:ad,composite:Qh}};function Xg(h,s,u){const f=If[h];return f&&f[u]||Lf[s][u]}Pt(Df,"ConstantBinder"),Pt(Nc,"PatternConstantBinder"),Pt(Qs,"SourceExpressionBinder"),Pt(ef,"PatternCompositeBinder"),Pt(ac,"CompositeExpressionBinder"),Pt(rc,"ProgramConfiguration",{omit:["_buffers"]}),Pt(Nh,"ProgramConfigurationSet");const Tl=Va/Math.PI/2,Oh=5,hm=6,TA=16383,wp=64,Ff=[wp,32,16],Ko=-Tl,nc=Tl;function Rp(h,s,u,f=Tl){return u=Ea(u),[h*Math.sin(u)*f,-s*f,h*Math.cos(u)*f]}function Oc(h,s,u){return Rp(Math.cos(Ea(h)),Math.sin(Ea(h)),s,u)}const hl=63710088e-1,Jg=2*Math.PI*hl;class kn{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new kn(dn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const u=Math.PI/180,f=this.lat*u,g=s.lat*u,m=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((s.lng-this.lng)*u);return hl*Math.acos(Math.min(m,1))}toBounds(s=0){const u=360*s/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new tf({lng:this.lng-f,lat:this.lat-u},{lng:this.lng+f,lat:this.lat+u})}toEcef(s){return Oc(this.lat,this.lng,Tl+s*Tl/hl)}static convert(s){if(s instanceof kn)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new kn(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new kn(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class tf{constructor(s,u){if(s)if(u)this.setSouthWest(s).setNorthEast(u);else if(s.length===4){const f=s;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=s;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(s){return this._ne=s instanceof kn?new kn(s.lng,s.lat):kn.convert(s),this}setSouthWest(s){return this._sw=s instanceof kn?new kn(s.lng,s.lat):kn.convert(s),this}extend(s){const u=this._sw,f=this._ne;let g,m;if(s instanceof kn)g=s,m=s;else{if(!(s instanceof tf))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(tf.convert(s)):this.extend(kn.convert(s)):typeof s=="object"&&s!==null&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(kn.convert(s)):this;if(g=s._sw,m=s._ne,!g||!m)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new kn(g.lng,g.lat),this._ne=new kn(m.lng,m.lat)),this}getCenter(){return new kn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new kn(this.getWest(),this.getNorth())}getSouthEast(){return new kn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:u,lat:f}=kn.convert(s);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(s){if(s)return s instanceof tf?s:new tf(s)}}const CA=0,SA=25.5;function Tp(h){return Jg*Math.cos(h*Math.PI/180)}function Cl(h){return(180+h)/360}function Oi(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function Wo(h,s){return h/Tp(s)}function ku(h){return 360*h-180}function Si(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function Qg(h,s){return h*Tp(Si(s))}const Uu=85.051129;function bA(h){return Math.cos(Ea(ka(h,-85.051129,Uu)))}function af(h,s){const u=ka(s,CA,SA),f=Math.pow(2,u);return bA(h)*Jg/(512*f)}function Yo(h){return 1/Math.cos(h*Math.PI/180)}function y(h,s=0){const u=Math.exp(Math.PI*(1-(h.y+s/Va)/(1<<h.z)*2));return 80150034*u/(u*u+1)/Va/(1<<h.z)}class o{constructor(s,u,f=0){this.x=+s,this.y=+u,this.z=+f}static fromLngLat(s,u=0){const f=kn.convert(s);return new o(Cl(f.lng),Oi(f.lat),Wo(u,f.lat))}toLngLat(){return new kn(ku(this.x),Si(this.y))}toAltitude(){return Qg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Jg*Yo(Si(this.y))}}function d(h,s,u,f,g,m,_,b,O){const D=(s+f)/2,C=(u+g)/2,V=new It(D,C);b(V),function(I,z,M,B,J,te){const he=M-J,de=B-te;return Math.abs((B-z)*he-(M-I)*de)/Math.hypot(he,de)}(V.x,V.y,m.x,m.y,_.x,_.y)>=O?(d(h,s,u,D,C,m,V,b,O),d(h,D,C,f,g,V,_,b,O)):h.push(_)}function A(h,s,u){let f=h[0],g=f.x,m=f.y;s(f);const _=[f];for(let b=1;b<h.length;b++){const O=h[b],{x:D,y:C}=O;s(O),d(_,g,m,D,C,f,O,s,u),g=D,m=C,f=O}return _}function T(h,s,u,f){if(f(s,u)){const g=s.add(u)._mult(.5);T(h,s,g,f),T(h,g,u,f)}else h.push(u)}function S(h,s){let u=h[0];const f=[u];for(let g=1;g<h.length;g++){const m=h[g];T(f,u,m,s),u=m}return f}const E=Math.pow(2,14)-1,k=-E-1;function Z(h,s){const u=Math.round(h.x*s),f=Math.round(h.y*s);return h.x=ka(u,k,E),h.y=ka(f,k,E),(u<h.x||u>h.x+1||f<h.y||f>h.y+1)&&$r("Geometry exceeds allowed extent, reduce your vector tile buffer size"),h}function K(h,s,u){const f=h.loadGeometry(),g=h.extent,m=Va/g;if(s&&u&&u.projection.isReprojectedInTileSpace){const _=1<<s.z,{scale:b,x:O,y:D,projection:C}=u,V=I=>{const z=ku((s.x+I.x/g)/_),M=Si((s.y+I.y/g)/_),B=C.project(z,M);I.x=(B.x*b-O)*g,I.y=(B.y*b-D)*g};for(let I=0;I<f.length;I++)if(h.type!==1)f[I]=A(f[I],V,1);else{const z=[];for(const M of f[I])M.x<0||M.x>=g||M.y<0||M.y>=g||(V(M),z.push(M));f[I]=z}}for(const _ of f)for(const b of _)Z(b,m);return f}function Y(h,s){return{type:h.type,id:h.id,properties:h.properties,geometry:s?K(h):[]}}function re(h,s,u,f,g){h.emplaceBack(2*s+(f+1)/2,2*u+(g+1)/2)}function ne(h,s,u){h.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}class pe{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new Mu,this.indexArray=new Ms,this.segments=new Li,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}updateFootprints(s,u){}populate(s,u,f,g){const m=this.layers[0],_=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:D,id:C,index:V,sourceLayerIndex:I}of s){const z=this.layers[0]._featureFilter.needGeometry,M=Y(D,z);if(!this.layers[0]._featureFilter.filter(new Rn(this.zoom),M,f))continue;const B=b?b.evaluate(M,{},f):void 0,J={id:C,properties:D.properties,type:D.type,sourceLayerIndex:I,index:V,geometry:z?M.geometry:K(D,f,g),patterns:{},sortKey:B};_.push(J)}b&&_.sort((D,C)=>D.sortKey-C.sortKey);let O=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new fp,O=g.projection);for(const D of _){const{geometry:C,index:V,sourceLayerIndex:I}=D,z=s[V].feature;this.addFeature(D,C,V,u.availableImages,f,O,u.brightness),u.featureIndex.insert(z,C,V,I,this.index)}}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Jv.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,vA.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,u,f,g,m,_,b){for(const O of u)for(const D of O){const C=D.x,V=D.y;if(C<0||C>=Va||V<0||V>=Va)continue;if(_){const M=_.projectTilePoint(C,V,m),B=_.upVector(m,C,V),J=this.globeExtVertexArray;ne(J,M,B),ne(J,M,B),ne(J,M,B),ne(J,M,B)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),z=I.vertexLength;re(this.layoutVertexArray,C,V,-1,-1),re(this.layoutVertexArray,C,V,1,-1),re(this.layoutVertexArray,C,V,1,1),re(this.layoutVertexArray,C,V,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+2,z+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},g,m,b)}}function Pe(h,s){for(let u=0;u<h.length;u++)if(ut(s,h[u]))return!0;for(let u=0;u<s.length;u++)if(ut(h,s[u]))return!0;return!!$e(h,s)}function Ce(h,s,u){return!!ut(h,s)||!!at(s,h,u)}function Ve(h,s){if(h.length===1)return ot(s,h[0]);for(let u=0;u<s.length;u++){const f=s[u];for(let g=0;g<f.length;g++)if(ut(h,f[g]))return!0}for(let u=0;u<h.length;u++)if(ot(s,h[u]))return!0;for(let u=0;u<s.length;u++)if($e(h,s[u]))return!0;return!1}function Le(h,s,u){if(h.length>1){if($e(h,s))return!0;for(let f=0;f<s.length;f++)if(at(s[f],h,u))return!0}for(let f=0;f<h.length;f++)if(at(h[f],s,u))return!0;return!1}function $e(h,s){if(h.length===0||s.length===0)return!1;for(let u=0;u<h.length-1;u++){const f=h[u],g=h[u+1];for(let m=0;m<s.length-1;m++)if(nt(f,g,s[m],s[m+1]))return!0}return!1}function nt(h,s,u,f){return br(h,u,f)!==br(s,u,f)&&br(h,s,u)!==br(h,s,f)}function at(h,s,u){const f=u*u;if(s.length===1)return h.distSqr(s[0])<f;for(let g=1;g<s.length;g++)if(pt(h,s[g-1],s[g])<f)return!0;return!1}function pt(h,s,u){const f=s.distSqr(u);if(f===0)return h.distSqr(s);const g=((h.x-s.x)*(u.x-s.x)+(h.y-s.y)*(u.y-s.y))/f;return h.distSqr(g<0?s:g>1?u:u.sub(s)._mult(g)._add(s))}function ot(h,s){let u,f,g,m=!1;for(let _=0;_<h.length;_++){u=h[_];for(let b=0,O=u.length-1;b<u.length;O=b++)f=u[b],g=u[O],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(m=!m)}return m}function ut(h,s){let u=!1;for(let f=0,g=h.length-1;f<h.length;g=f++){const m=h[f],_=h[g];m.y>s.y!=_.y>s.y&&s.x<(_.x-m.x)*(s.y-m.y)/(_.y-m.y)+m.x&&(u=!u)}return u}function ct(h,s,u,f,g){for(const _ of h)if(s<=_.x&&u<=_.y&&f>=_.x&&g>=_.y)return!0;const m=[new It(s,u),new It(s,g),new It(f,g),new It(f,u)];if(h.length>2){for(const _ of m)if(ut(h,_))return!0}for(let _=0;_<h.length-1;_++)if(At(h[_],h[_+1],m))return!0;return!1}function At(h,s,u){const f=u[0],g=u[2];if(h.x<f.x&&s.x<f.x||h.x>g.x&&s.x>g.x||h.y<f.y&&s.y<f.y||h.y>g.y&&s.y>g.y)return!1;const m=br(h,s,u[0]);return m!==br(h,s,u[1])||m!==br(h,s,u[2])||m!==br(h,s,u[3])}function Tt(h,s,u,f,g,m){let _=s.y-h.y,b=h.x-s.x;if(m=m||0){const O=_*_+b*b;if(O===0)return!0;const D=Math.sqrt(O);_/=D,b/=D}return!((u.x-h.x)*_+(u.y-h.y)*b-m<0||(f.x-h.x)*_+(f.y-h.y)*b-m<0||(g.x-h.x)*_+(g.y-h.y)*b-m<0)}function Qt(h,s,u,f,g,m,_){return!(Tt(h,s,f,g,m,_)||Tt(s,u,f,g,m,_)||Tt(u,h,f,g,m,_)||Tt(f,g,h,s,u,_)||Tt(g,m,h,s,u,_)||Tt(m,f,h,s,u,_))}function Ut(h,s,u){const f=s.paint.get(h).value;return f.kind==="constant"?f.value:u.programConfigurations.get(s.id).getMaxValue(h)}function ra(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function ca(h,s,u,f,g){if(!s[0]&&!s[1])return h;const m=It.convert(s)._mult(g);u==="viewport"&&m._rotate(-f);const _=[];for(let b=0;b<h.length;b++)_.push(h[b].sub(m));return _}function Sa(h,s,u,f){const g=It.convert(h)._mult(f);return s==="viewport"&&g._rotate(-u),g}let Ft,sa;Pt(pe,"CircleBucket",{omit:["layers"]});var Vt,oa={exports:{}},ta=(Vt||(Vt=1,function(h,s){(function(u){function f(m,_,b){var O=g(256*m,256*(_=Math.pow(2,b)-_-1),b),D=g(256*(m+1),256*(_+1),b);return O[0]+","+O[1]+","+D[0]+","+D[1]}function g(m,_,b){var O=2*Math.PI*6378137/256/Math.pow(2,b);return[m*O-2*Math.PI*6378137/2,_*O-2*Math.PI*6378137/2]}u.getURL=function(m,_,b,O,D,C){return C=C||{},m+"?"+["bbox="+f(b,O,D),"format="+(C.format||"image/png"),"service="+(C.service||"WMS"),"version="+(C.version||"1.1.1"),"request="+(C.request||"GetMap"),"srs="+(C.srs||"EPSG:3857"),"width="+(C.width||256),"height="+(C.height||256),"layers="+_].join("&")},u.getTileBBox=f,u.getMercCoords=g,Object.defineProperty(u,"__esModule",{value:!0})})(s)}(0,oa.exports)),oa.exports);class da{constructor(s,u,f){this.z=s,this.x=u,this.y=f,this.key=Ia(0,s,s,u,f)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u){const f=ta.getTileBBox(this.x,this.y,this.z),g=function(m,_,b){let O,D="";for(let C=m;C>0;C--)O=1<<C-1,D+=(_&O?1:0)+(b&O?2:0);return D}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Yt{constructor(s,u){this.wrap=s,this.canonical=u,this.key=Ia(s,u.z,u.z,u.x,u.y)}}class pa{constructor(s,u,f,g,m){this.overscaledZ=s,this.wrap=u,this.canonical=new da(f,+g,+m),this.key=u===0&&s===f?this.canonical.key:Ia(u,s,f,g,m)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const u=this.canonical.z-s;return s>this.canonical.z?new pa(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pa(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u=!0){if(this.overscaledZ===s&&u)return this.key;if(s>this.canonical.z)return Ia(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-s;return Ia(this.wrap*+u,s,s,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.z<this.canonical.z&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new pa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new pa(u,this.wrap,u,f,g),new pa(u,this.wrap,u,f+1,g),new pa(u,this.wrap,u,f,g+1),new pa(u,this.wrap,u,f+1,g+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new pa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new pa(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Yt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ia(h,s,u,f,g){const m=1<<Math.min(u,22);let _=m*(g%m)+f%m;return h&&u<22&&(_+=m*m*((h<0?-2*h-1:2*h)%(1<<2*(22-u)))),16*(32*_+u)+(s-u)}const La=[h=>{let s=h.canonical.x-1,u=h.wrap;return s<0&&(s=(1<<h.canonical.z)-1,u--),new pa(h.overscaledZ,u,h.canonical.z,s,h.canonical.y)},h=>{let s=h.canonical.x+1,u=h.wrap;return s===1<<h.canonical.z&&(s=0,u++),new pa(h.overscaledZ,u,h.canonical.z,s,h.canonical.y)},h=>new pa(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,(h.canonical.y===0?1<<h.canonical.z:h.canonical.y)-1),h=>new pa(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y===(1<<h.canonical.z)-1?0:h.canonical.y+1)];Pt(da,"CanonicalTileID"),Pt(pa,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Oa=Nn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:lr}=Oa,kr=Nn([{name:"a_pos_3",components:3,type:"Int16"}]);var yr=Nn([{name:"a_pos",type:"Int16",components:2}]);class Dr{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,f){const g=Ae.vec2.dot(u,this.dir);if(Math.abs(g)<1e-6)return!1;const m=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1])/g;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,!0}}class Pr{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,f){const g=Ae.vec3.dot(u,this.dir);if(Math.abs(g)<1e-6)return!1;const m=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1]+(s[2]-this.pos[2])*u[2])/g;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,f[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(s,u,f){if(Ae.vec3.equals(this.pos,s)||u===0)return f[0]=f[1]=f[2]=0,!1;const[g,m,_]=this.dir,b=this.pos[0]-s[0],O=this.pos[1]-s[1],D=this.pos[2]-s[2],C=g*g+m*m+_*_,V=2*(b*g+O*m+D*_),I=V*V-4*C*(b*b+O*O+D*D-u*u);if(I<0){const z=Math.max(-V/2,0),M=b+g*z,B=O+m*z,J=D+_*z,te=Math.hypot(M,B,J);return f[0]=M*u/te,f[1]=B*u/te,f[2]=J*u/te,!1}{const z=(-V-Math.sqrt(I))/(2*C);if(z<0){const M=Math.hypot(b,O,D);return f[0]=b*u/M,f[1]=O*u/M,f[2]=D*u/M,!1}return f[0]=b+g*z,f[1]=O+m*z,f[2]=D+_*z,!0}}}class Or{constructor(s,u,f,g,m){this.TL=s,this.TR=u,this.BR=f,this.BL=g,this.horizon=m}static fromInvProjectionMatrix(s,u,f){const g=[-1,1,1],m=[1,1,1],_=[1,-1,1],b=[-1,-1,1],O=Ae.vec3.transformMat4(g,g,s),D=Ae.vec3.transformMat4(m,m,s),C=Ae.vec3.transformMat4(_,_,s),V=Ae.vec3.transformMat4(b,b,s);return new Or(O,D,C,V,u/f)}}function Ur(h,s,u){let f=1/0,g=-1/0;const m=[];for(const _ of h){Ae.vec3.sub(m,_,s);const b=Ae.vec3.dot(m,u);f=Math.min(f,b),g=Math.max(g,b)}return[f,g]}function Lr(h,s){let u=!0;for(let f=0;f<h.planes.length;f++){const g=h.planes[f];let m=0;for(let _=0;_<s.length;_++)m+=Ae.vec3.dot(g,s[_])+g[3]>=0;if(m===0)return 0;m!==s.length&&(u=!1)}return u?2:1}function fr(h,s){for(const u of h.projections){const f=Ur(s,h.points[0],u.axis);if(u.projection[1]<f[0]||u.projection[0]>f[1])return 0}return 1}function on(h,s){let u=0;const f=[0,0,0,0];for(let g=0;g<h.length;g++)f[0]=h[g][0],f[1]=h[g][1],f[2]=h[g][2],f[3]=1,Ae.vec4.dot(f,s)>=0&&u++;return u}class Cr{constructor(s,u){this.points=s||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=ar.fromPoints(this.points),this.projections=[],this.frustumEdges=[Ae.vec3.sub([],this.points[2],this.points[3]),Ae.vec3.sub([],this.points[0],this.points[3]),Ae.vec3.sub([],this.points[4],this.points[0]),Ae.vec3.sub([],this.points[5],this.points[1]),Ae.vec3.sub([],this.points[6],this.points[2]),Ae.vec3.sub([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const g=[0,-f[2],f[1]],m=[f[2],0,-f[0]];this.projections.push({axis:g,projection:Ur(this.points,this.points[0],g)}),this.projections.push({axis:m,projection:Ur(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(s,u,f,g){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const C=Ae.vec4.transformMat4([],D,s),V=1/C[3]/u*m;return Ae.vec4.mul(C,C,[V,V,g?1/C[3]:V,V])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const C=Ae.vec3.sub([],_[D[0]],_[D[1]]),V=Ae.vec3.sub([],_[D[2]],_[D[1]]),I=Ae.vec3.normalize([],Ae.vec3.cross([],C,V)),z=-Ae.vec3.dot(I,_[D[1]]);return I.concat(z)}),O=[];for(let D=0;D<_.length;D++)O.push([_[D][0],_[D][1],_[D][2]]);return new Cr(O,b)}intersectsPrecise(s,u,f){for(let g=0;g<u.length;g++)if(!on(s,u[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!on(s,this.planes[g]))return 0;for(const g of f)for(const m of this.frustumEdges){const _=Ae.vec3.cross([],g,m),b=Ae.vec3.length(_);if(b===0)continue;Ae.vec3.scale(_,_,1/b);const O=Ur(this.points,this.points[0],_),D=Ur(s,this.points[0],_);if(O[0]>D[1]||D[0]>O[1])return 0}return 1}containsPoint(s){for(const u of this.planes){const f=u[3];if(Ae.vec3.dot([u[0],u[1],u[2]],s)+f<0)return!1}return!0}}class ar{static fromPoints(s){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of s)Ae.vec3.min(u,u,g),Ae.vec3.max(f,f,g);return new ar(u,f)}static fromTileIdAndHeight(s,u,f){const g=1<<s.canonical.z,m=s.canonical.x,_=s.canonical.y;return new ar([m/g,_/g,u],[(m+1)/g,(_+1)/g,f])}static applyTransform(s,u){const f=s.getCorners();for(let g=0;g<f.length;++g)Ae.vec3.transformMat4(f[g],f[g],u);return ar.fromPoints(f)}static applyTransformFast(s,u){const f=[u[12],u[13],u[14]],g=[...f];for(let m=0;m<3;m++)for(let _=0;_<3;_++){const b=u[4*_+m],O=b*s.min[_],D=b*s.max[_];f[m]+=Math.min(O,D),g[m]+=Math.max(O,D)}return new ar(f,g)}static projectAabbCorners(s,u){const f=s.getCorners();for(let g=0;g<f.length;++g)Ae.vec3.transformMat4(f[g],f[g],u);return f}constructor(s,u){this.min=s,this.max=u,this.center=Ae.vec3.scale([],Ae.vec3.add([],this.min,this.max),.5)}quadrant(s){const u=[s%2==0,s<2],f=Ae.vec3.clone(this.min),g=Ae.vec3.clone(this.max);for(let m=0;m<u.length;m++)f[m]=u[m]?this.min[m]:this.center[m],g[m]=u[m]?this.center[m]:this.max[m];return g[2]=this.max[2],new ar(f,g)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,u=this.max;return[[s[0],s[1],s[2]],[u[0],s[1],s[2]],[u[0],u[1],s[2]],[s[0],u[1],s[2]],[s[0],s[1],u[2]],[u[0],s[1],u[2]],[u[0],u[1],u[2]],[s[0],u[1],u[2]]]}intersects(s){return this.intersectsAabb(s.bounds)?Lr(s,this.getCorners()):0}intersectsFlat(s){return this.intersectsAabb(s.bounds)?Lr(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(s,u){return u||this.intersects(s)?fr(s,this.getCorners()):0}intersectsPreciseFlat(s,u){return u||this.intersectsFlat(s)?fr(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(s){for(let u=0;u<3;++u)if(this.min[u]>s.max[u]||s.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(s){return!(this.min[0]>s.max[0]||s.min[0]>this.max[0]||this.min[1]>s.max[1]||s.min[1]>this.max[1])}encapsulate(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s.min[u]),this.max[u]=Math.max(this.max[u],s.max[u])}encapsulatePoint(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s[u]),this.max[u]=Math.max(this.max[u],s[u])}closestPoint(s){return[Math.max(Math.min(this.max[0],s[0]),this.min[0]),Math.max(Math.min(this.max[1],s[1]),this.min[1]),Math.max(Math.min(this.max[2],s[2]),this.min[2])]}}function ln(h){return h*Tl/hl}Pt(ar,"Aabb");const Kn=[new ar([Ko,Ko,Ko],[nc,nc,nc]),new ar([Ko,Ko,Ko],[0,0,nc]),new ar([0,Ko,Ko],[nc,0,nc]),new ar([Ko,0,Ko],[0,nc,nc]),new ar([0,0,Ko],[nc,nc,nc])];function mn(h,s,u,f=!0){const g=Ae.vec3.scale([],h._camera.position,h.worldSize),m=[s,u,1,1];Ae.vec4.transformMat4(m,m,h.pixelMatrixInverse),Ae.vec4.scale(m,m,1/m[3]);const _=Ae.vec3.sub([],m,g),b=Ae.vec3.normalize([],_),O=h.globeMatrix,D=[O[12],O[13],O[14]],C=Ae.vec3.sub([],D,g),V=Ae.vec3.length(C),I=Ae.vec3.normalize([],C),z=h.worldSize/(2*Math.PI),M=Ae.vec3.dot(I,b),B=Math.asin(z/V);if(B<Math.acos(M)){if(!f)return null;const gt=[],tt=[];Ae.vec3.scale(gt,b,V/M),Ae.vec3.normalize(tt,Ae.vec3.sub(tt,gt,C)),Ae.vec3.normalize(b,Ae.vec3.add(b,C,Ae.vec3.scale(b,tt,Math.tan(B)*V)))}const J=[];new Pr(g,b).closestPointOnSphere(D,z,J);const te=Ae.vec3.normalize([],rn(O,0)),he=Ae.vec3.normalize([],rn(O,1)),de=Ae.vec3.normalize([],rn(O,2)),ie=Ae.vec3.dot(te,J),ve=Ae.vec3.dot(he,J),be=Ae.vec3.dot(de,J),Oe=Na(Math.asin(-ve/z));let et=Na(Math.atan2(ie,be));et=h.center.lng+function(gt,tt){const vt=(tt-gt+180)%360-180;return vt<-180?vt+360:vt}(h.center.lng,et);const We=Cl(et),Ye=ka(Oi(Oe),0,1);return new o(We,Ye)}class Dn{constructor(s,u,f){this.a=Ae.vec3.sub([],s,f),this.b=Ae.vec3.sub([],u,f),this.center=f;const g=Ae.vec3.normalize([],this.a),m=Ae.vec3.normalize([],this.b);this.angle=Math.acos(Ae.vec3.dot(g,m))}}function ts(h,s){if(h.angle===0)return null;let u;return u=h.a[s]===0?1/h.angle*.5*Math.PI:1/h.angle*Math.atan(h.b[s]/h.a[s]/Math.sin(h.angle)-1/Math.tan(h.angle)),u<0||u>1?null:function(f,g,m,_){const b=Math.sin(m);return f*(Math.sin((1-_)*m)/b)+g*(Math.sin(_*m)/b)}(h.a[s],h.b[s],h.angle,ka(u,0,1))+h.center[s]}function As(h){if(h.z<=1)return Kn[h.z+2*h.y+h.x];const s=oi(Pn(h));return ar.fromPoints(s)}function uo(h,s,u){return Ae.vec3.scale(h,h,1-u),Ae.vec3.scaleAndAdd(h,h,s,u)}function eo(h,s,u){for(const f of h)Ae.vec3.transformMat4(f,f,s),Ae.vec3.scale(f,f,u)}function wo(h,s,u,f){const g=s/h.worldSize,m=h.globeMatrix;if(u.z<=1){const We=As(u).getCorners();return eo(We,m,g),ar.fromPoints(We)}const _=Pn(u,f),b=oi(_,Tl+ln(h._tileCoverLift));eo(b,m,g);const O=Number.MAX_VALUE,D=[-O,-O,-O],C=[O,O,O];if(_.contains(h.center)){for(const gt of b)Ae.vec3.min(C,C,gt),Ae.vec3.max(D,D,gt);D[2]=0;const We=h.point,Ye=[We.x*g,We.y*g,0];return Ae.vec3.min(C,C,Ye),Ae.vec3.max(D,D,Ye),new ar(C,D)}if(h._tileCoverLift>0){for(const We of b)Ae.vec3.min(C,C,We),Ae.vec3.max(D,D,We);return new ar(C,D)}const V=[m[12]*g,m[13]*g,m[14]*g],I=_.getCenter(),z=ka(h.center.lat,-85.051129,Uu),M=ka(I.lat,-85.051129,Uu),B=Cl(h.center.lng),J=Oi(z);let te=B-Cl(I.lng);const he=J-Oi(M);te>.5?te-=1:te<-.5&&(te+=1);let de=0;if(Math.abs(te)>Math.abs(he))de=te>=0?1:3;else{de=he>=0?0:2;const We=[m[4]*g,m[5]*g,m[6]*g],Ye=-Math.sin(Ea(he>=0?_.getSouth():_.getNorth()))*Tl;Ae.vec3.scaleAndAdd(V,V,We,Ye)}const ie=b[de],ve=b[(de+1)%4],be=new Dn(ie,ve,V),Oe=[ts(be,0)||ie[0],ts(be,1)||ie[1],ts(be,2)||ie[2]],et=jl(h.zoom);if(et>0){const We=function({x:gt,y:tt,z:vt},xt,Ct,Dt,Nt){const jt=1/(1<<vt);let Lt=gt*jt,qt=Lt+jt,Aa=tt*jt,ga=Aa+jt,Qa=0;const Pa=(Lt+qt)/2-Dt;return Pa>.5?Qa=-1:Pa<-.5&&(Qa=1),Lt=((Lt+Qa)*xt-(Dt*=xt))*Ct+Dt,qt=((qt+Qa)*xt-Dt)*Ct+Dt,Aa=(Aa*xt-(Nt*=xt))*Ct+Nt,ga=(ga*xt-Nt)*Ct+Nt,[[Lt,ga,0],[qt,ga,0],[qt,Aa,0],[Lt,Aa,0]]}(u,s,h._pixelsPerMercatorPixel,B,J);for(let gt=0;gt<b.length;gt++)uo(b[gt],We[gt],et);const Ye=Ae.vec3.add([],We[de],We[(de+1)%4]);Ae.vec3.scale(Ye,Ye,.5),uo(Oe,Ye,et)}for(const We of b)Ae.vec3.min(C,C,We),Ae.vec3.max(D,D,We);return C[2]=Math.min(ie[2],ve[2]),Ae.vec3.min(C,C,Oe),Ae.vec3.max(D,D,Oe),new ar(C,D)}function Pn({x:h,y:s,z:u},f=!1){const g=1/(1<<u),m=new kn(ku(h*g),s===(1<<u)-1&&f?-90:Si((s+1)*g)),_=new kn(ku((h+1)*g),s===0&&f?90:Si(s*g));return new tf(m,_)}function oi(h,s=Tl){const u=Ea(h.getNorth()),f=Ea(h.getSouth()),g=Math.cos(u),m=Math.cos(f),_=Math.sin(u),b=Math.sin(f),O=h.getWest(),D=h.getEast();return[Rp(m,b,O,s),Rp(m,b,D,s),Rp(g,_,D,s),Rp(g,_,O,s)]}function Ln(h,s,u,f){const g=1<<u.z,m=(h/Va+u.x)/g;return Oc(Si((s/Va+u.y)/g),ku(m),f)}function ui({min:h,max:s}){return TA/Math.max(s[0]-h[0],s[1]-h[1],s[2]-h[2])}const Ro=new Float64Array(16);function bi(h){const s=ui(h),u=Ae.mat4.fromScaling(Ro,[s,s,s]);return Ae.mat4.translate(u,u,Ae.vec3.negate([],h.min))}function fs(h){const s=Ae.mat4.fromTranslation(Ro,h.min),u=1/ui(h);return Ae.mat4.scale(s,s,[u,u,u])}function Vc(h){const s=Va/(2*Math.PI);return h/(2*Math.PI)/s}function Xo(h,s){return Va/(512*Math.pow(2,h))*ui(As(s))}function cu(h,s,u,f,g){const m=Vc(u),_=[h,s,-u/(2*Math.PI)],b=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.translate(b,b,_),Ae.mat4.scale(b,b,[m,m,m]),Ae.mat4.rotateX(b,b,Ea(-g)),Ae.mat4.rotateY(b,b,Ea(-f)),b}function jl(h){return Gr(Oh,hm,h)}function ic(h,s){const u=Oc(s.lat,s.lng),f=function(m){const _=Oc(m._center.lat,m._center.lng),b=Ae.vec3.fromValues(0,1,0);let O=Ae.vec3.cross([],b,_);const D=Ae.mat4.fromRotation([],-m.angle,_);O=Ae.vec3.transformMat4(O,O,D),Ae.mat4.fromRotation(D,-m._pitch,O);const C=Ae.vec3.normalize([],_);return Ae.vec3.scale(C,C,ln(m.cameraToCenterDistance/m.pixelsPerMeter)),Ae.vec3.transformMat4(C,C,D),Ae.vec3.add([],_,C)}(h),g=Ae.vec3.subtract([],f,u);return Ae.vec3.angle(g,u)}function Sl(h,s){return ic(h,s)>Math.PI/2*1.01}const Jd=Ea(85),To=Math.cos(Jd),Vh=Math.sin(Jd),Gl=Ae.mat4.create(),Cp=h=>{const s=[];return h.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),h.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s};function fm(h,s,u,f,g,m,_,b,O){if(m&&h.queryGeometry.isAboveHorizon)return!1;m&&(O*=h.pixelToTileUnitsFactor);const D=h.tileID.canonical,C=u.projection.upVectorScale(D,u.center.lat,u.worldSize).metersToTile;for(const V of s)for(const I of V){const z=I.add(b),M=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(z.x,z.y,!0):0,B=u.projection.projectTilePoint(z.x,z.y,D);if(M>0){const de=u.projection.upVector(D,z.x,z.y);B.x+=de[0]*C*M,B.y+=de[1]*C*M,B.z+=de[2]*C*M}const J=m?z:ey(B.x,B.y,B.z,f),te=m?h.tilespaceRays.map(de=>Qv(de,M)):h.queryGeometry.screenGeometry,he=Ae.vec4.transformMat4([],[B.x,B.y,B.z,1],f);if(!_&&m?O*=he[3]/u.cameraToCenterDistance:_&&!m&&(O*=u.cameraToCenterDistance/he[3]),m){const de=Si((I.y/Va+D.y)/(1<<D.z));O/=u.projection.pixelsPerMeter(de,1)/Wo(1,de)}if(Ce(te,J,O))return!0}return!1}function ey(h,s,u,f){const g=Ae.vec4.transformMat4([],[h,s,u,1],f);return new It(g[0]/g[3],g[1]/g[3])}const _C=Ae.vec3.fromValues(0,0,0),Sp=Ae.vec3.fromValues(0,0,1);function Qv(h,s){const u=Ae.vec3.create();return _C[2]=s,h.intersectsPlane(_C,Sp,u),new It(u[0],u[1])}class e0 extends pe{}let lg,E1,N1,O1;function t0(h,{width:s,height:u},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==s*u*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(s*u*f);return h.width=s,h.height=u,h.data=g,h}function a0(h,s,u){const{width:f,height:g}=s;f===h.width&&g===h.height||(V1(h,s,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,f),height:Math.min(h.height,g)},u,null),h.width=f,h.height=g,h.data=s.data)}function V1(h,s,u,f,g,m,_,b){if(g.width===0||g.height===0)return s;if(g.width>h.width||g.height>h.height||u.x>h.width-g.width||u.y>h.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>s.width||g.height>s.height||f.x>s.width-g.width||f.y>s.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const O=h.data,D=s.data,C=m===4&&b;for(let V=0;V<g.height;V++){const I=((u.y+V)*h.width+u.x)*m,z=((f.y+V)*s.width+f.x)*m;if(C)for(let M=0;M<g.width;M++){const B=I+M*m+3,J=z+M*m;D[J+0]=255,D[J+1]=255,D[J+2]=255,D[J+3]=O[B]}else if(_)for(let M=0;M<g.width;M++){const B=I+M*m,J=z+M*m,te=O[B+3],he=new En(O[B+0]/255*te,O[B+1]/255*te,O[B+2]/255*te,te).toRenderColor(_).toArray();D[J+0]=he[0],D[J+1]=he[1],D[J+2]=he[2],D[J+3]=he[3]}else for(let M=0;M<g.width*m;M++)D[z+M]=O[I+M]}return s}Pt(e0,"HeatmapBucket",{omit:["layers"]});class pm{constructor(s,u){t0(this,s,1,u)}resize(s){a0(this,new pm(s),1)}clone(){return new pm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,f,g,m){V1(s,u,f,g,m,1,null)}}class bl{constructor(s,u){t0(this,s,4,u)}resize(s){a0(this,new bl(s),4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new bl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,f,g,m,_,b){V1(s,u,f,g,m,4,_,b)}}class z1{constructor(s,u){this.width=s.width,this.height=s.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function ty(h){const s={},u=h.resolution||256,f=h.clips?h.clips.length:1,g=h.image||new bl({width:u,height:f}),m=(_,b,O)=>{s[h.evaluationKey]=O;const D=h.expression.evaluate(s);D&&(g.data[_+b+0]=Math.floor(255*D.r/D.a),g.data[_+b+1]=Math.floor(255*D.g/D.a),g.data[_+b+2]=Math.floor(255*D.b/D.a),g.data[_+b+3]=Math.floor(255*D.a))};if(h.clips)for(let _=0,b=0;_<f;++_,b+=4*u)for(let O=0,D=0;O<u;O++,D+=4){const C=O/(u-1),{start:V,end:I}=h.clips[_];m(b,D,V*(1-C)+I*C)}else for(let _=0,b=0;_<u;_++,b+=4)m(0,b,_/(u-1));return g}Pt(pm,"AlphaImage"),Pt(bl,"RGBAImage");const ay=Nn([{name:"a_pos",components:2,type:"Int16"}],4),r0=Nn([{name:"a_road_z_offset",components:1,type:"Float32"}],4),wC=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),RC=Nn([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function xA(h,s,u=2){const f=s&&s.length,g=f?s[0]*u:h.length;let m=D1(h,0,g,u,!0);const _=[];if(!m||m.next===m.prev)return _;let b,O,D;if(f&&(m=function(C,V,I,z){const M=[];for(let B=0,J=V.length;B<J;B++){const te=D1(C,V[B]*z,B<J-1?V[B+1]*z:C.length,z,!1);te===te.next&&(te.steiner=!0),M.push(iy(te))}M.sort(nE);for(let B=0;B<M.length;B++)I=iE(M[B],I);return I}(h,s,m,u)),h.length>80*u){b=1/0,O=1/0;let C=-1/0,V=-1/0;for(let I=u;I<g;I+=u){const z=h[I],M=h[I+1];z<b&&(b=z),M<O&&(O=M),z>C&&(C=z),M>V&&(V=M)}D=Math.max(C-b,V-O),D=D!==0?32767/D:0}return ry(m,_,u,b,O,D,0),_}function D1(h,s,u,f,g){let m;if(g===function(_,b,O,D){let C=0;for(let V=b,I=O-D;V<O;V+=D)C+=(_[I]-_[V])*(_[V+1]+_[I+1]),I=V;return C}(h,s,u,f)>0)for(let _=s;_<u;_+=f)m=L1(_/f|0,h[_],h[_+1],m);else for(let _=u-f;_>=s;_-=f)m=L1(_/f|0,h[_],h[_+1],m);return m&&kf(m,m.next)&&(PA(m),m=m.next),m}function zh(h,s){if(!h)return h;s||(s=h);let u,f=h;do if(u=!1,f.steiner||!kf(f,f.next)&&co(f.prev,f,f.next)!==0)f=f.next;else{if(PA(f),f=s=f.prev,f===f.next)break;u=!0}while(u||f!==s);return s}function ry(h,s,u,f,g,m,_){if(!h)return;!_&&m&&function(O,D,C,V){let I=O;do I.z===0&&(I.z=ny(I.x,I.y,D,C,V)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==O);I.prevZ.nextZ=null,I.prevZ=null,function(z){let M,B=1;do{let J,te=z;z=null;let he=null;for(M=0;te;){M++;let de=te,ie=0;for(let be=0;be<B&&(ie++,de=de.nextZ,de);be++);let ve=B;for(;ie>0||ve>0&&de;)ie!==0&&(ve===0||!de||te.z<=de.z)?(J=te,te=te.nextZ,ie--):(J=de,de=de.nextZ,ve--),he?he.nextZ=J:z=J,J.prevZ=he,he=J;te=de}he.nextZ=null,B*=2}while(M>1)}(I)}(h,f,g,m);let b=h;for(;h.prev!==h.next;){const O=h.prev,D=h.next;if(m?M1(h,f,g,m):js(h))s.push(O.i,h.i,D.i),PA(h),h=D.next,b=D.next;else if((h=D)===b){_?_===1?ry(h=rE(zh(h),s),s,u,f,g,m,2):_===2&&TC(h,s,u,f,g,m):ry(zh(h),s,u,f,g,m,1);break}}}function js(h){const s=h.prev,u=h,f=h.next;if(co(s,u,f)>=0)return!1;const g=s.x,m=u.x,_=f.x,b=s.y,O=u.y,D=f.y,C=g<m?g<_?g:_:m<_?m:_,V=b<O?b<D?b:D:O<D?O:D,I=g>m?g>_?g:_:m>_?m:_,z=b>O?b>D?b:D:O>D?O:D;let M=f.next;for(;M!==s;){if(M.x>=C&&M.x<=I&&M.y>=V&&M.y<=z&&mm(g,b,m,O,_,D,M.x,M.y)&&co(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function M1(h,s,u,f){const g=h.prev,m=h,_=h.next;if(co(g,m,_)>=0)return!1;const b=g.x,O=m.x,D=_.x,C=g.y,V=m.y,I=_.y,z=b<O?b<D?b:D:O<D?O:D,M=C<V?C<I?C:I:V<I?V:I,B=b>O?b>D?b:D:O>D?O:D,J=C>V?C>I?C:I:V>I?V:I,te=ny(z,M,s,u,f),he=ny(B,J,s,u,f);let de=h.prevZ,ie=h.nextZ;for(;de&&de.z>=te&&ie&&ie.z<=he;){if(de.x>=z&&de.x<=B&&de.y>=M&&de.y<=J&&de!==g&&de!==_&&mm(b,C,O,V,D,I,de.x,de.y)&&co(de.prev,de,de.next)>=0||(de=de.prevZ,ie.x>=z&&ie.x<=B&&ie.y>=M&&ie.y<=J&&ie!==g&&ie!==_&&mm(b,C,O,V,D,I,ie.x,ie.y)&&co(ie.prev,ie,ie.next)>=0))return!1;ie=ie.nextZ}for(;de&&de.z>=te;){if(de.x>=z&&de.x<=B&&de.y>=M&&de.y<=J&&de!==g&&de!==_&&mm(b,C,O,V,D,I,de.x,de.y)&&co(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;ie&&ie.z<=he;){if(ie.x>=z&&ie.x<=B&&ie.y>=M&&ie.y<=J&&ie!==g&&ie!==_&&mm(b,C,O,V,D,I,ie.x,ie.y)&&co(ie.prev,ie,ie.next)>=0)return!1;ie=ie.nextZ}return!0}function rE(h,s){let u=h;do{const f=u.prev,g=u.next.next;!kf(f,g)&&rf(f,u,u.next,g)&&sy(f,g)&&sy(g,f)&&(s.push(f.i,u.i,g.i),PA(u),PA(u.next),u=h=g),u=u.next}while(u!==h);return zh(u)}function TC(h,s,u,f,g,m){let _=h;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&n0(_,b)){let O=I1(_,b);return _=zh(_,_.next),O=zh(O,O.next),ry(_,s,u,f,g,m,0),void ry(O,s,u,f,g,m,0)}b=b.next}_=_.next}while(_!==h)}function nE(h,s){return h.x-s.x}function iE(h,s){const u=function(g,m){let _=m;const b=g.x,O=g.y;let D,C=-1/0;do{if(O<=_.y&&O>=_.next.y&&_.next.y!==_.y){const B=_.x+(O-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(B<=b&&B>C&&(C=B,D=_.x<_.next.x?_:_.next,B===b))return D}_=_.next}while(_!==m);if(!D)return null;const V=D,I=D.x,z=D.y;let M=1/0;_=D;do{if(b>=_.x&&_.x>=I&&b!==_.x&&mm(O<z?b:C,O,I,z,O<z?C:b,O,_.x,_.y)){const B=Math.abs(O-_.y)/(b-_.x);sy(_,g)&&(B<M||B===M&&(_.x>D.x||_.x===D.x&&sE(D,_)))&&(D=_,M=B)}_=_.next}while(_!==V);return D}(h,s);if(!u)return s;const f=I1(u,h);return zh(f,f.next),zh(u,u.next)}function sE(h,s){return co(h.prev,h,s.prev)<0&&co(s.next,h,h.next)<0}function ny(h,s,u,f,g){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*g|0)|h<<8))|h<<4))|h<<2))|h<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-f)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function iy(h){let s=h,u=h;do(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next;while(s!==h);return u}function mm(h,s,u,f,g,m,_,b){return(g-_)*(s-b)>=(h-_)*(m-b)&&(h-_)*(f-b)>=(u-_)*(s-b)&&(u-_)*(m-b)>=(g-_)*(f-b)}function n0(h,s){return h.next.i!==s.i&&h.prev.i!==s.i&&!function(u,f){let g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==f.i&&g.next.i!==f.i&&rf(g,g.next,u,f))return!0;g=g.next}while(g!==u);return!1}(h,s)&&(sy(h,s)&&sy(s,h)&&function(u,f){let g=u,m=!1;const _=(u.x+f.x)/2,b=(u.y+f.y)/2;do g.y>b!=g.next.y>b&&g.next.y!==g.y&&_<(g.next.x-g.x)*(b-g.y)/(g.next.y-g.y)+g.x&&(m=!m),g=g.next;while(g!==u);return m}(h,s)&&(co(h.prev,h,s.prev)||co(h,s.prev,s))||kf(h,s)&&co(h.prev,h,h.next)>0&&co(s.prev,s,s.next)>0)}function co(h,s,u){return(s.y-h.y)*(u.x-s.x)-(s.x-h.x)*(u.y-s.y)}function kf(h,s){return h.x===s.x&&h.y===s.y}function rf(h,s,u,f){const g=i0(co(h,s,u)),m=i0(co(h,s,f)),_=i0(co(u,f,h)),b=i0(co(u,f,s));return g!==m&&_!==b||!(g!==0||!gm(h,u,s))||!(m!==0||!gm(h,f,s))||!(_!==0||!gm(u,h,f))||!(b!==0||!gm(u,s,f))}function gm(h,s,u){return s.x<=Math.max(h.x,u.x)&&s.x>=Math.min(h.x,u.x)&&s.y<=Math.max(h.y,u.y)&&s.y>=Math.min(h.y,u.y)}function i0(h){return h>0?1:h<0?-1:0}function sy(h,s){return co(h.prev,h,h.next)<0?co(h,s,h.next)>=0&&co(h,h.prev,s)>=0:co(h,s,h.prev)<0||co(h,h.next,s)<0}function I1(h,s){const u=EA(h.i,h.x,h.y),f=EA(s.i,s.x,s.y),g=h.next,m=s.prev;return h.next=s,s.prev=h,u.next=g,g.prev=u,f.next=u,u.prev=f,m.next=f,f.prev=m,f}function L1(h,s,u,f){const g=EA(h,s,u);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function PA(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function EA(h,s,u){return{i:h,x:s,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function NA(h,s){const u=h.length;if(u<=1)return[h];const f=[];let g,m;for(let _=0;_<u;_++){const b=$i(h[_]);b!==0&&(h[_].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(g&&f.push(g),g=[h[_]]):g.push(h[_]))}if(g&&f.push(g),s>1)for(let _=0;_<f.length;_++)f[_].length<=s||(Cf(f[_],s,1,f[_].length-1,CC),f[_]=f[_].slice(0,s));return f}function CC(h,s){return s.area-h.area}function SC(h,s,u=1){if(!h)return null;const f=typeof h=="string"?Ns.from(h).getPrimary():h.getPrimary(),g=f.id.toString();return s.has(g)||s.set(g,[]),f.scaleSelf(u),s.get(g).push(f),f.toString()}function OA(h,s,u,f){const g=f.patternDependencies;let m=!1;for(const _ of s){const b=_.paint.get(`${h}-pattern`);b.isConstant()||(m=!0),SC(b.constantOr(null),g,u)&&(m=!0)}return m}function VA(h,s,u,f,g,m){const _=m.patternDependencies;for(const b of s){const O=b.paint.get(`${h}-pattern`).value;if(O.kind!=="constant"){let D=O.evaluate({zoom:f},u,{},m.availableImages);D=D&&D.name?D.name:D;const C=SC(D,_,g);C&&(u.patterns[b.id]=C)}}return u}var F1,bC,ug,xC,s0,Fi,o0,cg={};function l0(){if(bC)return F1;bC=1;var h=ma();function s(g,m,_,b,O){this.properties={},this.extent=_,this.type=0,this._pbf=g,this._geometry=-1,this._keys=b,this._values=O,g.readFields(u,this,m)}function u(g,m,_){g==1?m.id=_.readVarint():g==2?function(b,O){for(var D=b.readVarint()+b.pos;b.pos<D;){var C=O._keys[b.readVarint()],V=O._values[b.readVarint()];O.properties[C]=V}}(_,m):g==3?m.type=_.readVarint():g==4&&(m._geometry=_.pos)}function f(g){for(var m,_,b=0,O=0,D=g.length,C=D-1;O<D;C=O++)b+=((_=g[C]).x-(m=g[O]).x)*(m.y+_.y);return b}return F1=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var m,_=g.readVarint()+g.pos,b=1,O=0,D=0,C=0,V=[];g.pos<_;){if(O<=0){var I=g.readVarint();b=7&I,O=I>>3}if(O--,b===1||b===2)D+=g.readSVarint(),C+=g.readSVarint(),b===1&&(m&&V.push(m),m=[]),m.push(new h(D,C));else{if(b!==7)throw new Error("unknown command "+b);m&&m.push(m[0].clone())}}return m&&V.push(m),V},s.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var m=g.readVarint()+g.pos,_=1,b=0,O=0,D=0,C=1/0,V=-1/0,I=1/0,z=-1/0;g.pos<m;){if(b<=0){var M=g.readVarint();_=7&M,b=M>>3}if(b--,_===1||_===2)(O+=g.readSVarint())<C&&(C=O),O>V&&(V=O),(D+=g.readSVarint())<I&&(I=D),D>z&&(z=D);else if(_!==7)throw new Error("unknown command "+_)}return[C,I,V,z]},s.prototype.toGeoJSON=function(g,m,_){var b,O,D=this.extent*Math.pow(2,_),C=this.extent*g,V=this.extent*m,I=this.loadGeometry(),z=s.types[this.type];function M(te){for(var he=0;he<te.length;he++){var de=te[he];te[he]=[360*(de.x+C)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(de.y+V)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(b=0;b<I.length;b++)B[b]=I[b][0];M(I=B);break;case 2:for(b=0;b<I.length;b++)M(I[b]);break;case 3:for(I=function(te){var he=te.length;if(he<=1)return[te];for(var de,ie,ve=[],be=0;be<he;be++){var Oe=f(te[be]);Oe!==0&&(ie===void 0&&(ie=Oe<0),ie===Oe<0?(de&&ve.push(de),de=[te[be]]):de.push(te[be]))}return de&&ve.push(de),ve}(I),b=0;b<I.length;b++)for(O=0;O<I[b].length;O++)M(I[b][O])}I.length===1?I=I[0]:z="Multi"+z;var J={type:"Feature",geometry:{type:z,coordinates:I},properties:this.properties};return"id"in this&&(J.id=this.id),J},F1}function k1(){if(xC)return ug;xC=1;var h=l0();function s(f,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(u,this,g),this.length=this._features.length}function u(f,g,m){f===15?g.version=m.readVarint():f===1?g.name=m.readString():f===5?g.extent=m.readVarint():f===2?g._features.push(m.pos):f===3?g._keys.push(m.readString()):f===4&&g._values.push(function(_){for(var b=null,O=_.readVarint()+_.pos;_.pos<O;){var D=_.readVarint()>>3;b=D===1?_.readString():D===2?_.readFloat():D===3?_.readDouble():D===4?_.readVarint64():D===5?_.readVarint():D===6?_.readSVarint():D===7?_.readBoolean():null}return b}(m))}return ug=s,s.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var g=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,g,this.extent,this._keys,this._values)},ug}function u0(){return o0||(o0=1,cg.VectorTile=function(){if(Fi)return s0;Fi=1;var h=k1();function s(u,f,g){if(u===3){var m=new h(g,g.readVarint()+g.pos);m.length&&(f[m.name]=m)}}return s0=function(u,f){this.layers=u.readFields(s,{},f)},s0}(),cg.VectorTileFeature=l0(),cg.VectorTileLayer=k1()),cg}var Dh=u0();const Uf="3d_elevation_id",dg="level";class PC{constructor(){this._valid=!1}reset(s){return this.feature=s,this._valid=!0,this._geometry=s.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(s,u){return this._valid&&s(u(this._geometry)),this}require(s,u,f){return this.get(s,!0,u,f)}optional(s,u,f){return this.get(s,!1,u,f)}success(){return this._valid}get(s,u,f,g){const m=this.feature.properties.hasOwnProperty(s)?+this.feature.properties[s]:void 0;return this._valid&&m!==void 0?f(g?g(m):m):u&&(this._valid=!1),this}}class EC{constructor(s,u){this.featureFunc=s,this.vertexFunc=u}parseFeature(s,u,f){return this.featureFunc(s,u,f)}parseVertex(s,u,f){return this.vertexFunc(s,u,f)}}const oE=new EC((h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).optional("fixed_height_relative",f=>{u.constantHeight=f},Bf.decodeRelativeHeight).geometry(f=>{u.bounds=f},Bf.computeBounds).success(),(h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height_relative",f=>{u.height=f},Bf.decodeRelativeHeight).geometry(f=>{u.position=f},Bf.getPoint).success()),NC=new EC((h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).optional("fixed_height",f=>{u.constantHeight=f},Bf.decodeMetricHeight).geometry(f=>{u.bounds=f},Bf.computeBounds).success(),(h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height",f=>{u.height=f},Bf.decodeMetricHeight).geometry(f=>{u.position=f},Bf.getPoint).success());class Bf{static computeBounds(s){const u=new It(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=new It(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const g of s[0])u.x>g.x&&(u.x=g.x),u.y>g.y&&(u.y=g.y),f.x<g.x&&(f.x=g.x),f.y<g.y&&(f.y=g.y);return{min:u,max:f}}static getPoint(s){return Ae.vec2.fromValues(s[0][0].x,s[0][0].y)}static decodeRelativeHeight(s){return 1e-4*s*5}static decodeMetricHeight(s){return 1e-4*s}static parse(s){const u=[],f=[],g=s.length,m=new PC;for(let b=0;b<g;b++){const O=s.feature(b),D=O.properties.hasOwnProperty("version")?String(O.properties.version):void 0,C=(_=D)?_==="1.0.1"?NC:void 0:oE;if(C===void 0){$r(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const V=O.properties.hasOwnProperty("type")?O.properties.type:void 0;if(V){if(Dh.VectorTileFeature.types[O.type]==="Point"&&V==="curve_point"){const I={};C.parseVertex(m,O,I)&&u.push(I)}else if(Dh.VectorTileFeature.types[O.type]==="Polygon"&&V==="curve_meta"){const I={};C.parseFeature(m,O,I)&&f.push(I)}}}var _;return{vertices:u,features:f}}}class oy{constructor(s,u,f,g,m,_){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=s,this.heightRange={min:f,max:f},this.safeArea=u,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||g.length!==0)){this.vertices=g,this.edges=m,this.edges=this.edges.filter(b=>b.a<this.vertices.length&&b.b<this.vertices.length&&!Ae.vec2.exactEquals(this.vertices[b.a].position,this.vertices[b.b].position)),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const b of this.vertices)this.vertexProps.push({dir:Ae.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,b.height),this.heightRange.max=Math.max(this.heightRange.max,b.height);for(const b of this.edges){const O=this.vertices[b.a].position,D=this.vertices[b.b].position,C=Ae.vec2.subtract(Ae.vec2.create(),D,O),V=Ae.vec2.length(C),I=Ae.vec2.scale(Ae.vec2.create(),C,1/V);this.edgeProps.push({vec:C,dir:I,len:V});const z=this.vertexProps[b.a].dir,M=this.vertexProps[b.b].dir;Ae.vec2.add(z,z,I),Ae.vec2.add(M,M,I)}for(const b of this.vertexProps)b.dir[0]===0&&b.dir[1]===0||Ae.vec2.normalize(b.dir,b.dir);this.tessellate(_)}}pointElevation(s){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(s);if(u==null)return 0;const[f,g]=u;return((m,_,b)=>(1-b)*m+b*_)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,g)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(s){if(this.edges.length===0)return;let u=0,f=Number.POSITIVE_INFINITY,g=0;const m=Ae.vec2.fromValues(s.x,s.y);for(let _=0;_<this.edges.length;_++){const b=this.edges[_],O=this.edgeProps[_].dir,D=new Dr(m,this.edgeProps[_].dir),C=this.vertices[b.a].position,V=this.vertices[b.b].position,I=Ae.vec2.create(),z=Ae.vec2.create(),M=D.intersectsPlane(C,this.vertexProps[b.a].dir,I),B=D.intersectsPlane(V,this.vertexProps[b.b].dir,z);if(!M||!B)continue;const J=Ae.vec2.subtract(Ae.vec2.create(),z,I),te=Ae.vec2.subtract(Ae.vec2.create(),m,I),he=Ae.vec2.dot(J,J),de=he>0?Ae.vec2.dot(te,J)/he:0,ie=ka(de,0,1),ve=Math.abs((de-ie)*this.edgeProps[_].len),be=Ae.vec2.subtract(Ae.vec2.create(),m,C),Oe=ve+Math.abs(Ae.vec2.dot(be,Ae.vec2.fromValues(O[1],-O[0])));Oe<f&&(u=_,f=Oe,g=ie)}return[u,g]}tessellate(s){for(let u=this.edges.length-1;u>=0;--u){const f=this.edges[u].a,g=this.edges[u].b,{position:m,height:_,extent:b}=this.vertices[f],{position:O,height:D,extent:C}=this.vertices[g],V=this.vertexProps[f].dir,I=this.vertexProps[g].dir,z=Ae.vec3.fromValues(m[0]/s,m[1]/s,_),M=Ae.vec3.fromValues(O[0]/s,O[1]/s,D),B=Ae.vec3.fromValues(V[1],-V[0],0);Ae.vec3.scale(B,B,b);const J=Ae.vec3.fromValues(I[1],-I[0],0);if(Ae.vec3.scale(J,J,C),this.distSqLines(Ae.vec3.fromValues(z[0]+.5*B[0],z[1]+.5*B[1],z[2]+.5*B[2]),Ae.vec3.fromValues(M[0]-.5*J[0],M[1]-.5*J[1],M[2]-.5*J[2]),Ae.vec3.fromValues(z[0]-.5*B[0],z[1]-.5*B[1],z[2]-.5*B[2]),Ae.vec3.fromValues(M[0]+.5*J[0],M[1]+.5*J[1],M[2]+.5*J[2]))<=.05*.05)continue;const te=this.vertices.length,he=Ae.vec2.add(Ae.vec2.create(),m,O);this.vertices.push({position:Ae.vec2.scale(he,he,.5),height:.5*(_+D),extent:.5*(b+C)});const de=Ae.vec2.add(Ae.vec2.create(),V,I);this.vertexProps.push({dir:Ae.vec2.normalize(de,de)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:f,b:te}),this.edges.push({a:te,b:g});const ie=Ae.vec2.subtract(Ae.vec2.create(),this.vertices[te].position,m),ve=Ae.vec2.length(ie),be={vec:ie,dir:Ae.vec2.scale(Ae.vec2.create(),ie,1/ve),len:ve};this.edgeProps.push(be),this.edgeProps.push(be)}}distSqLines(s,u,f,g){const m=Ae.vec3.subtract(Ae.vec3.create(),u,s),_=Ae.vec3.subtract(Ae.vec3.create(),g,f),b=Ae.vec3.subtract(Ae.vec3.create(),s,f),O=Ae.vec3.dot(m,m),D=Ae.vec3.dot(m,_),C=Ae.vec3.dot(m,b),V=Ae.vec3.dot(_,_),I=Ae.vec3.dot(_,b),z=O*V-D*D;if(z===0){const he=Ae.vec3.dot(b,_)/Ae.vec3.dot(_,_),de=Ae.vec3.lerp(Ae.vec3.create(),f,g,he);return Ae.vec3.squaredDistance(de,s)}const M=(D*I-C*V)/z,B=(O*I-D*C)/z,J=Ae.vec3.lerp(Ae.vec3.create(),s,u,M),te=Ae.vec3.lerp(Ae.vec3.create(),f,g,B);return Ae.vec3.squaredDistance(J,te)}}class Is{constructor(s,u){this.zScale=1,this.xOffset=0,this.yOffset=0,s.equals(u)||(this.zScale=Math.pow(2,u.z-s.z),this.xOffset=(s.x*this.zScale-u.x)*Va,this.yOffset=(s.y*this.zScale-u.y)*Va)}constantElevation(s,u){if(s.constantHeight!=null)return this.computeBiasedHeight(s.constantHeight,u)}pointElevation(s,u,f){const g=this.constantElevation(u,f);return g??(s.x=s.x*this.zScale+this.xOffset,s.y=s.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(s),f))}computeBiasedHeight(s,u){return u<=0?s:s+u*Gr(0,u,s>=0?s:Math.abs(.5*s))}}Pt(oy,"ElevationFeature");class c0{constructor(){this.polygons=new Map}add(s,...u){this.polygons.has(s)?this.polygons.get(s).push(...u):this.polygons.set(s,u)}merge(s){for(const[u,f]of s.polygons)this.add(u,...f)}}class Oo{constructor(){this.portals=[]}static evaluate(s){if(s.length===0)return new Oo;let u=[];for(const D of s)u.push(...D.portals);if(u.length===0)return new Oo;const f=(D,C)=>D<=0&&C<=0||D>=Va&&C>=Va;for(const D of u){const C=D.va,V=D.vb;(f(C.x,V.x)||f(C.y,V.y))&&(D.type="border")}const g=u.filter(D=>D.type!=="unevaluated"),m=u.filter(D=>D.type==="unevaluated");if(m.length===0)return new Oo;m.sort((D,C)=>D.hash===C.hash?D.isTunnel===C.isTunnel?0:D.isTunnel?-1:1:D.hash<C.hash?1:-1),u=g.concat(m);let _=g.length,b=_,O=_;do if(b++,b===u.length||u[_].hash!==u[b].hash){if(b-_==2){O<_&&(u[O]=u[_],u[_]=null);const D=u[O],C=u[b-1];D.type=D.isTunnel!==C.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:C.connection.a},O++}_=b}while(_!==u.length);return u.splice(O),u.sort((D,C)=>D.hash<C.hash?1:-1),{portals:u}}}Pt(Oo,"ElevationPortalGraph"),Pt(c0,"ElevationPolygons");class lE{constructor(s,u,f){this.outPositions=s,this.outNormals=u,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(s,u,f){let g=s[2];f!=null&&(g*=f);const m=this.getVec3Bits(s)<<96n|this.getVec3Bits(u),_=this.vertexLookup.get(m);if(_!=null)return _;const b=this.outPositions.length;this.vertexLookup.set(m,b);const O=Math.trunc(16384*u[0]),D=Math.trunc(16384*u[1]),C=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(s[0],s[1],g),this.outNormals.emplaceBack(O,D,C),b}addVertices(s,u,...f){const g=[];for(const m of f){const _=this.addVertex(m,s,u);g.push(_)}return g}addTriangles(s,u,f){if(u&&f){const g=f.length===1,m=Ae.vec3.fromValues(0,0,0);for(let _=0;_<s.length;_+=3){const b=u[s[_+0]],O=u[s[_+1]],D=u[s[_+2]],C=g?f[0]:f[s[_+1]],V=g?f[0]:f[s[_+2]],I=this.addVertex(Ae.vec3.fromValues(b.x,b.y,g?f[0]:f[s[_+0]]),m),z=this.addVertex(Ae.vec3.fromValues(O.x,O.y,C),m),M=this.addVertex(Ae.vec3.fromValues(D.x,D.y,V),m);this.outIndices.emplaceBack(I,z,M)}}else for(let g=0;g<s.length;g+=3)this.outIndices.emplaceBack(s[g+0],s[g+1],s[g+2])}addQuad(s,u){const f=this.addVertices(u,void 0,...s.map(O=>Ae.vec3.fromValues(O.coord.x,O.coord.y,O.height))),[g,m,_,b]=f;this.addTriangles([g,m,_,_,b,g])}getBits(s){return this.view.setFloat32(0,s),BigInt(this.view.getUint32(0))}getVec3Bits(s){return this.getBits(s[0])<<64n|this.getBits(s[1])<<32n|this.getBits(s[2])}}class Qd{constructor(s){this.unevaluatedPortals=new Oo,this.portalPolygons=new c0,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new Of,this.vertexNormals=new Jh,this.indexArray=new Ms,this.tileToMeters=y(s)}addVertices(s,u){const f=this.unevalVertices.length;for(let g=0;g<s.length;g++)this.unevalVertices.push(s[g]),this.unevalHeights.push(u[g]);return f}addTriangles(s,u,f){const g=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const m of s)g.push(m+u)}addRenderableRing(s,u,f,g,m){const _=[new It(m.min.x,m.min.y),new It(m.max.x,m.min.y),new It(m.max.x,m.max.y),new It(m.min.x,m.max.y)];for(let b=0;b<f-1;b++){const O=u+b,D=O+1,C=this.unevalVertices[O],V=this.unevalVertices[D];if(!(C.x>=m.min.x&&C.x<=m.max.x&&C.y>=m.min.y&&C.y<=m.max.y||V.x>=m.min.x&&V.x<=m.max.x&&V.y>=m.min.y&&V.y<=m.max.y||At(C,V,_))||this.isOnBorder(C.x,V.x)||this.isOnBorder(C.y,V.y))continue;const I=Qd.computeEdgeHash(this.unevalVertices[O],this.unevalVertices[D]);let z,M=this.vertexHashLookup.get(Qd.computePosHash(C));M!=null?z=M.next:(M=this.vertexHashLookup.get(Qd.computePosHash(V)),z=M!=null?M.prev:I),this.unevalEdges.push({polygonIdx:s,a:O,b:D,hash:I,portalHash:z,isTunnel:g,type:"unevaluated"})}}addPortalCandidates(s,u,f,g,m){if(u.length===0)return;this.portalPolygons.add(s,{geometry:u,zLevel:m});const _=u[0];this.vertexHashLookup.clear();let b=Qd.computeEdgeHash(_[_.length-2],_[_.length-1]);for(let O=0;O<_.length-1;O++){const D=_[O+0],C=_[O+1],V=Ae.vec2.fromValues(C.x-D.x,C.y-D.y),I=Ae.vec2.length(V);if(I===0)continue;let z="unevaluated";const M=g.pointElevation(D),B=g.pointElevation(C);Math.abs(M)<.01&&Math.abs(B)<.01?z="entrance":(this.isOnBorder(D.x,C.x)||this.isOnBorder(D.y,C.y))&&(z="border");const J=Qd.computeEdgeHash(D,C);this.unevaluatedPortals.portals.push({connection:{a:s,b:void 0},va:D,vb:C,vab:V,length:I,hash:J,isTunnel:f,type:z});const te=Qd.computePosHash(D);this.vertexHashLookup.set(te,{prev:b,next:J}),b=J}}construct(s){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=V=>{V.primitiveLength=this.indexArray.length-V.primitiveOffset},g=new lE(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(s.portals,this.unevalEdges);const m=u(),_=u(),b=u(),O=(V,I)=>{V.sort((M,B)=>M.type===I&&B.type!==I?-1:M.type!==I&&B.type===I?1:0);const z=V.findIndex(M=>M.type!==I);return z>=0?z:V.length};let D=0;this.unevalEdges.length>0&&(D=O(this.unevalEdges,"none"),this.constructBridgeStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},this.tileToMeters));const C=u();if(this.unevalEdges.length>0){const V=this.unevalEdges.splice(D),I=O(V,"tunnel")+D;this.unevalEdges.push(...V),this.constructTunnelStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},{min:D,max:I})}f(b),g.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f(C),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(_),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(m),this.maskSegments=Li.simpleSegment(0,C.primitiveOffset,0,C.primitiveLength),this.depthSegments=Li.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength),this.renderableSegments=Li.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.shadowCasterSegments=Li.simpleSegment(0,m.primitiveOffset,0,m.primitiveLength)}upload(s){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=s.createVertexBuffer(this.vertexPositions,wC.members),this.vertexBufferNormal=s.createVertexBuffer(this.vertexNormals,RC.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(s,u,f,g){const m=new Map;for(let _=f;_<g;_++){const b=u[_],O=b.a,D=b.b;m.has(O)||m.set(O,{}),m.has(D)||m.set(D,{});const C=m.get(O),V=m.get(D);s[D]>0&&(C.to=D),s[O]>0&&(V.from=O)}return m}constructBridgeStructures(s,u,f,g,m,_){const b=this.computeVertexConnections(f,g,m.min,m.max),O=1/_,D=.5*O,C=I=>Ae.vec3.fromValues(u[I].x,u[I].y,f[I]*O),V=I=>{const z=b.get(I),M=z.from,B=z.to;if(!M||!B)return;const J=C(M),te=C(I),he=C(B),de=Ae.vec3.fromValues(0,0,0);if(!Ae.vec3.exactEquals(J,te)){const ve=Ae.vec3.sub(Ae.vec3.create(),te,J);Ae.vec3.add(de,de,Ae.vec3.normalize(ve,ve))}if(!Ae.vec3.exactEquals(he,te)){const ve=Ae.vec3.sub(Ae.vec3.create(),he,te);Ae.vec3.add(de,de,Ae.vec3.normalize(ve,ve))}const ie=Ae.vec3.len(de);return ie>0?Ae.vec3.scale(de,de,1/ie):void 0};for(let I=m.min;I<m.max;I++){const z=g[I],M=this.prepareEdgePoints(u,f,z,(wa,vr)=>wa>=vr);if(M==null)continue;const B=M[0],J=M[1],te=Ae.vec3.fromValues(B.coord.x,B.coord.y,O*B.height),he=Ae.vec3.fromValues(J.coord.x,J.coord.y,O*J.height);if(Ae.vec3.exactEquals(te,he))continue;const de=Ae.vec3.sub(Ae.vec3.create(),he,te);Ae.vec3.normalize(de,de);const ie=wa=>Ae.vec3.normalize(wa,wa),ve=V(z.a)||de,be=V(z.b)||de,Oe=ie(Ae.vec3.fromValues(ve[1],-ve[0],0)),et=ie(Ae.vec3.fromValues(be[1],-be[0],0)),We=ie(Ae.vec3.cross(Ae.vec3.create(),Oe,ve)),Ye=ie(Ae.vec3.cross(Ae.vec3.create(),et,be)),gt=Ae.vec3.create(),tt=[Ae.vec3.add(Ae.vec3.create(),te,Ae.vec3.scale(gt,Ae.vec3.sub(gt,Oe,We),D)),Ae.vec3.add(Ae.vec3.create(),te,Ae.vec3.scale(gt,Ae.vec3.add(gt,Oe,We),D)),Ae.vec3.add(Ae.vec3.create(),te,Ae.vec3.scale(gt,We,D)),te],vt=[Ae.vec3.add(Ae.vec3.create(),he,Ae.vec3.scale(gt,Ae.vec3.sub(gt,et,Ye),D)),Ae.vec3.add(Ae.vec3.create(),he,Ae.vec3.scale(gt,Ae.vec3.add(gt,et,Ye),D)),Ae.vec3.add(Ae.vec3.create(),he,Ae.vec3.scale(gt,Ye,D)),he],[xt,Ct]=s.addVertices(Oe,_,tt[0],tt[1]),[Dt,Nt]=s.addVertices(et,_,vt[0],vt[1]);s.addTriangles([xt,Ct,Dt,Ct,Nt,Dt]);const[jt,Lt]=s.addVertices(We,_,tt[1],tt[2]),[qt,Aa]=s.addVertices(Ye,_,vt[1],vt[2]);s.addTriangles([jt,Lt,qt,Lt,Aa,qt]);const[ga,Qa]=s.addVertices(Ae.vec3.negate(Oe,Oe),_,tt[2],tt[3]),[Pa,za]=s.addVertices(Ae.vec3.negate(et,et),_,vt[2],vt[3]);s.addTriangles([ga,Qa,Pa,Qa,za,Pa])}}constructTunnelStructures(s,u,f,g,m,_){const b=O=>Ae.vec3.normalize(O,O);for(let O=m.min;O<m.max;O++){const D=this.prepareEdgePoints(u,f,g[O],(z,M)=>z<=M);if(D==null)continue;const[C,V]=D,I=b(Ae.vec3.fromValues(V.coord.y-C.coord.y,-(V.coord.x-C.coord.x),0));s.addQuad([C,V,{coord:V.coord,height:g[O].isTunnel?-.1:0},{coord:C.coord,height:g[O].isTunnel?-.1:0}],I)}for(let O=_.min;O<_.max;O++){const D=g[O],C=u[D.a],V=u[D.b],I=b(Ae.vec3.fromValues(V.y-C.y,-(V.x-C.x),0));s.addQuad([{coord:V,height:0},{coord:C,height:0},{coord:C,height:f[D.a]+4},{coord:V,height:f[D.b]+4}],I),s.addQuad([{coord:C,height:0},{coord:V,height:0},{coord:V,height:f[D.b]+4},{coord:C,height:f[D.a]+4}],I)}}prepareEdgePoints(s,u,f,g){const m=s[f.a],_=s[f.b];let b=u[f.a],O=u[f.b];if(!(b!==0&&g(b,0)||O!==0&&g(O,0)))return;const D=m.clone(),C=_.clone();if(g(b,0)){if(!g(O,0)){const V=O/(O-b);C.x=mr(C.x,D.x,V),C.y=mr(C.y,D.y,V),O=mr(O,b,V)}}else{const V=b/(b-O);D.x=mr(D.x,C.x,V),D.y=mr(D.y,C.y,V),b=mr(b,O,V)}return[{coord:D,height:b},{coord:C,height:O}]}prepareEdges(s,u){if(u.length===0)return;u.sort((b,O)=>b.hash===O.hash?O.polygonIdx-b.polygonIdx:O.hash>b.hash?1:-1);let f=0,g=0,m=0,_=u[f].polygonIdx;do g++,(g===u.length||u[f].hash!==u[g].hash)&&((g-f==1||u[g-1].polygonIdx!==_)&&(m<f&&(u[m]=u[f],u[f]=null),u[m].type="none",m++),f=g,f!==u.length&&(_=u[f].polygonIdx));while(f!==u.length);if(u.splice(m),u.length!==0&&s.length!==0){u.sort((D,C)=>D.hash<C.hash?1:-1);let b=0,O=0;for(;b!==u.length&&O!==s.length;){const D=u[b],C=s[O];D.portalHash>C.hash?b++:C.hash>D.portalHash?O++:(D.type=C.type,b++)}}}isOnBorder(s,u){return s<=0&&u<=0||s>=Va&&u>=Va}static computeEdgeHash(s,u){return(s.y===u.y&&s.x>u.x||s.y>u.y)&&([s,u]=[u,s]),BigInt(Qd.computePosHash(s))<<32n|BigInt(Qd.computePosHash(u))}static computePosHash(s){return((65535&s.x)<<16|65535&s.y)>>>0}}class zA{constructor(s,u){this.layoutVertexArray=new Mu,this.indexArray=new Ms,this.lineIndexArray=new Kd,this.triangleSegments=new Li,this.lineSegments=new Li,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new ad)}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,ay.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.lineIndexBuffer=s.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=s.createVertexBuffer(this.elevatedLayoutVertexArray,r0.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(s,u,f,g,m,_){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,f,g,m,_)}}class ly{constructor(s){this.zoom=s.zoom,this.pixelRatio=s.pixelRatio,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new zA(s,!1),this.elevationBufferData=new zA(s,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=s.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(s,u){}populate(s,u,f,g){this.hasPattern=OA("fill",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:b,id:O,index:D,sourceLayerIndex:C}of s){const V=this.layers[0]._featureFilter.needGeometry,I=Y(b,V);if(!this.layers[0]._featureFilter.filter(new Rn(this.zoom),I,f))continue;const z=m?m.evaluate(I,{},f,u.availableImages):void 0,M={id:O,properties:b.properties,type:b.type,sourceLayerIndex:C,index:D,geometry:V?I.geometry:K(b,f,g),patterns:{},sortKey:z};_.push(M)}m&&_.sort((b,O)=>b.sortKey-O.sortKey);for(const b of _){const{geometry:O,index:D,sourceLayerIndex:C}=b;if(this.hasPattern){const V=VA("fill",this.layers,b,this.zoom,this.pixelRatio,u);this.patternFeatures.push(V)}else this.addFeature(b,O,D,f,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(s[D].feature,O,D,C,this.index)}}update(s,u,f,g,m,_,b){this.bufferData.update(s,u,f,g,m,_,b),this.elevationBufferData.update(s,u,f,g,m,_,b)}addFeatures(s,u,f,g,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,g,_,s.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(s){this.bufferData.upload(s),this.elevationBufferData.upload(s),this.elevatedStructures&&this.elevatedStructures.upload(s)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(s,u,f,g,m,_=[],b,O){const D=NA(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(s,D,g,f,O):this.addGeometry(D,this.bufferData),this.bufferData.populatePaintArrays(s,f,m,_,g,b),this.elevationBufferData.populatePaintArrays(s,f,m,_,g,b)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(s){this.elevatedStructures&&this.elevatedStructures.construct(s)}addElevatedRoadFeature(s,u,f,g,m){const _=new Array,b=this.getElevationFeature(s,m);if(b){_.push({polygons:u,elevationFeature:b,elevationTileID:f});for(const O of _)if(O.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Qd(O.elevationTileID));const C=O.elevationFeature.isTunnel();let V=0;s.properties.hasOwnProperty(dg)&&(V=+s.properties[dg]);for(const I of O.polygons)this.elevatedStructures.addPortalCandidates(O.elevationFeature.id,I,C,O.elevationFeature,V)}const D=new Is(f,O.elevationTileID);this.addElevatedGeometry(O.polygons,D,O.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,g)}}else this.addGeometry(u,this.bufferData)}addElevatedGeometry(s,u,f,g,m){const _={elevation:f,elevationSampler:u,bias:g,index:m},[b,O]=this.addGeometry(s,this.elevationBufferData,_);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:b,max:O}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,b),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,O))}addGeometry(s,u,f){let g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=null;f&&(_=f.elevationSampler.constantElevation(f.elevation,f.bias),_!=null&&(g=_,m=_));const b=(O,D,C)=>{if(f!=null)if(D.push(O),_!=null)u.elevatedLayoutVertexArray.emplaceBack(_),C.push(_);else{const V=f.elevationSampler.pointElevation(O,f.elevation,f.bias);u.elevatedLayoutVertexArray.emplaceBack(V),C.push(V),g=Math.min(g,V),m=Math.max(m,V)}};for(const O of s){let D=0;for(const de of O)D+=de.length;const C=u.triangleSegments.prepareSegment(D,u.layoutVertexArray,u.indexArray),V=C.vertexLength,I=[],z=[],M=[],B=[],J=[],te=u.layoutVertexArray.length;for(const de of O){if(de.length===0)continue;de!==O[0]&&z.push(I.length/2);const ie=u.lineSegments.prepareSegment(de.length,u.layoutVertexArray,u.lineIndexArray),ve=ie.vertexLength;f&&J.push(u.layoutVertexArray.length-te),b(de[0],M,B),u.layoutVertexArray.emplaceBack(de[0].x,de[0].y),u.lineIndexArray.emplaceBack(ve+de.length-1,ve),I.push(de[0].x),I.push(de[0].y);for(let be=1;be<de.length;be++)b(de[be],M,B),u.layoutVertexArray.emplaceBack(de[be].x,de[be].y),u.lineIndexArray.emplaceBack(ve+be-1,ve+be),I.push(de[be].x),I.push(de[be].y);ie.vertexLength+=de.length,ie.primitiveLength+=de.length}const he=xA(I,z);for(let de=0;de<he.length;de+=3)u.indexArray.emplaceBack(V+he[de],V+he[de+1],V+he[de+2]);if(f&&this.elevationMode==="hd-road-base"){const de=f.elevation.isTunnel(),ie=f.elevation.safeArea,ve=this.elevatedStructures.addVertices(M,B);this.elevatedStructures.addTriangles(he,ve,de);const be=J.length;if(be>0){for(let Oe=0;Oe<be-1;Oe++)this.elevatedStructures.addRenderableRing(f.index,J[Oe]+ve,J[Oe+1]-J[Oe],de,ie);this.elevatedStructures.addRenderableRing(f.index,J[be-1]+ve,M.length-J[be-1],de,ie)}}C.vertexLength+=D,C.primitiveLength+=he.length/3}return[g,m]}getElevationFeature(s,u){if(!u)return;const f=+s.properties[Uf];return f!=null?u.find(g=>g.id===f):void 0}}let U1,B1,d0,h0;Pt(ly,"FillBucket",{omit:["layers","patternFeatures"]}),Pt(zA,"FillBufferData"),Pt(Qd,"ElevatedStructures");class j1{constructor(s,u,f,g){if(this.triangleCount=u.length/3,this.min=new It(0,0),this.max=new It(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||s.length===0)return;const[m,_]=[s[0].clone(),s[0].clone()];for(let V=1;V<s.length;++V){const I=s[V];m.x=Math.min(m.x,I.x),m.y=Math.min(m.y,I.y),_.x=Math.max(_.x,I.x),_.y=Math.max(_.y,I.y)}if(g){const V=Math.ceil(Math.max(_.x-m.x,_.y-m.y)/g);f=Math.max(f,V)}if(f===0)return;this.min=m,this.max=_;const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const O=Math.max(b.x,b.y)/f;this.cellsX=Math.max(1,Math.ceil(b.x/O)),this.cellsY=Math.max(1,Math.ceil(b.y/O)),this.xScale=1/O,this.yScale=1/O;const D=[];for(let V=0;V<this.triangleCount;V++){const I=s[u[3*V+0]].sub(this.min),z=s[u[3*V+1]].sub(this.min),M=s[u[3*V+2]].sub(this.min),B=nf(Math.floor(Math.min(I.x,z.x,M.x)),this.xScale,this.cellsX),J=nf(Math.floor(Math.max(I.x,z.x,M.x)),this.xScale,this.cellsX),te=nf(Math.floor(Math.min(I.y,z.y,M.y)),this.yScale,this.cellsY),he=nf(Math.floor(Math.max(I.y,z.y,M.y)),this.yScale,this.cellsY),de=new It(0,0),ie=new It(0,0),ve=new It(0,0),be=new It(0,0);for(let Oe=te;Oe<=he;++Oe){de.y=ie.y=Oe*O,ve.y=be.y=(Oe+1)*O;for(let et=B;et<=J;++et)de.x=ve.x=et*O,ie.x=be.x=(et+1)*O,(Qt(I,z,M,de,ie,be)||Qt(I,z,M,de,be,ve))&&D.push({cellIdx:Oe*this.cellsX+et,triIdx:V})}}if(D.length===0)return;D.sort((V,I)=>V.cellIdx-I.cellIdx||V.triIdx-I.triIdx);let C=0;for(;C<D.length;){const V=D[C].cellIdx,I={start:this.payload.length,len:0};for(;C<D.length&&D[C].cellIdx===V;)++I.len,this.payload.push(D[C++].triIdx);this.cells[V]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(s,u){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>s.x||s.y>this.max.y||this.min.y>s.y)return;const f=nf(s.x-this.min.x,this.xScale,this.cellsX),g=nf(s.y-this.min.y,this.yScale,this.cellsY),m=this.cells[g*this.cellsX+f];if(m){this._lazyInitLookup();for(let _=0;_<m.len;_++){const b=this.payload[m.start+_],O=Math.floor(b/8),D=1<<b%8;if(!(this.lookup[O]&D)&&(this.lookup[O]|=D,u.push(b),u.length===this.triangleCount))return}}}query(s,u,f){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>u.x||s.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const g=nf(s.x-this.min.x,this.xScale,this.cellsX),m=nf(u.x-this.min.x,this.xScale,this.cellsX),_=nf(s.y-this.min.y,this.yScale,this.cellsY),b=nf(u.y-this.min.y,this.yScale,this.cellsY);for(let O=_;O<=b;O++)for(let D=g;D<=m;D++){const C=this.cells[O*this.cellsX+D];if(C)for(let V=0;V<C.len;V++){const I=this.payload[C.start+V],z=Math.floor(I/8),M=1<<I%8;if(!(this.lookup[z]&M)&&(this.lookup[z]|=M,f.push(I),f.length===this.triangleCount))return}}}}function nf(h,s,u){return Math.max(0,Math.min(u-1,Math.floor(h*s)))}Pt(j1,"TriangleGridIndex");class OC{constructor(s){this.zoom=s.zoom,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[]}updateFootprints(s,u){for(const f of this.footprints)u.push({footprint:f,id:s})}populate(s,u,f,g){const m=[];for(const{feature:_,id:b,index:O,sourceLayerIndex:D}of s){const C=this.layers[0]._featureFilter.needGeometry,V=Y(_,C);if(!this.layers[0]._featureFilter.filter(new Rn(this.zoom),V,f))continue;const I={id:b,properties:_.properties,type:_.type,sourceLayerIndex:D,index:O,geometry:C?V.geometry:K(_,f,g),patterns:{}};m.push(I)}for(const _ of m){const{geometry:b,index:O,sourceLayerIndex:D}=_;this.addFeature(_,b,O,f,{},u.availableImages,u.brightness),u.featureIndex.insert(s[O].feature,b,O,D,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(s){}update(s,u,f,g,m,_,b){}destroy(){}addFeature(s,u,f,g,m,_=[],b){for(const O of NA(u,2)){const D=[],C=[],V=[],I=new It(1/0,1/0),z=new It(-1/0,-1/0);for(const J of O)if(J.length!==0){J!==O[0]&&V.push(C.length/2);for(let te=0;te<J.length;te++)C.push(J[te].x),C.push(J[te].y),D.push(J[te]),I.x=Math.min(I.x,J[te].x),I.y=Math.min(I.y,J[te].y),z.x=Math.max(z.x,J[te].x),z.y=Math.max(z.y,J[te].y)}const M=xA(C,V),B=new j1(D,M,8,256);this.footprints.push({vertices:D,indices:M,grid:B,min:I,max:z})}}}Pt(OC,"ClipBucket",{omit:["layers"]});const VC=Nn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),uE=Nn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),cE=Nn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),G1=Nn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),Z1=Nn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),dE=Nn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:hE}=VC;class Bu extends It{constructor(s,u,f){super(s,u),this.z=f}}class q1 extends Bu{constructor(s,u,f,g){super(s,u,f),this.w=g}}function DA(h,s,u,f){const g=[],m=f===0?(_,b,O,D,C,V)=>{_.push(new It(V,O+(V-b)/(D-b)*(C-O)))}:(_,b,O,D,C,V)=>{_.push(new It(b+(V-O)/(C-O)*(D-b),V))};for(const _ of h){const b=[];for(const O of _){if(O.length<=2)continue;const D=[];for(let I=0;I<O.length-1;I++){const z=O[I].x,M=O[I].y,B=O[I+1].x,J=O[I+1].y,te=f===0?z:M,he=f===0?B:J;te<s?he>s&&m(D,z,M,B,J,s):te>u?he<u&&m(D,z,M,B,J,u):D.push(O[I]),he<s&&te>=s&&m(D,z,M,B,J,s),he>u&&te<=u&&m(D,z,M,B,J,u)}let C=O[O.length-1];const V=f===0?C.x:C.y;V>=s&&V<=u&&D.push(C),D.length&&(C=D[D.length-1],D[0].x===C.x&&D[0].y===C.y||D.push(D[0]),b.push(D))}b.length&&g.push(b)}return g}function eh(h,s,u,f){const g=u==="x"?"y":"x",m=(f-h[u])/(s[u]-h[u]);h[g]=h[g]+(s[g]-h[g])*m,h[u]=f,h.hasOwnProperty("z")&&(h.z=mr(h.z,s.z,m)),h.hasOwnProperty("w")&&(h.w=mr(h.w,s.w,m))}function H1(h,s,u,f){const g=u,m=f;for(const _ of["x","y"]){let b=h,O=s;b[_]>=O[_]&&(b=s,O=h),b[_]<g&&O[_]>g&&eh(b,O,_,g),b[_]<m&&O[_]>m&&eh(O,b,_,m)}}const hg=Number.MAX_SAFE_INTEGER;function jf(h,s,u,f){return h.order<s||h.order===hg||!(h.clipMask&u)||function(g,m){return m.length!==0&&m.find(_=>_===g)===void 0}(f,h.clipScope)}function f0(h,s){return h.x-s.x||h.y-s.y}function zC(h,s){return f0(h.min,s.min)===0&&f0(h.max,s.max)===0}function ym(h,s){return!(h.min.x>s.max.x||h.max.x<s.min.x||h.min.y>s.max.y||h.max.y<s.min.y)}function p0(h,s){if(h.length!==s.length)return!1;for(let u=0;u<h.length;u++)if(h[u].sourceId!==s[u].sourceId||!zC(h[u],s[u])||h[u].order!==s[u].order||h[u].clipMask!==s[u].clipMask||!Ht(h[u].clipScope,s[u].clipScope))return!1;return!0}function DC(h,s,u){const f=1/Va,g=1/(1<<u.canonical.z),m=(s.x*f+u.canonical.x)*g+u.wrap,_=(s.y*f+u.canonical.y)*g;return{min:new It((h.x*f+u.canonical.x)*g+u.wrap,(h.y*f+u.canonical.y)*g),max:new It(m,_)}}function fE(h,s,u){const f=1<<u.canonical.z,g=((s.x-u.wrap)*f-u.canonical.x)*Va,m=(s.y*f-u.canonical.y)*Va;return{min:new It(((h.x-u.wrap)*f-u.canonical.x)*Va,(h.y*f-u.canonical.y)*Va),max:new It(g,m)}}function MC(h,s,u,f,g,m,_){const b=h.indices,O=h.vertices,D=[];for(let C=f;C<f+g;C+=3){const V=s[u[C+0]+m],I=s[u[C+1]+m],z=s[u[C+2]+m],M=Math.min(V.x,I.x,z.x),B=Math.max(V.x,I.x,z.x),J=Math.min(V.y,I.y,z.y),te=Math.max(V.y,I.y,z.y);D.length=0,h.grid.query(new It(M,J),new It(B,te),D);for(let he=0;he<D.length;he++){const de=D[he];if(Qt(O[b[3*de+0]],O[b[3*de+1]],O[b[3*de+2]],V,I,z,_))return!0}}return!1}function IC(h,s,u,f){if(!h||!u)return!1;let g=h.vertices;if(!s.canonical.equals(f.canonical)||s.wrap!==f.wrap){if(u.vertices.length<h.vertices.length)return IC(u,f,h,s);const m=s.canonical,_=f.canonical,b=Math.pow(2,_.z-m.z);g=h.vertices.map(O=>new It((O.x+m.x*Va)*b-_.x*Va,(O.y+m.y*Va)*b-_.y*Va))}return MC(u,g,h.indices,0,h.indices.length,0,0)}function LC(h,s,u,f){const g=Math.pow(2,f.z-u.z);return new It((h+u.x*Va)*g-f.x*Va,(s+u.y*Va)*g-f.y*Va)}function FC(h,s){const u=[];s.grid.queryPoint(h,u);const f=s.indices,g=s.vertices;for(let m=0;m<u.length;m++){const _=u[m];if(ut([g[f[3*_+0]],g[f[3*_+1]],g[f[3*_+2]]],h))return!0}return!1}const $1=[new It(0,0),new It(Va,0),new It(Va,Va),new It(0,Va)];function K1(h,s){const u=[];let f=[];if(!s||h.length<2)return[h];if(h.length===2)return At(h[0],h[1],$1)?[h]:[];for(let g=0;g<h.length+2;g++){const m=h[g%h.length],_=h[(g+1)%h.length],b=At(g===0?h[h.length-1]:h[(g-1)%h.length],m,$1),O=At(m,_,$1),D=b||O;D&&f.push(m),D&&O||f.length>0&&(f.length>1&&u.push(f),f=[])}return f.length>1&&u.push(f),u}const Am=Dh.VectorTileFeature.types,MA=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],kC=["fill-extrusion-flood-light-ground-radius"],pE=Math.pow(2,13),uy=Math.pow(2,15)-1,cy=new It(0,1),bp=2147483648;function vm(h,s,u,f,g,m,_,b){h.emplaceBack((s<<1)+_,(u<<1)+m,(Math.floor(f*pE)<<1)+g,Math.round(b))}function fg(h,s,u){h.emplaceBack(s.x*Va,s.y*Va,u?1:0)}function dy(h,s,u,f,g,m){h.emplaceBack(s.x,s.y,(u.x<<1)+f,(u.y<<1)+g,m)}function _m(h,s,u){h.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}class W1{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Y1{constructor(){this.centroidXY=new It(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new It(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new It(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new It(this.max.x-this.min.x,this.max.y-this.min.y)}}class UC{constructor(){this.acc=new It(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(s,u){s.min.x===Number.MAX_VALUE&&(s.min.x=s.max.x=u.x,s.min.y=s.max.y=u.y)}appendEdge(s,u,f){this.accCount++,this.acc._add(u);let g=!!this.borders;u.x<s.min.x?(s.min.x=u.x,g=!0):u.x>s.max.x&&(s.max.x=u.x,g=!0),u.y<s.min.y?(s.min.y=u.y,g=!0):u.y>s.max.y&&(s.max.y=u.y,g=!0),((u.x===0||u.x===Va)&&u.x===f.x)!=((u.y===0||u.y===Va)&&u.y===f.y)&&this.processBorderOverlap(u,f),g&&this.checkBorderIntersection(u,f)}checkBorderIntersection(s,u){u.x<0!=s.x<0&&this.addBorderIntersection(0,mr(u.y,s.y,(0-u.x)/(s.x-u.x))),u.x>Va!=s.x>Va&&this.addBorderIntersection(1,mr(u.y,s.y,(Va-u.x)/(s.x-u.x))),u.y<0!=s.y<0&&this.addBorderIntersection(2,mr(u.x,s.x,(0-u.y)/(s.y-u.y))),u.y>Va!=s.y>Va&&this.addBorderIntersection(3,mr(u.x,s.x,(Va-u.y)/(s.y-u.y)))}addBorderIntersection(s,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[s];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(s,u){if(s.x===u.x){if(s.y===u.y)return;const f=s.x===0?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,s.y)}else{const f=s.y===0?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,s.x)}}centroid(){return this.accCount===0?new It(0,0):new It(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((s,u)=>s+ +(u[0]!==Number.MAX_VALUE),0):0}}function X1(h,s){const u=h.add(s)._unit(),f=ka(h.x*u.x+h.y*u.y,-1,1);var g,m,_;return _=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(_)))/4*uy*((g=h).x*(m=s).y-g.y*m.x<0?-1:1)}const IA=[h=>h.x<0,h=>h.x>Va,h=>h.y<0,h=>h.y>Va];function mE(h,s,u,f){const g=[4];if(f===0)return g;u._mult(f);const m=h.sub(u),_=s.sub(u),b=[h,s,m,_];for(let O=0;O<4;O++)for(const D of b)if(IA[O](D)){g.push(O);break}return g}class BC{constructor(s){this.vertexArray=new Bl,this.indexArray=new Ms,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut},u=>kC.includes(u)),this._segments=new Li,this.hiddenByLandmarkVertexArray=new Kg,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Li}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(s,u,f,g=!1){const m=s.length;if(m>2){let _=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let O;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const D=s[0],C=s[1];O=X1(D.sub(s[m-1])._perp()._unit(),C.sub(D)._perp()._unit())}for(let D=0;D<m;D++){const C=D===m-1?0:D+1,V=s[D],I=s[C],z=s[C===m-1?0:C+1],M=I.sub(V)._perp()._unit(),B=X1(M,z.sub(I)._perp()._unit()),J=O,te=B;if(J1(V,I,u)||g&&hy(V,u)&&hy(I,u)){O=B;continue}const he=b.vertexLength;dy(this.vertexArray,V,I,1,1,J),dy(this.vertexArray,V,I,1,0,J),dy(this.vertexArray,V,I,0,1,te),dy(this.vertexArray,V,I,0,0,te),b.vertexLength+=4;const de=mE(V,I,M,f);for(const ie of de)this._segmentToGroundQuads[_].push({id:he,region:ie}),this._segmentToRegionTriCounts[_][ie]+=2,b.primitiveLength+=2;O=B}}}prepareBorderSegments(){if(!this.hasData())return;const s=this._segments.get(),u=s.length;for(let f=0;f<u;f++)this._segmentToGroundQuads[f].sort((g,m)=>g.region-m.region);for(let f=0;f<u;f++){const g=this._segmentToGroundQuads[f],m=s[f],_=this._segmentToRegionTriCounts[f];_.reduce((O,D)=>O+D,0);let b=0;for(let O=0;O<=4;O++){const D=_[O];if(D!==0){let C=this.regionSegments[O];C||(C=this.regionSegments[O]=new Li);const V={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+b,vertexLength:m.vertexLength,primitiveLength:D};C.get().push(V)}b+=D}for(let O=0;O<g.length;O++){const D=g[O].id;this.indexArray.emplaceBack(D,D+1,D+3),this.indexArray.emplaceBack(D,D+3,D+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(s,u,f,g,m,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,s,u,f,g,m,_)}upload(s){this.hasData()&&(this.vertexBuffer=s.createVertexBuffer(this.vertexArray,uE.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}uploadPaintProperties(s){this.hasData()&&this.programConfigurations.upload(s)}update(s,u,f,g,m,_,b){this.hasData()&&this.programConfigurations.updatePaintArrays(s,u,f,g,m,_,b)}updateHiddenByLandmark(s){if(!this.hasData())return;const u=s.groundVertexCount+s.groundVertexArrayOffset;if(s.groundVertexCount===0)return;const f=s.flags&bp?1:0;for(let g=s.groundVertexArrayOffset;g<u;++g)this.hiddenByLandmarkVertexArray.emplace(g,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(s){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=s.createVertexBuffer(this.hiddenByLandmarkVertexArray,Z1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let s=0;s<=4;s++){const u=this.regionSegments[s];u&&u.destroy()}}}}class m0{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.pixelRatio=s.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ms,this.footprintVertices=new Mu,this.footprintSegments=[],this.layoutVertexArray=new Iu,this.centroidVertexArray=new gp,this.wallVertexArray=new AA,this.indexArray=new Ms,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut},u=>MA.includes(u)),this.segments=new Li,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new BC(s),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(s,u){}populate(s,u,f,g){this.features=[],this.hasPattern=OA("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=y(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:_,index:b,sourceLayerIndex:O}of s){const D=this.layers[0]._featureFilter.needGeometry,C=Y(m,D);if(!this.layers[0]._featureFilter.filter(new Rn(this.zoom),C,f))continue;const V={id:_,sourceLayerIndex:O,index:b,geometry:D?C.geometry:K(m,f,g),properties:m.properties,type:m.type,patterns:{}},I=this.layoutVertexArray.length,z=Am[V.type]==="Polygon";if(this.hasPattern)this.features.push(VA("fill-extrusion",this.layers,V,this.zoom,this.pixelRatio,u));else if(this.wallMode)for(const M of V.geometry)for(const B of K1(M,z))this.addFeature(V,[B],b,f,{},u.availableImages,g,u.brightness);else this.addFeature(V,V.geometry,b,f,{},u.availableImages,g,u.brightness);u.featureIndex.insert(m,V.geometry,b,O,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(s,u,f,g,m,_){for(const b of this.features){const O=Am[b.type]==="Polygon",{geometry:D}=b;if(this.wallMode)for(const C of D)for(const V of K1(C,O))this.addFeature(b,[V],b.index,u,f,g,m,_);else this.addFeature(b,D,b.index,u,f,g,m,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b),this.groundEffect.update(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,hE),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.wallVertexBuffer=s.createVertexBuffer(this.wallVertexArray,G1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,dE.members,!0)),this.groundEffect.upload(s)),this.groundEffect.uploadPaintProperties(s),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){this.groundEffect.uploadHiddenByLandmark(s),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,cE.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,f,g,m,_,b,O){const D=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(s,{})/this.tileToMeter,C=[new It(0,0),new It(Va,Va)],V=b.projection,I=V.name==="globe",z=this.wallMode||Am[s.type]==="Polygon",M=new UC;M.centroidDataIndex=this.centroidData.length;const B=new Y1,J=this.layers[0].paint.get("fill-extrusion-base").evaluate(s,{},g)<=0,te=this.layers[0].paint.get("fill-extrusion-height").evaluate(s,{},g);let he;if(B.height=te,B.vertexArrayOffset=this.layoutVertexArray.length,B.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new fp),this.wallMode){if(I)return void $r("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;he=function(Ye){const gt=Ye[0].x===Ye[Ye.length-1].x&&Ye[0].y===Ye[Ye.length-1].y;(function(za){let wa=0;const vr=za.length;for(let Ka=0;Ka<vr;Ka++)wa+=(za[(Ka+1)%vr].x-za[Ka].x)*(za[(Ka+1)%vr].y+za[Ka].y);return wa>=0})(Ye)||(Ye=Ye.reverse());const vt={geometry:[],joinNormals:[],indices:[]},xt=[],Ct=[],Dt=[];let Nt=Ye.length;for(;Nt>=2&&Ye[Nt-1].equals(Ye[Nt-2]);)Nt--;if(Nt<(gt?3:2))return vt;let jt,Lt,qt,Aa,ga,Qa=0;for(;Qa<Nt-1&&Ye[Qa].equals(Ye[Qa+1]);)Qa++;gt&&(jt=Ye[Nt-2],ga=Ye[Qa].sub(jt)._unit()._perp());for(let za=Qa;za<Nt;za++){if(qt=za===Nt-1?gt?Ye[Qa+1]:void 0:Ye[za+1],qt&&Ye[za].equals(qt))continue;ga&&(Aa=ga),jt&&(Lt=jt),jt=Ye[za],ga=qt?qt.sub(jt)._unit()._perp():Aa,Aa=Aa||ga;let wa=Aa.add(ga);wa.x===0&&wa.y===0||wa._unit();const vr=wa.x*ga.x+wa.y*ga.y,Ka=vr!==0?1/vr:1/0,ur=Aa.x*ga.y-Aa.y*ga.x>0;let Mr="miter";const en=2;Mr==="miter"&&Ka>en&&(Mr="bevel"),Mr==="bevel"&&(Ka>100&&(Mr="flipbevel"),Ka<en&&(Mr="miter"));const Br=(gn,Qr,Tn,Wn)=>{const Vi=new It(gn.x,gn.y),Fr=new It(gn.x,gn.y);Vi.x+=Qr.x*Wn,Vi.y+=Qr.y*Wn,Fr.x-=Qr.x*Math.max(Tn,1),Fr.y-=Qr.y*Math.max(Tn,1),Dt.push(Qr),xt.push(Vi),Ct.push(Fr)};if(Mr==="miter")wa._mult(Ka),Br(jt,wa,0,0);else if(Mr==="flipbevel")wa=ga.mult(-1),Br(jt,wa,0,0),Br(jt,wa.mult(-1),0,0);else{const gn=-Math.sqrt(Ka*Ka-1),Qr=ur?gn:0,Tn=ur?0:gn;Lt&&Br(jt,Aa,Qr,Tn),qt&&Br(jt,ga,Qr,Tn)}}vt.geometry=[...xt,...Ct.reverse(),xt[0]],vt.joinNormals=[...Dt,...Dt.reverse(),Dt[Dt.length-1]];const Pa=vt.geometry.length-1;for(let za=0;za<Pa/2;za++)if(za+1<Pa/2){let wa=za,vr=za+1,Ka=Pa-1-za,ur=Pa-2-za;wa=wa===0?Pa-1:wa-1,vr=vr===0?Pa-1:vr-1,Ka=Ka===0?Pa-1:Ka-1,ur=ur===0?Pa-1:ur-1,vt.indices.push(Ka),vt.indices.push(vr),vt.indices.push(wa),vt.indices.push(Ka),vt.indices.push(ur),vt.indices.push(vr)}return vt}(u[0]),u=[he.geometry]}const de=(Ye,gt)=>Ye<(gt.length-1)/2||Ye===gt.length-1,ie=this.wallMode?[u]:NA(u,500);for(let Ye=ie.length-1;Ye>=0;Ye--){const gt=ie[Ye];(gt.length===0||(ve=gt[0]).every(tt=>tt.x<=0)||ve.every(tt=>tt.x>=Va)||ve.every(tt=>tt.y<=0)||ve.every(tt=>tt.y>=Va))&&ie.splice(Ye,1)}var ve;let be;if(I)be=tw(ie,C,g);else{be=[];for(const Ye of ie)be.push({polygon:Ye,bounds:C})}const Oe=z?this.edgeRadius:0,et=Oe>0&&this.zoom<17,We=(Ye,gt)=>{if(Ye.length===0)return!1;const tt=Ye[Ye.length-1];return gt.x===tt.x&&gt.y===tt.y};for(const{polygon:Ye,bounds:gt}of be){let tt=0,vt=0;for(const Nt of Ye)z&&!Nt[0].equals(Nt[Nt.length-1])&&Nt.push(Nt[0]),vt+=z?Nt.length-1:Nt.length;const xt=this.segments.prepareSegment((z?5:4)*vt,this.layoutVertexArray,this.indexArray);B.footprintSegIdx<0&&(B.footprintSegIdx=this.footprintSegments.length),B.polygonSegIdx<0&&(B.polygonSegIdx=this.polygonSegments.length);const Ct={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Dt=new W1;if(Dt.vertexOffset=this.footprintVertices.length,Dt.indexOffset=3*this.footprintIndices.length,Dt.ringIndices=[],z){const Nt=[],jt=[];tt=xt.vertexLength;for(let qt=0;qt<Ye.length;qt++){const Aa=Ye[qt];Aa.length&&qt!==0&&jt.push(Nt.length/2);const ga=[];let Qa,Pa;Qa=Aa[1].sub(Aa[0])._perp()._unit(),Dt.ringIndices.push(Aa.length-1);for(let za=1;za<Aa.length;za++){const wa=Aa[za],vr=Aa[za===Aa.length-1?1:za+1],Ka=wa.clone();if(Oe){Pa=vr.sub(wa)._perp()._unit();const ur=Qa.add(Pa)._unit(),Mr=Oe*Math.min(4,1/(Qa.x*ur.x+Qa.y*ur.y));Ka.x+=Mr*ur.x,Ka.y+=Mr*ur.y,Ka.x=Math.round(Ka.x),Ka.y=Math.round(Ka.y),Qa=Pa}if(!J||Oe!==0&&!et||We(ga,Ka)||ga.push(Ka),vm(this.layoutVertexArray,Ka.x,Ka.y,0,0,1,1,0),this.wallMode){const ur=de(za,Aa);fg(this.wallVertexArray,he.joinNormals[za],!ur)}xt.vertexLength++,this.footprintVertices.emplaceBack(wa.x,wa.y),Nt.push(wa.x,wa.y),I&&_m(this.layoutVertexExtArray,V.projectTilePoint(Ka.x,Ka.y,g),V.upVector(g,Ka.x,Ka.y))}J&&(Oe===0||et)&&(ga.length!==0&&We(ga,ga[0])&&ga.pop(),this.groundEffect.addData(ga,gt,D))}const Lt=this.wallMode?he.indices:xA(Nt,jt);for(let qt=0;qt<Lt.length;qt+=3)this.footprintIndices.emplaceBack(Dt.vertexOffset+Lt[qt+0],Dt.vertexOffset+Lt[qt+1],Dt.vertexOffset+Lt[qt+2]),this.indexArray.emplaceBack(tt+Lt[qt],tt+Lt[qt+2],tt+Lt[qt+1]),xt.primitiveLength++;Dt.indexCount+=Lt.length,Dt.vertexCount+=this.footprintVertices.length-Dt.vertexOffset}for(let Nt=0;Nt<Ye.length;Nt++){const jt=Ye[Nt];M.startRing(B,jt[0]);let Lt=jt.length>4&&jC(jt[jt.length-2],jt[0],jt[1]),qt=Oe?g0(jt[jt.length-2],jt[0],jt[1],Oe):0;const Aa=[];let ga,Qa,Pa;Qa=jt[1].sub(jt[0])._perp()._unit();let za=!0;for(let wa=1,vr=0;wa<jt.length;wa++){let Ka=jt[wa-1],ur=jt[wa];const Mr=jt[wa===jt.length-1?1:wa+1];if(M.appendEdge(B,ur,Ka),J1(ur,Ka,gt)){Oe&&(Qa=Mr.sub(ur)._perp()._unit(),za=!za);continue}const en=ur.sub(Ka)._perp(),Br=en.x/(Math.abs(en.x)+Math.abs(en.y)),gn=en.y>0?1:0,Qr=Ka.dist(ur);if(vr+Qr>32768&&(vr=0),Oe){Pa=Mr.sub(ur)._perp()._unit();let Fr=y0(Ka,ur,Mr,LA(Qa,Pa),Oe);isNaN(Fr)&&(Fr=0);const Vn=ur.sub(Ka)._unit();Ka=Ka.add(Vn.mult(qt))._round(),ur=ur.add(Vn.mult(-Fr))._round(),qt=Fr,Qa=Pa,J&&this.zoom>=17&&(We(Aa,Ka)||Aa.push(Ka),We(Aa,ur)||Aa.push(ur))}const Tn=xt.vertexLength,Wn=jt.length>4&&jC(Ka,ur,Mr);let Vi=Q1(vr,Lt,za);if(vm(this.layoutVertexArray,Ka.x,Ka.y,Br,gn,0,0,Vi),vm(this.layoutVertexArray,Ka.x,Ka.y,Br,gn,0,1,Vi),this.wallMode){const Fr=de(wa-1,jt),Vn=he.joinNormals[wa-1];fg(this.wallVertexArray,Vn,Fr),fg(this.wallVertexArray,Vn,Fr)}if(vr+=Qr,Vi=Q1(vr,Wn,!za),Lt=Wn,vm(this.layoutVertexArray,ur.x,ur.y,Br,gn,0,0,Vi),vm(this.layoutVertexArray,ur.x,ur.y,Br,gn,0,1,Vi),this.wallMode){const Fr=de(wa,jt),Vn=he.joinNormals[wa];fg(this.wallVertexArray,Vn,Fr),fg(this.wallVertexArray,Vn,Fr)}if(xt.vertexLength+=4,this.indexArray.emplaceBack(Tn+0,Tn+1,Tn+2),this.indexArray.emplaceBack(Tn+1,Tn+3,Tn+2),xt.primitiveLength+=2,Oe){const Fr=tt+(wa===1?jt.length-2:wa-2),Vn=wa===1?tt:Fr+1;if(this.indexArray.emplaceBack(Tn+1,Fr,Tn+3),this.indexArray.emplaceBack(Fr,Vn,Tn+3),xt.primitiveLength+=2,ga===void 0&&(ga=Tn),!J1(Mr,jt[wa],gt)){const as=wa===jt.length-1?ga:xt.vertexLength;this.indexArray.emplaceBack(Tn+2,Tn+3,as),this.indexArray.emplaceBack(Tn+3,as+1,as),this.indexArray.emplaceBack(Tn+3,Vn,as+1),xt.primitiveLength+=3}za=!za}if(I){const Fr=this.layoutVertexExtArray,Vn=V.projectTilePoint(Ka.x,Ka.y,g),as=V.projectTilePoint(ur.x,ur.y,g),ps=V.upVector(g,Ka.x,Ka.y),Ts=V.upVector(g,ur.x,ur.y);_m(Fr,Vn,ps),_m(Fr,Vn,ps),_m(Fr,as,Ts),_m(Fr,as,Ts)}}z&&(tt+=jt.length-1),J&&Oe&&this.zoom>=17&&(Aa.length!==0&&We(Aa,Aa[0])&&Aa.pop(),this.groundEffect.addData(Aa,gt,D,Oe>0))}this.footprintSegments.push(Dt),Ct.triangleCount=this.indexArray.length-Ct.triangleArrayOffset,this.polygonSegments.push(Ct),++B.footprintSegLen,++B.polygonSegLen}if(B.vertexCount=this.layoutVertexArray.length-B.vertexArrayOffset,B.groundVertexCount=this.groundEffect.vertexArray.length-B.groundVertexArrayOffset,B.vertexCount!==0){if(B.centroidXY=M.borders?cy:this.encodeCentroid(M,B),this.centroidData.push(B),M.borders){this.featuresOnBorder.push(M);const Ye=this.featuresOnBorder.length-1;for(let gt=0;gt<M.borders.length;gt++)M.borders[gt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[gt].push(Ye)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,m,_,g,O),this.groundEffect.addPaintPropertiesData(s,f,m,_,g,O),this.maxHeight=Math.max(this.maxHeight,te)}}sortBorders(){for(let s=0;s<this.borderFeatureIndices.length;s++)this.borderFeatureIndices[s].sort((u,f)=>this.featuresOnBorder[u].borders[s][0]-this.featuresOnBorder[f].borders[s][0])}splitToSubtiles(){const s=[];for(let b=0;b<this.centroidData.length;b++){const O=this.centroidData[b],D=+(O.min.y+O.max.y>Va),C=2*D+(+(O.min.x+O.max.x>Va)^D);for(let V=0;V<O.polygonSegLen;V++){const I=O.polygonSegIdx+V;s.push({centroidIdx:b,subtile:C,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const u=new Ms;s.sort((b,O)=>b.triangleSegmentIdx===O.triangleSegmentIdx?b.subtile-O.subtile:b.triangleSegmentIdx-O.triangleSegmentIdx);let f=0,g=0,m=0;for(const b of s){if(b.triangleSegmentIdx!==f)break;m++}const _=s.length;for(;g!==s.length;){f=s[g].triangleSegmentIdx;let b=0,O=g,D=g;for(let C=O;C<m&&s[C].subtile===b;C++)D++;for(;O!==m;){const C=s[O];b=C.subtile;const V=this.centroidData[C.centroidIdx].min.clone(),I=this.centroidData[C.centroidIdx].max.clone(),z={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let M=O;M<D;M++){const B=s[M],J=this.polygonSegments[B.polygonSegmentIdx],te=this.centroidData[B.centroidIdx].min,he=this.centroidData[B.centroidIdx].max,de=this.indexArray.uint16;for(let ie=J.triangleArrayOffset;ie<J.triangleArrayOffset+J.triangleCount;ie++)u.emplaceBack(de[3*ie],de[3*ie+1],de[3*ie+2]);z.primitiveLength+=J.triangleCount,V.x=Math.min(V.x,te.x),V.y=Math.min(V.y,te.y),I.x=Math.max(I.x,he.x),I.y=Math.max(I.y,he.y)}z.primitiveLength>0&&this.triangleSubSegments.push({segment:z,min:V,max:I}),O=D;for(let M=O;M<m&&s[M].subtile===s[O].subtile;M++)D++}g=m;for(let C=g;C<_&&s[C].triangleSegmentIdx===s[g].triangleSegmentIdx;C++)m++}u._trim(),this.indexArray=u}getVisibleSegments(s,u,f){const g=new Li;if(this.wallMode){for(const B of this.triangleSubSegments)g.segments.push(B.segment);return g}let m=0,_=0;const b=1<<s.canonical.z;if(u){const B=u.getMinMaxForTile(s);B&&(m=B.min,_=B.max)}_+=this.maxHeight;const O=s.toUnwrapped();let D;const C=[O.canonical.x/b+O.wrap,O.canonical.y/b],V=[(O.canonical.x+1)/b+O.wrap,(O.canonical.y+1)/b],I=(B,J,te)=>[B[0]*(1-te[0])+J[0]*te[0],B[1]*(1-te[1])+J[1]*te[1]],z=[],M=[];for(const B of this.triangleSubSegments){z[0]=B.min.x/Va,z[1]=B.min.y/Va,M[0]=B.max.x/Va,M[1]=B.max.y/Va;const J=I(C,V,z),te=I(C,V,M);if(new ar([J[0],J[1],m],[te[0],te[1],_]).intersectsPrecise(f)===0){D&&(g.segments.push(D),D=void 0);continue}const he=B.segment;D&&D.vertexOffset!==he.vertexOffset&&(g.segments.push(D),D=void 0),D?(D.vertexLength+=he.vertexLength,D.primitiveLength+=he.primitiveLength):D={vertexOffset:he.vertexOffset,primitiveLength:he.primitiveLength,vertexLength:he.vertexLength,primitiveOffset:he.primitiveOffset,sortKey:void 0,vaos:{}}}return D&&g.segments.push(D),g}encodeCentroid(s,u){const f=s.centroid(),g=u.span(),m=Math.min(7,Math.round(g.x*this.tileToMeter/10)),_=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new It(ka(f.x,1,Va-1)<<3|m,ka(f.y,1,Va-1)<<3|_)}encodeBorderCentroid(s){if(!s.borders)return new It(0,0);const u=s.borders,f=Number.MAX_VALUE;if(u[0][0]!==f||u[1][0]!==f){const g=u[0][0]!==f?0:1;return new It(6|(u[0][0]!==f?0:65528),(u[g][0]+u[g][1])/2<<3|6)}{const g=u[2][0]!==f?2:3;return new It((u[g][0]+u[g][1])/2<<3|6,6|(u[2][0]!==f?0:65528))}}showCentroid(s){const u=this.centroidData[s.centroidDataIndex];u.flags&=bp,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(s){this.groundEffect.updateHiddenByLandmark(s);const u=s.vertexArrayOffset,f=s.vertexCount+s.vertexArrayOffset,g=s.flags&bp?cy:s.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==g.y||m!==g.x){for(let _=u;_<f;++_)this.centroidVertexArray.emplace(_,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const s of this.centroidData)this.writeCentroidToBuffer(s)}updateReplacement(s,u,f){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const g=u.getReplacementRegionsForTile(s.toUnwrapped());if(p0(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const m=[];for(const _ of this.activeReplacements){if(_.order<f)continue;const b=Math.max(1,Math.pow(2,_.footprintTileId.canonical.z-s.canonical.z));for(const O of this.centroidData)if(!(O.flags&bp||_.min.x>O.max.x||O.min.x>_.max.x||_.min.y>O.max.y||O.min.y>_.max.y))for(let D=0;D<O.footprintSegLen;D++){const C=this.footprintSegments[O.footprintSegIdx+D];if(m.length=0,GC(this.footprintVertices,C.vertexOffset,C.vertexCount,_.footprintTileId.canonical,s.canonical,m),MC(_.footprint,m,this.footprintIndices.uint16,C.indexOffset,C.indexCount,-C.vertexOffset,-b)){O.flags|=bp;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(s,u,f){let g=!1;for(let m=0;m<f.footprintSegLen;m++){const _=this.footprintSegments[f.footprintSegIdx+m];let b=0;for(const O of _.ringIndices){for(let D=b,C=O+b-1;D<O+b;C=D++){const V=this.footprintVertices.int16[2*(D+_.vertexOffset)+0],I=this.footprintVertices.int16[2*(D+_.vertexOffset)+1],z=this.footprintVertices.int16[2*(C+_.vertexOffset)+1];I>u!=z>u&&s<(this.footprintVertices.int16[2*(C+_.vertexOffset)+0]-V)*(u-I)/(z-I)+V&&(g=!g)}b=O}}return g}getHeightAtTileCoord(s,u){let f=Number.NEGATIVE_INFINITY,g=!0;const m=4*(s+Va)*Va+(u+Va);if(this.partLookup.hasOwnProperty(m)){const _=this.partLookup[m];return _?{height:_.height,hidden:!!(_.flags&bp)}:void 0}for(const _ of this.centroidData)s>_.max.x||_.min.x>s||u>_.max.y||_.min.y>u||this.footprintContainsPoint(s,u,_)&&_&&_.height>f&&(f=_.height,this.partLookup[m]=_,g=!!(_.flags&bp));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:g};this.partLookup[m]=void 0}}function LA(h,s){const u=h.add(s)._unit();return h.x*u.x+h.y*u.y}function g0(h,s,u,f){const g=s.sub(h)._perp()._unit(),m=u.sub(s)._perp()._unit();return y0(h,s,u,LA(g,m),f)}function y0(h,s,u,f,g){const m=Math.sqrt(1-f*f);return Math.min(h.dist(s)/3,s.dist(u)/3,g*m/f)}function J1(h,s,u){return h.x<u[0].x&&s.x<u[0].x||h.x>u[1].x&&s.x>u[1].x||h.y<u[0].y&&s.y<u[0].y||h.y>u[1].y&&s.y>u[1].y}function hy(h,s){return h.x<s[0].x||h.x>s[1].x||h.y<s[0].y||h.y>s[1].y}function jC(h,s,u){if(h.x<0||h.x>=Va||s.x<0||s.x>=Va||u.x<0||u.x>=Va)return!1;const f=u.sub(s),g=f.perp(),m=h.sub(s);return(f.x*m.x+f.y*m.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(m.x*m.x+m.y*m.y))>-.866&&g.x*m.x+g.y*m.y<0}function Q1(h,s,u){const f=s?2|h:-3&h;return u?1|f:-2&f}function ew(){const h=Math.PI/32,s=Math.tan(h),u=hl;return u*Math.sqrt(1+2*s*s)-u}function tw(h,s,u){const f=1<<u.z,g=ku(u.x/f),m=ku((u.x+1)/f),_=Si(u.y/f),b=Si((u.y+1)/f);return function(O,D,C,V,I=0,z){const M=[];if(!O.length||!C||!V)return M;const B=(be,Oe)=>{for(const et of be)M.push({polygon:et,bounds:Oe})},J=Math.ceil(Math.log2(C)),te=Math.ceil(Math.log2(V)),he=J-te,de=[];for(let be=0;be<Math.abs(he);be++)de.push(he>0?0:1);for(let be=0;be<Math.min(J,te);be++)de.push(0),de.push(1);let ie=O;if(ie=DA(ie,D[0].y-I,D[1].y+I,1),ie=DA(ie,D[0].x-I,D[1].x+I,0),!ie.length)return M;const ve=[];for(de.length?ve.push({polygons:ie,bounds:D,depth:0}):B(ie,D);ve.length;){const be=ve.pop(),Oe=be.depth,et=de[Oe],We=be.bounds[0],Ye=be.bounds[1],gt=et===0?We.x:We.y,tt=et===0?Ye.x:Ye.y,vt=z?z(et,gt,tt):.5*(gt+tt),xt=DA(be.polygons,gt-I,vt+I,et),Ct=DA(be.polygons,vt-I,tt+I,et);if(xt.length){const Dt=[We,new It(et===0?vt:Ye.x,et===1?vt:Ye.y)];de.length>Oe+1?ve.push({polygons:xt,bounds:Dt,depth:Oe+1}):B(xt,Dt)}if(Ct.length){const Dt=[new It(et===0?vt:We.x,et===1?vt:We.y),Ye];de.length>Oe+1?ve.push({polygons:Ct,bounds:Dt,depth:Oe+1}):B(Ct,Dt)}}return M}(h,s,Math.ceil((m-g)/11.25),Math.ceil((_-b)/11.25),1,(O,D,C)=>{if(O===0)return .5*(D+C);{const V=Si((u.y+D/Va)/f);return(Oi(.5*(Si((u.y+C/Va)/f)+V))*f-u.y)*Va}})}function GC(h,s,u,f,g,m){const _=Math.pow(2,f.z-g.z);for(let b=0;b<u;b++){let O=h.int16[2*(b+s)+0],D=h.int16[2*(b+s)+1];O=(O+g.x*Va)*_-f.x*Va,D=(D+g.y*Va)*_-f.y*Va,m.push(new It(O,D))}}let A0,aw;function wm(h,s){return h.x*s.x+h.y*s.y}function ZC(h,s){if(h.length===1){let u=0;const f=s[u++];let g;for(;!g||f.equals(g);)if(g=s[u++],!g)return 1/0;for(;u<s.length;u++){const m=s[u],_=h[0],b=g.sub(f),O=m.sub(f),D=_.sub(f),C=wm(b,b),V=wm(b,O),I=wm(O,O),z=wm(D,b),M=wm(D,O),B=C*I-V*V,J=(I*z-V*M)/B,te=(C*M-V*z)/B,he=f.z*(1-J-te)+g.z*J+m.z*te;if(isFinite(he))return he}return 1/0}{let u=1/0;for(const f of s)u=Math.min(u,f.z);return u}}function qC(h,s,u,f,g,m,_,b){const O=_*g.getElevationAt(h,s,!0,!0),D=m[0]!==0,C=D?m[1]===0?_*(m[0]/7-450):_*function(V,I,z){const M=Math.floor(I[0]/8),B=Math.floor(I[1]/8),J=10*(I[0]-8*M),te=10*(I[1]-8*B),he=V.getElevationAt(M,B,!0,!0),de=V.getMeterToDEM(z),ie=Math.floor(.5*(J*de-1)),ve=Math.floor(.5*(te*de-1)),be=V.tileCoordToPixel(M,B),Oe=2*ie+1,et=2*ve+1,We=function(Ct,Dt,Nt,jt,Lt){return[Ct.getElevationAtPixel(Dt,Nt,!0),Ct.getElevationAtPixel(Dt+Lt,Nt,!0),Ct.getElevationAtPixel(Dt,Nt+Lt,!0),Ct.getElevationAtPixel(Dt+jt,Nt+Lt,!0)]}(V,be.x-ie,be.y-ve,Oe,et),Ye=Math.abs(We[0]-We[1]),gt=Math.abs(We[2]-We[3]),tt=Math.abs(We[0]-We[2])+Math.abs(We[1]-We[3]),vt=Math.min(.25,.5*de*(Ye+gt)/Oe),xt=Math.min(.25,.5*de*tt/et);return he+Math.max(vt*J,xt*te)}(g,m,b):O;return{base:O+(u===0?-1:u),top:D?Math.max(C+f,O+u+2):O+f}}Pt(m0,"FillExtrusionBucket",{omit:["layers","features"]}),Pt(Y1,"PartData"),Pt(W1,"FootprintSegment"),Pt(UC,"BorderCentroidData"),Pt(BC,"GroundEffect");const rw=Nn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),nw=Nn([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:v0}=rw,iw=Nn([{name:"a_packed",components:3,type:"Float32"}]),{members:HC}=iw,sw=Nn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Rm}=sw;class xp{constructor(s,u){this.width=s,this.height=u,this.nextRow=0,this.image=new pm({width:s,height:u}),this.positions={},this.uploaded=!1}getDash(s,u){const f=this.getKey(s,u);return this.positions[f]}trim(){const s=this.width,u=this.height=ua(this.nextRow);this.image.resize({width:s,height:u})}getKey(s,u){return s.join(",")+u}getDashRanges(s,u,f){const g=[];let m=s.length%2==1?-s[s.length-1]*f:0,_=s[0]*f,b=!0;g.push({left:m,right:_,isDash:b,zeroLength:s[0]===0});let O=s[0];for(let D=1;D<s.length;D++){b=!b;const C=s[D];m=O*f,O+=C,_=O*f,g.push({left:m,right:_,isDash:b,zeroLength:C===0})}return g}addRoundDash(s,u,f){const g=u/2;for(let m=-f;m<=f;m++){const _=this.width*(this.nextRow+f+m);let b=0,O=s[b];for(let D=0;D<this.width;D++){D/O.right>1&&(O=s[++b]);const C=Math.abs(D-O.left),V=Math.abs(D-O.right),I=Math.min(C,V);let z;const M=m/f*(g+1);if(O.isDash){const B=g-Math.abs(M);z=Math.sqrt(I*I+B*B)}else z=g-Math.sqrt(I*I+M*M);this.image.data[_+D]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(s,u){for(let O=s.length-1;O>=0;--O){const D=s[O],C=s[O+1];D.zeroLength?s.splice(O,1):C&&C.isDash===D.isDash&&(C.left=D.left,s.splice(O,1))}const f=s[0],g=s[s.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const m=this.width*this.nextRow;let _=0,b=s[_];for(let O=0;O<this.width;O++){O/b.right>1&&(b=s[++_]);const D=Math.abs(O-b.left),C=Math.abs(O-b.right),V=Math.min(D,C);this.image.data[m+O]=Math.max(0,Math.min(255,(b.isDash?V:-V)+u+128))}}addDash(s,u){const f=this.getKey(s,u);if(this.positions[f])return this.positions[f];const g=u==="round",m=g?7:0,_=2*m+1;if(this.nextRow+_>this.height)return $r("LineAtlas out of space"),null;s.length===0&&s.push(1);let b=0;for(let C=0;C<s.length;C++)s[C]<0&&($r("Negative value is found in line dasharray, replacing values with 0"),s[C]=0),b+=s[C];if(b!==0){const C=this.width/b,V=this.getDashRanges(s,this.width,C);g?this.addRoundDash(V,C,m):this.addRegularDash(V,u==="square"?.5*C:0)}const O=this.nextRow+m;this.nextRow+=_;const D={tl:[O,m],br:[b,0]};return this.positions[f]=D,D}}Pt(xp,"LineAtlas");const Tm=Dh.VectorTileFeature.types,FA=Math.cos(Math.PI/180*37.5),kA=Math.cos(Math.PI/180*5);class Gf{constructor(s){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=s.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=s.overscaling,this.pixelRatio=s.pixelRatio,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Vf,this.layoutVertexArray2=new No,this.patternVertexArray=new No,this.indexArray=new Ms,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new Li,this.maxLineLength=0,this.zOffsetVertexArray=new No,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=s.tessellationStep?s.tessellationStep:Va/64}updateFootprints(s,u){}populate(s,u,f,g){this.hasPattern=OA("line",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=y(f);const _=this.layers[0].layout.get("line-z-offset"),b=_.isConstant()&&!_.constantOr(0),O=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=O==="sea"||O==="ground"||!b&&O==="none",this.hasZOffset&&O==="none"&&$r(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const D=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&D!==void 0;const C=[];for(const{feature:M,id:B,index:J,sourceLayerIndex:te}of s){const he=this.layers[0]._featureFilter.needGeometry,de=Y(M,he);if(!this.layers[0]._featureFilter.filter(new Rn(this.zoom),de,f))continue;const ie=m?m.evaluate(de,{},f):void 0,ve={id:B,properties:M.properties,type:M.type,sourceLayerIndex:te,index:J,geometry:he?de.geometry:K(M,f,g),patterns:{},sortKey:ie};C.push(ve)}m&&C.sort((M,B)=>M.sortKey-B.sortKey);const{lineAtlas:V,featureIndex:I}=u,z=this.addConstantDashes(V);for(const M of C){const{geometry:B,index:J,sourceLayerIndex:te}=M;if(z&&this.addFeatureDashes(M,V),this.hasPattern){const he=VA("line",this.layers,M,this.zoom,this.pixelRatio,u);this.patternFeatures.push(he)}else this.addFeature(M,B,J,f,V.positions,u.availableImages,u.brightness);I.insert(s[J].feature,B,J,te,this.index)}}addConstantDashes(s){let u=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,m=f.layout.get("line-cap").value;if(g.kind!=="constant"||m.kind!=="constant")u=!0;else{const _=m.value,b=g.value;if(!b)continue;s.addDash(b,_)}}return u}addFeatureDashes(s,u){const f=this.zoom;for(const g of this.layers){const m=g.paint.get("line-dasharray").value,_=g.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let b,O;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:f},s);O=_.kind==="constant"?_.value:_.evaluate({zoom:f},s),u.addDash(b,O),s.patterns[g.id]=u.getKey(b,O)}}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}addFeatures(s,u,f,g,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,g,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,HC)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=s.createVertexBuffer(this.patternVertexArray,Rm)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,nw.members,!0)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,v0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,f,g,m,_,b){const O=this.layers[0].layout,D=O.get("line-join").evaluate(s,{}),C=O.get("line-cap").evaluate(s,{}),V=O.get("line-miter-limit"),I=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(s),this.lineFeature=s,this.zOffsetValue=O.get("line-z-offset").value;const z=this.layers[0].paint.get("line-width").value;z.kind!=="constant"&&z.isLineProgressConstant===!1&&(this.variableWidthValue=z);for(const M of u)this.addLine(M,s,g,D,C,V,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,m,_,g,b)}addLine(s,u,f,g,m,_,b){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const O=g==="none";if(this.patternJoinNone=this.hasPattern&&O,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<s.length-1;de++)this.totalDistance+=s[de].dist(s[de+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=Tm[u.type]==="Polygon";let C=s.length;for(;C>=2&&s[C-1].equals(s[C-2]);)C--;let V=0;for(;V<C-1&&s[V].equals(s[V+1]);)V++;if(C<(D?3:2))return;g==="bevel"&&(_=1.05);const I=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let z,M,B,J,te,he;this.e1=this.e2=-1,D&&(z=s[C-2],te=s[V].sub(z)._unit()._perp());for(let de=V;de<C;de++){if(B=de===C-1?D?s[V+1]:void 0:s[de+1],B&&s[de].equals(B))continue;te&&(J=te),z&&(M=z),z=s[de],he=this.evaluateLineProgressFeatures(M?M.dist(z):0),te=B?B.sub(z)._unit()._perp():J,J=J||te;const ie=M&&B;let ve=ie?g:D||O?"butt":m;const be=J.x*te.x+J.y*te.y;if(O){const xt=function(Ct){if(Ct.patternJoinNone){const Dt=Ct.segmentPoints.length/2,Nt=Ct.lineSoFar-Ct.segmentStart;for(let jt=0;jt<Dt;++jt){const Lt=Ct.segmentPoints[2*jt+1],qt=Math.round(Ct.segmentPoints[2*jt])+.5+.25*Lt;Ct.patternVertexArray.emplaceBack(qt,Nt,Ct.segmentStart),Ct.patternVertexArray.emplaceBack(qt,Nt,Ct.segmentStart)}Ct.segmentPoints.length=0}Ct.e1=Ct.e2=-1};if(ie&&be<kA){this.updateDistance(M,z),this.addCurrentVertex(z,J,1,1,I,he),xt(this),this.addCurrentVertex(z,te,-1,-1,I,he);continue}if(M){if(!B){this.updateDistance(M,z),this.addCurrentVertex(z,J,1,1,I,he),xt(this);continue}ve="miter"}}let Oe=J.add(te);Oe.x===0&&Oe.y===0||Oe._unit();const et=Oe.x*te.x+Oe.y*te.y,We=et!==0?1/et:1/0,Ye=2*Math.sqrt(2-2*et),gt=et<FA&&M&&B,tt=J.x*te.y-J.y*te.x>0,vt=this.overscaling<=16?15*Va/(512*this.overscaling):0;if(ie&&ve==="round"){if(We<b)ve="miter";else if(We<=2){const xt=ow(z,-10,Va+10);ve=this.hasZOffset&&(xt||this.hasCrossSlope)?"miter":"fakeround"}}if(ve==="miter"&&We>_&&(ve="bevel"),ve==="bevel"&&(We>2&&(ve="flipbevel"),We<_&&(ve="miter")),M&&!(ve==="miter"&&gt)&&this.updateDistance(M,z),ve==="miter")if(gt){const xt=z.dist(M);if(xt>2*vt){const Dt=z.sub(z.sub(M)._mult(vt/xt)._round());this.updateDistance(M,Dt),this.addCurrentVertex(Dt,J,0,0,I,he),M=Dt}this.updateDistance(M,z),Oe._mult(We),this.addCurrentVertex(z,Oe,0,0,I,he);const Ct=z.dist(B);if(Ct>2*vt){const Dt=z.add(B.sub(z)._mult(vt/Ct)._round());this.updateDistance(z,Dt),this.addCurrentVertex(Dt,te,0,0,I,he),z=Dt}}else Oe._mult(We),this.addCurrentVertex(z,Oe,0,0,I,he);else if(ve==="flipbevel"){if(We>100)Oe=te.mult(-1);else{const xt=We*J.add(te).mag()/J.sub(te).mag();Oe._perp()._mult(xt*(tt?-1:1))}this.addCurrentVertex(z,Oe,0,0,I,he),this.addCurrentVertex(z,Oe.mult(-1),0,0,I,he)}else if(ve==="bevel"||ve==="fakeround"){he!=null&&M&&this.addCurrentVertex(z,J,-1,-1,I,he);const xt=z.dist(M)<=2*vt&&ve!=="bevel",Ct=Oe.mult(tt?1:-1);Ct._mult(We);const Dt=te.mult(tt?-1:1),Nt=J.mult(tt?-1:1),jt=this.evaluateLineProgressFeatures(this.distance);if(he==null&&(this.addHalfVertex(z,Ct.x,Ct.y,!1,!tt,0,I,jt),xt||this.addHalfVertex(z,Ct.x+2*Nt.x,Ct.y+2*Nt.y,!1,tt,0,I,jt)),ve==="fakeround"){const Lt=Math.round(180*Ye/Math.PI/20);this.addHalfVertex(z,Nt.x,Nt.y,!1,tt,0,I,jt);for(let qt=0;qt<Lt;qt++){let Aa=qt/Lt;if(Aa!==.5){const Qa=Aa-.5;Aa+=Aa*Qa*(Aa-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*Qa*Qa+(.848013+be*(.215638*be-1.06021)))}const ga=Dt.sub(Nt)._mult(Aa)._add(Nt)._unit();this.addHalfVertex(z,ga.x,ga.y,!1,tt,0,I,jt)}this.addHalfVertex(z,Dt.x,Dt.y,!1,tt,0,I,jt)}xt||he!=null||this.addHalfVertex(z,Ct.x+2*Dt.x,Ct.y+2*Dt.y,!1,tt,0,I,jt),he!=null&&B&&this.addCurrentVertex(z,te,1,1,I,he)}else ve==="butt"?this.addCurrentVertex(z,Oe,0,0,I,he):ve==="square"?(M||this.addCurrentVertex(z,Oe,-1,-1,I,he),this.addCurrentVertex(z,Oe,0,0,I,he),M&&this.addCurrentVertex(z,Oe,1,1,I,he)):ve==="round"&&(M&&(this.addCurrentVertex(z,J,0,0,I,he),this.addCurrentVertex(z,J,1,1,I,he,!0)),B&&(this.addCurrentVertex(z,te,-1,-1,I,he,!0),this.addCurrentVertex(z,te,0,0,I,he)))}}addVerticesTo(s,u,f,g,m,_,b,O,D,C){const V=(u.w-s.w)/this.tessellationStep|0;let I=0;const z=this.scaledDistance;if(V>1){this.lineSoFar=s.w;const B=(u.x-s.x)/V,J=(u.y-s.y)/V,te=(u.z-s.z)/V,he=(u.w-s.w)/V;for(let de=1;de<V;++de){s.x+=B,s.y+=J,s.z+=te,this.lineSoFar+=he,I+=he;const ie=this.evaluateLineProgressFeatures(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(s,f,g,C,!1,b,D,ie),this.addHalfVertex(s,m,_,C,!0,-O,D,ie)}}this.lineSoFar=u.w,this.scaledDistance=z;const M=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,f,g,C,!1,b,D,M),this.addHalfVertex(u,m,_,C,!0,-O,D,M)}evaluateLineProgressFeatures(s){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+s)/this.totalFeatureLength):$r(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(s,u,f,g,m,_,b=!1){const O=u.x+u.y*f,D=u.y-u.x*f,C=u.y*g-u.x,V=-u.y-u.x*g;if(_!=null){const I=this.hasZOffset,z=-10,M=Va+10,B=_.zOffset,J=new q1(s.x,s.y,B,this.lineSoFar),te=!!I&&ow(s,z,M),he=this.lineSoFar,de=this.distance;if(this.currentVertex)if(te){const ie=this.currentVertexIsOutside,ve=this.currentVertex,be=new q1(s.x,s.y,B,this.lineSoFar);if(H1(ve,be,z,M),!ow(be,z,M)){if(ie){this.e1=this.e2=-1,this.distance-=ve.dist(J),this.lineSoFar=ve.w;const Oe=this.evaluateLineProgressFeatures(ve.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ve,O,D,b,!1,f,m,Oe),this.addHalfVertex(ve,C,V,b,!0,-g,m,Oe),this.prevDistance=this.distance}this.distance=this.prevDistance+ve.dist(be),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(ve,be,O,D,C,V,f,g,m,b),this.distance=de,this.scaledDistance=this.distance/this.totalDistance}}else{const ie=this.currentVertex;if(this.currentVertexIsOutside){H1(ie,J,z,M),this.e1=this.e2=-1,this.distance-=ie.dist(J),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=ie.w;const ve=this.evaluateLineProgressFeatures(ie.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ie,O,D,b,!1,f,m,ve),this.addHalfVertex(ie,C,V,b,!0,-g,m,ve),this.prevDistance=this.distance,this.distance=de,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(ie,J,O,D,C,V,f,g,m,b)}else te||(this.addHalfVertex(s,O,D,b,!1,f,m,_),this.addHalfVertex(s,C,V,b,!0,-g,m,_));this.currentVertex=J,this.currentVertexIsOutside=te,this.lineSoFar=he}else this.addHalfVertex(s,O,D,b,!1,f,m,_),this.addHalfVertex(s,C,V,b,!0,-g,m,_)}addHalfVertex({x:s,y:u},f,g,m,_,b,O,D){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,b)),this.layoutVertexArray.emplaceBack((s<<1)+(m?1:0),(u<<1)+(_?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const V=mr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,V)}const C=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),O.primitiveLength++),_?this.e2=C:this.e1=C,D!=null&&this.zOffsetVertexArray.emplaceBack(D.zOffset,D.variableWidth,D.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(s,u){this.prevDistance=this.distance,this.distance+=s.dist(u),this.updateScaledDistance()}}function ow(h,s,u){return h.x<s||h.x>u||h.y<s||h.y>u}let lw,fy;function $C(h,s,u){return s*(Va/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}Pt(Gf,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const uw=(h,s,u)=>(1-u)*h+u*s;function UA(h,s){return 1/$C(h,1,s.tileZoom)}function cw(h,s,u,f){return h.translatePosMatrix(f||s.tileID.projMatrix,s,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const KC=h=>{const s=[];BA(h)&&s.push("RENDER_LINE_DASH"),h.paint.get("line-gradient")&&s.push("RENDER_LINE_GRADIENT");const u=h.paint.get("line-trim-offset");u[0]===0&&u[1]===0||s.push("RENDER_LINE_TRIM_OFFSET"),h.paint.get("line-border-width").constantOr(1)!==0&&s.push("RENDER_LINE_BORDER");const f=h.layout.get("line-join").constantOr("miter")==="none",g=!!h.paint.get("line-pattern").constantOr(1);return f&&g&&s.push("LINE_JOIN_NONE"),s};function BA(h){const s=h.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}let py;const dw=()=>py||(py={layout:lw||(lw=new Ii({"line-cap":new Ua(Zt.layout_line["line-cap"]),"line-join":new Ua(Zt.layout_line["line-join"]),"line-miter-limit":new ba(Zt.layout_line["line-miter-limit"]),"line-round-limit":new ba(Zt.layout_line["line-round-limit"]),"line-sort-key":new Ua(Zt.layout_line["line-sort-key"]),"line-z-offset":new Ua(Zt.layout_line["line-z-offset"]),"line-elevation-reference":new ba(Zt.layout_line["line-elevation-reference"]),"line-cross-slope":new ba(Zt.layout_line["line-cross-slope"]),visibility:new ba(Zt.layout_line.visibility),"line-width-unit":new ba(Zt.layout_line["line-width-unit"])})),paint:fy||(fy=new Ii({"line-opacity":new Ua(Zt.paint_line["line-opacity"]),"line-color":new Ua(Zt.paint_line["line-color"]),"line-translate":new ba(Zt.paint_line["line-translate"]),"line-translate-anchor":new ba(Zt.paint_line["line-translate-anchor"]),"line-width":new Ua(Zt.paint_line["line-width"]),"line-gap-width":new Ua(Zt.paint_line["line-gap-width"]),"line-offset":new Ua(Zt.paint_line["line-offset"]),"line-blur":new Ua(Zt.paint_line["line-blur"]),"line-dasharray":new Ua(Zt.paint_line["line-dasharray"]),"line-pattern":new Ua(Zt.paint_line["line-pattern"]),"line-gradient":new es(Zt.paint_line["line-gradient"]),"line-trim-offset":new ba(Zt.paint_line["line-trim-offset"]),"line-trim-fade-range":new ba(Zt.paint_line["line-trim-fade-range"]),"line-trim-color":new ba(Zt.paint_line["line-trim-color"]),"line-emissive-strength":new ba(Zt.paint_line["line-emissive-strength"]),"line-border-width":new Ua(Zt.paint_line["line-border-width"]),"line-border-color":new Ua(Zt.paint_line["line-border-color"]),"line-occlusion-opacity":new ba(Zt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},py);class jA extends Ua{possiblyEvaluate(s,u){return u=new Rn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(s,u)}evaluate(s,u,f,g){return u=fn({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,f,g)}}let pg;function GA(h,s){return s>0?s+2*h:h}const WC=Nn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gE=Nn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),_0=Nn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Nn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const p=Nn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),w=Nn([{name:"a_texb",components:2,type:"Uint16"}]),P=Nn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),U=Nn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Nn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const X=Nn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ue=Nn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Nn([{name:"triangle",components:3,type:"Uint16"}]),Nn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Nn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),Nn([{type:"Float32",name:"offsetX"}]),Nn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Be=24;const ft=128;function Bt(h,s,u,f,g){if(h.kind==="camera")return h.maxSize;if(h.kind==="composite"){const m=s.possiblyEvaluate(new Rn(h.maxZoom),u).evaluate(g,{},u),_=s.possiblyEvaluate(new Rn(h.minZoom),u).evaluate(g,{},u);return Math.max(m,_)}return s.possiblyEvaluate(new Rn(f)).evaluate(g,{},u)}function la(h,s){const{expression:u}=s;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Rn(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=u;let m=0;for(;m<f.length&&f[m]<=h;)m++;m=Math.max(0,m-1);let _=m;for(;_<f.length&&f[_]<h+1;)_++;_=Math.min(f.length-1,_);const b=f[m],O=f[_];return u.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:O,interpolationType:g}:{kind:"camera",minZoom:b,maxZoom:O,minSize:u.evaluate(new Rn(b)),maxSize:u.evaluate(new Rn(O)),interpolationType:g}}}function Za(h,{uSize:s,uSizeT:u},{lowerSize:f,upperSize:g}){return h.kind==="source"?f/ft:h.kind==="composite"?mr(f/ft,g/ft,u):s}function sr(h,s,u=1){let f=0,g=0;if(h.kind==="constant")g=h.layoutSize*u;else if(h.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:b}=h,O=m?ka(Ji.interpolationFactor(m,s,_,b),0,1):0;h.kind==="camera"?g=mr(h.minSize,h.maxSize,O)*u:f=O*u}return{uSizeT:f,uSize:g}}var xa=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ft,evaluateSizeForFeature:Za,evaluateSizeForZoom:sr,getRasterizedIconSize:Bt,getSizeData:la});function qa(h,s,u){return h.sections.forEach(f=>{f.text=function(g,m,_){const b=m.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?g=g.toLocaleUpperCase():b==="lowercase"&&(g=g.toLocaleLowerCase()),hs.applyArabicShaping&&(g=hs.applyArabicShaping(g)),g}(f.text,s,u)}),h}const Jr={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function ti(h){return h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""}function Jo(h){return h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""}var ya,ia,Ca,tr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Yr(){return ya||(ya=1,tr.read=function(h,s,u,f,g){var m,_,b=8*g-f-1,O=(1<<b)-1,D=O>>1,C=-7,V=u?g-1:0,I=u?-1:1,z=h[s+V];for(V+=I,m=z&(1<<-C)-1,z>>=-C,C+=b;C>0;m=256*m+h[s+V],V+=I,C-=8);for(_=m&(1<<-C)-1,m>>=-C,C+=f;C>0;_=256*_+h[s+V],V+=I,C-=8);if(m===0)m=1-D;else{if(m===O)return _?NaN:1/0*(z?-1:1);_+=Math.pow(2,f),m-=D}return(z?-1:1)*_*Math.pow(2,m-f)},tr.write=function(h,s,u,f,g,m){var _,b,O,D=8*m-g-1,C=(1<<D)-1,V=C>>1,I=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,z=f?0:m-1,M=f?1:-1,B=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(b=isNaN(s)?1:0,_=C):(_=Math.floor(Math.log(s)/Math.LN2),s*(O=Math.pow(2,-_))<1&&(_--,O*=2),(s+=_+V>=1?I/O:I*Math.pow(2,1-V))*O>=2&&(_++,O/=2),_+V>=C?(b=0,_=C):_+V>=1?(b=(s*O-1)*Math.pow(2,g),_+=V):(b=s*Math.pow(2,V-1)*Math.pow(2,g),_=0));g>=8;h[u+z]=255&b,z+=M,b/=256,g-=8);for(_=_<<g|b,D+=g;D>0;h[u+z]=255&_,z+=M,_/=256,D-=8);h[u+z-M]|=128*B}),tr}function Ai(){if(Ca)return ia;Ca=1,ia=s;var h=Yr();function s(ie){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ie)?ie:new Uint8Array(ie||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var u=4294967296,f=1/u,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(ie){return ie.type===s.Bytes?ie.readVarint()+ie.pos:ie.pos+1}function _(ie,ve,be){return be?4294967296*ve+(ie>>>0):4294967296*(ve>>>0)+(ie>>>0)}function b(ie,ve,be){var Oe=ve<=16383?1:ve<=2097151?2:ve<=268435455?3:Math.floor(Math.log(ve)/(7*Math.LN2));be.realloc(Oe);for(var et=be.pos-1;et>=ie;et--)be.buf[et+Oe]=be.buf[et]}function O(ie,ve){for(var be=0;be<ie.length;be++)ve.writeVarint(ie[be])}function D(ie,ve){for(var be=0;be<ie.length;be++)ve.writeSVarint(ie[be])}function C(ie,ve){for(var be=0;be<ie.length;be++)ve.writeFloat(ie[be])}function V(ie,ve){for(var be=0;be<ie.length;be++)ve.writeDouble(ie[be])}function I(ie,ve){for(var be=0;be<ie.length;be++)ve.writeBoolean(ie[be])}function z(ie,ve){for(var be=0;be<ie.length;be++)ve.writeFixed32(ie[be])}function M(ie,ve){for(var be=0;be<ie.length;be++)ve.writeSFixed32(ie[be])}function B(ie,ve){for(var be=0;be<ie.length;be++)ve.writeFixed64(ie[be])}function J(ie,ve){for(var be=0;be<ie.length;be++)ve.writeSFixed64(ie[be])}function te(ie,ve){return(ie[ve]|ie[ve+1]<<8|ie[ve+2]<<16)+16777216*ie[ve+3]}function he(ie,ve,be){ie[be]=ve,ie[be+1]=ve>>>8,ie[be+2]=ve>>>16,ie[be+3]=ve>>>24}function de(ie,ve){return(ie[ve]|ie[ve+1]<<8|ie[ve+2]<<16)+(ie[ve+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(ie,ve,be){for(be=be||this.length;this.pos<be;){var Oe=this.readVarint(),et=Oe>>3,We=this.pos;this.type=7&Oe,ie(et,ve,this),this.pos===We&&this.skip(Oe)}return ve},readMessage:function(ie,ve){return this.readFields(ie,ve,this.readVarint()+this.pos)},readFixed32:function(){var ie=te(this.buf,this.pos);return this.pos+=4,ie},readSFixed32:function(){var ie=de(this.buf,this.pos);return this.pos+=4,ie},readFixed64:function(){var ie=te(this.buf,this.pos)+te(this.buf,this.pos+4)*u;return this.pos+=8,ie},readSFixed64:function(){var ie=te(this.buf,this.pos)+de(this.buf,this.pos+4)*u;return this.pos+=8,ie},readFloat:function(){var ie=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ie},readDouble:function(){var ie=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ie},readVarint:function(ie){var ve,be,Oe=this.buf;return ve=127&(be=Oe[this.pos++]),be<128?ve:(ve|=(127&(be=Oe[this.pos++]))<<7,be<128?ve:(ve|=(127&(be=Oe[this.pos++]))<<14,be<128?ve:(ve|=(127&(be=Oe[this.pos++]))<<21,be<128?ve:function(et,We,Ye){var gt,tt,vt=Ye.buf;if(gt=(112&(tt=vt[Ye.pos++]))>>4,tt<128||(gt|=(127&(tt=vt[Ye.pos++]))<<3,tt<128)||(gt|=(127&(tt=vt[Ye.pos++]))<<10,tt<128)||(gt|=(127&(tt=vt[Ye.pos++]))<<17,tt<128)||(gt|=(127&(tt=vt[Ye.pos++]))<<24,tt<128)||(gt|=(1&(tt=vt[Ye.pos++]))<<31,tt<128))return _(et,gt,We);throw new Error("Expected varint not more than 10 bytes")}(ve|=(15&(be=Oe[this.pos]))<<28,ie,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ie=this.readVarint();return ie%2==1?(ie+1)/-2:ie/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ie=this.readVarint()+this.pos,ve=this.pos;return this.pos=ie,ie-ve>=12&&g?function(be,Oe,et){return g.decode(be.subarray(Oe,et))}(this.buf,ve,ie):function(be,Oe,et){for(var We="",Ye=Oe;Ye<et;){var gt,tt,vt,xt=be[Ye],Ct=null,Dt=xt>239?4:xt>223?3:xt>191?2:1;if(Ye+Dt>et)break;Dt===1?xt<128&&(Ct=xt):Dt===2?(192&(gt=be[Ye+1]))==128&&(Ct=(31&xt)<<6|63&gt)<=127&&(Ct=null):Dt===3?(tt=be[Ye+2],(192&(gt=be[Ye+1]))==128&&(192&tt)==128&&((Ct=(15&xt)<<12|(63&gt)<<6|63&tt)<=2047||Ct>=55296&&Ct<=57343)&&(Ct=null)):Dt===4&&(tt=be[Ye+2],vt=be[Ye+3],(192&(gt=be[Ye+1]))==128&&(192&tt)==128&&(192&vt)==128&&((Ct=(15&xt)<<18|(63&gt)<<12|(63&tt)<<6|63&vt)<=65535||Ct>=1114112)&&(Ct=null)),Ct===null?(Ct=65533,Dt=1):Ct>65535&&(Ct-=65536,We+=String.fromCharCode(Ct>>>10&1023|55296),Ct=56320|1023&Ct),We+=String.fromCharCode(Ct),Ye+=Dt}return We}(this.buf,ve,ie)},readBytes:function(){var ie=this.readVarint()+this.pos,ve=this.buf.subarray(this.pos,ie);return this.pos=ie,ve},readPackedVarint:function(ie,ve){if(this.type!==s.Bytes)return ie.push(this.readVarint(ve));var be=m(this);for(ie=ie||[];this.pos<be;)ie.push(this.readVarint(ve));return ie},readPackedSVarint:function(ie){if(this.type!==s.Bytes)return ie.push(this.readSVarint());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readSVarint());return ie},readPackedBoolean:function(ie){if(this.type!==s.Bytes)return ie.push(this.readBoolean());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readBoolean());return ie},readPackedFloat:function(ie){if(this.type!==s.Bytes)return ie.push(this.readFloat());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readFloat());return ie},readPackedDouble:function(ie){if(this.type!==s.Bytes)return ie.push(this.readDouble());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readDouble());return ie},readPackedFixed32:function(ie){if(this.type!==s.Bytes)return ie.push(this.readFixed32());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readFixed32());return ie},readPackedSFixed32:function(ie){if(this.type!==s.Bytes)return ie.push(this.readSFixed32());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readSFixed32());return ie},readPackedFixed64:function(ie){if(this.type!==s.Bytes)return ie.push(this.readFixed64());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readFixed64());return ie},readPackedSFixed64:function(ie){if(this.type!==s.Bytes)return ie.push(this.readSFixed64());var ve=m(this);for(ie=ie||[];this.pos<ve;)ie.push(this.readSFixed64());return ie},skip:function(ie){var ve=7&ie;if(ve===s.Varint)for(;this.buf[this.pos++]>127;);else if(ve===s.Bytes)this.pos=this.readVarint()+this.pos;else if(ve===s.Fixed32)this.pos+=4;else{if(ve!==s.Fixed64)throw new Error("Unimplemented type: "+ve);this.pos+=8}},writeTag:function(ie,ve){this.writeVarint(ie<<3|ve)},realloc:function(ie){for(var ve=this.length||16;ve<this.pos+ie;)ve*=2;if(ve!==this.length){var be=new Uint8Array(ve);be.set(this.buf),this.buf=be,this.length=ve}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ie){this.realloc(4),he(this.buf,ie,this.pos),this.pos+=4},writeSFixed32:function(ie){this.realloc(4),he(this.buf,ie,this.pos),this.pos+=4},writeFixed64:function(ie){this.realloc(8),he(this.buf,-1&ie,this.pos),he(this.buf,Math.floor(ie*f),this.pos+4),this.pos+=8},writeSFixed64:function(ie){this.realloc(8),he(this.buf,-1&ie,this.pos),he(this.buf,Math.floor(ie*f),this.pos+4),this.pos+=8},writeVarint:function(ie){(ie=+ie||0)>268435455||ie<0?function(ve,be){var Oe,et;if(ve>=0?(Oe=ve%4294967296|0,et=ve/4294967296|0):(et=~(-ve/4294967296),4294967295^(Oe=~(-ve%4294967296))?Oe=Oe+1|0:(Oe=0,et=et+1|0)),ve>=18446744073709552e3||ve<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");be.realloc(10),function(We,Ye,gt){gt.buf[gt.pos++]=127&We|128,We>>>=7,gt.buf[gt.pos++]=127&We|128,We>>>=7,gt.buf[gt.pos++]=127&We|128,We>>>=7,gt.buf[gt.pos++]=127&We|128,gt.buf[gt.pos]=127&(We>>>=7)}(Oe,0,be),function(We,Ye){var gt=(7&We)<<4;Ye.buf[Ye.pos++]|=gt|((We>>>=3)?128:0),We&&(Ye.buf[Ye.pos++]=127&We|((We>>>=7)?128:0),We&&(Ye.buf[Ye.pos++]=127&We|((We>>>=7)?128:0),We&&(Ye.buf[Ye.pos++]=127&We|((We>>>=7)?128:0),We&&(Ye.buf[Ye.pos++]=127&We|((We>>>=7)?128:0),We&&(Ye.buf[Ye.pos++]=127&We)))))}(et,be)}(ie,this):(this.realloc(4),this.buf[this.pos++]=127&ie|(ie>127?128:0),ie<=127||(this.buf[this.pos++]=127&(ie>>>=7)|(ie>127?128:0),ie<=127||(this.buf[this.pos++]=127&(ie>>>=7)|(ie>127?128:0),ie<=127||(this.buf[this.pos++]=ie>>>7&127))))},writeSVarint:function(ie){this.writeVarint(ie<0?2*-ie-1:2*ie)},writeBoolean:function(ie){this.writeVarint(!!ie)},writeString:function(ie){ie=String(ie),this.realloc(4*ie.length),this.pos++;var ve=this.pos;this.pos=function(Oe,et,We){for(var Ye,gt,tt=0;tt<et.length;tt++){if((Ye=et.charCodeAt(tt))>55295&&Ye<57344){if(!gt){Ye>56319||tt+1===et.length?(Oe[We++]=239,Oe[We++]=191,Oe[We++]=189):gt=Ye;continue}if(Ye<56320){Oe[We++]=239,Oe[We++]=191,Oe[We++]=189,gt=Ye;continue}Ye=gt-55296<<10|Ye-56320|65536,gt=null}else gt&&(Oe[We++]=239,Oe[We++]=191,Oe[We++]=189,gt=null);Ye<128?Oe[We++]=Ye:(Ye<2048?Oe[We++]=Ye>>6|192:(Ye<65536?Oe[We++]=Ye>>12|224:(Oe[We++]=Ye>>18|240,Oe[We++]=Ye>>12&63|128),Oe[We++]=Ye>>6&63|128),Oe[We++]=63&Ye|128)}return We}(this.buf,ie,this.pos);var be=this.pos-ve;be>=128&&b(ve,be,this),this.pos=ve-1,this.writeVarint(be),this.pos+=be},writeFloat:function(ie){this.realloc(4),h.write(this.buf,ie,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ie){this.realloc(8),h.write(this.buf,ie,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ie){var ve=ie.length;this.writeVarint(ve),this.realloc(ve);for(var be=0;be<ve;be++)this.buf[this.pos++]=ie[be]},writeRawMessage:function(ie,ve){this.pos++;var be=this.pos;ie(ve,this);var Oe=this.pos-be;Oe>=128&&b(be,Oe,this),this.pos=be-1,this.writeVarint(Oe),this.pos+=Oe},writeMessage:function(ie,ve,be){this.writeTag(ie,s.Bytes),this.writeRawMessage(ve,be)},writePackedVarint:function(ie,ve){ve.length&&this.writeMessage(ie,O,ve)},writePackedSVarint:function(ie,ve){ve.length&&this.writeMessage(ie,D,ve)},writePackedBoolean:function(ie,ve){ve.length&&this.writeMessage(ie,I,ve)},writePackedFloat:function(ie,ve){ve.length&&this.writeMessage(ie,C,ve)},writePackedDouble:function(ie,ve){ve.length&&this.writeMessage(ie,V,ve)},writePackedFixed32:function(ie,ve){ve.length&&this.writeMessage(ie,z,ve)},writePackedSFixed32:function(ie,ve){ve.length&&this.writeMessage(ie,M,ve)},writePackedFixed64:function(ie,ve){ve.length&&this.writeMessage(ie,B,ve)},writePackedSFixed64:function(ie,ve){ve.length&&this.writeMessage(ie,J,ve)},writeBytesField:function(ie,ve){this.writeTag(ie,s.Bytes),this.writeBytes(ve)},writeFixed32Field:function(ie,ve){this.writeTag(ie,s.Fixed32),this.writeFixed32(ve)},writeSFixed32Field:function(ie,ve){this.writeTag(ie,s.Fixed32),this.writeSFixed32(ve)},writeFixed64Field:function(ie,ve){this.writeTag(ie,s.Fixed64),this.writeFixed64(ve)},writeSFixed64Field:function(ie,ve){this.writeTag(ie,s.Fixed64),this.writeSFixed64(ve)},writeVarintField:function(ie,ve){this.writeTag(ie,s.Varint),this.writeVarint(ve)},writeSVarintField:function(ie,ve){this.writeTag(ie,s.Varint),this.writeSVarint(ve)},writeStringField:function(ie,ve){this.writeTag(ie,s.Bytes),this.writeString(ve)},writeFloatField:function(ie,ve){this.writeTag(ie,s.Fixed32),this.writeFloat(ve)},writeDoubleField:function(ie,ve){this.writeTag(ie,s.Fixed64),this.writeDouble(ve)},writeBooleanField:function(ie,ve){this.writeVarintField(ie,!!ve)}},ia}var un=v(Ai());const On=3;function du(h,s,u){s.glyphs=[],h===1&&u.readMessage(os,s)}function os(h,s,u){if(h===3){const{id:f,bitmap:g,width:m,height:_,left:b,top:O,advance:D}=u.readMessage(Cm,{});s.glyphs.push({id:f,bitmap:new pm({width:m+2*On,height:_+2*On},g),metrics:{width:m,height:_,left:b,top:O,advance:D}})}else h===4?s.ascender=u.readSVarint():h===5&&(s.descender=u.readSVarint())}function Cm(h,s,u){h===1?s.id=u.readVarint():h===2?s.bitmap=u.readBytes():h===3?s.width=u.readVarint():h===4?s.height=u.readVarint():h===5?s.left=u.readSVarint():h===6?s.top=u.readSVarint():h===7&&(s.advance=u.readVarint())}const yE=On,th={horizontal:1,vertical:2,horizontalOnly:3};class hw{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(s,u){const f=new hw;return f.scale=s||1,f.fontStack=u,f}static forImage(s){const u=new hw;return u.image=s,u}}class w0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u,f){const g=new w0;for(let m=0;m<s.sections.length;m++){const _=s.sections[m];_.image?g.addImageSection(_,f):g.addTextSection(_,u)}return g}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCodePoint(s){return this.text.codePointAt(s)}verticalizePunctuation(s){this.text=function(u,f){let g="";for(let m=0;m<u.length;m++){const _=u.charCodeAt(m+1)||null,b=u.charCodeAt(m-1)||null;g+=!f&&(_&&xr(_)&&!Jr[u[m+1]]||b&&xr(b)&&!Jr[u[m-1]])||!Jr[u[m]]?u[m]:Jr[u[m]]}return g}(this.text,s)}trim(){let s=0;for(let f=0;f<this.text.length&&YC[this.text.charCodeAt(f)];f++)s++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=s&&YC[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){const f=new w0;return f.text=this.text.substring(s,u),f.sectionIndex=this.sectionIndex.slice(s,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}addTextSection(s,u){this.text+=s.text,this.sections.push(hw.forText(s.scale,s.fontStack||u));const f=this.sections.length-1;for(let g=0;g<s.text.length;++g)this.sectionIndex.push(f)}addImageSection(s,u){const f=s.image?s.image.getPrimary():null;if(!f)return void $r("Can't add FormattedSection with an empty image.");f.scaleSelf(u);const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCodePoint(g),this.sections.push(hw.forImage(f)),this.sectionIndex.push(this.sections.length-1)):$r("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function AE(h,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B=1){const J=w0.fromFeature(h,g,B);V===th.vertical&&J.verticalizePunctuation(I);let te=[];const he=function(Oe,et,We,Ye,gt,tt){if(!Oe)return[];const vt=[],xt=function(jt,Lt,qt,Aa,ga,Qa){let Pa=0;for(let za=0;za<jt.length();za++){const wa=jt.getSection(za);Pa+=W4(jt.getCodePoint(za),wa,Aa,ga,Lt,Qa)}return Pa/Math.max(1,Math.ceil(Pa/qt))}(Oe,et,We,Ye,gt,tt),Ct=Oe.text.indexOf("")>=0;let Dt=0;for(let jt=0;jt<Oe.length();jt++){const Lt=Oe.getSection(jt),qt=Oe.getCodePoint(jt);if(YC[qt]||(Dt+=W4(qt,Lt,Ye,gt,et,tt)),jt<Oe.length()-1){const Aa=!((Nt=qt)<11904||!(Rt["Bopomofo Extended"](Nt)||Rt.Bopomofo(Nt)||Rt["CJK Compatibility Forms"](Nt)||Rt["CJK Compatibility Ideographs"](Nt)||Rt["CJK Compatibility"](Nt)||Rt["CJK Radicals Supplement"](Nt)||Rt["CJK Strokes"](Nt)||Rt["CJK Symbols and Punctuation"](Nt)||Rt["CJK Unified Ideographs Extension A"](Nt)||Rt["CJK Unified Ideographs"](Nt)||Rt["Enclosed CJK Letters and Months"](Nt)||Rt["Halfwidth and Fullwidth Forms"](Nt)||Rt.Hiragana(Nt)||Rt["Ideographic Description Characters"](Nt)||Rt["Kangxi Radicals"](Nt)||Rt["Katakana Phonetic Extensions"](Nt)||Rt.Katakana(Nt)||Rt["Vertical Forms"](Nt)||Rt["Yi Radicals"](Nt)||Rt["Yi Syllables"](Nt)));(Tae[qt]||Aa||Lt.image)&&vt.push(X4(jt+1,Dt,xt,vt,Cae(qt,Oe.getCodePoint(jt+1),Aa&&Ct),!1))}}var Nt;return J4(X4(Oe.length(),Dt,xt,vt,0,!0))}(J,D,m,s,f,z),{processBidirectionalText:de,processStyledBidirectionalText:ie}=hs;if(de&&J.sections.length===1){const Oe=de(J.toString(),he);for(const et of Oe){const We=new w0;We.text=et,We.sections=J.sections;for(let Ye=0;Ye<et.length;Ye++)We.sectionIndex.push(0);te.push(We)}}else if(ie){const Oe=ie(J.text,J.sectionIndex,he);for(const et of Oe){const We=new w0;We.text=et[0],We.sectionIndex=et[1],We.sections=J.sections,te.push(We)}}else te=function(Oe,et){const We=[],Ye=Oe.text;let gt=0;for(const tt of et)We.push(Oe.substring(gt,tt)),gt=tt;return gt<Ye.length&&We.push(Oe.substring(gt,Ye.length)),We}(J,he);const ve=[],be={positionedLines:ve,text:J.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:V,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Oe,et,We,Ye,gt,tt,vt,xt,Ct,Dt,Nt,jt){let Lt=0,qt=0,Aa=0;const ga=xt==="right"?1:xt==="left"?0:.5;let Qa=!1;for(const ur of gt){const Mr=ur.getSections();for(const en of Mr){if(en.image)continue;const Br=et[en.fontStack];if(Br&&(Qa=Br.ascender!==void 0&&Br.descender!==void 0,!Qa))break}if(!Qa)break}let Pa=0;for(const ur of gt){ur.trim();const Mr=ur.getMaxScale(),en=(Mr-1)*Be,Br={positionedGlyphs:[],lineOffset:0};Oe.positionedLines[Pa]=Br;const gn=Br.positionedGlyphs;let Qr=0;if(!ur.length()){qt+=tt,++Pa;continue}let Tn=0,Wn=0;for(let Fr=0;Fr<ur.length();Fr++){const Vn=ur.getSection(Fr),as=ur.getSectionIndex(Fr),ps=ur.getCodePoint(Fr);let Ts=Vn.scale,Ls=null,xi=null,fl=null,zc=Be,Co=0;Ct===th.vertical&&((za=ps)===12312||za===12313||za===12316||za===12540||za===12448)&&(Ct=th.horizontal);const zo=!(Ct===th.horizontal||!Nt&&!Ha(ps)||Nt&&(YC[ps]||gr(ps)));if(Vn.image){const ju=Ye.get(Vn.image.toString());if(!ju)continue;fl=Vn.image,Oe.iconsInText=Oe.iconsInText||!0,xi=ju.paddedRect;const Zl=ju.displaySize;Ts=Ts*Be/jt,Ls={width:Zl[0],height:Zl[1],left:0,top:-3,advance:zo?Zl[1]:Zl[0],localGlyph:!1},Co=Qa?-Ls.height*Ts:Mr*Be-17-Zl[1]*Ts,zc=Ls.advance;const of=(zo?Zl[0]:Zl[1])*Ts-Be*Mr;of>0&&of>Qr&&(Qr=of)}else{const ju=We[Vn.fontStack];if(!ju)continue;ju[ps]&&(xi=ju[ps]);const Zl=et[Vn.fontStack];if(!Zl)continue;const of=Zl.glyphs[ps];if(!of)continue;if(Ls=of.metrics,zc=ps!==8203?Be:0,Qa){const vy=Zl.ascender!==void 0?Math.abs(Zl.ascender):0,qf=Zl.descender!==void 0?Math.abs(Zl.descender):0,Vp=(vy+qf)*Ts;Tn<Vp&&(Tn=Vp,Wn=(vy-qf)/2*Ts),Co=-vy*Ts}else Co=(Mr-Ts)*Be-17}zo?(Oe.verticalizable=!0,gn.push({glyph:ps,image:fl,x:Lt,y:qt+Co,vertical:zo,scale:Ts,localGlyph:Ls.localGlyph,fontStack:Vn.fontStack,sectionIndex:as,metrics:Ls,rect:xi}),Lt+=zc*Ts+Dt):(gn.push({glyph:ps,image:fl,x:Lt,y:qt+Co,vertical:zo,scale:Ts,localGlyph:Ls.localGlyph,fontStack:Vn.fontStack,sectionIndex:as,metrics:Ls,rect:xi}),Lt+=Ls.advance*Ts+Dt)}gn.length!==0&&(Aa=Math.max(Lt-Dt,Aa),Qa?Q4(gn,ga,Qr,Wn,tt*Mr/2):Q4(gn,ga,Qr,0,tt/2)),Lt=0;const Vi=tt*Mr+Qr;Br.lineOffset=Math.max(Qr,en),qt+=Vi,++Pa}var za;const wa=qt,{horizontalAlign:vr,verticalAlign:Ka}=vE(vt);(function(ur,Mr,en,Br,gn,Qr){const Tn=(Mr-en)*gn,Wn=-Qr*Br;for(const Vi of ur)for(const Fr of Vi.positionedGlyphs)Fr.x+=Tn,Fr.y+=Wn})(Oe.positionedLines,ga,vr,Ka,Aa,wa),Oe.top+=-Ka*wa,Oe.bottom=Oe.top+wa,Oe.left+=-vr*Aa,Oe.right=Oe.left+Aa,Oe.hasBaseline=Qa}(be,s,u,f,te,_,b,O,V,D,I,M),!function(Oe){for(const et of Oe)if(et.positionedGlyphs.length!==0)return!1;return!0}(ve))return be}const YC={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Tae={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function W4(h,s,u,f,g,m){if(s.image){const _=f.get(s.image.toString());return _?_.displaySize[0]*s.scale*Be/m+g:0}{const _=u[s.fontStack],b=_&&_.glyphs[h];return b?b.metrics.advance*s.scale+g:0}}function Y4(h,s,u,f){const g=Math.pow(h-s,2);return f?h<s?g/2:2*g:g+Math.abs(u)*u}function Cae(h,s,u){let f=0;return h===10&&(f-=1e4),u&&(f+=150),h!==40&&h!==65288||(f+=50),s!==41&&s!==65289||(f+=50),f}function X4(h,s,u,f,g,m){let _=null,b=Y4(s,u,g,m);for(const O of f){const D=Y4(s-O.x,u,g,m)+O.badness;D<=b&&(_=O,b=D)}return{index:h,x:s,priorBreak:_,badness:b}}function J4(h){return h?J4(h.priorBreak).concat(h.index):[]}function vE(h){let s=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function Q4(h,s,u,f,g){if(!(s||u||f||g))return;const m=h.length-1,_=h[m],b=(_.x+_.metrics.advance*_.scale)*s;for(let O=0;O<=m;O++)h[O].x-=b,h[O].y+=u+f+g}function Sae(h,s,u,f){const{horizontalAlign:g,verticalAlign:m}=vE(f),_=u[0]-h.displaySize[0]*g,b=u[1]-h.displaySize[1]*m;return{imagePrimary:h,imageSecondary:s,top:b,bottom:b+h.displaySize[1],left:_,right:_+h.displaySize[0]}}function eF(h,s,u,f,g,m){const _=h.imagePrimary;let b;if(_.content){const J=_.content,te=_.pixelRatio||1;b=[J[0]/te,J[1]/te,_.displaySize[0]-J[2]/te,_.displaySize[1]-J[3]/te]}const O=s.left*m,D=s.right*m;let C,V,I,z;u==="width"||u==="both"?(z=g[0]+O-f[3],V=g[0]+D+f[1]):(z=g[0]+(O+D-_.displaySize[0])/2,V=z+_.displaySize[0]);const M=s.top*m,B=s.bottom*m;return u==="height"||u==="both"?(C=g[1]+M-f[0],I=g[1]+B+f[2]):(C=g[1]+(M+B-_.displaySize[1])/2,I=C+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:C,right:V,bottom:I,left:z,collisionPadding:b}}class mg extends It{constructor(s,u,f,g,m){super(s,u),this.angle=g,this.z=f,m!==void 0&&(this.segment=m)}clone(){return new mg(this.x,this.y,this.z,this.angle,this.segment)}}function tF(h,s,u,f,g){if(s.segment===void 0)return!0;let m=s,_=s.segment+1,b=0;for(;b>-u/2;){if(_--,_<0)return!1;b-=h[_].dist(m),m=h[_]}b+=h[_].dist(h[_+1]),_++;const O=[];let D=0;for(;b<u/2;){const C=h[_],V=h[_+1];if(!V)return!1;let I=h[_-1].angleTo(C)-C.angleTo(V);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:b,angleDelta:I}),D+=I;b-O[0].distance>f;)D-=O.shift().angleDelta;if(D>g)return!1;_++,b+=C.dist(V)}return!0}function aF(h){let s=0;for(let u=0;u<h.length-1;u++)s+=h[u].dist(h[u+1]);return s}function rF(h,s,u){return h?.6*s*u:0}function nF(h,s){return Math.max(h?h.right-h.left:0,s?s.right-s.left:0)}function bae(h,s,u,f,g,m){const _=rF(u,g,m),b=nF(u,f)*m;let O=0;const D=aF(h)/2;for(let C=0;C<h.length-1;C++){const V=h[C],I=h[C+1],z=V.dist(I);if(O+z>D){const M=(D-O)/z,B=mr(V.x,I.x,M),J=mr(V.y,I.y,M),te=new mg(B,J,0,I.angleTo(V),C);return!_||tF(h,te,b,_,s)?te:void 0}O+=z}}function xae(h,s,u,f,g,m,_,b,O){const D=rF(f,m,_),C=nF(f,g),V=C*_,I=h[0].x===0||h[0].x===O||h[0].y===0||h[0].y===O;return s-V<s/4&&(s=V+s/4),iF(h,I?s/2*b%s:(C/2+2*m)*_*b%s,s,D,u,V,I,!1,O)}function iF(h,s,u,f,g,m,_,b,O){const D=m/2,C=aF(h);let V=0,I=s-u,z=[];for(let M=0;M<h.length-1;M++){const B=h[M],J=h[M+1],te=B.dist(J),he=J.angleTo(B);for(;I+u<V+te;){I+=u;const de=(I-V)/te,ie=mr(B.x,J.x,de),ve=mr(B.y,J.y,de);if(ie>=0&&ie<O&&ve>=0&&ve<O&&I-D>=0&&I+D<=C){const be=new mg(ie,ve,0,he,M);f&&!tF(h,be,m,f,g)||z.push(be)}}V+=te}return b||z.length||_||(z=iF(h,V/2,u,f,g,m,_,!0,O)),z}function sF(h,s,u,f,g){const m=[];for(let _=0;_<h.length;_++){const b=h[_];let O;for(let D=0;D<b.length-1;D++){let C=b[D],V=b[D+1];C.x<s&&V.x<s||(C.x<s?C=new It(s,C.y+(s-C.x)/(V.x-C.x)*(V.y-C.y))._round():V.x<s&&(V=new It(s,C.y+(s-C.x)/(V.x-C.x)*(V.y-C.y))._round()),C.y<u&&V.y<u||(C.y<u?C=new It(C.x+(u-C.y)/(V.y-C.y)*(V.x-C.x),u)._round():V.y<u&&(V=new It(C.x+(u-C.y)/(V.y-C.y)*(V.x-C.x),u)._round()),C.x>=f&&V.x>=f||(C.x>=f?C=new It(f,C.y+(f-C.x)/(V.x-C.x)*(V.y-C.y))._round():V.x>=f&&(V=new It(f,C.y+(f-C.x)/(V.x-C.x)*(V.y-C.y))._round()),C.y>=g&&V.y>=g||(C.y>=g?C=new It(C.x+(g-C.y)/(V.y-C.y)*(V.x-C.x),g)._round():V.y>=g&&(V=new It(C.x+(g-C.y)/(V.y-C.y)*(V.x-C.x),g)._round()),O&&C.equals(O[O.length-1])||(O=[C],m.push(O)),O.push(V)))))}}return m}function oF(h){let s=0,u=0;for(const _ of h)s+=_.w*_.h,u=Math.max(u,_.w);h.sort((_,b)=>b.h-_.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}];let g=0,m=0;for(const _ of h)for(let b=f.length-1;b>=0;b--){const O=f[b];if(!(_.w>O.w||_.h>O.h)){if(_.x=O.x,_.y=O.y,m=Math.max(m,_.y+_.h),g=Math.max(g,_.x+_.w),_.w===O.w&&_.h===O.h){const D=f.pop();b<f.length&&(f[b]=D)}else _.h===O.h?(O.x+=_.w,O.w-=_.w):_.w===O.w?(O.y+=_.h,O.h-=_.h):(f.push({x:O.x+_.w,y:O.y,w:O.w-_.w,h:_.h}),O.y+=_.h,O.h-=_.h);break}}return{w:g,h:m,fill:s/(g*m)||0}}Pt(mg,"Anchor");const R0=1;class fw{static getImagePositionScale(s,u,f){if(u&&s&&s.options&&s.options.transform){const g=s.options.transform;return{x:g.a,y:g.d}}return{x:f,y:f}}constructor(s,u,f,g){this.paddedRect=s;const{pixelRatio:m,version:_,stretchX:b,stretchY:O,content:D,sdf:C,usvg:V}=u;this.pixelRatio=m,this.stretchX=b,this.stretchY=O,this.content=D,this.version=_,this.padding=f,this.sdf=C,this.scale=fw.getImagePositionScale(g,V,m)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function lF(h,s,u){const f=Wu.parse(h),g=function(m,_,b=[1,1]){return{x:0,y:0,w:(m.data?m.data.width:m.width*b[0])+2*_,h:(m.data?m.data.height:m.height*b[1])+2*_}}(s,u,[f.options.transform.a,f.options.transform.d]);return{bin:g,imagePosition:new fw(g,s,u,f),imageVariant:f}}class uF{constructor(s,u,f){const g=new Map,m=new Map;this.haveRenderCallbacks=[];const _=[];this.addImages(s,g,R0,_),this.addImages(u,m,2,_);const{w:b,h:O}=oF(_),D=new bl({width:b||1,height:O||1});for(const[C,V]of s.entries()){const I=g.get(C).paddedRect;bl.copy(V.data,D,{x:0,y:0},{x:I.x+R0,y:I.y+R0},V.data,f,V.sdf)}for(const[C,V]of u.entries()){const I=m.get(C),z=I.paddedRect;let M=I.padding;const B=z.x+M,J=z.y+M,te=V.data.width,he=V.data.height;M=M>1?M-1:M,bl.copy(V.data,D,{x:0,y:0},{x:B,y:J},V.data,f),bl.copy(V.data,D,{x:0,y:he-M},{x:B,y:J-M},{width:te,height:M},f),bl.copy(V.data,D,{x:0,y:0},{x:B,y:J+he},{width:te,height:M},f),bl.copy(V.data,D,{x:te-M,y:0},{x:B-M,y:J},{width:M,height:he},f),bl.copy(V.data,D,{x:0,y:0},{x:B+te,y:J},{width:M,height:he},f),bl.copy(V.data,D,{x:te-M,y:he-M},{x:B-M,y:J-M},{width:M,height:M},f),bl.copy(V.data,D,{x:0,y:he-M},{x:B+te,y:J-M},{width:M,height:M},f),bl.copy(V.data,D,{x:0,y:0},{x:B+te,y:J+he},{width:M,height:M},f),bl.copy(V.data,D,{x:te-M,y:0},{x:B-M,y:J+he},{width:M,height:M},f)}this.lut=f,this.image=D,this.iconPositions=g,this.patternPositions=m}addImages(s,u,f,g){for(const[m,_]of s.entries()){const{bin:b,imagePosition:O,imageVariant:D}=lF(m,_,f);u.set(m,O),g.push(b),_.hasRenderCallback&&this.haveRenderCallbacks.push(D.id)}}patchUpdatedImages(s,u,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>s.hasImage(g,f)),s.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const g of s.getUpdatedImages(f)){for(const m of this.iconPositions.keys()){const _=Wu.parse(m);if(Zo.isEqual(_.id,g)){const b=s.getImage(g,f);this.patchUpdatedImage(this.iconPositions.get(m),b,u)}}for(const m of this.patternPositions.keys()){const _=Wu.parse(m);if(Zo.isEqual(_.id,g)){const b=s.getImage(g,f);this.patchUpdatedImage(this.patternPositions.get(m),b,u)}}}}patchUpdatedImage(s,u,f){if(!s||!u||s.version===u.version)return;s.version=u.version;const[g,m]=s.tl,_=s.sdf;if(this.lut||_){const b={width:u.data.width,height:u.data.height},O=new bl(b);bl.copy(u.data,O,{x:0,y:0},{x:0,y:0},b,this.lut,_),f.update(O,{position:{x:g,y:m}})}else f.update(u.data,{position:{x:g,y:m}})}}Pt(fw,"ImagePosition"),Pt(uF,"ImageAtlas");const XC=1e20;function cF(h,s,u,f,g,m,_,b,O){for(let D=s;D<s+f;D++)dF(h,u*m+D,m,g,_,b,O);for(let D=u;D<u+g;D++)dF(h,D*m+s,1,f,_,b,O)}function dF(h,s,u,f,g,m,_){m[0]=0,_[0]=-1e20,_[1]=XC,g[0]=h[s];for(let b=1,O=0,D=0;b<f;b++){g[b]=h[s+b*u];const C=b*b;do{const V=m[O];D=(g[b]-g[V]+C-V*V)/(b-V)/2}while(D<=_[O]&&--O>-1);O++,m[O]=b,_[O]=D,_[O+1]=XC}for(let b=0,O=0;b<f;b++){for(;_[O+1]<b;)O++;const D=m[O],C=b-D;h[s+b*u]=g[D]+C*C}}const Pp=2,_E={none:0,ideographs:1,all:2};class T0{constructor(s,u,f){this.requestManager=s,this.localGlyphMode=u,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s,u){this.urls[u]=s}getGlyphs(s,u,f){const g=[],m=this.urls[u]||Ne.GLYPHS_URL;for(const _ in s)for(const b of s[_])g.push({stack:_,id:b});Cn(g,({stack:_,id:b},O)=>{let D=this.entries[_];D||(D=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let C=D.glyphs[b];if(C!==void 0)return void O(null,{stack:_,id:b,glyph:C});if(C=this._tinySDF(D,_,b),C)return D.glyphs[b]=C,void O(null,{stack:_,id:b,glyph:C});const V=Math.floor(b/256);if(256*V>65535)return $r("glyphs > 65535 not supported"),void O(null,{stack:_,id:b,glyph:C});if(D.ranges[V])return void O(null,{stack:_,id:b,glyph:C});let I=D.requests[V];I||(I=D.requests[V]=[],T0.loadGlyphRange(_,V,m,this.requestManager,(z,M)=>{if(M){D.ascender=M.ascender,D.descender=M.descender;for(const B in M.glyphs)this._doesCharSupportLocalGlyph(+B)||(D.glyphs[+B]=M.glyphs[+B]);D.ranges[V]=!0}for(const B of I)B(z,M);delete D.requests[V]})),I.push((z,M)=>{z?O(z):M&&O(null,{stack:_,id:b,glyph:M.glyphs[b]||null})})},(_,b)=>{if(_)f(_);else if(b){const O={};for(const{stack:D,id:C,glyph:V}of b)O[D]===void 0&&(O[D]={}),O[D].glyphs===void 0&&(O[D].glyphs={}),O[D].glyphs[C]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics},O[D].ascender=this.entries[D].ascender,O[D].descender=this.entries[D].descender;f(null,O)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==_E.none&&(this.localGlyphMode===_E.all?!!this.localFontFamily:!!this.localFontFamily&&(Rt["CJK Unified Ideographs"](s)||Rt["Hangul Syllables"](s)||Rt.Hiragana(s)||Rt.Katakana(s)||Rt["CJK Symbols and Punctuation"](s)||Rt["CJK Unified Ideographs Extension A"](s)||Rt["CJK Unified Ideographs Extension B"](s)||Rt.Osage(s)))}_tinySDF(s,u,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let m=s.tinySDF;if(!m){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),m=s.tinySDF=new T0.TinySDF({fontFamily:g,fontWeight:B,fontSize:24*Pp,buffer:3*Pp,radius:8*Pp}),m.fontWeight=B}if(this.localGlyphs[m.fontWeight][f])return this.localGlyphs[m.fontWeight][f];const _=String.fromCodePoint(f),{data:b,width:O,height:D,glyphWidth:C,glyphHeight:V,glyphLeft:I,glyphTop:z,glyphAdvance:M}=m.draw(_);return this.localGlyphs[m.fontWeight][f]={id:f,bitmap:new pm({width:O,height:D},b),metrics:{width:C/Pp,height:V/Pp,left:I/Pp,top:z/Pp-27,advance:M/Pp,localGlyph:!0}}}}T0.loadGlyphRange=function(h,s,u,f,g){const m=256*s,_=m+255,b=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",h).replace("{range}",`${m}-${_}`),Ps.Glyphs);Mi(b,(O,D)=>{if(O)g(O);else if(D){const C={},V=function(I){return new un(I).readFields(du,{})}(D);for(const I of V.glyphs)C[I.id]=I;g(null,{glyphs:C,ascender:V.ascender,descender:V.descender})}})},T0.TinySDF=class{constructor({fontSize:h=24,buffer:s=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=s,this.cutoff=f,this.radius=u;const b=this.size=h+4*s,O=this._createCanvas(b),D=this.ctx=O.getContext("2d",{willReadFrequently:!0});D.font=`${_} ${m} ${h}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(h){const s=document.createElement("canvas");return s.width=s.height=h,s}draw(h){const{width:s,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:m}=this.ctx.measureText(h),_=Math.ceil(u),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-g))),O=Math.min(this.size-this.buffer,_+Math.ceil(f)),D=b+2*this.buffer,C=O+2*this.buffer,V=Math.max(D*C,0),I=new Uint8ClampedArray(V),z={data:I,width:D,height:C,glyphWidth:b,glyphHeight:O,glyphTop:_,glyphLeft:0,glyphAdvance:s};if(b===0||O===0)return z;const{ctx:M,buffer:B,gridInner:J,gridOuter:te}=this;M.clearRect(B,B,b,O),M.fillText(h,B,B+_);const he=M.getImageData(B,B,b,O);te.fill(XC,0,V),J.fill(0,0,V);for(let de=0;de<O;de++)for(let ie=0;ie<b;ie++){const ve=he.data[4*(de*b+ie)+3]/255;if(ve===0)continue;const be=(de+B)*D+ie+B;if(ve===1)te[be]=0,J[be]=XC;else{const Oe=.5-ve;te[be]=Oe>0?Oe*Oe:0,J[be]=Oe<0?Oe*Oe:0}}cF(te,0,0,D,C,D,this.f,this.v,this.z),cF(J,B,B,b,O,D,this.f,this.v,this.z);for(let de=0;de<V;de++){const ie=Math.sqrt(te[de])-Math.sqrt(J[de]);I[de]=Math.round(255-255*(ie/this.radius+this.cutoff))}return z}};const ZA=R0;function hF(h,s){return h+s[1]-s[0]}function fF(h,s,u,f,g=1){const m=[],_=h.imagePrimary,b=_.pixelRatio,O=_.paddedRect.w-2*ZA,D=_.paddedRect.h-2*ZA,C=(h.right-h.left)*g,V=(h.bottom-h.top)*g,I=_.stretchX||[[0,O]],z=_.stretchY||[[0,D]],M=I.reduce(hF,0),B=z.reduce(hF,0),J=O-M,te=D-B;let he=0,de=M,ie=0,ve=B,be=0,Oe=J,et=0,We=te;if(_.content&&f){const gt=_.content;he=JC(I,0,gt[0]),ie=JC(z,0,gt[1]),de=JC(I,gt[0],gt[2]),ve=JC(z,gt[1],gt[3]),be=gt[0]-he,et=gt[1]-ie,Oe=gt[2]-gt[0]-de,We=gt[3]-gt[1]-ve}const Ye=(gt,tt,vt,xt)=>{const Ct=QC(gt.stretch-he,de,C,h.left*g),Dt=eS(gt.fixed-be,Oe,gt.stretch,M),Nt=QC(tt.stretch-ie,ve,V,h.top*g),jt=eS(tt.fixed-et,We,tt.stretch,B),Lt=QC(vt.stretch-he,de,C,h.left*g),qt=eS(vt.fixed-be,Oe,vt.stretch,M),Aa=QC(xt.stretch-ie,ve,V,h.top*g),ga=eS(xt.fixed-et,We,xt.stretch,B),Qa=new It(Ct,Nt),Pa=new It(Lt,Nt),za=new It(Lt,Aa),wa=new It(Ct,Aa),vr=new It(Dt/b,jt/b),Ka=new It(qt/b,ga/b),ur=s*Math.PI/180;if(ur){const Tn=Math.sin(ur),Wn=Math.cos(ur),Vi=[Wn,-Tn,Tn,Wn];Qa._matMult(Vi),Pa._matMult(Vi),wa._matMult(Vi),za._matMult(Vi)}const Mr=gt.stretch+gt.fixed,en=vt.stretch+vt.fixed,Br=tt.stretch+tt.fixed,gn=xt.stretch+xt.fixed,Qr=h.imageSecondary;return{tl:Qa,tr:Pa,bl:wa,br:za,texPrimary:{x:_.paddedRect.x+ZA+Mr,y:_.paddedRect.y+ZA+Br,w:en-Mr,h:gn-Br},texSecondary:Qr?{x:Qr.paddedRect.x+ZA+Mr,y:Qr.paddedRect.y+ZA+Br,w:en-Mr,h:gn-Br}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vr,pixelOffsetBR:Ka,minFontScaleX:Oe/b/C,minFontScaleY:We/b/V,isSDF:u}};if(f&&(_.stretchX||_.stretchY)){const gt=pF(I,J,M),tt=pF(z,te,B);for(let vt=0;vt<gt.length-1;vt++){const xt=gt[vt],Ct=gt[vt+1];for(let Dt=0;Dt<tt.length-1;Dt++)m.push(Ye(xt,tt[Dt],Ct,tt[Dt+1]))}}else m.push(Ye({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:D+1}));return m}function JC(h,s,u){let f=0;for(const g of h)f+=Math.max(s,Math.min(u,g[1]))-Math.max(s,Math.min(u,g[0]));return f}function pF(h,s,u){const f=[{fixed:-1,stretch:0}];for(const[g,m]of h){const _=f[f.length-1];f.push({fixed:g-_.stretch,stretch:_.stretch}),f.push({fixed:g-_.stretch,stretch:_.stretch+(m-g)})}return f.push({fixed:s+ZA,stretch:u}),f}function QC(h,s,u,f){return h/s*u+f}function eS(h,s,u,f){return h-s*u/f}function Pae(h,s,u,f){const g=s+h.positionedLines[f].lineOffset;return f===0?u+g/2:u+(g+(s+h.positionedLines[f-1].lineOffset))/2}function Eae(h,s=1,u=!1){let f=1/0,g=1/0,m=-1/0,_=-1/0;const b=h[0];for(let z=0;z<b.length;z++){const M=b[z];(!z||M.x<f)&&(f=M.x),(!z||M.y<g)&&(g=M.y),(!z||M.x>m)&&(m=M.x),(!z||M.y>_)&&(_=M.y)}const O=Math.min(m-f,_-g);let D=O/2;const C=new vc([],Nae);if(O===0)return new It(f,g);for(let z=f;z<m;z+=O)for(let M=g;M<_;M+=O)C.push(new C0(z+D,M+D,D,h));let V=function(z){let M=0,B=0,J=0;const te=z[0];for(let he=0,de=te.length,ie=de-1;he<de;ie=he++){const ve=te[he],be=te[ie],Oe=ve.x*be.y-be.x*ve.y;B+=(ve.x+be.x)*Oe,J+=(ve.y+be.y)*Oe,M+=3*Oe}return new C0(B/M,J/M,0,z)}(h),I=C.length;for(;C.length;){const z=C.pop();(z.d>V.d||!V.d)&&(V=z,u&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,I)),z.max-V.d<=s||(D=z.h/2,C.push(new C0(z.p.x-D,z.p.y-D,D,h)),C.push(new C0(z.p.x+D,z.p.y-D,D,h)),C.push(new C0(z.p.x-D,z.p.y+D,D,h)),C.push(new C0(z.p.x+D,z.p.y+D,D,h)),I+=4)}return u&&(console.log(`num probes: ${I}`),console.log(`best distance: ${V.d}`)),V.p}function Nae(h,s){return s.max-h.max}class C0{constructor(s,u,f,g){this.p=new It(s,u),this.h=f,this.d=function(m,_){let b=!1,O=1/0;for(let D=0;D<_.length;D++){const C=_[D];for(let V=0,I=C.length,z=I-1;V<I;z=V++){const M=C[V],B=C[z];M.y>m.y!=B.y>m.y&&m.x<(B.x-M.x)*(m.y-M.y)/(B.y-M.y)+M.x&&(b=!b),O=Math.min(O,pt(m,M,B))}}return(b?1:-1)*Math.sqrt(O)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const wE=Number.POSITIVE_INFINITY,Oae=Math.sqrt(2);function mF(h,[s,u]){let f=0,g=0;if(u===wE){s<0&&(s=0);const m=s/Oae;switch(h){case"top-right":case"top-left":g=m-7;break;case"bottom-right":case"bottom-left":g=7-m;break;case"bottom":g=7-s;break;case"top":g=s-7}switch(h){case"top-right":case"bottom-right":f=-m;break;case"top-left":case"bottom-left":f=m;break;case"left":f=s;break;case"right":f=-s}}else{switch(s=Math.abs(s),u=Math.abs(u),h){case"top-right":case"top-left":case"top":g=u-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-u}switch(h){case"top-right":case"bottom-right":case"right":f=-s;break;case"top-left":case"bottom-left":case"left":f=s}}return[f,g]}function gF(h,s,u,f,g,m,_,b){if(!h)return;const O=Bt(s,u,f,g,m);return h.scaleSelf(O*b*_)}function yF(h,s,u,f,g,m,_,b){return{iconPrimary:gF(h.getPrimary(),s,u,f,g,m,_,b),iconSecondary:gF(h.getSecondary(),s,u,f,g,m,_,b)}}function AF(h,s,u,f){if(!h)return;const g=s.get(u.toString());if(h.imagePrimary=g,f){const m=s.get(f.toString());h.imageSecondary=m}}function Vae(h,s){for(const u in h.horizontal)vF(h.horizontal[u],s);vF(h.vertical,s)}function vF(h,s){if(h){for(const u of h.positionedLines)for(const f of u.positionedGlyphs)if(f.image!==null){const g=f.image.toString();f.rect=s.get(g).paddedRect}}}function RE(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zae(h,s,u,f,g,m,_,b,O){const D=TE(m.horizontal)||m.vertical,C=u.get("icon-text-fit-padding").evaluate(f,{},g);let V,I=s;return s&&O!=="none"&&(h.allowVerticalPlacement&&m.vertical&&(V=eF(s,m.vertical,O,C,b,_)),D&&(I=eF(s,D,O,C,b,_))),{defaultShapedIcon:I,verticallyShapedIcon:V}}function Dae(h,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de){let ie=_.textMaxSize.evaluate(s,{},I);ie===void 0?ie=b*_.textScaleFactor:ie*=_.textScaleFactor;const ve=h.layers[0].layout,be=TE(u.horizontal)||u.vertical,Oe=z.name==="globe",et=Be,We=h.tilePixelRatio*ie/et,Ye=(Dt=h.overscaling,h.zoom>18&&Dt>2&&(Dt>>=1),Math.max(Va/(512*Dt),1)*ve.get("symbol-spacing")),gt=ve.get("text-padding")*h.tilePixelRatio,tt=ve.get("icon-padding")*h.tilePixelRatio,vt=Ea(ve.get("text-max-angle")),xt=ve.get("icon-rotation-alignment")==="map"&&de!=="point",Ct=Ye/2;var Dt;h.hasAnyIconTextFit===!1&&J!=="none"&&(h.hasAnyIconTextFit=!0);const Nt=s.properties?+s.properties[Uf]:null,jt=Nt&&h.elevationFeatureIdToIndex?h.elevationFeatureIdToIndex.get(Nt):65535,Lt=(qt,Aa,ga)=>{if(Aa.x<0||Aa.x>=Va||Aa.y<0||Aa.y>=Va)return;let Qa=null;if(Oe){const{x:Pa,y:za,z:wa}=z.projectTilePoint(Aa.x,Aa.y,ga);Qa={anchor:new mg(Pa,za,wa,0,void 0),up:z.upVector(ga,Aa.x,Aa.y)}}(function(Pa,za,wa,vr,Ka,ur,Mr,en,Br,gn,Qr,Tn,Wn,Vi,Fr,Vn,as,ps,Ts,Ls,xi,fl,zc,Co,zo,ju,Zl,of,vy){const qf=Pa.addToLineVertexArray(za,vr);let Vp,_y,wy,WA,t6,a6,r6,n6=0,i6=0,s6=0,o6=0,aN=-1,rN=-1;const Sm={};let l6=po("");const YA=wa?wa.anchor:za,nN=of!=="none";let iN=0,sN=0;if(Br._unevaluatedLayout.getValue("text-radial-offset")===void 0?[iN,sN]=Br.layout.get("text-offset").evaluate(xi,{},zo).map(lf=>lf*Be):(iN=Br.layout.get("text-radial-offset").evaluate(xi,{},zo)*Be,sN=wE),Pa.allowVerticalPlacement&&Ka.vertical){const lf=Ka.vertical;if(Fr)a6=CE(lf),en&&(r6=CE(en));else{const ah=Br.layout.get("text-rotate").evaluate(xi,{},zo)+90;wy=tS(gn,YA,za,Qr,Tn,Wn,lf,Vi,ah,Vn),en&&(WA=tS(gn,YA,za,Qr,Tn,Wn,en,ps,ah))}}if(ur){const lf=Pa.iconSizeData,ah=Br.layout.get("icon-rotate").evaluate(xi,{},zo),Vw=fF(ur,ah,zc,nN,fl.iconScaleFactor),lN=en?fF(en,ah,zc,nN,fl.iconScaleFactor):void 0;_y=tS(gn,YA,za,Qr,Tn,Wn,ur,ps,ah,null),n6=4*Vw.length;let XA=null;lf.kind==="source"?(XA=[ft*Br.layout.get("icon-size").evaluate(xi,{},zo)*fl.iconScaleFactor],XA[0]>my&&$r(`${Pa.layerIds[0]}: Value for "icon-size" is >= ${pw}. Reduce your "icon-size".`)):lf.kind==="composite"&&(XA=[ft*fl.compositeIconSizes[0].evaluate(xi,{},zo)*fl.iconScaleFactor,ft*fl.compositeIconSizes[1].evaluate(xi,{},zo)*fl.iconScaleFactor],(XA[0]>my||XA[1]>my)&&$r(`${Pa.layerIds[0]}: Value for "icon-size" is >= ${pw}. Reduce your "icon-size".`)),Pa.addSymbols(Pa.icon,Vw,XA,Ls,Ts,xi,!1,wa,za,qf.lineStartIndex,qf.lineLength,-1,Co,zo,ju,Zl),aN=Pa.icon.placedSymbolArray.length-1,lN&&(i6=4*lN.length,Pa.addSymbols(Pa.icon,lN,XA,Ls,Ts,xi,th.vertical,wa,za,qf.lineStartIndex,qf.lineLength,-1,Co,zo,ju,Zl),rN=Pa.icon.placedSymbolArray.length-1)}for(const lf in Ka.horizontal){const ah=Ka.horizontal[lf];Vp||(l6=po(ah.text),Fr?t6=CE(ah):Vp=tS(gn,YA,za,Qr,Tn,Wn,ah,Vi,Br.layout.get("text-rotate").evaluate(xi,{},zo),Vn));const Vw=ah.positionedLines.length===1;if(s6+=_F(Pa,wa,za,ah,Mr,Br,Fr,xi,Vn,qf,Ka.vertical?th.horizontal:th.horizontalOnly,Vw?Object.keys(Ka.horizontal):[lf],Sm,aN,fl,Co,zo,ju),Vw)break}Ka.vertical&&(o6+=_F(Pa,wa,za,Ka.vertical,Mr,Br,Fr,xi,Vn,qf,th.vertical,["vertical"],Sm,rN,fl,Co,zo,ju));let Ry=-1;const oN=(lf,ah)=>lf?Math.max(lf,ah):ah;Ry=oN(t6,Ry),Ry=oN(a6,Ry),Ry=oN(r6,Ry);const hne=Ry>-1?1:0;Pa.glyphOffsetArray.length>=65535&&$r("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xi.sortKey!==void 0&&Pa.addToSortKeyRanges(Pa.symbolInstances.length,xi.sortKey),Pa.symbolInstances.emplaceBack(za.x,za.y,YA.x,YA.y,YA.z,Sm.right>=0?Sm.right:-1,Sm.center>=0?Sm.center:-1,Sm.left>=0?Sm.left:-1,Sm.vertical>=0?Sm.vertical:-1,aN,rN,l6,Vp!==void 0?Vp:Pa.collisionBoxArray.length,Vp!==void 0?Vp+1:Pa.collisionBoxArray.length,wy!==void 0?wy:Pa.collisionBoxArray.length,wy!==void 0?wy+1:Pa.collisionBoxArray.length,_y!==void 0?_y:Pa.collisionBoxArray.length,_y!==void 0?_y+1:Pa.collisionBoxArray.length,WA||Pa.collisionBoxArray.length,WA?WA+1:Pa.collisionBoxArray.length,Qr,s6,o6,n6,i6,hne,0,iN,sN,Ry,0,nN?1:0,vy)})(h,Aa,Qa,qt,u,f,m,g,h.layers[0],h.collisionBoxArray,s.index,s.sourceLayerIndex,h.index,gt,he,D,0,tt,xt,te,s,_,C,V,I,M,B,J,jt)};if(de==="line")for(const qt of sF(s.geometry,0,0,Va,Va)){const Aa=xae(qt,Ye,vt,u.vertical||be,f,et,We,h.overscaling,Va);for(const ga of Aa)be&&Mae(h,be.text,Ct,ga)||Lt(qt,ga,I)}else if(de==="line-center"){for(const qt of s.geometry)if(qt.length>1){const Aa=bae(qt,vt,u.vertical||be,f,et,We);Aa&&Lt(qt,Aa,I)}}else if(s.type==="Polygon")for(const qt of NA(s.geometry,0)){const Aa=Eae(qt,16);Lt(qt[0],new mg(Aa.x,Aa.y,0,0,void 0),I)}else if(s.type==="LineString")for(const qt of s.geometry)Lt(qt,new mg(qt[0].x,qt[0].y,0,0,void 0),I);else if(s.type==="Point")for(const qt of s.geometry)for(const Aa of qt)Lt([Aa],new mg(Aa.x,Aa.y,0,0,void 0),I)}const pw=255,my=pw*ft;function _F(h,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te){const he=function(ve,be,Oe,et,We,Ye,gt,tt){const vt=[];if(be.positionedLines.length===0)return vt;const xt=et.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,Ct=function(qt){const Aa=qt[0],ga=qt[1],Qa=Aa*ga;return Qa>0?[Aa,-ga]:Qa<0?[-Aa,ga]:Aa===0?[ga,Aa]:[ga,-Aa]}(Oe);let Dt=Math.abs(be.top-be.bottom);for(const qt of be.positionedLines)Dt-=qt.lineOffset;const Nt=be.positionedLines.length,jt=Dt/Nt;let Lt=be.top-Oe[1];for(let qt=0;qt<Nt;++qt){const Aa=be.positionedLines[qt];Lt=Pae(be,jt,Lt,qt);for(const ga of Aa.positionedGlyphs){if(!ga.rect)continue;const Qa=ga.rect||{};let Pa=yE+1,za=!0,wa=1,vr=0;if(ga.image){const xi=gt.get(ga.image.toString());if(!xi)continue;if(xi.sdf){$r("SDF images are not supported in formatted text and will be ignored.");continue}za=!1,wa=xi.pixelRatio,Pa=R0/wa}const Ka=(We||tt)&&ga.vertical,ur=ga.metrics.advance*ga.scale/2,Mr=ga.metrics,en=ga.rect;if(en===null)continue;tt&&be.verticalizable&&(vr=ga.image?ur-ga.metrics.width*ga.scale/2:0);const Br=We?[ga.x+ur,ga.y]:[0,0];let gn=[0,0],Qr=[0,0],Tn=!1;We||(Ka?(Qr=[ga.x+ur+Ct[0],ga.y+Ct[1]-vr],Tn=!0):gn=[ga.x+ur+Oe[0],ga.y+Oe[1]-vr]);const Wn=en.w*ga.scale/(wa*(ga.localGlyph?Pp:1)),Vi=en.h*ga.scale/(wa*(ga.localGlyph?Pp:1));let Fr,Vn,as,ps;if(Ka){const xi=ga.y-Lt,fl=new It(-ur,ur-xi),zc=-Math.PI/2,Co=new It(...Qr);Fr=new It(-ur+gn[0],gn[1]),Fr._rotateAround(zc,fl)._add(Co),Fr.x+=-xi+ur,Fr.y-=(Mr.left-Pa)*ga.scale;const zo=ga.image?Mr.advance*ga.scale:Be*ga.scale,ju=String.fromCodePoint(ga.glyph);ti(ju)?Fr.x+=(1-Pa)*ga.scale:Jo(ju)?Fr.x+=zo-Mr.height*ga.scale+(-Pa-1)*ga.scale:Fr.x+=ga.image||Mr.width+2*Pa===en.w&&Mr.height+2*Pa===en.h?(zo-Vi)/2:(zo-(Mr.height+2*Pa)*ga.scale)/2,Vn=new It(Fr.x,Fr.y-Wn),as=new It(Fr.x+Vi,Fr.y),ps=new It(Fr.x+Vi,Fr.y-Wn)}else{const xi=(Mr.left-Pa)*ga.scale-ur+gn[0],fl=(-Mr.top-Pa)*ga.scale+gn[1],zc=xi+Wn,Co=fl+Vi;Fr=new It(xi,fl),Vn=new It(zc,fl),as=new It(xi,Co),ps=new It(zc,Co)}if(xt){let xi;xi=We?new It(0,0):Tn?new It(Ct[0],Ct[1]):new It(Oe[0],Oe[1]),Fr._rotateAround(xt,xi),Vn._rotateAround(xt,xi),as._rotateAround(xt,xi),ps._rotateAround(xt,xi)}const Ts=new It(0,0),Ls=new It(0,0);vt.push({tl:Fr,tr:Vn,bl:as,br:ps,texPrimary:Qa,texSecondary:void 0,writingMode:be.writingMode,glyphOffset:Br,sectionIndex:ga.sectionIndex,isSDF:za,pixelOffsetTL:Ts,pixelOffsetBR:Ls,minFontScaleX:0,minFontScaleY:0})}}return vt}(0,f,O,m,_,b,g,h.allowVerticalPlacement),de=h.textSizeData;let ie=null;de.kind==="source"?(ie=[ft*m.layout.get("text-size").evaluate(b,{},J)*M.textScaleFactor],ie[0]>my&&$r(`${h.layerIds[0]}: Value for "text-size" is >= ${pw}. Reduce your "text-size".`)):de.kind==="composite"&&(ie=[ft*M.compositeTextSizes[0].evaluate(b,{},J)*M.textScaleFactor,ft*M.compositeTextSizes[1].evaluate(b,{},J)*M.textScaleFactor],(ie[0]>my||ie[1]>my)&&$r(`${h.layerIds[0]}: Value for "text-size" is >= ${pw}. Reduce your "text-size".`)),h.addSymbols(h.text,he,ie,O,_,b,C,s,u,D.lineStartIndex,D.lineLength,z,B,J,te,!1);for(const ve of V)I[ve]=h.text.placedSymbolArray.length-1;return 4*he.length}function TE(h){for(const s in h)return h[s];return null}function tS(h,s,u,f,g,m,_,b,O,D){let C=_.top,V=_.bottom,I=_.left,z=_.right;const M=_.collisionPadding;if(M&&(I-=M[0],C-=M[1],z+=M[2],V+=M[3]),O){const B=new It(I,C),J=new It(z,C),te=new It(I,V),he=new It(z,V),de=Ea(O);let ie=new It(0,0);D&&(ie=new It(D[0],D[1])),B._rotateAround(de,ie),J._rotateAround(de,ie),te._rotateAround(de,ie),he._rotateAround(de,ie),I=Math.min(B.x,J.x,te.x,he.x),z=Math.max(B.x,J.x,te.x,he.x),C=Math.min(B.y,J.y,te.y,he.y),V=Math.max(B.y,J.y,te.y,he.y)}return h.emplaceBack(s.x,s.y,s.z,u.x,u.y,I,C,z,V,b,f,g,m),h.length-1}function CE(h){h.collisionPadding&&(h.top-=h.collisionPadding[1],h.bottom+=h.collisionPadding[3]);const s=h.bottom-h.top;return s>0?Math.max(10,s):null}function Mae(h,s,u,f){const g=h.compareText;if(s in g){const m=g[s];for(let _=m.length-1;_>=0;_--)if(f.dist(m[_])<u)return!0}else g[s]=[];return g[s].push(f),!1}function wF(h,s){const u=h.fovAboveCenter,f=h.elevation?h.elevation.getMinElevationBelowMSL()*s:0,g=(h._camera.position[2]*h.worldSize-f)/Math.cos(h._pitch),m=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-h._pitch-u,.01));let _=Math.sin(h._pitch)*m+g;const b=g*(1/h._horizonShift);if(!h.elevation||h.elevation.exaggeration()===0){let O=Math.max(h.zoom-17,0);h.isOrthographic&&(O/=10),_*=1+O}return Math.min(1.01*_,b)}function mw(h,s){if(!s.isReprojectedInTileSpace)return{scale:1<<h.z,x:h.x,y:h.y,x2:h.x+1,y2:h.y+1,projection:s};const u=Math.pow(2,-h.z),f=h.x*u,g=(h.x+1)*u,m=h.y*u,_=(h.y+1)*u,b=ku(f),O=ku(g),D=Si(m),C=Si(_),V=s.project(b,D),I=s.project(O,D),z=s.project(O,C),M=s.project(b,C);let B=Math.min(V.x,I.x,z.x,M.x),J=Math.min(V.y,I.y,z.y,M.y),te=Math.max(V.x,I.x,z.x,M.x),he=Math.max(V.y,I.y,z.y,M.y);const de=u/16;function ie(be,Oe,et,We,Ye,gt){const tt=(et+Ye)/2,vt=(We+gt)/2,xt=s.project(ku(tt),Si(vt)),Ct=Math.max(0,B-xt.x,J-xt.y,xt.x-te,xt.y-he);B=Math.min(B,xt.x),te=Math.max(te,xt.x),J=Math.min(J,xt.y),he=Math.max(he,xt.y),Ct>de&&(ie(be,xt,et,We,tt,vt),ie(xt,Oe,tt,vt,Ye,gt))}ie(V,I,f,m,g,m),ie(I,z,g,m,g,_),ie(z,M,g,_,f,_),ie(M,V,f,_,f,m),B-=de,J-=de,te+=de,he+=de;const ve=1/Math.max(te-B,he-J);return{scale:ve,x:B*ve,y:J*ve,x2:te*ve,y2:he*ve,projection:s}}function RF(h,{x:s,y:u},f=0){return new It(((s-f)*h.scale-h.x)*Va,(u*h.scale-h.y)*Va)}const Iae=Ae.mat4.identity(new Float32Array(16));class gy{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,u){return{x:0,y:0,z:0}}unproject(s,u){return new kn(0,0)}projectTilePoint(s,u,f){return{x:s,y:u,z:0}}locationPoint(s,u,f,g=!0){return s._coordinatePoint(s.locationCoordinate(u,f),g)}pixelsPerMeter(s,u){return Wo(1,s)*u}pixelSpaceConversion(s,u,f){return 1}farthestPixelDistance(s){return wF(s,s.pixelsPerMeter)}pointCoordinate(s,u,f,g){const m=s.horizonLineFromTop(!1),_=new It(u,Math.max(m,f));return s.rayIntersectionCoordinate(s.pointRayIntersection(_,g))}pointCoordinate3D(s,u,f){const g=new It(u,f);if(s.elevation)return s.elevation.pointCoordinate(g);{const m=this.pointCoordinate(s,g.x,g.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(s,u){if(s.elevation&&s.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(s,u.x,u.y);const f=s.horizonLineFromTop();return u.y<f}createInversionMatrix(s,u){return Iae}createTileMatrix(s,u,f){let g,m,_;const b=f.canonical,O=Ae.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=mw(b,this);g=1,m=D.x+f.wrap*D.scale,_=D.y,Ae.mat4.scale(O,O,[g/D.scale,g/D.scale,s.pixelsPerMeter/u])}else g=u/s.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*f.wrap)*g,_=b.y*g;return Ae.mat4.translate(O,O,[m,_,0]),Ae.mat4.scale(O,O,[g/Va,g/Va,1]),O}upVector(s,u,f){return[0,0,1]}upVectorScale(s,u,f){return{metersToTile:1}}}class Lae extends gy{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[u,f]=this.parallels=s.parallels||[29.5,45.5],g=Math.sin(Ea(u));this.n=(g+Math.sin(Ea(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(s,u){const{n:f,c:g,r0:m}=this,_=Ea(s-this.center[0]),b=Ea(u),O=Math.sqrt(g-2*f*Math.sin(b))/f;return{x:O*Math.sin(_*f),y:O*Math.cos(_*f)-m,z:0}}unproject(s,u){const{n:f,c:g,r0:m}=this,_=m+u;let b=Math.atan2(s,Math.abs(_))*Math.sign(_);_*f<0&&(b-=Math.PI*Math.sign(s)*Math.sign(_));const O=Ea(this.center[0])*f;b=dn(b,-Math.PI-O,Math.PI-O);const D=ka(Na(b/f)+this.center[0],-180,180),C=Math.asin(ka((g-(s*s+_*_)*f*f)/(2*f),-1,1)),V=ka(Na(C),-85.051129,Uu);return new kn(D,V)}}const gw=1.340264,yw=-.081106,Aw=893e-6,vw=.003796,aS=Math.sqrt(3)/2;class Fae extends gy{project(s,u){u=u/180*Math.PI,s=s/180*Math.PI;const f=Math.asin(aS*Math.sin(u)),g=f*f,m=g*g*g;return{x:.5*(s*Math.cos(f)/(aS*(gw+3*yw*g+m*(7*Aw+9*vw*g)))/Math.PI+.5),y:1-.5*(f*(gw+yw*g+m*(Aw+vw*g))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=f*f,m=g*g*g;for(let C,V,I,z=0;z<12&&(V=f*(gw+yw*g+m*(Aw+vw*g))-u,I=gw+3*yw*g+m*(7*Aw+9*vw*g),C=V/I,f=ka(f-C,-Math.PI/3,Math.PI/3),g=f*f,m=g*g*g,!(Math.abs(C)<1e-12));++z);const _=aS*s*(gw+3*yw*g+m*(7*Aw+9*vw*g))/Math.cos(f),b=Math.asin(Math.sin(f)/aS),O=ka(180*_/Math.PI,-180,180),D=ka(180*b/Math.PI,-85.051129,Uu);return new kn(O,D)}}class kae extends gy{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){return{x:.5+s/360,y:.5-u/360,z:0}}unproject(s,u){const f=360*(s-.5),g=ka(360*(.5-u),-85.051129,Uu);return new kn(f,g)}}const S0=Math.PI/2;function rS(h){return Math.tan((S0+h)/2)}class Uae extends gy{constructor(s){super(s),this.center=s.center||[0,30];const[u,f]=this.parallels=s.parallels||[30,30];let g=Ea(u),m=Ea(f);this.southernCenter=g+m<0,this.southernCenter&&(g=-g,m=-m);const _=Math.cos(g),b=rS(g);this.n=g===m?Math.sin(g):Math.log(_/Math.cos(m))/Math.log(rS(m)/b),this.f=_*Math.pow(rS(g),this.n)/this.n}project(s,u){u=Ea(u),this.southernCenter&&(u=-u),s=Ea(s-this.center[0]);const f=1e-6,{n:g,f:m}=this;m>0?u<-S0+f&&(u=-S0+f):u>S0-f&&(u=S0-f);const _=m/Math.pow(rS(u),g);let b=_*Math.sin(g*s),O=m-_*Math.cos(g*s);return b=.5*(b/Math.PI+.5),O=.5*(O/Math.PI+.5),{x:b,y:this.southernCenter?O:1-O,z:0}}unproject(s,u){s=(2*s-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:g}=this,m=g-u,_=Math.sign(m),b=Math.sign(f)*Math.sqrt(s*s+m*m);let O=Math.atan2(s,Math.abs(m))*_;m*f<0&&(O-=Math.PI*Math.sign(s)*_);const D=ka(Na(O/f)+this.center[0],-180,180),C=ka(Na(2*Math.atan(Math.pow(g/b,1/f))-S0),-85.051129,Uu);return new kn(D,this.southernCenter?-C:C)}}class TF extends gy{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,u){return{x:Cl(s),y:Oi(u),z:0}}unproject(s,u){const f=ku(s),g=Si(u);return new kn(f,g)}}const CF=Ea(Uu);class Bae extends gy{project(s,u){const f=(u=Ea(u))*u,g=f*f;return{x:.5*((s=Ea(s))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=25,m=0,_=f*f;do{_=f*f;const D=_*_;m=(f*(1.007226+_*(.015085+D*(.028874*_-.044475-.005916*D)))-u)/(1.007226+_*(.045255+D*(.259866*_-.311325-.005916*11*D))),f=ka(f-m,-CF,CF)}while(Math.abs(m)>1e-6&&--g>0);_=f*f;const b=ka(Na(s/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),O=Na(f);return new kn(b,O)}}const SF=Ea(Uu);class jae extends gy{project(s,u){u=Ea(u),s=Ea(s);const f=Math.cos(u),g=2/Math.PI,m=Math.acos(f*Math.cos(s/2)),_=Math.sin(m)/m,b=.5*(s*g+2*f*Math.sin(s/2)/_)||0,O=.5*(u+Math.sin(u)/_)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(O/Math.PI+1),z:0}}unproject(s,u){let f=s=(2*s-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,m=25;const _=1e-6;let b=0,O=0;do{const D=Math.cos(g),C=Math.sin(g),V=2*C*D,I=C*C,z=D*D,M=Math.cos(f/2),B=Math.sin(f/2),J=2*M*B,te=B*B,he=1-z*M*M,de=he?1/he:0,ie=he?Math.acos(D*M)*Math.sqrt(1/he):0,ve=.5*(2*ie*D*B+2*f/Math.PI)-s,be=.5*(ie*C+g)-u,Oe=.5*de*(z*te+ie*D*M*I)+1/Math.PI,et=de*(J*V/4-ie*C*B),We=.125*de*(V*B-ie*C*z*J),Ye=.5*de*(I*M+ie*te*D)+.5,gt=et*We-Ye*Oe;b=(be*et-ve*Ye)/gt,O=(ve*We-be*Oe)/gt,f=ka(f-b,-Math.PI,Math.PI),g=ka(g-O,-SF,SF)}while((Math.abs(b)>_||Math.abs(O)>_)&&--m>0);return new kn(Na(f),Na(g))}}class bF extends gy{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ea(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){const{scale:f,cosPhi:g}=this;return{x:Ea(s)*g*f+.5,y:-Math.sin(Ea(u))/g*f+.5,z:0}}unproject(s,u){const{scale:f,cosPhi:g}=this,m=-(u-.5)/f,_=ka(Na((s-.5)/f)/g,-180,180),b=Math.asin(ka(m*g,-1,1)),O=ka(Na(b),-85.051129,Uu);return new kn(_,O)}}class Gae extends TF{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,u,f){const g=Ln(s,u,f),m=bi(As(f));return Ae.vec3.transformMat4(g,g,m),{x:g[0],y:g[1],z:g[2]}}locationPoint(s,u,f){const g=Oc(u.lat,u.lng),m=Ae.vec3.normalize([],g),_=f?s._centerAltitude+f:s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(u),s._centerAltitude):s._centerAltitude,b=Wo(1,0)*Va*_;Ae.vec3.scaleAndAdd(g,g,m,b);const O=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.multiply(O,s.pixelMatrix,s.globeMatrix),Ae.vec3.transformMat4(g,g,O),new It(g[0],g[1])}pixelsPerMeter(s,u){return Wo(1,0)*u}pixelSpaceConversion(s,u,f){const g=Wo(1,s)*u,m=mr(Wo(1,45)*u,g,f);return this.pixelsPerMeter(s,u)/m}createTileMatrix(s,u,f){const g=fs(As(f.canonical));return Ae.mat4.multiply(new Float64Array(16),s.globeMatrix,g)}createInversionMatrix(s,u){const{center:f}=s,g=bi(As(u));return Ae.mat4.rotateY(g,g,Ea(f.lng)),Ae.mat4.rotateX(g,g,Ea(f.lat)),Ae.mat4.scale(g,g,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(s,u,f,g){return mn(s,u,f,!0)||new o(0,0)}pointCoordinate3D(s,u,f){const g=this.pointCoordinate(s,u,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(s,u){return!mn(s,u.x,u.y,!1)}farthestPixelDistance(s){const u=function(g,m){const _=g.cameraToCenterDistance,b=g._centerAltitude*m,O=g._camera,D=g._camera.forward(),C=Ae.vec3.add([],Ae.vec3.scale([],D,-_),[0,0,b]),V=g.worldSize/(2*Math.PI),I=[0,0,-V],z=g.width/g.height,M=Math.tan(g.fovAboveCenter),B=Ae.vec3.scale([],O.up(),M),J=Ae.vec3.scale([],O.right(),M*z),te=Ae.vec3.normalize([],Ae.vec3.add([],Ae.vec3.add([],D,B),J)),he=[];let de;if(new Pr(C,te).closestPointOnSphere(I,V,he)){const ie=Ae.vec3.add([],he,I),ve=Ae.vec3.sub([],ie,C);de=Math.cos(g.fovAboveCenter)*Ae.vec3.length(ve)}else{const ie=Ae.vec3.sub([],C,I),ve=Ae.vec3.sub([],I,C);Ae.vec3.normalize(ve,ve);const be=Ae.vec3.length(ie)-V;de=Math.sqrt(be*(be+2*V));const Oe=Math.acos(de/(V+be))-Math.acos(Ae.vec3.dot(D,ve));de*=Math.cos(Oe)}return 1.01*de}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),f=jl(s.zoom);if(f>0){const g=wF(s,Wo(1,s.center.lat)*s.worldSize),m=s.worldSize/(2*Math.PI),_=Math.max(s.width,s.height)/s.worldSize*Math.PI;return mr(u,g+m*(1-Math.cos(_)),Math.pow(f,10))}return u}upVector(s,u,f){return Ln(u,f,s,1)}upVectorScale(s){return{metersToTile:ln(ui(As(s)))}}}function xF(h){const s=h.parallels,u=!!s&&Math.abs(s[0]+s[1])<.01;switch(h.name){case"mercator":return new TF(h);case"equirectangular":return new kae(h);case"naturalEarth":return new Bae(h);case"equalEarth":return new Fae(h);case"winkelTripel":return new jae(h);case"albers":return u?new bF(h):new Lae(h);case"lambertConformalConic":return u?new bF(h):new Uae(h);case"globe":return new Gae(h)}throw new Error(`Invalid projection name: ${h.name}`)}const Zae=Dh.VectorTileFeature.types,qae=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nS(h,s,u,f,g,m,_,b,O,D,C,V,I){const z=b?Math.min(my,Math.round(b[0])):0,M=b?Math.min(my,Math.round(b[1])):0;h.emplaceBack(s,u,Math.round(32*f),Math.round(32*g),m,_,(z<<1)+(O?1:0),M,16*D,16*C,256*V,256*I)}function iS(h,s,u){h.emplaceBack(s,u)}function sS(h,s,u,f,g,m,_){h.emplaceBack(s,u,f,g,m,_)}function oS(h,s,u,f,g){h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g)}function Hae(h){for(const s of h.sections)if(Ti(s.text))return!0;return!1}class SE{constructor(s){this.layoutVertexArray=new bh,this.indexArray=new Ms,this.programConfigurations=s,this.segments=new Li,this.dynamicLayoutVertexArray=new nd,this.opacityVertexArray=new pp,this.placedSymbolArray=new wl,this.iconTransitioningVertexArray=new Kd,this.globeExtVertexArray=new rd,this.zOffsetVertexArray=new ad}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(s,u,f,g,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,WC.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,_0.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,qae,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=s.createVertexBuffer(this.iconTransitioningVertexArray,w.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,gE.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,p.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Pt(SE,"SymbolBuffers");class bE{constructor(s,u,f){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Li,this.collisionVertexArray=new Pc,this.collisionVertexArrayExt=new nd}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,P.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,U.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pt(bE,"CollisionBuffers");class lS{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.lut=s.lut,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ae.mat4.identity([]),this.placementViewportMatrix=Ae.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=la(this.zoom,u["text-size"]),this.iconSizeData=la(this.zoom,u["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),m=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(_=>th[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=s.sourceID,this.projection=s.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new SE(new Nh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("text")||s.startsWith("symbol"))),this.icon=new SE(new Nh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("icon")||s.startsWith("symbol"))),this.glyphOffsetArray=new gA,this.lineVertexArray=new lm,this.symbolInstances=new mA}calculateGlyphDependencies(s,u,f,g,m){for(const _ of s){const b=_.codePointAt(0);if(b===void 0)break;if(u[b]=!0,g&&m&&b<=65535){const O=Jr[_];O&&(u[O.charCodeAt(0)]=!0)}}}updateFootprints(s,u){}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);return!p0(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(s,u,f,g){const m=this.layers[0],_=m.layout,b=this.projection.name==="globe",O=_.get("text-font"),D=_.get("text-field"),C=_.get("icon-image"),[V,I]=_.get("icon-size-scale-range"),z=ka(u.scaleFactor||1,V,I),M=(D.value.kind!=="constant"||D.value.value instanceof ms&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),B=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,J=_.get("symbol-sort-key");if(this.features=[],!M&&!B)return;const te=u.iconDependencies,he=u.glyphDependencies,de=u.availableImages,ie=new Rn(this.zoom);for(const{feature:ve,id:be,index:Oe,sourceLayerIndex:et}of s){const We=m._featureFilter.needGeometry,Ye=Y(ve,We);if(!m._featureFilter.filter(ie,Ye,f))continue;if(We||(Ye.geometry=K(ve,f,g)),b&&ve.type!==1&&f.z<=5){const Ct=Ye.geometry,Dt=.98078528056,Nt=(jt,Lt)=>{const qt=Ln(jt.x,jt.y,f,1),Aa=Ln(Lt.x,Lt.y,f,1);return Ae.vec3.dot(qt,Aa)<Dt};for(let jt=0;jt<Ct.length;jt++)Ct[jt]=S(Ct[jt],Nt)}let gt,tt;if(M){const Ct=m.getValueAndResolveTokens("text-field",Ye,f,de),Dt=ms.factory(Ct);Hae(Dt)&&(this.hasRTLText=!0),(!this.hasRTLText||_o()==="unavailable"||this.hasRTLText&&hs.isParsed())&&(gt=qa(Dt,m,Ye))}if(B){const Ct=m.getValueAndResolveTokens("icon-image",Ye,f,de);tt=Ct instanceof Ns?Ct:Ns.build(Ct)}if(!gt&&!tt)continue;const vt=this.sortFeaturesByKey?J.evaluate(Ye,{},f):void 0,xt={id:be,text:gt,icon:tt,index:Oe,sourceLayerIndex:et,geometry:Ye.geometry,properties:ve.properties,type:Zae[ve.type],sortKey:vt};if(this.features.push(xt),tt){const Ct=this.layers[0]._unevaluatedLayout._values,{iconPrimary:Dt,iconSecondary:Nt}=yF(tt,this.iconSizeData,Ct["icon-size"],f,this.zoom,xt,this.pixelRatio,z),jt=Dt.id.toString();if(te.has(jt)?te.get(jt).push(Dt):te.set(jt,[Dt]),Nt){const Lt=Nt.id.toString();te.has(Lt)?te.get(Lt).push(Nt):te.set(Lt,[Nt])}}if(gt){const Ct=O.evaluate(Ye,{},f).join(","),Dt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(th.vertical)>=0;for(const Nt of gt.sections)if(Nt.image){const jt=Nt.image.getPrimary().scaleSelf(this.pixelRatio),Lt=jt.id.toString(),qt=te.get(Lt)||[];qt.push(jt),te.set(Lt,qt)}else{const jt=aa(gt.toString()),Lt=Nt.fontStack||Ct,qt=he[Lt]=he[Lt]||{};this.calculateGlyphDependencies(Nt.text,qt,Dt,this.allowVerticalPlacement,jt)}}}if(_.get("symbol-placement")==="line"&&(this.features=function(ve){const be={},Oe={},et=[];let We=0;function Ye(xt){et.push(ve[xt]),We++}function gt(xt,Ct,Dt){const Nt=Oe[xt];return delete Oe[xt],Oe[Ct]=Nt,et[Nt].geometry[0].pop(),et[Nt].geometry[0]=et[Nt].geometry[0].concat(Dt[0]),Nt}function tt(xt,Ct,Dt){const Nt=be[Ct];return delete be[Ct],be[xt]=Nt,et[Nt].geometry[0].shift(),et[Nt].geometry[0]=Dt[0].concat(et[Nt].geometry[0]),Nt}function vt(xt,Ct,Dt){const Nt=Dt?Ct[0][Ct[0].length-1]:Ct[0][0];return`${xt}:${Nt.x}:${Nt.y}`}for(let xt=0;xt<ve.length;xt++){const Ct=ve[xt],Dt=Ct.geometry,Nt=Ct.text?Ct.text.toString():null;if(!Nt){Ye(xt);continue}const jt=vt(Nt,Dt),Lt=vt(Nt,Dt,!0);if(jt in Oe&&Lt in be&&Oe[jt]!==be[Lt]){const qt=tt(jt,Lt,Dt),Aa=gt(jt,Lt,et[qt].geometry);delete be[jt],delete Oe[Lt],Oe[vt(Nt,et[Aa].geometry,!0)]=Aa,et[qt].geometry=null}else jt in Oe?gt(jt,Lt,Dt):Lt in be?tt(jt,Lt,Dt):(Ye(xt),be[jt]=We-1,Oe[Lt]=We-1)}return et.filter(xt=>xt.geometry)}(this.features)),_.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const ve of u.elevationFeatures)this.elevationFeatureIdToIndex.set(ve.id,this.elevationFeatures.length),this.elevationFeatures.push(ve)}}else _.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((ve,be)=>ve.sortKey-be.sortKey)}update(s,u,f,g,m,_,b){this.text.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b),this.icon.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let s=!1;for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);if(f.elevationFeatureIndex===65535)continue;const g=this.elevationFeatures[f.elevationFeatureIndex];if(g){const m=.05+g.pointElevation(new It(f.tileAnchorX,f.tileAnchorY));f.zOffset!==m&&(s=!0,f.zOffset=m)}}s&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const s=(m,_,b)=>{f+=_,f>m.length&&m.resize(f);for(let O=-_;O<0;O++)m.emplace(O+f,b)},u=(m,_,b)=>{g+=_,g>m.length&&m.resize(g);for(let O=-_;O<0;O++)m.emplace(O+g,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,g=0;for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:O,numIconVertices:D}=_,C=_.zOffset,V=D>0;if((b>0||O>0)&&(s(this.text.zOffsetVertexArray,b,C),s(this.text.zOffsetVertexArray,O,C)),V){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:z}=_;I>=0&&u(this.icon.zOffsetVertexArray,D,C),z>=0&&u(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,C)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=xF(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){const f=this.lineVertexArray.length;if(s.segment!==void 0)for(const{x:g,y:m}of u)this.lineVertexArray.emplaceBack(g,m);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J){const te=s.indexArray,he=s.layoutVertexArray,de=s.globeExtVertexArray,ie=s.segments.prepareSegment(4*u.length,he,te,this.canOverlap?_.sortKey:void 0),ve=this.glyphOffsetArray.length,be=ie.vertexLength,Oe=this.allowVerticalPlacement&&b===th.vertical?Math.PI/2:0,et=_.text&&_.text.sections;for(let Ye=0;Ye<u.length;Ye++){const{tl:gt,tr:tt,bl:vt,br:xt,texPrimary:Ct,texSecondary:Dt,pixelOffsetTL:Nt,pixelOffsetBR:jt,minFontScaleX:Lt,minFontScaleY:qt,glyphOffset:Aa,isSDF:ga,sectionIndex:Qa}=u[Ye],Pa=ie.vertexLength,za=Aa[1];if(nS(he,D.x,D.y,gt.x,za+gt.y,Ct.x,Ct.y,f,ga,Nt.x,Nt.y,Lt,qt),nS(he,D.x,D.y,tt.x,za+tt.y,Ct.x+Ct.w,Ct.y,f,ga,jt.x,Nt.y,Lt,qt),nS(he,D.x,D.y,vt.x,za+vt.y,Ct.x,Ct.y+Ct.h,f,ga,Nt.x,jt.y,Lt,qt),nS(he,D.x,D.y,xt.x,za+xt.y,Ct.x+Ct.w,Ct.y+Ct.h,f,ga,jt.x,jt.y,Lt,qt),O){const{x:wa,y:vr,z:Ka}=O.anchor,[ur,Mr,en]=O.up;sS(de,wa,vr,Ka,ur,Mr,en),sS(de,wa,vr,Ka,ur,Mr,en),sS(de,wa,vr,Ka,ur,Mr,en),sS(de,wa,vr,Ka,ur,Mr,en),oS(s.dynamicLayoutVertexArray,wa,vr,Ka,Oe)}else oS(s.dynamicLayoutVertexArray,D.x,D.y,D.z,Oe);if(J){const wa=Dt||Ct;iS(s.iconTransitioningVertexArray,wa.x,wa.y),iS(s.iconTransitioningVertexArray,wa.x+wa.w,wa.y),iS(s.iconTransitioningVertexArray,wa.x,wa.y+wa.h),iS(s.iconTransitioningVertexArray,wa.x+wa.w,wa.y+wa.h)}te.emplaceBack(Pa,Pa+1,Pa+2),te.emplaceBack(Pa+1,Pa+2,Pa+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Aa[0]),Ye!==u.length-1&&Qa===u[Ye+1].sectionIndex||s.programConfigurations.populatePaintArrays(he.length,_,_.index,{},z,M,B,et&&et[Qa])}const We=O?O.anchor:D;s.placedSymbolArray.emplaceBack(We.x,We.y,We.z,D.x,D.y,ve,this.glyphOffsetArray.length-ve,be,C,V,D.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],b,0,!1,0,I,0)}_commitLayoutVertex(s,u,f,g,m,_,b){s.emplaceBack(u,f,g,m,_,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(s,u,f,g,m,_,b){const O=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=O.vertexLength,C=b.tileAnchorX,V=b.tileAnchorY;for(let z=0;z<4;z++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,u,s.padding,b.zOffset),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x1,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x2,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x2,s.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x1,s.y2)),O.vertexLength+=4;const I=f.indexArray;I.emplaceBack(D,D+1),I.emplaceBack(D+1,D+2),I.emplaceBack(D+2,D+3),I.emplaceBack(D+3,D),O.primitiveLength+=4}_addTextDebugCollisionBoxes(s,u,f,g,m,_){for(let b=g;b<m;b++){const O=f.get(b),D=this.getSymbolInstanceTextSize(s,_,u,b);this._addCollisionDebugVertices(O,D,this.textCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(s,u,f,g,m,_){for(let b=g;b<m;b++){const O=f.get(b),D=this.getSymbolInstanceIconSize(s,u,_.placedIconSymbolIndex);this._addCollisionDebugVertices(O,D,this.iconCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,_)}}generateCollisionDebugBuffers(s,u,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bE(xc,X.members,Kd),this.iconCollisionBox=new bE(xc,X.members,Kd);const g=sr(this.iconSizeData,s),m=sr(this.textSizeData,s,f);for(let _=0;_<this.symbolInstances.length;_++){const b=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(m,s,u,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(m,s,u,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(g,s,u,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(g,s,u,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(s,u,f,g){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),_=Za(this.textSizeData,s,m)/Be;return this.tilePixelRatio*_}getSymbolInstanceIconSize(s,u,f){const g=this.icon.placedSymbolArray.get(f),m=Za(this.iconSizeData,s,g);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(s,u,f,g){s.emplaceBack(u,-f,-f,g),s.emplaceBack(u,f,-f,g),s.emplaceBack(u,f,f,g),s.emplaceBack(u,-f,f,g)}_updateTextDebugCollisionBoxes(s,u,f,g,m,_,b){for(let O=g;O<m;O++){const D=f.get(O),C=this.getSymbolInstanceTextSize(s,_,u,O);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,D.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(s,u,f,g,m,_,b){for(let O=g;O<m;O++){const D=f.get(O),C=this.getSymbolInstanceIconSize(s,u,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,D.padding,_.zOffset)}}updateCollisionDebugBuffers(s,u,f,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=sr(this.iconSizeData,s,g),_=sr(this.textSizeData,s,f);for(let b=0;b<this.symbolInstances.length;b++){const O=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(_,s,u,O.textBoxStartIndex,O.textBoxEndIndex,O,f),this._updateTextDebugCollisionBoxes(_,s,u,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,f),this._updateIconDebugCollisionBoxes(m,s,u,O.iconBoxStartIndex,O.iconBoxEndIndex,O,g),this._updateIconDebugCollisionBoxes(m,s,u,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,u,f,g,m,_,b,O,D){const C={};if(u<f){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie,featureIndex:ve}=s.get(u);C.textBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie},C.textFeatureIndex=ve}if(g<m){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie,featureIndex:ve}=s.get(g);C.verticalTextBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie},C.verticalTextFeatureIndex=ve}if(_<b){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie,featureIndex:ve}=s.get(_);C.iconBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie},C.iconFeatureIndex=ve}if(O<D){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie,featureIndex:ve}=s.get(O);C.verticalIconBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ie},C.verticalIconFeatureIndex=ve}return C}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(s,u){const f=s.placedSymbolArray.get(u),g=f.vertexStartIndex+4*f.numGlyphs;for(let m=f.vertexStartIndex;m<g;m+=4)s.indexArray.emplaceBack(m,m+1,m+2),s.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(s),f=Math.cos(s),g=[],m=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const O=this.symbolInstances.get(b);g.push(0|Math.round(u*O.tileAnchorX+f*O.tileAnchorY)),m.push(O.featureIndex)}return _.sort((b,O)=>g[b]-g[O]||m[O]-m[b]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let s=0;s<this.symbolInstances.length;++s)this.symbolInstanceIndexesSortedZOffset.push(s)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((s,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(s).zOffset)}addToSortKeyRanges(s,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:D}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),m>=0&&m!==g&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==g&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let PF,EF,xE;Pt(lS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),lS.addDynamicAttributes=oS;class NF{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:mc,this.defaultValue=s}evaluate(s){if(s.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt(NF,"FormatSectionOverride",{omit:["defaultValue"]});const PE=()=>xE||(xE={layout:PF||(PF=new Ii({"symbol-placement":new ba(Zt.layout_symbol["symbol-placement"]),"symbol-spacing":new ba(Zt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ba(Zt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ua(Zt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ba(Zt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new ba(Zt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new ba(Zt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new ba(Zt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ba(Zt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ba(Zt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ba(Zt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ua(Zt.layout_symbol["icon-size"]),"icon-size-scale-range":new ba(Zt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ua(Zt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ua(Zt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ua(Zt.layout_symbol["icon-image"]),"icon-rotate":new Ua(Zt.layout_symbol["icon-rotate"]),"icon-padding":new ba(Zt.layout_symbol["icon-padding"]),"icon-keep-upright":new ba(Zt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ua(Zt.layout_symbol["icon-offset"]),"icon-anchor":new Ua(Zt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ba(Zt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ba(Zt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ba(Zt.layout_symbol["text-rotation-alignment"]),"text-field":new Ua(Zt.layout_symbol["text-field"]),"text-font":new Ua(Zt.layout_symbol["text-font"]),"text-size":new Ua(Zt.layout_symbol["text-size"]),"text-size-scale-range":new ba(Zt.layout_symbol["text-size-scale-range"]),"text-max-width":new Ua(Zt.layout_symbol["text-max-width"]),"text-line-height":new Ua(Zt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ua(Zt.layout_symbol["text-letter-spacing"]),"text-justify":new Ua(Zt.layout_symbol["text-justify"]),"text-radial-offset":new Ua(Zt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ba(Zt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ua(Zt.layout_symbol["text-anchor"]),"text-max-angle":new ba(Zt.layout_symbol["text-max-angle"]),"text-writing-mode":new ba(Zt.layout_symbol["text-writing-mode"]),"text-rotate":new Ua(Zt.layout_symbol["text-rotate"]),"text-padding":new ba(Zt.layout_symbol["text-padding"]),"text-keep-upright":new ba(Zt.layout_symbol["text-keep-upright"]),"text-transform":new Ua(Zt.layout_symbol["text-transform"]),"text-offset":new Ua(Zt.layout_symbol["text-offset"]),"text-allow-overlap":new ba(Zt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ba(Zt.layout_symbol["text-ignore-placement"]),"text-optional":new ba(Zt.layout_symbol["text-optional"]),visibility:new ba(Zt.layout_symbol.visibility)})),paint:EF||(EF=new Ii({"icon-opacity":new Ua(Zt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ua(Zt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ua(Zt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ua(Zt.paint_symbol["text-emissive-strength"]),"icon-color":new Ua(Zt.paint_symbol["icon-color"]),"icon-halo-color":new Ua(Zt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ua(Zt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ua(Zt.paint_symbol["icon-halo-blur"]),"icon-translate":new ba(Zt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ba(Zt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ua(Zt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ua(Zt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ua(Zt.paint_symbol["text-occlusion-opacity"]),"text-color":new Ua(Zt.paint_symbol["text-color"],{runtimeType:$s,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Ua(Zt.paint_symbol["text-halo-color"]),"text-halo-width":new Ua(Zt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ua(Zt.paint_symbol["text-halo-blur"]),"text-translate":new ba(Zt.paint_symbol["text-translate"]),"text-translate-anchor":new ba(Zt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new ba(Zt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new ba(Zt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new ba(Zt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new ba(Zt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ua(Zt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},xE);class uS extends lo{constructor(s,u,f,g){super(s,PE(),u,f,g),this._colorAdjustmentMatrix=Ae.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=s.paint!==void 0&&("icon-occlusion-opacity"in s.paint||"text-occlusion-opacity"in s.paint)}recalculate(s,u){super.recalculate(s,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const m of f)g.indexOf(m)<0&&g.push(m);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(s,u,f,g){return this._saturation===s&&this._contrast===u&&this._brightnessMin===f&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(m,_,b,O){m=Xt(m),_=us(_);const D=Ae.mat4.create(),C=m/3,V=1-2*C,I=[V,C,C,0,C,V,C,0,C,C,V,0,0,0,0,1],z=.5-.5*_,M=O-b;return Ae.mat4.multiply(D,[M,0,0,0,0,M,0,0,0,0,M,0,b,b,b,1],[_,0,0,0,0,_,0,0,0,0,_,0,z,z,z,1]),Ae.mat4.multiply(D,D,I),D}(s,u,f,g),this._saturation=s,this._contrast=u,this._brightnessMin=f,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(s,u,f,g){const m=this.layout.get(s).evaluate(u,{},f,g),_=this._unevaluatedLayout._values[s];return _.isDataDriven()||Yh(_.value)||!m?m:function(b,O){return O.replace(/{([^{}]+)}/g,(D,C)=>C in b?String(b[C]):"")}(u.properties,m)}createBucket(s){return new lS(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of PE().paint.overridableProperties){if(!uS.hasPaintOverride(this.layout,s))continue;const u=this.paint.get(s),f=new NF(u),g=new oo(f,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new Q("source",g):new ye("composite",g,u.value.zoomStops,u.value._interpolationType),this.paint._values[s]=new kl(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&uS.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){const f=s.get("text-field"),g=PE().paint.properties[u];let m=!1;const _=b=>{for(const O of b)if(g.overrides&&g.overrides.hasOverride(O))return void(m=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ms)_(f.value.value.sections);else if(f.value.kind==="source"){const b=D=>{m||(D instanceof Ql&&Wi(D.value)===Ru?_(D.value.sections):D instanceof Vd?_(D.sections):D.eachChild(b))},O=f.value;O._styleExpression&&b(O._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(s,u,f){return{config:new rc(this,{zoom:u,lut:f}),overrideFog:!1}}}let OF,VF,zF,DF;var EE=Nn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function NE(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function OE(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class VE{constructor(s,u,f,g){this.context=s,this.format=f,this.useMipmap=g&&g.useMipmap,this.texture=s.gl.createTexture(),this.update(u,{premultiply:g&&g.premultiply})}update(s,u){const f=s&&s instanceof HTMLVideoElement&&s.width===0?s.videoWidth:s.width,g=s&&s instanceof HTMLVideoElement&&s.height===0?s.videoHeight:s.height,{context:m}=this,{gl:_}=m,{x:b,y:O}=u&&u.position?u.position:{x:0,y:0},D=b+f,C=O+g;!this.size||this.size[0]===D&&this.size[1]===C||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!u||u.premultiply!==!1));const V=s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ImageBitmap&&s instanceof ImageBitmap;if(!this.size&&D>0&&C>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max(D,C)))+1:1;_.texStorage2D(_.TEXTURE_2D,I,this.format,D,C),this.size=[D,C]}if(this.size)if(V)_.texSubImage2D(_.TEXTURE_2D,0,b,O,NE(this.format),OE(this.format),s);else{const I=s.data;I&&_.texSubImage2D(_.TEXTURE_2D,0,b,O,f,g,NE(this.format),OE(this.format),I)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(s,u,f=!1){const{context:g}=this,{gl:m}=g;m.bindTexture(m.TEXTURE_2D,this.texture),s!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!f?s===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(s,u,f,g){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),u!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,u),this.magFilter=u),s!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?s===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),f!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,f),this.wrapS=f),g!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class cS{constructor(s,u){this.context=s,this.texture=u}bind(s,u){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),s!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,s),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,s),this.minFilter=s),u!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrapS=u)}}function dS(h,s,u,f,g,m,_,b){const O=[h,s,1,u,f,1,g,m,1],D=[_,b,1],C=Ae.mat3.adjoint([],O),[V,I,z]=Ae.vec3.transformMat3(D,D,C);return Ae.mat3.multiply(O,O,[V,0,0,0,I,0,0,0,z])}function MF(h,s,u,f,g,m,_,b){const O=function(D,C,V,I,z,M,B,J){const te=dS(0,0,1,0,1,1,0,1),he=dS(D,C,V,I,z,M,B,J),de=Ae.mat3.adjoint([],te);return Ae.mat3.multiply(he,he,de)}(h,s,u,f,g,m,_,b);return[O[2]/O[8]/Va,O[5]/O[8]/Va]}function hS(h){return[h[0],Math.min(Math.max(h[1],-85.051129),Uu)]}class IF extends Jl{constructor(s,u,f,g){super(),this.id=s,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=u,this._dirty=!1}load(s,u){if(this._loaded=u||!1,this.fire(new Go("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return s&&(this.coordinates=s),this._loaded=!0,void this._finishLoading();this._imageRequest=fh(this.map._requestManager.transformRequest(this.url,Ps.Image),(f,g)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new Ed(f)):g&&(this.image=g instanceof HTMLImageElement?$t.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}setTexture(s){if(!(s.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new cS(this.map.painter.context,s.handle),this.width=s.dimensions[0],this.height=s.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Go("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(s){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof cS||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(s){if(this.coordinates=s,this._boundsArray=void 0,this._unsupportedCoords=!1,!s.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=s[0][1],f=s[0][1];for(const m of s)m[1]>f&&(f=m[1]),m[1]<u&&(u=m[1]);const g=(f+u)/2;if(g>Uu?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=s.map(o.fromLngLat);this.tileID=function(_){let b=1/0,O=1/0,D=-1/0,C=-1/0;for(const B of _)b=Math.min(b,B.x),O=Math.min(O,B.y),D=Math.max(D,B.x),C=Math.max(C,B.y);const V=Math.max(D-b,C-O),I=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),z=Math.pow(2,I);let M=Math.floor((b+D)/2*z);return M>1&&(M-=1),new da(I,M,Math.floor((O+C)/2*z))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Go("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(s){for(const te in this.tiles){const he=this.tiles[te];he.state!=="loaded"&&(he.state="loaded",he.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=mw(new da(0,0,0),this.map.transform.projection),f=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(te){const he=te[1].x-te[0].x,de=te[1].y-te[0].y,ie=te[2].x-te[1].x,ve=te[2].y-te[1].y,be=te[3].x-te[2].x,Oe=te[3].y-te[2].y,et=te[0].x-te[3].x,We=te[0].y-te[3].y,Ye=he*ve-ie*de,gt=ie*Oe-be*ve,tt=be*We-et*Oe,vt=et*de-he*We;return Ye>0&&gt>0&&tt>0&&vt>0||Ye<0&&gt<0&&tt<0&&vt<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=mw(this.tileID,this.map.transform.projection),[m,_,b,O]=this.coordinates.map(te=>{const he=g.projection.project(te[0],te[1]);return RF(g,he)._round()});this.perspectiveTransform=MF(m.x,m.y,_.x,_.y,b.x,b.y,O.x,O.y);const D=this._boundsArray=new Iu;D.emplaceBack(m.x,m.y,0,0),D.emplaceBack(_.x,_.y,Va,0),D.emplaceBack(O.x,O.y,0,Va),D.emplaceBack(b.x,b.y,Va,Va),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=s.createVertexBuffer(D,EE.members),this.boundsSegments=Li.simpleSegment(0,0,4,2);const C=[],V=[hS((I=this.coordinates)[0]),hS(I[1]),hS(I[2]),hS(I[3])];var I;const[z,M,B,J]=function(te){let he=te[0][0],de=he,ie=te[0][1],ve=ie;for(let be=1;be<te.length;be++)te[be][0]<he?he=te[be][0]:te[be][0]>de&&(de=te[be][0]),te[be][1]<ie?ie=te[be][1]:te[be][1]>ve&&(ve=te[be][1]);return[he,ie,de-he,ve-ie]}(V);{const te=new Iu,[he,de,ie,ve]=function(Nt){let jt=Nt[0].x,Lt=jt,qt=Nt[0].y,Aa=qt;for(let ga=1;ga<Nt.length;ga++)Nt[ga].x<jt?jt=Nt[ga].x:Nt[ga].x>Lt&&(Lt=Nt[ga].x),Nt[ga].y<qt?qt=Nt[ga].y:Nt[ga].y>Aa&&(Aa=Nt[ga].y);return[jt,qt,Lt-jt,Aa-qt]}(f),be=Nt=>[(Nt.x-he)/ie,(Nt.y-de)/ve],[Oe,et,We,Ye]=f.map(be),gt=function(Nt,jt,Lt,qt,Aa,ga,Qa,Pa){const za=dS(0,0,1,0,1,1,0,1),wa=dS(Nt,jt,Lt,qt,Aa,ga,Qa,Pa),vr=Ae.mat3.adjoint([],wa);return Ae.mat3.multiply(za,za,vr)}(Oe[0],Oe[1],et[0],et[1],We[0],We[1],Ye[0],Ye[1]);this.elevatedGlobePerspectiveTransform=MF(Oe[0],Oe[1],et[0],et[1],We[0],We[1],Ye[0],Ye[1]);const tt=(Nt,jt)=>{C.push(Nt.lng);const Lt=Math.round((Nt.lng-z)/B*Va),qt=Math.round((Nt.lat-M)/J*Va),Aa=be(jt),ga=Ae.vec3.transformMat3([],[Aa[0],Aa[1],1],gt),Qa=Math.round(ga[0]/ga[2]*Va),Pa=Math.round(ga[1]/ga[2]*Va);te.emplaceBack(Lt,qt,Qa,Pa)},vt=f[3].x-f[0].x,xt=f[3].y-f[0].y,Ct=f[2].x-f[1].x,Dt=f[2].y-f[1].y;for(let Nt=0;Nt<65;Nt++){const jt=Nt/64,Lt=[f[0].x+jt*vt,f[0].y+jt*xt],qt=[f[1].x+jt*Ct,f[1].y+jt*Dt],Aa=qt[0]-Lt[0],ga=qt[1]-Lt[1];for(let Qa=0;Qa<65;Qa++){const Pa=Qa/64,za={x:Lt[0]+Aa*Pa,y:Lt[1]+ga*Pa};tt(u.projection.unproject(za.x,za.y),za)}}this.elevatedGlobeVertexBuffer=s.createVertexBuffer(te,EE.members)}{this.maxLongitudeTriangleSize=0;let te=[],he=new Ms;const de=(ie,ve,be)=>{he.emplaceBack(ie,ve,be);const Oe=C[ie],et=C[ve],We=C[be],Ye=Math.min(Math.min(Oe,et),We),gt=Math.max(Math.max(Oe,et),We)-Ye;gt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=gt),te.push(Ye+gt/2)};for(let ie=0;ie<64;ie++)for(let ve=0;ve<64;ve++){const be=65*ie+ve,Oe=be+1,et=be+65,We=et+1;de(be,et,Oe),de(Oe,et,We)}[te,he]=function(ie,ve){const be=Array.from({length:ie.length},(We,Ye)=>Ye);be.sort((We,Ye)=>ie[We]-ie[Ye]);const Oe=[],et=new Ms;for(let We=0;We<be.length;We++){const Ye=be[We];Oe.push(ie[Ye]);const gt=3*Ye,tt=gt+1;et.emplaceBack(ve.uint16[gt],ve.uint16[tt],ve.uint16[tt+1])}return[Oe,et]}(te,he),this.elevatedGlobeTrianglesCenterLongitudes=te,this.elevatedGlobeIndexBuffer=s.createIndexBuffer(he)}this.elevatedGlobeSegments=Li.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,B/Va,0,J/Va,0,0,M,z,0])}prepare(){const s=Object.keys(this.tiles).length!==0;if(this.tileID&&!s)return;const u=this.map.painter.context,f=u.gl;!this._dirty||this.texture instanceof cS||(this.texture?this.texture.update(this.image):(this.texture=new VE(u,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),s&&this._prepareData(u)}loadTile(s,u){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},u(null)):(s.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(s){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let g=(m=s+180)+360*Math.round((f[0]-m)/360);var m;const _=new Li,b=(V,I)=>{_.segments.push({vertexOffset:0,primitiveOffset:V,vertexLength:u.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},O=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-g)<=O){const V=vu(f,0,f.length,g+O);return V===f.length||b(V,Jn(f,V+1,f.length,g+360-O)-V),_}g<f[0]&&(g+=360);const D=Jn(f,0,f.length,g-O);if(D===f.length)return b(0,f.length),_;b(0,D-0);const C=vu(f,D+1,f.length,g+O);return C!==f.length&&b(C,f.length-C),_}}const $ae=(Math.pow(256,2)-1)/16907520;class LF extends lo{constructor(s,u,f,g){super(s,{layout:zF||(zF=new Ii({visibility:new ba(Zt.layout_raster.visibility)})),paint:DF||(DF=new Ii({"raster-opacity":new ba(Zt.paint_raster["raster-opacity"]),"raster-color":new es(Zt.paint_raster["raster-color"]),"raster-color-mix":new ba(Zt.paint_raster["raster-color-mix"]),"raster-color-range":new ba(Zt.paint_raster["raster-color-range"]),"raster-hue-rotate":new ba(Zt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ba(Zt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ba(Zt.paint_raster["raster-brightness-max"]),"raster-saturation":new ba(Zt.paint_raster["raster-saturation"]),"raster-contrast":new ba(Zt.paint_raster["raster-contrast"]),"raster-resampling":new ba(Zt.paint_raster["raster-resampling"]),"raster-fade-duration":new ba(Zt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new ba(Zt.paint_raster["raster-emissive-strength"]),"raster-array-band":new ba(Zt.paint_raster["raster-array-band"]),"raster-elevation":new ba(Zt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(s){return!(s&&s._source instanceof IF&&(s._source.onNorthPole||s._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(s){s!=="raster-color"&&s!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(s){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[f,g]=s||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(g)||f===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=ty({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,g])}}let FF,kF,UF,BF,jF;class GF extends lo{constructor(s,u,f,g){super(s,{layout:FF||(FF=new Ii({visibility:new ba(Zt["layout_raster-particle"].visibility)})),paint:kF||(kF=new Ii({"raster-particle-array-band":new ba(Zt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new ba(Zt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new es(Zt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new ba(Zt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new ba(Zt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new ba(Zt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new ba(Zt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new ba(Zt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,g),this._updateColorRamp(),this.lastInvalidatedAt=$t.now()}onRemove(s){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(s){return!1}_handleSpecialPaintPropertyUpdate(s){s!=="raster-particle-color"&&s!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),s==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const s=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=ty({expression:s,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=$t.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Kae extends lo{constructor(s,u){super(s,{},u,null),this.implementation=s,s.slot&&(this.slot=s.slot)}is3D(s){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(s){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}function zE(h,s,u){const f=[0,0,1],g=Ae.quat.identity([]);return Ae.quat.rotateY(g,g,u?-Ea(h)+Math.PI:Ea(h)),Ae.quat.rotateX(g,g,-Ea(s)),Ae.vec3.transformQuat(f,f,g),Ae.vec3.normalize(f,f)}function ZF(h,s){const u=fS(h.projection,h.zoom,h.width,h.height),f=function(m,_,b,O,D){const C=new kn(b.lng-180*yy,b.lat),V=new kn(b.lng+180*yy,b.lat),I=m.project(C.lng,C.lat),z=m.project(V.lng,V.lat),M=-Math.atan2(z.y-I.y,z.x-I.x),B=o.fromLngLat(b);B.y=ka(B.y,-1+yy,1-yy);const J=B.toLngLat(),te=m.project(J.lng,J.lat),he=o.fromLngLat(J);he.x+=yy;const de=he.toLngLat(),ie=m.project(de.lng,de.lat),ve=HF(ie.x-te.x,ie.y-te.y,M),be=o.fromLngLat(J);be.y+=yy;const Oe=be.toLngLat(),et=m.project(Oe.lng,Oe.lat),We=HF(et.x-te.x,et.y-te.y,M),Ye=Math.abs(ve.x)/Math.abs(We.y),gt=Ae.mat4.identity([]);Ae.mat4.rotateZ(gt,gt,-M*(1-(D?0:O)));const tt=Ae.mat4.identity([]);return Ae.mat4.scale(tt,tt,[1,1-(1-Ye)*O,1]),tt[4]=-We.x/We.y*O,Ae.mat4.rotateZ(tt,tt,M),Ae.mat4.multiply(tt,gt,tt),tt}(h.projection,0,h.center,u,s),g=qF(h);return Ae.mat4.scale(f,f,[g,g,1]),f}function qF(h){const s=h.projection,u=fS(h.projection,h.zoom,h.width,h.height),f=DE(s,h.center),g=DE(s,kn.convert(s.center));return Math.pow(2,f*u+(1-u)*g)}function fS(h,s,u,f,g=1/0){const m=h.range;if(!m)return 0;const _=Math.min(g,Math.max(u,f)),b=Math.log(_/1024)/Math.LN2;return Gr(m[0]+b,m[1]+b,s)}const yy=1/4e4;function DE(h,s){const u=ka(s.lat,-85.051129,Uu),f=new kn(s.lng-180*yy,u),g=new kn(s.lng+180*yy,u),m=h.project(f.lng,u),_=h.project(g.lng,u),b=o.fromLngLat(f),O=o.fromLngLat(g),D=_.x-m.x,C=_.y-m.y,V=O.x-b.x,I=O.y-b.y,z=Math.sqrt((V*V+I*I)/(D*D+C*C));return Math.log(z)/Math.LN2}function HF(h,s,u){const f=Math.cos(u),g=Math.sin(u);return{x:h*f-s*g,y:h*g+s*f}}function $F(h,s,u){Ae.mat4.identity(h),Ae.mat4.rotateZ(h,h,Ea(s[2])),Ae.mat4.rotateX(h,h,Ea(s[0])),Ae.mat4.rotateY(h,h,Ea(s[1])),Ae.mat4.scale(h,h,u),Ae.mat4.multiply(h,h,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function pS(h,s,u,f,g,m,_,b){const O=[u[0]-s[0],u[1]-s[1],0],D=[f[0]-s[0],f[1]-s[1],0];if(Ae.vec3.length(O)<1e-12||Ae.vec3.length(D)<1e-12)return Ae.quat.identity(h);const C=Ae.vec3.cross([],O,D);Ae.vec3.normalize(C,C),Ae.vec3.subtract(D,f,s),O[2]=(m-g)*b,D[2]=(_-g)*b;const V=O;return Ae.vec3.cross(V,O,D),Ae.vec3.normalize(V,V),Ae.quat.rotationTo(h,C,V)}function ME(h,s,u=!1){const f=jl(s.zoom),g=function(m,_,b){const O=_.worldSize,D=[m[12],m[13],m[14]],C=Si(D[1]/O),V=ku(D[0]/O),I=Ae.mat4.identity([]),z=Wo(1,C)*O,M=Wo(1,0)*O*af(C,_.zoom),B=1/Vc(O);let J=M*B;if(b){const ie=fS(_.projection,_.zoom,_.width,_.height,1024);J=B*_.projection.pixelSpaceConversion(_.center.lat,O,ie)}const te=Oc(C,V);Ae.vec3.add(te,te,Ae.vec3.scale([],Ae.vec3.normalize([],te),z*J*D[2]));const he=function(ie){const ve=[ie[0],ie[1],ie[2]];let be=[0,1,0];const Oe=Ae.vec3.cross([],be,ve);return Ae.vec3.cross(be,ve,Oe),Ae.vec3.squaredLength(be)===0&&(be=[0,1,0],Ae.vec3.cross(Oe,ve,be)),Ae.vec3.normalize(Oe,Oe),Ae.vec3.normalize(be,be),Ae.vec3.normalize(ve,ve),[Oe[0],Oe[1],Oe[2],0,be[0],be[1],be[2],0,ve[0],ve[1],ve[2],0,ie[0],ie[1],ie[2],1]}(te);Ae.mat4.scale(I,I,[J,J,J*z]),Ae.mat4.translate(I,I,[-D[0],-D[1],-D[2]]);const de=Ae.mat4.multiply([],_.globeMatrix,he);return Ae.mat4.multiply(de,de,I),Ae.mat4.multiply(de,de,m),de}(h,s,u);if(f>0){const m=function(_,b){const O=b.worldSize,D=Wo(1,0)*O*af(b.center.lat,b.zoom)/Vc(O),C=Wo(1,b.center.lat)*O,V=Ae.mat4.identity([]);return Ae.mat4.rotateY(V,V,Ea(b.center.lng)),Ae.mat4.rotateX(V,V,Ea(b.center.lat)),Ae.mat4.translate(V,V,[0,0,Tl]),Ae.mat4.scale(V,V,[D,D,D*C]),Ae.mat4.translate(V,V,[b.point.x-.5*O,b.point.y-.5*O,0]),Ae.mat4.multiply(V,V,_),Ae.mat4.multiply(V,b.globeMatrix,V)}(h,s);return function(_,b,O){const D=(M,B,J)=>{const te=Ae.vec3.length(M),he=Ae.vec3.length(B),de=uo(M,B,J);return Ae.vec3.scale(de,de,1/Ae.vec3.length(de)*mr(te,he,J))},C=D([_[0],_[1],_[2]],[b[0],b[1],b[2]],O),V=D([_[4],_[5],_[6]],[b[4],b[5],b[6]],O),I=D([_[8],_[9],_[10]],[b[8],b[9],b[10]],O),z=uo([_[12],_[13],_[14]],[b[12],b[13],b[14]],O);return[C[0],C[1],C[2],0,V[0],V[1],V[2],0,I[0],I[1],I[2],0,z[0],z[1],z[2],1]}(g,m,f)}return g}function KF(h,s,u,f){const g=ar.projectAabbCorners(f,u);let m=Number.MAX_VALUE,_=-1;for(let D=0;D<g.length;++D){const C=g[D];C[0]=(.5*C[0]+.5)*s.width,C[1]=(.5-.5*C[1])*s.height,C[2]<m&&(_=D,m=C[2])}const b=D=>new It(g[D][0],g[D][1]);let O;switch(_){case 0:case 6:O=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:O=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:O=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:O=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(Pe(h,O))return m}const Wae=Nn([{name:"a_pos_3f",components:3,type:"Float32"}]),Yae=Nn([{name:"a_color_3f",components:3,type:"Float32"}]),Xae=Nn([{name:"a_color_4f",components:4,type:"Float32"}]),Jae=Nn([{name:"a_uv_2f",components:2,type:"Float32"}]),Qae=Nn([{name:"a_normal_3f",components:3,type:"Float32"}]),ere=Nn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),tre=Nn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),WF={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class mS{constructor(s,u,f,g){this.message=(s?`${s}: `:"")+f,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function YF(h,s){const u=h.indexOf("://")===-1;try{return new URL(h,u&&s?"http://example.com":void 0),!0}catch{return!1}}class XF{constructor(s,u){this.feature=s,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class JF{constructor(){this.instancedDataArray=new ng,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class IE{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=s.projection,this.index=s.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(s,u){}populate(s,u,f,g){this.tileToMeter=y(f);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:b,index:O,sourceLayerIndex:D}of s){const C=b??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),V=Y(_,m);if(!this.layers[0]._featureFilter.filter(new Rn(this.zoom),V,f))continue;const I={id:C,sourceLayerIndex:D,index:O,geometry:m?V.geometry:K(_,f,g),properties:_.properties,type:_.type,patterns:{}},z=this.addFeature(I,I.geometry,V);z&&u.featureIndex.insert(_,I.geometry,O,D,this.index,this.instancesPerModel[z].instancedDataArray.length,Va/32)}this.lookup=null}update(s,u,f,g){for(const m in this.instancesPerModel){const _=this.instancesPerModel[m];for(const b in s)_.idToFeaturesIndex.hasOwnProperty(b)&&(this.evaluate(_.features[_.idToFeaturesIndex[b]],s[b],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let s=!1;for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];for(const g of f.features){const m=this.layers[0],_=g.feature,b=this.canonical,O=m.paint.get("model-rotation").evaluate(_,{},b),D=m.paint.get("model-scale").evaluate(_,{},b),C=m.paint.get("model-translation").evaluate(_,{},b);Ae.vec3.exactEquals(g.rotation,O)&&Ae.vec3.exactEquals(g.scale,D)&&Ae.vec3.exactEquals(g.translation,C)||(this.evaluate(g,g.featureStates,f,!0),s=!0)}}return s}updateReplacement(s,u,f,g){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);if(p0(this.activeReplacements,m))return!1;this.activeReplacements=m;let _=!1;for(const b in this.instancesPerModel){const O=this.instancesPerModel[b],D=O.instancedDataArray;for(const C of O.features){const V=C.instancedDataOffset,I=C.instancedDataCount;for(let z=0;z<I;z++){const M=16*(z+V);let B=D.float32[M+0];const J=B>Va;B=J?B-Va:B;const te=Math.floor(B),he=D.float32[M+1];let de=!1;for(const ie of this.activeReplacements)if(!jf(ie,f,WF.Model,g)&&!(ie.min.x>te||te>ie.max.x||ie.min.y>he||he>ie.max.y)&&(de=FC(LC(te,he,s.canonical,ie.footprintTileId.canonical),ie.footprint),de))break;D.float32[M]=de?B+Va:B,_=_||de!==J}}}return _}isEmpty(){for(const s in this.instancesPerModel)if(this.instancesPerModel[s].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(s){if(!this.uploaded)for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=s.createVertexBuffer(f.instancedDataArray,ere.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const s=this.layers[0].modelManager;if(s&&this.modelUris)for(const u of this.modelUris)s.removeModel(u,"")}addFeature(s,u,f){const g=this.layers[0],m=g.layout.get("model-id").evaluate(f,{},this.canonical);if(!m)return $r(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),m;YF(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new JF);const _=this.instancesPerModel[m],b=_.instancedDataArray,O=new XF(f,b.length);for(const D of u)for(const C of D){if(C.x<0||C.x>=Va||C.y<0||C.y>=Va)continue;const V=(this.lookupDim-1)/Va,I=this.lookupDim*(C.y*V|0)+C.x*V|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const z=b.length;b.resize(z+1),_.instancesEvaluatedElevation.push(0),b.float32[16*z]=C.x,b.float32[16*z+1]=C.y}return O.instancedDataCount=_.instancedDataArray.length-O.instancedDataOffset,O.instancedDataCount>0&&(s.id&&(_.idToFeaturesIndex[s.id]=_.features.length),_.features.push(O),this.evaluate(O,{},_,!1)),m}getModelUris(){return this.modelUris}evaluate(s,u,f,g){const m=this.layers[0],_=s.feature,b=this.canonical,O=s.rotation=m.paint.get("model-rotation").evaluate(_,u,b),D=s.scale=m.paint.get("model-scale").evaluate(_,u,b),C=s.translation=m.paint.get("model-translation").evaluate(_,u,b),V=m.paint.get("model-color").evaluate(_,u,b);V.a=m.paint.get("model-color-mix-intensity").evaluate(_,u,b);const I=[];this.maxVerticalOffset<C[2]&&(this.maxVerticalOffset=C[2]),this.maxScale=Math.max(Math.max(this.maxScale,D[0]),Math.max(D[1],D[2])),$F(I,O,D);const z=Math.round(100*V.a)+V.b/1.05;for(let M=0;M<s.instancedDataCount;++M){const B=s.instancedDataOffset+M,J=16*B,te=f.instancedDataArray.float32;let he=0;g&&(he=te[J+6]-f.instancesEvaluatedElevation[B]);const de=0|te[J+1];te[J]=(0|te[J])+V.r/1.05,te[J+1]=de+V.g/1.05,te[J+2]=z,te[J+3]=1/(b.z>10?this.tileToMeter:y(b,de)),te[J+4]=C[0],te[J+5]=C[1],te[J+6]=C[2]+he,te[J+7]=I[0],te[J+8]=I[1],te[J+9]=I[2],te[J+10]=I[4],te[J+11]=I[5],te[J+12]=I[6],te[J+13]=I[8],te[J+14]=I[9],te[J+15]=I[10],f.instancesEvaluatedElevation[B]=C[2]}}}let QF,ek;Pt(IE,"ModelBucket",{omit:["layers"]}),Pt(JF,"PerModelAttributes"),Pt(XF,"ModelFeature");const qA=64,b0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function tk(h,s,u,f,g,m,_,b,O,D=!1){const C=u.zoom,V=u.project(f),I=af(f.lat,C),z=1/I;Ae.mat4.identity(h),Ae.mat4.translate(h,h,[V.x+_[0]*z,V.y+_[1]*z,_[2]]);let M=1,B=1;const J=u.worldSize;if(D){if(u.projection.name==="mercator"){let ie=0;u.elevation&&(ie=u.elevation.getAtPointOrZero(new o(V.x/J,V.y/J),0));const ve=Ae.vec4.transformMat4([],[V.x,V.y,ie,1],u.projMatrix)[3]/u.cameraToCenterDistance;M=ve,B=ve*af(u.center.lat,C)}else if(u.projection.name==="globe"){const ie=ME(h,u),ve=Ae.mat4.multiply([],u.projMatrix,ie),be=[0,0,0,1];Ae.vec4.transformMat4(be,be,ve);const Oe=be[3]/u.cameraToCenterDistance,et=jl(C),We=u.projection.pixelsPerMeter(f.lat,J)*af(f.lat,C),Ye=u.projection.pixelsPerMeter(u.center.lat,J)*af(u.center.lat,C);M=Oe/mr(We,bA(u.center.lat),et),B=Oe*I/We,M*=Ye,B*=Ye}}else M=z;Ae.mat4.scale(h,h,[M,M,B]);const te=[...h],he=s.orientation,de=[];if($F(de,[he[0]+g[0],he[1]+g[1],he[2]+g[2]],m),Ae.mat4.multiply(h,te,de),b&&u.elevation){let ie=0;const ve=[];if(O&&u.elevation){ie=function(et,We,Ye,gt,tt){const vt=We.elevation;if(!vt)return 0;const xt=ar.projectAabbCorners(Ye,gt),Ct=Wo(1,tt.lat)*We.worldSize,Dt=function(vr,Ka){const ur=[0,0,1],Mr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const en of Mr){const Br=vr[en.corners[0]],gn=vr[en.corners[1]],Qr=vr[en.corners[2]],Tn=[gn[0]-Br[0],gn[1]-Br[1],Ka*(gn[2]-Br[2])],Wn=Ae.vec3.cross(Tn,Tn,[Qr[0]-Br[0],Qr[1]-Br[1],Ka*(Qr[2]-Br[2])]);Ae.vec3.normalize(Wn,Wn),en.dotProductWithUp=Ae.vec3.dot(Wn,ur)}return Mr.sort((en,Br)=>en.dotProductWithUp-Br.dotProductWithUp),Mr[0].corners}(xt,Ct),Nt=xt[Dt[0]],jt=xt[Dt[1]],Lt=xt[Dt[2]],qt=xt[Dt[3]],Aa=vt.getAtPointOrZero(new o(Nt[0]/We.worldSize,Nt[1]/We.worldSize),0),ga=vt.getAtPointOrZero(new o(jt[0]/We.worldSize,jt[1]/We.worldSize),0),Qa=vt.getAtPointOrZero(new o(Lt[0]/We.worldSize,Lt[1]/We.worldSize),0),Pa=vt.getAtPointOrZero(new o(qt[0]/We.worldSize,qt[1]/We.worldSize),0),za=(Aa+Pa)/2,wa=(ga+Qa)/2;return za>wa?ga<Qa?pS(et,jt,qt,Nt,ga,Pa,Aa,Ct):pS(et,Lt,Nt,qt,Qa,Aa,Pa,Ct):Aa<Pa?pS(et,Nt,jt,Lt,Aa,ga,Qa,Ct):pS(et,qt,Lt,jt,Pa,Qa,ga,Ct),Math.max(za,wa)}(ve,u,s.aabb,h,f);const be=Ae.mat4.fromQuat([],ve),Oe=Ae.mat4.multiply([],be,de);Ae.mat4.multiply(h,te,Oe)}else ie=u.elevation.getAtPointOrZero(new o(V.x/J,V.y/J),0);ie!==0&&(h[14]+=ie)}}function _w(h,s,u=!1){h.uploaded||(h.gfxTexture=new VE(s,h.image,u?s.gl.R8:s.gl.RGBA8,{useMipmap:h.sampler.minFilter>=s.gl.NEAREST_MIPMAP_NEAREST}),h.uploaded=!0,h.image=null)}function are(h,s,u){h.indexBuffer=s.createIndexBuffer(h.indexArray,!1,!0),h.vertexBuffer=s.createVertexBuffer(h.vertexArray,Wae.members,!1,!0),h.normalArray&&(h.normalBuffer=s.createVertexBuffer(h.normalArray,Qae.members,!1,!0)),h.texcoordArray&&(h.texcoordBuffer=s.createVertexBuffer(h.texcoordArray,Jae.members,!1,!0)),h.colorArray&&(h.colorBuffer=s.createVertexBuffer(h.colorArray,(h.colorArray.bytesPerElement===12?Yae:Xae).members,!1,!0)),h.featureArray&&(h.pbrBuffer=s.createVertexBuffer(h.featureArray,tre.members,!0)),h.segments=Li.simpleSegment(0,0,h.vertexArray.length,h.indexArray.length);const f=h.material;f.pbrMetallicRoughness.baseColorTexture&&_w(f.pbrMetallicRoughness.baseColorTexture,s),f.pbrMetallicRoughness.metallicRoughnessTexture&&_w(f.pbrMetallicRoughness.metallicRoughnessTexture,s),f.normalTexture&&_w(f.normalTexture,s),f.occlusionTexture&&_w(f.occlusionTexture,s,u),f.emissionTexture&&_w(f.emissionTexture,s)}function LE(h,s,u){if(h.meshes)for(const f of h.meshes)are(f,s,u);if(h.children)for(const f of h.children)LE(f,s,u)}function gS(h){if(h.meshes)for(const s of h.meshes)s.indexArray.destroy(),s.vertexArray.destroy(),s.colorArray&&s.colorArray.destroy(),s.normalArray&&s.normalArray.destroy(),s.texcoordArray&&s.texcoordArray.destroy(),s.featureArray&&s.featureArray.destroy();if(h.children)for(const s of h.children)gS(s)}function FE(h){if(h.meshes)for(const u of h.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((s=u.material).pbrMetallicRoughness.baseColorTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),s.pbrMetallicRoughness.metallicRoughnessTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),s.normalTexture&&s.normalTexture.gfxTexture&&s.normalTexture.gfxTexture.destroy(),s.emissionTexture&&s.emissionTexture.gfxTexture&&s.emissionTexture.gfxTexture.destroy(),s.occlusionTexture&&s.occlusionTexture.gfxTexture&&s.occlusionTexture.gfxTexture.destroy()));var s;if(h.children)for(const u of h.children)FE(u)}class x0{constructor(s,u,f){this._demTile=s,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(s,u,f){const g=f||s.findDEMTileFor(u);if(!g||!g.dem)return;const m=g.dem,_=g.tileID,b=1<<u.canonical.z-_.canonical.z;return new x0(g,m.dim/Va/b,[(u.canonical.x/b-_.canonical.x)*m.dim,(u.canonical.y/b-_.canonical.y)*m.dim])}tileCoordToPixel(s,u){const f=u*this._scale+this._offset[1],g=Math.floor(s*this._scale+this._offset[0]),m=Math.floor(f);return new It(g,m)}getElevationAt(s,u,f,g){const m=s*this._scale+this._offset[0],_=u*this._scale+this._offset[1],b=Math.floor(m),O=Math.floor(_),D=this._dem;return g=!!g,f?mr(mr(D.get(b,O,g),D.get(b,O+1,g),_-O),mr(D.get(b+1,O,g),D.get(b+1,O+1,g),_-O),m-b):D.get(b,O,g)}getElevationAtPixel(s,u,f){return this._dem.get(s,u,!!f)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Wo(1,s)*this._dem.stride}}const kE=new Float32Array(262144),HA=new Uint8Array(262144);function ak(h){let s=0;if(h.meshes)for(const u of h.meshes)s=Math.max(s,u.aabb.max[2]);if(h.children)for(const u of h.children)s=Math.max(s,ak(u));return s}function rk(h,s,u){if(h.meshes)for(const f of h.meshes){if(f.aabb.min[0]===1/0)continue;const g=ar.applyTransform(f.aabb,h.matrix);u.insert(s,g.min[0],g.min[1],g.max[0],g.max[1])}if(h.children)for(const f of h.children)rk(f,s,u)}const nk=["","wall","door","roof","window","lamp","logo"];class ik{constructor(s){this.node=s,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:s.id,geometry:[],properties:{height:ak(s)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new ar([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let s=0;const u=new ar([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==s&&(f.transformedAabb=ar.applyTransformFast(f.aabb,this.node.matrix),u.encapsulate(f.transformedAabb)),s++;this.aabb=u}return this.aabb}}class yS{constructor(s,u,f,g,m,_,b){this.id=f,this.layers=s,this.layerIds=this.layers.map(O=>O.fqid),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.modelTraits|=b0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=b0.HasMapboxMeshFeatures),m&&(this.modelTraits|=b0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=_,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const O of u)this.nodesInfo.push(new ik(O)),rk(O,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(s,u){for(const f of this.getNodesInfo()){const g=f.node;g.footprint&&u.push({footprint:g.footprint,id:s})}}update(s){const u=Object.keys(s).length!==0;if(u&&!this.stateDependentLayers.length)return;const f=u?this.stateDependentLayers:this.layers;if(!Ht(s,this.states))for(const g of f)this.evaluate(g,s);this.states=structuredClone(s)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(s){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const f of u){const g=f.node;this.uploaded?this.updatePbrBuffer(g):LE(g,s,!0)}for(const f of u)gS(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(s){let u=!1;if(!s.meshes)return u;for(const f of s.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),u=!0);return u}needsReEvaluation(s,u,f){const g=s.transform.projectionOptions,m=s.style.getBrightness(),_=this.brightness!==m;if(!this.uploaded||this.dirty||g.name!==this.projection.name||ww(f.paint.get("model-color").value,_)||ww(f.paint.get("model-color-mix-intensity").value,_)||ww(f.paint.get("model-roughness").value,_)||ww(f.paint.get("model-emissive-strength").value,_)||ww(f.paint.get("model-height-based-emissive-strength-multiplier").value,_)){this.projection=g,this.brightness=m;const b=this.getNodesInfo();for(const O of b)O.state=null;return!0}return!1}evaluateScale(s,u){if(s.transform.zoom===this.zoom)return;this.zoom=s.transform.zoom;const f=this.getNodesInfo(),g=this.id.canonical;for(const m of f){const _=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(_,{},g)}}evaluate(s,u){const f=this.getNodesInfo();for(const g of f){if(!g.node.meshes)continue;const m=g.feature,_=u&&u[m.id];if(Ht(_,g.state))continue;g.state=structuredClone(_);const b=g.node.meshes&&g.node.meshes[0].featureData,O=g.evaluatedColor[2],D=g.evaluatedRMEA[2],C=this.id.canonical;if(g.hasTranslucentParts=!1,b){for(let V=0;V<nk.length;V++){const I=nk[V];I.length&&(m.properties.part=I);const z=s.paint.get("model-color").evaluate(m,_,C).toRenderColor(null),M=s.paint.get("model-color-mix-intensity").evaluate(m,_,C);g.evaluatedColor[V]=[z.r,z.g,z.b,M],g.evaluatedRMEA[V][0]=s.paint.get("model-roughness").evaluate(m,_,C),g.evaluatedRMEA[V][2]=s.paint.get("model-emissive-strength").evaluate(m,_,C),g.evaluatedRMEA[V][3]=z.a,g.emissionHeightBasedParams[V]=s.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,_,C),!g.hasTranslucentParts&&z.a<1&&(g.hasTranslucentParts=!0)}delete m.properties.part,nre(g,O!==g.evaluatedColor[2]||D!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=s.paint.get("model-emissive-strength").evaluate(m,_,C);g.evaluatedScale=s.paint.get("model-scale").evaluate(m,_,C),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(s,u,f,g){const m=s.findDEMTileFor(f);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const _=x0.create(s,f,m);if(!_)return;this.modelTraits&b0.HasMapboxMeshFeatures&&this.updateDEM(s,_,f,g);for(const b of this.getNodesInfo()){const O=b.node;if(!O.footprint||!O.footprint.vertices||!O.footprint.vertices.length)continue;const D=O.footprint.vertices;let C=_.getElevationAt(D[0].x,D[0].y,!0,!0);for(let V=1;V<D.length;V++)C=Math.min(C,_.getElevationAt(D[V].x,D[V].y,!0,!0));O.elevation=C}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(s,u,f,g){let m=u._dem._modifiedForSources[g];if(m===void 0&&(u._dem._modifiedForSources[g]=[],m=u._dem._modifiedForSources[g]),m.includes(f.canonical))return;const _=u._dem.dim;m.push(f.canonical);let b=!1;for(const O of this.getNodesInfo()){const D=O.node;if(!D.footprint||!D.footprint.grid)continue;const C=D.footprint.grid,V=u.tileCoordToPixel(C.min.x,C.min.y),I=u.tileCoordToPixel(C.max.x,C.max.y),z=Math.min(Math.min(_-I.y,V.x),Math.min(V.y,_-I.x));if(z<0)continue;const M=ka(z,2,5);let B=Math.max(0,V.x-M),J=Math.max(0,V.y-M),te=Math.min(I.x+M,_-1),he=Math.min(I.y+M,_-1);for(let be=J;be<=he;++be)for(let Oe=B;Oe<=te;++Oe)HA[be*_+Oe]=255;let de=0,ie=0;for(let be=0;be<C.cellsY;++be)for(let Oe=0;Oe<C.cellsX;++Oe){if(!C.cells[be*C.cellsX+Oe])continue;const et=u.tileCoordToPixel(C.min.x+Oe/C.xScale,C.min.y+be/C.yScale),We=u.tileCoordToPixel(C.min.x+(Oe+1)/C.xScale,C.min.y+(be+1)/C.yScale);for(let Ye=et.y;Ye<=Math.min(We.y+1,_-1);++Ye)for(let gt=et.x;gt<=Math.min(We.x+1,_-1);++gt)HA[Ye*_+gt]===255&&(HA[Ye*_+gt]=0,de+=u.getElevationAtPixel(gt,Ye),ie++)}const ve=de/ie;B=Math.max(1,V.x-M),J=Math.max(1,V.y-M),te=Math.min(I.x+M,_-2),he=Math.min(I.y+M,_-2),b=!0;for(let be=J;be<=he;++be)for(let Oe=B;Oe<=te;++Oe)HA[be*_+Oe]===0&&(kE[be*_+Oe]=u._dem.set(Oe,be,ve));for(let be=1;be<M;++be){B=Math.max(1,V.x-be),J=Math.max(1,V.y-be),te=Math.min(I.x+be,_-2),he=Math.min(I.y+be,_-2);for(let Oe=J;Oe<=he;++Oe)for(let et=B;et<=te;++et){const We=Oe*_+et;if(HA[We]===255){let Ye=0,gt=0,tt=-1,vt=-1;for(let xt=-1;xt<=1;++xt)for(let Ct=-1;Ct<=1;++Ct){const Dt=(Oe+xt)*_+et+Ct;if(HA[Dt]>=be)continue;const Nt=kE[Dt],jt=Math.abs(Nt);jt>gt&&(Ye=Nt,gt=jt,tt=Ct,vt=xt)}if(gt>.1){const xt=1-(be+.5*Math.abs(tt*vt))/M;let Ct=u._dem.get(et,Oe)+Ye*xt;const Dt=u._dem.get(et+tt,Oe+vt),Nt=u._dem.get(et-tt,Oe-vt,!0);(Ct-Dt)*(Ct-Nt)>0&&(Ct=(Dt+Nt)/2),kE[We]=u._dem.set(et,Oe,Ct),HA[We]=be}}}}}b&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=$t.now())}setFilter(s){this.filter=s?Rh(s):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(s=>this.filter.filter(new Rn(this.id.overscaledZ),s.feature,this.id.canonical)):this.nodesInfo}destroy(){const s=this.getNodesInfo();for(const u of s)gS(u.node),FE(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(s.toUnwrapped()),g=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const _=g[m].node;g[m].hiddenByReplacement=!!_.footprint&&!f.find(b=>b.footprint===_.footprint)}}getHeightAtTileCoord(s,u){const f=this.getNodesInfo(),g=[],m=[0,0,0],_=Ae.mat4.identity([]);for(let b=0;b<this.nodesInfo.length;b++){const O=f[b],D=O.node.meshes[0],C=D.transformedAabb;if(s<C.min[0]||u<C.min[1]||s>C.max[0]||u>C.max[1])continue;if(O.node.hidden===!0)return{height:1/0,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};Ae.mat4.invert(_,O.node.matrix),m[0]=s,m[1]=u,Ae.vec3.transformMat4(m,m,_);const V=(m[0]-D.aabb.min[0])/(D.aabb.max[0]-D.aabb.min[0])*qA|0,I=Math.min(63,(m[1]-D.aabb.min[1])/(D.aabb.max[1]-D.aabb.min[1])*qA|0)*qA+Math.min(63,V),z=D.heightmap[I];if(!(z<0&&O.node.footprint))return O.hiddenByReplacement?void 0:{height:z,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};if(O.node.footprint.grid.query(new It(s,u),new It(s,u),g),g.length>0)return{height:void 0,maxHeight:O.feature.properties.height,hidden:O.hiddenByReplacement,verticalScale:O.evaluatedScale[2]}}}}function ww(h,s){return!h.isLightConstant&&s}function rre(h,s,u,f,g,m,_,b){let O=(61440&s|(61440&s)>>4)>>8,D=(3840&s|(3840&s)>>4)>>4,C=240&s|(240&s)>>4;u[3]>0&&(O=mr(O,255*u[0],u[3]),D=mr(D,255*u[1],u[3]),C=mr(C,255*u[2],u[3]));const V=O<<8|D,I=C<<8|Math.floor(255*f[3]),z=function(be){const Oe=ka(be,0,2);return Math.min(Math.round(.5*Oe*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],M=ka(g[0],0,1),B=ka(g[1],0,1),J=ka(g[2],0,1),te=ka(g[3],0,1);let he,de,ie,ve;if(M!==B&&_!==m&&B!==M){const be=_-m;de=1/(be*(B-M)),ie=-(m+be*M)/(be*(B-M));const Oe=ka(g[4],-1,1);ve=Math.pow(10,Oe),he=255*J<<8|255*te}else he=65535,de=0,ie=1,ve=1;if(h.emplaceBack(V,I,z,he,de,ie,ve),b){const be=b.length;b.clear();for(let Oe=0;Oe<be;Oe++)b.emplaceBack(V,I,z,he,de,ie,ve)}}function nre(h,s,u){const f=h.node;let g=0;const m=u&b0.HasMeshoptCompression;for(const _ of f.meshes){if(f.lights&&f.lightMeshIndex===g||!_.featureData)continue;_.featureArray=new sm,_.featureArray.reserve(_.featureData.length);let b=s;for(const O of _.featureData){const D=m?65535&O:O>>16&65535,C=m?O>>16&65535:65535&O,V=(15&C)<8?15&C:0,I=h.evaluatedRMEA[V],z=h.evaluatedColor[V],M=h.emissionHeightBasedParams[V];let B;if(b&&V===2&&f.lights&&(B=new sm,B.resize(10*f.lights.length)),rre(_.featureArray,D,z,I,M,_.aabb.min[2],_.aabb.max[2],B),B&&b){b=!1;const J=f.meshes[f.lightMeshIndex];J.featureArray=B,J.featureArray._trim()}}_.featureArray._trim(),g++}}function sk(h,s,u,f){const g=1<<h.z;s.lat=Si((f/Va+h.y)/g),s.lng=ku((u/Va+h.x)/g)}Pt(yS,"Tiled3dModelBucket",{omit:["layers"]}),Pt(ik,"Tiled3dModelFeature");const ire={circle:class extends lo{constructor(h,s,u,f){super(h,{layout:Ft||(Ft=new Ii({"circle-sort-key":new Ua(Zt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new ba(Zt.layout_circle["circle-elevation-reference"]),visibility:new ba(Zt.layout_circle.visibility)})),paint:sa||(sa=new Ii({"circle-radius":new Ua(Zt.paint_circle["circle-radius"]),"circle-color":new Ua(Zt.paint_circle["circle-color"]),"circle-blur":new Ua(Zt.paint_circle["circle-blur"]),"circle-opacity":new Ua(Zt.paint_circle["circle-opacity"]),"circle-translate":new ba(Zt.paint_circle["circle-translate"]),"circle-translate-anchor":new ba(Zt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ba(Zt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ba(Zt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ua(Zt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ua(Zt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ua(Zt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new ba(Zt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}createBucket(h){return new pe(h)}queryRadius(h){const s=h;return Ut("circle-radius",this,s)+Ut("circle-stroke-width",this,s)+ra(this.paint.get("circle-translate"))}queryIntersectsFeature(h,s,u,f,g,m,_,b){const O=Sa(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(s,u)+this.paint.get("circle-stroke-width").evaluate(s,u);return fm(h,f,m,_,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",O,D)}getProgramIds(){return["circle"]}getDefaultProgramParams(h,s,u){const f=Cp(this);return{config:new rc(this,{zoom:s,lut:u}),defines:f,overrideFog:!1}}},heatmap:class extends lo{createBucket(h){return new e0(h)}constructor(h,s,u,f){super(h,{layout:lg||(lg=new Ii({visibility:new ba(Zt.layout_heatmap.visibility)})),paint:E1||(E1=new Ii({"heatmap-radius":new Ua(Zt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ua(Zt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ba(Zt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new es(Zt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ba(Zt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ty({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(h){return Ut("heatmap-radius",this,h)}queryIntersectsFeature(h,s,u,f,g,m,_,b){const O=this.paint.get("heatmap-radius").evaluate(s,u);return fm(h,f,m,_,b,!0,!0,new It(0,0),O)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(h,s,u){return h==="heatmap"?{config:new rc(this,{zoom:s,lut:u}),overrideFog:!1}:{}}},hillshade:class extends lo{constructor(h,s,u,f){super(h,{layout:N1||(N1=new Ii({visibility:new ba(Zt.layout_hillshade.visibility)})),paint:O1||(O1=new Ii({"hillshade-illumination-direction":new ba(Zt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ba(Zt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ba(Zt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ba(Zt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ba(Zt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ba(Zt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new ba(Zt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(h,s,u){return{overrideFog:!1}}},fill:class extends lo{constructor(h,s,u,f){super(h,{layout:U1||(U1=new Ii({"fill-sort-key":new Ua(Zt.layout_fill["fill-sort-key"]),visibility:new ba(Zt.layout_fill.visibility),"fill-elevation-reference":new ba(Zt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ua(Zt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:B1||(B1=new Ii({"fill-antialias":new ba(Zt.paint_fill["fill-antialias"]),"fill-opacity":new Ua(Zt.paint_fill["fill-opacity"]),"fill-color":new Ua(Zt.paint_fill["fill-color"]),"fill-outline-color":new Ua(Zt.paint_fill["fill-outline-color"]),"fill-translate":new ba(Zt.paint_fill["fill-translate"]),"fill-translate-anchor":new ba(Zt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ua(Zt.paint_fill["fill-pattern"]),"fill-emissive-strength":new ba(Zt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ua(Zt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ua(Zt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ua(Zt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}getProgramIds(){const h=this.paint.get("fill-pattern"),s=h&&h.constantOr(1),u=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(h,s,u){return{config:new rc(this,{zoom:s,lut:u}),overrideFog:!1}}recalculate(h,s){super.recalculate(h,s);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(h){return new ly(h)}queryRadius(){return ra(this.paint.get("fill-translate"))}queryIntersectsFeature(h,s,u,f,g,m){return!h.queryGeometry.isAboveHorizon&&Ve(ca(h.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(h){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const s=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return h!=null?s&&!h:s}},"fill-extrusion":class extends lo{constructor(h,s,u,f){super(h,{layout:A0||(A0=new Ii({visibility:new ba(Zt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new ba(Zt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:aw||(aw=new Ii({"fill-extrusion-opacity":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ua(Zt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new ba(Zt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new m0(h)}queryRadius(){return ra(this.paint.get("fill-extrusion-translate"))}is3D(h){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(h,s,u,f,g,m,_,b,O){const D=Sa(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),C=this.paint.get("fill-extrusion-height").evaluate(s,u),V=this.paint.get("fill-extrusion-base").evaluate(s,u),I=[0,0],z=b&&m.elevation,M=m.elevation?m.elevation.exaggeration():1,B=h.tile.getBucket(this);if(z&&B instanceof m0){const ie=B.centroidVertexArray,ve=O+1;ve<ie.length&&(I[0]=ie.geta_centroid_pos0(ve),I[1]=ie.geta_centroid_pos1(ve))}if(I[0]===0&&I[1]===1)return!1;m.projection.name==="globe"&&(f=tw([f],[new It(0,0),new It(Va,Va)],h.tileID.canonical).map(ie=>ie.polygon).flat());const J=z?b:null,[te,he]=function(ie,ve,be,Oe,et,We,Ye,gt,tt,vt,xt){return ie.projection.name==="globe"?function(Ct,Dt,Nt,jt,Lt,qt,Aa,ga,Qa,Pa,za){const wa=[],vr=[],Ka=Ct.projection.upVectorScale(za,Ct.center.lat,Ct.worldSize).metersToTile,ur=[0,0,0,1],Mr=[0,0,0,1],en=(gn,Qr,Tn,Wn)=>{gn[0]=Qr,gn[1]=Tn,gn[2]=Wn,gn[3]=1},Br=ew();Nt>0&&(Nt+=Br),jt+=Br;for(const gn of Dt){const Qr=[],Tn=[];for(const Wn of gn){const Vi=Wn.x+Lt.x,Fr=Wn.y+Lt.y,Vn=Ct.projection.projectTilePoint(Vi,Fr,za),as=Ct.projection.upVector(za,Wn.x,Wn.y);let ps=Nt,Ts=jt;if(Aa){const Ls=qC(Vi,Fr,Nt,jt,Aa,ga,Qa,Pa);ps+=Ls.base,Ts+=Ls.top}Nt!==0?en(ur,Vn.x+as[0]*Ka*ps,Vn.y+as[1]*Ka*ps,Vn.z+as[2]*Ka*ps):en(ur,Vn.x,Vn.y,Vn.z),en(Mr,Vn.x+as[0]*Ka*Ts,Vn.y+as[1]*Ka*Ts,Vn.z+as[2]*Ka*Ts),Ae.vec3.transformMat4(ur,ur,qt),Ae.vec3.transformMat4(Mr,Mr,qt),Qr.push(new Bu(ur[0],ur[1],ur[2])),Tn.push(new Bu(Mr[0],Mr[1],Mr[2]))}wa.push(Qr),vr.push(Tn)}return[wa,vr]}(ie,ve,be,Oe,et,We,Ye,gt,tt,vt,xt):Ye?function(Ct,Dt,Nt,jt,Lt,qt,Aa,ga,Qa){const Pa=[],za=[],wa=[0,0,0,1];for(const vr of Ct){const Ka=[],ur=[];for(const Mr of vr){const en=Mr.x+jt.x,Br=Mr.y+jt.y,gn=qC(en,Br,Dt,Nt,qt,Aa,ga,Qa);wa[0]=en,wa[1]=Br,wa[2]=gn.base,wa[3]=1,Ae.vec4.transformMat4(wa,wa,Lt),wa[3]=Math.max(wa[3],1e-5);const Qr=new Bu(wa[0]/wa[3],wa[1]/wa[3],wa[2]/wa[3]);wa[0]=en,wa[1]=Br,wa[2]=gn.top,wa[3]=1,Ae.vec4.transformMat4(wa,wa,Lt),wa[3]=Math.max(wa[3],1e-5);const Tn=new Bu(wa[0]/wa[3],wa[1]/wa[3],wa[2]/wa[3]);Ka.push(Qr),ur.push(Tn)}Pa.push(Ka),za.push(ur)}return[Pa,za]}(ve,be,Oe,et,We,Ye,gt,tt,vt):function(Ct,Dt,Nt,jt,Lt){const qt=[],Aa=[],ga=Lt[8]*Dt,Qa=Lt[9]*Dt,Pa=Lt[10]*Dt,za=Lt[11]*Dt,wa=Lt[8]*Nt,vr=Lt[9]*Nt,Ka=Lt[10]*Nt,ur=Lt[11]*Nt;for(const Mr of Ct){const en=[],Br=[];for(const gn of Mr){const Qr=gn.x+jt.x,Tn=gn.y+jt.y,Wn=Lt[0]*Qr+Lt[4]*Tn+Lt[12],Vi=Lt[1]*Qr+Lt[5]*Tn+Lt[13],Fr=Lt[2]*Qr+Lt[6]*Tn+Lt[14],Vn=Lt[3]*Qr+Lt[7]*Tn+Lt[15],as=Wn+ga,ps=Vi+Qa,Ts=Fr+Pa,Ls=Math.max(Vn+za,1e-5),xi=Wn+wa,fl=Vi+vr,zc=Fr+Ka,Co=Math.max(Vn+ur,1e-5);en.push(new Bu(as/Ls,ps/Ls,Ts/Ls)),Br.push(new Bu(xi/Co,fl/Co,zc/Co))}qt.push(en),Aa.push(Br)}return[qt,Aa]}(ve,be,Oe,et,We)}(m,f,V,C,D,_,J,I,M,m.center.lat,h.tileID.canonical),de=h.queryGeometry;return function(ie,ve,be){let Oe=1/0;Ve(be,ve)&&(Oe=ZC(be,ve[0]));for(let et=0;et<ve.length;et++){const We=ve[et],Ye=ie[et];for(let gt=0;gt<We.length-1;gt++){const tt=We[gt],vt=[tt,We[gt+1],Ye[gt+1],Ye[gt],tt];Pe(be,vt)&&(Oe=Math.min(Oe,ZC(be,vt)))}}return Oe!==1/0&&Oe}(te,he,de.isPointQuery()?de.screenBounds:de.screenGeometry)}},line:class extends lo{constructor(h,s,u,f){const g=dw();super(h,g,s,u,f),g.layout&&(this.layout=new zu(g.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(h){if(h==="line-gradient"){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof su,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(h,s){super.recalculate(h,s),this.paint._values["line-floorwidth"]=(()=>{if(pg)return pg;const u=dw();return pg=new jA(u.paint.properties["line-width"].specification),pg.useIntegerZoom=!0,pg})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)}createBucket(h){return new Gf(h)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(h,s,u){const f=KC(this);return{config:new rc(this,{zoom:s,lut:u}),defines:f,overrideFog:!1}}queryRadius(h){const s=h,u=GA(Ut("line-width",this,s),Ut("line-gap-width",this,s)),f=Ut("line-offset",this,s);return u/2+Math.abs(f)+ra(this.paint.get("line-translate"))}queryIntersectsFeature(h,s,u,f,g,m){if(h.queryGeometry.isAboveHorizon)return!1;const _=ca(h.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),b=h.pixelToTileUnitsFactor/2*GA(this.paint.get("line-width").evaluate(s,u),this.paint.get("line-gap-width").evaluate(s,u)),O=this.paint.get("line-offset").evaluate(s,u);return O&&(f=function(D,C){const V=[],I=new It(0,0);for(let z=0;z<D.length;z++){const M=D[z],B=[];for(let J=0;J<M.length;J++){const te=M[J],he=M[J+1],de=J===0?I:te.sub(M[J-1])._unit()._perp(),ie=J===M.length-1?I:he.sub(te)._unit()._perp(),ve=de._add(ie)._unit();ve._mult(1/(ve.x*ie.x+ve.y*ie.y)),B.push(ve._mult(C)._add(te))}V.push(B)}return V}(f,O*h.pixelToTileUnitsFactor)),function(D,C,V){for(let I=0;I<C.length;I++){const z=C[I];if(D.length>=3){for(let M=0;M<z.length;M++)if(ut(D,z[M]))return!0}if(Le(D,z,V))return!0}return!1}(_,f,b)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(h){return!this.hasElevatedBuckets}},symbol:uS,background:class extends lo{constructor(h,s,u,f){super(h,{layout:OF||(OF=new Ii({visibility:new ba(Zt.layout_background.visibility)})),paint:VF||(VF=new Ii({"background-pitch-alignment":new ba(Zt.paint_background["background-pitch-alignment"]),"background-color":new ba(Zt.paint_background["background-color"]),"background-pattern":new ba(Zt.paint_background["background-pattern"]),"background-opacity":new ba(Zt.paint_background["background-opacity"]),"background-emissive-strength":new ba(Zt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(h,s,u){return{overrideFog:!1}}is3D(h){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:LF,"raster-particle":GF,sky:class extends lo{constructor(h,s,u,f){super(h,{layout:UF||(UF=new Ii({visibility:new ba(Zt.layout_sky.visibility)})),paint:BF||(BF=new Ii({"sky-type":new ba(Zt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ba(Zt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ba(Zt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ba(Zt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ba(Zt.paint_sky["sky-gradient-radius"]),"sky-gradient":new es(Zt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ba(Zt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ba(Zt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ba(Zt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="sky-gradient"?this._updateColorRamp():h!=="sky-atmosphere-sun"&&h!=="sky-atmosphere-halo-color"&&h!=="sky-atmosphere-color"&&h!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ty({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(h){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=h.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(h,s){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,m=h.style.light,_=m.properties.get("position");return g&&m.properties.get("anchor")==="viewport"&&$r("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?zE(_.azimuthal,90-_.polar,s):zE(f[0],90-f[1],s)}const u=this.paint.get("sky-gradient-center");return zE(u[0],90-u[1],s)}isSky(){return!0}markSkyboxValid(h){this._skyboxInvalidated=!1,this._lightPosition=h.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const h=this.paint.get("sky-type");return h==="atmosphere"?["skyboxCapture","skybox"]:h==="gradient"?["skyboxGradient"]:null}},slot:class extends lo{constructor(h,s,u,f){super(h,{paint:jF||(jF=new Ii({}))},s,null)}},model:class extends lo{constructor(h,s,u,f){super(h,{layout:QF||(QF=new Ii({visibility:new ba(Zt.layout_model.visibility),"model-id":new Ua(Zt.layout_model["model-id"])})),paint:ek||(ek=new Ii({"model-opacity":new Ua(Zt.paint_model["model-opacity"]),"model-rotation":new Ua(Zt.paint_model["model-rotation"]),"model-scale":new Ua(Zt.paint_model["model-scale"]),"model-translation":new Ua(Zt.paint_model["model-translation"]),"model-color":new Ua(Zt.paint_model["model-color"]),"model-color-mix-intensity":new Ua(Zt.paint_model["model-color-mix-intensity"]),"model-type":new ba(Zt.paint_model["model-type"]),"model-cast-shadows":new ba(Zt.paint_model["model-cast-shadows"]),"model-receive-shadows":new ba(Zt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new ba(Zt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ua(Zt.paint_model["model-emissive-strength"]),"model-roughness":new Ua(Zt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ua(Zt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new ba(Zt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new ba(Zt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new IE(h)}getProgramIds(){return["model"]}is3D(h){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(h){return h instanceof yS?Va-1:0}queryIntersectsFeature(h,s,u,f,g,m){if(!this.modelManager)return!1;const _=this.modelManager,b=h.tile.getBucket(this);if(!(b&&b instanceof IE))return!1;for(const O in b.instancesPerModel){const D=b.instancesPerModel[O],C=s.id!==void 0?s.id:s.properties&&s.properties.hasOwnProperty("id")?s.properties.id:void 0;if(D.idToFeaturesIndex.hasOwnProperty(C)){const V=D.features[D.idToFeaturesIndex[C]],I=_.getModel(O,this.scope);if(!I)return!1;let z=Ae.mat4.create();const M=new kn(0,0),B=b.canonical;let J=Number.MAX_VALUE;for(let te=0;te<V.instancedDataCount;++te){const he=16*(V.instancedDataOffset+te),de=D.instancedDataArray.float32,ie=[de[he+4],de[he+5],de[he+6]];sk(B,M,de[he],0|de[he+1]),tk(z,I,m,M,V.rotation,V.scale,ie,!1,!1,!1),m.projection.name==="globe"&&(z=ME(z,m));const ve=Ae.mat4.multiply([],m.projMatrix,z),be=h.queryGeometry,Oe=KF(be.isPointQuery()?be.screenBounds:be.screenGeometry,m,ve,I.aabb);Oe!=null&&(J=Math.min(Oe,J))}return J!==Number.MAX_VALUE&&J}}return!1}_handleOverridablePaintPropertyUpdate(h,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven()||h!=="model-color"&&h!=="model-color-mix-intensity"&&h!=="model-rotation"&&h!=="model-scale"&&h!=="model-translation"&&h!=="model-emissive-strength")}_isPropertyZoomDependent(h){const s=this._transitionablePaint._values[h];return s!=null&&s.value!=null&&s.value.expression!=null&&s.value.expression instanceof ye}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends lo{constructor(h,s,u,f){super(h,{layout:d0||(d0=new Ii({"clip-layer-types":new ba(Zt.layout_clip["clip-layer-types"]),"clip-layer-scope":new ba(Zt.layout_clip["clip-layer-scope"])})),paint:h0||(h0=new Ii({}))},s,u,f)}recalculate(h,s){super.recalculate(h,s)}createBucket(h){return new OC(h)}is3D(h){return!0}}};class sre{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class ore{constructor(){this.tasks={},this.taskQueue=[],Xa(["process"],this),this.invoker=new sre(this.process),this.nextId=0}add(s,u){const f=this.nextId++,g=function({type:m,isSymbolTile:_,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-b:m==="maybePrepare"&&_?400-b:500:200-b:100-b}(u);if(g===0){try{s()}finally{}return null}return this.tasks[f]={fn:s,metadata:u,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const s=this.pick();if(s===null)return;const u=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let s=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const m=this.tasks[this.taskQueue[g]];m.priority<u&&(u=m.priority,s=g)}if(s===null)return null;const f=this.taskQueue[s];return this.taskQueue.splice(s,1),f}remove(){this.invoker.remove()}}class ok{constructor(s,u,f){this.target=s,this.parent=u,this.mapId=f,this.callbacks={},this.cancelCallbacks={},Xa(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new ore}send(s,u,f,g,m=!1,_){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=_,this.callbacks[b]=f);const O=new Set;return this.target.postMessage({id:b,type:s,hasCallback:!!f,targetMapId:g,mustQueue:m,sourceMapId:this.mapId,data:Ra(u,O)},O),{cancel:()=>{f&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(s){const u=s.data;if(!u)return;const f=u.id;if(f&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const g=this.cancelCallbacks[f];delete this.cancelCallbacks[f],g&&g.cancel()}else if(u.mustQueue||Ui()){const g=this.callbacks[f],m=this.scheduler.add(()=>this.processTask(f,u),g&&g.metadata||{type:"message"});m&&(this.cancelCallbacks[f]=m)}else this.processTask(f,u)}processTask(s,u){if(delete this.cancelCallbacks[s],u.type==="<response>"){const f=this.callbacks[s];delete this.callbacks[s],f&&(u.error?f(fa(u.error)):f(null,fa(u.data)))}else{const f=new Set,g=u.hasCallback?(_,b)=>{this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:_?Ra(_):null,data:Ra(b,f)},f)}:()=>{},m=fa(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,g);else if(this.parent.getWorkerSource){const _=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,_[0],m.source,m.scope)[_[1]](m,g)}else g(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Rw={workerUrl:"",workerClass:null,workerParams:void 0};const UE="mapboxgl_preloaded_worker_pool";class $A{constructor(){this.active={}}acquire(s,u=$A.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(Rw.workerClass!=null?new Rw.workerClass:new self.Worker(Rw.workerUrl,Rw.workerParams));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[UE]}numActive(){return Object.keys(this.active).length}}$A.workerCount=2;class P0{constructor(s,u,f="Worker",g=$A.workerCount){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=Wa();const m=this.workerPool.acquire(this.id,g);for(let _=0;_<m.length;_++){const b=new P0.Actor(m[_],u,this.id);b.name=`${f} ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,u,f){Cn(this.actors,(g,m)=>{g.send(s,u,m)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}let Tw,BE;function AS(){return Tw||(Tw=new $A),Tw}P0.Actor=ok;const jE=new En(0,0,0);var GE=(h=>(h[h.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",h[h.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",h[h.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",h))(GE||{}),vS=(h=>(h[h.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",h[h.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",h[h.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",h[h.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",h))(vS||{}),Cw=(h=>(h[h.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",h[h.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",h[h.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",h[h.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",h[h.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",h))(Cw||{}),lk=(h=>(h[h.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",h[h.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",h[h.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",h))(lk||{}),E0=(h=>(h[h.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",h[h.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",h[h.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",h[h.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",h[h.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",h[h.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",h))(E0||{}),uk=(h=>(h[h.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",h[h.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",h[h.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",h))(uk||{});function lre(h,s,u){h===1&&s.icons.push(function(f,g){return function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:_}=m;if(_.content_area){const{content_area:b}=_;b.top==null&&(b.top=b.left),b.width==null&&(b.width=m.usvg_tree.width),b.height==null&&(b.height=b.width)}return _.stretch_x&&_.stretch_x.length&&ck(_,"x"),_.stretch_y&&_.stretch_y.length&&ck(_,"y"),m}(f.readFields(ure,{name:void 0},g))}(u,u.readVarint()+u.pos))}function ck(h,s){const u=[],f=h[`stretch_${s}`];let g=null;for(let m=0;m<f.length;m++)g===null?g=u.length===0?f[0]:u[u.length-1][1]+f[m]:(u.push([g,g+f[m]]),g=null);h[`stretch_${s}_areas`]=u}function ure(h,s,u){h===1?s.name=u.readString():h===2?s.metadata=function(f,g){return f.readFields(cre,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)}(u,u.readVarint()+u.pos):h===3&&(s.usvg_tree=function(f,g){return f.readFields(fre,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)}(u,u.readVarint()+u.pos),s.data="usvg_tree")}function cre(h,s,u){h===1?s.stretch_x=u.readPackedVarint():h===2?s.stretch_y=u.readPackedVarint():h===3?s.content_area=function(f,g){return f.readFields(dre,{left:0},g)}(u,u.readVarint()+u.pos):h===4&&s.variables.push(function(f,g){return f.readFields(hre,{name:void 0},g)}(u,u.readVarint()+u.pos))}function dre(h,s,u){h===1?s.left=u.readVarint():h===2?s.width=u.readVarint():h===3?s.top=u.readVarint():h===4&&(s.height=u.readVarint())}function hre(h,s,u){h===1?s.name=u.readString():h===2&&(s.rgb_color=RS(u.readVarint()),s.value="rgb_color")}function fre(h,s,u){h===1?s.width=s.height=u.readVarint():h===2?s.height=u.readVarint():h===3?s.children.push(_S(u,u.readVarint()+u.pos)):h===4?s.linear_gradients.push(function(f,g){return f.readFields(_re,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)}(u,u.readVarint()+u.pos)):h===5?s.radial_gradients.push(function(f,g){return f.readFields(Rre,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)}(u,u.readVarint()+u.pos)):h===7?s.clip_paths.push(function(f,g){return f.readFields(Tre,{children:[]},g)}(u,u.readVarint()+u.pos)):h===8&&s.masks.push(function(f,g){const m=f.readFields(Cre,{left:0,width:20,mask_type:1,children:[]},g);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m}(u,u.readVarint()+u.pos))}function _S(h,s){return h.readFields(pre,{},s)}function pre(h,s,u){h===1?(s.group=function(f,g){return f.readFields(mre,{opacity:255,children:[]},g)}(u,u.readVarint()+u.pos),s.node="group"):h===2&&(s.path=function(f,g){return f.readFields(yre,{paint_order:1,commands:[],step:1,diffs:[],rule:1},g)}(u,u.readVarint()+u.pos),s.node="path")}function mre(h,s,u){h===1?s.transform=wS(u,u.readVarint()+u.pos):h===2?s.opacity=u.readVarint():h===5?s.clip_path_idx=u.readVarint():h===6?s.mask_idx=u.readVarint():h===7&&s.children.push(_S(u,u.readVarint()+u.pos))}function wS(h,s){return h.readFields(gre,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},s)}function gre(h,s,u){h===1?s.sx=u.readFloat():h===2?s.ky=u.readFloat():h===3?s.kx=u.readFloat():h===4?s.sy=u.readFloat():h===5?s.tx=u.readFloat():h===6&&(s.ty=u.readFloat())}function yre(h,s,u){h===1?s.fill=function(f,g){return f.readFields(Are,{rgb_color:jE,paint:"rgb_color",opacity:255},g)}(u,u.readVarint()+u.pos):h===2?s.stroke=function(f,g){return f.readFields(vre,{rgb_color:jE,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)}(u,u.readVarint()+u.pos):h===3?s.paint_order=u.readVarint():h===5?u.readPackedVarint(s.commands):h===6?s.step=u.readFloat():h===7?u.readPackedSVarint(s.diffs):h===8&&(s.rule=u.readVarint())}function Are(h,s,u){h===1?(s.rgb_color=RS(u.readVarint()),s.paint="rgb_color"):h===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):h===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):h===5&&(s.opacity=u.readVarint())}function RS(h){return new En((h>>16&255)/255,(h>>8&255)/255,(255&h)/255,1)}function vre(h,s,u){h===1?(s.rgb_color=RS(u.readVarint()),s.paint="rgb_color"):h===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):h===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):h===5?u.readPackedFloat(s.dasharray):h===6?s.dashoffset=u.readFloat():h===7?s.miterlimit=u.readFloat():h===8?s.opacity=u.readVarint():h===9?s.width=u.readFloat():h===10?s.linecap=u.readVarint():h===11&&(s.linejoin=u.readVarint())}function _re(h,s,u){h===1?s.transform=wS(u,u.readVarint()+u.pos):h===2?s.spread_method=u.readVarint():h===3?s.stops.push(dk(u,u.readVarint()+u.pos)):h===4?s.x1=u.readFloat():h===5?s.y1=u.readFloat():h===6?s.x2=u.readFloat():h===7&&(s.y2=u.readFloat())}function dk(h,s){return h.readFields(wre,{offset:0,opacity:255,rgb_color:jE},s)}function wre(h,s,u){h===1?s.offset=u.readFloat():h===2?s.opacity=u.readVarint():h===3&&(s.rgb_color=RS(u.readVarint()))}function Rre(h,s,u){h===1?s.transform=wS(u,u.readVarint()+u.pos):h===2?s.spread_method=u.readVarint():h===3?s.stops.push(dk(u,u.readVarint()+u.pos)):h===4?s.cx=u.readFloat():h===5?s.cy=u.readFloat():h===6?s.r=u.readFloat():h===7?s.fx=u.readFloat():h===8?s.fy=u.readFloat():h===9&&(s.fr=u.readFloat())}function Tre(h,s,u){h===1?s.transform=wS(u,u.readVarint()+u.pos):h===2?s.clip_path_idx=u.readVarint():h===3&&s.children.push(_S(u,u.readVarint()+u.pos))}function Cre(h,s,u){h===1?s.left=s.top=u.readFloat():h===2?s.width=s.height=u.readFloat():h===3?s.top=u.readFloat():h===4?s.height=u.readFloat():h===5?s.mask_type=u.readVarint():h===6?s.mask_idx=u.readVarint():h===7&&s.children.push(_S(u,u.readVarint()+u.pos))}class Sre{static calculate(s={},u=[]){const f=new Map,g=new Map;if(Object.keys(s).length===0)return f;u.forEach(m=>{g.set(m.name,m.rgb_color||new En(0,0,0))});for(const[m,_]of Object.entries(s))g.has(m)?f.set(g.get(m).toStringPremultipliedAlpha(),_):console.warn(`Ignoring unknown image variable "${m}"`);return f}}function N0(h,s=255,u){const f=s/255,g=h.toStringPremultipliedAlpha(),m=u.has(g)?u.get(g).clone():h.clone();return m.a*=f,m.toString()}function Sw(h,s){if(!Wt()){const u=document.createElement("canvas");return u.width=h,u.height=s,u}return new OffscreenCanvas(h,s)}function bre(h,s){const u=Sre.calculate(s.params,h.metadata?h.metadata.variables:[]),f=h.usvg_tree,g=f.width,m=f.height,_=s.transform?s.transform:new DOMMatrix,b=Math.max(1,Math.round(g*_.a)),O=Math.max(1,Math.round(m*_.d)),D=new DOMMatrix([b/g,0,0,O/m,0,0]),C=Sw(b,O).getContext("2d");return ZE(C,D,f,f,u),C.getImageData(0,0,b,O)}function ZE(h,s,u,f,g){for(const m of f.children)hk(h,s,u,m,g)}function hk(h,s,u,f,g){f.group?(h.save(),function(m,_,b,O,D){const C=O.mask_idx!=null?b.masks[O.mask_idx]:null,V=O.clip_path_idx!=null?b.clip_paths[O.clip_path_idx]:null;if(O.transform&&(_=TS(O.transform).preMultiplySelf(_)),!function(M,B,J){return M.opacity!==255||B||J}(O,V!=null,C!=null))return void ZE(m,_,b,O,D);const I=Sw(m.canvas.width,m.canvas.height),z=I.getContext("2d");ZE(z,_,b,O,D),V&&vk(z,_,b,V),C&&_k(z,_,b,C,D),m.globalAlpha=O.opacity/255,m.drawImage(I,0,0)}(h,s,u,f.group,g),h.restore()):f.path&&(h.save(),function(m,_,b,O,D){const C=wk(O);m.setTransform(_),O.paint_order===lk.PAINT_ORDER_FILL_AND_STROKE?(fk(m,b,O,C,D),mk(m,b,O,C,D)):(mk(m,b,O,C,D),fk(m,b,O,C,D))}(h,s,u,f.path,g),h.restore())}function fk(h,s,u,f,g){const m=u.fill;if(!m)return;const _=m.opacity/255;switch(m.paint){case"rgb_color":h.fillStyle=N0(m.rgb_color,m.opacity,g);break;case"linear_gradient_idx":h.fillStyle=gk(h,s.linear_gradients[m.linear_gradient_idx],_,g);break;case"radial_gradient_idx":h.fillStyle=yk(h,s.radial_gradients[m.radial_gradient_idx],_,g)}h.fill(f,pk(u))}function pk(h){return h.rule===GE.PATH_RULE_NON_ZERO?"nonzero":h.rule===GE.PATH_RULE_EVEN_ODD?"evenodd":void 0}function mk(h,s,u,f,g){const m=u.stroke;if(!m)return;h.lineWidth=m.width,h.miterLimit=m.miterlimit,h.setLineDash(m.dasharray),h.lineDashOffset=m.dashoffset;const _=m.opacity/255;switch(m.paint){case"rgb_color":h.strokeStyle=N0(m.rgb_color,m.opacity,g);break;case"linear_gradient_idx":h.strokeStyle=gk(h,s.linear_gradients[m.linear_gradient_idx],_,g);break;case"radial_gradient_idx":h.strokeStyle=yk(h,s.radial_gradients[m.radial_gradient_idx],_,g)}switch(m.linejoin){case Cw.LINE_JOIN_MITER_CLIP:case Cw.LINE_JOIN_MITER:h.lineJoin="miter";break;case Cw.LINE_JOIN_ROUND:h.lineJoin="round";break;case Cw.LINE_JOIN_BEVEL:h.lineJoin="bevel"}switch(m.linecap){case vS.LINE_CAP_BUTT:h.lineCap="butt";break;case vS.LINE_CAP_ROUND:h.lineCap="round";break;case vS.LINE_CAP_SQUARE:h.lineCap="square"}h.stroke(f)}function gk(h,s,u,f){if(s.stops.length===1){const I=s.stops[0];return N0(I.rgb_color,I.opacity*u,f)}const g=TS(s.transform),{x1:m,y1:_,x2:b,y2:O}=s,D=g.transformPoint(new DOMPoint(m,_)),C=g.transformPoint(new DOMPoint(b,O)),V=h.createLinearGradient(D.x,D.y,C.x,C.y);for(const I of s.stops)V.addColorStop(I.offset,N0(I.rgb_color,I.opacity*u,f));return V}function yk(h,s,u,f){if(s.stops.length===1){const I=s.stops[0];return N0(I.rgb_color,I.opacity*u,f)}const g=TS(s.transform),{fx:m,fy:_,cx:b,cy:O}=s,D=g.transformPoint(new DOMPoint(m,_)),C=g.transformPoint(new DOMPoint(b,O)),V=h.createRadialGradient(D.x,D.y,0,C.x,C.y,s.r*((g.a+g.d)/2));for(const I of s.stops)V.addColorStop(I.offset,N0(I.rgb_color,I.opacity*u,f));return V}function Ak(h,s,u,f){const g=f.transform?TS(f.transform).preMultiplySelf(s):s,m=Sw(h.canvas.width,h.canvas.height),_=m.getContext("2d");for(const O of f.children)if(O.group)Ak(_,g,u,O.group);else if(O.path){const D=O.path,C=new Path2D;C.addPath(wk(D),g),_.fill(C,pk(D))}const b=f.clip_path_idx!=null?u.clip_paths[f.clip_path_idx]:null;b&&vk(_,g,u,b),h.globalCompositeOperation="source-over",h.drawImage(m,0,0)}function vk(h,s,u,f){const g=Sw(h.canvas.width,h.canvas.height);Ak(g.getContext("2d"),s,u,f),h.globalCompositeOperation="destination-in",h.drawImage(g,0,0)}function _k(h,s,u,f,g){if(f.children.length===0)return;const m=f.mask_idx!=null?u.masks[f.mask_idx]:null;m&&_k(h,s,u,m,g);const _=h.canvas.width,b=h.canvas.height,O=Sw(_,b),D=O.getContext("2d"),C=f.width,V=f.height,I=f.left,z=f.top,M=new Path2D,B=new Path2D;B.rect(I,z,C,V),M.addPath(B,s),D.clip(M);for(const he of f.children)hk(D,s,u,he,g);const J=D.getImageData(0,0,_,b),te=J.data;if(f.mask_type===uk.MASK_TYPE_LUMINANCE)for(let he=0;he<te.length;he+=4)te[he+3]=te[he+3]/255*(.2126*te[he]+.7152*te[he+1]+.0722*te[he+2]);D.putImageData(J,0,0),h.globalCompositeOperation="destination-in",h.drawImage(O,0,0)}function TS(h){return h?new DOMMatrix([h.sx,h.ky,h.kx,h.sy,h.tx,h.ty]):new DOMMatrix}function wk(h){const s=new Path2D,u=h.step;let f=h.diffs[0]*u,g=h.diffs[1]*u;s.moveTo(f,g);for(let m=0,_=2;m<h.commands.length;m++)switch(h.commands[m]){case E0.PATH_COMMAND_MOVE:f+=h.diffs[_++]*u,g+=h.diffs[_++]*u,s.moveTo(f,g);break;case E0.PATH_COMMAND_LINE:f+=h.diffs[_++]*u,g+=h.diffs[_++]*u,s.lineTo(f,g);break;case E0.PATH_COMMAND_QUAD:{const b=f+h.diffs[_++]*u,O=g+h.diffs[_++]*u;f=b+h.diffs[_++]*u,g=O+h.diffs[_++]*u,s.quadraticCurveTo(b,O,f,g);break}case E0.PATH_COMMAND_CUBIC:{const b=f+h.diffs[_++]*u,O=g+h.diffs[_++]*u,D=b+h.diffs[_++]*u,C=O+h.diffs[_++]*u;f=D+h.diffs[_++]*u,g=C+h.diffs[_++]*u,s.bezierCurveTo(b,O,D,C,f,g);break}case E0.PATH_COMMAND_CLOSE:s.closePath()}return s}class CS{constructor(s){this.capacity=s,this.cache=new Map}get(s){if(!this.cache.has(s))return;const u=this.cache.get(s);return this.cache.delete(s),this.cache.set(s,u),u}put(s,u){this.cache.has(s)?this.cache.delete(s):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(s,u)}delete(s){this.cache.delete(s)}}Pt(CS,"LRUCache");class qE{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(s){return new bl(s,s.data)}getFromCache(s,u,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new CS(150)),this.cacheMap.get(f).get(td(s.toString(),u))}setInCache(s,u,f,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new CS(150));const m=this.cacheDependenciesMap.get(g),_=td(s.id.toString(),f);m.get(_)||m.set(_,new Set);const b=this.cacheMap.get(g),O=s.toString();m.get(_).add(O),b.put(td(s.toString(),f),u)}removeImagesFromCacheByIds(s,u,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const g=this.cacheMap.get(f),m=this.cacheDependenciesMap.get(f);for(const _ of s){const b=td(_.toString(),u);if(m.has(b)){for(const O of m.get(b))g.delete(O);m.delete(b)}}}rasterize(s,u,f,g,m=bre){const _=this.getFromCache(s,f,g);if(_)return _.clone();const b=m(u.icon,s.options),O=qE._getImage(b);return this.setInCache(s,O,f,g),O.clone()}}class Rk{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,u){const f=this.toIdx(s,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(s,u){return this.leaves[this.toIdx(s,u)]}toIdx(s,u){return u*this.size+s}}function Tk(h,s,u,f){let g=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(f[_])<1e-15){if(u[_]<h[_]||u[_]>s[_])return null}else{const b=1/f[_];let O=(h[_]-u[_])*b,D=(s[_]-u[_])*b;if(O>D){const C=O;O=D,D=C}if(O>g&&(g=O),D<m&&(m=D),g>m)return null}return g}function Ck(h,s,u,f,g,m,_,b,O,D,C){const V=f-h,I=g-s,z=m-u,M=_-h,B=b-s,J=O-u,te=C[1]*J-C[2]*B,he=C[2]*M-C[0]*J,de=C[0]*B-C[1]*M,ie=V*te+I*he+z*de;if(Math.abs(ie)<1e-15)return null;const ve=1/ie,be=D[0]-h,Oe=D[1]-s,et=D[2]-u,We=(be*te+Oe*he+et*de)*ve;if(We<0||We>1)return null;const Ye=Oe*z-et*I,gt=et*V-be*z,tt=be*I-Oe*V,vt=(C[0]*Ye+C[1]*gt+C[2]*tt)*ve;return vt<0||We+vt>1?null:(M*Ye+B*gt+J*tt)*ve}function Sk(h,s,u){return(h-s)/(u-s)}function bk(h,s,u,f,g,m,_,b,O){const D=1<<u,C=m-f,V=_-g,I=(h+1)/D*C+f,z=(s+0)/D*V+g,M=(s+1)/D*V+g;b[0]=(h+0)/D*C+f,b[1]=z,O[0]=I,O[1]=M}class xk{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(m){const _=Math.ceil(Math.log2(m.dim/8)),b=[];let O=Math.ceil(Math.pow(2,_));const D=1/O,C=(z,M,B,J,te)=>{const he=J?1:0,de=(z+1)*B-he,ie=M*B,ve=(M+1)*B-he;te[0]=z*B,te[1]=ie,te[2]=de,te[3]=ve};let V=new Rk(O);const I=[];for(let z=0;z<O*O;z++){C(z%O,Math.floor(z/O),D,!1,I);const M=Ay(I[0],I[1],m),B=Ay(I[2],I[1],m),J=Ay(I[2],I[3],m),te=Ay(I[0],I[3],m);V.minimums.push(Math.min(M,B,J,te)),V.maximums.push(Math.max(M,B,J,te)),V.leaves.push(1)}for(b.push(V),O/=2;O>=1;O/=2){const z=b[b.length-1];V=new Rk(O);for(let M=0;M<O*O;M++){C(M%O,Math.floor(M/O),2,!0,I);const B=z.getElevation(I[0],I[1]),J=z.getElevation(I[2],I[1]),te=z.getElevation(I[2],I[3]),he=z.getElevation(I[0],I[3]),de=z.isLeaf(I[0],I[1]),ie=z.isLeaf(I[2],I[1]),ve=z.isLeaf(I[2],I[3]),be=z.isLeaf(I[0],I[3]),Oe=Math.min(B.min,J.min,te.min,he.min),et=Math.max(B.max,J.max,te.max,he.max),We=de&&ie&&ve&&be;V.maximums.push(et),V.minimums.push(Oe),V.leaves.push(et-Oe<=5&&We?1:0)}b.push(V)}return b}(this.dem),f=u.length-1,g=u[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(s,u,f,g,m,_,b=1){return Tk([s,u,-100],[f,g,this.maximums[0]*b],m,_)}raycast(s,u,f,g,m,_,b=1){if(!this.nodeCount)return null;const O=this.raycastRoot(s,u,f,g,m,_,b);if(O==null)return null;const D=[],C=[],V=[],I=[],z=[{idx:0,t:O,nodex:0,nodey:0,depth:0}];for(;z.length>0;){const{idx:M,t:B,nodex:J,nodey:te,depth:he}=z.pop();if(this.leaves[M]){bk(J,te,he,s,u,f,g,V,I);const ie=1<<he,ve=(J+0)/ie,be=(J+1)/ie,Oe=(te+0)/ie,et=(te+1)/ie,We=Ay(ve,Oe,this.dem)*b,Ye=Ay(be,Oe,this.dem)*b,gt=Ay(be,et,this.dem)*b,tt=Ay(ve,et,this.dem)*b,vt=Ck(V[0],V[1],We,I[0],V[1],Ye,I[0],I[1],gt,m,_),xt=Ck(I[0],I[1],gt,V[0],I[1],tt,V[0],V[1],We,m,_),Ct=Math.min(vt!==null?vt:Number.MAX_VALUE,xt!==null?xt:Number.MAX_VALUE);if(Ct!==Number.MAX_VALUE)return Ct;{const Dt=Ae.vec3.scaleAndAdd([],m,_,B);if(Pk(We,Ye,tt,gt,Sk(Dt[0],V[0],I[0]),Sk(Dt[1],V[1],I[1]))>=Dt[2])return B}continue}let de=0;for(let ie=0;ie<this._siblingOffset.length;ie++){bk((J<<1)+this._siblingOffset[ie][0],(te<<1)+this._siblingOffset[ie][1],he+1,s,u,f,g,V,I),V[2]=-100,I[2]=this.maximums[this.childOffsets[M]+ie]*b;const ve=Tk(V,I,m,_);if(ve!=null){const be=ve;D[ie]=be;let Oe=!1;for(let et=0;et<de&&!Oe;et++)be>=D[C[et]]&&(C.splice(et,0,ie),Oe=!0);Oe||(C[de]=ie),de++}}for(let ie=0;ie<de;ie++){const ve=C[ie];z.push({idx:this.childOffsets[M]+ve,t:D[ve],nodex:(J<<1)+this._siblingOffset[ve][0],nodey:(te<<1)+this._siblingOffset[ve][1],depth:he+1})}}return null}_addNode(s,u,f){return this.minimums.push(s),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(s,u,f,g,m){if(s[g].isLeaf(u,f)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=g-1,b=s[_];let O=0,D=0;for(let C=0;C<this._siblingOffset.length;C++){const V=2*u+this._siblingOffset[C][0],I=2*f+this._siblingOffset[C][1],z=b.getElevation(V,I),M=b.isLeaf(V,I),B=this._addNode(z.min,z.max,M);M&&(O|=1<<C),D||(D=B)}for(let C=0;C<this._siblingOffset.length;C++)O&1<<C||this._construct(s,2*u+this._siblingOffset[C][0],2*f+this._siblingOffset[C][1],_,D+C)}}function Pk(h,s,u,f,g,m){return mr(mr(h,u,m),mr(s,f,m),g)}function Ay(h,s,u){const f=u.dim,g=ka(h*f-.5,0,f-1),m=ka(s*f-.5,0,f-1),_=Math.floor(g),b=Math.floor(m),O=Math.min(_+1,f-1),D=Math.min(b+1,f-1);return Pk(u.get(_,b),u.get(O,b),u.get(_,D),u.get(O,D),g-_,m-b)}const xre={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Pre(h,s,u){return(256*h*256+256*s+u)/10-1e4}function Ere(h,s,u){return 256*h+s+u/256-32768}class SS{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,u,f,g=!1){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void $r(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,_=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let O=0;O<m;O++)_[this._idx(-1,O)]=_[this._idx(0,O)],_[this._idx(m,O)]=_[this._idx(m-1,O)],_[this._idx(O,-1)]=_[this._idx(O,0)],_[this._idx(O,m)]=_[this._idx(O,m-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(m,-1)]=_[this._idx(m-1,0)],_[this._idx(-1,m)]=_[this._idx(0,m-1)],_[this._idx(m,m)]=_[this._idx(m-1,m-1)]}const b=f==="terrarium"?Ere:Pre;for(let O=0;O<_.length;++O){const D=4*O;this.floatView[O]=b(this.pixels[D],this.pixels[D+1],this.pixels[D+2])}this._timestamp=$t.now()}_buildQuadTree(){this._tree=new xk(this)}get(s,u,f=!1){f&&(s=ka(s,-1,this.dim),u=ka(u,-1,this.dim));const g=this._idx(s,u);return this.floatView[g]}set(s,u,f){const g=this._idx(s,u),m=this.floatView[g];return this.floatView[g]=f,f-m}static getUnpackVector(s){return xre[s]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}static pack(s,u){const f=[0,0,0,0],g=SS.getUnpackVector(u);let m=Math.floor((s+g[3])/g[2]);return f[2]=m%256,m=Math.floor(m/256),f[1]=m%256,m=Math.floor(m/256),f[0]=m,f}getPixels(){return new z1({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,u,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,m=u*this.dim+this.dim,_=f*this.dim,b=f*this.dim+this.dim;switch(u){case-1:g=m-1;break;case 1:m=g+1}switch(f){case-1:_=b-1;break;case 1:b=_+1}const O=-u*this.dim,D=-f*this.dim;for(let C=_;C<b;C++)for(let V=g;V<m;V++){const I=4*this._idx(V,C),z=4*this._idx(V+O,C+D);this.pixels[I+0]=s.pixels[z+0],this.pixels[I+1]=s.pixels[z+1],this.pixels[I+2]=s.pixels[z+2],this.pixels[I+3]=s.pixels[z+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Nre(h,s,u){h===1?s.headerLength=u.readFixed32():h===2?s.x=u.readVarint():h===3?s.y=u.readVarint():h===4?s.z=u.readVarint():h===5&&s.layers.push(function(f,g){return f.readFields(Mre,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)}(u,u.readVarint()+u.pos))}function Ore(h,s,u){h===1?(s.delta_filter=function(f,g){return f.readFields(Vre,{blockSize:0},g)}(u,u.readVarint()+u.pos),s.filter="delta_filter"):h===2?(u.readVarint(),s.filter="zigzag_filter"):h===3?(u.readVarint(),s.filter="bitshuffle_filter"):h===4&&(u.readVarint(),s.filter="byteshuffle_filter")}function Vre(h,s,u){h===1&&(s.blockSize=u.readVarint())}function zre(h,s,u){h===1?(u.readVarint(),s.codec="gzip_data"):h===2?(u.readVarint(),s.codec="jpeg_image"):h===3?(u.readVarint(),s.codec="webp_image"):h===4&&(u.readVarint(),s.codec="png_image")}function Dre(h,s,u){let f=0,g=0;h===1?s.firstByte=u.readFixed64():h===2?s.lastByte=u.readFixed64():h===3?s.filters.push(function(m,_){return m.readFields(Ore,{},_)}(u,u.readVarint()+u.pos)):h===4?s.codec=function(m,_){return m.readFields(zre,{},_)}(u,u.readVarint()+u.pos):h===5?g=u.readFloat():h===6?f=u.readFloat():h===7?s.bands.push(u.readString()):h===8?s.offset=u.readDouble():h===9&&(s.scale=u.readDouble()),s.offset===0&&(s.offset=g),s.scale===0&&(s.scale=f)}function Mre(h,s,u){h===1?s.version=u.readVarint():h===2?s.name=u.readString():h===3?s.units=u.readString():h===4?s.tileSize=u.readVarint():h===5?s.buffer=u.readVarint():h===6?s.pixelFormat=u.readVarint():h===7&&s.dataIndex.push(function(f,g){return f.readFields(Dre,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)}(u,u.readVarint()+u.pos))}function Ire(h,s,u){if(h===2)(function(f,g,m){f.readFields(Lre,m,g)})(u,u.readVarint()+u.pos,s);else if(h===3)throw new Error("Not implemented")}function Lre(h,s,u){if(h===1){let f=0;const g=u.readVarint()+u.pos;for(;u.pos<g;)s[f++]=u.readVarint()}}function Fre(h,s){if(s.length!==4)throw new Error(`Expected data of dimension 4 but got ${s.length}.`);let u=s[3];for(let f=2;f>=1;f--){const g=f===1?1:0,m=f===2?1:0;for(let _=0;_<s[0];_++){const b=s[1]*_;for(let O=g;O<s[1];O++){const D=s[2]*(O+b);for(let C=m;C<s[2];C++){const V=s[3]*(C+D);for(let I=0;I<s[3];I++){const z=V+I;h[z]+=h[z-u]}}}}u*=s[f]}return h}function kre(h){for(let s=0,u=h.length;s<u;s++)h[s]=h[s]>>>1^-(1&h[s]);return h}function Ure(h,s){switch(s){case"uint32":return h;case"uint16":for(let u=0;u<h.length;u+=2){const f=h[u],g=h[u+1];h[u]=(240&f)>>4|(61440&f)>>8|(240&g)<<4|61440&g,h[u+1]=15&f|(3840&f)>>4|(15&g)<<8|(3840&g)<<4}return h;case"uint8":for(let u=0;u<h.length;u+=4){const f=h[u],g=h[u+1],m=h[u+2],_=h[u+3];h[u+0]=(192&f)>>6|(192&g)>>4|(192&m)>>2|192&_,h[u+1]=(48&f)>>4|(48&g)>>2|48&m|(48&_)<<2,h[u+2]=(12&f)>>2|12&g|(12&m)<<2|(12&_)<<4,h[u+3]=3&f|(3&g)<<2|(3&m)<<4|(3&_)<<6}return h;default:throw new Error(`Invalid pixel format, "${s}"`)}}Pt(SS,"DEMData"),Pt(xk,"DemMinMaxQuadTree",{omit:["dem"]});var sf=Uint8Array,bw=Uint16Array,Bre=Int32Array,Ek=new sf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nk=new sf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jre=new sf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ok=function(h,s){for(var u=new bw(31),f=0;f<31;++f)u[f]=s+=1<<h[f-1];var g=new Bre(u[30]);for(f=1;f<30;++f)for(var m=u[f];m<u[f+1];++m)g[m]=m-u[f]<<5|f;return{b:u,r:g}},Vk=Ok(Ek,2),zk=Vk.b,Gre=Vk.r;zk[28]=258,Gre[258]=28;for(var Zre=Ok(Nk,0).b,Dk=new bw(32768),Vo=0;Vo<32768;++Vo){var O0=(43690&Vo)>>1|(21845&Vo)<<1;Dk[Vo]=((65280&(O0=(61680&(O0=(52428&O0)>>2|(13107&O0)<<2))>>4|(3855&O0)<<4))>>8|(255&O0)<<8)>>1}var xw=function(h,s,u){for(var f=h.length,g=0,m=new bw(s);g<f;++g)h[g]&&++m[h[g]-1];var _,b=new bw(s);for(g=1;g<s;++g)b[g]=b[g-1]+m[g-1]<<1;_=new bw(1<<s);var O=15-s;for(g=0;g<f;++g)if(h[g])for(var D=g<<4|h[g],C=s-h[g],V=b[h[g]-1]++<<C,I=V|(1<<C)-1;V<=I;++V)_[Dk[V]>>O]=D;return _},Pw=new sf(288);for(Vo=0;Vo<144;++Vo)Pw[Vo]=8;for(Vo=144;Vo<256;++Vo)Pw[Vo]=9;for(Vo=256;Vo<280;++Vo)Pw[Vo]=7;for(Vo=280;Vo<288;++Vo)Pw[Vo]=8;var Mk=new sf(32);for(Vo=0;Vo<32;++Vo)Mk[Vo]=5;var qre=xw(Pw,9),Hre=xw(Mk,5),HE=function(h){for(var s=h[0],u=1;u<h.length;++u)h[u]>s&&(s=h[u]);return s},Ep=function(h,s,u){var f=s/8|0;return(h[f]|h[f+1]<<8)>>(7&s)&u},$E=function(h,s){var u=s/8|0;return(h[u]|h[u+1]<<8|h[u+2]<<16)>>(7&s)},$re=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Np=function(h,s,u){var f=new Error(s||$re[h]);if(f.code=h,Error.captureStackTrace&&Error.captureStackTrace(f,Np),!u)throw f;return f},Kre=new sf(0),Wre=typeof TextDecoder<"u"&&new TextDecoder;try{Wre.decode(Kre,{stream:!0})}catch{}const Yre={gzip_data:"gzip"};class Zf extends Error{constructor(s){super(s),this.name="MRTError"}}const Xre={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},Ik={uint32:1,uint16:2,uint8:4},Jre={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let KE;class bS{constructor(s=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=s}getLayer(s){const u=this.layers[s];if(!u)throw new Zf(`Layer '${s}' not found`);return u}getHeaderLength(s){const u=new Uint8Array(s),f=new DataView(s);if(u[0]!==13)throw new Zf("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(s){const u=new Uint8Array(s),f=this.getHeaderLength(s);if(u.length<f)throw new Zf(`Expected header with length >= ${f} but got buffer of length ${u.length}`);const g=function(m,_){return m.readFields(Nre,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new KE(u.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new Zf(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const m of g.layers)this.layers[m.name]=new Lk(m,{cacheSize:this._cacheSize});return this}createDecodingTask(s){const u=[],f=this.getLayer(s.layerName);for(let g of s.blockIndices){const m=f.dataIndex[g],_=m.firstByte-s.firstByte,b=m.lastByte-s.firstByte;if(f._blocksInProgress.has(g))continue;const O={layerName:f.name,firstByte:_,lastByte:b,pixelFormat:f.pixelFormat,blockIndex:g,blockShape:[m.bands.length].concat(f.bandShape),buffer:f.buffer,codec:m.codec.codec,filters:m.filters.map(D=>D.filter)};f._blocksInProgress.add(g),u.push(O)}return new Fk(u,()=>{u.forEach(g=>f._blocksInProgress.delete(g.blockIndex))},(g,m)=>{if(u.forEach(_=>f._blocksInProgress.delete(_.blockIndex)),g)throw g;m.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class Lk{constructor({version:s,name:u,units:f,tileSize:g,pixelFormat:m,buffer:_,dataIndex:b},O){if(this.version=s,this.version!==1)throw new Zf(`Cannot parse raster layer encoded with MRT version ${s}`);this.name=u,this.units=f,this.tileSize=g,this.buffer=_,this.pixelFormat=Xre[m],this.dataIndex=b,this.bandShape=[g+2*_,g+2*_,Ik[this.pixelFormat]],this._decodedBlocks=new CS(O?O.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return Ik[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:s})=>s).flat()}processDecodedData(s){const u=s.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,s.data)}getBlockForBand(s){let u=0;switch(typeof s){case"string":for(const[f,g]of this.dataIndex.entries()){for(const[m,_]of g.bands.entries())if(_===s)return{bandIndex:u+m,blockIndex:f,blockBandIndex:m};u+=g.bands.length}break;case"number":for(const[f,g]of this.dataIndex.entries()){if(s>=u&&s<u+g.bands.length)return{bandIndex:s,blockIndex:f,blockBandIndex:s-u};u+=g.bands.length}break;default:throw new Zf(`Invalid band \`${JSON.stringify(s)}\`. Expected string or integer.`)}throw new Zf(`Band not found: ${JSON.stringify(s)}`)}getDataRange(s){let u=1/0,f=-1/0;const g=[],m=new Set;for(const _ of s){const{blockIndex:b}=this.getBlockForBand(_);if(b<0)throw new Zf(`Invalid band: ${JSON.stringify(_)}`);const O=this.dataIndex[b];g.includes(b)||g.push(b),m.add(b),u=Math.min(u,O.firstByte),f=Math.max(f,O.lastByte)}if(m.size>this.cacheSize)throw new Zf(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:f,blockIndices:g}}hasBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0}hasDataForBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(s){const{blockIndex:u,blockBandIndex:f}=this.getBlockForBand(s),g=this._decodedBlocks.get(u.toString());if(!g)throw new Zf(`Data for band ${JSON.stringify(s)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],_=this.bandShape.reduce((D,C)=>D*C,1),b=f*_,O=g.subarray(b,b+_);return{data:O,bytes:new Uint8Array(O.buffer).subarray(O.byteOffset,O.byteOffset+O.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}bS.setPbf=function(h){KE=h};class Fk{constructor(s,u,f){this.tasks=s,this._onCancel=u,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(s,u){this._finalized||(this._onComplete(s,u),this._finalized=!0)}}bS.performDecoding=function(h,s){const u=new Uint8Array(h);return Promise.all(s.tasks.map(f=>{const{layerName:g,firstByte:m,lastByte:_,pixelFormat:b,blockShape:O,blockIndex:D,filters:C,codec:V}=f,I=u.subarray(m,_+1),z=new Uint32Array(O[0]*O[1]*O[2]);let M;if(V!=="gzip_data")throw new Zf(`Unhandled codec: ${V}`);return M=function(B,J){if(!globalThis.DecompressionStream&&J==="gzip_data")return Promise.resolve(((ie=function(Oe){Oe[0]==31&&Oe[1]==139&&Oe[2]==8||Np(6,"invalid gzip data");var et=Oe[3],We=10;4&et&&(We+=2+(Oe[10]|Oe[11]<<8));for(var Ye=(et>>3&1)+(et>>4&1);Ye>0;Ye-=!Oe[We++]);return We+(2&et)}(de=B))+8>de.length&&Np(6,"invalid gzip data"),function(Oe,et,We,Ye){var gt=Oe.length;if(!gt||et.f&&!et.l)return We||new sf(0);var tt=!We,vt=tt||et.i!=2,xt=et.i;tt&&(We=new sf(3*gt));var Ct,Dt,Nt=function(_y){var wy=We.length;if(_y>wy){var WA=new sf(Math.max(2*wy,_y));WA.set(We),We=WA}},jt=et.f||0,Lt=et.p||0,qt=et.b||0,Aa=et.l,ga=et.d,Qa=et.m,Pa=et.n,za=8*gt;do{if(!Aa){jt=Ep(Oe,Lt,1);var wa=Ep(Oe,Lt+1,3);if(Lt+=3,!wa){var vr=Oe[(Fr=4+((Lt+7)/8|0))-4]|Oe[Fr-3]<<8,Ka=Fr+vr;if(Ka>gt){xt&&Np(0);break}vt&&Nt(qt+vr),We.set(Oe.subarray(Fr,Ka),qt),et.b=qt+=vr,et.p=Lt=8*Ka,et.f=jt;continue}if(wa==1)Aa=qre,ga=Hre,Qa=9,Pa=5;else if(wa==2){var ur=Ep(Oe,Lt,31)+257,Mr=Ep(Oe,Lt+10,15)+4,en=ur+Ep(Oe,Lt+5,31)+1;Lt+=14;for(var Br=new sf(en),gn=new sf(19),Qr=0;Qr<Mr;++Qr)gn[jre[Qr]]=Ep(Oe,Lt+3*Qr,7);Lt+=3*Mr;var Tn=HE(gn),Wn=(1<<Tn)-1,Vi=xw(gn,Tn);for(Qr=0;Qr<en;){var Fr,Vn=Vi[Ep(Oe,Lt,Wn)];if(Lt+=15&Vn,(Fr=Vn>>4)<16)Br[Qr++]=Fr;else{var as=0,ps=0;for(Fr==16?(ps=3+Ep(Oe,Lt,3),Lt+=2,as=Br[Qr-1]):Fr==17?(ps=3+Ep(Oe,Lt,7),Lt+=3):Fr==18&&(ps=11+Ep(Oe,Lt,127),Lt+=7);ps--;)Br[Qr++]=as}}var Ts=Br.subarray(0,ur),Ls=Br.subarray(ur);Qa=HE(Ts),Pa=HE(Ls),Aa=xw(Ts,Qa),ga=xw(Ls,Pa)}else Np(1);if(Lt>za){xt&&Np(0);break}}vt&&Nt(qt+131072);for(var xi=(1<<Qa)-1,fl=(1<<Pa)-1,zc=Lt;;zc=Lt){var Co=(as=Aa[$E(Oe,Lt)&xi])>>4;if((Lt+=15&as)>za){xt&&Np(0);break}if(as||Np(2),Co<256)We[qt++]=Co;else{if(Co==256){zc=Lt,Aa=null;break}var zo=Co-254;Co>264&&(zo=Ep(Oe,Lt,(1<<(of=Ek[Qr=Co-257]))-1)+zk[Qr],Lt+=of);var ju=ga[$E(Oe,Lt)&fl],Zl=ju>>4;if(ju||Np(3),Lt+=15&ju,Ls=Zre[Zl],Zl>3){var of=Nk[Zl];Ls+=$E(Oe,Lt)&(1<<of)-1,Lt+=of}if(Lt>za){xt&&Np(0);break}vt&&Nt(qt+131072);var vy=qt+zo;if(qt<Ls){var qf=0-Ls,Vp=Math.min(Ls,vy);for(qf+qt<0&&Np(3);qt<Vp;++qt)We[qt]=(void 0)[qf+qt]}for(;qt<vy;++qt)We[qt]=We[qt-Ls]}}et.l=Aa,et.p=zc,et.b=qt,et.f=jt,Aa&&(jt=1,et.m=Qa,et.d=ga,et.n=Pa)}while(!jt);return qt!=We.length&&tt?(Ct=We,((Dt=qt)==null||Dt>Ct.length)&&(Dt=Ct.length),new sf(Ct.subarray(0,Dt))):We.subarray(0,qt)}(de.subarray(ie,-8),{i:2},new sf(((te=de)[(he=te.length)-4]|te[he-3]<<8|te[he-2]<<16|te[he-1]<<24)>>>0))));var te,he,de,ie;const ve=Yre[J];if(!ve)throw new Error(`Unhandled codec: ${J}`);const be=new globalThis.DecompressionStream(ve);return new Response(new Blob([B]).stream().pipeThrough(be)).arrayBuffer().then(Oe=>new Uint8Array(Oe))}(I,V).then(B=>(function(J,te){J.readFields(Ire,te)}(new KE(B),z),new Jre[b](z.buffer))),M.then(B=>{for(let J=C.length-1;J>=0;J--)switch(C[J]){case"delta_filter":Fre(B,O);break;case"zigzag_filter":kre(B);break;case"bitshuffle_filter":Ure(B,b);break;default:throw new Zf(`Unhandled filter "${C[J]}"`)}return{layerName:g,blockIndex:D,data:B}}).catch(B=>{throw B})}))},Pt(Fk,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Pt(bS,"MapboxRasterTile"),Pt(Lk,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let Ew,WE,Op,V0,YE,z0=null;function kk(){return Ui()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:WE||Ne.DRACO_URL}function Uk(){if(Ui()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(V0)return V0;const h=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return V0=WebAssembly.validate(h)?Ne.MESHOPT_SIMD_URL:Ne.MESHOPT_URL,V0}const xS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Qre={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Nw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function Bk(h,s,u){const f=u.json.bufferViews.length,g=u.buffers.length;s.bufferView=f,u.json.bufferViews[f]={buffer:g,byteLength:h.byteLength},u.buffers[g]=h}const XE="KHR_draco_mesh_compression";function ene(h,s){const u=h.extensions&&h.extensions[XE];if(!u)return;const f=new Op.Decoder,g=qk(s,u.bufferView),m=new Op.Mesh;if(!f.DecodeArrayToMesh(g,g.byteLength,m))throw new Error("Failed to decode Draco mesh");const _=s.json.accessors[h.indices],b=xS[_.componentType],O=_.count*b.BYTES_PER_ELEMENT,D=Op._malloc(O);b===Uint16Array?f.GetTrianglesUInt16Array(m,O,D):f.GetTrianglesUInt32Array(m,O,D),Bk(Op.memory.buffer.slice(D,D+O),_,s),Op._free(D);for(const C of Object.keys(u.attributes)){const V=f.GetAttributeByUniqueId(m,u.attributes[C]),I=s.json.accessors[h.attributes[C]],z=Qre[I.componentType],M=I.count*Nw[I.type]*xS[I.componentType].BYTES_PER_ELEMENT,B=Op._malloc(M);f.GetAttributeDataArrayForAllPoints(m,V,Op[z],M,B),Bk(Op.memory.buffer.slice(B,B+M),I,s),Op._free(B)}f.destroy(),m.destroy(),delete h.extensions[XE]}const PS="EXT_meshopt_compression";function tne(h,s){if(!h.extensions||!h.extensions[PS])return;const u=h.extensions[PS],f=new Uint8Array(s.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),g=new Uint8Array(u.count*u.byteStride);YE.decodeGltfBuffer(g,u.count,u.byteStride,f,u.mode,u.filter),h.buffer=s.buffers.length,h.byteOffset=0,s.buffers[h.buffer]=g.buffer,delete h.extensions[PS]}const jk=1179937895,Gk=new TextDecoder("utf8");function Zk(h,s){return new URL(h,s).href}function ane(h,s,u,f){return fetch(Zk(h.uri,f)).then(g=>g.arrayBuffer()).then(g=>{s.buffers[u]=g})}function qk(h,s){const u=h.json.bufferViews[s];return new Uint8Array(h.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function rne(h,s,u,f){if(h.uri){const g=Zk(h.uri,f);return fetch(g).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{s.images[u]=m})}if(h.bufferView!==void 0){const g=qk(s,h.bufferView),m=new Blob([g],{type:h.mimeType});return createImageBitmap(m).then(_=>{s.images[u]=_})}}function Hk(h,s=0,u){const f={json:null,images:[],buffers:[]};if(new Uint32Array(h,s,1)[0]===jk){const C=new Uint32Array(h,s);let V=2;const I=(C[V++]>>2)-3,z=C[V++]>>2;if(V++,f.json=JSON.parse(Gk.decode(C.subarray(V,V+z))),V+=z,V<I){const M=C[V++];V++;const B=s+(V<<2);f.buffers[0]=h.slice(B,B+M)}}else f.json=JSON.parse(Gk.decode(new Uint8Array(h,s)));const{buffers:g,images:m,meshes:_,extensionsUsed:b,bufferViews:O}=f.json;let D=Promise.resolve();if(g){const C=[];for(let V=0;V<g.length;V++){const I=g[V];I.uri?C.push(ane(I,f,V,u)):f.buffers[V]||(f.buffers[V]=null)}D=Promise.all(C)}return D.then(()=>{const C=[],V=b&&b.includes(XE),I=b&&b.includes(PS);if(V&&C.push(function(){if(!Op)return Ew??(Ew=function(z){let M,B=null;function J(){M=new Uint8Array(B.buffer)}function te(){throw new Error("Unexpected Draco error.")}const he={a:{a:te,d:function(de,ie,ve){return M.copyWithin(de,ie,ie+ve)},c:function(de){const ie=M.length,ve=Math.max(de>>>0,Math.ceil(1.2*ie)),be=Math.ceil((ve-ie)/65536);try{return B.grow(be),J(),!0}catch{return!1}},b:te}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(z,he):z.then(de=>de.arrayBuffer()).then(de=>WebAssembly.instantiate(de,he))).then(de=>{const{Rb:ie,Qb:ve,P:be,T:Oe,X:et,Ja:We,La:Ye,Qa:gt,Va:tt,Wa:vt,eb:xt,jb:Ct,f:Dt,e:Nt,yb:jt,zb:Lt,Ab:qt,Bb:Aa,Db:ga,Gb:Qa}=de.instance.exports;B=Nt;const Pa=(()=>{let za=0,wa=0,vr=0,Ka=0;return ur=>{vr&&(ie(Ka),ie(za),wa+=vr,vr=za=0),za||(wa+=128,za=ve(wa));const Mr=ur.length+7&-8;let en=za;Mr>=wa&&(vr=Mr,en=Ka=ve(Mr));for(let Br=0;Br<ur.length;Br++)M[en+Br]=ur[Br];return en}})();return J(),Dt(),{memory:Nt,_free:ie,_malloc:ve,Mesh:class{constructor(){this.ptr=be()}destroy(){Oe(this.ptr)}},Decoder:class{constructor(){this.ptr=We()}destroy(){Ct(this.ptr)}DecodeArrayToMesh(za,wa,vr){const Ka=Pa(za),ur=Ye(this.ptr,Ka,wa,vr.ptr);return!!et(ur)}GetAttributeByUniqueId(za,wa){return{ptr:gt(this.ptr,za.ptr,wa)}}GetTrianglesUInt16Array(za,wa,vr){tt(this.ptr,za.ptr,wa,vr)}GetTrianglesUInt32Array(za,wa,vr){vt(this.ptr,za.ptr,wa,vr)}GetAttributeDataArrayForAllPoints(za,wa,vr,Ka,ur){xt(this.ptr,za.ptr,wa.ptr,vr,Ka,ur)}},DT_INT8:jt(),DT_UINT8:Lt(),DT_INT16:qt(),DT_UINT16:Aa(),DT_UINT32:ga(),DT_FLOAT32:Qa()}})}(fetch(kk())),Ew.then(z=>{Op=z,Ew=void 0}))}()),I&&C.push(function(){if(YE)return;const z=function(M){let B;const J=WebAssembly.instantiateStreaming(M,{}).then(de=>{B=de.instance,B.exports.__wasm_call_ctors()}),te={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},he={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:J,supported:!0,decodeGltfBuffer(de,ie,ve,be,Oe,et){(function(We,Ye,gt,tt,vt,xt,Ct){const Dt=We.exports.sbrk,Nt=tt+3&-4,jt=Dt(Nt*vt),Lt=Dt(xt.length),qt=new Uint8Array(We.exports.memory.buffer);qt.set(xt,Lt);const Aa=Ye(jt,tt,vt,Lt,xt.length);if(Aa===0&&Ct&&Ct(jt,Nt,vt),gt.set(qt.subarray(jt,jt+tt*vt)),Dt(jt-Dt(0)),Aa!==0)throw new Error(`Malformed buffer data: ${Aa}`)})(B,B.exports[he[Oe]],de,ie,ve,be,B.exports[te[et]])}}}(fetch(Uk()));return z.ready.then(()=>{YE=z})}()),m)for(let z=0;z<m.length;z++)C.push(rne(m[z],f,z,u));return(C.length?Promise.all(C):Promise.resolve()).then(()=>{if(V&&_)for(const{primitives:z}of _)for(const M of z)ene(M,f);if(I&&_&&O)for(const z of O)tne(z,f);return f})})}function KA(h,s){const u=h.json.bufferViews[s.bufferView],f=xS[s.componentType];return new f(h.buffers[u.buffer],(s.byteOffset||0)+(u.byteOffset||0),s.count*(u.byteStride&&u.byteStride!==Nw[s.type]*f.BYTES_PER_ELEMENT?u.byteStride/f.BYTES_PER_ELEMENT:Nw[s.type]))}function JE(h,s,u,f){const g=xS[s.componentType],m=function(C){switch(C){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),_=h.json.bufferViews[s.bufferView],b=_.byteStride?_.byteStride/g.BYTES_PER_ELEMENT:Nw[s.type],O=u.float32,D=O.length/u.capacity;for(let C=0,V=0;C<s.count*b;C+=b,V+=D)for(let I=0;I<D;I++)O[V+I]=f[C+I]*m;u._trim()}function nne(h,s,u){const f=h.indices,g=h.attributes,m={};m.indexArray=new Ms;const _=s.json.accessors[f],b=_.count/3;m.indexArray.reserve(b);const O=KA(s,_);for(let I=0;I<b;I++)m.indexArray.emplaceBack(O[3*I],O[3*I+1],O[3*I+2]);m.indexArray._trim(),m.vertexArray=new No;const D=s.json.accessors[g.POSITION];m.vertexArray.reserve(D.count);const C=KA(s,D);for(let I=0;I<D.count;I++)m.vertexArray.emplaceBack(C[3*I],C[3*I+1],C[3*I+2]);if(m.vertexArray._trim(),m.aabb=new ar(D.min,D.max),m.centroid=function(I,z){const M=[0,0,0],B=I.length;if(B>0){for(let J=0;J<B;J++){const te=3*I[J];M[0]+=z[te],M[1]+=z[te+1],M[2]+=z[te+2]}M[0]/=B,M[1]/=B,M[2]/=B}return M}(O,C),g.COLOR_0!==void 0){const I=s.json.accessors[g.COLOR_0],z=Nw[I.type],M=KA(s,I);m.colorArray=z===3?new No:new nd,m.colorArray.resize(I.count),JE(s,I,m.colorArray,M)}if(g.NORMAL!==void 0){m.normalArray=new No;const I=s.json.accessors[g.NORMAL];m.normalArray.resize(I.count);const z=KA(s,I);JE(s,I,m.normalArray,z)}if(g.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new Qh;const I=s.json.accessors[g.TEXCOORD_0];m.texcoordArray.resize(I.count);const z=KA(s,I);JE(s,I,m.texcoordArray,z)}if(g._FEATURE_ID_RGBA4444!==void 0){const I=s.json.accessors[g._FEATURE_ID_RGBA4444];s.json.extensionsUsed&&s.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=KA(s,I))}g._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(KA(s,s.json.accessors[g._FEATURE_RGBA4444]).buffer));const V=h.material;return m.material=function(I,z){const{emissiveFactor:M=[0,0,0],alphaMode:B="OPAQUE",alphaCutoff:J=.5,normalTexture:te,occlusionTexture:he,emissiveTexture:de,doubleSided:ie}=I,{baseColorFactor:ve=[1,1,1,1],metallicFactor:be=1,roughnessFactor:Oe=1,baseColorTexture:et,metallicRoughnessTexture:We}=I.pbrMetallicRoughness||{},Ye=he?z[he.index]:void 0;if(he&&he.extensions&&he.extensions.KHR_texture_transform&&Ye){const gt=he.extensions.KHR_texture_transform;Ye.offsetScale=[gt.offset[0],gt.offset[1],gt.scale[0],gt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new En(...ve),metallicFactor:be,roughnessFactor:Oe,baseColorTexture:et?z[et.index]:void 0,metallicRoughnessTexture:We?z[We.index]:void 0},doubleSided:ie,emissiveFactor:M,alphaMode:B,alphaCutoff:J,normalTexture:te?z[te.index]:void 0,occlusionTexture:Ye,emissionTexture:de?z[de.index]:void 0,defined:I.defined===void 0}}(V!==void 0?s.json.materials[V]:{defined:!1},u),m}function $k(h,s,u){const{matrix:f,rotation:g,translation:m,scale:_,mesh:b,extras:O,children:D}=h,C={};if(C.matrix=f||Ae.mat4.fromRotationTranslationScale([],g||[0,0,0,1],m||[0,0,0],_||[1,1,1]),b!==void 0){C.meshes=u[b];const V=C.anchor=[0,0];for(const I of C.meshes){const{min:z,max:M}=I.aabb;V[0]+=z[0]+M[0],V[1]+=z[1]+M[1]}V[0]=Math.floor(V[0]/C.meshes.length/2),V[1]=Math.floor(V[1]/C.meshes.length/2)}if(O&&(O.id&&(C.id=O.id),O.lights&&(C.lights=function(V){if(!V.length)return[];const I=function(te){const he=atob(te),de=new Uint8Array(he.length);for(let ie=0;ie<he.length;ie++)de[ie]=he.codePointAt(ie);return de}(V),z=[],M=I.length/24,B=new Uint16Array(I.buffer),J=new Float32Array(I.buffer);for(let te=0;te<M;te++){const he=B[2*te*6]/30,de=B[2*te*6+1]/30,ie=B[2*te*6+10]/100,ve=J[6*te+1],be=J[6*te+2],Oe=J[6*te+3],et=J[6*te+4],We=Oe-ve,Ye=et-be,gt=Math.hypot(We,Ye);z.push({pos:[ve+.5*We,be+.5*Ye,de],normal:[Ye/gt,-We/gt,0],width:gt,height:he,depth:ie,points:[ve,be,Oe,et]})}return z}(O.lights))),D){const V=[];for(const I of D)V.push($k(s.json.nodes[I],s,u));C.children=V}return C}function ine(h){if(h.vertices.length===0||h.indices.length===0)return null;const s=new j1(h.vertices,h.indices,8,256),[u,f]=[s.min.clone(),s.max.clone()];return{vertices:h.vertices,indices:h.indices,grid:s,min:u,max:f}}function sne(h){if(!h.extras||!h.extras.ground)return null;const s=h.extras.ground;if(!s||!Array.isArray(s)||s.length===0)return null;const u=s[0];if(!u||!Array.isArray(u)||u.length===0)return null;const f=[];for(const _ of u){if(!Array.isArray(_)||_.length!==2)continue;const b=_[0],O=_[1];typeof b=="number"&&typeof O=="number"&&f.push(new It(b,O))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let g=0;for(let _=0;_<f.length;_++){const b=f[_],O=f[(_+1)%f.length],D=f[(_+2)%f.length];g+=(b.x-O.x)*(D.y-O.y)-(D.x-O.x)*(b.y-O.y)}g>0&&f.reverse();const m=xA(f.flatMap(_=>[_.x,_.y]),[]);return m.length===0?null:{vertices:f,indices:m}}function one(h,s){const u=[],f=[];let g=0;const m=[];for(const _ of h){g=u.length;const b=_.vertexArray.float32,O=_.indexArray.uint16;for(let D=0;D<_.vertexArray.length;D++)m[0]=b[3*D+0],m[1]=b[3*D+1],m[2]=b[3*D+2],Ae.vec3.transformMat4(m,m,s),u.push(new It(m[0],m[1]));for(let D=0;D<3*_.indexArray.length;D++)f.push(O[D]+g)}if(f.length%3!=0)return null;for(let _=0;_<f.length;_+=3){const b=u[f[_+0]],O=u[f[_+1]],D=u[f[_+2]];(b.x-O.x)*(D.y-O.y)-(D.x-O.x)*(b.y-O.y)>0&&([f[_+1],f[_+2]]=[f[_+2],f[_+1]])}return{vertices:u,indices:f}}function Kk(h){const s=function(O,D){const C=[],V=WebGL2RenderingContext;if(O.json.textures)for(const I of O.json.textures){const z={magFilter:V.LINEAR,minFilter:V.NEAREST,wrapS:V.REPEAT,wrapT:V.REPEAT};I.sampler!==void 0&&Object.assign(z,O.json.samplers[I.sampler]),C.push({image:D[I.source],sampler:z,uploaded:!1})}return C}(h,h.images),u=function(O,D){const C=[];for(const V of O.json.meshes){const I=[];for(const z of V.primitives)I.push(nne(z,O,D));C.push(I)}return C}(h,s),{scenes:f,scene:g,nodes:m}=h.json,_=f?f[g||0].nodes:m,b=[];for(const O of _)b.push($k(m[O],h,u));return function(O,D,C){const V={},I=new Set;for(let z=0;z<O.length;z++){const M=C[D[z]];if(!M.extras)continue;const B=M.extras["mapbox:footprint:version"],J=M.extras["mapbox:footprint:id"];(B||J)&&I.add(z),B==="1.0.0"&&J&&(V[J]=z)}for(let z=0;z<O.length;z++){if(I.has(z))continue;const M=O[z],B=C[D[z]];if(!B.extras)continue;let J=null;M.id in V&&(J=one(O[V[M.id]].meshes,M.matrix)),J||(J=sne(B)),J&&(M.footprint=ine(J))}if(I.size>0){const z=Array.from(I.values()).sort((M,B)=>M-B);for(let M=z.length-1;M>=0;M--)O.splice(z[M],1)}}(b,_,h.json.nodes),b}function lne(h){h.heightmap=new Float32Array(4096),h.heightmap.fill(-1);const s=h.vertexArray.float32,u=h.aabb.min[0]-1,f=h.aabb.min[1]-1,g=qA/(h.aabb.max[0]-u+2),m=qA/(h.aabb.max[1]-f+2);for(let _=0;_<s.length;_+=3){const b=s[_+2],O=(s[_+0]-u)*g|0,D=(s[_+1]-f)*m|0;b>h.heightmap[D*qA+O]&&(h.heightmap[D*qA+O]=b)}}function une(h,s){const u={};u.indexArray=new Ms,u.indexArray.reserve(4*h.length),u.vertexArray=new No,u.vertexArray.reserve(10*h.length),u.colorArray=new nd,u.vertexArray.reserve(10*h.length);let f=0;for(const _ of h){const b=Math.min(10,Math.max(4,1.3*_.height))*s,O=[-_.normal[1],_.normal[0],0],D=Math.min(.29,.1*_.width/_.depth),C=_.width-2*_.depth*s*(D+.01),V=Ae.vec3.scaleAndAdd([],_.pos,O,C/2),I=Ae.vec3.scaleAndAdd([],_.pos,O,-C/2),z=[V[0],V[1],V[2]+_.height],M=[I[0],I[1],I[2]+_.height],B=Ae.vec3.scaleAndAdd([],_.normal,O,D);Ae.vec3.scale(B,B,b);const J=Ae.vec3.scaleAndAdd([],_.normal,O,-D);Ae.vec3.scale(J,J,b),Ae.vec3.add(B,V,B),Ae.vec3.add(J,I,J),V[2]+=.1,I[2]+=.1,u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(J[0],J[1],J[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(z[0],z[1],z[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(J[0],J[1],J[2]);const te=C/b/2;u.colorArray.emplaceBack(-te-D,-1,te,.8),u.colorArray.emplaceBack(te+D,-1,te,.8),u.colorArray.emplaceBack(-te,0,te,1.3),u.colorArray.emplaceBack(te,0,te,1.3),u.colorArray.emplaceBack(te+D,-.8,te,.7),u.colorArray.emplaceBack(te+D,-.8,te,.7),u.colorArray.emplaceBack(0,0,te,1.3),u.colorArray.emplaceBack(0,0,te,1.3),u.colorArray.emplaceBack(te+D,-1.2,te,.8),u.colorArray.emplaceBack(te+D,-1.2,te,.8),u.indexArray.emplaceBack(6+f,4+f,8+f),u.indexArray.emplaceBack(7+f,9+f,5+f),u.indexArray.emplaceBack(0+f,1+f,2+f),u.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const g={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=En.white,g.pbrMetallicRoughness=m,u.material=g,u.aabb=new ar([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class Wk{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){const f=s[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const cne=["id","tile","layer","source","sourceLayer","state"];class D0{constructor(s,u,f,g,m){this.type="Feature",this._vectorTileFeature=s,this._z=u,this._x=f,this._y=g,this.properties=s.properties,this.id=m}clone(){const s=new D0(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(s.state=Object.assign({},this.state)),this.layer&&(s.layer=Object.assign({},this.layer)),this.source&&(s.source=this.source),this.sourceLayer&&(s.sourceLayer=this.sourceLayer),s}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of cne)this[u]!==void 0&&(s[u]=this[u]);return s}}class Yk{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new St(Va,16,0),this.featureIndexArray=new Rl,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(s,u,f,g,m,_=0,b=0){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,m,_);const D=this.grid;for(let C=0;C<u.length;C++){const V=u[C],I=[1/0,1/0,-1/0,-1/0];for(let z=0;z<V.length;z++){const M=V[z];I[0]=Math.min(I[0],M.x),I[1]=Math.min(I[1],M.y),I[2]=Math.max(I[2],M.x),I[3]=Math.max(I[3],M.y)}b!==0&&(I[0]-=b,I[1]-=b,I[2]+=b,I[3]+=b),I[0]<Va&&I[1]<Va&&I[2]>=0&&I[3]>=0&&D.insert(O,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Dh.VectorTile(new un(this.rawTileData)).layers,this.sourceLayerCoder=new Wk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,u){const{tilespaceGeometry:f,transform:g,tileTransform:m,pixelPosMatrix:_,availableImages:b}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const O=f.bufferedTilespaceBounds,D=this.grid.query(O.min.x,O.min.y,O.max.x,O.max.y,(z,M,B,J)=>ct(f.bufferedTilespaceGeometry,z,M,B,J));D.sort(dne);let C=null;g.elevation&&D.length>0&&(C=x0.create(g.elevation,this.tileID));const V={};let I;for(let z=0;z<D.length;z++){const M=D[z];if(M===I)continue;I=M;const B=this.featureIndexArray.get(M);let J=null;this.is3DTile?this.loadMatchingModelFeature(V,B,s,f,g):this.loadMatchingFeature(V,B,s,b,(te,he,de,ie=0)=>(J||(J=K(te,this.tileID.canonical,m)),he.queryIntersectsFeature(f,te,de,J,this.z,g,_,C,ie)))}return V}loadMatchingFeature(s,u,f,g,m){const{featureIndex:_,bucketIndex:b,sourceLayerIndex:O,layoutVertexArrayOffset:D}=u,C=this.bucketLayerIDs[b],V=f.layers,I=Object.keys(V);if(I.length&&!function(te,he){for(let de=0;de<te.length;de++)if(he.indexOf(te[de])>=0)return!0;return!1}(I,C))return;const z=f.sourceCache,M=this.sourceLayerCoder.decode(O),B=this.vtLayers[M].feature(_),J=this.getId(B,M);for(let te=0;te<C.length;te++){const he=C[te];if(!V[he])continue;const{styleLayer:de,targets:ie}=V[he];let ve={};J!==void 0&&(ve=z.getFeatureState(de.sourceLayer,J));const be=!m||m(B,de,ve,D);if(!be)continue;const Oe=new D0(B,this.z,this.x,this.y,J);Oe.tile=this.tileID.canonical,Oe.state=ve;let et=this.serializedLayersCache.get(he);et||(et=de.serialize(),et.id=he,this.serializedLayersCache.set(he,et)),Oe.source=et.source,Oe.sourceLayer=et["source-layer"],Oe.layer=fn({},et),Oe.layer.paint=Xk(et.paint,de.paint,B,ve,g),Oe.layer.layout=Xk(et.layout,de.layout,B,ve,g);let We=!1;for(const Ye of ie){this.updateFeatureProperties(Oe,Ye);const{filter:gt}=Ye;if(gt){if(B.properties=Oe.properties,gt.needGeometry){const tt=Y(B,!0);if(!gt.filter(new Rn(this.tileID.overscaledZ),tt,this.tileID.canonical))continue}else if(!gt.filter(new Rn(this.tileID.overscaledZ),B))continue}We=!0,Ye.targetId&&this.addFeatureVariant(Oe,Ye)}We&&this.appendToResult(s,he,_,Oe,be)}}loadMatchingModelFeature(s,u,f,g,m){const _=this.bucketLayerIDs[0][0],b=f.layers;if(!b[_])return;const{styleLayer:O,targets:D}=b[_];if(O.type!=="model")return;const C=g.tile,V=u.featureIndex,I=C.getBucket(O);if(!(I&&I instanceof yS))return;const z=function(et,We,Ye,gt){const tt=et.getNodesInfo()[We];if(tt.hiddenByReplacement||!tt.node.meshes)return;let vt=Number.MAX_VALUE;const xt=tt.node,Ct=Ye.tile,Dt=gt.calculatePosMatrix(Ct.tileID.toUnwrapped(),gt.worldSize),Nt=tt.evaluatedScale;let jt=0;gt.elevation&&xt.elevation&&(jt=xt.elevation*gt.elevation.exaggeration()),Ae.mat4.translate(Dt,Dt,[(xt.anchor?xt.anchor[0]:0)*(Nt[0]-1),(xt.anchor?xt.anchor[1]:0)*(Nt[1]-1),jt]),Ae.mat4.scale(Dt,Dt,Nt);const Lt=Ye.queryGeometry,qt=Lt.isPointQuery()?Lt.screenBounds:Lt.screenGeometry,Aa=function(Qa){const Pa=Ae.mat4.multiply([],Dt,Qa.matrix);Ae.mat4.multiply(Pa,gt.expandedFarZProjMatrix,Pa);for(let za=0;za<Qa.meshes.length;++za){const wa=Qa.meshes[za];if(za===Qa.lightMeshIndex)continue;const vr=KF(qt,gt,Pa,wa.aabb);vr!=null&&(vt=Math.min(vr,vt))}if(Qa.children)for(const za of Qa.children)Aa(za)};if(Aa(xt),vt===Number.MAX_VALUE)return;const ga=new kn(0,0);return sk(Ct.tileID.canonical,ga,tt.node.anchor[0],tt.node.anchor[1]),{intersectionZ:vt,position:ga,feature:tt.feature}}(I,V,g,m);if(!z)return;const{z:M,x:B,y:J}=C.tileID.canonical,{feature:te,intersectionZ:he,position:de}=z;let ie={};te.id!==void 0&&(ie=f.sourceCache.getFeatureState(O.sourceLayer,te.id));const ve=new D0({},M,B,J,te.id);ve.tile=this.tileID.canonical,ve.state=ie,ve.properties=te.properties,ve.geometry={type:"Point",coordinates:[de.lng,de.lat]};let be=this.serializedLayersCache.get(_);be||(be=O.serialize(),be.id=_,this.serializedLayersCache.set(_,be)),ve.source=be.source,ve.sourceLayer=be["source-layer"],ve.layer=fn({},be);let Oe=!1;for(const et of D){this.updateFeatureProperties(ve,et);const{filter:We}=et;if(We){if(te.properties=ve.properties,We.needGeometry){if(!We.filter(new Rn(this.tileID.overscaledZ),te,this.tileID.canonical))continue}else if(!We.filter(new Rn(this.tileID.overscaledZ),te))continue}Oe=!0,et.targetId&&this.addFeatureVariant(ve,et)}Oe&&this.appendToResult(s,_,V,ve,he)}updateFeatureProperties(s,u,f){if(u.properties){const g={};for(const m in u.properties){const _=u.properties[m].evaluate({zoom:this.z},s._vectorTileFeature,s.state,s.tile,f);_!=null&&(g[m]=_)}s.properties=g}}addFeatureVariant(s,u,f){const g={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(g.properties=s.properties),s.variants=s.variants||{},s.variants[u.targetId]=s.variants[u.targetId]||[],s.variants[u.targetId].push(g)}appendToResult(s,u,f,g,m){let _=s[u];_===void 0&&(_=s[u]=[]),_.push({featureIndex:f,feature:g,intersectionZ:m})}lookupSymbolFeatures(s,u,f,g,m){const _={};this.loadVTLayers();for(const b of s)this.loadMatchingFeature(_,{bucketIndex:u,sourceLayerIndex:f,featureIndex:b,layoutVertexArrayOffset:0},g,m);return _}loadFeature(s){const{featureIndex:u,sourceLayerIndex:f}=s;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),m=this.vtFeatures[g];if(m[u])return m[u];const _=this.vtLayers[g].feature(u);return m[u]=_,_}hasLayer(s){for(const u of this.bucketLayerIDs)for(const f of u)if(s===f)return!0;return!1}getId(s,u){let f=s.id;if(this.promoteId){const g=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(g!=null)if(Array.isArray(g)){if(!this.promoteIdExpression){const m=G(g);if(m.result!=="success"){const _=m.value.map(b=>`${b.key}: ${b.message}`).join(", ");return void $r(`Failed to create expression for promoteId: ${_}`)}this.promoteIdExpression=m.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new zd),f=this.promoteIdExpression.evaluate({zoom:0},s)}else f=s.properties[g];typeof f=="boolean"&&(f=Number(f))}return f}}function Xk(h,s,u,f,g){return pr(h,(m,_)=>{const b=s instanceof zu?s.get(_):null;return b&&b.evaluate?b.evaluate(u,f,g):b})}function dne(h,s){return s-h}Pt(Yk,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const Jk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class QE{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(s,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const m=Jk[15&f];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(s,2,1),[b]=new Uint32Array(s,4,1);return new QE(b,_,m,s)}constructor(s,u=64,f=Float64Array,g){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const m=Jk.indexOf(this.ArrayType),_=2*s*this.ArrayType.BYTES_PER_ELEMENT,b=s*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+b+O,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+O),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+b+O,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=s,this.coords[this._pos++]=u,f}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return eN(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:b}=this,O=[0,m.length-1,0],D=[];for(;O.length;){const C=O.pop()||0,V=O.pop()||0,I=O.pop()||0;if(V-I<=b){for(let J=I;J<=V;J++){const te=_[2*J],he=_[2*J+1];te>=s&&te<=f&&he>=u&&he<=g&&D.push(m[J])}continue}const z=I+V>>1,M=_[2*z],B=_[2*z+1];M>=s&&M<=f&&B>=u&&B<=g&&D.push(m[z]),(C===0?s<=M:u<=B)&&(O.push(I),O.push(z-1),O.push(1-C)),(C===0?f>=M:g>=B)&&(O.push(z+1),O.push(V),O.push(1-C))}return D}within(s,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:m,nodeSize:_}=this,b=[0,g.length-1,0],O=[],D=f*f;for(;b.length;){const C=b.pop()||0,V=b.pop()||0,I=b.pop()||0;if(V-I<=_){for(let J=I;J<=V;J++)e6(m[2*J],m[2*J+1],s,u)<=D&&O.push(g[J]);continue}const z=I+V>>1,M=m[2*z],B=m[2*z+1];e6(M,B,s,u)<=D&&O.push(g[z]),(C===0?s-f<=M:u-f<=B)&&(b.push(I),b.push(z-1),b.push(1-C)),(C===0?s+f>=M:u+f>=B)&&(b.push(z+1),b.push(V),b.push(1-C))}return O}}function eN(h,s,u,f,g,m){if(g-f<=u)return;const _=f+g>>1;Qk(h,s,_,f,g,m),eN(h,s,u,f,_-1,1-m),eN(h,s,u,_+1,g,1-m)}function Qk(h,s,u,f,g,m){for(;g>f;){if(g-f>600){const D=g-f+1,C=u-f+1,V=Math.log(D),I=.5*Math.exp(2*V/3),z=.5*Math.sqrt(V*I*(D-I)/D)*(C-D/2<0?-1:1);Qk(h,s,u,Math.max(f,Math.floor(u-C*I/D+z)),Math.min(g,Math.floor(u+(D-C)*I/D+z)),m)}const _=s[2*u+m];let b=f,O=g;for(Ow(h,s,f,u),s[2*g+m]>_&&Ow(h,s,f,g);b<O;){for(Ow(h,s,b,O),b++,O--;s[2*b+m]<_;)b++;for(;s[2*O+m]>_;)O--}s[2*f+m]===_?Ow(h,s,f,O):(O++,Ow(h,s,O,g)),O<=u&&(f=O+1),u<=O&&(g=O-1)}}function Ow(h,s,u,f){tN(h,u,f),tN(s,2*u,2*f),tN(s,2*u+1,2*f+1)}function tN(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}function e6(h,s,u,f){const g=h-u,m=s-f;return g*g+m*m}n.$=Ws,n.A=Go,n.B=Wu,n.C=td,n.D=P0,n.E=Jl,n.F=2,n.G=fw,n.H=oF,n.I=Zo,n.J=class extends mS{},n.K=Cu,n.L=bn,n.M=im,n.N=Xc,n.O=Yc,n.P=It,n.Q=Qu,n.R=Ps,n.S=Yh,n.T=VE,n.U=_h,n.V=mS,n.W=De,n.X=G,n.Y=gs,n.Z=ni,n._=$o,n.a=function(h){return Ne.API_CDN_URL_REGEX.test(h)},n.a$=Y,n.a0=tl,n.a1=wh,n.a2=lp,n.a3=Ll,n.a4=function(h){const s=h.value;let u=[];if(!s)return u;const f=Cu(s);return f!=="string"?(u=u.concat([new mS(h.key,s,`string expected, "${f}" found`)]),u):(YF(s,!0)||(u=u.concat([new mS(h.key,s,`invalid url "${s}"`)])),u)},n.a5=Zt,n.a6=Eo,n.a7=Ii,n.a8=ba,n.a9=class{constructor(h){this.specification=h}possiblyEvaluate(h,s){return zi(h.expression.evaluate(s))}interpolate(h,s,u){return{x:mr(h.x,s.x,u),y:mr(h.y,s.y,u),z:mr(h.z,s.z,u),azimuthal:mr(h.azimuthal,s.azimuthal,u),polar:mr(h.polar,s.polar,u)}}},n.aA=function(h,s){const u={};for(let f=0;f<s.length;f++){const g=s[f];g in h&&(u[g]=h[g])}return u},n.aB=tf,n.aC=Oi,n.aD=class{constructor(h){this.entries={},this.scheduler=h}request(h,s,u,f){const g=this.entries[h]=this.entries[h]||{callbacks:[]};if(g.result){const[m,_]=g.result;return this.scheduler?this.scheduler.add(()=>{f(m,_)},s):f(m,_),()=>{}}return g.callbacks.push(f),g.cancel||(g.cancel=u((m,_)=>{g.result=[m,_];for(const b of g.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,_)},s):b(m,_);setTimeout(()=>delete this.entries[h],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(m=>m!==f),g.callbacks.length||(g.cancel(),delete this.entries[h]))}}},n.aE=function(h,s,u){const f=JSON.stringify(h.request);return h.data&&(this.deduped.entries[f]={result:[null,h.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:h.isSymbolTile,zoom:h.tileZoom},g=>{const m=Mi(h.request,(_,b,O,D)=>{_?g(_):b&&g(null,{vectorTile:u?void 0:new Dh.VectorTile(new un(b)),rawData:b,cacheControl:O,expires:D})});return()=>{m.cancel(),g()}},s)},n.aF=function(h){An++,An>Vr&&(h.getActor().send("enforceCacheSizeLimit",_r),An=0)},n.aG=function(h){return h<=1?1:Math.pow(2,Math.floor(Math.log(h)/Math.LN2))},n.aH=pa,n.aI=LF,n.aJ=GF,n.aK=IF,n.aL=function(h,s){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){s(null,u)};for(let f=0;f<h.length;f++){const g=document.createElement("source");Yl(h[f])||(u.crossOrigin="Anonymous"),g.src=h[f],u.appendChild(g)}return{cancel:()=>{}}},n.aM=cS,n.aN=function(h){return fetch(h).then(s=>s.arrayBuffer()).then(s=>Hk(s,0,h))},n.aO=Kk,n.aP=class{constructor(h,s,u,f){this.id=h,this.position=s!=null?new kn(s[0],s[1]):new kn(0,0),this.orientation=u??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new ar([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(h,s){if(Ae.mat4.multiply(h.matrix,s,h.matrix),h.meshes)for(const u of h.meshes){const f=ar.applyTransformFast(u.aabb,h.matrix);this.aabb.encapsulate(f)}if(h.children)for(const u of h.children)this._applyTransformations(u,h.matrix)}computeBoundsAndApplyParent(){const h=Ae.mat4.identity([]);for(const s of this.nodes)this._applyTransformations(s,h)}computeModelMatrix(h,s,u,f,g,m,_=!1){tk(this.matrix,this,h.transform,this.position,s,u,f,g,m,_)}upload(h){if(!this.uploaded){for(const s of this.nodes)LE(s,h);for(const s of this.nodes)gS(s);this.uploaded=!0}}destroy(){for(const h of this.nodes)FE(h)}},n.aQ=Xa,n.aR=mw,n.aS=ku,n.aT=Si,n.aU=Iu,n.aV=Ms,n.aW=Wa,n.aX=om,n.aY=lS,n.aZ=function(){hs.isLoading()||hs.isLoaded()||_o()!=="deferred"||Ci()},n.a_=Rh,n.aa=Rn,n.ab=ye,n.ac=o,n.ad=Ae,n.ae=Gr,n.af=zu,n.ag=jl,n.ah=mr,n.ai=Va,n.aj=Uc,n.ak=Ea,n.al=En,n.am=class{constructor(h){this.specification=h}possiblyEvaluate(h,s){return function([u,f]){const g=zi([1,u,f]);return{x:g.x,y:g.y,z:g.z}}(h.expression.evaluate(s))}interpolate(h,s,u){return{x:mr(h.x,s.x,u),y:mr(h.y,s.y,u),z:mr(h.z,s.z,u)}}},n.an=function(h,s,u=0,f=!0){const g=new It(u,u),m=h.sub(g),_=s.add(g),b=[m,new It(_.x,m.y),_,new It(m.x,_.y)];return f&&b.push(m.clone()),b},n.ao=function(h,s){const u=[];for(let f=0;f<h.length;f++){const g=dn(f-1,-1,h.length-1),m=dn(f+1,-1,h.length-1),_=h[f],b=h[m],O=h[g].sub(_).unit(),D=b.sub(_).unit(),C=D.angleWithSep(O.x,O.y),V=O.add(D).unit().mult(-1*s/Math.sin(C/2));u.push(_.add(V))}return u},n.ap=RF,n.aq=ct,n.ar=function(h,s,u=0){return Ae.vec3.fromValues(((s.x-u)*h.scale-h.x)*Va,(s.y*h.scale-h.y)*Va,Qg(s.z,s.y))},n.as=Pr,n.at=$C,n.au=function(h){let s=1/0,u=1/0,f=-1/0,g=-1/0;for(const m of h)s=Math.min(s,m.x),u=Math.min(u,m.y),f=Math.max(f,m.x),g=Math.max(g,m.y);return{min:new It(s,u),max:new It(f,g)}},n.av=Cl,n.aw=ut,n.ax=A,n.ay=ka,n.az=Tl,n.b=function(h){return Ne.API_FONTS_REGEX.test(h)},n.b$=fS,n.b0=D0,n.b1=ao,n.b2=Gf,n.b3=ly,n.b4=K,n.b5=Mu,n.b6=Wd,n.b7=yr,n.b8=Li,n.b9=xA,n.bA=FC,n.bB=RE,n.bC=mF,n.bD=vE,n.bE=QE,n.bF=dn,n.bG=rn,n.bH=Wo,n.bI=function(h,s,u){h[4*s+0]=u[0],h[4*s+1]=u[1],h[4*s+2]=u[2],h[4*s+3]=u[3]},n.bJ=sd,n.bK=id,n.bL=Ap,n.bM=Rs,n.bN=Ec,n.bO=kn,n.bP=xF,n.bQ=Yt,n.bR=Cr,n.bS=qF,n.bT=da,n.bU=wo,n.bV=function(h,s,u,f,g,m,_,b,O){if(O.name==="globe")return wo(h,s,new da(u,f,g),!1);const D=mw({z:u,x:f,y:g},O);return new ar([(m+D.x/D.scale)*s,s*(D.y/D.scale),_],[(m+D.x2/D.scale)*s,s*(D.y2/D.scale),b])},n.bW=function(h,s,u){let f=0;for(let g=0;g<2;++g)h[g]>0&&(f+=(h[g]-0)*(h[g]-0)),s[g]<0&&(f+=(0-s[g])*(0-s[g]));return f},n.bX=Uu,n.bY=hm,n.bZ=function(h){const s=Ae.mat4.identity(new Float64Array(16));Ae.mat4.multiply(s,h.pixelMatrix,h.globeMatrix);const u=[0,Ko,0],f=[0,nc,0];return Ae.vec3.transformMat4(u,u,s),Ae.vec3.transformMat4(f,f,s),[u[0]>0&&u[0]<=h.width&&u[1]>0&&u[1]<=h.height&&!Sl(h,new kn(h.center.lat,90)),f[0]>0&&f[0]<=h.width&&f[1]>0&&f[1]<=h.height&&!Sl(h,new kn(h.center.lat,-90))]},n.b_=function(h,s){const{scale:u}=h.tileTransform,f=u*Va/(h.tileSize*Math.pow(2,s.zoom-h.tileID.overscaledZ+h.tileID.canonical.z));return Ae.mat2.scale(new Float32Array(4),s.inverseAdjustmentMatrix,[f,f])},n.ba=EE,n.bb=function(h,s){const u=jl(s.zoom);if(u===0)return As(h);const f=Pn(h),g=oi(f),m=Cl(f.getWest())*s.worldSize,_=Cl(f.getEast())*s.worldSize,b=Oi(f.getNorth())*s.worldSize,O=Oi(f.getSouth())*s.worldSize,D=[m,b,0],C=[_,b,0],V=[m,O,0],I=[_,O,0],z=Ae.mat4.invert([],s.globeMatrix);return Ae.vec3.transformMat4(D,D,z),Ae.vec3.transformMat4(C,C,z),Ae.vec3.transformMat4(V,V,z),Ae.vec3.transformMat4(I,I,z),g[0]=uo(g[0],V,u),g[1]=uo(g[1],I,u),g[2]=uo(g[2],C,u),g[3]=uo(g[3],D,u),ar.fromPoints(g)},n.bc=bi,n.bd=Ln,n.be=uo,n.bf=Hd,n.bg=kr,n.bh=bS,n.bi=un,n.bj=Mi,n.bk=function(h,s){const u=[];for(const f in h)f in s||u.push(f);return u},n.bl=Cn,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=Ht,n.bo=function(h,s){const{x:u,y:f}=h.point,g=cu(u,f,h.worldSize/h._pixelsPerMercatorPixel,0,0);return Ae.mat4.multiply(g,g,fs(As(s)))},n.bp=sr,n.bq=th,n.br=Za,n.bs=function(h,s,u,f,g){const m=5*s+2;h.float32[m+0]=u,h.float32[m+1]=f,h.float32[m+2]=g},n.bt=oS,n.bu=sF,n.bv=Pe,n.bw=Be,n.bx=jf,n.by=WF,n.bz=LC,n.c=Xe,n.c$=KC,n.c0=ZF,n.c1=function(h){const s=ZF(h,!0);return Ae.mat2.invert([],[s[0],s[1],s[4],s[5]])},n.c2=Or,n.c3=function(h){const{x:s,y:u}=h.point,{lng:f,lat:g}=h._center;return cu(s,u,h.worldSize,f,g)},n.c4=Na,n.c5=Ia,n.c6=Oh,n.c7=function(h){const s=Math.round((h+45+360)%360/90)%4;return Ja[s]},n.c8=45,n.c9=vn,n.cA=zf,n.cB=class extends Yd{constructor(h){super(h),this.current=Xd}set(h,s,u){if(this.fetchUniformLocation(h,s)){for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},n.cC=cr,n.cD=function(h,s,u){const f=jl(u.zoom),g=h.style.map._antialias,m=h.terrain&&h.terrain.exaggeration()>0;return f===0&&!g&&!m},n.cE=function(h){const s=h.pixelsPerMeter,u=s/Wo(1,h.center.lat),f=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.translate(f,f,[h.point.x,h.point.y,0]),Ae.mat4.scale(f,f,[u,u,s]),Float32Array.from(f)},n.cF=Pn,n.cG=function(h){const s=Uu-5;h=ka(h,-80.051129,s)/s*90;const u=Math.pow(Math.abs(Math.sin(Ea(h))),3);return Math.round(u*(Ff.length-1))},n.cH=function(h,s,u,f){const g=s.getNorth(),m=s.getSouth(),_=s.getWest(),b=s.getEast(),O=1<<h.z,D=b-_,C=g-m,V=D/wp,I=-C/Ff[u],z=[0,V,0,I,0,0,g,_,0];if(h.z>0){const M=180/f;Ae.mat3.multiply(z,z,[M/D+1,0,0,0,M/C+1,0,-.5*M/V,.5*M/I,1])}return z[2]=O,z[5]=h.x,z[8]=h.y,z},n.cI=As,n.cJ=function(h,s,u){const f=Ae.mat4.identity(new Float64Array(16)),g=(s/(1<<h)-.5)*Math.PI*2;return Ae.mat4.rotateY(f,u.globeMatrix,g),Float32Array.from(f)},n.cK=class{isDataAvailableAtPoint(h){const s=this._source();if(this.isUsingMockSource()||!s||h.y<0||h.y>1)return!1;const u=s.getSource().maxzoom,f=1<<u,g=Math.floor(h.x),m=Math.floor((h.x-g)*f),_=Math.floor(h.y*f),b=this.findDEMTileFor(new pa(u,g,u,m,_));return!(!b||!b.dem)}getAtPointOrZero(h,s=0){return this.getAtPoint(h,s)||0}getAtPoint(h,s,u=!0){if(this.isUsingMockSource())return null;s==null&&(s=null);const f=this._source();if(!f||h.y<0||h.y>1)return s;const g=f.getSource().maxzoom,m=1<<g,_=Math.floor(h.x),b=h.x-_,O=new pa(g,_,g,Math.floor(b*m),Math.floor(h.y*m)),D=this.findDEMTileFor(O);if(!D||!D.dem)return s;const C=D.dem,V=1<<D.tileID.canonical.z,I=(b*V-D.tileID.canonical.x)*C.dim,z=(h.y*V-D.tileID.canonical.y)*C.dim,M=Math.floor(I),B=Math.floor(z);return(u?this.exaggeration():1)*mr(mr(C.get(M,B),C.get(M,B+1),z-B),mr(C.get(M+1,B),C.get(M+1,B+1),z-B),I-M)}getAtTileOffset(h,s,u){const f=1<<h.canonical.z;return this.getAtPointOrZero(new o(h.wrap+(h.canonical.x+s/Va)/f,(h.canonical.y+u/Va)/f))}getAtTileOffsetFunc(h,s,u,f){return g=>{const m=this.getAtTileOffset(h,g.x,g.y),_=f.upVector(h.canonical,g.x,g.y),b=f.upVectorScale(h.canonical,s,u).metersToTile;return Ae.vec3.scale(_,_,m*b),_}}getForTilePoints(h,s,u,f){if(this.isUsingMockSource())return!1;const g=x0.create(this,h,f);return!!g&&(s.forEach(m=>{m[2]=this.exaggeration()*g.getElevationAt(m[0],m[1],u)}),!0)}getMinMaxForTile(h){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(h);if(!s||!s.dem)return null;const u=s.dem.tree,f=s.tileID,g=1<<h.canonical.z-f.canonical.z;let m=h.canonical.x/g-f.canonical.x,_=h.canonical.y/g-f.canonical.y,b=0;for(let O=0;O<h.canonical.z-f.canonical.z&&!u.leaves[b];O++){m*=2,_*=2;const D=2*Math.floor(_)+Math.floor(m);b=u.childOffsets[b]+D,m%=1,_%=1}return{min:this.exaggeration()*u.minimums[b],max:this.exaggeration()*u.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(h,s,u){throw new Error("Pure virtual method called.")}pointCoordinate(h){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(h){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const h=this.visibleDemTiles;if(h.length===0)return null;let s=!1,u=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const g of h){const m=this.getMinMaxForTile(g.tileID);m&&(u=Math.min(u,m.min),f=Math.max(f,m.max),s=!0)}return s?{min:u,max:f}:null}},n.cL=z1,n.cM=ln,n.cN=function(h,s){return[Math.pow(h[0],2.2)*s,Math.pow(h[1],2.2)*s,Math.pow(h[2],2.2)*s]},n.cO=Xo,n.cP=Xt,n.cQ=us,n.cR=256,n.cS=function(h,s){const u=[0,0,0],f=bi(As(s.canonical));return Ae.vec3.transformMat4(u,u,f),Ae.vec3.transformMat4(u,u,h),u},n.cT=h=>({u_camera_to_center_distance:new Rs(h),u_extrude_scale:new og(h),u_device_pixel_ratio:new Rs(h),u_matrix:new sd(h),u_inv_rot_matrix:new sd(h),u_merc_center:new id(h),u_tile_id:new Ap(h),u_zoom_transition:new Rs(h),u_up_dir:new Ap(h),u_emissive_strength:new Rs(h)}),n.cU=h=>({u_matrix:new sd(h),u_pixels_to_tile_units:new og(h),u_device_pixel_ratio:new Rs(h),u_width_scale:new Rs(h),u_floor_width_scale:new Rs(h),u_units_to_pixels:new id(h),u_dash_image:new Ec(h),u_gradient_image:new Ec(h),u_image_height:new Rs(h),u_texsize:new id(h),u_tile_units_to_pixels:new Rs(h),u_alpha_discard_threshold:new Rs(h),u_trim_offset:new id(h),u_trim_fade_range:new id(h),u_trim_color:new vp(h),u_emissive_strength:new Rs(h),u_zbias_factor:new Rs(h),u_tile_to_meter:new Rs(h)}),n.cV=h=>({u_matrix:new sd(h),u_texsize:new id(h),u_pixels_to_tile_units:new og(h),u_device_pixel_ratio:new Rs(h),u_width_scale:new Rs(h),u_floor_width_scale:new Rs(h),u_image:new Ec(h),u_units_to_pixels:new id(h),u_tile_units_to_pixels:new Rs(h),u_alpha_discard_threshold:new Rs(h),u_trim_offset:new id(h),u_trim_fade_range:new id(h),u_trim_color:new vp(h),u_emissive_strength:new Rs(h),u_zbias_factor:new Rs(h),u_tile_to_meter:new Rs(h)}),n.cW=lu,n.cX=ue,n.cY=xa,n.cZ=Cp,n.c_=(h,s,u,f,g,m)=>{const _=h.transform,b=_.projection.name==="globe";let O;if(m.paint.get("circle-pitch-alignment")==="map")if(b){const C=Xo(_.zoom,s.canonical)*_._pixelsPerMercatorPixel;O=Float32Array.from([C,0,0,C])}else O=_.calculatePixelsToTileUnitsMatrix(u);else O=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const D={u_camera_to_center_distance:h.transform.getCameraToCenterDistance(_.projection),u_matrix:h.translatePosMatrix(s.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:$t.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:Gl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(b){D.u_inv_rot_matrix=f,D.u_merc_center=g,D.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],D.u_zoom_transition=jl(_.zoom);const C=g[0]*Va,V=g[1]*Va;D.u_up_dir=_.projection.upVector(new da(0,0,0),C,V)}return D},n.ca=Tp,n.cb=vp,n.cc=function(h,s,u){const f=Math.sqrt(h*h+s*s+u*u),g=f>0?Math.acos(u/f)*ir:0;let m=h!==0||s!==0?Math.atan2(-s,-h)*ir+90:0;return m<0&&(m+=360),[f,m,g]},n.cd=y,n.ce=ar,n.cf=zi,n.cg=function(h){return[Math.pow(h[0],1/2.2),Math.pow(h[1],1/2.2),Math.pow(h[2],1/2.2)]},n.ch=function(h,s){return h.readFields(lre,{icons:[]},s)},n.ci=function(h){return h({pluginStatus:jn,pluginURL:wn}),Gn.on("pluginStateChange",h),h},n.cj=AS,n.ck=T0,n.cl=_E,n.cm=fc,n.cn=ys,n.co=Ma,n.cp=po,n.cq=Sn,n.cr=function(h){const s=h.indexOf(cp);return s>=0?h.slice(0,s):h},n.cs=function(h){return h.indexOf(cp)>=0},n.ct=function(h){const s=h.indexOf(cp);return s>=0?h.slice(s+1):""},n.cu=function(h){const s=[],u=h.id;return u===void 0&&s.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&s.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},n.cv=function(h,s,u,f){return h.type==="custom"?new Kae(h,s):new ire[h.type](h,s,u,f)},n.cw=Mn,n.cx=class extends D0{constructor(h,s){super(h._vectorTileFeature,h._z,h._x,h._y,h.id),h.state&&(this.state=Object.assign({},h.state)),this.target=s.target,this.namespace=s.namespace,s.properties&&(this.properties=s.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=h.source,this.sourceLayer=h.sourceLayer,this.layer=h.layer)}toJSON(){const h=super.toJSON();return h.target=this.target,h.namespace=this.namespace,h}},n.cy=Gn,n.cz=el,n.d=function(h){return Ne.API_TILEJSON_REGEX.test(h)},n.d$=Wk,n.d0=Ns,n.d1=(h,s,u,f,g,m,_,b)=>{const O=h.transform,D=O.pitch<15?uw(.07,.7,ka((14-O.zoom)/5,0,1)):.07,C=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:cw(h,s,u,f),u_texsize:s.imageAtlasTexture?s.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:O.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:g,u_width_scale:m,u_floor_width_scale:_,u_image:0,u_tile_units_to_pixels:UA(s,O),u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(C?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:D,u_tile_to_meter:y(s.tileID.canonical,0)}},n.d2=(h,s,u,f,g,m,_,b,O)=>{const D=h.transform,C=D.calculatePixelsToTileUnitsMatrix(s),V=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",I=D.pitch<15?uw(.07,.7,ka((14-D.zoom)/5,0,1)):.07;return{u_matrix:cw(h,s,u,f),u_pixels_to_tile_units:C,u_device_pixel_ratio:m,u_width_scale:_,u_floor_width_scale:b,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:BA(u)&&s.lineAtlasTexture?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:UA(s,h.transform),u_alpha_discard_threshold:0,u_trim_offset:O,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(V?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:I,u_tile_to_meter:y(s.tileID.canonical,0)}},n.d3=ua,n.d4=ty,n.d5=Qg,n.d6=ew,n.d7=La,n.d8=m0,n.d9=bp,n.dA=hg,n.dB=dr,n.dC=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.dD=Sr,n.dE=Yo,n.dF=Oc,n.dG=function([h,s,u]){const f=Math.hypot(h,s,u),g=Math.atan2(h,u),m=.5*Math.PI-Math.acos(-s/f);return new kn(Na(g),Na(m))},n.dH=DE,n.dI=function(h){const s=h.navigator?h.navigator.userAgent:null;return!!function(u){if(di==null){const f=u.navigator?u.navigator.userAgent:null;di=!!u.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return di}(h)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dJ=function(h,s){_r=h,Vr=s},n.dK=Sl,n.dL=ic,n.dM=function(h){const s=[0,0,0],u=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.multiply(u,h.pixelMatrix,h.globeMatrix),Ae.vec3.transformMat4(s,s,u),new It(s[0],s[1])},n.dN=function(h,s,u=!1){if(jn===Ni||jn===$n||jn===ii)throw new Error("setRTLTextPlugin cannot be called multiple times.");wn=$t.resolveURL(h),jn=Ni,Qi=s,Zi(),u||Ci()},n.dO=_o,n.dP=function(){AS().acquire(UE)},n.dQ=function(){const h=Tw;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(UE),Tw=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dR=$A,n.dS=function(h){const s=ei();if(!s)return;const u=s.delete(ja);h&&u.catch(h).then(()=>h())},n.dT=Rw,n.dU=kk,n.dV=function(h){WE=$t.resolveURL(h),z0||(z0=new P0(AS(),new Jl)),z0.broadcast("setDracoUrl",WE)},n.dW=Uk,n.dX=function(h){V0=$t.resolveURL(h),z0||(z0=new P0(AS(),new Jl)),z0.broadcast("setMeshoptUrl",V0)},n.dY=Pt,n.dZ=pm,n.d_=Pp,n.da=450,n.db=7,n.dc=$ae,n.dd=Nn,n.de=ig,n.df=256,n.dg=fs,n.dh=No,n.di=Js,n.dj=Fu,n.dk=function(h,s,u,f,g){return ka((h-s)/(u-s)*(g-f)+f,f,g)},n.dl=Wh,n.dm=af,n.dn=class{constructor(h,s,u,f){this.context=h,this.format=f,this.size=u,this.texture=h.gl.createTexture();const[g,m,_]=this.size,{gl:b}=h;b.bindTexture(b.TEXTURE_3D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(!1),b.texImage3D(b.TEXTURE_3D,0,this.format,g,m,_,0,NE(this.format),OE(this.format),s.data)}bind(h,s){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_3D,this.texture),h!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,h),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,h),this.minFilter=h),s!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,s),this.wrapS=s)}destroy(){const{gl:h}=this.context;h.deleteTexture(this.texture),this.texture=null}},n.dp=ME,n.dq=[1,1,1],n.dr=x0,n.ds=b0,n.dt=Kd,n.du=Qh,n.dv=hl,n.dw=mp,n.dx=xh,n.dy=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new It(1/0,1/0),max:new It(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(h,s=!1){const u=DC(new It(0,0),new It(Va,Va),h),f=[];if(s&&!ym(u,this._globalClipBounds))return f;for(const g of this._activeRegions){if(g.hiddenByOverlap||!ym(u,g))continue;const m=fE(g.min,g.max,h);f.push({min:m.min,max:m.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return f}setSources(h){this._setSources(h.map(s=>({getSourceId:()=>s.cache.id,getFootprints:()=>{const u=[];for(const f of s.cache.getVisibleCoordinates()){const g=s.cache.getTile(f).buckets[s.layer];g&&g.updateFootprints(f.toUnwrapped(),u)}return u},getOrder:()=>s.order,getClipMask:()=>s.clipMask,getClipScope:()=>s.clipScope})))}_addSource(h){const s=h.getFootprints();if(s.length===0)return;const u=h.getOrder(),f=h.getClipMask(),g=h.getClipScope();for(const m of s){if(!m.footprint)continue;const _=DC(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:f,clipScope:g})}this._sourceIds.push(h.getSourceId())}_computeReplacement(){this._activeRegions.sort((s,u)=>s.priority-u.priority||f0(s.min,u.min)||f0(s.max,u.max)||s.order-u.order||s.clipMask-u.clipMask||function(f,g){const m=(_,b)=>_+b;return f.length-g.length||f.reduce(m,"").localeCompare(g.reduce(m,""))}(s.clipScope,u.clipScope));let h=this._activeRegions.length!==this._prevRegions.length;if(!h){let s=0;for(;!h&&s!==this._activeRegions.length;){const u=this._activeRegions[s],f=this._prevRegions[s];h=u.priority!==f.priority||!zC(u,f)||u.order!==f.order||u.clipMask!==f.clipMask||!Ht(u.clipScope,f.clipScope),++s}}if(h){++this._updateTime;for(const u of this._activeRegions)u.order!==hg&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const s=u=>{const f=this._activeRegions;if(u>=f.length)return u;const g=f[u].priority;for(;u<f.length&&f[u].priority===g;)++u;return u};if(this._sourceIds.length>1){let u=0,f=s(u);for(;u!==f;){let g=u;const m=u;for(;g!==f;){const _=this._activeRegions[g];_.hiddenByOverlap=!1;for(let b=0;b<m;b++){const O=this._activeRegions[b];if(!O.hiddenByOverlap&&_.order===hg&&ym(_,O)&&(_.hiddenByOverlap=IC(_.footprint,_.tileId,O.footprint,O.tileId),_.hiddenByOverlap))break}++g}u=f,f=s(u)}}}}_setSources(h){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let s=h.length-1;s>=0;s--)this._addSource(h[s]);this._computeReplacement()}},n.dz=class{constructor(h){this._createGrid(h),this._createPoles(h)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const h of this._poleSegments)h.destroy();for(const h of this._gridSegments)h.withSkirts.destroy(),h.withoutSkirts.destroy()}_fillGridMeshWithLods(h,s){const u=new Mu,f=new Ms,g=[],m=h+1+2,_=s[0]+1,b=s[0]+1+(1+s.length),O=(D,C,V)=>{let I=D===m-1?D-2:D===0?D:D-1;return I+=V?24575:0,[I,C]};for(let D=0;D<m;++D)u.emplaceBack(...O(D,0,!0));for(let D=0;D<_;++D)for(let C=0;C<m;++C)u.emplaceBack(...O(C,D,(C===0||C===m-1)&&!0));for(let D=0;D<s.length;++D){const C=s[D];for(let V=0;V<m;++V)u.emplaceBack(...O(V,C,!0))}for(let D=0;D<s.length;++D){const C=f.length,V=s[D]+1+2,I=new Ms;for(let B=0;B<V-1;B++){const J=B===V-2,te=J?m*(b-s.length+D-B):m;for(let he=0;he<m-1;he++){const de=B*m+he;B===0||J||he===0||he===m-2?(I.emplaceBack(de+1,de,de+te),I.emplaceBack(de+te,de+te+1,de+1)):(f.emplaceBack(de+1,de,de+te),f.emplaceBack(de+te,de+te+1,de+1))}}const z=Li.simpleSegment(0,C,u.length,f.length-C);for(let B=0;B<I.uint16.length;B+=3)f.emplaceBack(I.uint16[B],I.uint16[B+1],I.uint16[B+2]);const M=Li.simpleSegment(0,C,u.length,f.length-C);g.push({withoutSkirts:z,withSkirts:M})}return{vertices:u,indices:f,segments:g}}_createGrid(h){const s=this._fillGridMeshWithLods(wp,Ff);this._gridSegments=s.segments,this._gridBuffer=h.createVertexBuffer(s.vertices,yr.members),this._gridIndexBuffer=h.createIndexBuffer(s.indices,!0)}_createPoles(h){const s=new Ms;for(let _=0;_<=wp;_++)s.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=h.createIndexBuffer(s,!0);const u=new Js,f=new Js,g=new Js,m=new Js;this._poleSegments=[];for(let _=0,b=0;_<Oh;_++){const O=360/(1<<_);u.emplaceBack(0,-Tl,0,.5,0),f.emplaceBack(0,-Tl,0,.5,1),g.emplaceBack(0,-Tl,0,.5,.5),m.emplaceBack(0,-Tl,0,.5,.5);for(let D=0;D<=wp;D++){let C=D/wp,V=0;const I=mr(0,O,C),[z,M,B]=Rp(To,Vh,I,Tl);u.emplaceBack(z,M,B,C,V),f.emplaceBack(z,M,B,C,1-V);const J=Ea(I);C=.5+.5*Math.sin(J),V=.5+.5*Math.cos(J),g.emplaceBack(z,M,B,C,V),m.emplaceBack(z,M,B,C,1-V)}this._poleSegments.push(Li.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=h.createVertexBuffer(u,lr,!1),this._poleSouthVertexBuffer=h.createVertexBuffer(f,lr,!1),this._texturedPoleNorthVertexBuffer=h.createVertexBuffer(g,lr,!1),this._texturedPoleSouthVertexBuffer=h.createVertexBuffer(m,lr,!1)}getGridBuffers(h,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[h].withSkirts:this._gridSegments[h].withoutSkirts]}getPoleBuffers(h,s){return[s?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,s?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[h]]}},n.e=Ne,n.e0=Yk,n.e1=xp,n.e2=Uf,n.e3="hd_road_elevation",n.e4=class{static parseFrom(h,s){const u=Bf.parse(h);if(!u)return[];let{vertices:f,features:g}=u;const m=1/y(s);g.sort((D,C)=>D.id-C.id),f.sort((D,C)=>D.id-C.id||D.idx-C.idx),f=f.filter((D,C,V)=>C===V.findIndex(I=>I.id===D.id&&I.idx===D.idx));const _=new Array;let b=0;const O=f.length;for(const D of g){if(D.constantHeight){_.push(new oy(D.id,D.bounds,D.constantHeight));continue}for(;b!==O&&f[b].id<D.id;)b++;if(b===O||f[b].id!==D.id)continue;const C=new Array,V=new Array,I=b;for(;b!==O&&f[b].id===D.id;){const z=f[b];if(C.push({position:z.position,height:z.height,extent:z.extent}),b!==I&&f[b-1].idx===z.idx-1){const M=b-I;V.push({a:M-1,b:M})}b++}_.push(new oy(D.id,D.bounds,void 0,C,V,m))}return _}},n.e5=pr,n.e6=Oo,n.e7=lF,n.e8=R0,n.e9=function(h,s,u,f,g,m,_,b=1,O){h.createArrays(),h.tilePixelRatio=Va/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;const D=h.layers[0].layout,C=h.layers[0]._unevaluatedLayout._values,V={};V.scaleFactor=b,V.textSizeScaleRange=D.get("text-size-scale-range"),V.iconSizeScaleRange=D.get("icon-size-scale-range");const[I,z]=V.textSizeScaleRange,[M,B]=V.iconSizeScaleRange;V.textScaleFactor=ka(V.scaleFactor,I,z),V.iconScaleFactor=ka(V.scaleFactor,M,B);const J=C["text-size"],te=C["icon-size"];if(h.textSizeData.kind==="composite"){const{minZoom:Oe,maxZoom:et}=h.textSizeData;V.compositeTextSizes=[J.possiblyEvaluate(new Rn(Oe),m),J.possiblyEvaluate(new Rn(et),m)]}if(h.iconSizeData.kind==="composite"){const{minZoom:Oe,maxZoom:et}=h.iconSizeData;V.compositeIconSizes=[te.possiblyEvaluate(new Rn(Oe),m),te.possiblyEvaluate(new Rn(et),m)]}V.layoutTextSize=J.possiblyEvaluate(new Rn(_+1),m),V.layoutIconSize=te.possiblyEvaluate(new Rn(_+1),m),V.textMaxSize=J.possiblyEvaluate(new Rn(18),m);const he=D.get("symbol-placement"),de=D.get("text-rotation-alignment")==="map"&&he!=="point",ie=D.get("text-size");let ve=!1;const be=[];for(const Oe of h.features){const et=D.get("text-font").evaluate(Oe,{},m).join(","),We=ie.evaluate(Oe,{},m)*V.textScaleFactor,Ye=V.layoutTextSize.evaluate(Oe,{},m)*V.textScaleFactor,gt=V.layoutIconSize.evaluate(Oe,{},m)*V.iconScaleFactor,tt={horizontal:{},vertical:void 0},vt=Oe.text;let xt,Ct=[0,0];if(vt){const wa=vt.toString(),vr=D.get("text-letter-spacing").evaluate(Oe,{},m)*Be,Ka=D.get("text-line-height").evaluate(Oe,{},m)*Be,ur=Ga(wa)?vr:0,Mr=D.get("text-anchor").evaluate(Oe,{},m),en=D.get("text-variable-anchor");if(!en){const Wn=D.get("text-radial-offset").evaluate(Oe,{},m);Ct=Wn?mF(Mr,[Wn*Be,wE]):D.get("text-offset").evaluate(Oe,{},m).map(Vi=>Vi*Be)}let Br=de?"center":D.get("text-justify").evaluate(Oe,{},m);const gn=he==="point",Qr=gn?D.get("text-max-width").evaluate(Oe,{},m)*Be:1/0,Tn=Wn=>{h.allowVerticalPlacement&&aa(wa)&&(tt.vertical=AE(vt,s,u,g,et,Qr,Ka,Mr,Wn,ur,Ct,th.vertical,!0,Ye,We,O))};if(!de&&en){const Wn=Br==="auto"?en.map(Fr=>RE(Fr)):[Br];let Vi=!1;for(let Fr=0;Fr<Wn.length;Fr++){const Vn=Wn[Fr];if(!tt.horizontal[Vn])if(Vi)tt.horizontal[Vn]=tt.horizontal[0];else{const as=AE(vt,s,u,g,et,Qr,Ka,"center",Vn,ur,Ct,th.horizontal,!1,Ye,We,O);as&&(tt.horizontal[Vn]=as,Vi=as.positionedLines.length===1)}}Tn("left")}else{if(Br==="auto"&&(Br=RE(Mr)),gn||D.get("text-writing-mode").indexOf("horizontal")>=0||!aa(wa)){const Wn=AE(vt,s,u,g,et,Qr,Ka,Mr,Br,ur,Ct,th.horizontal,!1,Ye,We,O);Wn&&(tt.horizontal[Br]=Wn)}Tn(gn?"left":Br)}}let Dt,Nt,jt,Lt,qt,Aa=!1;if(Oe.icon&&Oe.icon.hasPrimary()){const wa=yF(Oe.icon,h.iconSizeData,C["icon-size"],m,h.zoom,Oe,O,V.iconScaleFactor);Dt=wa.iconPrimary,Nt=wa.iconSecondary;const vr=Dt.toString(),Ka=f.get(vr);Ka&&(jt=D.get("icon-offset").evaluate(Oe,{},m),Lt=D.get("icon-anchor").evaluate(Oe,{},m),qt=D.get("icon-text-fit").evaluate(Oe,{},m),xt=Sae(g.get(vr),Nt?g.get(Nt.toString()):void 0,jt,Lt),Aa=Ka.sdf,h.sdfIcons===void 0?h.sdfIcons=Ka.sdf:h.sdfIcons!==Ka.sdf&&$r("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ka.pixelRatio!==h.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}ve=ve||!(!Oe.icon||!Oe.icon.hasSecondary());const ga=TE(tt.horizontal)||tt.vertical;h.iconsInText||(h.iconsInText=!!ga&&ga.iconsInText);const Qa=Ye*V.textScaleFactor/Be,{defaultShapedIcon:Pa,verticallyShapedIcon:za}=zae(h,xt,D,Oe,m,tt,Qa,jt,qt);xt=Pa,be.push({feature:Oe,shapedTextOrientations:tt,shapedText:ga,shapedIcon:xt,iconPrimary:Dt,iconSecondary:Nt,iconOffset:jt,iconAnchor:Lt,verticallyShapedIcon:za,layoutTextSize:Ye,layoutIconSize:gt,textOffset:Ct,isSDFIcon:Aa,iconTextFit:qt})}return{featureData:be,sizes:V,hasAnySecondaryIcon:ve,textAlongLine:de,symbolPlacement:he}},n.ea=uF,n.eb=function(h,s,u,f,g,m,_,b,O,D){const{featureData:C,hasAnySecondaryIcon:V,sizes:I,textAlongLine:z,symbolPlacement:M}=s;for(const B of C){const{shapedIcon:J,verticallyShapedIcon:te,feature:he,shapedTextOrientations:de,shapedText:ie,layoutTextSize:ve,textOffset:be,isSDFIcon:Oe,iconPrimary:et,iconSecondary:We,iconTextFit:Ye,iconOffset:gt}=B;AF(J,D.iconPositions,et,We),AF(te,D.iconPositions,et,We),Vae(de,D.iconPositions),(ie||J)&&Dae(h,he,de,J,te,O,I,ve,0,be,Oe,f,g,_,b,V,Ye,gt,z,M)}u&&h.generateCollisionDebugBuffers(m,h.collisionBoxArray,I.textScaleFactor)},n.ec=Dh,n.ed=SS,n.ee=ma,n.ef=u0,n.eg=Ai,n.eh=v,n.ei=function(h){let s=0;if(new Uint32Array(h,0,1)[0]!==jk){const u=new Uint32Array(h,0,7),[,,f,g,m,_]=u;s=u.byteLength+g+m+_+m,(f!==h.byteLength||s>=h.byteLength)&&$r("Invalid b3dm header information.")}return Hk(h,s)},n.ej=function(h,s){const u=Kk(h);for(const f of u){for(const g of f.meshes)lne(g);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(une(f.lights,s)))}return u},n.ek=yS,n.el=ok,n.em=hs,n.en=function(h){Hr(),Zr!=null&&Zr.then(s=>{s.keys().then(u=>{for(let f=0;f<u.length-h;f++)s.delete(u[f])})})},n.f=function(h){return h.indexOf("mapbox:")===0},n.g=function(h,s){return el(fn(h,{method:"GET"}),s)},n.h=Fe,n.i=function(h){return Ne.API_STYLE_REGEX.test(h)&&!Xe(h)},n.j=function(h){return decodeURIComponent(atob(h).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(h){return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,(s,u)=>String.fromCharCode(+("0x"+u))))},n.l=fn,n.m=Kr,n.n=function(h,s){return el(fn(h,{type:"json"}),s)},n.o=fh,n.p=function(h,s){return el(fn(h,{method:"POST"}),s)},n.q=$t,n.r=bl,n.s=function(h){try{const s=self[h];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=Wt,n.u=function(){return function h(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()},n.v=function(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)},n.w=$r,n.x=function(){return BE||(BE=new $A),BE},n.y=qE,n.z=Ed}),l(["./shared"],function(n){function v(Xt){const Ne=Xt?Xt.url.toString():void 0;return Ne?performance.getEntriesByName(Ne):[]}function R(Xt){if(typeof Xt=="number"||typeof Xt=="boolean"||typeof Xt=="string"||Xt==null)return JSON.stringify(Xt);if(Array.isArray(Xt)){let Fe="[";for(const Xe of Xt)Fe+=`${R(Xe)},`;return`${Fe}]`}let Ne="{";for(const Fe of Object.keys(Xt).sort())Ne+=`${Fe}:${R(Xt[Fe])},`;return`${Ne}}`}function x(Xt){let Ne="";for(const Fe of n.bm)(Xt.type!=="model"||Fe!=="minzoom"&&Fe!=="maxzoom")&&(Ne+=`/${R(Xt[Fe])}`);return Ne}class N{constructor(Ne){this.keyCache={},this._layers={},this._layerConfigs={},Ne&&this.replace(Ne)}replace(Ne,Fe){this._layerConfigs={},this._layers={},this.update(Ne,[],Fe)}update(Ne,Fe,Xe){this._options=Xe;for(const yt of Ne)this._layerConfigs[yt.id]=yt,(this._layers[yt.id]=n.cv(yt,this.scope,null,this._options)).compileFilter(Xe),this.keyCache[yt.id]&&delete this.keyCache[yt.id];for(const yt of Fe)delete this.keyCache[yt],delete this._layerConfigs[yt],delete this._layers[yt];this.familiesBySource={};const wt=function(yt,bt){const Gt={};for(let Kt=0;Kt<yt.length;Kt++){const Wt=yt[Kt];let $t=bt&&bt[Wt.id];!$t&&($t=x(Wt),Wt.type==="line"&&Wt.paint)&&function Ma(ja){return typeof ja=="string"&&ja==="line-progress"||(Array.isArray(ja)?ja.some(Ma):!(!ja||typeof ja!="object")&&Object.values(ja).some(Ma))}(Wt.paint["line-width"])&&($t+=`/${R(Wt.paint["line-width"])}`),bt&&(bt[Wt.id]=$t);let Ta=Gt[$t];Ta||(Ta=Gt[$t]=[]),Ta.push(Wt)}const Et=[];for(const Kt in Gt)Et.push(Gt[Kt]);return Et}(Object.values(this._layerConfigs),this.keyCache);for(const yt of wt){const bt=yt.map(Ta=>this._layers[Ta.id]),Gt=bt[0];if(Gt.visibility==="none")continue;const Et=Gt.source||"";let Kt=this.familiesBySource[Et];Kt||(Kt=this.familiesBySource[Et]={});const Wt=Gt.sourceLayer||"_geojsonTileLayer";let $t=Kt[Wt];$t||($t=Kt[Wt]=[]),$t.push(bt)}}}const L=1*n.d_;class F{constructor(Ne){const Fe={},Xe=[];for(const Gt in Ne){const Et=Ne[Gt],Kt=Fe[Gt]={};for(const Wt in Et.glyphs){const $t=Et.glyphs[+Wt];if(!$t||$t.bitmap.width===0||$t.bitmap.height===0)continue;const Ta=$t.metrics.localGlyph?L:1,Ma={x:0,y:0,w:$t.bitmap.width+2*Ta,h:$t.bitmap.height+2*Ta};Xe.push(Ma),Kt[Wt]=Ma}}const{w:wt,h:yt}=n.H(Xe),bt=new n.dZ({width:wt||1,height:yt||1});for(const Gt in Ne){const Et=Ne[Gt];for(const Kt in Et.glyphs){const Wt=Et.glyphs[+Kt];if(!Wt||Wt.bitmap.width===0||Wt.bitmap.height===0)continue;const $t=Fe[Gt][Kt],Ta=Wt.metrics.localGlyph?L:1;n.dZ.copy(Wt.bitmap,bt,{x:0,y:0},{x:$t.x+Ta,y:$t.y+Ta},Wt.bitmap)}}this.image=bt,this.positions=Fe}}n.dY(F,"GlyphAtlas");class j{constructor(Ne){this.tileID=new n.aH(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.tileZoom=Ne.tileZoom,this.uid=Ne.uid,this.zoom=Ne.zoom,this.lut=Ne.lut,this.canonical=Ne.tileID.canonical,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.scope=Ne.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ne.showCollisionBoxes,this.collectResourceTiming=!!Ne.request&&Ne.request.collectResourceTiming,this.promoteId=Ne.promoteId,this.isSymbolTile=Ne.isSymbolTile,this.tileTransform=n.aR(Ne.tileID.canonical,Ne.projection),this.projection=Ne.projection,this.worldview=Ne.worldview,this.localizableLayerIds=Ne.localizableLayerIds,this.brightness=Ne.brightness,this.extraShadowCaster=!!Ne.extraShadowCaster,this.tessellationStep=Ne.tessellationStep,this.scaleFactor=Ne.scaleFactor}parse(Ne,Fe,Xe,wt,yt){this.status="parsing",this.data=Ne,this.collisionBoxArray=new n.aX;const bt=new n.d$(Object.keys(Ne.layers).sort()),Gt=new n.e0(this.tileID,this.promoteId);Gt.bucketLayerIDs=[];const Et={},Kt=new n.e1(256,256),Wt={featureIndex:Gt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Kt,availableImages:Xe,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},$t=Fe.familiesBySource[this.source];for(const Hr in $t){const An=Ne.layers[Hr];if(!An)continue;let Kr=!1,Fn=!1,Di=!1;for(const Uo of $t[Hr])Uo[0].type==="symbol"?Kr=!0:Fn=!0,Uo[0].is3D()&&Uo[0].type!=="model"&&(Di=!0);if(this.extraShadowCaster&&!Di||this.isSymbolTile===!0&&!Kr||this.isSymbolTile===!1&&!Fn)continue;An.version===1&&n.w(`Vector tile source "${this.source}" layer "${Hr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ki=bt.encode(Hr),bs=[];let xs=!1;for(let Uo=0,Ps=0;Uo<An.length;Uo++){const qs=An.feature(Uo),fc=Gt.getId(qs,Hr);if(this.localizableLayerIds&&this.localizableLayerIds.has(Hr)){const el=qs.properties?qs.properties.worldview:null;if(this.worldview&&typeof el=="string")if(el==="all")qs.properties.$localized=!0;else{if(!el.split(",").includes(this.worldview))continue;qs.properties.$localized=!0,qs.properties.worldview=this.worldview}}!xs&&qs.properties&&qs.properties.hasOwnProperty(n.e2)&&(xs=!0),bs.push({feature:qs,id:fc,index:Ps,sourceLayerIndex:Ki}),Ps++}xs&&!Wt.elevationFeatures&&Ne.layers.hasOwnProperty(n.e3)&&(Wt.elevationFeatures=n.e4.parseFrom(Ne.layers[n.e3],this.canonical));for(const Uo of $t[Hr]){const Ps=Uo[0];(!this.extraShadowCaster||Ps.is3D()&&Ps.type!=="model")&&(this.isSymbolTile!==void 0&&Ps.type==="symbol"!==this.isSymbolTile||Ps.minzoom&&this.zoom<Math.floor(Ps.minzoom)||Ps.maxzoom&&this.zoom>=Ps.maxzoom||Ps.visibility!=="none"&&(H(Uo,this.zoom,Wt.brightness,Xe),(Et[Ps.id]=Ps.createBucket({index:Gt.bucketLayerIDs.length,layers:Uo,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ki,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(bs,Wt,this.tileID.canonical,this.tileTransform),Gt.bucketLayerIDs.push(Uo.map(qs=>n.C(qs.id,qs.scope)))))}}let Ta,Ma,ja,_r,Vr,zr;Kt.trim();const Zr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},In=()=>{if(Ta)return this.status="done",yt(Ta);if(this.extraShadowCaster)this.status="done",yt(null,{buckets:Object.values(Et).filter(Hr=>!Hr.isEmpty()),featureIndex:Gt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Wt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Ma&&ja&&_r){const Hr=new F(Ma),An=new Map;for(const[Di,Ki]of ja.entries()){const{imagePosition:bs}=n.e7(Di,Ki,n.e8);An.set(Di,bs)}const Kr={};for(const Di in Et){const Ki=Et[Di];Ki instanceof n.aY&&(H(Ki.layers,this.zoom,Wt.brightness,Xe),Kr[Di]=n.e9(Ki,Ma,Hr.positions,ja,An,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio))}const Fn={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(wt,ja,Vr,()=>{Fn.iconsPending=!1,ei(Kr,Hr,Fn)}),this.rasterizeIfNeeded(wt,_r,zr,()=>{Fn.patternsPending=!1,ei(Kr,Hr,Fn)})}},ei=(Hr,An,Kr,Fn)=>{if(Kr.iconsPending||Kr.patternsPending)return;const Di=new n.ea(ja,_r,this.lut);for(const Ki in Et){const bs=Et[Ki];if(Ki in Hr)n.eb(bs,Hr[Ki],this.showCollisionBoxes,Xe,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,ja,Di);else if(bs.hasPattern&&(bs instanceof n.b2||bs instanceof n.b3||bs instanceof n.d8)){H(bs.layers,this.zoom,Wt.brightness,Xe);const xs=Object.fromEntries(Di.patternPositions);bs.addFeatures(Wt,this.tileID.canonical,xs,Xe,this.tileTransform,this.brightness)}}this.status="done",yt(null,{buckets:Object.values(Et).filter(Ki=>!Ki.isEmpty()),featureIndex:Gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:An.image,lineAtlas:Kt,imageAtlas:Di,brightness:Wt.brightness})};if(!this.extraShadowCaster){const Hr=n.e5(Wt.glyphDependencies,Fn=>Object.keys(Fn).map(Number));Object.keys(Hr).length?wt.send("getGlyphs",{uid:this.uid,stacks:Hr,scope:this.scope},(Fn,Di)=>{Ta||(Ta=Fn,Ma=Di,In())},void 0,!1,Zr):Ma={};const An=Array.from(Wt.iconDependencies.keys()).map(Fn=>n.I.parse(Fn));An.length?wt.send("getImages",{images:An,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Fn,Di)=>{Ta||(Ta=Fn,ja=new Map,Vr=this.updateImageMapAndGetImageTaskQueue(ja,Di,Wt.iconDependencies),In())},void 0,!1,Zr):(ja=new Map,Vr=new Map);const Kr=Array.from(Wt.patternDependencies.keys()).map(Fn=>n.I.parse(Fn));Kr.length?wt.send("getImages",{images:Kr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Fn,Di)=>{Ta||(Ta=Fn,_r=new Map,zr=this.updateImageMapAndGetImageTaskQueue(_r,Di,Wt.patternDependencies),In())},void 0,!1,Zr):(_r=new Map,zr=new Map)}if(Wt.elevationFeatures&&Wt.elevationFeatures.length>0){const Hr=[];for(const Kr of Object.values(Et))if(Kr instanceof n.b3){const Fn=Kr.getUnevaluatedPortalGraph();Fn&&Hr.push(Fn)}const An=n.e6.evaluate(Hr);for(const Kr of Object.values(Et))Kr instanceof n.b3&&Kr.setEvaluatedPortalGraph(An)}In()}rasterizeIfNeeded(Ne,Fe,Xe,wt){Array.from(Fe.values()).some(yt=>yt.usvg)?this.rasterize(Ne,Fe,Xe,wt):wt()}updateImageMapAndGetImageTaskQueue(Ne,Fe,Xe){const wt=new Map;for(const yt of Fe.keys()){const bt=Xe.get(yt)||[];for(const Gt of bt){const Et=Gt.toString(),Kt=Fe.get(Gt.id.toString());Kt.usvg?wt.has(Et)||(wt.set(Et,Gt),Ne.set(Et,Object.assign({},Kt))):Ne.set(Et,Kt)}}return wt}rasterize(Ne,Fe,Xe,wt){this.rasterizeTask=Ne.send("rasterizeImages",{scope:this.scope,tasks:Xe},(yt,bt)=>{if(!yt)for(const[Gt,Et]of bt.entries()){const Kt=Object.assign(Fe.get(Gt),{data:Et});Fe.set(Gt,Kt)}wt()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function H(Xt,Ne,Fe,Xe){const wt=new n.aa(Ne,{brightness:Fe});for(const yt of Xt)yt.recalculate(wt,Xe)}class q extends n.E{constructor(Ne,Fe,Xe,wt,yt,bt){super(),this.actor=Ne,this.layerIndex=Fe,this.availableImages=Xe,this.loadVectorData=yt||n.aE,this.loading={},this.loaded={},this.deduped=new n.aD(Ne.scheduler),this.isSpriteLoaded=wt,this.scheduler=Ne.scheduler,this.brightness=bt}loadTile(Ne,Fe){const Xe=Ne.uid,wt=Ne&&Ne.request,yt=wt&&wt.collectResourceTiming,bt=this.loading[Xe]=new j(Ne);bt.abort=this.loadVectorData(Ne,(Gt,Et)=>{const Kt=!this.loading[Xe];if(delete this.loading[Xe],bt.cancelRasterize(),Kt||Gt||!Et)return bt.status="done",Kt||(this.loaded[Xe]=bt),Fe(Gt);const Wt=Et.rawData,$t={};Et.expires&&($t.expires=Et.expires),Et.cacheControl&&($t.cacheControl=Et.cacheControl),bt.vectorTile=Et.vectorTile||new n.ec.VectorTile(new n.bi(Wt));const Ta=()=>{bt.parse(bt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ma,ja)=>{if(Ma||!ja)return Fe(Ma);const _r={};if(yt){const Vr=v(wt);Vr.length>0&&(_r.resourceTiming=JSON.parse(JSON.stringify(Vr)))}Fe(null,n.l({rawTileData:Wt.slice(0)},ja,$t,_r))})};this.isSpriteLoaded?Ta():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ta,{type:"parseTile",isSymbolTile:Ne.isSymbolTile,zoom:Ne.tileZoom}):Ta()}),this.loaded=this.loaded||{},this.loaded[Xe]=bt})}reloadTile(Ne,Fe){const Xe=this.loaded,wt=Ne.uid;if(Xe&&Xe[wt]){const yt=Xe[wt];yt.scaleFactor=Ne.scaleFactor,yt.showCollisionBoxes=Ne.showCollisionBoxes,yt.projection=Ne.projection,yt.brightness=Ne.brightness,yt.tileTransform=n.aR(Ne.tileID.canonical,Ne.projection),yt.extraShadowCaster=Ne.extraShadowCaster,yt.lut=Ne.lut;const bt=(Gt,Et)=>{const Kt=yt.reloadCallback;Kt&&(delete yt.reloadCallback,yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,Kt)),Fe(Gt,Et)};yt.status==="parsing"?yt.reloadCallback=bt:yt.status==="done"&&(yt.vectorTile?yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,bt):bt())}else Fe(null,void 0)}abortTile(Ne,Fe){const Xe=Ne.uid,wt=this.loading[Xe];wt&&(wt.abort&&wt.abort(),delete this.loading[Xe]),Fe()}removeTile(Ne,Fe){const Xe=this.loaded,wt=Ne.uid;Xe&&Xe[wt]&&delete Xe[wt],Fe()}}class W{loadTile(Ne,Fe){const{uid:Xe,encoding:wt,rawImageData:yt,padding:bt}=Ne,Gt=ImageBitmap&&yt instanceof ImageBitmap?this.getImageData(yt,bt):yt;Fe(null,new n.ed(Xe,Gt,wt,bt<1))}reloadTile(Ne,Fe){Fe(null,null)}abortTile(Ne,Fe){Fe()}removeTile(Ne,Fe){Fe()}getImageData(Ne,Fe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ne.width,Ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ne.width,this.offscreenCanvas.height=Ne.height,this.offscreenCanvasContext.drawImage(Ne,0,0,Ne.width,Ne.height);const Xe=this.offscreenCanvasContext.getImageData(-Fe,-Fe,Ne.width+2*Fe,Ne.height+2*Fe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Xe}}n.bh.setPbf(n.bi);class ee{constructor(Ne){this._mrt=new n.bh(Ne.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=Ne.uid,this.tileID=Ne.tileID,this.source=Ne.source}parse(Ne,Fe){const Xe=this._mrt;this.status="parsing",this._entireBuffer=Ne;try{Xe.parseHeader(Ne),this._isHeaderLoaded=!0;const wt=[];for(const yt in Xe.layers){const bt=Xe.getLayer(yt),Gt=bt.getDataRange(bt.getBandList()),Et=Xe.createDecodingTask(Gt),Kt=Ne.slice(Gt.firstByte,Gt.lastByte+1),Wt=n.bh.performDecoding(Kt,Et).then($t=>Et.complete(null,$t)).catch($t=>Et.complete($t,null));wt.push(Wt)}Promise.allSettled(wt).then(()=>Fe(null,Xe))}catch(wt){Fe(wt)}}}class oe{constructor(Ne){this.actor=Ne,this.loading={},this.loaded={}}loadTile(Ne,Fe){const Xe=Ne.uid,wt=Ne.request,yt=this.loading[Xe]=new ee(Ne),{cancel:bt}=n.bj(wt,(Gt,Et,Kt,Wt)=>{const $t=!this.loading[Xe];if(delete this.loading[Xe],$t||Gt||!Et)return yt.status="done",$t||(this.loaded[Xe]=yt),Fe(Gt);yt.parse(Et,(Ta,Ma)=>{if(Ta||!Ma)return Fe(Ta);Fe(null,Ma,Kt,Wt)}),this.loaded[Xe]=yt});yt.abort=bt}reloadTile(Ne,Fe){Fe(null,void 0)}abortTile(Ne,Fe){const Xe=Ne.uid,wt=this.loading[Xe];wt&&(wt.abort&&wt.abort(),delete this.loading[Xe]),Fe()}removeTile(Ne,Fe){const Xe=Ne.uid;this.loaded[Xe]&&delete this.loaded[Xe],Fe()}decodeRasterArray({task:Ne,buffer:Fe},Xe){n.bh.performDecoding(Fe,Ne).then(wt=>Xe(null,wt)).catch(wt=>Xe(wt))}}const fe=n.ec.VectorTileFeature.prototype.toGeoJSON;class se{constructor(Ne){this._feature=Ne,this.extent=n.ai,this.type=Ne.type,this.properties=Ne.tags,"id"in Ne&&!isNaN(Ne.id)&&(this.id=parseInt(Ne.id,10))}loadGeometry(){if(this._feature.type===1){const Ne=[];for(const Fe of this._feature.geometry)Ne.push([new n.P(Fe[0],Fe[1])]);return Ne}{const Ne=[];for(const Fe of this._feature.geometry){const Xe=[];for(const wt of Fe)Xe.push(new n.P(wt[0],wt[1]));Ne.push(Xe)}return Ne}}toGeoJSON(Ne,Fe,Xe){return fe.call(this,Ne,Fe,Xe)}}class me{constructor(Ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ai,this.length=Ne.length,this._features=Ne}feature(Ne){return new se(this._features[Ne])}}const ge=64/4096,Re=128;class we{constructor(){this.features=new Map}clear(){this.features.clear()}load(Ne=[],Fe){for(const Xe of Ne){const wt=Xe.id;if(wt==null)continue;let yt=this.features.get(wt);yt&&this.updateCache(yt,Fe),Xe.geometry?(yt=ae(Xe),this.updateCache(yt,Fe),this.features.set(wt,yt)):this.features.delete(wt),this.updateCache(yt,Fe)}}updateCache(Ne,Fe){for(const{canonical:Xe,uid:wt}of Object.values(Fe)){const{z:yt,x:bt,y:Gt}=Xe;Ee(Ne,Math.pow(2,yt),bt,Gt)&&delete Fe[wt]}}getTile(Ne,Fe,Xe){const wt=Math.pow(2,Ne),yt=[];for(const bt of this.features.values())Ee(bt,wt,Fe,Xe)&&yt.push(ze(bt,wt,Fe,Xe));return{features:yt}}getFeatures(){return[...this.features.values()]}}function Ee({minX:Xt,minY:Ne,maxX:Fe,maxY:Xe},wt,yt,bt){return Xt<(yt+1+ge)/wt&&Ne<(bt+1+ge)/wt&&Fe>(yt-ge)/wt&&Xe>(bt-ge)/wt}function ae(Xt){const{id:Ne,geometry:Fe,properties:Xe}=Xt;if(!Fe)return;if(Fe.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:wt,coordinates:yt}=Fe,bt={id:Ne,type:1,geometry:[],tags:Xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Gt=bt.geometry;if(wt==="Point")_e(yt,Gt,bt);else if(wt==="MultiPoint")for(const Et of yt)_e(Et,Gt,bt);else if(wt==="LineString")bt.type=2,Ie(yt,Gt,bt);else if(wt==="MultiLineString")bt.type=2,xe(yt,Gt,bt);else if(wt==="Polygon")bt.type=3,xe(yt,Gt,bt,!0);else{if(wt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");bt.type=3;for(const Et of yt)xe(Et,Gt,bt,!0)}return bt}function _e([Xt,Ne],Fe,Xe){const wt=n.av(Xt);let yt=n.aC(Ne);yt=yt<0?0:yt>1?1:yt,Fe.push(wt,yt),Xe.minX=Math.min(Xe.minX,wt),Xe.minY=Math.min(Xe.minY,yt),Xe.maxX=Math.max(Xe.maxX,wt),Xe.maxY=Math.max(Xe.maxY,yt)}function Ie(Xt,Ne,Fe,Xe=!1,wt=!1){const yt=[];for(const bt of Xt)_e(bt,yt,Fe);Ne.push(yt),Xe&&function(bt,Gt){let Et=0;for(let Kt=0,Wt=bt.length,$t=Wt-2;Kt<Wt;$t=Kt,Kt+=2)Et+=(bt[Kt]-bt[$t])*(bt[Kt+1]+bt[$t+1]);if(Et>0===Gt)for(let Kt=0,Wt=bt.length;Kt<Wt/2;Kt+=2){const $t=bt[Kt],Ta=bt[Kt+1];bt[Kt]=bt[Wt-2-Kt],bt[Kt+1]=bt[Wt-1-Kt],bt[Wt-2-Kt]=$t,bt[Wt-1-Kt]=Ta}}(yt,wt)}function xe(Xt,Ne,Fe,Xe=!1){for(let wt=0;wt<Xt.length;wt++)Ie(Xt[wt],Ne,Fe,Xe,wt===0)}function ze(Xt,Ne,Fe,Xe){const{id:wt,type:yt,geometry:bt,tags:Gt}=Xt,Et=[];if(yt===1)(function(Kt,Wt,$t,Ta,Ma){for(let ja=0;ja<Kt.length;ja+=2){const _r=Math.round(n.ai*(Kt[ja+0]*Wt-$t)),Vr=Math.round(n.ai*(Kt[ja+1]*Wt-Ta));Ma.push([_r,Vr])}})(bt,Ne,Fe,Xe,Et);else for(const Kt of bt)Me(Kt,Ne,Fe,Xe,Et);return{id:wt,type:yt,geometry:Et,tags:Gt}}function Me(Xt,Ne,Fe,Xe,wt){const bt=n.ai+Re;let Gt;for(let Et=0;Et<Xt.length-2;Et+=2){let Kt=Math.round(n.ai*(Xt[Et+0]*Ne-Fe)),Wt=Math.round(n.ai*(Xt[Et+1]*Ne-Xe)),$t=Math.round(n.ai*(Xt[Et+2]*Ne-Fe)),Ta=Math.round(n.ai*(Xt[Et+3]*Ne-Xe));const Ma=$t-Kt,ja=Ta-Wt;Kt<-128&&$t<-128||(Kt<-128?(Wt+=Math.round(ja*((-128-Kt)/Ma)),Kt=-128):$t<-128&&(Ta=Wt+Math.round(ja*((-128-Kt)/Ma)),$t=-128),Wt<-128&&Ta<-128||(Wt<-128?(Kt+=Math.round(Ma*((-128-Wt)/ja)),Wt=-128):Ta<-128&&($t=Kt+Math.round(Ma*((-128-Wt)/ja)),Ta=-128),Kt>=bt&&$t>=bt||(Kt>=bt?(Wt+=Math.round(ja*((bt-Kt)/Ma)),Kt=bt):$t>=bt&&(Ta=Wt+Math.round(ja*((bt-Kt)/Ma)),$t=bt),Wt>=bt&&Ta>=bt||(Wt>=bt?(Kt+=Math.round(Ma*((bt-Wt)/ja)),Wt=bt):Ta>=bt&&($t=Kt+Math.round(Ma*((bt-Wt)/ja)),Ta=bt),Gt&&Kt===Gt[Gt.length-1][0]&&Wt===Gt[Gt.length-1][1]||(Gt=[[Kt,Wt]],wt.push(Gt)),Gt.push([$t,Ta])))))}}var je,Ue,Qe,ke={exports:{}},Ge=function(){if(Qe)return ke.exports;Qe=1;var Xt=n.eg(),Ne=function(){if(Ue)return je;Ue=1;var Wt=n.ee(),$t=n.ef().VectorTileFeature;function Ta(ja,_r){this.options=_r||{},this.features=ja,this.length=ja.length}function Ma(ja,_r){this.id=typeof ja.id=="number"?ja.id:void 0,this.type=ja.type,this.rawGeometry=ja.type===1?[ja.geometry]:ja.geometry,this.properties=ja.tags,this.extent=_r||4096}return je=Ta,Ta.prototype.feature=function(ja){return new Ma(this.features[ja],this.options.extent)},Ma.prototype.loadGeometry=function(){var ja=this.rawGeometry;this.geometry=[];for(var _r=0;_r<ja.length;_r++){for(var Vr=ja[_r],zr=[],Zr=0;Zr<Vr.length;Zr++)zr.push(new Wt(Vr[Zr][0],Vr[Zr][1]));this.geometry.push(zr)}return this.geometry},Ma.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ja=this.geometry,_r=1/0,Vr=-1/0,zr=1/0,Zr=-1/0,In=0;In<ja.length;In++)for(var ei=ja[In],Hr=0;Hr<ei.length;Hr++){var An=ei[Hr];_r=Math.min(_r,An.x),Vr=Math.max(Vr,An.x),zr=Math.min(zr,An.y),Zr=Math.max(Zr,An.y)}return[_r,zr,Vr,Zr]},Ma.prototype.toGeoJSON=$t.prototype.toGeoJSON,je}();function Fe(Wt){var $t=new Xt;return function(Ta,Ma){for(var ja in Ta.layers)Ma.writeMessage(3,Xe,Ta.layers[ja])}(Wt,$t),$t.finish()}function Xe(Wt,$t){var Ta;$t.writeVarintField(15,Wt.version||1),$t.writeStringField(1,Wt.name||""),$t.writeVarintField(5,Wt.extent||4096);var Ma={keys:[],values:[],keycache:{},valuecache:{}};for(Ta=0;Ta<Wt.length;Ta++)Ma.feature=Wt.feature(Ta),$t.writeMessage(2,wt,Ma);var ja=Ma.keys;for(Ta=0;Ta<ja.length;Ta++)$t.writeStringField(3,ja[Ta]);var _r=Ma.values;for(Ta=0;Ta<_r.length;Ta++)$t.writeMessage(4,Kt,_r[Ta])}function wt(Wt,$t){var Ta=Wt.feature;Ta.id!==void 0&&$t.writeVarintField(1,Ta.id),$t.writeMessage(2,yt,Wt),$t.writeVarintField(3,Ta.type),$t.writeMessage(4,Et,Ta)}function yt(Wt,$t){var Ta=Wt.feature,Ma=Wt.keys,ja=Wt.values,_r=Wt.keycache,Vr=Wt.valuecache;for(var zr in Ta.properties){var Zr=Ta.properties[zr],In=_r[zr];if(Zr!==null){In===void 0&&(Ma.push(zr),_r[zr]=In=Ma.length-1),$t.writeVarint(In);var ei=typeof Zr;ei!=="string"&&ei!=="boolean"&&ei!=="number"&&(Zr=JSON.stringify(Zr));var Hr=ei+":"+Zr,An=Vr[Hr];An===void 0&&(ja.push(Zr),Vr[Hr]=An=ja.length-1),$t.writeVarint(An)}}}function bt(Wt,$t){return($t<<3)+(7&Wt)}function Gt(Wt){return Wt<<1^Wt>>31}function Et(Wt,$t){for(var Ta=Wt.loadGeometry(),Ma=Wt.type,ja=0,_r=0,Vr=Ta.length,zr=0;zr<Vr;zr++){var Zr=Ta[zr],In=1;Ma===1&&(In=Zr.length),$t.writeVarint(bt(1,In));for(var ei=Ma===3?Zr.length-1:Zr.length,Hr=0;Hr<ei;Hr++){Hr===1&&Ma!==1&&$t.writeVarint(bt(2,ei-1));var An=Zr[Hr].x-ja,Kr=Zr[Hr].y-_r;$t.writeVarint(Gt(An)),$t.writeVarint(Gt(Kr)),ja+=An,_r+=Kr}Ma===3&&$t.writeVarint(bt(7,1))}}function Kt(Wt,$t){var Ta=typeof Wt;Ta==="string"?$t.writeStringField(1,Wt):Ta==="boolean"?$t.writeBooleanField(7,Wt):Ta==="number"&&(Wt%1!=0?$t.writeDoubleField(3,Wt):Wt<0?$t.writeSVarintField(6,Wt):$t.writeVarintField(5,Wt))}return ke.exports=Fe,ke.exports.fromVectorTileJs=Fe,ke.exports.fromGeojsonVt=function(Wt,$t){$t=$t||{};var Ta={};for(var Ma in Wt)Ta[Ma]=new Ne(Wt[Ma].features,$t),Ta[Ma].name=Ma,Ta[Ma].version=$t.version,Ta[Ma].extent=$t.extent;return Fe({layers:Ta})},ke.exports.GeoJSONWrapper=Ne,ke.exports}(),Se=n.eh(Ge);const Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xt=>Xt},qe=Math.fround||(Ze=new Float32Array(1),Xt=>(Ze[0]=+Xt,Ze[0]));var Ze;const lt=3,st=5,ht=6;class He{constructor(Ne){this.options=Object.assign(Object.create(Te),Ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ne){const{log:Fe,minZoom:Xe,maxZoom:wt}=this.options;Fe&&console.time("total time");const yt=`prepare ${Ne.length} points`;Fe&&console.time(yt),this.points=Ne;const bt=[];for(let Et=0;Et<Ne.length;Et++){const Kt=Ne[Et];if(!Kt.geometry)continue;const[Wt,$t]=Kt.geometry.coordinates,Ta=qe(kt(Wt)),Ma=qe(ma($t));bt.push(Ta,Ma,1/0,Et,-1,1),this.options.reduce&&bt.push(0)}let Gt=this.trees[wt+1]=this._createTree(bt);Fe&&console.timeEnd(yt);for(let Et=wt;Et>=Xe;Et--){const Kt=+Date.now();Gt=this.trees[Et]=this._createTree(this._cluster(Gt,Et)),Fe&&console.log("z%d: %d clusters in %dms",Et,Gt.numItems,+Date.now()-Kt)}return Fe&&console.timeEnd("total time"),this}getClusters(Ne,Fe){let Xe=((Ne[0]+180)%360+360)%360-180;const wt=Math.max(-90,Math.min(90,Ne[1]));let yt=Ne[2]===180?180:((Ne[2]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,Ne[3]));if(Ne[2]-Ne[0]>=360)Xe=-180,yt=180;else if(Xe>yt){const $t=this.getClusters([Xe,wt,180,bt],Fe),Ta=this.getClusters([-180,wt,yt,bt],Fe);return $t.concat(Ta)}const Gt=this.trees[this._limitZoom(Fe)],Et=Gt.range(kt(Xe),ma(bt),kt(yt),ma(wt)),Kt=Gt.data,Wt=[];for(const $t of Et){const Ta=this.stride*$t;Wt.push(Kt[Ta+st]>1?Ae(Kt,Ta,this.clusterProps):this.points[Kt[Ta+lt]])}return Wt}getChildren(Ne){const Fe=this._getOriginId(Ne),Xe=this._getOriginZoom(Ne),wt="No cluster with the specified id.",yt=this.trees[Xe];if(!yt)throw new Error(wt);const bt=yt.data;if(Fe*this.stride>=bt.length)throw new Error(wt);const Gt=this.options.radius/(this.options.extent*Math.pow(2,Xe-1)),Et=yt.within(bt[Fe*this.stride],bt[Fe*this.stride+1],Gt),Kt=[];for(const Wt of Et){const $t=Wt*this.stride;bt[$t+4]===Ne&&Kt.push(bt[$t+st]>1?Ae(bt,$t,this.clusterProps):this.points[bt[$t+lt]])}if(Kt.length===0)throw new Error(wt);return Kt}getLeaves(Ne,Fe,Xe){const wt=[];return this._appendLeaves(wt,Ne,Fe=Fe||10,Xe=Xe||0,0),wt}getTile(Ne,Fe,Xe){const wt=this.trees[this._limitZoom(Ne)],yt=Math.pow(2,Ne),{extent:bt,radius:Gt}=this.options,Et=Gt/bt,Kt=(Xe-Et)/yt,Wt=(Xe+1+Et)/yt,$t={features:[]};return this._addTileFeatures(wt.range((Fe-Et)/yt,Kt,(Fe+1+Et)/yt,Wt),wt.data,Fe,Xe,yt,$t),Fe===0&&this._addTileFeatures(wt.range(1-Et/yt,Kt,1,Wt),wt.data,yt,Xe,yt,$t),Fe===yt-1&&this._addTileFeatures(wt.range(0,Kt,Et/yt,Wt),wt.data,-1,Xe,yt,$t),$t.features.length?$t:null}getClusterExpansionZoom(Ne){let Fe=this._getOriginZoom(Ne)-1;for(;Fe<=this.options.maxZoom;){const Xe=this.getChildren(Ne);if(Fe++,Xe.length!==1)break;Ne=Xe[0].properties.cluster_id}return Fe}_appendLeaves(Ne,Fe,Xe,wt,yt){const bt=this.getChildren(Fe);for(const Gt of bt){const Et=Gt.properties;if(Et&&Et.cluster?yt+Et.point_count<=wt?yt+=Et.point_count:yt=this._appendLeaves(Ne,Et.cluster_id,Xe,wt,yt):yt<wt?yt++:Ne.push(Gt),Ne.length===Xe)break}return yt}_createTree(Ne){const Fe=new n.bE(Ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Xe=0;Xe<Ne.length;Xe+=this.stride)Fe.add(Ne[Xe],Ne[Xe+1]);return Fe.finish(),Fe.data=Ne,Fe}_addTileFeatures(Ne,Fe,Xe,wt,yt,bt){for(const Gt of Ne){const Et=Gt*this.stride,Kt=Fe[Et+st]>1;let Wt,$t,Ta;if(Kt)Wt=zt(Fe,Et,this.clusterProps),$t=Fe[Et],Ta=Fe[Et+1];else{const _r=this.points[Fe[Et+lt]];Wt=_r.properties;const[Vr,zr]=_r.geometry.coordinates;$t=kt(Vr),Ta=ma(zr)}const Ma={type:1,geometry:[[Math.round(this.options.extent*($t*yt-Xe)),Math.round(this.options.extent*(Ta*yt-wt))]],tags:Wt};let ja;ja=Kt||this.options.generateId?Fe[Et+lt]:this.points[Fe[Et+lt]].id,ja!==void 0&&(Ma.id=ja),bt.features.push(Ma)}}_limitZoom(Ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ne),this.options.maxZoom+1))}_cluster(Ne,Fe){const{radius:Xe,extent:wt,reduce:yt,minPoints:bt}=this.options,Gt=Xe/(wt*Math.pow(2,Fe)),Et=Ne.data,Kt=[],Wt=this.stride;for(let $t=0;$t<Et.length;$t+=Wt){if(Et[$t+2]<=Fe)continue;Et[$t+2]=Fe;const Ta=Et[$t],Ma=Et[$t+1],ja=Ne.within(Et[$t],Et[$t+1],Gt),_r=Et[$t+st];let Vr=_r;for(const zr of ja){const Zr=zr*Wt;Et[Zr+2]>Fe&&(Vr+=Et[Zr+st])}if(Vr>_r&&Vr>=bt){let zr,Zr=Ta*_r,In=Ma*_r,ei=-1;const Hr=($t/Wt<<5)+(Fe+1)+this.points.length;for(const An of ja){const Kr=An*Wt;if(Et[Kr+2]<=Fe)continue;Et[Kr+2]=Fe;const Fn=Et[Kr+st];Zr+=Et[Kr]*Fn,In+=Et[Kr+1]*Fn,Et[Kr+4]=Hr,yt&&(zr||(zr=this._map(Et,$t,!0),ei=this.clusterProps.length,this.clusterProps.push(zr)),yt(zr,this._map(Et,Kr)))}Et[$t+4]=Hr,Kt.push(Zr/Vr,In/Vr,1/0,Hr,-1,Vr),yt&&Kt.push(ei)}else{for(let zr=0;zr<Wt;zr++)Kt.push(Et[$t+zr]);if(Vr>1)for(const zr of ja){const Zr=zr*Wt;if(!(Et[Zr+2]<=Fe)){Et[Zr+2]=Fe;for(let In=0;In<Wt;In++)Kt.push(Et[Zr+In])}}}}return Kt}_getOriginId(Ne){return Ne-this.points.length>>5}_getOriginZoom(Ne){return(Ne-this.points.length)%32}_map(Ne,Fe,Xe){if(Ne[Fe+st]>1){const bt=this.clusterProps[Ne[Fe+ht]];return Xe?Object.assign({},bt):bt}const wt=this.points[Ne[Fe+lt]].properties,yt=this.options.map(wt);return Xe&&yt===wt?Object.assign({},yt):yt}}function Ae(Xt,Ne,Fe){return{type:"Feature",id:Xt[Ne+lt],properties:zt(Xt,Ne,Fe),geometry:{type:"Point",coordinates:[(Xe=Xt[Ne],360*(Xe-.5)),It(Xt[Ne+1])]}};var Xe}function zt(Xt,Ne,Fe){const Xe=Xt[Ne+st],wt=Xe>=1e4?`${Math.round(Xe/1e3)}k`:Xe>=1e3?Math.round(Xe/100)/10+"k":Xe,yt=Xt[Ne+ht],bt=yt===-1?{}:Object.assign({},Fe[yt]);return Object.assign(bt,{cluster:!0,cluster_id:Xt[Ne+lt],point_count:Xe,point_count_abbreviated:wt})}function kt(Xt){return Xt/360+.5}function ma(Xt){const Ne=Math.sin(Xt*Math.PI/180),Fe=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function It(Xt){const Ne=(180-360*Xt)*Math.PI/180;return 360*Math.atan(Math.exp(Ne))/Math.PI-90}function Ht(Xt,Ne,Fe,Xe){let wt=Xe;const yt=Ne+(Fe-Ne>>1);let bt,Gt=Fe-Ne;const Et=Xt[Ne],Kt=Xt[Ne+1],Wt=Xt[Fe],$t=Xt[Fe+1];for(let Ta=Ne+3;Ta<Fe;Ta+=3){const Ma=_t(Xt[Ta],Xt[Ta+1],Et,Kt,Wt,$t);if(Ma>wt)bt=Ta,wt=Ma;else if(Ma===wt){const ja=Math.abs(Ta-yt);ja<Gt&&(bt=Ta,Gt=ja)}}wt>Xe&&(bt-Ne>3&&Ht(Xt,Ne,bt,Xe),Xt[bt+2]=wt,Fe-bt>3&&Ht(Xt,bt,Fe,Xe))}function _t(Xt,Ne,Fe,Xe,wt,yt){let bt=wt-Fe,Gt=yt-Xe;if(bt!==0||Gt!==0){const Et=((Xt-Fe)*bt+(Ne-Xe)*Gt)/(bt*bt+Gt*Gt);Et>1?(Fe=wt,Xe=yt):Et>0&&(Fe+=bt*Et,Xe+=Gt*Et)}return bt=Xt-Fe,Gt=Ne-Xe,bt*bt+Gt*Gt}function ir(Xt,Ne,Fe,Xe){const wt={id:Xt??null,type:Ne,geometry:Fe,tags:Xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")Ea(wt,Fe);else if(Ne==="Polygon")Ea(wt,Fe[0]);else if(Ne==="MultiLineString")for(const yt of Fe)Ea(wt,yt);else if(Ne==="MultiPolygon")for(const yt of Fe)Ea(wt,yt[0]);return wt}function Ea(Xt,Ne){for(let Fe=0;Fe<Ne.length;Fe+=3)Xt.minX=Math.min(Xt.minX,Ne[Fe]),Xt.minY=Math.min(Xt.minY,Ne[Fe+1]),Xt.maxX=Math.max(Xt.maxX,Ne[Fe]),Xt.maxY=Math.max(Xt.maxY,Ne[Fe+1])}function Na(Xt,Ne,Fe,Xe){if(!Ne.geometry)return;const wt=Ne.geometry.coordinates;if(wt&&wt.length===0)return;const yt=Ne.geometry.type,bt=Math.pow(Fe.tolerance/((1<<Fe.maxZoom)*Fe.extent),2);let Gt=[],Et=Ne.id;if(Fe.promoteId?Et=Ne.properties[Fe.promoteId]:Fe.generateId&&(Et=Xe||0),yt==="Point")Ja(wt,Gt);else if(yt==="MultiPoint")for(const Kt of wt)Ja(Kt,Gt);else if(yt==="LineString")cr(wt,Gt,bt,!1);else if(yt==="MultiLineString"){if(Fe.lineMetrics){for(const Kt of wt)Gt=[],cr(Kt,Gt,bt,!1),Xt.push(ir(Et,"LineString",Gt,Ne.properties));return}dr(wt,Gt,bt,!1)}else if(yt==="Polygon")dr(wt,Gt,bt,!0);else{if(yt!=="MultiPolygon"){if(yt==="GeometryCollection"){for(const Kt of Ne.geometry.geometries)Na(Xt,{id:Et,geometry:Kt,properties:Ne.properties},Fe,Xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Kt of wt){const Wt=[];dr(Kt,Wt,bt,!0),Gt.push(Wt)}}Xt.push(ir(Et,yt,Gt,Ne.properties))}function Ja(Xt,Ne){Ne.push(Sr(Xt[0]),ka(Xt[1]),0)}function cr(Xt,Ne,Fe,Xe){let wt,yt,bt=0;for(let Et=0;Et<Xt.length;Et++){const Kt=Sr(Xt[Et][0]),Wt=ka(Xt[Et][1]);Ne.push(Kt,Wt,0),Et>0&&(bt+=Xe?(wt*Wt-Kt*yt)/2:Math.sqrt(Math.pow(Kt-wt,2)+Math.pow(Wt-yt,2))),wt=Kt,yt=Wt}const Gt=Ne.length-3;Ne[2]=1,Ht(Ne,0,Gt,Fe),Ne[Gt+2]=1,Ne.size=Math.abs(bt),Ne.start=0,Ne.end=Ne.size}function dr(Xt,Ne,Fe,Xe){for(let wt=0;wt<Xt.length;wt++){const yt=[];cr(Xt[wt],yt,Fe,Xe),Ne.push(yt)}}function Sr(Xt){return Xt/360+.5}function ka(Xt){const Ne=Math.sin(Xt*Math.PI/180),Fe=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Fe<0?0:Fe>1?1:Fe}function Gr(Xt,Ne,Fe,Xe,wt,yt,bt,Gt){if(Xe/=Ne,yt>=(Fe/=Ne)&&bt<Xe)return Xt;if(bt<Fe||yt>=Xe)return null;const Et=[];for(const Kt of Xt){const Wt=Kt.geometry;let $t=Kt.type;const Ta=wt===0?Kt.minX:Kt.minY,Ma=wt===0?Kt.maxX:Kt.maxY;if(Ta>=Fe&&Ma<Xe){Et.push(Kt);continue}if(Ma<Fe||Ta>=Xe)continue;let ja=[];if($t==="Point"||$t==="MultiPoint")dn(Wt,ja,Fe,Xe,wt);else if($t==="LineString")Cn(Wt,ja,Fe,Xe,wt,!1,Gt.lineMetrics);else if($t==="MultiLineString")va(Wt,ja,Fe,Xe,wt,!1);else if($t==="Polygon")va(Wt,ja,Fe,Xe,wt,!0);else if($t==="MultiPolygon")for(const _r of Wt){const Vr=[];va(_r,Vr,Fe,Xe,wt,!0),Vr.length&&ja.push(Vr)}if(ja.length){if(Gt.lineMetrics&&$t==="LineString"){for(const _r of ja)Et.push(ir(Kt.id,$t,_r,Kt.tags));continue}$t!=="LineString"&&$t!=="MultiLineString"||(ja.length===1?($t="LineString",ja=ja[0]):$t="MultiLineString"),$t!=="Point"&&$t!=="MultiPoint"||($t=ja.length===3?"Point":"MultiPoint"),Et.push(ir(Kt.id,$t,ja,Kt.tags))}}return Et.length?Et:null}function dn(Xt,Ne,Fe,Xe,wt){for(let yt=0;yt<Xt.length;yt+=3){const bt=Xt[yt+wt];bt>=Fe&&bt<=Xe&&Wa(Ne,Xt[yt],Xt[yt+1],Xt[yt+2])}}function Cn(Xt,Ne,Fe,Xe,wt,yt,bt){let Gt=fn(Xt);const Et=wt===0?ua:Xa;let Kt,Wt,$t=Xt.start;for(let Vr=0;Vr<Xt.length-3;Vr+=3){const zr=Xt[Vr],Zr=Xt[Vr+1],In=Xt[Vr+2],ei=Xt[Vr+3],Hr=Xt[Vr+4],An=wt===0?zr:Zr,Kr=wt===0?ei:Hr;let Fn=!1;bt&&(Kt=Math.sqrt(Math.pow(zr-ei,2)+Math.pow(Zr-Hr,2))),An<Fe?Kr>Fe&&(Wt=Et(Gt,zr,Zr,ei,Hr,Fe),bt&&(Gt.start=$t+Kt*Wt)):An>Xe?Kr<Xe&&(Wt=Et(Gt,zr,Zr,ei,Hr,Xe),bt&&(Gt.start=$t+Kt*Wt)):Wa(Gt,zr,Zr,In),Kr<Fe&&An>=Fe&&(Wt=Et(Gt,zr,Zr,ei,Hr,Fe),Fn=!0),Kr>Xe&&An<=Xe&&(Wt=Et(Gt,zr,Zr,ei,Hr,Xe),Fn=!0),!yt&&Fn&&(bt&&(Gt.end=$t+Kt*Wt),Ne.push(Gt),Gt=fn(Xt)),bt&&($t+=Kt)}let Ta=Xt.length-3;const Ma=Xt[Ta],ja=Xt[Ta+1],_r=wt===0?Ma:ja;_r>=Fe&&_r<=Xe&&Wa(Gt,Ma,ja,Xt[Ta+2]),Ta=Gt.length-3,yt&&Ta>=3&&(Gt[Ta]!==Gt[0]||Gt[Ta+1]!==Gt[1])&&Wa(Gt,Gt[0],Gt[1],Gt[2]),Gt.length&&Ne.push(Gt)}function fn(Xt){const Ne=[];return Ne.size=Xt.size,Ne.start=Xt.start,Ne.end=Xt.end,Ne}function va(Xt,Ne,Fe,Xe,wt,yt){for(const bt of Xt)Cn(bt,Ne,Fe,Xe,wt,yt,!1)}function Wa(Xt,Ne,Fe,Xe){Xt.push(Ne,Fe,Xe)}function ua(Xt,Ne,Fe,Xe,wt,yt){const bt=(yt-Ne)/(Xe-Ne);return Wa(Xt,yt,Fe+(wt-Fe)*bt,1),bt}function Xa(Xt,Ne,Fe,Xe,wt,yt){const bt=(yt-Fe)/(wt-Fe);return Wa(Xt,Ne+(Xe-Ne)*bt,yt,1),bt}function pr(Xt,Ne){const Fe=[];for(let Xe=0;Xe<Xt.length;Xe++){const wt=Xt[Xe],yt=wt.type;let bt;if(yt==="Point"||yt==="MultiPoint"||yt==="LineString")bt=Mn(wt.geometry,Ne);else if(yt==="MultiLineString"||yt==="Polygon"){bt=[];for(const Gt of wt.geometry)bt.push(Mn(Gt,Ne))}else if(yt==="MultiPolygon"){bt=[];for(const Gt of wt.geometry){const Et=[];for(const Kt of Gt)Et.push(Mn(Kt,Ne));bt.push(Et)}}Fe.push(ir(wt.id,yt,bt,wt.tags))}return Fe}function Mn(Xt,Ne){const Fe=[];Fe.size=Xt.size,Xt.start!==void 0&&(Fe.start=Xt.start,Fe.end=Xt.end);for(let Xe=0;Xe<Xt.length;Xe+=3)Fe.push(Xt[Xe]+Ne,Xt[Xe+1],Xt[Xe+2]);return Fe}function Sn(Xt,Ne){if(Xt.transformed)return Xt;const Fe=1<<Xt.z,Xe=Xt.x,wt=Xt.y;for(const yt of Xt.features){const bt=yt.geometry,Gt=yt.type;if(yt.geometry=[],Gt===1)for(let Et=0;Et<bt.length;Et+=2)yt.geometry.push(hn(bt[Et],bt[Et+1],Ne,Fe,Xe,wt));else for(let Et=0;Et<bt.length;Et++){const Kt=[];for(let Wt=0;Wt<bt[Et].length;Wt+=2)Kt.push(hn(bt[Et][Wt],bt[Et][Wt+1],Ne,Fe,Xe,wt));yt.geometry.push(Kt)}}return Xt.transformed=!0,Xt}function hn(Xt,Ne,Fe,Xe,wt,yt){return[Math.round(Fe*(Xt*Xe-wt)),Math.round(Fe*(Ne*Xe-yt))]}function $r(Xt,Ne,Fe,Xe,wt){const yt=Ne===wt.maxZoom?0:wt.tolerance/((1<<Ne)*wt.extent),bt={features:[],numPoints:0,numSimplified:0,numFeatures:Xt.length,source:null,x:Fe,y:Xe,z:Ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Gt of Xt)br(bt,Gt,yt,wt);return bt}function br(Xt,Ne,Fe,Xe){const wt=Ne.geometry,yt=Ne.type,bt=[];if(Xt.minX=Math.min(Xt.minX,Ne.minX),Xt.minY=Math.min(Xt.minY,Ne.minY),Xt.maxX=Math.max(Xt.maxX,Ne.maxX),Xt.maxY=Math.max(Xt.maxY,Ne.maxY),yt==="Point"||yt==="MultiPoint")for(let Gt=0;Gt<wt.length;Gt+=3)bt.push(wt[Gt],wt[Gt+1]),Xt.numPoints++,Xt.numSimplified++;else if(yt==="LineString")$i(bt,wt,Xt,Fe,!1,!1);else if(yt==="MultiLineString"||yt==="Polygon")for(let Gt=0;Gt<wt.length;Gt++)$i(bt,wt[Gt],Xt,Fe,yt==="Polygon",Gt===0);else if(yt==="MultiPolygon")for(let Gt=0;Gt<wt.length;Gt++){const Et=wt[Gt];for(let Kt=0;Kt<Et.length;Kt++)$i(bt,Et[Kt],Xt,Fe,!0,Kt===0)}if(bt.length){let Gt=Ne.tags||null;if(yt==="LineString"&&Xe.lineMetrics){Gt={};for(const Kt in Ne.tags)Gt[Kt]=Ne.tags[Kt];Gt.mapbox_clip_start=wt.start/wt.size,Gt.mapbox_clip_end=wt.end/wt.size}const Et={geometry:bt,type:yt==="Polygon"||yt==="MultiPolygon"?3:yt==="LineString"||yt==="MultiLineString"?2:1,tags:Gt};Ne.id!==null&&(Et.id=Ne.id),Xt.features.push(Et)}}function $i(Xt,Ne,Fe,Xe,wt,yt){const bt=Xe*Xe;if(Xe>0&&Ne.size<(wt?bt:Xe))return void(Fe.numPoints+=Ne.length/3);const Gt=[];for(let Et=0;Et<Ne.length;Et+=3)(Xe===0||Ne[Et+2]>bt)&&(Fe.numSimplified++,Gt.push(Ne[Et],Ne[Et+1])),Fe.numPoints++;wt&&function(Et,Kt){let Wt=0;for(let $t=0,Ta=Et.length,Ma=Ta-2;$t<Ta;Ma=$t,$t+=2)Wt+=(Et[$t]-Et[Ma])*(Et[$t+1]+Et[Ma+1]);if(Wt>0===Kt)for(let $t=0,Ta=Et.length;$t<Ta/2;$t+=2){const Ma=Et[$t],ja=Et[$t+1];Et[$t]=Et[Ta-2-$t],Et[$t+1]=Et[Ta-1-$t],Et[Ta-2-$t]=Ma,Et[Ta-1-$t]=ja}}(Gt,yt),Xt.push(Gt)}const zi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ui{constructor(Ne,Fe){const Xe=(Fe=this.options=function(yt,bt){for(const Gt in bt)yt[Gt]=bt[Gt];return yt}(Object.create(zi),Fe)).debug;if(Xe&&console.time("preprocess data"),Fe.maxZoom<0||Fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Fe.promoteId&&Fe.generateId)throw new Error("promoteId and generateId cannot be used together.");let wt=function(yt,bt){const Gt=[];if(yt.type==="FeatureCollection")for(let Et=0;Et<yt.features.length;Et++)Na(Gt,yt.features[Et],bt,Et);else Na(Gt,yt.type==="Feature"?yt:{geometry:yt},bt);return Gt}(Ne,Fe);this.tiles={},this.tileCoords=[],Xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Fe.indexMaxZoom,Fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),wt=function(yt,bt){const Gt=bt.buffer/bt.extent;let Et=yt;const Kt=Gr(yt,1,-1-Gt,Gt,0,-1,2,bt),Wt=Gr(yt,1,1-Gt,2+Gt,0,-1,2,bt);return(Kt||Wt)&&(Et=Gr(yt,1,-Gt,1+Gt,0,-1,2,bt)||[],Kt&&(Et=pr(Kt,1).concat(Et)),Wt&&(Et=Et.concat(pr(Wt,-1)))),Et}(wt,Fe),wt.length&&this.splitTile(wt,0,0,0),Xe&&(wt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Ne,Fe,Xe,wt,yt,bt,Gt){const Et=[Ne,Fe,Xe,wt],Kt=this.options,Wt=Kt.debug;for(;Et.length;){wt=Et.pop(),Xe=Et.pop(),Fe=Et.pop(),Ne=Et.pop();const $t=1<<Fe,Ta=ao(Fe,Xe,wt);let Ma=this.tiles[Ta];if(!Ma&&(Wt>1&&console.time("creation"),Ma=this.tiles[Ta]=$r(Ne,Fe,Xe,wt,Kt),this.tileCoords.push({z:Fe,x:Xe,y:wt}),Wt)){Wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Fe,Xe,wt,Ma.numFeatures,Ma.numPoints,Ma.numSimplified),console.timeEnd("creation"));const Fn=`z${Fe}`;this.stats[Fn]=(this.stats[Fn]||0)+1,this.total++}if(Ma.source=Ne,yt==null){if(Fe===Kt.indexMaxZoom||Ma.numPoints<=Kt.indexMaxPoints)continue}else{if(Fe===Kt.maxZoom||Fe===yt)continue;if(yt!=null){const Fn=yt-Fe;if(Xe!==bt>>Fn||wt!==Gt>>Fn)continue}}if(Ma.source=null,Ne.length===0)continue;Wt>1&&console.time("clipping");const ja=.5*Kt.buffer/Kt.extent,_r=.5-ja,Vr=.5+ja,zr=1+ja;let Zr=null,In=null,ei=null,Hr=null,An=Gr(Ne,$t,Xe-ja,Xe+Vr,0,Ma.minX,Ma.maxX,Kt),Kr=Gr(Ne,$t,Xe+_r,Xe+zr,0,Ma.minX,Ma.maxX,Kt);Ne=null,An&&(Zr=Gr(An,$t,wt-ja,wt+Vr,1,Ma.minY,Ma.maxY,Kt),In=Gr(An,$t,wt+_r,wt+zr,1,Ma.minY,Ma.maxY,Kt),An=null),Kr&&(ei=Gr(Kr,$t,wt-ja,wt+Vr,1,Ma.minY,Ma.maxY,Kt),Hr=Gr(Kr,$t,wt+_r,wt+zr,1,Ma.minY,Ma.maxY,Kt),Kr=null),Wt>1&&console.timeEnd("clipping"),Et.push(Zr||[],Fe+1,2*Xe,2*wt),Et.push(In||[],Fe+1,2*Xe,2*wt+1),Et.push(ei||[],Fe+1,2*Xe+1,2*wt),Et.push(Hr||[],Fe+1,2*Xe+1,2*wt+1)}}getTile(Ne,Fe,Xe){Ne=+Ne,Fe=+Fe,Xe=+Xe;const wt=this.options,{extent:yt,debug:bt}=wt;if(Ne<0||Ne>24)return null;const Gt=1<<Ne,Et=ao(Ne,Fe=Fe+Gt&Gt-1,Xe);if(this.tiles[Et])return Sn(this.tiles[Et],yt);bt>1&&console.log("drilling down to z%d-%d-%d",Ne,Fe,Xe);let Kt,Wt=Ne,$t=Fe,Ta=Xe;for(;!Kt&&Wt>0;)Wt--,$t>>=1,Ta>>=1,Kt=this.tiles[ao(Wt,$t,Ta)];return Kt&&Kt.source?(bt>1&&(console.log("found parent tile z%d-%d-%d",Wt,$t,Ta),console.time("drilling down")),this.splitTile(Kt.source,Wt,$t,Ta,Ne,Fe,Xe),bt>1&&console.timeEnd("drilling down"),this.tiles[Et]?Sn(this.tiles[Et],yt):null):null}}function ao(Xt,Ne,Fe){return 32*((1<<Xt)*Fe+Ne)+Xt}function di(Xt,Ne){const Fe=Xt.tileID.canonical;if(!this._geoJSONIndex)return void Ne(null,null);const Xe=this._geoJSONIndex.getTile(Fe.z,Fe.x,Fe.y);if(!Xe)return void Ne(null,null);const wt=new me(Xe.features);let yt=Se(wt);yt.byteOffset===0&&yt.byteLength===yt.buffer.byteLength||(yt=new Uint8Array(yt)),Ne(null,{vectorTile:wt,rawData:yt.buffer})}class rn extends q{constructor(Ne,Fe,Xe,wt,yt,bt){super(Ne,Fe,Xe,wt,di,bt),yt&&(this.loadGeoJSON=yt),this._dynamicIndex=new we}loadData(Ne,Fe){const Xe=Ne&&Ne.request,wt=Xe&&Xe.collectResourceTiming;this.loadGeoJSON(Ne,(yt,bt)=>{if(yt||!bt)return Fe(yt);if(typeof bt!="object")return Fe(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));{try{if(Ne.filter){const Et=n.X(Ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Et.result==="error")throw new Error(Et.value.map(Kt=>`${Kt.key}: ${Kt.message}`).join(", "));bt.features=bt.features.filter(Kt=>Et.value.evaluate({zoom:0},Kt))}Ne.dynamic?(bt.type==="Feature"&&(bt={type:"FeatureCollection",features:[bt]}),Ne.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(bt.features,this.loaded),Ne.cluster&&(bt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=Ne.cluster?new He(function({superclusterOptions:Et,clusterProperties:Kt}){if(!Kt||!Et)return Et;const Wt={},$t={},Ta={accumulated:null,zoom:0},Ma={properties:null},ja=Object.keys(Kt);for(const _r of ja){const[Vr,zr]=Kt[_r],Zr=n.X(zr),In=n.X(typeof Vr=="string"?[Vr,["accumulated"],["get",_r]]:Vr);Wt[_r]=Zr.value,$t[_r]=In.value}return Et.map=_r=>{Ma.properties=_r;const Vr={};for(const zr of ja)Vr[zr]=Wt[zr].evaluate(Ta,Ma);return Vr},Et.reduce=(_r,Vr)=>{Ma.properties=Vr;for(const zr of ja)Ta.accumulated=_r[zr],_r[zr]=$t[zr].evaluate(Ta,Ma)},Et}(Ne)).load(bt.features):Ne.dynamic?this._dynamicIndex:function(Et,Kt){return new Ui(Et,Kt)}(bt,Ne.geojsonVtOptions)}catch(Et){return Fe(Et)}const Gt={};if(wt){const Et=v(Xe);Et&&(Gt.resourceTiming={},Gt.resourceTiming[Ne.source]=JSON.parse(JSON.stringify(Et)))}Fe(null,Gt)}})}reloadTile(Ne,Fe){const Xe=this.loaded;return Xe&&Xe[Ne.uid]?Ne.partial?Fe(null,void 0):super.reloadTile(Ne,Fe):this.loadTile(Ne,Fe)}loadGeoJSON(Ne,Fe){if(Ne.request)n.n(Ne.request,Fe);else{if(typeof Ne.data!="string")return Fe(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));try{return Fe(null,JSON.parse(Ne.data))}catch{return Fe(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ne,Fe){try{Fe(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(Xe){Fe(Xe)}}getClusterChildren(Ne,Fe){try{Fe(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(Xe){Fe(Xe)}}getClusterLeaves(Ne,Fe){try{Fe(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(Xe){Fe(Xe)}}}class Jn{constructor(Ne,Fe){this.tileID=new n.aH(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.tileZoom=Ne.tileZoom,this.uid=Ne.uid,this.zoom=Ne.zoom,this.canonical=Ne.tileID.canonical,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Ne.projection,this.brightness=Fe}parse(Ne,Fe,Xe,wt){this.status="parsing";const yt=new n.aH(Xe.tileID.overscaledZ,Xe.tileID.wrap,Xe.tileID.canonical.z,Xe.tileID.canonical.x,Xe.tileID.canonical.y),bt=[],Gt=Fe.familiesBySource[Xe.source],Et=new n.e0(yt,Xe.promoteId);return Et.bucketLayerIDs=[],Et.is3DTile=!0,n.ei(Ne).then(Kt=>{if(!Kt)return wt(new Error("Could not parse tile"));const Wt=n.ej(Kt,1/n.cd(Xe.tileID.canonical)),$t=Kt.json.extensionsUsed&&Kt.json.extensionsUsed.includes("MAPBOX_mesh_features")||Kt.json.asset.extras&&Kt.json.asset.extras.MAPBOX_mesh_features,Ta=Kt.json.extensionsUsed&&Kt.json.extensionsUsed.includes("EXT_meshopt_compression"),Ma=new n.aa(this.zoom,{brightness:this.brightness});for(const ja in Gt)for(const _r of Gt[ja]){const Vr=_r[0];Et.bucketLayerIDs.push(_r.map(Zr=>n.C(Zr.id,Zr.scope))),Vr.recalculate(Ma,[]);const zr=new n.ek(_r,Wt,yt,$t,Ta,this.brightness,Et);$t||(zr.needsUpload=!0),bt.push(zr),zr.evaluate(Vr)}this.status="done",wt(null,{buckets:bt,featureIndex:Et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(Kt=>wt(new Error(Kt.message)))}}class vu{constructor(Ne,Fe,Xe,wt,yt,bt){this.actor=Ne,this.layerIndex=Fe,this.availableImages=Xe,this.brightness=bt,this.loading={},this.loaded={}}loadTile(Ne,Fe){const Xe=Ne.uid,wt=this.loading[Xe]=new Jn(Ne,this.brightness);n.bj(Ne.request,(yt,bt)=>{const Gt=!this.loading[Xe];return delete this.loading[Xe],Gt||yt?(wt.status="done",Gt||(this.loaded[Xe]=wt),Fe(yt)):bt&&bt.byteLength!==0?void wt.parse(bt,this.layerIndex,Ne,(Et,Kt)=>{wt.status="done",this.loaded=this.loaded||{},this.loaded[Xe]=wt,Et||!Kt?Fe(Et):Fe(null,Kt)}):(wt.status="done",this.loaded[Xe]=wt,Fe())})}reloadTile(Ne,Fe){const Xe=this.loaded,wt=Ne.uid;if(Xe&&Xe[wt]){const yt=Xe[wt];yt.projection=Ne.projection,yt.brightness=Ne.brightness;const bt=(Gt,Et)=>{yt.reloadCallback&&(delete yt.reloadCallback,this.loadTile(Ne,Fe)),Fe(Gt,Et)};yt.status==="parsing"?yt.reloadCallback=bt:yt.status==="done"&&this.loadTile(Ne,Fe)}}abortTile(Ne,Fe){const Xe=Ne.uid;this.loading[Xe]&&delete this.loading[Xe],Fe()}removeTile(Ne,Fe){const Xe=this.loaded,wt=Ne.uid;Xe&&Xe[wt]&&delete Xe[wt],Fe()}}class us{constructor(Ne){this.self=Ne,this.actor=new n.el(Ne,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.y,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:q,geojson:rn,"raster-dem":W,"raster-array":oe,"batched-model":vu},this.workerSources={},this.self.registerWorkerSource=(Fe,Xe)=>{if(this.workerSourceTypes[Fe])throw new Error(`Worker source with name "${Fe}" already registered.`);this.workerSourceTypes[Fe]=Xe},this.self.registerRTLTextPlugin=Fe=>{if(n.em.isParsed())throw new Error("RTL text plugin already registered.");n.em.applyArabicShaping=Fe.applyArabicShaping,n.em.processBidirectionalText=Fe.processBidirectionalText,n.em.processStyledBidirectionalText=Fe.processStyledBidirectionalText}}clearCaches(Ne,Fe,Xe){delete this.layerIndexes[Ne],delete this.availableImages[Ne],delete this.workerSources[Ne],Xe()}checkIfReady(Ne,Fe,Xe){Xe()}setReferrer(Ne,Fe){this.referrer=Fe}spriteLoaded(Ne,{scope:Fe,isLoaded:Xe}){if(this.isSpriteLoaded[Ne]||(this.isSpriteLoaded[Ne]={}),this.isSpriteLoaded[Ne][Fe]=Xe,this.workerSources[Ne]&&this.workerSources[Ne][Fe])for(const wt in this.workerSources[Ne][Fe]){const yt=this.workerSources[Ne][Fe][wt];for(const bt in yt){const Gt=yt[bt];Gt instanceof q&&(Gt.isSpriteLoaded=Xe,Gt.fire(new n.A("isSpriteLoaded")))}}}setImages(Ne,{scope:Fe,images:Xe},wt){if(this.availableImages[Ne]||(this.availableImages[Ne]={}),this.availableImages[Ne][Fe]=Xe,this.workerSources[Ne]&&this.workerSources[Ne][Fe]){for(const yt in this.workerSources[Ne][Fe]){const bt=this.workerSources[Ne][Fe][yt];for(const Gt in bt)bt[Gt].availableImages=Xe}wt()}else wt()}setProjection(Ne,Fe){this.projections[Ne]=n.bP(Fe)}setBrightness(Ne,Fe,Xe){this.brightness=Fe,Xe()}setLayers(Ne,Fe,Xe){this.getLayerIndex(Ne,Fe.scope).replace(Fe.layers,Fe.options),Xe()}updateLayers(Ne,Fe,Xe){this.getLayerIndex(Ne,Fe.scope).update(Fe.layers,Fe.removedIds,Fe.options),Xe()}loadTile(Ne,Fe,Xe){Fe.projection=this.projections[Ne]||this.defaultProjection,this.getWorkerSource(Ne,Fe.type,Fe.source,Fe.scope).loadTile(Fe,Xe)}decodeRasterArray(Ne,Fe,Xe){this.getWorkerSource(Ne,Fe.type,Fe.source,Fe.scope).decodeRasterArray(Fe,Xe)}reloadTile(Ne,Fe,Xe){Fe.projection=this.projections[Ne]||this.defaultProjection,this.getWorkerSource(Ne,Fe.type,Fe.source,Fe.scope).reloadTile(Fe,Xe)}abortTile(Ne,Fe,Xe){this.getWorkerSource(Ne,Fe.type,Fe.source,Fe.scope).abortTile(Fe,Xe)}removeTile(Ne,Fe,Xe){this.getWorkerSource(Ne,Fe.type,Fe.source,Fe.scope).removeTile(Fe,Xe)}removeSource(Ne,Fe,Xe){if(!(this.workerSources[Ne]&&this.workerSources[Ne][Fe.scope]&&this.workerSources[Ne][Fe.scope][Fe.type]&&this.workerSources[Ne][Fe.scope][Fe.type][Fe.source]))return;const wt=this.workerSources[Ne][Fe.scope][Fe.type][Fe.source];delete this.workerSources[Ne][Fe.scope][Fe.type][Fe.source],wt.removeSource!==void 0?wt.removeSource(Fe,Xe):Xe()}loadWorkerSource(Ne,Fe,Xe){try{this.self.importScripts(Fe.url),Xe()}catch(wt){Xe(wt.toString())}}syncRTLPluginState(Ne,Fe,Xe){try{n.em.setState(Fe);const wt=n.em.getPluginURL();if(n.em.isLoaded()&&!n.em.isParsed()&&wt!=null){this.self.importScripts(wt);const yt=n.em.isParsed();Xe(yt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${wt}`),yt)}}catch(wt){Xe(wt.toString())}}setDracoUrl(Ne,Fe){this.dracoUrl=Fe}getAvailableImages(Ne,Fe){this.availableImages[Ne]||(this.availableImages[Ne]={});let Xe=this.availableImages[Ne][Fe];return Xe||(Xe=[]),Xe}getLayerIndex(Ne,Fe){this.layerIndexes[Ne]||(this.layerIndexes[Ne]={});let Xe=this.layerIndexes[Ne][Fe];return Xe||(Xe=this.layerIndexes[Ne][Fe]=new N,Xe.scope=Fe),Xe}getWorkerSource(Ne,Fe,Xe,wt){const yt=this.workerSources;return yt[Ne]||(yt[Ne]={}),yt[Ne][wt]||(yt[Ne][wt]={}),yt[Ne][wt][Fe]||(yt[Ne][wt][Fe]={}),this.isSpriteLoaded[Ne]||(this.isSpriteLoaded[Ne]={}),yt[Ne][wt][Fe][Xe]||(yt[Ne][wt][Fe][Xe]=new this.workerSourceTypes[Fe]({send:(bt,Gt,Et,Kt,Wt,$t)=>{this.actor.send(bt,Gt,Et,Ne,Wt,$t)},scheduler:this.actor.scheduler},this.getLayerIndex(Ne,wt),this.getAvailableImages(Ne,wt),this.isSpriteLoaded[Ne][wt],void 0,this.brightness)),yt[Ne][wt][Fe][Xe]}rasterizeImages(Ne,Fe,Xe){const wt=new Map;for(const[yt,{image:bt,imageVariant:Gt}]of Fe.tasks.entries()){const Et=this.imageRasterizer.rasterize(Gt,bt,Fe.scope,Ne);wt.set(yt,Et)}Xe(void 0,wt)}removeRasterizedImages(Ne,Fe,Xe){this.imageRasterizer.removeImagesFromCacheByIds(Fe.imageIds,Fe.scope,Ne),Xe()}enforceCacheSizeLimit(Ne,Fe){n.en(Fe)}getWorkerPerformanceMetrics(Ne,Fe,Xe){Xe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new us(self)),us}),l(["./shared"],function(n){var v="3.11.0";const R={create:"create",load:"load",fullLoad:"fullLoad"},x={mark(y){performance.mark(y)},measure(y,o,d){performance.measure(y,o,d)}};function N(y){const o=y.name.split("?")[0];return n.a(o)&&o.includes("mapbox-gl.js")?"javascript":n.a(o)&&o.includes("mapbox-gl.css")?"css":n.b(o)?"fontRange":n.c(o)?"sprite":n.i(o)?"style":n.d(o)?"tilejson":"other"}var L,F={},j=function(){if(L)return F;function y(A){return!o(A)}function o(A){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,E,k=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(k);try{E=new Worker(Z),S=!0}catch{S=!1}return E&&E.terminate(),URL.revokeObjectURL(Z),S}()?function(){var S=document.createElement("canvas");S.width=S.height=1;var E=S.getContext("2d");if(!E)return!1;var k=E.getImageData(0,0,1,1);return k&&k.width===S.width}()?(d[T=A&&A.failIfMajorPerformanceCaveat]===void 0&&(d[T]=function(S){var E,k=function(Z){var K=document.createElement("canvas"),Y=Object.create(y.webGLContextAttributes);return Y.failIfMajorPerformanceCaveat=Z,K.getContext("webgl2",Y)}(S);if(!k)return!1;try{E=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!E||k.isContextLost())&&(k.shaderSource(E,"void main() {}"),k.compileShader(E),k.getShaderParameter(E,k.COMPILE_STATUS)===!0)}(T)),d[T]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var T}L=1,F.supported=y,F.notSupportedReason=o;var d={};return y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},F}();function H(y,o,d){const A=document.createElement(y);return o!=null&&(A.className=o),d&&d.appendChild(A),A}function q(y,o,d){const A=document.createElementNS("http://www.w3.org/2000/svg",y);for(const T of Object.keys(o))A.setAttributeNS(null,T,String(o[T]));return d&&d.appendChild(A),A}const W=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ee=W&&W.userSelect!==void 0?"userSelect":"WebkitUserSelect";let oe;function fe(){W&&ee&&(oe=W[ee],W[ee]="none")}function se(){W&&ee&&(W[ee]=oe)}function me(y){y.preventDefault(),y.stopPropagation(),window.removeEventListener("click",me,!0)}function ge(){window.addEventListener("click",me,!0),window.setTimeout(()=>{window.removeEventListener("click",me,!0)},0)}function Re(y,o){const d=y.getBoundingClientRect();return ae(y,d,o)}function we(y,o){const d=y.getBoundingClientRect(),A=[];for(let T=0;T<o.length;T++)A.push(ae(y,d,o[T]));return A}function Ee(y){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&y.button===2&&y.ctrlKey?0:y.button}function ae(y,o,d){const A=y.offsetWidth===o.width?1:y.offsetWidth/o.width;return new n.P((d.clientX-o.left)*A,(d.clientY-o.top)*A)}const _e="01",Ie="NO_ACCESS_TOKEN";class xe{constructor(o,d,A){this._transformRequestFn=o,this._customAccessToken=d,this._silenceAuthErrors=!!A,this._createSkuToken()}_createSkuToken(){const o=function(){let d="";for(let A=0;A<10;A++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",_e,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,d){return this._transformRequestFn&&this._transformRequestFn(o,d)||{url:o}}normalizeStyleURL(o,d){if(!n.f(o))return o;const A=Me(o);return A.params.push(`sdk=js-${v}`),A.path=`/styles/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeGlyphsURL(o,d){if(!n.f(o))return o;const A=Me(o);return A.path=`/fonts/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeModelURL(o,d){if(!n.f(o))return o;const A=Me(o);return A.path=`/models/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeSourceURL(o,d,A,T){if(!n.f(o))return o;const S=Me(o);return S.path=`/v4/${S.authority}.json`,S.params.push("secure"),A&&S.params.push(`language=${A}`),T&&S.params.push(`worldview=${T}`),this._makeAPIURL(S,this._customAccessToken||d)}normalizeIconsetURL(o,d){const A=Me(o);return n.f(o)?(A.path=`/styles/v1${A.path}/iconset.pbf`,this._makeAPIURL(A,this._customAccessToken||d)):je(A)}normalizeSpriteURL(o,d,A,T){const S=Me(o);return n.f(o)?(S.path=`/styles/v1${S.path}/sprite${d}${A}`,this._makeAPIURL(S,this._customAccessToken||T)):(S.path+=`${d}${A}`,je(S))}normalizeTileURL(o,d,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!n.f(o))return o;const T=Me(o);T.path=T.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||A&&T.authority!=="raster"&&A===512?"@2x":""}${n.m.supported?".webp":"$1"}`),T.authority==="raster"?T.path=`/${n.e.RASTER_URL_PREFIX}${T.path}`:T.authority==="rasterarrays"?T.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${T.path}`:T.authority==="3dtiles"?T.path=`/${n.e.TILES3D_URL_PREFIX}${T.path}`:(T.path=T.path.replace(/^.+\/v4\//,"/"),T.path=`/${n.e.TILE_URL_VERSION}${T.path}`);const S=this._customAccessToken||function(E){for(const k of E){const Z=k.match(/^access_token=(.*)$/);if(Z)return Z[1]}return null}(T.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&S&&this._skuToken&&T.params.push(`sku=${this._skuToken}`),this._makeAPIURL(T,S)}canonicalizeTileURL(o,d){const A=Me(o);if(!A.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!A.path.match(/\.[\w]+$/))return o;let T="mapbox://";A.path.match(/^\/raster\/v1\//)?T+=`raster/${A.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:A.path.match(/^\/rasterarrays\/v1\//)?T+=`rasterarrays/${A.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:T+=`tiles/${A.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let S=A.params;return d&&(S=S.filter(E=>!E.match(/^access_token=/))),S.length&&(T+=`?${S.join("&")}`),T}canonicalizeTileset(o,d){const A=!!d&&n.f(d),T=[];for(const S of o.tiles||[])n.h(S)?T.push(this.canonicalizeTileURL(S,A)):T.push(S);return T}_makeAPIURL(o,d){const A="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",T=Me(n.e.API_URL);if(o.protocol=T.protocol,o.authority=T.authority,o.protocol==="http"){const S=o.params.indexOf("secure");S>=0&&o.params.splice(S,1)}if(T.path!=="/"&&(o.path=`${T.path}${o.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return je(o);if(d=d||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${A}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${A}`)}return o.params=o.params.filter(S=>S.indexOf("access_token")===-1),o.params.push(`access_token=${d||""}`),je(o)}}const ze=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Me(y){const o=y.match(ze);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function je(y){const o=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${o}`}const Ue="mapbox.eventData";function Qe(y){if(!y)return null;const o=y.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(n.j(o[1]))}catch{return null}}class ke{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const d=Qe(n.e.ACCESS_TOKEN);let A="";return A=d&&d.u?n.k(d.u):n.e.ACCESS_TOKEN||"",o?`${Ue}.${o}:${A}`:`${Ue}:${A}`}fetchEventData(){const o=n.s("localStorage"),d=this.getStorageKey(),A=this.getStorageKey("uuid");if(o)try{const T=localStorage.getItem(d);T&&(this.eventData=JSON.parse(T));const S=localStorage.getItem(A);S&&(this.anonId=S)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const o=n.s("localStorage"),d=this.getStorageKey(),A=this.getStorageKey("uuid"),T=this.anonId;if(o&&T)try{localStorage.setItem(A,T),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,d,A,T){if(!n.e.EVENTS_URL)return;const S=Me(n.e.EVENTS_URL);S.params.push(`access_token=${T||n.e.ACCESS_TOKEN||""}`);const E={event:this.type,created:new Date(o).toISOString()},k=d?n.l(E,d):E,Z={url:je(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=n.p(Z,K=>{this.pendingRequest=null,A(K),this.saveEventData(),this.processRequests(T)})}queueRequest(o,d){this.queue.push(o),this.processRequests(d)}}const Ge=new class extends ke{constructor(y){super("appUserTurnstile"),this._customAccessToken=y}postTurnstileEvent(y,o){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(y)&&y.some(d=>n.f(d)||n.h(d))&&this.queueRequest(Date.now(),o)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Qe(n.e.ACCESS_TOKEN),d=o?o.u:n.e.ACCESS_TOKEN;let A=d!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),A=!0);const T=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),E=new Date(T),k=(T-this.eventData.lastSuccess)/864e5;A=A||k>=1||k<-1||S.getDate()!==E.getDate()}else A=!0;A?this.postEvent(T,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:_e,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=T,this.eventData.tokenU=d)},y):this.processRequests()}},Se=Ge.postTurnstileEvent.bind(Ge),Te=new class extends ke{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(y,o,d,A){this.skuToken=o,this.errorCb=A,n.e.EVENTS_URL&&(d||n.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(Ie)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:_e,skuToken:this.skuToken,userId:this.anonId},A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},y))}remove(){this.errorCb=null}},qe=Te.postMapLoadEvent.bind(Te),Ze=new class extends ke{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(y){let o=this.mapInstanceIdMap.get(y);return o||(o=n.u(),this.mapInstanceIdMap.set(y,o)),o}getEventId(y){const o=this.eventIdPerMapInstanceMap.get(y)||0;return this.eventIdPerMapInstanceMap.set(y,o+1),o}postStyleLoadEvent(y,o){const{map:d,style:A,importedStyles:T}=o;if(!n.e.EVENTS_URL||!y&&!n.e.ACCESS_TOKEN)return;const S=this.getMapInstanceId(d),E={mapInstanceId:S,eventId:this.getEventId(S),style:A};T.length&&(E.importedStyles=T),this.queueRequest({timestamp:Date.now(),payload:E},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:d}=this.queue.shift();this.postEvent(o,d,()=>{},y)}},lt=Ze.postStyleLoadEvent.bind(Ze),st=new class extends ke{constructor(){super("gljs.performance")}postPerformanceEvent(y,o){n.e.EVENTS_URL&&(y||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:d}=this.queue.shift(),A=function(T){const S=performance.getEntriesByType("resource"),E=performance.getEntriesByType("mark"),k=function(pe){const Pe={};if(pe){for(const Ce in pe)if(Ce!=="other")for(const Ve of pe[Ce]){const Le=`${Ce}ResolveRangeMin`,$e=`${Ce}ResolveRangeMax`,nt=`${Ce}RequestCount`,at=`${Ce}RequestCachedCount`;Pe[Le]=Math.min(Pe[Le]||1/0,Ve.startTime),Pe[$e]=Math.max(Pe[$e]||-1/0,Ve.responseEnd);const pt=ot=>{Pe[ot]===void 0&&(Pe[ot]=0),++Pe[ot]};Ve.transferSize!==void 0&&Ve.transferSize===0&&pt(at),pt(nt)}}return Pe}(function(pe,Pe){const Ce={};if(pe)for(const Ve of pe){const Le=Pe(Ve);Ce[Le]===void 0&&(Ce[Le]=[]),Ce[Le].push(Ve)}return Ce}(S,N)),Z=window.devicePixelRatio,K=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Y=K?K.effectiveType:void 0,re={counters:[],metadata:[],attributes:[]},ne=(pe,Pe,Ce)=>{Ce!=null&&pe.push({name:Pe,value:Ce.toString()})};for(const pe in k)ne(re.counters,pe,k[pe]);if(T.interactionRange[0]!==1/0&&T.interactionRange[1]!==-1/0&&(ne(re.counters,"interactionRangeMin",T.interactionRange[0]),ne(re.counters,"interactionRangeMax",T.interactionRange[1])),E)for(const pe of Object.keys(R)){const Pe=R[pe],Ce=E.find(Ve=>Ve.name===Pe);Ce&&ne(re.counters,Pe,Ce.startTime)}return ne(re.counters,"visibilityHidden",T.visibilityHidden),ne(re.attributes,"style",function(pe){if(pe)for(const Pe of pe){const Ce=Pe.name.split("?")[0];if(n.i(Ce)){const Ve=Ce.split("/").slice(-2);if(Ve.length===2)return`mapbox://styles/${Ve[0]}/${Ve[1]}`}}}(S)),ne(re.attributes,"terrainEnabled",T.terrainEnabled?"true":"false"),ne(re.attributes,"fogEnabled",T.fogEnabled?"true":"false"),ne(re.attributes,"projection",T.projection),ne(re.attributes,"zoom",T.zoom),ne(re.metadata,"devicePixelRatio",Z),ne(re.metadata,"connectionEffectiveType",Y),ne(re.metadata,"navigatorUserAgent",navigator.userAgent),ne(re.metadata,"screenWidth",window.screen.width),ne(re.metadata,"screenHeight",window.screen.height),ne(re.metadata,"windowWidth",window.innerWidth),ne(re.metadata,"windowHeight",window.innerHeight),ne(re.metadata,"mapWidth",T.width/Z),ne(re.metadata,"mapHeight",T.height/Z),ne(re.metadata,"webglRenderer",T.renderer),ne(re.metadata,"webglVendor",T.vendor),ne(re.metadata,"sdkVersion",v),ne(re.metadata,"sdkIdentifier","mapbox-gl-js"),re}(d);for(const T of A.metadata);for(const T of A.counters);for(const T of A.attributes);this.postEvent(o,A,()=>{},y)}},ht=st.postPerformanceEvent.bind(st),He=new class extends ke{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(y,o,d,A){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const T=Me(n.e.API_URL+n.e.SESSION_PATH);T.params.push(`sku=${o||""}`),T.params.push(`access_token=${A||n.e.ACCESS_TOKEN||""}`);const S={url:je(T),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(S,E=>{this.pendingRequest=null,d(E),this.saveEventData(),this.processRequests(A)})}getSessionAPI(y,o,d,A){this.skuToken=o,this.errorCb=A,n.e.SESSION_PATH&&n.e.API_URL&&(d||n.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(Ie)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||this.getSession(d,this.skuToken,A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},y)}remove(){this.errorCb=null}},Ae=He.getSessionAPI.bind(He),zt=new Set;function kt(y,o){o?zt.add(y):zt.delete(y)}class ma{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,d){this._updatedSourceCaches[o]=d,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const d=o.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(o.id),this.setDirty()}removeLayer(o){const d=o.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][o.id]=o,this._updatedLayers[d].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const d in this._updatedLayers)o[d]=o[d]||{},o[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)o[d]=o[d]||{},o[d].removedIds=Object.keys(this._removedLayers[d]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(o){this._updatedImages.add(n.I.toString(o)),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function It(y){const{userImage:o}=y;return!!(o&&o.render&&o.render())&&(y.data.replace(new Uint8Array(o.data.buffer)),!0)}class Ht extends n.E{constructor(o){super(),this._images={},this._iconsets={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.patternsInFlight=new Set,this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=o,o!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.y),this._imageRasterizer}createScope(o){this._images[o]={},this._iconsets[o]={},this.loaded[o]=!1,this.updatedImages[o]=new Set,this.patterns[o]={},this.callbackDispatchedThisFrame[o]=new Set,this.atlasImage[o]=new n.r({width:1,height:1})}createIconset(o,d){this._iconsets[o][d]={}}isLoaded(){for(const o in this.loaded)if(!this.loaded[o])return!1;return!0}setLoaded(o,d){if(this.loaded[d]!==o&&(this.loaded[d]=o,o)){for(const{ids:A,callback:T}of this.requestors)this._notify(A,d,T);this.requestors=[]}}hasImage(o,d){return!!this.getImage(o,d)}getImage(o,d){return(o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d])[o.name]}addImage(o,d,A){const T=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d];this._validate(o,A)&&(T[o.name]=A)}_validate(o,d){let A=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchX" value`))),A=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchY" value`))),A=!1),this._validateContent(d.content,d)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "content" value`))),A=!1),A}_validateStretch(o,d){if(!o)return!0;let A=0;for(const T of o){if(T[0]<A||T[1]<T[0]||d<T[1])return!1;A=T[1]}return!0}_validateContent(o,d){return o?o.length!==4||!d.usvg&&(o[0]<0||d.data.width<o[0]||o[1]<0||d.data.height<o[1]||o[2]<0||d.data.width<o[2]||o[3]<0||d.data.height<o[3])?!1:!(o[2]<o[0]||o[3]<o[1]):!0}updateImage(o,d,A){const T=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d];A.version=T[o.name].version+1,T[o.name]=A,this.updatedImages[d].add(o),this.removeFromImageRasterizerCache(o,d)}clearUpdatedImages(o){this.updatedImages[o].clear()}removeFromImageRasterizerCache(o,d){if(this.spriteFormat!=="raster")if(n.t()){const A={imageIds:[o],scope:d};this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",A)}else this.imageRasterizer.removeImagesFromCacheByIds([o],d)}removeImage(o,d){const A=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d],T=A[o.name];delete A[o.name],delete this.patterns[d][o.name],this.removeFromImageRasterizerCache(o,d),T.userImage&&T.userImage.onRemove&&T.userImage.onRemove()}listImages(o){const d=[];for(const A of Object.keys(this._images[o]))d.push(new n.I(A));for(const A in this._iconsets[o])for(const T of Object.keys(this._iconsets[o][A]))d.push(new n.I({name:T,iconsetId:A}));return d}getImages(o,d,A){let T=!0;const S=!!this.loaded[d];if(!S)for(const E of o)(E.iconsetId?this._iconsets[d][E.iconsetId]:this._images[d])[E.name]||(T=!1);S||T?this._notify(o,d,A):this.requestors.push({ids:o,scope:d,callback:A})}rasterizeImages({scope:o,tasks:d},A){const T=new Map;for(const[S,E]of d.entries()){const k=this.getImage(E.id,o);k&&T.set(S,{image:k,imageVariant:E})}this._rasterizeImages(o,T,A)}_rasterizeImages(o,d,A){if(n.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{tasks:d,scope:o},A);else{const T=new Map;for(const[S,{image:E,imageVariant:k}]of d.entries())T.set(S,this.imageRasterizer.rasterize(k,E,o,0));A(void 0,T)}}getUpdatedImages(o){return this.updatedImages[o]||new Set}_notify(o,d,A){const T=new Map;for(const S of o){S.iconsetId&&(this._iconsets[d][S.iconsetId]=this._iconsets[d][S.iconsetId]||{});const E=(S.iconsetId?this._iconsets[d][S.iconsetId]:this._images[d])[S.name];if(!E){if(S.iconsetId)continue;n.w(`Image "${S.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`),this.fire(new n.A("styleimagemissing",{id:S.name}));continue}const k={data:E.usvg?null:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,usvg:E.usvg,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)};E.usvg&&Object.assign(k,{width:E.icon.usvg_tree.width,height:E.icon.usvg_tree.height}),T.set(n.I.toString(S),k)}A(null,T)}getPixelSize(o){const{width:d,height:A}=this.atlasImage[o];return{width:d,height:A}}getPattern(o,d,A){const T=this.patterns[d][o.name],S=this.getImage(o,d);if(!S)return null;if(T){if(T.position.version===S.version)return T.position;T.position.version=S.version}else{if(S.usvg&&!S.data){const E=this.getPatternInFlightId(o.toString(),d);if(this.patternsInFlight.has(E))return null;this.patternsInFlight.add(E);const k=new n.B(o).scaleSelf(n.q.devicePixelRatio),Z=new Map([[k.toString(),{image:S,imageVariant:k}]]);return this._rasterizeImages(d,Z,(K,Y)=>this.storePatternImage(k,d,S,A,Y)),null}this.storePattern(o,d,S)}return this._updatePatternAtlas(d,A),this.patterns[d][o.name].position}getPatternInFlightId(o,d){return n.C(o,d)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(o,d,A,T,S){const E=o.toString(),k=S?S.get(E):void 0;k&&(A.data=k,this.storePattern(o.id,d,A),this._updatePatternAtlas(d,T),this.patternsInFlight.delete(this.getPatternInFlightId(o.id.toString(),d)))}storePattern(o,d,A){const T={w:A.data.width+2*n.F,h:A.data.height+2*n.F,x:0,y:0},S=new n.G(T,A,n.F);this.patterns[d][o.name]={bin:T,position:S}}bind(o,d){const A=o.gl;let T=this.atlasTexture[d];T?this.dirty&&(T.update(this.atlasImage[d]),this.dirty=!1):(T=new n.T(o,this.atlasImage[d],A.RGBA8),this.atlasTexture[d]=T),T.bind(A.LINEAR,A.CLAMP_TO_EDGE)}_updatePatternAtlas(o,d){const A=[];for(const k in this.patterns[o])A.push(this.patterns[o][k].bin);const{w:T,h:S}=n.H(A),E=this.atlasImage[o];E.resize({width:T||1,height:S||1});for(const k in this.patterns[o]){const{bin:Z,position:K}=this.patterns[o][k];let Y=K.padding;const re=Z.x+Y,ne=Z.y+Y,pe=this._images[o][k].data,Pe=pe.width,Ce=pe.height;Y=Y>1?Y-1:Y,n.r.copy(pe,E,{x:0,y:0},{x:re,y:ne},{width:Pe,height:Ce},d),n.r.copy(pe,E,{x:0,y:Ce-Y},{x:re,y:ne-Y},{width:Pe,height:Y},d),n.r.copy(pe,E,{x:0,y:0},{x:re,y:ne+Ce},{width:Pe,height:Y},d),n.r.copy(pe,E,{x:Pe-Y,y:0},{x:re-Y,y:ne},{width:Y,height:Ce},d),n.r.copy(pe,E,{x:0,y:0},{x:re+Pe,y:ne},{width:Y,height:Ce},d),n.r.copy(pe,E,{x:Pe-Y,y:Ce-Y},{x:re-Y,y:ne-Y},{width:Y,height:Y},d),n.r.copy(pe,E,{x:0,y:Ce-Y},{x:re+Pe,y:ne-Y},{width:Y,height:Y},d),n.r.copy(pe,E,{x:0,y:0},{x:re+Pe,y:ne+Ce},{width:Y,height:Y},d),n.r.copy(pe,E,{x:Pe-Y,y:0},{x:re-Y,y:ne+Ce},{width:Y,height:Y},d)}this.dirty=!0}beginFrame(){for(const o in this._images)this.callbackDispatchedThisFrame[o]=new Set}dispatchRenderCallbacks(o,d){for(const A of o){if(this.callbackDispatchedThisFrame[d].has(A.toString()))continue;this.callbackDispatchedThisFrame[d].add(A.toString());const T=(A.iconsetId?this._iconsets[d][A.iconsetId]:this._images[d])[A.name];It(T)&&this.updateImage(A,d,T)}}}function _t(y){const o=y.key,d=y.value,A=y.valueSpec||{},T=y.objectElementValidators||{},S=y.style,E=y.styleSpec;let k=[];const Z=n.K(d);if(Z!=="object")return[new n.V(o,d,`object expected, ${Z} found`)];for(const K in d){const Y=K.split(".")[0];let re;T[Y]?re=T[Y]:A[Y]?re=br:T["*"]?re=T["*"]:A["*"]&&(re=br),re?k=k.concat(re({key:(o&&`${o}.`)+K,value:d[K],valueSpec:A[Y]||A["*"],style:S,styleSpec:E,object:d,objectKey:K},d)):k.push(new n.J(o,d[K],`unknown property "${K}"`))}for(const K in A)T[K]||A[K].required&&A[K].default===void 0&&d[K]===void 0&&k.push(new n.V(o,d,`missing required property "${K}"`));return k}function ir(y){const o=y.value,d=y.valueSpec,A=y.style,T=y.styleSpec,S=y.key,E=y.arrayElementValidator||br;if(n.K(o)!=="array")return[new n.V(S,o,`array expected, ${n.K(o)} found`)];if(d.length&&o.length!==d.length)return[new n.V(S,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new n.V(S,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let k={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};T.$version<7&&(k.function=d.function),n.K(d.value)==="object"&&(k=d.value);let Z=[];for(let K=0;K<o.length;K++)Z=Z.concat(E({array:o,arrayIndex:K,value:o[K],valueSpec:k,style:A,styleSpec:T,key:`${S}[${K}]`},!0));return Z}function Ea(y){const o=y.key,d=y.value,A=y.valueSpec;let T=n.K(d);if(T==="number"&&d!=d&&(T="NaN"),T!=="number")return[new n.V(o,d,`number expected, ${T} found`)];if("minimum"in A){let S=A.minimum;if(n.K(A.minimum)==="array"&&(S=A.minimum[y.arrayIndex]),d<S)return[new n.V(o,d,`${d} is less than the minimum value ${S}`)]}if("maximum"in A){let S=A.maximum;if(n.K(A.maximum)==="array"&&(S=A.maximum[y.arrayIndex]),d>S)return[new n.V(o,d,`${d} is greater than the maximum value ${S}`)]}return[]}function Na(y){const o=y.valueSpec,d=n.M(y.value.type);let A,T,S,E={};const k=d!=="categorical"&&y.value.property===void 0,Z=!k,K=n.K(y.value.stops)==="array"&&n.K(y.value.stops[0])==="array"&&n.K(y.value.stops[0][0])==="object",Y=_t({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(pe){if(d==="identity")return[new n.V(pe.key,pe.value,'identity function may not have a "stops" property')];let Pe=[];const Ce=pe.value;return Pe=Pe.concat(ir({key:pe.key,value:Ce,valueSpec:pe.valueSpec,style:pe.style,styleSpec:pe.styleSpec,arrayElementValidator:re})),n.K(Ce)==="array"&&Ce.length===0&&Pe.push(new n.V(pe.key,Ce,"array must have at least one stop")),Pe},default:function(pe){return br({key:pe.key,value:pe.value,valueSpec:o,style:pe.style,styleSpec:pe.styleSpec})}}});return d==="identity"&&k&&Y.push(new n.V(y.key,y.value,'missing required property "property"')),d==="identity"||y.value.stops||Y.push(new n.V(y.key,y.value,'missing required property "stops"')),d==="exponential"&&y.valueSpec.expression&&!n.N(y.valueSpec)&&Y.push(new n.V(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(Z&&!n.O(y.valueSpec)?Y.push(new n.V(y.key,y.value,"property functions not supported")):k&&!n.Q(y.valueSpec)&&Y.push(new n.V(y.key,y.value,"zoom functions not supported"))),d!=="categorical"&&!K||y.value.property!==void 0||Y.push(new n.V(y.key,y.value,'"property" property is required')),Y;function re(pe){let Pe=[];const Ce=pe.value,Ve=pe.key;if(n.K(Ce)!=="array")return[new n.V(Ve,Ce,`array expected, ${n.K(Ce)} found`)];if(Ce.length!==2)return[new n.V(Ve,Ce,`array length 2 expected, length ${Ce.length} found`)];if(K){if(n.K(Ce[0])!=="object")return[new n.V(Ve,Ce,`object expected, ${n.K(Ce[0])} found`)];if(Ce[0].zoom===void 0)return[new n.V(Ve,Ce,"object stop key must have zoom")];if(Ce[0].value===void 0)return[new n.V(Ve,Ce,"object stop key must have value")];const Le=n.M(Ce[0].zoom);if(typeof Le!="number")return[new n.V(Ve,Ce[0].zoom,"stop zoom values must be numbers")];if(S&&S>Le)return[new n.V(Ve,Ce[0].zoom,"stop zoom values must appear in ascending order")];Le!==S&&(S=Le,T=void 0,E={}),Pe=Pe.concat(_t({key:`${Ve}[0]`,value:Ce[0],valueSpec:{zoom:{}},style:pe.style,styleSpec:pe.styleSpec,objectElementValidators:{zoom:Ea,value:ne}}))}else Pe=Pe.concat(ne({key:`${Ve}[0]`,value:Ce[0],style:pe.style,styleSpec:pe.styleSpec},Ce));return n.S(n.U(Ce[1]))?Pe.concat([new n.V(`${Ve}[1]`,Ce[1],"expressions are not allowed in function stops.")]):Pe.concat(br({key:`${Ve}[1]`,value:Ce[1],valueSpec:o,style:pe.style,styleSpec:pe.styleSpec}))}function ne(pe,Pe){const Ce=n.K(pe.value),Ve=n.M(pe.value),Le=pe.value!==null?pe.value:Pe;if(A){if(Ce!==A)return[new n.V(pe.key,Le,`${Ce} stop domain type must match previous stop domain type ${A}`)]}else A=Ce;if(Ce!=="number"&&Ce!=="string"&&Ce!=="boolean"&&typeof Ve!="number"&&typeof Ve!="string"&&typeof Ve!="boolean")return[new n.V(pe.key,Le,"stop domain value must be a number, string, or boolean")];if(Ce!=="number"&&d!=="categorical"){let $e=`number expected, ${Ce} found`;return n.O(o)&&d===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(pe.key,Le,$e)]}return d!=="categorical"||Ce!=="number"||typeof Ve=="number"&&isFinite(Ve)&&Math.floor(Ve)===Ve?d!=="categorical"&&Ce==="number"&&typeof Ve=="number"&&typeof T=="number"&&T!==void 0&&Ve<T?[new n.V(pe.key,Le,"stop domain values must appear in ascending order")]:(T=Ve,d==="categorical"&&Ve in E?[new n.V(pe.key,Le,"stop domain values must be unique")]:(E[Ve]=!0,[])):[new n.V(pe.key,Le,`integer expected, found ${String(Ve)}`)]}}function Ja(y){const o=(y.expressionContext==="property"?n.W:n.X)(n.U(y.value),y.valueSpec);if(o.result==="error")return o.value.map(A=>new n.V(`${y.key}${A.key}`,y.value,A.message));const d=o.value.expression||o.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!d.outputDefined())return[new n.V(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!n.Y(d))return[new n.V(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter")return cr(d,y);if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!n.Z(d,["zoom","feature-state"]))return[new n.V(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!n._(d))return[new n.V(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cr(y,o){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const T of o.valueSpec.expression.parameters)d.delete(T);if(d.size===0)return[];const A=[];return y instanceof n.$&&d.has(y.name)?[new n.V(o.key,o.value,`["${y.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(y.eachChild(T=>{A.push(...cr(T,o))}),A)}function dr(y){const o=y.key,d=y.value,A=y.valueSpec,T=[];return Array.isArray(A.values)?A.values.indexOf(n.M(d))===-1&&T.push(new n.V(o,d,`expected one of [${A.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(A.values).indexOf(n.M(d))===-1&&T.push(new n.V(o,d,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function Sr(y){return n.a1(n.U(y.value))?Ja(n.L({},y,{expressionContext:"filter",valueSpec:y.styleSpec[`filter_${y.layerType||"fill"}`]})):ka(y)}function ka(y){const o=y.value,d=y.key;if(n.K(o)!=="array")return[new n.V(d,o,`array expected, ${n.K(o)} found`)];const A=y.styleSpec;let T,S=[];if(o.length<1)return[new n.V(d,o,"filter array must have at least 1 element")];switch(S=S.concat(dr({key:`${d}[0]`,value:o[0],valueSpec:A.filter_operator,style:y.style,styleSpec:y.styleSpec})),n.M(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&n.M(o[1])==="$type"&&S.push(new n.V(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&S.push(new n.V(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(T=n.K(o[1]),T!=="string"&&S.push(new n.V(`${d}[1]`,o[1],`string expected, ${T} found`)));for(let E=2;E<o.length;E++)T=n.K(o[E]),n.M(o[1])==="$type"?S=S.concat(dr({key:`${d}[${E}]`,value:o[E],valueSpec:A.geometry_type,style:y.style,styleSpec:y.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&S.push(new n.V(`${d}[${E}]`,o[E],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let E=1;E<o.length;E++)S=S.concat(ka({key:`${d}[${E}]`,value:o[E],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":T=n.K(o[1]),o.length!==2?S.push(new n.V(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):T!=="string"&&S.push(new n.V(`${d}[1]`,o[1],`string expected, ${T} found`))}return S}function Gr(y,o){const d=y.key,A=y.style,T=y.layer,S=y.styleSpec,E=y.value,k=y.objectKey,Z=S[`${o}_${y.layerType}`];if(!Z)return[];const K=k.match(/^(.*)-use-theme$/);if(o==="paint"&&K&&Z[K[1]])return n.S(E)?[].concat(br({key:y.key,value:E,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:A,styleSpec:S,expressionContext:"property",propertyType:o,propertyKey:k})):br({key:d,value:E,valueSpec:{type:"string"},style:A,styleSpec:S});const Y=k.match(/^(.*)-transition$/);if(o==="paint"&&Y&&Z[Y[1]]&&Z[Y[1]].transition)return br({key:d,value:E,valueSpec:S.transition,style:A,styleSpec:S});const re=y.valueSpec||Z[k];if(!re)return[new n.J(d,E,`unknown property "${k}"`)];let ne;if(n.K(E)==="string"&&n.O(re)&&!re.tokens&&(ne=/^{([^}]+)}$/.exec(E))){const Pe=`\`{ "type": "identity", "property": ${ne?JSON.stringify(ne[1]):'"_"'} }\``;return[new n.V(d,E,`"${k}" does not support interpolation syntax
Use an identity property function instead: ${Pe}.`)]}const pe=[];if(y.layerType==="symbol")k!=="text-field"||!A||A.glyphs||A.imports||pe.push(new n.V(d,E,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&n.a2(n.U(E))&&n.M(E.type)==="identity"&&pe.push(new n.V(d,E,'"text-font" does not support identity functions'));else if(y.layerType==="model"&&o==="paint"&&T&&T.layout&&T.layout.hasOwnProperty("model-id")&&n.O(re)&&(n.a3(re)||n.Q(re))){const Pe=n.W(n.U(E),re),Ce=Pe.value.expression||Pe.value._styleExpression.expression;Ce&&!n.Z(Ce,["measure-light"])&&(k==="model-emissive-strength"&&n._(Ce)&&n.Y(Ce)||pe.push(new n.V(d,E,`${k} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return pe.concat(br({key:y.key,value:E,valueSpec:re,style:A,styleSpec:S,expressionContext:"property",propertyType:o,propertyKey:k}))}function dn(y){return Gr(y,"paint")}function Cn(y){return Gr(y,"layout")}function fn(y){let o=[];const d=y.value,A=y.key,T=y.style,S=y.styleSpec;d.type||d.ref||o.push(new n.V(A,d,'either "type" or "ref" is required'));let E=n.M(d.type);const k=n.M(d.ref);if(d.id){const Z=n.M(d.id);for(let K=0;K<y.arrayIndex;K++){const Y=T.layers[K];n.M(Y.id)===Z&&o.push(new n.V(A,d.id,`duplicate layer id "${d.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in d){let Z;["type","source","source-layer","filter","layout"].forEach(K=>{K in d&&o.push(new n.V(A,d[K],`"${K}" is prohibited for ref layers`))}),T.layers.forEach(K=>{n.M(K.id)===k&&(Z=K)}),Z?Z.ref?o.push(new n.V(A,d.ref,"ref cannot reference another ref layer")):E=n.M(Z.type):typeof k=="string"&&o.push(new n.V(A,d.ref,`ref layer "${k}" not found`))}else if(E!=="background"&&E!=="sky"&&E!=="slot")if(d.source){const Z=T.sources&&T.sources[d.source],K=Z&&n.M(Z.type);Z?K==="vector"&&E==="raster"?o.push(new n.V(A,d.source,`layer "${d.id}" requires a raster source`)):K==="raster"&&E!=="raster"?o.push(new n.V(A,d.source,`layer "${d.id}" requires a vector source`)):K!=="vector"||d["source-layer"]?K==="raster-dem"&&E!=="hillshade"?o.push(new n.V(A,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):K!=="raster-array"||["raster","raster-particle"].includes(E)?E!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||K==="geojson"&&Z.lineMetrics?E==="raster-particle"&&K!=="raster-array"&&o.push(new n.V(A,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):o.push(new n.V(A,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new n.V(A,d.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new n.V(A,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new n.V(A,d.source,`source "${d.source}" not found`))}else o.push(new n.V(A,d,'missing required property "source"'));return o=o.concat(_t({key:A,value:d,valueSpec:S.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>br({key:`${A}.type`,value:d.type,valueSpec:S.layer.type,style:y.style,styleSpec:y.styleSpec,object:d,objectKey:"type"}),filter:Z=>Sr(n.L({layerType:E},Z)),layout:Z=>_t({layer:d,key:Z.key,value:Z.value,valueSpec:{},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":K=>Cn(n.L({layerType:E},K))}}),paint:Z=>_t({layer:d,key:Z.key,value:Z.value,valueSpec:{},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":K=>dn(n.L({layerType:E,layer:d},K))}})}})),o}function va(y){const o=y.value,d=y.key,A=n.K(o);return A!=="string"?[new n.V(d,o,`string expected, ${A} found`)]:[]}const Wa={promoteId:function y({key:o,value:d}){if(n.K(d)==="string")return va({key:o,value:d});if(Array.isArray(d)){const A=[],T=n.U(d),S=n.X(T);return S.result==="error"&&S.value.forEach(E=>{A.push(new n.V(`${o}${E.key}`,null,`${E.message}`))}),n.Z(S.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||A.push(new n.V(`${o}`,null,"promoteId expression should be only feature dependent")),A}{const A=[];for(const T in d)A.push(...y({key:`${o}.${T}`,value:d[T]}));return A}}};function ua(y){const o=y.value,d=y.key,A=y.styleSpec,T=y.style;if(!o.type)return[new n.V(d,o,'"type" is required')];const S=n.M(o.type);let E=[];switch(["vector","raster","raster-dem","raster-array"].includes(S)&&(o.url||o.tiles||E.push(new n.J(d,o,'Either "url" or "tiles" is required.'))),S){case"vector":case"raster":case"raster-dem":case"raster-array":return E=E.concat(_t({key:d,value:o,valueSpec:A[`source_${S.replace("-","_")}`],style:y.style,styleSpec:A,objectElementValidators:Wa})),E;case"geojson":if(E=_t({key:d,value:o,valueSpec:A.source_geojson,style:T,styleSpec:A,objectElementValidators:Wa}),o.cluster)for(const k in o.clusterProperties){const[Z,K]=o.clusterProperties[k],Y=typeof Z=="string"?[Z,["accumulated"],["get",k]]:Z;E.push(...Ja({key:`${d}.${k}.map`,value:K,expressionContext:"cluster-map"})),E.push(...Ja({key:`${d}.${k}.reduce`,value:Y,expressionContext:"cluster-reduce"}))}return E;case"video":return _t({key:d,value:o,valueSpec:A.source_video,style:T,styleSpec:A});case"image":return _t({key:d,value:o,valueSpec:A.source_image,style:T,styleSpec:A});case"canvas":return[new n.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dr({key:`${d}.type`,value:o.type,valueSpec:{values:Xa(A)}})}}function Xa(y){return y.source.reduce((o,d)=>{const A=y[d];return A.type.type==="enum"&&(o=o.concat(Object.keys(A.type.values))),o},[])}function pr(y){const o=y.value,d=y.styleSpec,A=d.light,T=y.style;let S=[];const E=n.K(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new n.V("light",o,`object expected, ${E} found`)]),S;for(const k in o){const Z=k.match(/^(.*)-transition$/),K=k.match(/^(.*)-use-theme$/);S=S.concat(K&&A[K[1]]?br({key:k,value:o[k],valueSpec:{type:"string"},style:T,styleSpec:d}):Z&&A[Z[1]]&&A[Z[1]].transition?br({key:k,value:o[k],valueSpec:d.transition,style:T,styleSpec:d}):A[k]?br({key:k,value:o[k],valueSpec:A[k],style:T,styleSpec:d}):[new n.V(k,o[k],`unknown property "${k}"`)])}return S}function Mn(y){const o=y.value;let d=[];if(!o)return d;const A=n.K(o);if(A!=="object")return d=d.concat([new n.V("light-3d",o,`object expected, ${A} found`)]),d;const T=y.styleSpec,S=T["light-3d"],E=y.key,k=y.style,Z=y.style.lights;for(const re of["type","id"])if(!(re in o))return d=d.concat([new n.V("light-3d",o,`missing property ${re} on light`)]),d;if(o.type&&Z)for(let re=0;re<y.arrayIndex;re++){const ne=n.M(o.type),pe=Z[re];n.M(pe.type)===ne&&d.push(new n.V(E,o.id,`duplicate light type "${o.type}", previously defined at line ${pe.id.__line__}`))}const K=`properties_light_${o.type}`;if(!(K in T))return d=d.concat([new n.V("light-3d",o,`Invalid light type ${o.type}`)]),d;const Y=T[K];for(const re in o)if(re==="properties"){const ne=o[re],pe=n.K(ne);if(pe!=="object")return d=d.concat([new n.V("properties",ne,`object expected, ${pe} found`)]),d;for(const Pe in ne)d=d.concat(Y[Pe]?br({key:Pe,value:ne[Pe],valueSpec:Y[Pe],style:k,styleSpec:T}):[new n.J(y.key,ne[Pe],`unknown property "${Pe}"`)])}else{const ne=re.match(/^(.*)-transition$/),pe=re.match(/^(.*)-use-theme$/);d=d.concat(pe&&S[pe[1]]?br({key:re,value:o[re],valueSpec:{type:"string"},style:k,styleSpec:T}):ne&&S[ne[1]]&&S[ne[1]].transition?br({key:re,value:o[re],valueSpec:T.transition,style:k,styleSpec:T}):S[re]?br({key:re,value:o[re],valueSpec:S[re],style:k,styleSpec:T}):[new n.J(re,o[re],`unknown property "${re}"`)])}return d}function Sn(y){const o=y.value,d=y.key,A=y.style,T=y.styleSpec,S=T.terrain;let E=[];const k=n.K(o);if(o===void 0||k==="null")return E;if(k!=="object")return E=E.concat([new n.V("terrain",o,`object expected, ${k} found`)]),E;for(const Z in o){const K=Z.match(/^(.*)-transition$/),Y=Z.match(/^(.*)-use-theme$/);E=E.concat(Y&&S[Y[1]]?br({key:Z,value:o[Z],valueSpec:{type:"string"},style:A,styleSpec:T}):K&&S[K[1]]&&S[K[1]].transition?br({key:Z,value:o[Z],valueSpec:T.transition,style:A,styleSpec:T}):S[Z]?br({key:Z,value:o[Z],valueSpec:S[Z],style:A,styleSpec:T}):[new n.J(Z,o[Z],`unknown property "${Z}"`)])}if(o.source){const Z=A.sources&&A.sources[o.source],K=Z&&n.M(Z.type);Z?K!=="raster-dem"&&E.push(new n.V(d,o.source,`terrain cannot be used with a source of type ${String(K)}, it only be used with a "raster-dem" source type`)):E.push(new n.V(d,o.source,`source "${o.source}" not found`))}else E.push(new n.V(d,o,'terrain is missing required property "source"'));return E}function hn(y){const o=y.value,d=y.style,A=y.styleSpec,T=A.fog;let S=[];const E=n.K(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new n.V("fog",o,`object expected, ${E} found`)]),S;for(const k in o){const Z=k.match(/^(.*)-transition$/),K=k.match(/^(.*)-use-theme$/);S=S.concat(K&&T[K[1]]?br({key:k,value:o[k],valueSpec:{type:"string"},style:d,styleSpec:A}):Z&&T[Z[1]]&&T[Z[1]].transition?br({key:k,value:o[k],valueSpec:A.transition,style:d,styleSpec:A}):T[k]?br({key:k,value:o[k],valueSpec:T[k],style:d,styleSpec:A}):[new n.J(k,o[k],`unknown property "${k}"`)])}return S}const $r={"*":()=>[],array:ir,boolean:function(y){const o=y.value,d=y.key,A=n.K(o);return A!=="boolean"?[new n.V(d,o,`boolean expected, ${A} found`)]:[]},number:Ea,color:function(y){const o=y.key,d=y.value,A=n.K(d);return A!=="string"?[new n.V(o,d,`color expected, ${A} found`)]:n.a0.parseCSSColor(d)===null?[new n.V(o,d,`color expected, "${d}" found`)]:[]},enum:dr,filter:Sr,function:Na,layer:fn,object:_t,source:ua,model:n.a4,light:pr,"light-3d":Mn,terrain:Sn,fog:hn,string:va,formatted:function(y){return va(y).length===0?[]:Ja(y)},resolvedImage:function(y){return va(y).length===0?[]:Ja(y)},projection:function(y){const o=y.value,d=y.styleSpec,A=d.projection,T=y.style;let S=[];const E=n.K(o);if(E==="object")for(const k in o)S=S.concat(br({key:k,value:o[k],valueSpec:A[k],style:T,styleSpec:d}));else E!=="string"&&(S=S.concat([new n.V("projection",o,`object or string expected, ${E} found`)]));return S},import:function(y){const{value:o,styleSpec:d}=y,{data:A,...T}=o;Object.defineProperty(T,"__line__",{value:o.__line__,enumerable:!1});let S=_t(n.L({},y,{value:T,valueSpec:d.import}));return n.M(T.id)===""&&S.push(new n.V(`${y.key}.id`,T,"import id can't be an empty string")),A&&(S=S.concat(zi(A,d,{key:`${y.key}.data`}))),S},iconset:function(y){const o=y.value,d=y.key,A=y.styleSpec,T=y.style;if(!o.type)return[new n.V(d,o,'"type" is required')];const S=n.M(o.type);let E=[];if(E=E.concat(_t({key:d,value:o,valueSpec:A[`iconset_${S}`],style:T,styleSpec:A})),S==="source"&&o.source){const k=T.sources&&T.sources[o.source],Z=k&&n.M(k.type);k?Z!=="raster-array"&&E.push(new n.V(d,o.source,`iconset cannot be used with a source of type ${String(Z)}, it only be used with a "raster-array" source type`)):E.push(new n.V(d,o.source,`source "${o.source}" not found`))}return E}};function br(y,o=!1){const d=y.value,A=y.valueSpec,T=y.styleSpec;if(A.expression&&n.a2(n.M(d)))return Na(y);if(A.expression&&n.S(n.U(d)))return Ja(y);if(A.type&&$r[A.type]){const S=$r[A.type](y);return o===!0&&S.length>0&&n.K(y.value)==="array"?Ja(y):S}return _t(n.L({},y,{valueSpec:A.type?T[A.type]:A}))}function $i(y){const o=y.value,d=y.key,A=va(y);return A.length||(o.indexOf("{fontstack}")===-1&&A.push(new n.V(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&A.push(new n.V(d,o,'"glyphs" url must include a "{range}" token'))),A}function zi(y,o=n.a5,d={}){return br({key:d.key||"",value:y,valueSpec:o.$root,styleSpec:o,style:y,objectElementValidators:{glyphs:$i,"*":()=>[]}})}function Ui(y,o=n.a5){return bt(zi(y,o))}const ao=y=>bt(ua(y)),di=y=>bt(pr(y)),rn=y=>bt(Mn(y)),Jn=y=>bt(Sn(y)),vu=y=>bt(hn(y)),us=y=>bt(function(o){const d=o.value,A=o.style,T=o.styleSpec,S=T.snow;let E=[];const k=n.K(d);if(d===void 0)return E;if(k!=="object")return E=E.concat([new n.V("snow",d,`object expected, ${k} found`)]),E;for(const Z in d){const K=Z.match(/^(.*)-transition$/);E=E.concat(K&&S[K[1]]&&S[K[1]].transition?br({key:Z,value:d[Z],valueSpec:T.transition,style:A,styleSpec:T}):S[Z]?br({key:Z,value:d[Z],valueSpec:S[Z],style:A,styleSpec:T}):[new n.J(Z,d[Z],`unknown property "${Z}"`)])}return E}(y)),Xt=y=>bt(function(o){const d=o.value,A=o.style,T=o.styleSpec,S=T.rain;let E=[];const k=n.K(d);if(d===void 0)return E;if(k!=="object")return E=E.concat([new n.V("rain",d,`object expected, ${k} found`)]),E;for(const Z in d){const K=Z.match(/^(.*)-transition$/);E=E.concat(K&&S[K[1]]&&S[K[1]].transition?br({key:Z,value:d[Z],valueSpec:T.transition,style:A,styleSpec:T}):S[Z]?br({key:Z,value:d[Z],valueSpec:S[Z],style:A,styleSpec:T}):[new n.J(Z,d[Z],`unknown property "${Z}"`)])}return E}(y)),Ne=y=>bt(fn(y)),Fe=y=>bt(Sr(y)),Xe=y=>bt(dn(y)),wt=y=>bt(Cn(y)),yt=y=>bt(n.a4(y));function bt(y){return y.slice().sort((o,d)=>o.line&&d.line?o.line-d.line:0)}function Gt(y,o){let d=!1;if(o&&o.length)for(const A of o)A instanceof n.J?n.w(A.message):(y.fire(new n.z(new Error(A.message))),d=!0);return d}let Et;class Kt extends n.E{constructor(o,d="flat"){super(),this._transitionable=new n.a6(Et||(Et=new n.a7({anchor:new n.a8(n.a5.light.anchor),position:new n.a9(n.a5.light.position),color:new n.a8(n.a5.light.color),intensity:new n.a8(n.a5.light.intensity)}))),this.setLight(o,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,d,A={}){this._validate(di,o,A)||(this._transitionable.setTransitionOrValue(o),this.id=d)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,A){return(!A||A.validate!==!1)&&Gt(this,o.call(Ui,n.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let Wt=class extends n.E{constructor(y,o,d,A){super(),this.scope=d,this._transitionable=new n.a6(new n.a7({source:new n.a8(n.a5.terrain.source),exaggeration:new n.a8(n.a5.terrain.exaggeration)}),d,A),this._transitionable.setTransitionOrValue(y,A),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(y,o){this._transitionable.setTransitionOrValue(y,o)}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}getExaggeration(y){return this._transitioning.possiblyEvaluate(new n.aa(y)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const y=this._transitionable._values.exaggeration;if(!y)return null;const o=y.value.expression;if(!o)return null;let d=-1,A=-1,T=1;for(const S of o.zoomStops)T=o.evaluate(new n.aa(S)),T>.01?(d=S,A=-1):A=S;return T<.01&&d>0&&A>d?[d,A]:null}isZoomDependent(){const y=this._transitionable._values.exaggeration;return y!=null&&y.value!=null&&y.value.expression!=null&&y.value.expression instanceof n.ab}};const $t=45,Ta=65,Ma=.05;function ja(y,o,d,A){const T=n.ae($t,Ta,d),[S,E]=_r(y,A);let k=1-Math.min(1,Math.exp((o-S)/(E-S)*-6));return k*=k*k,k=Math.min(1,1.00747*k),k*T*y.alpha}function _r(y,o){const d=.5/Math.tan(.5*o);return[y.range[0]+d,y.range[1]+d]}function Vr(y,o,d,A,T){const S=n.ad.vec3.transformMat4([],[o,d,A],T.mercatorFogMatrix);return ja(y,n.ad.vec3.length(S),T.pitch,T._fov)}function zr(y,o,d,A,T,S,E){const k=[[d,A,0],[T,A,0],[T,S,0],[d,S,0]];let Z=Number.MAX_VALUE,K=-Number.MAX_VALUE;for(const Y of k){const re=n.ad.vec3.transformMat4([],Y,o),ne=n.ad.vec3.length(re);Z=Math.min(Z,ne),K=Math.max(K,ne)}return[ja(y,Z,E.pitch,E._fov),ja(y,K,E.pitch,E._fov)]}class Zr extends n.E{constructor(o,d,A,T){super();const S=new n.a7({range:new n.a8(n.a5.fog.range),color:new n.a8(n.a5.fog.color),"color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a8(n.a5.fog["high-color"]),"high-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a8(n.a5.fog["space-color"]),"space-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a8(n.a5.fog["horizon-blend"]),"star-intensity":new n.a8(n.a5.fog["star-intensity"]),"vertical-range":new n.a8(n.a5.fog["vertical-range"])});this._transitionable=new n.a6(S,A,new Map(T)),this.set(o,T),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new n.af(S),this.scope=A}get state(){const o=this._transform,d=o.projection.name==="globe",A=n.ag(o.zoom),T=this.properties.get("range"),S=[.5,3];return{range:d?[n.ah(S[0],T[0],A),n.ah(S[1],T[1],A)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,d,A={}){if(this._validate(vu,o,A))return;const T=n.l({},o);for(const S of Object.keys(n.a5.fog))T[S]===void 0&&(T[S]=n.a5.fog[S].default);this._options=T,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ae($t,Ta,o))*d.a}getOpacityAtLatLng(o,d){return this._transform.projection.supportsFog?function(A,T,S){const E=n.ac.fromLngLat(T),k=S.elevation?S.elevation.getAtPointOrZero(E):0;return Vr(A,E.x,E.y,k,S)}(this.state,o,d):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(o.toUnwrapped());return zr(this.state,d,0,0,n.ai,n.ai,this._transform)}getOpacityForBounds(o,d,A,T,S){return this._transform.projection.supportsFog?zr(this.state,o,d,A,T,S,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?_r(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const A of d){const T=o.points[A];let S;if(T[2]>=0)S=T;else{const E=o.points[A-4];S=n.aj(E,T,E[2]/(E[2]-T[2]))}if(Vr(this.state,S[0],S[1],0,this._transform)>=Ma)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,A){return(!A||A.validate!==!1)&&Gt(this,o.call(Ui,n.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let In,ei,Hr,An,Kr=class extends n.E{constructor(y,o,d,A){super();const T=In||(In=new n.a7({density:new n.a8(n.a5.snow.density),intensity:new n.a8(n.a5.snow.intensity),color:new n.a8(n.a5.snow.color),opacity:new n.a8(n.a5.snow.opacity),vignette:new n.a8(n.a5.snow.vignette),"vignette-color":new n.a8(n.a5.snow["vignette-color"]),"center-thinning":new n.a8(n.a5.snow["center-thinning"]),direction:new n.a8(n.a5.snow.direction),"flake-size":new n.a8(n.a5.snow["flake-size"])}));this._transitionable=new n.a6(T,d,new Map(A)),this.set(y,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(T),this.scope=d}get state(){const y=this.properties.get("opacity"),o=this.properties.get("color"),d=this.properties.get("direction"),A=n.ak(d[0]),T=-Math.max(n.ak(d[1]),.01),S=[Math.cos(A)*Math.cos(T),Math.sin(A)*Math.cos(T),Math.sin(T)],E=this.properties.get("vignette"),k=this.properties.get("vignette-color");return k.a=E,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*y),direction:S,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:k}}get(){return this._transitionable.serialize()}set(y,o,d={}){if(this._validate(us,y,d))return;const A=n.l({},y);for(const T of Object.keys(n.a5.snow))A[T]===void 0&&(A[T]=n.a5.snow[T].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,o,d){return(!d||d.validate!==!1)&&Gt(this,y.call(Ui,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}},Fn=class extends n.E{constructor(y,o,d,A){super();const T=ei||(ei=new n.a7({density:new n.a8(n.a5.rain.density),intensity:new n.a8(n.a5.rain.intensity),color:new n.a8(n.a5.rain.color),opacity:new n.a8(n.a5.rain.opacity),vignette:new n.a8(n.a5.rain.vignette),"vignette-color":new n.a8(n.a5.rain["vignette-color"]),"center-thinning":new n.a8(n.a5.rain["center-thinning"]),direction:new n.a8(n.a5.rain.direction),"droplet-size":new n.a8(n.a5.rain["droplet-size"]),"distortion-strength":new n.a8(n.a5.rain["distortion-strength"])}));this._transitionable=new n.a6(T,d,new Map(A)),this.set(y,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(T),this.scope=d}get state(){const y=this.properties.get("opacity"),o=this.properties.get("color"),d=this.properties.get("direction"),A=n.ak(d[0]),T=-Math.max(n.ak(d[1]),.01),S=[Math.cos(A)*Math.cos(T),Math.sin(A)*Math.cos(T),Math.sin(T)],E=this.properties.get("vignette-color");return E.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*y),direction:S,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:E}}get(){return this._transitionable.serialize()}set(y,o,d={}){if(this._validate(Xt,y,d))return;const A=n.l({},y);for(const T of Object.keys(n.a5.rain))A[T]===void 0&&(A[T]=n.a5.rain[T].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,o,d){return(!d||d.validate!==!1)&&Gt(this,y.call(Ui,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}};class Di extends n.E{constructor(o,d,A,T){super(),this.scope=A,this._options=o,this.properties=new n.af(d),this._transitionable=new n.a6(d,A,new Map(T)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,d){this._options=o,this._transitionable.setTransitionOrValue(o.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Ki{constructor(o,d,A,T){this.screenBounds=o,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,T)}static createFromScreenPoints(o,d){let A,T;if(o instanceof n.P||typeof o[0]=="number"){const S=n.P.convert(o);A=[S],T=d.isPointAboveHorizon(S)}else{const S=n.P.convert(o[0]),E=n.P.convert(o[1]);A=[S,E],T=n.an(S,E).every(k=>d.isPointAboveHorizon(k))}return new Ki(A,d.getCameraPoint(),T,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return n.an(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const d=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],T=n.an(d,A,0,!1);return this.cameraPoint.y>A.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<A.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=A.x?T[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(T[3]=this.cameraPoint)),n.ao(T,o)}bufferedCameraGeometryGlobe(o){const d=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],T=n.an(d,A,o),S=this.cameraPoint.clone();switch(3*((S.y>d.y)+(S.y>A.y))+((S.x>d.x)+(S.x>A.x))){case 0:T[0]=S,T[4]=S.clone();break;case 1:T.splice(1,0,S);break;case 2:T[1]=S;break;case 3:T.splice(4,0,S);break;case 5:T.splice(2,0,S);break;case 6:T[3]=S;break;case 7:T.splice(3,0,S);break;case 8:T[2]=S}return T}containsTile(o,d,A,T=0){const S=o.queryPadding/d._pixelsPerMercatorPixel+1,E=A?this._bufferedCameraMercator(S,d):this._bufferedScreenMercator(S,d);let k=o.tileID.wrap+(E.unwrapped?T:0);const Z=E.polygon.map(Ve=>n.ap(o.tileTransform,Ve,k));if(!n.aq(Z,0,0,n.ai,n.ai))return;k=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const K=this.screenGeometryMercator.polygon.map(Ve=>n.ar(o.tileTransform,Ve,k)),Y=K.map(Ve=>new n.P(Ve[0],Ve[1])),re=d.getFreeCameraOptions().position||new n.ac(0,0,0),ne=n.ar(o.tileTransform,re,k),pe=K.map(Ve=>{const Le=n.ad.vec3.sub(Ve,Ve,ne);return n.ad.vec3.normalize(Le,Le),new n.as(ne,Le)}),Pe=n.at(o,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Y,tilespaceRays:pe,bufferedTilespaceGeometry:Z,bufferedTilespaceBounds:(Ce=n.au(Z),Ce.min.x=n.ay(Ce.min.x,0,n.ai),Ce.min.y=n.ay(Ce.min.y,0,n.ai),Ce.max.x=n.ay(Ce.max.x,0,n.ai),Ce.max.y=n.ay(Ce.max.y,0,n.ai),Ce),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:Pe};var Ce}_bufferedScreenMercator(o,d){const A=Uo(o);if(this._screenRaycastCache[A])return this._screenRaycastCache[A];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),d):{polygon:this.bufferedScreenGeometry(o).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[A]=T,T}}_bufferedCameraMercator(o,d){const A=Uo(o);if(this._cameraRaycastCache[A])return this._cameraRaycastCache[A];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),d):{polygon:this.bufferedCameraGeometry(o).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[A]=T,T}}_projectAndResample(o,d){const A=function(S,E){const k=n.ad.mat4.multiply([],E.pixelMatrix,E.globeMatrix),Z=[0,-n.az,0,1],K=[0,n.az,0,1],Y=[0,0,0,1];n.ad.vec4.transformMat4(Z,Z,k),n.ad.vec4.transformMat4(K,K,k),n.ad.vec4.transformMat4(Y,Y,k);const re=new n.P(Z[0]/Z[3],Z[1]/Z[3]),ne=new n.P(K[0]/K[3],K[1]/K[3]),pe=n.aw(S,re)&&Z[3]<Y[3],Pe=n.aw(S,ne)&&K[3]<Y[3];if(!pe&&!Pe)return null;const Ce=function(ut,ct,At){for(let Tt=1;Tt<ut.length;Tt++){const Qt=xs(ct.pointCoordinate3D(ut[Tt-1]).x),Ut=xs(ct.pointCoordinate3D(ut[Tt]).x);if(At<0){if(Qt<Ut)return{idx:Tt,t:-Qt/(Ut-1-Qt)}}else if(Ut<Qt)return{idx:Tt,t:(1-Qt)/(Ut+1-Qt)}}return null}(S,E,pe?-1:1);if(!Ce)return null;const{idx:Ve,t:Le}=Ce;let $e=Ve>1?bs(S.slice(0,Ve),E):[],nt=Ve<S.length?bs(S.slice(Ve),E):[];$e=$e.map(ut=>new n.P(xs(ut.x),ut.y)),nt=nt.map(ut=>new n.P(xs(ut.x),ut.y));const at=[...$e];at.length===0&&at.push(nt[nt.length-1]);const pt=n.ah(at[at.length-1].y,(nt.length===0?$e[0]:nt[0]).y,Le);let ot;return ot=pe?[new n.P(0,pt),new n.P(0,0),new n.P(1,0),new n.P(1,pt)]:[new n.P(1,pt),new n.P(1,1),new n.P(0,1),new n.P(0,pt)],at.push(...ot),nt.length===0?at.push($e[0]):at.push(...nt),{polygon:at.map(ut=>new n.ac(ut.x,ut.y)),unwrapped:!1}}(o,d);if(A)return A;const T=function(S,E){let k=!1,Z=-1/0,K=0;for(let re=0;re<S.length-1;re++)S[re].x>Z&&(Z=S[re].x,K=re);for(let re=0;re<S.length-1;re++){const ne=(K+re)%(S.length-1),pe=S[ne],Pe=S[ne+1];Math.abs(pe.x-Pe.x)>.5&&(pe.x<Pe.x?(pe.x+=1,ne===0&&(S[S.length-1].x+=1)):(Pe.x+=1,ne+1===S.length-1&&(S[0].x+=1)),k=!0)}const Y=n.av(E.center.lng);return k&&Y<Math.abs(Y-1)&&S.forEach(re=>{re.x-=1}),{polygon:S,unwrapped:k}}(bs(o,d).map(S=>new n.P(xs(S.x),S.y)),d);return{polygon:T.polygon.map(S=>new n.ac(S.x,S.y)),unwrapped:T.unwrapped}}}function bs(y,o){return n.ax(y,d=>{const A=o.pointCoordinate3D(d);d.x=A.x,d.y=A.y},1/256)}function xs(y){return y<0?1+y%1:y%1}function Uo(y){return 100*y|0}function Ps(y,o,d,A,T){const S=function(k,Z){if(k)return T(k);if(Z){if(y.url&&Z.tiles&&y.tiles&&delete y.tiles,Z.variants){if(!Array.isArray(Z.variants))return T(new Error("variants must be an array"));for(const Y of Z.variants){if(Y==null||typeof Y!="object"||Y.constructor!==Object)return T(new Error("variant must be an object"));if(!Array.isArray(Y.capabilities))return T(new Error("capabilities must be an array"));if(Y.capabilities.length===1&&Y.capabilities[0]==="meshopt"){Z=n.l(Z,Y);break}}}const K=n.aA(n.l({},Z,y),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);K.tiles=o.canonicalizeTileset(K,y.url),T(null,K)}},E=function(k,Z,K){if(!k)return null;if(!Z&&!K)return k;K=K||k.worldview_default;const Y=Object.values(k.language||{});if(Y.length===0)return null;const re=Object.values(k.worldview||{});if(re.length===0)return null;const ne=Y.every(Pe=>Pe===Z),pe=re.every(Pe=>Pe===K);return ne&&pe?k:Z in(k.language_options||{})||K in(k.worldview_options||{})?null:k.language_options&&k.worldview_options?k:null}(y.data,d,A);return E?n.q.frame(()=>S(null,E)):y.url?n.n(o.transformRequest(o.normalizeSourceURL(y.url,null,d,A),n.R.Source),S):n.q.frame(()=>{const{data:k,...Z}=y;S(null,Z)})}class qs{constructor(o,d,A){this.bounds=n.aB.convert(this.validateBounds(o)),this.minzoom=d||0,this.maxzoom=A||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const d=Math.pow(2,o.z),A=Math.floor(n.av(this.bounds.getWest())*d),T=Math.floor(n.aC(this.bounds.getNorth())*d),S=Math.ceil(n.av(this.bounds.getEast())*d),E=Math.ceil(n.aC(this.bounds.getSouth())*d);return o.x>=A&&o.x<S&&o.y>=T&&o.y<E}}class fc extends n.E{constructor(o,d,A,T){if(super(),this.id=o,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.aA(d,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T),this._tileWorkers={},this._deduped=new n.aD}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map.getWorldview();this._tileJSONRequest=Ps(this._options,this.map._requestManager,d,A,(T,S)=>{if(this._tileJSONRequest=null,this._loaded=!0,T)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),A&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new n.z(T));else if(S){if(n.l(this,S),this.hasWorldviews=!!S.worldview_options,S.worldview_default&&(this.worldviewDefault=S.worldview_default),S.vector_layers){this.vectorLayers=S.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const E of S.vector_layers)this.vectorLayerIds.push(E.id),S.worldview&&S.worldview[E.source]&&this.localizableLayerIds.add(E.id)}S.bounds&&(this.tileBounds=new qs(S.bounds,this.minzoom,this.maxzoom)),Se(S.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}o&&o(T)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(o,d){const A=o.tileID.canonical.url(this.tiles,this.scheme),T=this.map._requestManager.normalizeTileURL(A),S=this.map._requestManager.transformRequest(T,n.R.Tile),E=this.map.style?this.map.style.getLut(this.scope):null,k=E?{image:E.image.clone()}:null,Z={request:S,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:k,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(A)&&(Z.worldview=this.map.getWorldview()||this.worldviewDefault,Z.localizableLayerIds=this.localizableLayerIds),Z.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=d:o.request=o.actor.send("reloadTile",Z,K.bind(this));else if(o.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",Z,K.bind(this),void 0,!0);else{const Y=n.aE.call({deduped:this._deduped},Z,(re,ne)=>{re||!ne?K.call(this,re):(Z.data={cacheControl:ne.cacheControl,expires:ne.expires,rawData:ne.rawData.slice(0)},o.actor&&o.actor.send("loadTile",Z,K.bind(this),void 0,!0))},!0);o.request={cancel:Y}}function K(Y,re){return delete o.request,o.aborted?d(null):Y&&Y.status!==404?d(Y):(re&&re.resourceTiming&&(o.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&o.setExpiryData(re),o.loadVectorData(re,this.map.painter),n.aF(this.dispatcher),d(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,d){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class el extends n.E{constructor(o,d,A,T){super(),this.id=o,this.dispatcher=A,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},d),n.l(this,n.aA(d,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._tileJSONRequest=Ps(this._options,this.map._requestManager,null,null,(d,A)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new n.z(d)):A&&(n.l(this,A),A.raster_layers&&(this.rasterLayers=A.raster_layers,this.rasterLayerIds=this.rasterLayers.map(T=>T.id)),A.bounds&&(this.tileBounds=new qs(A.bounds,this.minzoom,this.maxzoom)),Se(A.tiles),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),o&&o(d)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,d){const A=n.q.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),A,this.tileSize);o.request=n.o(this.map._requestManager.transformRequest(T,n.R.Tile),(S,E,k,Z)=>(delete o.request,o.aborted?(o.state="unloaded",d(null)):S?(o.state="errored",d(S)):E?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:k,expires:Z}),o.setTexture(E,this.map.painter),o.state="loaded",n.aF(this.dispatcher),void d(null)):d(null)))}abortTile(o,d){o.request&&(o.request.cancel(),delete o.request),d&&d()}unloadTile(o,d){o.texture&&o.texture instanceof n.T?(o.destroy(!0),o.texture&&o.texture instanceof n.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Mi extends el{constructor(o,d,A,T){super(o,d,A,T),this.type="raster-array",this.maxzoom=22,this.partial=!0,this.iconsets={},this._options=n.l({type:"raster-array"},d)}triggerRepaint(o){const d=this.map.painter._terrain,A=this.map.style.getSourceCache(this.id);d&&d.enabled&&A&&d._clearRenderCacheForTile(A.id,o.tileID),this.map.triggerRepaint()}loadTile(o,d){const A=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),T=this.map._requestManager.transformRequest(A,n.R.Tile),S={request:T,uid:o.uid,tileID:o.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};o.source=this.id,o.scope=this.scope,o.requestParams=T,o.actor||(o.actor=this.dispatcher.getActor());const E=(k,Z,K,Y)=>{if(delete o.request,o.aborted)return o.state="unloaded",d(null);if(k)return k.name==="AbortError"?void 0:(o.state="errored",d(k));if(this.map._refreshExpiredTiles&&Z&&o.setExpiryData({cacheControl:K,expires:Y}),this.partial)o.state="empty";else{if(!Z)return d(null);o.state="loaded",o._isHeaderLoaded=!0,o._mrt=Z;const re=new Map;for(const ne in o._mrt.layers){const pe=o.getLayer(ne);if(pe)for(const Pe of pe.getBandList()){const{bytes:Ce,tileSize:Ve,buffer:Le}=pe.getBandView(Pe),$e=Ve+2*Le,nt={data:new n.r({width:$e,height:$e},Ce),pixelRatio:2,sdf:!1,usvg:!1,version:0};re.set(`${ne}/${Pe}`,nt)}}for(const ne in this.iconsets)this.iconsets[ne].addIcons(re)}d(null)};o.request=this.partial?o.fetchHeader(void 0,E.bind(this)):o.actor.send("loadTile",S,E.bind(this),void 0,!0)}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,d){const A=o.texture;A&&A instanceof n.T?(o.destroy(!0),this.map.painter.saveTileTexture(A)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,d,A){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(d,A,(T,S)=>{if(T)return o.state="errored",this.fire(new n.z(T)),void this.triggerRepaint(o);S&&(o._isHeaderLoaded=!0,o.setTexture(S,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:S})=>S===o),A=d&&d.fields,T=A&&A.bands&&A.bands;return T?T[0]:0}getTextureDescriptor(o,d,A){if(!o)return;const T=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!T)return;let S=null;d instanceof n.aI?S=d.paint.get("raster-array-band"):d instanceof n.aJ&&(S=d.paint.get("raster-particle-array-band"));const E=S||this.getInitialBand(T);if(E!=null)if(o.textureDescriptor){if(!o.updateNeeded(T,E)||A)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,T,E)}addIconset(o,d){this.iconsets[o]=d,this.partial=!1}}const Yl={vector:fc,raster:el,"raster-dem":class extends el{constructor(y,o,d,A){super(y,o,d,A),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(y,o){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function A(T,S){T&&(y.state="errored",o(T)),S&&(y.dem=S,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",o(null))}y.request=n.o(this.map._requestManager.transformRequest(d,n.R.Tile),(function(T,S,E,k){if(delete y.request,y.aborted)y.state="unloaded",o(null);else if(T)y.state="errored",o(T);else if(S){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:E,expires:k});const Z=ImageBitmap&&S instanceof ImageBitmap&&n.t(),K=1-(S.width-n.aG(S.width))/2;K<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const Y=Z?S:n.q.getImageData(S,K),re={uid:y.uid,tileID:y.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:Y,encoding:this.encoding,padding:K};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadTile",re,A.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(y){const o=y.canonical,d=Math.pow(2,o.z),A=(o.x-1+d)%d,T=o.x===0?y.wrap-1:y.wrap,S=(o.x+1+d)%d,E=o.x+1===d?y.wrap+1:y.wrap,k={};return k[new n.aH(y.overscaledZ,T,o.z,A,o.y).key]={backfilled:!1},k[new n.aH(y.overscaledZ,E,o.z,S,o.y).key]={backfilled:!1},o.y>0&&(k[new n.aH(y.overscaledZ,T,o.z,A,o.y-1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,y.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,E,o.z,S,o.y-1).key]={backfilled:!1}),o.y+1<d&&(k[new n.aH(y.overscaledZ,T,o.z,A,o.y+1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,y.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,E,o.z,S,o.y+1).key]={backfilled:!1}),k}},"raster-array":Mi,geojson:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(A),this._data=o.data,this._options=n.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const T=n.ai/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*T,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*T,extent:n.ai,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:n.ai,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*T,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}updateData(y){if(!this._options.dynamic)return this.fire(new n.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof y!="string"&&(y.type==="Feature"&&(y={type:"FeatureCollection",features:[y]}),y.type!=="FeatureCollection"))return this.fire(new n.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof y!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const d of this._data.features)o.set(d.id,d);for(const d of y.features)o.set(d.id,d);this._data.features=[...o.values()]}else this._data=y;return this._updateWorkerData(!0),this}getClusterExpansionZoom(y,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id,scope:this.scope},o),this}getClusterChildren(y,o){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id,scope:this.scope},o),this}getClusterLeaves(y,o,d,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:y,limit:o,offset:d},A),this}_updateWorkerData(y=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.A("dataloading",{dataType:"source"})),this._loaded=!1;const o=n.l({append:y},this.workerOptions);o.scope=this.scope;const d=this._data;typeof d=="string"?(o.request=this.map._requestManager.transformRequest(n.q.resolveURL(d),n.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(A,T)=>{if(this._loaded=!0,this._pendingLoad=null,A)this.fire(new n.z(A));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(S.resourceTiming=T.resourceTiming[this.id]),y&&(this._partialReload=!0),this.fire(new n.A("data",S)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(y),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const y=n.C(this.id,this.scope);this.map.style.clearSource(y),this._updateWorkerData()}loadTile(y,o){const d=y.actor?"reloadTile":"loadTile";y.actor=this.actor;const A=this.map.style?this.map.style.getLut(this.scope):null,T=A?{image:A.image.clone()}:null,S=this._partialReload,E={type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:T,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:S};y.request=this.actor.send(d,E,(k,Z)=>S&&!Z?(y.state="loaded",o(null)):(delete y.request,y.destroy(),y.aborted?o(null):k?o(k):(y.loadVectorData(Z,this.map.painter,d==="reloadTile"),o(null))),void 0,d==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y,o){this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id,scope:this.scope}),y.destroy()}onRemove(y){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aK{constructor(y,o,d,A){super(y,o,d,A),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const o of y.urls)this.urls.push(this.map._requestManager.transformRequest(o,n.R.Source).url);n.aL(this.urls,(o,d)=>{this._loaded=!0,o?this.fire(new n.z(o)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const o=this.video.seekable;y<o.start(0)||y>o.end(0)?this.fire(new n.z(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,o=y.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(y,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aK,model:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const y=[];for(const o in this._options.models){const d=this._options.models[o],A=n.aN(this.map._requestManager.transformRequest(d.uri,n.R.Model).url).then(T=>{if(!T)return;const S=n.aO(T),E=new n.aP(o,d.position,d.orientation,S);E.computeBoundsAndApplyParent(),this.models.push(E)}).catch(T=>{this.fire(new n.z(new Error(`Could not load model ${o} from ${d.uri}: ${T.message}`)))});y.push(A)}return Promise.allSettled(y).then(()=>{this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this.fire(new n.z(new Error(`Could not load models: ${o.message}`)))})}onAdd(y){this.map=y,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(y,o){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(y,o,d,A){super(),this.type="batched-model",this.id=y,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(A)}onAdd(y){this.map=y,this.load()}reload(){this.cancelTileJSONRequest();const y=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(y))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(y){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=Ps(this._options,this.map._requestManager,o,d,(A,T)=>{this._tileJSONRequest=null,this._loaded=!0,A?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new n.z(A))):T&&(n.l(this,T),T.bounds&&(this.tileBounds=new qs(T.bounds,this.minzoom,this.maxzoom)),Se(T.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),y&&y(A)})}hasTransition(){return!1}hasTile(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)}loaded(){return this._loaded}loadTile(y,o){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme)),A={request:this.map._requestManager.transformRequest(d,n.R.Tile),data:void 0,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,tileSize:this.tileSize*y.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:y.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:n.q.devicePixelRatio,promoteId:this.promoteId};if(y.actor&&y.state!=="expired")if(y.state==="loading")y.reloadCallback=o;else{if(y.buckets){const S=Object.values(y.buckets);for(const E of S)E.dirty=!0;return void(y.state="loaded")}y.request=y.actor.send("reloadTile",A,T.bind(this))}else y.actor=this.dispatcher.getActor(),y.request=y.actor.send("loadTile",A,T.bind(this),void 0,!0);function T(S,E){return y.aborted?o(null):S&&S.status!==404?o(S):(this.map._refreshExpiredTiles&&E&&y.setExpiryData(E),y.loadModelData(E,this.map.painter),y.state="loaded",void o(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aK{constructor(y,o,d,A){super(y,o,d,A),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(S=>typeof S!="number"))||this.fire(new n.z(new n.V(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.z(new n.V(`sources.${y}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new n.z(new n.V(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new n.z(new n.V(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.z(new n.V(`sources.${y}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(y){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!y&&!this._playing||this.texture instanceof n.aM||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=o,this.setEventedParent(A),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new qs(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.aA(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.aA(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this.map=y,this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:o,y:d,z:A}=y.canonical;return this._implementation.hasTile({x:o,y:d,z:A})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,o){const{x:d,y:A,z:T}=y.tileID.canonical,S=new AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:d,y:A,z:T},{signal:S.signal})).then((function(E){return delete y.request,y.aborted?(y.state="unloaded",o(null)):E===void 0?(y.state="errored",o(null)):E===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",o(null)):function(k){return k instanceof ImageData||k instanceof HTMLCanvasElement||k instanceof ImageBitmap||k instanceof HTMLImageElement}(E)?(this.loadTileData(y,E),y.state="loaded",void o(null)):(y.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(E=>{E.name!=="AbortError"&&(y.state="errored",o(E))}),y.request.cancel=()=>S.abort()}loadTileData(y,o){y.setTexture(o,this.map.painter)}unloadTile(y,o){if(y.texture&&y.texture instanceof n.T?(y.destroy(!0),y.texture&&y.texture instanceof n.T&&this.map.painter.saveTileTexture(y.texture)):y.destroy(),this._implementation.unloadTile){const{x:d,y:A,z:T}=y.tileID.canonical;this._implementation.unloadTile({x:d,y:A,z:T})}o&&o()}abortTile(y,o){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){const y=n.C(this.id,this.scope);this.map.style.clearSource(y)}_update(){this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}}},Bo=function(y,o,d,A){const T=new Yl[o.type](y,o,d,A);if(T.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${T.id}`);return n.aQ(["load","abort","unload","serialize","prepare"],T),T};function Pd(y,o,d=""){return`${d}:${o.id||""}:${o.layer.id}:${function(A){if("layerId"in A)return`layer:${A.layerId}`;{const{featuresetId:T,importId:S}=A;return`featureset:${T}${S?`:import:${S}`:""}`}}(y.target)}`}function Fc(y,o,d,A=""){if(y.uniqueFeatureID){const T=Pd(y,o,A);if(d.has(T))return!0;d.add(T)}return!1}function fh(y,o,d,A,T=!1){const S=o.sourceCache.transform,E=o.sourceCache.tilesIn(y,o.has3DLayers,T);E.sort(yl);const k=[];for(const Z of E){const K=Z.tile.queryRenderedFeatures(o,Z,d,A,S,T);Object.keys(K).length&&k.push({wrappedTileID:Z.tile.tileID.wrapped().key,queryResults:K})}return k.length===0?{}:function(Z){const K={},Y={};for(const re of Z){const ne=re.queryResults,pe=re.wrappedTileID,Pe=Y[pe]=Y[pe]||{};for(const Ce in ne){const Ve=ne[Ce],Le=Pe[Ce]=Pe[Ce]||{},$e=K[Ce]=K[Ce]||[];for(const nt of Ve)Le[nt.featureIndex]||(Le[nt.featureIndex]=!0,$e.push(nt))}}return K}(k)}function _u(y,o,d,A,T){const S={},E=A.queryRenderedSymbols(y),k=[];for(const Z of Object.keys(E).map(Number))k.push(T[Z]);k.sort(yl);for(const Z of k){const K=Z.featureIndex.lookupSymbolFeatures(E[Z.bucketInstanceId],Z.bucketIndex,Z.sourceLayerIndex,o,d);for(const Y in K){const re=S[Y]=S[Y]||[],ne=K[Y];ne.sort((pe,Pe)=>{const Ce=Z.featureSortOrder;if(Ce){const Ve=Ce.indexOf(pe.featureIndex);return Ce.indexOf(Pe.featureIndex)-Ve}return Pe.featureIndex-pe.featureIndex});for(const pe of ne)re.push(pe)}}return S}function kc(y,o){const d=y.getRenderableIds().map(S=>y.getTileByID(S)),A=[],T={};for(let S=0;S<d.length;S++){const E=d[S],k=E.tileID.canonical.key;T[k]||(T[k]=!0,E.querySourceFeatures(A,o))}return A}function yl(y,o){const d=y.tileID,A=o.tileID;return d.overscaledZ-A.overscaledZ||d.canonical.y-A.canonical.y||d.wrap-A.wrap||d.canonical.x-A.canonical.x}function ro(y,o){const d={};if(!o)return d;for(const A of y){const T=A.layerIds.map(S=>o.getLayer(S)).filter(Boolean);if(T.length!==0){A.layers=T,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(S=>T.filter(E=>E.id===S)[0]));for(const S of T)d[S.fqid]=A}}return d}const jo=32,Xl=33,wu=new Uint16Array(8184);for(let y=0;y<2046;y++){let o=y+2,d=0,A=0,T=0,S=0,E=0,k=0;for(1&o?T=S=E=jo:d=A=k=jo;(o>>=1)>1;){const K=d+T>>1,Y=A+S>>1;1&o?(T=d,S=A,d=E,A=k):(d=T,A=S,T=E,S=k),E=K,k=Y}const Z=4*y;wu[Z+0]=d,wu[Z+1]=A,wu[Z+2]=T,wu[Z+3]=S}const po=new Uint16Array(2178),Go=new Uint8Array(1089),Ed=new Uint16Array(1089);function $u(y){return y===0?-.03125:y===32?.03125:0}const Rf={type:2,extent:n.ai,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ai+1,0),new n.P(n.ai+1,n.ai+1),new n.P(0,n.ai+1),new n.P(0,0)]]};class Jl{constructor(o,d,A,T,S){this.tileID=o,this.uid=n.aW(),this.uses=0,this.tileSize=d,this.tileZoom=A,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,T&&T.style&&(this._lastUpdatedBrightness=T.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",T&&T.transform&&(this.projection=T.transform.projection)}registerFadeDuration(o){const d=o+this.timeAdded;d<n.q.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aR(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,d,A){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=ro(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const T in this.buckets){const S=this.buckets[T];if(S instanceof n.aY){if(this.hasSymbolBuckets=!0,!A)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const T in this.buckets){const S=this.buckets[T];if(S instanceof n.aY&&S.hasRTLText){this.hasRTLText=!0,n.aZ();break}}this.queryPadding=0;for(const T in this.buckets){const S=this.buckets[T],E=d.style.getOwnLayer(T);if(!E)continue;const k=E.queryRadius(S);this.queryPadding=Math.max(this.queryPadding,k)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new n.aX}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,d,A){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets=Object.assign({},this.buckets,ro(o.buckets,d.style)),o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const T in this.buckets){const S=this.buckets[T];S.uploadPending()&&S.upload(o)}const d=o.gl,A=this.imageAtlas;A&&!A.uploaded&&(this.imageAtlasTexture=new n.T(o,A.image,d.RGBA8,{useMipmap:!!A.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(o,this.glyphAtlasImage,d.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(o,this.lineAtlas.image,d.R8),this.lineAtlas.uploaded=!0)}prepare(o,d,A){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,A),!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const T=d.style.getBrightness();(this._lastUpdatedBrightness||T)&&(this._lastUpdatedBrightness&&T&&Math.abs(this._lastUpdatedBrightness-T)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==T),this._lastUpdatedBrightness=T))}queryRenderedFeatures(o,d,A,T,S,E){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const k=function(Z,K){const Y=n.ad.mat4.fromScaling([],[.5*Z.width,.5*-Z.height,1]);return n.ad.mat4.translate(Y,Y,[1,-1,0]),n.ad.mat4.multiply(Y,Y,Z.calculateProjMatrix(K.toUnwrapped())),Float32Array.from(Y)}(S,this.tileID);return this.latestFeatureIndex.query(o,{tilespaceGeometry:d,pixelPosMatrix:k,transform:T,availableImages:A,tileTransform:this.tileTransform})}querySourceFeatures(o,d){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const T=A.loadVTLayers(),S=d?d.sourceLayer:"",E=T._geojsonTileLayer||T[S];if(!E)return;const k=n.a_(d&&d.filter),{z:Z,x:K,y:Y}=this.tileID.canonical,re={z:Z,x:K,y:Y};for(let ne=0;ne<E.length;ne++){const pe=E.feature(ne);if(k.needGeometry){const Ve=n.a$(pe,!0);if(!k.filter(new n.aa(this.tileID.overscaledZ),Ve,this.tileID.canonical))continue}else if(!k.filter(new n.aa(this.tileID.overscaledZ),pe))continue;const Pe=A.getId(pe,S),Ce=new n.b0(pe,Z,K,Y,Pe);Ce.tile=re,o.push(Ce)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const A=n.b1(o.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const A=Date.now();let T=!1;if(this.expirationTime>A)T=!1;else if(d)if(this.expirationTime<d)T=!0;else{const S=this.expirationTime-d;S?this.expirationTime=A+Math.max(S,3e4):T=!0}else T=!0;T?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o,d){if(!this.latestFeatureIndex||!o.style)return;const A=this.latestFeatureIndex.loadVTLayers(),T=o.style.listImages(),S=o.style.getBrightness();for(const E in this.buckets){if(!o.style.hasLayer(E))continue;const k=this.buckets[E],Z=k.layers[0],K=Z.sourceLayer||"_geojsonTileLayer",Y=A[K],re=o.style.getLayerSourceCache(Z);let ne={};re&&(ne=re._state.getState(K,void 0));const pe=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Pe=Object.keys(ne).length>0&&!d;Pe&&!k.stateDependentLayers.length&&!d||k.update(ne,Y,T,pe,Pe?k.stateDependentLayers:k.layers,d,S),(k instanceof n.b2||k instanceof n.b3)&&o._terrain&&o._terrain.enabled&&re&&k.uploadPending()&&o._terrain._clearRenderCacheForTile(re.id,this.tileID);const Ce=o&&o.style&&o.style.getOwnLayer(E);Ce&&(this.queryPadding=Math.max(this.queryPadding,Ce.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.q.now()+o}setTexture(o,d){const A=d.context,T=A.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o):(this.texture=new n.T(A,o,T.RGBA8,{useMipmap:!0}),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE))}setDependencies(o,d){const A={};for(const T of d)A[T]=!0;this.dependencies[o]=A}hasDependency(o,d){for(const A of o){const T=this.dependencies[A];if(T){for(const S of d)if(T[S])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const A=n.b4(Rf,this.tileID.canonical,this.tileTransform)[0],T=new n.b5,S=new n.b6;for(let E=0;E<A.length;E++){const{x:k,y:Z}=A[E];T.emplaceBack(k,Z),S.emplaceBack(E)}S.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(S),this._tileDebugBuffer=o.createVertexBuffer(T,n.b7.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,T.length,S.length)}_makeTileBoundsBuffers(o,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const A=n.b4(Rf,this.tileID.canonical,this.tileTransform)[0];let T,S;if(this.isRaster){const E=function(k,Z){const K=n.aR(k,Z),Y=Math.pow(2,k.z);for(let Ve=0;Ve<Xl;Ve++)for(let Le=0;Le<Xl;Le++){const $e=n.aS((k.x+(Le+$u(Le))/jo)/Y),nt=n.aT((k.y+(Ve+$u(Ve))/jo)/Y),at=Z.project($e,nt),pt=Ve*Xl+Le;po[2*pt+0]=Math.round((at.x*K.scale-K.x)*n.ai),po[2*pt+1]=Math.round((at.y*K.scale-K.y)*n.ai)}Go.fill(0),Ed.fill(0);for(let Ve=2045;Ve>=0;Ve--){const Le=4*Ve,$e=wu[Le+0],nt=wu[Le+1],at=wu[Le+2],pt=wu[Le+3],ot=$e+at>>1,ut=nt+pt>>1,ct=ot+ut-nt,At=ut+$e-ot,Tt=nt*Xl+$e,Qt=pt*Xl+at,Ut=ut*Xl+ot,ra=Math.hypot((po[2*Tt+0]+po[2*Qt+0])/2-po[2*Ut+0],(po[2*Tt+1]+po[2*Qt+1])/2-po[2*Ut+1])>=16;Go[Ut]=Go[Ut]||(ra?1:0),Ve<1022&&(Go[Ut]=Go[Ut]||Go[(nt+At>>1)*Xl+($e+ct>>1)]||Go[(pt+At>>1)*Xl+(at+ct>>1)])}const re=new n.aU,ne=new n.aV;let pe=0;function Pe(Ve,Le){const $e=Le*Xl+Ve;return Ed[$e]===0&&(re.emplaceBack(po[2*$e+0],po[2*$e+1],Ve*n.ai/jo,Le*n.ai/jo),Ed[$e]=++pe),Ed[$e]-1}function Ce(Ve,Le,$e,nt,at,pt){const ot=Ve+$e>>1,ut=Le+nt>>1;if(Math.abs(Ve-at)+Math.abs(Le-pt)>1&&Go[ut*Xl+ot])Ce(at,pt,Ve,Le,ot,ut),Ce($e,nt,at,pt,ot,ut);else{const ct=Pe(Ve,Le),At=Pe($e,nt),Tt=Pe(at,pt);ne.emplaceBack(ct,At,Tt)}}return Ce(0,0,jo,jo,jo,0),Ce(jo,jo,0,0,0,jo),{vertices:re,indices:ne}}(this.tileID.canonical,d);T=E.vertices,S=E.indices}else{T=new n.aU,S=new n.aV;for(const{x:k,y:Z}of A)T.emplaceBack(k,Z,0,0);const E=n.b9(T.int16,void 0,4);for(let k=0;k<E.length;k+=3)S.emplaceBack(E[k],E[k+1],E[k+2])}this._tileBoundsBuffer=o.createVertexBuffer(T,n.ba.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(S),this._tileBoundsSegments=n.b8.simpleSegment(0,0,T.length,S.length)}_makeGlobeTileDebugBuffers(o,d){const A=d.projection;if(!A||A.name!=="globe"||d.freezeTileCoverage)return;const T=this.tileID.canonical,S=n.bb(T,d),E=n.bc(S),k=n.ag(d.zoom);let Z;k>0&&(Z=n.ad.mat4.invert(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,T,d,E,Z,k),this._makeGlobeTileDebugTextBuffer(o,T,d,E,Z,k)}_globePoint(o,d,A,T,S,E,k){let Z=n.bd(o,d,A);if(E){const K=1<<A.z,Y=n.av(T.center.lng),re=n.aC(T.center.lat),ne=(A.x+.5)/K-Y;let pe=0;ne>.5?pe=-1:ne<-.5&&(pe=1);let Pe=(o/n.ai+A.x)/K+pe,Ce=(d/n.ai+A.y)/K;Pe=(Pe-Y)*T._pixelsPerMercatorPixel+Y,Ce=(Ce-re)*T._pixelsPerMercatorPixel+re;const Ve=[Pe*T.worldSize,Ce*T.worldSize,0];n.ad.vec3.transformMat4(Ve,Ve,E),Z=n.be(Z,Ve,k)}return n.ad.vec3.transformMat4(Z,Z,S)}_makeGlobeTileDebugBorderBuffer(o,d,A,T,S,E){const k=new n.b5,Z=new n.b6,K=new n.bf,Y=(ne,pe,Pe,Ce,Ve)=>{const Le=(Pe-ne)/(Ve-1),$e=(Ce-pe)/(Ve-1),nt=k.length;for(let at=0;at<Ve;at++){const pt=ne+at*Le,ot=pe+at*$e;k.emplaceBack(pt,ot);const ut=this._globePoint(pt,ot,d,A,T,S,E);K.emplaceBack(ut[0],ut[1],ut[2]),Z.emplaceBack(nt+at)}},re=n.ai;Y(0,0,re,0,16),Y(re,0,re,re,16),Y(re,re,0,re,16),Y(0,re,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(Z),this._tileDebugBuffer=o.createVertexBuffer(k,n.b7.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(K,n.bg.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,k.length,Z.length)}_makeGlobeTileDebugTextBuffer(o,d,A,T,S,E){const k=n.ai/4,Z=new n.b5,K=new n.aV,Y=new n.bf,re=25;K.reserve(32),Z.reserve(re),Y.reserve(re);const ne=(pe,Pe)=>re*pe+Pe;for(let pe=0;pe<re;pe++){const Pe=pe*k;for(let Ce=0;Ce<re;Ce++){const Ve=Ce*k;Z.emplaceBack(Ve,Pe);const Le=this._globePoint(Ve,Pe,d,A,T,S,E);Y.emplaceBack(Le[0],Le[1],Le[2])}}for(let pe=0;pe<4;pe++)for(let Pe=0;Pe<4;Pe++){const Ce=ne(pe,Pe),Ve=ne(pe,Pe+1),Le=ne(pe+1,Pe),$e=ne(pe+1,Pe+1);K.emplaceBack(Ce,Ve,Le),K.emplaceBack(Le,Ve,$e)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(K),this._tileDebugTextBuffer=o.createVertexBuffer(Z,n.b7.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(Y,n.bg.members),this._tileDebugTextSegments=n.b8.simpleSegment(0,0,re,32)}destroy(o=!1){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bh.setPbf(n.bi);class Zo extends Jl{constructor(o,d,A,T,S){super(o,d,A,T,S),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(o){return this._mrt&&this._mrt.getLayer(o)}setTexture(o,d){const A=d.context,T=A.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o,{premultiply:!1}):this.texture=new n.T(A,o,T.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,d){const A=this._mrt=new n.bh(30),T=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=n.bj(T,(S,E,k,Z)=>{if(S)d(S);else try{const K=A.getHeaderLength(E);if(K>o)return void(this.request=this.fetchHeader(K,d));A.parseHeader(E),this._isHeaderLoaded=!0;let Y=0;for(const re of Object.values(A.layers))Y=Math.max(Y,re.dataIndex[re.dataIndex.length-1].lastByte);E.byteLength>=Y&&(this.entireBuffer=E),d(null,this.entireBuffer||E,k,Z)}catch(K){d(K)}}),this.request}fetchBand(o,d,A){const T=this._mrt;if(!this._isHeaderLoaded||!T)return void A(new Error("Tile header is not ready"));const S=this.actor;if(!S)return void A(new Error("Can't fetch tile band without an actor"));let E;const k=(re,ne)=>{E.complete(re,ne),re?A(re):(this.updateTextureDescriptor(o,d),A(null,this.textureDescriptor&&this.textureDescriptor.img))},Z=(re,ne)=>{if(re)return A(re);const pe=S.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:ne,task:E},k,void 0,!0);this._workQueue.push(()=>{pe&&pe.cancel(),E.cancel()})},K=T.getLayer(o);if(!K)return void A(new Error(`Unknown sourceLayer "${o}"`));if(K.hasDataForBand(d))return this.updateTextureDescriptor(o,d),void A(null,this.textureDescriptor?this.textureDescriptor.img:null);const Y=K.getDataRange([d]);if(E=T.createDecodingTask(Y),!E||E.tasks.length)if(this.flushQueues(),this.entireBuffer)Z(null,this.entireBuffer.slice(Y.firstByte,Y.lastByte+1));else{const re=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Y.firstByte}-${Y.lastByte}`}}),ne=n.bj(re,Z);this._fetchQueue.push(()=>{ne.cancel(),E.cancel()})}else A(null)}updateNeeded(o,d){return(!this.textureDescriptor||this.textureDescriptor.band!==d||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,d){if(!this._mrt)return;const A=this._mrt.getLayer(o);if(!A||!A.hasBand(d)||!A.hasDataForBand(d))return;const{bytes:T,tileSize:S,buffer:E,offset:k,scale:Z}=A.getBandView(d),K=S+2*E,Y=new n.r({width:K,height:K},T),re=this.texture;re&&re instanceof n.T&&re.update(Y,{premultiply:!1}),this.textureDescriptor={layer:o,band:d,img:Y,buffer:E,offset:k,tileSize:S,format:A.pixelFormat,mix:[Z,256*Z,65536*Z,16777216*Z]}}}class Ku{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,A){const T=o.wrapped().key;this.data[T]===void 0&&(this.data[T]=[]);const S={value:d,timeout:void 0};if(A!==void 0&&(S.timeout=setTimeout(()=>{this.remove(o,S)},A)),this.data[T].push(S),this.order.push(T),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const A=o.wrapped().key,T=d===void 0?0:this.data[A].indexOf(d),S=this.data[A][T];return this.data[A].splice(T,1),S.timeout&&clearTimeout(S.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(S.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const A in this.data)for(const T of this.data[A])o(T.value)||d.push(T);for(const A of d)this.remove(A.value.tileID,A)}}class ph{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,A){const T=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][T]=this.stateChanges[o][T]||{},n.l(this.stateChanges[o][T],A),this.deletedStates[o]===null){this.deletedStates[o]={};for(const S in this.state[o])S!==T&&(this.deletedStates[o][S]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][T]===null){this.deletedStates[o][T]={};for(const S in this.state[o][T])A[S]||(this.deletedStates[o][T][S]=null)}else for(const S in A)this.deletedStates[o]&&this.deletedStates[o][T]&&this.deletedStates[o][T][S]===null&&delete this.deletedStates[o][T][S]}removeFeatureState(o,d,A){if(this.deletedStates[o]===null)return;const T=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},A&&d!==void 0)this.deletedStates[o][T]!==null&&(this.deletedStates[o][T]=this.deletedStates[o][T]||{},this.deletedStates[o][T][A]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][T])for(A in this.deletedStates[o][T]={},this.stateChanges[o][T])this.deletedStates[o][T][A]=null;else this.deletedStates[o][T]=null;else this.deletedStates[o]=null}getState(o,d){const A=this.state[o]||{},T=this.stateChanges[o]||{},S=this.deletedStates[o];if(S===null)return{};if(d!==void 0){const k=String(d),Z=n.l({},A[k],T[k]);if(S){const K=S[d];if(K===null)return{};for(const Y in K)delete Z[Y]}return Z}const E=n.l({},A,T);if(S)for(const k in S)delete E[k];return E}initializeTileState(o,d){o.refreshFeatureState(d)}coalesceChanges(o,d){const A={};for(const T in this.stateChanges){this.state[T]=this.state[T]||{};const S={};for(const E in this.stateChanges[T])this.state[T][E]||(this.state[T][E]={}),n.l(this.state[T][E],this.stateChanges[T][E]),S[E]=this.state[T][E];A[T]=S}for(const T in this.deletedStates){this.state[T]=this.state[T]||{};const S={};if(this.deletedStates[T]===null)for(const E in this.state[T])S[E]={},this.state[T][E]={};else for(const E in this.deletedStates[T]){if(this.deletedStates[T][E]===null)this.state[T][E]={};else if(this.state[T][E])for(const k of Object.keys(this.deletedStates[T][E]))delete this.state[T][E][k];S[E]=this.state[T][E]}A[T]=A[T]||{},n.l(A[T],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const T in o)o[T].refreshFeatureState(d)}}class tl extends n.E{constructor(o,d,A){super(),this.id=o,this._onlySymbols=A,d.on("data",T=>{T.dataType==="source"&&T.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&T.dataType==="source"&&T.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new Ku(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new ph,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles)if(!this._tiles[o].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,d){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const A=this._tiles[d];A.upload(o),A.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(En).map(o=>o.key)}getRenderableIds(o,d){const A=[];for(const T in this._tiles)this._isIdRenderable(+T,o,d)&&A.push(this._tiles[T]);return o?A.sort((T,S)=>{const E=T.tileID,k=S.tileID,Z=new n.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),K=new n.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-k.overscaledZ||K.y-Z.y||K.x-Z.x}).map(T=>T.tileID.key):A.map(T=>T.tileID).sort(En).map(T=>T.key)}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d,A){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())&&(A||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,d){const A=this._tiles[o];A&&(A.state!=="loading"&&(A.state=d),this._loadTile(A,this._tileLoaded.bind(this,A,o,d)))}_tileLoaded(o,d,A,T){if(T)if(o.state="errored",T.status!==404)this._source.fire(new n.z(T,{tile:o}));else{if(this._source.fire(new n.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=n.q.now(),A==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new n.A("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const d=this.getRenderableIds();for(let T=0;T<d.length;T++){const S=d[T];if(o.neighboringTiles&&o.neighboringTiles[S]){const E=this.getTileByID(S);A(o,E),A(E,o)}}function A(T,S){if(!T.dem||T.dem.borderReady)return;T.needsHillshadePrepare=!0,T.needsDEMTextureUpload=!0;let E=S.tileID.canonical.x-T.tileID.canonical.x;const k=S.tileID.canonical.y-T.tileID.canonical.y,Z=Math.pow(2,T.tileID.canonical.z),K=S.tileID.key;E===0&&k===0||Math.abs(k)>1||(Math.abs(E)>1&&(Math.abs(E+Z)===1?E+=Z:Math.abs(E-Z)===1&&(E-=Z)),S.dem&&T.dem&&(T.dem.backfillBorder(S.dem,E,k),T.neighboringTiles&&T.neighboringTiles[K]&&(T.neighboringTiles[K].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,A,T){for(const S in this._tiles){let E=this._tiles[S];if(T[S]||!E.hasData()||E.tileID.overscaledZ<=d||E.tileID.overscaledZ>A)continue;let k=E.tileID;for(;E&&E.tileID.overscaledZ>d+1;){const K=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[K.key],E&&E.hasData()&&(k=K)}let Z=k;for(;Z.overscaledZ>d;)if(Z=Z.scaledTo(Z.overscaledZ-1),o[Z.key]){T[k.key]=k;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const A=this._loadedParentTiles[o.key];return A&&A.tileID.overscaledZ>=d?A:null}for(let A=o.overscaledZ-1;A>=d;A--){const T=o.scaledTo(A),S=this._getLoadedTile(T);if(S)return S}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,d){d=d||this._source.tileSize;const A=Math.ceil(o.width/d)+1,T=Math.ceil(o.height/d)+1,S=Math.floor(A*T*5),E=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,S):S,k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(k)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const A={};for(const T in this._tiles){const S=this._tiles[T];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+d),A[S.tileID.key]=S}this._tiles=A;for(const T in this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(const T in this._tiles)this._setTileReloadTimer(+T,this._tiles[T])}}update(o,d,A,T){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!A)return;this.updateCacheSize(o,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const S=this._source.type==="batched-model";let E,k=this._source.maxzoom;const Z=this.map&&this.map.painter?this.map.painter._terrain:null;if(Z&&Z.sourceCache===this&&Z.attenuationRange()){const re=Z.attenuationRange()[0],ne=Math.floor(re)-Math.log2(Z.getDemUpscale());k>ne&&(k=ne)}if(this.used||this.usedForTerrain){if(this._source.tileID)E=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(re=>new n.aH(re.canonical.z,re.wrap,re.canonical.z,re.canonical.x,re.canonical.y));else if(this.tileCoverLift!==0){const re=o.clone();re.tileCoverLift=this.tileCoverLift,E=re.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:k,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.minzoom<=1&&o.projection.name==="globe"&&(E.push(new n.aH(1,0,1,0,0)),E.push(new n.aH(1,0,1,1,0)),E.push(new n.aH(1,0,1,0,1)),E.push(new n.aH(1,0,1,1,1)))}else if(E=o.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:k,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.hasTile){const re=this._source.hasTile.bind(this._source);E=E.filter(ne=>re(ne))}}else E=[];if(E.length>0&&this.castsShadows&&T&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!mo(this._source.type)){const re=o.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!A}),ne=Math.min(re,this._source.maxzoom);if(S){const pe=o.extendTileCover(E,ne);for(const Pe of pe)E.push(Pe)}else{const pe=o.extendTileCover(E,ne,T);for(const Pe of pe)this._shadowCasterTiles[Pe.key]=!0,E.push(Pe)}}const K=this._updateRetainedTiles(E);if(mo(this._source.type)&&E.length!==0){const re={},ne={},pe=Object.keys(K);for(const Ce of pe){const Ve=K[Ce],Le=this._tiles[Ce];if(!Le||Le.fadeEndTime&&Le.fadeEndTime<=n.q.now())continue;const $e=this.findLoadedParent(Ve,Math.max(Ve.overscaledZ-tl.maxOverzooming,this._source.minzoom));$e&&(this._addTile($e.tileID),re[$e.tileID.key]=$e.tileID),ne[Ce]=Ve}const Pe=E[E.length-1].overscaledZ;for(const Ce in this._tiles){const Ve=this._tiles[Ce];if(K[Ce]||!Ve.hasData())continue;let Le=Ve.tileID;for(;Le.overscaledZ>Pe;){Le=Le.scaledTo(Le.overscaledZ-1);const $e=this._tiles[Le.key];if($e&&$e.hasData()&&ne[Le.key]){K[Ce]=Ve.tileID;break}}}for(const Ce in re)K[Ce]||(this._coveredTiles[Ce]=!0,K[Ce]=re[Ce])}for(const re in K)this._tiles[re].clearFadeHold();const Y=n.bk(this._tiles,K);for(const re of Y){const ne=this._tiles[re];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(+re)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const d={};if(o.length===0)return d;const A={},T=o.reduce((K,Y)=>Math.min(K,Y.overscaledZ),1/0),S=o[0].overscaledZ,E=Math.max(S-tl.maxOverzooming,this._source.minzoom),k=Math.max(S+tl.maxUnderzooming,this._source.minzoom),Z={};for(const K of o){const Y=this._addTile(K);d[K.key]=K,Y.hasData()||T<this._source.maxzoom&&(Z[K.key]=K)}this._retainLoadedChildren(Z,T,k,d);for(const K of o){let Y=this._tiles[K.key];if(Y.hasData())continue;if(K.canonical.z>=this._source.maxzoom){const ne=K.children(this._source.maxzoom)[0],pe=this.getTile(ne);if(pe&&pe.hasData()){d[ne.key]=ne;continue}}else{const ne=K.children(this._source.maxzoom);if(d[ne[0].key]&&d[ne[1].key]&&d[ne[2].key]&&d[ne[3].key])continue}let re=Y.wasRequested();for(let ne=K.overscaledZ-1;ne>=E;--ne){const pe=K.scaledTo(ne);if(A[pe.key]||(A[pe.key]=!0,Y=this.getTile(pe),!Y&&re&&(Y=this._addTile(pe)),Y&&(d[pe.key]=pe,re=Y.wasRequested(),Y.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let A,T=this._tiles[o].tileID;for(;T.overscaledZ>0;){if(T.key in this._loadedParentTiles){A=this._loadedParentTiles[T.key];break}d.push(T.key);const S=T.scaledTo(T.overscaledZ-1);if(A=this._getLoadedTile(S),A)break;T=S}for(const S of d)this._loadedParentTiles[S]=A}}_addTile(o){let d=this._tiles[o.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const A=!!d;if(!A){const T=this.map?this.map.painter:null,S=this._source.tileSize*o.overscaleFactor();d=this._source.type==="raster-array"?new Zo(o,S,this.transform.tileZoom,T,this._isRaster):new Jl(o,S,this.transform.tileZoom,T,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))}return d?(d.uses++,this._tiles[o.key]=d,A||this._source.fire(new n.A("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const A=d.getExpiryTimeout();A&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},A))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,d,A){const T=[],S=this.transform;if(!S)return T;const E=S.projection.name==="globe",k=n.av(S.center.lng);for(const Z in this._tiles){const K=this._tiles[Z];if(A&&K.clearQueryDebugViz(),K.holdingForFade())continue;let Y;if(E){const re=K.tileID.canonical;if(re.z===0){const ne=[Math.abs(n.ay(k,...mr(re,-1))-k),Math.abs(n.ay(k,...mr(re,1))-k)];Y=[0,2*ne.indexOf(Math.min(...ne))-1]}else{const ne=[Math.abs(n.ay(k,...mr(re,-1))-k),Math.abs(n.ay(k,...mr(re,0))-k),Math.abs(n.ay(k,...mr(re,1))-k)];Y=[ne.indexOf(Math.min(...ne))-1]}}else Y=[0];for(const re of Y){const ne=o.containsTile(K,S,d,re);ne&&T.push(ne)}}return T}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,d){const A=this.getRenderableIds(o,d).map(S=>this._tiles[S].tileID),T=this.transform.projection.name==="globe";for(const S of A)S.projMatrix=this.transform.calculateProjMatrix(S.toUnwrapped()),S.expandedProjMatrix=T?this.transform.calculateProjMatrix(S.toUnwrapped(),!1,!0):S.projMatrix;return A}sortCoordinatesByDistance(o){const d=o.slice(),A=this.transform._camera.position,T=this.transform._camera.forward(),S={};for(const E of d){const k=1/(1<<E.canonical.z);S[E.key]=((E.canonical.x+.5)*k+E.wrap-A[0])*T[0]+((E.canonical.y+.5)*k-A[1])*T[1]-A[2]*T[2]}return d.sort((E,k)=>S[E.key]-S[k.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(mo(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(o,d,A){this._state.updateState(o=o||"_geojsonTileLayer",d,A)}removeFeatureState(o,d,A){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,A)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,A){const T=this._tiles[o];T&&T.setDependencies(d,A)}reloadTilesForDependencies(o,d){for(const A in this._tiles)this._tiles[A].hasDependency(o,d)&&this._reloadTile(+A,"reloading");this._cache.filter(A=>!A.hasDependency(o,d))}_preloadTiles(o,d){if(!this._sourceLoaded){const Z=()=>{this._sourceLoaded&&(this._source.off("data",Z),this._preloadTiles(o,d))};return void this._source.on("data",Z)}const A=new Map,T=Array.isArray(o)?o:[o],S=this.map.painter.terrain,E=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const Z of T){const K=Z.coveringTiles({tileSize:E,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Y of K)A.set(Y.key,Y);this.usedForTerrain&&Z.updateElevation(!1)}const k=Array.from(A.values());n.bl(k,(Z,K)=>{const Y=new Jl(Z,this._source.tileSize*Z.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Y,re=>{this._source.type==="raster-dem"&&Y.dem&&this._backfillDEM(Y),K(re,Y)})},d)}}function En(y,o){const d=Math.abs(2*y.wrap)-+(y.wrap<0),A=Math.abs(2*o.wrap)-+(o.wrap<0);return y.overscaledZ-o.overscaledZ||A-d||o.canonical.y-y.canonical.y||o.canonical.x-y.canonical.x}function mo(y){return y==="raster"||y==="image"||y==="video"||y==="custom"}function mr(y,o){const d=1<<y.z;return[y.x/d+o,(y.x+1)/d+o]}tl.maxOverzooming=10,tl.maxUnderzooming=3;class Uc{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,d=!1;for(const A in this.style._mergedLayers){const T=this.style._mergedLayers[A];if(T.type==="fill-extrusion")this.layers.push({layer:T,visible:o,visibilityChanged:d});else if(T.type==="model"){const S=this.style.getLayerSource(T);S&&S.type==="batched-model"&&this.layers.push({layer:T,visible:o,visibilityChanged:d})}}}onNewFrame(o){this.layersGotHidden=!1;for(const d of this.layers){const A=d.layer;let T=!1;A.type==="fill-extrusion"?T=!A.isHidden(o)&&A.paint.get("fill-extrusion-opacity")>0:A.type==="model"&&(T=!A.isHidden(o)&&A.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!T&&d.visible,d.visible=T}}updateZOffset(o,d){this.currentBuildingBuckets=[];for(const T of this.layers){const S=T.layer,E=this.style.getLayerSourceCache(S);let k=1;S.type==="fill-extrusion"&&(k=T.visible?S.paint.get("fill-extrusion-vertical-scale"):0);let Z=E?E.getTile(d):null;if(!Z&&E&&d.canonical.z>E.getSource().minzoom){let K=d.scaledTo(Math.min(E.getSource().maxzoom,d.overscaledZ-1));for(;K.overscaledZ>=E.getSource().minzoom&&(Z=E.getTile(K),!Z&&K.overscaledZ!==0);)K=K.scaledTo(K.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:Z?Z.getBucket(S):null,tileID:Z?Z.tileID:d,verticalScale:k})}o.hasAnyZOffset=!1;let A=!1;for(let T=0;T<o.symbolInstances.length;T++){const S=o.symbolInstances.get(T),E=S.zOffset,k=this._getHeightAtTileOffset(d,S.tileAnchorX,S.tileAnchorY);S.zOffset=k!==Number.NEGATIVE_INFINITY?k:E,A||E===S.zOffset||(A=!0),o.hasAnyZOffset||S.zOffset===0||(o.hasAnyZOffset=!0)}A&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,d,A,T){let S=d,E=A;if(o.canonical.z!==T.canonical.z){const k=T.canonical,Z=1/(1<<o.canonical.z-k.z);S=(d+o.canonical.x*n.ai)*Z-k.x*n.ai|0,E=(A+o.canonical.y*n.ai)*Z-k.y*n.ai|0}return{tileX:S,tileY:E}}_getHeightAtTileOffset(o,d,A){let T,S;for(let E=0;E<this.layers.length;++E){if(this.layers[E].layer.type!=="fill-extrusion")continue;const{bucket:k,tileID:Z,verticalScale:K}=this.currentBuildingBuckets[E];if(!k)continue;const{tileX:Y,tileY:re}=this._mapCoordToOverlappingTile(o,d,A,Z),ne=k.getHeightAtTileCoord(Y,re);ne&&ne.height!==void 0&&(ne.hidden?T=ne.height:S=Math.max(ne.height*K,S||0))}if(S!==void 0)return S;for(let E=0;E<this.layers.length;++E){const k=this.layers[E];if(k.layer.type!=="model"||!k.visible)continue;const{bucket:Z,tileID:K}=this.currentBuildingBuckets[E];if(!Z)continue;const{tileX:Y,tileY:re}=this._mapCoordToOverlappingTile(o,d,A,K),ne=Z.getHeightAtTileCoord(Y,re);if(ne&&!ne.hidden)return ne.height===void 0&&T!==void 0?Math.min(ne.maxHeight,T)*ne.verticalScale:ne.height?ne.height*ne.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function vn(y,o){const d={};for(const A in y)A!=="ref"&&(d[A]=y[A]);return n.bm.forEach(A=>{A in o&&(d[A]=o[A])}),d}function mh(y){y=y.slice();const o=Object.create(null);for(let d=0;d<y.length;d++)o[y[d].id]=y[d];for(let d=0;d<y.length;d++)"ref"in y[d]&&(y[d]=vn(y[d],o[y[d].ref]));return y}const bn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Hs(y,o,d){d.push({command:bn.addSource,args:[y,o[y]]})}function pc(y,o,d){o.push({command:bn.removeSource,args:[y]}),d[y]=!0}function mc(y,o,d,A){pc(y,d,A),Hs(y,o,d)}function er(y,o,d){let A;for(A in y[d])if(y[d].hasOwnProperty(A)&&A!=="data"&&!n.bn(y[d][A],o[d][A]))return!1;for(A in o[d])if(o[d].hasOwnProperty(A)&&A!=="data"&&!n.bn(y[d][A],o[d][A]))return!1;return!0}function nn(y,o,d,A,T,S){let E;for(E in o=o||{},y=y||{})y.hasOwnProperty(E)&&(n.bn(y[E],o[E])||d.push({command:S,args:[A,E,o[E],T]}));for(E in o)o.hasOwnProperty(E)&&!y.hasOwnProperty(E)&&(n.bn(y[E],o[E])||d.push({command:S,args:[A,E,o[E],T]}))}function _n(y){return y.id}function $s(y,o){return y[o.id]=o,y}class Nd{constructor(o,d){this.reset(o,d)}reset(o,d){this.points=o||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.ay(o,0,1);let d=1,A=this._distances[d];const T=o*this.paddedLength+this.padding;for(;A<T&&d<this._distances.length;)A=this._distances[++d];const S=d-1,E=this._distances[S],k=A-E,Z=k>0?(T-E)/k:0;return this.points[S].mult(1-Z).add(this.points[d].mult(Z))}}class pn{constructor(o,d,A){const T=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(o/A),this.yCellCount=Math.ceil(d/A);for(let E=0;E<this.xCellCount*this.yCellCount;E++)T.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=d,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,d,A,T,S){this._forEachCell(d,A,T,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(d),this.bboxes.push(A),this.bboxes.push(T),this.bboxes.push(S)}insertCircle(o,d,A,T){this._forEachCell(d-T,A-T,d+T,A+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(d),this.circles.push(A),this.circles.push(T)}_insertBoxCell(o,d,A,T,S,E){this.boxCells[S].push(E)}_insertCircleCell(o,d,A,T,S,E){this.circleCells[S].push(E)}_query(o,d,A,T,S,E){if(A<0||o>this.width||T<0||d>this.height)return!S&&[];const k=[];if(o<=0&&d<=0&&this.width<=A&&this.height<=T){if(S)return!0;for(let Z=0;Z<this.boxKeys.length;Z++)k.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(let Z=0;Z<this.circleKeys.length;Z++){const K=this.circles[3*Z],Y=this.circles[3*Z+1],re=this.circles[3*Z+2];k.push({key:this.circleKeys[Z],x1:K-re,y1:Y-re,x2:K+re,y2:Y+re})}return E?k.filter(E):k}return this._forEachCell(o,d,A,T,this._queryCell,k,{hitTest:S,seenUids:{box:{},circle:{}}},E),S?k.length>0:k}_queryCircle(o,d,A,T,S){const E=o-A,k=o+A,Z=d-A,K=d+A;if(k<0||E>this.width||K<0||Z>this.height)return!T&&[];const Y=[];return this._forEachCell(E,Z,k,K,this._queryCellCircle,Y,{hitTest:T,circle:{x:o,y:d,radius:A},seenUids:{box:{},circle:{}}},S),T?Y.length>0:Y}query(o,d,A,T,S){return this._query(o,d,A,T,!1,S)}hitTest(o,d,A,T,S){return this._query(o,d,A,T,!0,S)}hitTestCircle(o,d,A,T){return this._queryCircle(o,d,A,!0,T)}_queryCell(o,d,A,T,S,E,k,Z){const K=k.seenUids,Y=this.boxCells[S];if(Y!==null){const ne=this.bboxes;for(const pe of Y)if(!K.box[pe]){K.box[pe]=!0;const Pe=4*pe;if(o<=ne[Pe+2]&&d<=ne[Pe+3]&&A>=ne[Pe+0]&&T>=ne[Pe+1]&&(!Z||Z(this.boxKeys[pe]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[pe],x1:ne[Pe],y1:ne[Pe+1],x2:ne[Pe+2],y2:ne[Pe+3]})}}}const re=this.circleCells[S];if(re!==null){const ne=this.circles;for(const pe of re)if(!K.circle[pe]){K.circle[pe]=!0;const Pe=3*pe;if(this._circleAndRectCollide(ne[Pe],ne[Pe+1],ne[Pe+2],o,d,A,T)&&(!Z||Z(this.circleKeys[pe]))){if(k.hitTest)return E.push(!0),!0;{const Ce=ne[Pe],Ve=ne[Pe+1],Le=ne[Pe+2];E.push({key:this.circleKeys[pe],x1:Ce-Le,y1:Ve-Le,x2:Ce+Le,y2:Ve+Le})}}}}}_queryCellCircle(o,d,A,T,S,E,k,Z){const K=k.circle,Y=k.seenUids,re=this.boxCells[S];if(re!==null){const pe=this.bboxes;for(const Pe of re)if(!Y.box[Pe]){Y.box[Pe]=!0;const Ce=4*Pe;if(this._circleAndRectCollide(K.x,K.y,K.radius,pe[Ce+0],pe[Ce+1],pe[Ce+2],pe[Ce+3])&&(!Z||Z(this.boxKeys[Pe])))return E.push(!0),!0}}const ne=this.circleCells[S];if(ne!==null){const pe=this.circles;for(const Pe of ne)if(!Y.circle[Pe]){Y.circle[Pe]=!0;const Ce=3*Pe;if(this._circlesCollide(pe[Ce],pe[Ce+1],pe[Ce+2],K.x,K.y,K.radius)&&(!Z||Z(this.circleKeys[Pe])))return E.push(!0),!0}}}_forEachCell(o,d,A,T,S,E,k,Z){const K=this._convertToXCellCoord(o),Y=this._convertToYCellCoord(d),re=this._convertToXCellCoord(A),ne=this._convertToYCellCoord(T);for(let pe=K;pe<=re;pe++)for(let Pe=Y;Pe<=ne;Pe++)if(S.call(this,o,d,A,T,this.xCellCount*Pe+pe,E,k,Z))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,d,A,T,S,E){const k=T-o,Z=S-d,K=A+E;return K*K>k*k+Z*Z}_circleAndRectCollide(o,d,A,T,S,E,k){const Z=(E-T)/2,K=Math.abs(o-(T+Z));if(K>Z+A)return!1;const Y=(k-S)/2,re=Math.abs(d-(S+Y));if(re>Y+A)return!1;if(K<=Z||re<=Y)return!0;const ne=K-Z,pe=re-Y;return ne*ne+pe*pe<=A*A}}const qo={unknown:0,flipRequired:1,flipNotRequired:2},Ru=Math.tan(85*Math.PI/180);function Es(y,o,d,A,T,S,E){const k=n.ad.mat4.create();if(d)if(S.name==="globe"){const Z=n.bo(T,o);n.ad.mat4.multiply(k,k,Z)}else{const Z=n.ad.mat2.invert([],E);k[0]=Z[0],k[1]=Z[1],k[4]=Z[2],k[5]=Z[3],A||n.ad.mat4.rotateZ(k,k,T.angle)}else n.ad.mat4.multiply(k,T.labelPlaneMatrix,y);return k}function Gi(y,o,d,A,T,S,E){const k=Es(y,o,d,A,T,S,E);return S.name==="globe"&&d||(k[2]=k[6]=k[10]=k[14]=0),k}function Ei(y,o,d,A,T,S,E){if(d){if(S.name==="globe"){const k=Es(y,o,d,A,T,S,E);return n.ad.mat4.invert(k,k),n.ad.mat4.multiply(k,y,k),k}{const k=n.ad.mat4.clone(y),Z=n.ad.mat4.identity([]);return Z[0]=E[0],Z[1]=E[1],Z[4]=E[2],Z[5]=E[3],n.ad.mat4.multiply(k,k,Z),A||n.ad.mat4.rotateZ(k,k,-T.angle),k}}return T.glCoordMatrix}function go(y,o,d,A){const T=[y,o,d,1];d?n.ad.vec4.transformMat4(T,T,A):Wi(T,T,A);const S=T[3];return T[0]/=S,T[1]/=S,T[2]/=S,T}function Od(y,o){return Math.min(.5+y/o*.5,1.5)}function gh(y,o){const d=y[0]/y[3],A=y[1]/y[3];return d>=-o[0]&&d<=o[0]&&A>=-o[1]&&A<=o[1]}function gc(y,o,d,A,T,S,E,k,Z,K){const Y=d.transform,re=A?y.textSizeData:y.iconSizeData,ne=n.bp(re,d.transform.zoom),pe=Y.projection.name==="globe",Pe=[256/d.width*2+1,256/d.height*2+1],Ce=A?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ce.clear();let Ve=null;pe&&(Ve=A?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const Le=y.lineVertexArray,$e=A?y.text.placedSymbolArray:y.icon.placedSymbolArray,nt=d.transform.width/d.transform.height;let at,pt=!1;for(let ot=0;ot<$e.length;ot++){const ut=$e.get(ot),{numGlyphs:ct,writingMode:At}=ut;if(At!==n.bq.vertical||pt||at===n.bq.horizontal||(pt=!0),at=At,(ut.hidden||At===n.bq.vertical)&&!pt){rl(ct,Ce);continue}pt=!1;const Tt=new n.P(ut.tileAnchorX,ut.tileAnchorY);let{x:Qt,y:Ut,z:ra}=Y.projection.projectTilePoint(Tt.x,Tt.y,K.canonical);if(Z){const[La,Oa,lr]=Z(Tt);Qt+=La,Ut+=Oa,ra+=lr}const ca=[Qt,Ut,ra,1];if(n.ad.vec4.transformMat4(ca,ca,o),!gh(ca,Pe)){rl(ct,Ce);continue}const Sa=ca[3],Ft=Od(d.transform.getCameraToCenterDistance(Y.projection),Sa),sa=n.br(re,ne,ut),Vt=E?sa/Ft:sa*Ft,oa=go(Qt,Ut,ra,T);if(oa[3]<=0){rl(ct,Ce);continue}let ta={};const da=n.ak(y.layers[0].layout.get("text-max-angle")),Yt=Math.cos(da),pa=E?null:Z,Ia=ms(ut,Vt,!1,k,o,T,S,y.glyphOffsetArray,Le,Ce,Ve,oa,Tt,ta,nt,pa,Y.projection,K,E,Yt);pt=Ia.useVertical,pa&&Ia.needsFlipping&&(ta={}),(Ia.notEnoughRoom||pt||Ia.needsFlipping&&ms(ut,Vt,!0,k,o,T,S,y.glyphOffsetArray,Le,Ce,Ve,oa,Tt,ta,nt,pa,Y.projection,K,E,Yt).notEnoughRoom)&&rl(ct,Ce)}A?(y.text.dynamicLayoutVertexBuffer.updateData(Ce),Ve&&y.text.globeExtVertexBuffer&&y.text.globeExtVertexBuffer.updateData(Ve)):(y.icon.dynamicLayoutVertexBuffer.updateData(Ce),Ve&&y.icon.globeExtVertexBuffer&&y.icon.globeExtVertexBuffer.updateData(Ve))}function yc(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve){const{lineStartIndex:Le,glyphStartIndex:$e,segment:nt}=k,at=$e+k.numGlyphs,pt=Le+k.lineLength,ot=o.getoffsetX($e),ut=o.getoffsetX(at-1),ct=Vl(y*ot,d,A,T,S,E,nt,Le,pt,Z,K,Y,re,ne,!0,pe,Pe,Ce,Ve);if(!ct)return null;const At=Vl(y*ut,d,A,T,S,E,nt,Le,pt,Z,K,Y,re,ne,!0,pe,Pe,Ce,Ve);return At?{first:ct,last:At}:null}function al(y,o,d,A){return y===n.bq.horizontal&&Math.abs(A)>Math.abs(d)?{useVertical:!0}:y===n.bq.vertical?A>0?{needsFlipping:!0}:null:o!==qo.unknown&&function(T,S){return T===0||Math.abs(S/T)>Ru}(d,A)?o===qo.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function ms(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve,Le,$e,nt){const at=o/24,pt=y.lineOffsetX*at,ot=y.lineOffsetY*at,{lineStartIndex:ut,glyphStartIndex:ct,numGlyphs:At,segment:Tt,writingMode:Qt,flipState:Ut}=y,ra=ut+y.lineLength,ca=Sa=>{if(Y){const[oa,ta,da]=Sa.up,Yt=K.length;n.bs(Y,Yt+0,oa,ta,da),n.bs(Y,Yt+1,oa,ta,da),n.bs(Y,Yt+2,oa,ta,da),n.bs(Y,Yt+3,oa,ta,da)}const[Ft,sa,Vt]=Sa.point;n.bt(K,Ft,sa,Vt,Sa.angle)};if(At>1){const Sa=yc(at,k,pt,ot,d,re,ne,y,Z,S,pe,Ce,!1,Ve,Le,$e,nt);if(!Sa)return{notEnoughRoom:!0};if(A&&!d){let[Ft,sa,Vt]=Sa.first.point,[oa,ta,da]=Sa.last.point;[Ft,sa]=go(Ft,sa,Vt,E),[oa,ta]=go(oa,ta,da,E);const Yt=al(Qt,Ut,(oa-Ft)*Pe,ta-sa);if(y.flipState=Yt&&Yt.needsFlipping?qo.flipRequired:qo.flipNotRequired,Yt)return Yt}ca(Sa.first);for(let Ft=ct+1;Ft<ct+At-1;Ft++){const sa=Vl(at*k.getoffsetX(Ft),pt,ot,d,re,ne,Tt,ut,ra,Z,S,pe,Ce,!1,!1,Ve,Le,$e,nt);if(!sa)return K.length-=4*(Ft-ct),{notEnoughRoom:!0};ca(sa)}ca(Sa.last)}else{if(A&&!d){const Ft=go(ne.x,ne.y,0,T),sa=ut+Tt+1,Vt=new n.P(Z.getx(sa),Z.gety(sa)),oa=go(Vt.x,Vt.y,0,T),ta=oa[3]>0?oa:Ns(ne,Vt,Ft,1,T,void 0,Ve,Le.canonical),da=al(Qt,Ut,(ta[0]-Ft[0])*Pe,ta[1]-Ft[1]);if(y.flipState=da&&da.needsFlipping?qo.flipRequired:qo.flipNotRequired,da)return da}const Sa=Vl(at*k.getoffsetX(ct),pt,ot,d,re,ne,Tt,ut,ra,Z,S,pe,Ce,!1,!1,Ve,Le,$e,nt);if(!Sa)return{notEnoughRoom:!0};ca(Sa)}return{}}function Wu(y,o,d,A,T){const{x:S,y:E,z:k}=A.projectTilePoint(y.x,y.y,o);if(!T)return go(S,E,k,d);const[Z,K,Y]=T(y);return go(S+Z,E+K,k+Y,d)}function Ns(y,o,d,A,T,S,E,k){const Z=Wu(y.sub(o)._unit()._add(y),k,T,E,S);return n.ad.vec3.sub(Z,d,Z),n.ad.vec3.normalize(Z,Z),n.ad.vec3.scaleAndAdd(Z,d,Z,A)}function Vl(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve,Le,$e){const nt=A?y-o:y+o;let at=nt>0?1:-1,pt=0;A&&(at*=-1,pt=Math.PI),at<0&&(pt+=Math.PI);let ot=k+E+(at>0?0:1)|0,ut=T,ct=T,At=0,Tt=0;const Qt=Math.abs(nt),Ut=[],ra=[];let ca=S,Sa=ca,Ft=n.ad.vec3.zero([]);const sa=()=>Ns(Sa,ca,ct,Qt-At+1,Y,ne,Ce,Ve.canonical);for(;At+Tt<=Qt;){if(ot+=at,ot<k||ot>=Z)return null;if(ct=ut,Sa=ca,Ut.push(ct),pe&&ra.push(Sa),ca=new n.P(K.getx(ot),K.gety(ot)),ut=re[ot],!ut){const lr=Wu(ca,Ve.canonical,Y,Ce,ne);ut=lr[3]>0?re[ot]=lr:sa()}At+=Tt;const La=n.ad.vec3.sub([],ut,ct),Oa=n.ad.vec3.distance(ct,ut);if(d&&Oa>0&&Tt>0&&n.ad.vec3.dot(Ft,La)/(Tt*Oa)<$e)return null;Tt=Oa,Ft=La}Pe&&ne&&(re[ot]&&(ut=sa(),Tt=n.ad.vec3.distance(ct,ut),Ft=n.ad.vec3.sub([],ut,ct)),re[ot]=ut);const Vt=(Qt-At)/Tt,oa=ca.sub(Sa)._mult(Vt)._add(Sa),ta=n.ad.vec3.scaleAndAdd([],ct,Ft,Vt);let da=[0,0,1],Yt=Ft[0],pa=Ft[1];if(Le&&(da=Ce.upVector(Ve.canonical,oa.x,oa.y),da[0]!==0||da[1]!==0||da[2]!==1)){const La=[da[2],0,-da[0]],Oa=n.ad.vec3.cross([],da,La);n.ad.vec3.normalize(La,La),n.ad.vec3.normalize(Oa,Oa),Yt=n.ad.vec3.dot(Ft,La),pa=n.ad.vec3.dot(Ft,Oa)}if(d){const La=n.ad.vec3.cross([],da,Ft);n.ad.vec3.normalize(La,La),n.ad.vec3.scaleAndAdd(ta,ta,La,d*at)}const Ia=pt+Math.atan2(pa,Yt);return Ut.push(ta),pe&&ra.push(oa),{point:ta,angle:Ia,path:Ut,tilePath:ra,up:da}}function rl(y,o){const d=o.length,A=d+4*y;o.resize(A),o.float32.fill(-1/0,4*d,4*A)}function Wi(y,o,d){const A=o[0],T=o[1];return y[0]=d[0]*A+d[4]*T+d[12],y[1]=d[1]*A+d[5]*T+d[13],y[3]=d[3]*A+d[7]*T+d[15],y}const Ks=100;class Ql{constructor(o,d,A=new pn(o.width+200,o.height+200,25),T=new pn(o.width+200,o.height+200,25)){this.transform=o,this.grid=A,this.ignoredGrid=T,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ks,this.screenBottomBoundary=o.height+Ks,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=d}placeCollisionBox(o,d,A,T,S,E,k,Z){let K=A.projectedAnchorX,Y=A.projectedAnchorY,re=A.projectedAnchorZ;const ne=A.elevation,pe=A.tileID,Pe=o.getProjection();if(ne&&pe){const[ot,ut,ct]=Pe.upVector(pe.canonical,A.tileAnchorX,A.tileAnchorY),At=Pe.upVectorScale(pe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=ot*ne*At,Y+=ut*ne*At,re+=ct*ne*At}const Ce=this.projectAndGetPerspectiveRatio(k,K,Y,re,A.tileID,Pe.name==="globe"||!!ne||this.transform.pitch>0,Pe),Ve=E*Ce.perspectiveRatio,Le=(A.x1*d+T.x-A.padding)*Ve+Ce.point.x,$e=(A.y1*d+T.y-A.padding)*Ve+Ce.point.y,nt=(A.x2*d+T.x+A.padding)*Ve+Ce.point.x,at=(A.y2*d+T.y+A.padding)*Ve+Ce.point.y,pt=Ce.perspectiveRatio<=.55||Ce.occluded;return!this.isInsideGrid(Le,$e,nt,at)||!S&&this.grid.hitTest(Le,$e,nt,at,Z)||pt?{box:[],offscreen:!1,occluded:Ce.occluded}:{box:[Le,$e,nt,at],offscreen:this.isOffscreen(Le,$e,nt,at),occluded:!1}}placeCollisionCircles(o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce){const Ve=[],Le=this.transform.elevation,$e=o.getProjection(),nt=Le?Le.getAtTileOffsetFunc(Ce,this.transform.center.lat,this.transform.worldSize,$e):null,at=new n.P(A.tileAnchorX,A.tileAnchorY);let{x:pt,y:ot,z:ut}=$e.projectTilePoint(at.x,at.y,Ce.canonical);if(nt){const[da,Yt,pa]=nt(at);pt+=da,ot+=Yt,ut+=pa}const ct=$e.name==="globe",At=this.projectAndGetPerspectiveRatio(k,pt,ot,ut,Ce,ct||!!Le||this.transform.pitch>0,$e),{perspectiveRatio:Tt}=At,Qt=(re?E/Tt:E*Tt)/n.bw,Ut=go(pt,ot,ut,Z),ra=A.lineOffsetX*Qt,ca=A.lineOffsetY*Qt,Sa=n.ak(o.layers[0].layout.get("text-max-angle")),Ft=Math.cos(Sa),sa=At.signedDistanceFromCamera>0?yc(Qt,S,ra,ca,!1,Ut,at,A,T,Z,{},Le&&!re?nt:null,re&&!!Le,$e,Ce,re,Ft):null;let Vt=!1,oa=!1,ta=!0;if(sa&&!At.occluded){const da=.5*pe*Tt+Pe,Yt=new n.P(-100,-100),pa=new n.P(this.screenRightBoundary,this.screenBottomBoundary),Ia=new Nd,{first:La,last:Oa}=sa,lr=La.path.length;let kr=[];for(let Pr=lr-1;Pr>=1;Pr--)kr.push(La.path[Pr]);for(let Pr=1;Pr<Oa.path.length;Pr++)kr.push(Oa.path[Pr]);const yr=2.5*da;K&&(kr=kr.map(([Pr,Or,Ur],Lr)=>(nt&&!ct&&(Ur=nt(Lr<lr-1?La.tilePath[lr-1-Lr]:Oa.tilePath[Lr-lr+2])[2]),go(Pr,Or,Ur,K))),kr.some(Pr=>Pr[3]<=0)&&(kr=[]));let Dr=[];if(kr.length>0){let Pr=1/0,Or=-1/0,Ur=1/0,Lr=-1/0;for(const fr of kr)Pr=Math.min(Pr,fr[0]),Ur=Math.min(Ur,fr[1]),Or=Math.max(Or,fr[0]),Lr=Math.max(Lr,fr[1]);Or>=Yt.x&&Pr<=pa.x&&Lr>=Yt.y&&Ur<=pa.y&&(Dr=[kr.map(fr=>new n.P(fr[0],fr[1]))],(Pr<Yt.x||Or>pa.x||Ur<Yt.y||Lr>pa.y)&&(Dr=n.bu(Dr,Yt.x,Yt.y,pa.x,pa.y)))}for(const Pr of Dr){Ia.reset(Pr,.25*da);let Or=0;Or=Ia.length<=.5*da?1:Math.ceil(Ia.paddedLength/yr)+1;for(let Ur=0;Ur<Or;Ur++){const Lr=Ur/Math.max(Or-1,1),fr=Ia.lerp(Lr),on=fr.x+Ks,Cr=fr.y+Ks;Ve.push(on,Cr,da,0);const ar=on-da,ln=Cr-da,Kn=on+da,mn=Cr+da;if(ta=ta&&this.isOffscreen(ar,ln,Kn,mn),oa=oa||this.isInsideGrid(ar,ln,Kn,mn),!d&&this.grid.hitTestCircle(on,Cr,da,ne)&&(Vt=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:Vt,occluded:!1}}}}return{circles:!Y&&Vt||!oa?[]:Ve,offscreen:ta,collisionDetected:Vt,occluded:At.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let A=1/0,T=1/0,S=-1/0,E=-1/0;for(const Y of o){const re=new n.P(Y.x+Ks,Y.y+Ks);A=Math.min(A,re.x),T=Math.min(T,re.y),S=Math.max(S,re.x),E=Math.max(E,re.y),d.push(re)}const k=this.grid.query(A,T,S,E).concat(this.ignoredGrid.query(A,T,S,E)),Z={},K={};for(const Y of k){const re=Y.key;if(Z[re.bucketInstanceId]===void 0&&(Z[re.bucketInstanceId]={}),Z[re.bucketInstanceId][re.featureIndex])continue;const ne=[new n.P(Y.x1,Y.y1),new n.P(Y.x2,Y.y1),new n.P(Y.x2,Y.y2),new n.P(Y.x1,Y.y2)];n.bv(d,ne)&&(Z[re.bucketInstanceId][re.featureIndex]=!0,K[re.bucketInstanceId]===void 0&&(K[re.bucketInstanceId]=[]),K[re.bucketInstanceId].push(re.featureIndex))}return K}insertCollisionBox(o,d,A,T,S){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:T,collisionGroupID:S},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,d,A,T,S){const E=d?this.ignoredGrid:this.grid,k={bucketInstanceId:A,featureIndex:T,collisionGroupID:S};for(let Z=0;Z<o.length;Z+=4)E.insertCircle(k,o[Z],o[Z+1],o[Z+2])}projectAndGetPerspectiveRatio(o,d,A,T,S,E,k){const Z=[d,A,T,1];let K=!1;T||this.transform.pitch>0?(n.ad.vec4.transformMat4(Z,Z,o),this.fogState&&S&&k.name!=="globe"&&(K=function(ne,pe,Pe,Ce,Ve,Le){const $e=Le.calculateFogTileMatrix(Ve),nt=[pe,Pe,Ce];return n.ad.vec3.transformMat4(nt,nt,$e),ja(ne,n.ad.vec3.length(nt),Le.pitch,Le._fov)}(this.fogState,d,A,T,S.toUnwrapped(),this.transform)>.9)):Wi(Z,Z,o);const Y=Z[3];return{point:new n.P((Z[0]/Y+1)/2*this.transform.width+Ks,(-Z[1]/Y+1)/2*this.transform.height+Ks),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/Y*.5,1.5),signedDistanceFromCamera:Y,occluded:E&&Z[2]>Y||K}}isOffscreen(o,d,A,T){return A<Ks||o>=this.screenRightBoundary||T<Ks||d>this.screenBottomBoundary}isInsideGrid(o,d,A,T){return A>=0&&o<this.gridRightBoundary&&T>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const o=n.ad.mat4.identity([]);return n.ad.mat4.translate(o,o,[-100,-100,0]),o}}function cs(y,o,d){const A=o.createTileMatrix(y,y.worldSize,d.toUnwrapped());return n.ad.mat4.multiply(new Float32Array(16),y.projMatrix,A)}function Bh(y,o,d){if(o.projection.name===d.projection.name)return y.projMatrix;const A=d.clone();return A.setProjection(o.projection),cs(A,o.getProjection(),y)}function Ho(y,o,d){return o.name===d.projection.name?y.projMatrix:cs(d,o,y)}class Vd{constructor(o,d,A,T){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?d:-d))):T&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class Tu{constructor(o,d,A,T,S,E=!1){this.text=new Vd(o?o.text:null,d,A,S),this.icon=new Vd(o?o.icon:null,d,T,S),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Cu{constructor(o,d,A,T=!1){this.text=o,this.icon=d,this.skipFade=A,this.clipped=T}}class sp{constructor(){this.invProjMatrix=n.ad.mat4.create(),this.viewportMatrix=n.ad.mat4.create(),this.circles=[]}}class eu{constructor(o,d,A,T,S){this.bucketInstanceId=o,this.featureIndex=d,this.sourceLayerIndex=A,this.bucketIndex=T,this.tileID=S}}class Jm{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const d=++this.maxGroupID;this.collisionGroups[o]={ID:d,predicate:A=>A.collisionGroupID===d}}return this.collisionGroups[o]}}function zd(y,o,d,A,T){const{horizontalAlign:S,verticalAlign:E}=n.bD(y),k=-(S-.5)*o,Z=-(E-.5)*d,K=n.bC(y,A);return new n.P(k+K[0]*T,Z+K[1]*T)}function Ws(y,o,d,A,T){const S=new n.P(y,o);return d&&S._rotate(A?T:-T),S}class Tf{constructor(o,d,A,T,S,E){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new Ql(this.transform,S),this.buildingIndex=E,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Jm(A),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,d,A,T,S=1){const E=A.getBucket(d),k=A.latestFeatureIndex;if(!E||!k||d.fqid!==E.layerIds[0])return;const Z=E.layers[0].layout,K=E.layers[0].paint,Y=A.collisionBoxArray,re=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),ne=A.tileSize/n.ai,pe=A.tileID.toUnwrapped();this.transform.setProjection(E.projection);const Pe=(Ce=A.tileID,Ve=E.getProjection(),Le=this.transform,Ve.name===this.projection?Le.calculateProjMatrix(Ce.toUnwrapped()):cs(Le,Ve,Ce));var Ce,Ve,Le;const $e=Z.get("text-pitch-alignment")==="map",nt=Z.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const at=d.dynamicFilter(),pt=d.dynamicFilterNeedsFeature(),ot=this.transform.calculatePixelsToTileUnitsMatrix(A),ut=Gi(Pe,A.tileID.canonical,$e,nt,this.transform,E.getProjection(),ot);let ct=null;if($e){const sa=Ei(Pe,A.tileID.canonical,$e,nt,this.transform,E.getProjection(),ot);ct=n.ad.mat4.multiply([],this.transform.labelPlaneMatrix,sa)}let At=null;at&&A.latestFeatureIndex&&(At={unwrappedTileID:pe,dynamicFilter:at,dynamicFilterNeedsFeature:pt}),this.retainedQueryData[E.bucketInstanceId]=new eu(E.bucketInstanceId,k,E.sourceLayerIndex,E.index,A.tileID);const[Tt,Qt]=E.layers[0].layout.get("text-size-scale-range"),Ut=n.ay(S,Tt,Qt),[ra,ca]=Z.get("icon-size-scale-range"),Sa=n.ay(S,ra,ca),Ft={bucket:E,layout:Z,paint:K,posMatrix:Pe,textLabelPlaneMatrix:ut,labelToScreenMatrix:ct,clippingData:At,scale:re,textPixelRatio:ne,holdingForFade:A.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:n.bp(E.textSizeData,this.transform.zoom,Ut),partiallyEvaluatedIconSize:n.bp(E.iconSizeData,this.transform.zoom,Sa),collisionGroup:this.collisionGroups.get(E.sourceID),latestFeatureIndex:A.latestFeatureIndex};if(T)for(const sa of E.sortKeyRanges){const{sortKey:Vt,symbolInstanceStart:oa,symbolInstanceEnd:ta}=sa;o.push({sortKey:Vt,symbolInstanceStart:oa,symbolInstanceEnd:ta,parameters:Ft})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ft})}attemptAnchorPlacement(o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve,Le,$e){const{textOffset0:nt,textOffset1:at,crossTileID:pt}=ne,ot=[nt,at],ut=zd(o,A,T,ot,S),ct=this.collisionIndex.placeCollisionBox(Pe,S,d,Ws(ut.x,ut.y,E,k,this.transform.angle),re,Z,K,Y.predicate);if(Ve){const At=Pe.getSymbolInstanceIconSize($e,this.transform.zoom,ne.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Pe,At,Ve,Ws(ut.x,ut.y,E,k,this.transform.angle),re,Z,K,Y.predicate).box.length===0)return}if(ct.box.length>0){let At;return this.prevPlacement&&this.prevPlacement.variableOffsets[pt]&&this.prevPlacement.placements[pt]&&this.prevPlacement.placements[pt].text&&(At=this.prevPlacement.variableOffsets[pt].anchor),this.variableOffsets[pt]={textOffset:ot,width:A,height:T,anchor:o,textScale:S,prevAnchor:At},this.markUsedJustification(Pe,o,ne,Ce),Pe.allowVerticalPlacement&&(this.markUsedOrientation(Pe,Ce,ne),this.placedOrientations[pt]=Ce),{shift:ut,placedGlyphBoxes:ct}}}placeLayerBucketPart(o,d,A,T,S=1){const{bucket:E,layout:k,paint:Z,posMatrix:K,textLabelPlaneMatrix:Y,labelToScreenMatrix:re,clippingData:ne,textPixelRatio:pe,holdingForFade:Pe,collisionBoxArray:Ce,partiallyEvaluatedTextSize:Ve,partiallyEvaluatedIconSize:Le,collisionGroup:$e,latestFeatureIndex:nt}=o.parameters,at=k.get("text-optional"),pt=k.get("icon-optional"),ot=k.get("text-allow-overlap"),ut=k.get("icon-allow-overlap"),ct=k.get("text-rotation-alignment")==="map",At=k.get("text-pitch-alignment")==="map",Tt=Z.get("symbol-z-offset"),Qt=k.get("symbol-elevation-reference")==="sea",[Ut,ra]=k.get("text-size-scale-range"),[ca,Sa]=k.get("icon-size-scale-range"),Ft=n.ay(S,Ut,ra),sa=n.ay(S,ca,Sa);this.transform.setProjection(E.projection);let Vt=ot&&(ut||!E.hasIconData()||pt),oa=ut&&(ot||!E.hasTextData()||at);const ta=!Tt.isConstant();!E.collisionArrays&&Ce&&E.deserializeCollisionBoxes(Ce),A&&T&&E.updateCollisionDebugBuffers(this.transform.zoom,Ce,Ft,sa);const da=(Yt,pa,Ia)=>{const{crossTileID:La,numVerticalGlyphVertices:Oa}=Yt;let lr=null;if(ne&&ne.dynamicFilterNeedsFeature||ta){const Pn=this.retainedQueryData[E.bucketInstanceId];lr=nt.loadFeature({featureIndex:Yt.featureIndex,bucketIndex:Pn.bucketIndex,sourceLayerIndex:Pn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(ne&&!(0,ne.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},lr,this.retainedQueryData[E.bucketInstanceId].tileID.canonical,new n.P(Yt.tileAnchorX,Yt.tileAnchorY),this.transform.calculateDistanceTileData(ne.unwrappedTileID)))return this.placements[La]=new Cu(!1,!1,!1,!0),void d.add(La);const kr=Tt.evaluate(lr,{});if(d.has(La))return;if(Pe)return void(this.placements[La]=new Cu(!1,!1,!1));let yr=!1,Dr=!1,Pr=!0,Or=!1,Ur=!1,Lr=null,fr={box:null,offscreen:null,occluded:null},on={box:null},Cr=null,ar=null,ln=null,Kn=0,mn=0,Dn=0;Ia.textFeatureIndex?Kn=Ia.textFeatureIndex:Yt.useRuntimeCollisionCircles&&(Kn=Yt.featureIndex),Ia.verticalTextFeatureIndex&&(mn=Ia.verticalTextFeatureIndex);const ts=Pn=>{Pn.tileID=this.retainedQueryData[E.bucketInstanceId].tileID;const oi=this.transform.elevation;Pn.elevation=Qt?kr:kr+(oi?oi.getAtTileOffset(Pn.tileID,Pn.tileAnchorX,Pn.tileAnchorY):0),Pn.elevation+=Yt.zOffset},As=Ia.textBox;if(As){ts(As);const Pn=Ln=>{let ui=n.bq.horizontal;if(E.allowVerticalPlacement&&!Ln&&this.prevPlacement){const Ro=this.prevPlacement.placedOrientations[La];Ro&&(this.placedOrientations[La]=Ro,ui=Ro,this.markUsedOrientation(E,ui,Yt))}return ui},oi=(Ln,ui)=>{if(E.allowVerticalPlacement&&Oa>0&&Ia.verticalTextBox){for(const Ro of E.writingModes)if(Ro===n.bq.vertical?(fr=ui(),on=fr):fr=Ln(),fr&&fr.box&&fr.box.length)break}else fr=Ln()};if(k.get("text-variable-anchor")){let Ln=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[La]){const bi=this.prevPlacement.variableOffsets[La];Ln.indexOf(bi.anchor)>0&&(Ln=Ln.filter(fs=>fs!==bi.anchor),Ln.unshift(bi.anchor))}const ui=(bi,fs,Vc)=>{const Xo=E.getSymbolInstanceTextSize(Ve,Yt,this.transform.zoom,pa),cu=(bi.x2-bi.x1)*Xo+2*bi.padding,jl=(bi.y2-bi.y1)*Xo+2*bi.padding,ic=Yt.hasIconTextFit&&!ut?fs:null;ic&&ts(ic);let Sl={box:[],offscreen:!1,occluded:!1};const Jd=ot?2*Ln.length:Ln.length;for(let To=0;To<Jd;++To){const Vh=this.attemptAnchorPlacement(Ln[To%Ln.length],bi,cu,jl,Xo,ct,At,pe,K,$e,To>=Ln.length,Yt,pa,E,Vc,ic,Ve,Le);if(Vh&&(Sl=Vh.placedGlyphBoxes,Sl&&Sl.box&&Sl.box.length)){yr=!0,Lr=Vh.shift;break}}return Sl};oi(()=>ui(As,Ia.iconBox,n.bq.horizontal),()=>{const bi=Ia.verticalTextBox;return bi&&ts(bi),E.allowVerticalPlacement&&!(fr&&fr.box&&fr.box.length)&&Oa>0&&bi?ui(bi,Ia.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),fr&&(yr=fr.box,Pr=fr.offscreen,Or=fr.occluded);const Ro=Pn(!(!fr||!fr.box));if(!yr&&this.prevPlacement){const bi=this.prevPlacement.variableOffsets[La];bi&&(this.variableOffsets[La]=bi,this.markUsedJustification(E,bi.anchor,Yt,Ro))}}else{const Ln=(ui,Ro)=>{const bi=E.getSymbolInstanceTextSize(Ve,Yt,this.transform.zoom,pa,S),fs=this.collisionIndex.placeCollisionBox(E,bi,ui,new n.P(0,0),ot,pe,K,$e.predicate);return fs&&fs.box&&fs.box.length&&(this.markUsedOrientation(E,Ro,Yt),this.placedOrientations[La]=Ro),fs};oi(()=>Ln(As,n.bq.horizontal),()=>{const ui=Ia.verticalTextBox;return E.allowVerticalPlacement&&Oa>0&&ui?(ts(ui),Ln(ui,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Pn(!!(fr&&fr.box&&fr.box.length))}}if(Cr=fr,yr=Cr&&Cr.box&&Cr.box.length>0,Pr=Cr&&Cr.offscreen,Or=Cr&&Cr.occluded,Yt.useRuntimeCollisionCircles){const Pn=E.text.placedSymbolArray.get(Yt.centerJustifiedTextSymbolIndex>=0?Yt.centerJustifiedTextSymbolIndex:Yt.verticalPlacedTextSymbolIndex),oi=n.br(E.textSizeData,Ve,Pn),Ln=k.get("text-padding");ar=this.collisionIndex.placeCollisionCircles(E,ot,Pn,E.lineVertexArray,E.glyphOffsetArray,oi,K,Y,re,A,At,$e.predicate,Yt.collisionCircleDiameter*oi/n.bw,Ln,this.retainedQueryData[E.bucketInstanceId].tileID),yr=ot||ar.circles.length>0&&!ar.collisionDetected,Pr=Pr&&ar.offscreen,Or=ar.occluded}if(Ia.iconFeatureIndex&&(Dn=Ia.iconFeatureIndex),Ia.iconBox){const Pn=oi=>{ts(oi);const Ln=Yt.hasIconTextFit&&Lr?Ws(Lr.x,Lr.y,ct,At,this.transform.angle):new n.P(0,0),ui=E.getSymbolInstanceIconSize(Le,this.transform.zoom,Yt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(E,ui,oi,Ln,ut,pe,K,$e.predicate)};on&&on.box&&on.box.length&&Ia.verticalIconBox?(ln=Pn(Ia.verticalIconBox),Dr=ln.box.length>0):(ln=Pn(Ia.iconBox),Dr=ln.box.length>0),Pr=Pr&&ln.offscreen,Ur=ln.occluded}const uo=at||Yt.numHorizontalGlyphVertices===0&&Oa===0,eo=pt||Yt.numIconVertices===0;if(uo||eo?eo?uo||(Dr=Dr&&yr):yr=Dr&&yr:Dr=yr=Dr&&yr,yr&&Cr&&Cr.box&&this.collisionIndex.insertCollisionBox(Cr.box,k.get("text-ignore-placement"),E.bucketInstanceId,on&&on.box&&mn?mn:Kn,$e.ID),Dr&&ln&&this.collisionIndex.insertCollisionBox(ln.box,k.get("icon-ignore-placement"),E.bucketInstanceId,Dn,$e.ID),ar&&(yr&&this.collisionIndex.insertCollisionCircles(ar.circles,k.get("text-ignore-placement"),E.bucketInstanceId,Kn,$e.ID),A)){const Pn=E.bucketInstanceId;let oi=this.collisionCircleArrays[Pn];oi===void 0&&(oi=this.collisionCircleArrays[Pn]=new sp);for(let Ln=0;Ln<ar.circles.length;Ln+=4)oi.circles.push(ar.circles[Ln+0]),oi.circles.push(ar.circles[Ln+1]),oi.circles.push(ar.circles[Ln+2]),oi.circles.push(ar.collisionDetected?1:0)}const wo=E.projection.name!=="globe";Vt=Vt&&(wo||!Or),oa=oa&&(wo||!Ur),this.placements[La]=new Cu(yr||Vt,Dr||oa,Pr||E.justReloaded),d.add(La)};if(E.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(E,this.retainedQueryData[E.bucketInstanceId].tileID),E.elevationType==="road"&&E.updateRoadElevation(),E.updateZOffset(),E.sortFeaturesByY){const Yt=E.getSortedSymbolIndexes(this.transform.angle);for(let pa=Yt.length-1;pa>=0;--pa){const Ia=Yt[pa];da(E.symbolInstances.get(Ia),Ia,E.collisionArrays[Ia])}E.hasAnyZOffset&&n.w(`${E.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(E.hasAnyZOffset){const Yt=E.getSortedIndexesByZOffset();for(let pa=0;pa<Yt.length;++pa){const Ia=Yt[pa];da(E.symbolInstances.get(Ia),Ia,E.collisionArrays[Ia])}}else for(let Yt=o.symbolInstanceStart;Yt<o.symbolInstanceEnd;Yt++)da(E.symbolInstances.get(Yt),Yt,E.collisionArrays[Yt]);if(A&&E.bucketInstanceId in this.collisionCircleArrays){const Yt=this.collisionCircleArrays[E.bucketInstanceId];n.ad.mat4.invert(Yt.invProjMatrix,K),Yt.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1}markUsedJustification(o,d,A,T){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:Z,crossTileID:K}=A,Y=n.bB(d),re=T===n.bq.vertical?Z:Y==="left"?S:Y==="center"?E:Y==="right"?k:-1;S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=re>=0&&S!==re?0:K),E>=0&&(o.text.placedSymbolArray.get(E).crossTileID=re>=0&&E!==re?0:K),k>=0&&(o.text.placedSymbolArray.get(k).crossTileID=re>=0&&k!==re?0:K),Z>=0&&(o.text.placedSymbolArray.get(Z).crossTileID=re>=0&&Z!==re?0:K)}markUsedOrientation(o,d,A){const T=d===n.bq.horizontal||d===n.bq.horizontalOnly?d:0,S=d===n.bq.vertical?d:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:Z,verticalPlacedTextSymbolIndex:K}=A,Y=o.text.placedSymbolArray;E>=0&&(Y.get(E).placedOrientation=T),k>=0&&(Y.get(k).placedOrientation=T),Z>=0&&(Y.get(Z).placedOrientation=T),K>=0&&(Y.get(K).placedOrientation=S)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let A=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const T=d?d.symbolFadeChange(o):1,S=d?d.opacities:{},E=d?d.variableOffsets:{},k=d?d.placedOrientations:{};for(const Z in this.placements){const K=this.placements[Z],Y=S[Z];Y?(this.opacities[Z]=new Tu(Y,T,K.text,K.icon,null,K.clipped),A=A||K.text!==Y.text.placed||K.icon!==Y.icon.placed):(this.opacities[Z]=new Tu(null,T,K.text,K.icon,K.skipFade,K.clipped),A=A||K.text||K.icon)}for(const Z in S){const K=S[Z];if(!this.opacities[Z]){const Y=new Tu(K,T,!1,!1);Y.isHidden()||(this.opacities[Z]=Y,A=A||K.text.placed||K.icon.placed)}}for(const Z in E)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=E[Z]);for(const Z in k)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=k[Z]);A?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:o)}updateLayerOpacities(o,d,A,T){const S=new Set;for(const E of d){const k=E.getBucket(o);k&&E.latestFeatureIndex&&o.fqid===k.layerIds[0]&&(this.updateBucketOpacities(k,S,E,E.collisionBoxArray,A,T,E.tileID,o.scope),k.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(k,E.tileID),k.elevationType==="road"&&k.updateRoadElevation(),k.updateZOffset())}}updateBucketOpacities(o,d,A,T,S,E,k,Z){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const K=o.layers[0].layout,Y=o.layers[0].paint,re=!!o.layers[0].dynamicFilter(),ne=new Tu(null,0,!1,!1,!0),pe=K.get("text-allow-overlap"),Pe=K.get("icon-allow-overlap"),Ce=K.get("text-variable-anchor"),Ve=K.get("text-rotation-alignment")==="map",Le=K.get("text-pitch-alignment")==="map",$e=Y.get("symbol-z-offset"),nt=K.get("symbol-elevation-reference")==="sea",at=!$e.isConstant(),pt=new Tu(null,0,pe&&(Pe||!o.hasIconData()||K.get("icon-optional")),Pe&&(pe||!o.hasTextData()||K.get("text-optional")),!0);!o.collisionArrays&&T&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(T);const ot=(ct,At,Tt)=>{for(let Qt=0;Qt<At/4;Qt++)ct.opacityVertexArray.emplaceBack(Tt)};let ut=0;E&&o.updateReplacement(k,E);for(let ct=0;ct<o.symbolInstances.length;ct++){const At=o.symbolInstances.get(ct),{numHorizontalGlyphVertices:Tt,numVerticalGlyphVertices:Qt,crossTileID:Ut,numIconVertices:ra,tileAnchorX:ca,tileAnchorY:Sa}=At;let Ft=null;const sa=this.retainedQueryData[o.bucketInstanceId];at&&At&&sa&&(Ft=A.latestFeatureIndex.loadFeature({featureIndex:At.featureIndex,bucketIndex:sa.bucketIndex,sourceLayerIndex:sa.sourceLayerIndex,layoutVertexArrayOffset:0}));const Vt=$e.evaluate(Ft,{}),oa=d.has(Ut);let ta=this.opacities[Ut];oa?ta=ne:ta||(ta=pt,this.opacities[Ut]=ta),d.add(Ut);const da=Tt>0||Qt>0,Yt=ra>0,pa=this.placedOrientations[Ut],Ia=pa===n.bq.vertical,La=pa===n.bq.horizontal||pa===n.bq.horizontalOnly;!da&&!Yt||ta.isHidden()||ut++;let Oa=!1;if((da||Yt)&&E)for(const lr of o.activeReplacements){if(n.bx(lr,S,n.by.Symbol,Z)||lr.min.x>ca||ca>lr.max.x||lr.min.y>Sa||Sa>lr.max.y)continue;const kr=n.bz(ca,Sa,k.canonical,lr.footprintTileId.canonical);if(Oa=n.bA(kr,lr.footprint),Oa)break}if(da){const lr=Oa?Rr:nr(ta.text);ot(o.text,Tt,Ia?Rr:lr),ot(o.text,Qt,La?Rr:lr);const kr=ta.text.isHidden(),{leftJustifiedTextSymbolIndex:yr,centerJustifiedTextSymbolIndex:Dr,rightJustifiedTextSymbolIndex:Pr,verticalPlacedTextSymbolIndex:Or}=At,Ur=o.text.placedSymbolArray,Lr=kr||Ia?1:0;yr>=0&&(Ur.get(yr).hidden=Lr),Dr>=0&&(Ur.get(Dr).hidden=Lr),Pr>=0&&(Ur.get(Pr).hidden=Lr),Or>=0&&(Ur.get(Or).hidden=kr||La?1:0);const fr=this.variableOffsets[Ut];fr&&this.markUsedJustification(o,fr.anchor,At,pa);const on=this.placedOrientations[Ut];on&&(this.markUsedJustification(o,"left",At,on),this.markUsedOrientation(o,on,At))}if(Yt){const lr=Oa?Rr:nr(ta.icon),{placedIconSymbolIndex:kr,verticalPlacedIconSymbolIndex:yr}=At,Dr=o.icon.placedSymbolArray,Pr=ta.icon.isHidden()?1:0;kr>=0&&(ot(o.icon,ra,Ia?Rr:lr),Dr.get(kr).hidden=Pr),yr>=0&&(ot(o.icon,At.numVerticalIconVertices,La?Rr:lr),Dr.get(yr).hidden=Pr)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const lr=o.collisionArrays[ct];if(lr){let kr=new n.P(0,0),yr=!0;if(lr.textBox||lr.verticalTextBox){if(Ce){const Pr=this.variableOffsets[Ut];Pr?(kr=zd(Pr.anchor,Pr.width,Pr.height,Pr.textOffset,Pr.textScale),Ve&&kr._rotate(Le?this.transform.angle:-this.transform.angle)):yr=!1}re&&(yr=!ta.clipped),lr.textBox&&tu(o.textCollisionBox.collisionVertexArray,ta.text.placed,!yr||Ia,Vt,nt,kr.x,kr.y),lr.verticalTextBox&&tu(o.textCollisionBox.collisionVertexArray,ta.text.placed,!yr||La,Vt,nt,kr.x,kr.y)}const Dr=yr&&!!(!La&&lr.verticalIconBox);lr.iconBox&&tu(o.iconCollisionBox.collisionVertexArray,ta.icon.placed,Dr,Vt,nt,At.hasIconTextFit?kr.x:0,At.hasIconTextFit?kr.y:0),lr.verticalIconBox&&tu(o.iconCollisionBox.collisionVertexArray,ta.icon.placed,!Dr,Vt,nt,At.hasIconTextFit?kr.x:0,At.hasIconTextFit?kr.y:0)}}}if(o.fullyClipped=ut===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const ct=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ct.invProjMatrix,o.placementViewportMatrix=ct.viewportMatrix,o.collisionCircleArray=ct.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,d){const A=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*A>o}setStale(){this.stale=!0}}function tu(y,o,d,A,T,S,E){y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0)}const Cf=Math.pow(2,25),ce=Math.pow(2,24),Je=Math.pow(2,17),Mt=Math.pow(2,16),Jt=Math.pow(2,9),ha=Math.pow(2,8),Da=Math.pow(2,1);function nr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const o=y.placed?1:0,d=Math.floor(127*y.opacity);return d*Cf+o*ce+d*Je+o*Mt+d*Jt+o*ha+d*Da+o}const Rr=0;class Wr{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,d,A,T,S,E){const k=this._bucketParts;for(;this._currentTileIndex<o.length;)if(d.getBucketParts(k,T,o[this._currentTileIndex],this._sortAcrossTiles,E),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((Z,K)=>Z.sortKey-K.sortKey));this._currentPartIndex<k.length;){const Z=k[this._currentPartIndex];if(d.placeLayerBucketPart(Z,this._seenCrossTileIDs,A,Z.symbolInstanceStart===0,E),this._currentPartIndex++,S())return!0}return!1}}class xn{constructor(o,d,A,T,S,E,k,Z,K){this.placement=new Tf(o,S,E,k,Z,K),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,d,A,T,S){const E=n.q.now(),k=()=>{const Z=n.q.now()-E;return!this._forceFullPlacement&&Z>2};for(;this._currentPlacementIndex>=0;){const Z=d[o[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if(Z.type==="symbol"&&(!Z.minzoom||Z.minzoom<=K)&&(!Z.maxzoom||Z.maxzoom>K)){const Y=Z,re=Y.layout.get("symbol-z-elevate"),ne=Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,pe=Y.layout.get("symbol-z-order"),Pe=pe==="viewport-y"||pe==="auto"&&!(pe!=="viewport-y"&&ne),Ce=Y.layout.get("text-allow-overlap")||Y.layout.get("icon-allow-overlap")||Y.layout.get("text-ignore-placement")||Y.layout.get("icon-ignore-placement"),Ve=Pe&&Ce,Le=this._inProgressLayer=this._inProgressLayer||new Wr(Y),$e=n.C(Z.source,Z.scope);if(Le.continuePlacement(re||Ve?T[$e]:A[$e],this.placement,this._showCollisionBoxes,Z,k,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const zn=512/n.ai/2;class yi{constructor(o,d,A){this.tileID=o,this.bucketInstanceId=A,this.index=new n.bE(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const T=o.canonical.x*n.ai,S=o.canonical.y*n.ai;for(let E=0;E<d.length;E++){const{key:k,crossTileID:Z,tileAnchorX:K,tileAnchorY:Y}=d.get(E),re=Math.floor((T+K)*zn),ne=Math.floor((S+Y)*zn);this.index.add(re,ne),this.keys.push(k),this.crossTileIDs.push(Z)}this.index.finish()}findMatches(o,d,A){const T=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),S=zn/Math.pow(2,d.canonical.z-this.tileID.canonical.z),E=d.canonical.x*n.ai,k=d.canonical.y*n.ai;for(let Z=0;Z<o.length;Z++){const K=o.get(Z);if(K.crossTileID)continue;const{key:Y,tileAnchorX:re,tileAnchorY:ne}=K,pe=Math.floor((E+re)*S),Pe=Math.floor((k+ne)*S),Ce=this.index.range(pe-T,Pe-T,pe+T,Pe+T);for(const Ve of Ce){const Le=this.crossTileIDs[Ve];if(this.keys[Ve]===Y&&!A.has(Le)){A.add(Le),K.crossTileID=Le;break}}}}}class Os{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const d=Math.round((o-this.lng)/360);if(d!==0)for(const A in this.indexes){const T=this.indexes[A],S={};for(const E in T){const k=T[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+d),S[k.tileID.key]=k}this.indexes[A]=S}this.lng=o}addBucket(o,d,A){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let S=0;S<d.symbolInstances.length;S++)d.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const T=this.usedCrossTileIDs[o.overscaledZ];for(const S in this.indexes){const E=this.indexes[S];if(Number(S)>o.overscaledZ)for(const k in E){const Z=E[k];Z.tileID.isChildOf(o)&&Z.findMatches(d.symbolInstances,o,T)}else{const k=E[o.scaledTo(Number(S)).key];k&&k.findMatches(d.symbolInstances,o,T)}}for(let S=0;S<d.symbolInstances.length;S++){const E=d.symbolInstances.get(S);E.crossTileID||(E.crossTileID=A.generate(),T.add(E.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new yi(o,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(o,d){for(const A of d.crossTileIDs)this.usedCrossTileIDs[o].delete(A)}removeStaleBuckets(o){let d=!1;for(const A in this.indexes){const T=this.indexes[A];for(const S in T)o[T[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,T[S]),delete T[S],d=!0)}return d}}class no{constructor(){this.layerIndexes={},this.crossTileIDs=new Os,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,d,A,T){let S=this.layerIndexes[o.fqid];S===void 0&&(S=this.layerIndexes[o.fqid]=new Vs);let E=!1;const k={};T.name!=="globe"&&S.handleWrapJump(A);for(const Z of d){const K=Z.getBucket(o);K&&o.fqid===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(Z.tileID,K,this.crossTileIDs)&&(E=!0),k[K.bucketInstanceId]=!0)}return S.removeStaleBuckets(k)&&(E=!0),E}pruneUnusedLayers(o){const d={};o.forEach(A=>{d[A]=!0});for(const A in this.layerIndexes)d[A]||delete this.layerIndexes[A]}}const is=771;class Nr{constructor(o,d,A,T){this.blendFunction=o,this.blendColor=d,this.mask=A,this.blendEquation=T}}Nr.Replace=[1,0,1,0],Nr.disabled=new Nr(Nr.Replace,n.al.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,n.al.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,is,1,is],n.al.transparent,[!0,!0,!0,!0]),Nr.alphaBlendedNonPremultiplied=new Nr([770,is,770,is],n.al.transparent,[!0,!0,!0,!0]),Nr.multiply=new Nr([774,0,774,0],n.al.transparent,[!0,!0,!0,!0]);class or{constructor(o,d,A){this.func=o,this.mask=d,this.range=A}}or.ReadOnly=!1,or.ReadWrite=!0,or.disabled=new or(519,or.ReadOnly,[0,1]);const Al=7680;class Tr{constructor(o,d,A,T,S,E){this.test=o,this.ref=d,this.mask=A,this.fail=T,this.depthFail=S,this.pass=E}}Tr.disabled=new Tr({func:519,mask:0},0,0,Al,Al,Al);const Su=1029,au=2305;class wr{constructor(o,d,A){this.enable=o,this.mode=d,this.frontFace=A}}function yh(y,o){const d=n.bG(y,3);n.ad.mat4.fromQuat(y,o),n.bI(y,3,d)}function ru(y,o){const d=n.ad.quat.identity([]);return n.ad.quat.rotateZ(d,d,-o),n.ad.quat.rotateX(d,d,-y),d}function Ac(y,o){const d=[y[0],y[1],0],A=[o[0],o[1],0];if(n.ad.vec3.length(d)>=1e-15){const E=n.ad.vec3.normalize([],d);n.ad.vec3.scale(A,E,n.ad.vec3.dot(A,E)),o[0]=A[0],o[1]=A[1]}const T=n.ad.vec3.cross([],o,y);if(n.ad.vec3.len(T)<1e-15)return null;const S=Math.atan2(-T[1],T[0]);return ru(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),S)}wr.disabled=new wr(!1,Su,au),wr.backCCW=new wr(!0,Su,au),wr.backCW=new wr(!0,Su,2304),wr.frontCW=new wr(!0,1028,2304),wr.frontCCW=new wr(!0,1028,au);class Dd{constructor(o,d){this.position=o,this.orientation=d}get position(){return this._position}set position(o){if(o){const d=o instanceof n.ac?o:new n.ac(o[0],o[1],o[2]);this._renderWorldCopies&&(d.x=n.bF(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(o,d){if(this.orientation=null,!this.position)return;const A=this.position,T=this._elevation?this._elevation.getAtPointOrZero(n.ac.fromLngLat(o)):0,S=n.ac.fromLngLat(o,T),E=[S.x-A.x,S.y-A.y,S.z-A.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Ac(E,d)}setPitchBearing(o,d){this.orientation=ru(n.ak(o),n.ak(-d))}}class zs{constructor(o,d){this._transform=n.ad.mat4.identity([]),this.orientation=d,this.position=o}get mercatorPosition(){const o=this.position;return new n.ac(o[0],o[1],o[2])}get position(){const o=n.bG(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var d;o&&n.bI(this._transform,3,[(d=o)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||n.ad.quat.identity([]),o&&yh(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,d){this._orientation=ru(o,d),yh(this._transform,this._orientation)}forward(){const o=n.bG(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=n.bG(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=n.bG(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,d){const A=new Float64Array(16);return n.ad.mat4.invert(A,this.getWorldToCamera(o,d)),A}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,d,A){const T=this.position;n.ad.vec3.scale(T,T,-o);const S=new Float64Array(16);return n.ad.mat4.fromScaling(S,[A,A,A]),n.ad.mat4.translate(S,S,T),S[10]*=d,S}getWorldToCamera(o,d){const A=new Float64Array(16),T=new Float64Array(4),S=this.position;return n.ad.quat.conjugate(T,this._orientation),n.ad.vec3.scale(S,S,-o),n.ad.mat4.fromQuat(A,T),n.ad.mat4.translate(A,A,S),A[1]*=-1,A[5]*=-1,A[9]*=-1,A[13]*=-1,A[8]*=d,A[9]*=d,A[10]*=d,A[11]*=d,A}getCameraToClipPerspective(o,d,A,T){const S=new Float64Array(16);return n.ad.mat4.perspective(S,o,d,A,T),S}getCameraToClipOrthographic(o,d,A,T,S,E){const k=new Float64Array(16);return n.ad.mat4.ortho(k,o,d,A,T,S,E),k}getDistanceToElevation(o,d=!1){const A=o===0?0:n.bH(o,d?n.aT(this.position[1]):this.position[1]),T=this.forward();return(A-this.position[2])/T[2]}clone(){return new zs([...this.position],[...this.orientation])}}const wi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class vc{constructor(o=0,d=0,A=0,T=0){if(isNaN(o)||o<0||isNaN(d)||d<0||isNaN(A)||A<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=d,this.left=A,this.right=T}interpolate(o,d,A){return d.top!=null&&o.top!=null&&(this.top=n.ah(o.top,d.top,A)),d.bottom!=null&&o.bottom!=null&&(this.bottom=n.ah(o.bottom,d.bottom,A)),d.left!=null&&o.left!=null&&(this.left=n.ah(o.left,d.left,A)),d.right!=null&&o.right!=null&&(this.right=n.ah(o.right,d.right,A)),this}getCenter(o,d){const A=n.ay((this.left+o-this.right)/2,0,o),T=n.ay((this.top+d-this.bottom)/2,0,d);return new n.P(A,T)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new vc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Va=15;class Md{constructor(o,d,A,T,S,E,k){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=o||0,this._maxZoom=d||22,this._minPitch=A??0,this._maxPitch=T??60,this.setProjection(E),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new vc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new zs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const o=new Md(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o._allowWorldUnderZoom=this._allowWorldUnderZoom,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Va}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,d=!1){const A=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||A)&&this._updateCameraOnTerrain(),(o||A)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return n.aA(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const A=this.getProjection(),T=!n.bn(d,A);return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const d=o!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const d=-o*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=n.ad.mat2.create(),n.ad.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const d=n.ay(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=n.ak(o),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const d=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const A=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&A.exaggeration()&&this._centerAltitudeValidForExaggeration!==A.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*A.exaggeration(),this._centerAltitudeValidForExaggeration=A.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=A.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],A=this.horizonLineFromTop();let T=0,S=0;for(let E=0;E<d.length;E++){const k=new n.P(d[E][0]*this.width,A+d[E][1]*(this.height-A)),Z=o.pointCoordinate(k);if(!Z)continue;const K=1/Math.hypot(Z[0]-this._camera.position[0],Z[1]-this._camera.position[1]);T+=Z[3]*K,S+=K}return S===0?NaN:T/S}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),A=this.pixelsPerMeter/this.worldSize*d,T=this._mercatorZfromZoom(o),S=this._mercatorZfromZoom(this._maxZoom),E=Math.max(T-A,S);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let A;A=o.z<this._camera.position[2]?[d.x,d.y,d.z]:[o.x,o.y,o.z];const T=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,A));return n.ay(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let d=!1;if(o.orientation&&!n.ad.quat.exactEquals(o.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(o.orientation)),o.position){const A=[o.position.x,o.position.y,o.position.z];n.ad.vec3.exactEquals(A,this._camera.position)||(this._setCameraPosition(A),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,d=new Dd;return d.position=new n.ac(o[0],o[1],o[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(o){if(!n.ad.quat.length(o))return!1;n.ad.quat.normalize(o,o);const d=n.ad.vec3.transformQuat([],[0,0,-1],o),A=n.ad.vec3.transformQuat([],[0,-1,0],o);if(A[2]<0)return!1;const T=Ac(d,A);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(o){const d=this.zoomScale(this.minZoom)*this.tileSize,A=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;o[2]=n.ay(o[2],T/A,T/d),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,d,A){this._unmodified=!1,this._edgeInsets.interpolate(o,d,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const d=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(o){const d=[new n.bQ(0,o)];if(this.renderWorldCopies){const A=this.pointCoordinate(new n.P(0,0)),T=this.pointCoordinate(new n.P(this.width,0)),S=this.pointCoordinate(new n.P(this.width,this.height)),E=this.pointCoordinate(new n.P(0,this.height)),k=Math.floor(Math.min(A.x,T.x,S.x,E.x)),Z=Math.floor(Math.max(A.x,T.x,S.x,E.x)),K=1;for(let Y=k-K;Y<=Z+K;Y++)Y!==0&&d.push(new n.bQ(Y,o))}return d}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,d,A){let T=[];const S=A!==void 0,E=!S;if(E&&this.zoom<d||S&&A[0]===0&&A[1]===0)return T;const k=new Set,Z=(Y,re,ne,pe,Pe)=>{const Ce=n.c5(re,Y,ne,pe,Pe);k.has(Ce)||(T.push(new n.aH(Y,re,ne,pe,Pe)),k.add(Ce))};for(let Y=0;Y<o.length;Y++){const re=o[Y];if(E&&re.canonical.z!==d)continue;const ne=re.canonical,pe=re.overscaledZ,Pe=re.wrap,Ce=1<<ne.z,Ve=ne.x+1<Ce,Le=ne.x>0,$e=ne.y+1<Ce,nt=ne.y>0,at=re.wrap-(Le?0:1),pt=re.wrap+(Ve?0:1),ot=Le?ne.x-1:Ce-1,ut=Ve?ne.x+1:0;if(S)A[0]<0?(Z(pe,pt,ne.z,ut,ne.y),A[1]<0&&$e&&(Z(pe,Pe,ne.z,ne.x,ne.y+1),Z(pe,pt,ne.z,ut,ne.y+1)),A[1]>0&&nt&&(Z(pe,Pe,ne.z,ne.x,ne.y-1),Z(pe,pt,ne.z,ut,ne.y-1))):A[0]>0?(Z(pe,at,ne.z,ot,ne.y),A[1]<0&&$e&&(Z(pe,Pe,ne.z,ne.x,ne.y+1),Z(pe,at,ne.z,ot,ne.y+1)),A[1]>0&&nt&&(Z(pe,Pe,ne.z,ne.x,ne.y-1),Z(pe,at,ne.z,ot,ne.y-1))):A[1]<0&&$e?Z(pe,Pe,ne.z,ne.x,ne.y+1):nt&&Z(pe,Pe,ne.z,ne.x,ne.y-1);else{const ct=re.visibleQuadrants;1&ct&&(Z(pe,at,ne.z,ot,ne.y),nt&&(Z(pe,Pe,ne.z,ne.x,ne.y-1),Z(pe,at,ne.z,ot,ne.y-1))),2&ct&&(Z(pe,pt,ne.z,ut,ne.y),nt&&(Z(pe,Pe,ne.z,ne.x,ne.y-1),Z(pe,pt,ne.z,ut,ne.y-1))),4&ct&&(Z(pe,at,ne.z,ot,ne.y),$e&&(Z(pe,Pe,ne.z,ne.x,ne.y+1),Z(pe,at,ne.z,ot,ne.y+1))),8&ct&&(Z(pe,pt,ne.z,ut,ne.y),$e&&(Z(pe,Pe,ne.z,ne.x,ne.y+1),Z(pe,pt,ne.z,ut,ne.y+1)))}}const K=[];for(const Y of T)T.some(re=>Y.isChildOf(re))||K.push(Y);if(T=K.filter(Y=>!o.some(re=>!!(Y.overscaledZ<d&&re.isChildOf(Y))||Y.equals(re)||Y.isChildOf(re))),E){const Y=1<<d,re=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ne=[Y*re.x,Y*re.y],pe=4,Pe=pe*pe;T=T.filter(Ce=>{const Ve=Ce.canonical.x+.5-ne[0],Le=Ce.canonical.y+.5-ne[1];return Ve*Ve+Le*Le<Pe})}return T}coveringTiles(o){let d=this.coveringZoomLevel(o);const A=d,T=this.elevation&&this.elevation.exaggeration(),S=T&&!o.isTerrainDEM,E=this.projection.name==="mercator";if(o.minzoom!==void 0&&d<o.minzoom)return[];o.maxzoom!==void 0&&d>o.maxzoom&&(d=o.maxzoom);const k=this.locationCoordinate(this.center),Z=this.center.lat,K=1<<d,Y=[K*k.x,K*k.y,0],re=this.projection.name==="globe",ne=!re,pe=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,ne),Pe=re?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Ce=K*n.bH(1,this.center.lat),Ve=this._camera.position[2]/n.bH(1,this.center.lat),Le=[K*Pe.x,K*Pe.y,Ve*(ne?1:Ce)],$e=re||T,nt=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),at=this.isLODDisabled(!0)?d:0;let pt;if(this._elevation&&o.isTerrainDEM)pt=1e4*this._elevation.exaggeration();else if(this._elevation){const Vt=this._elevation.getMinMaxForVisibleTiles();pt=Vt?Vt.max:this._centerAltitude}else pt=this._centerAltitude;const ot=o.isTerrainDEM?-pt:this._elevation?this._elevation.getMinElevationBelowMSL():0,ut=this.projection.isReprojectedInTileSpace?n.bS(this):1,ct=Vt=>{const ta=new n.ac(Vt.x+25e-6,Vt.y,Vt.z),da=new n.ac(Vt.x,Vt.y+25e-6,Vt.z),Yt=Vt.toLngLat(),pa=ta.toLngLat(),Ia=da.toLngLat(),La=this.locationCoordinate(Yt),Oa=this.locationCoordinate(pa),lr=this.locationCoordinate(Ia),kr=Math.hypot(Oa.x-La.x,Oa.y-La.y),yr=Math.hypot(lr.x-La.x,lr.y-La.y);return Math.sqrt(kr*yr)*ut/25e-6},At=Vt=>{const oa=pt,ta=ot;return{aabb:n.bV(this,K,0,0,0,Vt,ta,oa,this.projection),zoom:0,x:0,y:0,minZ:ta,maxZ:oa,wrap:Vt,fullyVisible:!1}},Tt=[];let Qt=[];const Ut=d,ra=o.reparseOverscaled?A:d,ca=(Ve-this._centerAltitude)*Ce,Sa=Vt=>{if(!this._elevation||!Vt.tileID||!E)return;const oa=this._elevation.getMinMaxForTile(Vt.tileID),ta=Vt.aabb;oa?(ta.min[2]=oa.min,ta.max[2]=oa.max,ta.center[2]=(ta.min[2]+ta.max[2])/2):(Vt.shouldSplit=sa(Vt),Vt.shouldSplit||(ta.min[2]=ta.max[2]=ta.center[2]=this._centerAltitude))},Ft=(Vt,oa)=>{if(.707*oa<Vt)return 1;const ta=oa/Vt;return ta/(1.4144271570014144+(Math.pow(1.1,ta-1.4144271570014144+1)-1)/(1.1-1)-1)},sa=Vt=>{if(Vt.zoom<at)return!0;if(Vt.zoom===Ut)return!1;if(Vt.shouldSplit!=null)return Vt.shouldSplit;const oa=Vt.aabb.distanceX(Le),ta=Vt.aabb.distanceY(Le);let da=ca,Yt=1;if(re){da=Vt.aabb.distanceZ(Le);const yr=Math.pow(2,Vt.zoom),Dr=n.aT((Vt.y+1)/yr),Pr=n.aT(Vt.y/yr),Or=Math.min(Math.max(Z,Dr),Pr),Ur=n.ca(Or)/n.ca(Z);if(Yt=Or===Z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ur/this._mercatorScaleRatio),this.zoom<=n.c6&&Vt.zoom===Ut-1&&Ur>=.9)return!0}else if(S&&(da=Vt.aabb.distanceZ(Le)*Ce),this.projection.isReprojectedInTileSpace&&A<=5){const yr=Math.pow(2,Vt.zoom),Dr=ct(new n.ac((Vt.x+.5)/yr,(Vt.y+.5)/yr));Yt=Dr>.85?1:Dr}if(!E){const yr=Math.sqrt(oa*oa+ta*ta+da*da);let Dr=(1<<Ut-Vt.zoom)*nt*Yt;return Dr*=Ft(Math.max(da,ca),yr),yr<Dr}let pa=Number.MAX_VALUE,Ia=0;const La=Vt.aabb.getCorners(),Oa=[];for(const yr of La){n.ad.vec3.sub(Oa,yr,Le),re||(S?Oa[2]*=Ce:Oa[2]=ca);const Dr=n.ad.vec3.dot(Oa,this._camera.forward());Dr<pa&&(pa=Dr,Ia=Math.abs(Oa[2]))}let lr=(1<<Ut-Vt.zoom)*nt*Yt;if(lr*=Ft(Math.max(Ia,ca),pa),pa<lr)return!0;const kr=Vt.aabb.closestPoint(Y);return kr[0]===Y[0]&&kr[1]===Y[1]};if(this.renderWorldCopies)for(let Vt=1;Vt<=3;Vt++)Tt.push(At(-Vt)),Tt.push(At(Vt));for(Tt.push(At(0));Tt.length>0;){const Vt=Tt.pop(),oa=Vt.x,ta=Vt.y;let da=Vt.fullyVisible;const Yt=()=>this.projection.name==="globe"&&(Vt.y===0||Vt.y===(1<<Vt.zoom)-1);if(!da){let pa=$e?Vt.aabb.intersects(pe):Vt.aabb.intersectsFlat(pe);if(pa===0&&Yt()){const Ia=new n.bT(Vt.zoom,oa,ta);pa=n.bU(this,K,Ia,!0).intersects(pe)}if(pa===0)continue;da=pa===2}if(Vt.zoom!==Ut&&sa(Vt))for(let pa=0;pa<4;pa++){const Ia=(oa<<1)+pa%2,La=(ta<<1)+(pa>>1),Oa={aabb:E?Vt.aabb.quadrant(pa):n.bV(this,K,Vt.zoom+1,Ia,La,Vt.wrap,Vt.minZ,Vt.maxZ,this.projection),zoom:Vt.zoom+1,x:Ia,y:La,wrap:Vt.wrap,fullyVisible:da,tileID:void 0,shouldSplit:void 0,minZ:Vt.minZ,maxZ:Vt.maxZ};S&&!re&&(Oa.tileID=new n.aH(Vt.zoom+1===Ut?ra:Vt.zoom+1,Vt.wrap,Vt.zoom+1,Ia,La),Sa(Oa)),Tt.push(Oa)}else{const pa=Vt.zoom===Ut?ra:Vt.zoom;if(o.minzoom&&o.minzoom>pa)continue;let Ia=0;if(!da){let kr=$e?Vt.aabb.intersectsPrecise(pe):Vt.aabb.intersectsPreciseFlat(pe);if(kr===0&&Yt()){const yr=new n.bT(Vt.zoom,oa,ta);kr=n.bU(this,K,yr,!0).intersectsPrecise(pe)}if(kr===0)continue;if(o.calculateQuadrantVisibility)if(pe.containsPoint(Vt.aabb.center))Ia=15;else for(let yr=0;yr<4;yr++)Vt.aabb.quadrant(yr).intersects(pe)!==0&&(Ia|=1<<yr)}const La=Y[0]-(.5+oa+(Vt.wrap<<Vt.zoom))*(1<<d-Vt.zoom),Oa=Y[1]-.5-ta,lr=Vt.tileID?Vt.tileID:new n.aH(pa,Vt.wrap,Vt.zoom,oa,ta);o.calculateQuadrantVisibility&&(lr.visibleQuadrants=Ia),Qt.push({tileID:lr,distanceSq:La*La+Oa*Oa})}}if(this.fogCullDistSq){const Vt=this.fogCullDistSq,oa=this.horizonLineFromTop();Qt=Qt.filter(ta=>{const da=[0,0,0,1],Yt=[n.ai,n.ai,0,1],pa=this.calculateFogTileMatrix(ta.tileID.toUnwrapped());n.ad.vec4.transformMat4(da,da,pa),n.ad.vec4.transformMat4(Yt,Yt,pa);const Ia=n.ad.vec4.min([],da,Yt),La=n.ad.vec4.max([],da,Yt),Oa=n.bW(Ia,La);if(Oa===0)return!0;let lr=!1;const kr=this._elevation;if(kr&&Oa>Vt&&oa!==0){const yr=this.calculateProjMatrix(ta.tileID.toUnwrapped());let Dr;o.isTerrainDEM||(Dr=kr.getMinMaxForTile(ta.tileID)),Dr||(Dr={min:ot,max:pt});const Pr=n.c7(this.rotation),Or=[Pr[0]*n.ai,Pr[1]*n.ai,Dr.max];n.ad.vec3.transformMat4(Or,Or,yr),lr=(1-Or[1])*this.height*.5<oa}return Oa<Vt||lr})}return Qt.sort((Vt,oa)=>Vt.distanceSq-oa.distanceSq).map(Vt=>Vt.tileID)}resize(o,d){this.width=o,this.height=d,this.pixelsToGLUnits=[2/o,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const d=n.ay(o.lat,-n.bX,n.bX),A=this.projection.project(o.lng,d);return new n.P(A.x*this.worldSize,A.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,d){let A,T;const S=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;A=(d.x-S.x)/k,T=(d.y-S.y)/k}else{const k=this.pointCoordinate(d),Z=this.pointCoordinate(S);A=k.x-Z.x,T=k.y-Z.y}const E=this.locationCoordinate(o);this.setLocation(new n.ac(E.x-A,E.y-T))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o,d){return this.projection.locationPoint(this,o,d)}locationPoint3D(o,d){return this.projection.locationPoint(this,o,d,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o,d){return this.coordinateLocation(this.pointCoordinate3D(o,d))}locationCoordinate(o,d){const A=d?n.bH(d,o.lat):void 0,T=this.projection.project(o.lng,o.lat);return new n.ac(T.x,T.y,A)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,d){const A=d??this._centerAltitude,T=[o.x,o.y,0,1],S=[o.x,o.y,1,1];n.ad.vec4.transformMat4(T,T,this.pixelMatrixInverse),n.ad.vec4.transformMat4(S,S,this.pixelMatrixInverse);const E=S[3];n.ad.vec4.scale(T,T,1/T[3]),n.ad.vec4.scale(S,S,1/E);const k=T[2],Z=S[2];return{p0:T,p1:S,t:k===Z?0:(A-k)/(Z-k)}}screenPointToMercatorRay(o){const d=[o.x,o.y,0,1],A=[o.x,o.y,1,1];return n.ad.vec4.transformMat4(d,d,this.pixelMatrixInverse),n.ad.vec4.transformMat4(A,A,this.pixelMatrixInverse),n.ad.vec4.scale(d,d,1/d[3]),n.ad.vec4.scale(A,A,1/A[3]),d[2]=n.bH(d[2],this._center.lat)*this.worldSize,A[2]=n.bH(A[2],this._center.lat)*this.worldSize,n.ad.vec4.scale(d,d,1/this.worldSize),n.ad.vec4.scale(A,A,1/this.worldSize),new n.as([d[0],d[1],d[2]],n.ad.vec3.normalize([],n.ad.vec3.sub([],A,d)))}rayIntersectionCoordinate(o){const{p0:d,p1:A,t:T}=o,S=n.bH(d[2],this._center.lat),E=n.bH(A[2],this._center.lat);return new n.ac(n.ah(d[0],A[0],T)/this.worldSize,n.ah(d[1],A[1],T)/this.worldSize,n.ah(S,E,T))}pointCoordinate(o,d=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,d)}pointCoordinate3D(o,d){if(!this.elevation)return this.pointCoordinate(o,d);let A=this.projection.pointCoordinate3D(this,o.x,o.y);if(A)return new n.ac(A[0],A[1],A[2]);let T=0,S=this.horizonLineFromTop();if(o.y>S)return this.pointCoordinate(o,d);const E=.02*S,k=o.clone();for(let Z=0;Z<10&&S-T>E;Z++){k.y=n.ah(T,S,.66);const K=this.projection.pointCoordinate3D(this,k.x,k.y);K?(S=k.y,A=K):T=k.y}return A?new n.ac(A[0],A[1],A[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(o);const d=this.pointCoordinate(o);return d.y>=0&&d.y<=1}_coordinatePoint(o,d){const A=d&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,T=[o.x*this.worldSize,o.y*this.worldSize,A+o.toAltitude(),1];return n.ad.vec4.transformMat4(T,T,this.pixelMatrix),T[3]>0?new n.P(T[0]/T[3],T[1]/T[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:d}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,S=this.pointLocation3D(new n.P(d,o)),E=this.pointLocation3D(new n.P(T,o)),k=this.pointLocation3D(new n.P(T,A)),Z=this.pointLocation3D(new n.P(d,A));let K=Math.min(S.lng,E.lng,k.lng,Z.lng),Y=Math.max(S.lng,E.lng,k.lng,Z.lng),re=Math.min(S.lat,E.lat,k.lat,Z.lat),ne=Math.max(S.lat,E.lat,k.lat,Z.lat);const pe=Math.pow(2,-this.zoom)/16*270,Pe=this.projection.name==="globe"?1:4,Ce=(Ve,Le,$e,nt,at)=>{const pt=(Ve+$e)/2,ot=(Le+nt)/2,ut=new n.P(pt,ot),{lng:ct,lat:At}=this.pointLocation3D(ut),Tt=Math.max(0,K-ct,re-At,ct-Y,At-ne);K=Math.min(K,ct),Y=Math.max(Y,ct),re=Math.min(re,At),ne=Math.max(ne,At),(at<Pe||Tt>pe)&&(Ce(Ve,Le,pt,ot,at+1),Ce(pt,ot,$e,nt,at+1))};if(Ce(d,o,T,o,1),Ce(T,o,T,A,1),Ce(T,A,d,A,1),Ce(d,A,d,o,1),this.projection.name==="globe"){const[Ve,Le]=n.bZ(this);Ve?(ne=90,Y=180,K=-180):Le&&(re=-90,Y=180,K=-180)}return new n.aB(new n.bO(K,re),new n.bO(Y,ne))}_getBoundsRectangular(o,d){const{top:A,left:T}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,k=new n.P(T,A),Z=new n.P(E,A),K=new n.P(E,S),Y=new n.P(T,S);let re=this.pointCoordinate(k,o),ne=this.pointCoordinate(Z,o);const pe=this.pointCoordinate(K,d),Pe=this.pointCoordinate(Y,d),Ce=(Ve,Le)=>(Le.y-Ve.y)/(Le.x-Ve.x);return re.y>1&&ne.y>=0?re=new n.ac((1-Pe.y)/Ce(Pe,re)+Pe.x,1):re.y<0&&ne.y<=1&&(re=new n.ac(-Pe.y/Ce(Pe,re)+Pe.x,0)),ne.y>1&&re.y>=0?ne=new n.ac((1-pe.y)/Ce(pe,ne)+pe.x,1):ne.y<0&&re.y<=1&&(ne=new n.ac(-pe.y/Ce(pe,ne)+pe.x,0)),new n.aB().extend(this.coordinateLocation(re)).extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(Pe)).extend(this.coordinateLocation(pe))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=o.visibleDemTiles.reduce((A,T)=>{if(T.dem){const S=T.dem.tree;A.min=Math.min(A.min,S.minimums[0]),A.max=Math.max(A.max,S.maximums[0])}return A},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*o.exaggeration(),d.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,A=this.height/2-d*(1-this._horizonShift);return o?Math.max(0,A):A}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.av(this.minLng)*this.tileSize,this.worldMaxX=n.av(this.maxLng)*this.tileSize,this.worldMinY=n.aC(this.maxLat)*this.tileSize,this.worldMaxY=n.aC(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,d){return this.projection.createTileMatrix(this,d,o)}calculateDistanceTileData(o){const d=o.key,A=this._distanceTileDataCache;if(A[d])return A[d];const T=o.canonical,S=1/this.height,E=this.cameraWorldSize,k=E/this.zoomScale(T.z),Z=(T.x+Math.pow(2,T.z)*o.wrap)*k,K=T.y*k,Y=this.point;Y.x*=E/this.worldSize,Y.y*=E/this.worldSize;const re=this.angle,ne=Math.sin(-re),pe=-Math.cos(-re);return A[d]={bearing:[ne,pe],center:[(Y.x-Z)*S,(Y.y-K)*S],scale:k/n.ai*S},A[d]}calculateFogTileMatrix(o){const d=o.key,A=this._fogTileMatrixCache;if(A[d])return A[d];const T=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return n.ad.mat4.multiply(T,this.worldToFogMatrix,T),A[d]=new Float32Array(T),A[d]}calculateProjMatrix(o,d=!1,A=!1){const T=o.key;let S;if(S=A?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,S[T])return S[T];const E=this.calculatePosMatrix(o,this.worldSize);let k;return k=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:A?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,n.ad.mat4.multiply(E,k,E),S[T]=new Float32Array(E),S[T]}calculatePixelsToTileUnitsMatrix(o){const d=o.tileID.key,A=this._pixelsToTileUnitsCache;if(A[d])return A[d];const T=n.b_(o,this);return A[d]=T,A[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,d=n.ad.mat4.fromScaling([],[o,o,o]);return n.ad.mat4.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const d=n.bH(1,this._center.lat)*this.worldSize,A=this._computeCameraPosition(d),T=this._camera.forward(),S=n.bH(1,this._center.lat);A[2]/=S,T[2]/=S,n.ad.vec3.normalize(T,T);const E=o.raycast(A,T,o.exaggeration());if(E){const k=n.ad.vec3.scaleAndAdd([],A,T,E),Z=new n.ac(k[0],k[1],n.bH(k[2],n.aT(k[1]))),K=(Z.z+n.ad.vec3.length([Z.x-A[0],Z.y-A[1],Z.z-A[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=Z.toAltitude(),this._center=this.coordinateLocation(Z),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const d=this._elevation,A=n.bH(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(A),S=d.getAtPointOrZero(new n.ac(...T)),E=this.pixelsPerMeter/this.worldSize*S,k=this._minimumHeightOverTerrain(),Z=T[2]-E;if(Z<=k)if(Z<0||o){const K=this.locationCoordinate(this._center,this._centerAltitude),Y=[T[0],T[1],K.z-T[2]],re=n.ad.vec3.length(Y);Y[2]-=(k-Z)/this._pixelsPerMercatorPixel;const ne=n.ad.vec3.length(Y);if(ne===0)return;n.ad.vec3.scale(Y,Y,re/ne*this._pixelsPerMercatorPixel),this._camera.position=[T[0],T[1],K.z*this._pixelsPerMercatorPixel-Y[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const ne=this.center;return ne.lat=n.ay(ne.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(ne.lng=n.ay(ne.lng,this.minLng,this.maxLng)),this.center=ne,void(this._constraining=!1)}const d=this._unmodified,{x:A,y:T}=this.point;let S=0,E=A,k=T;const Z=this.width/2,K=this.height/2,Y=this.worldMinY*this.scale,re=this.worldMaxY*this.scale;if(T-K<Y&&(k=Y+K),T+K>re&&(k=re-K),re-Y<this.height&&(S=Math.max(S,this.height/(re-Y)),k=(re+Y)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ne=this.worldMinX*this.scale,pe=this.worldMaxX*this.scale,Pe=this.worldSize/2-(ne+pe)/2;E=(A+Pe+this.worldSize)%this.worldSize-Pe,E-Z<ne&&(E=ne+Z),E+Z>pe&&(E=pe-Z),pe-ne<this.width&&(S=Math.max(S,this.width/(pe-ne)),E=(pe+ne)/2)}E===A&&k===T||this._allowWorldUnderZoom||(this.center=this.unproject(new n.P(E,k))),S&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,d=this.projection.name==="globe",A=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const T=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?A:1,E=this._camera.getWorldToCamera(this.worldSize,S);let k;const Z=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(Z[8]=2*-o.x/this.width,Z[9]=2*o.y/this.height,this.isOrthographic){let At=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Tt=At*this.aspect,Qt=-Tt,Ut=-At;Tt-=o.x,Qt-=o.x,At+=o.y,Ut+=o.y,k=this._camera.getCameraToClipOrthographic(Qt,Tt,Ut,At,this._nearZ,this._farZ),((ra,ca,Sa,Ft)=>{for(let sa=0;sa<16;sa++)ra[sa]=n.ah(ca[sa],Sa[sa],Ft)})(k,k,Z,n.c9(this.pitch>=Va?1:this.pitch/Va))}else k=Z;const K=n.ad.mat4.mul([],Z,E);let Y=n.ad.mat4.mul([],k,E);if(this.projection.isReprojectedInTileSpace){const At=this.locationCoordinate(this.center),Tt=n.ad.mat4.identity([]);n.ad.mat4.translate(Tt,Tt,[At.x*this.worldSize,At.y*this.worldSize,0]),n.ad.mat4.multiply(Tt,Tt,n.c0(this)),n.ad.mat4.translate(Tt,Tt,[-At.x*this.worldSize,-At.y*this.worldSize,0]),n.ad.mat4.multiply(Y,Y,Tt),n.ad.mat4.multiply(K,K,Tt),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ad.mat4.scale([],Y,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=Y,this.invProjMatrix=n.ad.mat4.invert(new Float64Array(16),this.projMatrix),d){const At=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);At[8]=2*-o.x/this.width,At[9]=2*o.y/this.height,this.expandedFarZProjMatrix=n.ad.mat4.mul([],At,E)}else this.expandedFarZProjMatrix=this.projMatrix;const re=n.ad.mat4.invert([],k);this.frustumCorners=n.c2.fromInvProjectionMatrix(re,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const ne=new Float32Array(16);n.ad.mat4.identity(ne),n.ad.mat4.scale(ne,ne,[1,-1,1]),n.ad.mat4.rotateX(ne,ne,this._pitch),n.ad.mat4.rotateZ(ne,ne,this.angle);const pe=n.ad.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ad.mat4.clone(pe);const Pe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;pe[8]=2*-o.x/this.width,pe[9]=2*(o.y+Pe)/this.height,this.skyboxMatrix=n.ad.mat4.multiply(ne,pe,ne);const Ce=this.point,Ve=Ce.x,Le=Ce.y,$e=this.width%2/2,nt=this.height%2/2,at=Math.cos(this.angle),pt=Math.sin(this.angle),ot=Ve-Math.round(Ve)+at*$e+pt*nt,ut=Le-Math.round(Le)+at*nt+pt*$e,ct=new Float64Array(Y);if(n.ad.mat4.translate(ct,ct,[ot>.5?ot-1:ot,ut>.5?ut-1:ut,0]),this.alignedProjMatrix=ct,Y=n.ad.mat4.create(),n.ad.mat4.scale(Y,Y,[this.width/2,-this.height/2,1]),n.ad.mat4.translate(Y,Y,[1,-1,0]),this.labelPlaneMatrix=Y,Y=n.ad.mat4.create(),n.ad.mat4.scale(Y,Y,[1,-1,1]),n.ad.mat4.translate(Y,Y,[-1,-1,0]),n.ad.mat4.scale(Y,Y,[2/this.width,2/this.height,1]),this.glCoordMatrix=Y,this.pixelMatrix=n.ad.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,K),this._calcFogMatrices(),this._distanceTileDataCache={},Y=n.ad.mat4.invert(new Float64Array(16),this.pixelMatrix),!Y)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Y,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const At=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ad.vec3.transformMat4(At,At,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Y;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,A=this._camera.position,T=1/this.height/this._pixelsPerMercatorPixel,S=[o,o,d];n.ad.vec3.scale(S,S,T),n.ad.vec3.scale(A,A,-1),n.ad.vec3.multiply(A,A,S);const E=n.ad.mat4.create();n.ad.mat4.translate(E,E,A),n.ad.mat4.scale(E,E,S),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,d,T)}_computeCameraPosition(o){const d=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,A=this._camera.forward(),T=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-o/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-A[0]*S,T.y/this.worldSize-A[1]*S,o/this.worldSize*this._centerAltitude-A[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),A=this._camera.position[2],T=o[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),T>0&&(S=Math.min((d-A)/T,1)),this._camera.position=n.ad.vec3.scaleAndAdd([],this._camera.position,o,S),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,d=this._camera.forward(),{pitch:A,bearing:T}=this._camera.getPitchBearing(),S=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ak(this._maxPitch)),k=Math.max((o[2]-S)/Math.cos(A),E),Z=this._zoomFromMercatorZ(k);n.ad.vec3.scaleAndAdd(o,o,d,k),this._pitch=n.ay(A,n.ak(this.minPitch),n.ak(this.maxPitch)),this.angle=n.bF(T,-Math.PI,Math.PI),this._setZoom(n.ay(Z,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.ac(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let d=0,A=n.bY,T=0,S=1/0;for(;A-d>1e-6&&A>d;){const E=d+.5*(A-d),k=this.tileSize*Math.pow(2,E),Z=this.getCameraToCenterDistance(this.projection,E,k),K=this.scaleZoom(Z/(o*this.tileSize)),Y=Math.abs(E-K);Y<S&&(S=Y,T=E),E<K?d=E:A=E}return T}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,d){const A=Math.min(o.x,d.x),T=Math.max(o.x,d.x),S=Math.min(o.y,d.y),E=Math.max(o.y,d.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new n.P(A,S),new n.P(T,E),new n.P(A,E),new n.P(T,S)],Z=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const Y of k){const re=this.pointRayIntersection(Y);if(re.t<0)return!0;const ne=this.rayIntersectionCoordinate(re);if(ne.x<Z||ne.y<0||ne.x>K||ne.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(o,d){const A=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,o)),T=this._zoomFromMercatorZ(A)+d;return A-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([d,A,T],S){const E=[d,A,T,1];n.ad.vec4.transformMat4(E,E,S);const k=E[3]=Math.max(E[3],1e-6);return E[0]/=k,E[1]/=k,E[2]/=k,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,o))}}getCameraToCenterDistance(o,d=this.zoom,A=this.worldSize){const T=n.b$(o,d,this.width,this.height,1024),S=o.pixelSpaceConversion(this.center.lat,A,T);let E=.5/Math.tan(.5*this._fov)*this.height*S;return this.isOrthographic&&(E=n.ah(1,E,n.c9(this.pitch>=Va?1:this.pitch/Va))),E}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ad.mat4.multiply(o,o,this.globeMatrix),o}getFrustum(o){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const Ys=(y,o)=>{if(o>0&&y.terrain&&n.w("Cutoff is currently disabled on terrain"),o<=0||y.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=y.transform,A=Math.max(Math.abs(d._zoom-(y.minCutoffZoom-1)),1),T=d.isLODDisabled(!1)?n.ae(60,45,d.pitch):n.ae(30,15,d.pitch),S=d._farZ-d._nearZ,E=o*d.height,k=((1-(Z=T))*d.cameraToCenterDistance+Z*(d._farZ+E))*A;var Z;return{shouldRenderCutoff:T<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(k-d._nearZ)/S,(k-E-d._nearZ)/S]}}},yo={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Sf{constructor(o,d){this.aabb=o,this.lastCascade=d}}class jh{add(o,d){const A=this.receivers[o.key];A!==void 0?(A.aabb.min[0]=Math.min(A.aabb.min[0],d.min[0]),A.aabb.min[1]=Math.min(A.aabb.min[1],d.min[1]),A.aabb.min[2]=Math.min(A.aabb.min[2],d.min[2]),A.aabb.max[0]=Math.max(A.aabb.max[0],d.max[0]),A.aabb.max[1]=Math.max(A.aabb.max[1],d.max[1]),A.aabb.max[2]=Math.max(A.aabb.max[2],d.max[2])):this.receivers[o.key]=new Sf(d,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,d,A){const T=n.ce.fromPoints(o.points);let S=0;for(const E in this.receivers){const k=this.receivers[E];if(!k||!T.intersectsAabb(k.aabb))continue;k.aabb.min=T.closestPoint(k.aabb.min),k.aabb.max=T.closestPoint(k.aabb.max);const Z=k.aabb.getCorners();for(let K=0;K<A.length;K++){let Y=!0;for(const re of Z){const ne=[re[0]*d,re[1]*d,re[2]];if(n.ad.vec3.transformMat4(ne,ne,A[K].matrix),ne[0]<-1||ne[0]>1||ne[1]<-1||ne[1]>1){Y=!1;break}}if(k.lastCascade=K,S=Math.max(S,K),Y)break}}return S+1}}class Ao{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new jh,this._depthMode=new or(o.context.gl.LEQUAL,or.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(yo,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(yo,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(yo,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,d){const A=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const T=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||T<=0||(this._shadowLayerCount=A.style.order.reduce((Pe,Ce)=>{const Ve=A.style._mergedLayers[Ce];return Pe+(Ve.hasShadowPass()&&!Ve.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const S=A.context,E=yo.shadowMapResolution,k=yo.shadowMapResolution;if(this._cascades.length===0||yo.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Pe=0;Pe<yo.cascadeCount;++Pe){const Ce=A._shadowMapDebug,Ve=S.gl,Le=S.createFramebuffer(E,k,Ce,"texture"),$e=new n.T(S,{width:E,height:k,data:null},Ve.DEPTH_COMPONENT16);if(Le.depthAttachment.set($e.texture),Ce){const nt=new n.T(S,{width:E,height:k,data:null},Ve.RGBA8);Le.colorAttachment.set(nt.texture)}this._cascades.push({framebuffer:Le,texture:$e,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=zl(d);let Z=0;if(o.elevation){const Pe=o.elevation,Ce=[1e4,-1e4];Pe.visibleDemTiles.filter(Ve=>Ve.dem).forEach(Ve=>{const Le=Ve.dem.tree;Ce[0]=Math.min(Ce[0],Le.minimums[0]),Ce[1]=Math.max(Ce[1],Le.maximums[0])}),Ce[0]!==1e4&&(Z=(Ce[1]-Ce[0])*Pe.exaggeration())}const K=1.5*o.cameraToCenterDistance,Y=3*K,re=new Float64Array(16);for(let Pe=0;Pe<this._cascades.length;++Pe){const Ce=this._cascades[Pe];let Ve=o.height/50,Le=1;yo.cascadeCount===1?Le=Y:Pe===0?Le=K:(Ve=K,Le=Y);const[$e,nt]=nu(o,this.shadowDirection,Ve,Le,yo.shadowMapResolution,Z);Ce.scale=o.scale,Ce.matrix=$e,Ce.boundingSphereRadius=nt,n.ad.mat4.invert(re,Ce.matrix),Ce.frustum=n.bR.fromInvProjectionMatrix(re,1,0,!0),Ce.far=Le}const ne=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ne].far,this._cascades[ne].far],this._uniformValues.u_shadow_intensity=T,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/yo.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=yo.shadowMapResolution,this._uniformValues.u_shadowmap_0=wi.ShadowMap0,this._uniformValues.u_shadowmap_1=wi.ShadowMap0+1,this._groundShadowTiles=A.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const pe=A.transform.elevation;for(const Pe of this._groundShadowTiles){let Ce={min:0,max:0};if(pe){const Ve=pe.getMinMaxForTile(Pe);Ve&&(Ce=Ve)}this.addShadowReceiver(Pe.toUnwrapped(),Ce.min,Ce.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,d){if(!this.enabled)return;const A=this.painter,T=A.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(A.transform.getFrustum(0),A.transform.worldSize,this._cascades),T.viewport.set([0,0,yo.shadowMapResolution,yo.shadowMapResolution]);for(let S=0;S<this._numCascadesToRender;++S){A.currentShadowCascade=S,T.bindFramebuffer.set(this._cascades[S].framebuffer.framebuffer),T.clear({color:n.al.white,depth:1});for(const E of o.order){const k=o._mergedLayers[E];if(!k.hasShadowPass()||k.isHidden(A.transform.zoom))continue;const Z=o.getLayerSourceCache(k),K=Z?d[Z.id]:void 0;(k.type==="model"||K&&K.length)&&A.renderLayer(A,Z,k,K)}}A.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,d=o.style,A=o.context,T=d.directionalLight,S=d.ambientLight;if(!T||!S)return;const E=[],k=Ys(o,o.longestCutoffRange);k.shouldRenderCutoff&&E.push("RENDER_CUTOFF"),E.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&E.push("NORMAL_OFFSET");const Z=Bc(d,T,S),K=new or(A.gl.LEQUAL,or.ReadOnly,o.depthRangeFor3D);for(const Y of this._groundShadowTiles){const re=Y.toUnwrapped(),ne=o.isTileAffectedByFog(Y),pe=o.getOrCreateProgram("groundShadow",{defines:E,overrideFog:ne});this.setupShadows(re,pe),o.uploadCommonUniforms(A,pe,re,null,k);const Pe={u_matrix:o.transform.calculateProjMatrix(re),u_ground_shadow_factor:Z};pe.draw(o,A.gl.TRIANGLES,K,Tr.disabled,Nr.multiply,wr.disabled,Pe,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,null,o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Nr.unblended:Nr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const d=this.painter.transform,A=d.calculatePosMatrix(o,d.worldSize);return n.ad.mat4.multiply(A,this._cascades[this.painter.currentShadowCascade].matrix,A),Float32Array.from(A)}calculateShadowPassMatrixFromMatrix(o){return n.ad.mat4.multiply(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,d,A,T=0){if(!this.enabled)return;const S=this.painter.transform,E=this.painter.context,k=E.gl,Z=this._uniformValues,K=new Float64Array(16),Y=S.calculatePosMatrix(o,S.worldSize);for(let re=0;re<this._cascades.length;re++)n.ad.mat4.multiply(K,this._cascades[re].matrix,Y),Z[re===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(K),E.activeTexture.set(k.TEXTURE0+wi.ShadowMap0+re),this._cascades[re].texture.bind(k.NEAREST,k.CLAMP_TO_EDGE);if(this.useNormalOffset=!!A,this.useNormalOffset){const re=n.cd(o.canonical),ne=2/S.tileSize*n.ai/yo.shadowMapResolution,pe=ne*this._cascades[0].boundingSphereRadius,Pe=ne*this._cascades[this._cascades.length-1].boundingSphereRadius,Ce=(A==="vector-tile"?1:3)/Math.pow(2,T-o.canonical.z-(1-S.zoom+Math.floor(S.zoom)));Z.u_shadow_normal_offset=[re,pe*Ce,Pe*Ce],Z.u_shadow_bias=[6e-5,.0012,.012]}else Z.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(E,Z)}setupShadowsFromMatrix(o,d,A=!1){if(!this.enabled)return;const T=this.painter.context,S=T.gl,E=this._uniformValues,k=new Float64Array(16);for(let Z=0;Z<yo.cascadeCount;Z++)n.ad.mat4.multiply(k,this._cascades[Z].matrix,o),E[Z===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(k),T.activeTexture.set(S.TEXTURE0+wi.ShadowMap0+Z),this._cascades[Z].texture.bind(S.NEAREST,S.CLAMP_TO_EDGE);if(this.useNormalOffset=A,A){const Z=yo.normalOffset;E.u_shadow_normal_offset=[1,Z,Z],E.u_shadow_bias=[6e-5,.0012,.012]}else E.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(T,E)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,d,A,T){if(T[2]>=0)return{};const S=function(Z,K,Y){const re=Y/(1<<Z.canonical.z);return new n.ce([Z.canonical.x*re+Z.wrap*Y,Z.canonical.y*re+Z.wrap*Y,0],[(Z.canonical.x+1)*re+Z.wrap*Y,(Z.canonical.y+1)*re+Z.wrap*Y,K])}(o,d,A).getCorners(),E=d/-T[2];T[0]<0?(n.ad.vec3.add(S[0],S[0],[T[0]*E,0,0]),n.ad.vec3.add(S[3],S[3],[T[0]*E,0,0])):T[0]>0&&(n.ad.vec3.add(S[1],S[1],[T[0]*E,0,0]),n.ad.vec3.add(S[2],S[2],[T[0]*E,0,0])),T[1]<0?(n.ad.vec3.add(S[0],S[0],[0,T[1]*E,0]),n.ad.vec3.add(S[1],S[1],[0,T[1]*E,0])):T[1]>0&&(n.ad.vec3.add(S[2],S[2],[0,T[1]*E,0]),n.ad.vec3.add(S[3],S[3],[0,T[1]*E,0]));const k={};return k.vertices=S,k.planes=[Us(S[1],S[0],S[4]),Us(S[2],S[1],S[5]),Us(S[3],S[2],S[6]),Us(S[0],S[3],S[7])],k}addShadowReceiver(o,d,A){this._receivers.add(o,n.ce.fromTileIdAndHeight(o,d,A))}getMaxCascadeForTile(o){const d=this._receivers.get(o);return d&&d.lastCascade?d.lastCascade:0}}function Us(y,o,d){const A=n.ad.vec3.sub([],d,o),T=n.ad.vec3.sub([],y,o),S=n.ad.vec3.cross([],A,T),E=n.ad.vec3.length(S);return E===0?[0,0,1,0]:(n.ad.vec3.scale(S,S,1/E),[S[0],S[1],S[2],-n.ad.vec3.dot(S,o)])}function zl(y){const o=y.properties.get("direction"),d=n.cc(o.x,o.y,o.z);d[2]=n.ay(d[2],0,75);const A=n.cf([d[0],d[1],d[2]]);return n.ad.vec3.fromValues(A.x,A.y,A.z)}function Bc(y,o,d){const A=o.properties.get("color-use-theme")==="none",T=o.properties.get("color"),S=o.properties.get("intensity"),E=o.properties.get("direction"),k=[E.x,E.y,E.z],Z=d.properties.get("color-use-theme")==="none",K=d.properties.get("color"),Y=d.properties.get("intensity"),re=Math.max(n.ad.vec3.dot([0,0,1],k),0),ne=[0,0,0];n.ad.vec3.scale(ne,K.toRenderColor(Z?null:y.getLut(o.scope)).toArray01Linear().slice(0,3),Y);const pe=[0,0,0];return n.ad.vec3.scale(pe,T.toRenderColor(A?null:y.getLut(d.scope)).toArray01Linear().slice(0,3),re*S),n.cg([ne[0]>0?ne[0]/(ne[0]+pe[0]):0,ne[1]>0?ne[1]/(ne[1]+pe[1]):0,ne[2]>0?ne[2]/(ne[2]+pe[2]):0])}function nu(y,o,d,A,T,S){const E=y.zoom,k=y.scale,Z=y.worldSize,K=1/Z,Y=y.aspect,re=Math.sqrt(1+Y*Y)*Math.tan(.5*y.fovX),ne=re*re,pe=A-d,Pe=A+d;let Ce,Ve;ne>pe/Pe?(Ce=A,Ve=A*re):(Ce=.5*Pe*(1+ne),Ve=.5*Math.sqrt(pe*pe+2*(A*A+d*d)*ne+Pe*Pe*ne*ne));const Le=y.projection.pixelsPerMeter(y.center.lat,Z),$e=y._camera.getCameraToWorldMercator(),nt=[0,0,-Ce*K];n.ad.vec3.transformMat4(nt,nt,$e);let at=Ve*K;const pt=y._edgeInsets;if(!(pt.left===0&&pt.top===0&&pt.right===0&&pt.bottom===0||pt.left===pt.right&&pt.top===pt.bottom)){const da=y._camera.getWorldToCamera(y.worldSize,y.projection.zAxisUnit==="meters"?Le:1),Yt=y._camera.getCameraToClipPerspective(y._fov,y.width/y.height,d,A);Yt[8]=2*-y.centerOffset.x/y.width,Yt[9]=2*y.centerOffset.y/y.height;const pa=new Float64Array(16);n.ad.mat4.mul(pa,Yt,da);const Ia=new Float64Array(16);n.ad.mat4.invert(Ia,pa);const La=n.bR.fromInvProjectionMatrix(Ia,Z,E,!0);for(const Oa of La.points){const lr=((ot=Oa)[0]/=k,ot[1]/=k,ot[2]=n.bH(ot[2],y._center.lat),ot);at=Math.max(at,n.ad.vec3.len(n.ad.vec3.subtract([],nt,lr)))}}var ot;at*=T/(T-1);const ut=Math.acos(o[2]),ct=Math.atan2(-o[0],-o[1]),At=new zs;At.position=nt,At.setPitchBearing(ut,ct);const Tt=At.getWorldToCamera(Z,Le),Qt=at*Z,Ut=Math.min(y._mercatorZfromZoom(17)*Z*-2,-2*Qt),ra=At.getCameraToClipOrthographic(-Qt,Qt,-Qt,Qt,Ut,(Qt+S*Le)/o[2]),ca=new Float64Array(16);n.ad.mat4.multiply(ca,ra,Tt);const Sa=n.ad.vec3.fromValues(Math.floor(1e6*nt[0])/1e6*Z,Math.floor(1e6*nt[1])/1e6*Z,0),Ft=.5*T,sa=[0,0,0];n.ad.vec3.transformMat4(sa,Sa,ca),n.ad.vec3.scale(sa,sa,Ft);const Vt=[Math.floor(sa[0]),Math.floor(sa[1]),Math.floor(sa[2])],oa=[0,0,0];n.ad.vec3.sub(oa,sa,Vt),n.ad.vec3.scale(oa,oa,-1/Ft);const ta=new Float64Array(16);return n.ad.mat4.identity(ta),n.ad.mat4.translate(ta,ta,oa),n.ad.mat4.multiply(ca,ta,ca),[ca,Qt]}class Ah extends n.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(o,d){return n.aN(this.requestManager.transformRequest(d,n.R.Model).url).then(A=>{if(!A)return;const T=n.aO(A),S=new n.aP(o,void 0,void 0,T);return S.computeBoundsAndApplyParent(),S}).catch(A=>{if(A&&A.status===404)return null;this.fire(new n.z(new Error(`Could not load model ${o} from ${d}: ${A.message}`)))})}load(o,d,A={keepNumReferences:!1}){this.models[d]||(this.models[d]={});const T=Object.keys(o);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+T.length;const S=[];for(const E of T)S.push(this.loadModel(E,o[E]));Promise.allSettled(S).then(E=>{for(let k=0;k<E.length;k++){const{status:Z,value:K}=E[k];if(Z==="fulfilled"&&K){const Y=this.models[d][T[k]];this.models[d][T[k]]={model:K,numReferences:A.keepNumReferences&&Y?Y.numReferences:1}}}this.numModelsLoading[d]-=T.length,this.fire(new n.A("data",{dataType:"style"}))}).catch(E=>{this.fire(new n.z(new Error(`Could not load models: ${E.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,d){return!!this.getModel(o,d)}getModel(o,d){return this.models[d]||(this.models[d]={}),this.models[d][o]?this.models[d][o].model:void 0}addModel(o,d,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={}),this.hasModel(o,A)&&this.models[A][o].numReferences++,this.modelUris[A][o]=this.requestManager.normalizeModelURL(d),this.load({[o]:this.modelUris[A][o]},A)}addModels(o,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const A=this.modelUris[d];for(const T in o)this.models[d][T]={},A[T]=this.requestManager.normalizeModelURL(o[T]);this.load(A,d,{keepNumReferences:!0})}reloadModels(o){this.load(this.modelUris[o],o)}addModelsFromBucket(o,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const A={};for(const T of o)this.hasModel(T,d)?this.models[d][T].numReferences++:(this.modelUris[d][T]=this.requestManager.normalizeModelURL(T),A[T]=this.modelUris[d][T]);this.load(A,d)}removeModel(o,d){if(this.models[d]&&this.models[d][o]&&(this.models[d][o].numReferences--,this.models[d][o].numReferences===0)){const A=this.models[d][o].model;delete this.models[d][o],delete this.modelUris[d][o],A.destroy()}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,d){this.models[d]||(this.models[d]={});for(const A in this.models[d])this.models[d][A].model&&this.models[d][A].model.upload(o.context)}}const Dl=new n.a7({data:new n.a8(n.a5.colorTheme.data)}),Po={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Id(y){return y=y||{},Object.assign(y,Po)}class jc extends n.E{constructor(o){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aQ(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=o,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(o=>{o.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=o.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=o.stylesheet.indoor.buildingFeaturesetId,this._scope=o.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:o=>(o.feature&&o.feature.properties.floorplan&&this.selectFloorplan(o.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(o){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(E,k){const[Z,K]=E,{center:Y,radius:re}=k,[ne,pe]=Y,Pe=Math.abs(Z-ne);return Math.sqrt((Pe>180?360-Pe:Pe)**2+(K-pe)**2)<=re}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.A("floorplangone")));const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=new n.P(this._map.transform.width/2,this._map.transform.height/2),T=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(o?T:A,d);S.length>0&&(this._selectedFloorplan&&S[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=S[0],this._floorplanSelected(!1)))}_floorplanSelected(o){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(S){const[[E,k],[Z,K]]=S,Y=(Z-E+360)%360,re=Y>180?360-Y:Y;return{center:[(E+re/2+360)%360,(k+K)/2],radius:Math.sqrt(re**2+(K-k)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const d=this._floorplanStates[this._indoorData.id].selectedBuilding,A=this._floorplanStates[this._indoorData.id].selectedLevel;let T;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const S of this._indoorData.levels)S.id===this._selectedLevel.id&&(T=S.id);if(this.fire(new n.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:T})),d){const S=this._indoorData.buildings.find(E=>E.id===d);this._buildingSelected(S,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(A){const S=this._indoorData.levels.find(E=>E.id===A);this._updateLevels(S,o)}else o&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(o,d){d&&o&&o.extent&&this._map.fitBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=o?o.id:void 0;const A=this._indoorData.levels.filter(T=>o.levels.includes(T.id));this.fire(new n.A("buildingselected",{buildingId:o.id,levels:A}))}_levelSelected(o){if(o==="overview")this._updateLevels(void 0,!0);else{const d=this._indoorData.levels.find(A=>A.id===o);this._updateLevels(d,!0)}this.fire(new n.A("levelselected",{levelId:o==="overview"?void 0:o}))}_updateLevels(o,d){if(!o)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(d&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function A(K){const Y=K.indexOf("/floor/");if(Y===-1)return K;const re=Y+7,ne=K.indexOf("/",re);return ne===-1?K.slice(re):K.slice(re,ne)}this._selectedLevel=o,this._floorplanStates[this._indoorData.id].selectedLevel=o?o.id:void 0;const T=[],S={},E={},k={},Z={};for(const K of this._indoorData.levels)if(T.push(K.id),S[K.id]=K.height,E[K.id]=K.base,o){if(this.mergeFloors){const Y=A(o.id),re=A(K.id);k[K.id]=re===Y?"true":"false"}else k[K.id]=K.id===o.id?"true":"false";Z[K.id]=K.base<o.base?"true":"false"}else Z[K.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",T]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",E]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",k]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",Z]),o&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!o.isUnderground),d&&o.extent)){const K=this._map.cameraForBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),Y=this._map.getZoom(),re=K.zoom?Math.abs(Y-K.zoom):0;this._map.fitBounds(o.extent,re>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:Y})}}selectFloorplan(o){const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],T=this._map.queryRenderedFeatures(A,d);if(T.length>0){for(const S of T)if(JSON.parse(S.properties["indoor-data"]).floorplanIDs.includes(o)){this._selectedFloorplan=S,this._floorplanSelected(!0);break}}}selectBuilding(o){const d=this._indoorData.buildings.find(A=>A.id===o);this._buildingSelected(d,!0)}selectLevel(o){this._levelSelected(o)}}function Ml(y){if(!y.metadata||!y.metadata.content_area)return;const o=n.q.devicePixelRatio,{left:d,top:A,width:T,height:S}=y.metadata.content_area,E=d*o,k=A*o;return[E,k,E+T*o,k+S*o]}function _c(y){if(y)return y.map(([o,d])=>[o*n.q.devicePixelRatio,d*n.q.devicePixelRatio])}class bu{constructor(o,d){this.id=o,this.style=d}addIcons(o){const d=new Map;for(const[A,T]of o.entries()){const S=n.I.from({name:A,iconsetId:this.id});d.set(S,T)}this.style.addImages(d)}}const Yi=(y,o)=>Gt(y,o&&o.filter(d=>d.identifier!=="source.canvas")),bf=n.aA(bn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),io=n.aA(bn,["setCenter","setZoom","setBearing","setPitch"]),vo=new Set(["background","sky","slot","custom"]),Ld={version:8,layers:[],sources:{}},Fd={duration:300,delay:0};class so extends n.E{constructor(o,d={}){super(),this.map=o,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=n.l({},Fd),this._buildingIndex=new Uc(this),this.crossTileSymbolIndex=new no,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new ma,this.dispatcher=d.dispatcher?d.dispatcher:new n.D(n.cj(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new Ht(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new n.ck(o._requestManager,d.localFontFamily?n.cl.all:d.localIdeographFontFamily?n.cl.ideographs:n.cl.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Ah(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",n.cm());const A=this;this._rtlTextPluginCallback=so.registerForPluginStateChange(T=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},(S,E)=>{if(n.cn(S),E&&E.every(k=>k))for(const k in A._sourceCaches){const Z=A._sourceCaches[k],K=Z.getSource().type;K!=="vector"&&K!=="geojson"||Z.reload()}})}),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const S=this.getOwnSource(T.sourceId);if(S&&S.vectorLayerIds)for(const E in this._layers){const k=this._layers[E];k.source===S.id&&this._validateLayer(k)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(n.f(o))return o;const d=n.co(o);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${n.cp(JSON.stringify(o))}`}_diffStyle(o,d,A){this.globalId=this._getGlobalId(o);const T=(S,E)=>{try{E(null,this.setState(S,A))}catch(k){E(k,!1)}};if(typeof o=="string"){const S=this.map._requestManager.normalizeStyleURL(o),E=this.map._requestManager.transformRequest(S,n.R.Style);n.n(E,(k,Z)=>{k?this.fire(new n.z(k)):Z&&T(Z,d)})}else typeof o=="object"&&T(o,d)}loadURL(o,d={}){this.fire(new n.A("dataloading",{dataType:"style"}));const A=typeof d.validate=="boolean"?d.validate:!n.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,d.accessToken),this.resolvedImports.add(o);const T=this.importsCache.get(o);if(T)return this._load(T,A);const S=this.map._requestManager.transformRequest(o,n.R.Style);this._request=n.n(S,(E,k)=>{if(this._request=null,E)this.fire(new n.z(E));else if(k)return this.importsCache.set(o,k),this._load(k,A)})}loadJSON(o,d={}){this.fire(new n.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=n.q.frame(()=>{this._request=null,this._load(o,d.validate!==!1)})}loadEmpty(){this.fire(new n.A("dataloading",{dataType:"style"})),this._load(Ld,!1)}_loadImports(o,d,A){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const T=[];for(const S of o){const E=this._createFragmentStyle(S),k=new Promise(Y=>{E.once("style.import.load",Y),E.once("error",Y)}).then(()=>this.mergeAll());if(T.push(k),this.resolvedImports.has(S.url)){E.loadEmpty();continue}const Z=S.data||this.importsCache.get(S.url);Z?(E.loadJSON(Z,{validate:d}),this._isInternalStyle(Z)&&(E.globalId=null)):S.url?E.loadURL(S.url,{validate:d}):E.loadEmpty();const K={style:E,id:S.id,config:S.config};if(A){const Y=this.fragments.findIndex(({id:re})=>re===A);this.fragments=this.fragments.slice(0,Y).concat(K).concat(this.fragments.slice(Y))}else this.fragments.push(K)}return Promise.allSettled(T)}getImportGlobalIds(o=this,d=new Set){for(const A of o.fragments)A.style.globalId&&d.add(A.style.globalId),this.getImportGlobalIds(A.style,d);return[...d.values()]}_createFragmentStyle(o){const d=this.scope?n.C(o.id,this.scope):o.id;let A;const T=this._initialConfig&&this._initialConfig[d];(o.config||T)&&(A=n.l({},o.config,T));const S=new so(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:A,configOptions:this.options,colorThemeOverride:o["color-theme"],configDependentLayers:this._configDependentLayers});return S.setEventedParent(this.map,{style:S}),S}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,d){const A=o.indoor?Id(o.schema):o.schema;if(this._isInternalStyle(o)){const E=n.l({},Ld,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(E,d)}if(this.updateConfig(this._config,A),d&&Yi(this,Ui(o)))return;this._loaded=!0,this.stylesheet=n.cq(o);const T=()=>{for(const K in o.sources)this.addSource(K,o.sources[K],{validate:!1,isInitialLoad:!0});if(o.iconsets)for(const K in o.iconsets)this.addIconset(K,o.iconsets[K]);o.sprite?this._loadIconset(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(o.glyphs);const E=mh(this.stylesheet.layers);if(this._order=E.map(K=>K.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const K=this.stylesheet.lights[0];this.light=new Kt(K.properties,K.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Kt(this.stylesheet.light)),this._layers={};for(const K of E){const Y=n.cv(K,this.scope,this._styleColorTheme.lut,this.options);Y.configDependencies.size!==0&&this._configDependentLayers.add(Y.fqid),Y.setEventedParent(this,{layer:{id:Y.id}}),this._layers[Y.id]=Y;const re=this.getOwnLayerSourceCache(Y),ne=!!this.directionalLight&&this.directionalLight.shadowsEnabled();re&&Y.canCastShadows()&&ne&&(re.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const k=this.stylesheet.terrain;k&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(k,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.A("data",{dataType:"style"}));const Z=this.isRootStyle();o.imports?this._loadImports(o.imports,d).then(()=>{this._reloadImports(),this.fire(new n.A(Z?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.A(Z?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const S=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(S){const E=this._evaluateColorThemeData(S);this._loadColorTheme(E).then(()=>{T()}).catch(k=>{n.w(`Couldn't load color theme from the stylesheet: ${k}`),T()})}else this._styleColorTheme.lut=null,T()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,d,A,T,S,E,k,Z,K,Y;const re={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(ne=>{if(ne.stylesheet){if(ne.light!=null&&(o=ne.light),ne.stylesheet.lights)for(const pe of ne.stylesheet.lights)pe.type==="ambient"&&ne.ambientLight!=null&&(d=ne.ambientLight),pe.type==="directional"&&ne.directionalLight!=null&&(A=ne.directionalLight);T=this._prioritizeTerrain(T,ne.terrain,ne.stylesheet.terrain),ne.stylesheet.fog&&ne.fog!=null&&(S=ne.fog),ne.stylesheet.snow&&ne.snow!=null&&(E=ne.snow),ne.stylesheet.rain&&ne.rain!=null&&(k=ne.rain),ne.stylesheet.camera!=null&&(Y=ne.stylesheet.camera),ne.stylesheet.projection!=null&&(Z=ne.stylesheet.projection),ne.stylesheet.transition!=null&&(K=ne.stylesheet.transition),re[ne.scope]=ne._styleColorTheme}}),this.light=o,this.ambientLight=d,this.directionalLight=A,this.fog=S,this.snow=E,this.rain=k,this._styleColorThemeForScope=re,T===null?delete this.terrain:this.terrain=T,this.camera=Y||{"camera-projection":"perspective"},this.projection=Z||{name:"mercator"},this.transition=n.l({},Fd,K),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const d=A=>{for(const T of A.fragments)d(T.style);o(A)};d(this)}_prioritizeTerrain(o,d,A){const T=o&&o.drapeRenderMode===0;return A===null?d&&d.drapeRenderMode===0?d:T?o:null:d!=null&&(!o||T||d&&d.drapeRenderMode===1)?d:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{o=this._prioritizeTerrain(o,d.terrain,d.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(o=d.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},d={},A={};this.forEachFragmentStyle(T=>{for(const S in T._sourceCaches){const E=n.C(S,T.scope);o[E]=T._sourceCaches[S]}for(const S in T._otherSourceCaches){const E=n.C(S,T.scope);d[E]=T._otherSourceCaches[S]}for(const S in T._symbolSourceCaches){const E=n.C(S,T.scope);A[E]=T._symbolSourceCaches[S]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=A}mergeLayers(){const o={},d=[],A={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(S=>{for(const E of S._order){const k=S._layers[E];if(k.type==="slot"){const Z=n.cr(E);if(o[Z])continue;o[Z]=[]}k.slot&&o[k.slot]?o[k.slot].push(k):d.push(k)}}),this._mergedOrder=[];const T=(S=[])=>{for(const E of S)if(E.type==="slot"){const k=n.cr(E.id);o[k]&&T(o[k]),this._mergedSlots.push(k)}else{const k=n.C(E.id,E.scope);this._mergedOrder.push(k),A[k]=E,E.is3D(!!this.terrain)&&(this._has3DLayers=!0),E.type==="circle"&&(this._hasCircleLayers=!0),E.type==="symbol"&&(this._hasSymbolLayers=!0),E.type==="clip"&&(this._clipLayerPresent=!0)}};T(d),this._mergedOrder.sort((S,E)=>{const k=A[S],Z=A[E];return k.hasInitialOcclusionOpacityProperties?Z.is3D(!!this.terrain)?1:0:k.is3D(!!this.terrain)&&Z.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=A,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=n.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(d,A,T){const S=n.l({},A);for(const k of Object.keys(n.a5.colorTheme))S[k]===void 0&&(S[k]=n.a5.colorTheme[k].default);const E=new n.a6(Dl,d,new Map(T));return E.setTransitionOrValue(S,T),E.untransitioned().possiblyEvaluate(new n.aa(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((A,T)=>{const S="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void A();let E=o;E.startsWith(S)||(E=S+E);const k=n.I.from("mapbox-reserved-lut"),Z=new Image;Z.src=E,Z.onerror=()=>{this._styleColorTheme.lutLoading=!1,T(new Error("Failed to load image data"))},Z.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void A();this._styleColorTheme.lutLoading=!1;const{width:K,height:Y,data:re}=n.q.getImageData(Z);if(Y>32)return void T(new Error("The height of the image must be less than or equal to 32 pixels."));if(K!==Y*Y)return void T(new Error("The width of the image must be equal to the height squared."));this.getImage(k)&&this.removeImage(k),this.addImage(k,{data:new n.r({width:K,height:Y},re),pixelRatio:1,sdf:!1,usvg:!1,version:0});const ne=this.imageManager.getImage(k,this.scope);ne?(this._styleColorTheme.lut={image:ne.data,data:o},A()):T(new Error("Missing LUT image."))}})}getLut(o){const d=this._styleColorThemeForScope[o];return d?d.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(d,A,T){let S,E,k;const Z=n.q.devicePixelRatio>1?"@2x":"";let K=n.n(A.transformRequest(A.normalizeSpriteURL(d,Z,".json"),n.R.SpriteJSON),(ne,pe)=>{K=null,k||(k=ne,S=pe,re())}),Y=n.o(A.transformRequest(A.normalizeSpriteURL(d,Z,".png"),n.R.SpriteImage),(ne,pe)=>{Y=null,k||(k=ne,E=pe,re())});function re(){if(k)T(k);else if(S&&E){const ne=n.q.getImageData(E),pe={};for(const Pe in S){const{width:Ce,height:Ve,x:Le,y:$e,sdf:nt,pixelRatio:at,stretchX:pt,stretchY:ot,content:ut}=S[Pe],ct=new n.r({width:Ce,height:Ve});n.r.copy(ne,ct,{x:Le,y:$e},{x:0,y:0},{width:Ce,height:Ve},null),pe[Pe]={data:ct,pixelRatio:at,sdf:nt,stretchX:pt,stretchY:ot,content:ut,usvg:!1}}T(null,pe)}}return{cancel(){K&&(K.cancel(),K=null),Y&&(Y.cancel(),Y=null)}}}(o,this.map._requestManager,(d,A)=>{if(this._spriteRequest=null,d)this.fire(new n.z(d));else if(A){const T=new Map;for(const S in A)T.set(n.I.from(S),A[S]);this.addImages(T)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))})}addIconset(o,d){if(d.type==="sprite")return void this._loadSprite(d.url);const A=this.getOwnSource(d.source);if(!A)return void this.fire(new n.z(new Error(`Source "${d.source}" as specified by iconset "${o}" does not exist and cannot be used as an iconset source`)));if(A.type!=="raster-array")return void this.fire(new n.z(new Error(`Source "${d.source}" as specified by iconset "${o}" is not a "raster-array" source and cannot be used as an iconset source`)));this.imageManager.createIconset(this.scope,o);const T=new bu(o,this);A.addIconset(o,T)}_loadIconset(o){if(!n.f(o)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(o);const d=this.map._spriteFormat==="auto";var A,T;this._spriteRequest=(T=(S,E)=>{if(this._spriteRequest=null,S)d?this._loadSprite(o):this.fire(new n.z(S));else if(E){const k=new Map;for(const Z in E)k.set(n.I.from(Z),E[Z]);this.addImages(k)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))},n.bj((A=this.map._requestManager).transformRequest(A.normalizeIconsetURL(o),n.R.Iconset),(S,E)=>{if(S)return void T(S);const k={},Z=n.ch(new n.bi(E));for(const K of Z.icons){const Y={version:1,pixelRatio:n.q.devicePixelRatio,content:Ml(K),stretchX:K.metadata?_c(K.metadata.stretch_x_areas):void 0,stretchY:K.metadata?_c(K.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:K};k[K.name]=Y}T(null,k)}))}_validateLayer(o){const d=this.getOwnSource(o.source);if(!d)return;const A=o.sourceLayer;A&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(A)===-1)&&this.fire(new n.z(new Error(`Source layer "${A}" does not exist on source "${d.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,d)=>{const A=this.fragments[d];return A&&A.style&&(o.data=A.style.serialize()),o})}_serializeSources(){const o={};for(const d in this._sourceCaches){const A=this._sourceCaches[d].getSource();o[A.id]||(o[A.id]=A.serialize())}return o}_serializeLayers(o){const d=[];for(const A of o){const T=this._layers[A];T&&T.type!=="custom"&&d.push(T.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const d=this.getOwnLayer(o);if(d)return d;this.fire(new n.z(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const d=this.getOwnSource(o);if(d)return d;this.fire(new n.z(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,d){const A=this.map.painter;if(A)for(let T=o.minzoom||0;T<(o.maxzoom||25.5);T++){const S=o.getProgramIds();if(S)for(const E of S){const k=o.getDefaultProgramParams(E,d.zoom,this._styleColorTheme.lut);k&&(A.style=this,this.fog&&(A._fogVisible=!0,k.overrideFog=!0,A.getOrCreateProgram(E,k)),A._fogVisible=!1,k.overrideFog=!1,A.getOrCreateProgram(E,k),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(k.overrideRtt=!0,A.getOrCreateProgram(E,k)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const d=this.calculateLightsBrightness();o.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const A=this._changes.isDirty();let T=!1;if(this._changes.isDirty()){const E=this._changes.getLayerUpdatesByScope();for(const k in E){const{updatedIds:Z,removedIds:K}=E[k];(Z||K)&&(this._updateWorkerLayers(k,Z,K),T=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this.snow&&this.snow.updateTransitions(o),this.rain&&this.rain.updateTransitions(o),this._changes.reset()}const S={};for(const E in this._mergedSourceCaches){const k=this._mergedSourceCaches[E];S[E]=k.used,k.used=!1,k.tileCoverLift=0}for(const E of this._mergedOrder){const k=this._mergedLayers[E];if(k.recalculate(o,this._availableImages),!k.isHidden(o.zoom)){const Z=this.getLayerSourceCache(k);Z&&(Z.used=!0,Z.tileCoverLift=Math.max(Z.tileCoverLift,k.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(k,o)}):this.precompilePrograms(k,o))}for(const E in this._mergedSourceCaches){const k=this._mergedSourceCaches[E];if(!k)continue;const Z=k._source;Z.type==="raster-array"&&Z.iconsets&&(k.used=!0)}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&T&&this.mergeLayers();for(const E in S){const k=this._mergedSourceCaches[E];S[E]!==k.used&&k.getSource().fire(new n.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.snow&&this.snow.recalculate(o),this.rain&&this.rain.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),A&&this.fire(new n.A("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=this._changes.getUpdatedImages();if(o.length){for(const d in this._mergedSourceCaches)this._mergedSourceCaches[d].reloadTilesForDependencies(["icons","patterns"],o);this._changes.resetUpdatedImages()}}_updateWorkerLayers(o,d,A){const T=this.getFragmentStyle(o);T&&this.dispatcher.broadcast("updateLayers",{layers:d?T._serializeLayers(d):[],scope:o,removedIds:A||[],options:T.options})}setState(o,d){if(this._checkLoaded(),Yi(this,Ui(o)))return!1;(o=n.cq(o)).layers=mh(o.layers);const A=function(E,k){if(!E)return[{command:bn.setStyle,args:[k]}];let Z=[];try{if(!n.bn(E.version,k.version))return[{command:bn.setStyle,args:[k]}];if(n.bn(E.center,k.center)||Z.push({command:bn.setCenter,args:[k.center]}),n.bn(E.zoom,k.zoom)||Z.push({command:bn.setZoom,args:[k.zoom]}),n.bn(E.bearing,k.bearing)||Z.push({command:bn.setBearing,args:[k.bearing]}),n.bn(E.pitch,k.pitch)||Z.push({command:bn.setPitch,args:[k.pitch]}),n.bn(E.sprite,k.sprite)||Z.push({command:bn.setSprite,args:[k.sprite]}),n.bn(E.glyphs,k.glyphs)||Z.push({command:bn.setGlyphs,args:[k.glyphs]}),n.bn(E.imports,k.imports)||function(pe=[],Pe=[],Ce){Pe=Pe||[];const Ve=(pe=pe||[]).map(_n),Le=Pe.map(_n),$e=pe.reduce($s,{}),nt=Pe.reduce($s,{}),at=Ve.slice();let pt,ot,ut,ct;for(pt=0,ot=0;pt<Ve.length;pt++)ut=Ve[pt],nt.hasOwnProperty(ut)?ot++:(Ce.push({command:bn.removeImport,args:[ut]}),at.splice(at.indexOf(ut,ot),1));for(pt=0,ot=0;pt<Le.length;pt++)ut=Le[Le.length-1-pt],at[at.length-1-pt]!==ut&&($e.hasOwnProperty(ut)?(Ce.push({command:bn.removeImport,args:[ut]}),at.splice(at.lastIndexOf(ut,at.length-ot),1)):ot++,ct=at[at.length-pt],Ce.push({command:bn.addImport,args:[nt[ut],ct]}),at.splice(at.length-pt,0,ut));for(const At of Pe){const Tt=$e[At.id];Tt&&!n.bn(Tt,At)&&Ce.push({command:bn.updateImport,args:[At.id,At]})}}(E.imports,k.imports,Z),n.bn(E.transition,k.transition)||Z.push({command:bn.setTransition,args:[k.transition]}),n.bn(E.light,k.light)||Z.push({command:bn.setLight,args:[k.light]}),n.bn(E.fog,k.fog)||Z.push({command:bn.setFog,args:[k.fog]}),n.bn(E.snow,k.snow)||Z.push({command:bn.setSnow,args:[k.snow]}),n.bn(E.rain,k.rain)||Z.push({command:bn.setRain,args:[k.rain]}),n.bn(E.projection,k.projection)||Z.push({command:bn.setProjection,args:[k.projection]}),n.bn(E.lights,k.lights)||Z.push({command:bn.setLights,args:[k.lights]}),n.bn(E.camera,k.camera)||Z.push({command:bn.setCamera,args:[k.camera]}),!n.bn(E["color-theme"],k["color-theme"]))return[{command:bn.setStyle,args:[k]}];const K={},Y=[];(function(pe,Pe,Ce,Ve){let Le;for(Le in Pe=Pe||{},pe=pe||{})pe.hasOwnProperty(Le)&&(Pe.hasOwnProperty(Le)||pc(Le,Ce,Ve));for(Le in Pe){if(!Pe.hasOwnProperty(Le))continue;const $e=Pe[Le];pe.hasOwnProperty(Le)?n.bn(pe[Le],$e)||(pe[Le].type==="geojson"&&$e.type==="geojson"&&er(pe,Pe,Le)?Ce.push({command:bn.setGeoJSONSourceData,args:[Le,$e.data]}):mc(Le,Pe,Ce,Ve)):Hs(Le,Pe,Ce)}})(E.sources,k.sources,Y,K);const re=[];E.layers&&E.layers.forEach(pe=>{pe.source&&K[pe.source]?Z.push({command:bn.removeLayer,args:[pe.id]}):re.push(pe)});let ne=E.terrain;ne&&K[ne.source]&&(Z.push({command:bn.setTerrain,args:[void 0]}),ne=void 0),Z=Z.concat(Y),n.bn(ne,k.terrain)||Z.push({command:bn.setTerrain,args:[k.terrain]}),function(pe,Pe,Ce){Pe=Pe||[];const Ve=(pe=pe||[]).map(_n),Le=Pe.map(_n),$e=pe.reduce($s,{}),nt=Pe.reduce($s,{}),at=Ve.slice(),pt=Object.create(null);let ot,ut,ct,At,Tt,Qt,Ut;for(ot=0,ut=0;ot<Ve.length;ot++)ct=Ve[ot],nt.hasOwnProperty(ct)?ut++:(Ce.push({command:bn.removeLayer,args:[ct]}),at.splice(at.indexOf(ct,ut),1));for(ot=0,ut=0;ot<Le.length;ot++)ct=Le[Le.length-1-ot],at[at.length-1-ot]!==ct&&($e.hasOwnProperty(ct)?(Ce.push({command:bn.removeLayer,args:[ct]}),at.splice(at.lastIndexOf(ct,at.length-ut),1)):ut++,Qt=at[at.length-ot],Ce.push({command:bn.addLayer,args:[nt[ct],Qt]}),at.splice(at.length-ot,0,ct),pt[ct]=!0);for(ot=0;ot<Le.length;ot++)if(ct=Le[ot],At=$e[ct],Tt=nt[ct],!pt[ct]&&!n.bn(At,Tt))if(n.bn(At.source,Tt.source)&&n.bn(At["source-layer"],Tt["source-layer"])&&n.bn(At.type,Tt.type)){for(Ut in nn(At.layout,Tt.layout,Ce,ct,null,bn.setLayoutProperty),nn(At.paint,Tt.paint,Ce,ct,null,bn.setPaintProperty),n.bn(At.slot,Tt.slot)||Ce.push({command:bn.setSlot,args:[ct,Tt.slot]}),n.bn(At.filter,Tt.filter)||Ce.push({command:bn.setFilter,args:[ct,Tt.filter]}),n.bn(At.minzoom,Tt.minzoom)&&n.bn(At.maxzoom,Tt.maxzoom)||Ce.push({command:bn.setLayerZoomRange,args:[ct,Tt.minzoom,Tt.maxzoom]}),At)At.hasOwnProperty(Ut)&&Ut!=="layout"&&Ut!=="paint"&&Ut!=="filter"&&Ut!=="metadata"&&Ut!=="minzoom"&&Ut!=="maxzoom"&&Ut!=="slot"&&(Ut.indexOf("paint.")===0?nn(At[Ut],Tt[Ut],Ce,ct,Ut.slice(6),bn.setPaintProperty):n.bn(At[Ut],Tt[Ut])||Ce.push({command:bn.setLayerProperty,args:[ct,Ut,Tt[Ut]]}));for(Ut in Tt)Tt.hasOwnProperty(Ut)&&!At.hasOwnProperty(Ut)&&Ut!=="layout"&&Ut!=="paint"&&Ut!=="filter"&&Ut!=="metadata"&&Ut!=="minzoom"&&Ut!=="maxzoom"&&Ut!=="slot"&&(Ut.indexOf("paint.")===0?nn(At[Ut],Tt[Ut],Ce,ct,Ut.slice(6),bn.setPaintProperty):n.bn(At[Ut],Tt[Ut])||Ce.push({command:bn.setLayerProperty,args:[ct,Ut,Tt[Ut]]}))}else Ce.push({command:bn.removeLayer,args:[ct]}),Qt=at[at.lastIndexOf(ct)+1],Ce.push({command:bn.addLayer,args:[Tt,Qt]})}(re,k.layers,Z)}catch(K){console.warn("Unable to compute style diff:",K),Z=[{command:bn.setStyle,args:[k]}]}return Z}(this.serialize(),o).filter(E=>!(E.command in io));if(A.length===0)return!1;const T=A.filter(E=>!(E.command in bf));if(T.length>0)throw new Error(`Unimplemented: ${T.map(E=>E.command).join(", ")}.`);const S=[];return A.forEach(E=>{S.push(this[E.command].apply(this,E.args))}),d&&Promise.all(S).then(d),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}addImages(o){for(const[d,A]of o.entries()){if(this.getImage(d)&&!d.iconsetId)return this.fire(new n.z(new Error(`An image with the name "${d.name}" already exists.`)));this.imageManager.addImage(d,this.scope,A),this._changes.updateImage(d)}return this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this}addImage(o,d){return this.getImage(o)&&!o.iconsetId?this.fire(new n.z(new Error(`An image with the name "${o.name}" already exists.`))):(this.imageManager.addImage(o,this.scope,d),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this)}updateImage(o,d,A=!1){this.imageManager.updateImage(o,this.scope,d),A&&(this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})))}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this):this.fire(new n.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(o,d,A={}){return this._checkLoaded(),this._validate(yt,`models.${o}`,d,null,A)||(this.modelManager.addModel(o,d,this.scope),this._changes.setDirty()),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this):this.fire(new n.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,d,A={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(ao,`sources.${o}`,d,null,A))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const T=Bo(o,d,this.dispatcher,this);T.scope=this.scope,T.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(T.id),source:T.serialize(),sourceId:T.id}));const S=E=>{const k=(E?"symbol:":"other:")+T.id,Z=n.C(k,this.scope),K=this._sourceCaches[k]=new tl(Z,T,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[T.id]=K,K.onAdd(this.map)};S(!1),d.type!=="vector"&&d.type!=="geojson"||S(!0),T.onAdd&&T.onAdd(this.map),A.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const d=this.getOwnSource(o);if(!d)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const A=this.getOwnSourceCaches(o);for(const T of A){const S=n.cr(T.id);delete this._sourceCaches[S],this._changes.discardSourceCacheUpdate(T.id),T.fire(new n.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,d){this._checkLoaded(),this.getOwnSource(o).setData(d),this._changes.setDirty()}getOwnSource(o){const d=this.getOwnSourceCache(o);return d&&d.getSource()}getOwnSources(){const o=[];for(const d in this._otherSourceCaches){const A=this.getOwnSourceCache(d);A&&o.push(A.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const d in o){const A=o[d]._tiles;for(const T in A){const S=A[T];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const T of o){if(this._validate(rn,"lights",T))return;switch(T.type){case"ambient":if(this.ambientLight){const S=this.ambientLight;S.set(T),S.updateTransitions(d)}else this.ambientLight=new Di(T,Hr||(Hr=new n.a7({color:new n.a8(n.a5.properties_light_ambient.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const S=this.directionalLight;S.set(T),S.updateTransitions(d)}else this.directionalLight=new Di(T,An||(An=new n.a7({direction:new n.am(n.a5.properties_light_directional.direction),color:new n.a8(n.a5.properties_light_directional.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_directional.intensity),"cast-shadows":new n.a8(n.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a8(n.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a8(n.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const A=new n.aa(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(A),this.directionalLight&&this.directionalLight.recalculate(A),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,d=this.ambientLight;if(!o||!d)return;const A=ne=>.2126*(ne[0]<=.03928?ne[0]/12.92:Math.pow((ne[0]+.055)/1.055,2.4))+.7152*(ne[1]<=.03928?ne[1]/12.92:Math.pow((ne[1]+.055)/1.055,2.4))+.0722*(ne[2]<=.03928?ne[2]/12.92:Math.pow((ne[2]+.055)/1.055,2.4)),T=o.properties.get("color").toRenderColor(null).toArray01(),S=o.properties.get("intensity"),E=o.properties.get("direction"),k=1-n.cc(E.x,E.y,E.z)[2]/90,Z=A(T)*S*k,K=d.properties.get("color").toRenderColor(null).toArray01(),Y=d.properties.get("intensity"),re=A(K)*Y;return Number(((Z+re)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(!o)return this;if(n.cs(o)){const d=n.ct(o),A=this.fragments.find(({id:S})=>S===d);if(!A)throw new Error(`Style import '${o}' not found`);const T=n.cr(o);return A.style.getFragmentStyle(T)}{const d=this.fragments.find(({id:A})=>A===o);return d?d.style:void 0}}setFeaturesetSelectors(o){if(!o)return;const d={},A=(T,S="")=>`${T}::${S}`;this._featuresetSelectors={};for(const T in o){const S=this._featuresetSelectors[T]=[];for(const E of o[T].selectors){if(E.featureNamespace){const Z=this.getOwnLayer(E.layer);if(!Z){n.w(`Layer is undefined for selector: ${E.layer}`);continue}const K=A(Z.source,Z.sourceLayer);if(K in d&&d[K]!==E.featureNamespace){n.w(`"featureNamespace ${E.featureNamespace} of featureset ${T}'s selector is not associated to the same source, skip this selector`);continue}d[K]=E.featureNamespace}let k;if(E.properties)for(const Z in E.properties){const K=n.X(E.properties[Z]);K.result==="success"&&(k=k||{},k[Z]=K.value)}S.push({layerId:E.layer,namespace:E.featureNamespace,properties:k,uniqueFeatureID:E._uniqueFeatureID})}}}getFeaturesetDescriptors(o){const d=this.getFragmentStyle(o);if(!d||!d.stylesheet.featuresets)return[];const A=[];for(const T in d.stylesheet.featuresets)A.push({featuresetId:T,importId:d.scope?d.scope:void 0});return A}getFeaturesetLayers(o,d){const A=this.getFragmentStyle(d),T=A.stylesheet.featuresets;if(!T||!T[o])return this.fire(new n.z(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const S=[];for(const E of T[o].selectors){const k=A.getOwnLayer(E.layer);k&&S.push(k)}return S}getConfigProperty(o,d){const A=this.getFragmentStyle(o);if(!A)return null;const T=n.C(d,A.scope),S=A.options.get(T),E=S?S.value||S.default:null;return E?E.serialize():null}setConfigProperty(o,d,A){const T=this.getFragmentStyle(o);if(!T)return;const S=T.stylesheet.indoor?Id(T.stylesheet.schema):T.stylesheet.schema;if(!S||!S[d])return;const E=n.X(A);if(E.result!=="success")return void Yi(this,E.value);const k=E.value.expression,Z=n.C(d,T.scope),K=T.options.get(Z);if(!K)return;let Y;const{minValue:re,maxValue:ne,stepValue:pe,type:Pe,values:Ce}=S[d],Ve=n.X(S[d].default);Ve.result==="success"&&(Y=Ve.value.expression),Y?(this.options.set(Z,Object.assign({},K,{value:k,default:Y,minValue:re,maxValue:ne,stepValue:pe,type:Pe,values:Ce})),this.updateConfigDependencies(d)):this.fire(new n.z(new Error(`No schema defined for the config option "${d}" in the "${o}" fragment.`)))}getConfig(o){const d=this.getFragmentStyle(o);if(!d)return null;const A=d.stylesheet.schema;if(!A)return null;const T={};for(const S in A){const E=n.C(S,d.scope),k=d.options.get(E),Z=k?k.value||k.default:null;T[S]=Z?Z.serialize():null}return T}setConfig(o,d){const A=this.getFragmentStyle(o);A&&(A.updateConfig(d,A.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const d=this.getFragmentStyle(o);return d?d.stylesheet.schema:null}setSchema(o,d){const A=this.getFragmentStyle(o);A&&(A.stylesheet.schema=d,A.updateConfig(A._config,d),this.updateConfigDependencies())}updateConfig(o,d){if(this._config=o,o||d)if(d)for(const A in d){let T,S;const E=n.X(d[A].default);if(E.result==="success"&&(T=E.value.expression),o&&o[A]!==void 0){const ne=n.X(o[A]);ne.result==="success"&&(S=ne.value.expression)}const{minValue:k,maxValue:Z,stepValue:K,type:Y,values:re}=d[A];if(T){const ne=n.C(A,this.scope);this.options.set(ne,{default:T,value:S,minValue:k,maxValue:Z,stepValue:K,type:Y,values:re})}else this.fire(new n.z(new Error(`No schema defined for config option "${A}".`)))}else this.fire(new n.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const d of this._configDependentLayers){const A=this.getLayer(d);if(A){if(o&&!A.configDependencies.has(o))continue;A.possiblyEvaluateVisibility(),this._updateLayer(A)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(d=>{const A=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(A){const T=d._evaluateColorThemeData(A);(!d._styleColorTheme.lut&&T!==""||d._styleColorTheme.lut&&T!==d._styleColorTheme.lut.data)&&d.setColorTheme(A)}}),this._changes.setDirty()}addLayer(o,d,A={}){this._checkLoaded();const T=o.id;if(this._layers[T])return void this.fire(new n.z(new Error(`Layer with id "${T}" already exists on this map`)));let S;if(o.type==="custom"){if(Yi(this,n.cu(o)))return;S=n.cv(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(T,o.source),o=n.cq(o),o=n.l(o,{source:T})),this._validate(Ne,`layers.${T}`,o,{arrayIndex:-1},A))return;S=n.cv(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(S),S.setEventedParent(this,{layer:{id:T}})}S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid);let E=this._order.length;if(d){const Y=this._order.indexOf(d);if(Y===-1)return void this.fire(new n.z(new Error(`Layer with id "${d}" does not exist on this map.`)));S.slot===this._layers[d].slot?E=Y:n.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,T),this._layerOrderChanged=!0,this._layers[T]=S;const k=this.getOwnLayerSourceCache(S),Z=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&S.canCastShadows()&&Z&&(k.castsShadows=!0);const K=this._changes.getRemovedLayer(S);if(K&&S.source&&k&&S.type!=="custom"){this._changes.discardLayerRemoval(S);const Y=n.C(S.source,S.scope);K.type!==S.type?this._changes.updateSourceCache(Y,"clear"):(this._changes.updateSourceCache(Y,"reload"),k.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),S.scope=this.scope,this.mergeLayers()}moveLayer(o,d){this._checkLoaded();const A=this._checkLayer(o);if(!A||o===d)return;const T=this._order.indexOf(o);this._order.splice(T,1);let S=this._order.length;if(d){const E=this._order.indexOf(d);if(E===-1)return void this.fire(new n.z(new Error(`Layer with id "${d}" does not exist on this map.`)));A.slot===this._layers[d].slot?S=E:n.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const d=this._checkLayer(o);if(!d)return;d.setEventedParent(null);const A=this._order.indexOf(o);this._order.splice(A,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const T=this.getOwnLayerSourceCache(d);if(T&&T.castsShadows){let S=!1;for(const E in this._layers)if(this._layers[E].source===d.source&&this._layers[E].canCastShadows()){S=!0;break}T.castsShadows=S}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const d in this._layers)if(this._layers[d].type===o)return!0;return!1}setLayerZoomRange(o,d,A){this._checkLoaded();const T=this._checkLayer(o);T&&(T.minzoom===d&&T.maxzoom===A||(d!=null&&(T.minzoom=d),A!=null&&(T.maxzoom=A),this._updateLayer(T)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,d){this._checkLoaded();const A=this._checkLayer(o);A&&A.slot!==d&&(A.slot=d,this._updateLayer(A))}setFilter(o,d,A={}){this._checkLoaded();const T=this._checkLayer(o);if(T&&!n.bn(T.filter,d))return d==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(Fe,`layers.${T.id}.filter`,d,{layerType:T.type},A)||(T.filter=n.cq(d),this._updateLayer(T)))}getFilter(o){const d=this._checkLayer(o);if(d)return n.cq(d.filter)}setLayoutProperty(o,d,A,T={}){this._checkLoaded();const S=this._checkLayer(o);if(S&&!n.bn(S.getLayoutProperty(d),A)){if(A!=null&&(!T||T.validate!==!1)&&Yi(S,wt.call(Ui,{key:`layers.${o}.layout.${d}`,layerType:S.type,objectKey:d,value:A,styleSpec:n.a5,style:{glyphs:!0,sprite:!0}})))return;S.setLayoutProperty(d,A),S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),this._updateLayer(S)}}getLayoutProperty(o,d){const A=this._checkLayer(o);if(A)return A.getLayoutProperty(d)}setPaintProperty(o,d,A,T={}){this._checkLoaded();const S=this._checkLayer(o);if(!S||n.bn(S.getPaintProperty(d),A)||A!=null&&(!T||T.validate!==!1)&&Yi(S,Xe.call(Ui,{key:`layers.${o}.paint.${d}`,layerType:S.type,objectKey:d,value:A,styleSpec:n.a5})))return;const E=S.setPaintProperty(d,A);S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),E&&this._updateLayer(S),this._changes.updatePaintProperties(S)}getPaintProperty(o,d){const A=this._checkLayer(o);if(A)return A.getPaintProperty(d)}setFeatureState(o,d){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:Z,importId:K}=o.target,Y=this.getFragmentStyle(K),re=Y.getFeaturesetLayers(Z);for(const{source:ne,sourceLayer:pe}of re)Y.setFeatureState({id:o.id,source:ne,sourceLayer:pe},d)}else if("layerId"in o.target){const{layerId:Z}=o.target,K=this.getLayer(Z);this.setFeatureState({id:o.id,source:K.source,sourceLayer:K.sourceLayer},d)}return}const A=o.source,T=o.sourceLayer,S=this._checkSource(A);if(!S)return;const E=S.type;if(E==="geojson"&&T)return void this.fire(new n.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!T)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided.")));const k=this.getOwnSourceCaches(A);for(const Z of k)Z.setFeatureState(T,o.id,d)}removeFeatureState(o,d){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:Z,importId:K}=o.target,Y=this.getFragmentStyle(K),re=Y.getFeaturesetLayers(Z);for(const{source:ne,sourceLayer:pe}of re)Y.removeFeatureState({id:o.id,source:ne,sourceLayer:pe},d)}else if("layerId"in o.target){const{layerId:Z}=o.target,K=this.getLayer(Z);this.removeFeatureState({id:o.id,source:K.source,sourceLayer:K.sourceLayer},d)}return}const A=o.source,T=this._checkSource(A);if(!T)return;const S=T.type,E=S==="vector"?o.sourceLayer:void 0;if(S==="vector"&&!E)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new n.z(new Error("A feature id is required to remove its specific state property.")));const k=this.getOwnSourceCaches(A);for(const Z of k)Z.removeFeatureState(E,o.id,d)}getFeatureState(o){if(this._checkLoaded(),"target"in o){let S;if("featuresetId"in o.target){const{featuresetId:E,importId:k}=o.target,Z=this.getFragmentStyle(k),K=Z.getFeaturesetLayers(E);for(const{source:Y,sourceLayer:re}of K){const ne=Z.getFeatureState({id:o.id,source:Y,sourceLayer:re});if(ne&&!S)S=ne;else if(!n.bn(S,ne))return void this.fire(new n.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o.target){const{layerId:E}=o.target,k=this.getLayer(E);S=this.getFeatureState({id:o.id,source:k.source,sourceLayer:k.sourceLayer})}return S}const d=o.source,A=o.sourceLayer,T=this._checkSource(d);if(T){if(T.type!=="vector"||A)return o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(A,o.id);this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=n.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),d=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return n.cw({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateFilteredLayers(o){for(const d of Object.values(this._mergedLayers))o(d)&&this._updateLayer(d)}_updateLayer(o){this._changes.updateLayer(o);const d=this.getLayerSourceCache(o),A=n.C(o.source,o.scope),T=this._changes.getUpdatedSourceCaches();o.source&&!T[A]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(A,"reload"),d.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const d=k=>this._mergedLayers[k].is3D(!!this.terrain),A=this.order,T={},S=[];for(let k=A.length-1;k>=0;k--){const Z=A[k];if(d(Z)){T[Z]=k;for(const K of o){const Y=K[Z];if(Y)for(const re of Y)S.push(re)}}}S.sort((k,Z)=>Z.intersectionZ-k.intersectionZ);const E=[];for(let k=A.length-1;k>=0;k--){const Z=A[k];if(d(Z))for(let K=S.length-1;K>=0;K--){const Y=S[K].feature;if(Y.layer&&T[Y.layer.id]<k)break;E.push(Y),S.pop()}else for(const K of o){const Y=K[Z];if(Y)for(const re of Y)E.push(re.feature)}}return E}queryRenderedFeatures(o,d,A){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(Fe,"queryRenderedFeatures.filter",d.filter,null,d),T=n.a_(d.filter));const S={},E=Y=>{if(vo.has(Y.type))return;const re=this.getOwnLayerSourceCache(Y),ne=S[re.id]=S[re.id]||{sourceCache:re,layers:{},has3DLayers:!1};Y.is3D(!!this.terrain)&&(ne.has3DLayers=!0),ne.layers[Y.fqid]=ne.layers[Y.fqid]||{styleLayer:Y,targets:[]},ne.layers[Y.fqid].targets.push({filter:T})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new n.z(new Error("parameters.layers must be an Array."))),[];for(const Y of d.layers){const re=this._layers[Y];if(!re)return this.fire(new n.z(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];E(re)}}else for(const Y in this._layers)E(this._layers[Y]);const k=this._queryRenderedFeatures(o,S,A),Z=this._flattenAndSortRenderedFeatures(k),K=[];for(const Y of Z)n.ct(Y.layer.id)===this.scope&&K.push(Y);return K}queryRenderedFeatureset(o,d,A){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(Fe,"queryRenderedFeatures.filter",d.filter,null,d),T=n.a_(d.filter));const S="mock",E=[];if(d&&d.target)E.push(Object.assign({},d,{targetId:S,filter:T}));else{const Y=this.getFeaturesetDescriptors();for(const re of Y)E.push({targetId:S,filter:T,target:re});for(const{style:re}of this.fragments){const ne=re.getFeaturesetDescriptors();for(const pe of ne)E.push({targetId:S,filter:T,target:pe})}}const k=this.queryRenderedTargets(o,E,A),Z=[],K=new Set;for(const Y of k)for(const re of Y.variants[S])Fc(re,Y,K)||Z.push(new n.cx(Y,re));return Z}queryRenderedTargets(o,d,A){const T={},S=(k,Z,K,Y)=>{const re=T[Z.id]=T[Z.id]||{sourceCache:Z,layers:{},has3DLayers:!1};if(re.layers[k.fqid]=re.layers[k.fqid]||{styleLayer:k,targets:[]},k.is3D(!!this.terrain)&&(re.has3DLayers=!0),!Y)return K.uniqueFeatureID=!1,void re.layers[k.fqid].targets.push(K);re.layers[k.fqid].targets.push(Object.assign({},K,{namespace:Y.namespace,properties:Y.properties,uniqueFeatureID:Y.uniqueFeatureID}))};for(const k of d)if("featuresetId"in k.target){const{featuresetId:Z,importId:K}=k.target,Y=this.getFragmentStyle(K);if(!Y||!Y._featuresetSelectors)continue;const re=Y._featuresetSelectors[Z];if(!re){this.fire(new n.z(new Error(`The featureset '${Z}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const ne of re){const pe=Y.getOwnLayer(ne.layerId);pe&&!vo.has(pe.type)&&S(pe,Y.getOwnLayerSourceCache(pe),k,ne)}}else if("layerId"in k.target){const{layerId:Z}=k.target,K=this.getLayer(Z);if(!K||vo.has(K.type))continue;S(K,this.getLayerSourceCache(K),k)}const E=this._queryRenderedFeatures(o,T,A);return this._flattenAndSortRenderedFeatures(E)}_queryRenderedFeatures(o,d,A){const T=[],S=!!this.map._showQueryGeometry,E=Ki.createFromScreenPoints(o,A);for(const k in d){const Z=fh(E,d[k],this._availableImages,A,S);Object.keys(Z).length&&T.push(Z)}if(this.placement)for(const k in d){if(!d[k].sourceCache._onlySymbols)continue;const Z=_u(E.screenGeometry,d[k],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(Z).length&&T.push(Z)}return T}querySourceFeatures(o,d){const A=d&&d.filter;A&&this._validate(Fe,"querySourceFeatures.filter",A,null,d);let T=[];const S=this.getOwnSourceCaches(o);for(const E of S)T=T.concat(kc(E,d));return T}addSourceType(o,d,A){return so.getSourceType(o)?A(new Error(`A source type called "${o}" already exists.`)):(so.setSourceType(o,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:d.workerSourceURL},A):A(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,d,A={}){this._checkLoaded();const T=this.light.getLight();let S=!1;for(const k in o)if(!n.bn(o[k],T[k])){S=!0;break}if(!S)return;const E=this._getTransitionParameters();this.light.setLight(o,d,A),this.light.updateTransitions(E)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,d=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let A=o;const T=o.source==null;if(d===1){if(this.disableElevatedTerrain)return;if(typeof A.source=="object"){const k="terrain-dem-src";this.addSource(k,A.source),A=n.cq(A),A=n.l(A,{source:k})}const S=n.l({},A),E={};if(this.terrain&&T){S.source=this.terrain.get().source;const k=this.terrain?this.getFragmentStyle(this.terrain.scope):null;k&&(E.style=k.serialize())}if(this._validate(Jn,"terrain",S,E))return}if(!this.terrain||this.terrain.scope!==this.scope&&!T||this.terrain&&d!==this.terrain.drapeRenderMode){if(!A)return;this._createTerrain(A,d),this.fire(new n.A("data",{dataType:"style"}))}else{const S=this.terrain,E=S.get();for(const k of Object.keys(n.a5.terrain))!A.hasOwnProperty(k)&&n.a5.terrain[k].default&&(A[k]=n.a5.terrain[k].default);for(const k in o)if(!n.bn(o[k],E[k])){S.set(o,this.options),this.stylesheet.terrain=o;const Z=this._getTransitionParameters({duration:0});S.updateTransitions(Z),this.fire(new n.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const d=this.fog=new Zr(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_createSnow(o){const d=this.snow=new Kr(o,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_createRain(o){const d=this.rain=new Fn(o,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.fog=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createFog(o);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(o){if(this._checkLoaded(),!o)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.snow=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createSnow(o);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(o){if(this._checkLoaded(),!o)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.rain=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createRain(o);this._markersNeedUpdate=!0}_reloadColorTheme(){const o=()=>{for(const T in this._layers)this._layers[T].lut=this._styleColorTheme.lut;for(const T in this._sourceCaches)this._sourceCaches[T].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void o();const A=this._evaluateColorThemeData(d);this._loadColorTheme(A).then(()=>{this.fire(new n.A("colorthemeset")),o()}).catch(T=>{n.w(`Couldn't set color theme: ${T}`)})}setColorTheme(o){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=o,this._reloadColorTheme()}setImportColorTheme(o,d){const A=this.getFragmentStyle(o);A&&(A._styleColorTheme.colorThemeOverride=d,A._reloadColorTheme())}_getTransitionParameters(o){return{now:n.q.now(),transition:n.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],d=[];for(const A of this._mergedOrder)this.isLayerDraped(this._mergedLayers[A])?o.push(A):d.push(A);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...d)}_createTerrain(o,d){const A=this.terrain=new Wt(o,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const T=this._getTransitionParameters({duration:0});A.updateTransitions(T)}_force3DLayerUpdate(){for(const o in this._layers){const d=this._layers[o];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const d=this._layers[o];d.type==="symbol"&&this._updateLayer(d)}}_validate(o,d,A,T,S={}){if(S&&S.validate===!1)return!1;const E=n.l({},this.serialize());return Yi(this,o.call(Ui,n.l({key:d,style:E,value:A,styleSpec:n.a5},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cy.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(o){const d=this.getSourceCaches(o);for(const A of d)A.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const d=this.getSourceCaches(o);for(const A of d)A.resume(),A.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(o=>{o.modelManager.reloadModels(o.scope)})}updateSources(o){let d;this.directionalLight&&(d=zl(this.directionalLight));for(const A in this._mergedSourceCaches)this._mergedSourceCaches[A].update(o,void 0,void 0,d)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const d=this._sourceCaches[o];d.resume(),d.reload()}}_updatePlacement(o,d,A,T,S,E,k=!1){let Z=!1,K=!1;const Y={},re={};for(const ne of this._mergedOrder){const pe=this._mergedLayers[ne];if(pe.type!=="symbol")continue;const Pe=n.C(pe.source,pe.scope);let Ce=Y[Pe];if(!Ce){const Le=this.getLayerSourceCache(pe);if(!Le)continue;const $e=Le.getRenderableIds(!0).map(nt=>Le.getTileByID(nt));re[Pe]=$e.slice(),Ce=Y[Pe]=$e.sort((nt,at)=>at.tileID.overscaledZ-nt.tileID.overscaledZ||(nt.tileID.isLessThan(at.tileID)?-1:1))}const Ve=this.crossTileSymbolIndex.addLayer(pe,Ce,d.center.lng,d.projection);Z=Z||Ve}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),k=k||this._layerOrderChanged||T===0,this._layerOrderChanged&&this.fire(new n.A("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),d.zoom))&&(this.pauseablePlacement=new xn(d,this._mergedOrder,k,A,T,S,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,Y,re,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),K=!0),Z&&this.pauseablePlacement.placement.setStale()),K||Z){this._buildingIndex.onNewFrame(d.zoom);for(let ne=0;ne<this._mergedOrder.length;ne++){const pe=this._mergedLayers[this._mergedOrder[ne]];if(pe.type!=="symbol")continue;const Pe=this.isLayerClipped(pe);this.placement.updateLayerOpacities(pe,Y[n.C(pe.source,pe.scope)],ne,Pe?E:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,d){this._checkLoaded();const A=this.stylesheet.imports=this.stylesheet.imports||[];if(A.findIndex(({id:S})=>S===o.id)!==-1)return void this.fire(new n.z(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!d)return A.push(o),this._loadImports([o],!0);const T=A.findIndex(({id:S})=>S===d);return T===-1&&this.fire(new n.z(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=A.slice(0,T).concat(o).concat(A.slice(T)),this._loadImports([o],!0,d)}updateImport(o,d){this._checkLoaded();const A=this.stylesheet.imports||[],T=this.getImportIndex(o);return T===-1?this:typeof d=="string"?(this.setImportUrl(o,d),this):(d.url&&d.url!==A[T].url&&this.setImportUrl(o,d.url),n.bn(d.config,A[T].config)||this.setImportConfig(o,d.config,d.data.schema),n.bn(d.data,A[T].data)||this.setImportData(o,d.data),this)}moveImport(o,d){this._checkLoaded();let A=this.stylesheet.imports||[];const T=this.getImportIndex(o);if(T===-1)return this;const S=this.getImportIndex(d);if(S===-1)return this;const E=A[T],k=this.fragments[T];return A=A.filter(({id:Z})=>Z!==o),this.fragments=this.fragments.filter(({id:Z})=>Z!==o),this.stylesheet.imports=A.slice(0,S).concat(E).concat(A.slice(S)),this.fragments=this.fragments.slice(0,S).concat(k).concat(this.fragments.slice(S)),this.mergeLayers(),this}setImportUrl(o,d){this._checkLoaded();const A=this.stylesheet.imports||[],T=this.getImportIndex(o);if(T===-1)return this;A[T].url=d;const S=this.fragments[T];return S.style=this._createFragmentStyle(A[T]),S.style.on("style.import.load",()=>this.mergeAll()),S.style.loadURL(d),this}setImportData(o,d){this._checkLoaded();const A=this.getImportIndex(o),T=this.stylesheet.imports||[];return A===-1?this:d?(this.fragments[A].style.setState(d),this._reloadImports(),this):(delete T[A].data,this.setImportUrl(o,T[A].url))}setImportConfig(o,d,A){this._checkLoaded();const T=this.getImportIndex(o),S=this.stylesheet.imports||[];if(T===-1)return this;d?S[T].config=d:delete S[T].config;const E=this.fragments[T];A&&E.style.stylesheet&&(E.style.stylesheet.schema=A);const k=E.style.stylesheet&&E.style.stylesheet.schema;return E.config=d,E.style.updateConfig(d,k),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const d=this.stylesheet.imports||[],A=this.getImportIndex(o);A!==-1&&(d.splice(A,1),this.fragments[A].style._remove(),this.fragments.splice(A,1),this._reloadImports())}getImportIndex(o){const d=(this.stylesheet.imports||[]).findIndex(A=>A.id===o);return d===-1&&this.fire(new n.z(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),d}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const d in this._mergedOtherSourceCaches){const A=this._mergedOtherSourceCaches[d];A&&o.push(A.getSource())}return o}getSource(o,d){const A=this.getSourceCache(o,d);return A&&A.getSource()}getLayerSource(o){const d=this.getLayerSourceCache(o);return d&&d.getSource()}getSourceCache(o,d){const A=n.C(o,d);return this._mergedOtherSourceCaches[A]}getLayerSourceCache(o){const d=n.C(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[o]&&d.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&d.push(this._mergedSymbolSourceCaches[o]),d}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const d in o){const A=o[d];A==="reload"?this.reloadSource(d):A==="clear"&&this.clearSource(d)}}updateLayers(o){const d=this._changes.getUpdatedPaintProperties();for(const A of d){const T=this.getLayer(A);T&&T.updateTransitions(o)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(o){this.stylesheet.glyphs=o,this.glyphManager.setURL(o,this.scope)}getImages(o,d,A){this.imageManager.getImages(d.images,d.scope,A),this._updateTilesForChangedImages();const T=E=>{if(E){const k=d.images.map(Z=>n.I.toString(Z));E.setDependencies(d.tileID.key,d.type,k)}},S=n.C(d.source,d.scope);T(this._mergedOtherSourceCaches[S]),T(this._mergedSymbolSourceCaches[S])}rasterizeImages(o,d,A){this.imageManager.rasterizeImages(d,A)}getGlyphs(o,d,A){this.glyphManager.getGlyphs(d.stacks,d.scope,A)}getResource(o,d,A){return n.cz(d,A)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const d=[];return this._otherSourceCaches[o]&&d.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&d.push(this._symbolSourceCaches[o]),d}_isSourceCacheLoaded(o){const d=this.getOwnSourceCaches(o);return d.length===0?(this.fire(new n.z(new Error(`There is no source with ID '${o}'`))),!1):d.every(A=>A.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,d){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const A=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D(!!this.terrain)){if(A||d&&d.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}so.getSourceType=function(y){return Yl[y]},so.setSourceType=function(y,o){Yl[y]=o},so.registerForPluginStateChange=n.ci;var Gc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,wc=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,xu=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Zc="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Pu=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,qc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Rc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Yu=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,$o=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,gs=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Qn=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ni=[];su(Gc,ni),su(xu,ni),su(wc,ni);const Xi={"_prelude_fog.vertex.glsl":qc,"_prelude_terrain.vertex.glsl":Pu,"_prelude_shadow.vertex.glsl":gs,"_prelude_fog.fragment.glsl":Rc,"_prelude_shadow.fragment.glsl":Qn,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Yu,"_prelude_raster_particle.glsl":$o},ds={};an("",Pu),an(Rc,qc),an(Qn,gs),an(Yu,""),an($o,"");const iu=an(wc,xu),Hc=Gc;var nl={background:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:an("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:an(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:an(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:an("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:an("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:an("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:an(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:an(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:an(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:an(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:an(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:an(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),0.001);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:an("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:an("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:an(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:an(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:an("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:an(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Zc),skyboxGradient:an(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Zc),skyboxCapture:an(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:an(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:an(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:an(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:an("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:an("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:an("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:an("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function su(y,o){const d=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let A of d)if(A=A.trim(),A[0]==="#"&&A.includes("if")&&!A.includes("endif")){A=A.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const T=A.split(" ");for(const S of T)o.includes(S)||o.push(S)}}function an(y,o){const d=/#include\s+"([^"]+)"/g,A=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let T=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);T&&(T=T.map(K=>{const Y=K.split(" ");return Y[Y.length-1]}),T=[...new Set(T)]);const S={},E=[],k=[];if(y=y.replace(d,(K,Y)=>(k.push(Y),"")),(o=o.replace(d,(K,Y)=>(E.push(Y),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let Z=[...ni];su(y,Z),su(o,Z);for(const K of[...E,...k])Xi[K]||console.error(`Undefined include: ${K}`),ds[K]||(ds[K]=[],su(Xi[K],ds[K])),Z=[...Z,...ds[K]];return{fragmentSource:y=y.replace(A,(K,Y,re,ne,pe)=>(S[pe]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
in ${re} ${ne} ${pe};
#else
uniform ${re} ${ne} u_${pe};
#endif
`:Y==="initialize"?`
#ifdef HAS_UNIFORM_u_${pe}
    ${re} ${ne} ${pe} = u_${pe};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    in ${re} ${ne} ${pe};
#endif
`:Y==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(A,(K,Y,re,ne,pe)=>{const Pe=ne==="float"?"vec2":ne,Ce=pe.match(/color/)?"color":Pe;return Y==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
in ${re} ${ne} a_${pe};
#endif
`:S[pe]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${re} ${Pe} a_${pe};
out ${re} ${ne} ${pe};
#else
uniform ${re} ${ne} u_${pe};
#endif
`:Y==="initialize"?Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${re} ${ne} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Ce}(a_${pe}, u_${pe}_t);
#else
    ${re} ${ne} ${pe} = u_${pe};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    in ${re} ${ne} a_${pe};
    out ${re} ${ne} ${pe};
#endif
`:Y==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    ${pe} = a_${pe};
#endif
`:void 0:Y==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${re} ${Pe} a_${pe};
#else
uniform ${re} ${ne} u_${pe};
#endif
`:Y==="define-instanced"?Ce==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${pe}0;
in vec4 a_${pe}1;
in vec4 a_${pe}2;
in vec4 a_${pe}3;
#else
uniform ${re} ${ne} u_${pe};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${re} ${Pe} a_${pe};
#else
uniform ${re} ${ne} u_${pe};
#endif
`:Y==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    ${re} ${ne} ${pe} = a_${pe};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${re} ${ne} ${pe} = a_${pe};
#else
    ${re} ${ne} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${re} ${ne} ${pe} = unpack_mix_${Ce}(a_${pe}, u_${pe}_t);
#else
    ${re} ${ne} ${pe} = u_${pe};
#endif
`}),staticAttributes:T,usedDefines:Z,vertexIncludes:E,fragmentIncludes:k}}class $c{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,d,A,T,S,E,k,Z){this.context=o;let K=this.boundPaintVertexBuffers.length!==T.length;for(let re=0;!K&&re<T.length;re++)this.boundPaintVertexBuffers[re]!==T[re]&&(K=!0);let Y=this.boundDynamicVertexBuffers.length!==k.length;for(let re=0;!Y&&re<k.length;re++)this.boundDynamicVertexBuffers[re]!==k[re]&&(Y=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==A||K||Y||this.boundIndexBuffer!==S||this.boundVertexOffset!==E)this.freshBind(d,A,T,S,E,k,Z);else{o.bindVertexArrayOES.set(this.vao);for(const re of k)re&&(re.bind(),Z&&re.instanceCount&&re.setVertexAttribDivisor(o.gl,d,Z));S&&S.dynamicDraw&&S.bind()}}freshBind(o,d,A,T,S,E,k){const Z=o.numAttributes,K=this.context,Y=K.gl;this.vao&&this.destroy(),this.vao=K.gl.createVertexArray(),K.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=T,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=E,d.enableAttributes(Y,o),d.bind(),d.setVertexAttribPointers(Y,o,S);for(const re of A)re.enableAttributes(Y,o),re.bind(),re.setVertexAttribPointers(Y,o,S);for(const re of E)re&&(re.enableAttributes(Y,o),re.bind(),re.setVertexAttribPointers(Y,o,S),k&&re.instanceCount&&re.setVertexAttribDivisor(Y,o,k));T&&T.bind(),K.currentNumAttributes=Z}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Il(y,o){const d=Math.pow(2,o.canonical.z),A=o.canonical.y;return[new n.ac(0,A/d).toLngLat().lat,new n.ac(0,(A+1)/d).toLngLat().lat]}function ss(y,o,d,A,T,S,E){const k=y.context,Z=k.gl,K=d.hillshadeFBO;if(!K)return;y.prepareDrawTile();const Y=y.isTileAffectedByFog(o),re=y.getOrCreateProgram("hillshade",{overrideFog:Y});k.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,K.colorAttachment.get());const ne=((Ve,Le,$e,nt)=>{const at=$e.paint.get("hillshade-shadow-color"),pt=$e.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",ot=$e.paint.get("hillshade-highlight-color"),ut=$e.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",ct=$e.paint.get("hillshade-accent-color"),At=$e.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",Tt=$e.paint.get("hillshade-emissive-strength");let Qt=n.ak($e.paint.get("hillshade-illumination-direction"));if($e.paint.get("hillshade-illumination-anchor")==="viewport")Qt-=Ve.transform.angle;else if(Ve.style&&Ve.style.enable3dLights()&&Ve.style.directionalLight){const ra=Ve.style.directionalLight.properties.get("direction"),ca=n.cc(ra.x,ra.y,ra.z);Qt=n.ak(ca[1])}const Ut=!Ve.options.moving;return{u_matrix:nt||Ve.transform.calculateProjMatrix(Le.tileID.toUnwrapped(),Ut),u_image:0,u_latrange:Il(0,Le.tileID),u_light:[$e.paint.get("hillshade-exaggeration"),Qt],u_shadow:at.toRenderColor(pt?null:$e.lut),u_highlight:ot.toRenderColor(ut?null:$e.lut),u_emissive_strength:Tt,u_accent:ct.toRenderColor(At?null:$e.lut)}})(y,d,A,y.terrain?o.projMatrix:null);y.uploadCommonUniforms(k,re,o.toUnwrapped());const{tileBoundsBuffer:pe,tileBoundsIndexBuffer:Pe,tileBoundsSegments:Ce}=y.getTileBoundsBuffers(d);re.draw(y,Z.TRIANGLES,T,S,E,wr.disabled,ne,A.id,pe,Pe,Ce)}function Tc(y,o,d){if(!o.needsDEMTextureUpload)return;const A=y.context,T=A.gl;A.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||y.getTileTexture(d.stride);const S=d.getPixels();o.demTexture?o.demTexture.update(S,{premultiply:!1}):o.demTexture=new n.T(A,S,T.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function kd(y,o,d){const A=y.context,T=A.gl;if(!o.dem)return;const S=o.dem;if(A.activeTexture.set(T.TEXTURE1),Tc(y,o,S),!o.demTexture)return;o.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);const E=S.dim;A.activeTexture.set(T.TEXTURE0);let k=o.hillshadeFBO;if(!k){const ne=new n.T(A,{width:E,height:E,data:null},T.RGBA8);ne.bind(T.LINEAR,T.CLAMP_TO_EDGE),k=o.hillshadeFBO=A.createFramebuffer(E,E,!0,"renderbuffer"),k.colorAttachment.set(ne.texture)}A.bindFramebuffer.set(k.framebuffer),A.viewport.set([0,0,E,E]);const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:K,tileBoundsSegments:Y}=y.getMercatorTileBoundsBuffers(),re=[];y.linearFloatFilteringSupported()&&re.push("TERRAIN_DEM_FLOAT_FORMAT"),y.getOrCreateProgram("hillshadePrepare",{defines:re}).draw(y,T.TRIANGLES,or.disabled,Tr.disabled,Nr.unblended,wr.disabled,((ne,pe)=>{const Pe=pe.stride,Ce=n.ad.mat4.create();return n.ad.mat4.ortho(Ce,0,n.ai,-n.ai,0,0,1),n.ad.mat4.translate(Ce,Ce,[0,-n.ai,0]),{u_matrix:Ce,u_image:1,u_dimension:[Pe,Pe],u_zoom:ne.overscaledZ}})(o.tileID,S),d.id,Z,K,Y),o.needsHillshadePrepare=!1}class fi{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Gh extends fi{getDefault(){return n.al.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class il extends fi{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class vl extends fi{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Kc extends fi{getDefault(){return[!0,!0,!0,!0]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Eu extends fi{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Xu extends fi{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Cc extends fi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const d=this.current;(o.func!==d.func||o.ref!==d.ref||o.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class em extends fi{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Zh extends fi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=o,this.dirty=!1}}class qh extends fi{getDefault(){return[0,1]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class sl extends fi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=o,this.dirty=!1}}class Ji extends fi{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Ri extends fi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.BLEND):d.disable(d.BLEND),this.current=o,this.dirty=!1}}class ou extends fi{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Nu extends fi{getDefault(){return n.al.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class op extends fi{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class Sc extends fi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=o,this.dirty=!1}}class xf extends fi{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Ud extends fi{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let Hh=class extends fi{getDefault(){return null}set(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)}};class $h extends fi{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Bd extends fi{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Pf extends fi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Qm extends fi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class vh extends fi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class qg extends fi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class bc extends fi{getDefault(){return null}set(o){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ju extends fi{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Ou extends fi{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Hg extends fi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Kh extends fi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class _l extends fi{constructor(o,d){super(o),this.context=o,this.parent=d}getDefault(){return null}}class ol extends _l{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Wh extends _l{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class jd extends _l{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class tm extends Wh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const am=(y,o,d)=>({u_matrix:y,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:d}),Wc=(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(A),u_merc_matrix:d,u_zoom_transition:T,u_merc_center:S,u_image0:0,u_frustum_tl:E,u_frustum_tr:k,u_frustum_br:Z,u_frustum_bl:K,u_globe_pos:Y,u_globe_radius:re,u_viewport:ne,u_grid_matrix:Ce?Float32Array.from(Ce):new Float32Array(9),u_skirt_height:pe,u_far_z_cutoff:Pe});function Ef(y,o){return y!=null&&o!=null&&!(!y.hasData()||!o.hasData())&&y.demTexture!=null&&o.demTexture!=null&&y.tileID.key!==o.tileID.key}const ll=new class{constructor(){this.operations={}}newMorphing(y,o,d,A,T){if(y in this.operations){const S=this.operations[y];S.to.tileID.key!==d.tileID.key&&(S.queued=d)}else this.operations[y]={startTime:A,phase:0,duration:T,from:o,to:d,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const o=this.operations[y];return{from:o.from,to:o.to,phase:o.phase}}update(y){for(const o in this.operations){const d=this.operations[o];for(d.phase=(y-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,y)){delete this.operations[o];break}}}_nextOp(y,o){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=o,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},Gd={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Vu(y,o,d){if(o===0)return 0;const A=o<1&&d===514?.25/o:1;return 6*Math.pow(1.5,22-y)*Math.max(o,1)*A}function Zd(y,o){const d=1<<y.z;return!o&&(y.x===0||y.x===d-1)||y.y===0||y.y===d-1}const Yc=y=>({u_matrix:y});function Ll(y,o,d,A,T){if(T>0){const S=n.q.now(),E=(S-y.timeAdded)/T,k=o?(S-o.timeAdded)/T:-1,Z=d.getSource(),K=A.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),Y=!o||Math.abs(o.tileID.overscaledZ-K)>Math.abs(y.tileID.overscaledZ-K),re=Y&&y.refreshedUponExpiration?1:n.ay(Y?E:1-k,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),o?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}class Qu extends tl{constructor(o){const d={type:"raster-dem",maxzoom:o.transform.maxZoom},A=new n.D(n.cj(),null),T=Bo("mock-dem",d,A,o.style);super("mock-dem",T,!1),T.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,d){o.state="loaded",d(null)}}class Xc extends tl{constructor(o){const d=Bo("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new n.D(n.cj(),null),o.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,d,A){if(o.freezeTileCoverage)return;this.transform=o;const T=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,E)=>{if(S[E.key]="",!this._tiles[E.key]){const k=new Jl(E,this._source.tileSize*E.overscaleFactor(),o.tileZoom);k.state="loaded",this._tiles[E.key]=k}return S},{});for(const S in this._tiles)S in T||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(o){const d=this.proxyCachedFBO[o];if(d!==void 0){const A=Object.values(d);this.renderCachePool.push(...A),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class lp extends n.aH{constructor(o,d,A){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=d,this.projMatrix=A}}class qd extends n.cK{constructor(o,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[A,T,S]=function(Z){const K=new n.b5,Y=new n.aV,re=131;K.reserve(17161),Y.reserve(33800);const ne=n.ai/128,pe=n.ai+ne/2,Pe=pe+ne;for(let Ve=-ne;Ve<Pe;Ve+=ne)for(let Le=-ne;Le<Pe;Le+=ne){const $e=Le<0||Le>pe||Ve<0||Ve>pe?24575:0,nt=n.ay(Math.round(Le),0,n.ai),at=n.ay(Math.round(Ve),0,n.ai);K.emplaceBack(nt+$e,at)}const Ce=(Ve,Le)=>{const $e=Le*re+Ve;Y.emplaceBack($e+1,$e,$e+re),Y.emplaceBack($e+re,$e+re+1,$e+1)};for(let Ve=1;Ve<129;Ve++)for(let Le=1;Le<129;Le++)Ce(Le,Ve);return[0,129].forEach(Ve=>{for(let Le=0;Le<130;Le++)Ce(Le,Ve),Ce(Ve,Le)}),[K,Y,32768]}(),E=o.context;this.gridBuffer=E.createVertexBuffer(A,n.b7.members),this.gridIndexBuffer=E.createIndexBuffer(T),this.gridSegments=n.b8.simpleSegment(0,0,A.length,T.length),this.gridNoSkirtSegments=n.b8.simpleSegment(0,0,A.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Xc(d.map),this.orthoMatrix=n.ad.mat4.create(),n.ad.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ai,0,n.ai,0,1);const k=E.gl;this._overlapStencilMode=new Tr({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Qu(d.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,d,A){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const T=o.terrain.properties,S=o.terrain.drapeRenderMode===0,E=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const k=o.terrain&&o.terrain.scope,Z=T.get("source"),K=S?this._mockSourceCache:o.getSourceCache(Z,k);if(!K)return void n.w(`Couldn't find terrain source "${Z}".`);if(this.sourceCache=K,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=E?this.calculateExaggeration(d):T.get("exaggeration"),!d.projection.requiresDraping&&E&&this._exaggeration===0)return void this._disable();this.enabled=!0;const Y=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const re=this.getScaledDemTileSize();this.sourceCache.update(d,re,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Y(),this._initializing=!0),Y(),d.updateElevation(!0,A),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const d=this._previousCameraAltitude,A=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=A;const T=d!=null?A-d:Number.MAX_VALUE;if(Math.abs(T)<2)return this._exaggeration;const S=o.zoom,E=this._style.terrain;if(!this._previousUpdateTimestamp)return E.getExaggeration(S);let k=S-this._previousZoom;const Z=this._previousUpdateTimestamp;let K=S;this._evaluationZoom!=null&&(K=this._evaluationZoom,Math.abs(S-K)>.5&&(k=.5*(S-K+k)),k*T<0&&(K+=k)),this._evaluationZoom=K;const Y=E.getExaggeration(K),re=Y===E.getExaggeration(Math.max(0,K-.1));if(re&&Math.abs(Y-this._exaggeration)<.01)return Y;let ne=Math.min(.1,.00375*(this._updateTimestamp-Z));return(re||Y<.1||Math.abs(k)<1e-4)&&(ne=Math.min(.2,4*ne)),n.ah(this._exaggeration,Y,ne)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,A=this.painter.transform;this._initializing&&(this._initializing=A._centerAltitude===0&&this.getAtPointOrZero(n.ac.fromLngLat(A.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=d.getIds().map(Z=>{const K=d.getTileByID(Z).tileID;return K.projMatrix=A.calculateProjMatrix(K.toUnwrapped()),K});(function(Z,K){const Y=K.transform.pointCoordinate(K.transform.getCameraPoint()),re=new n.P(Y.x,Y.y);Z.sort((ne,pe)=>{if(pe.overscaledZ-ne.overscaledZ)return pe.overscaledZ-ne.overscaledZ;const Pe=new n.P(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),Ce=new n.P(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),Ve=re.mult(1<<ne.canonical.z);return Ve.x-=.5,Ve.y-=.5,Ve.distSqr(Pe)-Ve.distSqr(Ce)})})(T,this.painter);const S=this.proxyToSource||{};this.proxyToSource={},T.forEach(Z=>{this.proxyToSource[Z.key]={}}),this.terrainTileForTile={};const E=this._style._mergedSourceCaches;for(const Z in E){const K=E[Z];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,o[Z],S),K.usedForTerrain))continue;const Y=o[Z];K.getSource().reparseOverscaled&&this._assignTerrainTiles(Y)}this.proxiedCoords[d.id]=T.map(Z=>new lp(Z,Z.key,this.orthoMatrix)),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1;const k={};this._visibleDemTiles=[];for(const Z of this.proxyCoords){const K=this.terrainTileForTile[Z.key];if(!K)continue;const Y=K.tileID.key;Y in k||(this._visibleDemTiles.push(K),k[Y]=Y)}}_assignTerrainTiles(o){this._initializing||o.forEach(d=>{if(this.terrainTileForTile[d.key])return;const A=this._findTileCoveringTileID(d,this.sourceCache);A&&(this.terrainTileForTile[d.key]=A)})}_prepareDEMTextures(){const o=this.painter.context,d=o.gl;for(const A in this.terrainTileForTile){const T=this.terrainTileForTile[A],S=T.dem;!S||T.demTexture&&!T.needsDEMTextureUpload||(o.activeTexture.set(d.TEXTURE1),Tc(this.painter,T,S))}}_prepareDemTileUniforms(o,d,A,T){if(!d||d.demTexture==null)return!1;const S=o.tileID.canonical,E=Math.pow(2,d.tileID.canonical.z-S.z),k=T||"";return A[`u_dem_tl${k}`]=[S.x*E%1,S.y*E%1],A[`u_dem_scale${k}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const d=this._visibleDemTiles.reduce((A,T)=>{if(!T.dem)return A;const S=T.dem.tree.minimums[0];return S>0&&o++,A+S},0);return o?d/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,d=o.gl;o.activeTexture.set(d.TEXTURE2);const A=this._getLoadedAreaMinimum(),T=new n.cL({width:1,height:1},new Float32Array([A]));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(T,{premultiply:!1}):S=this._emptyDEMTexture=new n.T(o,T,d.R32F,{premultiply:!1}),S}setupElevationDraw(o,d,A){const T=this.painter.context,S=T.gl,E={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};E.u_exaggeration=this.exaggeration();let k=null,Z=null,K=1;if(A&&A.morphing&&this._useVertexMorphing){const pe=A.morphing.srcDemTile,Pe=A.morphing.dstDemTile;K=A.morphing.phase,pe&&Pe&&(this._prepareDemTileUniforms(o,pe,E,"_prev")&&(Z=pe),this._prepareDemTileUniforms(o,Pe,E)&&(k=Pe))}const Y=pe=>pe&&pe.demTexture&&this.painter.linearFloatFilteringSupported()?S.LINEAR:S.NEAREST;let re=null;var ne;if(this.enabled?Z&&k?(re=k.demTexture,T.activeTexture.set(S.TEXTURE4),Z.demTexture.bind(Y(Z),S.CLAMP_TO_EDGE),E.u_dem_lerp=K):(k=this.terrainTileForTile[o.tileID.key],re=this._prepareDemTileUniforms(o,k,E)?k.demTexture:this.emptyDEMTexture):re=this.emptyDEMTexture,T.activeTexture.set(S.TEXTURE2),re&&(E.u_dem_size=(ne=re).size[0]===1?1:ne.size[0]-2,re.bind(Y(k),S.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(A&&A.useDepthForOcclusion,d,E),A&&A.useMeterToDem&&k){const pe=(1<<k.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=pe}if(A&&A.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=A.labelPlaneMatrixInv),d.setTerrainUniformValues(T,E),this.painter.transform.projection.name==="globe"){const pe=this.globeUniformValues(this.painter.transform,o.tileID.canonical,A&&A.useDenormalizedUpVectorScale);d.setGlobeUniformValues(T,pe)}}globeUniformValues(o,d,A){const T=o.projection;return{u_tile_tl_up:T.upVector(d,0,0),u_tile_tr_up:T.upVector(d,n.ai,0),u_tile_br_up:T.upVector(d,n.ai,n.ai),u_tile_bl_up:T.upVector(d,0,n.ai),u_tile_up_scale:A?n.cM(1):T.upVectorScale(d,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const d=this.painter,A=this.painter.context;o.length!==0&&(A.bindFramebuffer.set(null),A.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(T,S,E,k,Z){if(T.transform.projection.name==="globe")(function(K,Y,re,ne,pe){const Pe=K.context,Ce=Pe.gl;let Ve,Le;const $e=K.transform,nt=n.cD(K,Pe,$e),at=(ra,ca)=>{if(Le===ca)return;const Sa=[Gd[ca],"PROJECTION_GLOBE_VIEW"];nt&&Sa.push("CUSTOM_ANTIALIASING");const Ft=K.isTileAffectedByFog(ra);Ve=K.getOrCreateProgram("globeRaster",{defines:Sa,overrideFog:Ft}),Le=ca},pt=K.colorModeForRenderPass(),ot=new or(Ce.LEQUAL,or.ReadWrite,K.depthRangeFor3D);ll.update(pe);const ut=n.cE($e),ct=[n.av($e.center.lng),n.aC($e.center.lat)],At=K.globeSharedBuffers,Tt=[$e.width*n.q.devicePixelRatio,$e.height*n.q.devicePixelRatio],Qt=Float32Array.from($e.globeMatrix),Ut={useDenormalizedUpVectorScale:!0};{const ra=K.transform,ca=Vu(ra.zoom,Y.exaggeration(),Y.sourceCache._source.tileSize);Le=-1;const Sa=Ce.TRIANGLES;for(const Ft of ne){const sa=re.getTile(Ft),Vt=Tr.disabled,oa=Y.prevTerrainTileForTile[Ft.key],ta=Y.terrainTileForTile[Ft.key];Ef(oa,ta)&&ll.newMorphing(Ft.key,oa,ta,pe,250),Pe.activeTexture.set(Ce.TEXTURE0),sa.texture&&sa.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const da=ll.getMorphValuesForProxy(Ft.key),Yt=da?1:0;da&&n.L(Ut,{morphing:{srcDemTile:da.from,dstDemTile:da.to,phase:n.cC(da.phase)}});const pa=n.cF(Ft.canonical),Ia=n.cG(pa.getCenter().lat),La=n.cH(Ft.canonical,pa,Ia,ra.worldSize/ra._pixelsPerMercatorPixel),Oa=n.bc(n.cI(Ft.canonical)),lr=Wc(ra.expandedFarZProjMatrix,Qt,ut,Oa,n.ag(ra.zoom),ct,ra.frustumCorners.TL,ra.frustumCorners.TR,ra.frustumCorners.BR,ra.frustumCorners.BL,ra.globeCenterInViewSpace,ra.globeRadius,Tt,ca,ra._farZ,La);if(at(Ft,Yt),Ve&&(Y.setupElevationDraw(sa,Ve,Ut),K.uploadCommonUniforms(Pe,Ve,Ft.toUnwrapped()),At)){const[kr,yr,Dr]=At.getGridBuffers(Ia,ca!==0);Ve.draw(K,Sa,ot,Vt,pt,wr.backCCW,lr,"globe_raster",kr,yr,Dr)}}}if(At&&(K.renderDefaultNorthPole||K.renderDefaultSouthPole)){const ra=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];nt&&ra.push("CUSTOM_ANTIALIASING"),Ve=K.getOrCreateProgram("globeRaster",{defines:ra});for(const ca of ne){const{x:Sa,y:Ft,z:sa}=ca.canonical,Vt=Ft===0,oa=Ft===(1<<sa)-1,[ta,da,Yt,pa]=At.getPoleBuffers(sa,!1);if(pa&&(Vt||oa)){const Ia=re.getTile(ca);Pe.activeTexture.set(Ce.TEXTURE0),Ia.texture&&Ia.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);let La=n.cJ(sa,Sa,$e);const Oa=n.bc(n.cI(ca.canonical)),lr=(kr,yr)=>kr.draw(K,Ce.TRIANGLES,ot,Tr.disabled,pt,wr.disabled,Wc($e.expandedFarZProjMatrix,La,La,Oa,0,ct,$e.frustumCorners.TL,$e.frustumCorners.TR,$e.frustumCorners.BR,$e.frustumCorners.BL,$e.globeCenterInViewSpace,$e.globeRadius,Tt,0,$e._farZ),"globe_pole_raster",yr,Yt,pa);Y.setupElevationDraw(Ia,Ve,Ut),K.uploadCommonUniforms(Pe,Ve,ca.toUnwrapped()),Vt&&K.renderDefaultNorthPole&&lr(Ve,ta),oa&&K.renderDefaultSouthPole&&(La=n.ad.mat4.scale(n.ad.mat4.create(),La,[1,-1,1]),lr(Ve,da))}}}})(T,S,E,k,Z);else{const K=T.context,Y=K.gl;let re,ne;const pe=T.shadowRenderer,Pe=Ys(T,T.longestCutoffRange),Ce=pt=>{if(ne===pt)return;const ot=[];ot.push(Gd[pt]),Pe.shouldRenderCutoff&&ot.push("RENDER_CUTOFF"),pe&&(ot.push("RENDER_SHADOWS","DEPTH_TEXTURE"),pe.useNormalOffset&&ot.push("NORMAL_OFFSET")),re=T.getOrCreateProgram("terrainRaster",{defines:ot}),ne=pt},Ve=T.colorModeForRenderPass(),Le=new or(Y.LEQUAL,or.ReadWrite,T.depthRangeFor3D);ll.update(Z);const $e=T.transform,nt=Vu($e.zoom,S.exaggeration(),S.sourceCache._source.tileSize);let at=[0,0,0];if(pe){const pt=T.style.directionalLight,ot=T.style.ambientLight;pt&&ot&&(at=Bc(T.style,pt,ot))}{ne=-1;const pt=Y.TRIANGLES,[ot,ut]=[S.gridIndexBuffer,S.gridSegments];for(const ct of k){const At=E.getTile(ct),Tt=Tr.disabled,Qt=S.prevTerrainTileForTile[ct.key],Ut=S.terrainTileForTile[ct.key];Ef(Qt,Ut)&&ll.newMorphing(ct.key,Qt,Ut,Z,250),K.activeTexture.set(Y.TEXTURE0),At.texture&&At.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const ra=ll.getMorphValuesForProxy(ct.key),ca=ra?1:0;let Sa;ra&&(Sa={morphing:{srcDemTile:ra.from,dstDemTile:ra.to,phase:n.cC(ra.phase)}});const Ft=am(ct.projMatrix,Zd(ct.canonical,$e.renderWorldCopies)?nt/10:nt,at);if(Ce(ca),!re)continue;S.setupElevationDraw(At,re,Sa);const sa=ct.toUnwrapped();pe&&pe.setupShadows(sa,re),T.uploadCommonUniforms(K,re,sa,null,Pe),re.draw(T,pt,Le,Tt,Ve,wr.backCCW,Ft,"terrain_raster",S.gridBuffer,ot,ut)}}}}(d,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const d=this.painter,A=this.painter.context,T=this.proxySourceCache,S=this.proxiedCoords[T.id],E=this._drapedRenderBatches.shift(),k=d.style.order,Z=[];let K=0;for(const Y of S){const re=T.getTileByID(Y.proxyTileKey),ne=T.proxyCachedFBO[Y.key]?T.proxyCachedFBO[Y.key][o]:void 0,pe=ne!==void 0?T.renderCache[ne]:this.pool[K++],Pe=ne!==void 0;if(re.texture=pe.tex,Pe&&!pe.dirty){Z.push(re.tileID);continue}let Ce;A.bindFramebuffer.set(pe.fb.framebuffer),this.renderedToTile=!1,pe.dirty&&(A.clear({color:n.al.transparent,stencil:0}),pe.dirty=!1);for(let Ve=E.start;Ve<=E.end;++Ve){const Le=d.style._mergedLayers[k[Ve]];if(Le.isHidden(d.transform.zoom))continue;const $e=d.style.getLayerSourceCache(Le),nt=$e?this.proxyToSource[Y.key][$e.id]:[Y];if(!nt)continue;const at=nt;A.viewport.set([0,0,pe.fb.width,pe.fb.height]),Ce!==($e?$e.id:null)&&(this._setupStencil(pe,nt,Le,$e),Ce=$e?$e.id:null),d.renderLayer(d,$e,Le,at)}if(this._drapedRenderBatches.length===0)for(const Ve of this._pendingGroundEffectLayers){const Le=d.style._mergedLayers[k[Ve]];if(Le.isHidden(d.transform.zoom))continue;const $e=d.style.getLayerSourceCache(Le),nt=$e?this.proxyToSource[Y.key][$e.id]:[Y];if(!nt)continue;const at=nt;A.viewport.set([0,0,pe.fb.width,pe.fb.height]),Ce!==($e?$e.id:null)&&(this._setupStencil(pe,nt,Le,$e),Ce=$e?$e.id:null),d.renderLayer(d,$e,Le,at)}this.renderedToTile?(pe.dirty=!0,Z.push(re.tileID)):Pe||--K,K===5&&(K=0,this.renderToBackBuffer(Z))}return this.renderToBackBuffer(Z),this.renderingToTexture=!1,A.bindFramebuffer.set(null),A.viewport.set([0,0,d.width,d.height]),E.end+1}postRender(){}isLayerOrderingCorrect(o){const d=o.order.length;let A=-1,T=d;for(let S=0;S<d;++S)this._style.isLayerDraped(o._mergedLayers[o.order[S]])?A=Math.max(A,S):T=Math.min(T,S);return T>A}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{o=Math.min(o,d.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,d,A){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const E=S.tileID,k=1<<E.overscaledZ,{x:Z,y:K}=E.canonical,Y=Z/k,re=(Z+1)/k,ne=K/k,pe=(K+1)/k;return{minx:Y,miny:ne,maxx:re,maxy:pe,t:S.dem.tree.raycastRoot(Y,ne,re,pe,o,d,A),tile:S}});T.sort((S,E)=>(S.t!==null?S.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const S of T){if(S.t==null)return null;const E=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,o,d,A);if(E!=null)return E}return null}_createFBO(){const o=this.painter.context,d=o.gl,A=this.drapeBufferSize;o.activeTexture.set(d.TEXTURE0);const T=new n.T(o,{width:A[0],height:A[1],data:null},d.RGBA8);T.bind(d.LINEAR,d.CLAMP_TO_EDGE);const S=o.createFramebuffer(A[0],A[1],!0,null);return S.colorAttachment.set(T.texture),S.depthAttachment=new tm(o,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,A[0],A[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:S,tex:T,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const d=this._style._mergedLayers[o],A=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!A&&d.shouldRedrape():!A&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const A of this._style.getSources())if(A instanceof fc){o=!0;break}if(!o)return;const d={};for(let A=0;A<this._style.order.length;++A){const T=this._style._mergedLayers[this._style.order[A]],S=this._style.getLayerSourceCache(T);if(S&&!d[S.id]&&!T.isHidden(this.painter.transform.zoom)&&T.type==="line"&&T.widthExpression()instanceof n.ab){d[S.id]=!0;for(const E of this.proxyCoords){const k=this.proxyToSource[E.key][S.id];if(k)for(const Z of k)this._clearRenderCacheForTile(S.id,Z)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const A in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[A]._source instanceof el){o=!0;break}if(!o)return;const d={};for(let A=0;A<this._style.order.length;++A){const T=this._style._mergedLayers[this._style.order[A]],S=this._style.getLayerSourceCache(T);if(!S||d[S.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="raster")continue;const E=T.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const Z=this.proxyToSource[k.key][S.id];if(Z)for(const K of Z){const Y=Ll(S.getTile(K),S.findLoadedParent(K,0),S,this.painter.transform,E);(Y.opacity!==1||Y.mix!==0)&&this._clearRenderCacheForTile(S.id,K)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const o=this._style.order,d=o.length;if(d===0)return;const A=[];this._pendingGroundEffectLayers=[];let T,S=0,E=this._style._mergedLayers[o[S]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++S<d;)E=this._style._mergedLayers[o[S]];for(;S<d;++S){const k=this._style._mergedLayers[o[S]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?T===void 0&&(T=S):(k.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(S),T!==void 0&&(A.push({start:T,end:S-1}),T=void 0)))}if(T!==void 0&&A.push({start:T,end:S-1}),A.length!==0){const k=A[A.length-1];this._pendingGroundEffectLayers.every(Z=>Z>k.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=A}_setupRenderCache(o){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const E=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let k=0;k<E.length;++k){const Z=Object.values(E[k]);d.renderCachePool.push(...Z)}}return}this._clearRasterLayersFromRenderCache();const A=this.proxyCoords,T=this._tilesDirty;for(let E=A.length-1;E>=0;E--){const k=A[E];if(d.getTileByID(k.key),d.proxyCachedFBO[k.key]!==void 0){const Z=o[k.key],K=this.proxyToSource[k.key];let Y=0;for(const re in K){const ne=K[re],pe=Z[re];if(!pe||pe.length!==ne.length||ne.some((Pe,Ce)=>Pe!==pe[Ce]||T[re]&&T[re].hasOwnProperty(Pe.key))){Y=-1;break}++Y}for(const re in d.proxyCachedFBO[k.key])d.renderCache[d.proxyCachedFBO[k.key][re]].dirty=Y<0||Y!==Object.values(Z).length}}const S=[...this._drapedRenderBatches];S.sort((E,k)=>k.end-k.start-(E.end-E.start));for(const E of S)for(const k of A){if(d.proxyCachedFBO[k.key])continue;let Z=d.renderCachePool.pop();Z===void 0&&d.renderCache.length<50&&(Z=d.renderCache.length,d.renderCache.push(this._createFBO())),Z!==void 0&&(d.proxyCachedFBO[k.key]={},d.proxyCachedFBO[k.key][E.start]=Z,d.renderCache[Z].dirty=!0)}this._tilesDirty={}}_setupStencil(o,d,A,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,E=S.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let k;if(A.isTileClipped())k=d.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,A.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Tr.disabled}_renderTileClippingMasks(o,d){const A=this.painter,T=this.painter.context,S=T.gl;A._tileClippingMaskIDs={},T.setColorMode(Nr.disabled),T.setDepthMode(or.disabled);const E=A.getOrCreateProgram("clippingMask");for(const k of o){const Z=A._tileClippingMaskIDs[k.key]=--d;E.draw(A,S.TRIANGLES,or.disabled,new Tr({func:S.ALWAYS,mask:0},Z,255,S.KEEP,S.KEEP,S.REPLACE),Nr.disabled,wr.disabled,Yc(k.projMatrix),"$clipping",A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}}pointCoordinate(o){const d=this.painter.transform;if(o.x<0||o.x>d.width||o.y<0||o.y>d.height)return null;const A=[o.x,o.y,1,1];n.ad.vec4.transformMat4(A,A,d.pixelMatrixInverse),n.ad.vec4.scale(A,A,1/A[3]),A[0]/=d.worldSize,A[1]/=d.worldSize;const T=d._camera.position,S=n.bH(1,d.center.lat),E=[T[0],T[1],T[2]/S,0],k=n.ad.vec3.subtract([],A.slice(0,3),E);n.ad.vec3.normalize(k,k);const Z=this.raycast(E,k,this._exaggeration);return Z!==null&&Z?(n.ad.vec3.scaleAndAdd(E,E,k,Z),E[3]=E[2],E[2]*=S,E):null}_setupProxiedCoordsForOrtho(o,d,A){if(o.getSource()instanceof n.aK)return this._setupProxiedCoordsForImageSource(o,d,A);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const T=this.proxiedCoords[o.id]=[],S=this.proxyCoords;for(let Z=0;Z<S.length;Z++){const K=S[Z],Y=this._findTileCoveringTileID(K,o);if(Y){const re=this._createProxiedId(K,Y,A[K.key]&&A[K.key][o.id]);T.push(re),this.proxyToSource[K.key][o.id]=[re]}}let E=!1;const k=new Set;for(let Z=0;Z<d.length;Z++){const K=o.getTile(d[Z]);if(!K||!K.hasData())continue;const Y=this._findTileCoveringTileID(K.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==K.tileID.canonical.z){const re=this.proxyToSource[Y.tileID.key][o.id],ne=this._createProxiedId(Y.tileID,K,A[Y.tileID.key]&&A[Y.tileID.key][o.id]);re?re.splice(re.length-1,0,ne):this.proxyToSource[Y.tileID.key][o.id]=[ne];const pe=this.proxyToSource[Y.tileID.key][o.id];k.has(pe)||k.add(pe),T.push(ne),E=!0}}if(this._sourceTilesOverlap[o.id]=E,E&&this._debugParams.sortTilesHiZFirst)for(const Z of k)Z.sort((K,Y)=>Y.overscaledZ-K.overscaledZ)}_setupProxiedCoordsForImageSource(o,d,A){if(!o.getSource().loaded())return;const T=this.proxiedCoords[o.id]=[],S=this.proxyCoords,E=o.getSource(),k=E.tileID;if(!k)return;const Z=new n.P(k.x,k.y)._div(1<<k.z),K=E.coordinates.map(n.ac.fromLngLat).reduce((re,ne)=>(re.min.x=Math.min(re.min.x,ne.x-Z.x),re.min.y=Math.min(re.min.y,ne.y-Z.y),re.max.x=Math.max(re.max.x,ne.x-Z.x),re.max.y=Math.max(re.max.y,ne.y-Z.y),re),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(re,ne)=>{const pe=re.wrap+re.canonical.x/(1<<re.canonical.z),Pe=re.canonical.y/(1<<re.canonical.z),Ce=n.ai/(1<<re.canonical.z),Ve=ne.wrap+ne.canonical.x/(1<<ne.canonical.z),Le=ne.canonical.y/(1<<ne.canonical.z);return pe+Ce<Ve+K.min.x||pe>Ve+K.max.x||Pe+Ce<Le+K.min.y||Pe>Le+K.max.y};for(let re=0;re<S.length;re++){const ne=S[re];for(let pe=0;pe<d.length;pe++){const Pe=o.getTile(d[pe]);if(!Pe||!Pe.hasData()||Y(ne,Pe.tileID))continue;const Ce=this._createProxiedId(ne,Pe,A[ne.key]&&A[ne.key][o.id]),Ve=this.proxyToSource[ne.key][o.id];Ve?Ve.push(Ce):this.proxyToSource[ne.key][o.id]=[Ce],T.push(Ce)}}}_createProxiedId(o,d,A){let T=this.orthoMatrix;if(A){const S=A.find(E=>E.key===d.tileID.key);if(S)return S}if(d.tileID.key!==o.key){const S=o.canonical.z-d.tileID.canonical.z;let E,k,Z;T=n.ad.mat4.create();const K=d.tileID.wrap-o.wrap<<o.overscaledZ;S>0?(E=n.ai>>S,k=E*((d.tileID.canonical.x<<S)-o.canonical.x+K),Z=E*((d.tileID.canonical.y<<S)-o.canonical.y)):(E=n.ai<<-S,k=n.ai*(d.tileID.canonical.x-(o.canonical.x+K<<-S)),Z=n.ai*(d.tileID.canonical.y-(o.canonical.y<<-S))),n.ad.mat4.ortho(T,0,E,0,E,0,1),n.ad.mat4.translate(T,T,[k,Z,0])}return new lp(d.tileID,o.key,T)}_findTileCoveringTileID(o,d){let A=d.getTile(o);if(A&&A.hasData())return A;const T=this._findCoveringTileCache[d.id],S=T[o.key];if(A=S?d.getTileByID(S):null,A&&A.hasData()||S===null)return A;let E=A?A.tileID:o,k=E.overscaledZ;const Z=d.getSource().minzoom,K=[];if(!S){const re=d.getSource().maxzoom;if(o.canonical.z>=re){const ne=o.canonical.z-re;d.getSource().reparseOverscaled?(k=Math.max(o.canonical.z+2,d.transform.tileZoom),E=new n.aH(k,o.wrap,re,o.canonical.x>>ne,o.canonical.y>>ne)):ne!==0&&(k=re,E=new n.aH(k,o.wrap,re,o.canonical.x>>ne,o.canonical.y>>ne))}E.key!==o.key&&(K.push(E.key),A=d.getTile(E))}const Y=re=>{K.forEach(ne=>{T[ne]=re}),K.length=0};for(k-=1;k>=Z&&(!A||!A.hasData());k--){A&&Y(A.tileID.key);const re=E.calculateScaledKey(k);if(A=d.getTileByID(re),A&&A.hasData())break;const ne=T[re];if(ne===null)break;ne===void 0?K.push(re):A=d.getTileByID(ne)}return Y(A?A.tileID.key:null),A&&A.hasData()?A:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,d){let A=this._tilesDirty[o];A||(A=this._tilesDirty[o]={}),A[d.key]=!0}}function Jc(y,o,d){const A=function(k,Z,K){const Y=n.ad.vec3.dot(Z,k),re=n.ad.vec3.dot(K,[.2126,.7152,.0722]),ne=(Pe,Ce,Ve)=>(1-Ve)*Pe+Ve*Ce,pe=ne(1-.3*Math.min(re,1),1,Math.min(Y+1,1));return ne(.92,1,Math.asin(n.ay(Z[2],-1,1))/Math.PI+.5)*pe}(y,[0,0,1],o),T=[0,0,0];n.ad.vec3.scale(T,d.slice(0,3),A);const S=[0,0,0];n.ad.vec3.scale(S,o.slice(0,3),y[2]);const E=[0,0,0];return n.ad.vec3.add(E,T,S),n.cg(E)}const Bs=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],rm=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class eg{static cacheKey(o,d,A,T){let S=`${d}${T?T.cacheKey:""}`;for(const E of A)o.usedDefines.includes(E)&&(S+=`/${E}`);return S}constructor(o,d,A,T,S,E){const k=o.gl;this.program=k.createProgram(),this.configuration=T,this.name=d,this.fixedDefines=[...E];const Z=T?T.getBinderAttributes():[],K=(A.staticAttributes||[]).concat(Z);let Y=T?T.defines():[];Y=Y.concat(E.map(Ve=>`#define ${Ve}`));const re=`#version 300 es
`;let ne=re+Y.concat("precision mediump float;",Hc,iu.fragmentSource).join(`
`);for(const Ve of A.fragmentIncludes)ne+=`
${Xi[Ve]}`;ne+=`
${A.fragmentSource}`;let pe=re+Y.concat("precision highp float;",Hc,iu.vertexSource).join(`
`);for(const Ve of A.vertexIncludes)pe+=`
${Xi[Ve]}`;this.forceManualRenderingForInstanceIDShaders=o.forceManualRenderingForInstanceIDShaders&&A.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(pe+=`
uniform int u_instanceID;
`),pe+=`
${A.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(pe=pe.replaceAll("gl_InstanceID","u_instanceID"));const Pe=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(Pe,ne),k.compileShader(Pe),k.attachShader(this.program,Pe);const Ce=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Ce,pe),k.compileShader(Ce),k.attachShader(this.program,Ce),this.attributes={},this.numAttributes=K.length;for(let Ve=0;Ve<this.numAttributes;Ve++)if(K[Ve]){const Le=K[Ve].startsWith("a_")?K[Ve]:`a_${K[Ve]}`;k.bindAttribLocation(this.program,Ve,Le),this.attributes[Le]=Ve}k.linkProgram(this.program),k.deleteShader(Ce),k.deleteShader(Pe),this.fixedUniforms=S(o),this.binderUniforms=T?T.getUniforms(o):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(Ve=>({u_instanceID:new n.bN(Ve)}))(o)),(E.includes("TERRAIN")||d.indexOf("symbol")!==-1||d.indexOf("circle")!==-1)&&(this.terrainUniforms=(Ve=>({u_dem:new n.bN(Ve),u_dem_prev:new n.bN(Ve),u_dem_tl:new n.bK(Ve),u_dem_scale:new n.bM(Ve),u_dem_tl_prev:new n.bK(Ve),u_dem_scale_prev:new n.bM(Ve),u_dem_size:new n.bM(Ve),u_dem_lerp:new n.bM(Ve),u_exaggeration:new n.bM(Ve),u_depth:new n.bN(Ve),u_depth_size_inv:new n.bK(Ve),u_depth_range_unpack:new n.bK(Ve),u_occluder_half_size:new n.bM(Ve),u_occlusion_depth_offset:new n.bM(Ve),u_meter_to_dem:new n.bM(Ve),u_label_plane_matrix_inv:new n.bJ(Ve)}))(o)),E.includes("GLOBE")&&(this.globeUniforms=(Ve=>({u_tile_tl_up:new n.bL(Ve),u_tile_tr_up:new n.bL(Ve),u_tile_br_up:new n.bL(Ve),u_tile_bl_up:new n.bL(Ve),u_tile_up_scale:new n.bM(Ve)}))(o)),E.includes("FOG")&&(this.fogUniforms=(Ve=>({u_fog_matrix:new n.bJ(Ve),u_fog_range:new n.bK(Ve),u_fog_color:new n.cb(Ve),u_fog_horizon_blend:new n.bM(Ve),u_fog_vertical_limit:new n.bK(Ve),u_fog_temporal_offset:new n.bM(Ve),u_frustum_tl:new n.bL(Ve),u_frustum_tr:new n.bL(Ve),u_frustum_br:new n.bL(Ve),u_frustum_bl:new n.bL(Ve),u_globe_pos:new n.bL(Ve),u_globe_radius:new n.bM(Ve),u_globe_transition:new n.bM(Ve),u_is_globe:new n.bN(Ve),u_viewport:new n.bK(Ve)}))(o)),E.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Ve=>({u_cutoff_params:new n.cb(Ve)}))(o)),E.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Ve=>({u_lighting_ambient_color:new n.bL(Ve),u_lighting_directional_dir:new n.bL(Ve),u_lighting_directional_color:new n.bL(Ve),u_ground_radiance:new n.bL(Ve)}))(o)),E.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Ve=>({u_light_matrix_0:new n.bJ(Ve),u_light_matrix_1:new n.bJ(Ve),u_fade_range:new n.bK(Ve),u_shadow_normal_offset:new n.bL(Ve),u_shadow_intensity:new n.bM(Ve),u_shadow_texel_size:new n.bM(Ve),u_shadow_map_resolution:new n.bM(Ve),u_shadow_direction:new n.bL(Ve),u_shadow_bias:new n.bL(Ve),u_shadowmap_0:new n.bN(Ve),u_shadowmap_1:new n.bN(Ve)}))(o))}}setTerrainUniformValues(o,d){if(!this.terrainUniforms)return;const A=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T]&&A[T].set(this.program,T,d[T])}}setGlobeUniformValues(o,d){if(!this.globeUniforms)return;const A=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T]&&A[T].set(this.program,T,d[T])}}setFogUniformValues(o,d){if(!this.fogUniforms)return;const A=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setCutoffUniformValues(o,d){if(!this.cutoffUniforms)return;const A=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setLightsUniformValues(o,d){if(!this.lightsUniforms)return;const A=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setShadowUniformValues(o,d){if(this.failedToCreate||!this.shadowUniforms)return;const A=this.shadowUniforms;o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}_drawDebugWireframe(o,d,A,T,S,E,k,Z,K,Y){const re=o.options.wireframe;if(re.terrain===!1&&re.layers2D===!1&&re.layers3D===!1)return;const ne=o.context;if(!(!(!re.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!re.layers2D||o._terrain&&o._terrain.renderingToTexture||!Bs.includes(this.name))||!(!re.layers3D||!rm.includes(this.name))))return;const pe=ne.gl,Pe=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,S,ne);if(!Pe)return;const Ce=[...this.fixedDefines];Ce.push("DEBUG_WIREFRAME");const Ve=o.getOrCreateProgram(this.name,{config:this.configuration,defines:Ce});ne.program.set(Ve.program);const Le=(at,pt,ot)=>{if(pt[at]&&ot[at])for(const ut in pt[at])ot[at][ut]&&ot[at][ut].set(ot.program,ut,pt[at][ut].current)};K&&K.setUniforms(Ve.program,ne,Ve.binderUniforms,k,{zoom:Z}),Le("fixedUniforms",this,Ve),Le("terrainUniforms",this,Ve),Le("globeUniforms",this,Ve),Le("fogUniforms",this,Ve),Le("lightsUniforms",this,Ve),Le("shadowUniforms",this,Ve),Pe.bind(),ne.setColorMode(new Nr([pe.ONE,pe.ONE_MINUS_SRC_ALPHA,pe.ZERO,pe.ONE],n.al.transparent,[!0,!0,!0,!1])),ne.setDepthMode(new or(d.func===pe.LESS?pe.LEQUAL:d.func,or.ReadOnly,d.range)),ne.setStencilMode(Tr.disabled);const $e=3*E.primitiveLength*2,nt=3*E.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const at=Y||1;for(let pt=0;pt<at;++pt)Ve.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",pt),pe.drawElements(pe.LINES,$e,pe.UNSIGNED_SHORT,nt)}else Y&&Y>1?pe.drawElementsInstanced(pe.LINES,$e,pe.UNSIGNED_SHORT,nt,Y):pe.drawElements(pe.LINES,$e,pe.UNSIGNED_SHORT,nt);S.bind(),ne.program.set(this.program),ne.setDepthMode(d),ne.setStencilMode(A),ne.setColorMode(T)}checkUniforms(o,d,A){if(this.fixedDefines.includes(d)){for(const T of Object.keys(A))if(!A[T].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${T} not set but required by ${d} being defined`)}}draw(o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve){const Le=o.context,$e=Le.gl;if(this.failedToCreate)return;Le.program.set(this.program),Le.setDepthMode(A),Le.setStencilMode(T),Le.setColorMode(S),Le.setCullFace(E);for(const pt of Object.keys(this.fixedUniforms))this.fixedUniforms[pt].set(this.program,pt,k[pt]);Pe&&Pe.setUniforms(this.program,Le,this.binderUniforms,ne,{zoom:pe});const nt={[$e.POINTS]:1,[$e.LINES]:2,[$e.TRIANGLES]:3,[$e.LINE_STRIP]:1}[d];this.checkUniforms(Z,"RENDER_SHADOWS",this.shadowUniforms);const at=Ve&&Ve>0?1:void 0;for(const pt of re.get()){const ot=pt.vaos||(pt.vaos={});if((ot[Z]||(ot[Z]=new $c)).bind(Le,this,K,Pe?Pe.getPaintVertexBuffers():[],Y,pt.vertexOffset,Ce||[],at),this.forceManualRenderingForInstanceIDShaders){const ut=Ve||1;for(let ct=0;ct<ut;++ct)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",ct),Y?$e.drawElements(d,pt.primitiveLength*nt,$e.UNSIGNED_SHORT,pt.primitiveOffset*nt*2):$e.drawArrays(d,pt.vertexOffset,pt.vertexLength)}else Ve&&Ve>1?$e.drawElementsInstanced(d,pt.primitiveLength*nt,$e.UNSIGNED_SHORT,pt.primitiveOffset*nt*2,Ve):Y?$e.drawElements(d,pt.primitiveLength*nt,$e.UNSIGNED_SHORT,pt.primitiveOffset*nt*2):$e.drawArrays(d,pt.vertexOffset,pt.vertexLength);d===$e.TRIANGLES&&Y&&this._drawDebugWireframe(o,A,T,S,Y,pt,ne,pe,Pe,Ve)}}}function Nf(y,o){const d=Math.pow(2,o.tileID.overscaledZ),A=o.tileSize*Math.pow(2,y.transform.tileZoom)/d,T=A*(o.tileID.canonical.x+o.tileID.wrap*d),S=A*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.at(o,1,y.transform.tileZoom),u_pixel_coord_upper:[T>>16,S>>16],u_pixel_coord_lower:[65535&T,65535&S]}}const nm={terrain:0,flat:1},oo=n.ad.mat4.create(),Yh=(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve,Le)=>{const $e=o.style.light,nt=$e.properties.get("position"),at=[nt.x,nt.y,nt.z],pt=n.ad.mat3.create();$e.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(pt,-o.transform.angle),n.ad.vec3.transformMat3(at,at,pt));const ot=$e.properties.get("color"),ut=o.transform,ct={u_matrix:y,u_lightpos:at,u_lightintensity:$e.properties.get("intensity"),u_lightcolor:[ot.r,ot.g,ot.b],u_vertical_gradient:+d,u_opacity:A,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:oo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:nm[K],u_base_type:nm[Y],u_ao:T,u_edge_radius:S,u_width_scale:E,u_flood_light_color:Pe,u_vertical_scale:Ce,u_flood_light_intensity:Ve,u_ground_shadow_factor:Le};return ut.projection.name==="globe"&&(ct.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],ct.u_zoom_transition=re,ct.u_inv_rot_matrix=pe,ct.u_merc_center=ne,ct.u_up_dir=ut.projection.upVector(new n.bT(0,0,0),ne[0]*n.ai,ne[1]*n.ai),ct.u_height_lift=Z),ct},G=(y,o,d,A,T,S)=>({u_matrix:y,u_edge_radius:o,u_width_scale:d,u_vertical_scale:A,u_height_type:nm[T],u_base_type:nm[S]}),Q=(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve)=>{const Le=Yh(y,o,d,A,T,S,E,k,K,Y,re,ne,pe,Pe,Ce,Ve,1,[0,0,0]),$e={u_height_factor:-Math.pow(2,k.overscaledZ)/Z.tileSize/8};return n.l(Le,Nf(o,Z),$e)},ye=(y,o)=>({u_matrix:y,u_emissive_strength:o}),De=(y,o,d,A)=>n.l(ye(y,o),Nf(d,A)),Ke=(y,o,d)=>({u_matrix:y,u_world:d,u_emissive_strength:o}),rt=(y,o,d,A,T)=>n.l(De(y,o,d,A),{u_world:T}),it=(y,o,d,A,T)=>({u_matrix:y,u_camera_pos:[o[0],o[1],o[2]],u_depth_bias:d,u_height_scale:A,u_reset_depth:T}),dt=(y,o,d,A)=>{const T=n.ai/d.tileSize;return{u_matrix:y,u_camera_to_center_distance:o.getCameraToCenterDistance(A),u_extrude_scale:[o.pixelsToGLUnits[0]/T,o.pixelsToGLUnits[1]/T]}},mt=(y,o,d=1)=>({u_matrix:y,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),St=n.ad.mat4.create(),ea=(y,o,d,A,T,S,E)=>{const k=y.transform,Z=k.projection.name==="globe",K=Z?n.cO(k.zoom,o.canonical)*k._pixelsPerMercatorPixel:n.at(d,1,S),Y={u_matrix:o.projMatrix,u_extrude_scale:K,u_intensity:E,u_inv_rot_matrix:St,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Z){Y.u_inv_rot_matrix=A,Y.u_merc_center=T,Y.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],Y.u_zoom_transition=n.ag(k.zoom);const re=T[0]*n.ai,ne=T[1]*n.ai;Y.u_up_dir=k.projection.upVector(new n.bT(0,0,0),re,ne)}return Y};function Pt(y,[o,d,A,T],[S,E]){if(S===E)return[0,0,0,0];const k=255*(y-1)/(y*(E-S));return[o*k,d*k,A*k,T*k]}function _a(y,o,[d,A]){return d===A?0:.5/y+(o-d)*(y-1)/(y*(A-d))}const na=(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve,Le,$e,nt,at)=>({u_matrix:y,u_normalize_matrix:o,u_globe_matrix:d,u_merc_matrix:A,u_grid_matrix:T,u_tl_parent:S,u_scale_parent:K,u_fade_t:Y.mix,u_opacity:Y.opacity*re.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:re.paint.get("raster-brightness-min"),u_brightness_high:re.paint.get("raster-brightness-max"),u_saturation_factor:n.cP(re.paint.get("raster-saturation")),u_contrast_factor:n.cQ(re.paint.get("raster-contrast")),u_spin_weights:Ra(re.paint.get("raster-hue-rotate")),u_perspective_transform:ne,u_raster_elevation:pe,u_zoom_transition:E,u_merc_center:k,u_cutoff_params:Z,u_colorization_mix:Pt(n.cR,Ce,Le),u_colorization_offset:_a(n.cR,Ve,Le),u_color_ramp:Pe,u_texture_offset:[nt/($e+2*nt),$e/($e+2*nt)],u_texture_res:[$e+2*nt,$e+2*nt],u_emissive_strength:at});function Ra(y){y*=Math.PI/180;const o=Math.sin(y),d=Math.cos(y);return[(2*d+1)/3,(-Math.sqrt(3)*o-d+1)/3,(Math.sqrt(3)*o-d+1)/3]}const fa=.05,Rt=(y,o,d,A,T,S,E,k,Z,K,Y,re)=>({u_matrix:y,u_normalize_matrix:o,u_globe_matrix:d,u_merc_matrix:A,u_grid_matrix:T,u_tl_parent:S,u_scale_parent:K,u_fade_t:Y.mix,u_opacity:Y.opacity,u_image0:0,u_image1:1,u_raster_elevation:re,u_zoom_transition:E,u_merc_center:k,u_cutoff_params:Z}),aa=(y,o,d,A,T,S,E,k,Z,K)=>({u_particle_texture:y,u_particle_texture_side_len:o,u_tile_offset:d,u_velocity:A,u_color_ramp:S,u_velocity_res:T,u_max_speed:E,u_uv_offset:k,u_data_scale:[255*Z[0],255*Z[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ga=(y,o,d,A,T,S,E,k,Z,K)=>({u_particle_texture:y,u_particle_texture_side_len:o,u_velocity:d,u_velocity_res:A,u_max_speed:T,u_speed_factor:S,u_reset_rate:E,u_rand_seed:Math.random(),u_uv_offset:k,u_data_scale:[255*Z[0],255*Z[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ya=n.ad.mat4.create(),Ha=(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve,Le,$e,nt,at,pt)=>{const ot=T.transform,ut={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ot.getCameraToCenterDistance($e),u_rotate_symbol:+d,u_aspect_ratio:ot.width/ot.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+K,u_elevation_from_sea:Z?1:0,u_pitch_with_map:+A,u_texsize:Y,u_texsize_icon:re,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ya,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ya,u_up_vector:[0,-1,0],u_color_adj_mat:nt,u_icon_transition:at||0,u_gamma_scale:A?T.transform.getCameraToCenterDistance($e)*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:1,u_scale_factor:pt||1};return $e.name==="globe"&&(ut.u_tile_id=[pe.canonical.x,pe.canonical.y,1<<pe.canonical.z],ut.u_zoom_transition=Pe,ut.u_inv_rot_matrix=Ve,ut.u_merc_center=Ce,ut.u_camera_forward=ot._camera.forward(),ut.u_ecef_origin=n.cS(ot.globeMatrix,pe.toUnwrapped()),ut.u_tile_matrix=Float32Array.from(ot.globeMatrix),ut.u_up_vector=Le),ut},xr=(y,o,d,A)=>({u_matrix:y,u_emissive_strength:o,u_opacity:d,u_color:A}),gr=(y,o,d,A,T,S,E,k,Z)=>n.l(function(K,Y,re,ne,pe,Pe){const{width:Ce,height:Ve}=ne.imageManager.getPixelSize(Y),Le=Math.pow(2,Pe.tileID.overscaledZ),$e=Pe.tileSize*Math.pow(2,ne.transform.tileZoom)/Le,nt=$e*(Pe.tileID.canonical.x+Pe.tileID.wrap*Le),at=$e*Pe.tileID.canonical.y;return{u_image:0,u_pattern_tl:re.tl,u_pattern_br:re.br,u_texsize:[Ce,Ve],u_pattern_size:re.displaySize,u_pattern_units_to_pixels:pe?[ne.transform.width,-1*ne.transform.height]:[1/n.at(Pe,1,ne.transform.tileZoom),1/n.at(Pe,1,ne.transform.tileZoom)],u_pixel_coord_upper:[nt>>16,at>>16],u_pixel_coord_lower:[65535&nt,65535&at]}}(0,S,E,A,k,Z),{u_matrix:y,u_emissive_strength:o,u_opacity:d}),sn=new Float32Array(n.ad.mat4.identity([])),hr=(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe=[0,0,0],Pe)=>{const Ce=T.style.light,Ve=Ce.properties.get("position"),Le=[-Ve.x,-Ve.y,Ve.z],$e=n.ad.mat3.create();Ce.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation($e,-T.transform.angle),n.ad.vec3.transformMat3(Le,Le,$e));const nt=Y.alphaMode==="MASK",at=Ce.properties.get("color").toRenderColor(null),pt=ne.paint.get("model-ambient-occlusion-intensity"),ot=ne.paint.get("model-color").constantOr(n.al.white).toRenderColor(null),ut=ne.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:y,u_lighting_matrix:o,u_normal_matrix:d,u_node_matrix:A||sn,u_lightpos:Le,u_lightintensity:Ce.properties.get("intensity"),u_lightcolor:[at.r,at.g,at.b],u_camera_pos:pe,u_opacity:S,u_baseTextureIsAlpha:0,u_alphaMask:+nt,u_alphaCutoff:Y.alphaCutoff,u_baseColorFactor:[E.r,E.g,E.b,E.a],u_emissiveFactor:[k[0],k[1],k[2],1],u_metallicFactor:Z,u_roughnessFactor:K,u_baseColorTexture:wi.BaseColor,u_metallicRoughnessTexture:wi.MetallicRoughness,u_normalTexture:wi.Normal,u_occlusionTexture:wi.Occlusion,u_emissionTexture:wi.Emission,u_lutTexture:wi.LUT,u_color_mix:[ot.r,ot.g,ot.b,ut],u_aoIntensity:pt,u_emissive_strength:re,u_occlusionTextureTransform:Pe||[0,0,0,0]}},Ti=(y,o=sn,d=sn)=>({u_matrix:y,u_instance:o,u_node_matrix:d}),Ni={fillExtrusion:y=>({u_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_vertical_gradient:new n.bM(y),u_opacity:new n.bM(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_ao:new n.bK(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_up_dir:new n.bL(y),u_height_lift:new n.bM(y),u_flood_light_color:new n.bL(y),u_vertical_scale:new n.bM(y),u_flood_light_intensity:new n.bM(y),u_ground_shadow_factor:new n.bL(y)}),fillExtrusionDepth:y=>({u_matrix:new n.bJ(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_vertical_scale:new n.bM(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y)}),fillExtrusionPattern:y=>({u_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_vertical_gradient:new n.bM(y),u_height_factor:new n.bM(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_ao:new n.bK(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_up_dir:new n.bL(y),u_height_lift:new n.bM(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y),u_opacity:new n.bM(y)}),fillExtrusionGroundEffect:y=>({u_matrix:new n.bJ(y),u_opacity:new n.bM(y),u_ao_pass:new n.bM(y),u_meter_to_tile:new n.bM(y),u_ao:new n.bK(y),u_flood_light_intensity:new n.bM(y),u_flood_light_color:new n.bL(y),u_attenuation:new n.bM(y),u_edge_radius:new n.bM(y),u_fb:new n.bN(y),u_fb_size:new n.bM(y),u_dynamic_offset:new n.bM(y)}),fill:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y)}),fillPattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y)}),fillOutline:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_world:new n.bK(y)}),fillOutlinePattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_world:new n.bK(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y)}),elevatedStructures:y=>({u_matrix:new n.bJ(y)}),elevatedStructuresDepthReconstruct:y=>({u_matrix:new n.bJ(y),u_camera_pos:new n.bL(y),u_depth_bias:new n.bM(y),u_height_scale:new n.bM(y),u_reset_depth:new n.bM(y)}),circle:n.cT,collisionBox:y=>({u_matrix:new n.bJ(y),u_camera_to_center_distance:new n.bM(y),u_extrude_scale:new n.bK(y)}),collisionCircle:y=>({u_matrix:new n.bJ(y),u_inv_matrix:new n.bJ(y),u_camera_to_center_distance:new n.bM(y),u_viewport_size:new n.bK(y)}),debug:y=>({u_color:new n.cA(y),u_matrix:new n.bJ(y),u_overlay:new n.bN(y),u_overlay_scale:new n.bM(y)}),clippingMask:y=>({u_matrix:new n.bJ(y)}),heatmap:y=>({u_extrude_scale:new n.bM(y),u_intensity:new n.bM(y),u_matrix:new n.bJ(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_up_dir:new n.bL(y)}),heatmapTexture:y=>({u_image:new n.bN(y),u_color_ramp:new n.bN(y),u_opacity:new n.bM(y)}),hillshade:y=>({u_matrix:new n.bJ(y),u_image:new n.bN(y),u_latrange:new n.bK(y),u_light:new n.bK(y),u_shadow:new n.cA(y),u_highlight:new n.cA(y),u_emissive_strength:new n.bM(y),u_accent:new n.cA(y)}),hillshadePrepare:y=>({u_matrix:new n.bJ(y),u_image:new n.bN(y),u_dimension:new n.bK(y),u_zoom:new n.bM(y)}),line:n.cU,linePattern:n.cV,raster:y=>({u_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_grid_matrix:new n.cB(y),u_tl_parent:new n.bK(y),u_scale_parent:new n.bM(y),u_fade_t:new n.bM(y),u_opacity:new n.bM(y),u_image0:new n.bN(y),u_image1:new n.bN(y),u_brightness_low:new n.bM(y),u_brightness_high:new n.bM(y),u_saturation_factor:new n.bM(y),u_contrast_factor:new n.bM(y),u_spin_weights:new n.bL(y),u_perspective_transform:new n.bK(y),u_raster_elevation:new n.bM(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_cutoff_params:new n.cb(y),u_colorization_mix:new n.cb(y),u_colorization_offset:new n.bM(y),u_color_ramp:new n.bN(y),u_texture_offset:new n.bK(y),u_texture_res:new n.bK(y),u_emissive_strength:new n.bM(y)}),rasterParticle:y=>({u_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_grid_matrix:new n.cB(y),u_tl_parent:new n.bK(y),u_scale_parent:new n.bM(y),u_fade_t:new n.bM(y),u_opacity:new n.bM(y),u_image0:new n.bN(y),u_image1:new n.bN(y),u_raster_elevation:new n.bM(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_cutoff_params:new n.cb(y)}),rasterParticleTexture:y=>({u_texture:new n.bN(y),u_opacity:new n.bM(y)}),rasterParticleDraw:y=>({u_particle_texture:new n.bN(y),u_particle_texture_side_len:new n.bM(y),u_tile_offset:new n.bK(y),u_velocity:new n.bN(y),u_color_ramp:new n.bN(y),u_velocity_res:new n.bK(y),u_max_speed:new n.bM(y),u_uv_offset:new n.bK(y),u_data_scale:new n.bK(y),u_data_offset:new n.bM(y),u_particle_pos_scale:new n.bM(y),u_particle_pos_offset:new n.bK(y)}),rasterParticleUpdate:y=>({u_particle_texture:new n.bN(y),u_particle_texture_side_len:new n.bM(y),u_velocity:new n.bN(y),u_velocity_res:new n.bK(y),u_max_speed:new n.bM(y),u_speed_factor:new n.bM(y),u_reset_rate:new n.bM(y),u_rand_seed:new n.bM(y),u_uv_offset:new n.bK(y),u_data_scale:new n.bK(y),u_data_offset:new n.bM(y),u_particle_pos_scale:new n.bM(y),u_particle_pos_offset:new n.bK(y)}),symbol:y=>({u_is_size_zoom_constant:new n.bN(y),u_is_size_feature_constant:new n.bN(y),u_size_t:new n.bM(y),u_size:new n.bM(y),u_camera_to_center_distance:new n.bM(y),u_rotate_symbol:new n.bN(y),u_aspect_ratio:new n.bM(y),u_fade_change:new n.bM(y),u_matrix:new n.bJ(y),u_label_plane_matrix:new n.bJ(y),u_coord_matrix:new n.bJ(y),u_is_text:new n.bN(y),u_elevation_from_sea:new n.bN(y),u_pitch_with_map:new n.bN(y),u_texsize:new n.bK(y),u_texsize_icon:new n.bK(y),u_texture:new n.bN(y),u_texture_icon:new n.bN(y),u_gamma_scale:new n.bM(y),u_device_pixel_ratio:new n.bM(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_camera_forward:new n.bL(y),u_tile_matrix:new n.bJ(y),u_up_vector:new n.bL(y),u_ecef_origin:new n.bL(y),u_is_halo:new n.bN(y),u_icon_transition:new n.bM(y),u_color_adj_mat:new n.bJ(y),u_scale_factor:new n.bM(y)}),background:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_opacity:new n.bM(y),u_color:new n.cA(y)}),backgroundPattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_opacity:new n.bM(y),u_image:new n.bN(y),u_pattern_tl:new n.bK(y),u_pattern_br:new n.bK(y),u_texsize:new n.bK(y),u_pattern_size:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_pattern_units_to_pixels:new n.bK(y)}),terrainRaster:y=>({u_matrix:new n.bJ(y),u_image0:new n.bN(y),u_skirt_height:new n.bM(y),u_ground_shadow_factor:new n.bL(y)}),skybox:y=>({u_matrix:new n.bJ(y),u_sun_direction:new n.bL(y),u_cubemap:new n.bN(y),u_opacity:new n.bM(y),u_temporal_offset:new n.bM(y)}),skyboxGradient:y=>({u_matrix:new n.bJ(y),u_color_ramp:new n.bN(y),u_center_direction:new n.bL(y),u_radius:new n.bM(y),u_opacity:new n.bM(y),u_temporal_offset:new n.bM(y)}),skyboxCapture:y=>({u_matrix_3f:new n.cB(y),u_sun_direction:new n.bL(y),u_sun_intensity:new n.bM(y),u_color_tint_r:new n.cb(y),u_color_tint_m:new n.cb(y),u_luminance:new n.bM(y)}),globeRaster:y=>({u_proj_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_image0:new n.bN(y),u_grid_matrix:new n.cB(y),u_skirt_height:new n.bM(y),u_far_z_cutoff:new n.bM(y),u_frustum_tl:new n.bL(y),u_frustum_tr:new n.bL(y),u_frustum_br:new n.bL(y),u_frustum_bl:new n.bL(y),u_globe_pos:new n.bL(y),u_globe_radius:new n.bM(y),u_viewport:new n.bK(y)}),globeAtmosphere:y=>({u_frustum_tl:new n.bL(y),u_frustum_tr:new n.bL(y),u_frustum_br:new n.bL(y),u_frustum_bl:new n.bL(y),u_horizon:new n.bM(y),u_transition:new n.bM(y),u_fadeout_range:new n.bM(y),u_color:new n.cb(y),u_high_color:new n.cb(y),u_space_color:new n.cb(y),u_temporal_offset:new n.bM(y),u_horizon_angle:new n.bM(y)}),model:y=>({u_matrix:new n.bJ(y),u_lighting_matrix:new n.bJ(y),u_normal_matrix:new n.bJ(y),u_node_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_camera_pos:new n.bL(y),u_opacity:new n.bM(y),u_baseColorFactor:new n.cb(y),u_emissiveFactor:new n.cb(y),u_metallicFactor:new n.bM(y),u_roughnessFactor:new n.bM(y),u_baseTextureIsAlpha:new n.bN(y),u_alphaMask:new n.bN(y),u_alphaCutoff:new n.bM(y),u_baseColorTexture:new n.bN(y),u_metallicRoughnessTexture:new n.bN(y),u_normalTexture:new n.bN(y),u_occlusionTexture:new n.bN(y),u_emissionTexture:new n.bN(y),u_lutTexture:new n.bN(y),u_color_mix:new n.cb(y),u_aoIntensity:new n.bM(y),u_emissive_strength:new n.bM(y),u_occlusionTextureTransform:new n.cb(y)}),modelDepth:y=>({u_matrix:new n.bJ(y),u_instance:new n.bJ(y),u_node_matrix:new n.bJ(y)}),groundShadow:y=>({u_matrix:new n.bJ(y),u_ground_shadow_factor:new n.bL(y)}),stars:y=>({u_matrix:new n.bJ(y),u_up:new n.bL(y),u_right:new n.bL(y),u_intensity_multiplier:new n.bM(y)}),snowParticle:y=>({u_modelview:new n.bJ(y),u_projection:new n.bJ(y),u_time:new n.bM(y),u_cam_pos:new n.bL(y),u_velocityConeAperture:new n.bM(y),u_velocity:new n.bM(y),u_horizontalOscillationRadius:new n.bM(y),u_horizontalOscillationRate:new n.bM(y),u_boxSize:new n.bM(y),u_billboardSize:new n.bM(y),u_simpleShapeParameters:new n.bK(y),u_screenSize:new n.bK(y),u_thinningCenterPos:new n.bK(y),u_thinningShape:new n.bL(y),u_thinningAffectedRatio:new n.bM(y),u_thinningParticleOffset:new n.bM(y),u_particleColor:new n.cb(y),u_direction:new n.bL(y)}),rainParticle:y=>({u_modelview:new n.bJ(y),u_projection:new n.bJ(y),u_time:new n.bM(y),u_cam_pos:new n.bL(y),u_texScreen:new n.bN(y),u_velocityConeAperture:new n.bM(y),u_velocity:new n.bM(y),u_boxSize:new n.bM(y),u_rainDropletSize:new n.bK(y),u_distortionStrength:new n.bM(y),u_rainDirection:new n.bL(y),u_color:new n.cb(y),u_screenSize:new n.bK(y),u_thinningCenterPos:new n.bK(y),u_thinningShape:new n.bL(y),u_thinningAffectedRatio:new n.bM(y),u_thinningParticleOffset:new n.bM(y),u_shapeDirectionalPower:new n.bM(y),u_shapeNormalPower:new n.bM(y),u_mode:new n.bM(y)}),vignette:y=>({u_vignetteShape:new n.bL(y),u_vignetteColor:new n.cb(y)}),occlusion:y=>({u_matrix:new n.bJ(y),u_anchorPos:new n.bL(y),u_screenSizePx:new n.bK(y),u_occluderSizePx:new n.bK(y),u_color:new n.cb(y)})};class $n{constructor(o,d,A,T){this.id=$n.uniqueIdxCounter,$n.uniqueIdxCounter++,this.context=o;const S=o.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||T||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=$n.uniqueIdxCounter,$n.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}$n.uniqueIdxCounter=0;const ii={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qi{constructor(o,d,A,T,S,E){this.length=d.length,this.attributes=A,this.itemSize=d.bytesPerElement,this.dynamicDraw=T,this.instanceCount=E,this.context=o;const k=o.gl;this.buffer=k.createBuffer(),o.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||S||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,d){for(let A=0;A<this.attributes.length;A++){const T=d.attributes[this.attributes[A].name];T!==void 0&&o.enableVertexAttribArray(T)}}setVertexAttribPointers(o,d,A){for(let T=0;T<this.attributes.length;T++){const S=this.attributes[T],E=d.attributes[S.name];E!==void 0&&o.vertexAttribPointer(E,S.components,o[ii[S.type]],!1,this.itemSize,S.offset+this.itemSize*(A||0))}}setVertexAttribDivisor(o,d,A){for(let T=0;T<this.attributes.length;T++){const S=d.attributes[this.attributes[T].name];S!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(S,A)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class jn{constructor(o,d,A,T,S){this.context=o,this.width=d,this.height=A;const E=this.framebuffer=o.gl.createFramebuffer();T&&(this.colorAttachment=new ol(o,E)),S&&(this.depthAttachmentType=S,this.depthAttachment=S==="renderbuffer"?new Wh(o,E):new jd(o,E))}destroy(){const o=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&o.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&o.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&o.deleteTexture(d)}o.deleteFramebuffer(this.framebuffer)}}class wn{constructor(o,d){this.gl=o,this.clearColor=new Gh(this),this.clearDepth=new il(this),this.clearStencil=new vl(this),this.colorMask=new Kc(this),this.depthMask=new Eu(this),this.stencilMask=new Xu(this),this.stencilFunc=new Cc(this),this.stencilOp=new em(this),this.stencilTest=new Zh(this),this.depthRange=new qh(this),this.depthTest=new sl(this),this.depthFunc=new Ji(this),this.blend=new Ri(this),this.blendFunc=new ou(this),this.blendColor=new Nu(this),this.blendEquation=new op(this),this.cullFace=new Sc(this),this.cullFaceSide=new xf(this),this.frontFace=new Ud(this),this.program=new Hh(this),this.activeTexture=new $h(this),this.viewport=new Bd(this),this.bindFramebuffer=new Pf(this),this.bindRenderbuffer=new Qm(this),this.bindTexture=new vh(this),this.bindVertexBuffer=new qg(this),this.bindElementBuffer=new bc(this),this.bindVertexArrayOES=new Ju(this),this.pixelStoreUnpack=new Ou(this),this.pixelStoreUnpackPremultiplyAlpha=new Hg(this),this.pixelStoreUnpackFlipY=new Kh(this),this.options=d?Object.assign({},d):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,d,A){return new $n(this,o,d,A)}createVertexBuffer(o,d,A,T,S){return new Qi(this,o,d,A,T,S)}createRenderbuffer(o,d,A){const T=this.gl,S=T.createRenderbuffer();return this.bindRenderbuffer.set(S),T.renderbufferStorage(T.RENDERBUFFER,o,d,A),this.bindRenderbuffer.set(null),S}createFramebuffer(o,d,A,T){return new jn(this,o,d,A,T)}clear({color:o,depth:d,stencil:A,colorMask:T}){const S=this.gl;let E=0;o&&(E|=S.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(T||[!0,!0,!0,!0])),d!==void 0&&(E|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),A!==void 0&&(E|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),S.clear(E)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){n.bn(o.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let ys;function Zi(y,o,d,A,T,S,E){const k=y.context,Z=k.gl,K=y.transform,Y=y.getOrCreateProgram("collisionBox"),re=[];let ne=0,pe=0;for(let at=0;at<A.length;at++){const pt=A[at],ot=o.getTile(pt),ut=ot.getBucket(d);if(!ut)continue;const ct=Bh(pt,ut,K);let At=ct;T[0]===0&&T[1]===0||(At=y.translatePosMatrix(ct,ot,T,S));const Tt=E?ut.textCollisionBox:ut.iconCollisionBox,Qt=ut.collisionCircleArray;if(Qt.length>0){const Ut=n.ad.mat4.create(),ra=At;n.ad.mat4.mul(Ut,ut.placementInvProjMatrix,K.glCoordMatrix),n.ad.mat4.mul(Ut,Ut,ut.placementViewportMatrix),re.push({circleArray:Qt,circleOffset:pe,transform:ra,invTransform:Ut,projection:ut.getProjection()}),ne+=Qt.length/4,pe=ne}Tt&&(y.terrain&&y.terrain.setupElevationDraw(ot,Y),Y.draw(y,Z.LINES,or.disabled,Tr.disabled,y.colorModeForRenderPass(),wr.disabled,dt(At,K,ot,ut.getProjection()),d.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,K.zoom,null,[Tt.collisionVertexBuffer,Tt.collisionVertexBufferExt]))}if(!E||!re.length)return;const Pe=y.getOrCreateProgram("collisionCircle"),Ce=new n.cW;Ce.resize(4*ne),Ce._trim();let Ve=0;for(const at of re)for(let pt=0;pt<at.circleArray.length/4;pt++){const ot=4*pt,ut=at.circleArray[ot+0],ct=at.circleArray[ot+1],At=at.circleArray[ot+2],Tt=at.circleArray[ot+3];Ce.emplace(Ve++,ut,ct,At,Tt,0),Ce.emplace(Ve++,ut,ct,At,Tt,1),Ce.emplace(Ve++,ut,ct,At,Tt,2),Ce.emplace(Ve++,ut,ct,At,Tt,3)}(!ys||ys.length<2*ne)&&(ys=function(at){const pt=2*at,ot=new n.aV;ot.resize(pt),ot._trim();for(let ut=0;ut<pt;ut++){const ct=6*ut;ot.uint16[ct+0]=4*ut+0,ot.uint16[ct+1]=4*ut+1,ot.uint16[ct+2]=4*ut+2,ot.uint16[ct+3]=4*ut+2,ot.uint16[ct+4]=4*ut+3,ot.uint16[ct+5]=4*ut+0}return ot}(ne));const Le=k.createIndexBuffer(ys,!0),$e=k.createVertexBuffer(Ce,n.cX.members,!0);for(const at of re){const pt={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(nt=K).getCameraToCenterDistance(at.projection),u_viewport_size:[nt.width,nt.height]};Pe.draw(y,Z.TRIANGLES,or.disabled,Tr.disabled,y.colorModeForRenderPass(),wr.disabled,pt,d.id,$e,Le,n.b8.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,K.zoom)}var nt;$e.destroy(),Le.destroy()}const Gn=n.ad.mat4.create();function _o(y){const o=y._camera.getWorldToCamera(y.worldSize,1),d=n.ad.mat4.multiply([],o,y.globeMatrix);n.ad.mat4.invert(d,d);const A=[0,0,0],T=[0,1,0,0];return n.ad.vec4.transformMat4(T,T,d),A[0]=T[0],A[1]=T[1],A[2]=T[2],n.ad.vec3.normalize(A,A),A}function Ci({width:y,height:o,anchor:d,textOffset:A,textScale:T},S){const{horizontalAlign:E,verticalAlign:k}=n.bD(d),Z=-(E-.5)*y,K=-(k-.5)*o,Y=n.bC(d,A);return new n.P((Z/T+Y[0])*S,(K/T+Y[1])*S)}function hs(y,o,d,A,T,S,E,k,Z,K,Y){const re=y.text.placedSymbolArray,ne=y.text.dynamicLayoutVertexArray,pe=y.icon.dynamicLayoutVertexArray,Pe={},Ce=y.getProjection(),Ve=Ho(k,Ce,S),Le=S.elevation,$e=Ce.upVectorScale(k.canonical,S.center.lat,S.worldSize).metersToTile;ne.clear();for(let nt=0;nt<re.length;nt++){const at=re.get(nt),{tileAnchorX:pt,tileAnchorY:ot,numGlyphs:ut}=at,ct=at.hidden||!at.crossTileID||y.allowVerticalPlacement&&!at.placedOrientation?null:A[at.crossTileID];if(ct){let At=0,Tt=0,Qt=0;if(Le){const ta=Le?Le.getAtTileOffset(k,pt,ot):0,[da,Yt,pa]=Ce.upVector(k.canonical,pt,ot);At=ta*da*$e,Tt=ta*Yt*$e,Qt=ta*pa*$e}let[Ut,ra,ca,Sa]=go(at.projectedAnchorX+At,at.projectedAnchorY+Tt,at.projectedAnchorZ+Qt,d?Ve:E);const Ft=Od(S.getCameraToCenterDistance(Ce),Sa);let sa=T.evaluateSizeForFeature(y.textSizeData,K,at)*Ft/n.bw;d&&(sa*=y.tilePixelRatio/Z);const Vt=Ci(ct,sa);d?({x:Ut,y:ra,z:ca}=Ce.projectTilePoint(pt+Vt.x,ot+Vt.y,k.canonical),[Ut,ra,ca]=go(Ut+At,ra+Tt,ca+Qt,E)):(o&&Vt._rotate(-S.angle),Ut+=Vt.x,ra+=Vt.y,ca=0);const oa=y.allowVerticalPlacement&&at.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let ta=0;ta<ut;ta++)n.bt(ne,Ut,ra,ca,oa);Y&&at.associatedIconIndex>=0&&(Pe[at.associatedIconIndex]={x:Ut,y:ra,z:ca,angle:oa})}else rl(ut,ne)}if(Y){pe.clear();const nt=y.icon.placedSymbolArray;for(let at=0;at<nt.length;at++){const pt=nt.get(at),{numGlyphs:ot}=pt,ut=Pe[at];if(pt.hidden||!ut)rl(ot,pe);else{const{x:ct,y:At,z:Tt,angle:Qt}=ut;for(let Ut=0;Ut<ot;Ut++)n.bt(pe,ct,At,Tt,Qt)}}y.icon.dynamicLayoutVertexBuffer.updateData(pe)}y.text.dynamicLayoutVertexBuffer.updateData(ne)}function Rn(y,o,d,A,T,S,E={}){const k=d.paint.get("icon-translate"),Z=d.paint.get("text-translate"),K=d.paint.get("icon-translate-anchor"),Y=d.paint.get("text-translate-anchor"),re=d.layout.get("icon-rotation-alignment"),ne=d.layout.get("text-rotation-alignment"),pe=d.layout.get("icon-pitch-alignment"),Pe=d.layout.get("text-pitch-alignment"),Ce=d.layout.get("icon-keep-upright"),Ve=d.layout.get("text-keep-upright"),Le=d.paint.get("icon-color-saturation"),$e=d.paint.get("icon-color-contrast"),nt=d.paint.get("icon-color-brightness-min"),at=d.paint.get("icon-color-brightness-max"),pt=d.layout.get("symbol-elevation-reference")==="sea",ot=y.context,ut=ot.gl,ct=y.transform,At=re==="map",Tt=ne==="map",Qt=pe==="map",Ut=Pe==="map",ra=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ca=!1;const Sa=y.depthModeForSublayer(0,or.ReadOnly),Ft=[n.av(ct.center.lng),n.aC(ct.center.lat)],sa=d.layout.get("text-variable-anchor"),Vt=ct.projection.name==="globe",oa=[],ta=[0,-1,0];for(const da of A){const Yt=o.getTile(da),pa=Yt.getBucket(d);if(!pa||pa.projection.name==="mercator"&&Vt||pa.fullyClipped)continue;const Ia=pa.projection.name==="globe",La=Ia?n.ag(ct.zoom):0,Oa=Ho(da,pa.getProjection(),ct),lr=ct.calculatePixelsToTileUnitsMatrix(Yt),kr=sa&&pa.hasTextData(),yr=pa.hasIconTextFit()&&kr&&pa.hasIconData(),Dr=pa.getProjection().createInversionMatrix(ct,da.canonical),Pr=Kn=>{ct.depthOcclusionForSymbolsAndCircles&&(d.hasInitialOcclusionOpacityProperties||y.terrain)&&(Kn.push("DEPTH_D24"),Kn.push("DEPTH_OCCLUSION"))},Or=()=>{const Kn=At&&d.layout.get("symbol-placement")!=="point",mn=[];Pr(mn);const Dn=Kn||yr,ts=d.paint.get("icon-image-cross-fade").constantOr(0);y.terrainRenderModeElevated()&&Qt&&mn.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(mn.push("PROJECTION_GLOBE_VIEW"),Dn&&mn.push("PROJECTED_POS_ON_VIEWPORT")),ts>0&&mn.push("ICON_TRANSITION"),pa.icon.zOffsetVertexBuffer&&mn.push("Z_OFFSET"),Le===0&&$e===0&&nt===0&&at===1||mn.push("COLOR_ADJUSTMENT"),pa.sdfIcons&&mn.push("RENDER_SDF");const As=pa.icon.programConfigurations.get(d.id),uo=y.getOrCreateProgram("symbol",{config:As,defines:mn}),eo=Yt.imageAtlasTexture?Yt.imageAtlasTexture.size:[0,0],wo=pa.iconSizeData,Pn=n.bp(wo,ct.zoom),oi=Qt||ct.pitch!==0,Ln=Es(Oa,Yt.tileID.canonical,Qt,At,ct,pa.getProjection(),lr),ui=Ei(Oa,Yt.tileID.canonical,Qt,At,ct,pa.getProjection(),lr),Ro=y.translatePosMatrix(ui,Yt,k,K,!0),bi=y.translatePosMatrix(Oa,Yt,k,K),fs=Dn?Gn:Ln,Vc=At&&!Qt&&!Kn;let Xo=ta;!Vt&&!ct.mercatorFromTransition||At||(Xo=_o(ct));const cu=Ia?Xo:ta,jl=d.getColorAdjustmentMatrix(Le,$e,nt,at),ic=Ha(wo.kind,Pn,Vc,Qt,y,bi,fs,Ro,pt,!1,eo,[0,0],!0,da,La,Ft,Dr,cu,pa.getProjection(),jl,ts),Sl=Yt.imageAtlasTexture?Yt.imageAtlasTexture:null,Jd=d.layout.get("icon-size").constantOr(0)!==1||pa.iconsNeedLinear,To=pa.sdfIcons||y.options.rotating||y.options.zooming||Jd||oi?ut.LINEAR:ut.NEAREST,Vh=pa.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,Gl=y.terrain&&Qt&&Kn?n.ad.mat4.invert(n.ad.mat4.create(),Ln):Gn;if(Kn&&pa.icon){const Cp=ct.elevation,fm=Cp?Cp.getAtTileOffsetFunc(da,ct.center.lat,ct.worldSize,pa.getProjection()):null,ey=Gi(Oa,Yt.tileID.canonical,Qt,At,ct,pa.getProjection(),lr);gc(pa,Oa,y,!1,ey,ui,Qt,Ce,fm,da)}return{program:uo,buffers:pa.icon,uniformValues:ic,atlasTexture:Sl,atlasTextureIcon:null,atlasInterpolation:To,atlasInterpolationIcon:null,isSDF:pa.sdfIcons,hasHalo:Vh,tile:Yt,labelPlaneMatrixInv:Gl}},Ur=()=>{const Kn=Tt&&d.layout.get("symbol-placement")!=="point",mn=[],Dn=Kn||sa||yr;y.terrainRenderModeElevated()&&Ut&&mn.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(mn.push("PROJECTION_GLOBE_VIEW"),Dn&&mn.push("PROJECTED_POS_ON_VIEWPORT")),pa.text.zOffsetVertexBuffer&&mn.push("Z_OFFSET"),pa.iconsInText&&mn.push("RENDER_TEXT_AND_SYMBOL"),mn.push("RENDER_SDF"),Pr(mn);const ts=pa.text.programConfigurations.get(d.id),As=y.getOrCreateProgram("symbol",{config:ts,defines:mn});let uo,eo=[0,0],wo=null;const Pn=pa.textSizeData;pa.iconsInText&&(eo=Yt.imageAtlasTexture?Yt.imageAtlasTexture.size:[0,0],wo=Yt.imageAtlasTexture?Yt.imageAtlasTexture:null,uo=Ut||ct.pitch!==0||y.options.rotating||y.options.zooming||Pn.kind==="composite"||Pn.kind==="camera"?ut.LINEAR:ut.NEAREST);const oi=Yt.glyphAtlasTexture?Yt.glyphAtlasTexture.size:[0,0],Ln=d.layout.get("text-size-scale-range"),ui=n.ay(y.scaleFactor,Ln[0],Ln[1]),Ro=n.bp(Pn,ct.zoom,ui),bi=Es(Oa,Yt.tileID.canonical,Ut,Tt,ct,pa.getProjection(),lr),fs=Ei(Oa,Yt.tileID.canonical,Ut,Tt,ct,pa.getProjection(),lr),Vc=y.translatePosMatrix(fs,Yt,Z,Y,!0),Xo=y.translatePosMatrix(Oa,Yt,Z,Y),cu=Dn?Gn:bi,jl=Tt&&!Ut&&!Kn;let ic=ta;!Vt&&!ct.mercatorFromTransition||Tt||(ic=_o(ct));const Sl=Ha(Pn.kind,Ro,jl,Ut,y,Xo,cu,Vc,pt,!0,oi,eo,!0,da,La,Ft,Dr,Ia?ic:ta,pa.getProjection(),null,null,ui),Jd=Yt.glyphAtlasTexture?Yt.glyphAtlasTexture:null,To=ut.LINEAR,Vh=d.paint.get("text-halo-width").constantOr(1)!==0,Gl=y.terrain&&Ut&&Kn?n.ad.mat4.invert(n.ad.mat4.create(),bi):Gn;if(Kn&&pa.text){const Cp=ct.elevation,fm=Cp?Cp.getAtTileOffsetFunc(da,ct.center.lat,ct.worldSize,pa.getProjection()):null,ey=Gi(Oa,Yt.tileID.canonical,Ut,Tt,ct,pa.getProjection(),lr);gc(pa,Oa,y,!0,ey,fs,Ut,Ve,fm,da)}return{program:As,buffers:pa.text,uniformValues:Sl,atlasTexture:Jd,atlasTextureIcon:wo,atlasInterpolation:To,atlasInterpolationIcon:uo,isSDF:!0,hasHalo:Vh,tile:Yt,labelPlaneMatrixInv:Gl}},Lr=pa.icon.segments.get().length,fr=pa.text.segments.get().length,on=Lr&&!E.onlyText?Or():null,Cr=fr&&!E.onlyIcons?Ur():null,ar=d.paint.get("icon-opacity").constantOr(1),ln=d.paint.get("text-opacity").constantOr(1);if(ra&&pa.canOverlap){ca=!0;const Kn=ar&&!E.onlyText?pa.icon.segments.get():[],mn=ln&&!E.onlyIcons?pa.text.segments.get():[];for(const Dn of Kn)oa.push({segments:new n.b8([Dn]),sortKey:Dn.sortKey,state:on});for(const Dn of mn)oa.push({segments:new n.b8([Dn]),sortKey:Dn.sortKey,state:Cr})}else E.onlyText||oa.push({segments:ar?pa.icon.segments:new n.b8([]),sortKey:0,state:on}),E.onlyIcons||oa.push({segments:ln?pa.text.segments:new n.b8([]),sortKey:0,state:Cr})}ca&&oa.sort((da,Yt)=>da.sortKey-Yt.sortKey);for(const da of oa){const Yt=da.state;if(Yt)if(y.terrain?y.terrain.setupElevationDraw(Yt.tile,Yt.program,{useDepthForOcclusion:ct.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Yt.labelPlaneMatrixInv}):y.setupDepthForOcclusion(ct.depthOcclusionForSymbolsAndCircles,Yt.program),ot.activeTexture.set(ut.TEXTURE0),Yt.atlasTexture&&Yt.atlasTexture.bind(Yt.atlasInterpolation,ut.CLAMP_TO_EDGE,!0),Yt.atlasTextureIcon&&(ot.activeTexture.set(ut.TEXTURE1),Yt.atlasTextureIcon&&Yt.atlasTextureIcon.bind(Yt.atlasInterpolationIcon,ut.CLAMP_TO_EDGE,!0)),y.uploadCommonLightUniforms(y.context,Yt.program),Yt.hasHalo){const pa=Yt.uniformValues;pa.u_is_halo=1,Bi(Yt.buffers,da.segments,d,y,Yt.program,Sa,T,S,pa,2),pa.u_is_halo=0}else{if(Yt.isSDF){const pa=Yt.uniformValues;Yt.hasHalo&&(pa.u_is_halo=1,Bi(Yt.buffers,da.segments,d,y,Yt.program,Sa,T,S,pa,1)),pa.u_is_halo=0}Bi(Yt.buffers,da.segments,d,y,Yt.program,Sa,T,S,Yt.uniformValues,1)}}}function Bi(y,o,d,A,T,S,E,k,Z,K){const Y=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.iconTransitioningVertexBuffer,y.globeExtVertexBuffer,y.zOffsetVertexBuffer];T.draw(A,A.context.gl.TRIANGLES,S,E,k,wr.disabled,Z,d.id,y.layoutVertexBuffer,y.indexBuffer,o,d.paint,A.transform.zoom,y.programConfigurations.get(d.id),Y,K)}function Xs(y,o){const d=1<<y.canonical.z,A=(o.x*d-y.canonical.x-y.wrap*d)*n.ai,T=(o.y*d-y.canonical.y)*n.ai,S=n.d5(o.z,o.y);return n.ad.vec3.fromValues(A,T,S)}function Eo(y,o,d,A,T){if(!d.layout||d.layout.get("fill-elevation-reference")==="none")return;const S=y.context.gl,E=new or(y.context.gl.LEQUAL,or.ReadWrite,y.depthRangeFor3D),k=new or(y.context.gl.GREATER,or.ReadWrite,y.depthRangeFor3D),Z=function(pe){const Pe=n.c4(pe.pitch);let Ce=.01;return pe.isOrthographic&&(Ce=n.ah(1e-4,Ce,n.c9(Pe>=Va?1:Pe/Va))),2*Ce}(y.transform),K=y.transform.getFreeCameraOptions().position,Y="elevatedStructuresDepthReconstruct",re=y.getOrCreateProgram(Y,{defines:["DEPTH_RECONSTRUCTION"]}),ne=y.getOrCreateProgram(Y);for(const pe of A){const Pe=o.getTile(pe),Ce=Pe.getBucket(d);if(!Ce)continue;const Ve=Ce.elevatedStructures;if(!Ve)continue;const Le=Ce.elevationBufferData.heightRange,$e=Xs(pe.toUnwrapped(),K),nt=y.translatePosMatrix(pe.projMatrix,Pe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));let at,pt,ot,ut;if(T==="initialize"){if(!Le||Le.min>=1||Ve.depthSegments.segments[0].primitiveLength===0)continue;at=it(nt,$e,Z,1,0),pt=E,ot=Ve.depthSegments,ut=re}else if(T==="reset"){if(!Le||Le.min>=0||Ve.maskSegments.segments[0].primitiveLength===0)continue;at=it(nt,$e,0,0,1),pt=k,ot=Ve.maskSegments,ut=re}else if(T==="geometry"){if(Ve.depthSegments.segments[0].primitiveLength===0)continue;at=it(nt,$e,Z,1,0),pt=E,ot=Ve.depthSegments,ut=ne}ut.draw(y,S.TRIANGLES,pt,Tr.disabled,Nr.disabled,wr.disabled,at,d.id,Ve.vertexBuffer,Ve.indexBuffer,ot,d.paint,y.transform.zoom)}}function ul(y,o,d){const{painter:A,sourceCache:T,layer:S,coords:E,colorMode:k,elevationType:Z,terrainEnabled:K,pass:Y}=y,re=A.context.gl,ne=S.paint.get("fill-pattern");let pe=Z;Z!=="road"||o&&!K||(pe="none");const Pe=pe==="road",Ce=new or(A.context.gl.LEQUAL,or.ReadWrite,A.depthRangeFor3D),Ve=ne&&ne.constantOr(1),Le=($e,nt)=>{let at,pt,ot,ut,ct;nt?(pt=Ve&&!S.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",at=re.LINES):(pt=Ve?"fillPattern":"fill",at=re.TRIANGLES);for(const At of E){const Tt=T.getTile(At);if(Ve&&!Tt.patternsLoaded())continue;const Qt=Tt.getBucket(S);if(!Qt)continue;const Ut=o?Qt.elevationBufferData:Qt.bufferData;if(Ut.isEmpty())continue;A.prepareDrawTile();const ra=Ut.programConfigurations.get(S.id),ca=A.isTileAffectedByFog(At),Sa=[],Ft=[];Pe&&(Sa.push("ELEVATED_ROADS"),Ft.push(Ut.elevatedLayoutVertexBuffer));const sa=A.getOrCreateProgram(pt,{config:ra,overrideFog:ca,defines:Sa});Ve&&(A.context.activeTexture.set(re.TEXTURE0),Tt.imageAtlasTexture&&Tt.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),ra.updatePaintBuffers());const Vt=ne.constantOr(null);if(Vt&&Tt.imageAtlas){const da=Tt.imageAtlas,Yt=n.d0.from(Vt).getPrimary().scaleSelf(n.q.devicePixelRatio).toString(),pa=da.patternPositions.get(Yt);pa&&ra.setConstantPatternPositions(pa)}const oa=A.translatePosMatrix(At.projMatrix,Tt,S.paint.get("fill-translate"),S.paint.get("fill-translate-anchor")),ta=S.paint.get("fill-emissive-strength");if(nt){ut=Ut.lineIndexBuffer,ct=Ut.lineSegments;const da=A.terrain&&A.terrain.renderingToTexture?A.terrain.drapeBufferSize:[re.drawingBufferWidth,re.drawingBufferHeight];ot=pt==="fillOutlinePattern"&&Ve?rt(oa,ta,A,Tt,da):Ke(oa,ta,da)}else ut=Ut.indexBuffer,ct=Ut.triangleSegments,ot=Ve?De(oa,ta,A,Tt):ye(oa,ta);A.uploadCommonUniforms(A.context,sa,At.toUnwrapped()),sa.draw(A,at,pe!=="none"?Ce:$e,d||A.stencilModeForClipping(At),k,wr.disabled,ot,S.id,Ut.layoutVertexBuffer,ut,ct,S.paint,A.transform.zoom,ra,Ft)}};A.renderPass===Y&&Le(A.depthModeForSublayer(1,A.renderPass==="opaque"?or.ReadWrite:or.ReadOnly),!1),pe==="none"&&A.renderPass==="translucent"&&S.paint.get("fill-antialias")&&Le(A.depthModeForSublayer(S.getPaintProperty("fill-outline-color")?2:0,or.ReadOnly),!0)}function Fl(y,o,d,A,T,S,E,k){d.resetLayerRenderingStats(y);const Z=y.context,K=Z.gl,Y=y.transform,re=d.paint.get("fill-extrusion-pattern"),ne=re.constantOr(1),pe=d.paint.get("fill-extrusion-opacity"),Pe=y.style.enable3dLights(),Ce=d.paint.get(Pe&&!ne?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Ve=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Ce],Le=d.layout.get("fill-extrusion-edge-radius"),$e=Le>0&&!d.paint.get("fill-extrusion-rounded-roof"),nt=$e?0:Le,at=Y.projection.name==="globe"?n.d6():0,pt=Y.projection.name==="globe",ot=pt?n.ag(Y.zoom):0,ut=[n.av(Y.center.lng),n.aC(Y.center.lat)],ct=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",At=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(ct?null:d.lut).toArray01().slice(0,3),Tt=d.paint.get("fill-extrusion-flood-light-intensity"),Qt=d.paint.get("fill-extrusion-vertical-scale"),Ut=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,ra=d.paint.get("fill-extrusion-height-alignment"),ca=d.paint.get("fill-extrusion-base-alignment"),Sa=Ys(y,d.paint.get("fill-extrusion-cutoff-fade-range")),Ft=[];let sa;pt&&Ft.push("PROJECTION_GLOBE_VIEW"),Ve[0]>0&&Ft.push("FAUX_AO"),$e&&Ft.push("ZERO_ROOF_RADIUS"),k&&Ft.push("HAS_CENTROID"),Tt>0&&Ft.push("FLOOD_LIGHT"),Sa.shouldRenderCutoff&&Ft.push("RENDER_CUTOFF"),Ut&&Ft.push("RENDER_WALL_MODE");const Vt=y.renderPass==="shadow",oa=y.shadowRenderer,ta=Vt&&!!oa;y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!0);let da=[0,0,0];if(oa){const Ia=y.style.directionalLight,La=y.style.ambientLight;Ia&&La&&(da=Bc(y.style,Ia,La)),Vt||(Ft.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oa.useNormalOffset&&Ft.push("NORMAL_OFFSET")),sa=Ft.concat(["SHADOWS_SINGLE_CASCADE"])}const Yt=ta?"fillExtrusionDepth":ne?"fillExtrusionPattern":"fillExtrusion",pa=d.getLayerRenderingStats();for(const Ia of A){const La=o.getTile(Ia),Oa=La.getBucket(d);if(!Oa||Oa.projection.name!==Y.projection.name)continue;let lr=!1;oa&&(lr=oa.getMaxCascadeForTile(Ia.toUnwrapped())===0);const kr=y.isTileAffectedByFog(Ia),yr=Oa.programConfigurations.get(d.id),Dr=y.getOrCreateProgram(Yt,{config:yr,defines:lr?sa:Ft,overrideFog:kr});if(y.terrain&&y.terrain.setupElevationDraw(La,Dr,{useMeterToDem:!0}),!Oa.centroidVertexBuffer){const Cr=Dr.attributes.a_centroid_pos;Cr!==void 0&&K.vertexAttrib2f(Cr,0,0)}!Vt&&oa&&oa.setupShadows(La.tileID.toUnwrapped(),Dr,"vector-tile",La.tileID.overscaledZ),ne&&(y.context.activeTexture.set(K.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),yr.updatePaintBuffers());const Pr=re.constantOr(null);if(Pr&&La.imageAtlas){const Cr=La.imageAtlas,ar=n.d0.from(Pr).getPrimary().scaleSelf(n.q.devicePixelRatio),ln=Cr.patternPositions.get(ar.toString());ln&&yr.setConstantPatternPositions(ln)}const Or=d.paint.get("fill-extrusion-vertical-gradient"),Ur=1/Oa.tileToMeter;let Lr;if(Vt&&oa){if(es(La.tileID,Oa,y))continue;const Cr=oa.calculateShadowPassMatrixFromTile(La.tileID.toUnwrapped());Lr=G(Cr,nt,Ur,Qt,ra,ca)}else{const Cr=y.translatePosMatrix(Ia.expandedProjMatrix,La,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ar=Y.projection.createInversionMatrix(Y,Ia.canonical);Lr=ne?Q(Cr,y,Or,pe,Ve,nt,Ur,Ia,La,at,ra,ca,ot,ut,ar,At,Qt):Yh(Cr,y,Or,pe,Ve,nt,Ur,Ia,at,ra,ca,ot,ut,ar,At,Qt,Tt,da)}y.uploadCommonUniforms(Z,Dr,Ia.toUnwrapped(),null,Sa);let fr=Oa.segments;if(Y.projection.name==="mercator"&&!Vt&&(fr=Oa.getVisibleSegments(La.tileID,y.terrain,y.transform.getFrustum(0)),!fr.get().length))continue;if(pa)if(Vt)for(const Cr of fr.get())pa.numRenderedVerticesInShadowPass+=Cr.primitiveLength;else for(const Cr of fr.get())pa.numRenderedVerticesInTransparentPass+=Cr.primitiveLength;const on=[];(y.terrain||k)&&on.push(Oa.centroidVertexBuffer),pt&&on.push(Oa.layoutVertexExtBuffer),Ut&&on.push(Oa.wallVertexBuffer),Dr.draw(y,Z.gl.TRIANGLES,T,S,E,wr.backCCW,Lr,d.id,Oa.layoutVertexBuffer,Oa.indexBuffer,fr,d.paint,y.transform.zoom,yr,on)}y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!1)}function Ds(y,o,d,A,T,S,E,k,Z,K,Y,re,ne,pe,Pe,Ce,Ve,Le,$e){const nt=y.context,at=nt.gl,pt=y.transform,ot=y.transform.zoom,ut=[],ct=Ys(y,d.paint.get("fill-extrusion-cutoff-fade-range"));K==="clear"?(ut.push("CLEAR_SUBPASS"),$e&&(ut.push("CLEAR_FROM_TEXTURE"),nt.activeTexture.set(at.TEXTURE0),$e.bind(at.LINEAR,at.CLAMP_TO_EDGE))):K==="sdf"&&ut.push("SDF_SUBPASS"),Ve&&ut.push("HAS_CENTROID"),ct.shouldRenderCutoff&&ut.push("RENDER_CUTOFF");const At=d.layout.get("fill-extrusion-edge-radius"),Tt=(Qt,Ut,ra,ca,Sa)=>{const Ft=Ut.programConfigurations.get(d.id),sa=y.isTileAffectedByFog(Qt),Vt=y.getOrCreateProgram("fillExtrusionGroundEffect",{config:Ft,defines:ut,overrideFog:sa}),oa=((da,Yt,pa,Ia,La,Oa,lr,kr,yr,Dr,Pr)=>({u_matrix:Yt,u_opacity:pa,u_ao_pass:Ia?1:0,u_meter_to_tile:La,u_ao:Oa,u_flood_light_intensity:lr,u_flood_light_color:kr,u_attenuation:yr,u_edge_radius:Dr,u_fb:0,u_fb_size:Pr,u_dynamic_offset:1}))(0,ca,Y,Z,Sa,[re,ne*Sa],pe,Pe,Ce,ot>=17?0:At*Sa,$e?$e.size[0]:0),ta=[];Ve&&ta.push(Ut.hiddenByLandmarkVertexBuffer),y.uploadCommonUniforms(nt,Vt,Qt.toUnwrapped(),null,ct),Vt.draw(y,nt.gl.TRIANGLES,T,S,E,k,oa,d.id,Ut.vertexBuffer,Ut.indexBuffer,ra,d.paint,ot,Ft,ta)};for(const Qt of A){const Ut=o.getTile(Qt),ra=Ut.getBucket(d);if(!ra||ra.projection.name!==pt.projection.name||!ra.groundEffect||ra.groundEffect&&!ra.groundEffect.hasData())continue;const ca=ra.groundEffect,Sa=1/ra.tileToMeter;{const Ft=y.translatePosMatrix(Qt.projMatrix,Ut,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),sa=ca.getDefaultSegment();Tt(Qt,ca,sa,Ft,Sa)}if(Le)for(let Ft=0;Ft<4;Ft++){const sa=n.d7[Ft](Qt),Vt=o.getTile(sa);if(!Vt)continue;const oa=Vt.getBucket(d);if(!oa||oa.projection.name!==pt.projection.name||!oa.groundEffect||oa.groundEffect&&!oa.groundEffect.hasData())continue;const ta=oa.groundEffect;let da,Yt;Ft===0?(da=[-n.ai,0,0],Yt=1):Ft===1?(da=[n.ai,0,0],Yt=0):Ft===2?(da=[0,-n.ai,0],Yt=3):(da=[0,n.ai,0],Yt=2);const pa=ta.regionSegments[Yt];if(!pa)continue;const Ia=new Float32Array(16);n.ad.mat4.translate(Ia,Qt.projMatrix,da),Tt(Qt,ta,pa,y.translatePosMatrix(Ia,Ut,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Sa)}}}function kl(y,o,d,A,T,S,E){A.centroidVertexArray.length===0&&A.createCentroidsBuffer();const k=S?S.findDEMTileFor(d):null;if(!(k&&k.dem||E))return;S&&k&&k.dem&&A.selfDEMTileTimestamp!==k.dem._timestamp&&(A.borderDoneWithNeighborZ=[-1,-1,-1,-1],A.selfDEMTileTimestamp=k.dem._timestamp);const Z=Le=>new n.P(Math.ceil((Le+n.da)*n.db),0),K=Le=>{const $e=o.getSource().minzoom,nt=pt=>{const ot=o.getTileByID(pt);if(ot&&ot.hasData())return ot.getBucket(T)},at=[0,-1,1];for(const pt of at){if(Le.overscaledZ+pt<$e)continue;const ot=nt(Le.calculateScaledKey(Le.overscaledZ+pt));if(ot)return ot}},Y=[0,0,0],re=(Le,$e)=>(Y[0]=Math.min(Le.min.y,$e.min.y),Y[1]=Math.max(Le.max.y,$e.max.y),Y[2]=n.ai-$e.min.x>Le.max.x?$e.min.x-n.ai:Le.max.x,Y),ne=(Le,$e)=>(Y[0]=Math.min(Le.min.x,$e.min.x),Y[1]=Math.max(Le.max.x,$e.max.x),Y[2]=n.ai-$e.min.y>Le.max.y?$e.min.y-n.ai:Le.max.y,Y),pe=[(Le,$e)=>re(Le,$e),(Le,$e)=>re($e,Le),(Le,$e)=>ne(Le,$e),(Le,$e)=>ne($e,Le)],Pe=(Le,$e,nt,at,pt,ot,ut)=>{if(!S)return 0;const ct=[[ot?nt:Le,ot?Le:nt,0],[ot?nt:$e,ot?$e:nt,0]],At=ut<0?n.ai+ut:ut,Tt=[ot?At:(Le+$e)/2,ot?(Le+$e)/2:At,0];return nt===0&&ut<0||nt!==0&&ut>0?S.getForTilePoints(pt,[Tt],!0,at):ct.push(Tt),S.getForTilePoints(d,ct,!0,k),Math.max(ct[0][2],ct[1][2],Tt[2])/S.exaggeration()};for(let Le=0;Le<4;Le++){const $e=A.borderFeatureIndices[Le];if($e.length===0)continue;const nt=n.d7[Le](d),at=K(nt);if(!(at&&at instanceof n.d8))continue;const pt=S?S.findDEMTileFor(nt):null;if(!(pt&&pt.dem||E)||(S&&pt&&pt.dem&&A.borderDEMTileTimestamp[Le]!==pt.dem._timestamp&&(A.borderDoneWithNeighborZ[Le]=-1,A.borderDEMTileTimestamp[Le]=pt.dem._timestamp),A.borderDoneWithNeighborZ[Le]===at.canonical.z))continue;at.centroidVertexArray.length===0&&at.createCentroidsBuffer();const ot=(Le<2?1:5)-Le,ut=at.borderDoneWithNeighborZ[ot]!==A.canonical.z,ct=at.borderFeatureIndices[ot];let At=0;if(A.canonical.z!==at.canonical.z){for(const Tt of $e)A.showCentroid(A.featuresOnBorder[Tt]);if(ut)for(const Tt of ct)at.showCentroid(at.featuresOnBorder[Tt]);A.borderDoneWithNeighborZ[Le]=at.canonical.z,at.borderDoneWithNeighborZ[ot]=A.canonical.z}for(const Tt of $e){const Qt=A.featuresOnBorder[Tt],Ut=A.centroidData[Qt.centroidDataIndex],ra=Qt.borders[Le];let ca;for(;At<ct.length;){ca=at.featuresOnBorder[ct[At]];const Sa=ca.borders[ot];if(Sa[1]>ra[0]+3||Sa[0]>ra[0]-3)break;at.showCentroid(ca),At++}if(ca&&At<ct.length){const Sa=At;let Ft=0;for(;!(ca.borders[ot][0]>ra[1]-3)&&(Ft++,++At!==ct.length);)ca=at.featuresOnBorder[ct[At]];ca=at.featuresOnBorder[ct[Sa]];let sa=!1;if(Ft>=1){const ta=ca.borders[ot];Math.abs(ra[0]-ta[0])<3&&Math.abs(ra[1]-ta[1])<3&&(Ft=1,sa=!0,At=Sa+1)}else if(Ft===0){A.showCentroid(Qt);continue}const Vt=at.centroidData[ca.centroidDataIndex];E&&sa&&(((Ce=Ut).flags|(Ve=Vt).flags)&n.d9?(Ce.flags|=n.d9,Ve.flags|=n.d9):(Ce.flags&=~n.d9,Ve.flags&=~n.d9));const oa=Qt.intersectsCount()>1||ca.intersectsCount()>1;if(Ft>1)At=Sa,Ut.centroidXY=Vt.centroidXY=new n.P(0,0);else if(pt&&pt.dem&&!oa){const ta=pe[Le](Ut,Vt),da=Le%2?n.ai-1:0,Yt=Pe(ta[0],Math.min(n.ai-1,ta[1]),da,pt,nt,Le<2,ta[2]);Ut.centroidXY=Vt.centroidXY=Z(Yt)}else oa?Ut.centroidXY=Vt.centroidXY=new n.P(0,0):(Ut.centroidXY=A.encodeBorderCentroid(Qt),Vt.centroidXY=at.encodeBorderCentroid(ca));A.writeCentroidToBuffer(Ut),at.writeCentroidToBuffer(Vt)}else A.showCentroid(Qt)}A.borderDoneWithNeighborZ[Le]=at.canonical.z,at.borderDoneWithNeighborZ[ot]=A.canonical.z}var Ce,Ve;(A.needsCentroidUpdate||!A.centroidVertexBuffer&&A.centroidVertexArray.length!==0)&&A.uploadCentroid(y)}const zu=[1,0,0],ba=[0,1,0],Ua=[0,0,1];function es(y,o,d){const A=d.transform,T=d.shadowRenderer;if(!T)return!0;const S=y.toUnwrapped(),E=A.tileSize*T._cascades[d.currentShadowCascade].scale;let k=o.maxHeight;if(A.elevation){const Ce=A.elevation.getMinMaxForTile(y);Ce&&(k+=Ce.max)}const Z=[...T.shadowDirection];Z[2]=-Z[2];const K=T.computeSimplifiedTileShadowVolume(S,k,E,Z);if(!K)return!1;const Y=[zu,ba,Ua,Z,[Z[0],0,Z[2]],[0,Z[1],Z[2]]],re=A.projection.name==="globe",ne=A.scaleZoom(E),pe=n.bR.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,ne,!re),Pe=T.getCurrentCascadeFrustum();return pe.intersectsPrecise(K.vertices,K.planes,Y)===0||Pe.intersectsPrecise(K.vertices,K.planes,Y)===0}function Ii(y){return[y[0]*n.dc,y[1]*n.dc,y[2]*n.dc,0]}function Zt(y,o,d,A,T,S,E,k,Z){const K=A.getSource(),Y=d.globeSharedBuffers;if(!Y)return;let re,ne,pe;if(o&&(re=A.getTile(o)),K instanceof n.aK?(ne=K.texture,pe=n.cJ(0,0,d.transform)):re&&o&&(ne=re.texture,pe=n.cJ(o.canonical.z,o.canonical.x,d.transform)),!ne||!pe)return;y||(pe=n.ad.mat4.scale(n.ad.mat4.create(),pe,[1,-1,1]));const Pe=d.context,Ce=Pe.gl,Ve=T.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR,Le=d.colorModeForDrapableLayerRenderPass(S),$e=E.defines;$e.push("GLOBE_POLES");const nt=new or(Ce.LEQUAL,or.ReadWrite,d.depthRangeFor3D),at=Float32Array.from(d.transform.expandedFarZProjMatrix),pt=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),Pe.activeTexture.set(Ce.TEXTURE0),ne.bind(Ve,Ce.CLAMP_TO_EDGE),Pe.activeTexture.set(Ce.TEXTURE1),ne.bind(Ve,Ce.CLAMP_TO_EDGE),"useMipmap"in ne&&Pe.extTextureFilterAnisotropic&&d.transform.pitch>20&&Ce.texParameterf(Ce.TEXTURE_2D,Pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Pe.extTextureFilterAnisotropicMax);const[ot,ut,ct,At]=o?Y.getPoleBuffers(o.canonical.z,!1):Y.getPoleBuffers(0,!0),Tt=T.paint.get("raster-elevation");let Qt;y?(Qt=ot,d.renderDefaultNorthPole=Tt!==0):(Qt=ut,d.renderDefaultSouthPole=Tt!==0);const Ut=Ii(E.mix),ra=((Sa,Ft,sa,Vt,oa,ta,da,Yt,pa,Ia,La,Oa,lr)=>na(Sa,Ft,sa,new Float32Array(16),new Float32Array(9),[0,0],Vt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ta,[0,0],Yt,2,Ia,La,Oa,1,0,lr))(at,pt,pe,n.ag(d.transform.zoom),0,T,0,Tt,0,Ut,E.offset,E.range,S),ca=d.getOrCreateProgram("raster",{defines:$e});d.uploadCommonUniforms(Pe,ca,null),ca.draw(d,Ce.TRIANGLES,nt,Z,Le,k,ra,T.id,Qt,ct,At)}function im(y){const o=y._nearZ,d=y.projection.farthestPixelDistance(y),A=d-o,T=.2*y.height,S=o+T;return[o,d,(S-T-o)/A,(S-o)/A]}function _h(y,o,d,A){if(y)return o instanceof Mi&&y instanceof Zo?o.getTextureDescriptor(y,d,!0):{texture:y.texture,mix:Ii(A.mix),offset:A.offset,buffer:0,tileSize:1}}var wh=n.dd([{name:"a_index",type:"Int16",components:1}]);class Rh{constructor(o,d,A,T){const S={width:A[0],height:A[1],data:null},E=o.gl;this.targetColorTexture=new n.T(o,S,E.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(o,S,E.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(d,T),this.lastInvalidatedAt=0}updateParticleTexture(o,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const A=this.context.gl,T=d.width*d.height;this.particleTexture0=new n.T(this.context,d,A.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,d,A.RGBA8,{premultiply:!1,useMipmap:!1});const S=new n.de;S.reserve(T);for(let E=0;E<T;E++)S.emplaceBack(E);this.particleIndexBuffer=this.context.createVertexBuffer(S,wh.members,!0),this.particleSegment=n.b8.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Du(y,o,d){if(!y)return null;const A=o.getTextureDescriptor(y,d,!0);if(!A)return null;let{texture:T,mix:S,offset:E,tileSize:k,buffer:Z,format:K}=A;if(!T||!K)return null;let Y=!1;return K==="uint32"&&(Y=!0,S[3]=0,S=Pt(n.df,S,[0,d.paint.get("raster-particle-max-speed")]),E=_a(n.df,E,[0,d.paint.get("raster-particle-max-speed")])),{texture:T,textureOffset:[Z/(k+2*Z),k/(k+2*Z)],tileSize:k,scalarData:Y,scale:S,offset:E,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[K]]}}function Th(y){const o=y._nearZ,d=y.projection.farthestPixelDistance(y),A=d-o,T=.2*y.height,S=o+T;return[o,d,(S-T-o)/A,(S-o)/A]}const ec=new n.al(1,0,0,1),tg=new n.al(0,1,0,1),up=new n.al(0,0,1,1),ag=new n.al(1,0,1,1),Ch=new n.al(0,1,1,1);function Ul(y,o,d,A,T,S,E){const k=y.context,Z=y.transform,K=k.gl,Y=Z.projection.name==="globe",re=Y?["PROJECTION_GLOBE_VIEW"]:[];let ne=n.ad.mat4.clone(d.projMatrix);if(Y&&n.ag(Z.zoom)>0){const Ut=n.bb(d.canonical,Z),ra=n.dg(Ut);ne=n.ad.mat4.multiply(new Float32Array(16),Z.globeMatrix,ra),n.ad.mat4.multiply(ne,Z.projMatrix,ne)}const pe=n.ad.mat4.create();pe[12]+=2*T/(n.q.devicePixelRatio*Z.width),pe[13]+=2*S/(n.q.devicePixelRatio*Z.height),n.ad.mat4.multiply(ne,pe,ne);const Pe=y.getOrCreateProgram("debug",{defines:re}),Ce=o.getTileByID(d.key);y.terrain&&y.terrain.setupElevationDraw(Ce,Pe);const Ve=or.disabled,Le=Tr.disabled,$e=y.colorModeForRenderPass(),nt="$debug";k.activeTexture.set(K.TEXTURE0),y.emptyTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Y?Ce._makeGlobeTileDebugBuffers(y.context,Z):Ce._makeDebugTileBoundsBuffers(y.context,Z.projection);const at=Ce._tileDebugBuffer||y.debugBuffer,pt=Ce._tileDebugIndexBuffer||y.debugIndexBuffer,ot=Ce._tileDebugSegments||y.debugSegments;if(Pe.draw(y,K.LINE_STRIP,Ve,Le,$e,wr.disabled,mt(ne,A),nt,at,pt,ot,null,null,null,[Ce._globeTileDebugBorderBuffer]),E){const Ut=Ce.latestRawTileData,ra=Math.floor((Ut&&Ut.byteLength||0)/1024);let ca=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ca+=` => ${d.overscaledZ}`),ca+=` ${Ce.state}`,ca+=` ${ra}kb`,function(Sa,Ft){Sa.initDebugOverlayCanvas();const sa=Sa.debugOverlayCanvas,Vt=Sa.context.gl,oa=Sa.debugOverlayCanvas.getContext("2d");oa.clearRect(0,0,sa.width,sa.height),oa.shadowColor="white",oa.shadowBlur=2,oa.lineWidth=1.5,oa.strokeStyle="white",oa.textBaseline="top",oa.font="bold 36px Open Sans, sans-serif",oa.fillText(Ft,5,5),oa.strokeText(Ft,5,5),Sa.debugOverlayTexture.update(sa),Sa.debugOverlayTexture.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE)}(y,ca)}const ut=o.getTile(d).tileSize,ct=512/Math.min(ut,512)*(d.overscaledZ/Z.zoom)*.5,At=Ce._tileDebugTextBuffer||y.debugBuffer,Tt=Ce._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,Qt=Ce._tileDebugTextSegments||y.debugSegments;Pe.draw(y,K.TRIANGLES,Ve,Le,Nr.alphaBlended,wr.disabled,mt(ne,n.al.transparent,ct),nt,At,Tt,Qt,null,null,null,[Ce._globeTileDebugTextBuffer])}function Xh(y,o,d,A){ed(y,0,o+d/2,y.transform.width,d,A)}function Qc(y,o,d,A){ed(y,o-d/2,0,d,y.transform.height,A)}function ed(y,o,d,A,T,S){const E=y.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(o*n.q.devicePixelRatio,d*n.q.devicePixelRatio,A*n.q.devicePixelRatio,T*n.q.devicePixelRatio),E.clear({color:S}),k.disable(k.SCISSOR_TEST)}const cp=n.dd([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:td}=cp;function cl(y,o,d,A){y.emplaceBack(o,d,A)}class rg{constructor(o){this.vertexArray=new n.dh,this.indices=new n.aV,cl(this.vertexArray,-1,-1,1),cl(this.vertexArray,1,-1,1),cl(this.vertexArray,-1,1,1),cl(this.vertexArray,1,1,1),cl(this.vertexArray,-1,-1,-1),cl(this.vertexArray,1,-1,-1),cl(this.vertexArray,-1,1,-1),cl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,td),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=n.b8.simpleSegment(0,0,36,12)}}function lo(y,o,d,A,T,S){const E=y.context.gl,k=o.paint.get("sky-atmosphere-color"),Z=o.paint.get("sky-atmosphere-halo-color"),K=o.paint.get("sky-atmosphere-sun-intensity"),Y=((re,ne,pe,Pe,Ce)=>({u_matrix_3f:re,u_sun_direction:ne,u_sun_intensity:pe,u_color_tint_r:[Pe.r,Pe.g,Pe.b,Pe.a],u_color_tint_m:[Ce.r,Ce.g,Ce.b,Ce.a],u_luminance:5e-5}))(n.ad.mat3.fromMat4(n.ad.mat3.create(),A),T,K,k,Z);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+S,o.skyboxTexture,0),d.draw(y,E.TRIANGLES,or.disabled,Tr.disabled,Nr.unblended,wr.frontCW,Y,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const $g=n.dd([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Sh{constructor(o){const d=new n.di;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const A=new n.aV;A.emplaceBack(0,1,2),A.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(d,$g.members),this.indexBuffer=o.createIndexBuffer(A),this.segments=n.b8.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const si=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Nn{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class dp{constructor(o){this.colorModeAlphaBlendedWriteRGB=new Nr([1,is,1,is],n.al.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Nr([1,0,1,0],n.al.transparent,[!1,!1,!1,!0]),this.params=new Nn,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const d=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Sh(d);const A=this.params.sizeRange,T=this.params.intensityRange,S=function(Y){const re=n.dl(30),ne=[];for(let pe=0;pe<Y;++pe){const Pe=2*Math.PI*re(),Ce=Math.acos(1-2*re())-.5*Math.PI;ne.push(n.ad.vec3.fromValues(Math.cos(Ce)*Math.cos(Pe),Math.cos(Ce)*Math.sin(Pe),Math.sin(Ce)))}return ne}(this.params.starsCount),E=n.dl(300),k=new n.dj,Z=new n.aV;let K=0;for(let Y=0;Y<S.length;++Y){const re=n.ad.vec3.scale([],S[Y],200),ne=Math.max(0,1+.01*A*(1*E()-.5)),pe=Math.max(0,1+.01*T*(1*E()-.5));k.emplaceBack(re[0],re[1],re[2],-1,-1,ne,pe),k.emplaceBack(re[0],re[1],re[2],1,-1,ne,pe),k.emplaceBack(re[0],re[1],re[2],1,1,ne,pe),k.emplaceBack(re[0],re[1],re[2],-1,1,ne,pe),Z.emplaceBack(K+0,K+1,K+2),Z.emplaceBack(K+0,K+2,K+3),K+=4}this.starsVx=d.createVertexBuffer(k,si.members),this.starsIdx=d.createIndexBuffer(Z),this.starsSegments=n.b8.simpleSegment(0,0,k.length,Z.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,d){const A=o.context,T=A.gl,S=o.transform,E=new or(T.LEQUAL,or.ReadOnly,[0,1]),k=n.ag(S.zoom),Z=o.style.getLut(d.scope),K=d.properties.get("color-use-theme")==="none",Y=d.properties.get("color").toRenderColor(K?null:Z).toArray01(),re=d.properties.get("high-color-use-theme")==="none",ne=d.properties.get("high-color").toRenderColor(re?null:Z).toArray01(),pe=d.properties.get("space-color-use-theme")==="none",Pe=d.properties.get("space-color").toRenderColor(pe?null:Z).toArray01PremultipliedAlpha(),Ce=5e-4,Ve=n.dk(d.properties.get("horizon-blend"),0,1,Ce,.25),Le=n.cD(o,A,S)&&Ve===Ce?S.worldSize/(2*Math.PI*1.025)-1:S.globeRadius,$e=o.frameCounter/1e3%1,nt=n.ad.vec3.length(S.globeCenterInViewSpace),at=Math.sqrt(Math.pow(nt,2)-Math.pow(Le,2)),pt=Math.acos(at/nt),ot=ut=>{const ct=S.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ut&&ct.push("ALPHA_PASS");const At=o.getOrCreateProgram("globeAtmosphere",{defines:ct}),Tt=((Ut,ra,ca,Sa,Ft,sa,Vt,oa,ta,da,Yt,pa)=>({u_frustum_tl:Ut,u_frustum_tr:ra,u_frustum_br:ca,u_frustum_bl:Sa,u_horizon:Ft,u_transition:sa,u_fadeout_range:Vt,u_color:oa,u_high_color:ta,u_space_color:da,u_temporal_offset:Yt,u_horizon_angle:pa}))(S.frustumCorners.TL,S.frustumCorners.TR,S.frustumCorners.BR,S.frustumCorners.BL,S.frustumCorners.horizon,k,Ve,Y,ne,Pe,$e,pt);o.uploadCommonUniforms(A,At);const Qt=this.atmosphereBuffer;Qt&&At.draw(o,T.TRIANGLES,E,Tr.disabled,ut?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,wr.backCW,Tt,ut?"atmosphere_glow_alpha":"atmosphere_glow",Qt.vertexBuffer,Qt.indexBuffer,Qt.segments)};ot(!1),ot(!0)}drawStars(o,d){const A=n.ay(d.properties.get("star-intensity"),0,1);if(A===0)return;const T=o.context,S=T.gl,E=o.transform,k=o.getOrCreateProgram("stars"),Z=n.ad.quat.identity([]);n.ad.quat.rotateX(Z,Z,-E._pitch),n.ad.quat.rotateZ(Z,Z,-E.angle),n.ad.quat.rotateX(Z,Z,n.ak(E._center.lat)),n.ad.quat.rotateY(Z,Z,-n.ak(E._center.lng));const K=n.ad.mat4.fromQuat(new Float32Array(16),Z),Y=n.ad.mat4.multiply([],E.starsProjMatrix,K),re=n.ad.mat3.fromMat4([],K),ne=n.ad.mat3.invert([],re),pe=[0,1,0];n.ad.vec3.transformMat3(pe,pe,ne),n.ad.vec3.scale(pe,pe,this.params.sizeMultiplier);const Pe=[1,0,0];n.ad.vec3.transformMat3(Pe,Pe,ne),n.ad.vec3.scale(Pe,Pe,this.params.sizeMultiplier);const Ce=(Ve=pe,Le=Pe,$e=A,{u_matrix:Float32Array.from(Y),u_up:Ve,u_right:Le,u_intensity_multiplier:$e});var Ve,Le,$e;o.uploadCommonUniforms(T,k),this.starsVx&&this.starsIdx&&k.draw(o,S.TRIANGLES,or.disabled,Tr.disabled,this.colorModeAlphaBlendedWriteRGB,wr.disabled,Ce,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Mu(y,o){const d=[...y],A=o.cameraWorldSizeForFog/o.worldSize,T=n.ad.mat4.identity([]);return n.ad.mat4.scale(T,T,[A,A,1]),n.ad.mat4.multiply(d,T,d),n.ad.mat4.multiply(d,o.worldToFogMatrix,d),d}function Hd(y,o,d,A,T){const S=d.material,E=A.context,{baseColorTexture:k,metallicRoughnessTexture:Z}=S.pbrMetallicRoughness,{normalTexture:K,occlusionTexture:Y,emissionTexture:re}=S;function ne(Pe,Ce,Ve){if(Pe&&(y.push(Ce),E.activeTexture.set(E.gl.TEXTURE0+Ve),Pe.gfxTexture)){const{minFilter:Le,magFilter:$e,wrapS:nt,wrapT:at}=Pe.sampler;Pe.gfxTexture.bindExtraParam(Le,$e,nt,at)}}ne(k,"HAS_TEXTURE_u_baseColorTexture",wi.BaseColor),ne(Z,"HAS_TEXTURE_u_metallicRoughnessTexture",wi.MetallicRoughness),ne(K,"HAS_TEXTURE_u_normalTexture",wi.Normal),ne(Y,"HAS_TEXTURE_u_occlusionTexture",wi.Occlusion),ne(re,"HAS_TEXTURE_u_emissionTexture",wi.Emission),T&&(T.texture||(T.texture=new n.dn(A.context,T.image,[T.image.height,T.image.height,T.image.height],E.gl.RGBA8)),E.activeTexture.set(E.gl.TEXTURE0+wi.LUT),T.texture&&T.texture.bind(E.gl.LINEAR,E.gl.CLAMP_TO_EDGE),y.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(y.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(d.texcoordBuffer)),d.colorBuffer&&(y.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(d.colorBuffer)),d.normalBuffer&&(y.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(d.normalBuffer)),d.pbrBuffer&&(y.push("HAS_ATTRIBUTE_a_pbr"),y.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(d.pbrBuffer)),S.alphaMode!=="OPAQUE"&&S.alphaMode!=="MASK"||y.push("UNPREMULT_TEXTURE_IN_SHADER"),S.defined||y.push("DIFFUSE_SHADED");const pe=A.shadowRenderer;pe&&(y.push("RENDER_SHADOWS","DEPTH_TEXTURE"),pe.useNormalOffset&&y.push("NORMAL_OFFSET"))}function Iu(y,o,d,A,T,S){const E=d.paint.get("model-opacity").constantOr(1),k=o.context,Z=new or(o.context.gl.LEQUAL,or.ReadWrite,o.depthRangeFor3D),K=o.transform,Y=y.mesh,re=Y.material,ne=re.pbrMetallicRoughness,pe=o.style.fog;let Pe;Pe=o.transform.projection.zAxisUnit==="pixels"?[...y.nodeModelMatrix]:n.ad.mat4.multiply([],A.zScaleMatrix,y.nodeModelMatrix),n.ad.mat4.multiply(Pe,A.negCameraPosMatrix,Pe);const Ce=n.ad.mat4.invert([],Pe);n.ad.mat4.transpose(Ce,Ce);const Ve=d.paint.get("model-color-use-theme").constantOr("default")==="none",Le=d.paint.get("model-emissive-strength").constantOr(0),$e=hr(new Float32Array(y.worldViewProjection),new Float32Array(Pe),new Float32Array(Ce),null,o,E,ne.baseColorFactor.toRenderColor(null),re.emissiveFactor,ne.metallicFactor,ne.roughnessFactor,re,Le,d),nt={defines:[]},at=[],pt=o.shadowRenderer;pt&&(pt.useNormalOffset=!1),Hd(nt.defines,at,Y,o,Ve?null:d.lut);let ot=null;if(pe){const At=Mu(y.nodeModelMatrix,o.transform);if(ot=new Float32Array(At),K.projection.name!=="globe"){const Tt=Y.aabb.min,Qt=Y.aabb.max,[Ut,ra]=pe.getOpacityForBounds(At,Tt[0],Tt[1],Qt[0],Qt[1]);nt.overrideFog=Ut>=Ma||ra>=Ma}}const ut=Ys(o,d.paint.get("model-cutoff-fade-range"));ut.shouldRenderCutoff&&nt.defines.push("RENDER_CUTOFF");const ct=o.getOrCreateProgram("model",nt);o.uploadCommonUniforms(k,ct,null,ot,ut),o.renderPass!=="shadow"&&pt&&pt.setupShadowsFromMatrix(y.nodeModelMatrix,ct),ct.draw(o,k.gl.TRIANGLES,Z,T,S,Y.material.doubleSided?wr.disabled:wr.backCCW,$e,d.id,Y.vertexBuffer,Y.indexBuffer,Y.segments,d.paint,o.transform.zoom,void 0,at)}function ad(y,o,d,A,T,S,E){let k;k=y.projection.name==="globe"?n.dp(d,y):[...d],n.ad.mat4.multiply(k,k,o.matrix);const Z=n.ad.mat4.multiply([],A,k);if(o.meshes)for(const K of o.meshes){if(K.material.alphaMode!=="BLEND"){E.push({mesh:K,depth:0,modelIndex:T,worldViewProjection:Z,nodeModelMatrix:k});continue}const Y=n.ad.vec3.transformMat4([],K.centroid,Z);!y.isOrthographic&&Y[2]<=0||S.push({mesh:K,depth:Y[2],modelIndex:T,worldViewProjection:Z,nodeModelMatrix:k})}if(o.children)for(const K of o.children)ad(y,K,d,A,T,S,E)}function Of(y,o,d,A){const T=d.shadowRenderer;if(!T)return;const S=T.getShadowPassDepthMode(),E=T.getShadowPassColorMode(),k=T.calculateShadowPassMatrixFromMatrix(o),Z=Ti(k);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,S,Tr.disabled,E,wr.backCCW,Z,A.id,y.vertexBuffer,y.indexBuffer,y.segments,A.paint,d.transform.zoom,void 0,void 0)}function Jh(y,o,d){const A=o.updateZoomBasedPaintProperties(),T=function(S,E,k){let Z,K,Y,re=S.terrain?S.terrain.exaggeration():0;if(S.terrain&&re>0){const ne=S.terrain,pe=ne.findDEMTileFor(k);pe&&pe.dem?Z=n.dr.create(ne,k,pe):re=0}if(re===0&&(E.terrainElevationMin=0,E.terrainElevationMax=0),re===E.validForExaggeration&&(re===0||Z&&Z._demTile&&Z._demTile.tileID===E.validForDEMTile.id&&Z._dem._timestamp===E.validForDEMTile.timestamp))return!1;for(const ne in E.instancesPerModel){const pe=E.instancesPerModel[ne];for(let Pe=0;Pe<pe.instancedDataArray.length;++Pe){const Ce=(Z?re*Z.getElevationAt(0|pe.instancedDataArray.float32[16*Pe],0|pe.instancedDataArray.float32[16*Pe+1],!0,!0):0)+pe.instancesEvaluatedElevation[Pe];pe.instancedDataArray.float32[16*Pe+6]=Ce,K=K?Math.min(E.terrainElevationMin,Ce):Ce,Y=Y?Math.max(E.terrainElevationMax,Ce):Ce}}return E.terrainElevationMin=K||0,E.terrainElevationMax=Y||0,E.validForExaggeration=re,E.validForDEMTile=Z&&Z._demTile?{id:Z._demTile.tileID,timestamp:Z._dem._timestamp}:{id:void 0,timestamp:0},!0}(y,o,d);(A||T)&&(o.uploaded=!1,o.upload(y.context))}const Bl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.ce([0,0,0],[n.ai,n.ai,0])};function Vf(y,o){const d=1<<y.canonical.z,A=o.getFreeCameraOptions().position,T=o.elevation,S=y.canonical.x/d,E=(y.canonical.x+1)/d,k=y.canonical.y/d,Z=(y.canonical.y+1)/d;let K=o._centerAltitude;if(T){const pe=T.getMinMaxForTile(y);pe&&pe.max>K&&(K=pe.max)}const Y=n.ay(A.x,S,E)-A.x,re=n.ay(A.y,k,Z)-A.y,ne=n.bH(K,o.center.lat)-A.z;return o._zoomFromMercatorZ(Math.sqrt(Y*Y+re*re+ne*ne))}function No(y,o,d,A,T,S,E){const k=y.context,Z=y.renderPass==="shadow",K=y.shadowRenderer,Y=Z&&K?K.getShadowPassDepthMode():new or(k.gl.LEQUAL,or.ReadWrite,y.depthRangeFor3D),re=y.isTileAffectedByFog(S);if(d.meshes)for(const ne of d.meshes){const pe=["MODEL_POSITION_ON_GPU"],Pe=[];let Ce,Ve,Le;A.instancedDataArray.length>20&&pe.push("INSTANCED_ARRAYS");const $e=Ys(y,o.paint.get("model-cutoff-fade-range"));if($e.shouldRenderCutoff&&pe.push("RENDER_CUTOFF"),Z&&K)Ce=y.getOrCreateProgram("modelDepth",{defines:pe}),Ve=Ti(E.shadowTileMatrix,E.shadowTileMatrix,Float32Array.from(d.matrix)),Le=K.getShadowPassColorMode();else{Hd(pe,Pe,ne,y,o.paint.get("model-color-use-theme").constantOr("default")==="none"?null:o.lut),Ce=y.getOrCreateProgram("model",{defines:pe,overrideFog:re});const at=ne.material,pt=at.pbrMetallicRoughness,ot=o.paint.get("model-opacity").constantOr(1),ut=o.paint.get("model-emissive-strength").constantOr(0);Ve=hr(S.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,y,ot,pt.baseColorFactor.toRenderColor(null),at.emissiveFactor,pt.metallicFactor,pt.roughnessFactor,at,ut,o,T),K&&(E.shadowUniformsInitialized?Ce.setShadowUniformValues(k,K.getShadowUniformValues()):(K.setupShadows(S.toUnwrapped(),Ce,"model-tile",S.overscaledZ),E.shadowUniformsInitialized=!0)),Le=$e.shouldRenderCutoff||ot<1||at.alphaMode!=="OPAQUE"?Nr.alphaBlended:Nr.unblended}y.uploadCommonUniforms(k,Ce,S.toUnwrapped(),null,$e);const nt=ne.material.doubleSided?wr.disabled:wr.backCCW;if(A.instancedDataArray.length>20)Pe.push(A.instancedDataBuffer),Ce.draw(y,k.gl.TRIANGLES,Y,Tr.disabled,Le,nt,Ve,o.id,ne.vertexBuffer,ne.indexBuffer,ne.segments,o.paint,y.transform.zoom,void 0,Pe,A.instancedDataArray.length);else{const at=Z?"u_instance":"u_normal_matrix";for(let pt=0;pt<A.instancedDataArray.length;++pt)Ve[at]=new Float32Array(A.instancedDataArray.arrayBuffer,64*pt,16),Ce.draw(y,k.gl.TRIANGLES,Y,Tr.disabled,Le,nt,Ve,o.id,ne.vertexBuffer,ne.indexBuffer,ne.segments,o.paint,y.transform.zoom,void 0,Pe)}}if(d.children)for(const ne of d.children)No(y,o,ne,A,T,S,E)}const $d=[1,-1,1];function hp(y,o,d,A){if(!d.modelManager)return!0;const T=d.modelManager;if(!d.shadowRenderer)return!0;const S=d.shadowRenderer,E=o.aabb;let k=!0,Z=y.maxHeight;if(Z===0){let Y=0;for(const re in y.instancesPerModel){const ne=T.getModel(re,A);ne?Y=Math.max(Y,Math.max(Math.max(ne.aabb.max[0],ne.aabb.max[1]),ne.aabb.max[2])):k=!1}Z=y.maxScale*Y*1.41+y.maxVerticalOffset,k&&(y.maxHeight=Z)}E.max[2]=Z,E.min[2]+=y.terrainElevationMin,E.max[2]+=y.terrainElevationMax,n.ad.vec3.transformMat4(E.min,E.min,o.tileMatrix),n.ad.vec3.transformMat4(E.max,E.max,o.tileMatrix);const K=E.intersects(S.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(y.isInsideFirstShadowMapFrustum=K===2),K===0}function fp(y,o){const d=y.uniformValues.u_cutoff_params[0],A=y.uniformValues.u_cutoff_params[1],T=y.uniformValues.u_cutoff_params[2],S=y.uniformValues.u_cutoff_params[3];return A===d||S===T?1:n.ay(((o-d)/(A-d)-T)/(S-T),0,1)}function bh(y,o,d,A){if(o.pitch<20)return 1;const T=o.getWorldToCameraMatrix();n.ad.mat4.multiply(T,T,y);const S=n.ad.vec4.fromValues(d.min[0],d.min[1],d.min[2],1);let E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E,Z=E;S[1]=d.max[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E[1]<k[1]?E:k,Z=E[1]>Z[1]?E:Z,S[0]=d.max[0],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E[1]<k[1]?E:k,Z=E[1]>Z[1]?E:Z,S[1]=d.min[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E[1]<k[1]?E:k,Z=E[1]>Z[1]?E:Z;const K=n.ay(A[0],0,1),Y=100*o.pixelsPerMeter*n.ay(A[1],0,1),re=n.ay(A[2],0,1),ne=n.ad.vec4.lerp(n.ad.vec4.create(),k,Z,K),pe=Math.tan(.5*o.fovX),Pe=-ne[2]*pe;if(Y===0)return ne[1]<-Math.abs(Pe)?re:1;const Ce=(-Math.abs(Pe)-ne[1])/Y,Ve=($e,nt,at)=>(1-at)*$e+at*nt,Le=n.ay(Ve(1,re,Ce),re,1);return Ve(1,Le,n.ay((o.pitch-20)/20,0,1))}class rd{}class nd{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,d,A){{const re=this._storage.get(d.id);if(re)return re.lastUsedFrameIdx=o,re.buf}const T=A.gl,S=T.getBufferParameter(T.ELEMENT_ARRAY_BUFFER,T.BUFFER_SIZE),E=new ArrayBuffer(S),k=new Int16Array(E);T.getBufferSubData(T.ELEMENT_ARRAY_BUFFER,0,new Int16Array(E));const Z=new n.dt;for(let re=0;re<S/2;re+=3){const ne=k[re],pe=k[re+1],Pe=k[re+2];Z.emplaceBack(ne,pe),Z.emplaceBack(pe,Pe),Z.emplaceBack(Pe,ne)}const K=A.bindVertexArrayOES.current,Y=new rd;return Y.buf=new $n(A,Z),Y.lastUsedFrameIdx=o,this._storage.set(d.id,Y),A.bindVertexArrayOES.set(K),Y.buf}update(o){for(const[d,A]of this._storage)o-A.lastUsedFrameIdx>30&&(A.buf.destroy(),this._storage.delete(d))}destroy(){for(const[o,d]of this._storage)d.buf.destroy(),this._storage.delete(o)}}class pp{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Kd=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Lu{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class xc{constructor(o,d){this.revealStart=11,this.revealRange=2,o.registerParameter(this,[...d,"Reveal"],"revealStart",{min:0,max:17,step:.05}),o.registerParameter(this,[...d,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const lu=n.dd([{type:"Float32",name:"a_pos_2f",components:2}]);class Pc{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(o,d){const A=o.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const E=new n.du,k=new n.aV;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(1,1),E.emplaceBack(-1,1),k.emplaceBack(0,1,2),k.emplaceBack(0,2,3),this.vignetteVx=o.context.createVertexBuffer(E,lu.members),this.vignetteIdx=o.context.createIndexBuffer(k)}const T=n.b8.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){o.uploadCommonUniforms(o.context,A);const E={u_vignetteShape:(S={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:S.vignetteColor};A.draw(o,o.context.gl.TRIANGLES,or.disabled,Tr.disabled,Nr.alphaBlended,wr.disabled,E,"vignette",this.vignetteVx,this.vignetteIdx,T)}var S}}class Ms{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(o,d){const A=o.getFreeCameraOptions().position,T=A.toAltitude(),S=A.toLngLat(),E=n.ak(S.lng),k=n.ak(S.lat),Z=o.pixelsPerMeter/d,K=E*n.dv,Y=n.dv*Math.log(Math.tan(Math.PI/4+k/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const re=-this._offsetYPrev+Y,ne=-this._elevationPrev+T;this._accumulatedOffsetX+=(-this._offsetXPrev+K)*Z,this._accumulatedOffsetY+=re*Z,this._accumulatedElevation+=ne*Z,this._offsetXPrev=K,this._offsetYPrev=Y,this._elevationPrev=T}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function uu(y,o){return[-(y[0]-Math.floor(y[0]/o)*o),-(y[1]-Math.floor(y[1]/o)*o),-(y[2]-Math.floor(y[2]/o)*o)]}function tc(y){const o=n.dl(1323123451230),d=[];for(let A=0;A<y;++A){const T=2*o()-1,S=2*o()-1,E=2*o()-1;d.push(n.ad.vec3.fromValues(T,S,E))}return d}function Js(y,o,d,A,T){const S=n.ay((T-d)/(A-d),0,1);return(1-S)*y+S*o}class Fu{constructor(o){this._movement=new Ms,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Pc,this._ppmScaleFactor=o}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(o,d){const A=o.transform;this._movement.update(A,this._ppmScaleFactor);const T=A.starsProjMatrix,S=n.ad.quat.identity([]);n.ad.quat.rotateX(S,S,n.ak(90)-A._pitch),n.ad.quat.rotateZ(S,S,-A.angle);const E=n.ad.mat4.fromQuat(new Float32Array(16),S),k=n.ad.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),Z=n.ad.mat4.transpose([],k),K=n.ad.mat4.multiply([],Z,E),Y=Date.now()/1e3;return this._accumulatedTimeFromStart+=(Y-this._prevTime)*d,this._prevTime=Y,{projectionMatrix:T,modelviewMatrix:K}}}class xh extends Fu{constructor(o){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new xc(o.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(o){const d=o.context;if(!this.particlesVx){const A=tc(this.particlesCount),T=new n.dw,S=new n.aV;let E=0;const k=n.dl(1323123451230);for(let Z=0;Z<A.length;++Z){const K=A[Z],Y=[2*k()-1,k(),k(),k()];T.emplaceBack(K[0],K[1],K[2],-1,-1,...Y),T.emplaceBack(K[0],K[1],K[2],1,-1,...Y),T.emplaceBack(K[0],K[1],K[2],1,1,...Y),T.emplaceBack(K[0],K[1],K[2],-1,1,...Y),S.emplaceBack(E+0,E+1,E+2),S.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=d.createVertexBuffer(T,Kd.members),this.particlesIdx=d.createIndexBuffer(S)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},A=o.transform.zoom;if(d.revealStart>A)return;const T=Js(0,1,d.revealStart,d.revealStart+d.revealRange,A);if(!this.particlesVx||!this.particlesIdx)return;const S=structuredClone(this._params);let E=[-S.direction.x,S.direction.y,-100];n.ad.vec3.normalize(E,E);const k=structuredClone(this._vignetteParams);k.strength*=T,S.overrideStyleParameters||(S.intensity=o.style.rain.state.density,S.timeFactor=o.style.rain.state.intensity,S.color=structuredClone(o.style.rain.state.color),E=structuredClone(o.style.rain.state.direction),S.screenThinning.intensity=o.style.rain.state.centerThinning,S.dropletSizeX=o.style.rain.state.dropletSize[0],S.dropletSizeYScale=o.style.rain.state.dropletSize[1]/o.style.rain.state.dropletSize[0],S.distortionStrength=100*o.style.rain.state.distortionStrength,k.strength=1,k.color=structuredClone(o.style.rain.state.vignetteColor));const Z=this.updateOnRender(o,S.timeFactor),K=o.context,Y=K.gl,re=o.transform;this.screenTexture&&this.screenTexture.size[0]===o.width&&this.screenTexture.size[1]===o.height||(this.screenTexture=new n.T(K,{width:o.width,height:o.height,data:null},Y.RGBA8)),S.distortionStrength>0&&(K.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Y.copyTexSubImage2D(Y.TEXTURE_2D,0,0,0,0,0,o.width,o.height));const ne=o.getOrCreateProgram("rainParticle");o.uploadCommonUniforms(K,ne),K.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const pe=[S.color.r,S.color.g,S.color.b,S.color.a],Pe=(Ce,Ve)=>{const Le=uu(this._movement.getPosition(),Ce),$e=S.dropletSizeX,nt=S.dropletSizeX*S.dropletSizeYScale,at=o.width/2,pt=o.height/2,ot=Js(0,S.screenThinning.start,0,1,S.screenThinning.intensity),ut=Js(.001,S.screenThinning.range,0,1,S.screenThinning.intensity),ct=Js(0,S.screenThinning.particleOffset,0,1,S.screenThinning.intensity),At=(Tt={modelview:Z.modelviewMatrix,projection:Z.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Le,velocityConeAperture:S.velocityConeAperture,velocity:S.velocity,boxSize:Ce,rainDropletSize:[$e,nt],distortionStrength:S.distortionStrength,rainDirection:E,color:pe,screenSize:[re.width,re.height],thinningCenterPos:[at,pt],thinningShape:[ot,ut,Math.pow(10,S.screenThinning.fadePower)],thinningAffectedRatio:S.screenThinning.affectedRatio,thinningParticleOffset:ct,shapeDirectionalPower:S.shapeDirPower,shapeNormalPower:S.shapeNormalPower,mode:Ve?0:1},{u_modelview:Float32Array.from(Tt.modelview),u_projection:Float32Array.from(Tt.projection),u_time:Tt.time,u_cam_pos:Tt.camPos,u_texScreen:0,u_velocityConeAperture:Tt.velocityConeAperture,u_velocity:Tt.velocity,u_boxSize:Tt.boxSize,u_rainDropletSize:Tt.rainDropletSize,u_distortionStrength:Tt.distortionStrength,u_rainDirection:Tt.rainDirection,u_color:Tt.color,u_screenSize:Tt.screenSize,u_thinningCenterPos:Tt.thinningCenterPos,u_thinningShape:Tt.thinningShape,u_thinningAffectedRatio:Tt.thinningAffectedRatio,u_thinningParticleOffset:Tt.thinningParticleOffset,u_shapeDirectionalPower:Tt.shapeDirectionalPower,u_shapeNormalPower:Tt.shapeNormalPower,u_mode:Tt.mode});var Tt;const Qt=Math.round(S.intensity*this.particlesCount),Ut=n.b8.simpleSegment(0,0,4*Qt,2*Qt);ne.draw(o,Y.TRIANGLES,or.disabled,Tr.disabled,Nr.alphaBlended,wr.disabled,At,"rain_particles",this.particlesVx,this.particlesIdx,Ut)};S.distortionStrength>0&&Pe(S.boxSize,!0),Pe(S.boxSize,!1),this._vignette.draw(o,k)}}const mp=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class Qh extends Fu{constructor(o){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new xc(o.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(o){const d=o.context;if(!this.particlesVx){const A=tc(this.particlesCount),T=new n.dx,S=new n.aV;let E=0;const k=n.dl(1323123451230);for(let Z=0;Z<A.length;++Z){const K=A[Z],Y=k(),re=k(),ne=k(),pe=[Z/A.length,Y,re,ne],Pe=[k(),k()];T.emplaceBack(K[0],K[1],K[2],-1,-1,...pe,...Pe),T.emplaceBack(K[0],K[1],K[2],1,-1,...pe,...Pe),T.emplaceBack(K[0],K[1],K[2],1,1,...pe,...Pe),T.emplaceBack(K[0],K[1],K[2],-1,1,...pe,...Pe),S.emplaceBack(E+0,E+1,E+2),S.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=d.createVertexBuffer(T,mp.members),this.particlesIdx=d.createIndexBuffer(S)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.snow)return;const d=structuredClone(this._params);let A=[-d.direction.x,d.direction.y,-100];n.ad.vec3.normalize(A,A);const T=structuredClone(this._vignetteParams),S=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},E=o.transform.zoom;if(S.revealStart>E)return;const k=Js(0,1,S.revealStart,S.revealStart+S.revealRange,E);T.strength*=k,d.overrideStyleParameters||(d.intensity=o.style.snow.state.density,d.timeFactor=o.style.snow.state.intensity,d.color=structuredClone(o.style.snow.state.color),A=structuredClone(o.style.snow.state.direction),d.screenThinning.intensity=o.style.snow.state.centerThinning,d.billboardSize=2.79*o.style.snow.state.flakeSize,T.strength=1,T.color=structuredClone(o.style.snow.state.vignetteColor));const Z=this.updateOnRender(o,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const K=o.context,Y=K.gl,re=o.transform,ne=o.getOrCreateProgram("snowParticle");o.uploadCommonUniforms(K,ne),((pe,Pe,Ce)=>{const Ve=uu(this._movement.getPosition(),pe),Le=re.width/2,$e=re.height/2,nt=Js(0,Ce.screenThinning.start,0,1,Ce.screenThinning.intensity),at=Js(.001,Ce.screenThinning.range,0,1,Ce.screenThinning.intensity),pt=Js(0,Ce.screenThinning.particleOffset,0,1,Ce.screenThinning.intensity),ot=(ut={modelview:Z.modelviewMatrix,projection:Z.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ve,velocityConeAperture:Ce.velocityConeAperture,velocity:Ce.velocity,horizontalOscillationRadius:Ce.horizontalOscillationRadius,horizontalOscillationRate:Ce.horizontalOscillationRate,boxSize:pe,billboardSize:1*Ce.billboardSize,simpleShapeParameters:[Ce.shapeFadeStart,Ce.shapeFadePower],screenSize:[re.width,re.height],thinningCenterPos:[Le,$e],thinningShape:[nt,at,Math.pow(10,Ce.screenThinning.fadePower)],thinningAffectedRatio:Ce.screenThinning.affectedRatio,thinningParticleOffset:pt,color:[Ce.color.r,Ce.color.g,Ce.color.b,Ce.color.a],direction:A},{u_modelview:Float32Array.from(ut.modelview),u_projection:Float32Array.from(ut.projection),u_time:ut.time,u_cam_pos:ut.camPos,u_velocityConeAperture:ut.velocityConeAperture,u_velocity:ut.velocity,u_horizontalOscillationRadius:ut.horizontalOscillationRadius,u_horizontalOscillationRate:ut.horizontalOscillationRate,u_boxSize:ut.boxSize,u_billboardSize:ut.billboardSize,u_simpleShapeParameters:ut.simpleShapeParameters,u_screenSize:ut.screenSize,u_thinningCenterPos:ut.thinningCenterPos,u_thinningShape:ut.thinningShape,u_thinningAffectedRatio:ut.thinningAffectedRatio,u_thinningParticleOffset:ut.thinningParticleOffset,u_particleColor:ut.color,u_direction:ut.direction});var ut;const ct=Math.round(Ce.intensity*this.particlesCount),At=n.b8.simpleSegment(0,0,4*ct,2*ct);this.particlesVx&&this.particlesIdx&&ne.draw(o,Y.TRIANGLES,or.disabled,Tr.disabled,Nr.alphaBlended,wr.disabled,ot,"snow_particles",this.particlesVx,this.particlesIdx,At)})(d.boxSize,0,d),this._vignette.draw(o,T)}}const Ph={symbol:function(y,o,d,A,T){if(y.renderPass!=="translucent")return;const S=Tr.disabled,E=y.colorModeForRenderPass(),k=d.layout.get("text-variable-anchor"),Z=d.layout.get("text-size-scale-range"),K=n.ay(y.scaleFactor,Z[0],Z[1]);k&&function(ne,pe,Pe,Ce,Ve,Le,$e,nt){const at=pe.transform,pt=Ve==="map",ot=Le==="map";for(const ut of ne){const ct=Ce.getTile(ut),At=ct.getBucket(Pe);if(!At||!At.text||!At.text.segments.get().length)continue;const Tt=n.bp(At.textSizeData,at.zoom,nt),Qt=Ho(ut,At.getProjection(),at),Ut=at.calculatePixelsToTileUnitsMatrix(ct),ra=Es(Qt,ct.tileID.canonical,ot,pt,at,At.getProjection(),Ut),ca=At.hasIconTextFit()&&At.hasIconData();if(Tt){const Sa=Math.pow(2,at.zoom-ct.tileID.overscaledZ);hs(At,pt,ot,$e,n.cY,at,ra,ut,Sa,Tt,ca)}}}(A,y,d,o,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),T,K);const Y=d.paint.get("icon-opacity").constantOr(1)!==0,re=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(Y||re)?Rn(y,o,d,A,S,E):(Y&&Rn(y,o,d,A,S,E,{onlyIcons:!0}),re&&Rn(y,o,d,A,S,E,{onlyText:!0})),o.map.showCollisionBoxes&&(Zi(y,o,d,A,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Zi(y,o,d,A,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(y,o,d,A){if(y.renderPass!=="translucent")return;const T=d.paint.get("circle-opacity"),S=d.paint.get("circle-stroke-width"),E=d.paint.get("circle-stroke-opacity"),k=d.layout.get("circle-sort-key").constantOr(1)!==void 0,Z=d.paint.get("circle-emissive-strength");if(T.constantOr(1)===0&&(S.constantOr(1)===0||E.constantOr(1)===0))return;const K=y.context,Y=K.gl,re=y.transform,ne=y.depthModeForSublayer(0,or.ReadOnly),pe=Tr.disabled,Pe=y.colorModeForDrapableLayerRenderPass(Z),Ce=re.projection.name==="globe",Ve=[n.av(re.center.lng),n.aC(re.center.lat)],Le=[];for(let nt=0;nt<A.length;nt++){const at=A[nt],pt=o.getTile(at),ot=pt.getBucket(d);if(!ot||ot.projection.name!==re.projection.name)continue;const ut=ot.programConfigurations.get(d.id),ct=n.cZ(d),At=y.isTileAffectedByFog(at);Ce&&ct.push("PROJECTION_GLOBE_VIEW"),ct.push("DEPTH_D24"),y.terrain&&re.depthOcclusionForSymbolsAndCircles&&ct.push("DEPTH_OCCLUSION");const Tt=y.getOrCreateProgram("circle",{config:ut,defines:ct,overrideFog:At}),Qt=ot.layoutVertexBuffer,Ut=ot.globeExtVertexBuffer,ra=ot.indexBuffer,ca=re.projection.createInversionMatrix(re,at.canonical),Sa={programConfiguration:ut,program:Tt,layoutVertexBuffer:Qt,globeExtVertexBuffer:Ut,indexBuffer:ra,uniformValues:n.c_(y,at,pt,ca,Ve,d),tile:pt};if(k){const Ft=ot.segments.get();for(const sa of Ft)Le.push({segments:new n.b8([sa]),sortKey:sa.sortKey,state:Sa})}else Le.push({segments:ot.segments,sortKey:0,state:Sa})}k&&Le.sort((nt,at)=>nt.sortKey-at.sortKey);const $e={useDepthForOcclusion:re.depthOcclusionForSymbolsAndCircles};for(const nt of Le){const{programConfiguration:at,program:pt,layoutVertexBuffer:ot,globeExtVertexBuffer:ut,indexBuffer:ct,uniformValues:At,tile:Tt}=nt.state,Qt=nt.segments;y.terrain&&y.terrain.setupElevationDraw(Tt,pt,$e),y.uploadCommonUniforms(K,pt,Tt.tileID.toUnwrapped()),pt.draw(y,Y.TRIANGLES,ne,pe,Pe,wr.disabled,At,d.id,ot,ct,Qt,d.paint,re.zoom,at,[ut])}},heatmap:function(y,o,d,A){if(d.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const T=y.context,S=T.gl,E=Tr.disabled,k=new Nr([S.ONE,S.ONE,S.ONE,S.ONE],n.al.transparent,[!0,!0,!0,!0]);(function(pe,Pe,Ce,Ve){const Le=pe.gl,$e=Pe.width*Ve,nt=Pe.height*Ve;pe.activeTexture.set(Le.TEXTURE1),pe.viewport.set([0,0,$e,nt]);let at=Ce.heatmapFbo;if(!at||at&&(at.width!==$e||at.height!==nt)){at&&at.destroy();const pt=Le.createTexture();Le.bindTexture(Le.TEXTURE_2D,pt),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_S,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_T,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MIN_FILTER,Le.LINEAR),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MAG_FILTER,Le.LINEAR),at=Ce.heatmapFbo=pe.createFramebuffer($e,nt,!0,null),function(ot,ut,ct,At,Tt,Qt){const Ut=ot.gl;Ut.texImage2D(Ut.TEXTURE_2D,0,ot.extRenderToTextureHalfFloat?Ut.RGBA16F:Ut.RGBA,Tt,Qt,0,Ut.RGBA,ot.extRenderToTextureHalfFloat?Ut.HALF_FLOAT:Ut.UNSIGNED_BYTE,null),At.colorAttachment.set(ct)}(pe,0,pt,at,$e,nt)}else Le.bindTexture(Le.TEXTURE_2D,at.colorAttachment.get()),pe.bindFramebuffer.set(at.framebuffer)})(T,y,d,y.transform.projection.name==="globe"?.5:.25),T.clear({color:n.al.transparent});const Z=y.transform,K=Z.projection.name==="globe",Y=K?["PROJECTION_GLOBE_VIEW"]:[],re=K?wr.frontCCW:wr.disabled,ne=[n.av(Z.center.lng),n.aC(Z.center.lat)];for(let pe=0;pe<A.length;pe++){const Pe=A[pe];if(o.hasRenderableParent(Pe))continue;const Ce=o.getTile(Pe),Ve=Ce.getBucket(d);if(!Ve||Ve.projection.name!==Z.projection.name)continue;const Le=y.isTileAffectedByFog(Pe),$e=Ve.programConfigurations.get(d.id),nt=y.getOrCreateProgram("heatmap",{config:$e,defines:Y,overrideFog:Le}),{zoom:at}=y.transform;y.terrain&&y.terrain.setupElevationDraw(Ce,nt),y.uploadCommonUniforms(T,nt,Pe.toUnwrapped());const pt=Z.projection.createInversionMatrix(Z,Pe.canonical);nt.draw(y,S.TRIANGLES,or.disabled,E,k,re,ea(y,Pe,Ce,pt,ne,at,d.paint.get("heatmap-intensity")),d.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,d.paint,y.transform.zoom,$e,K?[Ve.globeExtVertexBuffer]:null)}T.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(T,S){const E=T.context,k=E.gl,Z=S.heatmapFbo;if(!Z)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,Z.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1);let K=S.colorRampTexture;K||(K=S.colorRampTexture=new n.T(E,S.colorRamp,k.RGBA8)),K.bind(k.LINEAR,k.CLAMP_TO_EDGE),T.getOrCreateProgram("heatmapTexture").draw(T,k.TRIANGLES,or.disabled,Tr.disabled,T.colorModeForRenderPass(),wr.disabled,((Y,re,ne,pe)=>({u_image:0,u_color_ramp:1,u_opacity:re.paint.get("heatmap-opacity")}))(0,S),S.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,S.paint,T.transform.zoom)}(y,d))},line:function(y,o,d,A){if(y.renderPass!=="translucent")return;const T=d.paint.get("line-opacity"),S=d.paint.get("line-width");if(T.constantOr(1)===0||S.constantOr(1)===0)return;const E=d.paint.get("line-emissive-strength"),k=d.paint.get("line-occlusion-opacity"),Z=d.layout.get("line-elevation-reference"),K=d.layout.get("line-width-unit")==="meters",Y=Z==="sea",re=y.context,ne=re.gl;if(d.hasElevatedBuckets&&y.transform.projection.name==="globe")return;const pe=d.layout.get("line-cross-slope"),Pe=pe!==void 0,Ce=pe<1,Ve=y.colorModeForDrapableLayerRenderPass(E),Le=y.terrain&&y.terrain.renderingToTexture,$e=Le?1:n.q.devicePixelRatio,nt=d.paint.get("line-dasharray"),at=nt.constantOr(1),pt=d.layout.get("line-cap"),ot=nt.constantOr(null),ut=pt.constantOr(null),ct=d.paint.get("line-pattern"),At=ct.constantOr(1),Tt=ct.constantOr(null),Qt=d.paint.get("line-opacity").constantOr(1);let Ut=!At&&Qt!==1||y.depthOcclusion&&k>0&&k<1;const ra=d.paint.get("line-gradient"),ca=At?"linePattern":"line",Sa=n.c$(d);let Ft;if(Le&&y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(Ut=!1),k!==0&&y.depthOcclusion){const Vt=d.paint._values["line-opacity"];Vt&&Vt.value&&Vt.value.kind==="constant"?Ft=Vt.value:n.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}S.value.kind!=="constant"&&S.value.isLineProgressConstant===!1&&Sa.push("VARIABLE_LINE_WIDTH");const sa=(Vt,oa,ta,da,Yt,pa)=>{for(const Ia of Vt){const La=o.getTile(Ia);if(At&&!La.patternsLoaded())continue;const Oa=La.getBucket(d);if(!Oa||Oa.hasZOffset&&!Yt||!Oa.hasZOffset&&Yt)continue;y.prepareDrawTile();const lr=Oa.programConfigurations.get(d.id),kr=y.isTileAffectedByFog(Ia),yr=y.getOrCreateProgram(ca,{config:lr,defines:oa,overrideFog:kr,overrideRtt:!Yt&&void 0});if(Tt&&La.imageAtlas){const Cr=n.d0.from(Tt).getPrimary().scaleSelf($e).toString(),ar=La.imageAtlas.patternPositions.get(Cr);ar&&lr.setConstantPatternPositions(ar)}if(!At&&ot&&ut&&La.lineAtlas){const Cr=La.lineAtlas.getDash(ot,ut);Cr&&lr.setConstantPatternPositions(Cr)}let[Dr,Pr]=d.paint.get("line-trim-offset");(ut==="round"||ut==="square")&&Dr!==Pr&&(Dr===0&&(Dr-=1),Pr===1&&(Pr+=1));const Or=Le?Ia.projMatrix:null,Ur=K?1/Oa.tileToMeter/n.at(La,1,y.transform.zoom):1,Lr=K?1/Oa.tileToMeter/n.at(La,1,Math.floor(y.transform.zoom)):1,fr=At?n.d1(y,La,d,Or,$e,Ur,Lr,[Dr,Pr]):n.d2(y,La,d,Or,Oa.lineClipsArray.length,$e,Ur,Lr,[Dr,Pr]);if(ra){const Cr=Oa.gradients[d.id];let ar=Cr.texture;if(d.gradientVersion!==Cr.version){let ln=256;if(d.stepInterpolant){const Kn=o.getSource().maxzoom,mn=Ia.canonical.z===Kn?Math.ceil(1<<y.transform.maxZoom-Ia.canonical.z):1;ln=n.ay(n.d3(Oa.maxLineLength/n.ai*1024*mn),256,re.maxTextureSize)}Cr.gradient=n.d4({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:ln,image:Cr.gradient||void 0,clips:Oa.lineClipsArray}),Cr.texture?Cr.texture.update(Cr.gradient):Cr.texture=new n.T(re,Cr.gradient,ne.RGBA8),Cr.version=d.gradientVersion,ar=Cr.texture}re.activeTexture.set(ne.TEXTURE1),ar.bind(d.stepInterpolant?ne.NEAREST:ne.LINEAR,ne.CLAMP_TO_EDGE)}at&&(re.activeTexture.set(ne.TEXTURE0),La.lineAtlasTexture&&La.lineAtlasTexture.bind(ne.LINEAR,ne.REPEAT),lr.updatePaintBuffers()),At&&(re.activeTexture.set(ne.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),lr.updatePaintBuffers()),Yt&&!Y&&y.terrain.setupElevationDraw(La,yr),y.uploadCommonUniforms(re,yr,Ia.toUnwrapped());const on=Cr=>{Ft!=null&&(Ft.value=Qt*k),yr.draw(y,ne.TRIANGLES,ta,Cr,Ve,wr.disabled,fr,d.id,Oa.layoutVertexBuffer,Oa.indexBuffer,Oa.segments,d.paint,y.transform.zoom,lr,[Oa.layoutVertexBuffer2,Oa.patternVertexBuffer,Oa.zOffsetVertexBuffer]),Ft!=null&&(Ft.value=Qt)};if(Ut&&!Yt){const Cr=y.stencilModeForClipping(Ia).ref;Cr===0&&Le&&re.clear({stencil:0});const ar={func:ne.EQUAL,mask:255};fr.u_alpha_discard_threshold=.8,on(new Tr(ar,Cr,255,ne.KEEP,ne.KEEP,ne.INVERT)),fr.u_alpha_discard_threshold=0,on(new Tr(ar,Cr,255,ne.KEEP,ne.KEEP,ne.KEEP))}else fr.u_alpha_discard_threshold=Ut&&Yt&&pa?.8:0,on(Yt?da:y.stencilModeForClipping(Ia))}};if(d.hasNonElevatedBuckets){const Vt=!Le&&y.terrain;k!==0&&Vt?n.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`):Vt?n.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${d.id}.`):sa(A,Sa,y.depthModeForSublayer(0,or.ReadOnly),Tr.disabled,!1,!0)}if(d.hasElevatedBuckets){Sa.push("ELEVATED"),Pe&&Sa.push(Ce?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),Y&&Sa.push("ELEVATION_REFERENCE_SEA");const Vt=Ut?y.stencilModeFor3D():Tr.disabled,oa=new or(y.depthOcclusion?ne.GREATER:ne.LEQUAL,or.ReadOnly,y.depthRangeFor3D);y.forceTerrainMode=!0,sa(A,Sa,oa,Vt,!0,!0),Ut&&sa(A,Sa,oa,Vt,!0,!1),y.forceTerrainMode=!1}Ut&&(y.resetStencilClippingMasks(),Le&&re.clear({stencil:0})),k===0||y.depthOcclusion||Le||y.layersWithOcclusionOpacity.push(y.currentLayer)},fill:function(y,o,d,A){const T=d.paint.get("fill-color"),S=d.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const E=d.paint.get("fill-emissive-strength"),k=y.colorModeForDrapableLayerRenderPass(E),Z=d.paint.get("fill-pattern"),K=y.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&T.constantOr(n.al.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";let Y="none";d.layout.get("fill-elevation-reference")!=="none"?Y="road":d.paint.get("fill-z-offset").constantOr(1)!==0&&(Y="offset");const re=!(!y.terrain||!y.terrain.enabled),ne={painter:y,sourceCache:o,layer:d,coords:A,colorMode:k,elevationType:Y,terrainEnabled:re,pass:K};if(Y!=="offset"){if(ul(ne,!1),Y==="road"){const pe=!re&&y.renderPass==="translucent";pe&&Eo(y,o,d,A,"geometry"),ul(ne,!0,Tr.disabled),pe&&function(Pe){const{painter:Ce,sourceCache:Ve,layer:Le,coords:$e,colorMode:nt}=Pe,at=Ce.context.gl,pt=new or(Ce.context.gl.LEQUAL,or.ReadOnly,Ce.depthRangeFor3D);for(const ot of $e){const ut=Ve.getTile(ot),ct=ut.getBucket(Le);if(!ct)continue;const At=ct.elevatedStructures;if(!At||!At.renderableSegments||At.renderableSegments.segments[0].primitiveLength===0)continue;Ce.prepareDrawTile();const Tt=ct.bufferData.programConfigurations.get(Le.id),Qt=Ce.isTileAffectedByFog(ot),Ut=Ce.getOrCreateProgram("elevatedStructures",{config:Tt,overrideFog:Qt,defines:["NORMAL_OFFSET"]}),ra={u_matrix:Ce.translatePosMatrix(ot.projMatrix,ut,Le.paint.get("fill-translate"),Le.paint.get("fill-translate-anchor"))};Ce.uploadCommonUniforms(Ce.context,Ut,ot.toUnwrapped()),Ut.draw(Ce,at.TRIANGLES,pt,Tr.disabled,nt,wr.backCCW,ra,Le.id,At.vertexBuffer,At.indexBuffer,At.renderableSegments,Le.paint,Ce.transform.zoom,Tt,[At.vertexBufferNormal])}}(ne)}}else ul(ne,!1,y.stencilModeFor3D())},"fill-extrusion":function(y,o,d,A){const T=d.paint.get("fill-extrusion-opacity"),S=y.context,E=S.gl,k=y.terrain,Z=k&&k.renderingToTexture;if(T===0)return;const K=y.conflationActive&&y.style.isLayerClipped(d,o.getSource()),Y=y.style.order.indexOf(d.fqid);if(K&&function(re,ne,pe,Pe,Ce){for(const Ve of Pe){const Le=ne.getTile(Ve).getBucket(pe);Le&&(Le.updateReplacement(Ve,re.replacementSource,Ce),Le.uploadCentroid(re.context))}}(y,o,d,A,Y),k||K)for(const re of A){const ne=o.getTile(re).getBucket(d);ne&&kl(y.context,o,re,ne,d,k,K)}if(y.renderPass==="shadow"&&y.shadowRenderer){const re=y.shadowRenderer;if(k&&T<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.ab)return;const ne=re.getShadowPassDepthMode(),pe=re.getShadowPassColorMode();Fl(y,o,d,A,ne,Tr.disabled,pe,K)}else if(y.renderPass==="translucent"){const re=!d.paint.get("fill-extrusion-pattern").constantOr(1),ne=d.paint.get("fill-extrusion-color").constantOr(n.al.white);if(!Z&&ne.a!==0){const pe=new or(y.context.gl.LEQUAL,or.ReadWrite,y.depthRangeFor3D);T===1&&re?Fl(y,o,d,A,pe,Tr.disabled,Nr.unblended,K):(Fl(y,o,d,A,pe,Tr.disabled,Nr.disabled,K),Fl(y,o,d,A,pe,y.stencilModeFor3D(),y.colorModeForRenderPass(),K),y.resetStencilClippingMasks())}if(y.style.enable3dLights()&&re&&(!k&&y.transform.projection.name!=="globe"||Z)){const pe=d.paint.get("fill-extrusion-opacity"),Pe=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Ce=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Ve=d.paint.get("fill-extrusion-flood-light-intensity"),Le=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",$e=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(Le?null:d.lut).toArray01().slice(0,3),nt=Pe>0&&Ce>0,at=Ve>0,pt=(ut,ct,At)=>(1-At)*ut+At*ct,ot=ut=>{const ct=y.depthModeForSublayer(1,or.ReadOnly,E.LEQUAL,!0),At=d.paint.get(ut?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Tt=pt(.1,3,At),Qt=y._showOverdrawInspector;if(!Qt){const Ut=new Tr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),ra=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);Ds(y,o,d,A,ct,Ut,ra,wr.disabled,ut,"sdf",pe,Pe,Ce,Ve,$e,Tt,K,!1)}{const Ut=Qt?Tr.disabled:new Tr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),ra=Qt?y.colorModeForRenderPass():new Nr([E.ONE_MINUS_DST_ALPHA,E.DST_ALPHA,E.ONE,E.ONE],n.al.transparent,[!0,!0,!0,!0]);Ds(y,o,d,A,ct,Ut,ra,wr.disabled,ut,"color",pe,Pe,Ce,Ve,$e,Tt,K,!1)}};if(Z){const ut=(ct,At,Tt)=>{const Qt=y.depthModeForSublayer(1,or.ReadOnly,E.LEQUAL,!1),Ut=d.paint.get(ct?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),ra=pt(.1,3,Ut);{const ca=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0]);Ds(y,o,d,A,Qt,Tr.disabled,ca,wr.disabled,ct,"clear",pe,Pe,Ce,Ve,$e,ra,K,At)}{const ca=new Tr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),Sa=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);Ds(y,o,d,A,Qt,ca,Sa,wr.disabled,ct,"sdf",pe,Pe,Ce,Ve,$e,ra,K,At)}{const ca=ct?E.ZERO:E.ONE_MINUS_DST_ALPHA,Sa=new Tr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),Ft=new Nr([ca,E.DST_ALPHA,E.ONE_MINUS_DST_ALPHA,E.ZERO],n.al.transparent,[!0,!0,!0,!0]);Ds(y,o,d,A,Qt,Sa,Ft,wr.disabled,ct,"color",pe,Pe,Ce,Ve,$e,ra,K,At)}{const ca=new Nr([E.ONE,E.ONE,E.ONE,ct?E.ZERO:E.ONE],n.al.transparent,[!1,!1,!1,!0],ct?E.FUNC_ADD:E.MAX);Ds(y,o,d,A,Qt,Tr.disabled,ca,wr.disabled,ct,"clear",pe,Pe,Ce,Ve,$e,ra,K,At,Tt)}};if(nt||at){let ct;if(y.prepareDrawTile(),k){const At=k.drapeBufferSize[0],Tt=k.drapeBufferSize[1];ct=k.framebufferCopyTexture,ct&&(!ct||ct.size[0]===At&&ct.size[1]===Tt)||(ct&&ct.destroy(),ct=k.framebufferCopyTexture=new n.T(S,new n.r({width:At,height:Tt}),E.RGBA8)),ct.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,0,0,At,Tt)}nt&&ut(!0,!1,ct),at&&ut(!1,!0,ct)}}else nt&&ot(!0),at&&ot(!1),(nt||at)&&y.resetStencilClippingMasks()}}},hillshade:function(y,o,d,A){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent"||y.style.disableElevatedTerrain)return;const T=y.context,S=y.terrain&&y.terrain.renderingToTexture,[E,k]=y.renderPass!=="translucent"||S?[{},A]:y.stencilConfigForOverlap(A);for(const Z of k){const K=o.getTile(Z);if(K.needsHillshadePrepare&&y.renderPass==="offscreen")kd(y,K,d);else if(y.renderPass==="translucent"){const Y=y.depthModeForSublayer(0,or.ReadOnly),re=d.paint.get("hillshade-emissive-strength"),ne=y.colorModeForDrapableLayerRenderPass(re),pe=S&&y.terrain?y.terrain.stencilModeForRTTOverlap(Z):E[Z.overscaledZ];ss(y,Z,K,d,Y,pe,ne)}}T.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,o,d,A,T,S){if(y.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const E=y.transform.projection.name==="globe",k=d.paint.get("raster-elevation")!==0,Z=k&&E;if(y.renderElevatedRasterBackface&&!Z)return;const K=y.context,Y=K.gl,re=o.getSource(),ne=function(ot,ut,ct,At){const Tt=ut.paint.get("raster-color"),Qt=ot.type==="raster-array",Ut=[],ra=ut.paint.get("raster-resampling"),ca=ut.paint.get("raster-color-mix");let Sa=ut.paint.get("raster-color-range");const Ft=[ca[0],ca[1],ca[2],0],sa=ca[3];let Vt=ra==="nearest"?At.NEAREST:At.LINEAR;if(Qt&&(Ut.push("RASTER_ARRAY"),Tt||Ut.push("RASTER_COLOR"),ra==="linear"&&Ut.push("RASTER_ARRAY_LINEAR"),Vt=At.NEAREST,!Sa&&ot.rasterLayers)){const oa=ot.rasterLayers.find(({id:ta})=>ta===ut.sourceLayer);oa&&oa.fields&&oa.fields.range&&(Sa=oa.fields.range)}if(Sa=Sa||[0,1],Tt){Ut.push("RASTER_COLOR"),ct.activeTexture.set(At.TEXTURE2),ut.updateColorRamp(Sa);let oa=ut.colorRampTexture;oa||(oa=ut.colorRampTexture=new n.T(ct,ut.colorRamp,At.RGBA8)),oa.bind(At.LINEAR,At.CLAMP_TO_EDGE)}return{mix:Ft,range:Sa,offset:sa,defines:Ut,resampling:Vt}}(re,d,K,Y);if(re instanceof n.aK&&!A.length&&!E)return;const pe=d.paint.get("raster-emissive-strength"),Pe=y.colorModeForDrapableLayerRenderPass(pe),Ce=y.terrain&&y.terrain.renderingToTexture,Ve=!y.options.moving,Le=d.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;if(re instanceof n.aK&&!A.length&&(re.onNorthPole||re.onSouthPole)){const ot=k?y.stencilModeFor3D():Tr.disabled;return void Zt(!!re.onNorthPole,null,y,o,d,pe,ne,wr.disabled,ot)}if(!A.length)return;const[$e,nt]=re instanceof n.aK||Ce?[{},A]:y.stencilConfigForOverlap(A),at=nt[nt.length-1].overscaledZ;Z&&ne.defines.push("PROJECTION_GLOBE_VIEW"),k&&ne.defines.push("RENDER_CUTOFF");const pt=(ot,ut,ct)=>{for(const At of ot){const Tt=At.toUnwrapped(),Qt=o.getTile(At);if(Ce&&(!Qt||!Qt.hasData()))continue;K.activeTexture.set(Y.TEXTURE0);const Ut=_h(Qt,re,d,ne);if(!Ut||!Ut.texture)continue;const{texture:ra,mix:ca,offset:Sa,tileSize:Ft,buffer:sa}=Ut;let Vt,oa;Ce?(Vt=or.disabled,oa=At.projMatrix):k?(Vt=new or(Y.LEQUAL,or.ReadWrite,y.depthRangeFor3D),oa=E?Float32Array.from(y.transform.expandedFarZProjMatrix):y.transform.calculateProjMatrix(Tt,Ve)):(Vt=y.depthModeForSublayer(At.overscaledZ-at,d.paint.get("raster-opacity")===1?or.ReadWrite:or.ReadOnly,Y.LESS),oa=y.transform.calculateProjMatrix(Tt,Ve));const ta=y.terrain&&Ce?y.terrain.stencilModeForRTTOverlap(At):$e[At.overscaledZ],da=S?0:d.paint.get("raster-fade-duration");Qt.registerFadeDuration(da);const Yt=o.findLoadedParent(At,0),pa=Ll(Qt,Yt,o,y.transform,da);let Ia,La;y.terrain&&y.terrain.prepareDrawTile(),K.activeTexture.set(Y.TEXTURE0),ra.bind(Le,Y.CLAMP_TO_EDGE),K.activeTexture.set(Y.TEXTURE1),Yt?(Yt.texture&&Yt.texture.bind(Le,Y.CLAMP_TO_EDGE),Ia=Math.pow(2,Yt.tileID.overscaledZ-Qt.tileID.overscaledZ),La=[Qt.tileID.canonical.x*Ia%1,Qt.tileID.canonical.y*Ia%1]):ra.bind(Le,Y.CLAMP_TO_EDGE),"useMipmap"in ra&&K.extTextureFilterAnisotropic&&y.transform.pitch>20&&Y.texParameterf(Y.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Oa=y.transform;let lr;const kr=k?im(Oa):[0,0,0,0];let yr,Dr,Pr,Or,Ur,Lr=0;if(Z&&re instanceof n.aK&&re.coordinates.length>3)yr=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0)))),Dr=Float32Array.from(Oa.globeMatrix),Pr=Float32Array.from(n.cE(Oa)),Or=[n.av(Oa.center.lng),n.aC(Oa.center.lat)],lr=re.elevatedGlobePerspectiveTransform,Ur=re.elevatedGlobeGridMatrix||new Float32Array(9);else if(Z){const ar=n.cF(At.canonical);Lr=n.cG(ar.getCenter().lat),yr=Float32Array.from(n.bc(n.cI(At.canonical))),Dr=Float32Array.from(Oa.globeMatrix),Pr=Float32Array.from(n.cE(Oa)),Or=[n.av(Oa.center.lng),n.aC(Oa.center.lat)],lr=[0,0],Ur=Float32Array.from(n.cH(At.canonical,ar,Lr,Oa.worldSize/Oa._pixelsPerMercatorPixel))}else lr=re instanceof n.aK?re.perspectiveTransform:[0,0],yr=new Float32Array(16),Dr=new Float32Array(9),Pr=new Float32Array(16),Or=[0,0],Ur=new Float32Array(9);const fr=na(oa,yr,Dr,Pr,Ur,La||[0,0],n.ag(y.transform.zoom),Or,kr,Ia||1,pa,d,lr,k?d.paint.get("raster-elevation"):0,2,ca,Sa,ne.range,Ft,sa,pe),on=y.isTileAffectedByFog(At),Cr=y.getOrCreateProgram("raster",{defines:ne.defines,overrideFog:on});if(y.uploadCommonUniforms(K,Cr,Tt),re instanceof n.aK){const ar=re.elevatedGlobeVertexBuffer,ln=re.elevatedGlobeIndexBuffer;if(Ce||!E)re.boundsBuffer&&re.boundsSegments&&Cr.draw(y,Y.TRIANGLES,Vt,Tr.disabled,Pe,wr.disabled,fr,d.id,re.boundsBuffer,y.quadTriangleIndexBuffer,re.boundsSegments);else if(ar&&ln){const Kn=Oa.zoom<=n.c6?re.elevatedGlobeSegments:re.getSegmentsForLongitude(Oa.center.lng);Kn&&Cr.draw(y,Y.TRIANGLES,Vt,Tr.disabled,Pe,ut,fr,d.id,ar,ln,Kn)}}else if(Z){Vt=new or(Y.LEQUAL,or.ReadOnly,y.depthRangeFor3D);const ar=y.globeSharedBuffers;if(ar){const[ln,Kn,mn]=ar.getGridBuffers(Lr,!1);Cr.draw(y,Y.TRIANGLES,Vt,ct||ta,y.colorModeForRenderPass(),ut,fr,d.id,ln,Kn,mn)}}else{const{tileBoundsBuffer:ar,tileBoundsIndexBuffer:ln,tileBoundsSegments:Kn}=y.getTileBoundsBuffers(Qt);Cr.draw(y,Y.TRIANGLES,Vt,ta,Pe,wr.disabled,fr,d.id,ar,ln,Kn)}}if(!(re instanceof n.aK)&&Z)for(const At of ot){const Tt=At.canonical.y===(1<<At.canonical.z)-1;At.canonical.y===0&&Zt(!0,At,y,o,d,pe,ne,ut,ct||Tr.disabled),Tt&&Zt(!1,At,y,o,d,pe,ne,ut===wr.frontCW?wr.backCW:wr.frontCW,ct||Tr.disabled)}};Z?pt(nt,y.renderElevatedRasterBackface?wr.backCW:wr.frontCW,y.stencilModeFor3D()):pt(nt,wr.disabled,void 0),y.resetStencilClippingMasks()},"raster-particle":function(y,o,d,A,T,S){y.renderPass==="offscreen"&&function(E,k,Z,K){if(!K.length)return;const Y=E.context,re=Y.gl,ne=k.getSource();if(!(ne instanceof Mi))return;const pe=Math.ceil(Math.sqrt(Z.paint.get("raster-particle-count")));let Pe=Z.particlePositionRGBAImage;if(!Pe||Pe.width!==pe){const nt=function(at){const pt=at*at,ot=new Uint8Array(4*pt),ut=function(At){return At|=0,At=Math.imul(2747636419^At,2654435769),At=Math.imul(At^At>>>16,2654435769),((At=Math.imul(At^At>>>16,2654435769))>>>0)/4294967296},ct=1/1.1;for(let At=0;At<pt;At++){const Tt=ct*(ut(2*At+0)+fa),Qt=ct*(ut(2*At+1)+fa),Ut=255*Tt%1,ra=255*Qt%1,ca=Ut,Sa=Qt-ra/255,Ft=ra;ot[4*At+0]=255*(Tt-Ut/255),ot[4*At+1]=255*ca,ot[4*At+2]=255*Sa,ot[4*At+3]=255*Ft}return ot}(pe);Pe=Z.particlePositionRGBAImage=new n.r({width:pe,height:pe},nt)}let Ce=Z.particleFramebuffer;Ce?Ce.width!==pe&&(Ce.destroy(),Ce=Z.particleFramebuffer=Y.createFramebuffer(pe,pe,!0,null)):Ce=Z.particleFramebuffer=Y.createFramebuffer(pe,pe,!0,null);const Ve=[];for(const nt of K){const at=k.getTile(nt);if(!(at instanceof Zo))continue;const pt=Du(at,ne,Z);if(!pt)continue;const ot=[at.tileSize,at.tileSize];let ut=Z.tileFramebuffer;ut||(ut=Z.tileFramebuffer=Y.createFramebuffer(ot[0],ot[1],!0,null));let ct=at.rasterParticleState;ct||(ct=at.rasterParticleState=new Rh(Y,nt,ot,Pe));const At=ct.update(Z.lastInvalidatedAt);ct.particleTextureDimension!==pe&&ct.updateParticleTexture(nt,Pe);const Tt=ct.targetColorTexture;ct.targetColorTexture=ct.backgroundColorTexture,ct.backgroundColorTexture=Tt;const Qt=ct.particleTexture0;ct.particleTexture0=ct.particleTexture1,ct.particleTexture1=Qt,Ve.push([nt,pt,ct,At])}if(Ve.length===0)return;const Le=n.q.now(),$e=Z.previousDrawTimestamp?.001*(Le-Z.previousDrawTimestamp):.0167;if(Z.previousDrawTimestamp=Le,Z.hasColorMap()){Y.activeTexture.set(re.TEXTURE0+2);let nt=Z.colorRampTexture;nt||(nt=Z.colorRampTexture=new n.T(Y,Z.colorRamp,re.RGBA8)),nt.bind(re.LINEAR,re.CLAMP_TO_EDGE)}Y.bindFramebuffer.set(Z.tileFramebuffer.framebuffer),function(nt,at,pt){const ot=nt.context,ut=ot.gl,ct=at.tileFramebuffer;ot.activeTexture.set(ut.TEXTURE0);const At={u_texture:0,u_opacity:1.05*(Qt=at.paint.get("raster-particle-fade-opacity-factor"))/(Qt+.05)},Tt=nt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Qt;for(const Ut of pt){const[,,ra,ca]=Ut;ct.colorAttachment.set(ra.targetColorTexture.texture),ot.viewport.set([0,0,ct.width,ct.height]),ot.clear({color:n.al.transparent}),ca&&(ra.backgroundColorTexture.bind(ut.NEAREST,ut.CLAMP_TO_EDGE),Tt.draw(nt,ut.TRIANGLES,or.disabled,Tr.disabled,Nr.alphaBlended,wr.disabled,At,at.id,nt.viewportBuffer,nt.quadTriangleIndexBuffer,nt.viewportSegments))}}(E,Z,Ve),function(nt,at,pt,ot){const ut=nt.context,ct=ut.gl,At=pt.tileFramebuffer,Tt=nt.transform.projection.name==="globe",Qt=pt.paint.get("raster-particle-max-speed");for(const Ut of ot){const[ra,ca,Sa]=Ut;ut.activeTexture.set(ct.TEXTURE0+0),ca.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),At.colorAttachment.set(Sa.targetColorTexture.texture);const Ft=nt.getOrCreateProgram("rasterParticleDraw",{defines:ca.defines,overrideFog:!1});ut.activeTexture.set(ct.TEXTURE0+1);const sa=ca.scalarData?[]:[0,1,2,3].map(ta=>n.d7[ta](ra));sa.push(ra);const Vt=ra.canonical.x,oa=ra.canonical.y;for(const ta of sa){const da=at.getTile(Tt?ta.wrapped():ta);if(!da)continue;const Yt=da.rasterParticleState;if(!Yt)continue;const pa=ta.canonical.x+(1<<ta.canonical.z)*(ta.wrap-ra.wrap),Ia=ta.canonical.y;Yt.particleTexture0.bind(ct.NEAREST,ct.CLAMP_TO_EDGE);const La=aa(1,Yt.particleTexture0.size[0],[pa-Vt,Ia-oa],0,ca.texture.size,2,Qt,ca.textureOffset,ca.scale,ca.offset);Ft.draw(nt,ct.POINTS,or.disabled,Tr.disabled,Nr.alphaBlended,wr.disabled,La,pt.id,Yt.particleIndexBuffer,void 0,Yt.particleSegment)}}}(E,k,Z,Ve),Y.bindFramebuffer.set(Z.particleFramebuffer.framebuffer),function(nt,at,pt,ot){const ut=nt.context,ct=ut.gl,At=at.paint.get("raster-particle-max-speed"),Tt=ot*at.paint.get("raster-particle-speed-factor")*.15,Qt=function(ra){return Math.pow(ra,6)}(.01+1*at.paint.get("raster-particle-reset-rate-factor")),Ut=at.particleFramebuffer;ut.viewport.set([0,0,Ut.width,Ut.height]);for(const ra of pt){const[,ca,Sa]=ra;ut.activeTexture.set(ct.TEXTURE0+0),ca.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),ut.activeTexture.set(ct.TEXTURE0+1);const Ft=Sa.particleTexture0;Ft.bind(ct.NEAREST,ct.CLAMP_TO_EDGE);const sa=Ga(1,Ft.size[0],0,ca.texture.size,At,Tt,Qt,ca.textureOffset,ca.scale,ca.offset);Ut.colorAttachment.set(Sa.particleTexture1.texture),ut.clear({color:n.al.transparent}),nt.getOrCreateProgram("rasterParticleUpdate",{defines:ca.defines}).draw(nt,ct.TRIANGLES,or.disabled,Tr.disabled,Nr.unblended,wr.disabled,sa,at.id,nt.viewportBuffer,nt.quadTriangleIndexBuffer,nt.viewportSegments)}}(E,Z,Ve,$e)}(y,o,d,A),y.renderPass==="translucent"&&(function(E,k,Z,K,Y){const re=E.context,ne=re.gl,pe=k.getSource().tileSize,Pe=5*(1-n.ae(n.bY,n.bY+1,E.transform.zoom))*pe+Z.paint.get("raster-particle-elevation"),Ce=!E.options.moving,Ve=E.transform.projection.name==="globe";if(!K.length)return;const[Le,$e]=E.stencilConfigForOverlap(K),nt=[];Ve&&nt.push("PROJECTION_GLOBE_VIEW");const at=E.stencilModeFor3D();for(const pt of $e){const ot=pt.toUnwrapped(),ut=k.getTile(pt);if(!ut.rasterParticleState)continue;const ct=ut.rasterParticleState,At=100;ut.registerFadeDuration(At);const Tt=k.findLoadedParent(pt,0),Qt=Ll(ut,Tt,k,E.transform,At);let Ut,ra;E.terrain&&E.terrain.prepareDrawTile(),re.activeTexture.set(ne.TEXTURE0),ct.targetColorTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),re.activeTexture.set(ne.TEXTURE1),Tt&&Tt.rasterParticleState?(Tt.rasterParticleState.targetColorTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),Ut=Math.pow(2,Tt.tileID.overscaledZ-ut.tileID.overscaledZ),ra=[ut.tileID.canonical.x*Ut%1,ut.tileID.canonical.y*Ut%1]):ct.targetColorTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const ca=Ve?Float32Array.from(E.transform.expandedFarZProjMatrix):E.transform.calculateProjMatrix(ot,Ce),Sa=E.transform,Ft=Th(Sa),sa=n.cF(pt.canonical),Vt=n.cG(sa.getCenter().lat);let oa,ta,da,Yt,pa;Ve?(oa=Float32Array.from(n.bc(n.cI(pt.canonical))),ta=Float32Array.from(Sa.globeMatrix),da=Float32Array.from(n.cE(Sa)),Yt=[n.av(Sa.center.lng),n.aC(Sa.center.lat)],pa=Float32Array.from(n.cH(pt.canonical,sa,Vt,Sa.worldSize/Sa._pixelsPerMercatorPixel))):(oa=new Float32Array(16),ta=new Float32Array(9),da=new Float32Array(16),Yt=[0,0],pa=new Float32Array(9));const Ia=Rt(ca,oa,ta,da,pa,ra||[0,0],n.ag(E.transform.zoom),Yt,Ft,Ut||1,Qt,Pe),La=E.isTileAffectedByFog(pt),Oa=E.getOrCreateProgram("rasterParticle",{defines:nt,overrideFog:La});if(E.uploadCommonUniforms(re,Oa,ot),Ve){const lr=new or(ne.LEQUAL,or.ReadOnly,E.depthRangeFor3D),kr=0,yr=E.globeSharedBuffers;if(yr){const[Dr,Pr,Or]=yr.getGridBuffers(Vt,kr!==0);Oa.draw(E,ne.TRIANGLES,lr,at,Nr.alphaBlended,E.renderElevatedRasterBackface?wr.frontCCW:wr.backCCW,Ia,Z.id,Dr,Pr,Or)}}else{const lr=E.depthModeForSublayer(0,or.ReadOnly),kr=Le[pt.overscaledZ],{tileBoundsBuffer:yr,tileBoundsIndexBuffer:Dr,tileBoundsSegments:Pr}=E.getTileBoundsBuffers(ut);Oa.draw(E,ne.TRIANGLES,lr,kr,Nr.alphaBlended,wr.disabled,Ia,Z.id,yr,Dr,Pr)}}E.resetStencilClippingMasks()}(y,o,d,A),y.style.map.triggerRepaint())},background:function(y,o,d,A){const T=d.paint.get("background-color"),S=d.paint.get("background-color-use-theme").constantOr("default")==="none",E=d.paint.get("background-opacity"),k=d.paint.get("background-emissive-strength"),Z=d.paint.get("background-pitch-alignment")==="viewport";if(E===0)return;const K=y.context,Y=K.gl,re=y.transform,ne=re.tileSize,pe=d.paint.get("background-pattern");let Pe;if(pe!==void 0&&(pe===null||(Pe=y.imageManager.getPattern(n.I.from(pe.toString()),d.scope,y.style.getLut(d.scope)),!Pe)))return;const Ce=!pe&&T.a===1&&E===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==Ce)return;const Ve=Tr.disabled,Le=y.depthModeForSublayer(0,Ce==="opaque"?or.ReadWrite:or.ReadOnly),$e=y.colorModeForDrapableLayerRenderPass(k),nt=pe?"backgroundPattern":"background";let at,pt=A;if(pt||(at=y.getBackgroundTiles(),pt=Object.values(at).map(ot=>ot.tileID)),pe&&(K.activeTexture.set(Y.TEXTURE0),y.imageManager.bind(y.context,d.scope)),Z){const ot=y.getOrCreateProgram(nt,{overrideFog:!1,overrideRtt:!0}),ut=new Float32Array(n.ad.mat4.identity([])),ct=new n.aH(0,0,0,0,0),At=pe?gr(ut,k,E,y,0,d.scope,Pe,Z,{tileID:ct,tileSize:ne}):xr(ut,k,E,T.toRenderColor(S?null:d.lut));ot.draw(y,Y.TRIANGLES,Le,Ve,$e,wr.disabled,At,d.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments)}else for(const ot of pt){const ut=y.isTileAffectedByFog(ot),ct=y.getOrCreateProgram(nt,{overrideFog:ut}),At=ot.toUnwrapped(),Tt=A?ot.projMatrix:y.transform.calculateProjMatrix(At);y.prepareDrawTile();const Qt=o?o.getTile(ot):at?at[ot.key]:new Jl(ot,ne,re.zoom,y),Ut=pe?gr(Tt,k,E,y,0,d.scope,Pe,Z,{tileID:ot,tileSize:ne}):xr(Tt,k,E,T.toRenderColor(S?null:d.lut));y.uploadCommonUniforms(K,ct,At);const{tileBoundsBuffer:ra,tileBoundsIndexBuffer:ca,tileBoundsSegments:Sa}=y.getTileBoundsBuffers(Qt);ct.draw(y,Y.TRIANGLES,Le,Ve,$e,wr.disabled,Ut,d.id,ra,ca,Sa)}},sky:function(y,o,d){const A=y._atmosphere?n.ag(y.transform.zoom):1,T=d.paint.get("sky-opacity")*A;if(T===0)return;const S=y.context,E=d.paint.get("sky-type"),k=new or(S.gl.LEQUAL,or.ReadOnly,[0,1]),Z=y.frameCounter/1e3%1;E==="atmosphere"?y.renderPass==="offscreen"?d.needsSkyboxCapture(y)&&(function(K,Y,re,ne){const pe=K.context,Pe=pe.gl;let Ce=Y.skyboxFbo;if(!Ce){Ce=Y.skyboxFbo=pe.createFramebuffer(32,32,!0,null),Y.skyboxGeometry=new rg(pe),Y.skyboxTexture=pe.gl.createTexture(),Pe.bindTexture(Pe.TEXTURE_CUBE_MAP,Y.skyboxTexture),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_WRAP_S,Pe.CLAMP_TO_EDGE),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_WRAP_T,Pe.CLAMP_TO_EDGE),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_MIN_FILTER,Pe.LINEAR),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_MAG_FILTER,Pe.LINEAR);for(let nt=0;nt<6;++nt)Pe.texImage2D(Pe.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0,Pe.RGBA,32,32,0,Pe.RGBA,Pe.UNSIGNED_BYTE,null)}pe.bindFramebuffer.set(Ce.framebuffer),pe.viewport.set([0,0,32,32]);const Ve=Y.getCenter(K,!0),Le=K.getOrCreateProgram("skyboxCapture"),$e=new Float64Array(16);n.ad.mat4.identity($e),n.ad.mat4.rotateY($e,$e,.5*-Math.PI),lo(K,Y,Le,$e,Ve,0),n.ad.mat4.identity($e),n.ad.mat4.rotateY($e,$e,.5*Math.PI),lo(K,Y,Le,$e,Ve,1),n.ad.mat4.identity($e),n.ad.mat4.rotateX($e,$e,.5*-Math.PI),lo(K,Y,Le,$e,Ve,2),n.ad.mat4.identity($e),n.ad.mat4.rotateX($e,$e,.5*Math.PI),lo(K,Y,Le,$e,Ve,3),n.ad.mat4.identity($e),lo(K,Y,Le,$e,Ve,4),n.ad.mat4.identity($e),n.ad.mat4.rotateY($e,$e,Math.PI),lo(K,Y,Le,$e,Ve,5),pe.viewport.set([0,0,K.width,K.height])}(y,d),d.markSkyboxValid(y)):y.renderPass==="sky"&&function(K,Y,re,ne,pe){const Pe=K.context,Ce=Pe.gl,Ve=K.transform,Le=K.getOrCreateProgram("skybox");Pe.activeTexture.set(Ce.TEXTURE0),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,Y.skyboxTexture);const $e=((nt,at,pt,ot,ut)=>({u_matrix:nt,u_sun_direction:at,u_cubemap:0,u_opacity:ot,u_temporal_offset:ut}))(Ve.skyboxMatrix,Y.getCenter(K,!1),0,ne,pe);K.uploadCommonUniforms(Pe,Le),Le.draw(K,Ce.TRIANGLES,re,Tr.disabled,K.colorModeForRenderPass(),wr.backCW,$e,"skybox",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,k,T,Z):E==="gradient"&&y.renderPass==="sky"&&function(K,Y,re,ne,pe){const Pe=K.context,Ce=Pe.gl,Ve=K.transform,Le=K.getOrCreateProgram("skyboxGradient");Y.skyboxGeometry||(Y.skyboxGeometry=new rg(Pe)),Pe.activeTexture.set(Ce.TEXTURE0);let $e=Y.colorRampTexture;$e||($e=Y.colorRampTexture=new n.T(Pe,Y.colorRamp,Ce.RGBA8)),$e.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const nt=((at,pt,ot,ut,ct)=>({u_matrix:at,u_color_ramp:0,u_center_direction:pt,u_radius:n.ak(ot),u_opacity:ut,u_temporal_offset:ct}))(Ve.skyboxMatrix,Y.getCenter(K,!1),Y.paint.get("sky-gradient-radius"),ne,pe);K.uploadCommonUniforms(Pe,Le),Le.draw(K,Ce.TRIANGLES,re,Tr.disabled,K.colorModeForRenderPass(),wr.backCW,nt,"skyboxGradient",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,k,T,Z)},debug:function(y,o,d,A,T,S){for(let E=0;E<d.length;E++)if(T){const K=new n.al(A.r*.8,A.g*.8,A.b*.8,1);Ul(y,o,d[E],A,-1,-1,S),Ul(y,o,d[E],A,-1,1,S),Ul(y,o,d[E],A,1,1,S),Ul(y,o,d[E],A,1,-1,S),Ul(y,o,d[E],K,0,0,S)}else Ul(y,o,d[E],A,0,0,S)},custom:function(y,o,d,A){const T=y.context,S=d.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&d.isDraped(o)){if(y.renderPass==="offscreen"){const E=S.prerender;if(E){if(y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const k=y.transform.pointMerc;E.call(S,T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),n.ag(y.transform.zoom),[k.x,k.y],y.transform.pixelsPerMeterRatio)}else E.call(S,T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const k=S.renderToTile;if(k){const Z=A[0].canonical,K=new n.ac(Z.x+A[0].wrap*(1<<Z.z),Z.y,Z.z);T.setDepthMode(or.disabled),T.setStencilMode(Tr.disabled),T.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),k.call(S,T.gl,K),T.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),T.setStencilMode(Tr.disabled);const E=S.renderingMode==="3d"?new or(y.context.gl.LEQUAL,or.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,or.ReadOnly);if(T.setDepthMode(E),y.transform.projection.name==="globe"){const k=y.transform.pointMerc;S.render(T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),n.ag(y.transform.zoom),[k.x,k.y],y.transform.pixelsPerMeterRatio)}else S.render(T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState(),T.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(y,o,d,A){if(y.renderPass==="opaque")return;const T=d.paint.get("model-opacity").constantOr(1);if(T===0)return;const S=d.paint.get("model-cast-shadows");if(y.renderPass==="shadow"&&(!S||y.terrain&&T<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof n.ab))return;const E=y.shadowRenderer,k=d.paint.get("model-receive-shadows");E&&(E.useNormalOffset=!0,k||(E.enabled=!1));const Z=()=>{E&&(E.useNormalOffset=!0,k||(E.enabled=!0))},K=o.getSource();if(y.renderPass==="light-beam"&&K.type!=="batched-model")return;if(K.type==="vector"||K.type==="geojson")return function(Le,$e,nt,at,pt){const ot=Le.transform;if(ot.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${ot.projection.name} projection is not yet implemented`);const ut=ot.getFreeCameraOptions().position;if(!Le.modelManager)return;const ct=Le.modelManager;nt.modelManager=ct;const At=Le.shadowRenderer;if(!nt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Tt=nt._unevaluatedLayout._values["model-id"],Qt=Object.assign({},nt.layout.get("model-id").parameters),Ut=Le.style.order.indexOf(nt.fqid);for(const ra of at){const ca=$e.getTile(ra).getBucket(nt);if(!ca||ca.projection.name!==ot.projection.name)continue;const Sa=ca.getModelUris();Sa&&!ca.modelsRequested&&(ct.addModelsFromBucket(Sa,pt),ca.modelsRequested=!0);const Ft=Vf(ra,ot);Qt.zoom=Ft;const sa=Tt.possiblyEvaluate(Qt);if(Jh(Le,ca,ra),Bl.shadowUniformsInitialized=!1,Bl.useSingleShadowCascade=!!At&&At.getMaxCascadeForTile(ra.toUnwrapped())===0,Le.renderPass==="shadow"&&At){if(Le.currentShadowCascade===1&&ca.isInsideFirstShadowMapFrustum)continue;const ta=ot.calculatePosMatrix(ra.toUnwrapped(),ot.worldSize);if(Bl.tileMatrix.set(ta),Bl.shadowTileMatrix=Float32Array.from(At.calculateShadowPassMatrixFromMatrix(ta)),Bl.aabb.min.fill(0),Bl.aabb.max[0]=Bl.aabb.max[1]=n.ai,Bl.aabb.max[2]=0,hp(ca,Bl,Le,nt.scope))continue}const Vt=1<<ra.canonical.z,oa=[((ut.x-ra.wrap)*Vt-ra.canonical.x)*n.ai,(ut.y*Vt-ra.canonical.y)*n.ai,ut.z*Vt*n.ai];Le.conflationActive&&Object.keys(ca.instancesPerModel).length>0&&Le.style.isLayerClipped(nt,$e.getSource())&&ca.updateReplacement(ra,Le.replacementSource,Ut,pt)&&(ca.uploaded=!1,ca.upload(Le.context));for(let ta in ca.instancesPerModel){const da=ca.instancesPerModel[ta];da.features.length>0&&(ta=sa.evaluate(da.features[0].feature,{}));const Yt=ct.getModel(ta,pt);if(Yt&&Yt.uploaded)for(const pa of Yt.nodes)No(Le,nt,pa,da,oa,ra,Bl)}}}(y,o,d,A,K.type==="vector"?d.scope:""),void Z();if(!K.loaded())return;if(K.type==="batched-model")return function(Le,$e,nt,at){nt.resetLayerRenderingStats(Le);const pt=Le.context,ot=Le.transform,ut=Le.style.fog,ct=Le.shadowRenderer;if(ot.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${ot.projection.name} projection is not yet implemented`);const At=Le.transform.getFreeCameraOptions().position,Tt=n.ad.vec3.scale([],[At.x,At.y,At.z],Le.transform.worldSize),Qt=n.ad.vec3.negate([],Tt),Ut=n.ad.mat4.identity([]),ra=n.dm(ot.center.lat,ot.zoom),ca=n.ad.mat4.fromScaling([],[1,1,1/ra]);n.ad.mat4.translate(Ut,Ut,Qt);const Sa=nt.paint.get("model-opacity").constantOr(1),Ft=new or(pt.gl.LEQUAL,or.ReadWrite,Le.depthRangeFor3D),sa=new or(pt.gl.LEQUAL,or.ReadOnly,Le.depthRangeFor3D),Vt=new n.ce([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),oa=Le.renderPass==="shadow",ta=oa&&ct?ct.getCurrentCascadeFrustum():ot.getFrustum(ot.scaleZoom(ot.worldSize)),da=nt.paint.get("model-front-cutoff"),Yt=da[2]<1,pa=Ys(Le,nt.paint.get("model-cutoff-fade-range")),Ia=nt.getLayerRenderingStats();(function(La,Oa,lr,kr){const yr=La.terrain?La.terrain.exaggeration():0,Dr=La.transform.zoom;for(const Pr of kr){const Or=Oa.getTile(Pr).getBucket(lr);Or&&(Or.setFilter(lr.filter),La.conflationActive&&Or.updateReplacement(Pr,La.replacementSource),Or.evaluateScale(La,lr),La.terrain&&yr>0&&Or.elevationUpdate(La.terrain,yr,Pr,lr.source),Or.needsReEvaluation(La,Dr,lr)&&Or.evaluate(lr))}})(Le,$e,nt,at),function(){let La,Oa,lr;Yt?(La=at.length-1,Oa=-1,lr=-1):(La=0,Oa=at.length,lr=1);const kr=new Float64Array(16),yr=n.ad.vec3.create(),Dr=new n.P(0,0);for(let Pr=La;Pr!==Oa;Pr+=lr){const Or=at[Pr],Ur=$e.getTile(Or).getBucket(nt);if(!Ur||!Ur.uploaded)continue;let Lr=!1;ct&&(Lr=ct.getMaxCascadeForTile(Or.toUnwrapped())===0);const fr=ot.calculatePosMatrix(Or.toUnwrapped(),ot.worldSize),on=Ur.modelTraits;!oa&&Yt&&(n.ad.mat4.invert(kr,fr),n.ad.vec3.transformMat4(yr,Tt,kr),Dr.x=yr[0],Dr.y=yr[1]);const Cr=[];Ur.setFilter(nt.filter);for(const ar of Ur.getNodesInfo()){if(ar.hiddenByReplacement||!ar.node.meshes)continue;const ln=ar.node;let Kn=0;Le.terrain&&ln.elevation&&(Kn=ln.elevation*Le.terrain.exaggeration());const mn=(()=>{const ui=ar.aabb;return Vt.min=[...ui.min],Vt.max=[...ui.max],Vt.min[2]+=Kn,Vt.max[2]+=Kn,n.ad.vec3.transformMat4(Vt.min,Vt.min,fr),n.ad.vec3.transformMat4(Vt.max,Vt.max,fr),Vt})(),Dn=ar.evaluatedScale;if(Dn[0]<=1&&Dn[1]<=1&&Dn[2]<=1&&mn.intersects(ta)===0)continue;if(!oa&&Yt){const ui=.16666666666666666;ar.cameraCollisionOpacity=Tt[0]>mn.min[0]&&Tt[0]<mn.max[0]&&Tt[1]>mn.min[1]&&Tt[1]<mn.max[1]&&Tt[2]*ra<mn.max[2]&&ln.footprint&&n.bA(Dr,ln.footprint)?Math.max(ar.cameraCollisionOpacity-ui,0):Math.min(1,ar.cameraCollisionOpacity+ui)}const ts=[...fr],As=ln.anchor?ln.anchor[0]:0,uo=ln.anchor?ln.anchor[1]:0;n.ad.mat4.translate(ts,ts,[As*(Dn[0]-1),uo*(Dn[1]-1),Kn]),n.ad.vec3.exactEquals(Dn,n.dq)||n.ad.mat4.scale(ts,ts,Dn);const eo=n.ad.mat4.multiply([],ts,ln.matrix),wo=n.ad.mat4.multiply([],ot.expandedFarZProjMatrix,eo),Pn=n.ad.mat4.multiply([],ot.expandedFarZProjMatrix,ts),oi=n.ad.vec4.transformMat4([],[As,uo,Kn,1],wo)[2];ln.hidden=!1;let Ln=Sa;oa||(Yt&&(Ln*=ar.cameraCollisionOpacity,Ln*=bh(ts,ot,ar.aabb,da)),Ln*=fp(pa,oi)),Ln!==0?Cr.push({nodeInfo:ar,depth:oi,opacity:Ln,wvpForNode:wo,wvpForTile:Pn,nodeModelMatrix:eo,tileModelMatrix:ts}):ln.hidden=!0}oa||Cr.sort((ar,ln)=>!Yt||ar.opacity===1&&ln.opacity===1?ar.depth<ln.depth?-1:1:ar.opacity===1?-1:ln.opacity===1?1:ar.depth>ln.depth?-1:1);for(const ar of Cr){const ln=ar.nodeInfo,Kn=ln.node;let mn=n.ad.mat4.multiply([],ca,ar.tileModelMatrix);n.ad.mat4.multiply(mn,Ut,mn);const Dn=n.ad.mat4.invert([],mn);n.ad.mat4.transpose(Dn,Dn),n.ad.mat4.scale(Dn,Dn,$d),mn=n.ad.mat4.multiply(mn,mn,Kn.matrix);const ts=Le.renderPass==="light-beam",As=nt.paint.get("model-color-use-theme").constantOr("default")==="none",uo=on&n.ds.HasMapboxMeshFeatures,eo=uo?0:ln.evaluatedRMEA[0][2];for(let wo=0;wo<Kn.meshes.length;++wo){const Pn=Kn.meshes[wo],oi=wo===Kn.lightMeshIndex;let Ln=ar.wvpForNode;if(oi){if(!ts&&!Le.terrain&&Le.shadowRenderer){Le.currentLayer<Le.firstLightBeamLayer&&(Le.firstLightBeamLayer=Le.currentLayer);continue}Ln=ar.wvpForTile}else if(ts)continue;const ui={defines:[]},Ro=[];if(!oa&&ct&&(ct.useNormalOffset=!!Pn.normalBuffer),Hd(ui.defines,Ro,Pn,Le,As?null:nt.lut),uo||ui.defines.push("DIFFUSE_SHADED"),Lr&&ui.defines.push("SHADOWS_SINGLE_CASCADE"),Ia&&(oa?Ia.numRenderedVerticesInShadowPass+=Pn.vertexArray.length:Ia.numRenderedVerticesInTransparentPass+=Pn.vertexArray.length),oa){Of(Pn,ar.nodeModelMatrix,Le,nt);continue}let bi=null;if(ut){const ic=Mu(ar.nodeModelMatrix,Le.transform);if(bi=new Float32Array(ic),ot.projection.name!=="globe"){const Sl=Pn.aabb.min,Jd=Pn.aabb.max,[To,Vh]=ut.getOpacityForBounds(ic,Sl[0],Sl[1],Jd[0],Jd[1]);ui.overrideFog=To>=Ma||Vh>=Ma}}const fs=Pn.material;let Vc;fs.occlusionTexture&&fs.occlusionTexture.offsetScale&&(Vc=fs.occlusionTexture.offsetScale,ui.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Xo=Le.getOrCreateProgram("model",ui);!oa&&ct&&ct.setupShadowsFromMatrix(ar.tileModelMatrix,Xo,ct.useNormalOffset),Le.uploadCommonUniforms(pt,Xo,null,bi);const cu=fs.pbrMetallicRoughness;cu.metallicFactor=.9,cu.roughnessFactor=.5;const jl=hr(new Float32Array(Ln),new Float32Array(mn),new Float32Array(Dn),new Float32Array(Kn.matrix),Le,ar.opacity,cu.baseColorFactor.toRenderColor(null),fs.emissiveFactor,cu.metallicFactor,cu.roughnessFactor,fs,eo,nt,[0,0,0],Vc);!oi&&(ln.hasTranslucentParts||ar.opacity<1)&&Xo.draw(Le,pt.gl.TRIANGLES,Ft,Tr.disabled,Nr.disabled,wr.backCCW,jl,nt.id,Pn.vertexBuffer,Pn.indexBuffer,Pn.segments,nt.paint,Le.transform.zoom,void 0,Ro),Xo.draw(Le,pt.gl.TRIANGLES,oi?sa:Ft,Tr.disabled,oi||ar.opacity<1||ln.hasTranslucentParts?Nr.alphaBlended:Nr.unblended,wr.backCCW,jl,nt.id,Pn.vertexBuffer,Pn.indexBuffer,Pn.segments,nt.paint,Le.transform.zoom,void 0,Ro)}}}}()}(y,o,d,A),void Z();if(K.type!=="model")return;const Y=K.getModels(),re=[],ne=y.transform.getFreeCameraOptions().position,pe=n.ad.vec3.scale([],[ne.x,ne.y,ne.z],y.transform.worldSize);n.ad.vec3.negate(pe,pe);const Pe=[],Ce=[];let Ve=0;for(const Le of Y){const $e=d.paint.get("model-rotation").constantOr(null),nt=d.paint.get("model-scale").constantOr(null),at=d.paint.get("model-translation").constantOr(null);Le.computeModelMatrix(y,$e,nt,at,!0,!0,!1);const pt=n.ad.mat4.identity([]),ot=n.dm(Le.position.lat,y.transform.zoom),ut=n.ad.mat4.fromScaling([],[1,1,1/ot]);n.ad.mat4.translate(pt,pt,pe),re.push({zScaleMatrix:ut,negCameraPosMatrix:pt});for(const ct of Le.nodes)ad(y.transform,ct,Le.matrix,y.transform.expandedFarZProjMatrix,Ve,Pe,Ce);Ve++}if(Pe.sort((Le,$e)=>$e.depth-Le.depth),y.renderPass!=="shadow"){if(T===1)for(const Le of Ce)Iu(Le,y,d,re[Le.modelIndex],Tr.disabled,y.colorModeForRenderPass());else{for(const Le of Ce)Iu(Le,y,d,re[Le.modelIndex],Tr.disabled,Nr.disabled);for(const Le of Ce)Iu(Le,y,d,re[Le.modelIndex],y.stencilModeFor3D(),y.colorModeForRenderPass());y.resetStencilClippingMasks()}for(const Le of Pe)Iu(Le,y,d,re[Le.modelIndex],Tr.disabled,y.colorModeForRenderPass());Z()}else{for(const Le of Ce)Of(Le.mesh,Le.nodeModelMatrix,y,d);for(const Le of Pe)Of(Le.mesh,Le.nodeModelMatrix,y,d);Z()}}},Wd={line:function(y,o,d){if(y.hasElevatedBuckets=!1,y.hasNonElevatedBuckets=!1,y._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||y._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(o){const A=o.getVisibleCoordinates();for(const T of A){const S=o.getTile(T).getBucket(y);if(S&&(S.hasZOffset?y.hasElevatedBuckets=!0:y.hasNonElevatedBuckets=!0,y.hasElevatedBuckets&&y.hasNonElevatedBuckets))break}}}else y.hasNonElevatedBuckets=!0},model:function(y,o,d){const A=o.getSource();if(!A.loaded())return;if(A.type==="vector"||A.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,A.type==="vector"?y.scope:""));if(A.type==="batched-model"||A.type!=="model")return;const T=A.getModels();for(const S of T)S.upload(d.context)},raster:function(y,o,d){const A=o.getSource();if(!(A instanceof Mi&&A.loaded()))return;const T=y.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!T)return;const S=y.paint.get("raster-array-band")||A.getInitialBand(T);if(S==null)return;const E=o.getIds().map(k=>o.getTileByID(k));for(const k of E)k.updateNeeded(T,S)&&A.prepareTile(k,T,S)},"raster-particle":function(y,o,d){const A=o.getSource();if(!(A instanceof Mi&&A.loaded()))return;const T=y.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!T)return;const S=y.paint.get("raster-particle-array-band")||A.getInitialBand(T);if(S==null)return;const E=o.getIds().map(k=>o.getTileByID(k));for(const k of E)k.updateNeeded(T,S)&&A.prepareTile(k,T,S)}},ng={fill:Eo};class sm{constructor(o,d,A,T,S){this.context=new wn(o,d),this.transform=A,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=S,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const E=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const Z of E)this._debugParams.enabledLayers[Z]=!0;S.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),S.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),S.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),S.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const Z of E)S.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],Z);this.occlusionParams=new pp(S),this.setup(),this.numSublayers=tl.maxUnderzooming+tl.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dy,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Ao(this),this._wireframeDebugCache=new nd,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const k=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,k,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=T}updateTerrain(o,d){const A=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(A||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new qd(this,o));const T=this._terrain;this.transform.elevation=A?T:null,T.update(o,this.transform,d),this.transform.elevation&&!T.enabled&&(this.transform.elevation=null)}_updateFog(o){const d=o.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[A,T]=d.getFovAdjustedRange(this.transform._fov);if(A>T)return void(this.transform.fogCullDistSq=null);const S=A+.78*(T-A);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new qd(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,d){if(this.width=o*n.q.devicePixelRatio,this.height=d*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style.order)this.style._mergedLayers[A].resize()}setup(){const o=this.context,d=new n.b5;d.emplaceBack(0,0),d.emplaceBack(n.ai,0),d.emplaceBack(0,n.ai),d.emplaceBack(n.ai,n.ai),this.tileExtentBuffer=o.createVertexBuffer(d,n.b7.members),this.tileExtentSegments=n.b8.simpleSegment(0,0,4,2);const A=new n.b5;A.emplaceBack(0,0),A.emplaceBack(n.ai,0),A.emplaceBack(0,n.ai),A.emplaceBack(n.ai,n.ai),this.debugBuffer=o.createVertexBuffer(A,n.b7.members),this.debugSegments=n.b8.simpleSegment(0,0,4,5);const T=new n.b5;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(T,n.b7.members),this.viewportSegments=n.b8.simpleSegment(0,0,4,2);const S=new n.aU;S.emplaceBack(0,0,0,0),S.emplaceBack(n.ai,0,n.ai,0),S.emplaceBack(0,n.ai,0,n.ai),S.emplaceBack(n.ai,n.ai,n.ai,n.ai),this.mercatorBoundsBuffer=o.createVertexBuffer(S,n.ba.members),this.mercatorBoundsSegments=n.b8.simpleSegment(0,0,4,2);const E=new n.aV;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(E);const k=new n.b6;for(const K of[0,1,3,2,0])k.emplaceBack(K);this.debugIndexBuffer=o.createIndexBuffer(k),this.emptyTexture=new n.T(o,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=n.ad.mat4.create();const Z=this.context.gl;this.stencilClearMode=new Tr({func:Z.ALWAYS,mask:0},0,255,Z.ZERO,Z.ZERO,Z.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,or.disabled,this.stencilClearMode,Nr.disabled,wr.disabled,Yc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,d,A){if(!d||this.currentStencilSource===d.id||!o.isTileClipped()||!A||A.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const Z of A)if(this._tileClippingMaskIDs[Z.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=d.id;const T=this.context,S=T.gl;this.nextStencilID+A.length>256&&this.clearStencil(),T.setColorMode(Nr.disabled),T.setDepthMode(or.disabled);const E=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of A){const Z=d.getTile(k),K=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:Y,tileBoundsIndexBuffer:re,tileBoundsSegments:ne}=this.getTileBoundsBuffers(Z);E.draw(this,S.TRIANGLES,or.disabled,new Tr({func:S.ALWAYS,mask:0},K,255,S.KEEP,S.KEEP,S.REPLACE),Nr.disabled,wr.disabled,Yc(k.projMatrix),"$clipping",Y,re,ne)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,d=this.context.gl;return new Tr({func:d.NOTEQUAL,mask:255},o,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const d=this.context.gl;return new Tr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(o){const d=this.context.gl,A=o.sort((E,k)=>k.overscaledZ-E.overscaledZ),T=A[A.length-1].overscaledZ,S=A[0].overscaledZ-T+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const E={};for(let k=0;k<S;k++)E[k+T]=new Tr({func:d.GEQUAL,mask:255},k+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=S,[E,A]}return[{[T]:Tr.disabled},A]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Nr([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new n.al(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}colorModeForDrapableLayerRenderPass(o){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Nr([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new n.al(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,d,A,T=!1){if(this.depthOcclusion)return new or(this.context.gl.GREATER,or.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!T)return or.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new or(A||this.context.gl.LEQUAL,d,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,d=Math.ceil(this.width),A=Math.ceil(this.height),T=this.context.bindFramebuffer.get(),S=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===A||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&A!==0&&(this.depthFBO=new jn(this.context,d,A,!1,"texture"),this.depthTexture=new n.T(this.context,{width:d,height:A,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(T),o.bindTexture(o.TEXTURE_2D,S),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,d,A,0,0,d,A,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,d)=>o+d/this._fpsHistory.length,0))}render(o,d){const A=n.q.now();this._dt=A-this._timeStamp,this._timeStamp=A,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=d;const T=this.style._mergedLayers,S=!(!this.terrain||!this.terrain.enabled),E=()=>this.style._getOrder(S).filter(Ft=>{const sa=T[Ft];return!(sa.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[sa.type]});let k=E(),Z=!1,K=!1;for(const Ft of k){const sa=T[Ft];sa.type==="circle"&&(Z=!0),sa.type==="symbol"&&(sa.hasInitialOcclusionOpacityProperties?K=!0:Z=!0)}let Y=k.map(Ft=>T[Ft]);const re=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let ne=0,pe=!1;for(const Ft in re){const sa=re[Ft];sa.used&&(sa.prepare(this.context),sa.getSource().usedInConflation&&++ne)}let Pe=!1;for(const Ft of Y)Ft.isHidden(this.transform.zoom)||(Ft.type==="clip"&&(Pe=!0),this.prepareLayer(Ft));const Ce={},Ve={},Le={},$e={},nt={};for(const Ft in re){const sa=re[Ft];Ce[Ft]=sa.getVisibleCoordinates(),Ve[Ft]=Ce[Ft].slice().reverse(),Le[Ft]=sa.getVisibleCoordinates(!0).reverse(),$e[Ft]=sa.getShadowCasterCoordinates(),nt[Ft]=sa.sortCoordinatesByDistance(Ce[Ft])}const at=Ft=>{const sa=this.style.getLayerSourceCache(Ft);return sa&&sa.used?sa.getSource():null};if(ne||Pe||this._clippingActiveLastFrame){const Ft=[],sa=[];let Vt=0;for(const oa of Y)this.isSourceForClippingOrConflation(oa,at(oa))&&(Ft.push(oa),sa.push(Vt)),Vt++;if(Ft&&(Pe||Ft.length>1)||this._clippingActiveLastFrame){Pe=!1;const oa=[];for(let ta=0;ta<Ft.length;ta++){const da=Ft[ta],Yt=sa[ta],pa=this.style.getLayerSourceCache(da);if(!pa||!pa.used||!pa.getSource().usedInConflation&&da.type!=="clip")continue;let Ia=n.dA,La=n.by.None;const Oa=[];let lr=!0;if(da.type==="clip"){Ia=Yt;for(const kr of da.layout.get("clip-layer-types"))La|=kr==="model"?n.by.Model:kr==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const kr of da.layout.get("clip-layer-scope"))Oa.push(kr);da.isHidden(this.transform.zoom)?lr=!1:Pe=!0}lr&&oa.push({layer:da.fqid,cache:pa,order:Ia,clipMask:La,clipScope:Oa})}this.replacementSource.setSources(oa),pe=!0}}this._clippingActiveLastFrame=Pe,pe||this.replacementSource.clear(),this.conflationActive=pe,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Ft=0;Ft<Y.length;Ft++){const sa=Y[Ft],Vt=sa.cutoffRange();if(this.longestCutoffRange=Math.max(Vt,this.longestCutoffRange),Vt>0){const oa=at(sa);oa&&(this.minCutoffZoom=Math.max(oa.minzoom,this.minCutoffZoom)),sa.minzoom&&(this.minCutoffZoom=Math.max(sa.minzoom,this.minCutoffZoom))}sa.is3D(S)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Ft),this._lastOcclusionLayer=Ft)}const pt=this.style&&this.style.fog;pt?(this._fogVisible=pt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=pt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Le),this.opaquePassCutoff=0,k=E(),Y=k.map(Ft=>T[Ft]));const ot=this._shadowRenderer;if(ot){ot.updateShadowParameters(this.transform,this.style.directionalLight);for(const Ft in re)for(const sa of Ce[Ft]){let Vt={min:0,max:0};this.terrain&&(Vt=this.terrain.getMinMaxForTile(sa)||Vt),ot.addShadowReceiver(sa.toUnwrapped(),Vt.min,Vt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dz(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new dp(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const ut=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),ct=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(ut&&!this._snow&&(this._snow=new Qh(this)),!ut&&this._snow&&(this._snow.destroy(),delete this._snow),ct&&!this._rain&&(this._rain=new xh(this)),!ct&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!zt.has(this.context.gl))return;this.renderPass="offscreen";for(const Ft of Y){const sa=o.getLayerSourceCache(Ft);if(!Ft.hasOffscreenPass()||Ft.isHidden(this.transform.zoom))continue;const Vt=sa?Ve[sa.id]:void 0;(Ft.type==="custom"||Ft.type==="raster"||Ft.type==="raster-particle"||Ft.isSky()||Vt&&Vt.length)&&this.renderLayer(this,sa,Ft,Vt)}this.depthRangeFor3D=[0,1-(Y.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,$e)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const At=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Tt=(()=>{if(d.showOverdrawInspector)return n.al.black;const Ft=this.style.fog;if(Ft&&this.transform.projection.supportsFog){const sa=this.style.getLut(Ft.scope);if(!At){const Vt=Ft.properties.get("color-use-theme")==="none",oa=Ft.properties.get("color").toRenderColor(Vt?null:sa).toArray01();return new n.al(...oa)}if(At){const Vt=Ft.properties.get("space-color-use-theme")==="none",oa=Ft.properties.get("space-color").toRenderColor(Vt?null:sa).toArray01();return new n.al(...oa)}}return n.al.transparent})();if(this.context.clear({color:Tt,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&At&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const Ft=Y[this.currentLayer],sa=o.getLayerSourceCache(Ft);if(Ft.isSky())continue;const Vt=sa?(Ft.is3D(S)?nt:Ve)[sa.id]:void 0;this._renderTileClippingMasks(Ft,sa,Vt),this.renderLayer(this,sa,Ft,Vt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&At&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ag(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const Ft=Y[this.currentLayer],sa=o.getLayerSourceCache(Ft);Ft.isSky()&&this.renderLayer(this,sa,Ft,sa?Ve[sa.id]:void 0)}function Qt(Ft,sa){let Vt;return sa&&(Vt=(Ft.type==="symbol"?Le:Ft.is3D(S)?nt:Ve)[sa.id]),Vt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<k.length;){const Ft=Y[this.currentLayer];if(Ft.type==="raster"||Ft.type==="raster-particle"){const sa=o.getLayerSourceCache(Ft);this.renderLayer(this,sa,Ft,Qt(Ft,sa))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ut=0;ot&&(Ut=ot.getShadowCastingLayerCount());let ra=!1,ca=-1;for(let Ft=0;Ft<k.length;++Ft){const sa=Y[Ft];sa.isHidden(this.transform.zoom)||sa.is3D(S)&&(ca=Ft)}K&&ca===-1&&(Z=!0);let Sa=!1;for(;this.currentLayer<k.length;){const Ft=Y[this.currentLayer],sa=o.getLayerSourceCache(Ft);if(Ft.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Ft)){if(Ft.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!Sa&&Ft.is3D(S)&&!S){const Vt=this.currentLayer,oa=ta=>{for(this.currentLayer=0;this.currentLayer<Y.length;this.currentLayer++){const da=Y[this.currentLayer];if(ng[da.type]){const Yt=this.style.getLayerSourceCache(da);ng[da.type](this,Yt,da,Qt(da,Yt),ta)}}};oa("initialize"),oa("reset"),this.currentLayer=Vt,Sa=!0}if(Z&&!ra&&this.terrain&&!this.transform.isOrthographic&&(ra=!0,this.blitDepth()),K&&ca!==-1&&this.currentLayer===ca+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(Ft,sa,sa?Ce[sa.id]:void 0),this.renderLayer(this,sa,Ft,Qt(Ft,sa)),!this.terrain&&ot&&Ut>0&&Ft.hasShadowPass()&&--Ut==0&&(ot.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Vt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Vt;this.currentLayer++){const oa=Y[this.currentLayer];if(!oa.hasLightBeamPass())continue;const ta=o.getLayerSourceCache(oa);this.renderLayer(this,ta,oa,ta?Ve[ta.id]:void 0)}this.currentLayer=Vt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Vt=this.currentLayer;this.depthOcclusion=!0;for(const oa of this.layersWithOcclusionOpacity){this.currentLayer=oa;const ta=Y[this.currentLayer],da=o.getLayerSourceCache(ta),Yt=da?Ve[da.id]:void 0;this.terrain||this._renderTileClippingMasks(ta,da,da?Ce[da.id]:void 0),this.renderLayer(this,da,ta,Yt)}this.depthOcclusion=!1,this.currentLayer=Vt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Ft=null;Y.forEach(sa=>{const Vt=o.getLayerSourceCache(sa);Vt&&!sa.isHidden(this.transform.zoom)&&Vt.getVisibleCoordinates().length&&(!Ft||Ft.getSource().maxzoom<Vt.getSource().maxzoom)&&(Ft=Vt)}),Ft&&this.options.showTileBoundaries&&Ph.debug(this,Ft,Ft.getVisibleCoordinates(),n.al.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Ph.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.al(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Ft){const sa=Ft.transform.padding;Xh(Ft,Ft.transform.height-(sa.top||0),3,ec),Xh(Ft,sa.bottom||0,3,tg),Qc(Ft,sa.left||0,3,up),Qc(Ft,Ft.transform.width-(sa.right||0),3,ag);const Vt=Ft.transform.centerPoint;(function(oa,ta,da,Yt){ed(oa,ta-1,da-10,2,20,Yt),ed(oa,ta-10,da-1,20,2,Yt)})(Ft,Vt.x,Ft.transform.height-Vt.y,Ch)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),pe||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:d}=this.transform.projection,A=!d||!d.includes(o.type);if(Wd[o.type]&&(A||this.terrain&&o.type==="custom")){const T=this.style.getLayerSourceCache(o);Wd[o.type](o,T,this)}this.gpuTimingEnd()}renderLayer(o,d,A,T){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="sky"||A.type==="custom"||A.type==="model"||A.type==="raster"||A.type==="raster-particle"||T&&T.length)&&(this.id=A.id,this.gpuTimingStart(A),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(A.type)&&(!o.terrain||A.type!=="custom")||A.type==="clip"||Ph[A.type](o,d,A,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,A=this.context.gl;let T=this.gpuTimers[o.id];T||(T=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:A.createQuery()}),T.calls++,A.beginQuery(d.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,d=this.context.gl,A=d.createQuery();this.deferredRenderGpuTimeQueries.push(A),d.beginQuery(o.TIME_ELAPSED_EXT,A)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const d={};for(const A in o){const T=o[A],S=this.context.extTimerQuery,E=S.getQueryParameter(T.query,this.context.gl.QUERY_RESULT)/1e6;S.deleteQueryEXT(T.query),d[A]=E}return d}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let A=0;for(const T of o)A+=d.getQueryParameter(T,d.QUERY_RESULT)/1e6,d.deleteQuery(T);return A}translatePosMatrix(o,d,A,T,S){if(!A[0]&&!A[1])return o;const E=S?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(E){const K=Math.sin(E),Y=Math.cos(E);A=[A[0]*Y-A[1]*K,A[0]*K+A[1]*Y]}const k=[S?A[0]:n.at(d,A[0],this.transform.zoom),S?A[1]:n.at(d,A[1],this.transform.zoom),0],Z=new Float32Array(16);return n.ad.mat4.translate(Z,o,k),Z}saveTileTexture(o){const d=o.size[0],A=this._tileTextures[d];A?A.push(o):this._tileTextures[d]=[o]}getTileTexture(o){const d=this._tileTextures[o];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,d,A){const T=A===void 0?this.terrain&&this.terrain.renderingToTexture:A,S=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(S.push("LIGHTING_3D_MODE"),S.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):T||S.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||S.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(S.push("TERRAIN"),this.linearFloatFilteringSupported()&&S.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&S.push("GLOBE"),!this._fogVisible||T||d!==void 0&&!d||S.push("FOG","FOG_DITHERING"),T&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}getOrCreateProgram(o,d){this.cache=this.cache||{};const A=d&&d.defines||[],T=d&&d.config,S=this.currentGlobalDefines(o,d&&d.overrideFog,d&&d.overrideRtt).concat(A),E=eg.cacheKey(nl[o],o,S,T);return this.cache[E]||(this.cache[E]=new eg(this.context,o,nl[o],T,Ni[o],S)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,d){if(this.style.enable3dLights()){const A=this.style.directionalLight,T=this.style.ambientLight;if(A&&T){const S=((E,k,Z)=>{const K=E.properties.get("direction"),Y=E.properties.get("color-use-theme")==="none",re=E.properties.get("color").toRenderColor(Y?null:Z.getLut(E.scope)).toArray01(),ne=E.properties.get("intensity"),pe=k.properties.get("color-use-theme")==="none",Pe=k.properties.get("color").toRenderColor(pe?null:Z.getLut(k.scope)).toArray01(),Ce=k.properties.get("intensity"),Ve=[K.x,K.y,K.z],Le=n.cN(Pe,Ce),$e=n.cN(re,ne);return{u_lighting_ambient_color:Le,u_lighting_directional_dir:Ve,u_lighting_directional_color:$e,u_ground_radiance:Jc(Ve,$e,Le)}})(A,T,this.style);d.setLightsUniformValues(o,S)}}}uploadCommonUniforms(o,d,A,T,S){if(this.uploadCommonLightUniforms(o,d),this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const k=E.getOpacity(this.transform.pitch),Z=((K,Y,re,ne,pe,Pe,Ce,Ve,Le,$e,nt,at)=>{const pt=K.transform,ot=Y.properties.get("color-use-theme")==="none",ut=Y.properties.get("color").toRenderColor(ot?null:K.style.getLut(Y.scope)).toArray01();ut[3]=ne;const ct=K.frameCounter/1e3%1,[At,Tt]=Y.properties.get("vertical-range");return{u_fog_matrix:re?pt.calculateFogTileMatrix(re):at||K.identityMat,u_fog_range:Y.getFovAdjustedRange(pt._fov),u_fog_color:ut,u_fog_horizon_blend:Y.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(At,Tt),Tt],u_fog_temporal_offset:ct,u_frustum_tl:pe,u_frustum_tr:Pe,u_frustum_br:Ce,u_frustum_bl:Ve,u_globe_pos:Le,u_globe_radius:$e,u_viewport:nt,u_globe_transition:n.ag(pt.zoom),u_is_globe:+(pt.projection.name==="globe")}})(this,E,A,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],T);d.setFogUniformValues(o,Z)}S&&d.setCutoffUniformValues(o,S.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,d=o.createTexture();return o.bindTexture(o.TEXTURE_2D,d),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,d=this._backgroundTiles={},A=this.transform.coveringTiles({tileSize:512});for(const T of A)d[T.key]=o[T.key]||new Jl(T,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,d){return!(!o.is3D(!(!this.terrain||!this.terrain.enabled))||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[o.key];return d||(this._cachedTileFogOpacities[o.key]=d=this.style.fog.getOpacityForTile(o)),d[0]>=Ma||d[1]>=Ma}setupDepthForOcclusion(o,d,A){const T=this.context,S=T.gl,E=!!A;var k;A||(A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),T.activeTexture.set(S.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),A.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],A.u_depth_range_unpack=[2/((k=this.depthRangeFor3D)[1]-k[0]),-1-2*k[0]/(k[1]-k[0])],A.u_occluder_half_size=.5*this.occlusionParams.occluderSize,A.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),T.activeTexture.set(S.TEXTURE0),E||d.setTerrainUniformValues(T,A)}}function ig(y,o){let d=!1,A=null;const T=()=>{A=null,d&&(y(),A=setTimeout(T,o),d=!1)};return()=>(d=!0,A||T(),A)}class Kg{constructor(o){this._hashName=o&&encodeURIComponent(o),n.aQ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ig(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const d=fA(o);if(this._hashName){const A=this._hashName;let T=!1;const S=location.hash.slice(1).split("&").map(E=>{const k=E.split("=")[0];return k===A?(T=!0,`${k}=${d}`):E}).filter(E=>E);return T||S.push(`${A}=${d}`),`#${S.join("&")}`}return`#${d}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let d;return o.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(d=A)}),(d&&d[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(A=>isNaN(A))){const A=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(d[3]||0):o.getBearing();return o.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:A,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function fA(y,o){const d=y.getCenter(),A=Math.round(100*y.getZoom())/100,T=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,T),E=Math.round(d.lng*S)/S,k=Math.round(d.lat*S)/S,Z=y.getBearing(),K=y.getPitch();let Y=o?`/${E}/${k}/${A}`:`${A}/${k}/${E}`;return(Z||K)&&(Y+="/"+Math.round(10*Z)/10),K&&(Y+=`/${Math.round(K)}`),Y}const om={linearity:.3,easing:n.dB(0,0,.3,1)},dl=n.l({deceleration:2500,maxSpeed:1400},om),wl=n.l({deceleration:20,maxSpeed:1400},om),pA=n.l({deceleration:1e3,maxSpeed:360},om),mA=n.l({deceleration:1e3,maxSpeed:90},om);class gA{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,d=n.q.now();for(;o.length>0&&d-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)d.zoom+=S.zoomDelta||0,d.bearing+=S.bearingDelta||0,d.pitch+=S.pitchDelta||0,S.panDelta&&d.pan._add(S.panDelta),S.around&&(d.around=S.around),S.pinchAround&&(d.pinchAround=S.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(d.pan.mag()){const S=um(d.pan.mag(),A,n.l({},dl,o||{}));T.offset=d.pan.mult(S.amount/d.pan.mag()),T.center=this._map.transform.center,lm(T,S)}if(d.zoom){const S=um(d.zoom,A,wl);T.zoom=this._map.transform.zoom+S.amount,lm(T,S)}if(d.bearing){const S=um(d.bearing,A,pA);T.bearing=this._map.transform.bearing+n.ay(S.amount,-179,179),lm(T,S)}if(d.pitch){const S=um(d.pitch,A,mA);T.pitch=this._map.transform.pitch+S.amount,lm(T,S)}if(T.zoom||T.bearing){const S=d.pinchAround===void 0?d.around:d.pinchAround;T.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function lm(y,o){(!y.duration||y.duration<o.duration)&&(y.duration=o.duration,y.easing=o.easing)}function um(y,o,d){const{maxSpeed:A,linearity:T,deceleration:S}=d,E=n.ay(y*T/(o/1e3),-A,A),k=Math.abs(E)/(S*T);return{easing:d.easing,duration:1e3*k,amount:E*(k/2)}}class Rl extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,A,T={}){const S=Re(d.getCanvasContainer(),A),E=d.unproject(S);super(o,n.l({point:S,lngLat:E,originalEvent:A},T)),this._defaultPrevented=!1,this.target=d}}class gp extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,A){const T=o==="touchend"?A.changedTouches:A.touches,S=we(d.getCanvasContainer(),T),E=S.map(Z=>d.unproject(Z)),k=S.reduce((Z,K,Y,re)=>Z.add(K.div(re.length)),new n.P(0,0));super(o,{points:S,point:k,lngLats:E,lngLat:d.unproject(k),originalEvent:A}),this._defaultPrevented=!1}}class yA extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class AA{constructor(o,d){this._map=o,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new yA(this._map,o))}mousedown(o,d){return this._mousedownPos=d,this._firePreventable(new Rl(o.type,this._map,o))}mouseup(o){this._map.fire(new Rl(o.type,this._map,o))}preclick(o){const d=n.l({},o);d.type="preclick",this._map.fire(new Rl(d.type,this._map,d))}click(o,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(o),this._map.fire(new Rl(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new Rl(o.type,this._map,o))}mouseover(o){this._map.fire(new Rl(o.type,this._map,o))}mouseout(o){this._map.fire(new Rl(o.type,this._map,o))}touchstart(o){return this._firePreventable(new gp(o.type,this._map,o))}touchmove(o){this._map.fire(new gp(o.type,this._map,o))}touchend(o){this._map.fire(new gp(o.type,this._map,o))}touchcancel(o){this._map.fire(new gp(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jv{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new Rl(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Rl(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vA{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,d){this.isEnabled()&&o.shiftKey&&o.button===0&&(fe(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(o,d){if(!this._active)return;const A=d,T=this._startPos,S=this._lastPos;if(!T||!S||S.equals(A)||!this._box&&A.dist(T)<this._clickTolerance)return;this._lastPos=A,this._box||(this._box=H("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const E=Math.min(T.x,A.x),k=Math.max(T.x,A.x),Z=Math.min(T.y,A.y),K=Math.max(T.y,A.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${Z}px)`,this._box.style.width=k-E+"px",this._box.style.height=K-Z+"px")})}mouseupWindow(o,d){if(!this._active)return;const A=this._startPos,T=d;if(A&&o.button===0){if(this.reset(),ge(),A.x!==T.x||A.y!==T.y)return this._map.fire(new n.A("boxzoomend",{originalEvent:o})),{cameraAnimation:S=>S.fitScreenCoordinates(A,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),se(),delete this._startPos,delete this._lastPos}_fireEvent(o,d){return this._map.fire(new n.A(o,{originalEvent:d}))}}function Li(y,o){const d={};for(let A=0;A<y.length;A++)d[y[A].identifier]=o[A];return d}class Wg{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,d,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),A.length===this.numTouches&&(this.centroid=function(T){const S=new n.P(0,0);for(const E of T)S._add(E);return S.div(T.length)}(d),this.touches=Li(A,d)))}touchmove(o,d,A){if(this.aborted||!this.centroid)return;const T=Li(A,d);for(const S in this.touches){const E=T[S];(!E||E.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(o,d,A){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class Yg{constructor(o){this.singleTap=new Wg(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,d,A){this.singleTap.touchstart(o,d,A)}touchmove(o,d,A){this.singleTap.touchmove(o,d,A)}touchend(o,d,A){const T=this.singleTap.touchend(o,d,A);if(T){const S=o.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(T)<30;if(S&&E||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class _A{constructor(){this._zoomIn=new Yg({numTouches:1,numTaps:2}),this._zoomOut=new Yg({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,d,A){this._zoomIn.touchstart(o,d,A),this._zoomOut.touchstart(o,d,A)}touchmove(o,d,A){this._zoomIn.touchmove(o,d,A),this._zoomOut.touchmove(o,d,A)}touchend(o,d,A){const T=this._zoomIn.touchend(o,d,A),S=this._zoomOut.touchend(o,d,A);return T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(T)},{originalEvent:o})}):S?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(S)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yp={0:1,2:2},sg={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class cm{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,d){return!1}_move(o,d){return{}}mousedown(o,d){if(this._lastPoint)return;const A=Ee(o);this._correctButton(o,A)&&(this._lastPoint=d,this._eventButton=A)}mousemoveWindow(o,d){const A=this._lastPoint;if(A){if(o.preventDefault(),this._eventButton!=null&&function(T,S){const E=yp[S];return T.buttons===void 0||(T.buttons&E)!==E}(o,this._eventButton))this.reset();else if(this._moved||!(d.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(A,d)}}mouseupWindow(o){this._lastPoint&&Ee(o)===this._eventButton&&(this._moved&&ge(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dm extends cm{mousedown(o,d){super.mousedown(o,d),this._lastPoint&&(this._active=!0)}_correctButton(o,d){return d===0&&!o.ctrlKey}_move(o,d){return{around:d,panDelta:d.sub(o)}}}class Yd extends cm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?sg[o.pitchRotateKey]:void 0}_correctButton(o,d){return this._pitchRotateKey?d===0&&o[this._pitchRotateKey]:d===0&&o.ctrlKey||d===2}_move(o,d){const A=.8*(d.x-o.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Ec extends cm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?sg[o.pitchRotateKey]:void 0}_correctButton(o,d){return this._pitchRotateKey?d===0&&o[this._pitchRotateKey]:d===0&&o.ctrlKey||d===2}_move(o,d){const A=-.5*(d.y-o.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Rs{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),n.aQ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(o,d,A){return this._calculateTransform(o,d,A)}touchmove(o,d,A){if(this._active&&!(A.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(A.length===1&&!n.dC())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,d,A)}}touchend(o,d,A){this._calculateTransform(o,d,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,d,A){A.length>0&&(this._active=!0);const T=Li(A,d),S=new n.P(0,0),E=new n.P(0,0);let k=0;for(const K in T){const Y=T[K],re=this._touches[K];re&&(S._add(Y),E._add(Y.sub(re)),k++,T[K]=Y)}if(this._touches=T,k<this._minTouches||!E.mag())return;const Z=E.div(k);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(k),panDelta:Z}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class id{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,d,A){return{}}touchstart(o,d,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([d[0],d[1]]))}touchmove(o,d,A){const T=this._firstTwoTouches;if(!T)return;o.preventDefault();const[S,E]=T,k=Ap(A,d,S),Z=Ap(A,d,E);if(!k||!Z)return;const K=this._aroundCenter?null:k.add(Z).div(2);return this._move([k,Z],K,o)}touchend(o,d,A){if(!this._firstTwoTouches)return;const[T,S]=this._firstTwoTouches,E=Ap(A,d,T),k=Ap(A,d,S);E&&k||(this._active&&ge(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ap(y,o,d){for(let A=0;A<y.length;A++)if(y[A].identifier===d)return o[A]}function vp(y,o){return Math.log(y/o)/Math.LN2}class zf extends id{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,d){const A=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(vp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vp(this._distance,A),pinchAround:d}}}function Eh(y,o){return 180*y.angleWith(o)/Math.PI}class sd extends id{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,d){const A=this._vector;if(this._vector=o[0].sub(o[1]),A&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Eh(this._vector,A),pinchAround:d}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const d=25/(Math.PI*this._minDiameter)*360,A=this._startVector;if(!A)return!1;const T=Eh(o,A);return Math.abs(T)<d}}function Xd(y){return Math.abs(y.y)>Math.abs(y.x)}class wA extends id{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Xd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,d,A){const T=this._lastPoints;if(!T)return;const S=o[0].sub(T[0]),E=o[1].sub(T[1]);return this._map._cooperativeGestures&&!n.dC()&&A.touches.length<3||(this._valid=this.gestureBeginsVertically(S,E,A.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(S.y+E.y)/2*-.5})}gestureBeginsVertically(o,d,A){if(this._valid!==void 0)return this._valid;const T=o.mag()>=2,S=d.mag()>=2;if(!T&&!S)return;if(!T||!S)return this._firstMove==null&&(this._firstMove=A),A-this._firstMove<100&&void 0;const E=o.y>0==d.y>0;return Xd(o)&&Xd(d)&&E}}const og={panStep:100,bearingStep:15,pitchStep:10};class _p{constructor(){const o=og;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let d=0,A=0,T=0,S=0,E=0;switch(o.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:o.shiftKey?A=-1:(o.preventDefault(),S=-1);break;case 39:o.shiftKey?A=1:(o.preventDefault(),S=1);break;case 38:o.shiftKey?T=1:(o.preventDefault(),E=-1);break;case 40:o.shiftKey?T=-1:(o.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(A=0,T=0),{cameraAnimation:k=>{const Z=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:Df,zoom:d?Math.round(Z)+d*(o.shiftKey?2:1):Z,bearing:k.getBearing()+A*this._bearingStep,pitch:k.getPitch()+T*this._pitchStep,offset:[-S*this._panStep,-E*this._panStep],center:k.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Df(y){return y*(2-y)}const Nc=4.000244140625,Qs=1/450;class ac{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Qs,n.aQ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||n.dC()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const A=n.q.now(),T=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,d!==0&&d%Nc==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(T*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),o.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=o,this._delta-=d,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=Re(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const K=this._type==="wheel"&&Math.abs(this._delta)>Nc?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&Y!==0&&(Y=1/Y);const re=d(),ne=Math.pow(2,re),pe=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):ne;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(pe*Y))),this._type==="wheel"&&(this._startZoom=re,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const A=typeof this._targetZoom=="number"?this._targetZoom:d(),T=this._startZoom,S=this._easing;let E,k=!1;if(this._type==="wheel"&&T&&S){const K=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),Y=S(K);E=n.ah(T,A,Y),K<1?this._frameId||(this._frameId=!0):k=!0}else E=A,k=!0;this._active=!0,k&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let Z=E-d();return Z*this._lastDelta<0&&(Z=0),{noInertia:!0,needsRenderFrame:!k,zoomDelta:Z,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let d=n.dD;if(this._prevEase){const A=this._prevEase,T=(n.q.now()-A.start)/A.duration,S=A.easing(T+.01)-A.easing(T),E=.27/Math.sqrt(S*S+1e-4)*.01,k=Math.sqrt(.0729-E*E);d=n.dB(E,k,.25,1)}return this._prevEase={start:n.q.now(),duration:o,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class ef{constructor(o,d){this._clickZoom=o,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class rc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,d){return o.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(o.shiftKey?-1:1),around:A.unproject(d)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nh{constructor(){this._tap=new Yg({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,d,A){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=d[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(o,d,A))}touchmove(o,d,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const T=d[0],S=T.y-this._swipePoint.y;return this._swipePoint=T,o.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(o,d,A)}touchend(o,d,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(o,d,A)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class RA{constructor(o,d,A){this._el=o,this._mousePan=d,this._touchPan=A}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Mf{constructor(o,d,A){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=d,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class If{constructor(o,d,A,T){this._el=o,this._touchZoom=d,this._touchRotate=A,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Lf=y=>y.zoom||y.drag||y.pitch||y.rotate;class Xg extends n.A{}class Tl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,d){const A=n.ad.vec3.sub([],d,o);this.radius=n.ad.vec3.length(A[2]<0?n.ad.vec3.div([],A,this.constants):[A[0],A[1],0])}projectRay(o){n.ad.vec3.div(o,o,this.constants),n.ad.vec3.normalize(o,o),n.ad.vec3.mul(o,o,this.constants);const d=n.ad.vec3.scale([],o,this.radius);if(d[2]>0){const A=n.ad.vec3.scale([],[0,0,1],n.ad.vec3.dot(d,[0,0,1])),T=n.ad.vec3.scale([],n.ad.vec3.normalize([],[d[0],d[1],0]),this.radius),S=n.ad.vec3.add([],d,n.ad.vec3.scale([],n.ad.vec3.sub([],n.ad.vec3.add([],T,A),d),2));d[0]=S[0],d[1]=S[1]}return d}}function Oh(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class hm{constructor(o,d){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gA(o),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Tl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),n.aQ(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[T,S,E]of this._listeners){const k=T===document?this.handleWindowEvent:this.handleEvent;T.addEventListener(S,k,E)}}destroy(){for(const[o,d,A]of this._listeners){const T=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(d,T,A)}}_addDefaultHandlers(o){const d=this._map,A=d.getCanvasContainer();this._add("mapEvent",new AA(d,o));const T=d.boxZoom=new vA(d,o);this._add("boxZoom",T);const S=new _A,E=new rc;d.doubleClickZoom=new ef(E,S),this._add("tapZoom",S),this._add("clickZoom",E);const k=new Nh;this._add("tapDragZoom",k);const Z=d.touchPitch=new wA(d);this._add("touchPitch",Z);const K=new Yd(o),Y=new Ec(o);d.dragRotate=new Mf(o,K,Y),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]);const re=new dm(o),ne=new Rs(d,o);d.dragPan=new RA(A,re,ne),this._add("mousePan",re),this._add("touchPan",ne,["touchZoom","touchRotate"]);const pe=new sd,Pe=new zf;d.touchZoomRotate=new If(A,Pe,pe,k),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",Pe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Jv(d));const Ce=d.scrollZoom=new ac(d,this);this._add("scrollZoom",Ce,["mousePan"]);const Ve=d.keyboard=new _p;this._add("keyboard",Ve);for(const Le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Le]&&d[Le].enable(o[Le])}_add(o,d,A){this._handlers.push({handlerName:o,handler:d,allowed:A}),this._handlersById[o]=d}stop(o){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Lf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,d,A){for(const T in o)if(T!==A&&(!d||d.indexOf(T)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const d=[];for(const A of o)this._el.contains(A.target)&&d.push(A);return d}handleEvent(o,d){this._updatingCamera=!0;const A=o.type==="renderFrame",T=A?void 0:o,S={needsRenderFrame:!1},E={},k={},Z=o.touches?this._getMapTouches(o.touches):void 0,K=Z?we(this._el,Z):A?void 0:Re(this._el,o);for(const{handlerName:ne,handler:pe,allowed:Pe}of this._handlers){if(!pe.isEnabled())continue;let Ce;this._blockedByActive(k,Pe,ne)?pe.reset():pe[d||o.type]&&(Ce=pe[d||o.type](o,K,Z),this.mergeHandlerResult(S,E,Ce,ne,T),Ce&&Ce.needsRenderFrame&&this._triggerRenderFrame()),(Ce||pe.isActive())&&(k[ne]=pe)}const Y={};for(const ne in this._previousActiveHandlers)k[ne]||(Y[ne]=T);this._previousActiveHandlers=k,(Object.keys(Y).length||Oh(S))&&(this._changes.push([S,E,Y]),this._triggerRenderFrame()),(Object.keys(k).length||Oh(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=S;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))}mergeHandlerResult(o,d,A,T,S){if(!A)return;n.l(o,A);const E={handlerName:T,originalEvent:A.originalEvent||S};A.zoomDelta!==void 0&&(d.zoom=E),A.panDelta!==void 0&&(d.drag=E),A.pitchDelta!==void 0&&(d.pitch=E),A.bearingDelta!==void 0&&(d.rotate=E)}_applyChanges(){const o={},d={},A={};for(const[T,S,E]of this._changes)T.panDelta&&(o.panDelta=(o.panDelta||new n.P(0,0))._add(T.panDelta)),T.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(o.around=T.around),T.aroundCoord!==void 0&&(o.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(o.pinchAround=T.pinchAround),T.noInertia&&(o.noInertia=T.noInertia),n.l(d,S),n.l(A,E);this._updateMapTransform(o,d,A),this._changes=[]}_updateMapTransform(o,d,A){const T=this._map,S=T.transform,E=$e=>[$e.x,$e.y,$e.z];if(($e=>{const nt=this._eventsInProgress.drag;return nt&&!this._handlersById[nt.handlerName].isActive()})()&&!Oh(o)){const $e=S.zoom;S.cameraElevationReference="sea",this._originalZoom!=null&&S._orthographicProjectionAtLowPitch&&S.projection.name!=="globe"&&S.pitch===0?(S.cameraElevationReference="ground",S.zoom=this._originalZoom):(S.recenterOnTerrain(),S.cameraElevationReference="ground"),$e!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&T._stop(!0),!Oh(o))return void this._fireEvents(d,A,!0);let{panDelta:k,zoomDelta:Z,bearingDelta:K,pitchDelta:Y,around:re,aroundCoord:ne,pinchAround:pe}=o;S._isCameraConstrained&&(Z>0&&(Z=0),S._isCameraConstrained=!1),pe!==void 0&&(re=pe),(Z||($e=>d[$e]&&!this._eventsInProgress[$e])("drag"))&&re&&(this._dragOrigin=E(S.pointCoordinate3D(re)),this._originalZoom=S.zoom,this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",T._stop(!0),re=re||T.transform.centerPoint,K&&(S.bearing+=K),Y&&(S.pitch+=Y),S._updateCameraState();const Pe=[0,0,0];if(k)if(S.projection.name==="mercator"){const $e=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(re).dir),nt=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(re.sub(k)).dir);Pe[0]=nt[0]-$e[0],Pe[1]=nt[1]-$e[1]}else{const $e=S.pointCoordinate(re);if(S.projection.name==="globe"){k=k.rotate(-S.angle);const nt=S._pixelsPerMercatorPixel/S.worldSize;Pe[0]=-k.x*n.dE(n.aT($e.y))*nt,Pe[1]=-k.y*n.dE(S.center.lat)*nt}else{const nt=S.pointCoordinate(re.sub(k));$e&&nt&&(Pe[0]=nt.x-$e.x,Pe[1]=nt.y-$e.y)}}const Ce=S.zoom,Ve=[0,0,0];if(Z){const $e=E(ne||S.pointCoordinate3D(re)),nt={dir:n.ad.vec3.normalize([],n.ad.vec3.sub([],$e,S._camera.position))};if(nt.dir[2]<0){const at=S.zoomDeltaToMovement($e,Z);n.ad.vec3.scale(Ve,nt.dir,at)}}const Le=n.ad.vec3.add(Pe,Pe,Ve);S._translateCameraConstrained(Le),Z&&Math.abs(S.zoom-Ce)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(d,A,!0)}_fireEvents(o,d,A){const T=Lf(this._eventsInProgress),S=Lf(o),E={};for(const Y in o){const{originalEvent:re}=o[Y];this._eventsInProgress[Y]||(E[`${Y}start`]=re),this._eventsInProgress[Y]=o[Y]}!T&&S&&this._fireEvent("movestart",S.originalEvent);for(const Y in E)this._fireEvent(Y,E[Y]);S&&this._fireEvent("move",S.originalEvent);for(const Y in o){const{originalEvent:re}=o[Y];this._fireEvent(Y,re)}const k={};let Z;for(const Y in this._eventsInProgress){const{handlerName:re,originalEvent:ne}=this._eventsInProgress[Y];this._handlersById[re].isActive()||(delete this._eventsInProgress[Y],Z=d[re]||ne,k[`${Y}end`]=Z)}for(const Y in k)this._fireEvent(Y,k[Y]);const K=Lf(this._eventsInProgress);if(A&&(T||S)&&!K){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),re=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;Y?(re(Y.bearing||this._map.getBearing())&&(Y.bearing=0),this._map.easeTo(Y,{originalEvent:Z})):(this._map.fire(new n.A("moveend",{originalEvent:Z})),re(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,d){this._map.fire(new n.A(o,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new Xg("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const TA="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class wp extends n.E{constructor(o,d){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,n.aQ(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(o,d){return this.jumpTo({center:o},d)}panBy(o,d,A){return o=n.P.convert(o).mult(-1),this.panTo(this.transform.center,n.l({offset:o},d),A)}panTo(o,d,A){return this.easeTo(n.l({center:o},d),A)}getZoom(){return this.transform.zoom}setZoom(o,d){return this.jumpTo({zoom:o},d),this}zoomTo(o,d,A){return this.easeTo(n.l({zoom:o},d),A)}zoomIn(o,d){return this.zoomTo(this.getZoom()+1,o,d),this}zoomOut(o,d){return this.zoomTo(this.getZoom()-1,o,d),this}getBearing(){return this.transform.bearing}setBearing(o,d){return this.jumpTo({bearing:o},d),this}getPadding(){return this.transform.padding}setPadding(o,d){return this.jumpTo({padding:o},d),this}rotateTo(o,d,A){return this.easeTo(n.l({bearing:o},d),A)}resetNorth(o,d){return this.rotateTo(0,n.l({duration:1e3},o),d),this}resetNorthPitch(o,d){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},o),d),this}snapToNorth(o,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,d):this}getPitch(){return this.transform.pitch}setPitch(o,d){return this.jumpTo({pitch:o},d),this}cameraForBounds(o,d){o=n.aB.convert(o);const A=d&&d.bearing||0,T=d&&d.pitch||0,S=o.getNorthWest(),E=o.getSouthEast();return this._cameraForBounds(this.transform,S,E,A,T,d)}_extendPadding(o){const d={top:0,right:0,bottom:0,left:0};return o==null?n.l({},d,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:n.l({},d,o)}_extendCameraOptions(o){return(o=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,d){const A=d.max[0]-d.min[0],T=d.max[1]-d.min[1];return A/T>o.aspect?A/(2*Math.tan(.5*o.fovX)*o.aspect):T/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,d,A,T,S,E){const k=o.clone(),Z=this._extendCameraOptions(E);k.bearing=T,k.pitch=S;const K=n.bO.convert(d),Y=n.bO.convert(A),re=.5*(K.lat+Y.lat),ne=.5*(K.lng+Y.lng),pe=n.dF(re,ne),Pe=n.ad.vec3.normalize([],pe),Ce=n.ad.vec3.normalize([],n.ad.vec3.cross([],Pe,[0,1,0])),Ve=n.ad.vec3.cross([],Ce,Pe),Le=[Ce[0],Ce[1],Ce[2],0,Ve[0],Ve[1],Ve[2],0,Pe[0],Pe[1],Pe[2],0,0,0,0,1],$e=[pe,n.dF(K.lat,K.lng),n.dF(Y.lat,K.lng),n.dF(Y.lat,Y.lng),n.dF(K.lat,Y.lng),n.dF(re,K.lng),n.dF(re,Y.lng),n.dF(K.lat,ne),n.dF(Y.lat,ne)];let nt=n.ce.fromPoints($e.map(ta=>[n.ad.vec3.dot(Ce,ta),n.ad.vec3.dot(Ve,ta),n.ad.vec3.dot(Pe,ta)]));const at=n.ad.vec3.transformMat4([],nt.center,Le);n.ad.vec3.squaredLength(at)===0&&n.ad.vec3.set(at,0,0,1),n.ad.vec3.normalize(at,at),n.ad.vec3.scale(at,at,n.az),k.center=n.dG(at);const pt=k.getWorldToCameraMatrix(),ot=n.ad.mat4.invert(new Float64Array(16),pt);nt=n.ce.applyTransform(nt,n.ad.mat4.multiply([],pt,Le));const ut=this._extendAABB(nt,k,Z,T);if(!ut)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");nt=ut,n.ad.vec3.transformMat4(at,at,pt);const ct=.5*(nt.max[2]-nt.min[2]),At=this._minimumAABBFrustumDistance(k,nt),Tt=n.ad.vec3.scale([],[0,0,1],ct),Qt=n.ad.vec3.add(Tt,at,Tt),Ut=At+(k.pitch===0?0:n.ad.vec3.distance(at,Qt)),ra=k.globeCenterInViewSpace,ca=n.ad.vec3.sub([],at,[ra[0],ra[1],ra[2]]);n.ad.vec3.normalize(ca,ca),n.ad.vec3.scale(ca,ca,Ut);const Sa=n.ad.vec3.add([],at,ca);n.ad.vec3.transformMat4(Sa,Sa,ot);const Ft=n.dv/n.az,sa=n.ad.vec3.length(Sa),Vt=n.bH(Math.max(sa*Ft-n.dv,Number.EPSILON),0),oa=Math.min(k.zoomFromMercatorZAdjusted(Vt),Z.maxZoom);return oa>.5*(n.c6+n.bY)?(k.setProjection({name:"mercator"}),k.zoom=oa,this._cameraForBounds(k,d,A,T,S,E)):{center:k.center,zoom:oa,bearing:T,pitch:S}}_extendAABB(o,d,A,T){const S=.5*((A.padding.left||0)+(A.padding.right||0)),E=.5*((A.padding.top||0)+(A.padding.bottom||0)),k=E,Z=S,K=S,Y=E,re=d.width-(Z+K),ne=d.height-(k+Y),pe=n.ad.vec3.sub([],o.max,o.min),Pe=Math.min(re/pe[0],ne/pe[1]),Ce=Math.min(d.scaleZoom(d.scale*Pe),A.maxZoom);if(isNaN(Ce))return null;const Ve=d.scale/d.zoomScale(Ce),Le=new n.ce([o.min[0]-Z*Ve,o.min[1]-Y*Ve,o.min[2]],[o.max[0]+K*Ve,o.max[1]+k*Ve,o.max[2]]),$e=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new n.P(A.offset.x,A.offset.y):n.P.convert(A.offset)).rotate(-n.ak(T));return Le.center[0]-=$e.x*Ve,Le.center[1]+=$e.y*Ve,Le}queryTerrainElevation(o,d){const A=this.transform.elevation;return A?(d=n.l({},{exaggerated:!0},d),A.getAtPoint(n.ac.fromLngLat(o),null,d.exaggerated)):null}_cameraForBounds(o,d,A,T,S,E){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,d,A,T,S,E);const k=o.clone(),Z=this._extendCameraOptions(E);k.bearing=T,k.pitch=S;const K=n.bO.convert(d),Y=n.bO.convert(A),re=new n.bO(K.lng,Y.lat),ne=new n.bO(Y.lng,K.lat),pe=k.project(K),Pe=k.project(Y),Ce=this.queryTerrainElevation(K),Ve=this.queryTerrainElevation(Y),Le=this.queryTerrainElevation(re),$e=this.queryTerrainElevation(ne),nt=[[pe.x,pe.y,Math.min(Ce||0,Ve||0,Le||0,$e||0)],[Pe.x,Pe.y,Math.max(Ce||0,Ve||0,Le||0,$e||0)]];let at=n.ce.fromPoints(nt);const pt=k.getWorldToCameraMatrix(),ot=n.ad.mat4.invert(new Float64Array(16),pt);at=n.ce.applyTransform(at,pt);const ut=this._extendAABB(at,k,Z,T);if(!ut)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");at=ut;const ct=.5*n.ad.vec3.sub([],at.max,at.min)[2],At=this._minimumAABBFrustumDistance(k,at),Tt=[0,0,1,0];n.ad.vec4.transformMat4(Tt,Tt,pt),n.ad.vec4.normalize(Tt,Tt);const Qt=n.ad.vec3.scale([],Tt,At+ct),Ut=n.ad.vec3.add([],at.center,Qt);n.ad.vec3.transformMat4(at.center,at.center,ot),n.ad.vec3.transformMat4(Ut,Ut,ot);const ra=k.unproject(new n.P(at.center[0],at.center[1])),ca=n.dH(k.projection,ra),Sa=Math.pow(2,ca),Ft=Math.min(k._zoomFromMercatorZ(Ut[2]*k.pixelsPerMeter*Sa/k.worldSize),Z.maxZoom);return k.mercatorFromTransition&&Ft<.5*(n.c6+n.bY)?(k.setProjection({name:"globe"}),k.zoom=Ft,this._cameraForBounds(k,d,A,T,S,E)):{center:ra,zoom:Ft,bearing:T,pitch:S}}fitBounds(o,d,A){const T=this.cameraForBounds(o,d);return this._fitInternal(T,d,A)}fitScreenCoordinates(o,d,A,T,S){const E=n.P.convert(o),k=n.P.convert(d),Z=new n.P(Math.min(E.x,k.x),Math.min(E.y,k.y)),K=new n.P(Math.max(E.x,k.x),Math.max(E.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,k))return this;const Y=this.transform.pointLocation3D(Z),re=this.transform.pointLocation3D(K),ne=this.transform.pointLocation3D(new n.P(Z.x,K.y)),pe=this.transform.pointLocation3D(new n.P(K.x,Z.y)),Pe=[Math.min(Y.lng,re.lng,ne.lng,pe.lng),Math.min(Y.lat,re.lat,ne.lat,pe.lat)],Ce=[Math.max(Y.lng,re.lng,ne.lng,pe.lng),Math.max(Y.lat,re.lat,ne.lat,pe.lat)],Ve=T&&T.pitch?T.pitch:this.getPitch(),Le=this._cameraForBounds(this.transform,Pe,Ce,A,Ve,T);return this._fitInternal(Le,T,S)}_fitInternal(o,d,A){return o?(d=n.l(o,d)).linear?this.easeTo(d,A):this.flyTo(d,A):this}jumpTo(o,d){this.stop();const A=o.preloadOnly?this.transform.clone():this.transform;let T=!1,S=!1,E=!1;"zoom"in o&&A.zoom!==+o.zoom&&(T=!0,A.zoom=+o.zoom),o.center!==void 0&&(A.center=n.bO.convert(o.center)),"bearing"in o&&A.bearing!==+o.bearing&&(S=!0,A.bearing=+o.bearing),"pitch"in o&&A.pitch!==+o.pitch&&(E=!0,A.pitch=+o.pitch);const k=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!A.isPaddingEqual(k))if(o.retainPadding===!1){const Z=A.clone();Z.padding=k,A.setLocationAtPoint(A.center,Z.centerPoint)}else A.padding=k;return o.preloadOnly?(this._preloadTiles(A),this):(this.fire(new n.A("movestart",d)).fire(new n.A("move",d)),T&&this.fire(new n.A("zoomstart",d)).fire(new n.A("zoom",d)).fire(new n.A("zoomend",d)),S&&this.fire(new n.A("rotatestart",d)).fire(new n.A("rotate",d)).fire(new n.A("rotateend",d)),E&&this.fire(new n.A("pitchstart",d)).fire(new n.A("pitch",d)).fire(new n.A("pitchend",d)),this.fire(new n.A("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(TA),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,d){const A=this.transform;if(!A.projection.supportsFreeCamera)return n.w(TA),this;this.stop();const T=A.zoom,S=A.pitch,E=A.bearing;A.setFreeCameraOptions(o);const k=T!==A.zoom,Z=S!==A.pitch,K=E!==A.bearing;return this.fire(new n.A("movestart",d)).fire(new n.A("move",d)),k&&this.fire(new n.A("zoomstart",d)).fire(new n.A("zoom",d)).fire(new n.A("zoomend",d)),K&&this.fire(new n.A("rotatestart",d)).fire(new n.A("rotate",d)).fire(new n.A("rotateend",d)),Z&&this.fire(new n.A("pitchstart",d)).fire(new n.A("pitch",d)).fire(new n.A("pitchend",d)),this.fire(new n.A("moveend",d)),this}easeTo(o,d){this._stop(!1,o.easeId),((o=n.l({offset:[0,0],duration:500,easing:n.dD},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const A=this.transform,T=this.getZoom(),S=this.getBearing(),E=this.getPitch(),k=this.getPadding(),Z="zoom"in o?+o.zoom:T,K="bearing"in o?this._normalizeBearing(o.bearing,S):S,Y="pitch"in o?+o.pitch:E,re=this._extendPadding(o.padding),ne=n.P.convert(o.offset);let pe,Pe,Ce;if(A.projection.name==="globe"){const Tt=n.ac.fromLngLat(A.center),Qt=ne.rotate(-A.angle);Tt.x+=Qt.x/A.worldSize,Tt.y+=Qt.y/A.worldSize;const Ut=Tt.toLngLat(),ra=n.bO.convert(o.center||Ut);this._normalizeCenter(ra),pe=A.centerPoint.add(Qt),Pe=new n.P(Tt.x,Tt.y).mult(A.worldSize),Ce=new n.P(n.av(ra.lng),n.aC(ra.lat)).mult(A.worldSize).sub(Pe)}else{pe=A.centerPoint.add(ne);const Tt=A.pointLocation(pe),Qt=n.bO.convert(o.center||Tt);this._normalizeCenter(Qt),Pe=A.project(Tt),Ce=A.project(Qt).sub(Pe)}const Ve=A.zoomScale(Z-T);let Le,$e;o.around&&(Le=n.bO.convert(o.around),$e=A.locationPoint(Le));const nt=this._zooming||Z!==T,at=this._rotating||S!==K,pt=this._pitching||Y!==E,ot=!A.isPaddingEqual(re),ut=o.retainPadding===!1?A.clone():A,ct=Tt=>Qt=>{if(nt&&(Tt.zoom=n.ah(T,Z,Qt)),at&&(Tt.bearing=n.ah(S,K,Qt)),pt&&(Tt.pitch=n.ah(E,Y,Qt)),ot&&(ut.interpolatePadding(k,re,Qt),pe=ut.centerPoint.add(ne)),Le)Tt.setLocationAtPoint(Le,$e);else{const Ut=Tt.zoomScale(Tt.zoom-T),ra=Z>T?Math.min(2,Ve):Math.max(.5,Ve),ca=Math.pow(ra,1-Qt),Sa=Tt.unproject(Pe.add(Ce.mult(Qt*ca)).mult(Ut));Tt.setLocationAtPoint(Tt.renderWorldCopies?Sa.wrap():Sa,pe)}return o.preloadOnly||this._fireMoveEvents(d),Tt};if(o.preloadOnly){const Tt=this._emulate(ct,o.duration,A);return this._preloadTiles(Tt),this}const At={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=nt,this._rotating=at,this._pitching=pt,this._padding=ot,this._easeId=o.easeId,this._prepareEase(d,o.noMoveStart,At),this._ease(ct(A),Tt=>{A.cameraElevationReference==="sea"&&A.recenterOnTerrain(),this._afterEase(d,Tt)},o),this}_prepareEase(o,d,A={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||A.moving||this.fire(new n.A("movestart",o)),this._zooming&&!A.zooming&&this.fire(new n.A("zoomstart",o)),this._rotating&&!A.rotating&&this.fire(new n.A("rotatestart",o)),this._pitching&&!A.pitching&&this.fire(new n.A("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.A("move",o)),this._zooming&&this.fire(new n.A("zoom",o)),this._rotating&&this.fire(new n.A("rotate",o)),this._pitching&&this.fire(new n.A("pitch",o))}_afterEase(o,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const A=this._zooming,T=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new n.A("zoomend",o)),T&&this.fire(new n.A("rotateend",o)),S&&this.fire(new n.A("pitchend",o)),this.fire(new n.A("moveend",o))}flyTo(o,d){if(this._prefersReducedMotion(o)){const ta=n.aA(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(ta,d)}this.stop(),o=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dD},o);const A=this.transform,T=this.getZoom(),S=this.getBearing(),E=this.getPitch(),k=this.getPadding(),Z="zoom"in o?n.ay(+o.zoom,A.minZoom,A.maxZoom):T,K="bearing"in o?this._normalizeBearing(o.bearing,S):S,Y="pitch"in o?+o.pitch:E,re=this._extendPadding(o.padding),ne=A.zoomScale(Z-T),pe=n.P.convert(o.offset);let Pe=A.centerPoint.add(pe);const Ce=A.pointLocation(Pe),Ve=n.bO.convert(o.center||Ce);this._normalizeCenter(Ve);const Le=A.project(Ce),$e=A.project(Ve).sub(Le);let nt=o.curve;const at=Math.max(A.width,A.height),pt=at/ne,ot=$e.mag();if("minZoom"in o){const ta=n.ay(Math.min(o.minZoom,T,Z),A.minZoom,A.maxZoom),da=at/A.zoomScale(ta-T);nt=Math.sqrt(da/ot*2)}const ut=nt*nt;function ct(ta){const da=(pt*pt-at*at+(ta?-1:1)*ut*ut*ot*ot)/(2*(ta?pt:at)*ut*ot);return Math.log(Math.sqrt(da*da+1)-da)}function At(ta){return(Math.exp(ta)-Math.exp(-ta))/2}function Tt(ta){return(Math.exp(ta)+Math.exp(-ta))/2}const Qt=ct(0);let Ut=function(ta){return Tt(Qt)/Tt(Qt+nt*ta)},ra=function(ta){return at*((Tt(Qt)*(At(da=Qt+nt*ta)/Tt(da))-At(Qt))/ut)/ot;var da},ca=(ct(1)-Qt)/nt;if(Math.abs(ot)<1e-6||!isFinite(ca)){if(Math.abs(at-pt)<1e-6)return this.easeTo(o,d);const ta=pt<at?-1:1;ca=Math.abs(Math.log(pt/at))/nt,ra=function(){return 0},Ut=function(da){return Math.exp(ta*nt*da)}}o.duration="duration"in o?+o.duration:1e3*ca/("screenSpeed"in o?+o.screenSpeed/nt:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Sa=S!==K,Ft=Y!==E,sa=!A.isPaddingEqual(re),Vt=o.retainPadding===!1?A.clone():A,oa=ta=>da=>{const Yt=da*ca,pa=1/Ut(Yt);ta.zoom=da===1?Z:T+ta.scaleZoom(pa),Sa&&(ta.bearing=n.ah(S,K,da)),Ft&&(ta.pitch=n.ah(E,Y,da)),sa&&(Vt.interpolatePadding(k,re,da),Pe=Vt.centerPoint.add(pe));const Ia=da===1?Ve:ta.unproject(Le.add($e.mult(ra(Yt))).mult(pa));return ta.setLocationAtPoint(ta.renderWorldCopies?Ia.wrap():Ia,Pe),ta._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(d),ta};if(o.preloadOnly){const ta=this._emulate(oa,o.duration,A);return this._preloadTiles(ta),this}return this._zooming=!0,this._rotating=Sa,this._pitching=Ft,this._padding=sa,this._prepareEase(d,!1),this._ease(oa(A),()=>this._afterEase(d),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const A=this._onEaseEnd;this._onEaseEnd=void 0,A.call(this,d)}if(!o){const A=this.handlers;A&&A.stop(!1)}return this}_ease(o,d,A){A.animate===!1||A.duration===0?(o(1),d()):(this._easeStart=n.q.now(),this._easeOptions=A,this._onEaseFrame=o,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,d){o=n.bF(o,-180,180);const A=Math.abs(o-d);return Math.abs(o-360-d)<A&&(o-=360),Math.abs(o+360-d)<A&&(o+=360),o}_normalizeCenter(o){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const A=o.lng-d.center.lng;o.lng+=A>180?-360:A<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,d,A){const T=Math.ceil(15*d/1e3),S=[],E=o(A.clone());for(let k=0;k<=T;k++){const Z=E(k/T);S.push(Z.clone())}return S}_preloadTiles(o,d){}}class Ff{constructor(o={}){this.options=o,n.aQ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const d=this.options&&this.options.compact,A=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=H("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",A);const T=H("span","mapboxgl-ctrl-icon",this._compactButton);return T.setAttribute("aria-hidden","true"),T.setAttribute("title",A),this._innerContainer=H("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(o){const A=d.reduce((T,S,E)=>(S.value&&(T+=`${S.key}=${S.value}${E<d.length-1?"&":""}`),T),"?");o.href=`${n.e.FEEDBACK_URL}/${A}#${fA(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const d=this._map.style._mergedSourceCaches;for(const T in d){const S=d[T];if(S.used){const E=S.getSource();E.attribution&&o.indexOf(E.attribution)<0&&o.push(E.attribution)}}o.sort((T,S)=>T.length-S.length),o=o.filter((T,S)=>{for(let E=S+1;E<o.length;E++)if(o[E].indexOf(T)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const A=o.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,o.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ko{constructor(){n.aQ(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=H("div","mapboxgl-ctrl");const d=H("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const d in o){const A=o[d].getSource();if(A.hasOwnProperty("mapbox_logo")&&!A.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const d=o[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class nc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const d=++this._id;return this._queue.push({callback:o,id:d,cancelled:!1}),d}remove(o){const d=this._currentlyRunning,A=d?this._queue.concat(d):this._queue;for(const T of A)if(T.id===o)return void(T.cancelled=!0)}run(o=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const A of d)if(!A.cancelled&&(A.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Rp{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const d=n.cC((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,d,A){this._start=this.getValue(d),this._end=o,this._startTime=d,this._endTime=d+A}}const Oc={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class hl extends n.A{constructor(o,d,A,T){const{point:S,lngLat:E,originalEvent:k,target:Z}=o;super(o.type,{point:S,lngLat:E,originalEvent:k,target:Z}),this.preventDefault=()=>{o.preventDefault()},this.id=d,this.interaction=A,this.feature=T}}class Jg{constructor(o){this.map=o,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(o,d){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const A=d.filter;let T=d.type;A&&this.filters.set(o,n.a_(A)),T==="mouseover"&&(T="mouseenter"),T==="mouseout"&&(T="mouseleave");const S=this.interactionsByType.get(T)||new Map;T==="mouseenter"||T==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(o,d)):S.size===0&&this.map.on(T,this.handleType),S.size===0&&this.interactionsByType.set(T,S),S.set(o,d),this.typeById.set(o,T)}get(o){const d=this.typeById.get(o);if(!d)return;const A=this.interactionsByType.get(d);return A?A.get(o):void 0}remove(o){const d=this.typeById.get(o);if(!d)return;this.typeById.delete(o),this.filters.delete(o);const A=this.interactionsByType.get(d);A&&(A.delete(o),d==="mouseenter"||d==="mouseleave"?(this.delegatedInteractions.delete(o),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):A.size===0&&this.map.off(d,this.handleType))}queryTargets(o,d){const A=[];for(const[T,S]of d)S.target&&A.push({targetId:T,target:S.target,filter:this.filters.get(T)});return this.map.style.queryRenderedTargets(o,A,this.map.transform)}handleMove(o){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const d=this.queryTargets(o.point,Array.from(this.delegatedInteractions).reverse());d.length&&(o.type="mouseenter",this.handleType(o,d));const A=new Map;for(const[T,{feature:S}]of this.prevHoveredFeatures)this.hoveredFeatures.has(T)||A.set(S.id,S);A.size&&(o.type="mouseleave",this.handleType(o,Array.from(A.values())))}handleOut(o){const d=Array.from(this.hoveredFeatures.values()).map(({feature:A})=>A);d.length&&(o.type="mouseleave",this.handleType(o,d)),this.hoveredFeatures.clear()}handleType(o,d){const A=Array.from(this.interactionsByType.get(o.type)).reverse(),T=!!d;d=d||this.queryTargets(o.point,A);const S=o.type==="mouseenter";let E=!1;const k=new Set;for(const Z of d){for(const[K,Y]of A){if(!Y.target)continue;const re=Z.variants?Z.variants[K]:null;if(re){for(const ne of re){if(Fc(ne,Z,k,K))continue;const pe=new n.cx(Z,ne),Pe=Pd(ne,Z,K);T&&(pe.state=this.map.getFeatureState(pe));const Ce=S?this.prevHoveredFeatures.get(Pe):null,Ve=new hl(o,K,Y,pe),Le=Ce?Ce.stop:Y.handler(Ve);if(S&&this.hoveredFeatures.set(Pe,{feature:Z,stop:Le}),Le!==!1){E=!0;break}}if(E)break}}if(E)break}if(!E)for(const[Z,K]of A){const{handler:Y,target:re}=K;if(!re&&Y(new hl(o,Z,K,null))!==!1)break}}}function kn(y,o){if(Array.isArray(y)&&Array.isArray(o)){const d=new Set(y),A=new Set(o);return d.size===A.size&&y.every(T=>A.has(T))}return n.bn(y,o)}const tf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},CA={showCompass:!0,showZoom:!0,visualizePitch:!1};class SA{constructor(o,d,A=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Yd({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,A&&(this.mousePitch=new Ec({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.aQ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(o,d){this.mouseRotate.mousedown(o,d),this.mousePitch&&this.mousePitch.mousedown(o,d),fe()}move(o,d){const A=this.map,T=this.mouseRotate.mousemoveWindow(o,d),S=T&&T.bearingDelta;if(S&&A.setBearing(A.getBearing()+S),this.mousePitch){const E=this.mousePitch.mousemoveWindow(o,d),k=E&&E.pitchDelta;k&&A.setPitch(A.getPitch()+k)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){se(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(n.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Re(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Re(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=we(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=we(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Tp(y,o,d){if(y=new n.bO(y.lng,y.lat),o){const A=new n.bO(y.lng-360,y.lat),T=new n.bO(y.lng+360,y.lat),S=360*Math.ceil(Math.abs(y.lng-d.center.lng)/360),E=d.locationPoint3D(y).distSqr(o),k=o.x<0||o.y<0||o.x>d.width||o.y>d.height;d.locationPoint3D(A).distSqr(o)<E&&(k||Math.abs(A.lng-d.center.lng)<S)?y=A:d.locationPoint3D(T).distSqr(o)<E&&(k||Math.abs(T.lng-d.center.lng)<S)&&(y=T)}for(;Math.abs(y.lng-d.center.lng)>180;){const A=d.locationPoint3D(y);if(A.x>=0&&A.y>=0&&A.x<=d.width&&A.y<=d.height)break;y.lng>d.center.lng?y.lng-=360:y.lng+=360}return y}const Cl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Oi={anchor:"center",color:"#3FB1CE",scale:1,draggable:!1,clickTolerance:0,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Wo extends n.E{constructor(o,d){super(),(o instanceof HTMLElement||d)&&(o=n.l({element:o},d)),n.aQ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),o=n.l({},Oi,o),this._anchor=o.anchor,this._color=o.color,this._scale=o.scale,this._draggable=o.draggable,this._clickTolerance=o.clickTolerance,this._rotation=o.rotation,this._rotationAlignment=o.rotationAlignment,this._pitchAlignment=o.pitchAlignment,this._occludedOpacity=o.occludedOpacity,this._altitude=o.altitude,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),o&&o.element?(this._element=o.element,this._offset=n.P.convert(o&&o.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=n.P.convert(o&&o.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",S=>{S.preventDefault()}),this._element.addEventListener("mousedown",S=>{S.preventDefault()});const A=this._element.classList;for(const S in Cl)A.remove(`mapboxgl-marker-anchor-${S}`);A.add(`mapboxgl-marker-anchor-${this._anchor}`);const T=o&&o.className?o.className.trim().split(/\s+/):[];A.add(...T),this._popup=null}_createDefaultMarker(){const o=H("div"),d=q("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},o);if(this._altitude===0){const A=q("radialGradient",{id:"shadowGradient"},q("defs",{},d));q("stop",{offset:"10%","stop-opacity":.4},A),q("stop",{offset:"100%","stop-opacity":.05},A),q("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},d)}return q("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},d),q("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},d),q("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},d),o}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.bO.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(o){return o===this._altitude||(this._defaultMarker&&(this._altitude===0&&o!==0||this._altitude!==0&&o===0)&&(this._element=this._createDefaultMarker()),this._altitude=o||Oi.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,o._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const d=o.code,A=o.charCode||o.keyCode;d!=="Space"&&d!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(o){const d=o.originalEvent.target,A=this._element;this._popup&&(d===A||A.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,d=this._pos;if(!o||!d)return!1;const A=o.unproject(d,this._altitude),T=o.getFreeCameraOptions();if(!T.position)return!1;const S=T.position.toLngLat();return S.distanceTo(A)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const d=this._pos;if(!d||d.x<0||d.x>o.transform.width||d.y<0||d.y>o.transform.height)return void this._clearFadeTimer();const A=o.unproject(d,this._altitude);let T;o._showingGlobe()&&n.dK(o.transform,this._lngLat)?T=0:(T=1-o._queryFogOpacity(A),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(T*=this._occludedOpacity)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${Cl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const o=this._pos,d=this._map,A=this.getPitchAlignment();if(!d||!o||A!=="map")return"";if(!d._showingGlobe()){const Z=d.getPitch();return Z?`rotateX(${Z}deg)`:""}const T=n.c4(n.dL(d.transform,this._lngLat)),S=o.sub(n.dM(d.transform)),E=Math.abs(S.x)+Math.abs(S.y);if(E===0)return"";const k=T/E;return`rotateX(${-S.y*k}deg) rotateY(${S.x*k}deg)`}_calculateZTransform(){const o=this._pos,d=this._map;if(!d||!o)return"";let A=0;const T=this.getRotationAlignment();if(T==="map")if(d._showingGlobe()){const S=d.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),E=d.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(S);A=n.c4(Math.atan2(E.y,E.x))-90}else A=-d.getBearing();else if(T==="horizon"){const S=n.ae(4,6,d.getZoom()),E=n.dM(d.transform);E.y+=S*d.transform.height;const k=o.sub(E),Z=n.c4(Math.atan2(k.y,k.x));A=(Z>90?Z-270:Z+90)*(1-S)}return A+=this._rotation,A?`rotateZ(${A}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Tp(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat,this._altitude),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=n.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const d=this._map;if(!d)return;const A=this._pointerdownPos,T=this._positionDelta;if(A&&T){if(!this._isDragging){const S=this._clickTolerance||d._clickTolerance;if(o.point.dist(A)<S)return;this._isDragging=!0}this._pos=o.point.sub(T),this._lngLat=d.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.A("dragstart"))),this.fire(new n.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.A("dragend")),this._state="inactive"}_addDragHandler(o){const d=this._map,A=this._pos;d&&A&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(A),this._pointerdownPos=o.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const d=this._map;return d&&(o?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||Oi.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||Oi.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||Oi.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||Oi.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ku={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Si={maxWidth:100,unit:"metric"},Qg={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Uu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},bA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function af(y=new n.P(0,0),o="bottom"){if(typeof y=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(o){case"top":return new n.P(0,y);case"top-left":return new n.P(d,d);case"top-right":return new n.P(-d,d);case"bottom":return new n.P(0,-y);case"bottom-left":return new n.P(d,-d);case"bottom-right":return new n.P(-d,-d);case"left":return new n.P(y,0);case"right":return new n.P(-y,0)}return new n.P(0,0)}return y instanceof n.P||Array.isArray(y)?n.P.convert(y):n.P.convert(y[o]||[0,0])}return{version:v,supported:j.supported,setRTLTextPlugin:n.dN,getRTLTextPluginStatus:n.dO,Map:class extends wp{constructor(y){x.mark(R.create);const o=y;if((y=n.l({},tf,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&n.dI(window)&&(y.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Md(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies,null,null),y),this._repaint=!!y.repaint,this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new nc,this._domRenderTaskQueue=new nc,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aW(),this._locale=n.l({},Oc,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._tessellationStep=y.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=y.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Rp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=y.scaleFactor,this._requestManager=new xe(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,this._contextCreateOptions=y.contextCreateOptions?Object.assign({},y.contextCreateOptions):{},typeof y.container=="string"){const d=document.getElementById(y.container);if(!d)throw new Error(`Container '${y.container.toString()}' not found.`);this._container=d}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),this._spriteFormat=y.spriteFormat,n.aQ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Lu),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new hm(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,(y.style||!y.testMode)&&this.setStyle(y.style||n.e.DEFAULT_STYLE,{config:y.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this.indoor=new jc(this),y.hash&&(this._hash=new Kg(typeof y.hash=="string"&&y.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch});const d=y.bounds;d&&(this.resize(),this.fitBounds(d,n.l({},y.fitBoundsOptions,{duration:0})))}this.resize(),y.attributionControl&&this.addControl(new Ff({customAttribution:y.customAttribution})),this._logoControl=new Ko,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new n.A(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new n.A(`${d.dataType}dataloading`,d))}),this._interactions=new Jg(this)}_getMapId(){return this._mapId}addControl(y,o){if(o===void 0&&(o=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new n.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=y.onAdd(this);this._controls.push(y);const A=this._controlPositions[o];return o.indexOf("bottom")!==-1?A.insertBefore(d,A.firstChild):A.appendChild(d),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new n.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(y);return o>-1&&this._controls.splice(o,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new n.A("movestart",y)).fire(new n.A("move",y)),this.fire(new n.A("resize",y)),o&&this.fire(new n.A("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(n.aB.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(y){return this._scaleFactor=y,this.painter.scaleFactor=y,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(o=>o==="auto"?navigator.language:o):y}setLanguage(y){const o=this._parseLanguage(y);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,o=y.projection.name;let d;o==="globe"&&y.zoom>=n.bY?(y.setMercatorFromTransition(),d=!0):o==="mercator"&&y.zoom<n.bY&&(y.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,o){return this._updateProjection(y||o||{name:"mercator"})}_updateProjection(y){let o;return o=y.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(y,o){return this.transform.locationPoint3D(n.bO.convert(y),o)}unproject(y,o){return this.transform.pointLocation3D(n.P.convert(y),o)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,o,d){const A=T=>{let S=[];if(Array.isArray(o)){const E=o.filter(k=>this.getLayer(k));S=E.length?this.queryRenderedFeatures(T,{layers:E}):[]}else S=this.queryRenderedFeatures(T,{target:o});return S};if(y==="mouseenter"||y==="mouseover"){let T=!1;return{listener:d,targets:o,delegates:{mousemove:E=>{const k=A(E.point);k.length?T||(T=!0,d.call(this,new Rl(y,this,E.originalEvent,{features:k}))):T=!1},mouseout:()=>{T=!1}}}}if(y==="mouseleave"||y==="mouseout"){let T=!1;return{listener:d,targets:o,delegates:{mousemove:k=>{A(k.point).length?T=!0:T&&(T=!1,d.call(this,new Rl(y,this,k.originalEvent)))},mouseout:k=>{T&&(T=!1,d.call(this,new Rl(y,this,k.originalEvent)))}}}}{const T=S=>{const E=A(S.point);E.length&&(S.features=E,d.call(this,S),delete S.features)};return{listener:d,targets:o,delegates:{[y]:T}}}}on(y,o,d){if(typeof o=="function"||d===void 0)return super.on(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(y,o,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(A);for(const T in A.delegates)this.on(T,A.delegates[T]);return this}once(y,o,d){if(typeof o=="function"||d===void 0)return super.once(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(y,o,d);for(const T in A.delegates)this.once(T,A.delegates[T]);return this}off(y,o,d){if(typeof o=="function"||d===void 0)return super.off(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._delegatedListeners?this._delegatedListeners[y]:void 0;return A&&(T=>{for(let S=0;S<T.length;S++){const E=T[S];if(E.listener===d&&kn(E.targets,o)){for(const k in E.delegates)this.off(k,E.delegates[k]);return T.splice(S,1),this}}})(A),this}queryRenderedFeatures(y,o){if(!this.style)return[];if(y===void 0||y instanceof n.P||Array.isArray(y)||o!==void 0||(o=y,y=void 0),y=y||[[0,0],[this.transform.width,this.transform.height]],!o){const S=this.style.queryRenderedFeatures(y,void 0,this.transform),E=this.style.queryRenderedFeatureset(y,void 0,this.transform);return S.concat(E)}let d=!0;if(o.target&&(d=this._isTargetValid(o.target),d&&!o.layers))return this.style.queryRenderedFeatureset(y,o,this.transform);let A=!0;if(o.layers&&Array.isArray(o.layers)){for(const S of o.layers)if(!this._isValidId(S)){A=!1;break}if(A&&!o.target)return this.style.queryRenderedFeatures(y,o,this.transform)}let T=[];return A&&(T=T.concat(this.style.queryRenderedFeatures(y,o,this.transform))),d&&(T=T.concat(this.style.queryRenderedFeatureset(y,o,this.transform))),T}querySourceFeatures(y,o){return!y||typeof y=="string"&&!this._isValidId(y)?[]:this.style.querySourceFeatures(y,o)}isPointOnSurface(y){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&n.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(y))}addInteraction(y,o){return this._interactions.add(y,o),this}removeInteraction(y){return this._interactions.remove(y),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this}setStyle(y,o){return o=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&y&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(y,(d,A)=>{d?(n.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(y,o)):A&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(y,o))}_getUIString(y){const o=this._locale[y];if(o==null)throw new Error(`Missing UI string '${y}'`);return o}_updateStyle(y,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y){const d=n.l({},o);o&&o.config&&(d.initialConfig=o.config,delete d.config),this.style=new so(this,d).load(y),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new so(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(y){return y==null?(this.fire(new n.z(new Error("IDs can't be empty."))),!1):!n.cs(y)||(this.fire(new n.z(new Error(`IDs can't contain special symbols: "${y}".`))),!1)}_isTargetValid(y){return"featuresetId"in y?this._isValidId("importId"in y?y.importId:y.featuresetId):"layerId"in y&&this._isValidId(y.layerId)}_areTargetsValid(y){if(Array.isArray(y)){for(const o of y)if(!this._isValidId(o))return!1;return!0}return this._isTargetValid(y)}addSource(y,o){return this._isValidId(y)?(this._lazyInitEmptyStyle(),this.style.addSource(y,o),this._update(!0)):this}isSourceLoaded(y){return!!this._isValidId(y)&&!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(y,o,d){this._lazyInitEmptyStyle(),this.style.addSourceType(y,o,d)}removeSource(y){return this._isValidId(y)?(this.style.removeSource(y),this._updateTerrain(),this._update(!0)):this}getSource(y){return this._isValidId(y)?this.style.getOwnSource(y):null}addImage(y,o,{pixelRatio:d=1,sdf:A=!1,stretchX:T,stretchY:S,content:E}={}){this._lazyInitEmptyStyle();const k=n.I.from(y);if(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:Z,height:K,data:Y}=n.q.getImageData(o);this.style.addImage(k,{data:new n.r({width:Z,height:K},Y),pixelRatio:d,stretchX:T,stretchY:S,content:E,sdf:A,version:0,usvg:!1})}else if(o.width===void 0||o.height===void 0)this.fire(new n.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Z,height:K}=o,Y=o;this.style.addImage(k,{data:new n.r({width:Z,height:K},new Uint8Array(Y.data)),pixelRatio:d,stretchX:T,stretchY:S,content:E,sdf:A,usvg:!1,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,y)}}updateImage(y,o){this._lazyInitEmptyStyle();const d=n.I.from(y),A=this.style.getImage(d);if(!A)return void this.fire(new n.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?n.q.getImageData(o):o,{width:S,height:E,data:k}=T;if(S===void 0||E===void 0)return void this.fire(new n.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==(A.usvg?A.icon.usvg_tree.width:A.data.width)||E!==(A.usvg?A.icon.usvg_tree.height:A.data.height))return void this.fire(new n.z(new Error(`The width and height of the updated image (${S}, ${E})
                must be that same as the previous version of the image
                (${A.data.width}, ${A.data.height})`)));const Z=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);let K=!1;A.usvg?(A.data=new n.r({width:S,height:E},new Uint8Array(k)),A.usvg=!1,A.icon=void 0,K=!0):A.data.replace(k,Z),this.style.updateImage(d,A,K)}hasImage(y){return y?!!this.style&&!!this.style.getImage(n.I.from(y)):(this.fire(new n.z(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(n.I.from(y))}loadImage(y,o){n.o(this._requestManager.transformRequest(y,n.R.Image),(d,A)=>{o(d,A instanceof HTMLImageElement?n.q.getImageData(A):A)})}listImages(){return this.style.listImages().map(y=>y.name)}addModel(y,o){this._lazyInitEmptyStyle(),this.style.addModel(y,o)}hasModel(y){return y?this.style.hasModel(y):(this.fire(new n.z(new Error("Missing required model id"))),!1)}removeModel(y){this.style.removeModel(y)}listModels(){return this.style.listModels()}addLayer(y,o){return this._isValidId(y.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(y,o),this._update(!0)):this}getSlot(y){const o=this.getLayer(y);return o&&o.slot||null}setSlot(y,o){return this.style.setSlot(y,o),this.style.mergeLayers(),this._update(!0)}addImport(y,o){return this.style.addImport(y,o),this}updateImport(y,o){return typeof o!="string"&&o.id!==y?(this.removeImport(y),this.addImport(o)):(this.style.updateImport(y,o),this._update(!0))}removeImport(y){return this.style.removeImport(y),this}moveImport(y,o){return this.style.moveImport(y,o),this._update(!0)}moveLayer(y,o){return this._isValidId(y)?(this.style.moveLayer(y,o),this._update(!0)):this}removeLayer(y){return this._isValidId(y)?(this.style.removeLayer(y),this._update(!0)):this}getLayer(y){if(!this._isValidId(y))return null;const o=this.style.getOwnLayer(y);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(y,o,d){return this._isValidId(y)?(this.style.setLayerZoomRange(y,o,d),this._update(!0)):this}setFilter(y,o,d={}){return this._isValidId(y)?(this.style.setFilter(y,o,d),this._update(!0)):this}getFilter(y){return this._isValidId(y)?this.style.getFilter(y):null}setPaintProperty(y,o,d,A={}){return this._isValidId(y)?(this.style.setPaintProperty(y,o,d,A),this._update(!0)):this}getPaintProperty(y,o){return this._isValidId(y)?this.style.getPaintProperty(y,o):null}setLayoutProperty(y,o,d,A={}){return this._isValidId(y)?(this.style.setLayoutProperty(y,o,d,A),this._update(!0)):this}getLayoutProperty(y,o){return this._isValidId(y)?this.style.getLayoutProperty(y,o):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(y){return this.style.setGlyphsUrl(y),this._update(!0)}getSchema(y){return this.style.getSchema(y)}setSchema(y,o){return this.style.setSchema(y,o),this._update(!0)}getConfig(y){return this.style.getConfig(y)}setConfig(y,o){return this.style.setConfig(y,o),this._update(!0)}getConfigProperty(y,o){return this.style.getConfigProperty(y,o)}setConfigProperty(y,o,d){return this.style.setConfigProperty(y,o,d),this._update(!0)}getFeaturesetDescriptors(y){return this.style.getFeaturesetDescriptors(y)}setLights(y){if(this._lazyInitEmptyStyle(),y&&y.length===1&&y[0].type==="flat"){const o=y[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(y),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const y=this.style.getLights()||[];return y.length===0&&y.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),y}setLight(y,o={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:y}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(y){return this._lazyInitEmptyStyle(),this.style.setSnow(y),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(y){return this._lazyInitEmptyStyle(),this.style.setRain(y),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(y){return this._lazyInitEmptyStyle(),this.style.setColorTheme(y),this._update(!0)}setImportColorTheme(y,o){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(y,o),this._update(!0)}setCamera(y){return this.style.setCamera(y),this._triggerCameraUpdate(y)}_triggerCameraUpdate(y){return this._update(this.transform.setOrthographicProjectionAtLowPitch(y["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(y),this.transform):0}setFeatureState(y,o){return y.source&&!this._isValidId(y.source)?this:(this.style.setFeatureState(y,o),this._update())}removeFeatureState(y,o){return y.source&&!this._isValidId(y.source)?this:(this.style.removeFeatureState(y,o),this._update())}getFeatureState(y){return y.source&&!this._isValidId(y.source)?null:this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let d,A,T,S=this._container;for(;S&&(!A||!T);){const E=window.getComputedStyle(S).transform;E&&E!=="none"&&(d=E.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(A=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(T=d[3])),S=S.parentElement}this._containerWidth=A?Math.abs(y/A):y,this._containerHeight=T?Math.abs(o/T):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=H("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=H("div","mapboxgl-canvas-container",y);this._canvas=H("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=H("div","mapboxgl-control-container",y),A=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(T=>{A[T]=H("div",`mapboxgl-ctrl-${T}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,o){const d=n.q.devicePixelRatio||1;this._canvas.width=d*Math.ceil(y),this._canvas.height=d*Math.ceil(o),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${o}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const o=this._markers.indexOf(y);o!==-1&&this._markers.splice(o,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const o=this._popups.indexOf(y);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const y=n.l({},j.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",y);o?(kt(o,!0),this.painter=new sm(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(o)):this.fire(new n.z(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.A("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new n.A("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let o;this.fire(new n.A("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,A=n.q.now(),T=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=T.createQuery(),T.beginQuery(d.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,Y=this.transform.pitch,re=n.q.now(),ne=new n.aa(K,{now:re,fadeDuration:S,pitch:Y,transition:this.style.transition});this.style.update(ne)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(A),this.style.updateSources(this.transform),this.isMoving()||this._forceMarkerAndPopupUpdate()):E=this._updateAverageElevation(A);const k=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),k&&(this._placementDirty=k.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,x.mark(R.load),this.fire(new n.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const K=n.q.now()-A;T.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const Y=T.getQueryParameter(o,T.QUERY_RESULT)/1e6;T.deleteQuery(o),this.fire(new n.A("gpu-timing-frame",{cpuTime:K,gpuTime:Y}))},50)}if(this.listens("gpu-timing-layer")){const K=this.painter.collectGpuTimers();setTimeout(()=>{const Y=this.painter.queryGpuTimers(K);this.fire(new n.A("gpu-timing-layer",{layerTimes:Y}))},50)}if(this.listens("gpu-timing-deferred-render")){const K=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Y=this.painter.queryGpuTimeDeferredRender(K);this.fire(new n.A("gpu-timing-deferred-render",{gpuTime:Y}))},50)}const Z=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(Z||this._repaint)this.triggerRepaint();else{const K=this.idle();if(K&&(E=this._updateAverageElevation(A,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),K&&(this.fire(new n.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Y=this._calculateSpeedIndex();this.fire(new n.A("speedindexcompleted",{speedIndex:Y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Z||(this._fullyLoaded=!0,x.mark(R.fullLoad),this._performanceMetricsCollection&&ht(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const o of this._markers)y&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!y||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(y,o=!1){const d=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const A=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(A||(o||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const T=this.transform.averageElevation;let S=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=y;const E=Math.abs(T-S);if(E>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(S),d(S);this._averageElevation.easeTo(S,y,300)}else if(E>1e-4)return this._averageElevation.jumpTo(S),d(S)}return!!this._averageElevation.isEasing(y)&&d(this._averageElevation.getValue(y))}_authenticate(){Ae(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===Ie||y.status===401)){const o=this.painter.context.gl;kt(o,!1),this._logoControl instanceof Ko&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),qe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&lt(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const d=this.painter.context.gl,A=d.createFramebuffer();function T(S){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,S,0);const E=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,E),E}return d.bindFramebuffer(d.FRAMEBUFFER,A),this._canvasPixelComparison(T(y),o.canvasCopies.map(T),o.timeStamps)}_canvasPixelComparison(y,o,d){let A=d[1]-d[0];const T=y.length/4;for(let S=0;S<o.length;S++){const E=o[S];let k=0;for(let Z=0;Z<E.length;Z+=4)E[Z]===y[Z]&&E[Z+1]===y[Z+1]&&E[Z+2]===y[Z+2]&&E[Z+3]===y[Z+3]&&(k+=1);A+=(d[S+2]-d[S+1])*(1-k/T)}return A}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),zt.delete(this.painter.context.gl),He.remove(),Te.remove(),this._removed=!0,this.fire(new n.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=n.q.frame(o=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(o)}))}_preloadTiles(y){const o=this.style?this.style.getSourceCaches():[];return n.bl(o,(d,A)=>d._preloadTiles(y,A),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(y){this._showParseStatus!==y&&(this._showParseStatus=y,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(y){this._showLayers2DWireframe!==y&&(this._showLayers2DWireframe=y,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(y){this._showLayers3DWireframe!==y&&(this._showLayers3DWireframe=y,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,this._tp.refreshUI(),y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,this._tp.refreshUI(),y&&this._update())}_setCacheLimits(y,o){n.dJ(y,o)}get version(){return v}},NavigationControl:class{constructor(y={}){this.options=n.l({},CA,y),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.aQ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aQ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:o}):d.resetNorth({},{originalEvent:o}))}),this._compassIcon=H("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const o=y.getZoom(),d=o===y.getMaxZoom(),A=o===y.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new SA(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,o){const d=H("button",y,this._container);return d.type="button",d.addEventListener("click",o),d}_setButtonTitle(y,o){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${o}`);y.setAttribute("aria-label",d),y.firstElementChild&&y.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends n.E{constructor(y={}){super();const o=navigator.geolocation;this.options=n.l({geolocation:o},ku,y),n.aQ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ig(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const o=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,y(d)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>o(d.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(y){const o=this._map.getMaxBounds(),d=y.coords;return!!o&&(d.longitude<o.getWest()||d.longitude>o.getEast()||d.latitude<o.getSouth()||d.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new n.A("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("geolocate",y)),this._finish()}}_updateCamera(y){const o=new n.bO(y.coords.longitude,y.coords.latitude),d=y.coords.accuracy,A=this._map.getBearing(),T=n.l({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(d),T,{geolocateSource:!0})}_updateMarker(y){if(y){const o=new n.bO(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,o=n.bH(1,y._center.lat)*y.worldSize,d=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=H("button","mapboxgl-ctrl-geolocate",this._container),H("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H("div","mapboxgl-user-location"),this._dotElement.appendChild(H("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(H("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Wo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=H("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.A("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ff,ScaleControl:class{constructor(y={}){this.options=n.l({},Si,y),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aQ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,o=this._map,d=o._containerHeight/2,A=o._containerWidth/2-y/2,T=o.unproject([A,d]),S=o.unproject([A+y,d]),E=T.distanceTo(S);if(this.options.unit==="imperial"){const k=3.2808*E;k>5280?this._setScale(y,k/5280,"mile"):this._setScale(y,k,"foot")}else this.options.unit==="nautical"?this._setScale(y,E/1852,"nautical-mile"):E>=1e3?this._setScale(y,E/1e3,"kilometer"):this._setScale(y,E,"meter")}_setScale(y,o,d){this._map._requestDomTask(()=>{const A=function(S){const E=Math.pow(10,`${Math.floor(S)}`.length-1);let k=S/E;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(Z){const K=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*K)/K}(k),E*k}(o),T=A/o;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(A):`${A}&nbsp;${Qg[d]}`,this._container.style.width=y*T+"px"})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y={}){this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:n.w("Full screen control 'container' must be a DOM element.")),n.aQ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=H("button","mapboxgl-ctrl-fullscreen",this._controlContainer);H("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(y){super(),this.options=n.l(Object.create(Uu),y),this._altitude=this.options.altitude,n.aQ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new n.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new n.A("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=n.bO.convert(y),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(y){return this._altitude=y,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const o=document.createDocumentFragment(),d=document.createElement("body");let A;for(d.innerHTML=y;A=d.firstChild,A;)o.appendChild(A);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=H("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(y),this.options.closeButton){const d=this._closeButton=H("button","mapboxgl-popup-close-button",o);d.type="button",d.setAttribute("aria-label","Close popup"),d.innerHTML='<span aria-hidden="true">&#215;</span>',d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let o;return this._classList.delete(y)?o=!1:(this._classList.add(y),o=!0),this._updateClassList(),o}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const o=this._map,d=this._container,A=this._pos;if(!o||!d||!A)return"bottom";const T=d.offsetWidth,S=d.offsetHeight,E=A.x<T/2,k=A.x>o.transform.width-T/2;if(A.y+y<S)return E?"top-left":k?"top-right":"top";if(A.y>o.transform.height-S){if(E)return"bottom-left";if(k)return"bottom-right"}return E?"left":k?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),y.className=o.join(" ")}_update(y){const o=this._map,d=this._content;if(!o||!this._lngLat&&!this._trackPointer||!d)return;let A=this._container;if(A||(A=this._container=H("div","mapboxgl-popup",o.getContainer()),this._tip=H("div","mapboxgl-popup-tip",A),A.appendChild(d)),this.options.maxWidth&&A.style.maxWidth!==this.options.maxWidth&&(A.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tp(this._lngLat,this._pos,o.transform)),!this._trackPointer||y){const T=this._pos=this._trackPointer&&y instanceof n.P?y:o.project(this._lngLat,this._altitude),S=af(this.options.offset),E=this._anchor=this._getAnchor(S.y),k=af(this.options.offset,E),Z=T.add(k).round();o._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Cl[E]} translate(${Z.x}px,${Z.y}px)`)})}if(!this._marker&&o._showingGlobe()){const T=n.dK(o.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(bA);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:Wo,Style:so,LngLat:n.bO,LngLatBounds:n.aB,Point:n.P,MercatorCoordinate:n.ac,FreeCameraOptions:Dd,Evented:n.E,config:n.e,prewarm:n.dP,clearPrewarmedResources:n.dQ,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(y){n.e.ACCESS_TOKEN=y},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(y){n.e.API_URL=y},get workerCount(){return n.dR.workerCount},set workerCount(y){n.dR.workerCount=y},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){n.e.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){n.dS(y)},get workerUrl(){return n.dT.workerUrl},set workerUrl(y){n.dT.workerUrl=y},get workerClass(){return n.dT.workerClass},set workerClass(y){n.dT.workerClass=y},get workerParams(){return n.dT.workerParams},set workerParams(y){n.dT.workerParams=y},get dracoUrl(){return n.dU()},set dracoUrl(y){n.dV(y)},get meshoptUrl(){return n.dW()},set meshoptUrl(y){n.dX(y)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var c=i;return c})}(Tb)),Tb.exports}var Yfe=Wfe();const ep=ns(Yfe);function mX(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(a=mX(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function hi(){for(var t,e,a=0,r="",i=arguments.length;a<i;a++)(t=arguments[a])&&(e=mX(t))&&(r&&(r+=" "),r+=e);return r}var FN,eB;function kh(){if(eB)return FN;eB=1;var t=Array.isArray;return FN=t,FN}var kN,tB;function gX(){if(tB)return kN;tB=1;var t=typeof ES=="object"&&ES&&ES.Object===Object&&ES;return kN=t,kN}var UN,aB;function Wm(){if(aB)return UN;aB=1;var t=gX(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return UN=a,UN}var BN,rB;function uC(){if(rB)return BN;rB=1;var t=Wm(),e=t.Symbol;return BN=e,BN}var jN,nB;function Xfe(){if(nB)return jN;nB=1;var t=uC(),e=Object.prototype,a=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function l(c){var n=a.call(c,i),v=c[i];try{c[i]=void 0;var R=!0}catch{}var x=r.call(c);return R&&(n?c[i]=v:delete c[i]),x}return jN=l,jN}var GN,iB;function Jfe(){if(iB)return GN;iB=1;var t=Object.prototype,e=t.toString;function a(r){return e.call(r)}return GN=a,GN}var ZN,sB;function Ug(){if(sB)return ZN;sB=1;var t=uC(),e=Xfe(),a=Jfe(),r="[object Null]",i="[object Undefined]",l=t?t.toStringTag:void 0;function c(n){return n==null?n===void 0?i:r:l&&l in Object(n)?e(n):a(n)}return ZN=c,ZN}var qN,oB;function Bg(){if(oB)return qN;oB=1;function t(e){return e!=null&&typeof e=="object"}return qN=t,qN}var HN,lB;function y1(){if(lB)return HN;lB=1;var t=Ug(),e=Bg(),a="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==a}return HN=r,HN}var $N,uB;function OL(){if(uB)return $N;uB=1;var t=kh(),e=y1(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(l,c){if(t(l))return!1;var n=typeof l;return n=="number"||n=="symbol"||n=="boolean"||l==null||e(l)?!0:r.test(l)||!a.test(l)||c!=null&&l in Object(c)}return $N=i,$N}var KN,cB;function lA(){if(cB)return KN;cB=1;function t(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}return KN=t,KN}var WN,dB;function VL(){if(dB)return WN;dB=1;var t=Ug(),e=lA(),a="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",l="[object Proxy]";function c(n){if(!e(n))return!1;var v=t(n);return v==r||v==i||v==a||v==l}return WN=c,WN}var YN,hB;function Qfe(){if(hB)return YN;hB=1;var t=Wm(),e=t["__core-js_shared__"];return YN=e,YN}var XN,fB;function epe(){if(fB)return XN;fB=1;var t=Qfe(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function a(r){return!!e&&e in r}return XN=a,XN}var JN,pB;function yX(){if(pB)return JN;pB=1;var t=Function.prototype,e=t.toString;function a(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return JN=a,JN}var QN,mB;function tpe(){if(mB)return QN;mB=1;var t=VL(),e=epe(),a=lA(),r=yX(),i=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,n=Object.prototype,v=c.toString,R=n.hasOwnProperty,x=RegExp("^"+v.call(R).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N(L){if(!a(L)||e(L))return!1;var F=t(L)?x:l;return F.test(r(L))}return QN=N,QN}var eO,gB;function ape(){if(gB)return eO;gB=1;function t(e,a){return e==null?void 0:e[a]}return eO=t,eO}var tO,yB;function Gv(){if(yB)return tO;yB=1;var t=tpe(),e=ape();function a(r,i){var l=e(r,i);return t(l)?l:void 0}return tO=a,tO}var aO,AB;function cP(){if(AB)return aO;AB=1;var t=Gv(),e=t(Object,"create");return aO=e,aO}var rO,vB;function rpe(){if(vB)return rO;vB=1;var t=cP();function e(){this.__data__=t?t(null):{},this.size=0}return rO=e,rO}var nO,_B;function npe(){if(_B)return nO;_B=1;function t(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}return nO=t,nO}var iO,wB;function ipe(){if(wB)return iO;wB=1;var t=cP(),e="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function i(l){var c=this.__data__;if(t){var n=c[l];return n===e?void 0:n}return r.call(c,l)?c[l]:void 0}return iO=i,iO}var sO,RB;function spe(){if(RB)return sO;RB=1;var t=cP(),e=Object.prototype,a=e.hasOwnProperty;function r(i){var l=this.__data__;return t?l[i]!==void 0:a.call(l,i)}return sO=r,sO}var oO,TB;function ope(){if(TB)return oO;TB=1;var t=cP(),e="__lodash_hash_undefined__";function a(r,i){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=t&&i===void 0?e:i,this}return oO=a,oO}var lO,CB;function lpe(){if(CB)return lO;CB=1;var t=rpe(),e=npe(),a=ipe(),r=spe(),i=ope();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,lO=l,lO}var uO,SB;function upe(){if(SB)return uO;SB=1;function t(){this.__data__=[],this.size=0}return uO=t,uO}var cO,bB;function zL(){if(bB)return cO;bB=1;function t(e,a){return e===a||e!==e&&a!==a}return cO=t,cO}var dO,xB;function dP(){if(xB)return dO;xB=1;var t=zL();function e(a,r){for(var i=a.length;i--;)if(t(a[i][0],r))return i;return-1}return dO=e,dO}var hO,PB;function cpe(){if(PB)return hO;PB=1;var t=dP(),e=Array.prototype,a=e.splice;function r(i){var l=this.__data__,c=t(l,i);if(c<0)return!1;var n=l.length-1;return c==n?l.pop():a.call(l,c,1),--this.size,!0}return hO=r,hO}var fO,EB;function dpe(){if(EB)return fO;EB=1;var t=dP();function e(a){var r=this.__data__,i=t(r,a);return i<0?void 0:r[i][1]}return fO=e,fO}var pO,NB;function hpe(){if(NB)return pO;NB=1;var t=dP();function e(a){return t(this.__data__,a)>-1}return pO=e,pO}var mO,OB;function fpe(){if(OB)return mO;OB=1;var t=dP();function e(a,r){var i=this.__data__,l=t(i,a);return l<0?(++this.size,i.push([a,r])):i[l][1]=r,this}return mO=e,mO}var gO,VB;function hP(){if(VB)return gO;VB=1;var t=upe(),e=cpe(),a=dpe(),r=hpe(),i=fpe();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,gO=l,gO}var yO,zB;function DL(){if(zB)return yO;zB=1;var t=Gv(),e=Wm(),a=t(e,"Map");return yO=a,yO}var AO,DB;function ppe(){if(DB)return AO;DB=1;var t=lpe(),e=hP(),a=DL();function r(){this.size=0,this.__data__={hash:new t,map:new(a||e),string:new t}}return AO=r,AO}var vO,MB;function mpe(){if(MB)return vO;MB=1;function t(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}return vO=t,vO}var _O,IB;function fP(){if(IB)return _O;IB=1;var t=mpe();function e(a,r){var i=a.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return _O=e,_O}var wO,LB;function gpe(){if(LB)return wO;LB=1;var t=fP();function e(a){var r=t(this,a).delete(a);return this.size-=r?1:0,r}return wO=e,wO}var RO,FB;function ype(){if(FB)return RO;FB=1;var t=fP();function e(a){return t(this,a).get(a)}return RO=e,RO}var TO,kB;function Ape(){if(kB)return TO;kB=1;var t=fP();function e(a){return t(this,a).has(a)}return TO=e,TO}var CO,UB;function vpe(){if(UB)return CO;UB=1;var t=fP();function e(a,r){var i=t(this,a),l=i.size;return i.set(a,r),this.size+=i.size==l?0:1,this}return CO=e,CO}var SO,BB;function ML(){if(BB)return SO;BB=1;var t=ppe(),e=gpe(),a=ype(),r=Ape(),i=vpe();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,SO=l,SO}var bO,jB;function AX(){if(jB)return bO;jB=1;var t=ML(),e="Expected a function";function a(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var l=function(){var c=arguments,n=i?i.apply(this,c):c[0],v=l.cache;if(v.has(n))return v.get(n);var R=r.apply(this,c);return l.cache=v.set(n,R)||v,R};return l.cache=new(a.Cache||t),l}return a.Cache=t,bO=a,bO}var xO,GB;function _pe(){if(GB)return xO;GB=1;var t=AX(),e=500;function a(r){var i=t(r,function(c){return l.size===e&&l.clear(),c}),l=i.cache;return i}return xO=a,xO}var PO,ZB;function wpe(){if(ZB)return PO;ZB=1;var t=_pe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=t(function(i){var l=[];return i.charCodeAt(0)===46&&l.push(""),i.replace(e,function(c,n,v,R){l.push(v?R.replace(a,"$1"):n||c)}),l});return PO=r,PO}var EO,qB;function IL(){if(qB)return EO;qB=1;function t(e,a){for(var r=-1,i=e==null?0:e.length,l=Array(i);++r<i;)l[r]=a(e[r],r,e);return l}return EO=t,EO}var NO,HB;function Rpe(){if(HB)return NO;HB=1;var t=uC(),e=IL(),a=kh(),r=y1(),i=t?t.prototype:void 0,l=i?i.toString:void 0;function c(n){if(typeof n=="string")return n;if(a(n))return e(n,c)+"";if(r(n))return l?l.call(n):"";var v=n+"";return v=="0"&&1/n==-1/0?"-0":v}return NO=c,NO}var OO,$B;function vX(){if($B)return OO;$B=1;var t=Rpe();function e(a){return a==null?"":t(a)}return OO=e,OO}var VO,KB;function _X(){if(KB)return VO;KB=1;var t=kh(),e=OL(),a=wpe(),r=vX();function i(l,c){return t(l)?l:e(l,c)?[l]:a(r(l))}return VO=i,VO}var zO,WB;function pP(){if(WB)return zO;WB=1;var t=y1();function e(a){if(typeof a=="string"||t(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return zO=e,zO}var DO,YB;function LL(){if(YB)return DO;YB=1;var t=_X(),e=pP();function a(r,i){i=t(i,r);for(var l=0,c=i.length;r!=null&&l<c;)r=r[e(i[l++])];return l&&l==c?r:void 0}return DO=a,DO}var MO,XB;function wX(){if(XB)return MO;XB=1;var t=LL();function e(a,r,i){var l=a==null?void 0:t(a,r);return l===void 0?i:l}return MO=e,MO}var Tpe=wX();const vf=ns(Tpe);var IO,JB;function Cpe(){if(JB)return IO;JB=1;function t(e){return e==null}return IO=t,IO}var Spe=Cpe();const Bn=ns(Spe);var LO,QB;function bpe(){if(QB)return LO;QB=1;var t=Ug(),e=kh(),a=Bg(),r="[object String]";function i(l){return typeof l=="string"||!e(l)&&a(l)&&t(l)==r}return LO=i,LO}var xpe=bpe();const cC=ns(xpe);var Ppe=VL();const Un=ns(Ppe);var Epe=lA();const A1=ns(Epe);var FO={exports:{}},Fs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e8;function Npe(){if(e8)return Fs;e8=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),n=Symbol.for("react.server_context"),v=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),j;j=Symbol.for("react.module.reference");function H(q){if(typeof q=="object"&&q!==null){var W=q.$$typeof;switch(W){case t:switch(q=q.type,q){case a:case i:case r:case R:case x:return q;default:switch(q=q&&q.$$typeof,q){case n:case c:case v:case L:case N:case l:return q;default:return W}}case e:return W}}}return Fs.ContextConsumer=c,Fs.ContextProvider=l,Fs.Element=t,Fs.ForwardRef=v,Fs.Fragment=a,Fs.Lazy=L,Fs.Memo=N,Fs.Portal=e,Fs.Profiler=i,Fs.StrictMode=r,Fs.Suspense=R,Fs.SuspenseList=x,Fs.isAsyncMode=function(){return!1},Fs.isConcurrentMode=function(){return!1},Fs.isContextConsumer=function(q){return H(q)===c},Fs.isContextProvider=function(q){return H(q)===l},Fs.isElement=function(q){return typeof q=="object"&&q!==null&&q.$$typeof===t},Fs.isForwardRef=function(q){return H(q)===v},Fs.isFragment=function(q){return H(q)===a},Fs.isLazy=function(q){return H(q)===L},Fs.isMemo=function(q){return H(q)===N},Fs.isPortal=function(q){return H(q)===e},Fs.isProfiler=function(q){return H(q)===i},Fs.isStrictMode=function(q){return H(q)===r},Fs.isSuspense=function(q){return H(q)===R},Fs.isSuspenseList=function(q){return H(q)===x},Fs.isValidElementType=function(q){return typeof q=="string"||typeof q=="function"||q===a||q===i||q===r||q===R||q===x||q===F||typeof q=="object"&&q!==null&&(q.$$typeof===L||q.$$typeof===N||q.$$typeof===l||q.$$typeof===c||q.$$typeof===v||q.$$typeof===j||q.getModuleId!==void 0)},Fs.typeOf=H,Fs}var t8;function Ope(){return t8||(t8=1,FO.exports=Npe()),FO.exports}var Vpe=Ope(),kO,a8;function RX(){if(a8)return kO;a8=1;var t=Ug(),e=Bg(),a="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==a}return kO=r,kO}var UO,r8;function zpe(){if(r8)return UO;r8=1;var t=RX();function e(a){return t(a)&&a!=+a}return UO=e,UO}var Dpe=zpe();const v1=ns(Dpe);var Mpe=RX();const Ipe=ns(Mpe);var sh=function(e){return e===0?0:e>0?1:-1},hv=function(e){return cC(e)&&e.indexOf("%")===e.length-1},Ar=function(e){return Ipe(e)&&!v1(e)},Zu=function(e){return Ar(e)||cC(e)},Lpe=0,uA=function(e){var a=++Lpe;return"".concat(e||"").concat(a)},oh=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ar(e)&&!cC(e))return r;var l;if(hv(e)){var c=e.indexOf("%");l=a*parseFloat(e.slice(0,c))/100}else l=+e;return v1(l)&&(l=r),i&&l>a&&(l=a),l},Iy=function(e){if(!e)return null;var a=Object.keys(e);return a&&a.length?e[a[0]]:null},Fpe=function(e){if(!Array.isArray(e))return!1;for(var a=e.length,r={},i=0;i<a;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},pl=function(e,a){return Ar(e)&&Ar(a)?function(r){return e+r*(a-e)}:function(){return a}};function ux(t,e,a){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):vf(r,e))===a})}var kpe=function(e){if(!e||!e.length)return null;for(var a=e.length,r=0,i=0,l=0,c=0,n=1/0,v=-1/0,R=0,x=0,N=0;N<a;N++)R=e[N].cx||0,x=e[N].cy||0,r+=R,i+=x,l+=R*x,c+=R*R,n=Math.min(n,R),v=Math.max(v,R);var L=a*c!==r*r?(a*l-r*i)/(a*c-r*r):0;return{xmin:n,xmax:v,a:L,b:(i-L*r)/a}};function d_(t,e){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(e,a)||t[a]!==e[a]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function fM(t){"@babel/helpers - typeof";return fM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fM(t)}var Upe=["viewBox","children"],Bpe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],n8=["points","pathLength"],BO={svg:Upe,polygon:n8,polyline:n8},FL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],cx=function(e,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(le.isValidElement(e)&&(r=e.props),!A1(r))return null;var i={};return Object.keys(r).forEach(function(l){FL.includes(l)&&(i[l]=a||function(c){return r[l](r,c)})}),i},jpe=function(e,a,r){return function(i){return e(a,r,i),null}},Jy=function(e,a,r){if(!A1(e)||fM(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(l){var c=e[l];FL.includes(l)&&typeof c=="function"&&(i||(i={}),i[l]=jpe(c,a,r))}),i},Gpe=["children"],Zpe=["children"];function i8(t,e){if(t==null)return{};var a=qpe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function qpe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function pM(t){"@babel/helpers - typeof";return pM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pM(t)}var s8={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pg=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},o8=null,jO=null,kL=function t(e){if(e===o8&&Array.isArray(jO))return jO;var a=[];return le.Children.forEach(e,function(r){Bn(r)||(Vpe.isFragment(r)?a=a.concat(t(r.props.children)):a.push(r))}),jO=a,o8=e,a};function hh(t,e){var a=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Pg(i)}):r=[Pg(e)],kL(t).forEach(function(i){var l=vf(i,"type.displayName")||vf(i,"type.name");r.indexOf(l)!==-1&&a.push(i)}),a}function df(t,e){var a=hh(t,e);return a&&a[0]}var l8=function(e){if(!e||!e.props)return!1;var a=e.props,r=a.width,i=a.height;return!(!Ar(r)||r<=0||!Ar(i)||i<=0)},Hpe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],$pe=function(e){return e&&e.type&&cC(e.type)&&Hpe.indexOf(e.type)>=0},TX=function(e){return e&&pM(e)==="object"&&"clipDot"in e},Kpe=function(e,a,r,i){var l,c=(l=BO==null?void 0:BO[i])!==null&&l!==void 0?l:[];return!Un(e)&&(i&&c.includes(a)||Bpe.includes(a))||r&&FL.includes(a)},cn=function(e,a,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(le.isValidElement(e)&&(i=e.props),!A1(i))return null;var l={};return Object.keys(i).forEach(function(c){var n;Kpe((n=i)===null||n===void 0?void 0:n[c],c,a,r)&&(l[c]=i[c])}),l},mM=function t(e,a){if(e===a)return!0;var r=le.Children.count(e);if(r!==le.Children.count(a))return!1;if(r===0)return!0;if(r===1)return u8(Array.isArray(e)?e[0]:e,Array.isArray(a)?a[0]:a);for(var i=0;i<r;i++){var l=e[i],c=a[i];if(Array.isArray(l)||Array.isArray(c)){if(!t(l,c))return!1}else if(!u8(l,c))return!1}return!0},u8=function(e,a){if(Bn(e)&&Bn(a))return!0;if(!Bn(e)&&!Bn(a)){var r=e.props||{},i=r.children,l=i8(r,Gpe),c=a.props||{},n=c.children,v=i8(c,Zpe);return i&&n?d_(l,v)&&mM(i,n):!i&&!n?d_(l,v):!1}return!1},c8=function(e,a){var r=[],i={};return kL(e).forEach(function(l,c){if($pe(l))r.push(l);else if(l){var n=Pg(l.type),v=a[n]||{},R=v.handler,x=v.once;if(R&&(!x||!i[n])){var N=R(l,n,c);r.push(N),i[n]=!0}}}),r},Wpe=function(e){var a=e&&e.type;return a&&s8[a]?s8[a]:null},Ype=function(e,a){return kL(a).indexOf(e)},Xpe=["children","width","height","viewBox","className","style","title","desc"];function gM(){return gM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},gM.apply(this,arguments)}function Jpe(t,e){if(t==null)return{};var a=Qpe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qpe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function yM(t){var e=t.children,a=t.width,r=t.height,i=t.viewBox,l=t.className,c=t.style,n=t.title,v=t.desc,R=Jpe(t,Xpe),x=i||{width:a,height:r,x:0,y:0},N=hi("recharts-surface",l);return Ot.createElement("svg",gM({},cn(R,!0,"svg"),{className:N,width:a,height:r,style:c,viewBox:"".concat(x.x," ").concat(x.y," ").concat(x.width," ").concat(x.height)}),Ot.createElement("title",null,n),Ot.createElement("desc",null,v),e)}var eme=["children","className"];function AM(){return AM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},AM.apply(this,arguments)}function tme(t,e){if(t==null)return{};var a=ame(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ame(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var mi=Ot.forwardRef(function(t,e){var a=t.children,r=t.className,i=tme(t,eme),l=hi("recharts-layer",r);return Ot.createElement("g",AM({className:l},cn(i,!0),{ref:e}),a)}),Zp=function(e,a){for(var r=arguments.length,i=new Array(r>2?r-2:0),l=2;l<r;l++)i[l-2]=arguments[l]},GO,d8;function rme(){if(d8)return GO;d8=1;function t(e,a,r){var i=-1,l=e.length;a<0&&(a=-a>l?0:l+a),r=r>l?l:r,r<0&&(r+=l),l=a>r?0:r-a>>>0,a>>>=0;for(var c=Array(l);++i<l;)c[i]=e[i+a];return c}return GO=t,GO}var ZO,h8;function nme(){if(h8)return ZO;h8=1;var t=rme();function e(a,r,i){var l=a.length;return i=i===void 0?l:i,!r&&i>=l?a:t(a,r,i)}return ZO=e,ZO}var qO,f8;function CX(){if(f8)return qO;f8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+a+r,l="\\ufe0e\\ufe0f",c="\\u200d",n=RegExp("["+c+t+i+l+"]");function v(R){return n.test(R)}return qO=v,qO}var HO,p8;function ime(){if(p8)return HO;p8=1;function t(e){return e.split("")}return HO=t,HO}var $O,m8;function sme(){if(m8)return $O;m8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+a+r,l="\\ufe0e\\ufe0f",c="["+t+"]",n="["+i+"]",v="\\ud83c[\\udffb-\\udfff]",R="(?:"+n+"|"+v+")",x="[^"+t+"]",N="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",F="\\u200d",j=R+"?",H="["+l+"]?",q="(?:"+F+"(?:"+[x,N,L].join("|")+")"+H+j+")*",W=H+j+q,ee="(?:"+[x+n+"?",n,N,L,c].join("|")+")",oe=RegExp(v+"(?="+v+")|"+ee+W,"g");function fe(se){return se.match(oe)||[]}return $O=fe,$O}var KO,g8;function ome(){if(g8)return KO;g8=1;var t=ime(),e=CX(),a=sme();function r(i){return e(i)?a(i):t(i)}return KO=r,KO}var WO,y8;function lme(){if(y8)return WO;y8=1;var t=nme(),e=CX(),a=ome(),r=vX();function i(l){return function(c){c=r(c);var n=e(c)?a(c):void 0,v=n?n[0]:c.charAt(0),R=n?t(n,1).join(""):c.slice(1);return v[l]()+R}}return WO=i,WO}var YO,A8;function ume(){if(A8)return YO;A8=1;var t=lme(),e=t("toUpperCase");return YO=e,YO}var cme=ume();const mP=ns(cme);function bo(t){return function(){return t}}const SX=Math.cos,dx=Math.sin,Yp=Math.sqrt,hx=Math.PI,gP=2*hx,vM=Math.PI,_M=2*vM,rv=1e-6,dme=_M-rv;function bX(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}function hme(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bX;const a=10**e;return function(r){this._+=r[0];for(let i=1,l=r.length;i<l;++i)this._+=Math.round(arguments[i]*a)/a+r[i]}}class fme{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bX:hme(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,r,i){this._append`Q${+e},${+a},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,a,r,i,l,c){this._append`C${+e},${+a},${+r},${+i},${this._x1=+l},${this._y1=+c}`}arcTo(e,a,r,i,l){if(e=+e,a=+a,r=+r,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,n=this._y1,v=r-e,R=i-a,x=c-e,N=n-a,L=x*x+N*N;if(this._x1===null)this._append`M${this._x1=e},${this._y1=a}`;else if(L>rv)if(!(Math.abs(N*v-R*x)>rv)||!l)this._append`L${this._x1=e},${this._y1=a}`;else{let F=r-c,j=i-n,H=v*v+R*R,q=F*F+j*j,W=Math.sqrt(H),ee=Math.sqrt(L),oe=l*Math.tan((vM-Math.acos((H+L-q)/(2*W*ee)))/2),fe=oe/ee,se=oe/W;Math.abs(fe-1)>rv&&this._append`L${e+fe*x},${a+fe*N}`,this._append`A${l},${l},0,0,${+(N*F>x*j)},${this._x1=e+se*v},${this._y1=a+se*R}`}}arc(e,a,r,i,l,c){if(e=+e,a=+a,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let n=r*Math.cos(i),v=r*Math.sin(i),R=e+n,x=a+v,N=1^c,L=c?i-l:l-i;this._x1===null?this._append`M${R},${x}`:(Math.abs(this._x1-R)>rv||Math.abs(this._y1-x)>rv)&&this._append`L${R},${x}`,r&&(L<0&&(L=L%_M+_M),L>dme?this._append`A${r},${r},0,1,${N},${e-n},${a-v}A${r},${r},0,1,${N},${this._x1=R},${this._y1=x}`:L>rv&&this._append`A${r},${r},0,${+(L>=vM)},${N},${this._x1=e+r*Math.cos(l)},${this._y1=a+r*Math.sin(l)}`)}rect(e,a,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function UL(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);e=r}return t},()=>new fme(e)}function BL(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xX(t){this._context=t}xX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function yP(t){return new xX(t)}function PX(t){return t[0]}function EX(t){return t[1]}function NX(t,e){var a=bo(!0),r=null,i=yP,l=null,c=UL(n);t=typeof t=="function"?t:t===void 0?PX:bo(t),e=typeof e=="function"?e:e===void 0?EX:bo(e);function n(v){var R,x=(v=BL(v)).length,N,L=!1,F;for(r==null&&(l=i(F=c())),R=0;R<=x;++R)!(R<x&&a(N=v[R],R,v))===L&&((L=!L)?l.lineStart():l.lineEnd()),L&&l.point(+t(N,R,v),+e(N,R,v));if(F)return l=null,F+""||null}return n.x=function(v){return arguments.length?(t=typeof v=="function"?v:bo(+v),n):t},n.y=function(v){return arguments.length?(e=typeof v=="function"?v:bo(+v),n):e},n.defined=function(v){return arguments.length?(a=typeof v=="function"?v:bo(!!v),n):a},n.curve=function(v){return arguments.length?(i=v,r!=null&&(l=i(r)),n):i},n.context=function(v){return arguments.length?(v==null?r=l=null:l=i(r=v),n):r},n}function jS(t,e,a){var r=null,i=bo(!0),l=null,c=yP,n=null,v=UL(R);t=typeof t=="function"?t:t===void 0?PX:bo(+t),e=typeof e=="function"?e:bo(e===void 0?0:+e),a=typeof a=="function"?a:a===void 0?EX:bo(+a);function R(N){var L,F,j,H=(N=BL(N)).length,q,W=!1,ee,oe=new Array(H),fe=new Array(H);for(l==null&&(n=c(ee=v())),L=0;L<=H;++L){if(!(L<H&&i(q=N[L],L,N))===W)if(W=!W)F=L,n.areaStart(),n.lineStart();else{for(n.lineEnd(),n.lineStart(),j=L-1;j>=F;--j)n.point(oe[j],fe[j]);n.lineEnd(),n.areaEnd()}W&&(oe[L]=+t(q,L,N),fe[L]=+e(q,L,N),n.point(r?+r(q,L,N):oe[L],a?+a(q,L,N):fe[L]))}if(ee)return n=null,ee+""||null}function x(){return NX().defined(i).curve(c).context(l)}return R.x=function(N){return arguments.length?(t=typeof N=="function"?N:bo(+N),r=null,R):t},R.x0=function(N){return arguments.length?(t=typeof N=="function"?N:bo(+N),R):t},R.x1=function(N){return arguments.length?(r=N==null?null:typeof N=="function"?N:bo(+N),R):r},R.y=function(N){return arguments.length?(e=typeof N=="function"?N:bo(+N),a=null,R):e},R.y0=function(N){return arguments.length?(e=typeof N=="function"?N:bo(+N),R):e},R.y1=function(N){return arguments.length?(a=N==null?null:typeof N=="function"?N:bo(+N),R):a},R.lineX0=R.lineY0=function(){return x().x(t).y(e)},R.lineY1=function(){return x().x(t).y(a)},R.lineX1=function(){return x().x(r).y(e)},R.defined=function(N){return arguments.length?(i=typeof N=="function"?N:bo(!!N),R):i},R.curve=function(N){return arguments.length?(c=N,l!=null&&(n=c(l)),R):c},R.context=function(N){return arguments.length?(N==null?l=n=null:n=c(l=N),R):l},R}class OX{constructor(e,a){this._context=e,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,a){switch(e=+e,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,a,e,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,e,this._y0,e,a);break}}this._x0=e,this._y0=a}}function pme(t){return new OX(t,!0)}function mme(t){return new OX(t,!1)}const jL={draw(t,e){const a=Yp(e/hx);t.moveTo(a,0),t.arc(0,0,a,0,gP)}},gme={draw(t,e){const a=Yp(e/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},VX=Yp(1/3),yme=VX*2,Ame={draw(t,e){const a=Yp(e/yme),r=a*VX;t.moveTo(0,-a),t.lineTo(r,0),t.lineTo(0,a),t.lineTo(-r,0),t.closePath()}},vme={draw(t,e){const a=Yp(e),r=-a/2;t.rect(r,r,a,a)}},_me=.8908130915292852,zX=dx(hx/10)/dx(7*hx/10),wme=dx(gP/10)*zX,Rme=-SX(gP/10)*zX,Tme={draw(t,e){const a=Yp(e*_me),r=wme*a,i=Rme*a;t.moveTo(0,-a),t.lineTo(r,i);for(let l=1;l<5;++l){const c=gP*l/5,n=SX(c),v=dx(c);t.lineTo(v*a,-n*a),t.lineTo(n*r-v*i,v*r+n*i)}t.closePath()}},XO=Yp(3),Cme={draw(t,e){const a=-Yp(e/(XO*3));t.moveTo(0,a*2),t.lineTo(-XO*a,-a),t.lineTo(XO*a,-a),t.closePath()}},Hf=-.5,$f=Yp(3)/2,wM=1/Yp(12),Sme=(wM/2+1)*3,bme={draw(t,e){const a=Yp(e/Sme),r=a/2,i=a*wM,l=r,c=a*wM+a,n=-l,v=c;t.moveTo(r,i),t.lineTo(l,c),t.lineTo(n,v),t.lineTo(Hf*r-$f*i,$f*r+Hf*i),t.lineTo(Hf*l-$f*c,$f*l+Hf*c),t.lineTo(Hf*n-$f*v,$f*n+Hf*v),t.lineTo(Hf*r+$f*i,Hf*i-$f*r),t.lineTo(Hf*l+$f*c,Hf*c-$f*l),t.lineTo(Hf*n+$f*v,Hf*v-$f*n),t.closePath()}};function xme(t,e){let a=null,r=UL(i);t=typeof t=="function"?t:bo(t||jL),e=typeof e=="function"?e:bo(e===void 0?64:+e);function i(){let l;if(a||(a=l=r()),t.apply(this,arguments).draw(a,+e.apply(this,arguments)),l)return a=null,l+""||null}return i.type=function(l){return arguments.length?(t=typeof l=="function"?l:bo(l),i):t},i.size=function(l){return arguments.length?(e=typeof l=="function"?l:bo(+l),i):e},i.context=function(l){return arguments.length?(a=l??null,i):a},i}function fx(){}function px(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function DX(t){this._context=t}DX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:px(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:px(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Pme(t){return new DX(t)}function MX(t){this._context=t}MX.prototype={areaStart:fx,areaEnd:fx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:px(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Eme(t){return new MX(t)}function IX(t){this._context=t}IX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:px(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Nme(t){return new IX(t)}function LX(t){this._context=t}LX.prototype={areaStart:fx,areaEnd:fx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ome(t){return new LX(t)}function v8(t){return t<0?-1:1}function _8(t,e,a){var r=t._x1-t._x0,i=e-t._x1,l=(t._y1-t._y0)/(r||i<0&&-0),c=(a-t._y1)/(i||r<0&&-0),n=(l*i+c*r)/(r+i);return(v8(l)+v8(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(n))||0}function w8(t,e){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-e)/2:e}function JO(t,e,a){var r=t._x0,i=t._y0,l=t._x1,c=t._y1,n=(l-r)/3;t._context.bezierCurveTo(r+n,i+n*e,l-n,c-n*a,l,c)}function mx(t){this._context=t}mx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:JO(this,this._t0,w8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var a=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,JO(this,w8(this,a=_8(this,t,e)),a);break;default:JO(this,this._t0,a=_8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=a}}};function FX(t){this._context=new kX(t)}(FX.prototype=Object.create(mx.prototype)).point=function(t,e){mx.prototype.point.call(this,e,t)};function kX(t){this._context=t}kX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,a,r,i,l){this._context.bezierCurveTo(e,t,r,a,l,i)}};function Vme(t){return new mx(t)}function zme(t){return new FX(t)}function UX(t){this._context=t}UX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),a===2)this._context.lineTo(t[1],e[1]);else for(var r=R8(t),i=R8(e),l=0,c=1;c<a;++l,++c)this._context.bezierCurveTo(r[0][l],i[0][l],r[1][l],i[1][l],t[c],e[c]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function R8(t){var e,a=t.length-1,r,i=new Array(a),l=new Array(a),c=new Array(a);for(i[0]=0,l[0]=2,c[0]=t[0]+2*t[1],e=1;e<a-1;++e)i[e]=1,l[e]=4,c[e]=4*t[e]+2*t[e+1];for(i[a-1]=2,l[a-1]=7,c[a-1]=8*t[a-1]+t[a],e=1;e<a;++e)r=i[e]/l[e-1],l[e]-=r,c[e]-=r*c[e-1];for(i[a-1]=c[a-1]/l[a-1],e=a-2;e>=0;--e)i[e]=(c[e]-i[e+1])/l[e];for(l[a-1]=(t[a]+i[a-1])/2,e=0;e<a-1;++e)l[e]=2*t[e+1]-i[e+1];return[i,l]}function Dme(t){return new UX(t)}function AP(t,e){this._context=t,this._t=e}AP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,e)}break}}this._x=t,this._y=e}};function Mme(t){return new AP(t,.5)}function Ime(t){return new AP(t,0)}function Lme(t){return new AP(t,1)}function P_(t,e){if((c=t.length)>1)for(var a=1,r,i,l=t[e[0]],c,n=l.length;a<c;++a)for(i=l,l=t[e[a]],r=0;r<n;++r)l[r][1]+=l[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function RM(t){for(var e=t.length,a=new Array(e);--e>=0;)a[e]=e;return a}function Fme(t,e){return t[e]}function kme(t){const e=[];return e.key=t,e}function Ume(){var t=bo([]),e=RM,a=P_,r=Fme;function i(l){var c=Array.from(t.apply(this,arguments),kme),n,v=c.length,R=-1,x;for(const N of l)for(n=0,++R;n<v;++n)(c[n][R]=[0,+r(N,c[n].key,R,l)]).data=N;for(n=0,x=BL(e(c));n<v;++n)c[x[n]].index=n;return a(c,x),c}return i.keys=function(l){return arguments.length?(t=typeof l=="function"?l:bo(Array.from(l)),i):t},i.value=function(l){return arguments.length?(r=typeof l=="function"?l:bo(+l),i):r},i.order=function(l){return arguments.length?(e=l==null?RM:typeof l=="function"?l:bo(Array.from(l)),i):e},i.offset=function(l){return arguments.length?(a=l??P_,i):a},i}function Bme(t,e){if((r=t.length)>0){for(var a,r,i=0,l=t[0].length,c;i<l;++i){for(c=a=0;a<r;++a)c+=t[a][i][1]||0;if(c)for(a=0;a<r;++a)t[a][i][1]/=c}P_(t,e)}}function jme(t,e){if((i=t.length)>0){for(var a=0,r=t[e[0]],i,l=r.length;a<l;++a){for(var c=0,n=0;c<i;++c)n+=t[c][a][1]||0;r[a][1]+=r[a][0]=-n/2}P_(t,e)}}function Gme(t,e){if(!(!((c=t.length)>0)||!((l=(i=t[e[0]]).length)>0))){for(var a=0,r=1,i,l,c;r<l;++r){for(var n=0,v=0,R=0;n<c;++n){for(var x=t[e[n]],N=x[r][1]||0,L=x[r-1][1]||0,F=(N-L)/2,j=0;j<n;++j){var H=t[e[j]],q=H[r][1]||0,W=H[r-1][1]||0;F+=q-W}v+=N,R+=F*N}i[r-1][1]+=i[r-1][0]=a,v&&(a-=R/v)}i[r-1][1]+=i[r-1][0]=a,P_(t,e)}}function XR(t){"@babel/helpers - typeof";return XR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XR(t)}var Zme=["type","size","sizeType"];function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},TM.apply(this,arguments)}function T8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function C8(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(a),!0).forEach(function(r){qme(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function qme(t,e,a){return e=Hme(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Hme(t){var e=$me(t,"string");return XR(e)=="symbol"?e:e+""}function $me(t,e){if(XR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(XR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kme(t,e){if(t==null)return{};var a=Wme(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Wme(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var BX={symbolCircle:jL,symbolCross:gme,symbolDiamond:Ame,symbolSquare:vme,symbolStar:Tme,symbolTriangle:Cme,symbolWye:bme},Yme=Math.PI/180,Xme=function(e){var a="symbol".concat(mP(e));return BX[a]||jL},Jme=function(e,a,r){if(a==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Yme;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Qme=function(e,a){BX["symbol".concat(mP(e))]=a},vP=function(e){var a=e.type,r=a===void 0?"circle":a,i=e.size,l=i===void 0?64:i,c=e.sizeType,n=c===void 0?"area":c,v=Kme(e,Zme),R=C8(C8({},v),{},{type:r,size:l,sizeType:n}),x=function(){var q=Xme(r),W=xme().type(q).size(Jme(l,n,r));return W()},N=R.className,L=R.cx,F=R.cy,j=cn(R,!0);return L===+L&&F===+F&&l===+l?Ot.createElement("path",TM({},j,{className:hi("recharts-symbols",N),transform:"translate(".concat(L,", ").concat(F,")"),d:x()})):null};vP.registerSymbol=Qme;function E_(t){"@babel/helpers - typeof";return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E_(t)}function CM(){return CM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},CM.apply(this,arguments)}function S8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ege(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(a),!0).forEach(function(r){JR(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function tge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function age(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GX(r.key),r)}}function rge(t,e,a){return e&&age(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nge(t,e,a){return e=gx(e),ige(t,jX()?Reflect.construct(e,a||[],gx(t).constructor):e.apply(t,a))}function ige(t,e){if(e&&(E_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sge(t)}function sge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jX=function(){return!!t})()}function gx(t){return gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},gx(t)}function oge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SM(t,e)}function SM(t,e){return SM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SM(t,e)}function JR(t,e,a){return e=GX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function GX(t){var e=lge(t,"string");return E_(e)=="symbol"?e:e+""}function lge(t,e){if(E_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(E_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zp=32,GL=function(t){function e(){return tge(this,e),nge(this,e,arguments)}return oge(e,t),rge(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,l=zp/2,c=zp/6,n=zp/3,v=r.inactive?i:r.color;if(r.type==="plainline")return Ot.createElement("line",{strokeWidth:4,fill:"none",stroke:v,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:l,x2:zp,y2:l,className:"recharts-legend-icon"});if(r.type==="line")return Ot.createElement("path",{strokeWidth:4,fill:"none",stroke:v,d:"M0,".concat(l,"h").concat(n,`
            A`).concat(c,",").concat(c,",0,1,1,").concat(2*n,",").concat(l,`
            H`).concat(zp,"M").concat(2*n,",").concat(l,`
            A`).concat(c,",").concat(c,",0,1,1,").concat(n,",").concat(l),className:"recharts-legend-icon"});if(r.type==="rect")return Ot.createElement("path",{stroke:"none",fill:v,d:"M0,".concat(zp/8,"h").concat(zp,"v").concat(zp*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Ot.isValidElement(r.legendIcon)){var R=ege({},r);return delete R.legendIcon,Ot.cloneElement(r.legendIcon,R)}return Ot.createElement(vP,{fill:v,cx:l,cy:l,size:zp,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,l=i.payload,c=i.iconSize,n=i.layout,v=i.formatter,R=i.inactiveColor,x={x:0,y:0,width:zp,height:zp},N={display:n==="horizontal"?"inline-block":"block",marginRight:10},L={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(F,j){var H=F.formatter||v,q=hi(JR(JR({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",F.inactive));if(F.type==="none")return null;var W=Un(F.value)?null:F.value;Zp(!Un(F.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var ee=F.inactive?R:F.color;return Ot.createElement("li",CM({className:q,style:N,key:"legend-item-".concat(j)},Jy(r.props,F,j)),Ot.createElement(yM,{width:c,height:c,viewBox:x,style:L},r.renderIcon(F)),Ot.createElement("span",{className:"recharts-legend-item-text",style:{color:ee}},H?H(W,F,j):W))})}},{key:"render",value:function(){var r=this.props,i=r.payload,l=r.layout,c=r.align;if(!i||!i.length)return null;var n={padding:0,margin:0,textAlign:l==="horizontal"?c:"left"};return Ot.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}])}(le.PureComponent);JR(GL,"displayName","Legend");JR(GL,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var QO,b8;function uge(){if(b8)return QO;b8=1;var t=hP();function e(){this.__data__=new t,this.size=0}return QO=e,QO}var eV,x8;function cge(){if(x8)return eV;x8=1;function t(e){var a=this.__data__,r=a.delete(e);return this.size=a.size,r}return eV=t,eV}var tV,P8;function dge(){if(P8)return tV;P8=1;function t(e){return this.__data__.get(e)}return tV=t,tV}var aV,E8;function hge(){if(E8)return aV;E8=1;function t(e){return this.__data__.has(e)}return aV=t,aV}var rV,N8;function fge(){if(N8)return rV;N8=1;var t=hP(),e=DL(),a=ML(),r=200;function i(l,c){var n=this.__data__;if(n instanceof t){var v=n.__data__;if(!e||v.length<r-1)return v.push([l,c]),this.size=++n.size,this;n=this.__data__=new a(v)}return n.set(l,c),this.size=n.size,this}return rV=i,rV}var nV,O8;function ZX(){if(O8)return nV;O8=1;var t=hP(),e=uge(),a=cge(),r=dge(),i=hge(),l=fge();function c(n){var v=this.__data__=new t(n);this.size=v.size}return c.prototype.clear=e,c.prototype.delete=a,c.prototype.get=r,c.prototype.has=i,c.prototype.set=l,nV=c,nV}var iV,V8;function pge(){if(V8)return iV;V8=1;var t="__lodash_hash_undefined__";function e(a){return this.__data__.set(a,t),this}return iV=e,iV}var sV,z8;function mge(){if(z8)return sV;z8=1;function t(e){return this.__data__.has(e)}return sV=t,sV}var oV,D8;function qX(){if(D8)return oV;D8=1;var t=ML(),e=pge(),a=mge();function r(i){var l=-1,c=i==null?0:i.length;for(this.__data__=new t;++l<c;)this.add(i[l])}return r.prototype.add=r.prototype.push=e,r.prototype.has=a,oV=r,oV}var lV,M8;function HX(){if(M8)return lV;M8=1;function t(e,a){for(var r=-1,i=e==null?0:e.length;++r<i;)if(a(e[r],r,e))return!0;return!1}return lV=t,lV}var uV,I8;function $X(){if(I8)return uV;I8=1;function t(e,a){return e.has(a)}return uV=t,uV}var cV,L8;function KX(){if(L8)return cV;L8=1;var t=qX(),e=HX(),a=$X(),r=1,i=2;function l(c,n,v,R,x,N){var L=v&r,F=c.length,j=n.length;if(F!=j&&!(L&&j>F))return!1;var H=N.get(c),q=N.get(n);if(H&&q)return H==n&&q==c;var W=-1,ee=!0,oe=v&i?new t:void 0;for(N.set(c,n),N.set(n,c);++W<F;){var fe=c[W],se=n[W];if(R)var me=L?R(se,fe,W,n,c,N):R(fe,se,W,c,n,N);if(me!==void 0){if(me)continue;ee=!1;break}if(oe){if(!e(n,function(ge,Re){if(!a(oe,Re)&&(fe===ge||x(fe,ge,v,R,N)))return oe.push(Re)})){ee=!1;break}}else if(!(fe===se||x(fe,se,v,R,N))){ee=!1;break}}return N.delete(c),N.delete(n),ee}return cV=l,cV}var dV,F8;function gge(){if(F8)return dV;F8=1;var t=Wm(),e=t.Uint8Array;return dV=e,dV}var hV,k8;function yge(){if(k8)return hV;k8=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(i,l){r[++a]=[l,i]}),r}return hV=t,hV}var fV,U8;function ZL(){if(U8)return fV;U8=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(i){r[++a]=i}),r}return fV=t,fV}var pV,B8;function Age(){if(B8)return pV;B8=1;var t=uC(),e=gge(),a=zL(),r=KX(),i=yge(),l=ZL(),c=1,n=2,v="[object Boolean]",R="[object Date]",x="[object Error]",N="[object Map]",L="[object Number]",F="[object RegExp]",j="[object Set]",H="[object String]",q="[object Symbol]",W="[object ArrayBuffer]",ee="[object DataView]",oe=t?t.prototype:void 0,fe=oe?oe.valueOf:void 0;function se(me,ge,Re,we,Ee,ae,_e){switch(Re){case ee:if(me.byteLength!=ge.byteLength||me.byteOffset!=ge.byteOffset)return!1;me=me.buffer,ge=ge.buffer;case W:return!(me.byteLength!=ge.byteLength||!ae(new e(me),new e(ge)));case v:case R:case L:return a(+me,+ge);case x:return me.name==ge.name&&me.message==ge.message;case F:case H:return me==ge+"";case N:var Ie=i;case j:var xe=we&c;if(Ie||(Ie=l),me.size!=ge.size&&!xe)return!1;var ze=_e.get(me);if(ze)return ze==ge;we|=n,_e.set(me,ge);var Me=r(Ie(me),Ie(ge),we,Ee,ae,_e);return _e.delete(me),Me;case q:if(fe)return fe.call(me)==fe.call(ge)}return!1}return pV=se,pV}var mV,j8;function WX(){if(j8)return mV;j8=1;function t(e,a){for(var r=-1,i=a.length,l=e.length;++r<i;)e[l+r]=a[r];return e}return mV=t,mV}var gV,G8;function vge(){if(G8)return gV;G8=1;var t=WX(),e=kh();function a(r,i,l){var c=i(r);return e(r)?c:t(c,l(r))}return gV=a,gV}var yV,Z8;function _ge(){if(Z8)return yV;Z8=1;function t(e,a){for(var r=-1,i=e==null?0:e.length,l=0,c=[];++r<i;){var n=e[r];a(n,r,e)&&(c[l++]=n)}return c}return yV=t,yV}var AV,q8;function wge(){if(q8)return AV;q8=1;function t(){return[]}return AV=t,AV}var vV,H8;function Rge(){if(H8)return vV;H8=1;var t=_ge(),e=wge(),a=Object.prototype,r=a.propertyIsEnumerable,i=Object.getOwnPropertySymbols,l=i?function(c){return c==null?[]:(c=Object(c),t(i(c),function(n){return r.call(c,n)}))}:e;return vV=l,vV}var _V,$8;function Tge(){if($8)return _V;$8=1;function t(e,a){for(var r=-1,i=Array(e);++r<e;)i[r]=a(r);return i}return _V=t,_V}var wV,K8;function Cge(){if(K8)return wV;K8=1;var t=Ug(),e=Bg(),a="[object Arguments]";function r(i){return e(i)&&t(i)==a}return wV=r,wV}var RV,W8;function qL(){if(W8)return RV;W8=1;var t=Cge(),e=Bg(),a=Object.prototype,r=a.hasOwnProperty,i=a.propertyIsEnumerable,l=t(function(){return arguments}())?t:function(c){return e(c)&&r.call(c,"callee")&&!i.call(c,"callee")};return RV=l,RV}var dR={exports:{}},TV,Y8;function Sge(){if(Y8)return TV;Y8=1;function t(){return!1}return TV=t,TV}dR.exports;var X8;function YX(){return X8||(X8=1,function(t,e){var a=Wm(),r=Sge(),i=e&&!e.nodeType&&e,l=i&&!0&&t&&!t.nodeType&&t,c=l&&l.exports===i,n=c?a.Buffer:void 0,v=n?n.isBuffer:void 0,R=v||r;t.exports=R}(dR,dR.exports)),dR.exports}var CV,J8;function HL(){if(J8)return CV;J8=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function a(r,i){var l=typeof r;return i=i??t,!!i&&(l=="number"||l!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return CV=a,CV}var SV,Q8;function $L(){if(Q8)return SV;Q8=1;var t=9007199254740991;function e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return SV=e,SV}var bV,ej;function bge(){if(ej)return bV;ej=1;var t=Ug(),e=$L(),a=Bg(),r="[object Arguments]",i="[object Array]",l="[object Boolean]",c="[object Date]",n="[object Error]",v="[object Function]",R="[object Map]",x="[object Number]",N="[object Object]",L="[object RegExp]",F="[object Set]",j="[object String]",H="[object WeakMap]",q="[object ArrayBuffer]",W="[object DataView]",ee="[object Float32Array]",oe="[object Float64Array]",fe="[object Int8Array]",se="[object Int16Array]",me="[object Int32Array]",ge="[object Uint8Array]",Re="[object Uint8ClampedArray]",we="[object Uint16Array]",Ee="[object Uint32Array]",ae={};ae[ee]=ae[oe]=ae[fe]=ae[se]=ae[me]=ae[ge]=ae[Re]=ae[we]=ae[Ee]=!0,ae[r]=ae[i]=ae[q]=ae[l]=ae[W]=ae[c]=ae[n]=ae[v]=ae[R]=ae[x]=ae[N]=ae[L]=ae[F]=ae[j]=ae[H]=!1;function _e(Ie){return a(Ie)&&e(Ie.length)&&!!ae[t(Ie)]}return bV=_e,bV}var xV,tj;function XX(){if(tj)return xV;tj=1;function t(e){return function(a){return e(a)}}return xV=t,xV}var hR={exports:{}};hR.exports;var aj;function xge(){return aj||(aj=1,function(t,e){var a=gX(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===r,c=l&&a.process,n=function(){try{var v=i&&i.require&&i.require("util").types;return v||c&&c.binding&&c.binding("util")}catch{}}();t.exports=n}(hR,hR.exports)),hR.exports}var PV,rj;function JX(){if(rj)return PV;rj=1;var t=bge(),e=XX(),a=xge(),r=a&&a.isTypedArray,i=r?e(r):t;return PV=i,PV}var EV,nj;function Pge(){if(nj)return EV;nj=1;var t=Tge(),e=qL(),a=kh(),r=YX(),i=HL(),l=JX(),c=Object.prototype,n=c.hasOwnProperty;function v(R,x){var N=a(R),L=!N&&e(R),F=!N&&!L&&r(R),j=!N&&!L&&!F&&l(R),H=N||L||F||j,q=H?t(R.length,String):[],W=q.length;for(var ee in R)(x||n.call(R,ee))&&!(H&&(ee=="length"||F&&(ee=="offset"||ee=="parent")||j&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||i(ee,W)))&&q.push(ee);return q}return EV=v,EV}var NV,ij;function Ege(){if(ij)return NV;ij=1;var t=Object.prototype;function e(a){var r=a&&a.constructor,i=typeof r=="function"&&r.prototype||t;return a===i}return NV=e,NV}var OV,sj;function QX(){if(sj)return OV;sj=1;function t(e,a){return function(r){return e(a(r))}}return OV=t,OV}var VV,oj;function Nge(){if(oj)return VV;oj=1;var t=QX(),e=t(Object.keys,Object);return VV=e,VV}var zV,lj;function Oge(){if(lj)return zV;lj=1;var t=Ege(),e=Nge(),a=Object.prototype,r=a.hasOwnProperty;function i(l){if(!t(l))return e(l);var c=[];for(var n in Object(l))r.call(l,n)&&n!="constructor"&&c.push(n);return c}return zV=i,zV}var DV,uj;function dC(){if(uj)return DV;uj=1;var t=VL(),e=$L();function a(r){return r!=null&&e(r.length)&&!t(r)}return DV=a,DV}var MV,cj;function _P(){if(cj)return MV;cj=1;var t=Pge(),e=Oge(),a=dC();function r(i){return a(i)?t(i):e(i)}return MV=r,MV}var IV,dj;function Vge(){if(dj)return IV;dj=1;var t=vge(),e=Rge(),a=_P();function r(i){return t(i,a,e)}return IV=r,IV}var LV,hj;function zge(){if(hj)return LV;hj=1;var t=Vge(),e=1,a=Object.prototype,r=a.hasOwnProperty;function i(l,c,n,v,R,x){var N=n&e,L=t(l),F=L.length,j=t(c),H=j.length;if(F!=H&&!N)return!1;for(var q=F;q--;){var W=L[q];if(!(N?W in c:r.call(c,W)))return!1}var ee=x.get(l),oe=x.get(c);if(ee&&oe)return ee==c&&oe==l;var fe=!0;x.set(l,c),x.set(c,l);for(var se=N;++q<F;){W=L[q];var me=l[W],ge=c[W];if(v)var Re=N?v(ge,me,W,c,l,x):v(me,ge,W,l,c,x);if(!(Re===void 0?me===ge||R(me,ge,n,v,x):Re)){fe=!1;break}se||(se=W=="constructor")}if(fe&&!se){var we=l.constructor,Ee=c.constructor;we!=Ee&&"constructor"in l&&"constructor"in c&&!(typeof we=="function"&&we instanceof we&&typeof Ee=="function"&&Ee instanceof Ee)&&(fe=!1)}return x.delete(l),x.delete(c),fe}return LV=i,LV}var FV,fj;function Dge(){if(fj)return FV;fj=1;var t=Gv(),e=Wm(),a=t(e,"DataView");return FV=a,FV}var kV,pj;function Mge(){if(pj)return kV;pj=1;var t=Gv(),e=Wm(),a=t(e,"Promise");return kV=a,kV}var UV,mj;function eJ(){if(mj)return UV;mj=1;var t=Gv(),e=Wm(),a=t(e,"Set");return UV=a,UV}var BV,gj;function Ige(){if(gj)return BV;gj=1;var t=Gv(),e=Wm(),a=t(e,"WeakMap");return BV=a,BV}var jV,yj;function Lge(){if(yj)return jV;yj=1;var t=Dge(),e=DL(),a=Mge(),r=eJ(),i=Ige(),l=Ug(),c=yX(),n="[object Map]",v="[object Object]",R="[object Promise]",x="[object Set]",N="[object WeakMap]",L="[object DataView]",F=c(t),j=c(e),H=c(a),q=c(r),W=c(i),ee=l;return(t&&ee(new t(new ArrayBuffer(1)))!=L||e&&ee(new e)!=n||a&&ee(a.resolve())!=R||r&&ee(new r)!=x||i&&ee(new i)!=N)&&(ee=function(oe){var fe=l(oe),se=fe==v?oe.constructor:void 0,me=se?c(se):"";if(me)switch(me){case F:return L;case j:return n;case H:return R;case q:return x;case W:return N}return fe}),jV=ee,jV}var GV,Aj;function Fge(){if(Aj)return GV;Aj=1;var t=ZX(),e=KX(),a=Age(),r=zge(),i=Lge(),l=kh(),c=YX(),n=JX(),v=1,R="[object Arguments]",x="[object Array]",N="[object Object]",L=Object.prototype,F=L.hasOwnProperty;function j(H,q,W,ee,oe,fe){var se=l(H),me=l(q),ge=se?x:i(H),Re=me?x:i(q);ge=ge==R?N:ge,Re=Re==R?N:Re;var we=ge==N,Ee=Re==N,ae=ge==Re;if(ae&&c(H)){if(!c(q))return!1;se=!0,we=!1}if(ae&&!we)return fe||(fe=new t),se||n(H)?e(H,q,W,ee,oe,fe):a(H,q,ge,W,ee,oe,fe);if(!(W&v)){var _e=we&&F.call(H,"__wrapped__"),Ie=Ee&&F.call(q,"__wrapped__");if(_e||Ie){var xe=_e?H.value():H,ze=Ie?q.value():q;return fe||(fe=new t),oe(xe,ze,W,ee,fe)}}return ae?(fe||(fe=new t),r(H,q,W,ee,oe,fe)):!1}return GV=j,GV}var ZV,vj;function KL(){if(vj)return ZV;vj=1;var t=Fge(),e=Bg();function a(r,i,l,c,n){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,l,c,a,n)}return ZV=a,ZV}var qV,_j;function kge(){if(_j)return qV;_j=1;var t=ZX(),e=KL(),a=1,r=2;function i(l,c,n,v){var R=n.length,x=R,N=!v;if(l==null)return!x;for(l=Object(l);R--;){var L=n[R];if(N&&L[2]?L[1]!==l[L[0]]:!(L[0]in l))return!1}for(;++R<x;){L=n[R];var F=L[0],j=l[F],H=L[1];if(N&&L[2]){if(j===void 0&&!(F in l))return!1}else{var q=new t;if(v)var W=v(j,H,F,l,c,q);if(!(W===void 0?e(H,j,a|r,v,q):W))return!1}}return!0}return qV=i,qV}var HV,wj;function tJ(){if(wj)return HV;wj=1;var t=lA();function e(a){return a===a&&!t(a)}return HV=e,HV}var $V,Rj;function Uge(){if(Rj)return $V;Rj=1;var t=tJ(),e=_P();function a(r){for(var i=e(r),l=i.length;l--;){var c=i[l],n=r[c];i[l]=[c,n,t(n)]}return i}return $V=a,$V}var KV,Tj;function aJ(){if(Tj)return KV;Tj=1;function t(e,a){return function(r){return r==null?!1:r[e]===a&&(a!==void 0||e in Object(r))}}return KV=t,KV}var WV,Cj;function Bge(){if(Cj)return WV;Cj=1;var t=kge(),e=Uge(),a=aJ();function r(i){var l=e(i);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(c){return c===i||t(c,i,l)}}return WV=r,WV}var YV,Sj;function jge(){if(Sj)return YV;Sj=1;function t(e,a){return e!=null&&a in Object(e)}return YV=t,YV}var XV,bj;function Gge(){if(bj)return XV;bj=1;var t=_X(),e=qL(),a=kh(),r=HL(),i=$L(),l=pP();function c(n,v,R){v=t(v,n);for(var x=-1,N=v.length,L=!1;++x<N;){var F=l(v[x]);if(!(L=n!=null&&R(n,F)))break;n=n[F]}return L||++x!=N?L:(N=n==null?0:n.length,!!N&&i(N)&&r(F,N)&&(a(n)||e(n)))}return XV=c,XV}var JV,xj;function Zge(){if(xj)return JV;xj=1;var t=jge(),e=Gge();function a(r,i){return r!=null&&e(r,i,t)}return JV=a,JV}var QV,Pj;function qge(){if(Pj)return QV;Pj=1;var t=KL(),e=wX(),a=Zge(),r=OL(),i=tJ(),l=aJ(),c=pP(),n=1,v=2;function R(x,N){return r(x)&&i(N)?l(c(x),N):function(L){var F=e(L,x);return F===void 0&&F===N?a(L,x):t(N,F,n|v)}}return QV=R,QV}var ez,Ej;function _1(){if(Ej)return ez;Ej=1;function t(e){return e}return ez=t,ez}var tz,Nj;function Hge(){if(Nj)return tz;Nj=1;function t(e){return function(a){return a==null?void 0:a[e]}}return tz=t,tz}var az,Oj;function $ge(){if(Oj)return az;Oj=1;var t=LL();function e(a){return function(r){return t(r,a)}}return az=e,az}var rz,Vj;function Kge(){if(Vj)return rz;Vj=1;var t=Hge(),e=$ge(),a=OL(),r=pP();function i(l){return a(l)?t(r(l)):e(l)}return rz=i,rz}var nz,zj;function Ym(){if(zj)return nz;zj=1;var t=Bge(),e=qge(),a=_1(),r=kh(),i=Kge();function l(c){return typeof c=="function"?c:c==null?a:typeof c=="object"?r(c)?e(c[0],c[1]):t(c):i(c)}return nz=l,nz}var iz,Dj;function rJ(){if(Dj)return iz;Dj=1;function t(e,a,r,i){for(var l=e.length,c=r+(i?1:-1);i?c--:++c<l;)if(a(e[c],c,e))return c;return-1}return iz=t,iz}var sz,Mj;function Wge(){if(Mj)return sz;Mj=1;function t(e){return e!==e}return sz=t,sz}var oz,Ij;function Yge(){if(Ij)return oz;Ij=1;function t(e,a,r){for(var i=r-1,l=e.length;++i<l;)if(e[i]===a)return i;return-1}return oz=t,oz}var lz,Lj;function Xge(){if(Lj)return lz;Lj=1;var t=rJ(),e=Wge(),a=Yge();function r(i,l,c){return l===l?a(i,l,c):t(i,e,c)}return lz=r,lz}var uz,Fj;function Jge(){if(Fj)return uz;Fj=1;var t=Xge();function e(a,r){var i=a==null?0:a.length;return!!i&&t(a,r,0)>-1}return uz=e,uz}var cz,kj;function Qge(){if(kj)return cz;kj=1;function t(e,a,r){for(var i=-1,l=e==null?0:e.length;++i<l;)if(r(a,e[i]))return!0;return!1}return cz=t,cz}var dz,Uj;function eye(){if(Uj)return dz;Uj=1;function t(){}return dz=t,dz}var hz,Bj;function tye(){if(Bj)return hz;Bj=1;var t=eJ(),e=eye(),a=ZL(),r=1/0,i=t&&1/a(new t([,-0]))[1]==r?function(l){return new t(l)}:e;return hz=i,hz}var fz,jj;function aye(){if(jj)return fz;jj=1;var t=qX(),e=Jge(),a=Qge(),r=$X(),i=tye(),l=ZL(),c=200;function n(v,R,x){var N=-1,L=e,F=v.length,j=!0,H=[],q=H;if(x)j=!1,L=a;else if(F>=c){var W=R?null:i(v);if(W)return l(W);j=!1,L=r,q=new t}else q=R?[]:H;e:for(;++N<F;){var ee=v[N],oe=R?R(ee):ee;if(ee=x||ee!==0?ee:0,j&&oe===oe){for(var fe=q.length;fe--;)if(q[fe]===oe)continue e;R&&q.push(oe),H.push(ee)}else L(q,oe,x)||(q!==H&&q.push(oe),H.push(ee))}return H}return fz=n,fz}var pz,Gj;function rye(){if(Gj)return pz;Gj=1;var t=Ym(),e=aye();function a(r,i){return r&&r.length?e(r,t(i,2)):[]}return pz=a,pz}var nye=rye();const Zj=ns(nye);function nJ(t,e,a){return e===!0?Zj(t,a):Un(e)?Zj(t,e):t}function N_(t){"@babel/helpers - typeof";return N_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N_(t)}var iye=["ref"];function qj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function gg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?qj(Object(a),!0).forEach(function(r){wP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function sye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sJ(r.key),r)}}function oye(t,e,a){return e&&Hj(t.prototype,e),a&&Hj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function lye(t,e,a){return e=yx(e),uye(t,iJ()?Reflect.construct(e,a||[],yx(t).constructor):e.apply(t,a))}function uye(t,e){if(e&&(N_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cye(t)}function cye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iJ=function(){return!!t})()}function yx(t){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},yx(t)}function dye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bM(t,e)}function bM(t,e){return bM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bM(t,e)}function wP(t,e,a){return e=sJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function sJ(t){var e=hye(t,"string");return N_(e)=="symbol"?e:e+""}function hye(t,e){if(N_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(N_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fye(t,e){if(t==null)return{};var a=pye(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function pye(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function mye(t){return t.value}function gye(t,e){if(Ot.isValidElement(t))return Ot.cloneElement(t,e);if(typeof t=="function")return Ot.createElement(t,e);e.ref;var a=fye(e,iye);return Ot.createElement(GL,a)}var $j=1,hf=function(t){function e(){var a;sye(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=lye(this,e,[].concat(i)),wP(a,"lastBoundingBox",{width:-1,height:-1}),a}return dye(e,t),oye(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>$j||Math.abs(i.height-this.lastBoundingBox.height)>$j)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gg({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,l=i.layout,c=i.align,n=i.verticalAlign,v=i.margin,R=i.chartWidth,x=i.chartHeight,N,L;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(c==="center"&&l==="vertical"){var F=this.getBBoxSnapshot();N={left:((R||0)-F.width)/2}}else N=c==="right"?{right:v&&v.right||0}:{left:v&&v.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(n==="middle"){var j=this.getBBoxSnapshot();L={top:((x||0)-j.height)/2}}else L=n==="bottom"?{bottom:v&&v.bottom||0}:{top:v&&v.top||0};return gg(gg({},N),L)}},{key:"render",value:function(){var r=this,i=this.props,l=i.content,c=i.width,n=i.height,v=i.wrapperStyle,R=i.payloadUniqBy,x=i.payload,N=gg(gg({position:"absolute",width:c||"auto",height:n||"auto"},this.getDefaultPosition(v)),v);return Ot.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:function(F){r.wrapperNode=F}},gye(l,gg(gg({},this.props),{},{payload:nJ(x,R,mye)})))}}],[{key:"getWithHeight",value:function(r,i){var l=gg(gg({},this.defaultProps),r.props),c=l.layout;return c==="vertical"&&Ar(r.props.height)?{height:r.props.height}:c==="horizontal"?{width:r.props.width||i}:null}}])}(le.PureComponent);wP(hf,"displayName","Legend");wP(hf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var mz,Kj;function yye(){if(Kj)return mz;Kj=1;var t=uC(),e=qL(),a=kh(),r=t?t.isConcatSpreadable:void 0;function i(l){return a(l)||e(l)||!!(r&&l&&l[r])}return mz=i,mz}var gz,Wj;function oJ(){if(Wj)return gz;Wj=1;var t=WX(),e=yye();function a(r,i,l,c,n){var v=-1,R=r.length;for(l||(l=e),n||(n=[]);++v<R;){var x=r[v];i>0&&l(x)?i>1?a(x,i-1,l,c,n):t(n,x):c||(n[n.length]=x)}return n}return gz=a,gz}var yz,Yj;function Aye(){if(Yj)return yz;Yj=1;function t(e){return function(a,r,i){for(var l=-1,c=Object(a),n=i(a),v=n.length;v--;){var R=n[e?v:++l];if(r(c[R],R,c)===!1)break}return a}}return yz=t,yz}var Az,Xj;function vye(){if(Xj)return Az;Xj=1;var t=Aye(),e=t();return Az=e,Az}var vz,Jj;function lJ(){if(Jj)return vz;Jj=1;var t=vye(),e=_P();function a(r,i){return r&&t(r,i,e)}return vz=a,vz}var _z,Qj;function _ye(){if(Qj)return _z;Qj=1;var t=dC();function e(a,r){return function(i,l){if(i==null)return i;if(!t(i))return a(i,l);for(var c=i.length,n=r?c:-1,v=Object(i);(r?n--:++n<c)&&l(v[n],n,v)!==!1;);return i}}return _z=e,_z}var wz,eG;function WL(){if(eG)return wz;eG=1;var t=lJ(),e=_ye(),a=e(t);return wz=a,wz}var Rz,tG;function uJ(){if(tG)return Rz;tG=1;var t=WL(),e=dC();function a(r,i){var l=-1,c=e(r)?Array(r.length):[];return t(r,function(n,v,R){c[++l]=i(n,v,R)}),c}return Rz=a,Rz}var Tz,aG;function wye(){if(aG)return Tz;aG=1;function t(e,a){var r=e.length;for(e.sort(a);r--;)e[r]=e[r].value;return e}return Tz=t,Tz}var Cz,rG;function Rye(){if(rG)return Cz;rG=1;var t=y1();function e(a,r){if(a!==r){var i=a!==void 0,l=a===null,c=a===a,n=t(a),v=r!==void 0,R=r===null,x=r===r,N=t(r);if(!R&&!N&&!n&&a>r||n&&v&&x&&!R&&!N||l&&v&&x||!i&&x||!c)return 1;if(!l&&!n&&!N&&a<r||N&&i&&c&&!l&&!n||R&&i&&c||!v&&c||!x)return-1}return 0}return Cz=e,Cz}var Sz,nG;function Tye(){if(nG)return Sz;nG=1;var t=Rye();function e(a,r,i){for(var l=-1,c=a.criteria,n=r.criteria,v=c.length,R=i.length;++l<v;){var x=t(c[l],n[l]);if(x){if(l>=R)return x;var N=i[l];return x*(N=="desc"?-1:1)}}return a.index-r.index}return Sz=e,Sz}var bz,iG;function Cye(){if(iG)return bz;iG=1;var t=IL(),e=LL(),a=Ym(),r=uJ(),i=wye(),l=XX(),c=Tye(),n=_1(),v=kh();function R(x,N,L){N.length?N=t(N,function(H){return v(H)?function(q){return e(q,H.length===1?H[0]:H)}:H}):N=[n];var F=-1;N=t(N,l(a));var j=r(x,function(H,q,W){var ee=t(N,function(oe){return oe(H)});return{criteria:ee,index:++F,value:H}});return i(j,function(H,q){return c(H,q,L)})}return bz=R,bz}var xz,sG;function Sye(){if(sG)return xz;sG=1;function t(e,a,r){switch(r.length){case 0:return e.call(a);case 1:return e.call(a,r[0]);case 2:return e.call(a,r[0],r[1]);case 3:return e.call(a,r[0],r[1],r[2])}return e.apply(a,r)}return xz=t,xz}var Pz,oG;function bye(){if(oG)return Pz;oG=1;var t=Sye(),e=Math.max;function a(r,i,l){return i=e(i===void 0?r.length-1:i,0),function(){for(var c=arguments,n=-1,v=e(c.length-i,0),R=Array(v);++n<v;)R[n]=c[i+n];n=-1;for(var x=Array(i+1);++n<i;)x[n]=c[n];return x[i]=l(R),t(r,this,x)}}return Pz=a,Pz}var Ez,lG;function xye(){if(lG)return Ez;lG=1;function t(e){return function(){return e}}return Ez=t,Ez}var Nz,uG;function cJ(){if(uG)return Nz;uG=1;var t=Gv(),e=function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}}();return Nz=e,Nz}var Oz,cG;function Pye(){if(cG)return Oz;cG=1;var t=xye(),e=cJ(),a=_1(),r=e?function(i,l){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(l),writable:!0})}:a;return Oz=r,Oz}var Vz,dG;function Eye(){if(dG)return Vz;dG=1;var t=800,e=16,a=Date.now;function r(i){var l=0,c=0;return function(){var n=a(),v=e-(n-c);if(c=n,v>0){if(++l>=t)return arguments[0]}else l=0;return i.apply(void 0,arguments)}}return Vz=r,Vz}var zz,hG;function Nye(){if(hG)return zz;hG=1;var t=Pye(),e=Eye(),a=e(t);return zz=a,zz}var Dz,fG;function Oye(){if(fG)return Dz;fG=1;var t=_1(),e=bye(),a=Nye();function r(i,l){return a(e(i,l,t),i+"")}return Dz=r,Dz}var Mz,pG;function RP(){if(pG)return Mz;pG=1;var t=zL(),e=dC(),a=HL(),r=lA();function i(l,c,n){if(!r(n))return!1;var v=typeof c;return(v=="number"?e(n)&&a(c,n.length):v=="string"&&c in n)?t(n[c],l):!1}return Mz=i,Mz}var Iz,mG;function Vye(){if(mG)return Iz;mG=1;var t=oJ(),e=Cye(),a=Oye(),r=RP(),i=a(function(l,c){if(l==null)return[];var n=c.length;return n>1&&r(l,c[0],c[1])?c=[]:n>2&&r(c[0],c[1],c[2])&&(c=[c[0]]),e(l,t(c,1),[])});return Iz=i,Iz}var zye=Vye();const YL=ns(zye);function QR(t){"@babel/helpers - typeof";return QR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QR(t)}function xM(){return xM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xM.apply(this,arguments)}function Dye(t,e){return Fye(t)||Lye(t,e)||Iye(t,e)||Mye()}function Mye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iye(t,e){if(t){if(typeof t=="string")return gG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return gG(t,e)}}function gG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Lye(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function Fye(t){if(Array.isArray(t))return t}function yG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Lz(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(a),!0).forEach(function(r){kye(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function kye(t,e,a){return e=Uye(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Uye(t){var e=Bye(t,"string");return QR(e)=="symbol"?e:e+""}function Bye(t,e){if(QR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(QR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jye(t){return Array.isArray(t)&&Zu(t[0])&&Zu(t[1])?t.join(" ~ "):t}var Gye=function(e){var a=e.separator,r=a===void 0?" : ":a,i=e.contentStyle,l=i===void 0?{}:i,c=e.itemStyle,n=c===void 0?{}:c,v=e.labelStyle,R=v===void 0?{}:v,x=e.payload,N=e.formatter,L=e.itemSorter,F=e.wrapperClassName,j=e.labelClassName,H=e.label,q=e.labelFormatter,W=e.accessibilityLayer,ee=W===void 0?!1:W,oe=function(){if(x&&x.length){var _e={padding:0,margin:0},Ie=(L?YL(x,L):x).map(function(xe,ze){if(xe.type==="none")return null;var Me=Lz({display:"block",paddingTop:4,paddingBottom:4,color:xe.color||"#000"},n),je=xe.formatter||N||jye,Ue=xe.value,Qe=xe.name,ke=Ue,Ge=Qe;if(je&&ke!=null&&Ge!=null){var Se=je(Ue,Qe,xe,ze,x);if(Array.isArray(Se)){var Te=Dye(Se,2);ke=Te[0],Ge=Te[1]}else ke=Se}return Ot.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ze),style:Me},Zu(Ge)?Ot.createElement("span",{className:"recharts-tooltip-item-name"},Ge):null,Zu(Ge)?Ot.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Ot.createElement("span",{className:"recharts-tooltip-item-value"},ke),Ot.createElement("span",{className:"recharts-tooltip-item-unit"},xe.unit||""))});return Ot.createElement("ul",{className:"recharts-tooltip-item-list",style:_e},Ie)}return null},fe=Lz({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),se=Lz({margin:0},R),me=!Bn(H),ge=me?H:"",Re=hi("recharts-default-tooltip",F),we=hi("recharts-tooltip-label",j);me&&q&&x!==void 0&&x!==null&&(ge=q(H,x));var Ee=ee?{role:"status","aria-live":"assertive"}:{};return Ot.createElement("div",xM({className:Re,style:fe},Ee),Ot.createElement("p",{className:we,style:se},Ot.isValidElement(ge)?ge:"".concat(ge)),oe())};function eT(t){"@babel/helpers - typeof";return eT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eT(t)}function GS(t,e,a){return e=Zye(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Zye(t){var e=qye(t,"string");return eT(e)=="symbol"?e:e+""}function qye(t,e){if(eT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(eT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kw="recharts-tooltip-wrapper",Hye={visibility:"hidden"};function $ye(t){var e=t.coordinate,a=t.translateX,r=t.translateY;return hi(kw,GS(GS(GS(GS({},"".concat(kw,"-right"),Ar(a)&&e&&Ar(e.x)&&a>=e.x),"".concat(kw,"-left"),Ar(a)&&e&&Ar(e.x)&&a<e.x),"".concat(kw,"-bottom"),Ar(r)&&e&&Ar(e.y)&&r>=e.y),"".concat(kw,"-top"),Ar(r)&&e&&Ar(e.y)&&r<e.y))}function AG(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.key,i=t.offsetTopLeft,l=t.position,c=t.reverseDirection,n=t.tooltipDimension,v=t.viewBox,R=t.viewBoxDimension;if(l&&Ar(l[r]))return l[r];var x=a[r]-n-i,N=a[r]+i;if(e[r])return c[r]?x:N;if(c[r]){var L=x,F=v[r];return L<F?Math.max(N,v[r]):Math.max(x,v[r])}var j=N+n,H=v[r]+R;return j>H?Math.max(x,v[r]):Math.max(N,v[r])}function Kye(t){var e=t.translateX,a=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(a,"px, 0)"):"translate(".concat(e,"px, ").concat(a,"px)")}}function Wye(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.offsetTopLeft,i=t.position,l=t.reverseDirection,c=t.tooltipBox,n=t.useTranslate3d,v=t.viewBox,R,x,N;return c.height>0&&c.width>0&&a?(x=AG({allowEscapeViewBox:e,coordinate:a,key:"x",offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:c.width,viewBox:v,viewBoxDimension:v.width}),N=AG({allowEscapeViewBox:e,coordinate:a,key:"y",offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:c.height,viewBox:v,viewBoxDimension:v.height}),R=Kye({translateX:x,translateY:N,useTranslate3d:n})):R=Hye,{cssProperties:R,cssClasses:$ye({translateX:x,translateY:N,coordinate:a})}}function O_(t){"@babel/helpers - typeof";return O_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O_(t)}function vG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function _G(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(a),!0).forEach(function(r){EM(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Yye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xye(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hJ(r.key),r)}}function Jye(t,e,a){return e&&Xye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qye(t,e,a){return e=Ax(e),eAe(t,dJ()?Reflect.construct(e,a||[],Ax(t).constructor):e.apply(t,a))}function eAe(t,e){if(e&&(O_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tAe(t)}function tAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dJ=function(){return!!t})()}function Ax(t){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ax(t)}function aAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PM(t,e)}function PM(t,e){return PM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PM(t,e)}function EM(t,e,a){return e=hJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function hJ(t){var e=rAe(t,"string");return O_(e)=="symbol"?e:e+""}function rAe(t,e){if(O_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(O_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wG=1,nAe=function(t){function e(){var a;Yye(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=Qye(this,e,[].concat(i)),EM(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),EM(a,"handleKeyDown",function(c){if(c.key==="Escape"){var n,v,R,x;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(v=a.props.coordinate)===null||v===void 0?void 0:v.x)!==null&&n!==void 0?n:0,y:(R=(x=a.props.coordinate)===null||x===void 0?void 0:x.y)!==null&&R!==void 0?R:0}})}}),a}return aAe(e,t),Jye(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>wG||Math.abs(r.height-this.state.lastBoundingBox.height)>wG)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,l=i.active,c=i.allowEscapeViewBox,n=i.animationDuration,v=i.animationEasing,R=i.children,x=i.coordinate,N=i.hasPayload,L=i.isAnimationActive,F=i.offset,j=i.position,H=i.reverseDirection,q=i.useTranslate3d,W=i.viewBox,ee=i.wrapperStyle,oe=Wye({allowEscapeViewBox:c,coordinate:x,offsetTopLeft:F,position:j,reverseDirection:H,tooltipBox:this.state.lastBoundingBox,useTranslate3d:q,viewBox:W}),fe=oe.cssClasses,se=oe.cssProperties,me=_G(_G({transition:L&&l?"transform ".concat(n,"ms ").concat(v):void 0},se),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&N?"visible":"hidden",position:"absolute",top:0,left:0},ee);return Ot.createElement("div",{tabIndex:-1,className:fe,style:me,ref:function(Re){r.wrapperNode=Re}},R)}}])}(le.PureComponent),iAe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jg={isSsr:iAe()};function V_(t){"@babel/helpers - typeof";return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V_(t)}function RG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function TG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?RG(Object(a),!0).forEach(function(r){XL(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):RG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function sAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oAe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pJ(r.key),r)}}function lAe(t,e,a){return e&&oAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uAe(t,e,a){return e=vx(e),cAe(t,fJ()?Reflect.construct(e,a||[],vx(t).constructor):e.apply(t,a))}function cAe(t,e){if(e&&(V_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dAe(t)}function dAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fJ=function(){return!!t})()}function vx(t){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},vx(t)}function hAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NM(t,e)}function NM(t,e){return NM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NM(t,e)}function XL(t,e,a){return e=pJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pJ(t){var e=fAe(t,"string");return V_(e)=="symbol"?e:e+""}function fAe(t,e){if(V_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(V_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pAe(t){return t.dataKey}function mAe(t,e){return Ot.isValidElement(t)?Ot.cloneElement(t,e):typeof t=="function"?Ot.createElement(t,e):Ot.createElement(Gye,e)}var mu=function(t){function e(){return sAe(this,e),uAe(this,e,arguments)}return hAe(e,t),lAe(e,[{key:"render",value:function(){var r=this,i=this.props,l=i.active,c=i.allowEscapeViewBox,n=i.animationDuration,v=i.animationEasing,R=i.content,x=i.coordinate,N=i.filterNull,L=i.isAnimationActive,F=i.offset,j=i.payload,H=i.payloadUniqBy,q=i.position,W=i.reverseDirection,ee=i.useTranslate3d,oe=i.viewBox,fe=i.wrapperStyle,se=j??[];N&&se.length&&(se=nJ(j.filter(function(ge){return ge.value!=null&&(ge.hide!==!0||r.props.includeHidden)}),H,pAe));var me=se.length>0;return Ot.createElement(nAe,{allowEscapeViewBox:c,animationDuration:n,animationEasing:v,isAnimationActive:L,active:l,coordinate:x,hasPayload:me,offset:F,position:q,reverseDirection:W,useTranslate3d:ee,viewBox:oe,wrapperStyle:fe},mAe(R,TG(TG({},this.props),{},{payload:se})))}}])}(le.PureComponent);XL(mu,"displayName","Tooltip");XL(mu,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jg.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Fz,CG;function gAe(){if(CG)return Fz;CG=1;var t=Wm(),e=function(){return t.Date.now()};return Fz=e,Fz}var kz,SG;function yAe(){if(SG)return kz;SG=1;var t=/\s/;function e(a){for(var r=a.length;r--&&t.test(a.charAt(r)););return r}return kz=e,kz}var Uz,bG;function AAe(){if(bG)return Uz;bG=1;var t=yAe(),e=/^\s+/;function a(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Uz=a,Uz}var Bz,xG;function mJ(){if(xG)return Bz;xG=1;var t=AAe(),e=lA(),a=y1(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,n=parseInt;function v(R){if(typeof R=="number")return R;if(a(R))return r;if(e(R)){var x=typeof R.valueOf=="function"?R.valueOf():R;R=e(x)?x+"":x}if(typeof R!="string")return R===0?R:+R;R=t(R);var N=l.test(R);return N||c.test(R)?n(R.slice(2),N?2:8):i.test(R)?r:+R}return Bz=v,Bz}var jz,PG;function vAe(){if(PG)return jz;PG=1;var t=lA(),e=gAe(),a=mJ(),r="Expected a function",i=Math.max,l=Math.min;function c(n,v,R){var x,N,L,F,j,H,q=0,W=!1,ee=!1,oe=!0;if(typeof n!="function")throw new TypeError(r);v=a(v)||0,t(R)&&(W=!!R.leading,ee="maxWait"in R,L=ee?i(a(R.maxWait)||0,v):L,oe="trailing"in R?!!R.trailing:oe);function fe(Ie){var xe=x,ze=N;return x=N=void 0,q=Ie,F=n.apply(ze,xe),F}function se(Ie){return q=Ie,j=setTimeout(Re,v),W?fe(Ie):F}function me(Ie){var xe=Ie-H,ze=Ie-q,Me=v-xe;return ee?l(Me,L-ze):Me}function ge(Ie){var xe=Ie-H,ze=Ie-q;return H===void 0||xe>=v||xe<0||ee&&ze>=L}function Re(){var Ie=e();if(ge(Ie))return we(Ie);j=setTimeout(Re,me(Ie))}function we(Ie){return j=void 0,oe&&x?fe(Ie):(x=N=void 0,F)}function Ee(){j!==void 0&&clearTimeout(j),q=0,x=H=N=j=void 0}function ae(){return j===void 0?F:we(e())}function _e(){var Ie=e(),xe=ge(Ie);if(x=arguments,N=this,H=Ie,xe){if(j===void 0)return se(H);if(ee)return clearTimeout(j),j=setTimeout(Re,v),fe(H)}return j===void 0&&(j=setTimeout(Re,v)),F}return _e.cancel=Ee,_e.flush=ae,_e}return jz=c,jz}var Gz,EG;function _Ae(){if(EG)return Gz;EG=1;var t=vAe(),e=lA(),a="Expected a function";function r(i,l,c){var n=!0,v=!0;if(typeof i!="function")throw new TypeError(a);return e(c)&&(n="leading"in c?!!c.leading:n,v="trailing"in c?!!c.trailing:v),t(i,l,{leading:n,maxWait:l,trailing:v})}return Gz=r,Gz}var wAe=_Ae();const gJ=ns(wAe);function tT(t){"@babel/helpers - typeof";return tT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tT(t)}function NG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ZS(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?NG(Object(a),!0).forEach(function(r){RAe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):NG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function RAe(t,e,a){return e=TAe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function TAe(t){var e=CAe(t,"string");return tT(e)=="symbol"?e:e+""}function CAe(t,e){if(tT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(tT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SAe(t,e){return EAe(t)||PAe(t,e)||xAe(t,e)||bAe()}function bAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xAe(t,e){if(t){if(typeof t=="string")return OG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return OG(t,e)}}function OG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function PAe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function EAe(t){if(Array.isArray(t))return t}var Fp=le.forwardRef(function(t,e){var a=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,l=t.width,c=l===void 0?"100%":l,n=t.height,v=n===void 0?"100%":n,R=t.minWidth,x=R===void 0?0:R,N=t.minHeight,L=t.maxHeight,F=t.children,j=t.debounce,H=j===void 0?0:j,q=t.id,W=t.className,ee=t.onResize,oe=t.style,fe=oe===void 0?{}:oe,se=le.useRef(null),me=le.useRef();me.current=ee,le.useImperativeHandle(e,function(){return Object.defineProperty(se.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),se.current},configurable:!0})});var ge=le.useState({containerWidth:i.width,containerHeight:i.height}),Re=SAe(ge,2),we=Re[0],Ee=Re[1],ae=le.useCallback(function(Ie,xe){Ee(function(ze){var Me=Math.round(Ie),je=Math.round(xe);return ze.containerWidth===Me&&ze.containerHeight===je?ze:{containerWidth:Me,containerHeight:je}})},[]);le.useEffect(function(){var Ie=function(Qe){var ke,Ge=Qe[0].contentRect,Se=Ge.width,Te=Ge.height;ae(Se,Te),(ke=me.current)===null||ke===void 0||ke.call(me,Se,Te)};H>0&&(Ie=gJ(Ie,H,{trailing:!0,leading:!1}));var xe=new ResizeObserver(Ie),ze=se.current.getBoundingClientRect(),Me=ze.width,je=ze.height;return ae(Me,je),xe.observe(se.current),function(){xe.disconnect()}},[ae,H]);var _e=le.useMemo(function(){var Ie=we.containerWidth,xe=we.containerHeight;if(Ie<0||xe<0)return null;Zp(hv(c)||hv(v),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,c,v),Zp(!a||a>0,"The aspect(%s) must be greater than zero.",a);var ze=hv(c)?Ie:c,Me=hv(v)?xe:v;a&&a>0&&(ze?Me=ze/a:Me&&(ze=Me*a),L&&Me>L&&(Me=L)),Zp(ze>0||Me>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ze,Me,c,v,x,N,a);var je=!Array.isArray(F)&&Pg(F.type).endsWith("Chart");return Ot.Children.map(F,function(Ue){return Ot.isValidElement(Ue)?le.cloneElement(Ue,ZS({width:ze,height:Me},je?{style:ZS({height:"100%",width:"100%",maxHeight:Me,maxWidth:ze},Ue.props.style)}:{})):Ue})},[a,F,v,L,N,x,we,c]);return Ot.createElement("div",{id:q?"".concat(q):void 0,className:hi("recharts-responsive-container",W),style:ZS(ZS({},fe),{},{width:c,height:v,minWidth:x,minHeight:N,maxHeight:L}),ref:se},_e)}),z_=function(e){return null};z_.displayName="Cell";function aT(t){"@babel/helpers - typeof";return aT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aT(t)}function VG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function OM(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(a),!0).forEach(function(r){NAe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):VG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function NAe(t,e,a){return e=OAe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function OAe(t){var e=VAe(t,"string");return aT(e)=="symbol"?e:e+""}function VAe(t,e){if(aT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(aT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I0={widthCache:{},cacheCount:0},zAe=2e3,DAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zG="recharts_measurement_span";function MAe(t){var e=OM({},t);return Object.keys(e).forEach(function(a){e[a]||delete e[a]}),e}var _R=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||jg.isSsr)return{width:0,height:0};var r=MAe(a),i=JSON.stringify({text:e,copyStyle:r});if(I0.widthCache[i])return I0.widthCache[i];try{var l=document.getElementById(zG);l||(l=document.createElement("span"),l.setAttribute("id",zG),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var c=OM(OM({},DAe),r);Object.assign(l.style,c),l.textContent="".concat(e);var n=l.getBoundingClientRect(),v={width:n.width,height:n.height};return I0.widthCache[i]=v,++I0.cacheCount>zAe&&(I0.cacheCount=0,I0.widthCache={}),v}catch{return{width:0,height:0}}},IAe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function rT(t){"@babel/helpers - typeof";return rT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rT(t)}function _x(t,e){return UAe(t)||kAe(t,e)||FAe(t,e)||LAe()}function LAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FAe(t,e){if(t){if(typeof t=="string")return DG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return DG(t,e)}}function DG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function kAe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;v=!1}else for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function UAe(t){if(Array.isArray(t))return t}function BAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MG(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GAe(r.key),r)}}function jAe(t,e,a){return e&&MG(t.prototype,e),a&&MG(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function GAe(t){var e=ZAe(t,"string");return rT(e)=="symbol"?e:e+""}function ZAe(t,e){if(rT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(rT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var IG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,HAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$Ae=Object.keys(yJ),X0="NaN";function KAe(t,e){return t*yJ[e]}var qS=function(){function t(e,a){BAe(this,t),this.num=e,this.unit=a,this.num=e,this.unit=a,Number.isNaN(e)&&(this.unit=""),a!==""&&!qAe.test(a)&&(this.num=NaN,this.unit=""),$Ae.includes(a)&&(this.num=KAe(e,a),this.unit="px")}return jAe(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,i=(r=HAe.exec(a))!==null&&r!==void 0?r:[],l=_x(i,3),c=l[1],n=l[2];return new t(parseFloat(c),n??"")}}])}();function AJ(t){if(t.includes(X0))return X0;for(var e=t;e.includes("*")||e.includes("/");){var a,r=(a=IG.exec(e))!==null&&a!==void 0?a:[],i=_x(r,4),l=i[1],c=i[2],n=i[3],v=qS.parse(l??""),R=qS.parse(n??""),x=c==="*"?v.multiply(R):v.divide(R);if(x.isNaN())return X0;e=e.replace(IG,x.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var N,L=(N=LG.exec(e))!==null&&N!==void 0?N:[],F=_x(L,4),j=F[1],H=F[2],q=F[3],W=qS.parse(j??""),ee=qS.parse(q??""),oe=H==="+"?W.add(ee):W.subtract(ee);if(oe.isNaN())return X0;e=e.replace(LG,oe.toString())}return e}var FG=/\(([^()]*)\)/;function WAe(t){for(var e=t;e.includes("(");){var a=FG.exec(e),r=_x(a,2),i=r[1];e=e.replace(FG,AJ(i))}return e}function YAe(t){var e=t.replace(/\s+/g,"");return e=WAe(e),e=AJ(e),e}function XAe(t){try{return YAe(t)}catch{return X0}}function Zz(t){var e=XAe(t.slice(5,-1));return e===X0?"":e}var JAe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],QAe=["dx","dy","angle","className","breakAll"];function VM(){return VM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},VM.apply(this,arguments)}function kG(t,e){if(t==null)return{};var a=eve(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function eve(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function UG(t,e){return nve(t)||rve(t,e)||ave(t,e)||tve()}function tve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ave(t,e){if(t){if(typeof t=="string")return BG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return BG(t,e)}}function BG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function rve(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;v=!1}else for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function nve(t){if(Array.isArray(t))return t}var vJ=/[ \f\n\r\t\v\u2028\u2029]+/,_J=function(e){var a=e.children,r=e.breakAll,i=e.style;try{var l=[];Bn(a)||(r?l=a.toString().split(""):l=a.toString().split(vJ));var c=l.map(function(v){return{word:v,width:_R(v,i).width}}),n=r?0:_R("",i).width;return{wordsWithComputedWidth:c,spaceWidth:n}}catch{return null}},ive=function(e,a,r,i,l){var c=e.maxLines,n=e.children,v=e.style,R=e.breakAll,x=Ar(c),N=n,L=function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ze.reduce(function(Me,je){var Ue=je.word,Qe=je.width,ke=Me[Me.length-1];if(ke&&(i==null||l||ke.width+Qe+r<Number(i)))ke.words.push(Ue),ke.width+=Qe+r;else{var Ge={words:[Ue],width:Qe};Me.push(Ge)}return Me},[])},F=L(a),j=function(ze){return ze.reduce(function(Me,je){return Me.width>je.width?Me:je})};if(!x)return F;for(var H="",q=function(ze){var Me=N.slice(0,ze),je=_J({breakAll:R,style:v,children:Me+H}).wordsWithComputedWidth,Ue=L(je),Qe=Ue.length>c||j(Ue).width>Number(i);return[Qe,Ue]},W=0,ee=N.length-1,oe=0,fe;W<=ee&&oe<=N.length-1;){var se=Math.floor((W+ee)/2),me=se-1,ge=q(me),Re=UG(ge,2),we=Re[0],Ee=Re[1],ae=q(se),_e=UG(ae,1),Ie=_e[0];if(!we&&!Ie&&(W=se+1),we&&Ie&&(ee=se-1),!we&&Ie){fe=Ee;break}oe++}return fe||F},jG=function(e){var a=Bn(e)?[]:e.toString().split(vJ);return[{words:a}]},sve=function(e){var a=e.width,r=e.scaleToFit,i=e.children,l=e.style,c=e.breakAll,n=e.maxLines;if((a||r)&&!jg.isSsr){var v,R,x=_J({breakAll:c,children:i,style:l});if(x){var N=x.wordsWithComputedWidth,L=x.spaceWidth;v=N,R=L}else return jG(i);return ive({breakAll:c,children:i,maxLines:n,style:l},v,R,a,r)}return jG(i)},GG="#808080",Vv=function(e){var a=e.x,r=a===void 0?0:a,i=e.y,l=i===void 0?0:i,c=e.lineHeight,n=c===void 0?"1em":c,v=e.capHeight,R=v===void 0?"0.71em":v,x=e.scaleToFit,N=x===void 0?!1:x,L=e.textAnchor,F=L===void 0?"start":L,j=e.verticalAnchor,H=j===void 0?"end":j,q=e.fill,W=q===void 0?GG:q,ee=kG(e,JAe),oe=le.useMemo(function(){return sve({breakAll:ee.breakAll,children:ee.children,maxLines:ee.maxLines,scaleToFit:N,style:ee.style,width:ee.width})},[ee.breakAll,ee.children,ee.maxLines,N,ee.style,ee.width]),fe=ee.dx,se=ee.dy,me=ee.angle,ge=ee.className,Re=ee.breakAll,we=kG(ee,QAe);if(!Zu(r)||!Zu(l))return null;var Ee=r+(Ar(fe)?fe:0),ae=l+(Ar(se)?se:0),_e;switch(H){case"start":_e=Zz("calc(".concat(R,")"));break;case"middle":_e=Zz("calc(".concat((oe.length-1)/2," * -").concat(n," + (").concat(R," / 2))"));break;default:_e=Zz("calc(".concat(oe.length-1," * -").concat(n,")"));break}var Ie=[];if(N){var xe=oe[0].width,ze=ee.width;Ie.push("scale(".concat((Ar(ze)?ze/xe:1)/xe,")"))}return me&&Ie.push("rotate(".concat(me,", ").concat(Ee,", ").concat(ae,")")),Ie.length&&(we.transform=Ie.join(" ")),Ot.createElement("text",VM({},cn(we,!0),{x:Ee,y:ae,className:hi("recharts-text",ge),textAnchor:F,fill:W.includes("url")?GG:W}),oe.map(function(Me,je){var Ue=Me.words.join(Re?"":" ");return Ot.createElement("tspan",{x:Ee,dy:je===0?_e:n,key:"".concat(Ue,"-").concat(je)},Ue)}))};function $y(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ove(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JL(t){let e,a,r;t.length!==2?(e=$y,a=(n,v)=>$y(t(n),v),r=(n,v)=>t(n)-v):(e=t===$y||t===ove?t:lve,a=t,r=t);function i(n,v,R=0,x=n.length){if(R<x){if(e(v,v)!==0)return x;do{const N=R+x>>>1;a(n[N],v)<0?R=N+1:x=N}while(R<x)}return R}function l(n,v,R=0,x=n.length){if(R<x){if(e(v,v)!==0)return x;do{const N=R+x>>>1;a(n[N],v)<=0?R=N+1:x=N}while(R<x)}return R}function c(n,v,R=0,x=n.length){const N=i(n,v,R,x-1);return N>R&&r(n[N-1],v)>-r(n[N],v)?N-1:N}return{left:i,center:c,right:l}}function lve(){return 0}function wJ(t){return t===null?NaN:+t}function*uve(t,e){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const cve=JL($y),hC=cve.right;JL(wJ).center;class ZG extends Map{constructor(e,a=fve){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(qG(this,e))}has(e){return super.has(qG(this,e))}set(e,a){return super.set(dve(this,e),a)}delete(e){return super.delete(hve(this,e))}}function qG({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):a}function dve({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):(t.set(r,a),a)}function hve({_intern:t,_key:e},a){const r=e(a);return t.has(r)&&(a=t.get(r),t.delete(r)),a}function fve(t){return t!==null&&typeof t=="object"?t.valueOf():t}function pve(t=$y){if(t===$y)return RJ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function RJ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const mve=Math.sqrt(50),gve=Math.sqrt(10),yve=Math.sqrt(2);function wx(t,e,a){const r=(e-t)/Math.max(0,a),i=Math.floor(Math.log10(r)),l=r/Math.pow(10,i),c=l>=mve?10:l>=gve?5:l>=yve?2:1;let n,v,R;return i<0?(R=Math.pow(10,-i)/c,n=Math.round(t*R),v=Math.round(e*R),n/R<t&&++n,v/R>e&&--v,R=-R):(R=Math.pow(10,i)*c,n=Math.round(t/R),v=Math.round(e/R),n*R<t&&++n,v*R>e&&--v),v<n&&.5<=a&&a<2?wx(t,e,a*2):[n,v,R]}function zM(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const r=e<t,[i,l,c]=r?wx(e,t,a):wx(t,e,a);if(!(l>=i))return[];const n=l-i+1,v=new Array(n);if(r)if(c<0)for(let R=0;R<n;++R)v[R]=(l-R)/-c;else for(let R=0;R<n;++R)v[R]=(l-R)*c;else if(c<0)for(let R=0;R<n;++R)v[R]=(i+R)/-c;else for(let R=0;R<n;++R)v[R]=(i+R)*c;return v}function DM(t,e,a){return e=+e,t=+t,a=+a,wx(t,e,a)[2]}function MM(t,e,a){e=+e,t=+t,a=+a;const r=e<t,i=r?DM(e,t,a):DM(t,e,a);return(r?-1:1)*(i<0?1/-i:i)}function HG(t,e){let a;for(const r of t)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function $G(t,e){let a;for(const r of t)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function TJ(t,e,a=0,r=1/0,i){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(i=i===void 0?RJ:pve(i);r>a;){if(r-a>600){const v=r-a+1,R=e-a+1,x=Math.log(v),N=.5*Math.exp(2*x/3),L=.5*Math.sqrt(x*N*(v-N)/v)*(R-v/2<0?-1:1),F=Math.max(a,Math.floor(e-R*N/v+L)),j=Math.min(r,Math.floor(e+(v-R)*N/v+L));TJ(t,e,F,j,i)}const l=t[e];let c=a,n=r;for(Uw(t,a,e),i(t[r],l)>0&&Uw(t,a,r);c<n;){for(Uw(t,c,n),++c,--n;i(t[c],l)<0;)++c;for(;i(t[n],l)>0;)--n}i(t[a],l)===0?Uw(t,a,n):(++n,Uw(t,n,r)),n<=e&&(a=n+1),e<=n&&(r=n-1)}return t}function Uw(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function Ave(t,e,a){if(t=Float64Array.from(uve(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return $G(t);if(e>=1)return HG(t);var r,i=(r-1)*e,l=Math.floor(i),c=HG(TJ(t,l).subarray(0,l+1)),n=$G(t.subarray(l+1));return c+(n-c)*(i-l)}}function vve(t,e,a=wJ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+a(t[0],0,t);if(e>=1)return+a(t[r-1],r-1,t);var r,i=(r-1)*e,l=Math.floor(i),c=+a(t[l],l,t),n=+a(t[l+1],l+1,t);return c+(n-c)*(i-l)}}function _ve(t,e,a){t=+t,e=+e,a=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+a;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/a))|0,l=new Array(i);++r<i;)l[r]=t+r*a;return l}function ip(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Gg(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const IM=Symbol("implicit");function QL(){var t=new ZG,e=[],a=[],r=IM;function i(l){let c=t.get(l);if(c===void 0){if(r!==IM)return r;t.set(l,c=e.push(l)-1)}return a[c%a.length]}return i.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new ZG;for(const c of l)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(l){return arguments.length?(a=Array.from(l),i):a.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return QL(e,a).unknown(r)},ip.apply(i,arguments),i}function nT(){var t=QL().unknown(void 0),e=t.domain,a=t.range,r=0,i=1,l,c,n=!1,v=0,R=0,x=.5;delete t.unknown;function N(){var L=e().length,F=i<r,j=F?i:r,H=F?r:i;l=(H-j)/Math.max(1,L-v+R*2),n&&(l=Math.floor(l)),j+=(H-j-l*(L-v))*x,c=l*(1-v),n&&(j=Math.round(j),c=Math.round(c));var q=_ve(L).map(function(W){return j+l*W});return a(F?q.reverse():q)}return t.domain=function(L){return arguments.length?(e(L),N()):e()},t.range=function(L){return arguments.length?([r,i]=L,r=+r,i=+i,N()):[r,i]},t.rangeRound=function(L){return[r,i]=L,r=+r,i=+i,n=!0,N()},t.bandwidth=function(){return c},t.step=function(){return l},t.round=function(L){return arguments.length?(n=!!L,N()):n},t.padding=function(L){return arguments.length?(v=Math.min(1,R=+L),N()):v},t.paddingInner=function(L){return arguments.length?(v=Math.min(1,L),N()):v},t.paddingOuter=function(L){return arguments.length?(R=+L,N()):R},t.align=function(L){return arguments.length?(x=Math.max(0,Math.min(1,L)),N()):x},t.copy=function(){return nT(e(),[r,i]).round(n).paddingInner(v).paddingOuter(R).align(x)},ip.apply(N(),arguments)}function CJ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return CJ(e())},t}function wR(){return CJ(nT.apply(null,arguments).paddingInner(1))}function e4(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function SJ(t,e){var a=Object.create(t.prototype);for(var r in e)a[r]=e[r];return a}function fC(){}var iT=.7,Rx=1/iT,h_="\\s*([+-]?\\d+)\\s*",sT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Um="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wve=/^#([0-9a-f]{3,8})$/,Rve=new RegExp(`^rgb\\(${h_},${h_},${h_}\\)$`),Tve=new RegExp(`^rgb\\(${Um},${Um},${Um}\\)$`),Cve=new RegExp(`^rgba\\(${h_},${h_},${h_},${sT}\\)$`),Sve=new RegExp(`^rgba\\(${Um},${Um},${Um},${sT}\\)$`),bve=new RegExp(`^hsl\\(${sT},${Um},${Um}\\)$`),xve=new RegExp(`^hsla\\(${sT},${Um},${Um},${sT}\\)$`),KG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e4(fC,oT,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:WG,formatHex:WG,formatHex8:Pve,formatHsl:Eve,formatRgb:YG,toString:YG});function WG(){return this.rgb().formatHex()}function Pve(){return this.rgb().formatHex8()}function Eve(){return bJ(this).formatHsl()}function YG(){return this.rgb().formatRgb()}function oT(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=wve.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?XG(e):a===3?new Lh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?HS(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?HS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Rve.exec(t))?new Lh(e[1],e[2],e[3],1):(e=Tve.exec(t))?new Lh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Cve.exec(t))?HS(e[1],e[2],e[3],e[4]):(e=Sve.exec(t))?HS(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bve.exec(t))?e7(e[1],e[2]/100,e[3]/100,1):(e=xve.exec(t))?e7(e[1],e[2]/100,e[3]/100,e[4]):KG.hasOwnProperty(t)?XG(KG[t]):t==="transparent"?new Lh(NaN,NaN,NaN,0):null}function XG(t){return new Lh(t>>16&255,t>>8&255,t&255,1)}function HS(t,e,a,r){return r<=0&&(t=e=a=NaN),new Lh(t,e,a,r)}function Nve(t){return t instanceof fC||(t=oT(t)),t?(t=t.rgb(),new Lh(t.r,t.g,t.b,t.opacity)):new Lh}function LM(t,e,a,r){return arguments.length===1?Nve(t):new Lh(t,e,a,r??1)}function Lh(t,e,a,r){this.r=+t,this.g=+e,this.b=+a,this.opacity=+r}e4(Lh,LM,SJ(fC,{brighter(t){return t=t==null?Rx:Math.pow(Rx,t),new Lh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?iT:Math.pow(iT,t),new Lh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lh(_v(this.r),_v(this.g),_v(this.b),Tx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JG,formatHex:JG,formatHex8:Ove,formatRgb:QG,toString:QG}));function JG(){return`#${fv(this.r)}${fv(this.g)}${fv(this.b)}`}function Ove(){return`#${fv(this.r)}${fv(this.g)}${fv(this.b)}${fv((isNaN(this.opacity)?1:this.opacity)*255)}`}function QG(){const t=Tx(this.opacity);return`${t===1?"rgb(":"rgba("}${_v(this.r)}, ${_v(this.g)}, ${_v(this.b)}${t===1?")":`, ${t})`}`}function Tx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _v(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fv(t){return t=_v(t),(t<16?"0":"")+t.toString(16)}function e7(t,e,a,r){return r<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Gp(t,e,a,r)}function bJ(t){if(t instanceof Gp)return new Gp(t.h,t.s,t.l,t.opacity);if(t instanceof fC||(t=oT(t)),!t)return new Gp;if(t instanceof Gp)return t;t=t.rgb();var e=t.r/255,a=t.g/255,r=t.b/255,i=Math.min(e,a,r),l=Math.max(e,a,r),c=NaN,n=l-i,v=(l+i)/2;return n?(e===l?c=(a-r)/n+(a<r)*6:a===l?c=(r-e)/n+2:c=(e-a)/n+4,n/=v<.5?l+i:2-l-i,c*=60):n=v>0&&v<1?0:c,new Gp(c,n,v,t.opacity)}function Vve(t,e,a,r){return arguments.length===1?bJ(t):new Gp(t,e,a,r??1)}function Gp(t,e,a,r){this.h=+t,this.s=+e,this.l=+a,this.opacity=+r}e4(Gp,Vve,SJ(fC,{brighter(t){return t=t==null?Rx:Math.pow(Rx,t),new Gp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?iT:Math.pow(iT,t),new Gp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*e,i=2*a-r;return new Lh(qz(t>=240?t-240:t+120,i,r),qz(t,i,r),qz(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Gp(t7(this.h),$S(this.s),$S(this.l),Tx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tx(this.opacity);return`${t===1?"hsl(":"hsla("}${t7(this.h)}, ${$S(this.s)*100}%, ${$S(this.l)*100}%${t===1?")":`, ${t})`}`}}));function t7(t){return t=(t||0)%360,t<0?t+360:t}function $S(t){return Math.max(0,Math.min(1,t||0))}function qz(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const t4=t=>()=>t;function zve(t,e){return function(a){return t+a*e}}function Dve(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(r){return Math.pow(t+r*e,a)}}function Mve(t){return(t=+t)==1?xJ:function(e,a){return a-e?Dve(e,a,t):t4(isNaN(e)?a:e)}}function xJ(t,e){var a=e-t;return a?zve(t,a):t4(isNaN(t)?e:t)}const a7=function t(e){var a=Mve(e);function r(i,l){var c=a((i=LM(i)).r,(l=LM(l)).r),n=a(i.g,l.g),v=a(i.b,l.b),R=xJ(i.opacity,l.opacity);return function(x){return i.r=c(x),i.g=n(x),i.b=v(x),i.opacity=R(x),i+""}}return r.gamma=t,r}(1);function Ive(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(l){for(i=0;i<a;++i)r[i]=t[i]*(1-l)+e[i]*l;return r}}function Lve(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fve(t,e){var a=e?e.length:0,r=t?Math.min(a,t.length):0,i=new Array(r),l=new Array(a),c;for(c=0;c<r;++c)i[c]=w1(t[c],e[c]);for(;c<a;++c)l[c]=e[c];return function(n){for(c=0;c<r;++c)l[c]=i[c](n);return l}}function kve(t,e){var a=new Date;return t=+t,e=+e,function(r){return a.setTime(t*(1-r)+e*r),a}}function Cx(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function Uve(t,e){var a={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?a[i]=w1(t[i],e[i]):r[i]=e[i];return function(l){for(i in a)r[i]=a[i](l);return r}}var FM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hz=new RegExp(FM.source,"g");function Bve(t){return function(){return t}}function jve(t){return function(e){return t(e)+""}}function Gve(t,e){var a=FM.lastIndex=Hz.lastIndex=0,r,i,l,c=-1,n=[],v=[];for(t=t+"",e=e+"";(r=FM.exec(t))&&(i=Hz.exec(e));)(l=i.index)>a&&(l=e.slice(a,l),n[c]?n[c]+=l:n[++c]=l),(r=r[0])===(i=i[0])?n[c]?n[c]+=i:n[++c]=i:(n[++c]=null,v.push({i:c,x:Cx(r,i)})),a=Hz.lastIndex;return a<e.length&&(l=e.slice(a),n[c]?n[c]+=l:n[++c]=l),n.length<2?v[0]?jve(v[0].x):Bve(e):(e=v.length,function(R){for(var x=0,N;x<e;++x)n[(N=v[x]).i]=N.x(R);return n.join("")})}function w1(t,e){var a=typeof e,r;return e==null||a==="boolean"?t4(e):(a==="number"?Cx:a==="string"?(r=oT(e))?(e=r,a7):Gve:e instanceof oT?a7:e instanceof Date?kve:Lve(e)?Ive:Array.isArray(e)?Fve:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Uve:Cx)(t,e)}function a4(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function Zve(t,e){e===void 0&&(e=t,t=w1);for(var a=0,r=e.length-1,i=e[0],l=new Array(r<0?0:r);a<r;)l[a]=t(i,i=e[++a]);return function(c){var n=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return l[n](c-n)}}function qve(t){return function(){return t}}function Sx(t){return+t}var r7=[0,1];function lh(t){return t}function kM(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:qve(isNaN(e)?NaN:.5)}function Hve(t,e){var a;return t>e&&(a=t,t=e,e=a),function(r){return Math.max(t,Math.min(e,r))}}function $ve(t,e,a){var r=t[0],i=t[1],l=e[0],c=e[1];return i<r?(r=kM(i,r),l=a(c,l)):(r=kM(r,i),l=a(l,c)),function(n){return l(r(n))}}function Kve(t,e,a){var r=Math.min(t.length,e.length)-1,i=new Array(r),l=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=kM(t[c],t[c+1]),l[c]=a(e[c],e[c+1]);return function(n){var v=hC(t,n,1,r)-1;return l[v](i[v](n))}}function pC(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function TP(){var t=r7,e=r7,a=w1,r,i,l,c=lh,n,v,R;function x(){var L=Math.min(t.length,e.length);return c!==lh&&(c=Hve(t[0],t[L-1])),n=L>2?Kve:$ve,v=R=null,N}function N(L){return L==null||isNaN(L=+L)?l:(v||(v=n(t.map(r),e,a)))(r(c(L)))}return N.invert=function(L){return c(i((R||(R=n(e,t.map(r),Cx)))(L)))},N.domain=function(L){return arguments.length?(t=Array.from(L,Sx),x()):t.slice()},N.range=function(L){return arguments.length?(e=Array.from(L),x()):e.slice()},N.rangeRound=function(L){return e=Array.from(L),a=a4,x()},N.clamp=function(L){return arguments.length?(c=L?!0:lh,x()):c!==lh},N.interpolate=function(L){return arguments.length?(a=L,x()):a},N.unknown=function(L){return arguments.length?(l=L,N):l},function(L,F){return r=L,i=F,x()}}function r4(){return TP()(lh,lh)}function Wve(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bx(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,r=t.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+t.slice(a+1)]}function D_(t){return t=bx(Math.abs(t)),t?t[1]:NaN}function Yve(t,e){return function(a,r){for(var i=a.length,l=[],c=0,n=t[0],v=0;i>0&&n>0&&(v+n+1>r&&(n=Math.max(1,r-v)),l.push(a.substring(i-=n,i+n)),!((v+=n+1)>r));)n=t[c=(c+1)%t.length];return l.reverse().join(e)}}function Xve(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var Jve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lT(t){if(!(e=Jve.exec(t)))throw new Error("invalid format: "+t);var e;return new n4({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}lT.prototype=n4.prototype;function n4(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}n4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qve(t){e:for(var e=t.length,a=1,r=-1,i;a<e;++a)switch(t[a]){case".":r=i=a;break;case"0":r===0&&(r=a),i=a;break;default:if(!+t[a])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var PJ;function e0e(t,e){var a=bx(t,e);if(!a)return t+"";var r=a[0],i=a[1],l=i-(PJ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return l===c?r:l>c?r+new Array(l-c+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+bx(t,Math.max(0,e+l-1))[0]}function n7(t,e){var a=bx(t,e);if(!a)return t+"";var r=a[0],i=a[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const i7={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Wve,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>n7(t*100,e),r:n7,s:e0e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function s7(t){return t}var o7=Array.prototype.map,l7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function t0e(t){var e=t.grouping===void 0||t.thousands===void 0?s7:Yve(o7.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?s7:Xve(o7.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",n=t.minus===void 0?"":t.minus+"",v=t.nan===void 0?"NaN":t.nan+"";function R(N){N=lT(N);var L=N.fill,F=N.align,j=N.sign,H=N.symbol,q=N.zero,W=N.width,ee=N.comma,oe=N.precision,fe=N.trim,se=N.type;se==="n"?(ee=!0,se="g"):i7[se]||(oe===void 0&&(oe=12),fe=!0,se="g"),(q||L==="0"&&F==="=")&&(q=!0,L="0",F="=");var me=H==="$"?a:H==="#"&&/[boxX]/.test(se)?"0"+se.toLowerCase():"",ge=H==="$"?r:/[%p]/.test(se)?c:"",Re=i7[se],we=/[defgprs%]/.test(se);oe=oe===void 0?6:/[gprs]/.test(se)?Math.max(1,Math.min(21,oe)):Math.max(0,Math.min(20,oe));function Ee(ae){var _e=me,Ie=ge,xe,ze,Me;if(se==="c")Ie=Re(ae)+Ie,ae="";else{ae=+ae;var je=ae<0||1/ae<0;if(ae=isNaN(ae)?v:Re(Math.abs(ae),oe),fe&&(ae=Qve(ae)),je&&+ae==0&&j!=="+"&&(je=!1),_e=(je?j==="("?j:n:j==="-"||j==="("?"":j)+_e,Ie=(se==="s"?l7[8+PJ/3]:"")+Ie+(je&&j==="("?")":""),we){for(xe=-1,ze=ae.length;++xe<ze;)if(Me=ae.charCodeAt(xe),48>Me||Me>57){Ie=(Me===46?i+ae.slice(xe+1):ae.slice(xe))+Ie,ae=ae.slice(0,xe);break}}}ee&&!q&&(ae=e(ae,1/0));var Ue=_e.length+ae.length+Ie.length,Qe=Ue<W?new Array(W-Ue+1).join(L):"";switch(ee&&q&&(ae=e(Qe+ae,Qe.length?W-Ie.length:1/0),Qe=""),F){case"<":ae=_e+ae+Ie+Qe;break;case"=":ae=_e+Qe+ae+Ie;break;case"^":ae=Qe.slice(0,Ue=Qe.length>>1)+_e+ae+Ie+Qe.slice(Ue);break;default:ae=Qe+_e+ae+Ie;break}return l(ae)}return Ee.toString=function(){return N+""},Ee}function x(N,L){var F=R((N=lT(N),N.type="f",N)),j=Math.max(-8,Math.min(8,Math.floor(D_(L)/3)))*3,H=Math.pow(10,-j),q=l7[8+j/3];return function(W){return F(H*W)+q}}return{format:R,formatPrefix:x}}var KS,i4,EJ;a0e({thousands:",",grouping:[3],currency:["$",""]});function a0e(t){return KS=t0e(t),i4=KS.format,EJ=KS.formatPrefix,KS}function r0e(t){return Math.max(0,-D_(Math.abs(t)))}function n0e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(D_(e)/3)))*3-D_(Math.abs(t)))}function i0e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,D_(e)-D_(t))+1}function NJ(t,e,a,r){var i=MM(t,e,a),l;switch(r=lT(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(l=n0e(i,c))&&(r.precision=l),EJ(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=i0e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=r0e(i))&&(r.precision=l-(r.type==="%")*2);break}}return i4(r)}function cA(t){var e=t.domain;return t.ticks=function(a){var r=e();return zM(r[0],r[r.length-1],a??10)},t.tickFormat=function(a,r){var i=e();return NJ(i[0],i[i.length-1],a??10,r)},t.nice=function(a){a==null&&(a=10);var r=e(),i=0,l=r.length-1,c=r[i],n=r[l],v,R,x=10;for(n<c&&(R=c,c=n,n=R,R=i,i=l,l=R);x-- >0;){if(R=DM(c,n,a),R===v)return r[i]=c,r[l]=n,e(r);if(R>0)c=Math.floor(c/R)*R,n=Math.ceil(n/R)*R;else if(R<0)c=Math.ceil(c*R)/R,n=Math.floor(n*R)/R;else break;v=R}return t},t}function xx(){var t=r4();return t.copy=function(){return pC(t,xx())},ip.apply(t,arguments),cA(t)}function OJ(t){var e;function a(r){return r==null||isNaN(r=+r)?e:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(t=Array.from(r,Sx),a):t.slice()},a.unknown=function(r){return arguments.length?(e=r,a):e},a.copy=function(){return OJ(t).unknown(e)},t=arguments.length?Array.from(t,Sx):[0,1],cA(a)}function VJ(t,e){t=t.slice();var a=0,r=t.length-1,i=t[a],l=t[r],c;return l<i&&(c=a,a=r,r=c,c=i,i=l,l=c),t[a]=e.floor(i),t[r]=e.ceil(l),t}function u7(t){return Math.log(t)}function c7(t){return Math.exp(t)}function s0e(t){return-Math.log(-t)}function o0e(t){return-Math.exp(-t)}function l0e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function u0e(t){return t===10?l0e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function c0e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function d7(t){return(e,a)=>-t(-e,a)}function s4(t){const e=t(u7,c7),a=e.domain;let r=10,i,l;function c(){return i=c0e(r),l=u0e(r),a()[0]<0?(i=d7(i),l=d7(l),t(s0e,o0e)):t(u7,c7),e}return e.base=function(n){return arguments.length?(r=+n,c()):r},e.domain=function(n){return arguments.length?(a(n),c()):a()},e.ticks=n=>{const v=a();let R=v[0],x=v[v.length-1];const N=x<R;N&&([R,x]=[x,R]);let L=i(R),F=i(x),j,H;const q=n==null?10:+n;let W=[];if(!(r%1)&&F-L<q){if(L=Math.floor(L),F=Math.ceil(F),R>0){for(;L<=F;++L)for(j=1;j<r;++j)if(H=L<0?j/l(-L):j*l(L),!(H<R)){if(H>x)break;W.push(H)}}else for(;L<=F;++L)for(j=r-1;j>=1;--j)if(H=L>0?j/l(-L):j*l(L),!(H<R)){if(H>x)break;W.push(H)}W.length*2<q&&(W=zM(R,x,q))}else W=zM(L,F,Math.min(F-L,q)).map(l);return N?W.reverse():W},e.tickFormat=(n,v)=>{if(n==null&&(n=10),v==null&&(v=r===10?"s":","),typeof v!="function"&&(!(r%1)&&(v=lT(v)).precision==null&&(v.trim=!0),v=i4(v)),n===1/0)return v;const R=Math.max(1,r*n/e.ticks().length);return x=>{let N=x/l(Math.round(i(x)));return N*r<r-.5&&(N*=r),N<=R?v(x):""}},e.nice=()=>a(VJ(a(),{floor:n=>l(Math.floor(i(n))),ceil:n=>l(Math.ceil(i(n)))})),e}function zJ(){const t=s4(TP()).domain([1,10]);return t.copy=()=>pC(t,zJ()).base(t.base()),ip.apply(t,arguments),t}function h7(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function f7(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function o4(t){var e=1,a=t(h7(e),f7(e));return a.constant=function(r){return arguments.length?t(h7(e=+r),f7(e)):e},cA(a)}function DJ(){var t=o4(TP());return t.copy=function(){return pC(t,DJ()).constant(t.constant())},ip.apply(t,arguments)}function p7(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function d0e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function h0e(t){return t<0?-t*t:t*t}function l4(t){var e=t(lh,lh),a=1;function r(){return a===1?t(lh,lh):a===.5?t(d0e,h0e):t(p7(a),p7(1/a))}return e.exponent=function(i){return arguments.length?(a=+i,r()):a},cA(e)}function u4(){var t=l4(TP());return t.copy=function(){return pC(t,u4()).exponent(t.exponent())},ip.apply(t,arguments),t}function f0e(){return u4.apply(null,arguments).exponent(.5)}function m7(t){return Math.sign(t)*t*t}function p0e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function MJ(){var t=r4(),e=[0,1],a=!1,r;function i(l){var c=p0e(t(l));return isNaN(c)?r:a?Math.round(c):c}return i.invert=function(l){return t.invert(m7(l))},i.domain=function(l){return arguments.length?(t.domain(l),i):t.domain()},i.range=function(l){return arguments.length?(t.range((e=Array.from(l,Sx)).map(m7)),i):e.slice()},i.rangeRound=function(l){return i.range(l).round(!0)},i.round=function(l){return arguments.length?(a=!!l,i):a},i.clamp=function(l){return arguments.length?(t.clamp(l),i):t.clamp()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return MJ(t.domain(),e).round(a).clamp(t.clamp()).unknown(r)},ip.apply(i,arguments),cA(i)}function IJ(){var t=[],e=[],a=[],r;function i(){var c=0,n=Math.max(1,e.length);for(a=new Array(n-1);++c<n;)a[c-1]=vve(t,c/n);return l}function l(c){return c==null||isNaN(c=+c)?r:e[hC(a,c)]}return l.invertExtent=function(c){var n=e.indexOf(c);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},l.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let n of c)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort($y),i()},l.range=function(c){return arguments.length?(e=Array.from(c),i()):e.slice()},l.unknown=function(c){return arguments.length?(r=c,l):r},l.quantiles=function(){return a.slice()},l.copy=function(){return IJ().domain(t).range(e).unknown(r)},ip.apply(l,arguments)}function LJ(){var t=0,e=1,a=1,r=[.5],i=[0,1],l;function c(v){return v!=null&&v<=v?i[hC(r,v,0,a)]:l}function n(){var v=-1;for(r=new Array(a);++v<a;)r[v]=((v+1)*e-(v-a)*t)/(a+1);return c}return c.domain=function(v){return arguments.length?([t,e]=v,t=+t,e=+e,n()):[t,e]},c.range=function(v){return arguments.length?(a=(i=Array.from(v)).length-1,n()):i.slice()},c.invertExtent=function(v){var R=i.indexOf(v);return R<0?[NaN,NaN]:R<1?[t,r[0]]:R>=a?[r[a-1],e]:[r[R-1],r[R]]},c.unknown=function(v){return arguments.length&&(l=v),c},c.thresholds=function(){return r.slice()},c.copy=function(){return LJ().domain([t,e]).range(i).unknown(l)},ip.apply(cA(c),arguments)}function FJ(){var t=[.5],e=[0,1],a,r=1;function i(l){return l!=null&&l<=l?e[hC(t,l,0,r)]:a}return i.domain=function(l){return arguments.length?(t=Array.from(l),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(l){return arguments.length?(e=Array.from(l),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(l){var c=e.indexOf(l);return[t[c-1],t[c]]},i.unknown=function(l){return arguments.length?(a=l,i):a},i.copy=function(){return FJ().domain(t).range(e).unknown(a)},ip.apply(i,arguments)}const $z=new Date,Kz=new Date;function Hu(t,e,a,r){function i(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return i.floor=l=>(t(l=new Date(+l)),l),i.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),i.round=l=>{const c=i(l),n=i.ceil(l);return l-c<n-l?c:n},i.offset=(l,c)=>(e(l=new Date(+l),c==null?1:Math.floor(c)),l),i.range=(l,c,n)=>{const v=[];if(l=i.ceil(l),n=n==null?1:Math.floor(n),!(l<c)||!(n>0))return v;let R;do v.push(R=new Date(+l)),e(l,n),t(l);while(R<l&&l<c);return v},i.filter=l=>Hu(c=>{if(c>=c)for(;t(c),!l(c);)c.setTime(c-1)},(c,n)=>{if(c>=c)if(n<0)for(;++n<=0;)for(;e(c,-1),!l(c););else for(;--n>=0;)for(;e(c,1),!l(c););}),a&&(i.count=(l,c)=>($z.setTime(+l),Kz.setTime(+c),t($z),t(Kz),Math.floor(a($z,Kz))),i.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?i.filter(r?c=>r(c)%l===0:c=>i.count(0,c)%l===0):i)),i}const Px=Hu(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Px.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Hu(e=>{e.setTime(Math.floor(e/t)*t)},(e,a)=>{e.setTime(+e+a*t)},(e,a)=>(a-e)/t):Px);Px.range;const Tg=1e3,tp=Tg*60,Cg=tp*60,Ig=Cg*24,c4=Ig*7,g7=Ig*30,Wz=Ig*365,pv=Hu(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Tg)},(t,e)=>(e-t)/Tg,t=>t.getUTCSeconds());pv.range;const d4=Hu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Tg)},(t,e)=>{t.setTime(+t+e*tp)},(t,e)=>(e-t)/tp,t=>t.getMinutes());d4.range;const h4=Hu(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*tp)},(t,e)=>(e-t)/tp,t=>t.getUTCMinutes());h4.range;const f4=Hu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Tg-t.getMinutes()*tp)},(t,e)=>{t.setTime(+t+e*Cg)},(t,e)=>(e-t)/Cg,t=>t.getHours());f4.range;const p4=Hu(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Cg)},(t,e)=>(e-t)/Cg,t=>t.getUTCHours());p4.range;const mC=Hu(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*tp)/Ig,t=>t.getDate()-1);mC.range;const CP=Hu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ig,t=>t.getUTCDate()-1);CP.range;const kJ=Hu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ig,t=>Math.floor(t/Ig));kJ.range;function Zv(t){return Hu(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,a)=>{e.setDate(e.getDate()+a*7)},(e,a)=>(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*tp)/c4)}const SP=Zv(0),Ex=Zv(1),m0e=Zv(2),g0e=Zv(3),M_=Zv(4),y0e=Zv(5),A0e=Zv(6);SP.range;Ex.range;m0e.range;g0e.range;M_.range;y0e.range;A0e.range;function qv(t){return Hu(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCDate(e.getUTCDate()+a*7)},(e,a)=>(a-e)/c4)}const bP=qv(0),Nx=qv(1),v0e=qv(2),_0e=qv(3),I_=qv(4),w0e=qv(5),R0e=qv(6);bP.range;Nx.range;v0e.range;_0e.range;I_.range;w0e.range;R0e.range;const m4=Hu(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());m4.range;const g4=Hu(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());g4.range;const Lg=Hu(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Lg.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hu(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,a)=>{e.setFullYear(e.getFullYear()+a*t)});Lg.range;const Fg=Hu(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fg.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hu(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCFullYear(e.getUTCFullYear()+a*t)});Fg.range;function UJ(t,e,a,r,i,l){const c=[[pv,1,Tg],[pv,5,5*Tg],[pv,15,15*Tg],[pv,30,30*Tg],[l,1,tp],[l,5,5*tp],[l,15,15*tp],[l,30,30*tp],[i,1,Cg],[i,3,3*Cg],[i,6,6*Cg],[i,12,12*Cg],[r,1,Ig],[r,2,2*Ig],[a,1,c4],[e,1,g7],[e,3,3*g7],[t,1,Wz]];function n(R,x,N){const L=x<R;L&&([R,x]=[x,R]);const F=N&&typeof N.range=="function"?N:v(R,x,N),j=F?F.range(R,+x+1):[];return L?j.reverse():j}function v(R,x,N){const L=Math.abs(x-R)/N,F=JL(([,,q])=>q).right(c,L);if(F===c.length)return t.every(MM(R/Wz,x/Wz,N));if(F===0)return Px.every(Math.max(MM(R,x,N),1));const[j,H]=c[L/c[F-1][2]<c[F][2]/L?F-1:F];return j.every(H)}return[n,v]}const[T0e,C0e]=UJ(Fg,g4,bP,kJ,p4,h4),[S0e,b0e]=UJ(Lg,m4,SP,mC,f4,d4);function Yz(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Xz(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bw(t,e,a){return{y:t,m:e,d:a,H:0,M:0,S:0,L:0}}function x0e(t){var e=t.dateTime,a=t.date,r=t.time,i=t.periods,l=t.days,c=t.shortDays,n=t.months,v=t.shortMonths,R=jw(i),x=Gw(i),N=jw(l),L=Gw(l),F=jw(c),j=Gw(c),H=jw(n),q=Gw(n),W=jw(v),ee=Gw(v),oe={a:je,A:Ue,b:Qe,B:ke,c:null,d:R7,e:R7,f:Y0e,g:s_e,G:l_e,H:$0e,I:K0e,j:W0e,L:BJ,m:X0e,M:J0e,p:Ge,q:Se,Q:S7,s:b7,S:Q0e,u:e_e,U:t_e,V:a_e,w:r_e,W:n_e,x:null,X:null,y:i_e,Y:o_e,Z:u_e,"%":C7},fe={a:Te,A:qe,b:Ze,B:lt,c:null,d:T7,e:T7,f:f_e,g:T_e,G:S_e,H:c_e,I:d_e,j:h_e,L:GJ,m:p_e,M:m_e,p:st,q:ht,Q:S7,s:b7,S:g_e,u:y_e,U:A_e,V:v_e,w:__e,W:w_e,x:null,X:null,y:R_e,Y:C_e,Z:b_e,"%":C7},se={a:Ee,A:ae,b:_e,B:Ie,c:xe,d:_7,e:_7,f:G0e,g:v7,G:A7,H:w7,I:w7,j:k0e,L:j0e,m:F0e,M:U0e,p:we,q:L0e,Q:q0e,s:H0e,S:B0e,u:V0e,U:z0e,V:D0e,w:O0e,W:M0e,x:ze,X:Me,y:v7,Y:A7,Z:I0e,"%":Z0e};oe.x=me(a,oe),oe.X=me(r,oe),oe.c=me(e,oe),fe.x=me(a,fe),fe.X=me(r,fe),fe.c=me(e,fe);function me(He,Ae){return function(zt){var kt=[],ma=-1,It=0,Ht=He.length,_t,ir,Ea;for(zt instanceof Date||(zt=new Date(+zt));++ma<Ht;)He.charCodeAt(ma)===37&&(kt.push(He.slice(It,ma)),(ir=y7[_t=He.charAt(++ma)])!=null?_t=He.charAt(++ma):ir=_t==="e"?" ":"0",(Ea=Ae[_t])&&(_t=Ea(zt,ir)),kt.push(_t),It=ma+1);return kt.push(He.slice(It,ma)),kt.join("")}}function ge(He,Ae){return function(zt){var kt=Bw(1900,void 0,1),ma=Re(kt,He,zt+="",0),It,Ht;if(ma!=zt.length)return null;if("Q"in kt)return new Date(kt.Q);if("s"in kt)return new Date(kt.s*1e3+("L"in kt?kt.L:0));if(Ae&&!("Z"in kt)&&(kt.Z=0),"p"in kt&&(kt.H=kt.H%12+kt.p*12),kt.m===void 0&&(kt.m="q"in kt?kt.q:0),"V"in kt){if(kt.V<1||kt.V>53)return null;"w"in kt||(kt.w=1),"Z"in kt?(It=Xz(Bw(kt.y,0,1)),Ht=It.getUTCDay(),It=Ht>4||Ht===0?Nx.ceil(It):Nx(It),It=CP.offset(It,(kt.V-1)*7),kt.y=It.getUTCFullYear(),kt.m=It.getUTCMonth(),kt.d=It.getUTCDate()+(kt.w+6)%7):(It=Yz(Bw(kt.y,0,1)),Ht=It.getDay(),It=Ht>4||Ht===0?Ex.ceil(It):Ex(It),It=mC.offset(It,(kt.V-1)*7),kt.y=It.getFullYear(),kt.m=It.getMonth(),kt.d=It.getDate()+(kt.w+6)%7)}else("W"in kt||"U"in kt)&&("w"in kt||(kt.w="u"in kt?kt.u%7:"W"in kt?1:0),Ht="Z"in kt?Xz(Bw(kt.y,0,1)).getUTCDay():Yz(Bw(kt.y,0,1)).getDay(),kt.m=0,kt.d="W"in kt?(kt.w+6)%7+kt.W*7-(Ht+5)%7:kt.w+kt.U*7-(Ht+6)%7);return"Z"in kt?(kt.H+=kt.Z/100|0,kt.M+=kt.Z%100,Xz(kt)):Yz(kt)}}function Re(He,Ae,zt,kt){for(var ma=0,It=Ae.length,Ht=zt.length,_t,ir;ma<It;){if(kt>=Ht)return-1;if(_t=Ae.charCodeAt(ma++),_t===37){if(_t=Ae.charAt(ma++),ir=se[_t in y7?Ae.charAt(ma++):_t],!ir||(kt=ir(He,zt,kt))<0)return-1}else if(_t!=zt.charCodeAt(kt++))return-1}return kt}function we(He,Ae,zt){var kt=R.exec(Ae.slice(zt));return kt?(He.p=x.get(kt[0].toLowerCase()),zt+kt[0].length):-1}function Ee(He,Ae,zt){var kt=F.exec(Ae.slice(zt));return kt?(He.w=j.get(kt[0].toLowerCase()),zt+kt[0].length):-1}function ae(He,Ae,zt){var kt=N.exec(Ae.slice(zt));return kt?(He.w=L.get(kt[0].toLowerCase()),zt+kt[0].length):-1}function _e(He,Ae,zt){var kt=W.exec(Ae.slice(zt));return kt?(He.m=ee.get(kt[0].toLowerCase()),zt+kt[0].length):-1}function Ie(He,Ae,zt){var kt=H.exec(Ae.slice(zt));return kt?(He.m=q.get(kt[0].toLowerCase()),zt+kt[0].length):-1}function xe(He,Ae,zt){return Re(He,e,Ae,zt)}function ze(He,Ae,zt){return Re(He,a,Ae,zt)}function Me(He,Ae,zt){return Re(He,r,Ae,zt)}function je(He){return c[He.getDay()]}function Ue(He){return l[He.getDay()]}function Qe(He){return v[He.getMonth()]}function ke(He){return n[He.getMonth()]}function Ge(He){return i[+(He.getHours()>=12)]}function Se(He){return 1+~~(He.getMonth()/3)}function Te(He){return c[He.getUTCDay()]}function qe(He){return l[He.getUTCDay()]}function Ze(He){return v[He.getUTCMonth()]}function lt(He){return n[He.getUTCMonth()]}function st(He){return i[+(He.getUTCHours()>=12)]}function ht(He){return 1+~~(He.getUTCMonth()/3)}return{format:function(He){var Ae=me(He+="",oe);return Ae.toString=function(){return He},Ae},parse:function(He){var Ae=ge(He+="",!1);return Ae.toString=function(){return He},Ae},utcFormat:function(He){var Ae=me(He+="",fe);return Ae.toString=function(){return He},Ae},utcParse:function(He){var Ae=ge(He+="",!0);return Ae.toString=function(){return He},Ae}}}var y7={"-":"",_:" ",0:"0"},hc=/^\s*\d+/,P0e=/^%/,E0e=/[\\^$*+?|[\]().{}]/g;function ws(t,e,a){var r=t<0?"-":"",i=(r?-t:t)+"",l=i.length;return r+(l<a?new Array(a-l+1).join(e)+i:i)}function N0e(t){return t.replace(E0e,"\\$&")}function jw(t){return new RegExp("^(?:"+t.map(N0e).join("|")+")","i")}function Gw(t){return new Map(t.map((e,a)=>[e.toLowerCase(),a]))}function O0e(t,e,a){var r=hc.exec(e.slice(a,a+1));return r?(t.w=+r[0],a+r[0].length):-1}function V0e(t,e,a){var r=hc.exec(e.slice(a,a+1));return r?(t.u=+r[0],a+r[0].length):-1}function z0e(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.U=+r[0],a+r[0].length):-1}function D0e(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.V=+r[0],a+r[0].length):-1}function M0e(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.W=+r[0],a+r[0].length):-1}function A7(t,e,a){var r=hc.exec(e.slice(a,a+4));return r?(t.y=+r[0],a+r[0].length):-1}function v7(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function I0e(t,e,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(a,a+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function L0e(t,e,a){var r=hc.exec(e.slice(a,a+1));return r?(t.q=r[0]*3-3,a+r[0].length):-1}function F0e(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.m=r[0]-1,a+r[0].length):-1}function _7(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.d=+r[0],a+r[0].length):-1}function k0e(t,e,a){var r=hc.exec(e.slice(a,a+3));return r?(t.m=0,t.d=+r[0],a+r[0].length):-1}function w7(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.H=+r[0],a+r[0].length):-1}function U0e(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.M=+r[0],a+r[0].length):-1}function B0e(t,e,a){var r=hc.exec(e.slice(a,a+2));return r?(t.S=+r[0],a+r[0].length):-1}function j0e(t,e,a){var r=hc.exec(e.slice(a,a+3));return r?(t.L=+r[0],a+r[0].length):-1}function G0e(t,e,a){var r=hc.exec(e.slice(a,a+6));return r?(t.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function Z0e(t,e,a){var r=P0e.exec(e.slice(a,a+1));return r?a+r[0].length:-1}function q0e(t,e,a){var r=hc.exec(e.slice(a));return r?(t.Q=+r[0],a+r[0].length):-1}function H0e(t,e,a){var r=hc.exec(e.slice(a));return r?(t.s=+r[0],a+r[0].length):-1}function R7(t,e){return ws(t.getDate(),e,2)}function $0e(t,e){return ws(t.getHours(),e,2)}function K0e(t,e){return ws(t.getHours()%12||12,e,2)}function W0e(t,e){return ws(1+mC.count(Lg(t),t),e,3)}function BJ(t,e){return ws(t.getMilliseconds(),e,3)}function Y0e(t,e){return BJ(t,e)+"000"}function X0e(t,e){return ws(t.getMonth()+1,e,2)}function J0e(t,e){return ws(t.getMinutes(),e,2)}function Q0e(t,e){return ws(t.getSeconds(),e,2)}function e_e(t){var e=t.getDay();return e===0?7:e}function t_e(t,e){return ws(SP.count(Lg(t)-1,t),e,2)}function jJ(t){var e=t.getDay();return e>=4||e===0?M_(t):M_.ceil(t)}function a_e(t,e){return t=jJ(t),ws(M_.count(Lg(t),t)+(Lg(t).getDay()===4),e,2)}function r_e(t){return t.getDay()}function n_e(t,e){return ws(Ex.count(Lg(t)-1,t),e,2)}function i_e(t,e){return ws(t.getFullYear()%100,e,2)}function s_e(t,e){return t=jJ(t),ws(t.getFullYear()%100,e,2)}function o_e(t,e){return ws(t.getFullYear()%1e4,e,4)}function l_e(t,e){var a=t.getDay();return t=a>=4||a===0?M_(t):M_.ceil(t),ws(t.getFullYear()%1e4,e,4)}function u_e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ws(e/60|0,"0",2)+ws(e%60,"0",2)}function T7(t,e){return ws(t.getUTCDate(),e,2)}function c_e(t,e){return ws(t.getUTCHours(),e,2)}function d_e(t,e){return ws(t.getUTCHours()%12||12,e,2)}function h_e(t,e){return ws(1+CP.count(Fg(t),t),e,3)}function GJ(t,e){return ws(t.getUTCMilliseconds(),e,3)}function f_e(t,e){return GJ(t,e)+"000"}function p_e(t,e){return ws(t.getUTCMonth()+1,e,2)}function m_e(t,e){return ws(t.getUTCMinutes(),e,2)}function g_e(t,e){return ws(t.getUTCSeconds(),e,2)}function y_e(t){var e=t.getUTCDay();return e===0?7:e}function A_e(t,e){return ws(bP.count(Fg(t)-1,t),e,2)}function ZJ(t){var e=t.getUTCDay();return e>=4||e===0?I_(t):I_.ceil(t)}function v_e(t,e){return t=ZJ(t),ws(I_.count(Fg(t),t)+(Fg(t).getUTCDay()===4),e,2)}function __e(t){return t.getUTCDay()}function w_e(t,e){return ws(Nx.count(Fg(t)-1,t),e,2)}function R_e(t,e){return ws(t.getUTCFullYear()%100,e,2)}function T_e(t,e){return t=ZJ(t),ws(t.getUTCFullYear()%100,e,2)}function C_e(t,e){return ws(t.getUTCFullYear()%1e4,e,4)}function S_e(t,e){var a=t.getUTCDay();return t=a>=4||a===0?I_(t):I_.ceil(t),ws(t.getUTCFullYear()%1e4,e,4)}function b_e(){return"+0000"}function C7(){return"%"}function S7(t){return+t}function b7(t){return Math.floor(+t/1e3)}var L0,qJ,HJ;x_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function x_e(t){return L0=x0e(t),qJ=L0.format,L0.parse,HJ=L0.utcFormat,L0.utcParse,L0}function P_e(t){return new Date(t)}function E_e(t){return t instanceof Date?+t:+new Date(+t)}function y4(t,e,a,r,i,l,c,n,v,R){var x=r4(),N=x.invert,L=x.domain,F=R(".%L"),j=R(":%S"),H=R("%I:%M"),q=R("%I %p"),W=R("%a %d"),ee=R("%b %d"),oe=R("%B"),fe=R("%Y");function se(me){return(v(me)<me?F:n(me)<me?j:c(me)<me?H:l(me)<me?q:r(me)<me?i(me)<me?W:ee:a(me)<me?oe:fe)(me)}return x.invert=function(me){return new Date(N(me))},x.domain=function(me){return arguments.length?L(Array.from(me,E_e)):L().map(P_e)},x.ticks=function(me){var ge=L();return t(ge[0],ge[ge.length-1],me??10)},x.tickFormat=function(me,ge){return ge==null?se:R(ge)},x.nice=function(me){var ge=L();return(!me||typeof me.range!="function")&&(me=e(ge[0],ge[ge.length-1],me??10)),me?L(VJ(ge,me)):x},x.copy=function(){return pC(x,y4(t,e,a,r,i,l,c,n,v,R))},x}function N_e(){return ip.apply(y4(S0e,b0e,Lg,m4,SP,mC,f4,d4,pv,qJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function O_e(){return ip.apply(y4(T0e,C0e,Fg,g4,bP,CP,p4,h4,pv,HJ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xP(){var t=0,e=1,a,r,i,l,c=lh,n=!1,v;function R(N){return N==null||isNaN(N=+N)?v:c(i===0?.5:(N=(l(N)-a)*i,n?Math.max(0,Math.min(1,N)):N))}R.domain=function(N){return arguments.length?([t,e]=N,a=l(t=+t),r=l(e=+e),i=a===r?0:1/(r-a),R):[t,e]},R.clamp=function(N){return arguments.length?(n=!!N,R):n},R.interpolator=function(N){return arguments.length?(c=N,R):c};function x(N){return function(L){var F,j;return arguments.length?([F,j]=L,c=N(F,j),R):[c(0),c(1)]}}return R.range=x(w1),R.rangeRound=x(a4),R.unknown=function(N){return arguments.length?(v=N,R):v},function(N){return l=N,a=N(t),r=N(e),i=a===r?0:1/(r-a),R}}function dA(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $J(){var t=cA(xP()(lh));return t.copy=function(){return dA(t,$J())},Gg.apply(t,arguments)}function KJ(){var t=s4(xP()).domain([1,10]);return t.copy=function(){return dA(t,KJ()).base(t.base())},Gg.apply(t,arguments)}function WJ(){var t=o4(xP());return t.copy=function(){return dA(t,WJ()).constant(t.constant())},Gg.apply(t,arguments)}function A4(){var t=l4(xP());return t.copy=function(){return dA(t,A4()).exponent(t.exponent())},Gg.apply(t,arguments)}function V_e(){return A4.apply(null,arguments).exponent(.5)}function YJ(){var t=[],e=lh;function a(r){if(r!=null&&!isNaN(r=+r))return e((hC(t,r,1)-1)/(t.length-1))}return a.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort($y),a},a.interpolator=function(r){return arguments.length?(e=r,a):e},a.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(i,l)=>Ave(t,l/r))},a.copy=function(){return YJ(e).domain(t)},Gg.apply(a,arguments)}function PP(){var t=0,e=.5,a=1,r=1,i,l,c,n,v,R=lh,x,N=!1,L;function F(H){return isNaN(H=+H)?L:(H=.5+((H=+x(H))-l)*(r*H<r*l?n:v),R(N?Math.max(0,Math.min(1,H)):H))}F.domain=function(H){return arguments.length?([t,e,a]=H,i=x(t=+t),l=x(e=+e),c=x(a=+a),n=i===l?0:.5/(l-i),v=l===c?0:.5/(c-l),r=l<i?-1:1,F):[t,e,a]},F.clamp=function(H){return arguments.length?(N=!!H,F):N},F.interpolator=function(H){return arguments.length?(R=H,F):R};function j(H){return function(q){var W,ee,oe;return arguments.length?([W,ee,oe]=q,R=Zve(H,[W,ee,oe]),F):[R(0),R(.5),R(1)]}}return F.range=j(w1),F.rangeRound=j(a4),F.unknown=function(H){return arguments.length?(L=H,F):L},function(H){return x=H,i=H(t),l=H(e),c=H(a),n=i===l?0:.5/(l-i),v=l===c?0:.5/(c-l),r=l<i?-1:1,F}}function XJ(){var t=cA(PP()(lh));return t.copy=function(){return dA(t,XJ())},Gg.apply(t,arguments)}function JJ(){var t=s4(PP()).domain([.1,1,10]);return t.copy=function(){return dA(t,JJ()).base(t.base())},Gg.apply(t,arguments)}function QJ(){var t=o4(PP());return t.copy=function(){return dA(t,QJ()).constant(t.constant())},Gg.apply(t,arguments)}function v4(){var t=l4(PP());return t.copy=function(){return dA(t,v4()).exponent(t.exponent())},Gg.apply(t,arguments)}function z_e(){return v4.apply(null,arguments).exponent(.5)}const x7=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nT,scaleDiverging:XJ,scaleDivergingLog:JJ,scaleDivergingPow:v4,scaleDivergingSqrt:z_e,scaleDivergingSymlog:QJ,scaleIdentity:OJ,scaleImplicit:IM,scaleLinear:xx,scaleLog:zJ,scaleOrdinal:QL,scalePoint:wR,scalePow:u4,scaleQuantile:IJ,scaleQuantize:LJ,scaleRadial:MJ,scaleSequential:$J,scaleSequentialLog:KJ,scaleSequentialPow:A4,scaleSequentialQuantile:YJ,scaleSequentialSqrt:V_e,scaleSequentialSymlog:WJ,scaleSqrt:f0e,scaleSymlog:DJ,scaleThreshold:FJ,scaleTime:N_e,scaleUtc:O_e,tickFormat:NJ},Symbol.toStringTag,{value:"Module"}));var Jz,P7;function EP(){if(P7)return Jz;P7=1;var t=y1();function e(a,r,i){for(var l=-1,c=a.length;++l<c;){var n=a[l],v=r(n);if(v!=null&&(R===void 0?v===v&&!t(v):i(v,R)))var R=v,x=n}return x}return Jz=e,Jz}var Qz,E7;function eQ(){if(E7)return Qz;E7=1;function t(e,a){return e>a}return Qz=t,Qz}var e5,N7;function D_e(){if(N7)return e5;N7=1;var t=EP(),e=eQ(),a=_1();function r(i){return i&&i.length?t(i,a,e):void 0}return e5=r,e5}var M_e=D_e();const ky=ns(M_e);var t5,O7;function tQ(){if(O7)return t5;O7=1;function t(e,a){return e<a}return t5=t,t5}var a5,V7;function I_e(){if(V7)return a5;V7=1;var t=EP(),e=tQ(),a=_1();function r(i){return i&&i.length?t(i,a,e):void 0}return a5=r,a5}var L_e=I_e();const NP=ns(L_e);var r5,z7;function F_e(){if(z7)return r5;z7=1;var t=IL(),e=Ym(),a=uJ(),r=kh();function i(l,c){var n=r(l)?t:a;return n(l,e(c,3))}return r5=i,r5}var n5,D7;function k_e(){if(D7)return n5;D7=1;var t=oJ(),e=F_e();function a(r,i){return t(e(r,i),1)}return n5=a,n5}var U_e=k_e();const B_e=ns(U_e);var i5,M7;function j_e(){if(M7)return i5;M7=1;var t=KL();function e(a,r){return t(a,r)}return i5=e,i5}var G_e=j_e();const Qy=ns(G_e);var R1=1e9,Z_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},w4,Qo=!0,rp="[DecimalError] ",wv=rp+"Invalid argument: ",_4=rp+"Exponent out of range: ",T1=Math.floor,nv=Math.pow,q_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pf,oc=1e7,Do=7,aQ=9007199254740991,Ox=T1(aQ/Do),Xr={};Xr.absoluteValue=Xr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Xr.comparedTo=Xr.cmp=function(t){var e,a,r,i,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(r=l.d.length,i=t.d.length,e=0,a=r<i?r:i;e<a;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return r===i?0:r>i^l.s<0?1:-1};Xr.decimalPlaces=Xr.dp=function(){var t=this,e=t.d.length-1,a=(e-t.e)*Do;if(e=t.d[e],e)for(;e%10==0;e/=10)a--;return a<0?0:a};Xr.dividedBy=Xr.div=function(t){return Eg(this,new this.constructor(t))};Xr.dividedToIntegerBy=Xr.idiv=function(t){var e=this,a=e.constructor;return fo(Eg(e,new a(t),0,1),a.precision)};Xr.equals=Xr.eq=function(t){return!this.cmp(t)};Xr.exponent=function(){return yu(this)};Xr.greaterThan=Xr.gt=function(t){return this.cmp(t)>0};Xr.greaterThanOrEqualTo=Xr.gte=function(t){return this.cmp(t)>=0};Xr.isInteger=Xr.isint=function(){return this.e>this.d.length-2};Xr.isNegative=Xr.isneg=function(){return this.s<0};Xr.isPositive=Xr.ispos=function(){return this.s>0};Xr.isZero=function(){return this.s===0};Xr.lessThan=Xr.lt=function(t){return this.cmp(t)<0};Xr.lessThanOrEqualTo=Xr.lte=function(t){return this.cmp(t)<1};Xr.logarithm=Xr.log=function(t){var e,a=this,r=a.constructor,i=r.precision,l=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(pf))throw Error(rp+"NaN");if(a.s<1)throw Error(rp+(a.s?"NaN":"-Infinity"));return a.eq(pf)?new r(0):(Qo=!1,e=Eg(uT(a,l),uT(t,l),l),Qo=!0,fo(e,i))};Xr.minus=Xr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?iQ(e,t):rQ(e,(t.s=-t.s,t))};Xr.modulo=Xr.mod=function(t){var e,a=this,r=a.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(rp+"NaN");return a.s?(Qo=!1,e=Eg(a,t,0,1).times(t),Qo=!0,a.minus(e)):fo(new r(a),i)};Xr.naturalExponential=Xr.exp=function(){return nQ(this)};Xr.naturalLogarithm=Xr.ln=function(){return uT(this)};Xr.negated=Xr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Xr.plus=Xr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rQ(e,t):iQ(e,(t.s=-t.s,t))};Xr.precision=Xr.sd=function(t){var e,a,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(wv+t);if(e=yu(i)+1,r=i.d.length-1,a=r*Do+1,r=i.d[r],r){for(;r%10==0;r/=10)a--;for(r=i.d[0];r>=10;r/=10)a++}return t&&e>a?e:a};Xr.squareRoot=Xr.sqrt=function(){var t,e,a,r,i,l,c,n=this,v=n.constructor;if(n.s<1){if(!n.s)return new v(0);throw Error(rp+"NaN")}for(t=yu(n),Qo=!1,i=Math.sqrt(+n),i==0||i==1/0?(e=Vm(n.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=T1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new v(e)):r=new v(i.toString()),a=v.precision,i=c=a+3;;)if(l=r,r=l.plus(Eg(n,l,c+2)).times(.5),Vm(l.d).slice(0,c)===(e=Vm(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),i==c&&e=="4999"){if(fo(l,a+1,0),l.times(l).eq(n)){r=l;break}}else if(e!="9999")break;c+=4}return Qo=!0,fo(r,a)};Xr.times=Xr.mul=function(t){var e,a,r,i,l,c,n,v,R,x=this,N=x.constructor,L=x.d,F=(t=new N(t)).d;if(!x.s||!t.s)return new N(0);for(t.s*=x.s,a=x.e+t.e,v=L.length,R=F.length,v<R&&(l=L,L=F,F=l,c=v,v=R,R=c),l=[],c=v+R,r=c;r--;)l.push(0);for(r=R;--r>=0;){for(e=0,i=v+r;i>r;)n=l[i]+F[r]*L[i-r-1]+e,l[i--]=n%oc|0,e=n/oc|0;l[i]=(l[i]+e)%oc|0}for(;!l[--c];)l.pop();return e?++a:l.shift(),t.d=l,t.e=a,Qo?fo(t,N.precision):t};Xr.toDecimalPlaces=Xr.todp=function(t,e){var a=this,r=a.constructor;return a=new r(a),t===void 0?a:(Hm(t,0,R1),e===void 0?e=r.rounding:Hm(e,0,8),fo(a,t+yu(a)+1,e))};Xr.toExponential=function(t,e){var a,r=this,i=r.constructor;return t===void 0?a=zv(r,!0):(Hm(t,0,R1),e===void 0?e=i.rounding:Hm(e,0,8),r=fo(new i(r),t+1,e),a=zv(r,!0,t+1)),a};Xr.toFixed=function(t,e){var a,r,i=this,l=i.constructor;return t===void 0?zv(i):(Hm(t,0,R1),e===void 0?e=l.rounding:Hm(e,0,8),r=fo(new l(i),t+yu(i)+1,e),a=zv(r.abs(),!1,t+yu(r)+1),i.isneg()&&!i.isZero()?"-"+a:a)};Xr.toInteger=Xr.toint=function(){var t=this,e=t.constructor;return fo(new e(t),yu(t)+1,e.rounding)};Xr.toNumber=function(){return+this};Xr.toPower=Xr.pow=function(t){var e,a,r,i,l,c,n=this,v=n.constructor,R=12,x=+(t=new v(t));if(!t.s)return new v(pf);if(n=new v(n),!n.s){if(t.s<1)throw Error(rp+"Infinity");return n}if(n.eq(pf))return n;if(r=v.precision,t.eq(pf))return fo(n,r);if(e=t.e,a=t.d.length-1,c=e>=a,l=n.s,c){if((a=x<0?-x:x)<=aQ){for(i=new v(pf),e=Math.ceil(r/Do+4),Qo=!1;a%2&&(i=i.times(n),L7(i.d,e)),a=T1(a/2),a!==0;)n=n.times(n),L7(n.d,e);return Qo=!0,t.s<0?new v(pf).div(i):fo(i,r)}}else if(l<0)throw Error(rp+"NaN");return l=l<0&&t.d[Math.max(e,a)]&1?-1:1,n.s=1,Qo=!1,i=t.times(uT(n,r+R)),Qo=!0,i=nQ(i),i.s=l,i};Xr.toPrecision=function(t,e){var a,r,i=this,l=i.constructor;return t===void 0?(a=yu(i),r=zv(i,a<=l.toExpNeg||a>=l.toExpPos)):(Hm(t,1,R1),e===void 0?e=l.rounding:Hm(e,0,8),i=fo(new l(i),t,e),a=yu(i),r=zv(i,t<=a||a<=l.toExpNeg,t)),r};Xr.toSignificantDigits=Xr.tosd=function(t,e){var a=this,r=a.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Hm(t,1,R1),e===void 0?e=r.rounding:Hm(e,0,8)),fo(new r(a),t,e)};Xr.toString=Xr.valueOf=Xr.val=Xr.toJSON=Xr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=yu(t),a=t.constructor;return zv(t,e<=a.toExpNeg||e>=a.toExpPos)};function rQ(t,e){var a,r,i,l,c,n,v,R,x=t.constructor,N=x.precision;if(!t.s||!e.s)return e.s||(e=new x(t)),Qo?fo(e,N):e;if(v=t.d,R=e.d,c=t.e,i=e.e,v=v.slice(),l=c-i,l){for(l<0?(r=v,l=-l,n=R.length):(r=R,i=c,n=v.length),c=Math.ceil(N/Do),n=c>n?c+1:n+1,l>n&&(l=n,r.length=1),r.reverse();l--;)r.push(0);r.reverse()}for(n=v.length,l=R.length,n-l<0&&(l=n,r=R,R=v,v=r),a=0;l;)a=(v[--l]=v[l]+R[l]+a)/oc|0,v[l]%=oc;for(a&&(v.unshift(a),++i),n=v.length;v[--n]==0;)v.pop();return e.d=v,e.e=i,Qo?fo(e,N):e}function Hm(t,e,a){if(t!==~~t||t<e||t>a)throw Error(wv+t)}function Vm(t){var e,a,r,i=t.length-1,l="",c=t[0];if(i>0){for(l+=c,e=1;e<i;e++)r=t[e]+"",a=Do-r.length,a&&(l+=Ny(a)),l+=r;c=t[e],r=c+"",a=Do-r.length,a&&(l+=Ny(a))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}var Eg=function(){function t(r,i){var l,c=0,n=r.length;for(r=r.slice();n--;)l=r[n]*i+c,r[n]=l%oc|0,c=l/oc|0;return c&&r.unshift(c),r}function e(r,i,l,c){var n,v;if(l!=c)v=l>c?1:-1;else for(n=v=0;n<l;n++)if(r[n]!=i[n]){v=r[n]>i[n]?1:-1;break}return v}function a(r,i,l){for(var c=0;l--;)r[l]-=c,c=r[l]<i[l]?1:0,r[l]=c*oc+r[l]-i[l];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,l,c){var n,v,R,x,N,L,F,j,H,q,W,ee,oe,fe,se,me,ge,Re,we=r.constructor,Ee=r.s==i.s?1:-1,ae=r.d,_e=i.d;if(!r.s)return new we(r);if(!i.s)throw Error(rp+"Division by zero");for(v=r.e-i.e,ge=_e.length,se=ae.length,F=new we(Ee),j=F.d=[],R=0;_e[R]==(ae[R]||0);)++R;if(_e[R]>(ae[R]||0)&&--v,l==null?ee=l=we.precision:c?ee=l+(yu(r)-yu(i))+1:ee=l,ee<0)return new we(0);if(ee=ee/Do+2|0,R=0,ge==1)for(x=0,_e=_e[0],ee++;(R<se||x)&&ee--;R++)oe=x*oc+(ae[R]||0),j[R]=oe/_e|0,x=oe%_e|0;else{for(x=oc/(_e[0]+1)|0,x>1&&(_e=t(_e,x),ae=t(ae,x),ge=_e.length,se=ae.length),fe=ge,H=ae.slice(0,ge),q=H.length;q<ge;)H[q++]=0;Re=_e.slice(),Re.unshift(0),me=_e[0],_e[1]>=oc/2&&++me;do x=0,n=e(_e,H,ge,q),n<0?(W=H[0],ge!=q&&(W=W*oc+(H[1]||0)),x=W/me|0,x>1?(x>=oc&&(x=oc-1),N=t(_e,x),L=N.length,q=H.length,n=e(N,H,L,q),n==1&&(x--,a(N,ge<L?Re:_e,L))):(x==0&&(n=x=1),N=_e.slice()),L=N.length,L<q&&N.unshift(0),a(H,N,q),n==-1&&(q=H.length,n=e(_e,H,ge,q),n<1&&(x++,a(H,ge<q?Re:_e,q))),q=H.length):n===0&&(x++,H=[0]),j[R++]=x,n&&H[0]?H[q++]=ae[fe]||0:(H=[ae[fe]],q=1);while((fe++<se||H[0]!==void 0)&&ee--)}return j[0]||j.shift(),F.e=v,fo(F,c?l+yu(F)+1:l)}}();function nQ(t,e){var a,r,i,l,c,n,v=0,R=0,x=t.constructor,N=x.precision;if(yu(t)>16)throw Error(_4+yu(t));if(!t.s)return new x(pf);for(Qo=!1,n=N,c=new x(.03125);t.abs().gte(.1);)t=t.times(c),R+=5;for(r=Math.log(nv(2,R))/Math.LN10*2+5|0,n+=r,a=i=l=new x(pf),x.precision=n;;){if(i=fo(i.times(t),n),a=a.times(++v),c=l.plus(Eg(i,a,n)),Vm(c.d).slice(0,n)===Vm(l.d).slice(0,n)){for(;R--;)l=fo(l.times(l),n);return x.precision=N,e==null?(Qo=!0,fo(l,N)):l}l=c}}function yu(t){for(var e=t.e*Do,a=t.d[0];a>=10;a/=10)e++;return e}function s5(t,e,a){if(e>t.LN10.sd())throw Qo=!0,a&&(t.precision=a),Error(rp+"LN10 precision limit exceeded");return fo(new t(t.LN10),e)}function Ny(t){for(var e="";t--;)e+="0";return e}function uT(t,e){var a,r,i,l,c,n,v,R,x,N=1,L=10,F=t,j=F.d,H=F.constructor,q=H.precision;if(F.s<1)throw Error(rp+(F.s?"NaN":"-Infinity"));if(F.eq(pf))return new H(0);if(e==null?(Qo=!1,R=q):R=e,F.eq(10))return e==null&&(Qo=!0),s5(H,R);if(R+=L,H.precision=R,a=Vm(j),r=a.charAt(0),l=yu(F),Math.abs(l)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)F=F.times(t),a=Vm(F.d),r=a.charAt(0),N++;l=yu(F),r>1?(F=new H("0."+a),l++):F=new H(r+"."+a.slice(1))}else return v=s5(H,R+2,q).times(l+""),F=uT(new H(r+"."+a.slice(1)),R-L).plus(v),H.precision=q,e==null?(Qo=!0,fo(F,q)):F;for(n=c=F=Eg(F.minus(pf),F.plus(pf),R),x=fo(F.times(F),R),i=3;;){if(c=fo(c.times(x),R),v=n.plus(Eg(c,new H(i),R)),Vm(v.d).slice(0,R)===Vm(n.d).slice(0,R))return n=n.times(2),l!==0&&(n=n.plus(s5(H,R+2,q).times(l+""))),n=Eg(n,new H(N),R),H.precision=q,e==null?(Qo=!0,fo(n,q)):n;n=v,i+=2}}function I7(t,e){var a,r,i;for((a=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(a<0&&(a=r),a+=+e.slice(r+1),e=e.substring(0,r)):a<0&&(a=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,a=a-r-1,t.e=T1(a/Do),t.d=[],r=(a+1)%Do,a<0&&(r+=Do),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Do;r<i;)t.d.push(+e.slice(r,r+=Do));e=e.slice(r),r=Do-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Qo&&(t.e>Ox||t.e<-Ox))throw Error(_4+a)}else t.s=0,t.e=0,t.d=[0];return t}function fo(t,e,a){var r,i,l,c,n,v,R,x,N=t.d;for(c=1,l=N[0];l>=10;l/=10)c++;if(r=e-c,r<0)r+=Do,i=e,R=N[x=0];else{if(x=Math.ceil((r+1)/Do),l=N.length,x>=l)return t;for(R=l=N[x],c=1;l>=10;l/=10)c++;r%=Do,i=r-Do+c}if(a!==void 0&&(l=nv(10,c-i-1),n=R/l%10|0,v=e<0||N[x+1]!==void 0||R%l,v=a<4?(n||v)&&(a==0||a==(t.s<0?3:2)):n>5||n==5&&(a==4||v||a==6&&(r>0?i>0?R/nv(10,c-i):0:N[x-1])%10&1||a==(t.s<0?8:7))),e<1||!N[0])return v?(l=yu(t),N.length=1,e=e-l-1,N[0]=nv(10,(Do-e%Do)%Do),t.e=T1(-e/Do)||0):(N.length=1,N[0]=t.e=t.s=0),t;if(r==0?(N.length=x,l=1,x--):(N.length=x+1,l=nv(10,Do-r),N[x]=i>0?(R/nv(10,c-i)%nv(10,i)|0)*l:0),v)for(;;)if(x==0){(N[0]+=l)==oc&&(N[0]=1,++t.e);break}else{if(N[x]+=l,N[x]!=oc)break;N[x--]=0,l=1}for(r=N.length;N[--r]===0;)N.pop();if(Qo&&(t.e>Ox||t.e<-Ox))throw Error(_4+yu(t));return t}function iQ(t,e){var a,r,i,l,c,n,v,R,x,N,L=t.constructor,F=L.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new L(t),Qo?fo(e,F):e;if(v=t.d,N=e.d,r=e.e,R=t.e,v=v.slice(),c=R-r,c){for(x=c<0,x?(a=v,c=-c,n=N.length):(a=N,r=R,n=v.length),i=Math.max(Math.ceil(F/Do),n)+2,c>i&&(c=i,a.length=1),a.reverse(),i=c;i--;)a.push(0);a.reverse()}else{for(i=v.length,n=N.length,x=i<n,x&&(n=i),i=0;i<n;i++)if(v[i]!=N[i]){x=v[i]<N[i];break}c=0}for(x&&(a=v,v=N,N=a,e.s=-e.s),n=v.length,i=N.length-n;i>0;--i)v[n++]=0;for(i=N.length;i>c;){if(v[--i]<N[i]){for(l=i;l&&v[--l]===0;)v[l]=oc-1;--v[l],v[i]+=oc}v[i]-=N[i]}for(;v[--n]===0;)v.pop();for(;v[0]===0;v.shift())--r;return v[0]?(e.d=v,e.e=r,Qo?fo(e,F):e):new L(0)}function zv(t,e,a){var r,i=yu(t),l=Vm(t.d),c=l.length;return e?(a&&(r=a-c)>0?l=l.charAt(0)+"."+l.slice(1)+Ny(r):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(i<0?"e":"e+")+i):i<0?(l="0."+Ny(-i-1)+l,a&&(r=a-c)>0&&(l+=Ny(r))):i>=c?(l+=Ny(i+1-c),a&&(r=a-i-1)>0&&(l=l+"."+Ny(r))):((r=i+1)<c&&(l=l.slice(0,r)+"."+l.slice(r)),a&&(r=a-c)>0&&(i+1===c&&(l+="."),l+=Ny(r))),t.s<0?"-"+l:l}function L7(t,e){if(t.length>e)return t.length=e,!0}function sQ(t){var e,a,r;function i(l){var c=this;if(!(c instanceof i))return new i(l);if(c.constructor=i,l instanceof i){c.s=l.s,c.e=l.e,c.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(wv+l);if(l>0)c.s=1;else if(l<0)l=-l,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(l===~~l&&l<1e7){c.e=0,c.d=[l];return}return I7(c,l.toString())}else if(typeof l!="string")throw Error(wv+l);if(l.charCodeAt(0)===45?(l=l.slice(1),c.s=-1):c.s=1,q_e.test(l))I7(c,l);else throw Error(wv+l)}if(i.prototype=Xr,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=sQ,i.config=i.set=H_e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(a=r[e++])||(t[a]=this[a]);return i.config(t),i}function H_e(t){if(!t||typeof t!="object")throw Error(rp+"Object expected");var e,a,r,i=["precision",1,R1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[a=i[e]])!==void 0)if(T1(r)===r&&r>=i[e+1]&&r<=i[e+2])this[a]=r;else throw Error(wv+a+": "+r);if((r=t[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(wv+a+": "+r);return this}var w4=sQ(Z_e);pf=new w4(1);const to=w4;function $_e(t){return X_e(t)||Y_e(t)||W_e(t)||K_e()}function K_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W_e(t,e){if(t){if(typeof t=="string")return UM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return UM(t,e)}}function Y_e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function X_e(t){if(Array.isArray(t))return UM(t)}function UM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var J_e=function(e){return e},oQ={},lQ=function(e){return e===oQ},F7=function(e){return function a(){return arguments.length===0||arguments.length===1&&lQ(arguments.length<=0?void 0:arguments[0])?a:e.apply(void 0,arguments)}},Q_e=function t(e,a){return e===1?a:F7(function(){for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];var c=i.filter(function(n){return n!==oQ}).length;return c>=e?a.apply(void 0,i):t(e-c,F7(function(){for(var n=arguments.length,v=new Array(n),R=0;R<n;R++)v[R]=arguments[R];var x=i.map(function(N){return lQ(N)?v.shift():N});return a.apply(void 0,$_e(x).concat(v))}))})},OP=function(e){return Q_e(e.length,e)},BM=function(e,a){for(var r=[],i=e;i<a;++i)r[i-e]=i;return r},e1e=OP(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(a){return e[a]}).map(t)}),t1e=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];if(!a.length)return J_e;var i=a.reverse(),l=i[0],c=i.slice(1);return function(){return c.reduce(function(n,v){return v(n)},l.apply(void 0,arguments))}},jM=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},uQ=function(e){var a=null,r=null;return function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return a&&l.every(function(n,v){return n===a[v]})||(a=l,r=e.apply(void 0,l)),r}};function a1e(t){var e;return t===0?e=1:e=Math.floor(new to(t).abs().log(10).toNumber())+1,e}function r1e(t,e,a){for(var r=new to(t),i=0,l=[];r.lt(e)&&i<1e5;)l.push(r.toNumber()),r=r.add(a),i++;return l}var n1e=OP(function(t,e,a){var r=+t,i=+e;return r+a*(i-r)}),i1e=OP(function(t,e,a){var r=e-+t;return r=r||1/0,(a-t)/r}),s1e=OP(function(t,e,a){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(a-t)/r))});const VP={rangeStep:r1e,getDigitCount:a1e,interpolateNumber:n1e,uninterpolateNumber:i1e,uninterpolateTruncation:s1e};function GM(t){return u1e(t)||l1e(t)||cQ(t)||o1e()}function o1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function u1e(t){if(Array.isArray(t))return ZM(t)}function cT(t,e){return h1e(t)||d1e(t,e)||cQ(t,e)||c1e()}function c1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cQ(t,e){if(t){if(typeof t=="string")return ZM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ZM(t,e)}}function ZM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function d1e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],r=!0,i=!1,l=void 0;try{for(var c=t[Symbol.iterator](),n;!(r=(n=c.next()).done)&&(a.push(n.value),!(e&&a.length===e));r=!0);}catch(v){i=!0,l=v}finally{try{!r&&c.return!=null&&c.return()}finally{if(i)throw l}}return a}}function h1e(t){if(Array.isArray(t))return t}function dQ(t){var e=cT(t,2),a=e[0],r=e[1],i=a,l=r;return a>r&&(i=r,l=a),[i,l]}function hQ(t,e,a){if(t.lte(0))return new to(0);var r=VP.getDigitCount(t.toNumber()),i=new to(10).pow(r),l=t.div(i),c=r!==1?.05:.1,n=new to(Math.ceil(l.div(c).toNumber())).add(a).mul(c),v=n.mul(i);return e?v:new to(Math.ceil(v))}function f1e(t,e,a){var r=1,i=new to(t);if(!i.isint()&&a){var l=Math.abs(t);l<1?(r=new to(10).pow(VP.getDigitCount(t)-1),i=new to(Math.floor(i.div(r).toNumber())).mul(r)):l>1&&(i=new to(Math.floor(t)))}else t===0?i=new to(Math.floor((e-1)/2)):a||(i=new to(Math.floor(t)));var c=Math.floor((e-1)/2),n=t1e(e1e(function(v){return i.add(new to(v-c).mul(r)).toNumber()}),BM);return n(0,e)}function fQ(t,e,a,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(a-1)))return{step:new to(0),tickMin:new to(0),tickMax:new to(0)};var l=hQ(new to(e).sub(t).div(a-1),r,i),c;t<=0&&e>=0?c=new to(0):(c=new to(t).add(e).div(2),c=c.sub(new to(c).mod(l)));var n=Math.ceil(c.sub(t).div(l).toNumber()),v=Math.ceil(new to(e).sub(c).div(l).toNumber()),R=n+v+1;return R>a?fQ(t,e,a,r,i+1):(R<a&&(v=e>0?v+(a-R):v,n=e>0?n:n+(a-R)),{step:l,tickMin:c.sub(new to(n).mul(l)),tickMax:c.add(new to(v).mul(l))})}function p1e(t){var e=cT(t,2),a=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),n=dQ([a,r]),v=cT(n,2),R=v[0],x=v[1];if(R===-1/0||x===1/0){var N=x===1/0?[R].concat(GM(BM(0,i-1).map(function(){return 1/0}))):[].concat(GM(BM(0,i-1).map(function(){return-1/0})),[x]);return a>r?jM(N):N}if(R===x)return f1e(R,i,l);var L=fQ(R,x,c,l),F=L.step,j=L.tickMin,H=L.tickMax,q=VP.rangeStep(j,H.add(new to(.1).mul(F)),F);return a>r?jM(q):q}function m1e(t,e){var a=cT(t,2),r=a[0],i=a[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=dQ([r,i]),n=cT(c,2),v=n[0],R=n[1];if(v===-1/0||R===1/0)return[r,i];if(v===R)return[v];var x=Math.max(e,2),N=hQ(new to(R).sub(v).div(x-1),l,0),L=[].concat(GM(VP.rangeStep(new to(v),new to(R).sub(new to(.99).mul(N)),N)),[R]);return r>i?jM(L):L}var g1e=uQ(p1e),y1e=uQ(m1e),A1e="Invariant failed";function Dv(t,e){throw new Error(A1e)}var v1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function L_(t){"@babel/helpers - typeof";return L_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L_(t)}function Vx(){return Vx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Vx.apply(this,arguments)}function _1e(t,e){return C1e(t)||T1e(t,e)||R1e(t,e)||w1e()}function w1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R1e(t,e){if(t){if(typeof t=="string")return k7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k7(t,e)}}function k7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function T1e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function C1e(t){if(Array.isArray(t))return t}function S1e(t,e){if(t==null)return{};var a=b1e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function b1e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function x1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P1e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gQ(r.key),r)}}function E1e(t,e,a){return e&&P1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function N1e(t,e,a){return e=zx(e),O1e(t,pQ()?Reflect.construct(e,a||[],zx(t).constructor):e.apply(t,a))}function O1e(t,e){if(e&&(L_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V1e(t)}function V1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pQ=function(){return!!t})()}function zx(t){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zx(t)}function z1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qM(t,e)}function qM(t,e){return qM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qM(t,e)}function mQ(t,e,a){return e=gQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function gQ(t){var e=D1e(t,"string");return L_(e)=="symbol"?e:e+""}function D1e(t,e){if(L_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(L_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C1=function(t){function e(){return x1e(this,e),N1e(this,e,arguments)}return z1e(e,t),E1e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,l=r.layout,c=r.width,n=r.dataKey,v=r.data,R=r.dataPointFormatter,x=r.xAxis,N=r.yAxis,L=S1e(r,v1e),F=cn(L,!1);this.props.direction==="x"&&x.type!=="number"&&Dv();var j=v.map(function(H){var q=R(H,n),W=q.x,ee=q.y,oe=q.value,fe=q.errorVal;if(!fe)return null;var se=[],me,ge;if(Array.isArray(fe)){var Re=_1e(fe,2);me=Re[0],ge=Re[1]}else me=ge=fe;if(l==="vertical"){var we=x.scale,Ee=ee+i,ae=Ee+c,_e=Ee-c,Ie=we(oe-me),xe=we(oe+ge);se.push({x1:xe,y1:ae,x2:xe,y2:_e}),se.push({x1:Ie,y1:Ee,x2:xe,y2:Ee}),se.push({x1:Ie,y1:ae,x2:Ie,y2:_e})}else if(l==="horizontal"){var ze=N.scale,Me=W+i,je=Me-c,Ue=Me+c,Qe=ze(oe-me),ke=ze(oe+ge);se.push({x1:je,y1:ke,x2:Ue,y2:ke}),se.push({x1:Me,y1:Qe,x2:Me,y2:ke}),se.push({x1:je,y1:Qe,x2:Ue,y2:Qe})}return Ot.createElement(mi,Vx({className:"recharts-errorBar",key:"bar-".concat(se.map(function(Ge){return"".concat(Ge.x1,"-").concat(Ge.x2,"-").concat(Ge.y1,"-").concat(Ge.y2)}))},F),se.map(function(Ge){return Ot.createElement("line",Vx({},Ge,{key:"line-".concat(Ge.x1,"-").concat(Ge.x2,"-").concat(Ge.y1,"-").concat(Ge.y2)}))}))});return Ot.createElement(mi,{className:"recharts-errorBars"},j)}}])}(Ot.Component);mQ(C1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mQ(C1,"displayName","ErrorBar");function dT(t){"@babel/helpers - typeof";return dT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dT(t)}function U7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function JA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?U7(Object(a),!0).forEach(function(r){M1e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function M1e(t,e,a){return e=I1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function I1e(t){var e=L1e(t,"string");return dT(e)=="symbol"?e:e+""}function L1e(t,e){if(dT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(dT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yQ=function(e){var a=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,l=e.legendContent,c=df(a,hf);if(!c)return null;var n=hf.defaultProps,v=n!==void 0?JA(JA({},n),c.props):{},R;return c.props&&c.props.payload?R=c.props&&c.props.payload:l==="children"?R=(r||[]).reduce(function(x,N){var L=N.item,F=N.props,j=F.sectors||F.data||[];return x.concat(j.map(function(H){return{type:c.props.iconType||L.props.legendType,value:H.name,color:H.fill,payload:H}}))},[]):R=(r||[]).map(function(x){var N=x.item,L=N.type.defaultProps,F=L!==void 0?JA(JA({},L),N.props):{},j=F.dataKey,H=F.name,q=F.legendType,W=F.hide;return{inactive:W,dataKey:j,type:v.iconType||q||"square",color:R4(N),value:H||j,payload:F}}),JA(JA(JA({},v),hf.getWithHeight(c,i)),{},{payload:R,item:c})};function hT(t){"@babel/helpers - typeof";return hT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hT(t)}function B7(t){return B1e(t)||U1e(t)||k1e(t)||F1e()}function F1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k1e(t,e){if(t){if(typeof t=="string")return HM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return HM(t,e)}}function U1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function B1e(t){if(Array.isArray(t))return HM(t)}function HM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function j7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Pl(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?j7(Object(a),!0).forEach(function(r){f_(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function f_(t,e,a){return e=j1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function j1e(t){var e=G1e(t,"string");return hT(e)=="symbol"?e:e+""}function G1e(t,e){if(hT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(hT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Io(t,e,a){return Bn(t)||Bn(e)?a:Zu(e)?vf(t,e,a):Un(e)?e(t):a}function RR(t,e,a,r){var i=B_e(t,function(n){return Io(n,e)});if(a==="number"){var l=i.filter(function(n){return Ar(n)||parseFloat(n)});return l.length?[NP(l),ky(l)]:[1/0,-1/0]}var c=r?i.filter(function(n){return!Bn(n)}):i;return c.map(function(n){return Zu(n)||n instanceof Date?n:""})}var Z1e=function(e){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,c=-1,n=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(n<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var v=l.range,R=0;R<n;R++){var x=R>0?i[R-1].coordinate:i[n-1].coordinate,N=i[R].coordinate,L=R>=n-1?i[0].coordinate:i[R+1].coordinate,F=void 0;if(sh(N-x)!==sh(L-N)){var j=[];if(sh(L-N)===sh(v[1]-v[0])){F=L;var H=N+v[1]-v[0];j[0]=Math.min(H,(H+x)/2),j[1]=Math.max(H,(H+x)/2)}else{F=x;var q=L+v[1]-v[0];j[0]=Math.min(N,(q+N)/2),j[1]=Math.max(N,(q+N)/2)}var W=[Math.min(N,(F+N)/2),Math.max(N,(F+N)/2)];if(e>W[0]&&e<=W[1]||e>=j[0]&&e<=j[1]){c=i[R].index;break}}else{var ee=Math.min(x,L),oe=Math.max(x,L);if(e>(ee+N)/2&&e<=(oe+N)/2){c=i[R].index;break}}}else for(var fe=0;fe<n;fe++)if(fe===0&&e<=(r[fe].coordinate+r[fe+1].coordinate)/2||fe>0&&fe<n-1&&e>(r[fe].coordinate+r[fe-1].coordinate)/2&&e<=(r[fe].coordinate+r[fe+1].coordinate)/2||fe===n-1&&e>(r[fe].coordinate+r[fe-1].coordinate)/2){c=r[fe].index;break}return c},R4=function(e){var a,r=e,i=r.type.displayName,l=(a=e.type)!==null&&a!==void 0&&a.defaultProps?Pl(Pl({},e.type.defaultProps),e.props):e.props,c=l.stroke,n=l.fill,v;switch(i){case"Line":v=c;break;case"Area":case"Radar":v=c&&c!=="none"?c:n;break;default:v=n;break}return v},q1e=function(e){var a=e.barSize,r=e.totalSize,i=e.stackGroups,l=i===void 0?{}:i;if(!l)return{};for(var c={},n=Object.keys(l),v=0,R=n.length;v<R;v++)for(var x=l[n[v]].stackGroups,N=Object.keys(x),L=0,F=N.length;L<F;L++){var j=x[N[L]],H=j.items,q=j.cateAxisId,W=H.filter(function(ge){return Pg(ge.type).indexOf("Bar")>=0});if(W&&W.length){var ee=W[0].type.defaultProps,oe=ee!==void 0?Pl(Pl({},ee),W[0].props):W[0].props,fe=oe.barSize,se=oe[q];c[se]||(c[se]=[]);var me=Bn(fe)?a:fe;c[se].push({item:W[0],stackList:W.slice(1),barSize:Bn(me)?void 0:oh(me,r,0)})}}return c},H1e=function(e){var a=e.barGap,r=e.barCategoryGap,i=e.bandSize,l=e.sizeList,c=l===void 0?[]:l,n=e.maxBarSize,v=c.length;if(v<1)return null;var R=oh(a,i,0,!0),x,N=[];if(c[0].barSize===+c[0].barSize){var L=!1,F=i/v,j=c.reduce(function(fe,se){return fe+se.barSize||0},0);j+=(v-1)*R,j>=i&&(j-=(v-1)*R,R=0),j>=i&&F>0&&(L=!0,F*=.9,j=v*F);var H=(i-j)/2>>0,q={offset:H-R,size:0};x=c.reduce(function(fe,se){var me={item:se.item,position:{offset:q.offset+q.size+R,size:L?F:se.barSize}},ge=[].concat(B7(fe),[me]);return q=ge[ge.length-1].position,se.stackList&&se.stackList.length&&se.stackList.forEach(function(Re){ge.push({item:Re,position:q})}),ge},N)}else{var W=oh(r,i,0,!0);i-2*W-(v-1)*R<=0&&(R=0);var ee=(i-2*W-(v-1)*R)/v;ee>1&&(ee>>=0);var oe=n===+n?Math.min(ee,n):ee;x=c.reduce(function(fe,se,me){var ge=[].concat(B7(fe),[{item:se.item,position:{offset:W+(ee+R)*me+(ee-oe)/2,size:oe}}]);return se.stackList&&se.stackList.length&&se.stackList.forEach(function(Re){ge.push({item:Re,position:ge[ge.length-1].position})}),ge},N)}return x},$1e=function(e,a,r,i){var l=r.children,c=r.width,n=r.margin,v=c-(n.left||0)-(n.right||0),R=yQ({children:l,legendWidth:v});if(R){var x=i||{},N=x.width,L=x.height,F=R.align,j=R.verticalAlign,H=R.layout;if((H==="vertical"||H==="horizontal"&&j==="middle")&&F!=="center"&&Ar(e[F]))return Pl(Pl({},e),{},f_({},F,e[F]+(N||0)));if((H==="horizontal"||H==="vertical"&&F==="center")&&j!=="middle"&&Ar(e[j]))return Pl(Pl({},e),{},f_({},j,e[j]+(L||0)))}return e},K1e=function(e,a,r){return Bn(a)?!0:e==="horizontal"?a==="yAxis":e==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},AQ=function(e,a,r,i,l){var c=a.props.children,n=hh(c,C1).filter(function(R){return K1e(i,l,R.props.direction)});if(n&&n.length){var v=n.map(function(R){return R.props.dataKey});return e.reduce(function(R,x){var N=Io(x,r);if(Bn(N))return R;var L=Array.isArray(N)?[NP(N),ky(N)]:[N,N],F=v.reduce(function(j,H){var q=Io(x,H,0),W=L[0]-Math.abs(Array.isArray(q)?q[0]:q),ee=L[1]+Math.abs(Array.isArray(q)?q[1]:q);return[Math.min(W,j[0]),Math.max(ee,j[1])]},[1/0,-1/0]);return[Math.min(F[0],R[0]),Math.max(F[1],R[1])]},[1/0,-1/0])}return null},W1e=function(e,a,r,i,l){var c=a.map(function(n){return AQ(e,n,r,l,i)}).filter(function(n){return!Bn(n)});return c&&c.length?c.reduce(function(n,v){return[Math.min(n[0],v[0]),Math.max(n[1],v[1])]},[1/0,-1/0]):null},vQ=function(e,a,r,i,l){var c=a.map(function(v){var R=v.props.dataKey;return r==="number"&&R&&AQ(e,v,R,i)||RR(e,R,r,l)});if(r==="number")return c.reduce(function(v,R){return[Math.min(v[0],R[0]),Math.max(v[1],R[1])]},[1/0,-1/0]);var n={};return c.reduce(function(v,R){for(var x=0,N=R.length;x<N;x++)n[R[x]]||(n[R[x]]=!0,v.push(R[x]));return v},[])},_Q=function(e,a){return e==="horizontal"&&a==="xAxis"||e==="vertical"&&a==="yAxis"||e==="centric"&&a==="angleAxis"||e==="radial"&&a==="radiusAxis"},wQ=function(e,a,r,i){if(i)return e.map(function(v){return v.coordinate});var l,c,n=e.map(function(v){return v.coordinate===a&&(l=!0),v.coordinate===r&&(c=!0),v.coordinate});return l||n.push(a),c||n.push(r),n},Sg=function(e,a,r){if(!e)return null;var i=e.scale,l=e.duplicateDomain,c=e.type,n=e.range,v=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,R=(a||r)&&c==="category"&&i.bandwidth?i.bandwidth()/v:0;if(R=e.axisType==="angleAxis"&&(n==null?void 0:n.length)>=2?sh(n[0]-n[1])*2*R:R,a&&(e.ticks||e.niceTicks)){var x=(e.ticks||e.niceTicks).map(function(N){var L=l?l.indexOf(N):N;return{coordinate:i(L)+R,value:N,offset:R}});return x.filter(function(N){return!v1(N.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(N,L){return{coordinate:i(N)+R,value:N,index:L,offset:R}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(N){return{coordinate:i(N)+R,value:N,offset:R}}):i.domain().map(function(N,L){return{coordinate:i(N)+R,value:l?l[N]:N,index:L,offset:R}})},o5=new WeakMap,WS=function(e,a){if(typeof a!="function")return e;o5.has(e)||o5.set(e,new WeakMap);var r=o5.get(e);if(r.has(a))return r.get(a);var i=function(){e.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,i),i},RQ=function(e,a,r){var i=e.scale,l=e.type,c=e.layout,n=e.axisType;if(i==="auto")return c==="radial"&&n==="radiusAxis"?{scale:nT(),realScaleType:"band"}:c==="radial"&&n==="angleAxis"?{scale:xx(),realScaleType:"linear"}:l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:wR(),realScaleType:"point"}:l==="category"?{scale:nT(),realScaleType:"band"}:{scale:xx(),realScaleType:"linear"};if(cC(i)){var v="scale".concat(mP(i));return{scale:(x7[v]||wR)(),realScaleType:x7[v]?v:"point"}}return Un(i)?{scale:i}:{scale:wR(),realScaleType:"point"}},G7=1e-4,TQ=function(e){var a=e.domain();if(!(!a||a.length<=2)){var r=a.length,i=e.range(),l=Math.min(i[0],i[1])-G7,c=Math.max(i[0],i[1])+G7,n=e(a[0]),v=e(a[r-1]);(n<l||n>c||v<l||v>c)&&e.domain([a[0],a[r-1]])}},Y1e=function(e,a){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===a)return e[r].position;return null},X1e=function(e,a){if(!a||a.length!==2||!Ar(a[0])||!Ar(a[1]))return e;var r=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]),l=[e[0],e[1]];return(!Ar(e[0])||e[0]<r)&&(l[0]=r),(!Ar(e[1])||e[1]>i)&&(l[1]=i),l[0]>i&&(l[0]=i),l[1]<r&&(l[1]=r),l},J1e=function(e){var a=e.length;if(!(a<=0))for(var r=0,i=e[0].length;r<i;++r)for(var l=0,c=0,n=0;n<a;++n){var v=v1(e[n][r][1])?e[n][r][0]:e[n][r][1];v>=0?(e[n][r][0]=l,e[n][r][1]=l+v,l=e[n][r][1]):(e[n][r][0]=c,e[n][r][1]=c+v,c=e[n][r][1])}},Q1e=function(e){var a=e.length;if(!(a<=0))for(var r=0,i=e[0].length;r<i;++r)for(var l=0,c=0;c<a;++c){var n=v1(e[c][r][1])?e[c][r][0]:e[c][r][1];n>=0?(e[c][r][0]=l,e[c][r][1]=l+n,l=e[c][r][1]):(e[c][r][0]=0,e[c][r][1]=0)}},ewe={sign:J1e,expand:Bme,none:P_,silhouette:jme,wiggle:Gme,positive:Q1e},twe=function(e,a,r){var i=a.map(function(n){return n.props.dataKey}),l=ewe[r],c=Ume().keys(i).value(function(n,v){return+Io(n,v,0)}).order(RM).offset(l);return c(e)},awe=function(e,a,r,i,l,c){if(!e)return null;var n=c?a.reverse():a,v={},R=n.reduce(function(N,L){var F,j=(F=L.type)!==null&&F!==void 0&&F.defaultProps?Pl(Pl({},L.type.defaultProps),L.props):L.props,H=j.stackId,q=j.hide;if(q)return N;var W=j[r],ee=N[W]||{hasStack:!1,stackGroups:{}};if(Zu(H)){var oe=ee.stackGroups[H]||{numericAxisId:r,cateAxisId:i,items:[]};oe.items.push(L),ee.hasStack=!0,ee.stackGroups[H]=oe}else ee.stackGroups[uA("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[L]};return Pl(Pl({},N),{},f_({},W,ee))},v),x={};return Object.keys(R).reduce(function(N,L){var F=R[L];if(F.hasStack){var j={};F.stackGroups=Object.keys(F.stackGroups).reduce(function(H,q){var W=F.stackGroups[q];return Pl(Pl({},H),{},f_({},q,{numericAxisId:r,cateAxisId:i,items:W.items,stackedData:twe(e,W.items,l)}))},j)}return Pl(Pl({},N),{},f_({},L,F))},x)},CQ=function(e,a){var r=a.realScaleType,i=a.type,l=a.tickCount,c=a.originalDomain,n=a.allowDecimals,v=r||a.scale;if(v!=="auto"&&v!=="linear")return null;if(l&&i==="number"&&c&&(c[0]==="auto"||c[1]==="auto")){var R=e.domain();if(!R.length)return null;var x=g1e(R,l,n);return e.domain([NP(x),ky(x)]),{niceTicks:x}}if(l&&i==="number"){var N=e.domain(),L=y1e(N,l,n);return{niceTicks:L}}return null};function F_(t){var e=t.axis,a=t.ticks,r=t.bandSize,i=t.entry,l=t.index,c=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Bn(i[e.dataKey])){var n=ux(a,"value",i[e.dataKey]);if(n)return n.coordinate+r/2}return a[l]?a[l].coordinate+r/2:null}var v=Io(i,Bn(c)?e.dataKey:c);return Bn(v)?null:e.scale(v)}var Z7=function(e){var a=e.axis,r=e.ticks,i=e.offset,l=e.bandSize,c=e.entry,n=e.index;if(a.type==="category")return r[n]?r[n].coordinate+i:null;var v=Io(c,a.dataKey,a.domain[n]);return Bn(v)?null:a.scale(v)-l/2+i},rwe=function(e){var a=e.numericAxis,r=a.scale.domain();if(a.type==="number"){var i=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return i<=0&&l>=0?0:l<0?l:i}return r[0]},nwe=function(e,a){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Pl(Pl({},e.type.defaultProps),e.props):e.props,l=i.stackId;if(Zu(l)){var c=a[l];if(c){var n=c.items.indexOf(e);return n>=0?c.stackedData[n]:null}}return null},iwe=function(e){return e.reduce(function(a,r){return[NP(r.concat([a[0]]).filter(Ar)),ky(r.concat([a[1]]).filter(Ar))]},[1/0,-1/0])},SQ=function(e,a,r){return Object.keys(e).reduce(function(i,l){var c=e[l],n=c.stackedData,v=n.reduce(function(R,x){var N=iwe(x.slice(a,r+1));return[Math.min(R[0],N[0]),Math.max(R[1],N[1])]},[1/0,-1/0]);return[Math.min(v[0],i[0]),Math.max(v[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},q7=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,H7=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$M=function(e,a,r){if(Un(e))return e(a,r);if(!Array.isArray(e))return a;var i=[];if(Ar(e[0]))i[0]=r?e[0]:Math.min(e[0],a[0]);else if(q7.test(e[0])){var l=+q7.exec(e[0])[1];i[0]=a[0]-l}else Un(e[0])?i[0]=e[0](a[0]):i[0]=a[0];if(Ar(e[1]))i[1]=r?e[1]:Math.max(e[1],a[1]);else if(H7.test(e[1])){var c=+H7.exec(e[1])[1];i[1]=a[1]+c}else Un(e[1])?i[1]=e[1](a[1]):i[1]=a[1];return i},Dx=function(e,a,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&a&&a.length>=2){for(var l=YL(a,function(N){return N.coordinate}),c=1/0,n=1,v=l.length;n<v;n++){var R=l[n],x=l[n-1];c=Math.min((R.coordinate||0)-(x.coordinate||0),c)}return c===1/0?0:c}return r?void 0:0},$7=function(e,a,r){return!e||!e.length||Qy(e,vf(r,"type.defaultProps.domain"))?a:e},bQ=function(e,a){var r=e.type.defaultProps?Pl(Pl({},e.type.defaultProps),e.props):e.props,i=r.dataKey,l=r.name,c=r.unit,n=r.formatter,v=r.tooltipType,R=r.chartType,x=r.hide;return Pl(Pl({},cn(e,!1)),{},{dataKey:i,unit:c,formatter:n,name:l||i,color:R4(e),value:Io(a,i),type:v,payload:a,chartType:R,hide:x})};function fT(t){"@babel/helpers - typeof";return fT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fT(t)}function K7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function vg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?K7(Object(a),!0).forEach(function(r){xQ(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):K7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function xQ(t,e,a){return e=swe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function swe(t){var e=owe(t,"string");return fT(e)=="symbol"?e:e+""}function owe(t,e){if(fT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(fT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lwe(t,e){return hwe(t)||dwe(t,e)||cwe(t,e)||uwe()}function uwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cwe(t,e){if(t){if(typeof t=="string")return W7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return W7(t,e)}}function W7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function dwe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function hwe(t){if(Array.isArray(t))return t}var Mx=Math.PI/180,fwe=function(e){return e*180/Math.PI},xo=function(e,a,r,i){return{x:e+Math.cos(-Mx*i)*r,y:a+Math.sin(-Mx*i)*r}},PQ=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(a-(r.top||0)-(r.bottom||0)))/2},pwe=function(e,a,r,i,l){var c=e.width,n=e.height,v=e.startAngle,R=e.endAngle,x=oh(e.cx,c,c/2),N=oh(e.cy,n,n/2),L=PQ(c,n,r),F=oh(e.innerRadius,L,0),j=oh(e.outerRadius,L,L*.8),H=Object.keys(a);return H.reduce(function(q,W){var ee=a[W],oe=ee.domain,fe=ee.reversed,se;if(Bn(ee.range))i==="angleAxis"?se=[v,R]:i==="radiusAxis"&&(se=[F,j]),fe&&(se=[se[1],se[0]]);else{se=ee.range;var me=se,ge=lwe(me,2);v=ge[0],R=ge[1]}var Re=RQ(ee,l),we=Re.realScaleType,Ee=Re.scale;Ee.domain(oe).range(se),TQ(Ee);var ae=CQ(Ee,vg(vg({},ee),{},{realScaleType:we})),_e=vg(vg(vg({},ee),ae),{},{range:se,radius:j,realScaleType:we,scale:Ee,cx:x,cy:N,innerRadius:F,outerRadius:j,startAngle:v,endAngle:R});return vg(vg({},q),{},xQ({},W,_e))},{})},mwe=function(e,a){var r=e.x,i=e.y,l=a.x,c=a.y;return Math.sqrt(Math.pow(r-l,2)+Math.pow(i-c,2))},gwe=function(e,a){var r=e.x,i=e.y,l=a.cx,c=a.cy,n=mwe({x:r,y:i},{x:l,y:c});if(n<=0)return{radius:n};var v=(r-l)/n,R=Math.acos(v);return i>c&&(R=2*Math.PI-R),{radius:n,angle:fwe(R),angleInRadian:R}},ywe=function(e){var a=e.startAngle,r=e.endAngle,i=Math.floor(a/360),l=Math.floor(r/360),c=Math.min(i,l);return{startAngle:a-c*360,endAngle:r-c*360}},Awe=function(e,a){var r=a.startAngle,i=a.endAngle,l=Math.floor(r/360),c=Math.floor(i/360),n=Math.min(l,c);return e+n*360},Y7=function(e,a){var r=e.x,i=e.y,l=gwe({x:r,y:i},a),c=l.radius,n=l.angle,v=a.innerRadius,R=a.outerRadius;if(c<v||c>R)return!1;if(c===0)return!0;var x=ywe(a),N=x.startAngle,L=x.endAngle,F=n,j;if(N<=L){for(;F>L;)F-=360;for(;F<N;)F+=360;j=F>=N&&F<=L}else{for(;F>N;)F-=360;for(;F<L;)F+=360;j=F>=L&&F<=N}return j?vg(vg({},a),{},{radius:c,angle:Awe(F,a)}):null},EQ=function(e){return!le.isValidElement(e)&&!Un(e)&&typeof e!="boolean"?e.className:""};function pT(t){"@babel/helpers - typeof";return pT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pT(t)}var vwe=["offset"];function _we(t){return Cwe(t)||Twe(t)||Rwe(t)||wwe()}function wwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rwe(t,e){if(t){if(typeof t=="string")return KM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return KM(t,e)}}function Twe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cwe(t){if(Array.isArray(t))return KM(t)}function KM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Swe(t,e){if(t==null)return{};var a=bwe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function X7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Gu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X7(Object(a),!0).forEach(function(r){xwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function xwe(t,e,a){return e=Pwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Pwe(t){var e=Ewe(t,"string");return pT(e)=="symbol"?e:e+""}function Ewe(t,e){if(pT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(pT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mT(){return mT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},mT.apply(this,arguments)}var Nwe=function(e){var a=e.value,r=e.formatter,i=Bn(e.children)?a:e.children;return Un(r)?r(i):i},Owe=function(e,a){var r=sh(a-e),i=Math.min(Math.abs(a-e),360);return r*i},Vwe=function(e,a,r){var i=e.position,l=e.viewBox,c=e.offset,n=e.className,v=l,R=v.cx,x=v.cy,N=v.innerRadius,L=v.outerRadius,F=v.startAngle,j=v.endAngle,H=v.clockWise,q=(N+L)/2,W=Owe(F,j),ee=W>=0?1:-1,oe,fe;i==="insideStart"?(oe=F+ee*c,fe=H):i==="insideEnd"?(oe=j-ee*c,fe=!H):i==="end"&&(oe=j+ee*c,fe=H),fe=W<=0?fe:!fe;var se=xo(R,x,q,oe),me=xo(R,x,q,oe+(fe?1:-1)*359),ge="M".concat(se.x,",").concat(se.y,`
    A`).concat(q,",").concat(q,",0,1,").concat(fe?0:1,`,
    `).concat(me.x,",").concat(me.y),Re=Bn(e.id)?uA("recharts-radial-line-"):e.id;return Ot.createElement("text",mT({},r,{dominantBaseline:"central",className:hi("recharts-radial-bar-label",n)}),Ot.createElement("defs",null,Ot.createElement("path",{id:Re,d:ge})),Ot.createElement("textPath",{xlinkHref:"#".concat(Re)},a))},zwe=function(e){var a=e.viewBox,r=e.offset,i=e.position,l=a,c=l.cx,n=l.cy,v=l.innerRadius,R=l.outerRadius,x=l.startAngle,N=l.endAngle,L=(x+N)/2;if(i==="outside"){var F=xo(c,n,R+r,L),j=F.x,H=F.y;return{x:j,y:H,textAnchor:j>=c?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"end"};var q=(v+R)/2,W=xo(c,n,q,L),ee=W.x,oe=W.y;return{x:ee,y:oe,textAnchor:"middle",verticalAnchor:"middle"}},Dwe=function(e){var a=e.viewBox,r=e.parentViewBox,i=e.offset,l=e.position,c=a,n=c.x,v=c.y,R=c.width,x=c.height,N=x>=0?1:-1,L=N*i,F=N>0?"end":"start",j=N>0?"start":"end",H=R>=0?1:-1,q=H*i,W=H>0?"end":"start",ee=H>0?"start":"end";if(l==="top"){var oe={x:n+R/2,y:v-N*i,textAnchor:"middle",verticalAnchor:F};return Gu(Gu({},oe),r?{height:Math.max(v-r.y,0),width:R}:{})}if(l==="bottom"){var fe={x:n+R/2,y:v+x+L,textAnchor:"middle",verticalAnchor:j};return Gu(Gu({},fe),r?{height:Math.max(r.y+r.height-(v+x),0),width:R}:{})}if(l==="left"){var se={x:n-q,y:v+x/2,textAnchor:W,verticalAnchor:"middle"};return Gu(Gu({},se),r?{width:Math.max(se.x-r.x,0),height:x}:{})}if(l==="right"){var me={x:n+R+q,y:v+x/2,textAnchor:ee,verticalAnchor:"middle"};return Gu(Gu({},me),r?{width:Math.max(r.x+r.width-me.x,0),height:x}:{})}var ge=r?{width:R,height:x}:{};return l==="insideLeft"?Gu({x:n+q,y:v+x/2,textAnchor:ee,verticalAnchor:"middle"},ge):l==="insideRight"?Gu({x:n+R-q,y:v+x/2,textAnchor:W,verticalAnchor:"middle"},ge):l==="insideTop"?Gu({x:n+R/2,y:v+L,textAnchor:"middle",verticalAnchor:j},ge):l==="insideBottom"?Gu({x:n+R/2,y:v+x-L,textAnchor:"middle",verticalAnchor:F},ge):l==="insideTopLeft"?Gu({x:n+q,y:v+L,textAnchor:ee,verticalAnchor:j},ge):l==="insideTopRight"?Gu({x:n+R-q,y:v+L,textAnchor:W,verticalAnchor:j},ge):l==="insideBottomLeft"?Gu({x:n+q,y:v+x-L,textAnchor:ee,verticalAnchor:F},ge):l==="insideBottomRight"?Gu({x:n+R-q,y:v+x-L,textAnchor:W,verticalAnchor:F},ge):A1(l)&&(Ar(l.x)||hv(l.x))&&(Ar(l.y)||hv(l.y))?Gu({x:n+oh(l.x,R),y:v+oh(l.y,x),textAnchor:"end",verticalAnchor:"end"},ge):Gu({x:n+R/2,y:v+x/2,textAnchor:"middle",verticalAnchor:"middle"},ge)},Mwe=function(e){return"cx"in e&&Ar(e.cx)};function uc(t){var e=t.offset,a=e===void 0?5:e,r=Swe(t,vwe),i=Gu({offset:a},r),l=i.viewBox,c=i.position,n=i.value,v=i.children,R=i.content,x=i.className,N=x===void 0?"":x,L=i.textBreakAll;if(!l||Bn(n)&&Bn(v)&&!le.isValidElement(R)&&!Un(R))return null;if(le.isValidElement(R))return le.cloneElement(R,i);var F;if(Un(R)){if(F=le.createElement(R,i),le.isValidElement(F))return F}else F=Nwe(i);var j=Mwe(l),H=cn(i,!0);if(j&&(c==="insideStart"||c==="insideEnd"||c==="end"))return Vwe(i,F,H);var q=j?zwe(i):Dwe(i);return Ot.createElement(Vv,mT({className:hi("recharts-label",N)},H,q,{breakAll:L}),F)}uc.displayName="Label";var NQ=function(e){var a=e.cx,r=e.cy,i=e.angle,l=e.startAngle,c=e.endAngle,n=e.r,v=e.radius,R=e.innerRadius,x=e.outerRadius,N=e.x,L=e.y,F=e.top,j=e.left,H=e.width,q=e.height,W=e.clockWise,ee=e.labelViewBox;if(ee)return ee;if(Ar(H)&&Ar(q)){if(Ar(N)&&Ar(L))return{x:N,y:L,width:H,height:q};if(Ar(F)&&Ar(j))return{x:F,y:j,width:H,height:q}}return Ar(N)&&Ar(L)?{x:N,y:L,width:0,height:0}:Ar(a)&&Ar(r)?{cx:a,cy:r,startAngle:l||i||0,endAngle:c||i||0,innerRadius:R||0,outerRadius:x||v||n||0,clockWise:W}:e.viewBox?e.viewBox:{}},Iwe=function(e,a){return e?e===!0?Ot.createElement(uc,{key:"label-implicit",viewBox:a}):Zu(e)?Ot.createElement(uc,{key:"label-implicit",viewBox:a,value:e}):le.isValidElement(e)?e.type===uc?le.cloneElement(e,{key:"label-implicit",viewBox:a}):Ot.createElement(uc,{key:"label-implicit",content:e,viewBox:a}):Un(e)?Ot.createElement(uc,{key:"label-implicit",content:e,viewBox:a}):A1(e)?Ot.createElement(uc,mT({viewBox:a},e,{key:"label-implicit"})):null:null},Lwe=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,l=NQ(e),c=hh(i,uc).map(function(v,R){return le.cloneElement(v,{viewBox:a||l,key:"label-".concat(R)})});if(!r)return c;var n=Iwe(e.label,a||l);return[n].concat(_we(c))};uc.parseViewBox=NQ;uc.renderCallByParent=Lwe;var l5,J7;function Fwe(){if(J7)return l5;J7=1;function t(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}return l5=t,l5}var kwe=Fwe();const Uwe=ns(kwe);function gT(t){"@babel/helpers - typeof";return gT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gT(t)}var Bwe=["valueAccessor"],jwe=["data","dataKey","clockWise","id","textBreakAll"];function Gwe(t){return $we(t)||Hwe(t)||qwe(t)||Zwe()}function Zwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qwe(t,e){if(t){if(typeof t=="string")return WM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return WM(t,e)}}function Hwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $we(t){if(Array.isArray(t))return WM(t)}function WM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Ix(){return Ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ix.apply(this,arguments)}function Q7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function e9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Q7(Object(a),!0).forEach(function(r){Kwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Q7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Kwe(t,e,a){return e=Wwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Wwe(t){var e=Ywe(t,"string");return gT(e)=="symbol"?e:e+""}function Ywe(t,e){if(gT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(gT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t9(t,e){if(t==null)return{};var a=Xwe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Xwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Jwe=function(e){return Array.isArray(e.value)?Uwe(e.value):e.value};function ap(t){var e=t.valueAccessor,a=e===void 0?Jwe:e,r=t9(t,Bwe),i=r.data,l=r.dataKey,c=r.clockWise,n=r.id,v=r.textBreakAll,R=t9(r,jwe);return!i||!i.length?null:Ot.createElement(mi,{className:"recharts-label-list"},i.map(function(x,N){var L=Bn(l)?a(x,N):Io(x&&x.payload,l),F=Bn(n)?{}:{id:"".concat(n,"-").concat(N)};return Ot.createElement(uc,Ix({},cn(x,!0),R,F,{parentViewBox:x.parentViewBox,value:L,textBreakAll:v,viewBox:uc.parseViewBox(Bn(c)?x:e9(e9({},x),{},{clockWise:c})),key:"label-".concat(N),index:N}))}))}ap.displayName="LabelList";function Qwe(t,e){return t?t===!0?Ot.createElement(ap,{key:"labelList-implicit",data:e}):Ot.isValidElement(t)||Un(t)?Ot.createElement(ap,{key:"labelList-implicit",data:e,content:t}):A1(t)?Ot.createElement(ap,Ix({data:e},t,{key:"labelList-implicit"})):null:null}function eRe(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var r=t.children,i=hh(r,ap).map(function(c,n){return le.cloneElement(c,{data:e,key:"labelList-".concat(n)})});if(!a)return i;var l=Qwe(t.label,e);return[l].concat(Gwe(i))}ap.renderCallByParent=eRe;function yT(t){"@babel/helpers - typeof";return yT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yT(t)}function YM(){return YM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},YM.apply(this,arguments)}function a9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function r9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?a9(Object(a),!0).forEach(function(r){tRe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):a9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function tRe(t,e,a){return e=aRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function aRe(t){var e=rRe(t,"string");return yT(e)=="symbol"?e:e+""}function rRe(t,e){if(yT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(yT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nRe=function(e,a){var r=sh(a-e),i=Math.min(Math.abs(a-e),359.999);return r*i},YS=function(e){var a=e.cx,r=e.cy,i=e.radius,l=e.angle,c=e.sign,n=e.isExternal,v=e.cornerRadius,R=e.cornerIsExternal,x=v*(n?1:-1)+i,N=Math.asin(v/x)/Mx,L=R?l:l+c*N,F=xo(a,r,x,L),j=xo(a,r,i,L),H=R?l-c*N:l,q=xo(a,r,x*Math.cos(N*Mx),H);return{center:F,circleTangency:j,lineTangency:q,theta:N}},OQ=function(e){var a=e.cx,r=e.cy,i=e.innerRadius,l=e.outerRadius,c=e.startAngle,n=e.endAngle,v=nRe(c,n),R=c+v,x=xo(a,r,l,c),N=xo(a,r,l,R),L="M ".concat(x.x,",").concat(x.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(v)>180),",").concat(+(c>R),`,
    `).concat(N.x,",").concat(N.y,`
  `);if(i>0){var F=xo(a,r,i,c),j=xo(a,r,i,R);L+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(v)>180),",").concat(+(c<=R),`,
            `).concat(F.x,",").concat(F.y," Z")}else L+="L ".concat(a,",").concat(r," Z");return L},iRe=function(e){var a=e.cx,r=e.cy,i=e.innerRadius,l=e.outerRadius,c=e.cornerRadius,n=e.forceCornerRadius,v=e.cornerIsExternal,R=e.startAngle,x=e.endAngle,N=sh(x-R),L=YS({cx:a,cy:r,radius:l,angle:R,sign:N,cornerRadius:c,cornerIsExternal:v}),F=L.circleTangency,j=L.lineTangency,H=L.theta,q=YS({cx:a,cy:r,radius:l,angle:x,sign:-N,cornerRadius:c,cornerIsExternal:v}),W=q.circleTangency,ee=q.lineTangency,oe=q.theta,fe=v?Math.abs(R-x):Math.abs(R-x)-H-oe;if(fe<0)return n?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(c,",").concat(c,",0,0,1,").concat(c*2,`,0
        a`).concat(c,",").concat(c,",0,0,1,").concat(-c*2,`,0
      `):OQ({cx:a,cy:r,innerRadius:i,outerRadius:l,startAngle:R,endAngle:x});var se="M ".concat(j.x,",").concat(j.y,`
    A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(fe>180),",").concat(+(N<0),",").concat(W.x,",").concat(W.y,`
    A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(ee.x,",").concat(ee.y,`
  `);if(i>0){var me=YS({cx:a,cy:r,radius:i,angle:R,sign:N,isExternal:!0,cornerRadius:c,cornerIsExternal:v}),ge=me.circleTangency,Re=me.lineTangency,we=me.theta,Ee=YS({cx:a,cy:r,radius:i,angle:x,sign:-N,isExternal:!0,cornerRadius:c,cornerIsExternal:v}),ae=Ee.circleTangency,_e=Ee.lineTangency,Ie=Ee.theta,xe=v?Math.abs(R-x):Math.abs(R-x)-we-Ie;if(xe<0&&c===0)return"".concat(se,"L").concat(a,",").concat(r,"Z");se+="L".concat(_e.x,",").concat(_e.y,`
      A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(ae.x,",").concat(ae.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(xe>180),",").concat(+(N>0),",").concat(ge.x,",").concat(ge.y,`
      A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(Re.x,",").concat(Re.y,"Z")}else se+="L".concat(a,",").concat(r,"Z");return se},sRe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VQ=function(e){var a=r9(r9({},sRe),e),r=a.cx,i=a.cy,l=a.innerRadius,c=a.outerRadius,n=a.cornerRadius,v=a.forceCornerRadius,R=a.cornerIsExternal,x=a.startAngle,N=a.endAngle,L=a.className;if(c<l||x===N)return null;var F=hi("recharts-sector",L),j=c-l,H=oh(n,j,0,!0),q;return H>0&&Math.abs(x-N)<360?q=iRe({cx:r,cy:i,innerRadius:l,outerRadius:c,cornerRadius:Math.min(H,j/2),forceCornerRadius:v,cornerIsExternal:R,startAngle:x,endAngle:N}):q=OQ({cx:r,cy:i,innerRadius:l,outerRadius:c,startAngle:x,endAngle:N}),Ot.createElement("path",YM({},cn(a,!0),{className:F,d:q,role:"img"}))};function AT(t){"@babel/helpers - typeof";return AT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AT(t)}function XM(){return XM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},XM.apply(this,arguments)}function n9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function i9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(a),!0).forEach(function(r){oRe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function oRe(t,e,a){return e=lRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lRe(t){var e=uRe(t,"string");return AT(e)=="symbol"?e:e+""}function uRe(t,e){if(AT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(AT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s9={curveBasisClosed:Eme,curveBasisOpen:Nme,curveBasis:Pme,curveBumpX:pme,curveBumpY:mme,curveLinearClosed:Ome,curveLinear:yP,curveMonotoneX:Vme,curveMonotoneY:zme,curveNatural:Dme,curveStep:Mme,curveStepAfter:Lme,curveStepBefore:Ime},XS=function(e){return e.x===+e.x&&e.y===+e.y},Zw=function(e){return e.x},qw=function(e){return e.y},cRe=function(e,a){if(Un(e))return e;var r="curve".concat(mP(e));return(r==="curveMonotone"||r==="curveBump")&&a?s9["".concat(r).concat(a==="vertical"?"Y":"X")]:s9[r]||yP},dRe=function(e){var a=e.type,r=a===void 0?"linear":a,i=e.points,l=i===void 0?[]:i,c=e.baseLine,n=e.layout,v=e.connectNulls,R=v===void 0?!1:v,x=cRe(r,n),N=R?l.filter(function(H){return XS(H)}):l,L;if(Array.isArray(c)){var F=R?c.filter(function(H){return XS(H)}):c,j=N.map(function(H,q){return i9(i9({},H),{},{base:F[q]})});return n==="vertical"?L=jS().y(qw).x1(Zw).x0(function(H){return H.base.x}):L=jS().x(Zw).y1(qw).y0(function(H){return H.base.y}),L.defined(XS).curve(x),L(j)}return n==="vertical"&&Ar(c)?L=jS().y(qw).x1(Zw).x0(c):Ar(c)?L=jS().x(Zw).y1(qw).y0(c):L=NX().x(Zw).y(qw),L.defined(XS).curve(x),L(N)},Ky=function(e){var a=e.className,r=e.points,i=e.path,l=e.pathRef;if((!r||!r.length)&&!i)return null;var c=r&&r.length?dRe(e):i;return Ot.createElement("path",XM({},cn(e,!1),cx(e),{className:hi("recharts-curve",a),d:c,ref:l}))},u5={exports:{}},c5,o9;function hRe(){if(o9)return c5;o9=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return c5=t,c5}var d5,l9;function fRe(){if(l9)return d5;l9=1;var t=hRe();function e(){}function a(){}return a.resetWarningCache=e,d5=function(){function r(c,n,v,R,x,N){if(N!==t){var L=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw L.name="Invariant Violation",L}}r.isRequired=r;function i(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:e};return l.PropTypes=l,l},d5}var u9;function pRe(){return u9||(u9=1,u5.exports=fRe()()),u5.exports}var mRe=pRe();const ks=ns(mRe);var gRe=Object.getOwnPropertyNames,yRe=Object.getOwnPropertySymbols,ARe=Object.prototype.hasOwnProperty;function c9(t,e){return function(r,i,l){return t(r,i,l)&&e(r,i,l)}}function JS(t){return function(a,r,i){if(!a||!r||typeof a!="object"||typeof r!="object")return t(a,r,i);var l=i.cache,c=l.get(a),n=l.get(r);if(c&&n)return c===r&&n===a;l.set(a,r),l.set(r,a);var v=t(a,r,i);return l.delete(a),l.delete(r),v}}function d9(t){return gRe(t).concat(yRe(t))}var vRe=Object.hasOwn||function(t,e){return ARe.call(t,e)};function Hv(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var _Re="__v",wRe="__o",RRe="_owner",h9=Object.getOwnPropertyDescriptor,f9=Object.keys;function TRe(t,e,a){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!a.equals(t[r],e[r],r,r,t,e,a))return!1;return!0}function CRe(t,e){return Hv(t.getTime(),e.getTime())}function SRe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function bRe(t,e){return t===e}function p9(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),l=t.entries(),c,n,v=0;(c=l.next())&&!c.done;){for(var R=e.entries(),x=!1,N=0;(n=R.next())&&!n.done;){if(i[N]){N++;continue}var L=c.value,F=n.value;if(a.equals(L[0],F[0],v,N,t,e,a)&&a.equals(L[1],F[1],L[0],F[0],t,e,a)){x=i[N]=!0;break}N++}if(!x)return!1;v++}return!0}var xRe=Hv;function PRe(t,e,a){var r=f9(t),i=r.length;if(f9(e).length!==i)return!1;for(;i-- >0;)if(!zQ(t,e,a,r[i]))return!1;return!0}function Hw(t,e,a){var r=d9(t),i=r.length;if(d9(e).length!==i)return!1;for(var l,c,n;i-- >0;)if(l=r[i],!zQ(t,e,a,l)||(c=h9(t,l),n=h9(e,l),(c||n)&&(!c||!n||c.configurable!==n.configurable||c.enumerable!==n.enumerable||c.writable!==n.writable)))return!1;return!0}function ERe(t,e){return Hv(t.valueOf(),e.valueOf())}function NRe(t,e){return t.source===e.source&&t.flags===e.flags}function m9(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),l=t.values(),c,n;(c=l.next())&&!c.done;){for(var v=e.values(),R=!1,x=0;(n=v.next())&&!n.done;){if(!i[x]&&a.equals(c.value,n.value,c.value,n.value,t,e,a)){R=i[x]=!0;break}x++}if(!R)return!1}return!0}function ORe(t,e){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(t[a]!==e[a])return!1;return!0}function VRe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function zQ(t,e,a,r){return(r===RRe||r===wRe||r===_Re)&&(t.$$typeof||e.$$typeof)?!0:vRe(e,r)&&a.equals(t[r],e[r],r,r,t,e,a)}var zRe="[object Arguments]",DRe="[object Boolean]",MRe="[object Date]",IRe="[object Error]",LRe="[object Map]",FRe="[object Number]",kRe="[object Object]",URe="[object RegExp]",BRe="[object Set]",jRe="[object String]",GRe="[object URL]",ZRe=Array.isArray,g9=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,y9=Object.assign,qRe=Object.prototype.toString.call.bind(Object.prototype.toString);function HRe(t){var e=t.areArraysEqual,a=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,l=t.areMapsEqual,c=t.areNumbersEqual,n=t.areObjectsEqual,v=t.arePrimitiveWrappersEqual,R=t.areRegExpsEqual,x=t.areSetsEqual,N=t.areTypedArraysEqual,L=t.areUrlsEqual;return function(j,H,q){if(j===H)return!0;if(j==null||H==null)return!1;var W=typeof j;if(W!==typeof H)return!1;if(W!=="object")return W==="number"?c(j,H,q):W==="function"?i(j,H,q):!1;var ee=j.constructor;if(ee!==H.constructor)return!1;if(ee===Object)return n(j,H,q);if(ZRe(j))return e(j,H,q);if(g9!=null&&g9(j))return N(j,H,q);if(ee===Date)return a(j,H,q);if(ee===RegExp)return R(j,H,q);if(ee===Map)return l(j,H,q);if(ee===Set)return x(j,H,q);var oe=qRe(j);return oe===MRe?a(j,H,q):oe===URe?R(j,H,q):oe===LRe?l(j,H,q):oe===BRe?x(j,H,q):oe===kRe?typeof j.then!="function"&&typeof H.then!="function"&&n(j,H,q):oe===GRe?L(j,H,q):oe===IRe?r(j,H,q):oe===zRe?n(j,H,q):oe===DRe||oe===FRe||oe===jRe?v(j,H,q):!1}}function $Re(t){var e=t.circular,a=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Hw:TRe,areDatesEqual:CRe,areErrorsEqual:SRe,areFunctionsEqual:bRe,areMapsEqual:r?c9(p9,Hw):p9,areNumbersEqual:xRe,areObjectsEqual:r?Hw:PRe,arePrimitiveWrappersEqual:ERe,areRegExpsEqual:NRe,areSetsEqual:r?c9(m9,Hw):m9,areTypedArraysEqual:r?Hw:ORe,areUrlsEqual:VRe};if(a&&(i=y9({},i,a(i))),e){var l=JS(i.areArraysEqual),c=JS(i.areMapsEqual),n=JS(i.areObjectsEqual),v=JS(i.areSetsEqual);i=y9({},i,{areArraysEqual:l,areMapsEqual:c,areObjectsEqual:n,areSetsEqual:v})}return i}function KRe(t){return function(e,a,r,i,l,c,n){return t(e,a,n)}}function WRe(t){var e=t.circular,a=t.comparator,r=t.createState,i=t.equals,l=t.strict;if(r)return function(v,R){var x=r(),N=x.cache,L=N===void 0?e?new WeakMap:void 0:N,F=x.meta;return a(v,R,{cache:L,equals:i,meta:F,strict:l})};if(e)return function(v,R){return a(v,R,{cache:new WeakMap,equals:i,meta:void 0,strict:l})};var c={cache:void 0,equals:i,meta:void 0,strict:l};return function(v,R){return a(v,R,c)}}var YRe=hA();hA({strict:!0});hA({circular:!0});hA({circular:!0,strict:!0});hA({createInternalComparator:function(){return Hv}});hA({strict:!0,createInternalComparator:function(){return Hv}});hA({circular:!0,createInternalComparator:function(){return Hv}});hA({circular:!0,createInternalComparator:function(){return Hv},strict:!0});function hA(t){t===void 0&&(t={});var e=t.circular,a=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,l=t.strict,c=l===void 0?!1:l,n=$Re(t),v=HRe(n),R=r?r(v):KRe(v);return WRe({circular:a,comparator:v,createState:i,equals:R,strict:c})}function XRe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function A9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function i(l){a<0&&(a=l),l-a>e?(t(l),a=-1):XRe(i)};requestAnimationFrame(r)}function JM(t){"@babel/helpers - typeof";return JM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JM(t)}function JRe(t){return aTe(t)||tTe(t)||eTe(t)||QRe()}function QRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eTe(t,e){if(t){if(typeof t=="string")return v9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v9(t,e)}}function v9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function tTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aTe(t){if(Array.isArray(t))return t}function rTe(){var t={},e=function(){return null},a=!1,r=function i(l){if(!a){if(Array.isArray(l)){if(!l.length)return;var c=l,n=JRe(c),v=n[0],R=n.slice(1);if(typeof v=="number"){A9(i.bind(null,R),v);return}i(v),A9(i.bind(null,R));return}JM(l)==="object"&&(t=l,e(t)),typeof l=="function"&&l()}};return{stop:function(){a=!0},start:function(l){a=!1,r(l)},subscribe:function(l){return e=l,function(){e=function(){return null}}}}}function vT(t){"@babel/helpers - typeof";return vT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vT(t)}function _9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function w9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?_9(Object(a),!0).forEach(function(r){DQ(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function DQ(t,e,a){return e=nTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nTe(t){var e=iTe(t,"string");return vT(e)==="symbol"?e:String(e)}function iTe(t,e){if(vT(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(vT(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sTe=function(e,a){return[Object.keys(e),Object.keys(a)].reduce(function(r,i){return r.filter(function(l){return i.includes(l)})})},oTe=function(e){return e},lTe=function(e){return e.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},TR=function(e,a){return Object.keys(a).reduce(function(r,i){return w9(w9({},r),{},DQ({},i,e(i,a[i])))},{})},R9=function(e,a,r){return e.map(function(i){return"".concat(lTe(i)," ").concat(a,"ms ").concat(r)}).join(",")};function uTe(t,e){return hTe(t)||dTe(t,e)||MQ(t,e)||cTe()}function cTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function hTe(t){if(Array.isArray(t))return t}function fTe(t){return gTe(t)||mTe(t)||MQ(t)||pTe()}function pTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MQ(t,e){if(t){if(typeof t=="string")return QM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return QM(t,e)}}function mTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gTe(t){if(Array.isArray(t))return QM(t)}function QM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var Lx=1e-4,IQ=function(e,a){return[0,3*e,3*a-6*e,3*e-3*a+1]},LQ=function(e,a){return e.map(function(r,i){return r*Math.pow(a,i)}).reduce(function(r,i){return r+i})},T9=function(e,a){return function(r){var i=IQ(e,a);return LQ(i,r)}},yTe=function(e,a){return function(r){var i=IQ(e,a),l=[].concat(fTe(i.map(function(c,n){return c*n}).slice(1)),[0]);return LQ(l,r)}},C9=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var i=a[0],l=a[1],c=a[2],n=a[3];if(a.length===1)switch(a[0]){case"linear":i=0,l=0,c=1,n=1;break;case"ease":i=.25,l=.1,c=.25,n=1;break;case"ease-in":i=.42,l=0,c=1,n=1;break;case"ease-out":i=.42,l=0,c=.58,n=1;break;case"ease-in-out":i=0,l=0,c=.58,n=1;break;default:{var v=a[0].split("(");if(v[0]==="cubic-bezier"&&v[1].split(")")[0].split(",").length===4){var R=v[1].split(")")[0].split(",").map(function(q){return parseFloat(q)}),x=uTe(R,4);i=x[0],l=x[1],c=x[2],n=x[3]}}}var N=T9(i,c),L=T9(l,n),F=yTe(i,c),j=function(W){return W>1?1:W<0?0:W},H=function(W){for(var ee=W>1?1:W,oe=ee,fe=0;fe<8;++fe){var se=N(oe)-ee,me=F(oe);if(Math.abs(se-ee)<Lx||me<Lx)return L(oe);oe=j(oe-se/me)}return L(oe)};return H.isStepper=!1,H},ATe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.stiff,r=a===void 0?100:a,i=e.damping,l=i===void 0?8:i,c=e.dt,n=c===void 0?17:c,v=function(x,N,L){var F=-(x-N)*r,j=L*l,H=L+(F-j)*n/1e3,q=L*n/1e3+x;return Math.abs(q-N)<Lx&&Math.abs(H)<Lx?[N,0]:[q,H]};return v.isStepper=!0,v.dt=n,v},vTe=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var i=a[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return C9(i);case"spring":return ATe();default:if(i.split("(")[0]==="cubic-bezier")return C9(i)}return typeof i=="function"?i:null};function _T(t){"@babel/helpers - typeof";return _T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_T(t)}function S9(t){return RTe(t)||wTe(t)||FQ(t)||_Te()}function _Te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RTe(t){if(Array.isArray(t))return tI(t)}function b9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Dc(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(a),!0).forEach(function(r){eI(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function eI(t,e,a){return e=TTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function TTe(t){var e=CTe(t,"string");return _T(e)==="symbol"?e:String(e)}function CTe(t,e){if(_T(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(_T(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function STe(t,e){return PTe(t)||xTe(t,e)||FQ(t,e)||bTe()}function bTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FQ(t,e){if(t){if(typeof t=="string")return tI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return tI(t,e)}}function tI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function xTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function PTe(t){if(Array.isArray(t))return t}var Fx=function(e,a,r){return e+(a-e)*r},aI=function(e){var a=e.from,r=e.to;return a!==r},ETe=function t(e,a,r){var i=TR(function(l,c){if(aI(c)){var n=e(c.from,c.to,c.velocity),v=STe(n,2),R=v[0],x=v[1];return Dc(Dc({},c),{},{from:R,velocity:x})}return c},a);return r<1?TR(function(l,c){return aI(c)?Dc(Dc({},c),{},{velocity:Fx(c.velocity,i[l].velocity,r),from:Fx(c.from,i[l].from,r)}):c},a):t(e,i,r-1)};const NTe=function(t,e,a,r,i){var l=sTe(t,e),c=l.reduce(function(q,W){return Dc(Dc({},q),{},eI({},W,[t[W],e[W]]))},{}),n=l.reduce(function(q,W){return Dc(Dc({},q),{},eI({},W,{from:t[W],velocity:0,to:e[W]}))},{}),v=-1,R,x,N=function(){return null},L=function(){return TR(function(W,ee){return ee.from},n)},F=function(){return!Object.values(n).filter(aI).length},j=function(W){R||(R=W);var ee=W-R,oe=ee/a.dt;n=ETe(a,n,oe),i(Dc(Dc(Dc({},t),e),L())),R=W,F()||(v=requestAnimationFrame(N))},H=function(W){x||(x=W);var ee=(W-x)/r,oe=TR(function(se,me){return Fx.apply(void 0,S9(me).concat([a(ee)]))},c);if(i(Dc(Dc(Dc({},t),e),oe)),ee<1)v=requestAnimationFrame(N);else{var fe=TR(function(se,me){return Fx.apply(void 0,S9(me).concat([a(1)]))},c);i(Dc(Dc(Dc({},t),e),fe))}};return N=a.isStepper?j:H,function(){return requestAnimationFrame(N),function(){cancelAnimationFrame(v)}}};function k_(t){"@babel/helpers - typeof";return k_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k_(t)}var OTe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function VTe(t,e){if(t==null)return{};var a=zTe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zTe(t,e){if(t==null)return{};var a={},r=Object.keys(t),i,l;for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&(a[i]=t[i]);return a}function h5(t){return LTe(t)||ITe(t)||MTe(t)||DTe()}function DTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MTe(t,e){if(t){if(typeof t=="string")return rI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return rI(t,e)}}function ITe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LTe(t){if(Array.isArray(t))return rI(t)}function rI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function x9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Dp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?x9(Object(a),!0).forEach(function(r){fR(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function fR(t,e,a){return e=kQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function FTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kTe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kQ(r.key),r)}}function UTe(t,e,a){return e&&kTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kQ(t){var e=BTe(t,"string");return k_(e)==="symbol"?e:String(e)}function BTe(t,e){if(k_(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(k_(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nI(t,e)}function nI(t,e){return nI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nI(t,e)}function GTe(t){var e=ZTe();return function(){var r=kx(t),i;if(e){var l=kx(this).constructor;i=Reflect.construct(r,arguments,l)}else i=r.apply(this,arguments);return iI(this,i)}}function iI(t,e){if(e&&(k_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sI(t)}function sI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},kx(t)}var np=function(t){jTe(a,t);var e=GTe(a);function a(r,i){var l;FTe(this,a),l=e.call(this,r,i);var c=l.props,n=c.isActive,v=c.attributeName,R=c.from,x=c.to,N=c.steps,L=c.children,F=c.duration;if(l.handleStyleChange=l.handleStyleChange.bind(sI(l)),l.changeStyle=l.changeStyle.bind(sI(l)),!n||F<=0)return l.state={style:{}},typeof L=="function"&&(l.state={style:x}),iI(l);if(N&&N.length)l.state={style:N[0].style};else if(R){if(typeof L=="function")return l.state={style:R},iI(l);l.state={style:v?fR({},v,R):R}}else l.state={style:{}};return l}return UTe(a,[{key:"componentDidMount",value:function(){var i=this.props,l=i.isActive,c=i.canBegin;this.mounted=!0,!(!l||!c)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var l=this.props,c=l.isActive,n=l.canBegin,v=l.attributeName,R=l.shouldReAnimate,x=l.to,N=l.from,L=this.state.style;if(n){if(!c){var F={style:v?fR({},v,x):x};this.state&&L&&(v&&L[v]!==x||!v&&L!==x)&&this.setState(F);return}if(!(YRe(i.to,x)&&i.canBegin&&i.isActive)){var j=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var H=j||R?N:i.to;if(this.state&&L){var q={style:v?fR({},v,H):H};(v&&L[v]!==H||!v&&L!==H)&&this.setState(q)}this.runAnimation(Dp(Dp({},this.props),{},{from:H,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var l=this,c=i.from,n=i.to,v=i.duration,R=i.easing,x=i.begin,N=i.onAnimationEnd,L=i.onAnimationStart,F=NTe(c,n,vTe(R),v,this.changeStyle),j=function(){l.stopJSAnimation=F()};this.manager.start([L,x,j,v,N])}},{key:"runStepAnimation",value:function(i){var l=this,c=i.steps,n=i.begin,v=i.onAnimationStart,R=c[0],x=R.style,N=R.duration,L=N===void 0?0:N,F=function(H,q,W){if(W===0)return H;var ee=q.duration,oe=q.easing,fe=oe===void 0?"ease":oe,se=q.style,me=q.properties,ge=q.onAnimationEnd,Re=W>0?c[W-1]:q,we=me||Object.keys(se);if(typeof fe=="function"||fe==="spring")return[].concat(h5(H),[l.runJSAnimation.bind(l,{from:Re.style,to:se,duration:ee,easing:fe}),ee]);var Ee=R9(we,ee,fe),ae=Dp(Dp(Dp({},Re.style),se),{},{transition:Ee});return[].concat(h5(H),[ae,ee,ge]).filter(oTe)};return this.manager.start([v].concat(h5(c.reduce(F,[x,Math.max(L,n)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=rTe());var l=i.begin,c=i.duration,n=i.attributeName,v=i.to,R=i.easing,x=i.onAnimationStart,N=i.onAnimationEnd,L=i.steps,F=i.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof R=="function"||typeof F=="function"||R==="spring"){this.runJSAnimation(i);return}if(L.length>1){this.runStepAnimation(i);return}var H=n?fR({},n,v):v,q=R9(Object.keys(H),c,R);j.start([x,l,Dp(Dp({},H),{},{transition:q}),c,N])}},{key:"render",value:function(){var i=this.props,l=i.children;i.begin;var c=i.duration;i.attributeName,i.easing;var n=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var v=VTe(i,OTe),R=le.Children.count(l),x=this.state.style;if(typeof l=="function")return l(x);if(!n||R===0||c<=0)return l;var N=function(F){var j=F.props,H=j.style,q=H===void 0?{}:H,W=j.className,ee=le.cloneElement(F,Dp(Dp({},v),{},{style:Dp(Dp({},q),x),className:W}));return ee};return R===1?N(le.Children.only(l)):Ot.createElement("div",null,le.Children.map(l,function(L){return N(L)}))}}]),a}(le.PureComponent);np.displayName="Animate";np.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};np.propTypes={from:ks.oneOfType([ks.object,ks.string]),to:ks.oneOfType([ks.object,ks.string]),attributeName:ks.string,duration:ks.number,begin:ks.number,easing:ks.oneOfType([ks.string,ks.func]),steps:ks.arrayOf(ks.shape({duration:ks.number.isRequired,style:ks.object.isRequired,easing:ks.oneOfType([ks.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ks.func]),properties:ks.arrayOf("string"),onAnimationEnd:ks.func})),children:ks.oneOfType([ks.node,ks.func]),isActive:ks.bool,canBegin:ks.bool,onAnimationEnd:ks.func,shouldReAnimate:ks.bool,onAnimationStart:ks.func,onAnimationReStart:ks.func};function wT(t){"@babel/helpers - typeof";return wT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wT(t)}function Ux(){return Ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ux.apply(this,arguments)}function qTe(t,e){return WTe(t)||KTe(t,e)||$Te(t,e)||HTe()}function HTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Te(t,e){if(t){if(typeof t=="string")return P9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P9(t,e)}}function P9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function KTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function WTe(t){if(Array.isArray(t))return t}function E9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function N9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?E9(Object(a),!0).forEach(function(r){YTe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function YTe(t,e,a){return e=XTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function XTe(t){var e=JTe(t,"string");return wT(e)=="symbol"?e:e+""}function JTe(t,e){if(wT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(wT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O9=function(e,a,r,i,l){var c=Math.min(Math.abs(r)/2,Math.abs(i)/2),n=i>=0?1:-1,v=r>=0?1:-1,R=i>=0&&r>=0||i<0&&r<0?1:0,x;if(c>0&&l instanceof Array){for(var N=[0,0,0,0],L=0,F=4;L<F;L++)N[L]=l[L]>c?c:l[L];x="M".concat(e,",").concat(a+n*N[0]),N[0]>0&&(x+="A ".concat(N[0],",").concat(N[0],",0,0,").concat(R,",").concat(e+v*N[0],",").concat(a)),x+="L ".concat(e+r-v*N[1],",").concat(a),N[1]>0&&(x+="A ".concat(N[1],",").concat(N[1],",0,0,").concat(R,`,
        `).concat(e+r,",").concat(a+n*N[1])),x+="L ".concat(e+r,",").concat(a+i-n*N[2]),N[2]>0&&(x+="A ".concat(N[2],",").concat(N[2],",0,0,").concat(R,`,
        `).concat(e+r-v*N[2],",").concat(a+i)),x+="L ".concat(e+v*N[3],",").concat(a+i),N[3]>0&&(x+="A ".concat(N[3],",").concat(N[3],",0,0,").concat(R,`,
        `).concat(e,",").concat(a+i-n*N[3])),x+="Z"}else if(c>0&&l===+l&&l>0){var j=Math.min(c,l);x="M ".concat(e,",").concat(a+n*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e+v*j,",").concat(a,`
            L `).concat(e+r-v*j,",").concat(a,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e+r,",").concat(a+n*j,`
            L `).concat(e+r,",").concat(a+i-n*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e+r-v*j,",").concat(a+i,`
            L `).concat(e+v*j,",").concat(a+i,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e,",").concat(a+i-n*j," Z")}else x="M ".concat(e,",").concat(a," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return x},QTe=function(e,a){if(!e||!a)return!1;var r=e.x,i=e.y,l=a.x,c=a.y,n=a.width,v=a.height;if(Math.abs(n)>0&&Math.abs(v)>0){var R=Math.min(l,l+n),x=Math.max(l,l+n),N=Math.min(c,c+v),L=Math.max(c,c+v);return r>=R&&r<=x&&i>=N&&i<=L}return!1},eCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},T4=function(e){var a=N9(N9({},eCe),e),r=le.useRef(),i=le.useState(-1),l=qTe(i,2),c=l[0],n=l[1];le.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var fe=r.current.getTotalLength();fe&&n(fe)}catch{}},[]);var v=a.x,R=a.y,x=a.width,N=a.height,L=a.radius,F=a.className,j=a.animationEasing,H=a.animationDuration,q=a.animationBegin,W=a.isAnimationActive,ee=a.isUpdateAnimationActive;if(v!==+v||R!==+R||x!==+x||N!==+N||x===0||N===0)return null;var oe=hi("recharts-rectangle",F);return ee?Ot.createElement(np,{canBegin:c>0,from:{width:x,height:N,x:v,y:R},to:{width:x,height:N,x:v,y:R},duration:H,animationEasing:j,isActive:ee},function(fe){var se=fe.width,me=fe.height,ge=fe.x,Re=fe.y;return Ot.createElement(np,{canBegin:c>0,from:"0px ".concat(c===-1?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:q,duration:H,isActive:W,easing:j},Ot.createElement("path",Ux({},cn(a,!0),{className:oe,d:O9(ge,Re,se,me,L),ref:r})))}):Ot.createElement("path",Ux({},cn(a,!0),{className:oe,d:O9(v,R,x,N,L)}))},tCe=["points","className","baseLinePoints","connectNulls"];function J0(){return J0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},J0.apply(this,arguments)}function aCe(t,e){if(t==null)return{};var a=rCe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function V9(t){return oCe(t)||sCe(t)||iCe(t)||nCe()}function nCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iCe(t,e){if(t){if(typeof t=="string")return oI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oI(t,e)}}function sCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oCe(t){if(Array.isArray(t))return oI(t)}function oI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var z9=function(e){return e&&e.x===+e.x&&e.y===+e.y},lCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){z9(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),z9(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},CR=function(e,a){var r=lCe(e);a&&(r=[r.reduce(function(l,c){return[].concat(V9(l),V9(c))},[])]);var i=r.map(function(l){return l.reduce(function(c,n,v){return"".concat(c).concat(v===0?"M":"L").concat(n.x,",").concat(n.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},uCe=function(e,a,r){var i=CR(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(CR(a.reverse(),r).slice(1))},cCe=function(e){var a=e.points,r=e.className,i=e.baseLinePoints,l=e.connectNulls,c=aCe(e,tCe);if(!a||!a.length)return null;var n=hi("recharts-polygon",r);if(i&&i.length){var v=c.stroke&&c.stroke!=="none",R=uCe(a,i,l);return Ot.createElement("g",{className:n},Ot.createElement("path",J0({},cn(c,!0),{fill:R.slice(-1)==="Z"?c.fill:"none",stroke:"none",d:R})),v?Ot.createElement("path",J0({},cn(c,!0),{fill:"none",d:CR(a,l)})):null,v?Ot.createElement("path",J0({},cn(c,!0),{fill:"none",d:CR(i,l)})):null)}var x=CR(a,l);return Ot.createElement("path",J0({},cn(c,!0),{fill:x.slice(-1)==="Z"?c.fill:"none",className:n,d:x}))};function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},lI.apply(this,arguments)}var gC=function(e){var a=e.cx,r=e.cy,i=e.r,l=e.className,c=hi("recharts-dot",l);return a===+a&&r===+r&&i===+i?Ot.createElement("circle",lI({},cn(e,!1),cx(e),{className:c,cx:a,cy:r,r:i})):null};function RT(t){"@babel/helpers - typeof";return RT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RT(t)}var dCe=["x","y","top","left","width","height","className"];function uI(){return uI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},uI.apply(this,arguments)}function D9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function hCe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(a),!0).forEach(function(r){fCe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function fCe(t,e,a){return e=pCe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pCe(t){var e=mCe(t,"string");return RT(e)=="symbol"?e:e+""}function mCe(t,e){if(RT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(RT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gCe(t,e){if(t==null)return{};var a=yCe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function yCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var ACe=function(e,a,r,i,l,c){return"M".concat(e,",").concat(l,"v").concat(i,"M").concat(c,",").concat(a,"h").concat(r)},vCe=function(e){var a=e.x,r=a===void 0?0:a,i=e.y,l=i===void 0?0:i,c=e.top,n=c===void 0?0:c,v=e.left,R=v===void 0?0:v,x=e.width,N=x===void 0?0:x,L=e.height,F=L===void 0?0:L,j=e.className,H=gCe(e,dCe),q=hCe({x:r,y:l,top:n,left:R,width:N,height:F},H);return!Ar(r)||!Ar(l)||!Ar(N)||!Ar(F)||!Ar(n)||!Ar(R)?null:Ot.createElement("path",uI({},cn(q,!0),{className:hi("recharts-cross",j),d:ACe(r,l,N,F,n,R)}))},f5,M9;function _Ce(){if(M9)return f5;M9=1;var t=EP(),e=eQ(),a=Ym();function r(i,l){return i&&i.length?t(i,a(l,2),e):void 0}return f5=r,f5}var wCe=_Ce();const RCe=ns(wCe);var p5,I9;function TCe(){if(I9)return p5;I9=1;var t=EP(),e=Ym(),a=tQ();function r(i,l){return i&&i.length?t(i,e(l,2),a):void 0}return p5=r,p5}var CCe=TCe();const SCe=ns(CCe);var bCe=["cx","cy","angle","ticks","axisLine"],xCe=["ticks","tick","angle","tickFormatter","stroke"];function U_(t){"@babel/helpers - typeof";return U_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U_(t)}function SR(){return SR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},SR.apply(this,arguments)}function L9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function QA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(a),!0).forEach(function(r){zP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function F9(t,e){if(t==null)return{};var a=PCe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function PCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ECe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BQ(r.key),r)}}function NCe(t,e,a){return e&&k9(t.prototype,e),a&&k9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function OCe(t,e,a){return e=Bx(e),VCe(t,UQ()?Reflect.construct(e,a||[],Bx(t).constructor):e.apply(t,a))}function VCe(t,e){if(e&&(U_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zCe(t)}function zCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UQ=function(){return!!t})()}function Bx(t){return Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Bx(t)}function DCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cI(t,e)}function cI(t,e){return cI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cI(t,e)}function zP(t,e,a){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function BQ(t){var e=MCe(t,"string");return U_(e)=="symbol"?e:e+""}function MCe(t,e){if(U_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(U_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DP=function(t){function e(){return ECe(this,e),OCe(this,e,arguments)}return DCe(e,t),NCe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,l=this.props,c=l.angle,n=l.cx,v=l.cy;return xo(n,v,i,c)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.angle,n=r.ticks,v=RCe(n,function(x){return x.coordinate||0}),R=SCe(n,function(x){return x.coordinate||0});return{cx:i,cy:l,startAngle:c,endAngle:c,innerRadius:R.coordinate||0,outerRadius:v.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.angle,n=r.ticks,v=r.axisLine,R=F9(r,bCe),x=n.reduce(function(j,H){return[Math.min(j[0],H.coordinate),Math.max(j[1],H.coordinate)]},[1/0,-1/0]),N=xo(i,l,x[0],c),L=xo(i,l,x[1],c),F=QA(QA(QA({},cn(R,!1)),{},{fill:"none"},cn(v,!1)),{},{x1:N.x,y1:N.y,x2:L.x,y2:L.y});return Ot.createElement("line",SR({className:"recharts-polar-radius-axis-line"},F))}},{key:"renderTicks",value:function(){var r=this,i=this.props,l=i.ticks,c=i.tick,n=i.angle,v=i.tickFormatter,R=i.stroke,x=F9(i,xCe),N=this.getTickTextAnchor(),L=cn(x,!1),F=cn(c,!1),j=l.map(function(H,q){var W=r.getTickValueCoord(H),ee=QA(QA(QA(QA({textAnchor:N,transform:"rotate(".concat(90-n,", ").concat(W.x,", ").concat(W.y,")")},L),{},{stroke:"none",fill:R},F),{},{index:q},W),{},{payload:H});return Ot.createElement(mi,SR({className:hi("recharts-polar-radius-axis-tick",EQ(c)),key:"tick-".concat(H.coordinate)},Jy(r.props,H,q)),e.renderTickItem(c,ee,v?v(H.value,q):H.value))});return Ot.createElement(mi,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var r=this.props,i=r.ticks,l=r.axisLine,c=r.tick;return!i||!i.length?null:Ot.createElement(mi,{className:hi("recharts-polar-radius-axis",this.props.className)},l&&this.renderAxisLine(),c&&this.renderTicks(),uc.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Ot.isValidElement(r)?c=Ot.cloneElement(r,i):Un(r)?c=r(i):c=Ot.createElement(Vv,SR({},i,{className:"recharts-polar-radius-axis-tick-value"}),l),c}}])}(le.PureComponent);zP(DP,"displayName","PolarRadiusAxis");zP(DP,"axisType","radiusAxis");zP(DP,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function B_(t){"@babel/helpers - typeof";return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B_(t)}function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},sv.apply(this,arguments)}function U9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ev(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(a),!0).forEach(function(r){MP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ICe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GQ(r.key),r)}}function LCe(t,e,a){return e&&B9(t.prototype,e),a&&B9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function FCe(t,e,a){return e=jx(e),kCe(t,jQ()?Reflect.construct(e,a||[],jx(t).constructor):e.apply(t,a))}function kCe(t,e){if(e&&(B_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UCe(t)}function UCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jQ=function(){return!!t})()}function jx(t){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},jx(t)}function BCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dI(t,e)}function dI(t,e){return dI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dI(t,e)}function MP(t,e,a){return e=GQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function GQ(t){var e=jCe(t,"string");return B_(e)=="symbol"?e:e+""}function jCe(t,e){if(B_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(B_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var GCe=Math.PI/180,ZCe=1e-5,IP=function(t){function e(){return ICe(this,e),FCe(this,e,arguments)}return BCe(e,t),LCe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,l=i.cx,c=i.cy,n=i.radius,v=i.orientation,R=i.tickSize,x=R||8,N=xo(l,c,n,r.coordinate),L=xo(l,c,n+(v==="inner"?-1:1)*x,r.coordinate);return{x1:N.x,y1:N.y,x2:L.x,y2:L.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,l=Math.cos(-r.coordinate*GCe),c;return l>ZCe?c=i==="outer"?"start":"end":l<-1e-5?c=i==="outer"?"end":"start":c="middle",c}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.radius,n=r.axisLine,v=r.axisLineType,R=ev(ev({},cn(this.props,!1)),{},{fill:"none"},cn(n,!1));if(v==="circle")return Ot.createElement(gC,sv({className:"recharts-polar-angle-axis-line"},R,{cx:i,cy:l,r:c}));var x=this.props.ticks,N=x.map(function(L){return xo(i,l,c,L.coordinate)});return Ot.createElement(cCe,sv({className:"recharts-polar-angle-axis-line"},R,{points:N}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,l=i.ticks,c=i.tick,n=i.tickLine,v=i.tickFormatter,R=i.stroke,x=cn(this.props,!1),N=cn(c,!1),L=ev(ev({},x),{},{fill:"none"},cn(n,!1)),F=l.map(function(j,H){var q=r.getTickLineCoord(j),W=r.getTickTextAnchor(j),ee=ev(ev(ev({textAnchor:W},x),{},{stroke:"none",fill:R},N),{},{index:H,payload:j,x:q.x2,y:q.y2});return Ot.createElement(mi,sv({className:hi("recharts-polar-angle-axis-tick",EQ(c)),key:"tick-".concat(j.coordinate)},Jy(r.props,j,H)),n&&Ot.createElement("line",sv({className:"recharts-polar-angle-axis-tick-line"},L,q)),c&&e.renderTickItem(c,ee,v?v(j.value,H):j.value))});return Ot.createElement(mi,{className:"recharts-polar-angle-axis-ticks"},F)}},{key:"render",value:function(){var r=this.props,i=r.ticks,l=r.radius,c=r.axisLine;return l<=0||!i||!i.length?null:Ot.createElement(mi,{className:hi("recharts-polar-angle-axis",this.props.className)},c&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Ot.isValidElement(r)?c=Ot.cloneElement(r,i):Un(r)?c=r(i):c=Ot.createElement(Vv,sv({},i,{className:"recharts-polar-angle-axis-tick-value"}),l),c}}])}(le.PureComponent);MP(IP,"displayName","PolarAngleAxis");MP(IP,"axisType","angleAxis");MP(IP,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var m5,j9;function qCe(){if(j9)return m5;j9=1;var t=QX(),e=t(Object.getPrototypeOf,Object);return m5=e,m5}var g5,G9;function HCe(){if(G9)return g5;G9=1;var t=Ug(),e=qCe(),a=Bg(),r="[object Object]",i=Function.prototype,l=Object.prototype,c=i.toString,n=l.hasOwnProperty,v=c.call(Object);function R(x){if(!a(x)||t(x)!=r)return!1;var N=e(x);if(N===null)return!0;var L=n.call(N,"constructor")&&N.constructor;return typeof L=="function"&&L instanceof L&&c.call(L)==v}return g5=R,g5}var $Ce=HCe();const KCe=ns($Ce);var y5,Z9;function WCe(){if(Z9)return y5;Z9=1;var t=Ug(),e=Bg(),a="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==a}return y5=r,y5}var YCe=WCe();const XCe=ns(YCe);function TT(t){"@babel/helpers - typeof";return TT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TT(t)}function Gx(){return Gx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Gx.apply(this,arguments)}function JCe(t,e){return aSe(t)||tSe(t,e)||eSe(t,e)||QCe()}function QCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eSe(t,e){if(t){if(typeof t=="string")return q9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return q9(t,e)}}function q9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function tSe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function aSe(t){if(Array.isArray(t))return t}function H9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function $9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?H9(Object(a),!0).forEach(function(r){rSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function rSe(t,e,a){return e=nSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nSe(t){var e=iSe(t,"string");return TT(e)=="symbol"?e:e+""}function iSe(t,e){if(TT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(TT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K9=function(e,a,r,i,l){var c=r-i,n;return n="M ".concat(e,",").concat(a),n+="L ".concat(e+r,",").concat(a),n+="L ".concat(e+r-c/2,",").concat(a+l),n+="L ".concat(e+r-c/2-i,",").concat(a+l),n+="L ".concat(e,",").concat(a," Z"),n},sSe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oSe=function(e){var a=$9($9({},sSe),e),r=le.useRef(),i=le.useState(-1),l=JCe(i,2),c=l[0],n=l[1];le.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var oe=r.current.getTotalLength();oe&&n(oe)}catch{}},[]);var v=a.x,R=a.y,x=a.upperWidth,N=a.lowerWidth,L=a.height,F=a.className,j=a.animationEasing,H=a.animationDuration,q=a.animationBegin,W=a.isUpdateAnimationActive;if(v!==+v||R!==+R||x!==+x||N!==+N||L!==+L||x===0&&N===0||L===0)return null;var ee=hi("recharts-trapezoid",F);return W?Ot.createElement(np,{canBegin:c>0,from:{upperWidth:0,lowerWidth:0,height:L,x:v,y:R},to:{upperWidth:x,lowerWidth:N,height:L,x:v,y:R},duration:H,animationEasing:j,isActive:W},function(oe){var fe=oe.upperWidth,se=oe.lowerWidth,me=oe.height,ge=oe.x,Re=oe.y;return Ot.createElement(np,{canBegin:c>0,from:"0px ".concat(c===-1?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:q,duration:H,easing:j},Ot.createElement("path",Gx({},cn(a,!0),{className:ee,d:K9(ge,Re,fe,se,me),ref:r})))}):Ot.createElement("g",null,Ot.createElement("path",Gx({},cn(a,!0),{className:ee,d:K9(v,R,x,N,L)})))},lSe=["option","shapeType","propTransformer","activeClassName","isActive"];function CT(t){"@babel/helpers - typeof";return CT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CT(t)}function uSe(t,e){if(t==null)return{};var a=cSe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function W9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Zx(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?W9(Object(a),!0).forEach(function(r){dSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function dSe(t,e,a){return e=hSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function hSe(t){var e=fSe(t,"string");return CT(e)=="symbol"?e:e+""}function fSe(t,e){if(CT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(CT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pSe(t,e){return Zx(Zx({},e),t)}function mSe(t,e){return t==="symbols"}function Y9(t){var e=t.shapeType,a=t.elementProps;switch(e){case"rectangle":return Ot.createElement(T4,a);case"trapezoid":return Ot.createElement(oSe,a);case"sector":return Ot.createElement(VQ,a);case"symbols":if(mSe(e))return Ot.createElement(vP,a);break;default:return null}}function gSe(t){return le.isValidElement(t)?t.props:t}function qx(t){var e=t.option,a=t.shapeType,r=t.propTransformer,i=r===void 0?pSe:r,l=t.activeClassName,c=l===void 0?"recharts-active-shape":l,n=t.isActive,v=uSe(t,lSe),R;if(le.isValidElement(e))R=le.cloneElement(e,Zx(Zx({},v),gSe(e)));else if(Un(e))R=e(v);else if(KCe(e)&&!XCe(e)){var x=i(e,v);R=Ot.createElement(Y9,{shapeType:a,elementProps:x})}else{var N=v;R=Ot.createElement(Y9,{shapeType:a,elementProps:N})}return n?Ot.createElement(mi,{className:c},R):R}function LP(t,e){return e!=null&&"trapezoids"in t.props}function FP(t,e){return e!=null&&"sectors"in t.props}function ST(t,e){return e!=null&&"points"in t.props}function ySe(t,e){var a,r,i=t.x===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===e.x,l=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&l}function ASe(t,e){var a=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return a&&r}function vSe(t,e){var a=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return a&&r&&i}function _Se(t,e){var a;return LP(t,e)?a=ySe:FP(t,e)?a=ASe:ST(t,e)&&(a=vSe),a}function wSe(t,e){var a;return LP(t,e)?a="trapezoids":FP(t,e)?a="sectors":ST(t,e)&&(a="points"),a}function RSe(t,e){if(LP(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(FP(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return ST(t,e)?e.payload:{}}function TSe(t){var e=t.activeTooltipItem,a=t.graphicalItem,r=t.itemData,i=wSe(a,e),l=RSe(a,e),c=r.filter(function(v,R){var x=Qy(l,v),N=a.props[i].filter(function(j){var H=_Se(a,e);return H(j,e)}),L=a.props[i].indexOf(N[N.length-1]),F=R===L;return x&&F}),n=r.indexOf(c[c.length-1]);return n}var Cb;function j_(t){"@babel/helpers - typeof";return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j_(t)}function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Q0.apply(this,arguments)}function X9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function So(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X9(Object(a),!0).forEach(function(r){Qf(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function CSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qQ(r.key),r)}}function SSe(t,e,a){return e&&J9(t.prototype,e),a&&J9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function bSe(t,e,a){return e=Hx(e),xSe(t,ZQ()?Reflect.construct(e,a||[],Hx(t).constructor):e.apply(t,a))}function xSe(t,e){if(e&&(j_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PSe(t)}function PSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZQ=function(){return!!t})()}function Hx(t){return Hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Hx(t)}function ESe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hI(t,e)}function hI(t,e){return hI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hI(t,e)}function Qf(t,e,a){return e=qQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qQ(t){var e=NSe(t,"string");return j_(e)=="symbol"?e:e+""}function NSe(t,e){if(j_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(j_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zg=function(t){function e(a){var r;return CSe(this,e),r=bSe(this,e,[a]),Qf(r,"pieRef",null),Qf(r,"sectorRefs",[]),Qf(r,"id",uA("recharts-pie-")),Qf(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Un(i)&&i()}),Qf(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Un(i)&&i()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return ESe(e,t),SSe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.label,n=l.labelLine,v=l.dataKey,R=l.valueKey,x=cn(this.props,!1),N=cn(c,!1),L=cn(n,!1),F=c&&c.offsetRadius||20,j=r.map(function(H,q){var W=(H.startAngle+H.endAngle)/2,ee=xo(H.cx,H.cy,H.outerRadius+F,W),oe=So(So(So(So({},x),H),{},{stroke:"none"},N),{},{index:q,textAnchor:e.getTextAnchor(ee.x,H.cx)},ee),fe=So(So(So(So({},x),H),{},{fill:"none",stroke:H.fill},L),{},{index:q,points:[xo(H.cx,H.cy,H.outerRadius,W),ee]}),se=v;return Bn(v)&&Bn(R)?se="value":Bn(v)&&(se=R),Ot.createElement(mi,{key:"label-".concat(H.startAngle,"-").concat(H.endAngle,"-").concat(H.midAngle,"-").concat(q)},n&&e.renderLabelLineItem(n,fe,"line"),e.renderLabelItem(c,oe,Io(H,se)))});return Ot.createElement(mi,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(r){var i=this,l=this.props,c=l.activeShape,n=l.blendStroke,v=l.inactiveShape;return r.map(function(R,x){if((R==null?void 0:R.startAngle)===0&&(R==null?void 0:R.endAngle)===0&&r.length!==1)return null;var N=i.isActiveIndex(x),L=v&&i.hasActiveIndex()?v:null,F=N?c:L,j=So(So({},R),{},{stroke:n?R.fill:R.stroke,tabIndex:-1});return Ot.createElement(mi,Q0({ref:function(q){q&&!i.sectorRefs.includes(q)&&i.sectorRefs.push(q)},tabIndex:-1,className:"recharts-pie-sector"},Jy(i.props,R,x),{key:"sector-".concat(R==null?void 0:R.startAngle,"-").concat(R==null?void 0:R.endAngle,"-").concat(R.midAngle,"-").concat(x)}),Ot.createElement(qx,Q0({option:F,isActive:N,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,l=i.sectors,c=i.isAnimationActive,n=i.animationBegin,v=i.animationDuration,R=i.animationEasing,x=i.animationId,N=this.state,L=N.prevSectors,F=N.prevIsAnimationActive;return Ot.createElement(np,{begin:n,duration:v,isActive:c,easing:R,from:{t:0},to:{t:1},key:"pie-".concat(x,"-").concat(F),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var H=j.t,q=[],W=l&&l[0],ee=W.startAngle;return l.forEach(function(oe,fe){var se=L&&L[fe],me=fe>0?vf(oe,"paddingAngle",0):0;if(se){var ge=pl(se.endAngle-se.startAngle,oe.endAngle-oe.startAngle),Re=So(So({},oe),{},{startAngle:ee+me,endAngle:ee+ge(H)+me});q.push(Re),ee=Re.endAngle}else{var we=oe.endAngle,Ee=oe.startAngle,ae=pl(0,we-Ee),_e=ae(H),Ie=So(So({},oe),{},{startAngle:ee+me,endAngle:ee+_e+me});q.push(Ie),ee=Ie.endAngle}}),Ot.createElement(mi,null,r.renderSectorsStatically(q))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(l){if(!l.altKey)switch(l.key){case"ArrowLeft":{var c=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"ArrowRight":{var n=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[n].focus(),i.setState({sectorToFocus:n});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,l=r.isAnimationActive,c=this.state.prevSectors;return l&&i&&i.length&&(!c||!Qy(c,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,l=i.hide,c=i.sectors,n=i.className,v=i.label,R=i.cx,x=i.cy,N=i.innerRadius,L=i.outerRadius,F=i.isAnimationActive,j=this.state.isAnimationFinished;if(l||!c||!c.length||!Ar(R)||!Ar(x)||!Ar(N)||!Ar(L))return null;var H=hi("recharts-pie",n);return Ot.createElement(mi,{tabIndex:this.props.rootTabIndex,className:H,ref:function(W){r.pieRef=W}},this.renderSectors(),v&&this.renderLabels(c),uc.renderCallByParent(this.props,null,!1),(!F||j)&&ap.renderCallByParent(this.props,c,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,l){if(Ot.isValidElement(r))return Ot.cloneElement(r,i);if(Un(r))return r(i);var c=hi("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return Ot.createElement(Ky,Q0({},i,{key:l,type:"linear",className:c}))}},{key:"renderLabelItem",value:function(r,i,l){if(Ot.isValidElement(r))return Ot.cloneElement(r,i);var c=l;if(Un(r)&&(c=r(i),Ot.isValidElement(c)))return c;var n=hi("recharts-pie-label-text",typeof r!="boolean"&&!Un(r)?r.className:"");return Ot.createElement(Vv,Q0({},i,{alignmentBaseline:"middle",className:n}),c)}}])}(le.PureComponent);Cb=Zg;Qf(Zg,"displayName","Pie");Qf(Zg,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jg.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Qf(Zg,"parseDeltaAngle",function(t,e){var a=sh(e-t),r=Math.min(Math.abs(e-t),360);return a*r});Qf(Zg,"getRealPieData",function(t){var e=t.data,a=t.children,r=cn(t,!1),i=hh(a,z_);return e&&e.length?e.map(function(l,c){return So(So(So({payload:l},r),l),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(l){return So(So({},r),l.props)}):[]});Qf(Zg,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,i=e.width,l=e.height,c=PQ(i,l),n=r+oh(t.cx,i,i/2),v=a+oh(t.cy,l,l/2),R=oh(t.innerRadius,c,0),x=oh(t.outerRadius,c,c*.8),N=t.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:n,cy:v,innerRadius:R,outerRadius:x,maxRadius:N}});Qf(Zg,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?So(So({},e.type.defaultProps),e.props):e.props,i=Cb.getRealPieData(r);if(!i||!i.length)return null;var l=r.cornerRadius,c=r.startAngle,n=r.endAngle,v=r.paddingAngle,R=r.dataKey,x=r.nameKey,N=r.valueKey,L=r.tooltipType,F=Math.abs(r.minAngle),j=Cb.parseCoordinateOfPie(r,a),H=Cb.parseDeltaAngle(c,n),q=Math.abs(H),W=R;Bn(R)&&Bn(N)?(Zp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),W="value"):Bn(R)&&(Zp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),W=N);var ee=i.filter(function(Re){return Io(Re,W,0)!==0}).length,oe=(q>=360?ee:ee-1)*v,fe=q-ee*F-oe,se=i.reduce(function(Re,we){var Ee=Io(we,W,0);return Re+(Ar(Ee)?Ee:0)},0),me;if(se>0){var ge;me=i.map(function(Re,we){var Ee=Io(Re,W,0),ae=Io(Re,x,we),_e=(Ar(Ee)?Ee:0)/se,Ie;we?Ie=ge.endAngle+sh(H)*v*(Ee!==0?1:0):Ie=c;var xe=Ie+sh(H)*((Ee!==0?F:0)+_e*fe),ze=(Ie+xe)/2,Me=(j.innerRadius+j.outerRadius)/2,je=[{name:ae,value:Ee,payload:Re,dataKey:W,type:L}],Ue=xo(j.cx,j.cy,Me,ze);return ge=So(So(So({percent:_e,cornerRadius:l,name:ae,tooltipPayload:je,midAngle:ze,middleRadius:Me,tooltipPosition:Ue},Re),j),{},{value:Io(Re,W),startAngle:Ie,endAngle:xe,payload:Re,paddingAngle:sh(H)*v}),ge})}return So(So({},j),{},{sectors:me,data:i})});var A5,Q9;function OSe(){if(Q9)return A5;Q9=1;var t=Math.ceil,e=Math.max;function a(r,i,l,c){for(var n=-1,v=e(t((i-r)/(l||1)),0),R=Array(v);v--;)R[c?v:++n]=r,r+=l;return R}return A5=a,A5}var v5,eZ;function HQ(){if(eZ)return v5;eZ=1;var t=mJ(),e=1/0,a=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var l=i<0?-1:1;return l*a}return i===i?i:0}return v5=r,v5}var _5,tZ;function VSe(){if(tZ)return _5;tZ=1;var t=OSe(),e=RP(),a=HQ();function r(i){return function(l,c,n){return n&&typeof n!="number"&&e(l,c,n)&&(c=n=void 0),l=a(l),c===void 0?(c=l,l=0):c=a(c),n=n===void 0?l<c?1:-1:a(n),t(l,c,n,i)}}return _5=r,_5}var w5,aZ;function zSe(){if(aZ)return w5;aZ=1;var t=VSe(),e=t();return w5=e,w5}var DSe=zSe();const $x=ns(DSe);function bT(t){"@babel/helpers - typeof";return bT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bT(t)}function rZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function nZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?rZ(Object(a),!0).forEach(function(r){$Q(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function $Q(t,e,a){return e=MSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function MSe(t){var e=ISe(t,"string");return bT(e)=="symbol"?e:e+""}function ISe(t,e){if(bT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(bT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LSe=["Webkit","Moz","O","ms"],FSe=function(e,a){var r=e.replace(/(\w)/,function(l){return l.toUpperCase()}),i=LSe.reduce(function(l,c){return nZ(nZ({},l),{},$Q({},c+r,a))},{});return i[e]=a,i};function G_(t){"@babel/helpers - typeof";return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G_(t)}function Kx(){return Kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Kx.apply(this,arguments)}function iZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function R5(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?iZ(Object(a),!0).forEach(function(r){cf(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):iZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function kSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WQ(r.key),r)}}function USe(t,e,a){return e&&sZ(t.prototype,e),a&&sZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function BSe(t,e,a){return e=Wx(e),jSe(t,KQ()?Reflect.construct(e,a||[],Wx(t).constructor):e.apply(t,a))}function jSe(t,e){if(e&&(G_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GSe(t)}function GSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KQ=function(){return!!t})()}function Wx(t){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Wx(t)}function ZSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fI(t,e)}function fI(t,e){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fI(t,e)}function cf(t,e,a){return e=WQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function WQ(t){var e=qSe(t,"string");return G_(e)=="symbol"?e:e+""}function qSe(t,e){if(G_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(G_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var HSe=function(e){var a=e.data,r=e.startIndex,i=e.endIndex,l=e.x,c=e.width,n=e.travellerWidth;if(!a||!a.length)return{};var v=a.length,R=wR().domain($x(0,v)).range([l,l+c-n]),x=R.domain().map(function(N){return R(N)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:R(r),endX:R(i),scale:R,scaleValues:x}},oZ=function(e){return e.changedTouches&&!!e.changedTouches.length},Z_=function(t){function e(a){var r;return kSe(this,e),r=BSe(this,e,[a]),cf(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),cf(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),cf(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,l=i.endIndex,c=i.onDragEnd,n=i.startIndex;c==null||c({endIndex:l,startIndex:n})}),r.detachDragEndListener()}),cf(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),cf(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),cf(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),cf(r,"handleSlideDragStart",function(i){var l=oZ(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return ZSe(e,t),USe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,l=r.endX,c=this.state.scaleValues,n=this.props,v=n.gap,R=n.data,x=R.length-1,N=Math.min(i,l),L=Math.max(i,l),F=e.getIndexInRange(c,N),j=e.getIndexInRange(c,L);return{startIndex:F-F%v,endIndex:j===x?x:j-j%v}}},{key:"getTextOfTick",value:function(r){var i=this.props,l=i.data,c=i.tickFormatter,n=i.dataKey,v=Io(l[r],n,r);return Un(c)?c(v,r):v}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,l=i.slideMoveStartX,c=i.startX,n=i.endX,v=this.props,R=v.x,x=v.width,N=v.travellerWidth,L=v.startIndex,F=v.endIndex,j=v.onChange,H=r.pageX-l;H>0?H=Math.min(H,R+x-N-n,R+x-N-c):H<0&&(H=Math.max(H,R-c,R-n));var q=this.getIndex({startX:c+H,endX:n+H});(q.startIndex!==L||q.endIndex!==F)&&j&&j(q),this.setState({startX:c+H,endX:n+H,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var l=oZ(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,l=i.brushMoveStartX,c=i.movingTravellerId,n=i.endX,v=i.startX,R=this.state[c],x=this.props,N=x.x,L=x.width,F=x.travellerWidth,j=x.onChange,H=x.gap,q=x.data,W={startX:this.state.startX,endX:this.state.endX},ee=r.pageX-l;ee>0?ee=Math.min(ee,N+L-F-R):ee<0&&(ee=Math.max(ee,N-R)),W[c]=R+ee;var oe=this.getIndex(W),fe=oe.startIndex,se=oe.endIndex,me=function(){var Re=q.length-1;return c==="startX"&&(n>v?fe%H===0:se%H===0)||n<v&&se===Re||c==="endX"&&(n>v?se%H===0:fe%H===0)||n>v&&se===Re};this.setState(cf(cf({},c,R+ee),"brushMoveStartX",r.pageX),function(){j&&me()&&j(oe)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var l=this,c=this.state,n=c.scaleValues,v=c.startX,R=c.endX,x=this.state[i],N=n.indexOf(x);if(N!==-1){var L=N+r;if(!(L===-1||L>=n.length)){var F=n[L];i==="startX"&&F>=R||i==="endX"&&F<=v||this.setState(cf({},i,F),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.fill,R=r.stroke;return Ot.createElement("rect",{stroke:R,fill:v,x:i,y:l,width:c,height:n})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.data,R=r.children,x=r.padding,N=le.Children.only(R);return N?Ot.cloneElement(N,{x:i,y:l,width:c,height:n,margin:x,compact:!0,data:v}):null}},{key:"renderTravellerLayer",value:function(r,i){var l,c,n=this,v=this.props,R=v.y,x=v.travellerWidth,N=v.height,L=v.traveller,F=v.ariaLabel,j=v.data,H=v.startIndex,q=v.endIndex,W=Math.max(r,this.props.x),ee=R5(R5({},cn(this.props,!1)),{},{x:W,y:R,width:x,height:N}),oe=F||"Min value: ".concat((l=j[H])===null||l===void 0?void 0:l.name,", Max value: ").concat((c=j[q])===null||c===void 0?void 0:c.name);return Ot.createElement(mi,{tabIndex:0,role:"slider","aria-label":oe,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(se){["ArrowLeft","ArrowRight"].includes(se.key)&&(se.preventDefault(),se.stopPropagation(),n.handleTravellerMoveKeyboard(se.key==="ArrowRight"?1:-1,i))},onFocus:function(){n.setState({isTravellerFocused:!0})},onBlur:function(){n.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(L,ee))}},{key:"renderSlide",value:function(r,i){var l=this.props,c=l.y,n=l.height,v=l.stroke,R=l.travellerWidth,x=Math.min(r,i)+R,N=Math.max(Math.abs(i-r)-R,0);return Ot.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:v,fillOpacity:.2,x,y:c,width:N,height:n})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,l=r.endIndex,c=r.y,n=r.height,v=r.travellerWidth,R=r.stroke,x=this.state,N=x.startX,L=x.endX,F=5,j={pointerEvents:"none",fill:R};return Ot.createElement(mi,{className:"recharts-brush-texts"},Ot.createElement(Vv,Kx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(N,L)-F,y:c+n/2},j),this.getTextOfTick(i)),Ot.createElement(Vv,Kx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(N,L)+v+F,y:c+n/2},j),this.getTextOfTick(l)))}},{key:"render",value:function(){var r=this.props,i=r.data,l=r.className,c=r.children,n=r.x,v=r.y,R=r.width,x=r.height,N=r.alwaysShowText,L=this.state,F=L.startX,j=L.endX,H=L.isTextActive,q=L.isSlideMoving,W=L.isTravellerMoving,ee=L.isTravellerFocused;if(!i||!i.length||!Ar(n)||!Ar(v)||!Ar(R)||!Ar(x)||R<=0||x<=0)return null;var oe=hi("recharts-brush",l),fe=Ot.Children.count(c)===1,se=FSe("userSelect","none");return Ot.createElement(mi,{className:oe,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:se},this.renderBackground(),fe&&this.renderPanorama(),this.renderSlide(F,j),this.renderTravellerLayer(F,"startX"),this.renderTravellerLayer(j,"endX"),(H||q||W||ee||N)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,l=r.y,c=r.width,n=r.height,v=r.stroke,R=Math.floor(l+n/2)-1;return Ot.createElement(Ot.Fragment,null,Ot.createElement("rect",{x:i,y:l,width:c,height:n,fill:v,stroke:"none"}),Ot.createElement("line",{x1:i+1,y1:R,x2:i+c-1,y2:R,fill:"none",stroke:"#fff"}),Ot.createElement("line",{x1:i+1,y1:R+2,x2:i+c-1,y2:R+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var l;return Ot.isValidElement(r)?l=Ot.cloneElement(r,i):Un(r)?l=r(i):l=e.renderDefaultTraveller(i),l}},{key:"getDerivedStateFromProps",value:function(r,i){var l=r.data,c=r.width,n=r.x,v=r.travellerWidth,R=r.updateId,x=r.startIndex,N=r.endIndex;if(l!==i.prevData||R!==i.prevUpdateId)return R5({prevData:l,prevTravellerWidth:v,prevUpdateId:R,prevX:n,prevWidth:c},l&&l.length?HSe({data:l,width:c,x:n,travellerWidth:v,startIndex:x,endIndex:N}):{scale:null,scaleValues:null});if(i.scale&&(c!==i.prevWidth||n!==i.prevX||v!==i.prevTravellerWidth)){i.scale.range([n,n+c-v]);var L=i.scale.domain().map(function(F){return i.scale(F)});return{prevData:l,prevTravellerWidth:v,prevUpdateId:R,prevX:n,prevWidth:c,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:L}}return null}},{key:"getIndexInRange",value:function(r,i){for(var l=r.length,c=0,n=l-1;n-c>1;){var v=Math.floor((c+n)/2);r[v]>i?n=v:c=v}return i>=r[n]?n:c}}])}(le.PureComponent);cf(Z_,"displayName","Brush");cf(Z_,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var T5,lZ;function $Se(){if(lZ)return T5;lZ=1;var t=WL();function e(a,r){var i;return t(a,function(l,c,n){return i=r(l,c,n),!i}),!!i}return T5=e,T5}var C5,uZ;function KSe(){if(uZ)return C5;uZ=1;var t=HX(),e=Ym(),a=$Se(),r=kh(),i=RP();function l(c,n,v){var R=r(c)?t:a;return v&&i(c,n,v)&&(n=void 0),R(c,e(n,3))}return C5=l,C5}var WSe=KSe();const YSe=ns(WSe);var Bm=function(e,a){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===a},S5,cZ;function XSe(){if(cZ)return S5;cZ=1;var t=cJ();function e(a,r,i){r=="__proto__"&&t?t(a,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):a[r]=i}return S5=e,S5}var b5,dZ;function JSe(){if(dZ)return b5;dZ=1;var t=XSe(),e=lJ(),a=Ym();function r(i,l){var c={};return l=a(l,3),e(i,function(n,v,R){t(c,v,l(n,v,R))}),c}return b5=r,b5}var QSe=JSe();const ebe=ns(QSe);var x5,hZ;function tbe(){if(hZ)return x5;hZ=1;function t(e,a){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!a(e[r],r,e))return!1;return!0}return x5=t,x5}var P5,fZ;function abe(){if(fZ)return P5;fZ=1;var t=WL();function e(a,r){var i=!0;return t(a,function(l,c,n){return i=!!r(l,c,n),i}),i}return P5=e,P5}var E5,pZ;function rbe(){if(pZ)return E5;pZ=1;var t=tbe(),e=abe(),a=Ym(),r=kh(),i=RP();function l(c,n,v){var R=r(c)?t:e;return v&&i(c,n,v)&&(n=void 0),R(c,a(n,3))}return E5=l,E5}var nbe=rbe();const YQ=ns(nbe);var ibe=["x","y"];function xT(t){"@babel/helpers - typeof";return xT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xT(t)}function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},pI.apply(this,arguments)}function mZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function $w(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?mZ(Object(a),!0).forEach(function(r){sbe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function sbe(t,e,a){return e=obe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function obe(t){var e=lbe(t,"string");return xT(e)=="symbol"?e:e+""}function lbe(t,e){if(xT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(xT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ube(t,e){if(t==null)return{};var a=cbe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cbe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function dbe(t,e){var a=t.x,r=t.y,i=ube(t,ibe),l="".concat(a),c=parseInt(l,10),n="".concat(r),v=parseInt(n,10),R="".concat(e.height||i.height),x=parseInt(R,10),N="".concat(e.width||i.width),L=parseInt(N,10);return $w($w($w($w($w({},e),i),c?{x:c}:{}),v?{y:v}:{}),{},{height:x,width:L,name:e.name,radius:e.radius})}function gZ(t){return Ot.createElement(qx,pI({shapeType:"rectangle",propTransformer:dbe,activeClassName:"recharts-active-bar"},t))}var hbe=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var l=typeof r=="number";return l?e(r,i):(l||Dv(),a)}},fbe=["value","background"],XQ;function q_(t){"@babel/helpers - typeof";return q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q_(t)}function pbe(t,e){if(t==null)return{};var a=mbe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mbe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Yx(){return Yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Yx.apply(this,arguments)}function yZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function fu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?yZ(Object(a),!0).forEach(function(r){Uy(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function gbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QQ(r.key),r)}}function ybe(t,e,a){return e&&AZ(t.prototype,e),a&&AZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Abe(t,e,a){return e=Xx(e),vbe(t,JQ()?Reflect.construct(e,a||[],Xx(t).constructor):e.apply(t,a))}function vbe(t,e){if(e&&(q_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _be(t)}function _be(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JQ=function(){return!!t})()}function Xx(t){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Xx(t)}function wbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mI(t,e)}function mI(t,e){return mI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mI(t,e)}function Uy(t,e,a){return e=QQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function QQ(t){var e=Rbe(t,"string");return q_(e)=="symbol"?e:e+""}function Rbe(t,e){if(q_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(q_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wp=function(t){function e(){var a;gbe(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=Abe(this,e,[].concat(i)),Uy(a,"state",{isAnimationFinished:!1}),Uy(a,"id",uA("recharts-bar-")),Uy(a,"handleAnimationEnd",function(){var c=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),c&&c()}),Uy(a,"handleAnimationStart",function(){var c=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),c&&c()}),a}return wbe(e,t),ybe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,l=this.props,c=l.shape,n=l.dataKey,v=l.activeIndex,R=l.activeBar,x=cn(this.props,!1);return r&&r.map(function(N,L){var F=L===v,j=F?R:c,H=fu(fu(fu({},x),N),{},{isActive:F,option:j,index:L,dataKey:n,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ot.createElement(mi,Yx({className:"recharts-bar-rectangle"},Jy(i.props,N,L),{key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value)}),Ot.createElement(gZ,H))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,l=i.data,c=i.layout,n=i.isAnimationActive,v=i.animationBegin,R=i.animationDuration,x=i.animationEasing,N=i.animationId,L=this.state.prevData;return Ot.createElement(np,{begin:v,duration:R,isActive:n,easing:x,from:{t:0},to:{t:1},key:"bar-".concat(N),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(F){var j=F.t,H=l.map(function(q,W){var ee=L&&L[W];if(ee){var oe=pl(ee.x,q.x),fe=pl(ee.y,q.y),se=pl(ee.width,q.width),me=pl(ee.height,q.height);return fu(fu({},q),{},{x:oe(j),y:fe(j),width:se(j),height:me(j)})}if(c==="horizontal"){var ge=pl(0,q.height),Re=ge(j);return fu(fu({},q),{},{y:q.y+q.height-Re,height:Re})}var we=pl(0,q.width),Ee=we(j);return fu(fu({},q),{},{width:Ee})});return Ot.createElement(mi,null,r.renderRectanglesStatically(H))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,l=r.isAnimationActive,c=this.state.prevData;return l&&i&&i.length&&(!c||!Qy(c,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,l=i.data,c=i.dataKey,n=i.activeIndex,v=cn(this.props.background,!1);return l.map(function(R,x){R.value;var N=R.background,L=pbe(R,fbe);if(!N)return null;var F=fu(fu(fu(fu(fu({},L),{},{fill:"#eee"},N),v),Jy(r.props,R,x)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:c,index:x,className:"recharts-bar-background-rectangle"});return Ot.createElement(gZ,Yx({key:"background-bar-".concat(x),option:r.props.background,isActive:x===n},F))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.data,n=l.xAxis,v=l.yAxis,R=l.layout,x=l.children,N=hh(x,C1);if(!N)return null;var L=R==="vertical"?c[0].height/2:c[0].width/2,F=function(q,W){var ee=Array.isArray(q.value)?q.value[1]:q.value;return{x:q.x,y:q.y,value:ee,errorVal:Io(q,W)}},j={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ot.createElement(mi,j,N.map(function(H){return Ot.cloneElement(H,{key:"error-bar-".concat(i,"-").concat(H.props.dataKey),data:c,xAxis:n,yAxis:v,layout:R,offset:L,dataPointFormatter:F})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,l=r.data,c=r.className,n=r.xAxis,v=r.yAxis,R=r.left,x=r.top,N=r.width,L=r.height,F=r.isAnimationActive,j=r.background,H=r.id;if(i||!l||!l.length)return null;var q=this.state.isAnimationFinished,W=hi("recharts-bar",c),ee=n&&n.allowDataOverflow,oe=v&&v.allowDataOverflow,fe=ee||oe,se=Bn(H)?this.id:H;return Ot.createElement(mi,{className:W},ee||oe?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(se)},Ot.createElement("rect",{x:ee?R:R-N/2,y:oe?x:x-L/2,width:ee?N:N*2,height:oe?L:L*2}))):null,Ot.createElement(mi,{className:"recharts-bar-rectangles",clipPath:fe?"url(#clipPath-".concat(se,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(fe,se),(!F||q)&&ap.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(le.PureComponent);XQ=Wp;Uy(Wp,"displayName","Bar");Uy(Wp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jg.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Uy(Wp,"getComposedData",function(t){var e=t.props,a=t.item,r=t.barPosition,i=t.bandSize,l=t.xAxis,c=t.yAxis,n=t.xAxisTicks,v=t.yAxisTicks,R=t.stackedData,x=t.dataStartIndex,N=t.displayedData,L=t.offset,F=Y1e(r,a);if(!F)return null;var j=e.layout,H=a.type.defaultProps,q=H!==void 0?fu(fu({},H),a.props):a.props,W=q.dataKey,ee=q.children,oe=q.minPointSize,fe=j==="horizontal"?c:l,se=R?fe.scale.domain():null,me=rwe({numericAxis:fe}),ge=hh(ee,z_),Re=N.map(function(we,Ee){var ae,_e,Ie,xe,ze,Me;R?ae=X1e(R[x+Ee],se):(ae=Io(we,W),Array.isArray(ae)||(ae=[me,ae]));var je=hbe(oe,XQ.defaultProps.minPointSize)(ae[1],Ee);if(j==="horizontal"){var Ue,Qe=[c.scale(ae[0]),c.scale(ae[1])],ke=Qe[0],Ge=Qe[1];_e=Z7({axis:l,ticks:n,bandSize:i,offset:F.offset,entry:we,index:Ee}),Ie=(Ue=Ge??ke)!==null&&Ue!==void 0?Ue:void 0,xe=F.size;var Se=ke-Ge;if(ze=Number.isNaN(Se)?0:Se,Me={x:_e,y:c.y,width:xe,height:c.height},Math.abs(je)>0&&Math.abs(ze)<Math.abs(je)){var Te=sh(ze||je)*(Math.abs(je)-Math.abs(ze));Ie-=Te,ze+=Te}}else{var qe=[l.scale(ae[0]),l.scale(ae[1])],Ze=qe[0],lt=qe[1];if(_e=Ze,Ie=Z7({axis:c,ticks:v,bandSize:i,offset:F.offset,entry:we,index:Ee}),xe=lt-Ze,ze=F.size,Me={x:l.x,y:Ie,width:l.width,height:ze},Math.abs(je)>0&&Math.abs(xe)<Math.abs(je)){var st=sh(xe||je)*(Math.abs(je)-Math.abs(xe));xe+=st}}return fu(fu(fu({},we),{},{x:_e,y:Ie,width:xe,height:ze,value:R?ae:ae[1],payload:we,background:Me},ge&&ge[Ee]&&ge[Ee].props),{},{tooltipPayload:[bQ(a,we)],tooltipPosition:{x:_e+xe/2,y:Ie+ze/2}})});return fu({data:Re,layout:j},L)});function PT(t){"@babel/helpers - typeof";return PT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PT(t)}function Tbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eee(r.key),r)}}function Cbe(t,e,a){return e&&vZ(t.prototype,e),a&&vZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Up(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?_Z(Object(a),!0).forEach(function(r){kP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_Z(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function kP(t,e,a){return e=eee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function eee(t){var e=Sbe(t,"string");return PT(e)=="symbol"?e:e+""}function Sbe(t,e){if(PT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(PT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UP=function(e,a,r,i,l){var c=e.width,n=e.height,v=e.layout,R=e.children,x=Object.keys(a),N={left:r.left,leftMirror:r.left,right:c-r.right,rightMirror:c-r.right,top:r.top,topMirror:r.top,bottom:n-r.bottom,bottomMirror:n-r.bottom},L=!!df(R,Wp);return x.reduce(function(F,j){var H=a[j],q=H.orientation,W=H.domain,ee=H.padding,oe=ee===void 0?{}:ee,fe=H.mirror,se=H.reversed,me="".concat(q).concat(fe?"Mirror":""),ge,Re,we,Ee,ae;if(H.type==="number"&&(H.padding==="gap"||H.padding==="no-gap")){var _e=W[1]-W[0],Ie=1/0,xe=H.categoricalDomain.sort();if(xe.forEach(function(qe,Ze){Ze>0&&(Ie=Math.min((qe||0)-(xe[Ze-1]||0),Ie))}),Number.isFinite(Ie)){var ze=Ie/_e,Me=H.layout==="vertical"?r.height:r.width;if(H.padding==="gap"&&(ge=ze*Me/2),H.padding==="no-gap"){var je=oh(e.barCategoryGap,ze*Me),Ue=ze*Me/2;ge=Ue-je-(Ue-je)/Me*je}}}i==="xAxis"?Re=[r.left+(oe.left||0)+(ge||0),r.left+r.width-(oe.right||0)-(ge||0)]:i==="yAxis"?Re=v==="horizontal"?[r.top+r.height-(oe.bottom||0),r.top+(oe.top||0)]:[r.top+(oe.top||0)+(ge||0),r.top+r.height-(oe.bottom||0)-(ge||0)]:Re=H.range,se&&(Re=[Re[1],Re[0]]);var Qe=RQ(H,l,L),ke=Qe.scale,Ge=Qe.realScaleType;ke.domain(W).range(Re),TQ(ke);var Se=CQ(ke,Up(Up({},H),{},{realScaleType:Ge}));i==="xAxis"?(ae=q==="top"&&!fe||q==="bottom"&&fe,we=r.left,Ee=N[me]-ae*H.height):i==="yAxis"&&(ae=q==="left"&&!fe||q==="right"&&fe,we=N[me]-ae*H.width,Ee=r.top);var Te=Up(Up(Up({},H),Se),{},{realScaleType:Ge,x:we,y:Ee,scale:ke,width:i==="xAxis"?r.width:H.width,height:i==="yAxis"?r.height:H.height});return Te.bandSize=Dx(Te,Se),!H.hide&&i==="xAxis"?N[me]+=(ae?-1:1)*Te.height:H.hide||(N[me]+=(ae?-1:1)*Te.width),Up(Up({},F),{},kP({},j,Te))},{})},tee=function(e,a){var r=e.x,i=e.y,l=a.x,c=a.y;return{x:Math.min(r,l),y:Math.min(i,c),width:Math.abs(l-r),height:Math.abs(c-i)}},bbe=function(e){var a=e.x1,r=e.y1,i=e.x2,l=e.y2;return tee({x:a,y:r},{x:i,y:l})},aee=function(){function t(e){Tbe(this,t),this.scale=e}return Cbe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,l=r.position;if(a!==void 0){if(l)switch(l){case"start":return this.scale(a);case"middle":{var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+c}case"end":{var n=this.bandwidth?this.bandwidth():0;return this.scale(a)+n}default:return this.scale(a)}if(i){var v=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+v}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),i=r[0],l=r[r.length-1];return i<=l?a>=i&&a<=l:a>=l&&a<=i}}],[{key:"create",value:function(a){return new t(a)}}])}();kP(aee,"EPS",1e-4);var C4=function(e){var a=Object.keys(e).reduce(function(r,i){return Up(Up({},r),{},kP({},i,aee.create(e[i])))},{});return Up(Up({},a),{},{apply:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.bandAware,n=l.position;return ebe(i,function(v,R){return a[R].apply(v,{bandAware:c,position:n})})},isInRange:function(i){return YQ(i,function(l,c){return a[c].isInRange(l)})}})};function xbe(t){return(t%180+180)%180}var Pbe=function(e){var a=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=xbe(i),c=l*Math.PI/180,n=Math.atan(r/a),v=c>n&&c<Math.PI-n?r/Math.sin(c):a/Math.cos(c);return Math.abs(v)},N5,wZ;function Ebe(){if(wZ)return N5;wZ=1;var t=Ym(),e=dC(),a=_P();function r(i){return function(l,c,n){var v=Object(l);if(!e(l)){var R=t(c,3);l=a(l),c=function(N){return R(v[N],N,v)}}var x=i(l,c,n);return x>-1?v[R?l[x]:x]:void 0}}return N5=r,N5}var O5,RZ;function Nbe(){if(RZ)return O5;RZ=1;var t=HQ();function e(a){var r=t(a),i=r%1;return r===r?i?r-i:r:0}return O5=e,O5}var V5,TZ;function Obe(){if(TZ)return V5;TZ=1;var t=rJ(),e=Ym(),a=Nbe(),r=Math.max;function i(l,c,n){var v=l==null?0:l.length;if(!v)return-1;var R=n==null?0:a(n);return R<0&&(R=r(v+R,0)),t(l,e(c,3),R)}return V5=i,V5}var z5,CZ;function Vbe(){if(CZ)return z5;CZ=1;var t=Ebe(),e=Obe(),a=t(e);return z5=a,z5}var zbe=Vbe();const Dbe=ns(zbe);var Mbe=AX();const Ibe=ns(Mbe);var Lbe=Ibe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),S4=le.createContext(void 0),b4=le.createContext(void 0),ree=le.createContext(void 0),nee=le.createContext({}),iee=le.createContext(void 0),see=le.createContext(0),oee=le.createContext(0),SZ=function(e){var a=e.state,r=a.xAxisMap,i=a.yAxisMap,l=a.offset,c=e.clipPathId,n=e.children,v=e.width,R=e.height,x=Lbe(l);return Ot.createElement(S4.Provider,{value:r},Ot.createElement(b4.Provider,{value:i},Ot.createElement(nee.Provider,{value:l},Ot.createElement(ree.Provider,{value:x},Ot.createElement(iee.Provider,{value:c},Ot.createElement(see.Provider,{value:R},Ot.createElement(oee.Provider,{value:v},n)))))))},Fbe=function(){return le.useContext(iee)},lee=function(e){var a=le.useContext(S4);a==null&&Dv();var r=a[e];return r==null&&Dv(),r},kbe=function(){var e=le.useContext(S4);return Iy(e)},Ube=function(){var e=le.useContext(b4),a=Dbe(e,function(r){return YQ(r.domain,Number.isFinite)});return a||Iy(e)},uee=function(e){var a=le.useContext(b4);a==null&&Dv();var r=a[e];return r==null&&Dv(),r},Bbe=function(){var e=le.useContext(ree);return e},jbe=function(){return le.useContext(nee)},x4=function(){return le.useContext(oee)},P4=function(){return le.useContext(see)};function H_(t){"@babel/helpers - typeof";return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H_(t)}function Gbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zbe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dee(r.key),r)}}function qbe(t,e,a){return e&&Zbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hbe(t,e,a){return e=Jx(e),$be(t,cee()?Reflect.construct(e,a||[],Jx(t).constructor):e.apply(t,a))}function $be(t,e){if(e&&(H_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kbe(t)}function Kbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cee=function(){return!!t})()}function Jx(t){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Jx(t)}function Wbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gI(t,e)}function gI(t,e){return gI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gI(t,e)}function bZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function xZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?bZ(Object(a),!0).forEach(function(r){E4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function E4(t,e,a){return e=dee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function dee(t){var e=Ybe(t,"string");return H_(e)=="symbol"?e:e+""}function Ybe(t,e){if(H_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(H_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xbe(t,e){return txe(t)||exe(t,e)||Qbe(t,e)||Jbe()}function Jbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qbe(t,e){if(t){if(typeof t=="string")return PZ(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return PZ(t,e)}}function PZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function exe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function txe(t){if(Array.isArray(t))return t}function yI(){return yI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},yI.apply(this,arguments)}var axe=function(e,a){var r;return Ot.isValidElement(e)?r=Ot.cloneElement(e,a):Un(e)?r=e(a):r=Ot.createElement("line",yI({},a,{className:"recharts-reference-line-line"})),r},rxe=function(e,a,r,i,l,c,n,v,R){var x=l.x,N=l.y,L=l.width,F=l.height;if(r){var j=R.y,H=e.y.apply(j,{position:c});if(Bm(R,"discard")&&!e.y.isInRange(H))return null;var q=[{x:x+L,y:H},{x,y:H}];return v==="left"?q.reverse():q}if(a){var W=R.x,ee=e.x.apply(W,{position:c});if(Bm(R,"discard")&&!e.x.isInRange(ee))return null;var oe=[{x:ee,y:N+F},{x:ee,y:N}];return n==="top"?oe.reverse():oe}if(i){var fe=R.segment,se=fe.map(function(me){return e.apply(me,{position:c})});return Bm(R,"discard")&&YSe(se,function(me){return!e.isInRange(me)})?null:se}return null};function nxe(t){var e=t.x,a=t.y,r=t.segment,i=t.xAxisId,l=t.yAxisId,c=t.shape,n=t.className,v=t.alwaysShow,R=Fbe(),x=lee(i),N=uee(l),L=Bbe();if(!R||!L)return null;Zp(v===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var F=C4({x:x.scale,y:N.scale}),j=Zu(e),H=Zu(a),q=r&&r.length===2,W=rxe(F,j,H,q,L,t.position,x.orientation,N.orientation,t);if(!W)return null;var ee=Xbe(W,2),oe=ee[0],fe=oe.x,se=oe.y,me=ee[1],ge=me.x,Re=me.y,we=Bm(t,"hidden")?"url(#".concat(R,")"):void 0,Ee=xZ(xZ({clipPath:we},cn(t,!0)),{},{x1:fe,y1:se,x2:ge,y2:Re});return Ot.createElement(mi,{className:hi("recharts-reference-line",n)},axe(c,Ee),uc.renderCallByParent(t,bbe({x1:fe,y1:se,x2:ge,y2:Re})))}var N4=function(t){function e(){return Gbe(this,e),Hbe(this,e,arguments)}return Wbe(e,t),qbe(e,[{key:"render",value:function(){return Ot.createElement(nxe,this.props)}}])}(Ot.Component);E4(N4,"displayName","ReferenceLine");E4(N4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},AI.apply(this,arguments)}function $_(t){"@babel/helpers - typeof";return $_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$_(t)}function EZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function NZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?EZ(Object(a),!0).forEach(function(r){BP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):EZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ixe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sxe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fee(r.key),r)}}function oxe(t,e,a){return e&&sxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lxe(t,e,a){return e=Qx(e),uxe(t,hee()?Reflect.construct(e,a||[],Qx(t).constructor):e.apply(t,a))}function uxe(t,e){if(e&&($_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cxe(t)}function cxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hee=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Qx(t)}function dxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vI(t,e)}function vI(t,e){return vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vI(t,e)}function BP(t,e,a){return e=fee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function fee(t){var e=hxe(t,"string");return $_(e)=="symbol"?e:e+""}function hxe(t,e){if($_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if($_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fxe=function(e){var a=e.x,r=e.y,i=e.xAxis,l=e.yAxis,c=C4({x:i.scale,y:l.scale}),n=c.apply({x:a,y:r},{bandAware:!0});return Bm(e,"discard")&&!c.isInRange(n)?null:n},jP=function(t){function e(){return ixe(this,e),lxe(this,e,arguments)}return dxe(e,t),oxe(e,[{key:"render",value:function(){var r=this.props,i=r.x,l=r.y,c=r.r,n=r.alwaysShow,v=r.clipPathId,R=Zu(i),x=Zu(l);if(Zp(n===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!R||!x)return null;var N=fxe(this.props);if(!N)return null;var L=N.x,F=N.y,j=this.props,H=j.shape,q=j.className,W=Bm(this.props,"hidden")?"url(#".concat(v,")"):void 0,ee=NZ(NZ({clipPath:W},cn(this.props,!0)),{},{cx:L,cy:F});return Ot.createElement(mi,{className:hi("recharts-reference-dot",q)},e.renderDot(H,ee),uc.renderCallByParent(this.props,{x:L-c,y:F-c,width:2*c,height:2*c}))}}])}(Ot.Component);BP(jP,"displayName","ReferenceDot");BP(jP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});BP(jP,"renderDot",function(t,e){var a;return Ot.isValidElement(t)?a=Ot.cloneElement(t,e):Un(t)?a=t(e):a=Ot.createElement(gC,AI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),a});function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_I.apply(this,arguments)}function K_(t){"@babel/helpers - typeof";return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K_(t)}function OZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function VZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?OZ(Object(a),!0).forEach(function(r){GP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):OZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function pxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mxe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mee(r.key),r)}}function gxe(t,e,a){return e&&mxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yxe(t,e,a){return e=e2(e),Axe(t,pee()?Reflect.construct(e,a||[],e2(t).constructor):e.apply(t,a))}function Axe(t,e){if(e&&(K_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vxe(t)}function vxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pee=function(){return!!t})()}function e2(t){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},e2(t)}function _xe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wI(t,e)}function wI(t,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wI(t,e)}function GP(t,e,a){return e=mee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function mee(t){var e=wxe(t,"string");return K_(e)=="symbol"?e:e+""}function wxe(t,e){if(K_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(K_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rxe=function(e,a,r,i,l){var c=l.x1,n=l.x2,v=l.y1,R=l.y2,x=l.xAxis,N=l.yAxis;if(!x||!N)return null;var L=C4({x:x.scale,y:N.scale}),F={x:e?L.x.apply(c,{position:"start"}):L.x.rangeMin,y:r?L.y.apply(v,{position:"start"}):L.y.rangeMin},j={x:a?L.x.apply(n,{position:"end"}):L.x.rangeMax,y:i?L.y.apply(R,{position:"end"}):L.y.rangeMax};return Bm(l,"discard")&&(!L.isInRange(F)||!L.isInRange(j))?null:tee(F,j)},ZP=function(t){function e(){return pxe(this,e),yxe(this,e,arguments)}return _xe(e,t),gxe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,l=r.x2,c=r.y1,n=r.y2,v=r.className,R=r.alwaysShow,x=r.clipPathId;Zp(R===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var N=Zu(i),L=Zu(l),F=Zu(c),j=Zu(n),H=this.props.shape;if(!N&&!L&&!F&&!j&&!H)return null;var q=Rxe(N,L,F,j,this.props);if(!q&&!H)return null;var W=Bm(this.props,"hidden")?"url(#".concat(x,")"):void 0;return Ot.createElement(mi,{className:hi("recharts-reference-area",v)},e.renderRect(H,VZ(VZ({clipPath:W},cn(this.props,!0)),q)),uc.renderCallByParent(this.props,q))}}])}(Ot.Component);GP(ZP,"displayName","ReferenceArea");GP(ZP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});GP(ZP,"renderRect",function(t,e){var a;return Ot.isValidElement(t)?a=Ot.cloneElement(t,e):Un(t)?a=t(e):a=Ot.createElement(T4,_I({},e,{className:"recharts-reference-area-rect"})),a});function gee(t,e,a){if(e<1)return[];if(e===1&&a===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Txe(t,e,a){var r={width:t.width+e.width,height:t.height+e.height};return Pbe(r,a)}function Cxe(t,e,a){var r=a==="width",i=t.x,l=t.y,c=t.width,n=t.height;return e===1?{start:r?i:l,end:r?i+c:l+n}:{start:r?i+c:l+n,end:r?i:l}}function t2(t,e,a,r,i){if(t*e<t*r||t*e>t*i)return!1;var l=a();return t*(e-t*l/2-r)>=0&&t*(e+t*l/2-i)<=0}function Sxe(t,e){return gee(t,e+1)}function bxe(t,e,a,r,i){for(var l=(r||[]).slice(),c=e.start,n=e.end,v=0,R=1,x=c,N=function(){var j=r==null?void 0:r[v];if(j===void 0)return{v:gee(r,R)};var H=v,q,W=function(){return q===void 0&&(q=a(j,H)),q},ee=j.coordinate,oe=v===0||t2(t,ee,W,x,n);oe||(v=0,x=c,R+=1),oe&&(x=ee+t*(W()/2+i),v+=R)},L;R<=l.length;)if(L=N(),L)return L.v;return[]}function ET(t){"@babel/helpers - typeof";return ET=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ET(t)}function zZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function fd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?zZ(Object(a),!0).forEach(function(r){xxe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function xxe(t,e,a){return e=Pxe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Pxe(t){var e=Exe(t,"string");return ET(e)=="symbol"?e:e+""}function Exe(t,e){if(ET(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ET(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nxe(t,e,a,r,i){for(var l=(r||[]).slice(),c=l.length,n=e.start,v=e.end,R=function(L){var F=l[L],j,H=function(){return j===void 0&&(j=a(F,L)),j};if(L===c-1){var q=t*(F.coordinate+t*H()/2-v);l[L]=F=fd(fd({},F),{},{tickCoord:q>0?F.coordinate-q*t:F.coordinate})}else l[L]=F=fd(fd({},F),{},{tickCoord:F.coordinate});var W=t2(t,F.tickCoord,H,n,v);W&&(v=F.tickCoord-t*(H()/2+i),l[L]=fd(fd({},F),{},{isShow:!0}))},x=c-1;x>=0;x--)R(x);return l}function Oxe(t,e,a,r,i,l){var c=(r||[]).slice(),n=c.length,v=e.start,R=e.end;if(l){var x=r[n-1],N=a(x,n-1),L=t*(x.coordinate+t*N/2-R);c[n-1]=x=fd(fd({},x),{},{tickCoord:L>0?x.coordinate-L*t:x.coordinate});var F=t2(t,x.tickCoord,function(){return N},v,R);F&&(R=x.tickCoord-t*(N/2+i),c[n-1]=fd(fd({},x),{},{isShow:!0}))}for(var j=l?n-1:n,H=function(ee){var oe=c[ee],fe,se=function(){return fe===void 0&&(fe=a(oe,ee)),fe};if(ee===0){var me=t*(oe.coordinate-t*se()/2-v);c[ee]=oe=fd(fd({},oe),{},{tickCoord:me<0?oe.coordinate-me*t:oe.coordinate})}else c[ee]=oe=fd(fd({},oe),{},{tickCoord:oe.coordinate});var ge=t2(t,oe.tickCoord,se,v,R);ge&&(v=oe.tickCoord+t*(se()/2+i),c[ee]=fd(fd({},oe),{},{isShow:!0}))},q=0;q<j;q++)H(q);return c}function O4(t,e,a){var r=t.tick,i=t.ticks,l=t.viewBox,c=t.minTickGap,n=t.orientation,v=t.interval,R=t.tickFormatter,x=t.unit,N=t.angle;if(!i||!i.length||!r)return[];if(Ar(v)||jg.isSsr)return Sxe(i,typeof v=="number"&&Ar(v)?v:0);var L=[],F=n==="top"||n==="bottom"?"width":"height",j=x&&F==="width"?_R(x,{fontSize:e,letterSpacing:a}):{width:0,height:0},H=function(oe,fe){var se=Un(R)?R(oe.value,fe):oe.value;return F==="width"?Txe(_R(se,{fontSize:e,letterSpacing:a}),j,N):_R(se,{fontSize:e,letterSpacing:a})[F]},q=i.length>=2?sh(i[1].coordinate-i[0].coordinate):1,W=Cxe(l,q,F);return v==="equidistantPreserveStart"?bxe(q,W,H,i,c):(v==="preserveStart"||v==="preserveStartEnd"?L=Oxe(q,W,H,i,c,v==="preserveStartEnd"):L=Nxe(q,W,H,i,c),L.filter(function(ee){return ee.isShow}))}var Vxe=["viewBox"],zxe=["viewBox"],Dxe=["ticks"];function W_(t){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W_(t)}function e_(){return e_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},e_.apply(this,arguments)}function DZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function rh(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?DZ(Object(a),!0).forEach(function(r){V4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):DZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function D5(t,e){if(t==null)return{};var a=Mxe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Mxe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Ixe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aee(r.key),r)}}function Lxe(t,e,a){return e&&MZ(t.prototype,e),a&&MZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fxe(t,e,a){return e=a2(e),kxe(t,yee()?Reflect.construct(e,a||[],a2(t).constructor):e.apply(t,a))}function kxe(t,e){if(e&&(W_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uxe(t)}function Uxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yee=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},a2(t)}function Bxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RI(t,e)}function V4(t,e,a){return e=Aee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Aee(t){var e=jxe(t,"string");return W_(e)=="symbol"?e:e+""}function jxe(t,e){if(W_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(W_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var S1=function(t){function e(a){var r;return Ixe(this,e),r=Fxe(this,e,[a]),r.state={fontSize:"",letterSpacing:""},r}return Bxe(e,t),Lxe(e,[{key:"shouldComponentUpdate",value:function(r,i){var l=r.viewBox,c=D5(r,Vxe),n=this.props,v=n.viewBox,R=D5(n,zxe);return!d_(l,v)||!d_(c,R)||!d_(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,l=i.x,c=i.y,n=i.width,v=i.height,R=i.orientation,x=i.tickSize,N=i.mirror,L=i.tickMargin,F,j,H,q,W,ee,oe=N?-1:1,fe=r.tickSize||x,se=Ar(r.tickCoord)?r.tickCoord:r.coordinate;switch(R){case"top":F=j=r.coordinate,q=c+ +!N*v,H=q-oe*fe,ee=H-oe*L,W=se;break;case"left":H=q=r.coordinate,j=l+ +!N*n,F=j-oe*fe,W=F-oe*L,ee=se;break;case"right":H=q=r.coordinate,j=l+ +N*n,F=j+oe*fe,W=F+oe*L,ee=se;break;default:F=j=r.coordinate,q=c+ +N*v,H=q+oe*fe,ee=H+oe*L,W=se;break}return{line:{x1:F,y1:H,x2:j,y2:q},tick:{x:W,y:ee}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,l=r.mirror,c;switch(i){case"left":c=l?"start":"end";break;case"right":c=l?"end":"start";break;default:c="middle";break}return c}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,l=r.mirror,c="end";switch(i){case"left":case"right":c="middle";break;case"top":c=l?"start":"end";break;default:c=l?"end":"start";break}return c}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.orientation,R=r.mirror,x=r.axisLine,N=rh(rh(rh({},cn(this.props,!1)),cn(x,!1)),{},{fill:"none"});if(v==="top"||v==="bottom"){var L=+(v==="top"&&!R||v==="bottom"&&R);N=rh(rh({},N),{},{x1:i,y1:l+L*n,x2:i+c,y2:l+L*n})}else{var F=+(v==="left"&&!R||v==="right"&&R);N=rh(rh({},N),{},{x1:i+F*c,y1:l,x2:i+F*c,y2:l+n})}return Ot.createElement("line",e_({},N,{className:hi("recharts-cartesian-axis-line",vf(x,"className"))}))}},{key:"renderTicks",value:function(r,i,l){var c=this,n=this.props,v=n.tickLine,R=n.stroke,x=n.tick,N=n.tickFormatter,L=n.unit,F=O4(rh(rh({},this.props),{},{ticks:r}),i,l),j=this.getTickTextAnchor(),H=this.getTickVerticalAnchor(),q=cn(this.props,!1),W=cn(x,!1),ee=rh(rh({},q),{},{fill:"none"},cn(v,!1)),oe=F.map(function(fe,se){var me=c.getTickLineCoord(fe),ge=me.line,Re=me.tick,we=rh(rh(rh(rh({textAnchor:j,verticalAnchor:H},q),{},{stroke:"none",fill:R},W),Re),{},{index:se,payload:fe,visibleTicksCount:F.length,tickFormatter:N});return Ot.createElement(mi,e_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(fe.value,"-").concat(fe.coordinate,"-").concat(fe.tickCoord)},Jy(c.props,fe,se)),v&&Ot.createElement("line",e_({},ee,ge,{className:hi("recharts-cartesian-axis-tick-line",vf(v,"className"))})),x&&e.renderTickItem(x,we,"".concat(Un(N)?N(fe.value,se):fe.value).concat(L||"")))});return Ot.createElement("g",{className:"recharts-cartesian-axis-ticks"},oe)}},{key:"render",value:function(){var r=this,i=this.props,l=i.axisLine,c=i.width,n=i.height,v=i.ticksGenerator,R=i.className,x=i.hide;if(x)return null;var N=this.props,L=N.ticks,F=D5(N,Dxe),j=L;return Un(v)&&(j=L&&L.length>0?v(this.props):v(F)),c<=0||n<=0||!j||!j.length?null:Ot.createElement(mi,{className:hi("recharts-cartesian-axis",R),ref:function(q){r.layerReference=q}},l&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),uc.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Ot.isValidElement(r)?c=Ot.cloneElement(r,i):Un(r)?c=r(i):c=Ot.createElement(Vv,e_({},i,{className:"recharts-cartesian-axis-tick-value"}),l),c}}])}(le.Component);V4(S1,"displayName","CartesianAxis");V4(S1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Gxe=["x1","y1","x2","y2","key"],Zxe=["offset"];function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(t)}function IZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function vd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?IZ(Object(a),!0).forEach(function(r){qxe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function qxe(t,e,a){return e=Hxe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Hxe(t){var e=$xe(t,"string");return Mv(e)=="symbol"?e:e+""}function $xe(t,e){if(Mv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mv(){return mv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},mv.apply(this,arguments)}function LZ(t,e){if(t==null)return{};var a=Kxe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Kxe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Wxe=function(e){var a=e.fill;if(!a||a==="none")return null;var r=e.fillOpacity,i=e.x,l=e.y,c=e.width,n=e.height,v=e.ry;return Ot.createElement("rect",{x:i,y:l,ry:v,width:c,height:n,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function vee(t,e){var a;if(Ot.isValidElement(t))a=Ot.cloneElement(t,e);else if(Un(t))a=t(e);else{var r=e.x1,i=e.y1,l=e.x2,c=e.y2,n=e.key,v=LZ(e,Gxe),R=cn(v,!1);R.offset;var x=LZ(R,Zxe);a=Ot.createElement("line",mv({},x,{x1:r,y1:i,x2:l,y2:c,fill:"none",key:n}))}return a}function Yxe(t){var e=t.x,a=t.width,r=t.horizontal,i=r===void 0?!0:r,l=t.horizontalPoints;if(!i||!l||!l.length)return null;var c=l.map(function(n,v){var R=vd(vd({},t),{},{x1:e,y1:n,x2:e+a,y2:n,key:"line-".concat(v),index:v});return vee(i,R)});return Ot.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Xxe(t){var e=t.y,a=t.height,r=t.vertical,i=r===void 0?!0:r,l=t.verticalPoints;if(!i||!l||!l.length)return null;var c=l.map(function(n,v){var R=vd(vd({},t),{},{x1:n,y1:e,x2:n,y2:e+a,key:"line-".concat(v),index:v});return vee(i,R)});return Ot.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Jxe(t){var e=t.horizontalFill,a=t.fillOpacity,r=t.x,i=t.y,l=t.width,c=t.height,n=t.horizontalPoints,v=t.horizontal,R=v===void 0?!0:v;if(!R||!e||!e.length)return null;var x=n.map(function(L){return Math.round(L+i-i)}).sort(function(L,F){return L-F});i!==x[0]&&x.unshift(0);var N=x.map(function(L,F){var j=!x[F+1],H=j?i+c-L:x[F+1]-L;if(H<=0)return null;var q=F%e.length;return Ot.createElement("rect",{key:"react-".concat(F),y:L,x:r,height:H,width:l,stroke:"none",fill:e[q],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Ot.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},N)}function Qxe(t){var e=t.vertical,a=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,l=t.x,c=t.y,n=t.width,v=t.height,R=t.verticalPoints;if(!a||!r||!r.length)return null;var x=R.map(function(L){return Math.round(L+l-l)}).sort(function(L,F){return L-F});l!==x[0]&&x.unshift(0);var N=x.map(function(L,F){var j=!x[F+1],H=j?l+n-L:x[F+1]-L;if(H<=0)return null;var q=F%r.length;return Ot.createElement("rect",{key:"react-".concat(F),x:L,y:c,width:H,height:v,stroke:"none",fill:r[q],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ot.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},N)}var e2e=function(e,a){var r=e.xAxis,i=e.width,l=e.height,c=e.offset;return wQ(O4(vd(vd(vd({},S1.defaultProps),r),{},{ticks:Sg(r,!0),viewBox:{x:0,y:0,width:i,height:l}})),c.left,c.left+c.width,a)},t2e=function(e,a){var r=e.yAxis,i=e.width,l=e.height,c=e.offset;return wQ(O4(vd(vd(vd({},S1.defaultProps),r),{},{ticks:Sg(r,!0),viewBox:{x:0,y:0,width:i,height:l}})),c.top,c.top+c.height,a)},F0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Bp(t){var e,a,r,i,l,c,n=x4(),v=P4(),R=jbe(),x=vd(vd({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:F0.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:F0.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:F0.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:F0.horizontalFill,vertical:(l=t.vertical)!==null&&l!==void 0?l:F0.vertical,verticalFill:(c=t.verticalFill)!==null&&c!==void 0?c:F0.verticalFill,x:Ar(t.x)?t.x:R.left,y:Ar(t.y)?t.y:R.top,width:Ar(t.width)?t.width:R.width,height:Ar(t.height)?t.height:R.height}),N=x.x,L=x.y,F=x.width,j=x.height,H=x.syncWithTicks,q=x.horizontalValues,W=x.verticalValues,ee=kbe(),oe=Ube();if(!Ar(F)||F<=0||!Ar(j)||j<=0||!Ar(N)||N!==+N||!Ar(L)||L!==+L)return null;var fe=x.verticalCoordinatesGenerator||e2e,se=x.horizontalCoordinatesGenerator||t2e,me=x.horizontalPoints,ge=x.verticalPoints;if((!me||!me.length)&&Un(se)){var Re=q&&q.length,we=se({yAxis:oe?vd(vd({},oe),{},{ticks:Re?q:oe.ticks}):void 0,width:n,height:v,offset:R},Re?!0:H);Zp(Array.isArray(we),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Mv(we),"]")),Array.isArray(we)&&(me=we)}if((!ge||!ge.length)&&Un(fe)){var Ee=W&&W.length,ae=fe({xAxis:ee?vd(vd({},ee),{},{ticks:Ee?W:ee.ticks}):void 0,width:n,height:v,offset:R},Ee?!0:H);Zp(Array.isArray(ae),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Mv(ae),"]")),Array.isArray(ae)&&(ge=ae)}return Ot.createElement("g",{className:"recharts-cartesian-grid"},Ot.createElement(Wxe,{fill:x.fill,fillOpacity:x.fillOpacity,x:x.x,y:x.y,width:x.width,height:x.height,ry:x.ry}),Ot.createElement(Yxe,mv({},x,{offset:R,horizontalPoints:me,xAxis:ee,yAxis:oe})),Ot.createElement(Xxe,mv({},x,{offset:R,verticalPoints:ge,xAxis:ee,yAxis:oe})),Ot.createElement(Jxe,mv({},x,{horizontalPoints:me})),Ot.createElement(Qxe,mv({},x,{verticalPoints:ge})))}Bp.displayName="CartesianGrid";var a2e=["type","layout","connectNulls","ref"],r2e=["key"];function Y_(t){"@babel/helpers - typeof";return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y_(t)}function FZ(t,e){if(t==null)return{};var a=n2e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function n2e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function bR(){return bR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},bR.apply(this,arguments)}function kZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function uf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?kZ(Object(a),!0).forEach(function(r){jp(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function k0(t){return l2e(t)||o2e(t)||s2e(t)||i2e()}function i2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s2e(t,e){if(t){if(typeof t=="string")return TI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return TI(t,e)}}function o2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function l2e(t){if(Array.isArray(t))return TI(t)}function TI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function u2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wee(r.key),r)}}function c2e(t,e,a){return e&&UZ(t.prototype,e),a&&UZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function d2e(t,e,a){return e=r2(e),h2e(t,_ee()?Reflect.construct(e,a||[],r2(t).constructor):e.apply(t,a))}function h2e(t,e){if(e&&(Y_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f2e(t)}function f2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ee=function(){return!!t})()}function r2(t){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},r2(t)}function p2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CI(t,e)}function CI(t,e){return CI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CI(t,e)}function jp(t,e,a){return e=wee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function wee(t){var e=m2e(t,"string");return Y_(e)=="symbol"?e:e+""}function m2e(t,e){if(Y_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Y_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $v=function(t){function e(){var a;u2e(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=d2e(this,e,[].concat(i)),jp(a,"state",{isAnimationFinished:!0,totalLength:0}),jp(a,"generateSimpleStrokeDasharray",function(c,n){return"".concat(n,"px ").concat(c-n,"px")}),jp(a,"getStrokeDasharray",function(c,n,v){var R=v.reduce(function(W,ee){return W+ee});if(!R)return a.generateSimpleStrokeDasharray(n,c);for(var x=Math.floor(c/R),N=c%R,L=n-c,F=[],j=0,H=0;j<v.length;H+=v[j],++j)if(H+v[j]>N){F=[].concat(k0(v.slice(0,j)),[N-H]);break}var q=F.length%2===0?[0,L]:[L];return[].concat(k0(e.repeat(v,x)),k0(F),q).map(function(W){return"".concat(W,"px")}).join(", ")}),jp(a,"id",uA("recharts-line-")),jp(a,"pathRef",function(c){a.mainCurve=c}),jp(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),jp(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return p2e(e,t),c2e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.points,n=l.xAxis,v=l.yAxis,R=l.layout,x=l.children,N=hh(x,C1);if(!N)return null;var L=function(H,q){return{x:H.x,y:H.y,value:H.value,errorVal:Io(H.payload,q)}},F={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ot.createElement(mi,F,N.map(function(j){return Ot.cloneElement(j,{key:"bar-".concat(j.props.dataKey),data:c,xAxis:n,yAxis:v,layout:R,dataPointFormatter:L})}))}},{key:"renderDots",value:function(r,i,l){var c=this.props.isAnimationActive;if(c&&!this.state.isAnimationFinished)return null;var n=this.props,v=n.dot,R=n.points,x=n.dataKey,N=cn(this.props,!1),L=cn(v,!0),F=R.map(function(H,q){var W=uf(uf(uf({key:"dot-".concat(q),r:3},N),L),{},{value:H.value,dataKey:x,cx:H.x,cy:H.y,index:q,payload:H.payload});return e.renderDotItem(v,W)}),j={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return Ot.createElement(mi,bR({className:"recharts-line-dots",key:"dots"},j),F)}},{key:"renderCurveStatically",value:function(r,i,l,c){var n=this.props,v=n.type,R=n.layout,x=n.connectNulls;n.ref;var N=FZ(n,a2e),L=uf(uf(uf({},cn(N,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(l,")"):null,points:r},c),{},{type:v,layout:R,connectNulls:x});return Ot.createElement(Ky,bR({},L,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var l=this,c=this.props,n=c.points,v=c.strokeDasharray,R=c.isAnimationActive,x=c.animationBegin,N=c.animationDuration,L=c.animationEasing,F=c.animationId,j=c.animateNewValues,H=c.width,q=c.height,W=this.state,ee=W.prevPoints,oe=W.totalLength;return Ot.createElement(np,{begin:x,duration:N,isActive:R,easing:L,from:{t:0},to:{t:1},key:"line-".concat(F),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(fe){var se=fe.t;if(ee){var me=ee.length/n.length,ge=n.map(function(_e,Ie){var xe=Math.floor(Ie*me);if(ee[xe]){var ze=ee[xe],Me=pl(ze.x,_e.x),je=pl(ze.y,_e.y);return uf(uf({},_e),{},{x:Me(se),y:je(se)})}if(j){var Ue=pl(H*2,_e.x),Qe=pl(q/2,_e.y);return uf(uf({},_e),{},{x:Ue(se),y:Qe(se)})}return uf(uf({},_e),{},{x:_e.x,y:_e.y})});return l.renderCurveStatically(ge,r,i)}var Re=pl(0,oe),we=Re(se),Ee;if(v){var ae="".concat(v).split(/[,\s]+/gim).map(function(_e){return parseFloat(_e)});Ee=l.getStrokeDasharray(we,oe,ae)}else Ee=l.generateSimpleStrokeDasharray(oe,we);return l.renderCurveStatically(n,r,i,{strokeDasharray:Ee})})}},{key:"renderCurve",value:function(r,i){var l=this.props,c=l.points,n=l.isAnimationActive,v=this.state,R=v.prevPoints,x=v.totalLength;return n&&c&&c.length&&(!R&&x>0||!Qy(R,c))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(c,r,i)}},{key:"render",value:function(){var r,i=this.props,l=i.hide,c=i.dot,n=i.points,v=i.className,R=i.xAxis,x=i.yAxis,N=i.top,L=i.left,F=i.width,j=i.height,H=i.isAnimationActive,q=i.id;if(l||!n||!n.length)return null;var W=this.state.isAnimationFinished,ee=n.length===1,oe=hi("recharts-line",v),fe=R&&R.allowDataOverflow,se=x&&x.allowDataOverflow,me=fe||se,ge=Bn(q)?this.id:q,Re=(r=cn(c,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},we=Re.r,Ee=we===void 0?3:we,ae=Re.strokeWidth,_e=ae===void 0?2:ae,Ie=TX(c)?c:{},xe=Ie.clipDot,ze=xe===void 0?!0:xe,Me=Ee*2+_e;return Ot.createElement(mi,{className:oe},fe||se?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(ge)},Ot.createElement("rect",{x:fe?L:L-F/2,y:se?N:N-j/2,width:fe?F:F*2,height:se?j:j*2})),!ze&&Ot.createElement("clipPath",{id:"clipPath-dots-".concat(ge)},Ot.createElement("rect",{x:L-Me/2,y:N-Me/2,width:F+Me,height:j+Me}))):null,!ee&&this.renderCurve(me,ge),this.renderErrorBar(me,ge),(ee||c)&&this.renderDots(me,ze,ge),(!H||W)&&ap.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var l=r.length%2!==0?[].concat(k0(r),[0]):r,c=[],n=0;n<i;++n)c=[].concat(k0(c),k0(l));return c}},{key:"renderDotItem",value:function(r,i){var l;if(Ot.isValidElement(r))l=Ot.cloneElement(r,i);else if(Un(r))l=r(i);else{var c=i.key,n=FZ(i,r2e),v=hi("recharts-line-dot",typeof r!="boolean"?r.className:"");l=Ot.createElement(gC,bR({key:c},n,{className:v}))}return l}}])}(le.PureComponent);jp($v,"displayName","Line");jp($v,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jg.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});jp($v,"getComposedData",function(t){var e=t.props,a=t.xAxis,r=t.yAxis,i=t.xAxisTicks,l=t.yAxisTicks,c=t.dataKey,n=t.bandSize,v=t.displayedData,R=t.offset,x=e.layout,N=v.map(function(L,F){var j=Io(L,c);return x==="horizontal"?{x:F_({axis:a,ticks:i,bandSize:n,entry:L,index:F}),y:Bn(j)?null:r.scale(j),value:j,payload:L}:{x:Bn(j)?null:a.scale(j),y:F_({axis:r,ticks:l,bandSize:n,entry:L,index:F}),value:j,payload:L}});return uf({points:N,layout:x},R)});var g2e=["layout","type","stroke","connectNulls","isRange","ref"],y2e=["key"],Ree;function X_(t){"@babel/helpers - typeof";return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X_(t)}function Tee(t,e){if(t==null)return{};var a=A2e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function A2e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function gv(){return gv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},gv.apply(this,arguments)}function BZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Py(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?BZ(Object(a),!0).forEach(function(r){zm(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):BZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function v2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,See(r.key),r)}}function _2e(t,e,a){return e&&jZ(t.prototype,e),a&&jZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function w2e(t,e,a){return e=n2(e),R2e(t,Cee()?Reflect.construct(e,a||[],n2(t).constructor):e.apply(t,a))}function R2e(t,e){if(e&&(X_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T2e(t)}function T2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cee=function(){return!!t})()}function n2(t){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},n2(t)}function C2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SI(t,e)}function SI(t,e){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SI(t,e)}function zm(t,e,a){return e=See(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function See(t){var e=S2e(t,"string");return X_(e)=="symbol"?e:e+""}function S2e(t,e){if(X_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(X_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mf=function(t){function e(){var a;v2e(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=w2e(this,e,[].concat(i)),zm(a,"state",{isAnimationFinished:!0}),zm(a,"id",uA("recharts-area-")),zm(a,"handleAnimationEnd",function(){var c=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Un(c)&&c()}),zm(a,"handleAnimationStart",function(){var c=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Un(c)&&c()}),a}return C2e(e,t),_2e(e,[{key:"renderDots",value:function(r,i,l){var c=this.props.isAnimationActive,n=this.state.isAnimationFinished;if(c&&!n)return null;var v=this.props,R=v.dot,x=v.points,N=v.dataKey,L=cn(this.props,!1),F=cn(R,!0),j=x.map(function(q,W){var ee=Py(Py(Py({key:"dot-".concat(W),r:3},L),F),{},{index:W,cx:q.x,cy:q.y,dataKey:N,value:q.value,payload:q.payload,points:x});return e.renderDotItem(R,ee)}),H={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return Ot.createElement(mi,gv({className:"recharts-area-dots"},H),j)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,l=i.baseLine,c=i.points,n=i.strokeWidth,v=c[0].x,R=c[c.length-1].x,x=r*Math.abs(v-R),N=ky(c.map(function(L){return L.y||0}));return Ar(l)&&typeof l=="number"?N=Math.max(l,N):l&&Array.isArray(l)&&l.length&&(N=Math.max(ky(l.map(function(L){return L.y||0})),N)),Ar(N)?Ot.createElement("rect",{x:v<R?v:v-x,y:0,width:x,height:Math.floor(N+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,l=i.baseLine,c=i.points,n=i.strokeWidth,v=c[0].y,R=c[c.length-1].y,x=r*Math.abs(v-R),N=ky(c.map(function(L){return L.x||0}));return Ar(l)&&typeof l=="number"?N=Math.max(l,N):l&&Array.isArray(l)&&l.length&&(N=Math.max(ky(l.map(function(L){return L.x||0})),N)),Ar(N)?Ot.createElement("rect",{x:0,y:v<R?v:v-x,width:N+(n?parseInt("".concat(n),10):1),height:Math.floor(x)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,l,c){var n=this.props,v=n.layout,R=n.type,x=n.stroke,N=n.connectNulls,L=n.isRange;n.ref;var F=Tee(n,g2e);return Ot.createElement(mi,{clipPath:l?"url(#clipPath-".concat(c,")"):null},Ot.createElement(Ky,gv({},cn(F,!0),{points:r,connectNulls:N,type:R,baseLine:i,layout:v,stroke:"none",className:"recharts-area-area"})),x!=="none"&&Ot.createElement(Ky,gv({},cn(this.props,!1),{className:"recharts-area-curve",layout:v,type:R,connectNulls:N,fill:"none",points:r})),x!=="none"&&L&&Ot.createElement(Ky,gv({},cn(this.props,!1),{className:"recharts-area-curve",layout:v,type:R,connectNulls:N,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var l=this,c=this.props,n=c.points,v=c.baseLine,R=c.isAnimationActive,x=c.animationBegin,N=c.animationDuration,L=c.animationEasing,F=c.animationId,j=this.state,H=j.prevPoints,q=j.prevBaseLine;return Ot.createElement(np,{begin:x,duration:N,isActive:R,easing:L,from:{t:0},to:{t:1},key:"area-".concat(F),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(W){var ee=W.t;if(H){var oe=H.length/n.length,fe=n.map(function(Re,we){var Ee=Math.floor(we*oe);if(H[Ee]){var ae=H[Ee],_e=pl(ae.x,Re.x),Ie=pl(ae.y,Re.y);return Py(Py({},Re),{},{x:_e(ee),y:Ie(ee)})}return Re}),se;if(Ar(v)&&typeof v=="number"){var me=pl(q,v);se=me(ee)}else if(Bn(v)||v1(v)){var ge=pl(q,0);se=ge(ee)}else se=v.map(function(Re,we){var Ee=Math.floor(we*oe);if(q[Ee]){var ae=q[Ee],_e=pl(ae.x,Re.x),Ie=pl(ae.y,Re.y);return Py(Py({},Re),{},{x:_e(ee),y:Ie(ee)})}return Re});return l.renderAreaStatically(fe,se,r,i)}return Ot.createElement(mi,null,Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"animationClipPath-".concat(i)},l.renderClipRect(ee))),Ot.createElement(mi,{clipPath:"url(#animationClipPath-".concat(i,")")},l.renderAreaStatically(n,v,r,i)))})}},{key:"renderArea",value:function(r,i){var l=this.props,c=l.points,n=l.baseLine,v=l.isAnimationActive,R=this.state,x=R.prevPoints,N=R.prevBaseLine,L=R.totalLength;return v&&c&&c.length&&(!x&&L>0||!Qy(x,c)||!Qy(N,n))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(c,n,r,i)}},{key:"render",value:function(){var r,i=this.props,l=i.hide,c=i.dot,n=i.points,v=i.className,R=i.top,x=i.left,N=i.xAxis,L=i.yAxis,F=i.width,j=i.height,H=i.isAnimationActive,q=i.id;if(l||!n||!n.length)return null;var W=this.state.isAnimationFinished,ee=n.length===1,oe=hi("recharts-area",v),fe=N&&N.allowDataOverflow,se=L&&L.allowDataOverflow,me=fe||se,ge=Bn(q)?this.id:q,Re=(r=cn(c,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},we=Re.r,Ee=we===void 0?3:we,ae=Re.strokeWidth,_e=ae===void 0?2:ae,Ie=TX(c)?c:{},xe=Ie.clipDot,ze=xe===void 0?!0:xe,Me=Ee*2+_e;return Ot.createElement(mi,{className:oe},fe||se?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(ge)},Ot.createElement("rect",{x:fe?x:x-F/2,y:se?R:R-j/2,width:fe?F:F*2,height:se?j:j*2})),!ze&&Ot.createElement("clipPath",{id:"clipPath-dots-".concat(ge)},Ot.createElement("rect",{x:x-Me/2,y:R-Me/2,width:F+Me,height:j+Me}))):null,ee?null:this.renderArea(me,ge),(c||ee)&&this.renderDots(me,ze,ge),(!H||W)&&ap.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(le.PureComponent);Ree=mf;zm(mf,"displayName","Area");zm(mf,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!jg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});zm(mf,"getBaseValue",function(t,e,a,r){var i=t.layout,l=t.baseValue,c=e.props.baseValue,n=c??l;if(Ar(n)&&typeof n=="number")return n;var v=i==="horizontal"?r:a,R=v.scale.domain();if(v.type==="number"){var x=Math.max(R[0],R[1]),N=Math.min(R[0],R[1]);return n==="dataMin"?N:n==="dataMax"||x<0?x:Math.max(Math.min(R[0],R[1]),0)}return n==="dataMin"?R[0]:n==="dataMax"?R[1]:R[0]});zm(mf,"getComposedData",function(t){var e=t.props,a=t.item,r=t.xAxis,i=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,n=t.bandSize,v=t.dataKey,R=t.stackedData,x=t.dataStartIndex,N=t.displayedData,L=t.offset,F=e.layout,j=R&&R.length,H=Ree.getBaseValue(e,a,r,i),q=F==="horizontal",W=!1,ee=N.map(function(fe,se){var me;j?me=R[x+se]:(me=Io(fe,v),Array.isArray(me)?W=!0:me=[H,me]);var ge=me[1]==null||j&&Io(fe,v)==null;return q?{x:F_({axis:r,ticks:l,bandSize:n,entry:fe,index:se}),y:ge?null:i.scale(me[1]),value:me,payload:fe}:{x:ge?null:r.scale(me[1]),y:F_({axis:i,ticks:c,bandSize:n,entry:fe,index:se}),value:me,payload:fe}}),oe;return j||W?oe=ee.map(function(fe){var se=Array.isArray(fe.value)?fe.value[0]:null;return q?{x:fe.x,y:se!=null&&fe.y!=null?i.scale(se):null}:{x:se!=null?r.scale(se):null,y:fe.y}}):oe=q?i.scale(H):r.scale(H),Py({points:ee,baseLine:oe,layout:F,isRange:W},L)});zm(mf,"renderDotItem",function(t,e){var a;if(Ot.isValidElement(t))a=Ot.cloneElement(t,e);else if(Un(t))a=t(e);else{var r=hi("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,l=Tee(e,y2e);a=Ot.createElement(gC,gv({},l,{key:i,className:r}))}return a});function J_(t){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J_(t)}function b2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x2e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pee(r.key),r)}}function P2e(t,e,a){return e&&x2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function E2e(t,e,a){return e=i2(e),N2e(t,bee()?Reflect.construct(e,a||[],i2(t).constructor):e.apply(t,a))}function N2e(t,e){if(e&&(J_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O2e(t)}function O2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bee=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},i2(t)}function V2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bI(t,e)}function bI(t,e){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bI(t,e)}function xee(t,e,a){return e=Pee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Pee(t){var e=z2e(t,"string");return J_(e)=="symbol"?e:e+""}function z2e(t,e){if(J_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(J_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qP=function(t){function e(){return b2e(this,e),E2e(this,e,arguments)}return V2e(e,t),P2e(e,[{key:"render",value:function(){return null}}])}(Ot.Component);xee(qP,"displayName","ZAxis");xee(qP,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var D2e=["option","isActive"];function xR(){return xR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xR.apply(this,arguments)}function M2e(t,e){if(t==null)return{};var a=I2e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function I2e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function L2e(t){var e=t.option,a=t.isActive,r=M2e(t,D2e);return typeof e=="string"?Ot.createElement(qx,xR({option:Ot.createElement(vP,xR({type:e},r)),isActive:a,shapeType:"symbols"},r)):Ot.createElement(qx,xR({option:e,isActive:a,shapeType:"symbols"},r))}function Q_(t){"@babel/helpers - typeof";return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q_(t)}function PR(){return PR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},PR.apply(this,arguments)}function GZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Yf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?GZ(Object(a),!0).forEach(function(r){By(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):GZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function F2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nee(r.key),r)}}function k2e(t,e,a){return e&&ZZ(t.prototype,e),a&&ZZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function U2e(t,e,a){return e=s2(e),B2e(t,Eee()?Reflect.construct(e,a||[],s2(t).constructor):e.apply(t,a))}function B2e(t,e){if(e&&(Q_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j2e(t)}function j2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eee=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},s2(t)}function G2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xI(t,e)}function xI(t,e){return xI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xI(t,e)}function By(t,e,a){return e=Nee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Nee(t){var e=Z2e(t,"string");return Q_(e)=="symbol"?e:e+""}function Z2e(t,e){if(Q_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Q_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var HP=function(t){function e(){var a;F2e(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=U2e(this,e,[].concat(i)),By(a,"state",{isAnimationFinished:!1}),By(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0})}),By(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1})}),By(a,"id",uA("recharts-scatter-")),a}return G2e(e,t),k2e(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,l=this.props,c=l.shape,n=l.activeShape,v=l.activeIndex,R=cn(this.props,!1);return r.map(function(x,N){var L=v===N,F=L?n:c,j=Yf(Yf({},R),x);return Ot.createElement(mi,PR({className:"recharts-scatter-symbol",key:"symbol-".concat(x==null?void 0:x.cx,"-").concat(x==null?void 0:x.cy,"-").concat(x==null?void 0:x.size,"-").concat(N)},Jy(i.props,x,N),{role:"img"}),Ot.createElement(L2e,PR({option:F,isActive:L,key:"symbol-".concat(N)},j)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,l=i.points,c=i.isAnimationActive,n=i.animationBegin,v=i.animationDuration,R=i.animationEasing,x=i.animationId,N=this.state.prevPoints;return Ot.createElement(np,{begin:n,duration:v,isActive:c,easing:R,from:{t:0},to:{t:1},key:"pie-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var F=L.t,j=l.map(function(H,q){var W=N&&N[q];if(W){var ee=pl(W.cx,H.cx),oe=pl(W.cy,H.cy),fe=pl(W.size,H.size);return Yf(Yf({},H),{},{cx:ee(F),cy:oe(F),size:fe(F)})}var se=pl(0,H.size);return Yf(Yf({},H),{},{size:se(F)})});return Ot.createElement(mi,null,r.renderSymbolsStatically(j))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,l=r.isAnimationActive,c=this.state.prevPoints;return l&&i&&i.length&&(!c||!Qy(c,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,c=i.xAxis,n=i.yAxis,v=i.children,R=hh(v,C1);return R?R.map(function(x,N){var L=x.props,F=L.direction,j=L.dataKey;return Ot.cloneElement(x,{key:"".concat(F,"-").concat(j,"-").concat(l[N]),data:l,xAxis:c,yAxis:n,layout:F==="x"?"vertical":"horizontal",dataPointFormatter:function(q,W){return{x:q.cx,y:q.cy,value:F==="x"?+q.node.x:+q.node.y,errorVal:Io(q,W)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,l=r.line,c=r.lineType,n=r.lineJointType,v=cn(this.props,!1),R=cn(l,!1),x,N;if(c==="joint")x=i.map(function(oe){return{x:oe.cx,y:oe.cy}});else if(c==="fitting"){var L=kpe(i),F=L.xmin,j=L.xmax,H=L.a,q=L.b,W=function(fe){return H*fe+q};x=[{x:F,y:W(F)},{x:j,y:W(j)}]}var ee=Yf(Yf(Yf({},v),{},{fill:"none",stroke:v&&v.fill},R),{},{points:x});return Ot.isValidElement(l)?N=Ot.cloneElement(l,ee):Un(l)?N=l(ee):N=Ot.createElement(Ky,PR({},ee,{type:n})),Ot.createElement(mi,{className:"recharts-scatter-line",key:"recharts-scatter-line"},N)}},{key:"render",value:function(){var r=this.props,i=r.hide,l=r.points,c=r.line,n=r.className,v=r.xAxis,R=r.yAxis,x=r.left,N=r.top,L=r.width,F=r.height,j=r.id,H=r.isAnimationActive;if(i||!l||!l.length)return null;var q=this.state.isAnimationFinished,W=hi("recharts-scatter",n),ee=v&&v.allowDataOverflow,oe=R&&R.allowDataOverflow,fe=ee||oe,se=Bn(j)?this.id:j;return Ot.createElement(mi,{className:W,clipPath:fe?"url(#clipPath-".concat(se,")"):null},ee||oe?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(se)},Ot.createElement("rect",{x:ee?x:x-L/2,y:oe?N:N-F/2,width:ee?L:L*2,height:oe?F:F*2}))):null,c&&this.renderLine(),this.renderErrorBar(),Ot.createElement(mi,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!H||q)&&ap.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])}(le.PureComponent);By(HP,"displayName","Scatter");By(HP,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!jg.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});By(HP,"getComposedData",function(t){var e=t.xAxis,a=t.yAxis,r=t.zAxis,i=t.item,l=t.displayedData,c=t.xAxisTicks,n=t.yAxisTicks,v=t.offset,R=i.props.tooltipType,x=hh(i.props.children,z_),N=Bn(e.dataKey)?i.props.dataKey:e.dataKey,L=Bn(a.dataKey)?i.props.dataKey:a.dataKey,F=r&&r.dataKey,j=r?r.range:qP.defaultProps.range,H=j&&j[0],q=e.scale.bandwidth?e.scale.bandwidth():0,W=a.scale.bandwidth?a.scale.bandwidth():0,ee=l.map(function(oe,fe){var se=Io(oe,N),me=Io(oe,L),ge=!Bn(F)&&Io(oe,F)||"-",Re=[{name:Bn(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:se,payload:oe,dataKey:N,type:R},{name:Bn(a.dataKey)?i.props.name:a.name||a.dataKey,unit:a.unit||"",value:me,payload:oe,dataKey:L,type:R}];ge!=="-"&&Re.push({name:r.name||r.dataKey,unit:r.unit||"",value:ge,payload:oe,dataKey:F,type:R});var we=F_({axis:e,ticks:c,bandSize:q,entry:oe,index:fe,dataKey:N}),Ee=F_({axis:a,ticks:n,bandSize:W,entry:oe,index:fe,dataKey:L}),ae=ge!=="-"?r.scale(ge):H,_e=Math.sqrt(Math.max(ae,0)/Math.PI);return Yf(Yf({},oe),{},{cx:we,cy:Ee,x:we-_e,y:Ee-_e,xAxis:e,yAxis:a,zAxis:r,width:2*_e,height:2*_e,size:ae,node:{x:se,y:me,z:ge},tooltipPayload:Re,tooltipPosition:{x:we,y:Ee},payload:oe},x&&x[fe]&&x[fe].props)});return Yf({points:ee},v)});function e1(t){"@babel/helpers - typeof";return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e1(t)}function q2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H2e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zee(r.key),r)}}function $2e(t,e,a){return e&&H2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function K2e(t,e,a){return e=o2(e),W2e(t,Oee()?Reflect.construct(e,a||[],o2(t).constructor):e.apply(t,a))}function W2e(t,e){if(e&&(e1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y2e(t)}function Y2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oee=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},o2(t)}function X2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}function PI(t,e){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PI(t,e)}function Vee(t,e,a){return e=zee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function zee(t){var e=J2e(t,"string");return e1(e)=="symbol"?e:e+""}function J2e(t,e){if(e1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(e1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},EI.apply(this,arguments)}function Q2e(t){var e=t.xAxisId,a=x4(),r=P4(),i=lee(e);return i==null?null:Ot.createElement(S1,EI({},i,{className:hi("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(c){return Sg(c,!0)}}))}var md=function(t){function e(){return q2e(this,e),K2e(this,e,arguments)}return X2e(e,t),$2e(e,[{key:"render",value:function(){return Ot.createElement(Q2e,this.props)}}])}(Ot.Component);Vee(md,"displayName","XAxis");Vee(md,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function t1(t){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t1(t)}function ePe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tPe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Iee(r.key),r)}}function aPe(t,e,a){return e&&tPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rPe(t,e,a){return e=l2(e),nPe(t,Dee()?Reflect.construct(e,a||[],l2(t).constructor):e.apply(t,a))}function nPe(t,e){if(e&&(t1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iPe(t)}function iPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dee=function(){return!!t})()}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},l2(t)}function sPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NI(t,e)}function NI(t,e){return NI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NI(t,e)}function Mee(t,e,a){return e=Iee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Iee(t){var e=oPe(t,"string");return t1(e)=="symbol"?e:e+""}function oPe(t,e){if(t1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(t1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},OI.apply(this,arguments)}var lPe=function(e){var a=e.yAxisId,r=x4(),i=P4(),l=uee(a);return l==null?null:Ot.createElement(S1,OI({},l,{className:hi("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(n){return Sg(n,!0)}}))},gd=function(t){function e(){return ePe(this,e),rPe(this,e,arguments)}return sPe(e,t),aPe(e,[{key:"render",value:function(){return Ot.createElement(lPe,this.props)}}])}(Ot.Component);Mee(gd,"displayName","YAxis");Mee(gd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function qZ(t){return hPe(t)||dPe(t)||cPe(t)||uPe()}function uPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cPe(t,e){if(t){if(typeof t=="string")return VI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return VI(t,e)}}function dPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hPe(t){if(Array.isArray(t))return VI(t)}function VI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var zI=function(e,a,r,i,l){var c=hh(e,N4),n=hh(e,jP),v=[].concat(qZ(c),qZ(n)),R=hh(e,ZP),x="".concat(i,"Id"),N=i[0],L=a;if(v.length&&(L=v.reduce(function(H,q){if(q.props[x]===r&&Bm(q.props,"extendDomain")&&Ar(q.props[N])){var W=q.props[N];return[Math.min(H[0],W),Math.max(H[1],W)]}return H},L)),R.length){var F="".concat(N,"1"),j="".concat(N,"2");L=R.reduce(function(H,q){if(q.props[x]===r&&Bm(q.props,"extendDomain")&&Ar(q.props[F])&&Ar(q.props[j])){var W=q.props[F],ee=q.props[j];return[Math.min(H[0],W,ee),Math.max(H[1],W,ee)]}return H},L)}return l&&l.length&&(L=l.reduce(function(H,q){return Ar(q)?[Math.min(H[0],q),Math.max(H[1],q)]:H},L)),L},M5={exports:{}},HZ;function fPe(){return HZ||(HZ=1,function(t){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function i(v,R,x){this.fn=v,this.context=R,this.once=x||!1}function l(v,R,x,N,L){if(typeof x!="function")throw new TypeError("The listener must be a function");var F=new i(x,N||v,L),j=a?a+R:R;return v._events[j]?v._events[j].fn?v._events[j]=[v._events[j],F]:v._events[j].push(F):(v._events[j]=F,v._eventsCount++),v}function c(v,R){--v._eventsCount===0?v._events=new r:delete v._events[R]}function n(){this._events=new r,this._eventsCount=0}n.prototype.eventNames=function(){var R=[],x,N;if(this._eventsCount===0)return R;for(N in x=this._events)e.call(x,N)&&R.push(a?N.slice(1):N);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(x)):R},n.prototype.listeners=function(R){var x=a?a+R:R,N=this._events[x];if(!N)return[];if(N.fn)return[N.fn];for(var L=0,F=N.length,j=new Array(F);L<F;L++)j[L]=N[L].fn;return j},n.prototype.listenerCount=function(R){var x=a?a+R:R,N=this._events[x];return N?N.fn?1:N.length:0},n.prototype.emit=function(R,x,N,L,F,j){var H=a?a+R:R;if(!this._events[H])return!1;var q=this._events[H],W=arguments.length,ee,oe;if(q.fn){switch(q.once&&this.removeListener(R,q.fn,void 0,!0),W){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,x),!0;case 3:return q.fn.call(q.context,x,N),!0;case 4:return q.fn.call(q.context,x,N,L),!0;case 5:return q.fn.call(q.context,x,N,L,F),!0;case 6:return q.fn.call(q.context,x,N,L,F,j),!0}for(oe=1,ee=new Array(W-1);oe<W;oe++)ee[oe-1]=arguments[oe];q.fn.apply(q.context,ee)}else{var fe=q.length,se;for(oe=0;oe<fe;oe++)switch(q[oe].once&&this.removeListener(R,q[oe].fn,void 0,!0),W){case 1:q[oe].fn.call(q[oe].context);break;case 2:q[oe].fn.call(q[oe].context,x);break;case 3:q[oe].fn.call(q[oe].context,x,N);break;case 4:q[oe].fn.call(q[oe].context,x,N,L);break;default:if(!ee)for(se=1,ee=new Array(W-1);se<W;se++)ee[se-1]=arguments[se];q[oe].fn.apply(q[oe].context,ee)}}return!0},n.prototype.on=function(R,x,N){return l(this,R,x,N,!1)},n.prototype.once=function(R,x,N){return l(this,R,x,N,!0)},n.prototype.removeListener=function(R,x,N,L){var F=a?a+R:R;if(!this._events[F])return this;if(!x)return c(this,F),this;var j=this._events[F];if(j.fn)j.fn===x&&(!L||j.once)&&(!N||j.context===N)&&c(this,F);else{for(var H=0,q=[],W=j.length;H<W;H++)(j[H].fn!==x||L&&!j[H].once||N&&j[H].context!==N)&&q.push(j[H]);q.length?this._events[F]=q.length===1?q[0]:q:c(this,F)}return this},n.prototype.removeAllListeners=function(R){var x;return R?(x=a?a+R:R,this._events[x]&&c(this,x)):(this._events=new r,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=a,n.EventEmitter=n,t.exports=n}(M5)),M5.exports}var pPe=fPe();const mPe=ns(pPe);var I5=new mPe,L5="recharts.syncMouseEvents";function NT(t){"@babel/helpers - typeof";return NT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NT(t)}function gPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yPe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lee(r.key),r)}}function APe(t,e,a){return e&&yPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F5(t,e,a){return e=Lee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Lee(t){var e=vPe(t,"string");return NT(e)=="symbol"?e:e+""}function vPe(t,e){if(NT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(NT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _Pe=function(){function t(){gPe(this,t),F5(this,"activeIndex",0),F5(this,"coordinateList",[]),F5(this,"layout","horizontal")}return APe(t,[{key:"setDetails",value:function(a){var r,i=a.coordinateList,l=i===void 0?null:i,c=a.container,n=c===void 0?null:c,v=a.layout,R=v===void 0?null:v,x=a.offset,N=x===void 0?null:x,L=a.mouseHandlerCallback,F=L===void 0?null:L;this.coordinateList=(r=l??this.coordinateList)!==null&&r!==void 0?r:[],this.container=n??this.container,this.layout=R??this.layout,this.offset=N??this.offset,this.mouseHandlerCallback=F??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),l=i.x,c=i.y,n=i.height,v=this.coordinateList[this.activeIndex].coordinate,R=((a=window)===null||a===void 0?void 0:a.scrollX)||0,x=((r=window)===null||r===void 0?void 0:r.scrollY)||0,N=l+v+R,L=c+this.offset.top+n/2+x;this.mouseHandlerCallback({pageX:N,pageY:L})}}}])}();function wPe(t,e,a){if(a==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ar(r)&&Ar(i))return!0}return!1}function RPe(t,e,a,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:a.left+.5,y:t==="horizontal"?a.top+.5:e.y-i,width:t==="horizontal"?r:a.width-1,height:t==="horizontal"?a.height-1:r}}function Fee(t){var e=t.cx,a=t.cy,r=t.radius,i=t.startAngle,l=t.endAngle,c=xo(e,a,r,i),n=xo(e,a,r,l);return{points:[c,n],cx:e,cy:a,radius:r,startAngle:i,endAngle:l}}function TPe(t,e,a){var r,i,l,c;if(t==="horizontal")r=e.x,l=r,i=a.top,c=a.top+a.height;else if(t==="vertical")i=e.y,c=i,r=a.left,l=a.left+a.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var n=e.cx,v=e.cy,R=e.innerRadius,x=e.outerRadius,N=e.angle,L=xo(n,v,R,N),F=xo(n,v,x,N);r=L.x,i=L.y,l=F.x,c=F.y}else return Fee(e);return[{x:r,y:i},{x:l,y:c}]}function OT(t){"@babel/helpers - typeof";return OT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OT(t)}function $Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function QS(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?$Z(Object(a),!0).forEach(function(r){CPe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$Z(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function CPe(t,e,a){return e=SPe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function SPe(t){var e=bPe(t,"string");return OT(e)=="symbol"?e:e+""}function bPe(t,e){if(OT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(OT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xPe(t){var e,a,r=t.element,i=t.tooltipEventType,l=t.isActive,c=t.activeCoordinate,n=t.activePayload,v=t.offset,R=t.activeTooltipIndex,x=t.tooltipAxisBandSize,N=t.layout,L=t.chartName,F=(e=r.props.cursor)!==null&&e!==void 0?e:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!F||!l||!c||L!=="ScatterChart"&&i!=="axis")return null;var j,H=Ky;if(L==="ScatterChart")j=c,H=vCe;else if(L==="BarChart")j=RPe(N,c,v,x),H=T4;else if(N==="radial"){var q=Fee(c),W=q.cx,ee=q.cy,oe=q.radius,fe=q.startAngle,se=q.endAngle;j={cx:W,cy:ee,startAngle:fe,endAngle:se,innerRadius:oe,outerRadius:oe},H=VQ}else j={points:TPe(N,c,v)},H=Ky;var me=QS(QS(QS(QS({stroke:"#ccc",pointerEvents:"none"},v),j),cn(F,!1)),{},{payload:n,payloadIndex:R,className:hi("recharts-tooltip-cursor",F.className)});return le.isValidElement(F)?le.cloneElement(F,me):le.createElement(H,me)}var PPe=["item"],EPe=["children","className","width","height","style","compact","title","desc"];function a1(t){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a1(t)}function t_(){return t_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},t_.apply(this,arguments)}function KZ(t,e){return VPe(t)||OPe(t,e)||Uee(t,e)||NPe()}function NPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OPe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function VPe(t){if(Array.isArray(t))return t}function WZ(t,e){if(t==null)return{};var a=zPe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zPe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function DPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MPe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bee(r.key),r)}}function IPe(t,e,a){return e&&MPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LPe(t,e,a){return e=u2(e),FPe(t,kee()?Reflect.construct(e,a||[],u2(t).constructor):e.apply(t,a))}function FPe(t,e){if(e&&(a1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kPe(t)}function kPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kee=function(){return!!t})()}function u2(t){return u2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},u2(t)}function UPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DI(t,e)}function DI(t,e){return DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DI(t,e)}function r1(t){return GPe(t)||jPe(t)||Uee(t)||BPe()}function BPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uee(t,e){if(t){if(typeof t=="string")return MI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return MI(t,e)}}function jPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GPe(t){if(Array.isArray(t))return MI(t)}function MI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function YZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function $a(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?YZ(Object(a),!0).forEach(function(r){Zn(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):YZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Zn(t,e,a){return e=Bee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Bee(t){var e=ZPe(t,"string");return a1(e)=="symbol"?e:e+""}function ZPe(t,e){if(a1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(a1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qPe={xAxis:["bottom","top"],yAxis:["left","right"]},HPe={width:"100%",height:"100%"},jee={x:0,y:0};function eb(t){return t}var $Pe=function(e,a){return a==="horizontal"?e.x:a==="vertical"?e.y:a==="centric"?e.angle:e.radius},KPe=function(e,a,r,i){var l=a.find(function(x){return x&&x.index===r});if(l){if(e==="horizontal")return{x:l.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:l.coordinate};if(e==="centric"){var c=l.coordinate,n=i.radius;return $a($a($a({},i),xo(i.cx,i.cy,n,c)),{},{angle:c,radius:n})}var v=l.coordinate,R=i.angle;return $a($a($a({},i),xo(i.cx,i.cy,v,R)),{},{angle:R,radius:v})}return jee},$P=function(e,a){var r=a.graphicalItems,i=a.dataStartIndex,l=a.dataEndIndex,c=(r??[]).reduce(function(n,v){var R=v.props.data;return R&&R.length?[].concat(r1(n),r1(R)):n},[]);return c.length>0?c:e&&e.length&&Ar(i)&&Ar(l)?e.slice(i,l+1):[]};function Gee(t){return t==="number"?[0,"auto"]:void 0}var II=function(e,a,r,i){var l=e.graphicalItems,c=e.tooltipAxis,n=$P(a,e);return r<0||!l||!l.length||r>=n.length?null:l.reduce(function(v,R){var x,N=(x=R.props.data)!==null&&x!==void 0?x:a;N&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(N=N.slice(e.dataStartIndex,e.dataEndIndex+1));var L;if(c.dataKey&&!c.allowDuplicatedCategory){var F=N===void 0?n:N;L=ux(F,c.dataKey,i)}else L=N&&N[r]||n[r];return L?[].concat(r1(v),[bQ(R,L)]):v},[])},XZ=function(e,a,r,i){var l=i||{x:e.chartX,y:e.chartY},c=$Pe(l,r),n=e.orderedTooltipTicks,v=e.tooltipAxis,R=e.tooltipTicks,x=Z1e(c,n,R,v);if(x>=0&&R){var N=R[x]&&R[x].value,L=II(e,a,x,N),F=KPe(r,n,x,l);return{activeTooltipIndex:x,activeLabel:N,activePayload:L,activeCoordinate:F}}return null},WPe=function(e,a){var r=a.axes,i=a.graphicalItems,l=a.axisType,c=a.axisIdKey,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.layout,N=e.children,L=e.stackOffset,F=_Q(x,l);return r.reduce(function(j,H){var q,W=H.type.defaultProps!==void 0?$a($a({},H.type.defaultProps),H.props):H.props,ee=W.type,oe=W.dataKey,fe=W.allowDataOverflow,se=W.allowDuplicatedCategory,me=W.scale,ge=W.ticks,Re=W.includeHidden,we=W[c];if(j[we])return j;var Ee=$P(e.data,{graphicalItems:i.filter(function(Se){var Te,qe=c in Se.props?Se.props[c]:(Te=Se.type.defaultProps)===null||Te===void 0?void 0:Te[c];return qe===we}),dataStartIndex:v,dataEndIndex:R}),ae=Ee.length,_e,Ie,xe;wPe(W.domain,fe,ee)&&(_e=$M(W.domain,null,fe),F&&(ee==="number"||me!=="auto")&&(xe=RR(Ee,oe,"category")));var ze=Gee(ee);if(!_e||_e.length===0){var Me,je=(Me=W.domain)!==null&&Me!==void 0?Me:ze;if(oe){if(_e=RR(Ee,oe,ee),ee==="category"&&F){var Ue=Fpe(_e);se&&Ue?(Ie=_e,_e=$x(0,ae)):se||(_e=$7(je,_e,H).reduce(function(Se,Te){return Se.indexOf(Te)>=0?Se:[].concat(r1(Se),[Te])},[]))}else if(ee==="category")se?_e=_e.filter(function(Se){return Se!==""&&!Bn(Se)}):_e=$7(je,_e,H).reduce(function(Se,Te){return Se.indexOf(Te)>=0||Te===""||Bn(Te)?Se:[].concat(r1(Se),[Te])},[]);else if(ee==="number"){var Qe=W1e(Ee,i.filter(function(Se){var Te,qe,Ze=c in Se.props?Se.props[c]:(Te=Se.type.defaultProps)===null||Te===void 0?void 0:Te[c],lt="hide"in Se.props?Se.props.hide:(qe=Se.type.defaultProps)===null||qe===void 0?void 0:qe.hide;return Ze===we&&(Re||!lt)}),oe,l,x);Qe&&(_e=Qe)}F&&(ee==="number"||me!=="auto")&&(xe=RR(Ee,oe,"category"))}else F?_e=$x(0,ae):n&&n[we]&&n[we].hasStack&&ee==="number"?_e=L==="expand"?[0,1]:SQ(n[we].stackGroups,v,R):_e=vQ(Ee,i.filter(function(Se){var Te=c in Se.props?Se.props[c]:Se.type.defaultProps[c],qe="hide"in Se.props?Se.props.hide:Se.type.defaultProps.hide;return Te===we&&(Re||!qe)}),ee,x,!0);if(ee==="number")_e=zI(N,_e,we,l,ge),je&&(_e=$M(je,_e,fe));else if(ee==="category"&&je){var ke=je,Ge=_e.every(function(Se){return ke.indexOf(Se)>=0});Ge&&(_e=ke)}}return $a($a({},j),{},Zn({},we,$a($a({},W),{},{axisType:l,domain:_e,categoricalDomain:xe,duplicateDomain:Ie,originalDomain:(q=W.domain)!==null&&q!==void 0?q:ze,isCategorical:F,layout:x})))},{})},YPe=function(e,a){var r=a.graphicalItems,i=a.Axis,l=a.axisType,c=a.axisIdKey,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.layout,N=e.children,L=$P(e.data,{graphicalItems:r,dataStartIndex:v,dataEndIndex:R}),F=L.length,j=_Q(x,l),H=-1;return r.reduce(function(q,W){var ee=W.type.defaultProps!==void 0?$a($a({},W.type.defaultProps),W.props):W.props,oe=ee[c],fe=Gee("number");if(!q[oe]){H++;var se;return j?se=$x(0,F):n&&n[oe]&&n[oe].hasStack?(se=SQ(n[oe].stackGroups,v,R),se=zI(N,se,oe,l)):(se=$M(fe,vQ(L,r.filter(function(me){var ge,Re,we=c in me.props?me.props[c]:(ge=me.type.defaultProps)===null||ge===void 0?void 0:ge[c],Ee="hide"in me.props?me.props.hide:(Re=me.type.defaultProps)===null||Re===void 0?void 0:Re.hide;return we===oe&&!Ee}),"number",x),i.defaultProps.allowDataOverflow),se=zI(N,se,oe,l)),$a($a({},q),{},Zn({},oe,$a($a({axisType:l},i.defaultProps),{},{hide:!0,orientation:vf(qPe,"".concat(l,".").concat(H%2),null),domain:se,originalDomain:fe,isCategorical:j,layout:x})))}return q},{})},XPe=function(e,a){var r=a.axisType,i=r===void 0?"xAxis":r,l=a.AxisComp,c=a.graphicalItems,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.children,N="".concat(i,"Id"),L=hh(x,l),F={};return L&&L.length?F=WPe(e,{axes:L,graphicalItems:c,axisType:i,axisIdKey:N,stackGroups:n,dataStartIndex:v,dataEndIndex:R}):c&&c.length&&(F=YPe(e,{Axis:l,graphicalItems:c,axisType:i,axisIdKey:N,stackGroups:n,dataStartIndex:v,dataEndIndex:R})),F},JPe=function(e){var a=Iy(e),r=Sg(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:YL(r,function(i){return i.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Dx(a,r)}},JZ=function(e){var a=e.children,r=e.defaultShowTooltip,i=df(a,Z_),l=0,c=0;return e.data&&e.data.length!==0&&(c=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(l=i.props.startIndex),i.props.endIndex>=0&&(c=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:c,activeTooltipIndex:-1,isTooltipActive:!!r}},QPe=function(e){return!e||!e.length?!1:e.some(function(a){var r=Pg(a&&a.type);return r&&r.indexOf("Bar")>=0})},QZ=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},eEe=function(e,a){var r=e.props,i=e.graphicalItems,l=e.xAxisMap,c=l===void 0?{}:l,n=e.yAxisMap,v=n===void 0?{}:n,R=r.width,x=r.height,N=r.children,L=r.margin||{},F=df(N,Z_),j=df(N,hf),H=Object.keys(v).reduce(function(se,me){var ge=v[me],Re=ge.orientation;return!ge.mirror&&!ge.hide?$a($a({},se),{},Zn({},Re,se[Re]+ge.width)):se},{left:L.left||0,right:L.right||0}),q=Object.keys(c).reduce(function(se,me){var ge=c[me],Re=ge.orientation;return!ge.mirror&&!ge.hide?$a($a({},se),{},Zn({},Re,vf(se,"".concat(Re))+ge.height)):se},{top:L.top||0,bottom:L.bottom||0}),W=$a($a({},q),H),ee=W.bottom;F&&(W.bottom+=F.props.height||Z_.defaultProps.height),j&&a&&(W=$1e(W,i,r,a));var oe=R-W.left-W.right,fe=x-W.top-W.bottom;return $a($a({brushBottom:ee},W),{},{width:Math.max(oe,0),height:Math.max(fe,0)})},tEe=function(e,a){if(a==="xAxis")return e[a].width;if(a==="yAxis")return e[a].height},yC=function(e){var a=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,l=i===void 0?"axis":i,c=e.validateTooltipEventTypes,n=c===void 0?["axis"]:c,v=e.axisComponents,R=e.legendContent,x=e.formatAxisMap,N=e.defaultProps,L=function(W,ee){var oe=ee.graphicalItems,fe=ee.stackGroups,se=ee.offset,me=ee.updateId,ge=ee.dataStartIndex,Re=ee.dataEndIndex,we=W.barSize,Ee=W.layout,ae=W.barGap,_e=W.barCategoryGap,Ie=W.maxBarSize,xe=QZ(Ee),ze=xe.numericAxisName,Me=xe.cateAxisName,je=QPe(oe),Ue=[];return oe.forEach(function(Qe,ke){var Ge=$P(W.data,{graphicalItems:[Qe],dataStartIndex:ge,dataEndIndex:Re}),Se=Qe.type.defaultProps!==void 0?$a($a({},Qe.type.defaultProps),Qe.props):Qe.props,Te=Se.dataKey,qe=Se.maxBarSize,Ze=Se["".concat(ze,"Id")],lt=Se["".concat(Me,"Id")],st={},ht=v.reduce(function(cr,dr){var Sr=ee["".concat(dr.axisType,"Map")],ka=Se["".concat(dr.axisType,"Id")];Sr&&Sr[ka]||dr.axisType==="zAxis"||Dv();var Gr=Sr[ka];return $a($a({},cr),{},Zn(Zn({},dr.axisType,Gr),"".concat(dr.axisType,"Ticks"),Sg(Gr)))},st),He=ht[Me],Ae=ht["".concat(Me,"Ticks")],zt=fe&&fe[Ze]&&fe[Ze].hasStack&&nwe(Qe,fe[Ze].stackGroups),kt=Pg(Qe.type).indexOf("Bar")>=0,ma=Dx(He,Ae),It=[],Ht=je&&q1e({barSize:we,stackGroups:fe,totalSize:tEe(ht,Me)});if(kt){var _t,ir,Ea=Bn(qe)?Ie:qe,Na=(_t=(ir=Dx(He,Ae,!0))!==null&&ir!==void 0?ir:Ea)!==null&&_t!==void 0?_t:0;It=H1e({barGap:ae,barCategoryGap:_e,bandSize:Na!==ma?Na:ma,sizeList:Ht[lt],maxBarSize:Ea}),Na!==ma&&(It=It.map(function(cr){return $a($a({},cr),{},{position:$a($a({},cr.position),{},{offset:cr.position.offset-Na/2})})}))}var Ja=Qe&&Qe.type&&Qe.type.getComposedData;Ja&&Ue.push({props:$a($a({},Ja($a($a({},ht),{},{displayedData:Ge,props:W,dataKey:Te,item:Qe,bandSize:ma,barPosition:It,offset:se,stackedData:zt,layout:Ee,dataStartIndex:ge,dataEndIndex:Re}))),{},Zn(Zn(Zn({key:Qe.key||"item-".concat(ke)},ze,ht[ze]),Me,ht[Me]),"animationId",me)),childIndex:Ype(Qe,W.children),item:Qe})}),Ue},F=function(W,ee){var oe=W.props,fe=W.dataStartIndex,se=W.dataEndIndex,me=W.updateId;if(!l8({props:oe}))return null;var ge=oe.children,Re=oe.layout,we=oe.stackOffset,Ee=oe.data,ae=oe.reverseStackOrder,_e=QZ(Re),Ie=_e.numericAxisName,xe=_e.cateAxisName,ze=hh(ge,r),Me=awe(Ee,ze,"".concat(Ie,"Id"),"".concat(xe,"Id"),we,ae),je=v.reduce(function(Se,Te){var qe="".concat(Te.axisType,"Map");return $a($a({},Se),{},Zn({},qe,XPe(oe,$a($a({},Te),{},{graphicalItems:ze,stackGroups:Te.axisType===Ie&&Me,dataStartIndex:fe,dataEndIndex:se}))))},{}),Ue=eEe($a($a({},je),{},{props:oe,graphicalItems:ze}),ee==null?void 0:ee.legendBBox);Object.keys(je).forEach(function(Se){je[Se]=x(oe,je[Se],Ue,Se.replace("Map",""),a)});var Qe=je["".concat(xe,"Map")],ke=JPe(Qe),Ge=L(oe,$a($a({},je),{},{dataStartIndex:fe,dataEndIndex:se,updateId:me,graphicalItems:ze,stackGroups:Me,offset:Ue}));return $a($a({formattedGraphicalItems:Ge,graphicalItems:ze,offset:Ue,stackGroups:Me},ke),je)},j=function(q){function W(ee){var oe,fe,se;return DPe(this,W),se=LPe(this,W,[ee]),Zn(se,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Zn(se,"accessibilityManager",new _Pe),Zn(se,"handleLegendBBoxUpdate",function(me){if(me){var ge=se.state,Re=ge.dataStartIndex,we=ge.dataEndIndex,Ee=ge.updateId;se.setState($a({legendBBox:me},F({props:se.props,dataStartIndex:Re,dataEndIndex:we,updateId:Ee},$a($a({},se.state),{},{legendBBox:me}))))}}),Zn(se,"handleReceiveSyncEvent",function(me,ge,Re){if(se.props.syncId===me){if(Re===se.eventEmitterSymbol&&typeof se.props.syncMethod!="function")return;se.applySyncEvent(ge)}}),Zn(se,"handleBrushChange",function(me){var ge=me.startIndex,Re=me.endIndex;if(ge!==se.state.dataStartIndex||Re!==se.state.dataEndIndex){var we=se.state.updateId;se.setState(function(){return $a({dataStartIndex:ge,dataEndIndex:Re},F({props:se.props,dataStartIndex:ge,dataEndIndex:Re,updateId:we},se.state))}),se.triggerSyncEvent({dataStartIndex:ge,dataEndIndex:Re})}}),Zn(se,"handleMouseEnter",function(me){var ge=se.getMouseInfo(me);if(ge){var Re=$a($a({},ge),{},{isTooltipActive:!0});se.setState(Re),se.triggerSyncEvent(Re);var we=se.props.onMouseEnter;Un(we)&&we(Re,me)}}),Zn(se,"triggeredAfterMouseMove",function(me){var ge=se.getMouseInfo(me),Re=ge?$a($a({},ge),{},{isTooltipActive:!0}):{isTooltipActive:!1};se.setState(Re),se.triggerSyncEvent(Re);var we=se.props.onMouseMove;Un(we)&&we(Re,me)}),Zn(se,"handleItemMouseEnter",function(me){se.setState(function(){return{isTooltipActive:!0,activeItem:me,activePayload:me.tooltipPayload,activeCoordinate:me.tooltipPosition||{x:me.cx,y:me.cy}}})}),Zn(se,"handleItemMouseLeave",function(){se.setState(function(){return{isTooltipActive:!1}})}),Zn(se,"handleMouseMove",function(me){me.persist(),se.throttleTriggeredAfterMouseMove(me)}),Zn(se,"handleMouseLeave",function(me){se.throttleTriggeredAfterMouseMove.cancel();var ge={isTooltipActive:!1};se.setState(ge),se.triggerSyncEvent(ge);var Re=se.props.onMouseLeave;Un(Re)&&Re(ge,me)}),Zn(se,"handleOuterEvent",function(me){var ge=Wpe(me),Re=vf(se.props,"".concat(ge));if(ge&&Un(Re)){var we,Ee;/.*touch.*/i.test(ge)?Ee=se.getMouseInfo(me.changedTouches[0]):Ee=se.getMouseInfo(me),Re((we=Ee)!==null&&we!==void 0?we:{},me)}}),Zn(se,"handleClick",function(me){var ge=se.getMouseInfo(me);if(ge){var Re=$a($a({},ge),{},{isTooltipActive:!0});se.setState(Re),se.triggerSyncEvent(Re);var we=se.props.onClick;Un(we)&&we(Re,me)}}),Zn(se,"handleMouseDown",function(me){var ge=se.props.onMouseDown;if(Un(ge)){var Re=se.getMouseInfo(me);ge(Re,me)}}),Zn(se,"handleMouseUp",function(me){var ge=se.props.onMouseUp;if(Un(ge)){var Re=se.getMouseInfo(me);ge(Re,me)}}),Zn(se,"handleTouchMove",function(me){me.changedTouches!=null&&me.changedTouches.length>0&&se.throttleTriggeredAfterMouseMove(me.changedTouches[0])}),Zn(se,"handleTouchStart",function(me){me.changedTouches!=null&&me.changedTouches.length>0&&se.handleMouseDown(me.changedTouches[0])}),Zn(se,"handleTouchEnd",function(me){me.changedTouches!=null&&me.changedTouches.length>0&&se.handleMouseUp(me.changedTouches[0])}),Zn(se,"handleDoubleClick",function(me){var ge=se.props.onDoubleClick;if(Un(ge)){var Re=se.getMouseInfo(me);ge(Re,me)}}),Zn(se,"handleContextMenu",function(me){var ge=se.props.onContextMenu;if(Un(ge)){var Re=se.getMouseInfo(me);ge(Re,me)}}),Zn(se,"triggerSyncEvent",function(me){se.props.syncId!==void 0&&I5.emit(L5,se.props.syncId,me,se.eventEmitterSymbol)}),Zn(se,"applySyncEvent",function(me){var ge=se.props,Re=ge.layout,we=ge.syncMethod,Ee=se.state.updateId,ae=me.dataStartIndex,_e=me.dataEndIndex;if(me.dataStartIndex!==void 0||me.dataEndIndex!==void 0)se.setState($a({dataStartIndex:ae,dataEndIndex:_e},F({props:se.props,dataStartIndex:ae,dataEndIndex:_e,updateId:Ee},se.state)));else if(me.activeTooltipIndex!==void 0){var Ie=me.chartX,xe=me.chartY,ze=me.activeTooltipIndex,Me=se.state,je=Me.offset,Ue=Me.tooltipTicks;if(!je)return;if(typeof we=="function")ze=we(Ue,me);else if(we==="value"){ze=-1;for(var Qe=0;Qe<Ue.length;Qe++)if(Ue[Qe].value===me.activeLabel){ze=Qe;break}}var ke=$a($a({},je),{},{x:je.left,y:je.top}),Ge=Math.min(Ie,ke.x+ke.width),Se=Math.min(xe,ke.y+ke.height),Te=Ue[ze]&&Ue[ze].value,qe=II(se.state,se.props.data,ze),Ze=Ue[ze]?{x:Re==="horizontal"?Ue[ze].coordinate:Ge,y:Re==="horizontal"?Se:Ue[ze].coordinate}:jee;se.setState($a($a({},me),{},{activeLabel:Te,activeCoordinate:Ze,activePayload:qe,activeTooltipIndex:ze}))}else se.setState(me)}),Zn(se,"renderCursor",function(me){var ge,Re=se.state,we=Re.isTooltipActive,Ee=Re.activeCoordinate,ae=Re.activePayload,_e=Re.offset,Ie=Re.activeTooltipIndex,xe=Re.tooltipAxisBandSize,ze=se.getTooltipEventType(),Me=(ge=me.props.active)!==null&&ge!==void 0?ge:we,je=se.props.layout,Ue=me.key||"_recharts-cursor";return Ot.createElement(xPe,{key:Ue,activeCoordinate:Ee,activePayload:ae,activeTooltipIndex:Ie,chartName:a,element:me,isActive:Me,layout:je,offset:_e,tooltipAxisBandSize:xe,tooltipEventType:ze})}),Zn(se,"renderPolarAxis",function(me,ge,Re){var we=vf(me,"type.axisType"),Ee=vf(se.state,"".concat(we,"Map")),ae=me.type.defaultProps,_e=ae!==void 0?$a($a({},ae),me.props):me.props,Ie=Ee&&Ee[_e["".concat(we,"Id")]];return le.cloneElement(me,$a($a({},Ie),{},{className:hi(we,Ie.className),key:me.key||"".concat(ge,"-").concat(Re),ticks:Sg(Ie,!0)}))}),Zn(se,"renderPolarGrid",function(me){var ge=me.props,Re=ge.radialLines,we=ge.polarAngles,Ee=ge.polarRadius,ae=se.state,_e=ae.radiusAxisMap,Ie=ae.angleAxisMap,xe=Iy(_e),ze=Iy(Ie),Me=ze.cx,je=ze.cy,Ue=ze.innerRadius,Qe=ze.outerRadius;return le.cloneElement(me,{polarAngles:Array.isArray(we)?we:Sg(ze,!0).map(function(ke){return ke.coordinate}),polarRadius:Array.isArray(Ee)?Ee:Sg(xe,!0).map(function(ke){return ke.coordinate}),cx:Me,cy:je,innerRadius:Ue,outerRadius:Qe,key:me.key||"polar-grid",radialLines:Re})}),Zn(se,"renderLegend",function(){var me=se.state.formattedGraphicalItems,ge=se.props,Re=ge.children,we=ge.width,Ee=ge.height,ae=se.props.margin||{},_e=we-(ae.left||0)-(ae.right||0),Ie=yQ({children:Re,formattedGraphicalItems:me,legendWidth:_e,legendContent:R});if(!Ie)return null;var xe=Ie.item,ze=WZ(Ie,PPe);return le.cloneElement(xe,$a($a({},ze),{},{chartWidth:we,chartHeight:Ee,margin:ae,onBBoxUpdate:se.handleLegendBBoxUpdate}))}),Zn(se,"renderTooltip",function(){var me,ge=se.props,Re=ge.children,we=ge.accessibilityLayer,Ee=df(Re,mu);if(!Ee)return null;var ae=se.state,_e=ae.isTooltipActive,Ie=ae.activeCoordinate,xe=ae.activePayload,ze=ae.activeLabel,Me=ae.offset,je=(me=Ee.props.active)!==null&&me!==void 0?me:_e;return le.cloneElement(Ee,{viewBox:$a($a({},Me),{},{x:Me.left,y:Me.top}),active:je,label:ze,payload:je?xe:[],coordinate:Ie,accessibilityLayer:we})}),Zn(se,"renderBrush",function(me){var ge=se.props,Re=ge.margin,we=ge.data,Ee=se.state,ae=Ee.offset,_e=Ee.dataStartIndex,Ie=Ee.dataEndIndex,xe=Ee.updateId;return le.cloneElement(me,{key:me.key||"_recharts-brush",onChange:WS(se.handleBrushChange,me.props.onChange),data:we,x:Ar(me.props.x)?me.props.x:ae.left,y:Ar(me.props.y)?me.props.y:ae.top+ae.height+ae.brushBottom-(Re.bottom||0),width:Ar(me.props.width)?me.props.width:ae.width,startIndex:_e,endIndex:Ie,updateId:"brush-".concat(xe)})}),Zn(se,"renderReferenceElement",function(me,ge,Re){if(!me)return null;var we=se,Ee=we.clipPathId,ae=se.state,_e=ae.xAxisMap,Ie=ae.yAxisMap,xe=ae.offset,ze=me.type.defaultProps||{},Me=me.props,je=Me.xAxisId,Ue=je===void 0?ze.xAxisId:je,Qe=Me.yAxisId,ke=Qe===void 0?ze.yAxisId:Qe;return le.cloneElement(me,{key:me.key||"".concat(ge,"-").concat(Re),xAxis:_e[Ue],yAxis:Ie[ke],viewBox:{x:xe.left,y:xe.top,width:xe.width,height:xe.height},clipPathId:Ee})}),Zn(se,"renderActivePoints",function(me){var ge=me.item,Re=me.activePoint,we=me.basePoint,Ee=me.childIndex,ae=me.isRange,_e=[],Ie=ge.props.key,xe=ge.item.type.defaultProps!==void 0?$a($a({},ge.item.type.defaultProps),ge.item.props):ge.item.props,ze=xe.activeDot,Me=xe.dataKey,je=$a($a({index:Ee,dataKey:Me,cx:Re.x,cy:Re.y,r:4,fill:R4(ge.item),strokeWidth:2,stroke:"#fff",payload:Re.payload,value:Re.value},cn(ze,!1)),cx(ze));return _e.push(W.renderActiveDot(ze,je,"".concat(Ie,"-activePoint-").concat(Ee))),we?_e.push(W.renderActiveDot(ze,$a($a({},je),{},{cx:we.x,cy:we.y}),"".concat(Ie,"-basePoint-").concat(Ee))):ae&&_e.push(null),_e}),Zn(se,"renderGraphicChild",function(me,ge,Re){var we=se.filterFormatItem(me,ge,Re);if(!we)return null;var Ee=se.getTooltipEventType(),ae=se.state,_e=ae.isTooltipActive,Ie=ae.tooltipAxis,xe=ae.activeTooltipIndex,ze=ae.activeLabel,Me=se.props.children,je=df(Me,mu),Ue=we.props,Qe=Ue.points,ke=Ue.isRange,Ge=Ue.baseLine,Se=we.item.type.defaultProps!==void 0?$a($a({},we.item.type.defaultProps),we.item.props):we.item.props,Te=Se.activeDot,qe=Se.hide,Ze=Se.activeBar,lt=Se.activeShape,st=!!(!qe&&_e&&je&&(Te||Ze||lt)),ht={};Ee!=="axis"&&je&&je.props.trigger==="click"?ht={onClick:WS(se.handleItemMouseEnter,me.props.onClick)}:Ee!=="axis"&&(ht={onMouseLeave:WS(se.handleItemMouseLeave,me.props.onMouseLeave),onMouseEnter:WS(se.handleItemMouseEnter,me.props.onMouseEnter)});var He=le.cloneElement(me,$a($a({},we.props),ht));function Ae(dr){return typeof Ie.dataKey=="function"?Ie.dataKey(dr.payload):null}if(st)if(xe>=0){var zt,kt;if(Ie.dataKey&&!Ie.allowDuplicatedCategory){var ma=typeof Ie.dataKey=="function"?Ae:"payload.".concat(Ie.dataKey.toString());zt=ux(Qe,ma,ze),kt=ke&&Ge&&ux(Ge,ma,ze)}else zt=Qe==null?void 0:Qe[xe],kt=ke&&Ge&&Ge[xe];if(lt||Ze){var It=me.props.activeIndex!==void 0?me.props.activeIndex:xe;return[le.cloneElement(me,$a($a($a({},we.props),ht),{},{activeIndex:It})),null,null]}if(!Bn(zt))return[He].concat(r1(se.renderActivePoints({item:we,activePoint:zt,basePoint:kt,childIndex:xe,isRange:ke})))}else{var Ht,_t=(Ht=se.getItemByXY(se.state.activeCoordinate))!==null&&Ht!==void 0?Ht:{graphicalItem:He},ir=_t.graphicalItem,Ea=ir.item,Na=Ea===void 0?me:Ea,Ja=ir.childIndex,cr=$a($a($a({},we.props),ht),{},{activeIndex:Ja});return[le.cloneElement(Na,cr),null,null]}return ke?[He,null,null]:[He,null]}),Zn(se,"renderCustomized",function(me,ge,Re){return le.cloneElement(me,$a($a({key:"recharts-customized-".concat(Re)},se.props),se.state))}),Zn(se,"renderMap",{CartesianGrid:{handler:eb,once:!0},ReferenceArea:{handler:se.renderReferenceElement},ReferenceLine:{handler:eb},ReferenceDot:{handler:se.renderReferenceElement},XAxis:{handler:eb},YAxis:{handler:eb},Brush:{handler:se.renderBrush,once:!0},Bar:{handler:se.renderGraphicChild},Line:{handler:se.renderGraphicChild},Area:{handler:se.renderGraphicChild},Radar:{handler:se.renderGraphicChild},RadialBar:{handler:se.renderGraphicChild},Scatter:{handler:se.renderGraphicChild},Pie:{handler:se.renderGraphicChild},Funnel:{handler:se.renderGraphicChild},Tooltip:{handler:se.renderCursor,once:!0},PolarGrid:{handler:se.renderPolarGrid,once:!0},PolarAngleAxis:{handler:se.renderPolarAxis},PolarRadiusAxis:{handler:se.renderPolarAxis},Customized:{handler:se.renderCustomized}}),se.clipPathId="".concat((oe=ee.id)!==null&&oe!==void 0?oe:uA("recharts"),"-clip"),se.throttleTriggeredAfterMouseMove=gJ(se.triggeredAfterMouseMove,(fe=ee.throttleDelay)!==null&&fe!==void 0?fe:1e3/60),se.state={},se}return UPe(W,q),IPe(W,[{key:"componentDidMount",value:function(){var oe,fe;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(oe=this.props.margin.left)!==null&&oe!==void 0?oe:0,top:(fe=this.props.margin.top)!==null&&fe!==void 0?fe:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var oe=this.props,fe=oe.children,se=oe.data,me=oe.height,ge=oe.layout,Re=df(fe,mu);if(Re){var we=Re.props.defaultIndex;if(!(typeof we!="number"||we<0||we>this.state.tooltipTicks.length-1)){var Ee=this.state.tooltipTicks[we]&&this.state.tooltipTicks[we].value,ae=II(this.state,se,we,Ee),_e=this.state.tooltipTicks[we].coordinate,Ie=(this.state.offset.top+me)/2,xe=ge==="horizontal",ze=xe?{x:_e,y:Ie}:{y:_e,x:Ie},Me=this.state.formattedGraphicalItems.find(function(Ue){var Qe=Ue.item;return Qe.type.name==="Scatter"});Me&&(ze=$a($a({},ze),Me.props.points[we].tooltipPosition),ae=Me.props.points[we].tooltipPayload);var je={activeTooltipIndex:we,isTooltipActive:!0,activeLabel:Ee,activePayload:ae,activeCoordinate:ze};this.setState(je),this.renderCursor(Re),this.accessibilityManager.setIndex(we)}}}},{key:"getSnapshotBeforeUpdate",value:function(oe,fe){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==fe.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==oe.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==oe.margin){var se,me;this.accessibilityManager.setDetails({offset:{left:(se=this.props.margin.left)!==null&&se!==void 0?se:0,top:(me=this.props.margin.top)!==null&&me!==void 0?me:0}})}return null}},{key:"componentDidUpdate",value:function(oe){mM([df(oe.children,mu)],[df(this.props.children,mu)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var oe=df(this.props.children,mu);if(oe&&typeof oe.props.shared=="boolean"){var fe=oe.props.shared?"axis":"item";return n.indexOf(fe)>=0?fe:l}return l}},{key:"getMouseInfo",value:function(oe){if(!this.container)return null;var fe=this.container,se=fe.getBoundingClientRect(),me=IAe(se),ge={chartX:Math.round(oe.pageX-me.left),chartY:Math.round(oe.pageY-me.top)},Re=se.width/fe.offsetWidth||1,we=this.inRange(ge.chartX,ge.chartY,Re);if(!we)return null;var Ee=this.state,ae=Ee.xAxisMap,_e=Ee.yAxisMap,Ie=this.getTooltipEventType();if(Ie!=="axis"&&ae&&_e){var xe=Iy(ae).scale,ze=Iy(_e).scale,Me=xe&&xe.invert?xe.invert(ge.chartX):null,je=ze&&ze.invert?ze.invert(ge.chartY):null;return $a($a({},ge),{},{xValue:Me,yValue:je})}var Ue=XZ(this.state,this.props.data,this.props.layout,we);return Ue?$a($a({},ge),Ue):null}},{key:"inRange",value:function(oe,fe){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,me=this.props.layout,ge=oe/se,Re=fe/se;if(me==="horizontal"||me==="vertical"){var we=this.state.offset,Ee=ge>=we.left&&ge<=we.left+we.width&&Re>=we.top&&Re<=we.top+we.height;return Ee?{x:ge,y:Re}:null}var ae=this.state,_e=ae.angleAxisMap,Ie=ae.radiusAxisMap;if(_e&&Ie){var xe=Iy(_e);return Y7({x:ge,y:Re},xe)}return null}},{key:"parseEventsOfWrapper",value:function(){var oe=this.props.children,fe=this.getTooltipEventType(),se=df(oe,mu),me={};se&&fe==="axis"&&(se.props.trigger==="click"?me={onClick:this.handleClick}:me={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var ge=cx(this.props,this.handleOuterEvent);return $a($a({},ge),me)}},{key:"addListener",value:function(){I5.on(L5,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){I5.removeListener(L5,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(oe,fe,se){for(var me=this.state.formattedGraphicalItems,ge=0,Re=me.length;ge<Re;ge++){var we=me[ge];if(we.item===oe||we.props.key===oe.key||fe===Pg(we.item.type)&&se===we.childIndex)return we}return null}},{key:"renderClipPath",value:function(){var oe=this.clipPathId,fe=this.state.offset,se=fe.left,me=fe.top,ge=fe.height,Re=fe.width;return Ot.createElement("defs",null,Ot.createElement("clipPath",{id:oe},Ot.createElement("rect",{x:se,y:me,height:ge,width:Re})))}},{key:"getXScales",value:function(){var oe=this.state.xAxisMap;return oe?Object.entries(oe).reduce(function(fe,se){var me=KZ(se,2),ge=me[0],Re=me[1];return $a($a({},fe),{},Zn({},ge,Re.scale))},{}):null}},{key:"getYScales",value:function(){var oe=this.state.yAxisMap;return oe?Object.entries(oe).reduce(function(fe,se){var me=KZ(se,2),ge=me[0],Re=me[1];return $a($a({},fe),{},Zn({},ge,Re.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(oe){var fe;return(fe=this.state.xAxisMap)===null||fe===void 0||(fe=fe[oe])===null||fe===void 0?void 0:fe.scale}},{key:"getYScaleByAxisId",value:function(oe){var fe;return(fe=this.state.yAxisMap)===null||fe===void 0||(fe=fe[oe])===null||fe===void 0?void 0:fe.scale}},{key:"getItemByXY",value:function(oe){var fe=this.state,se=fe.formattedGraphicalItems,me=fe.activeItem;if(se&&se.length)for(var ge=0,Re=se.length;ge<Re;ge++){var we=se[ge],Ee=we.props,ae=we.item,_e=ae.type.defaultProps!==void 0?$a($a({},ae.type.defaultProps),ae.props):ae.props,Ie=Pg(ae.type);if(Ie==="Bar"){var xe=(Ee.data||[]).find(function(Ue){return QTe(oe,Ue)});if(xe)return{graphicalItem:we,payload:xe}}else if(Ie==="RadialBar"){var ze=(Ee.data||[]).find(function(Ue){return Y7(oe,Ue)});if(ze)return{graphicalItem:we,payload:ze}}else if(LP(we,me)||FP(we,me)||ST(we,me)){var Me=TSe({graphicalItem:we,activeTooltipItem:me,itemData:_e.data}),je=_e.activeIndex===void 0?Me:_e.activeIndex;return{graphicalItem:$a($a({},we),{},{childIndex:je}),payload:ST(we,me)?_e.data[Me]:we.props.data[Me]}}}return null}},{key:"render",value:function(){var oe=this;if(!l8(this))return null;var fe=this.props,se=fe.children,me=fe.className,ge=fe.width,Re=fe.height,we=fe.style,Ee=fe.compact,ae=fe.title,_e=fe.desc,Ie=WZ(fe,EPe),xe=cn(Ie,!1);if(Ee)return Ot.createElement(SZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ot.createElement(yM,t_({},xe,{width:ge,height:Re,title:ae,desc:_e}),this.renderClipPath(),c8(se,this.renderMap)));if(this.props.accessibilityLayer){var ze,Me;xe.tabIndex=(ze=this.props.tabIndex)!==null&&ze!==void 0?ze:0,xe.role=(Me=this.props.role)!==null&&Me!==void 0?Me:"application",xe.onKeyDown=function(Ue){oe.accessibilityManager.keyboardEvent(Ue)},xe.onFocus=function(){oe.accessibilityManager.focus()}}var je=this.parseEventsOfWrapper();return Ot.createElement(SZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ot.createElement("div",t_({className:hi("recharts-wrapper",me),style:$a({position:"relative",cursor:"default",width:ge,height:Re},we)},je,{ref:function(Qe){oe.container=Qe}}),Ot.createElement(yM,t_({},xe,{width:ge,height:Re,title:ae,desc:_e,style:HPe}),this.renderClipPath(),c8(se,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(le.Component);Zn(j,"displayName",a),Zn(j,"defaultProps",$a({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},N)),Zn(j,"getDerivedStateFromProps",function(q,W){var ee=q.dataKey,oe=q.data,fe=q.children,se=q.width,me=q.height,ge=q.layout,Re=q.stackOffset,we=q.margin,Ee=W.dataStartIndex,ae=W.dataEndIndex;if(W.updateId===void 0){var _e=JZ(q);return $a($a($a({},_e),{},{updateId:0},F($a($a({props:q},_e),{},{updateId:0}),W)),{},{prevDataKey:ee,prevData:oe,prevWidth:se,prevHeight:me,prevLayout:ge,prevStackOffset:Re,prevMargin:we,prevChildren:fe})}if(ee!==W.prevDataKey||oe!==W.prevData||se!==W.prevWidth||me!==W.prevHeight||ge!==W.prevLayout||Re!==W.prevStackOffset||!d_(we,W.prevMargin)){var Ie=JZ(q),xe={chartX:W.chartX,chartY:W.chartY,isTooltipActive:W.isTooltipActive},ze=$a($a({},XZ(W,oe,ge)),{},{updateId:W.updateId+1}),Me=$a($a($a({},Ie),xe),ze);return $a($a($a({},Me),F($a({props:q},Me),W)),{},{prevDataKey:ee,prevData:oe,prevWidth:se,prevHeight:me,prevLayout:ge,prevStackOffset:Re,prevMargin:we,prevChildren:fe})}if(!mM(fe,W.prevChildren)){var je,Ue,Qe,ke,Ge=df(fe,Z_),Se=Ge&&(je=(Ue=Ge.props)===null||Ue===void 0?void 0:Ue.startIndex)!==null&&je!==void 0?je:Ee,Te=Ge&&(Qe=(ke=Ge.props)===null||ke===void 0?void 0:ke.endIndex)!==null&&Qe!==void 0?Qe:ae,qe=Se!==Ee||Te!==ae,Ze=!Bn(oe),lt=Ze&&!qe?W.updateId:W.updateId+1;return $a($a({updateId:lt},F($a($a({props:q},W),{},{updateId:lt,dataStartIndex:Se,dataEndIndex:Te}),W)),{},{prevChildren:fe,dataStartIndex:Se,dataEndIndex:Te})}return null}),Zn(j,"renderActiveDot",function(q,W,ee){var oe;return le.isValidElement(q)?oe=le.cloneElement(q,W):Un(q)?oe=q(W):oe=Ot.createElement(gC,W),Ot.createElement(mi,{className:"recharts-active-dot",key:ee},oe)});var H=le.forwardRef(function(W,ee){return Ot.createElement(j,t_({},W,{ref:ee}))});return H.displayName=j.displayName,H},aEe=yC({chartName:"LineChart",GraphicalChild:$v,axisComponents:[{axisType:"xAxis",AxisComp:md},{axisType:"yAxis",AxisComp:gd}],formatAxisMap:UP}),LI=yC({chartName:"BarChart",GraphicalChild:Wp,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:md},{axisType:"yAxis",AxisComp:gd}],formatAxisMap:UP}),rEe=yC({chartName:"PieChart",GraphicalChild:Zg,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:IP},{axisType:"radiusAxis",AxisComp:DP}],formatAxisMap:pwe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Kw=yC({chartName:"AreaChart",GraphicalChild:mf,axisComponents:[{axisType:"xAxis",AxisComp:md},{axisType:"yAxis",AxisComp:gd}],formatAxisMap:UP}),nEe=yC({chartName:"ComposedChart",GraphicalChild:[$v,mf,Wp,HP],axisComponents:[{axisType:"xAxis",AxisComp:md},{axisType:"yAxis",AxisComp:gd},{axisType:"zAxis",AxisComp:qP}],formatAxisMap:UP}),Sb={exports:{}},iEe=Sb.exports,eq;function sEe(){return eq||(eq=1,function(t,e){(function(a,r){t.exports=r()})(iEe,function(){var a=1e3,r=6e4,i=36e5,l="millisecond",c="second",n="minute",v="hour",R="day",x="week",N="month",L="quarter",F="year",j="date",H="Invalid Date",q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,W=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ee={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(xe){var ze=["th","st","nd","rd"],Me=xe%100;return"["+xe+(ze[(Me-20)%10]||ze[Me]||ze[0])+"]"}},oe=function(xe,ze,Me){var je=String(xe);return!je||je.length>=ze?xe:""+Array(ze+1-je.length).join(Me)+xe},fe={s:oe,z:function(xe){var ze=-xe.utcOffset(),Me=Math.abs(ze),je=Math.floor(Me/60),Ue=Me%60;return(ze<=0?"+":"-")+oe(je,2,"0")+":"+oe(Ue,2,"0")},m:function xe(ze,Me){if(ze.date()<Me.date())return-xe(Me,ze);var je=12*(Me.year()-ze.year())+(Me.month()-ze.month()),Ue=ze.clone().add(je,N),Qe=Me-Ue<0,ke=ze.clone().add(je+(Qe?-1:1),N);return+(-(je+(Me-Ue)/(Qe?Ue-ke:ke-Ue))||0)},a:function(xe){return xe<0?Math.ceil(xe)||0:Math.floor(xe)},p:function(xe){return{M:N,y:F,w:x,d:R,D:j,h:v,m:n,s:c,ms:l,Q:L}[xe]||String(xe||"").toLowerCase().replace(/s$/,"")},u:function(xe){return xe===void 0}},se="en",me={};me[se]=ee;var ge="$isDayjsObject",Re=function(xe){return xe instanceof _e||!(!xe||!xe[ge])},we=function xe(ze,Me,je){var Ue;if(!ze)return se;if(typeof ze=="string"){var Qe=ze.toLowerCase();me[Qe]&&(Ue=Qe),Me&&(me[Qe]=Me,Ue=Qe);var ke=ze.split("-");if(!Ue&&ke.length>1)return xe(ke[0])}else{var Ge=ze.name;me[Ge]=ze,Ue=Ge}return!je&&Ue&&(se=Ue),Ue||!je&&se},Ee=function(xe,ze){if(Re(xe))return xe.clone();var Me=typeof ze=="object"?ze:{};return Me.date=xe,Me.args=arguments,new _e(Me)},ae=fe;ae.l=we,ae.i=Re,ae.w=function(xe,ze){return Ee(xe,{locale:ze.$L,utc:ze.$u,x:ze.$x,$offset:ze.$offset})};var _e=function(){function xe(Me){this.$L=we(Me.locale,null,!0),this.parse(Me),this.$x=this.$x||Me.x||{},this[ge]=!0}var ze=xe.prototype;return ze.parse=function(Me){this.$d=function(je){var Ue=je.date,Qe=je.utc;if(Ue===null)return new Date(NaN);if(ae.u(Ue))return new Date;if(Ue instanceof Date)return new Date(Ue);if(typeof Ue=="string"&&!/Z$/i.test(Ue)){var ke=Ue.match(q);if(ke){var Ge=ke[2]-1||0,Se=(ke[7]||"0").substring(0,3);return Qe?new Date(Date.UTC(ke[1],Ge,ke[3]||1,ke[4]||0,ke[5]||0,ke[6]||0,Se)):new Date(ke[1],Ge,ke[3]||1,ke[4]||0,ke[5]||0,ke[6]||0,Se)}}return new Date(Ue)}(Me),this.init()},ze.init=function(){var Me=this.$d;this.$y=Me.getFullYear(),this.$M=Me.getMonth(),this.$D=Me.getDate(),this.$W=Me.getDay(),this.$H=Me.getHours(),this.$m=Me.getMinutes(),this.$s=Me.getSeconds(),this.$ms=Me.getMilliseconds()},ze.$utils=function(){return ae},ze.isValid=function(){return this.$d.toString()!==H},ze.isSame=function(Me,je){var Ue=Ee(Me);return this.startOf(je)<=Ue&&Ue<=this.endOf(je)},ze.isAfter=function(Me,je){return Ee(Me)<this.startOf(je)},ze.isBefore=function(Me,je){return this.endOf(je)<Ee(Me)},ze.$g=function(Me,je,Ue){return ae.u(Me)?this[je]:this.set(Ue,Me)},ze.unix=function(){return Math.floor(this.valueOf()/1e3)},ze.valueOf=function(){return this.$d.getTime()},ze.startOf=function(Me,je){var Ue=this,Qe=!!ae.u(je)||je,ke=ae.p(Me),Ge=function(He,Ae){var zt=ae.w(Ue.$u?Date.UTC(Ue.$y,Ae,He):new Date(Ue.$y,Ae,He),Ue);return Qe?zt:zt.endOf(R)},Se=function(He,Ae){return ae.w(Ue.toDate()[He].apply(Ue.toDate("s"),(Qe?[0,0,0,0]:[23,59,59,999]).slice(Ae)),Ue)},Te=this.$W,qe=this.$M,Ze=this.$D,lt="set"+(this.$u?"UTC":"");switch(ke){case F:return Qe?Ge(1,0):Ge(31,11);case N:return Qe?Ge(1,qe):Ge(0,qe+1);case x:var st=this.$locale().weekStart||0,ht=(Te<st?Te+7:Te)-st;return Ge(Qe?Ze-ht:Ze+(6-ht),qe);case R:case j:return Se(lt+"Hours",0);case v:return Se(lt+"Minutes",1);case n:return Se(lt+"Seconds",2);case c:return Se(lt+"Milliseconds",3);default:return this.clone()}},ze.endOf=function(Me){return this.startOf(Me,!1)},ze.$set=function(Me,je){var Ue,Qe=ae.p(Me),ke="set"+(this.$u?"UTC":""),Ge=(Ue={},Ue[R]=ke+"Date",Ue[j]=ke+"Date",Ue[N]=ke+"Month",Ue[F]=ke+"FullYear",Ue[v]=ke+"Hours",Ue[n]=ke+"Minutes",Ue[c]=ke+"Seconds",Ue[l]=ke+"Milliseconds",Ue)[Qe],Se=Qe===R?this.$D+(je-this.$W):je;if(Qe===N||Qe===F){var Te=this.clone().set(j,1);Te.$d[Ge](Se),Te.init(),this.$d=Te.set(j,Math.min(this.$D,Te.daysInMonth())).$d}else Ge&&this.$d[Ge](Se);return this.init(),this},ze.set=function(Me,je){return this.clone().$set(Me,je)},ze.get=function(Me){return this[ae.p(Me)]()},ze.add=function(Me,je){var Ue,Qe=this;Me=Number(Me);var ke=ae.p(je),Ge=function(qe){var Ze=Ee(Qe);return ae.w(Ze.date(Ze.date()+Math.round(qe*Me)),Qe)};if(ke===N)return this.set(N,this.$M+Me);if(ke===F)return this.set(F,this.$y+Me);if(ke===R)return Ge(1);if(ke===x)return Ge(7);var Se=(Ue={},Ue[n]=r,Ue[v]=i,Ue[c]=a,Ue)[ke]||1,Te=this.$d.getTime()+Me*Se;return ae.w(Te,this)},ze.subtract=function(Me,je){return this.add(-1*Me,je)},ze.format=function(Me){var je=this,Ue=this.$locale();if(!this.isValid())return Ue.invalidDate||H;var Qe=Me||"YYYY-MM-DDTHH:mm:ssZ",ke=ae.z(this),Ge=this.$H,Se=this.$m,Te=this.$M,qe=Ue.weekdays,Ze=Ue.months,lt=Ue.meridiem,st=function(Ae,zt,kt,ma){return Ae&&(Ae[zt]||Ae(je,Qe))||kt[zt].slice(0,ma)},ht=function(Ae){return ae.s(Ge%12||12,Ae,"0")},He=lt||function(Ae,zt,kt){var ma=Ae<12?"AM":"PM";return kt?ma.toLowerCase():ma};return Qe.replace(W,function(Ae,zt){return zt||function(kt){switch(kt){case"YY":return String(je.$y).slice(-2);case"YYYY":return ae.s(je.$y,4,"0");case"M":return Te+1;case"MM":return ae.s(Te+1,2,"0");case"MMM":return st(Ue.monthsShort,Te,Ze,3);case"MMMM":return st(Ze,Te);case"D":return je.$D;case"DD":return ae.s(je.$D,2,"0");case"d":return String(je.$W);case"dd":return st(Ue.weekdaysMin,je.$W,qe,2);case"ddd":return st(Ue.weekdaysShort,je.$W,qe,3);case"dddd":return qe[je.$W];case"H":return String(Ge);case"HH":return ae.s(Ge,2,"0");case"h":return ht(1);case"hh":return ht(2);case"a":return He(Ge,Se,!0);case"A":return He(Ge,Se,!1);case"m":return String(Se);case"mm":return ae.s(Se,2,"0");case"s":return String(je.$s);case"ss":return ae.s(je.$s,2,"0");case"SSS":return ae.s(je.$ms,3,"0");case"Z":return ke}return null}(Ae)||ke.replace(":","")})},ze.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ze.diff=function(Me,je,Ue){var Qe,ke=this,Ge=ae.p(je),Se=Ee(Me),Te=(Se.utcOffset()-this.utcOffset())*r,qe=this-Se,Ze=function(){return ae.m(ke,Se)};switch(Ge){case F:Qe=Ze()/12;break;case N:Qe=Ze();break;case L:Qe=Ze()/3;break;case x:Qe=(qe-Te)/6048e5;break;case R:Qe=(qe-Te)/864e5;break;case v:Qe=qe/i;break;case n:Qe=qe/r;break;case c:Qe=qe/a;break;default:Qe=qe}return Ue?Qe:ae.a(Qe)},ze.daysInMonth=function(){return this.endOf(N).$D},ze.$locale=function(){return me[this.$L]},ze.locale=function(Me,je){if(!Me)return this.$L;var Ue=this.clone(),Qe=we(Me,je,!0);return Qe&&(Ue.$L=Qe),Ue},ze.clone=function(){return ae.w(this.$d,this)},ze.toDate=function(){return new Date(this.valueOf())},ze.toJSON=function(){return this.isValid()?this.toISOString():null},ze.toISOString=function(){return this.$d.toISOString()},ze.toString=function(){return this.$d.toUTCString()},xe}(),Ie=_e.prototype;return Ee.prototype=Ie,[["$ms",l],["$s",c],["$m",n],["$H",v],["$W",R],["$M",N],["$y",F],["$D",j]].forEach(function(xe){Ie[xe[1]]=function(ze){return this.$g(ze,xe[0],xe[1])}}),Ee.extend=function(xe,ze){return xe.$i||(xe(ze,_e,Ee),xe.$i=!0),Ee},Ee.locale=we,Ee.isDayjs=Re,Ee.unix=function(xe){return Ee(1e3*xe)},Ee.en=me[se],Ee.Ls=me,Ee.p={},Ee})}(Sb)),Sb.exports}var oEe=sEe();const qi=ns(oEe);var bb={exports:{}},lEe=bb.exports,tq;function uEe(){return tq||(tq=1,function(t,e){(function(a,r){t.exports=r()})(lEe,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,l=/\d\d/,c=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,v={},R=function(q){return(q=+q)+(q>68?1900:2e3)},x=function(q){return function(W){this[q]=+W}},N=[/[+-]\d\d:?(\d\d)?|Z/,function(q){(this.zone||(this.zone={})).offset=function(W){if(!W||W==="Z")return 0;var ee=W.match(/([+-]|\d\d)/g),oe=60*ee[1]+(+ee[2]||0);return oe===0?0:ee[0]==="+"?-oe:oe}(q)}],L=function(q){var W=v[q];return W&&(W.indexOf?W:W.s.concat(W.f))},F=function(q,W){var ee,oe=v.meridiem;if(oe){for(var fe=1;fe<=24;fe+=1)if(q.indexOf(oe(fe,0,W))>-1){ee=fe>12;break}}else ee=q===(W?"pm":"PM");return ee},j={A:[n,function(q){this.afternoon=F(q,!1)}],a:[n,function(q){this.afternoon=F(q,!0)}],Q:[i,function(q){this.month=3*(q-1)+1}],S:[i,function(q){this.milliseconds=100*+q}],SS:[l,function(q){this.milliseconds=10*+q}],SSS:[/\d{3}/,function(q){this.milliseconds=+q}],s:[c,x("seconds")],ss:[c,x("seconds")],m:[c,x("minutes")],mm:[c,x("minutes")],H:[c,x("hours")],h:[c,x("hours")],HH:[c,x("hours")],hh:[c,x("hours")],D:[c,x("day")],DD:[l,x("day")],Do:[n,function(q){var W=v.ordinal,ee=q.match(/\d+/);if(this.day=ee[0],W)for(var oe=1;oe<=31;oe+=1)W(oe).replace(/\[|\]/g,"")===q&&(this.day=oe)}],w:[c,x("week")],ww:[l,x("week")],M:[c,x("month")],MM:[l,x("month")],MMM:[n,function(q){var W=L("months"),ee=(L("monthsShort")||W.map(function(oe){return oe.slice(0,3)})).indexOf(q)+1;if(ee<1)throw new Error;this.month=ee%12||ee}],MMMM:[n,function(q){var W=L("months").indexOf(q)+1;if(W<1)throw new Error;this.month=W%12||W}],Y:[/[+-]?\d+/,x("year")],YY:[l,function(q){this.year=R(q)}],YYYY:[/\d{4}/,x("year")],Z:N,ZZ:N};function H(q){var W,ee;W=q,ee=v&&v.formats;for(var oe=(q=W.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Ee,ae,_e){var Ie=_e&&_e.toUpperCase();return ae||ee[_e]||a[_e]||ee[Ie].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(xe,ze,Me){return ze||Me.slice(1)})})).match(r),fe=oe.length,se=0;se<fe;se+=1){var me=oe[se],ge=j[me],Re=ge&&ge[0],we=ge&&ge[1];oe[se]=we?{regex:Re,parser:we}:me.replace(/^\[|\]$/g,"")}return function(Ee){for(var ae={},_e=0,Ie=0;_e<fe;_e+=1){var xe=oe[_e];if(typeof xe=="string")Ie+=xe.length;else{var ze=xe.regex,Me=xe.parser,je=Ee.slice(Ie),Ue=ze.exec(je)[0];Me.call(ae,Ue),Ee=Ee.replace(Ue,"")}}return function(Qe){var ke=Qe.afternoon;if(ke!==void 0){var Ge=Qe.hours;ke?Ge<12&&(Qe.hours+=12):Ge===12&&(Qe.hours=0),delete Qe.afternoon}}(ae),ae}}return function(q,W,ee){ee.p.customParseFormat=!0,q&&q.parseTwoDigitYear&&(R=q.parseTwoDigitYear);var oe=W.prototype,fe=oe.parse;oe.parse=function(se){var me=se.date,ge=se.utc,Re=se.args;this.$u=ge;var we=Re[1];if(typeof we=="string"){var Ee=Re[2]===!0,ae=Re[3]===!0,_e=Ee||ae,Ie=Re[2];ae&&(Ie=Re[2]),v=this.$locale(),!Ee&&Ie&&(v=ee.Ls[Ie]),this.$d=function(je,Ue,Qe,ke){try{if(["x","X"].indexOf(Ue)>-1)return new Date((Ue==="X"?1e3:1)*je);var Ge=H(Ue)(je),Se=Ge.year,Te=Ge.month,qe=Ge.day,Ze=Ge.hours,lt=Ge.minutes,st=Ge.seconds,ht=Ge.milliseconds,He=Ge.zone,Ae=Ge.week,zt=new Date,kt=qe||(Se||Te?1:zt.getDate()),ma=Se||zt.getFullYear(),It=0;Se&&!Te||(It=Te>0?Te-1:zt.getMonth());var Ht,_t=Ze||0,ir=lt||0,Ea=st||0,Na=ht||0;return He?new Date(Date.UTC(ma,It,kt,_t,ir,Ea,Na+60*He.offset*1e3)):Qe?new Date(Date.UTC(ma,It,kt,_t,ir,Ea,Na)):(Ht=new Date(ma,It,kt,_t,ir,Ea,Na),Ae&&(Ht=ke(Ht).week(Ae).toDate()),Ht)}catch{return new Date("")}}(me,we,ge,ee),this.init(),Ie&&Ie!==!0&&(this.$L=this.locale(Ie).$L),_e&&me!=this.format(we)&&(this.$d=new Date("")),v={}}else if(we instanceof Array)for(var xe=we.length,ze=1;ze<=xe;ze+=1){Re[1]=we[ze-1];var Me=ee.apply(this,Re);if(Me.isValid()){this.$d=Me.$d,this.$L=Me.$L,this.init();break}ze===xe&&(this.$d=new Date(""))}else fe.call(this,se)}}})}(bb)),bb.exports}var cEe=uEe();const dEe=ns(cEe);qi.extend(dEe);ep.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const hEe=()=>{const[t,e]=le.useState(""),[a,r]=le.useState(0),[i,l]=le.useState(0),[c,n]=le.useState(!1),[v,R]=le.useState(null),[x,N]=le.useState([]),[L,F]=le.useState({}),[j,H]=le.useState(0),[q,W]=le.useState({totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0}),[ee,oe]=le.useState({today:0,weekly:0,monthly:0}),[fe,se]=le.useState(Array(24).fill(0)),[me,ge]=le.useState(0),[Re,we]=le.useState({}),Ee=le.useRef(null),ae=le.useRef(null);le.useRef(null);const _e=le.useRef({}),Ie=Te=>{let qe=Te.replace("UTC+","+").replace("UTC-","-");return qe=qe.replace(/([+\-]\d{1,2})$/,"$1:00"),qi(qe,"D MMMM YYYY [at] HH:mm:ss Z")},xe=Te=>typeof Te=="string"?Ie(Te):Te&&typeof Te.toDate=="function"?qi(Te.toDate()):qi(Te),ze=async()=>{try{const Te=await rs(Hn(Er,"bikes"));r(Te.size)}catch(Te){console.error("Error fetching total bikes:",Te)}},Me=async()=>{try{const Te=qi().startOf("day"),qe=Hn(Er,"ride_history"),Ze=await rs(qe);let lt=0;Ze.forEach(st=>{const He=st.data().rideEndedAt;He&&xe(He).isSame(Te,"day")&&lt++}),console.log("Today's total rides:",lt),l(lt)}catch(Te){console.error("Error fetching total rides today:",Te)}},je=async()=>{try{const Te=qi().startOf("day"),qe=Hn(Er,"ride_history"),Ze=await rs(qe);let lt={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0};Ze.forEach(st=>{var He,Ae,zt;const ht=st.data();ht.rideEndedAt&&xe(ht.rideEndedAt).isSame(Te,"day")&&(lt.totalDistance+=((He=ht.currentMetrics)==null?void 0:He.distance)||0,lt.totalDuration+=((Ae=ht.currentMetrics)==null?void 0:Ae.duration)||0,lt.totalCalories+=((zt=ht.currentMetrics)==null?void 0:zt.calories)||0,lt.totalCarbon+=ht.carbonSaved||0,lt.totalRevenue+=ht.amountPaid||0)}),W({totalDistance:lt.totalDistance||0,totalDuration:lt.totalDuration||0,totalCalories:lt.totalCalories||0,totalCarbon:lt.totalCarbon||0,totalRevenue:lt.totalRevenue||0})}catch(Te){console.error("Error fetching today's metrics:",Te)}},Ue=async()=>{try{const Te=await rs(Hn(Er,"approved_users"));let qe=0,Ze=0,lt=0;const st=qi().startOf("day"),ht=qi().startOf("week"),He=qi().startOf("month");for(const Ae of Te.docs){const zt=Hn(Er,"approved_users",Ae.id,"rideHistory"),kt=await rs(zt);for(const ma of kt.docs){const It=ma.data(),Ht=xe(It.rideStartedAt),_t=It.amountPaid||0;Ht.isSame(st,"day")&&(qe+=_t),Ht.isAfter(ht)&&(Ze+=_t),Ht.isAfter(He)&&(lt+=_t)}}oe({today:qe,weekly:Ze,monthly:lt})}catch(Te){console.error("Error fetching revenue:",Te)}},Qe=async()=>{try{const Te=qi().startOf("day"),qe=Hn(Er,"ride_history");return Ag(qe,lt=>{let st=Array(24).fill(0);lt.forEach(ht=>{const He=ht.data();if(He.rideEndedAt&&He.amountPaid){const Ae=xe(He.rideEndedAt);if(Ae.isSame(Te,"day")){const zt=Ae.hour();st[zt]+=Number(He.amountPaid||0)}}}),console.log("Hourly revenue data:",st),se(st)})}catch(Te){console.error("Error fetching hourly revenue:",Te)}},ke=()=>{try{const Te=Hn(Er,"activeRides"),qe=Y0(Te,BS("rideStatus","==","started"));return Ag(qe,async lt=>{const st=[];for(const ht of lt.docs){const He=ht.data();console.log("Ride data:",He);try{const Ae=Ss(Er,"approved_users",He.userId),zt=await Xf(Ae),kt=zt.exists()?zt.data():{};console.log("User data:",kt);const ma=Ss(Er,"bikes",He.bikeId),It=await Xf(ma),Ht=It.exists()?It.data():{};console.log("Bike data:",Ht);let _t="Unknown Station";if(He.startStation){console.log("Attempting to fetch station with ID:",He.startStation);const Ea=Ss(Er,"stations",He.startStation),Na=await Xf(Ea);if(console.log("Station doc exists:",Na.exists()),Na.exists()){const Ja=Na.data();console.log("Station data:",Ja),_t=Ja.stationName||Ja.name||"Unknown Station"}}const ir={rideId:ht.id,userName:kt.name||`${kt.first_name||""} ${kt.surname||""}`.trim(),startTime:He.startTime,bikeName:Ht.bikeName||"Unknown Bike",stationName:_t};console.log("Pushing ride info:",ir),st.push(ir)}catch(Ae){console.error("Error fetching related documents:",Ae),console.error("Error details:",{rideId:ht.id,userId:He.userId,bikeId:He.bikeId,startStation:He.startStation})}}console.log("Final active rides array:",st),N(st)})}catch(Te){return console.error("Error in fetchActiveRides:",Te),()=>{}}},Ge=()=>{try{const Te=Hn(Er,"admins");return Ag(Te,qe=>{const Ze=qe.docs.reduce((lt,st)=>{const ht=st.data();return ht.status==="Active"&&ht.stationAssignedTo?lt+1:lt},0);ge(Ze)})}catch(Te){return console.error("Error fetching active admins:",Te),()=>{}}};le.useEffect(()=>{ze(),Me(),je(),Qe(),Ue();const Te=g1.onAuthStateChanged(async qe=>{if(qe)try{const Ze=Ss(Er,"users",qe.uid),lt=await Xf(Ze);if(lt.exists()){const st=lt.data(),ht=(st==null?void 0:st.name)||"Super Admin";e(ht)}else e("Super Admin")}catch(Ze){console.error("Error fetching user data:",Ze),e("Super Admin")}else e("Unknown User")});return()=>Te()},[]),le.useEffect(()=>{if(!(ae.current||!Ee.current))try{ae.current=new ep.Map({container:Ee.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),ae.current.addControl(new ep.NavigationControl,"top-right");const Te=Hn(Er,"activeRides"),qe=Ag(Y0(Te,BS("rideStatus","==","started")),Ze=>{ae.current});return()=>{qe(),ae.current&&(ae.current.remove(),ae.current=null)}}catch(Te){console.error("Error initializing map:",Te)}},[Ee.current]),le.useEffect(()=>{if(!ae.current)return;const Te=Hn(Er,"activeRides"),qe=Y0(Te,BS("rideStatus","==","started")),Ze=Ag(qe,async lt=>{try{lt.docChanges().forEach(async st=>{const ht=st.doc.data(),He=st.doc.id;if((st.type==="added"||st.type==="modified")&&ht.locationData){const{latitude:Ae,longitude:zt}=ht.locationData,kt=Ss(Er,"approved_users",ht.userId),ma=await Xf(kt),It=ma.exists()?ma.data():{},Ht=`${It.first_name||""} ${It.surname||""}`.trim(),_t=Ss(Er,"bikes",ht.bikeId),ir=await Xf(_t),Na=(ir.exists()?ir.data():{}).bikeName||"Unknown Bike";if(_e.current[He])_e.current[He].setLngLat([zt,Ae]).getPopup().setHTML(`
                  <div class="simple-popup">
                    <p><strong>${Ht}</strong></p>
                    <p>Bike: ${Na}</p>
                  </div>
                `);else{const Ja=document.createElement("div");Ja.className="user-location-marker";const cr=new ep.Popup({closeButton:!1,closeOnClick:!1,anchor:"top",offset:[0,-10]}).setHTML(`
                <div class="simple-popup">
                  <p><strong>${Ht}</strong></p>
                  <p>Bike: ${Na}</p>
                </div>
              `);_e.current[He]=new ep.Marker({element:Ja,anchor:"center"}).setLngLat([zt,Ae]).setPopup(cr).addTo(ae.current)}}st.type==="removed"&&_e.current[He]&&(_e.current[He].remove(),delete _e.current[He])})}catch(st){console.error("Error updating markers:",st)}});return()=>{Ze(),Object.values(_e.current).forEach(lt=>lt.remove()),_e.current={}}},[]),le.useEffect(()=>{const Te=Hn(Er,"activeRides"),qe=Y0(Te,BS("rideStatus","==","started")),Ze=Ag(qe,lt=>{H(lt.size)});return()=>Ze()},[]),le.useEffect(()=>{let Te;try{Te=ke()}catch(qe){console.error("Error setting up active rides listener:",qe)}return()=>{typeof Te=="function"&&Te()}},[]),le.useEffect(()=>{const Te=Ge();return()=>{typeof Te=="function"&&Te()}},[]),le.useEffect(()=>{const Te=qi().startOf("day"),qe=Hn(Er,"ride_history");let Ze=null;try{Ze=Ag(qe,lt=>{let st={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0},ht=Array(24).fill(0),He=0;lt.forEach(Ae=>{const zt=Ae.data();if(zt.rideEndedAt){const kt=xe(zt.rideEndedAt);if(kt.isSame(Te,"day")){st.totalDistance+=Number(zt.distance||0),st.totalDuration+=Number(zt.duration||0),st.totalCalories+=Number(zt.caloriesBurned||0),st.totalCarbon+=Number(zt.carbonSaved||0),st.totalRevenue+=Number(zt.amountPaid||0);const ma=kt.hour();ht[ma]+=Number(zt.amountPaid||0),He++}}}),W(st),se(ht),l(He)})}catch(lt){console.error("Error setting up ride history listener:",lt)}return()=>{typeof Ze=="function"&&Ze()}},[]);const Se=[{name:"Bikes Available",value:a},{name:"Active Users",value:j},{name:"Active Admins",value:me},{name:"Today's Revenue",value:Number((q==null?void 0:q.totalRevenue)||0)},{name:"Rides Today",value:i}];return $.jsxs("div",{className:"content-container",children:[$.jsxs("div",{className:"content-header",children:[$.jsxs("h1",{className:"content-header__title",children:["Hello ",t,"!"]}),$.jsx("p",{className:"content-header__subtitle",children:"Keeping the wheels turning for a greener future."})]}),$.jsx("div",{className:"stats-section",children:Se.map((Te,qe)=>$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{className:"stat-card__title",children:Te.name}),$.jsx("p",{className:"stat-card__value",children:Te.name==="Today's Revenue"?Number(Te.value).toFixed(2):typeof Te.value>"u"?"0":Te.value})]},qe))}),$.jsxs("div",{className:"tracking-section",children:[$.jsxs("div",{className:"active-rides-table",children:[$.jsx("h3",{className:"section-title",children:"Active Rides"}),$.jsxs("table",{children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Rider Name"}),$.jsx("th",{children:"Start Time"}),$.jsx("th",{children:"Bike Name"}),$.jsx("th",{children:"Station"})]})}),$.jsxs("tbody",{children:[x.slice(0,5).map(Te=>$.jsxs("tr",{children:[$.jsx("td",{children:Te.userName}),$.jsx("td",{children:xe(Te.startTime).format("HH:mm:ss")}),$.jsx("td",{children:Te.bikeName}),$.jsx("td",{children:Te.stationName})]},Te.rideId)),x.length===0&&$.jsx("tr",{children:$.jsx("td",{colSpan:"4",className:"no-rides",children:"No active rides at the moment"})})]})]})]}),$.jsxs("div",{className:"map-container",children:[$.jsxs("div",{className:"map-section-header",children:[$.jsxs("h2",{className:"map-title",children:[$.jsx(Mfe,{})," Live User Activity Map"]}),$.jsx("p",{className:"map-subtitle",children:"Track real-time locations of active riders across the system"})]}),$.jsx("div",{ref:Ee,className:"ride-tracking-map"})]})]}),$.jsxs("div",{className:"charts-grid",children:[$.jsxs("div",{className:"charts-row",children:[$.jsxs("div",{className:"chart-container",children:[$.jsx("h3",{className:"chart-title",children:"Today's Ride Metrics"}),$.jsx(Fp,{width:"100%",height:300,children:$.jsxs(LI,{data:[{name:"Distance",value:parseFloat(q.totalDistance||0),unit:"km"},{name:"Duration",value:parseFloat((q.totalDuration||0)/60),unit:"min"},{name:"Calories",value:parseFloat(q.totalCalories||0),unit:"cal"},{name:"CO2 Saved",value:parseFloat(q.totalCarbon||0),unit:"kg"}],margin:{top:5,right:30,left:20,bottom:60},children:[$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),$.jsx(gd,{tickFormatter:Te=>Te.toFixed(2),tick:{fontSize:12}}),$.jsx(mu,{formatter:(Te,qe,Ze)=>Ze&&Ze.payload?[`${Te.toFixed(2)} ${Ze.payload.unit}`,qe]:[Te,qe],contentStyle:{fontSize:12}}),$.jsx(Wp,{dataKey:"value",fill:"#009C8C",children:$.jsx(ap,{dataKey:"value",position:"top",formatter:(Te,qe)=>qe&&qe.payload?`${Te.toFixed(2)} ${qe.payload.unit}`:Te.toFixed(2),style:{fontSize:"11px"}})})]})})]}),$.jsxs("div",{className:"chart-container",children:[$.jsx("h3",{className:"chart-title",children:"System Overview"}),$.jsx(Fp,{width:"100%",height:300,children:$.jsxs(LI,{data:Se,margin:{top:5,right:30,left:20,bottom:60},children:[$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),$.jsx(gd,{tick:{fontSize:12}}),$.jsx(mu,{contentStyle:{fontSize:12}}),$.jsx(Wp,{dataKey:"value",fill:"#009C8C"})]})})]})]}),$.jsxs("div",{className:"revenue-section",children:[$.jsx("h3",{className:"chart-title",children:"Today's Hourly Revenue"}),$.jsx(Fp,{width:"100%",height:300,children:$.jsxs(aEe,{data:fe.map((Te,qe)=>({hour:`${String(qe).padStart(2,"0")}:00`,value:Te})),margin:{top:5,right:30,left:20,bottom:5},children:[$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"hour",tick:{fontSize:12},interval:2}),$.jsx(gd,{tick:{fontSize:12},tickFormatter:Te=>`${Te.toFixed(2)}`}),$.jsx(mu,{formatter:Te=>[`${Number(Te).toFixed(2)}`,"Revenue"],contentStyle:{fontSize:12}}),$.jsx($v,{type:"monotone",dataKey:"value",stroke:"#4CAF50",strokeWidth:2,dot:{fill:"#4CAF50"}})]})})]})]})]})},k5=()=>$.jsxs("div",{className:"dashboard",children:[$.jsx(NL,{})," ",$.jsxs("div",{className:"dashboard-content",children:[$.jsx(oA,{})," ",$.jsx(hEe,{})," "]})]}),Mp=()=>{const t=o3(),[e,a]=le.useState(""),[r,i]=le.useState(""),[l,c]=le.useState(""),n=R=>`/ecpcaps/assets/${R}`,v=async R=>{R.preventDefault();try{await ule(g1,e,r),t("/dashboard")}catch(x){c(x.message)}};return $.jsxs("div",{className:"login-container",children:[$.jsx("div",{className:"login-logo-container",children:$.jsx("img",{src:n("ecoridelogo2.png"),alt:"Eco Ride Logo",className:"login-logo"})}),$.jsx("p",{className:"login-subtitle",children:"Drive Green, Ride Clean!"}),$.jsx("h2",{className:"login-title",children:"Super Admin Login"}),$.jsxs("form",{className:"login-form",onSubmit:v,children:[l&&$.jsx("p",{className:"error",children:l}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Email"}),$.jsx("input",{type:"email",value:e,onChange:R=>a(R.target.value),required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Password"}),$.jsx("input",{type:"password",required:!0,autoComplete:"current-password",value:r,onChange:R=>i(R.target.value)})]}),$.jsx("button",{type:"submit",className:"login-button",children:"LOG IN"})]})]})},fEe=JSON.parse('[{"Raw Address":"168 SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"235 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"118-CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"21 EARTH STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ST.RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"188 M DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"9 E&E COMP. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"155 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"338 T.MANAG ST. PARADA Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"9R CABRAL STREET Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"195 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"250 S. DE GUZMAN ST BO Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FV4 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"98 7TH ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 19TH ST. Parada Valenzuela City"},{"Raw Address":"TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"0002 Parada Valenzuela City"},{"Raw Address":"T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"249 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"91 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"095 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"012 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"244 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"12 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"187 UNIT14 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"230 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA T. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT 101 CAPT CRUZ ST COR Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"140 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"441 P GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"234 Fortune Village 5 19T Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT1 Parada Valenzuela City"},{"Raw Address":"36-A PARADA RD. Parada Valenzuela City"},{"Raw Address":"93 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 LAGMDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST Parada Valenzuela City"},{"Raw Address":"74 PARADA ST. Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APRT. 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"178 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMPD. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1992 1ST. BENMARIE COMP FV5 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"166 SALAZAR Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"93 E. CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"21ST PARADA ROAD Parada Valenzuela City"},{"Raw Address":"339 BO. Parada Valenzuela City"},{"Raw Address":"295 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"276B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"04 Parada Valenzuela City"},{"Raw Address":"436 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"5 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"191 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B6 L7 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CPD. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS HOMES. PARADA Valenzuela City"},{"Raw Address":"39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"LOT 23 BLK 14 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"259 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA ST. Parada Valenzuela City"},{"Raw Address":"99 SATURN ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE VillageAG 5 Parada Valenzuela City"},{"Raw Address":"234 ALOHA COMP. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L13 B19 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"07 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"43 B. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"250 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"121 CONZUELO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPITAN CRUZ ST Parada Valenzuela City"},{"Raw Address":"19921 ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN ST. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"15 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"232 SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 LAGADAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"321 S. DEG GUZMAN Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 6TH ST. FORTUNE   Parada Valenzuela City"},{"Raw Address":"77 PARADA RD. EXT. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"264 25TH ST. FORTUNE VIL 5 Parada Valenzuela City"},{"Raw Address":"0090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"412 Fortune Village 7 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"UNIT 3 LOT 16 BLK 8 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"278 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"306-A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"114-E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"58 PARADA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"466 KA BERONG Parada Valenzuela City"},{"Raw Address":"321 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"190 B MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STEET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"386 IMPONG JUANA STREET Parada Valenzuela City"},{"Raw Address":"0419 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B5 L7GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. BO.PARADA Valenzuela City"},{"Raw Address":"388 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"71 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"20 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"032 Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BK3 LT12 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"302-B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"125 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"320 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 MOLAVE Parada Valenzuela City"},{"Raw Address":"0011 UNIT C MOLAVE ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Parada Valenzuela City"},{"Raw Address":"236 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FV 5 Parada Valenzuela City"},{"Raw Address":"AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"7 CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"414 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"184 RAMON ST FV4 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"19-B ZAMORA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"18 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"# 43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"083 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"391 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"90 G. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"297-D T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 PARADA RD. Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR STREET Parada Valenzuela City"},{"Raw Address":"114 YAKAL ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"452 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO Parada Valenzuela City"},{"Raw Address":"22 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6. PARADA Valenzuela City"},{"Raw Address":"276A S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"0094 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"101 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"301 T.MANANG Parada Valenzuela City"},{"Raw Address":"004 Parada Valenzuela City"},{"Raw Address":"246 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#93 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B5L3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"87 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"317 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"8-FIFTH ST. Parada Valenzuela City"},{"Raw Address":"157 ELAGDAMEO ST. FV4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"#12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"89 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"468-G KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"6 Parada Valenzuela City"},{"Raw Address":"333 A TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"242 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. COR. Parada Valenzuela City"},{"Raw Address":"043 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"339 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"031 PARADA RD Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"35 Parada Valenzuela City"},{"Raw Address":"184 Fortune Village 6 MOLAVE ST. PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR Parada Valenzuela City"},{"Raw Address":"20 EUGENIO Parada Valenzuela City"},{"Raw Address":"01 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B13L27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"253 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORUNE Village4 Parada Valenzuela City"},{"Raw Address":"B1 L9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"00002 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"187 UNIT 11 3RD FLOOR FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"181 FELIZA Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"200 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"214-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"# 86 C. CAPITAN CRUZ Parada Valenzuela City"},{"Raw Address":"# 95 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK3 LOT20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"241 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"268 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"5 PARADA Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"405-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE Parada Valenzuela City"},{"Raw Address":"339 T. MANANG Parada Valenzuela City"},{"Raw Address":"39 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"188 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"412-B P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"204B F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"162 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK. 2 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"L 9 B 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"231 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"FRANCISCO Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"21ST PARADA RD Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#39D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"3A LOT 13 BLK 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"9001 LOT 4 A CALLE ONCE Parada Valenzuela City"},{"Raw Address":"450 Parada Valenzuela City"},{"Raw Address":"283 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"043 6TH ST. CORNER NARRRA ST. Parada Valenzuela City"},{"Raw Address":"413-J P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L26 NARRA ST Parada Valenzuela City"},{"Raw Address":"065 BO.PARADA Valenzuela City"},{"Raw Address":"27 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"140 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"84 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"123 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#12 PARADA ST. Parada Valenzuela City"},{"Raw Address":"276-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"420 ZAMORA FV7 Parada Valenzuela City"},{"Raw Address":"18 A F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. MANALANG APT. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"UNIT1 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"413 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"20 EUGENIO ST. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"39 D RAMON ST. SANTIAGO COMPOUND F4 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"SERVE 1 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"220D 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"11 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"26 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"176 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"259 2ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 C P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"410-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"36-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"413 FV7 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. COR. M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0006 BLOCK 3 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RUMARAO COMPD Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"134 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"COR. PEARL & CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPUND Parada Valenzuela City"},{"Raw Address":"29 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"414 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"227 ABLERADO ST. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1F DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"119A KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"22 Parada Valenzuela City"},{"Raw Address":"10 5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ABELARDO Parada Valenzuela City"},{"Raw Address":"199 6TH Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"65 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"109 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"283 MARTA ST. Parada Valenzuela City"},{"Raw Address":"371 -A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT A 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L22 JADE ST Parada Valenzuela City"},{"Raw Address":"2 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"067 PARADA RD Parada Valenzuela City"},{"Raw Address":"165 G ACACIA ST Parada Valenzuela City"},{"Raw Address":"441 GOMEZ Parada Valenzuela City"},{"Raw Address":"18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"9 VENUS ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK1 LOT5 TMHOA T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"207 FELA BUKID Parada Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"RAMON ST. Parada Valenzuela City"},{"Raw Address":"93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"91B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 A CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 4 CALYE 7 Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"080 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"322 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"122 CALE ONCE ST. Parada Valenzuela City"},{"Raw Address":"193-C M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"62 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"201 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 26 MARS ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"4389 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 ST. Parada Valenzuela City"},{"Raw Address":"94A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0118A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"139 Fortune Village 5 DRIVE Village Parada Valenzuela City"},{"Raw Address":"ADOR ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"30B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"361 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST.PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"307 JIMENEZ ST.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. CORNER NARRA Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"123 C. CRUZ Parada Valenzuela City"},{"Raw Address":"414 PARADA ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMPOUND WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"1243 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"169 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FORUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"CALL ONSE Parada Valenzuela City"},{"Raw Address":"097 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"104 A CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"#330 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"B2L20 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"449 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO FV 4 Parada Valenzuela City"},{"Raw Address":"279-B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"35 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"28 PARADA RD Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"# 12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG STREET. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"365 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK9 LOT29-A KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"169 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONCE Parada Valenzuela City"},{"Raw Address":"464 KAINGIN Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 ROSILOS Parada Valenzuela City"},{"Raw Address":"470 CARACTA VillageE KAINGIN ST Parada Valenzuela City"},{"Raw Address":"457 F KAINGIN ST Parada Valenzuela City"},{"Raw Address":"0147E LOT 0147 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"105 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"283 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"348 CAPT.CRUZ ST. BO. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"8 M. LAUREL DRIVE Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"JORGE EMBUSCADO Parada Valenzuela City"},{"Raw Address":"#153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"3 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"332 T MANANG ST Parada Valenzuela City"},{"Raw Address":"514 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"412 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"224 2OTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 BELARDO ST. FV 4 Village Parada Valenzuela City"},{"Raw Address":"25 GUENIO Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"136 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"199 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 14 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"307 JIMENES ST. Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 6 TANDANG MANANG HOWA Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. Parada Valenzuela City"},{"Raw Address":"100 E. DE GULA COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#6 Fortune Village 5 5TH STREET Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR DOON COMPD. Parada Valenzuela City"},{"Raw Address":"301 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"172 23 ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Fortune Village 5 MOLAVE EXT. Parada Valenzuela City"},{"Raw Address":"111 Fortune Village 6 Village YAKAL ST. Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN BLK. 5 LOT 15 Parada Valenzuela City"},{"Raw Address":"458 KAINGIN Parada Valenzuela City"},{"Raw Address":"2 YAKAL ST. CORNER ACACIA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"471-A KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"205 FELISA ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO Parada Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"L10 B 2 PARADA EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"413H SANTOS TWNH P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L6 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"#70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"0281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"#91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L-10 B-4 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"363 APT E. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"222C ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"161 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. Parada Valenzuela City"},{"Raw Address":"456-C KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"333 APTC. KAMAGONG ST FV6 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST Parada Valenzuela City"},{"Raw Address":"BL 3 LT 5 GINTONG SILANGAN 349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"201 A. FELIZA Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"HIYAS HOME PARADA RD. Parada Valenzuela City"},{"Raw Address":"233 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"226 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLOCK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"470 PARADA ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"MACABALO APARTMENT PILAR ST. Parada Valenzuela City"},{"Raw Address":"118 E CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"21ST F5 MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"15 F AANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"046 Fortune Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"95P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E AND E COMPD. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"0222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"467-A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"410 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"0394L SAN ADNRES ST. Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"SAPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"352 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"121 E LAGDAME ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"171 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 5THV ST. FV 5 Parada Valenzuela City"},{"Raw Address":"468 KAINGI ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK. 11 FORTUNE DRIVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LOT 10 NIPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"DIZON COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"28 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"363 D. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"91-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 F. FRANCISCOST Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 7 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"171 A.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 5TH ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"272 DOOR 3 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0339 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B1 L2 24TH ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"444 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"121 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"02 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. Parada Valenzuela City"},{"Raw Address":"4365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"327 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"184 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"273 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"407 Parada Valenzuela City"},{"Raw Address":"188 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"3201 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"193 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1548 F PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST DOON COMPD Parada Valenzuela City"},{"Raw Address":"257 RIZALINA STREET Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"258 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"091 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"166 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"278 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"342 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"193 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"140 E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"PEARL CORNER SAPPHIRE ST. B.Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"013 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"# 10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"312 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO Parada Valenzuela City"},{"Raw Address":"2970 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"312 INT.JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"250 25TH ST. FORTUNE DRIVE Village 5 Parada Valenzuela City"},{"Raw Address":"13 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 STREET 21 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"187 Parada Valenzuela City"},{"Raw Address":"414 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"466 KABERONG KAINGIN Parada Valenzuela City"},{"Raw Address":"BLK 2 GINTONG SILANGAN SAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"392-B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PARADA ST. SALAZAR Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"443 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"161 FELISA SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ. PARADA Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"186 FELIZA Parada Valenzuela City"},{"Raw Address":"22 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"121 CAPITAN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"#185 FILIZA Parada Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 10 LOT 5 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. Parada Valenzuela City"},{"Raw Address":"4542 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN Parada Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"88 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT3A B9L30 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"174 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"140 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"1252 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"319 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"278 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG. PARADA Valenzuela City"},{"Raw Address":"LOT 29 A BLK. 9 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"111-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 6THST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"12 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39C PARADA RD Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"91A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"70 PARADA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"150 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"233 19 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"433 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"124 -B CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"9 M. LAUREL STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"88 I. SANTIAGO Parada Valenzuela City"},{"Raw Address":"31 U4&5 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L8 B2 TINDALO ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B2 L8 349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#136 NARRA ST. Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST.PARADA Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARI CPD. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD WEST Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"DAET CMPD.PARADA Valenzuela City"},{"Raw Address":"417 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"9 PARADA RD. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"150 AVELIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 BLK. B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"Q02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"338 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"40 PARADA RD Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"24TH STREET BEN MARIE COMPD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"094 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"417 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"45-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"333 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"60 Fortune Village 6 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST . PARADA Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 T.EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"333-A KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST. BENMARE COMP. Parada Valenzuela City"},{"Raw Address":"139 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"65 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"39 D SANTIAGO CPMD. FV4 Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"170 SLAZAR ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B 2 L19 SAPPHIRE ST.HIYAS HOME Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138-E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1114 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"14 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"220 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DOOR 4 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"4-D S.DE GUZMAN ST. EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"328 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"360-J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"INT. CAPT.CRUZ. ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204-B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 S. DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"225 A BELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"267 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"410P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"34 PARADA RD Parada Valenzuela City"},{"Raw Address":"365 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"351-C CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"DOOR B. MACABALO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"78-B PARADA EXTN. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"E. QUENIO ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP 21 ST FORTUNE Parada Valenzuela City"},{"Raw Address":"203 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 1 SALAZAR Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"067 E PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET Parada Valenzuela City"},{"Raw Address":"CABRAL ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA ST Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"310 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"FELISA ST Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"435 B. ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"67 FORTUNE VIILAGE 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"19921 ST. Parada Valenzuela City"},{"Raw Address":"410 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD Parada Valenzuela City"},{"Raw Address":"B5 L6 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"15 F. Parada Valenzuela City"},{"Raw Address":"MENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT10 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"B4L7 MHOAI TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L24 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"239 PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST FV4 Parada Valenzuela City"},{"Raw Address":"055 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"339TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"BLK.14 L3 M. DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"392-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN EXT. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"193 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"233 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"170 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FANCISCO ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"FORTUNE5 5 Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 3 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"465B KAINGIN ST Parada Valenzuela City"},{"Raw Address":"CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"185 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":". Parada Valenzuela City"},{"Raw Address":"WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 B DOON SALAZAR ST. COMPD. Parada Valenzuela City"},{"Raw Address":"230-S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"L 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"199 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"273 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"154 ALICICA ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village. 5 Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"COR. 6TH ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"365-A TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"351 D. CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"TOMASA Parada Valenzuela City"},{"Raw Address":"276 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"91-E CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"316 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"110 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FELIZA ABUKID Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. PARADA Valenzuela City"},{"Raw Address":"0177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLIHAN COMPD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STR Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"172 RAMON ST. Parada Valenzuela City"},{"Raw Address":"202-A FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"9-E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"05 118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST Parada Valenzuela City"},{"Raw Address":"324 TANGDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BLK.8 LOT31 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"327 T. MANANG Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMP Parada Valenzuela City"},{"Raw Address":"L14 B 5 GINTONG SILANGAN ST. Parada Valenzuela City"},{"Raw Address":"172 Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"85 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"LOT 17 BLK 2 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"28 PARADA Valenzuela City"},{"Raw Address":"LOT 4 BLK 21 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"33 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"249 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168-B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"052 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"363-D TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"236 7TH ST. PARADA Valenzuela City"},{"Raw Address":"5 Parada Valenzuela City"},{"Raw Address":"5 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"18 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"40 PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"255 TOMAS ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"119 PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 PILAR ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD Parada Valenzuela City"},{"Raw Address":"0349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"271 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD ST. Parada Valenzuela City"},{"Raw Address":"L6 B2 TINDALO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"01 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"FELIZA Parada Valenzuela City"},{"Raw Address":"146 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"09 BO. PARADA RD. Parada Valenzuela City"},{"Raw Address":"405 B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 M DEGULA Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"416 TATA ERO Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"422 GOMEZ ST. FORUNE Village 7 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"380 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"410 A- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR 12 118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"199 AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"384 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 ABELARDO FAVillageA Parada Valenzuela City"},{"Raw Address":"5JUPITER ST. Parada Valenzuela City"},{"Raw Address":"333-F KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"111 YAKAL STREET Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"352 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"235 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0260 1 TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"84 A CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"131-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"PARADA ROAD 28 Parada Valenzuela City"},{"Raw Address":"14 B PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SNTIAGO ST. Parada Valenzuela City"},{"Raw Address":"16 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"314 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"184 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"25 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"410 T. MANANG Parada Valenzuela City"},{"Raw Address":"313 MENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWAN HOUSE Parada Valenzuela City"},{"Raw Address":"202 FELIZA Parada Valenzuela City"},{"Raw Address":"278 PILAR STREET Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"131-CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 Parada Valenzuela City"},{"Raw Address":"055 PARADA RD. COR. IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"311 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG LOT 3 BLOCK 14 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"DELA CRUZ COMP. CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"026 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 GINTONG SILANGAN A . FRANCISCO Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"002 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"11-B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407-B P. DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"200 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"061 PARADA RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"D: Parada Valenzuela City"},{"Raw Address":"330 TIA. MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"407 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"#267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"007 PARADA RD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 ST.PARADA Valenzuela City"},{"Raw Address":"5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"150 NARRA STREET Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"146 DALAWAN Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"384 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE V FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"119 Fortune Village 5 6 ST. Parada Valenzuela City"},{"Raw Address":"161 B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"L2 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"192-3 6TH ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"0320 D S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"262 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"416 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 VENUS ST CMPD SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 19 HIYAS HOMES SAPHIRE ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"F.FRNCISCO ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"30 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"124B CUPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"37 PARADA RD Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"168 INT. SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"94- B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"419 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"222 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"0394 (G.) SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"8 VENANIO RD. P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F. SANT IAGOS T. Parada Valenzuela City"},{"Raw Address":"200C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"310 MENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"#255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"0306 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"168N SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"LT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT7 TANDANG MANANG TMHOA Parada Valenzuela City"},{"Raw Address":"287 BO. PARADA SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"457-F KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"320 A SANTIAGO DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT12 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"307 FELISA STREET Parada Valenzuela City"},{"Raw Address":"KALYE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"268 25TH Fortune Village 5. Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SALASAR ST. Parada Valenzuela City"},{"Raw Address":"2860 140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"357 FRANCISCO Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN PARADA Valenzuela City"},{"Raw Address":"FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"150 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"264 B 4TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILISA BUKID Parada Valenzuela City"},{"Raw Address":"095 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"39-K RAMON ST. Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"245 19TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE PARADA RD. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"284 P. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"149 A 6TH ST. KAMAGONG ROAD Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"207 STREET FILISA BUKID Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"233 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"366 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN COMP. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B4 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"50 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"1288 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 S.DEGUZMAN Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"2532 140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"274 Parada Valenzuela City"},{"Raw Address":"250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"207 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L1 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST Parada Valenzuela City"},{"Raw Address":"121 Parada Valenzuela City"},{"Raw Address":"169 DON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"158 NARRA ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 25TH. Parada Valenzuela City"},{"Raw Address":"424 BURGOS Parada Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"33 Parada Valenzuela City"},{"Raw Address":"466C KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"158 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET CORNER 6TH STREET Parada Valenzuela City"},{"Raw Address":"138 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"415 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"100 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"237 19TH Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Parada Valenzuela City"},{"Raw Address":"252 DEGUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"107 E.LAGDAMEO ST. FVF. 4 PARADA Valenzuela City"},{"Raw Address":"258 INT. S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"210 21TH STREET COR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CORNER 23 RD. ST. FOERTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. STREET Parada Valenzuela City"},{"Raw Address":"412-B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR ST Parada Valenzuela City"},{"Raw Address":"369 T.ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"028 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"67 B PARADA ROAD EXIT FORTUNE6 Parada Valenzuela City"},{"Raw Address":"407-B P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"122 CALLE II PARADA Valenzuela City"},{"Raw Address":"249 Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. COR. MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR Parada Valenzuela City"},{"Raw Address":"FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"175-B RAMON STREET Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"215 PARADA Valenzuela City"},{"Raw Address":"39-B RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"101 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD FVG Parada Valenzuela City"},{"Raw Address":"201 22ND ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BENMARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"231 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG ST.KAINGIN Parada Valenzuela City"},{"Raw Address":"34 PARADA ST. Parada Valenzuela City"},{"Raw Address":"406 Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"#92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"339 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"139 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"021 EUGENIO BARIO Parada Valenzuela City"},{"Raw Address":"175 FELISA ST. Parada Valenzuela City"},{"Raw Address":"F. Village 5 Parada Valenzuela City"},{"Raw Address":"422 BURGOZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"201 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"469-B KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"487 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"# 95 A. F. SNTIAGO Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"227 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"236 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"441 Parada Valenzuela City"},{"Raw Address":"41 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0506 UNIT 2 TINDALO ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"95 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"308 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"86 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"264 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. PARADA Valenzuela City"},{"Raw Address":"387 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"53 SALAZAR RD. BOPARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"136 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ADOR ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"B1 L3 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"180 23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST Parada Valenzuela City"},{"Raw Address":"224 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 22ND ST. Parada Valenzuela City"},{"Raw Address":"161 A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"378 A. TATA ANDRES Parada Valenzuela City"},{"Raw Address":"169 D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"249 ABELLARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"2531 M.DELOS REYES ST. PARADA Valenzuela City"},{"Raw Address":"456 KAINGIN Parada Valenzuela City"},{"Raw Address":"MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"B-7 L-7 BURGOS ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"458 P. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"009 CABRAL ST. Parada Valenzuela City"},{"Raw Address":"WEST CVR Parada Valenzuela City"},{"Raw Address":"9E PARADA RD. PARADA Valenzuela City"},{"Raw Address":"# 347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"07 HIYAS HOMES CORAL ST. Parada Valenzuela City"},{"Raw Address":"199 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"389 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"325 T MANANG ST Parada Valenzuela City"},{"Raw Address":"188 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"0002 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"415 B TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"223 A BELARDO ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"#15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 RAMON FORUNTE Village 4 Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK. 2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON Parada Valenzuela City"},{"Raw Address":"448 ROMARAO SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 S DU GUZMAN ST Parada Valenzuela City"},{"Raw Address":"254 25ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"B1L5 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. BO. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON CPND. Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 12 BURGOS ST. FV7 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"272 IMPONG JUANA ST. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD. Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FV5 Parada Valenzuela City"},{"Raw Address":"268 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"ure Name and Signature Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"297 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"366 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"87 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"183 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"185 D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4-3 GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND 21ST STREET Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"26 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"112 Parada Valenzuela City"},{"Raw Address":"019 PARADA Valenzuela City"},{"Raw Address":"33 EARTH F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALIN ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"mplete. Parada Valenzuela City"},{"Raw Address":"80 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"156 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"442 ST. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"412B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2345 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"98L KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAINGIN Parada Valenzuela City"},{"Raw Address":"244 7 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"153 PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. BRGY. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"311 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Parada Valenzuela City"},{"Raw Address":"199 BM COMP. 21 ST FV5 Parada Valenzuela City"},{"Raw Address":"ILOCTO ST. PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"B19 EARTH ST Parada Valenzuela City"},{"Raw Address":"261 25ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"220 SALVADOR ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 7 Parada Valenzuela City"},{"Raw Address":"99 VENUS Parada Valenzuela City"},{"Raw Address":"94 B. FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 12 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"2OO C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"LOT 31 EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST Parada Valenzuela City"},{"Raw Address":"B3L16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"192 A M . DEGULA ST. Parada Valenzuela City"},{"Raw Address":"B2L23 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"Village 5&6 Parada Valenzuela City"},{"Raw Address":"230 - 1 D. S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"368 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"091 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"77 CCAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 RAMON ST FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK 1 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"B4 L 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"BLK. 7 37 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1ST ST. BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"50 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"440 RUMARAO ST. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 20 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"440 RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"DOOR2 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"349 F FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO STREET Parada Valenzuela City"},{"Raw Address":"B6 L9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"302 B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"W77 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"12 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"314 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"252 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"497 Parada Valenzuela City"},{"Raw Address":"181 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 PARADA Valenzuela City"},{"Raw Address":"403-B TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"40 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"UNIT 2 #14 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"68 B PARADA RD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"193-A M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"349 F. FARNCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 6STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO Parada Valenzuela City"},{"Raw Address":"DOOR B PILAR ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"264 Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. BO. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"206 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"272- A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32B 258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"37 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"28 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"415 ZAMORA STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"216 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"391 SANTALON RD. Parada Valenzuela City"},{"Raw Address":"BET 6 AND 7 ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"12 - I CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"320 2nd Floor E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"440 ROMARAO COMPD. WESTSERVICE ROAD Parada Valenzuela City"},{"Raw Address":"96 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"JVC PARADA Valenzuela City"},{"Raw Address":"BEN MARIE CMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA Parada Valenzuela City"},{"Raw Address":"130 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#77 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"CORNER HIYAS STREET Parada Valenzuela City"},{"Raw Address":"16 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"VAL. M.M. Parada Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"17 D. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"6 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"283 S . MARTHA ST. Parada Valenzuela City"},{"Raw Address":"276 PILAR ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"468 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"309 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"45 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"083 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B5 L 2 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST. SILANGAN Parada Valenzuela City"},{"Raw Address":"117A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"064 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. FV5 Parada Valenzuela City"},{"Raw Address":"443-3 SERVICE RD Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"289 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"97A CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"COR. OLIVA ST. & RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"341 20TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"216 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"200 C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"9 PLUTO F .SANTIAGO Parada Valenzuela City"},{"Raw Address":"32 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"DE GULA APT. Parada Valenzuela City"},{"Raw Address":"344 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"355 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"2735 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0909 ADOR STREET Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST.PARADA Valenzuela City"},{"Raw Address":"203 B. VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"250 UNIT 9 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 E S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"064 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"442 18TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"LT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"015 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 3 ACACIA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"149 NARRA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"416 TATAERO Parada Valenzuela City"},{"Raw Address":"161 SALAZAR Parada Valenzuela City"},{"Raw Address":"306 CAPT.DAET COMP. Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON STREET Parada Valenzuela City"},{"Raw Address":"270 A.S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"ALICIA ST.Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 16 LOT 12 M DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B1 L 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1827 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"68 B PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L1 B2 A. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"111E LAGDAMEO STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"SANTOAGO ST. Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 ANTHONY Parada Valenzuela City"},{"Raw Address":"107 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"451 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 7 TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"193 FORTUNE DR. ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"299 B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"321-1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 B. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO ST. GINTOMG Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"277 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"362A TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"182 K MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"341 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0098 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"388 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"145 UNIT B NARRA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. CORNER IPIL FV6 Parada Valenzuela City"},{"Raw Address":"1-DEMBUSCADO APT. 230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN RD. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLACK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN Parada Valenzuela City"},{"Raw Address":"# 61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. E&E SUBD. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"39 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"169 F. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"348 CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0385 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"173 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"007 Parada Valenzuela City"},{"Raw Address":"14 B PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. IPIL Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"011 PARADA ST. Parada Valenzuela City"},{"Raw Address":"166 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"186-D 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"310 MENEZ STREET Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"354 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"453 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"194 19TH STREET Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 Parada Valenzuela City"},{"Raw Address":"24 ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141 Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"190 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village.. Parada Valenzuela City"},{"Raw Address":"362-B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"243 SOUTH DE GUZMAN Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"LOT 12 BLOCK 5 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"317 F Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"247 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 A. M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"29 PARADA RD Parada Valenzuela City"},{"Raw Address":"157-B PARADA Valenzuela City"},{"Raw Address":"61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"349 A FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0035 KAINGIN Parada Valenzuela City"},{"Raw Address":"04 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"073 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"182 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"173 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"270 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"249 ABELARDO Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"15 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA RD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"258-S.DE GUZMANST. PARADA Valenzuela City"},{"Raw Address":"22A EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"#131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID STREET Parada Valenzuela City"},{"Raw Address":"109 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"347 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"19 BLK. 4 FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 4 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Parada Valenzuela City"},{"Raw Address":"098 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR Parada Valenzuela City"},{"Raw Address":"349 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"#28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"172 23RD ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"100 LAGMADEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"21ST. FORTUNE DRIVE COFR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"111 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"259 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"132 C KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"317 A.TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"96 PARADA Valenzuela City"},{"Raw Address":"193 6TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"252 ABELARDO Parada Valenzuela City"},{"Raw Address":"285 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"015 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"203-18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Q5151 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"411 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ. PARADA Valenzuela City"},{"Raw Address":"199 ANTHONY ST. PARADA Valenzuela City"},{"Raw Address":"177 FELISA ST. Parada Valenzuela City"},{"Raw Address":"78 PARADA ROAD EXTN. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA Parada Valenzuela City"},{"Raw Address":"68 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"135 A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"KALYE ONSE Parada Valenzuela City"},{"Raw Address":"PARADA ST. Parada Valenzuela City"},{"Raw Address":"250-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q 551 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"130 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"2-B F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"2695 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"ADOR STREET Parada Valenzuela City"},{"Raw Address":"67 PARADA RD. Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 FORTUNE STREET Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 A. MOLAVE ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"424 A. BURGOS ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. ROMARAO COMP. Parada Valenzuela City"},{"Raw Address":"93 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"1010 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"44 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"11 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"230-1-D S. D GUZMAN ST EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"207 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"218 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"175 23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"85 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ADOR ST SISCAR APT. Parada Valenzuela City"},{"Raw Address":"19 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"8 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"LOT 12 BLK 1 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#3 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"247 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"278 TATA ENTONG ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"282 SANTALON RD. PARADA Valenzuela City"},{"Raw Address":"257 ADOR ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"330 T.AMANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"1223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"200 A. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"091-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"325 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"140 NARRA ST FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO BAGONG SILANG Parada Valenzuela City"},{"Raw Address":"32- F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. RIVERA CMPD. Parada Valenzuela City"},{"Raw Address":"165 ACACIA Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE 501 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"35 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"02 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 207 22ND ST. Parada Valenzuela City"},{"Raw Address":"97 KAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"12B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"257 20ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT 1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"204 6 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"003 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"242 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"306 - A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA RD. Parada Valenzuela City"},{"Raw Address":"287 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 A S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435-C ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"15 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"452 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"0024 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"24 JENUS Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILLAR ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"425-T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"Fortune Village 5 21ST. STREET Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. Parada Valenzuela City"},{"Raw Address":"18 ROAD Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST. Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE IV Parada Valenzuela City"},{"Raw Address":"0378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"243F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#73 B. PARADA RD. EXT. FV7 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Parada Valenzuela City"},{"Raw Address":"469 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"441 PARADA Valenzuela City"},{"Raw Address":"470 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"120 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"35 PARADA RD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"273 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#45 A. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDES ST. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"297 - D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"182-D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"385 Parada Valenzuela City"},{"Raw Address":"M.DEGULA Parada Valenzuela City"},{"Raw Address":"155 ALICIA Parada Valenzuela City"},{"Raw Address":"360 DE GUZMAN ST. J- FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"202 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"9 PLUTO ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0013 7TH UNIT C FV 5 Parada Valenzuela City"},{"Raw Address":"101 DE GULA PARADA Valenzuela City"},{"Raw Address":"185-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"15-F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"022 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 19TH ST. Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"135 CONSUELO ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"357 Parada Valenzuela City"},{"Raw Address":"242 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"09 PARADA RD. Parada Valenzuela City"},{"Raw Address":"377 APT. 4 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"189 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE FOUR Village Parada Valenzuela City"},{"Raw Address":"29 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"462 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B1 L12 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"011 PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"230-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"115 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"207 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"009 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"197 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"44B PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR STREET Parada Valenzuela City"},{"Raw Address":"258 S. D EGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"219 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"93 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"397 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"111 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. BUKID Parada Valenzuela City"},{"Raw Address":"05 FORTUNE Village 6TH ST. Parada Valenzuela City"},{"Raw Address":"111 A KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"193 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"062 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 PARADA Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO Parada Valenzuela City"},{"Raw Address":"25 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"#39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"255 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"1819 PEARLS ST. Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"446 F. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE ST. Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"28 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"1 MO DIZON COMP. TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ Parada Valenzuela City"},{"Raw Address":"031 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"168 A CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"96 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"470-A KAINGIN Parada Valenzuela City"},{"Raw Address":"135 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"FATIMA COMP. PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 20 GINTONG SILANGAN F. Parada Valenzuela City"},{"Raw Address":"215 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"409 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELEZA ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"546 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"246 C S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"012 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"141 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"340 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"MERCURY STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"351 P. FRNACISCO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"121 C CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"175 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"#9E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"158 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B3 L 3 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 14 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"289 D SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"32 B 258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"112 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B1 L13 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168- SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"071 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"207 FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"204 B ANTHONY STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"A CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"291 PARADA RD. Parada Valenzuela City"},{"Raw Address":"DR. 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"37 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"268 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"155 ALICIA FV 4 Parada Valenzuela City"},{"Raw Address":"43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"236 7TH STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG STREET Parada Valenzuela City"},{"Raw Address":"0104 AS8 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#94 A. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"002 YAKAL ST COR ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"405 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"176 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L22 EARTH F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTRUNE 4 Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"032 PARADA Valenzuela City"},{"Raw Address":"190 6TH ST. COR. MOLAVE PARADA Valenzuela City"},{"Raw Address":"181 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L11 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"329 T.MANANG Parada Valenzuela City"},{"Raw Address":"5TH ST. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"359 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO RD. PARADA Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"2645 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10E FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. Parada Valenzuela City"},{"Raw Address":"99 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"412 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"18 PARAD ROAD Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"L19 B3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"L-5 BLK-06 NARRA ST. Parada Valenzuela City"},{"Raw Address":"466-C KAINGIN KABERONG Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO 31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 CALLE ONSE BO.PARADA Valenzuela City"},{"Raw Address":"19 CARACTA VillageE KAINGIN Parada Valenzuela City"},{"Raw Address":"77 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"141 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"266 F 24TH STREET Parada Valenzuela City"},{"Raw Address":"45A EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"365 F TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"206-4 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"441 RUMARAO CPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"341 21ST FOTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"171 SALAZAL Parada Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"120 CORNER ST. 25TH ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"224H 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 - 21 ST. FV5 Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"212 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"096 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BL 3 LT 24 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21ST FORTUNE Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"391F P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"DULO Parada Valenzuela City"},{"Raw Address":"438-SERVILE ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA Parada Valenzuela City"},{"Raw Address":"219 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 22 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"JADE CORNER SAPPHIRE Parada Valenzuela City"},{"Raw Address":"413 H P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"# 9 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"411-B P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMA ST.N Parada Valenzuela City"},{"Raw Address":"452 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"230 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"ILOCTO C5 Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"8 IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 19TH ST. COR. 21ST. Fortune Village 5 BO. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"194 6TH STREET Parada Valenzuela City"},{"Raw Address":"# 94 A. FELEZA ST. Parada Valenzuela City"},{"Raw Address":"338 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"109 25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"220 C 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"#18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"412 TATAERO 6 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT10 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. FORTUNE Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"430 GOME ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"123 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"359 J. FRNACISCO ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"DR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"122 CONSUELO ST. FORTUNE 04 Parada Valenzuela City"},{"Raw Address":"290 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"44 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"114 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"B2L14 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"153 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"26. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"91-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"10 E.FRANCISCO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG ST. Parada Valenzuela City"},{"Raw Address":"185 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"330 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"099 PARADA Valenzuela City"},{"Raw Address":"507 23ST FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"24 A CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"251 25TH ST. Parada Valenzuela City"},{"Raw Address":"169 ACACIA STREET Parada Valenzuela City"},{"Raw Address":"F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"36 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"204 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"144 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"113 LAGDAMEO ST. FV. 4 PARADA Valenzuela City"},{"Raw Address":"199 21 ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"189-24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 15 A207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 LOT15 AREA-A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"168 MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"37 C PARADA RD. PARADA Valenzuela City"},{"Raw Address":"203B VENUS ST. Parada Valenzuela City"},{"Raw Address":"#41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"190-C 6TH ST. COR KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE 05 Village Parada Valenzuela City"},{"Raw Address":"316 JIMINEZ CMPD. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA BUKID Parada Valenzuela City"},{"Raw Address":"0192 E 6TH ST. FORTUNE Village PH 6 Parada Valenzuela City"},{"Raw Address":"229 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"100 A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"160 NARRA ST. COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"377 18ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"71 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"325 TADANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"23 EUGENIO Parada Valenzuela City"},{"Raw Address":"MM. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"486 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"351 Parada Valenzuela City"},{"Raw Address":"148 DALAWAN Parada Valenzuela City"},{"Raw Address":"0279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"34 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"464 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"502 FORTUNE DRIVE COR. 23RD ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"381 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"ACASIA ST. KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"34 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR2 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"20 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"203 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"396 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"B5 L8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"278 PILAR ST Parada Valenzuela City"},{"Raw Address":"7 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"341 BO.PARADA Valenzuela City"},{"Raw Address":"242 19TH ST. Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 03 LOT 12 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"107 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0258 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"3 200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"243 7 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"87 BO Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"81 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"467 Parada Valenzuela City"},{"Raw Address":"173 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"250B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"409A P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"450 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"283 S DE GUZMAN SR. Parada Valenzuela City"},{"Raw Address":"308 MENES Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B1L17 PARADA RD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"19 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"65 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"205 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 17 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B 4 L 10 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"18 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"85 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"162 MOLABE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL STREET FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"225 Fortune Village 4 ABILARDO ST. Parada Valenzuela City"},{"Raw Address":"F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2 PASO DE BLAS Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"249 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"200 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L10 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"471 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND FORTUNE Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"297 D T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 BF SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"052 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 6ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"18223 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"165 FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"456 -H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"COR. 23 STREET FV 5 Parada Valenzuela City"},{"Raw Address":"LAGDAMO ST. Parada Valenzuela City"},{"Raw Address":"374 Parada Valenzuela City"},{"Raw Address":"108 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"45 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"68 B PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 12 7TH STREET Parada Valenzuela City"},{"Raw Address":"248 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. FOERTUNE 4 Village Parada Valenzuela City"},{"Raw Address":"320 D S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"27 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 BLK 2 TINADALOST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"241 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"340 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"123 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"030 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. MANUKAN Parada Valenzuela City"},{"Raw Address":"444 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"163 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"293 A.ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#002 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"220 D 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"225 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST Parada Valenzuela City"},{"Raw Address":"297-C TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2675 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"442 ROSILLAS ST. Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"179 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"LOT 1 BLCK 7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"B1 L12 BUGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 5 21ST Parada Valenzuela City"},{"Raw Address":"438 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"1956 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 Parada Valenzuela City"},{"Raw Address":"210 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"68 PARADA RD. Parada Valenzuela City"},{"Raw Address":"CA[T.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"#2 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"321-1 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 07 Parada Valenzuela City"},{"Raw Address":"247 DE GUZM Parada Valenzuela City"},{"Raw Address":"UNIT 3 SALAZAR Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"234 19 Fortune Village 5 ST Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELISA BUKID Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"279 Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"162E SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"103 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"006 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"151DALAWAN ST Parada Valenzuela City"},{"Raw Address":"137 KAINGIN Parada Valenzuela City"},{"Raw Address":"301 7TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"525 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"F. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"56 PARADA ROAD CORNER IPIL ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"S-8104 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"447 GOMEZ Parada Valenzuela City"},{"Raw Address":"143 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"23 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"002 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN Parada Valenzuela City"},{"Raw Address":"39 K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"1314A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237-S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"FATIMA COMPOUND Parada Valenzuela City"},{"Raw Address":"L1 B2 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST.3 Parada Valenzuela City"},{"Raw Address":"BL 1 LT 12 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"39 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"14 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"192 M.DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"108-B RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"56 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Parada Valenzuela City"},{"Raw Address":"457 INT. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"09 BO PARADA RD Parada Valenzuela City"},{"Raw Address":"281-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 Parada Valenzuela City"},{"Raw Address":"93 C CAP. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"299 PARADA JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"268 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"31 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"141 Fortune Village 5&6 Village Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"LOT 8 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0260 I TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"201 SELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"INT. ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA ST S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"08 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"204 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 L7 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"SUBDIVISION Parada Valenzuela City"},{"Raw Address":"LOT 11 BLK 5 JADE ST. Parada Valenzuela City"},{"Raw Address":"118 DOOR 4 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0094B C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"456 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"320 T.MANANG PARADA Valenzuela City"},{"Raw Address":"B4L12 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"125 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"137 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"455 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"82 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"123A KAMAGONG ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"353 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"94-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"175 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CMPD ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"184 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"198 Parada Valenzuela City"},{"Raw Address":"310 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"411 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"8 C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"FORTUNE7 Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"177 ST. CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"195 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST. F.V 7 Parada Valenzuela City"},{"Raw Address":"028 PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"161 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VINUS ST. Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"110 LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"387 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"192E 6ST. FORTUNR Village 5 Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"467 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"213 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"262 Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"171 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0345 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"266 24TH STREET Parada Valenzuela City"},{"Raw Address":"3 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"244 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L7 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"391 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"443 B SERVICE RD. Parada Valenzuela City"},{"Raw Address":"26 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-D SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"417 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"194 6 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187-A FELISA ST. PARADA Valenzuela City"},{"Raw Address":"31F SANTIANGO VENUS ST Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0014 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"178 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"196 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. Parada Valenzuela City"},{"Raw Address":"411 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"260 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"INT. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"111 UNIT B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"194 COR. 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"389 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93-A CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"119B PEARL ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"93-A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"393 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG Parada Valenzuela City"},{"Raw Address":"411 C P.DE GUZMAN ST. TATA ERO Parada Valenzuela City"},{"Raw Address":"140-B E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. FORTUEN 7 Parada Valenzuela City"},{"Raw Address":"E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"148 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"101A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ST Parada Valenzuela City"},{"Raw Address":"367 FELISA Parada Valenzuela City"},{"Raw Address":"14 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FORT Village Parada Valenzuela City"},{"Raw Address":"169D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"460 GOMEZ STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"13 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297B TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 Parada Valenzuela City"},{"Raw Address":"259 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"356 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"174 FELISA Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"9 PLOTO ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"030 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"12 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"444 SERVICE RR. Parada Valenzuela City"},{"Raw Address":"123-2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"327 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"186 UNIT 3 FELIZA ST Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRESS STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"179 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"406 T. MANANG Parada Valenzuela City"},{"Raw Address":"184 FELISA ST. Parada Valenzuela City"},{"Raw Address":"271 Parada Valenzuela City"},{"Raw Address":"185 FELISA Parada Valenzuela City"},{"Raw Address":"384 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"268 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"241 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 6 LOT 4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"111 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"ADOR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"310 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"AURORA COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"14 B. PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 TMHOA Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"69 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 21ST AGLEHAM COMPD. Parada Valenzuela City"},{"Raw Address":"3498 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"476 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV 4 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"094 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"180 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"23 T EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"9001 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4792 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"227 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"38 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"468 KINGIN ST. Parada Valenzuela City"},{"Raw Address":"347-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"341 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"220 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"311 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"124 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"225 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"199 21ST FV5 Parada Valenzuela City"},{"Raw Address":"243 PACING Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 5 TMHOA Parada Valenzuela City"},{"Raw Address":"0250 UNIT 11 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"#283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"95 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"188 MOLAVE ST. CORNER 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"DE GULA APT. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"377 18 STREET Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"264 19TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 KALYE ONSE Parada Valenzuela City"},{"Raw Address":"26 NARRA ST. FV 5&6 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"75 GOMEZ STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. E-E COMP. Parada Valenzuela City"},{"Raw Address":"504 FORTNE DRIVE Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"286 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"317 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"349F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"004 BO. Parada Valenzuela City"},{"Raw Address":"27 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"194 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"346 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1106 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"FORT Village 4 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"88 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"115 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"162-D SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"CALLE 11 BUKID ST. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"412 PARADA Valenzuela City"},{"Raw Address":"214 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"190D 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"258 GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"306 CAPT. DAET CPD. PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"291 Parada Valenzuela City"},{"Raw Address":"178 RAMON STREET Parada Valenzuela City"},{"Raw Address":"113 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B1 L10 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"050 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"272 S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"141 UNIT 4 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE VillageE 5-6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"411 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"225 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"274 BO.PARADA Valenzuela City"},{"Raw Address":"10 PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"B1L8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"390 Parada Valenzuela City"},{"Raw Address":"403 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"165 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"412 A P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. PARADA Valenzuela City"},{"Raw Address":"TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"73-B PARADA RD. EXT FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TATA ERO Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"59 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 AGLEHAM COMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"410 A-P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"33 E. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0346 FELISA ST. Parada Valenzuela City"},{"Raw Address":"24 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"19 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"018 EUGENIO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"863 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"31 UNIT 4&5 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"271 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"8F CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"196 MALAVE ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"124 B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"24TH BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"24 B F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD.PARADA Valenzuela City"},{"Raw Address":"36 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"RASILIA 438 PARADA Valenzuela City"},{"Raw Address":"39-C RD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"211 21TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"393 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"212 21ST. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"E & E COMP. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"223 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"455 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"056 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"352 G. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"183 23RD. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"202 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"176 23RD ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"254 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"B5 L11 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"NO 172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"252-A BLOCK 2 LOT 2 S. DE GUZMANS ST. Parada Valenzuela City"},{"Raw Address":"14-B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"188 RAMON ST Parada Valenzuela City"},{"Raw Address":"215 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"199 B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"17 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"168 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"320 Parada Valenzuela City"},{"Raw Address":"8 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"460 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"148 NARRA ST. Parada Valenzuela City"},{"Raw Address":"E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"30 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"140 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR T. DOON CMPD Parada Valenzuela City"},{"Raw Address":"009 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"185C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO Parada Valenzuela City"},{"Raw Address":"121 CONSUELA ST.FV4 Village Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B-4 L-28 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"185 B FELIZA ST Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"365B TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"20 SALAZAR Parada Valenzuela City"},{"Raw Address":"T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ CMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"314 BO.PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"464-A KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"279 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"218 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"142 DALAWAN Parada Valenzuela City"},{"Raw Address":"310 MENES ST. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"127 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"118 C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"153 PINAGPALA PHASE 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"96 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"251 25TH ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"182 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD Parada Valenzuela City"},{"Raw Address":"091 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES B.O Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"130 NARRA ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 B PARADA Valenzuela City"},{"Raw Address":"19TH ST. Parada Valenzuela City"},{"Raw Address":"271 A. MARIA ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"225 AVELARDO ST. Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"413 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"L16 B5 349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA ROAD FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"NO. 199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"181 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"6 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"#113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 PARADA Valenzuela City"},{"Raw Address":"158 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL HIYAS Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"415 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"067 PARADA ST. Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG Parada Valenzuela City"},{"Raw Address":"207 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"18 GP ST. WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ Parada Valenzuela City"},{"Raw Address":"341 PARADA 2OTH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"LOT 8 BLK.3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"116 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"888 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA STREET Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"402 7TH ST. FV. 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"397 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"423 ZAMORA ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"224 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"88 D CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"463 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"351 PHASE 2 PINAGPALA F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"320S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"207 PILISA BUKID Parada Valenzuela City"},{"Raw Address":"LE 116 CAPT. CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B1L10 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"12-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT. CRYZ ST. Parada Valenzuela City"},{"Raw Address":"207 ST. FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 4 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Village 6 Parada Valenzuela City"},{"Raw Address":"217 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 11 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"GINTONG SILANG F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE5 Parada Valenzuela City"},{"Raw Address":"273 PILAR Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOP ST. Parada Valenzuela City"},{"Raw Address":"#88 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"235 S Parada Valenzuela City"},{"Raw Address":"466-C KABERONG KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"439 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City. Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"018 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"9 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"8 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"407 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"188 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"450 NORTH DIVERSION PARADA Valenzuela City"},{"Raw Address":"258 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"22 ST. FORTUNE Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. Parada Valenzuela City"},{"Raw Address":"98 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"36A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"320-E S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"0345 KALYE 11 Parada Valenzuela City"},{"Raw Address":"59 BANDINO CORP. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"290 KAINGIN Parada Valenzuela City"},{"Raw Address":"204 C.F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANAG ST. Parada Valenzuela City"},{"Raw Address":"#468 M KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PUROK 1 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"407 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"136 E LAGDAMEO ST. Fortune Village 4 VIL Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"45 A FSANTIAGO Parada Valenzuela City"},{"Raw Address":"001 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 TH ST. Parada Valenzuela City"},{"Raw Address":"068A PARADA RAOD Parada Valenzuela City"},{"Raw Address":"0317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"86 SALVADOR STREET Parada Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"501 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 43 LOT 23 FORTUNES 5 Parada Valenzuela City"},{"Raw Address":"291 PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"94 PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"199 21 STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 5 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 24TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B 1 L10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"410 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"307 A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. 215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"L1 PHASE 2 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK 1 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"10 5TH FORTUNE Parada Valenzuela City"},{"Raw Address":"18 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"199 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"PILAR ST. FORTUNE Village4 MALINTA Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"FELIZA ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"290 PARADA Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"315 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"294 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"165 SALZAR ST Parada Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B3 L2 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 4. PARADA Valenzuela City"},{"Raw Address":"054 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"132 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"091 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"COR. KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"34A F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"259 25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"78B PARADA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"035 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"039 D.SANTIAGO COMP. RAMON ST. F.V.PH4 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"278 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUMAN ST. Parada Valenzuela City"},{"Raw Address":"412 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"COR. CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"147 DALAWA ST. Parada Valenzuela City"},{"Raw Address":"117 E. LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"378 A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"320 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"90 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR Parada Valenzuela City"},{"Raw Address":"199F 6TH FORTUNE Village Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN Parada Valenzuela City"},{"Raw Address":"FELISA STREET Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ DE GULA COMP Parada Valenzuela City"},{"Raw Address":"93C CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. BO. Parada Valenzuela City"},{"Raw Address":"255 TOMASA Parada Valenzuela City"},{"Raw Address":"125 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"297 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"272-A S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Parada Valenzuela City"},{"Raw Address":"111-C KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"CORNER 120 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"08 MARS ST. Parada Valenzuela City"},{"Raw Address":"299 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"5 PARADA RD Parada Valenzuela City"},{"Raw Address":"39-C PARADA RD. Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"0036 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"145 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. PARADA Valenzuela City"},{"Raw Address":"390 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"302 ABELLARDO Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"13 UNIT 4 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"92 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LACAY APT.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"207 FILIPA BUKID Parada Valenzuela City"},{"Raw Address":"22 AT EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"94 A. FELISA STREEET Parada Valenzuela City"},{"Raw Address":"FORTUNEVillage6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#33 EARTH ST. E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN ST. Parada Valenzuela City"},{"Raw Address":"1740 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 KAINGEN Parada Valenzuela City"},{"Raw Address":"2745 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"7 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"834 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 K. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 A.P. DE GUZMAN TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"267 PETRA ST Parada Valenzuela City"},{"Raw Address":"21 BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD FORTUNE Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST FV5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLEHAM 2IST ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"88 H CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"279 PILAR ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST . Parada Valenzuela City"},{"Raw Address":"177 CAPTIAN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 1/E DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"039 PARADA Valenzuela City"},{"Raw Address":"TATA ERRO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"30 PARADA RD. Parada Valenzuela City"},{"Raw Address":"FELISA ST.PARADA Valenzuela City"},{"Raw Address":"79 CAPT.CRUZST. PARADA Valenzuela City"},{"Raw Address":"39 B UNIT 5 RAMON ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"#201 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"97 B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"067 C PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"239 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PESAHAV Village Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"181 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"232 ABELARDO STREET FORTUNE Village NO.4 Parada Valenzuela City"},{"Raw Address":"152 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"128 Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"513 ABCO COMPD. TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK. 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"96 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"472 PETRA Parada Valenzuela City"},{"Raw Address":"168 ALICIA Parada Valenzuela City"},{"Raw Address":"320 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"140 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"100 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"I207 Parada Valenzuela City"},{"Raw Address":"411 A P. DE GUZMAN TATA ERO Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q-4 289 KAMAGONG ST.PARADA Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. DE GULA CPD. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST.FV 6 PARADA Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"94-D FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"B13 Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"331 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"127 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"038 PARADA RD. Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"L10 &12 UNITE 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"365-J TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 DOON COMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"416 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"1262 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"24 T EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"411 C TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"173 23RD ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City Parada Valenzuela City"},{"Raw Address":"334 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"342 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"UNIT 3-A BLOCK 9 LOT 30 NARRA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"JADE COR. SAPHIRE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"314 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 FRANCISCO G. SILANGAN Parada Valenzuela City"},{"Raw Address":"288 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"468-I KAINGIN ST Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 11-F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"80 Parada Valenzuela City"},{"Raw Address":"45 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMP Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"V.P.S. COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"BLK2 LOT19 HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSEULO ST. Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST.FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 BO. PARADA Valenzuela City"},{"Raw Address":"068 A PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"207 CALLE ONSE BUKID DULO Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"333-C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"172 SALAZAR Parada Valenzuela City"},{"Raw Address":"206 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"176 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0004 BLOCK 4 LOT 3 JADE ST. Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"248 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"282 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"8 M LAUREL DRIVE Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"118 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"232 G. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"LOT5 BLK 5 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"204 22ND ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"330 T. MANANG Parada Valenzuela City"},{"Raw Address":"0331 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"287 SANTOLON RD Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"262 25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"245 RAMON ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. EXTENSION Parada Valenzuela City"},{"Raw Address":"468 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"234 FORTUNE 19 ST. Parada Valenzuela City"},{"Raw Address":"467 A. KAINGIN Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"BLK. 4 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"207 FELISA STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"3204 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185-A MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"249 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"259 ADOR Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 2 TMHOA Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"5 5TH ST. Parada Valenzuela City"},{"Raw Address":"12D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"155 C. ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"114 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICI ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67B PARADA RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"374 TATA ANDREZ STREET Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"415 TAERO ST. Parada Valenzuela City"},{"Raw Address":"229 18TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L2 B6 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 BAN MARIE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPOUND ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"262 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"227 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMES STREET Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"K 39 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"501 NARRA ST. FORYUNE 6 Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100-E DE GULA COMPOUND Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"216 ANTHONY ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"392 ILOCTO COMP. KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"228 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"36 PARADA RD Parada Valenzuela City"},{"Raw Address":"062 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"KABERONG ST. Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"266 24TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"157 SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 B. MOLAVE ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"402 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 6 LOT 5 GINTONG Parada Valenzuela City"},{"Raw Address":"97B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"442 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"248 PARADA RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"258 INT. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"186 FELIZA ST Parada Valenzuela City"},{"Raw Address":"409 BIASON COMPD. P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"88 D CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"152 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT"},{"Raw Address":"148 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"BL10 L5 D NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0343-C FELISA ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST FORTUNE IV Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1 D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"228 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"37 PARADA Valenzuela City"},{"Raw Address":"P DE GUMAN Parada Valenzuela City"},{"Raw Address":"110 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"152 ACACIA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21 ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"278 7TH FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"164 SALAZAR Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0320 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"071 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"42 MARS ST. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"360 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"YAKAL ST. COR. ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"22 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CORNER HIYAS Parada Valenzuela City"},{"Raw Address":"179 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"443 B. WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"313 JEMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. Parada Valenzuela City"},{"Raw Address":"046 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"513 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"156 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"283 MARTHA Parada Valenzuela City"},{"Raw Address":"203 B. VENUS STREET Parada Valenzuela City"},{"Raw Address":"# 94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET SAN MIGUEL COMP Parada Valenzuela City"},{"Raw Address":"351 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 B. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149B 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"#39 D. SANTIAGO COMPD. F4 Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"310 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"287 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"30 C TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. COMP. Parada Valenzuela City"},{"Raw Address":"43 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"242 19 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"362 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"108 CORNER YAKAL KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"2585 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"244 7TH STRET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 1 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"L5 B10 A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"274 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARI COMPOUND 22 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"27 PARADA RD. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"258 INTERIOR M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"0011 ADOR ST. Parada Valenzuela City"},{"Raw Address":"106 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"162-C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"228 - B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"018 BARRIO Parada Valenzuela City"},{"Raw Address":"BLOCK 3 LOT 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 C. SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE VIILAGE 5 Parada Valenzuela City"},{"Raw Address":"Q487 IPIL STREET Parada Valenzuela City"},{"Raw Address":"187 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"0359 J.F. FRANCISCO ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B-7 L-25 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"20 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"F.FRANCISCO S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRE ST. Parada Valenzuela City"},{"Raw Address":"PARADA Valenzuela City"},{"Raw Address":"B4L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"285 25TH ST. FORTUNE Village PH5 Parada Valenzuela City"},{"Raw Address":"469 PARADA KAINGIN Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"317 A T.MANANG ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B 5 L 9 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"1336 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE MARCELO COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 E FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"122B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. PARADA Valenzuela City"},{"Raw Address":"161 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 -G S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"116 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 24TH ST Parada Valenzuela City"},{"Raw Address":"428 SEVICE RD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"A 94 FELISA ST. Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"119 21 ST. BENMARIE COMP. FORTUNE V Parada Valenzuela City"},{"Raw Address":"24 VENUZ E2E COMP. F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5. Parada Valenzuela City"},{"Raw Address":"#109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"456-G KAKAWATE ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"458 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"241 7TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 C S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"243 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"LOT 10 E&E COMPOUND Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"33A. FATIMA COMP. Parada Valenzuela City"},{"Raw Address":"248 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J FRANCISCO Parada Valenzuela City"},{"Raw Address":"415 T MANANG ST. Parada Valenzuela City"},{"Raw Address":"274 S Parada Valenzuela City"},{"Raw Address":"37-D PARADA RD. Parada Valenzuela City"},{"Raw Address":"391 P.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"APB MOLAVE ST. 6TH Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST HIYAS HOMES SUBD Parada Valenzuela City"},{"Raw Address":"B1L4 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"257 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#1 24 ST. FORTUINE 5 Parada Valenzuela City"},{"Raw Address":"165 SALASZAR ST. Parada Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"90 ADOR ST. Parada Valenzuela City"},{"Raw Address":"188 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0042 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"438 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"206 UNIT 1 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 3 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B1L2 TMOA Parada Valenzuela City"},{"Raw Address":"438 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMON Parada Valenzuela City"},{"Raw Address":"10 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 6TH ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"357 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"392-B S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"406 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E. Parada Valenzuela City"},{"Raw Address":"154 C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"106 LAG DAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"172 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"377 18 ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4684 HIYAS HOME SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 20 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B 2 L 13 349 FRACISCO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"450 CARREON CPD. WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"179 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"B2 L14 F. FRANCISCO GUINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"44 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"362 B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"179 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"253 ABVELARDO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"B4 L9 349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"29207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK5 LOT18 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"4480 25TH ST. Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"#244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. Parada Valenzuela City"},{"Raw Address":"#122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"235 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"5880 CORAL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"89 Parada Valenzuela City"},{"Raw Address":"279-3 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 13 LOT 27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. Parada Valenzuela City"},{"Raw Address":"249 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. PARADA Valenzuela City"},{"Raw Address":"384 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"270 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRESS Parada Valenzuela City"},{"Raw Address":"372 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD FORTUNE VILLAGE Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 C. CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"21ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"285 S.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"456 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 TATA IRRO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"47 B. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"56 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"145B NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO EXT. Parada Valenzuela City"},{"Raw Address":"22 IMPONG JUANA ST. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1752 3RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"226 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"424 BUROGOS Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"102 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST Parada Valenzuela City"},{"Raw Address":"440B GOMEZ ST. FORTUNE Village7 MALINTA Parada Valenzuela City"},{"Raw Address":"174 FELIZA Parada Valenzuela City"},{"Raw Address":"152 ALICIA Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"L7 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"B1 L9 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"234 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 PARADA PEARL Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"259 25TH ST. Parada Valenzuela City"},{"Raw Address":"411 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"145-C NARRA STREET Parada Valenzuela City"},{"Raw Address":"256 25TH STREET Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40 PEARL STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"140 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"89 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA RD. Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO CMPD. FV4 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"L8 B6 GINTONG SILANGANAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"99 VENUZ ST. F.SNTIAGO Parada Valenzuela City"},{"Raw Address":"270 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"125 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"351-C F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"243 Fortune Village 5 7TH ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"045 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. BO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"468-O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT41 NARRA ST Parada Valenzuela City"},{"Raw Address":"27A NEW BLOCK 10 NARRA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"CASTILLO COMPD. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENES COMPD. BO. PARADA Valenzuela City"},{"Raw Address":"7 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"384 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 6ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"135 LAGDAMEO ST. Fortune Village 4 VillageE Parada Valenzuela City"},{"Raw Address":"451 ZAMORA Parada Valenzuela City"},{"Raw Address":"168 DOON CMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"246 C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"94 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"456-D KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"218 ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"125 Parada Valenzuela City"},{"Raw Address":"224 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 10 JADE ST. SUBD. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6B F-SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"474 KA BERONG Parada Valenzuela City"},{"Raw Address":"40 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"31 F-SANTIAGO Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"GOMES ST. Parada Valenzuela City"},{"Raw Address":"CITY MM. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD ST Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"96 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"236 19TH ST. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"146 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"19B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. LOT 8 Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"1548-A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"200 A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST Parada Valenzuela City"},{"Raw Address":"200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"184 23RD ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO MANUKAN Parada Valenzuela City"},{"Raw Address":"18A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"169 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"246 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MORONG ST. Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"023 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGOMARS ST. Parada Valenzuela City"},{"Raw Address":"171-A SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"098 Fortune Village 5 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"215 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"276 B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"354 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"199 21ST VF5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"240 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1028 B. KAMAGONG ST. FV6&5 Parada Valenzuela City"},{"Raw Address":"0468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"193 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"135 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"423 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1430 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"229 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"256 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"200 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. 21ST FV5 Parada Valenzuela City"},{"Raw Address":"53 3RD FORTUNE V Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"B1 L12 BURGOS Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"1213 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"3B P.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"91 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"055 PARADA FORTUNE5 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"27 A. PARADA RD. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"004 PARADA Valenzuela City"},{"Raw Address":"117 LAGDAMEO FV 4 Parada Valenzuela City"},{"Raw Address":"462 P GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN Parada Valenzuela City"},{"Raw Address":"147 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"134 E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"220-C 21 ST. Fortune Village 5 SUBD. Parada Valenzuela City"},{"Raw Address":"1 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA Parada Valenzuela City"},{"Raw Address":"6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"274 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"391 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"376 Parada Valenzuela City"},{"Raw Address":"153 6TH ST. FORTUNE FIVE Parada Valenzuela City"},{"Raw Address":"437-M GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"16B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Parada Valenzuela City"},{"Raw Address":"269 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST Parada Valenzuela City"},{"Raw Address":"202 22ND ST. Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"467 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"4560 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36D PARADA RD. Parada Valenzuela City"},{"Raw Address":"190 6TH ST FORTUNE Village 5 &6 Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"201 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"307 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FV7 Parada Valenzuela City"},{"Raw Address":"264 B 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"190 DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"34 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"377 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"# 66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0005 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"122 A. KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"454 7TH ST. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5-6 Parada Valenzuela City"},{"Raw Address":"279 PILAR Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"196 MOLALE ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"4387 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"192 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"119 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"340 2OTH STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATAROMAN ST Parada Valenzuela City"},{"Raw Address":"TATA ERO ST. PARADA Valenzuela City"},{"Raw Address":"S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"168 DOON COMP Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"72 JADE ST. Parada Valenzuela City"},{"Raw Address":"332M T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"216 D DE GUZMAN Parada Valenzuela City"},{"Raw Address":"192 C 6TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT 5 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"313 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"212 21ST STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"137 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"120 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"BLK. 6 LOT 9 JADE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"91 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"139 NARRA STREET Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"FORTUNE IV RAMON ST. Parada Valenzuela City"},{"Raw Address":"198 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LE 116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"311 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 NO.4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"003 PARADA Valenzuela City"},{"Raw Address":"94-B FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"202 MOLAVE Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Parada Valenzuela City"},{"Raw Address":"488 ZAMORA ST Parada Valenzuela City"},{"Raw Address":"068 PARADA FORTUNE Village6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"181 RAMON STREET Parada Valenzuela City"},{"Raw Address":"119 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"377 18 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"31 F Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"#45 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"273 S.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 BLK 9 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"152 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG HOUSING PROJECT Parada Valenzuela City"},{"Raw Address":"FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"176 CAPTAIN CRUZ ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"321 B. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"27A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"306 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"140 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"354 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"19921 ST FORTUNE` Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2150 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"386 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"104 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"231 18ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5F SANTIAGO STREET. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"2507 - FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"22 EUGENIO Parada Valenzuela City"},{"Raw Address":"279 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"348 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"282 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"241 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"512 ABCO COMP FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE VILALGE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"166 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"015 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"162 E.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"329 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"467 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"#199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"63 PARADA RD EXT. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"14 C PEARL ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"199 6TH STREET Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE. FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 C KAMAGONG ST. FORTUNE VI Parada Valenzuela City"},{"Raw Address":"199 21 ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"93 C/ CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD ROMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"106 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L17-B2 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"10 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"#5 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"271 CONSUELO FV 4 Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 DAHOA PARAFORT Parada Valenzuela City"},{"Raw Address":"369 TATAANDRES ST Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"36 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"411 C. TATA ERRO Parada Valenzuela City"},{"Raw Address":"12 Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"365 PARADA TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 15A 207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"19 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA RD. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST.BO.Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 LOT 2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"413 P/ DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 A. EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"FATIMA ANEX CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"330 Parada Valenzuela City"},{"Raw Address":"168 KAMAGONG ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"392-C P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"A334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F BO. Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPD. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"274 TATA ENRONG STREET S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"SAN MIGUEL COMP. ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST Parada Valenzuela City"},{"Raw Address":"0343-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349 F-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"314 SANTIAGO Parada Valenzuela City"},{"Raw Address":"261 25TH STREET Parada Valenzuela City"},{"Raw Address":"259 ADOR ST Parada Valenzuela City"},{"Raw Address":"185 CASTILLO COMPOUND FELIZA ST. Parada Valenzuela City"},{"Raw Address":"PARADA RD. PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"314 PARADA Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"B1L9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUGENIO F.A APT. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"19 B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FV 6 Parada Valenzuela City"},{"Raw Address":"068A PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"242 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-D. CALLE ONSE CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"390S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"90 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"175 A MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET BLK4 LOT5 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 PETRA ST. Parada Valenzuela City"},{"Raw Address":"211 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"036 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"394 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"219 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"377 18 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"15 PARADA ST Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0013 TEMPO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"437 FV7 Parada Valenzuela City"},{"Raw Address":"5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 2 LOT 19 GINTONG Parada Valenzuela City"},{"Raw Address":"39 PARADA Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"68 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"B3 Parada Valenzuela City"},{"Raw Address":"282 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"320B S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"KM 19 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1727 B TATA ERO Parada Valenzuela City"},{"Raw Address":"245 B SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"204 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"187 B FELIZA STREET Parada Valenzuela City"},{"Raw Address":"144 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"345 CAPT FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"144 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"257 S DEGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"PARADA RD. Parada Valenzuela City"},{"Raw Address":"185-D FELIZA STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4781 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE ST. Parada Valenzuela City"},{"Raw Address":"200 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET E.N.E COMPOUND Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CPD. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"449 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"CORNER SAPPHIRE ST. HIYAS SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR Parada Valenzuela City"},{"Raw Address":"7 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"216 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FELISA ST. Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"367 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"SISCARA APT ADOR ST Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B5 L1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"168 21 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG BO. PARADA Valenzuela City"},{"Raw Address":"227 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"182 Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. SAPHIRE Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 10 CARACTA VillageE Parada Valenzuela City"},{"Raw Address":"403 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"269 INT S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"46 P. DE GUZMAN BANDINO STREET Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"40 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0147-E DOON ST. Parada Valenzuela City"},{"Raw Address":"468 - O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"260 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 7 199 BENMARIE COMP. 21 ST. Parada Valenzuela City"},{"Raw Address":"180 FELISA ST. Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"#118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FV5 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"315 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"468 Q KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 BF. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"1882 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CARREON COMPD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"240 7 STREET Parada Valenzuela City"},{"Raw Address":"202A 22 STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FV 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"141 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"252-A LOT 2 BLOCK 2 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"2157 BORNALES CPD.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#94 Parada Valenzuela City"},{"Raw Address":"036 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"313 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN COR TATA ERO Parada Valenzuela City"},{"Raw Address":"161 FELIZA Parada Valenzuela City"},{"Raw Address":"443 ROSELLA ST. Parada Valenzuela City"},{"Raw Address":"130 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"0290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B1 L6 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"1 PARADA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN COR. MARY ANN THIS WAY ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN BARRIO Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"032 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283-D DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"33 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. ST. FORTUNE Village Valenzuela City Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"242 Parada Valenzuela City"},{"Raw Address":"101 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ROAD Parada Valenzuela City"},{"Raw Address":"012 PARADA Valenzuela City"},{"Raw Address":"BL3LT9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village Parada Valenzuela City"},{"Raw Address":"185B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"235 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"336 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"468-E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"151 ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"177 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 UNIT KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"240 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"266 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"210 21ST COR. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"188 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"243 S. D GUZMAN ST Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"30 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"A22 T. EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"309 JEMENES COMP. Parada Valenzuela City"},{"Raw Address":"45A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"3A 144 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"DOOR 1 151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. Parada Valenzuela City"},{"Raw Address":"431-B GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"331 D TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"091FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BEN MARIE COMP. FV6 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"101 M. DE Parada Valenzuela City"},{"Raw Address":"28 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"273 Parada Valenzuela City"},{"Raw Address":"VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"470KAINGIN ST Parada Valenzuela City"},{"Raw Address":"4480 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"99 VENUST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"334 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"098D FORTUNE Village 7TH ST. Parada Valenzuela City"},{"Raw Address":"336 UNIT 2 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"4680 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"114E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0012 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4078 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"131 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"28 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"07 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"222 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"291 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"256 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK5 LOT2 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"200-C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"217 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 C DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"391 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"077 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"297-C T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"824 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"009 Parada Valenzuela City"},{"Raw Address":"308 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1253 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"PETRA ST. PARADA Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"276 E.S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"83 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE GARDENS Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"167 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"#79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"362 TATAANDRES ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE V Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK 5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 6TH ST. Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"200 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"269 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"012 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 E AND E COMPD. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"UNIT 2 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"281 PILAR STREET Parada Valenzuela City"},{"Raw Address":"209 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"269 INT. S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"071 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"200 6TH ST. Parada Valenzuela City"},{"Raw Address":"187 DE GULA COMP CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"228 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"190 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"B2 LOT10 F FRANCISCO ST. G SILANGAN Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. FOTRUNE 4 Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 13 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"Q487 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Parada Valenzuela City"},{"Raw Address":"334 #1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"35C 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"04 KAINGIN Parada Valenzuela City"},{"Raw Address":"28 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"02 157 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"184 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"414 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"1548 Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"50 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"83 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"GULA ST. Parada Valenzuela City"},{"Raw Address":"267 Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"193 AM DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"183 FELIZA Parada Valenzuela City"},{"Raw Address":"243 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"69 Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"154 FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"384 BO. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B7L1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ Parada Valenzuela City"},{"Raw Address":"291KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"0009 BLK 3 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100 DOOR 3 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"88-D CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"308 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"157-A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"158 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE STREET Parada Valenzuela City"},{"Raw Address":"113 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"139 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRV. Parada Valenzuela City"},{"Raw Address":"230 1F EMBUSCADO COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"228 B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"220 C 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZASR Parada Valenzuela City"},{"Raw Address":"B2 L4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"258 INTERIOR S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"255 SALVADOR Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"338 T. MANANG Parada Valenzuela City"},{"Raw Address":"451 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"97B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"207 PELESA BOKED Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO FV4 Parada Valenzuela City"},{"Raw Address":"239 ABELARDO Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA STREET Parada Valenzuela City"},{"Raw Address":"260B RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"152 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"4389 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE COR. 22 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"FELIZA STREET Parada Valenzuela City"},{"Raw Address":"TATAERO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"172 INTERIOR SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"1827 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"230 18TH ST Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"262 OLIVA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"3B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST.Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"9 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"255 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"130 B 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"473 KA BERONG ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"M DE GULA ST Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F FRANCISCO Parada Valenzuela City"},{"Raw Address":"296 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"271 MARTA ST Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village P. 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"#95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.` Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 A FELIZA Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"235 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT SALAZAR ST Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"22 PARADA ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"2626 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"185 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"94 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"B3 L19 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"418-A ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"186 FILISA ST Parada Valenzuela City"},{"Raw Address":"036 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"12 B- KAMAGONG ST. F. Village 6 Parada Valenzuela City"},{"Raw Address":"006 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"230 18ST Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"NO.14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"SINILANGAN Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"32 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"357 J-FRANCISCO Parada Valenzuela City"},{"Raw Address":"KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"320 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"349 F Parada Valenzuela City"},{"Raw Address":"21 BENMARIE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 20 349 FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST Parada Valenzuela City"},{"Raw Address":"283 A S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST. Parada Valenzuela City"},{"Raw Address":"10 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165-G5 ACASIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"245 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 SALAZAR Parada Valenzuela City"},{"Raw Address":"ST. 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168 FELISA ST Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"T. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"91B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"90 F. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E&E COMP Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"19 B.F SANTIAGO E&E COMP. Parada Valenzuela City"},{"Raw Address":"258 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"468-K KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"138 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"341 20TH ST Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"02 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 15 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"305 DAET COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"315 JEMINEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK10 LOT7 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKDI ST. Parada Valenzuela City"},{"Raw Address":"68 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"# 343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 10/12 LOT 12 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"094 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 4 6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"417 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"187 M DE GULA COMPOUD CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"456 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"203 FELIZA ST Parada Valenzuela City"},{"Raw Address":"233 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON CMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"351 FRANCISCO Parada Valenzuela City"},{"Raw Address":"198 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 F. SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"B4 L21 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"254 25TH Parada Valenzuela City"},{"Raw Address":"206C 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"385 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV 7 Parada Valenzuela City"},{"Raw Address":"281 PILAR FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 F. FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37 B PARADA RD. PARADA Valenzuela City"},{"Raw Address":"305 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"077 PARADA RD. EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWNHOUSE Parada Valenzuela City"},{"Raw Address":"106 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"09 R CABRAL Parada Valenzuela City"},{"Raw Address":"135 E FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"129 NARRA ST FV 6 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"# 70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"3651 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"170 Fortune Village 5 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"009 PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST Parada Valenzuela City"},{"Raw Address":"471 KA BERONG Parada Valenzuela City"},{"Raw Address":"55 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"203 6TH STREET Parada Valenzuela City"},{"Raw Address":"377 APT.5 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"208 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"50 RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPPOUND Parada Valenzuela City"},{"Raw Address":"175 A. MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 E & E COMP. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"29 PARADA ST. Parada Valenzuela City"},{"Raw Address":"275-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 FELIA ST. Parada Valenzuela City"},{"Raw Address":"#177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"193 M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"130 D 5TH STREET Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#18 PARADA RD. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 3 199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"395 E.SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 RIZALINA Fortune Village 4 ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"359 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"11 PARADA RD. Parada Valenzuela City"},{"Raw Address":"226 18TH ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"469 KAINGIN Parada Valenzuela City"},{"Raw Address":"14E FRANCISCO ST NLEX CORNER Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"160 NARRA ST Parada Valenzuela City"},{"Raw Address":"101 M. DEGULA ST. ALFONSO APARTMENT"},{"Raw Address":"249 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 CAPT.CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"193 B.M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 14 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"94 SALAZAR Parada Valenzuela City"},{"Raw Address":"31-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"177 24TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"354 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 20 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Parada Valenzuela City"},{"Raw Address":"491 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"456 E KAINGIN Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 BO. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. CORNER KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"168 DOON CMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"4698 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"239 7TH ST. FORTUNE Village 5. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 Parada Valenzuela City"},{"Raw Address":"044 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"387 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOS T. Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES PARADA Valenzuela City"},{"Raw Address":"420 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"37-A PARADA RD.PARADA Valenzuela City"},{"Raw Address":"150 ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"273 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"111E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"04 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"GP.STREET WES SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. CORNER DIAMOND Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"190 M. DEGULA STREET Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CROSS Parada Valenzuela City"},{"Raw Address":"9-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN Parada Valenzuela City"},{"Raw Address":"038 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"FELIZA BUKIT ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"444 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"131 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR STREET Parada Valenzuela City"},{"Raw Address":"ADOR Parada Valenzuela City"},{"Raw Address":"111-E LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"168 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"JEMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"039 RAMON SANTIAGO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"193 A.M DE GULA Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"L10 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"648 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"449 PARADA Valenzuela City"},{"Raw Address":"B3 L5 GINTONG SILANGAN 3497 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"145 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"130 WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"186-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"21ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#13TH 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"305 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1-G EMBUSCADO APT. 230 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"291 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE COR. OF 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA RD Parada Valenzuela City"},{"Raw Address":"391 Parada Valenzuela City"},{"Raw Address":"B4L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"469KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"4181 NARRA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CVOMPD.ST. PARADA Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"056 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"341 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 FELISA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO COMPD. Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"0406 MARTHA ST Parada Valenzuela City"},{"Raw Address":"314 MENES COMP. Parada Valenzuela City"},{"Raw Address":"B2 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"412 B P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"91 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"15 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"297 TANDAND MANANG Parada Valenzuela City"},{"Raw Address":"DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"134 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"67 PARADA RD.VAL.CITY Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"135 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"471 C KABERONG ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"185 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FELISA ST. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 9 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"24 E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"314 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"385 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"130 D. 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"FRANSISCO ST. Parada Valenzuela City"},{"Raw Address":"148 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCSISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"146 NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"268 25TH ST. Parada Valenzuela City"},{"Raw Address":"26F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DE GULA APARTMENT Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"238 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"349 E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"190- B. MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CALYE II ST. Parada Valenzuela City"},{"Raw Address":"182 UNIT G. MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"ALICIA ST. FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"395-DOOK1 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"28 EUGENIO Parada Valenzuela City"},{"Raw Address":"740 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"NO. 51 FORTUNE FIVE THIRD ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON CMP Parada Valenzuela City"},{"Raw Address":"A ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"72 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"#223 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"175 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 02 LOT 14 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLOCK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE Parada Valenzuela City"},{"Raw Address":"BLK13 LOT 27 FORTUNE DRIVE FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"2225 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"220D 21STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPD Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"17 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"216 ANTHONY Parada Valenzuela City"},{"Raw Address":"YAKAL Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"187- A FELISA ST. Parada Valenzuela City"},{"Raw Address":"39 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"317 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"412 Parada Valenzuela City"},{"Raw Address":"244 7ST. ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"443 ROSELLA PARADA Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"828 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"460P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET BEN MARIE COMPD. FORTUNE Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 RD. Parada Valenzuela City"},{"Raw Address":"361 J-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"039 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"435 C. ZAMORA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 C.P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"40 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"214 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"94 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"FATIMA CMPD. PARADA Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"331-A TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"310 MENEZ COMP Parada Valenzuela City"},{"Raw Address":"181 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"339 21ST Parada Valenzuela City"},{"Raw Address":"01-31 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"140 E Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE SIX Parada Valenzuela City"},{"Raw Address":"26 NARRA ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK. 4 349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"087 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"5 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"36 G. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA S. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91-A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"170 RAMON STREET Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"188 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"FELIZA ST. Parada Valenzuela City"},{"Raw Address":"290 BO. PARADA ST. SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"138 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"BLK 1 GINTONG SILANGAN COMP. Parada Valenzuela City"},{"Raw Address":"468- KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 SATURN ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"240 7TH ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"195 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"93 PARADA RD. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS Parada Valenzuela City"},{"Raw Address":"79 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"302 Parada Valenzuela City"},{"Raw Address":"32 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"260 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"285 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"296-B T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"296-B T. MANANG Parada Valenzuela City"},{"Raw Address":"009 PARADA RD Parada Valenzuela City"},{"Raw Address":"237 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"438 PARADA Valenzuela City"},{"Raw Address":"# 488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"001 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"466B KAINGIN Parada Valenzuela City"},{"Raw Address":"320E S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 C CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"UNIT B 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 - AFELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"165-4 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO PARADA Valenzuela City"},{"Raw Address":"0006 LOT 3 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 ST. FRANCIS Parada Valenzuela City"},{"Raw Address":"411C P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 29 A. BLK 9 KAMANGONG ST. FV.6 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"057 Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"09 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 10 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"228 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"128 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"31 P. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"0118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"118 ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SKYLINE SUBD. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BO. Parada Valenzuela City"},{"Raw Address":"297 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village 4 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"22T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"B1 L5 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 M INT. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"468 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"302 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"223 ABELARDO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"470 KAINIGIN ST Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"182-23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"21ST ST. AGLEHAM COMP. Parada Valenzuela City"},{"Raw Address":"#244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"KALYE 11 BUKID Parada Valenzuela City"},{"Raw Address":"277 PILAR Parada Valenzuela City"},{"Raw Address":"279-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"259 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"143 NARRA FORTUNE VIL 6 Parada Valenzuela City"},{"Raw Address":"#257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B3L5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"306 PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"211 21ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"456 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"195 6ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"119 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B4 L17 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"17 PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 11 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"006 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"107 MOLAVE ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"106 E. LAGDAMEO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"243 PASING ST. Parada Valenzuela City"},{"Raw Address":"402 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457 INT SMC DUPLEX -D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"170B SALAZAR Parada Valenzuela City"},{"Raw Address":"135 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0118 A. U2 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"SAN ANDRES Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 A.FRANCISCO Parada Valenzuela City"},{"Raw Address":"349 F. FERNANDO ST. Parada Valenzuela City"},{"Raw Address":"378A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"095 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"114 YAKAL STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"270 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"93-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"308 APT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"34 SALVADOR Parada Valenzuela City"},{"Raw Address":"306 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"33 EARTH ST. Parada Valenzuela City"},{"Raw Address":"320 DIMAUNAHAN CMPD.PARADA Valenzuela City"},{"Raw Address":"264 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"26 Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"157-B SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"234 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"1 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"341 PARADA Valenzuela City"},{"Raw Address":"39D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"BLK 4 LT 12 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466 C. KABERONG ST. Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"9 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"TATA ERO Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. BO. PARADA Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FV 6 Parada Valenzuela City"},{"Raw Address":"114 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"395-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"109 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"157 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"386 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"320 B BS DE GUZMAN Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"255 ROMASA ST. Parada Valenzuela City"},{"Raw Address":"178 Parada Valenzuela City"},{"Raw Address":"UNIT A L17 B9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"93A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"415B TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"111-A LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SAN TIAGO Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B2 L6 BENMARIE 21ST Parada Valenzuela City"},{"Raw Address":"313 MENES COMP. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"198 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"096 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"25TH ST DULO. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"46 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"94 A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"313 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 P DE GUZMAN BANDINO ST Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93 B PARADA STREET Parada Valenzuela City"},{"Raw Address":"7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"99 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"453 B WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"268 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"122 CALYE ONSE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"286 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"002 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"417 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"240 S DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"168 FELISA ST. Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 13 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE FORTUNE5 Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L28 PARADA RD. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"468 N KAINGIN ST Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"234 7TH STREET Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7.PARADA Valenzuela City"},{"Raw Address":"235 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Parada Valenzuela City"},{"Raw Address":"31F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"202 22ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"361 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"290 ILOCT CMPD. PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0257 ES DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"310 MENES T. Parada Valenzuela City"},{"Raw Address":"132 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 TMHAI TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Village 7 Parada Valenzuela City"},{"Raw Address":"250 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 Parada Valenzuela City"},{"Raw Address":"roup Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"336 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B2 L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"159 NARRA Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"60 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 DR. M LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"265 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"237 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"MARS ST. #26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0117 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S . DE GUZMAN Parada Valenzuela City"},{"Raw Address":"462 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252A VillageA PARADA S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"omplete for the precinct. Parada Valenzuela City"},{"Raw Address":"161 Fortune Village 6 YAKAL ST.PARADA Valenzuela City"},{"Raw Address":"297-C T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87C SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"333 A KAMAGONG Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"110 FELISA ST. Parada Valenzuela City"},{"Raw Address":"1112 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"8 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"466 C KA BERONG ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. Parada Valenzuela City"},{"Raw Address":"341 21 ST. BENMARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"413 TATA ERO Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"119 A KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"028 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE 5 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"22 ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"297 C-T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"260 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"440 BO. Parada Valenzuela City"},{"Raw Address":"#68 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"555 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"338 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"225 20 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"370 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE VIL6 Parada Valenzuela City"},{"Raw Address":"289-C P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"283 S.DE GHUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"266 Parada Valenzuela City"},{"Raw Address":"J.M.T.C. LAGDAMEO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"259 RIZALINA ST. Fortune Village 4 RD. Parada Valenzuela City"},{"Raw Address":"17-C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"317 A.T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"339 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"9 31F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"410 DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 19 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"392 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"17 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"061 PARADA RD. Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"01 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"186 6 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"04 5TH ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village PH.7 Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CORNER CORAL Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"161 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS STREET Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"438 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. Fortune Village 6 182 D. Parada Valenzuela City"},{"Raw Address":"05 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"513 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"150 ALICIA Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG Parada Valenzuela City"},{"Raw Address":"L5-207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"13 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK. 13 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"FV 4 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Village Parada Valenzuela City"},{"Raw Address":"447 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGANG Parada Valenzuela City"},{"Raw Address":"#257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"100 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"141 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"451 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"F SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"454 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"294 TADANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"513 JIMENES CMPD. Parada Valenzuela City"},{"Raw Address":"77 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"2510 25 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 D. T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"244 1ST. FV 5 Parada Valenzuela City"},{"Raw Address":"248 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"290 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. FORT. 6 Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST.  Parada Valenzuela City"},{"Raw Address":"320 E. MIURA APT. S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#336 TIA MANANG Parada Valenzuela City"},{"Raw Address":"233 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"38 PARADA STREET Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village NO. 4 Parada Valenzuela City"},{"Raw Address":"407-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"009 PARADA STREET Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"B6 Parada Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"CITY MM Parada Valenzuela City"},{"Raw Address":"371-A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"300 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"179 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"230S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA CALLE ONSE Parada Valenzuela City"},{"Raw Address":"211 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#16B DOON COMP. Parada Valenzuela City"},{"Raw Address":"209 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"88 SAN MIGUEL COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET F SANTIAGO Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"254 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 FELISA Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"258-1 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG BLK 3 LOT 19 HOE Parada Valenzuela City"},{"Raw Address":"101 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village4 ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 20ST Parada Valenzuela City"},{"Raw Address":"169 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"43 CAINGIN Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"2151 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"C-378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"471C KABERONG ST Parada Valenzuela City"},{"Raw Address":"6TH ST. MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2745 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 LOT 8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"449 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"297 Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"474 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH STREET FORTUNE FIVE Village Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"101 M DEGULA ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE5/6 Village Parada Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"115 CPT CRUZ Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"89 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"035 PARADA Valenzuela City"},{"Raw Address":"EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"204 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"145 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"228-B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"834 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"247 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"240 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1EE MARS F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"414 PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO BUKID Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. BIAZON COMPOUND Parada Valenzuela City"},{"Raw Address":"863B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. SALAZAR RD. Parada Valenzuela City"},{"Raw Address":"70 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"CALLE 11 BUKID Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"0260 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"39-A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"35 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2932 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 12 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 STREET BEN MARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"SINILNGAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH & 24TH ST Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANAG ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"86 PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"295 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 BANDIDO ST. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"358-D J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT9 BLK1 SAPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"L9 GINTONG SILANG Parada Valenzuela City"},{"Raw Address":"255 E TOMASA STREET Parada Valenzuela City"},{"Raw Address":"134 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"345 F. FRANCISCO ST BO. Parada Valenzuela City"},{"Raw Address":"137 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH STREET Parada Valenzuela City"},{"Raw Address":"15 SANTIAGO Parada Valenzuela City"},{"Raw Address":"36 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"168 ACACIA Parada Valenzuela City"},{"Raw Address":"233 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"513 ABCO COMP. TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F. SANTAIGO Parada Valenzuela City"},{"Raw Address":"302 - B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"14 PARADA Valenzuela City"},{"Raw Address":"120 25TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5 KAMAGONG Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. BO.PARADA Valenzuela City"},{"Raw Address":"273 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0067 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"473 ABERONG ST Parada Valenzuela City"},{"Raw Address":"182 FELIZA Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"39 AJERO COMP. RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"03 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 DAET COMP. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"182 FELISA Parada Valenzuela City"},{"Raw Address":"169 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 SANTIAGO Parada Valenzuela City"},{"Raw Address":"152 23RD ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"609 7TH ST Parada Valenzuela City"},{"Raw Address":"36 G. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"457 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"208 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"58 A. Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"138 ELAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"366 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA Parada Valenzuela City"},{"Raw Address":"11-A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"136 D NARA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 JADE ST.CORNER SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"253 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA FORTUNE V5 Parada Valenzuela City"},{"Raw Address":"525 EUGENIO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"151 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"10 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"267 CORNER 19TH AND 24TH ST FORTUNE Parada Valenzuela City"},{"Raw Address":"4684 PEARL ST. HIYAS HOMES. Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"410-A PARADA Valenzuela City"},{"Raw Address":"21ST BELMARIE CMPD. AGLEHAM Parada Valenzuela City"},{"Raw Address":"291 KAINGIN Parada Valenzuela City"},{"Raw Address":"90 ADOR ST Parada Valenzuela City"},{"Raw Address":"269B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"KAINGIN Parada Valenzuela City"},{"Raw Address":"FELIZAS ST. BUKID 207 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"35 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"L2 B11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"004 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0250 UNIT 6 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 23RD ST. Parada Valenzuela City"},{"Raw Address":"431 FORTUNE Village 7 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"317 T.MANANANG ST. PARADA Valenzuela City"},{"Raw Address":"330 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUQUINIO ST Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"242 19TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 PARADA F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3661 KAMAGONG ST. COR. YAKAL ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"246 S Parada Valenzuela City"},{"Raw Address":"476 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"187 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"215 21ST ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169D 7ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"A 334 T. MANANG Parada Valenzuela City"},{"Raw Address":"023 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"021 EUGENIO Parada Valenzuela City"},{"Raw Address":"LOT 6 B.F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"# 95 P DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"289 - D SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"409P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"351 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"207 FELEZA BUKID Parada Valenzuela City"},{"Raw Address":"349 Parada Valenzuela City"},{"Raw Address":"150 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B-5 L-8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBDIVISION Parada Valenzuela City"},{"Raw Address":"249 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST FORTUNE VELLAGE4 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"38 D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"40 PEARL Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"073 FORTUNE Village 7 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 P. BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 AP DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 8 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"24-B EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"JADE ST. Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"200A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"265 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5. PARADA Valenzuela City"},{"Raw Address":"352 Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"SMC- DUPLEX D Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 9 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"22 LOT F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"93 D CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"B1L4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"165-G ACACIA STREET Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"202 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"123 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"431 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"241 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"320B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"324 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"UNIT2 LOT17 BLK9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"4815 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"360 J . FRANCISCO Parada Valenzuela City"},{"Raw Address":"L7A BLK8 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. B4L10 GS Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"116 B. CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"33 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"CALYE 11 ST. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. BO.Parada Valenzuela City"},{"Raw Address":"098 Fortune Village 5 DRIVE Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"E LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"244 7 Fortune Village 5 STREET Parada Valenzuela City"},{"Raw Address":"438 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"B4 L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"59 BANDINO ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"457 INT. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"94 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"148 Fortune Village 6 NARRA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"122A KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMPD. Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"09 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD.PARADA Valenzuela City"},{"Raw Address":"13 PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE STREET Parada Valenzuela City"},{"Raw Address":"B3L2 TMHOA Parada Valenzuela City"},{"Raw Address":"14 B NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST FORTUNE Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village6 PARADA Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLEHAM STREET Parada Valenzuela City"},{"Raw Address":"16-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"225 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"167 RAMON STREET Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"450 SERVICE RD Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"28 BARRIO Parada Valenzuela City"},{"Raw Address":"39 RAMON STREET Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"063 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"36 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B7 L26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"0232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"45 A. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"193 M.DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"235 T. MANANG Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 MALINTA Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"11 D EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"423 L3-B3 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"443 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"107 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"210 SALVADOR Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"137 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"391 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"218 ANTHONY FV 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"035 PARADA RD. Parada Valenzuela City"},{"Raw Address":"JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BUKID Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 NARRA ST Parada Valenzuela City"},{"Raw Address":"310 MENEZ SMPD Parada Valenzuela City"},{"Raw Address":"264 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCIS OST. Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"199 21ST STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"340 20 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"SALAZAR ST Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"027 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"19 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"438 Parada Valenzuela City"},{"Raw Address":"431 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"114 KAMAGON ST. PARADA Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"178 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORT Village 6 Parada Valenzuela City"},{"Raw Address":"422 BURGOS STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"216 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"214 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"206F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B4 L13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"128 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"389 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"312 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"294 KAINGIN Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 17 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"327 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"200-B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"320 UNIT 2 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"6ST. COR. KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"199 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"71 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"138 A NARRA ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR ST. Parada Valenzuela City"},{"Raw Address":"B5 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"131 KAMAGONG Parada Valenzuela City"},{"Raw Address":"#362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"400-A ILOCTO ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#281 PILAR ST. FV 4 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"339 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APT. 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"KM.14 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"098 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. Parada Valenzuela City"},{"Raw Address":"1 DR.MARIANO LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"088 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"329 T. MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"185 FELISA ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMP. Parada Valenzuela City"},{"Raw Address":"ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"127 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"095 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA Parada Valenzuela City"},{"Raw Address":"61 PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"144 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FATIMA COMPD. BARRIO Parada Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"10TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"37 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"177 MOLAVE ST. 6TH ST. FORTUN 5 Parada Valenzuela City"},{"Raw Address":"TATAERRO ST. Parada Valenzuela City"},{"Raw Address":"92 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"417 TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"72 PARADA RD. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"164 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"157 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA Valenzuela City"},{"Raw Address":"289-D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 6 VillageParada Valenzuela City"},{"Raw Address":"438 SILENCE RD. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BO.PARADA Valenzuela City"},{"Raw Address":"409 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FATIMA COMP Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"438 PARADA FORTUNE Village7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"04 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO VENUS ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ROMAN ST. FORTUNE Village 4. Parada Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"198 COR. & 21ST. 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST.F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 3 BLK 7 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"333 KAMAGONG ST FV 5 & 6 Parada Valenzuela City"},{"Raw Address":"#287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"317 MENEZ CMPD Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 10 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"LOT 10 FORTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1548 E PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"198 RAMON STREE FV4 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMP. FV4 Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"202 FILISA ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"348 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"308 JIMENEZ Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"204B F.SANTIAGO STR. Parada Valenzuela City"},{"Raw Address":"31 B.O Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 5 NARRA ST. Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN TS. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"96 Parada Valenzuela City"},{"Raw Address":"2039 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"1164 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 C. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"2311 8TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 KANMAGONG ST. FV5 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"185 FELIZA Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD.PARADA Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 FELISA Parada Valenzuela City"},{"Raw Address":"CALE ONSE Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"69 PARADA RD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"175-A MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"JADE ST. JADE HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#5 IPIL ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"448 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"116 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"181- RAMON ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCIS ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN Parada Valenzuela City"},{"Raw Address":"255 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"310 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257-B M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"Q4-176 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"316 MENES COMP. Parada Valenzuela City"},{"Raw Address":"108 COR. YAKAL AND KAMAGONG ST FORTUNE Parada Valenzuela City"},{"Raw Address":"469 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"(Member) Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"039 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"303 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"41 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"211 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TATA ERO P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"69 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B2 LOT 14 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK. 3 LOT 1 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLIA APARTMENT Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"19 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"162 E SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"244 19TH STREET FORTUNE V Village Parada Valenzuela City"},{"Raw Address":"F SANTIAGO Parada Valenzuela City"},{"Raw Address":"TATA ANDRES Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"316 JEMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"108 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"419 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 A. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 PARADA Valenzuela City"},{"Raw Address":"001 INTER ISLAND FEEDS PARADA Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 5TM HOA TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L4 B10 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ACACIA CORNER MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0004 JADE ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. CAPT CRUZ. ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. DULO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"#384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"001 BO Parada Valenzuela City"},{"Raw Address":"B2 L 1O GINTONG SILANGAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"137 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"270 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"32 PARADA RD. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"442 FORTUNE Village 7. Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"13 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"087 PARADA Valenzuela City"},{"Raw Address":"25 ST. FORTUNE VLL. 5 PARADA Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 2 LOT 9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"33 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"391 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. FORTUNE Village4 Valenzuela City Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"ILOCTO CMPD. PARADA Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"367 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"264 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"42 PARADA RD Parada Valenzuela City"},{"Raw Address":"201 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. UNIT 12 Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"169 ACACIA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 2 BLOCK 10 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L4 B10 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"112 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"349F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"26 F Parada Valenzuela City"},{"Raw Address":"89 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"232 Parada Valenzuela City"},{"Raw Address":"349 A. FRANCISCO Parada Valenzuela City"},{"Raw Address":"L-11 BLK-2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"2427 7TH ST. Parada Valenzuela City"},{"Raw Address":"377 I8ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK3 LOT2 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"2646 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"129 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST. PARADA Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11-C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST PARADA Valenzuela City"},{"Raw Address":"343 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE AGLIHAM COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"39 RAMON ST . PARADA Valenzuela City"},{"Raw Address":"199 6ST Parada Valenzuela City"},{"Raw Address":"871 FELIZA ST Parada Valenzuela City"},{"Raw Address":"187 MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"424 A.BURGOS ST. Parada Valenzuela City"},{"Raw Address":"OLIVA COR. RAMON ST. Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"185 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"94 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA RD Parada Valenzuela City"},{"Raw Address":"#8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0411 AP DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO RD. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE PARADA Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"562 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"8 VENANCIO INT. RD. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"272 PILLAR STREET Parada Valenzuela City"},{"Raw Address":"118 1ST ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"140 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"239 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK 2 PARADA ROAD EXT. FORTUNE Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 F. CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"236 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR Parada Valenzuela City"},{"Raw Address":"99 UNI STAR F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"36 Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. BO. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD/ Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST.. PARADA Valenzuela City"},{"Raw Address":"224 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"57 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 6 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"456-K KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"14 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"12 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22ND ST. 207 FORTUEN 5 Village Parada Valenzuela City"},{"Raw Address":"12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"4488 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"273 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"29 Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO Parada Valenzuela City"},{"Raw Address":"Village Parada Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"299 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"L9 B1 HIYAS Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK. 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"458 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"209 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"11 RD. PARADA ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"186 D. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"187-A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA Parada Valenzuela City"},{"Raw Address":"339 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"456-D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"308 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"224 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"243 7ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"299 JIMENES Parada Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"326 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"220-A 21ST STREET Parada Valenzuela City"},{"Raw Address":"308 T MANANG Parada Valenzuela City"},{"Raw Address":"11C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"417 TATA ERO Parada Valenzuela City"},{"Raw Address":"145 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"154 C. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"27 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"109 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"457 E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B5L8 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST/ Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"162 SALAZAR Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. Parada Valenzuela City"},{"Raw Address":"290 A.SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"87 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"124-B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 7 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. P.SANTIAGO Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"# 39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"DOOR F SANTOS TOWNHOUSE P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"261 A 25TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERO Parada Valenzuela City"},{"Raw Address":"61 MARS ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"A. TATAERO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"185- C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"94 PARADA Valenzuela City"},{"Raw Address":"002 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"3200 DIMAUNAHAN CMPD PARADA Valenzuela City"},{"Raw Address":"269 SDEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"225 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"147 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"390 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village V Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"278 PILAR ST FORTUNE VLL.4 Parada Valenzuela City"},{"Raw Address":"345 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"322 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"143 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36 T. ANDRES ST. VAL. MM Parada Valenzuela City"},{"Raw Address":"#002 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"18 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"252 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"365 Parada Valenzuela City"},{"Raw Address":"117-B CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"468 N. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"194 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"135 YAKAL CORNER NARRA STREET Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"420 ZAMORA STREET FV7 Parada Valenzuela City"},{"Raw Address":"101 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"165-G5 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"182 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"067 FURTUNE 6 Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"44B SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"1727B-TATAERO Parada Valenzuela City"},{"Raw Address":"244 7TH ST. PARADA Valenzuela City"},{"Raw Address":"187 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"30 PARADA RD Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FV 4 Parada Valenzuela City"},{"Raw Address":"#223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"342 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"2345 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"415 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"VENUS STREET 207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"B2L23 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"039 PARADA RD. Parada Valenzuela City"},{"Raw Address":"67B. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"314 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"246 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"216 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"187-B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"264 25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"ROOM G 260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"250 25 ST. FORTUNE DRIVE Village. 5&6 Parada Valenzuela City"},{"Raw Address":"45 AF SANTIAGO Parada Valenzuela City"},{"Raw Address":"B3 L22 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"TELIZA BUKID Parada Valenzuela City"},{"Raw Address":"113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"7 F.SANTIAGO PARADA Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 15 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"L6 Parada Valenzuela City"},{"Raw Address":"BLK 11 LOT 24 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"243 PASING Parada Valenzuela City"},{"Raw Address":"# 80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"20 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"240 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"206 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"311 PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"23 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO Parada Valenzuela City"},{"Raw Address":"165 SALAZAR Parada Valenzuela City"},{"Raw Address":"341 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"13 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"245 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"174 FELISA ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENIZ COMPOUND Parada Valenzuela City"},{"Raw Address":"123 CAPT. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"3-B F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"314 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"26 F SANTIAGO PARADA V.C Parada Valenzuela City"},{"Raw Address":"456 B. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"385 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"427 A BURGOS Parada Valenzuela City"},{"Raw Address":"17 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"Q5-151 SAPPHIRE ST. HIYAS SUBD. WEST Parada Valenzuela City"},{"Raw Address":"190 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"158 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39 RAMOS ST. Parada Valenzuela City"},{"Raw Address":"316 BO JIMENEZ Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"21 ST AGLEHAM COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"073 PARADA RD EXT. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 B. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"F FRANCISCO Parada Valenzuela City"},{"Raw Address":"45 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"5-5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237-19 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE Parada Valenzuela City"},{"Raw Address":"241 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 BO. PARADA Valenzuela City"},{"Raw Address":"470 A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"199 BENMARY 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FV6 Parada Valenzuela City"},{"Raw Address":"198 COR 19TH & 21TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"276 UNIT A Parada Valenzuela City"},{"Raw Address":"24TH ST. 266 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"36 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"96 FELIZA Parada Valenzuela City"},{"Raw Address":"52 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"273 S- DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT11 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"093 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"187 24TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"192 M. DEGULA Parada Valenzuela City"},{"Raw Address":"DOON COMPD. 168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA SR. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG Parada Valenzuela City"},{"Raw Address":"185 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24 ST. FORTUNE V-5 Parada Valenzuela City"},{"Raw Address":"113 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"COR. 23 RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"1 PARADA RD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD Parada Valenzuela City"},{"Raw Address":"419 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"412 C. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"271 MARTHA Parada Valenzuela City"},{"Raw Address":"241 7 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L9 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"5TH ST Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 P. SANTIAGO Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"175 MOLAVE Parada Valenzuela City"},{"Raw Address":"225 A. BELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"78 B PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"136 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"187 PARADA STREET Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD DULO Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"2 ACACIA COR. YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"102 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L49 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS Parada Valenzuela City"},{"Raw Address":"356 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"258 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO Parada Valenzuela City"},{"Raw Address":"503 TINDALO ST. ABCO COMPD. Parada Valenzuela City"},{"Raw Address":"230 EMBUSADO S. DE GUZMAN ST.Parada Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0320 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 2 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SSALAZAR ST. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"29A KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"27A PARADA RD Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"258 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"SISCAR APT. Parada Valenzuela City"},{"Raw Address":"260 A. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. PARADA Valenzuela City"},{"Raw Address":"214 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1 E&E MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"188 PARADA Valenzuela City"},{"Raw Address":"1618 PARAFORT M. DELOS REYES Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"147 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"071 Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"2 TINDALO STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"214 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"39 C PARADA RD VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"446 RUMARAO COPMD. PARADA Valenzuela City"},{"Raw Address":"157 A. LITICIA ST. FV 4 Parada Valenzuela City"},{"Raw Address":"175 RAMON STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"76 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"440 ROMARAW COMPOUND Parada Valenzuela City"},{"Raw Address":"204 B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 MARTA STREET Parada Valenzuela City"},{"Raw Address":"039 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"08 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"215 21ST. FORTUNE VillageS 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"24E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"PARADA RD. ST. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"241 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"241 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"26 F. MARS ST. Parada Valenzuela City"},{"Raw Address":"405 P.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 Fortune Village 5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"24 EUGENIO COMP. Parada Valenzuela City"},{"Raw Address":"45 ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA Parada Valenzuela City"},{"Raw Address":"210 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#26 MARS ST. Parada Valenzuela City"},{"Raw Address":"312 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"2411 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"028 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"036-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPD. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"24 VENUS ST. Parada Valenzuela City"},{"Raw Address":"203 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMP. 21ST ST. FV5 Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 19 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"064 PARADA RD Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE Village Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"36 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"APT.14 RIVERA CMPD. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOND Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"22 A. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"167 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"267 PETER ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST.PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0147 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"68 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"513 TINDALO Parada Valenzuela City"},{"Raw Address":"413 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"B3 L11 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"21 ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD Parada Valenzuela City"},{"Raw Address":"198 CORNER 19TH &21ST STS. Parada Valenzuela City"},{"Raw Address":"#39 K. RAMON ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"#22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"188 DE GULA COPD Parada Valenzuela City"},{"Raw Address":"39 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 PARADA ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"995 SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"266 B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 ADOR ST. Parada Valenzuela City"},{"Raw Address":"PUROK 6 207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"126 B CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"668 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLOCK 13 C LOT 8 7TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST FV7 Parada Valenzuela City"},{"Raw Address":"3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"M.M. Parada Valenzuela City"},{"Raw Address":"416 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST.DE GULA CMPD. Parada Valenzuela City"},{"Raw Address":"BLK3 LOT 2 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0320 UNIT 8 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"6 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"96 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"C. CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"369 A TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 PARADA RD. FORTUNE VillageS Parada Valenzuela City"},{"Raw Address":"121 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"73 SAINT MARYS DULO Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"357 J/ FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"384 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"116 CALLEONCE Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"B4 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"469 PARADA ST KAINGIN Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"245 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"273 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"471 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"186 6TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"RUMARAO COMP. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"130 Parada Valenzuela City"},{"Raw Address":"BLOCK 2 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"72 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"133 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B2L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"229 18TH STREET Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"2451 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR. ST. Parada Valenzuela City"},{"Raw Address":"235 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"249 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"328 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"82 RAMON ST. SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"145 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"348 CAPT. F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE Parada Valenzuela City"},{"Raw Address":"091 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"166 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"336 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"24 VENUS E&E COMPD.1 SANTIAGO Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"7 GSR SATIAGO ST. Parada Valenzuela City"},{"Raw Address":"190 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"350 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"0089 B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L41 B10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"888 NARRA ST. Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CMPD. PARADA Valenzuela City"},{"Raw Address":"141 DALAWIN ST. PARADA Valenzuela City"},{"Raw Address":"11 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"382 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"447 FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"31 Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST. FV5 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 13 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"56 FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"251 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"254 A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"23RD ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"#17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ADOR ST Parada Valenzuela City"}]'),Kv=({children:t})=>$.jsxs("div",{className:"layout",children:[$.jsx(NL,{}),$.jsx("div",{className:"content",children:t})]}),pEe=t=>fEe.some(e=>e["Raw Address"].toLowerCase().includes(t.toLowerCase())),mEe=()=>{const[t,e]=le.useState([]),[a,r]=le.useState(""),[i,l]=le.useState(1),[c,n]=le.useState([]),[v,R]=le.useState(""),[x,N]=le.useState(1),[L,F]=le.useState({registered:0,pending:0,rejected:0,total:0}),[j,H]=le.useState(null),[q,W]=le.useState([]),[ee,oe]=le.useState(""),[fe,se]=le.useState(null),me=5;le.useEffect(()=>{ge(),Re(),we()},[]);const ge=async()=>{try{const Se=(await rs(Hn(Er,"approved_users"))).docs.map(Te=>({uid:Te.id,...Te.data()}));e(Se)}catch(Ge){console.error("Error fetching registered users:",Ge)}},Re=async()=>{try{const Se=(await rs(Hn(Er,"pending_users"))).docs.map(Te=>({uid:Te.id,...Te.data()}));n(Se)}catch(Ge){console.error("Error fetching pending users:",Ge)}},we=async()=>{try{const Ge=await rs(Hn(Er,"admins")),Se=new Map;Ge.docs.forEach(st=>{var He;const ht=st.data();Se.set(ht.uid,{name:ht.name,role:((He=ht.roles)==null?void 0:He[0])||"Admin"})});const qe=(await rs(Hn(Er,"user_reports"))).docs.map(st=>{var Ae,zt;const ht=st.data(),He=Se.get(ht.reportedBy);return{id:st.id,...ht,reportedByName:He?`${He.name} (${He.role})`:"Unknown Admin",timestamp:(Ae=ht.createdAt)!=null&&Ae.toDate?ht.createdAt.toDate():new Date(((zt=ht.createdAt)==null?void 0:zt.seconds)*1e3),violationType:ht.violationType||"Not Specified",details:ht.details||"No details provided"}}),Ze=[...new Set(qe.map(st=>st.userId))],lt=await Promise.all(Ze.map(async st=>{const He=(await Xf(Ss(Er,"approved_users",st))).data(),Ae=qe.filter(zt=>zt.userId===st);return{uid:st,...He,reports:Ae.map(zt=>({...zt,reportedBy:zt.reportedByName,timestamp:zt.timestamp,violationType:zt.violationType,details:zt.details})),isBanned:(He==null?void 0:He.isBanned)||!1}}));W(lt)}catch(Ge){console.error("Error fetching flagged users:",Ge)}},Ee=async(Ge,Se)=>{try{const Te=Ss(Er,"pending_users",Ge),Ze=(await Xf(Te)).data();if(Se==="approve"){const lt=pEe(Ze.address);if(!lt&&!window.confirm("This address is not in the validated list. Are you sure you want to approve this user?"))return;await x_(Hn(Er,"approved_users"),{...Ze,status:"approved",approvedAt:new Date,addressValidated:lt}),await PL(Te)}else Se==="reject"&&await Ad(Te,{status:"rejected",rejectedAt:new Date});ge(),Re()}catch(Te){console.error("Error processing user action:",Te)}},ae=async(Ge,Se)=>{try{const Te=Ss(Er,"approved_users",Ge);await Ad(Te,{isBanned:Se,bannedAt:Se?new Date:null}),await x_(Hn(Er,"user_notifications"),{userId:Ge,type:Se?"account_banned":"account_unbanned",title:Se?"Account Banned":"Account Reinstated",message:Se?"Your account has been banned due to violations.":"Your account has been reinstated.",createdAt:new Date,isRead:!1}),we(),ge()}catch(Te){console.error("Error updating user ban status:",Te)}},_e=Ge=>{se({userName:`${Ge.first_name} ${Ge.middle_name} ${Ge.surname}`,reports:Ge.reports.map(Se=>{var qe,Ze;const Te=Se.timestamp instanceof Date?Se.timestamp:(qe=Se.timestamp)!=null&&qe.toDate?Se.timestamp.toDate():new Date(((Ze=Se.timestamp)==null?void 0:Ze.seconds)*1e3);return{...Se,timestamp:Te}})})},Ie=()=>{se(null)},xe=le.useMemo(()=>t.filter(Ge=>`${Ge.first_name} ${Ge.middle_name} ${Ge.surname} ${Ge.email}`.toLowerCase().includes(a.toLowerCase())),[t,a]),ze=Math.ceil(xe.length/me),Me=le.useMemo(()=>{const Ge=(i-1)*me;return xe.slice(Ge,Ge+me)},[xe,i]),je=le.useMemo(()=>c.filter(Ge=>`${Ge.first_name} ${Ge.middle_name} ${Ge.surname} ${Ge.email}`.toLowerCase().includes(v.toLowerCase())),[c,v]);le.useEffect(()=>{(()=>{F({registered:t.length,pending:c.length,rejected:c.filter(Se=>Se.status==="rejected").length,total:t.length+c.length})})()},[t,c]);const Ue=({status:Ge,addressValidated:Se})=>Ge==="approved"?$.jsxs("div",{className:"status-container",children:[$.jsx(XU,{className:"status-icon approved",title:"Approved"}),Se===!1&&$.jsx("span",{className:"warning-text",title:"Address not in validated list",children:""})]}):Ge==="pending"?$.jsx(zfe,{className:"status-icon pending",title:"Pending"}):null,Qe=Ge=>{H(Ge)},ke=()=>{H(null)};return $.jsxs(Kv,{children:[$.jsx(oA,{title:"User Management"}),j&&$.jsx("div",{className:"image-modal",onClick:ke,children:$.jsx("img",{src:j,alt:"Profile",className:"modal-image",onClick:Ge=>Ge.stopPropagation()})}),fe&&$.jsx("div",{className:"modal-overlay",onClick:Ie,children:$.jsxs("div",{className:"modal-content reports-modal",onClick:Ge=>Ge.stopPropagation(),children:[$.jsxs("h3",{children:["Reports for ",fe.userName]}),$.jsx("div",{className:"reports-list",children:fe.reports.map((Ge,Se)=>$.jsxs("div",{className:"report-item",children:[$.jsx("p",{className:"report-date",children:qi(Ge.timestamp).isValid()?qi(Ge.timestamp).format("MMM D, YYYY HH:mm"):"Date not available"}),$.jsxs("p",{className:"report-violation",children:[$.jsx("strong",{children:"Violation Type:"})," ",Ge.violationType]}),$.jsxs("p",{className:"report-details",children:[$.jsx("strong",{children:"Details:"})," ",Ge.details]}),$.jsxs("p",{className:"report-status",children:[$.jsx("strong",{children:"Status:"})," ",Ge.status]}),$.jsxs("p",{className:"report-reporter",children:[$.jsx("strong",{children:"Reported by:"})," ",Ge.reportedBy]})]},Se))}),$.jsx("button",{className:"close-btn",onClick:Ie,children:"Close"})]})}),$.jsxs("div",{className:"user-management",children:[$.jsxs("div",{className:"stats-container",children:[$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Registered Users"}),$.jsx("p",{children:L.registered})]}),$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Pending Users"}),$.jsx("p",{children:L.pending})]}),$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Rejected Users"}),$.jsx("p",{children:L.rejected})]}),$.jsxs("div",{className:"stat-card total",children:[$.jsx("h3",{children:"Total Users"}),$.jsx("p",{children:L.total})]})]}),$.jsxs("div",{className:"section",children:[$.jsx("h2",{children:"Pending Users"}),$.jsx("input",{type:"text",placeholder:" Search pending users...",value:v,onChange:Ge=>R(Ge.target.value),className:"search-box"}),je.length===0?$.jsx("p",{children:"No pending users found."}):$.jsx("div",{className:"user-list",children:$.jsxs("table",{children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Status"}),$.jsx("th",{className:"profile-column",children:"Profile Photo"}),$.jsx("th",{children:"Name"}),$.jsx("th",{children:"Email"}),$.jsx("th",{children:"Address"}),$.jsx("th",{children:"Actions"})]})}),$.jsx("tbody",{children:je.map(Ge=>$.jsxs("tr",{children:[$.jsx("td",{children:$.jsx(Ue,{status:Ge.status,addressValidated:Ge.addressValidated})}),$.jsx("td",{className:"profile-column",children:Ge.profile_photo_url?$.jsx("img",{src:Ge.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Qe(Ge.profile_photo_url)}):$.jsx("div",{className:"no-photo",children:"No Photo"})}),$.jsx("td",{children:`${Ge.first_name} ${Ge.middle_name} ${Ge.surname}`}),$.jsx("td",{children:Ge.email}),$.jsx("td",{children:Ge.address}),$.jsxs("td",{className:"action-buttons",children:[$.jsxs("button",{onClick:()=>Ee(Ge.uid,"approve"),className:"approve-btn",children:[$.jsx(XU,{})," Approve"]}),$.jsxs("button",{onClick:()=>Ee(Ge.uid,"reject"),className:"reject-btn",children:[$.jsx(hX,{})," Reject"]})]})]},Ge.uid))})]})})]}),$.jsxs("div",{className:"section",children:[$.jsx("h2",{children:"Flagged Users"}),$.jsx("input",{type:"text",placeholder:" Search flagged users...",value:ee,onChange:Ge=>oe(Ge.target.value),className:"search-box"}),q.length===0?$.jsx("p",{children:"No flagged users found."}):$.jsx("div",{className:"user-list",children:$.jsxs("table",{children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Status"}),$.jsx("th",{className:"profile-column",children:"Profile Photo"}),$.jsx("th",{children:"Name"}),$.jsx("th",{children:"Email"}),$.jsx("th",{children:"Reports"}),$.jsx("th",{children:"Actions"})]})}),$.jsx("tbody",{children:q.filter(Ge=>`${Ge.first_name} ${Ge.middle_name} ${Ge.surname} ${Ge.email}`.toLowerCase().includes(ee.toLowerCase())).map(Ge=>$.jsxs("tr",{children:[$.jsx("td",{children:Ge.isBanned?$.jsx("span",{className:"banned-badge",children:"Banned"}):$.jsx("span",{className:"flagged-badge",children:"Flagged"})}),$.jsx("td",{className:"profile-column",children:Ge.profile_photo_url?$.jsx("img",{src:Ge.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Qe(Ge.profile_photo_url)}):$.jsx("div",{className:"no-photo",children:"No Photo"})}),$.jsx("td",{children:`${Ge.first_name} ${Ge.middle_name} ${Ge.surname}`}),$.jsx("td",{children:Ge.email}),$.jsx("td",{children:$.jsxs("button",{className:"view-reports-btn",onClick:()=>_e(Ge),children:["View Reports (",Ge.reports.length,")"]})}),$.jsx("td",{children:$.jsx("button",{className:Ge.isBanned?"unban-btn":"ban-btn",onClick:()=>ae(Ge.uid,!Ge.isBanned),children:Ge.isBanned?"Unban User":"Ban User"})})]},Ge.uid))})]})})]}),$.jsxs("div",{className:"section",children:[$.jsx("h2",{children:"Registered Users"}),$.jsx("input",{type:"text",placeholder:" Search registered users...",value:a,onChange:Ge=>r(Ge.target.value),className:"search-box"}),xe.length===0?$.jsx("p",{children:"No registered users found."}):$.jsxs("div",{className:"user-list",children:[$.jsxs("table",{children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Status"}),$.jsx("th",{className:"profile-column",children:"Profile Photo"}),$.jsx("th",{children:"Name"}),$.jsx("th",{children:"Email"}),$.jsx("th",{children:"Address"})]})}),$.jsx("tbody",{children:Me.map(Ge=>$.jsxs("tr",{children:[$.jsx("td",{children:$.jsx(Ue,{status:Ge.status,addressValidated:Ge.addressValidated})}),$.jsx("td",{className:"profile-column",children:Ge.profile_photo_url?$.jsx("img",{src:Ge.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Qe(Ge.profile_photo_url)}):$.jsx("div",{className:"no-photo",children:"No Photo"})}),$.jsx("td",{children:`${Ge.first_name} ${Ge.middle_name} ${Ge.surname}`}),$.jsx("td",{children:Ge.email}),$.jsx("td",{children:Ge.address})]},Ge.uid))})]}),$.jsxs("div",{className:"pagination",children:[$.jsx("button",{disabled:i===1,onClick:()=>l(i-1),children:"Previous"}),Array.from({length:ze},(Ge,Se)=>$.jsx("button",{className:i===Se+1?"active":"",onClick:()=>l(Se+1),children:Se+1},Se)),$.jsx("button",{disabled:i===ze,onClick:()=>l(i+1),children:"Next"})]})]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee="firebasestorage.googleapis.com",qee="storageBucket",gEe=2*60*1e3,yEe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends Km{constructor(e,a,r=0){super(U5(e),`Firebase Storage: ${a} (${U5(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ol.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return U5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nl;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nl||(Nl={}));function U5(t){return"storage/"+t}function z4(){const t="An unknown error occurred, please check the error payload for server response.";return new Ol(Nl.UNKNOWN,t)}function AEe(t){return new Ol(Nl.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function vEe(t){return new Ol(Nl.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _Ee(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ol(Nl.UNAUTHENTICATED,t)}function wEe(){return new Ol(Nl.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function REe(t){return new Ol(Nl.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TEe(){return new Ol(Nl.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function CEe(){return new Ol(Nl.CANCELED,"User canceled the upload/download.")}function SEe(t){return new Ol(Nl.INVALID_URL,"Invalid URL '"+t+"'.")}function bEe(t){return new Ol(Nl.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function xEe(){return new Ol(Nl.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qee+"' property when initializing the app?")}function PEe(){return new Ol(Nl.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function EEe(){return new Ol(Nl.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NEe(t){return new Ol(Nl.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function FI(t){return new Ol(Nl.INVALID_ARGUMENT,t)}function Hee(){return new Ol(Nl.APP_DELETED,"The Firebase app was deleted.")}function OEe(t){return new Ol(Nl.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ER(t,e){return new Ol(Nl.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ww(t){throw new Ol(Nl.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,a){this.bucket=e,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,a){let r;try{r=yf.makeFromUrl(e,a)}catch{return new yf(e,"")}if(r.path==="")return r;throw bEe(e)}static makeFromUrl(e,a){let r=null;const i="([A-Za-z0-9.\\-_]+)";function l(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}const c="(/(.*))?$",n=new RegExp("^gs://"+i+c,"i"),v={bucket:1,path:3};function R(fe){fe.path_=decodeURIComponent(fe.path)}const x="v[A-Za-z0-9_]+",N=a.replace(/[.]/g,"\\."),L="(/([^?#]*).*)?$",F=new RegExp(`^https?://${N}/${x}/b/${i}/o${L}`,"i"),j={bucket:1,path:3},H=a===Zee?"(?:storage.googleapis.com|storage.cloud.google.com)":a,q="([^?#]*)",W=new RegExp(`^https?://${H}/${i}/${q}`,"i"),oe=[{regex:n,indices:v,postModify:l},{regex:F,indices:j,postModify:R},{regex:W,indices:{bucket:1,path:2},postModify:R}];for(let fe=0;fe<oe.length;fe++){const se=oe[fe],me=se.regex.exec(e);if(me){const ge=me[se.indices.bucket];let Re=me[se.indices.path];Re||(Re=""),r=new yf(ge,Re),se.postModify(r);break}}if(r==null)throw SEe(e);return r}}class VEe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zEe(t,e,a){let r=1,i=null,l=null,c=!1,n=0;function v(){return n===2}let R=!1;function x(...q){R||(R=!0,e.apply(null,q))}function N(q){i=setTimeout(()=>{i=null,t(F,v())},q)}function L(){l&&clearTimeout(l)}function F(q,...W){if(R){L();return}if(q){L(),x.call(null,q,...W);return}if(v()||c){L(),x.call(null,q,...W);return}r<64&&(r*=2);let oe;n===1?(n=2,oe=0):oe=(r+Math.random())*1e3,N(oe)}let j=!1;function H(q){j||(j=!0,L(),!R&&(i!==null?(q||(n=2),clearTimeout(i),N(0)):q||(n=1)))}return N(0),l=setTimeout(()=>{c=!0,H(!0)},a),H}function DEe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MEe(t){return t!==void 0}function IEe(t){return typeof t=="object"&&!Array.isArray(t)}function D4(t){return typeof t=="string"||t instanceof String}function aq(t){return M4()&&t instanceof Blob}function M4(){return typeof Blob<"u"&&!Qie()}function rq(t,e,a,r){if(r<e)throw FI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>a)throw FI(`Invalid value for '${t}'. Expected ${a} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e,a){let r=e;return a==null&&(r=`https://${e}`),`${a}://${r}/v0${t}`}function $ee(t){const e=encodeURIComponent;let a="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);a=a+i+"&"}return a=a.slice(0,-1),a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rv;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rv||(Rv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LEe(t,e){const a=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return a||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FEe{constructor(e,a,r,i,l,c,n,v,R,x,N,L=!0){this.url_=e,this.method_=a,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=n,this.errorCallback_=v,this.timeout_=R,this.progressCallback_=x,this.connectionFactory_=N,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,j)=>{this.resolve_=F,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new tb(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=n=>{const v=n.loaded,R=n.lengthComputable?n.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,R)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const n=l.getErrorCode()===Rv.NO_ERROR,v=l.getStatus();if(!n||LEe(v,this.additionalRetryCodes_)&&this.retry){const x=l.getErrorCode()===Rv.ABORT;r(!1,new tb(!1,null,x));return}const R=this.successCodes_.indexOf(v)!==-1;r(!0,new tb(R,l))})},a=(r,i)=>{const l=this.resolve_,c=this.reject_,n=i.connection;if(i.wasSuccessCode)try{const v=this.callback_(n,n.getResponse());MEe(v)?l(v):l()}catch(v){c(v)}else if(n!==null){const v=z4();v.serverResponse=n.getErrorText(),this.errorCallback_?c(this.errorCallback_(n,v)):c(v)}else if(i.canceled){const v=this.appDelete_?Hee():CEe();c(v)}else{const v=TEe();c(v)}};this.canceled_?a(!1,new tb(!1,null,!0)):this.backoffId_=zEe(e,a,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DEe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tb{constructor(e,a,r){this.wasSuccessCode=e,this.connection=a,this.canceled=!!r}}function kEe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function UEe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BEe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jEe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GEe(t,e,a,r,i,l,c=!0){const n=$ee(t.urlParams),v=t.url+n,R=Object.assign({},t.headers);return BEe(R,e),kEe(R,a),UEe(R,l),jEe(R,r),new FEe(v,t.method,R,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZEe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qEe(...t){const e=ZEe();if(e!==void 0){const a=new e;for(let r=0;r<t.length;r++)a.append(t[r]);return a.getBlob()}else{if(M4())return new Blob(t);throw new Ol(Nl.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HEe(t,e,a){return t.webkitSlice?t.webkitSlice(e,a):t.mozSlice?t.mozSlice(e,a):t.slice?t.slice(e,a):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ee(t){if(typeof atob>"u")throw NEe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class B5{constructor(e,a){this.data=e,this.contentType=a||null}}function KEe(t,e){switch(t){case Dm.RAW:return new B5(Kee(e));case Dm.BASE64:case Dm.BASE64URL:return new B5(Wee(t,e));case Dm.DATA_URL:return new B5(YEe(e),XEe(e))}throw z4()}function Kee(t){const e=[];for(let a=0;a<t.length;a++){let r=t.charCodeAt(a);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(a<t.length-1&&(t.charCodeAt(a+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=t.charCodeAt(++a);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function WEe(t){let e;try{e=decodeURIComponent(t)}catch{throw ER(Dm.DATA_URL,"Malformed data URL.")}return Kee(e)}function Wee(t,e){switch(t){case Dm.BASE64:{const i=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(i||l)throw ER(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Dm.BASE64URL:{const i=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(i||l)throw ER(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let a;try{a=$Ee(e)}catch(i){throw i.message.includes("polyfill")?i:ER(t,"Invalid character found")}const r=new Uint8Array(a.length);for(let i=0;i<a.length;i++)r[i]=a.charCodeAt(i);return r}class Yee{constructor(e){this.base64=!1,this.contentType=null;const a=e.match(/^data:([^,]+)?,/);if(a===null)throw ER(Dm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=a[1]||null;r!=null&&(this.base64=JEe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function YEe(t){const e=new Yee(t);return e.base64?Wee(Dm.BASE64,e.rest):WEe(e.rest)}function XEe(t){return new Yee(t).contentType}function JEe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,a){let r=0,i="";aq(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(a?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(a?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,a){if(aq(this.data_)){const r=this.data_,i=HEe(r,e,a);return i===null?null:new Ly(i)}else{const r=new Uint8Array(this.data_.buffer,e,a-e);return new Ly(r,!0)}}static getBlob(...e){if(M4()){const a=e.map(r=>r instanceof Ly?r.data_:r);return new Ly(qEe.apply(null,a))}else{const a=e.map(c=>D4(c)?KEe(Dm.RAW,c).data:c.data_);let r=0;a.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let l=0;return a.forEach(c=>{for(let n=0;n<c.length;n++)i[l++]=c[n]}),new Ly(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xee(t){let e;try{e=JSON.parse(t)}catch{return null}return IEe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QEe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eNe(t,e){const a=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?a:t+"/"+a}function Jee(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tNe(t,e){return e}class nh{constructor(e,a,r,i){this.server=e,this.local=a||e,this.writable=!!r,this.xform=i||tNe}}let ab=null;function aNe(t){return!D4(t)||t.length<2?t:Jee(t)}function Qee(){if(ab)return ab;const t=[];t.push(new nh("bucket")),t.push(new nh("generation")),t.push(new nh("metageneration")),t.push(new nh("name","fullPath",!0));function e(l,c){return aNe(c)}const a=new nh("name");a.xform=e,t.push(a);function r(l,c){return c!==void 0?Number(c):c}const i=new nh("size");return i.xform=r,t.push(i),t.push(new nh("timeCreated")),t.push(new nh("updated")),t.push(new nh("md5Hash",null,!0)),t.push(new nh("cacheControl",null,!0)),t.push(new nh("contentDisposition",null,!0)),t.push(new nh("contentEncoding",null,!0)),t.push(new nh("contentLanguage",null,!0)),t.push(new nh("contentType",null,!0)),t.push(new nh("metadata","customMetadata",!0)),ab=t,ab}function rNe(t,e){function a(){const r=t.bucket,i=t.fullPath,l=new yf(r,i);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:a})}function nNe(t,e,a){const r={};r.type="file";const i=a.length;for(let l=0;l<i;l++){const c=a[l];r[c.local]=c.xform(r,e[c.server])}return rNe(r,t),r}function ete(t,e,a){const r=Xee(e);return r===null?null:nNe(t,r,a)}function iNe(t,e,a,r){const i=Xee(e);if(i===null||!D4(i.downloadTokens))return null;const l=i.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(R=>{const x=t.bucket,N=t.fullPath,L="/b/"+c(x)+"/o/"+c(N),F=I4(L,a,r),j=$ee({alt:"media",token:R});return F+j})[0]}function sNe(t,e){const a={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(a[l.server]=t[l.local])}return JSON.stringify(a)}class tte{constructor(e,a,r,i){this.url=e,this.method=a,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ate(t){if(!t)throw z4()}function oNe(t,e){function a(r,i){const l=ete(t,i,e);return ate(l!==null),l}return a}function lNe(t,e){function a(r,i){const l=ete(t,i,e);return ate(l!==null),iNe(l,i,t.host,t._protocol)}return a}function rte(t){function e(a,r){let i;return a.getStatus()===401?a.getErrorText().includes("Firebase App Check token is invalid")?i=wEe():i=_Ee():a.getStatus()===402?i=vEe(t.bucket):a.getStatus()===403?i=REe(t.path):i=r,i.status=a.getStatus(),i.serverResponse=r.serverResponse,i}return e}function uNe(t){const e=rte(t);function a(r,i){let l=e(r,i);return r.getStatus()===404&&(l=AEe(t.path)),l.serverResponse=i.serverResponse,l}return a}function cNe(t,e,a){const r=e.fullServerUrl(),i=I4(r,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,n=new tte(i,l,lNe(t,a),c);return n.errorHandler=uNe(e),n}function dNe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function hNe(t,e,a){const r=Object.assign({},a);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dNe(null,e)),r}function fNe(t,e,a,r,i){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function n(){let oe="";for(let fe=0;fe<2;fe++)oe=oe+Math.random().toString().slice(2);return oe}const v=n();c["Content-Type"]="multipart/related; boundary="+v;const R=hNe(e,r,i),x=sNe(R,a),N="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+v+`\r
Content-Type: `+R.contentType+`\r
\r
`,L=`\r
--`+v+"--",F=Ly.getBlob(N,r,L);if(F===null)throw PEe();const j={name:R.fullPath},H=I4(l,t.host,t._protocol),q="POST",W=t.maxUploadRetryTime,ee=new tte(H,q,oNe(t,a),W);return ee.urlParams=j,ee.headers=c,ee.body=F.uploadData(),ee.errorHandler=rte(e),ee}class pNe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rv.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rv.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rv.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,a,r,i){if(this.sent_)throw Ww("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(a,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ww("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ww("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ww("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ww("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mNe extends pNe{initXhr(){this.xhr_.responseType="text"}}function nte(){return new mNe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,a){this._service=e,a instanceof yf?this._location=a:this._location=yf.makeFromUrl(a,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,a){return new Iv(e,a)}get root(){const e=new yf(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jee(this._location.path)}get storage(){return this._service}get parent(){const e=QEe(this._location.path);if(e===null)return null;const a=new yf(this._location.bucket,e);return new Iv(this._service,a)}_throwIfRoot(e){if(this._location.path==="")throw OEe(e)}}function gNe(t,e,a){t._throwIfRoot("uploadBytes");const r=fNe(t.storage,t._location,Qee(),new Ly(e,!0),a);return t.storage.makeRequestWithTokens(r,nte).then(i=>({metadata:i,ref:t}))}function yNe(t){t._throwIfRoot("getDownloadURL");const e=cNe(t.storage,t._location,Qee());return t.storage.makeRequestWithTokens(e,nte).then(a=>{if(a===null)throw EEe();return a})}function ANe(t,e){const a=eNe(t._location.path,e),r=new yf(t._location.bucket,a);return new Iv(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vNe(t){return/^[A-Za-z]+:\/\//.test(t)}function _Ne(t,e){return new Iv(t,e)}function ite(t,e){if(t instanceof L4){const a=t;if(a._bucket==null)throw xEe();const r=new Iv(a,a._bucket);return e!=null?ite(r,e):r}else return e!==void 0?ANe(t,e):t}function wNe(t,e){if(e&&vNe(e)){if(t instanceof L4)return _Ne(t,e);throw FI("To use ref(service, url), the first argument must be a Storage instance.")}else return ite(t,e)}function nq(t,e){const a=e==null?void 0:e[qee];return a==null?null:yf.makeFromBucketSpec(a,t)}function RNe(t,e,a,r={}){t.host=`${e}:${a}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:nK(i,t.app.options.projectId))}class L4{constructor(e,a,r,i,l){this.app=e,this._authProvider=a,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=Zee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gEe,this._maxUploadRetryTime=yEe,this._requests=new Set,i!=null?this._bucket=yf.makeFromBucketSpec(i,this._host):this._bucket=nq(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yf.makeFromBucketSpec(this._url,e):this._bucket=nq(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rq("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rq("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const a=await e.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Iv(this,e)}_makeRequest(e,a,r,i,l=!0){if(this._deleted)return new VEe(Hee());{const c=GEe(e,this._appId,r,i,a,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,a){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,a,r,i).getPromise()}}const iq="@firebase/storage",sq="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ste="storage";function ote(t,e,a){return t=gl(t),gNe(t,e,a)}function lte(t){return t=gl(t),yNe(t)}function ute(t,e){return t=gl(t),wNe(t,e)}function cte(t=p3(),e){t=gl(t);const r=b2(t,ste).getImmediate({identifier:e}),i=tK("storage");return i&&TNe(r,...i),r}function TNe(t,e,a,r={}){RNe(t,e,a,r)}function CNe(t,{instanceIdentifier:e}){const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new L4(a,r,i,e,kv)}function SNe(){bv(new Wy(ste,CNe,"PUBLIC").setMultipleInstances(!0)),Im(iq,sq,""),Im(iq,sq,"esm2017")}SNe();var U0={},j5,oq;function bNe(){return oq||(oq=1,j5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),j5}var G5={},Cy={},lq;function Wv(){if(lq)return Cy;lq=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Cy.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Cy.getSymbolTotalCodewords=function(r){return e[r]},Cy.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},Cy.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},Cy.isKanjiModeEnabled=function(){return typeof t<"u"},Cy.toSJIS=function(r){return t(r)},Cy}var Z5={},uq;function F4(){return uq||(uq=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}}(Z5)),Z5}var q5,cq;function xNe(){if(cq)return q5;cq=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let r=0;r<a;r++)this.putBit((e>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}},q5=t,q5}var H5,dq;function PNe(){if(dq)return H5;dq=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,a,r,i){const l=e*this.size+a;this.data[l]=r,i&&(this.reservedBit[l]=!0)},t.prototype.get=function(e,a){return this.data[e*this.size+a]},t.prototype.xor=function(e,a,r){this.data[e*this.size+a]^=r},t.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]},H5=t,H5}var $5={},hq;function ENe(){return hq||(hq=1,function(t){const e=Wv().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,l=e(r),c=l===145?26:Math.ceil((l-13)/(2*i-2))*2,n=[l-7];for(let v=1;v<i-1;v++)n[v]=n[v-1]-c;return n.push(6),n.reverse()},t.getPositions=function(r){const i=[],l=t.getRowColCoords(r),c=l.length;for(let n=0;n<c;n++)for(let v=0;v<c;v++)n===0&&v===0||n===0&&v===c-1||n===c-1&&v===0||i.push([l[n],l[v]]);return i}}($5)),$5}var K5={},fq;function NNe(){if(fq)return K5;fq=1;const t=Wv().getSymbolSize,e=7;return K5.getPositions=function(r){const i=t(r);return[[0,0],[i-e,0],[0,i-e]]},K5}var W5={},pq;function ONe(){return pq||(pq=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const l=i.size;let c=0,n=0,v=0,R=null,x=null;for(let N=0;N<l;N++){n=v=0,R=x=null;for(let L=0;L<l;L++){let F=i.get(N,L);F===R?n++:(n>=5&&(c+=e.N1+(n-5)),R=F,n=1),F=i.get(L,N),F===x?v++:(v>=5&&(c+=e.N1+(v-5)),x=F,v=1)}n>=5&&(c+=e.N1+(n-5)),v>=5&&(c+=e.N1+(v-5))}return c},t.getPenaltyN2=function(i){const l=i.size;let c=0;for(let n=0;n<l-1;n++)for(let v=0;v<l-1;v++){const R=i.get(n,v)+i.get(n,v+1)+i.get(n+1,v)+i.get(n+1,v+1);(R===4||R===0)&&c++}return c*e.N2},t.getPenaltyN3=function(i){const l=i.size;let c=0,n=0,v=0;for(let R=0;R<l;R++){n=v=0;for(let x=0;x<l;x++)n=n<<1&2047|i.get(R,x),x>=10&&(n===1488||n===93)&&c++,v=v<<1&2047|i.get(x,R),x>=10&&(v===1488||v===93)&&c++}return c*e.N3},t.getPenaltyN4=function(i){let l=0;const c=i.data.length;for(let v=0;v<c;v++)l+=i.data[v];return Math.abs(Math.ceil(l*100/c/5)-10)*e.N4};function a(r,i,l){switch(r){case t.Patterns.PATTERN000:return(i+l)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(i+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return i*l%2+i*l%3===0;case t.Patterns.PATTERN110:return(i*l%2+i*l%3)%2===0;case t.Patterns.PATTERN111:return(i*l%3+(i+l)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,l){const c=l.size;for(let n=0;n<c;n++)for(let v=0;v<c;v++)l.isReserved(v,n)||l.xor(v,n,a(i,v,n))},t.getBestMask=function(i,l){const c=Object.keys(t.Patterns).length;let n=0,v=1/0;for(let R=0;R<c;R++){l(R),t.applyMask(R,i);const x=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(R,i),x<v&&(v=x,n=R)}return n}}(W5)),W5}var rb={},mq;function dte(){if(mq)return rb;mq=1;const t=F4(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return rb.getBlocksCount=function(i,l){switch(l){case t.L:return e[(i-1)*4+0];case t.M:return e[(i-1)*4+1];case t.Q:return e[(i-1)*4+2];case t.H:return e[(i-1)*4+3];default:return}},rb.getTotalCodewordsCount=function(i,l){switch(l){case t.L:return a[(i-1)*4+0];case t.M:return a[(i-1)*4+1];case t.Q:return a[(i-1)*4+2];case t.H:return a[(i-1)*4+3];default:return}},rb}var Y5={},Yw={},gq;function VNe(){if(gq)return Yw;gq=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let i=0;i<255;i++)t[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)t[i]=t[i-255]}(),Yw.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Yw.exp=function(r){return t[r]},Yw.mul=function(r,i){return r===0||i===0?0:t[e[r]+e[i]]},Yw}var yq;function zNe(){return yq||(yq=1,function(t){const e=VNe();t.mul=function(r,i){const l=new Uint8Array(r.length+i.length-1);for(let c=0;c<r.length;c++)for(let n=0;n<i.length;n++)l[c+n]^=e.mul(r[c],i[n]);return l},t.mod=function(r,i){let l=new Uint8Array(r);for(;l.length-i.length>=0;){const c=l[0];for(let v=0;v<i.length;v++)l[v]^=e.mul(i[v],c);let n=0;for(;n<l.length&&l[n]===0;)n++;l=l.slice(n)}return l},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let l=0;l<r;l++)i=t.mul(i,new Uint8Array([1,e.exp(l)]));return i}}(Y5)),Y5}var X5,Aq;function DNe(){if(Aq)return X5;Aq=1;const t=zNe();function e(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const l=t.mod(i,this.genPoly),c=this.degree-l.length;if(c>0){const n=new Uint8Array(this.degree);return n.set(l,c),n}return l},X5=e,X5}var J5={},Q5={},eD={},vq;function hte(){return vq||(vq=1,eD.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),eD}var bm={},_q;function fte(){if(_q)return bm;_q=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;bm.KANJI=new RegExp(a,"g"),bm.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),bm.BYTE=new RegExp(r,"g"),bm.NUMERIC=new RegExp(t,"g"),bm.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+a+"$"),l=new RegExp("^"+t+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return bm.testKanji=function(v){return i.test(v)},bm.testNumeric=function(v){return l.test(v)},bm.testAlphanumeric=function(v){return c.test(v)},bm}var wq;function Yv(){return wq||(wq=1,function(t){const e=hte(),a=fte();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,c){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?l.ccBits[0]:c<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return a.testNumeric(l)?t.NUMERIC:a.testAlphanumeric(l)?t.ALPHANUMERIC:a.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(l,c){if(t.isValid(l))return l;try{return r(l)}catch{return c}}}(Q5)),Q5}var Rq;function MNe(){return Rq||(Rq=1,function(t){const e=Wv(),a=dte(),r=F4(),i=Yv(),l=hte(),c=7973,n=e.getBCHDigit(c);function v(L,F,j){for(let H=1;H<=40;H++)if(F<=t.getCapacity(H,j,L))return H}function R(L,F){return i.getCharCountIndicator(L,F)+4}function x(L,F){let j=0;return L.forEach(function(H){const q=R(H.mode,F);j+=q+H.getBitsLength()}),j}function N(L,F){for(let j=1;j<=40;j++)if(x(L,j)<=t.getCapacity(j,F,i.MIXED))return j}t.from=function(F,j){return l.isValid(F)?parseInt(F,10):j},t.getCapacity=function(F,j,H){if(!l.isValid(F))throw new Error("Invalid QR Code version");typeof H>"u"&&(H=i.BYTE);const q=e.getSymbolTotalCodewords(F),W=a.getTotalCodewordsCount(F,j),ee=(q-W)*8;if(H===i.MIXED)return ee;const oe=ee-R(H,F);switch(H){case i.NUMERIC:return Math.floor(oe/10*3);case i.ALPHANUMERIC:return Math.floor(oe/11*2);case i.KANJI:return Math.floor(oe/13);case i.BYTE:default:return Math.floor(oe/8)}},t.getBestVersionForData=function(F,j){let H;const q=r.from(j,r.M);if(Array.isArray(F)){if(F.length>1)return N(F,q);if(F.length===0)return 1;H=F[0]}else H=F;return v(H.mode,H.getLength(),q)},t.getEncodedBits=function(F){if(!l.isValid(F)||F<7)throw new Error("Invalid QR Code version");let j=F<<12;for(;e.getBCHDigit(j)-n>=0;)j^=c<<e.getBCHDigit(j)-n;return F<<12|j}}(J5)),J5}var tD={},Tq;function INe(){if(Tq)return tD;Tq=1;const t=Wv(),e=1335,a=21522,r=t.getBCHDigit(e);return tD.getEncodedBits=function(l,c){const n=l.bit<<3|c;let v=n<<10;for(;t.getBCHDigit(v)-r>=0;)v^=e<<t.getBCHDigit(v)-r;return(n<<10|v)^a},tD}var aD={},rD,Cq;function LNe(){if(Cq)return rD;Cq=1;const t=Yv();function e(a){this.mode=t.NUMERIC,this.data=a.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,l,c;for(i=0;i+3<=this.data.length;i+=3)l=this.data.substr(i,3),c=parseInt(l,10),r.put(c,10);const n=this.data.length-i;n>0&&(l=this.data.substr(i),c=parseInt(l,10),r.put(c,n*3+1))},rD=e,rD}var nD,Sq;function FNe(){if(Sq)return nD;Sq=1;const t=Yv(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=t.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){let l;for(l=0;l+2<=this.data.length;l+=2){let c=e.indexOf(this.data[l])*45;c+=e.indexOf(this.data[l+1]),i.put(c,11)}this.data.length%2&&i.put(e.indexOf(this.data[l]),6)},nD=a,nD}var iD,bq;function kNe(){if(bq)return iD;bq=1;const t=Yv();function e(a){this.mode=t.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){for(let r=0,i=this.data.length;r<i;r++)a.put(this.data[r],8)},iD=e,iD}var sD,xq;function UNe(){if(xq)return sD;xq=1;const t=Yv(),e=Wv();function a(r){this.mode=t.KANJI,this.data=r}return a.getBitsLength=function(i){return i*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let l=e.toSJIS(this.data[i]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),r.put(l,13)}},sD=a,sD}var oD={exports:{}},Pq;function BNe(){return Pq||(Pq=1,function(t){var e={single_source_shortest_paths:function(a,r,i){var l={},c={};c[r]=0;var n=e.PriorityQueue.make();n.push(r,0);for(var v,R,x,N,L,F,j,H,q;!n.empty();){v=n.pop(),R=v.value,N=v.cost,L=a[R]||{};for(x in L)L.hasOwnProperty(x)&&(F=L[x],j=N+F,H=c[x],q=typeof c[x]>"u",(q||H>j)&&(c[x]=j,n.push(x,j),l[x]=R))}if(typeof i<"u"&&typeof c[i]>"u"){var W=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(W)}return l},extract_shortest_path_from_predecessor_list:function(a,r){for(var i=[],l=r;l;)i.push(l),a[l],l=a[l];return i.reverse(),i},find_path:function(a,r,i){var l=e.single_source_shortest_paths(a,r,i);return e.extract_shortest_path_from_predecessor_list(l,i)},PriorityQueue:{make:function(a){var r=e.PriorityQueue,i={},l;a=a||{};for(l in r)r.hasOwnProperty(l)&&(i[l]=r[l]);return i.queue=[],i.sorter=a.sorter||r.default_sorter,i},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var i={value:a,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(oD)),oD.exports}var Eq;function jNe(){return Eq||(Eq=1,function(t){const e=Yv(),a=LNe(),r=FNe(),i=kNe(),l=UNe(),c=fte(),n=Wv(),v=BNe();function R(W){return unescape(encodeURIComponent(W)).length}function x(W,ee,oe){const fe=[];let se;for(;(se=W.exec(oe))!==null;)fe.push({data:se[0],index:se.index,mode:ee,length:se[0].length});return fe}function N(W){const ee=x(c.NUMERIC,e.NUMERIC,W),oe=x(c.ALPHANUMERIC,e.ALPHANUMERIC,W);let fe,se;return n.isKanjiModeEnabled()?(fe=x(c.BYTE,e.BYTE,W),se=x(c.KANJI,e.KANJI,W)):(fe=x(c.BYTE_KANJI,e.BYTE,W),se=[]),ee.concat(oe,fe,se).sort(function(ge,Re){return ge.index-Re.index}).map(function(ge){return{data:ge.data,mode:ge.mode,length:ge.length}})}function L(W,ee){switch(ee){case e.NUMERIC:return a.getBitsLength(W);case e.ALPHANUMERIC:return r.getBitsLength(W);case e.KANJI:return l.getBitsLength(W);case e.BYTE:return i.getBitsLength(W)}}function F(W){return W.reduce(function(ee,oe){const fe=ee.length-1>=0?ee[ee.length-1]:null;return fe&&fe.mode===oe.mode?(ee[ee.length-1].data+=oe.data,ee):(ee.push(oe),ee)},[])}function j(W){const ee=[];for(let oe=0;oe<W.length;oe++){const fe=W[oe];switch(fe.mode){case e.NUMERIC:ee.push([fe,{data:fe.data,mode:e.ALPHANUMERIC,length:fe.length},{data:fe.data,mode:e.BYTE,length:fe.length}]);break;case e.ALPHANUMERIC:ee.push([fe,{data:fe.data,mode:e.BYTE,length:fe.length}]);break;case e.KANJI:ee.push([fe,{data:fe.data,mode:e.BYTE,length:R(fe.data)}]);break;case e.BYTE:ee.push([{data:fe.data,mode:e.BYTE,length:R(fe.data)}])}}return ee}function H(W,ee){const oe={},fe={start:{}};let se=["start"];for(let me=0;me<W.length;me++){const ge=W[me],Re=[];for(let we=0;we<ge.length;we++){const Ee=ge[we],ae=""+me+we;Re.push(ae),oe[ae]={node:Ee,lastCount:0},fe[ae]={};for(let _e=0;_e<se.length;_e++){const Ie=se[_e];oe[Ie]&&oe[Ie].node.mode===Ee.mode?(fe[Ie][ae]=L(oe[Ie].lastCount+Ee.length,Ee.mode)-L(oe[Ie].lastCount,Ee.mode),oe[Ie].lastCount+=Ee.length):(oe[Ie]&&(oe[Ie].lastCount=Ee.length),fe[Ie][ae]=L(Ee.length,Ee.mode)+4+e.getCharCountIndicator(Ee.mode,ee))}}se=Re}for(let me=0;me<se.length;me++)fe[se[me]].end=0;return{map:fe,table:oe}}function q(W,ee){let oe;const fe=e.getBestModeForData(W);if(oe=e.from(ee,fe),oe!==e.BYTE&&oe.bit<fe.bit)throw new Error('"'+W+'" cannot be encoded with mode '+e.toString(oe)+`.
 Suggested mode is: `+e.toString(fe));switch(oe===e.KANJI&&!n.isKanjiModeEnabled()&&(oe=e.BYTE),oe){case e.NUMERIC:return new a(W);case e.ALPHANUMERIC:return new r(W);case e.KANJI:return new l(W);case e.BYTE:return new i(W)}}t.fromArray=function(ee){return ee.reduce(function(oe,fe){return typeof fe=="string"?oe.push(q(fe,null)):fe.data&&oe.push(q(fe.data,fe.mode)),oe},[])},t.fromString=function(ee,oe){const fe=N(ee,n.isKanjiModeEnabled()),se=j(fe),me=H(se,oe),ge=v.find_path(me.map,"start","end"),Re=[];for(let we=1;we<ge.length-1;we++)Re.push(me.table[ge[we]].node);return t.fromArray(F(Re))},t.rawSplit=function(ee){return t.fromArray(N(ee,n.isKanjiModeEnabled()))}}(aD)),aD}var Nq;function GNe(){if(Nq)return G5;Nq=1;const t=Wv(),e=F4(),a=xNe(),r=PNe(),i=ENe(),l=NNe(),c=ONe(),n=dte(),v=DNe(),R=MNe(),x=INe(),N=Yv(),L=jNe();function F(me,ge){const Re=me.size,we=l.getPositions(ge);for(let Ee=0;Ee<we.length;Ee++){const ae=we[Ee][0],_e=we[Ee][1];for(let Ie=-1;Ie<=7;Ie++)if(!(ae+Ie<=-1||Re<=ae+Ie))for(let xe=-1;xe<=7;xe++)_e+xe<=-1||Re<=_e+xe||(Ie>=0&&Ie<=6&&(xe===0||xe===6)||xe>=0&&xe<=6&&(Ie===0||Ie===6)||Ie>=2&&Ie<=4&&xe>=2&&xe<=4?me.set(ae+Ie,_e+xe,!0,!0):me.set(ae+Ie,_e+xe,!1,!0))}}function j(me){const ge=me.size;for(let Re=8;Re<ge-8;Re++){const we=Re%2===0;me.set(Re,6,we,!0),me.set(6,Re,we,!0)}}function H(me,ge){const Re=i.getPositions(ge);for(let we=0;we<Re.length;we++){const Ee=Re[we][0],ae=Re[we][1];for(let _e=-2;_e<=2;_e++)for(let Ie=-2;Ie<=2;Ie++)_e===-2||_e===2||Ie===-2||Ie===2||_e===0&&Ie===0?me.set(Ee+_e,ae+Ie,!0,!0):me.set(Ee+_e,ae+Ie,!1,!0)}}function q(me,ge){const Re=me.size,we=R.getEncodedBits(ge);let Ee,ae,_e;for(let Ie=0;Ie<18;Ie++)Ee=Math.floor(Ie/3),ae=Ie%3+Re-8-3,_e=(we>>Ie&1)===1,me.set(Ee,ae,_e,!0),me.set(ae,Ee,_e,!0)}function W(me,ge,Re){const we=me.size,Ee=x.getEncodedBits(ge,Re);let ae,_e;for(ae=0;ae<15;ae++)_e=(Ee>>ae&1)===1,ae<6?me.set(ae,8,_e,!0):ae<8?me.set(ae+1,8,_e,!0):me.set(we-15+ae,8,_e,!0),ae<8?me.set(8,we-ae-1,_e,!0):ae<9?me.set(8,15-ae-1+1,_e,!0):me.set(8,15-ae-1,_e,!0);me.set(we-8,8,1,!0)}function ee(me,ge){const Re=me.size;let we=-1,Ee=Re-1,ae=7,_e=0;for(let Ie=Re-1;Ie>0;Ie-=2)for(Ie===6&&Ie--;;){for(let xe=0;xe<2;xe++)if(!me.isReserved(Ee,Ie-xe)){let ze=!1;_e<ge.length&&(ze=(ge[_e]>>>ae&1)===1),me.set(Ee,Ie-xe,ze),ae--,ae===-1&&(_e++,ae=7)}if(Ee+=we,Ee<0||Re<=Ee){Ee-=we,we=-we;break}}}function oe(me,ge,Re){const we=new a;Re.forEach(function(xe){we.put(xe.mode.bit,4),we.put(xe.getLength(),N.getCharCountIndicator(xe.mode,me)),xe.write(we)});const Ee=t.getSymbolTotalCodewords(me),ae=n.getTotalCodewordsCount(me,ge),_e=(Ee-ae)*8;for(we.getLengthInBits()+4<=_e&&we.put(0,4);we.getLengthInBits()%8!==0;)we.putBit(0);const Ie=(_e-we.getLengthInBits())/8;for(let xe=0;xe<Ie;xe++)we.put(xe%2?17:236,8);return fe(we,me,ge)}function fe(me,ge,Re){const we=t.getSymbolTotalCodewords(ge),Ee=n.getTotalCodewordsCount(ge,Re),ae=we-Ee,_e=n.getBlocksCount(ge,Re),Ie=we%_e,xe=_e-Ie,ze=Math.floor(we/_e),Me=Math.floor(ae/_e),je=Me+1,Ue=ze-Me,Qe=new v(Ue);let ke=0;const Ge=new Array(_e),Se=new Array(_e);let Te=0;const qe=new Uint8Array(me.buffer);for(let He=0;He<_e;He++){const Ae=He<xe?Me:je;Ge[He]=qe.slice(ke,ke+Ae),Se[He]=Qe.encode(Ge[He]),ke+=Ae,Te=Math.max(Te,Ae)}const Ze=new Uint8Array(we);let lt=0,st,ht;for(st=0;st<Te;st++)for(ht=0;ht<_e;ht++)st<Ge[ht].length&&(Ze[lt++]=Ge[ht][st]);for(st=0;st<Ue;st++)for(ht=0;ht<_e;ht++)Ze[lt++]=Se[ht][st];return Ze}function se(me,ge,Re,we){let Ee;if(Array.isArray(me))Ee=L.fromArray(me);else if(typeof me=="string"){let ze=ge;if(!ze){const Me=L.rawSplit(me);ze=R.getBestVersionForData(Me,Re)}Ee=L.fromString(me,ze||40)}else throw new Error("Invalid data");const ae=R.getBestVersionForData(Ee,Re);if(!ae)throw new Error("The amount of data is too big to be stored in a QR Code");if(!ge)ge=ae;else if(ge<ae)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ae+`.
`);const _e=oe(ge,Re,Ee),Ie=t.getSymbolSize(ge),xe=new r(Ie);return F(xe,ge),j(xe),H(xe,ge),W(xe,Re,0),ge>=7&&q(xe,ge),ee(xe,_e),isNaN(we)&&(we=c.getBestMask(xe,W.bind(null,xe,Re))),c.applyMask(we,xe),W(xe,Re,we),{modules:xe,version:ge,errorCorrectionLevel:Re,maskPattern:we,segments:Ee}}return G5.create=function(ge,Re){if(typeof ge>"u"||ge==="")throw new Error("No input text");let we=e.M,Ee,ae;return typeof Re<"u"&&(we=e.from(Re.errorCorrectionLevel,e.M),Ee=R.from(Re.version),ae=c.from(Re.maskPattern),Re.toSJISFunc&&t.setToSJISFunction(Re.toSJISFunc)),se(ge,Ee,we,ae)},G5}var lD={},uD={},Oq;function pte(){return Oq||(Oq=1,function(t){function e(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(l){return[l,l]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,l=r.width&&r.width>=21?r.width:void 0,c=r.scale||4;return{width:l,scale:l?4:c,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const l=t.getScale(r,i);return Math.floor((r+i.margin*2)*l)},t.qrToImageData=function(r,i,l){const c=i.modules.size,n=i.modules.data,v=t.getScale(c,l),R=Math.floor((c+l.margin*2)*v),x=l.margin*v,N=[l.color.light,l.color.dark];for(let L=0;L<R;L++)for(let F=0;F<R;F++){let j=(L*R+F)*4,H=l.color.light;if(L>=x&&F>=x&&L<R-x&&F<R-x){const q=Math.floor((L-x)/v),W=Math.floor((F-x)/v);H=N[n[q*c+W]?1:0]}r[j++]=H.r,r[j++]=H.g,r[j++]=H.b,r[j]=H.a}}}(uD)),uD}var Vq;function ZNe(){return Vq||(Vq=1,function(t){const e=pte();function a(i,l,c){i.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=c,l.width=c,l.style.height=c+"px",l.style.width=c+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,c,n){let v=n,R=c;typeof v>"u"&&(!c||!c.getContext)&&(v=c,c=void 0),c||(R=r()),v=e.getOptions(v);const x=e.getImageWidth(l.modules.size,v),N=R.getContext("2d"),L=N.createImageData(x,x);return e.qrToImageData(L.data,l,v),a(N,R,x),N.putImageData(L,0,0),R},t.renderToDataURL=function(l,c,n){let v=n;typeof v>"u"&&(!c||!c.getContext)&&(v=c,c=void 0),v||(v={});const R=t.render(l,c,v),x=v.type||"image/png",N=v.rendererOpts||{};return R.toDataURL(x,N.quality)}}(lD)),lD}var cD={},zq;function qNe(){if(zq)return cD;zq=1;const t=pte();function e(i,l){const c=i.a/255,n=l+'="'+i.hex+'"';return c<1?n+" "+l+'-opacity="'+c.toFixed(2).slice(1)+'"':n}function a(i,l,c){let n=i+l;return typeof c<"u"&&(n+=" "+c),n}function r(i,l,c){let n="",v=0,R=!1,x=0;for(let N=0;N<i.length;N++){const L=Math.floor(N%l),F=Math.floor(N/l);!L&&!R&&(R=!0),i[N]?(x++,N>0&&L>0&&i[N-1]||(n+=R?a("M",L+c,.5+F+c):a("m",v,0),v=0,R=!1),L+1<l&&i[N+1]||(n+=a("h",x),x=0)):v++}return n}return cD.render=function(l,c,n){const v=t.getOptions(c),R=l.modules.size,x=l.modules.data,N=R+v.margin*2,L=v.color.light.a?"<path "+e(v.color.light,"fill")+' d="M0 0h'+N+"v"+N+'H0z"/>':"",F="<path "+e(v.color.dark,"stroke")+' d="'+r(x,R,v.margin)+'"/>',j='viewBox="0 0 '+N+" "+N+'"',q='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+j+' shape-rendering="crispEdges">'+L+F+`</svg>
`;return typeof n=="function"&&n(null,q),q},cD}var Dq;function HNe(){if(Dq)return U0;Dq=1;const t=bNe(),e=GNe(),a=ZNe(),r=qNe();function i(l,c,n,v,R){const x=[].slice.call(arguments,1),N=x.length,L=typeof x[N-1]=="function";if(!L&&!t())throw new Error("Callback required as last argument");if(L){if(N<2)throw new Error("Too few arguments provided");N===2?(R=n,n=c,c=v=void 0):N===3&&(c.getContext&&typeof R>"u"?(R=v,v=void 0):(R=v,v=n,n=c,c=void 0))}else{if(N<1)throw new Error("Too few arguments provided");return N===1?(n=c,c=v=void 0):N===2&&!c.getContext&&(v=n,n=c,c=void 0),new Promise(function(F,j){try{const H=e.create(n,v);F(l(H,c,v))}catch(H){j(H)}})}try{const F=e.create(n,v);R(null,l(F,c,v))}catch(F){R(F)}}return U0.create=e.create,U0.toCanvas=i.bind(null,a.render),U0.toDataURL=i.bind(null,a.renderToDataURL),U0.toString=i.bind(null,function(l,c,n){return r.render(l,n)}),U0}var $Ne=HNe();const KNe=ns($Ne),WNe="modulepreload",YNe=function(t){return"/ecpcaps/"+t},Mq={},kI=function(e,a,r){let i=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),n=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.allSettled(a.map(v=>{if(v=YNe(v),v in Mq)return;Mq[v]=!0;const R=v.endsWith(".css"),x=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${x}`))return;const N=document.createElement("link");if(N.rel=R?"stylesheet":WNe,R||(N.as="script"),N.crossOrigin="",N.href=v,n&&N.setAttribute("nonce",n),document.head.appendChild(N),R)return new Promise((L,F)=>{N.addEventListener("load",L),N.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(c){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=c,window.dispatchEvent(n),!n.defaultPrevented)throw c}return i.then(c=>{for(const n of c||[])n.status==="rejected"&&l(n.reason);return e().catch(l)})};function Gs(t){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(t)}var _d=Uint8Array,Af=Uint16Array,k4=Int32Array,KP=new _d([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),WP=new _d([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),UI=new _d([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mte=function(t,e){for(var a=new Af(31),r=0;r<31;++r)a[r]=e+=1<<t[r-1];for(var i=new k4(a[30]),r=1;r<30;++r)for(var l=a[r];l<a[r+1];++l)i[l]=l-a[r]<<5|r;return{b:a,r:i}},gte=mte(KP,2),yte=gte.b,BI=gte.r;yte[28]=258,BI[258]=28;var Ate=mte(WP,0),XNe=Ate.b,Iq=Ate.r,jI=new Af(32768);for(var Lo=0;Lo<32768;++Lo){var Sy=(Lo&43690)>>1|(Lo&21845)<<1;Sy=(Sy&52428)>>2|(Sy&13107)<<2,Sy=(Sy&61680)>>4|(Sy&3855)<<4,jI[Lo]=((Sy&65280)>>8|(Sy&255)<<8)>>1}var jm=function(t,e,a){for(var r=t.length,i=0,l=new Af(e);i<r;++i)t[i]&&++l[t[i]-1];var c=new Af(e);for(i=1;i<e;++i)c[i]=c[i-1]+l[i-1]<<1;var n;if(a){n=new Af(1<<e);var v=15-e;for(i=0;i<r;++i)if(t[i])for(var R=i<<4|t[i],x=e-t[i],N=c[t[i]-1]++<<x,L=N|(1<<x)-1;N<=L;++N)n[jI[N]>>v]=R}else for(n=new Af(r),i=0;i<r;++i)t[i]&&(n[i]=jI[c[t[i]-1]++]>>15-t[i]);return n},eA=new _d(288);for(var Lo=0;Lo<144;++Lo)eA[Lo]=8;for(var Lo=144;Lo<256;++Lo)eA[Lo]=9;for(var Lo=256;Lo<280;++Lo)eA[Lo]=7;for(var Lo=280;Lo<288;++Lo)eA[Lo]=8;var VT=new _d(32);for(var Lo=0;Lo<32;++Lo)VT[Lo]=5;var JNe=jm(eA,9,0),QNe=jm(eA,9,1),eOe=jm(VT,5,0),tOe=jm(VT,5,1),dD=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},Ip=function(t,e,a){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&a},hD=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},U4=function(t){return(t+7)/8|0},vte=function(t,e,a){return(a==null||a>t.length)&&(a=t.length),new _d(t.subarray(e,a))},aOe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kp=function(t,e,a){var r=new Error(e||aOe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,kp),!a)throw r;return r},rOe=function(t,e,a,r){var i=t.length,l=0;if(!i||e.f&&!e.l)return a||new _d(0);var c=!a,n=c||e.i!=2,v=e.i;c&&(a=new _d(i*3));var R=function(zt){var kt=a.length;if(zt>kt){var ma=new _d(Math.max(kt*2,zt));ma.set(a),a=ma}},x=e.f||0,N=e.p||0,L=e.b||0,F=e.l,j=e.d,H=e.m,q=e.n,W=i*8;do{if(!F){x=Ip(t,N,1);var ee=Ip(t,N+1,3);if(N+=3,ee)if(ee==1)F=QNe,j=tOe,H=9,q=5;else if(ee==2){var me=Ip(t,N,31)+257,ge=Ip(t,N+10,15)+4,Re=me+Ip(t,N+5,31)+1;N+=14;for(var we=new _d(Re),Ee=new _d(19),ae=0;ae<ge;++ae)Ee[UI[ae]]=Ip(t,N+ae*3,7);N+=ge*3;for(var _e=dD(Ee),Ie=(1<<_e)-1,xe=jm(Ee,_e,1),ae=0;ae<Re;){var ze=xe[Ip(t,N,Ie)];N+=ze&15;var oe=ze>>4;if(oe<16)we[ae++]=oe;else{var Me=0,je=0;for(oe==16?(je=3+Ip(t,N,3),N+=2,Me=we[ae-1]):oe==17?(je=3+Ip(t,N,7),N+=3):oe==18&&(je=11+Ip(t,N,127),N+=7);je--;)we[ae++]=Me}}var Ue=we.subarray(0,me),Qe=we.subarray(me);H=dD(Ue),q=dD(Qe),F=jm(Ue,H,1),j=jm(Qe,q,1)}else kp(1);else{var oe=U4(N)+4,fe=t[oe-4]|t[oe-3]<<8,se=oe+fe;if(se>i){v&&kp(0);break}n&&R(L+fe),a.set(t.subarray(oe,se),L),e.b=L+=fe,e.p=N=se*8,e.f=x;continue}if(N>W){v&&kp(0);break}}n&&R(L+131072);for(var ke=(1<<H)-1,Ge=(1<<q)-1,Se=N;;Se=N){var Me=F[hD(t,N)&ke],Te=Me>>4;if(N+=Me&15,N>W){v&&kp(0);break}if(Me||kp(2),Te<256)a[L++]=Te;else if(Te==256){Se=N,F=null;break}else{var qe=Te-254;if(Te>264){var ae=Te-257,Ze=KP[ae];qe=Ip(t,N,(1<<Ze)-1)+yte[ae],N+=Ze}var lt=j[hD(t,N)&Ge],st=lt>>4;lt||kp(3),N+=lt&15;var Qe=XNe[st];if(st>3){var Ze=WP[st];Qe+=hD(t,N)&(1<<Ze)-1,N+=Ze}if(N>W){v&&kp(0);break}n&&R(L+131072);var ht=L+qe;if(L<Qe){var He=l-Qe,Ae=Math.min(Qe,ht);for(He+L<0&&kp(3);L<Ae;++L)a[L]=r[He+L]}for(;L<ht;++L)a[L]=a[L-Qe]}}e.l=F,e.p=Se,e.b=L,e.f=x,F&&(x=1,e.m=H,e.d=j,e.n=q)}while(!x);return L!=a.length&&c?vte(a,0,L):a.subarray(0,L)},yg=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8},Xw=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8,t[r+2]|=a>>16},fD=function(t,e){for(var a=[],r=0;r<t.length;++r)t[r]&&a.push({s:r,f:t[r]});var i=a.length,l=a.slice();if(!i)return{t:wte,l:0};if(i==1){var c=new _d(a[0].s+1);return c[a[0].s]=1,{t:c,l:1}}a.sort(function(se,me){return se.f-me.f}),a.push({s:-1,f:25001});var n=a[0],v=a[1],R=0,x=1,N=2;for(a[0]={s:-1,f:n.f+v.f,l:n,r:v};x!=i-1;)n=a[a[R].f<a[N].f?R++:N++],v=a[R!=x&&a[R].f<a[N].f?R++:N++],a[x++]={s:-1,f:n.f+v.f,l:n,r:v};for(var L=l[0].s,r=1;r<i;++r)l[r].s>L&&(L=l[r].s);var F=new Af(L+1),j=GI(a[x-1],F,0);if(j>e){var r=0,H=0,q=j-e,W=1<<q;for(l.sort(function(me,ge){return F[ge.s]-F[me.s]||me.f-ge.f});r<i;++r){var ee=l[r].s;if(F[ee]>e)H+=W-(1<<j-F[ee]),F[ee]=e;else break}for(H>>=q;H>0;){var oe=l[r].s;F[oe]<e?H-=1<<e-F[oe]++-1:++r}for(;r>=0&&H;--r){var fe=l[r].s;F[fe]==e&&(--F[fe],++H)}j=e}return{t:new _d(F),l:j}},GI=function(t,e,a){return t.s==-1?Math.max(GI(t.l,e,a+1),GI(t.r,e,a+1)):e[t.s]=a},Lq=function(t){for(var e=t.length;e&&!t[--e];);for(var a=new Af(++e),r=0,i=t[0],l=1,c=function(v){a[r++]=v},n=1;n<=e;++n)if(t[n]==i&&n!=e)++l;else{if(!i&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(i),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(i);l=1,i=t[n]}return{c:a.subarray(0,r),n:e}},Jw=function(t,e){for(var a=0,r=0;r<e.length;++r)a+=t[r]*e[r];return a},_te=function(t,e,a){var r=a.length,i=U4(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var l=0;l<r;++l)t[i+l+4]=a[l];return(i+4+r)*8},Fq=function(t,e,a,r,i,l,c,n,v,R,x){yg(e,x++,a),++i[256];for(var N=fD(i,15),L=N.t,F=N.l,j=fD(l,15),H=j.t,q=j.l,W=Lq(L),ee=W.c,oe=W.n,fe=Lq(H),se=fe.c,me=fe.n,ge=new Af(19),Re=0;Re<ee.length;++Re)++ge[ee[Re]&31];for(var Re=0;Re<se.length;++Re)++ge[se[Re]&31];for(var we=fD(ge,7),Ee=we.t,ae=we.l,_e=19;_e>4&&!Ee[UI[_e-1]];--_e);var Ie=R+5<<3,xe=Jw(i,eA)+Jw(l,VT)+c,ze=Jw(i,L)+Jw(l,H)+c+14+3*_e+Jw(ge,Ee)+2*ge[16]+3*ge[17]+7*ge[18];if(v>=0&&Ie<=xe&&Ie<=ze)return _te(e,x,t.subarray(v,v+R));var Me,je,Ue,Qe;if(yg(e,x,1+(ze<xe)),x+=2,ze<xe){Me=jm(L,F,0),je=L,Ue=jm(H,q,0),Qe=H;var ke=jm(Ee,ae,0);yg(e,x,oe-257),yg(e,x+5,me-1),yg(e,x+10,_e-4),x+=14;for(var Re=0;Re<_e;++Re)yg(e,x+3*Re,Ee[UI[Re]]);x+=3*_e;for(var Ge=[ee,se],Se=0;Se<2;++Se)for(var Te=Ge[Se],Re=0;Re<Te.length;++Re){var qe=Te[Re]&31;yg(e,x,ke[qe]),x+=Ee[qe],qe>15&&(yg(e,x,Te[Re]>>5&127),x+=Te[Re]>>12)}}else Me=JNe,je=eA,Ue=eOe,Qe=VT;for(var Re=0;Re<n;++Re){var Ze=r[Re];if(Ze>255){var qe=Ze>>18&31;Xw(e,x,Me[qe+257]),x+=je[qe+257],qe>7&&(yg(e,x,Ze>>23&31),x+=KP[qe]);var lt=Ze&31;Xw(e,x,Ue[lt]),x+=Qe[lt],lt>3&&(Xw(e,x,Ze>>5&8191),x+=WP[lt])}else Xw(e,x,Me[Ze]),x+=je[Ze]}return Xw(e,x,Me[256]),x+je[256]},nOe=new k4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wte=new _d(0),iOe=function(t,e,a,r,i,l){var c=l.z||t.length,n=new _d(r+c+5*(1+Math.ceil(c/7e3))+i),v=n.subarray(r,n.length-i),R=l.l,x=(l.r||0)&7;if(e){x&&(v[0]=l.r>>3);for(var N=nOe[e-1],L=N>>13,F=N&8191,j=(1<<a)-1,H=l.p||new Af(32768),q=l.h||new Af(j+1),W=Math.ceil(a/3),ee=2*W,oe=function(It){return(t[It]^t[It+1]<<W^t[It+2]<<ee)&j},fe=new k4(25e3),se=new Af(288),me=new Af(32),ge=0,Re=0,we=l.i||0,Ee=0,ae=l.w||0,_e=0;we+2<c;++we){var Ie=oe(we),xe=we&32767,ze=q[Ie];if(H[xe]=ze,q[Ie]=xe,ae<=we){var Me=c-we;if((ge>7e3||Ee>24576)&&(Me>423||!R)){x=Fq(t,v,0,fe,se,me,Re,Ee,_e,we-_e,x),Ee=ge=Re=0,_e=we;for(var je=0;je<286;++je)se[je]=0;for(var je=0;je<30;++je)me[je]=0}var Ue=2,Qe=0,ke=F,Ge=xe-ze&32767;if(Me>2&&Ie==oe(we-Ge))for(var Se=Math.min(L,Me)-1,Te=Math.min(32767,we),qe=Math.min(258,Me);Ge<=Te&&--ke&&xe!=ze;){if(t[we+Ue]==t[we+Ue-Ge]){for(var Ze=0;Ze<qe&&t[we+Ze]==t[we+Ze-Ge];++Ze);if(Ze>Ue){if(Ue=Ze,Qe=Ge,Ze>Se)break;for(var lt=Math.min(Ge,Ze-2),st=0,je=0;je<lt;++je){var ht=we-Ge+je&32767,He=H[ht],Ae=ht-He&32767;Ae>st&&(st=Ae,ze=ht)}}}xe=ze,ze=H[xe],Ge+=xe-ze&32767}if(Qe){fe[Ee++]=268435456|BI[Ue]<<18|Iq[Qe];var zt=BI[Ue]&31,kt=Iq[Qe]&31;Re+=KP[zt]+WP[kt],++se[257+zt],++me[kt],ae=we+Ue,++ge}else fe[Ee++]=t[we],++se[t[we]]}}for(we=Math.max(we,ae);we<c;++we)fe[Ee++]=t[we],++se[t[we]];x=Fq(t,v,R,fe,se,me,Re,Ee,_e,we-_e,x),R||(l.r=x&7|v[x/8|0]<<3,x-=7,l.h=q,l.p=H,l.i=we,l.w=ae)}else{for(var we=l.w||0;we<c+R;we+=65535){var ma=we+65535;ma>=c&&(v[x/8|0]=R,ma=c),x=_te(v,x+1,t.subarray(we,ma))}l.i=c}return vte(n,0,r+U4(x)+i)},Rte=function(){var t=1,e=0;return{p:function(a){for(var r=t,i=e,l=a.length|0,c=0;c!=l;){for(var n=Math.min(c+2655,l);c<n;++c)i+=r+=a[c];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},sOe=function(t,e,a,r,i){if(!i&&(i={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),c=new _d(l.length+t.length);c.set(l),c.set(t,l.length),t=c,i.w=l.length}return iOe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,a,r,i)},Tte=function(t,e,a){for(;a;++e)t[e]=a,a>>>=8},oOe=function(t,e){var a=e.level,r=a==0?0:a<6?1:a==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Rte();i.p(e.dictionary),Tte(t,2,i.d())}},lOe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&kp(6,"invalid zlib data"),(t[1]>>5&1)==1&&kp(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function ZI(t,e){e||(e={});var a=Rte();a.p(t);var r=sOe(t,e,e.dictionary?6:2,4);return oOe(r,e),Tte(r,r.length-4,a.d()),r}function uOe(t,e){return rOe(t.subarray(lOe(t),-4),{i:2},e,e)}var cOe=typeof TextDecoder<"u"&&new TextDecoder,dOe=0;try{cOe.decode(wte,{stream:!0}),dOe=1}catch{}var Yn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function pD(){Yn.console&&typeof Yn.console.log=="function"&&Yn.console.log.apply(Yn.console,arguments)}var ho={log:pD,warn:function(t){Yn.console&&(typeof Yn.console.warn=="function"?Yn.console.warn.apply(Yn.console,arguments):pD.call(null,arguments))},error:function(t){Yn.console&&(typeof Yn.console.error=="function"?Yn.console.error.apply(Yn.console,arguments):pD(t))}};function mD(t,e,a){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){iv(r.response,e,a)},r.onerror=function(){ho.error("could not download file")},r.send()}function kq(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function nb(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var NR,qI,iv=Yn.saveAs||((typeof window>"u"?"undefined":Gs(window))!=="object"||window!==Yn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,a){var r=Yn.URL||Yn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?kq(i.href)?mD(t,e,a):nb(i,i.target="_blank"):nb(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){nb(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download",typeof t=="string")if(kq(t))mD(t,e,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){nb(r)})}else navigator.msSaveOrOpenBlob(function(i,l){return l===void 0?l={autoBom:!1}:Gs(l)!=="object"&&(ho.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,a),e)}:function(t,e,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return mD(t,e,a);var i=t.type==="application/octet-stream",l=/constructor/i.test(Yn.HTMLElement)||Yn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l)&&(typeof FileReader>"u"?"undefined":Gs(FileReader))==="object"){var n=new FileReader;n.onloadend=function(){var x=n.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=x:location=x,r=null},n.readAsDataURL(t)}else{var v=Yn.URL||Yn.webkitURL,R=v.createObjectURL(t);r?r.location=R:location.href=R,r=null,setTimeout(function(){v.revokeObjectURL(R)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Cte(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],r=0;r<a.length;r++){var i=a[r].re,l=a[r].process,c=i.exec(t);c&&(e=l(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var n=this.r.toString(16),v=this.g.toString(16),R=this.b.toString(16);return n.length==1&&(n="0"+n),v.length==1&&(v="0"+v),R.length==1&&(R="0"+R),"#"+n+v+R}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gD(t,e){var a=t[0],r=t[1],i=t[2],l=t[3];a=ud(a,r,i,l,e[0],7,-680876936),l=ud(l,a,r,i,e[1],12,-389564586),i=ud(i,l,a,r,e[2],17,606105819),r=ud(r,i,l,a,e[3],22,-1044525330),a=ud(a,r,i,l,e[4],7,-176418897),l=ud(l,a,r,i,e[5],12,1200080426),i=ud(i,l,a,r,e[6],17,-1473231341),r=ud(r,i,l,a,e[7],22,-45705983),a=ud(a,r,i,l,e[8],7,1770035416),l=ud(l,a,r,i,e[9],12,-1958414417),i=ud(i,l,a,r,e[10],17,-42063),r=ud(r,i,l,a,e[11],22,-1990404162),a=ud(a,r,i,l,e[12],7,1804603682),l=ud(l,a,r,i,e[13],12,-40341101),i=ud(i,l,a,r,e[14],17,-1502002290),a=cd(a,r=ud(r,i,l,a,e[15],22,1236535329),i,l,e[1],5,-165796510),l=cd(l,a,r,i,e[6],9,-1069501632),i=cd(i,l,a,r,e[11],14,643717713),r=cd(r,i,l,a,e[0],20,-373897302),a=cd(a,r,i,l,e[5],5,-701558691),l=cd(l,a,r,i,e[10],9,38016083),i=cd(i,l,a,r,e[15],14,-660478335),r=cd(r,i,l,a,e[4],20,-405537848),a=cd(a,r,i,l,e[9],5,568446438),l=cd(l,a,r,i,e[14],9,-1019803690),i=cd(i,l,a,r,e[3],14,-187363961),r=cd(r,i,l,a,e[8],20,1163531501),a=cd(a,r,i,l,e[13],5,-1444681467),l=cd(l,a,r,i,e[2],9,-51403784),i=cd(i,l,a,r,e[7],14,1735328473),a=dd(a,r=cd(r,i,l,a,e[12],20,-1926607734),i,l,e[5],4,-378558),l=dd(l,a,r,i,e[8],11,-2022574463),i=dd(i,l,a,r,e[11],16,1839030562),r=dd(r,i,l,a,e[14],23,-35309556),a=dd(a,r,i,l,e[1],4,-1530992060),l=dd(l,a,r,i,e[4],11,1272893353),i=dd(i,l,a,r,e[7],16,-155497632),r=dd(r,i,l,a,e[10],23,-1094730640),a=dd(a,r,i,l,e[13],4,681279174),l=dd(l,a,r,i,e[0],11,-358537222),i=dd(i,l,a,r,e[3],16,-722521979),r=dd(r,i,l,a,e[6],23,76029189),a=dd(a,r,i,l,e[9],4,-640364487),l=dd(l,a,r,i,e[12],11,-421815835),i=dd(i,l,a,r,e[15],16,530742520),a=hd(a,r=dd(r,i,l,a,e[2],23,-995338651),i,l,e[0],6,-198630844),l=hd(l,a,r,i,e[7],10,1126891415),i=hd(i,l,a,r,e[14],15,-1416354905),r=hd(r,i,l,a,e[5],21,-57434055),a=hd(a,r,i,l,e[12],6,1700485571),l=hd(l,a,r,i,e[3],10,-1894986606),i=hd(i,l,a,r,e[10],15,-1051523),r=hd(r,i,l,a,e[1],21,-2054922799),a=hd(a,r,i,l,e[8],6,1873313359),l=hd(l,a,r,i,e[15],10,-30611744),i=hd(i,l,a,r,e[6],15,-1560198380),r=hd(r,i,l,a,e[13],21,1309151649),a=hd(a,r,i,l,e[4],6,-145523070),l=hd(l,a,r,i,e[11],10,-1120210379),i=hd(i,l,a,r,e[2],15,718787259),r=hd(r,i,l,a,e[9],21,-343485551),t[0]=jy(a,t[0]),t[1]=jy(r,t[1]),t[2]=jy(i,t[2]),t[3]=jy(l,t[3])}function YP(t,e,a,r,i,l){return e=jy(jy(e,t),jy(r,l)),jy(e<<i|e>>>32-i,a)}function ud(t,e,a,r,i,l,c){return YP(e&a|~e&r,t,e,i,l,c)}function cd(t,e,a,r,i,l,c){return YP(e&r|a&~r,t,e,i,l,c)}function dd(t,e,a,r,i,l,c){return YP(e^a^r,t,e,i,l,c)}function hd(t,e,a,r,i,l,c){return YP(a^(e|~r),t,e,i,l,c)}function Ste(t){var e,a=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)gD(r,hOe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(gD(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*a,gD(r,i),r}function hOe(t){var e,a=[];for(e=0;e<64;e+=4)a[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return a}NR=Yn.atob.bind(Yn),qI=Yn.btoa.bind(Yn);var Uq="0123456789abcdef".split("");function fOe(t){for(var e="",a=0;a<4;a++)e+=Uq[t>>8*a+4&15]+Uq[t>>8*a&15];return e}function pOe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function HI(t){return Ste(t).map(pOe).join("")}var mOe=function(t){for(var e=0;e<t.length;e++)t[e]=fOe(t[e]);return t.join("")}(Ste("hello"))!="5d41402abc4b2a76b9719d911017c592";function jy(t,e){if(mOe){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $I(t,e){var a,r,i,l;if(t!==a){for(var c=(i=t,l=1+(256/t.length>>0),new Array(l+1).join(i)),n=[],v=0;v<256;v++)n[v]=v;var R=0;for(v=0;v<256;v++){var x=n[v];R=(R+x+c.charCodeAt(v))%256,n[v]=n[R],n[R]=x}a=t,r=n}else n=r;var N=e.length,L=0,F=0,j="";for(v=0;v<N;v++)F=(F+(x=n[L=(L+1)%256]))%256,n[L]=n[F],n[F]=x,c=n[(n[L]+n[F])%256],j+=String.fromCharCode(e.charCodeAt(v)^c);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Bq={print:4,modify:8,copy:16,"annot-forms":32};function H0(t,e,a,r){this.v=1,this.r=2;var i=192;t.forEach(function(n){if(Bq.perm!==void 0)throw new Error("Invalid permission: "+n);i+=Bq[n]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(e+this.padding).substr(0,32),c=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^i)),this.encryptionKey=HI(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$I(this.encryptionKey,this.padding)}function $0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",a=t.length,r=0;r<a;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function jq(t){if(Gs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(a,r,i){if(i=i||!1,typeof a!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(a)||(e[a]={});var l=Math.random().toString(35);return e[a][l]=[r,!!i],l},this.unsubscribe=function(a){for(var r in e)if(e[r][a])return delete e[r][a],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(a){if(e.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var l in e[a]){var c=e[a][l];try{c[0].apply(t,r)}catch(n){Yn.console&&ho.error("jsPDF PubSub Error",n.message,n)}c[1]&&i.push(l)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function c2(t){if(!(this instanceof c2))return new c2(t);var e="opacity,stroke-opacity".split(",");for(var a in t)t.hasOwnProperty(a)&&e.indexOf(a)>=0&&(this[a]=t[a]);this.id="",this.objectNumber=-1}function bte(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ov(t,e,a,r,i){if(!(this instanceof ov))return new ov(t,e,a,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=a,bte.call(this,r,i)}function a_(t,e,a,r,i){if(!(this instanceof a_))return new a_(t,e,a,r,i);this.boundingBox=t,this.xStep=e,this.yStep=a,this.stream="",this.cloneIndex=0,bte.call(this,r,i)}function qn(t){var e,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],l=arguments[3],c=[],n=1,v=16,R="S",x=null;Gs(t=t||{})==="object"&&(a=t.orientation,r=t.unit||r,i=t.format||i,l=t.compress||t.compressPdf||l,(x=t.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),n=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(v=t.floatPrecision),R=t.defaultPathOperation||"S"),c=t.filters||(l===!0?["FlateEncode"]:c),r=r||"mm",a=(""+(a||"P")).toLowerCase();var N=t.putOnlyUsedFonts||!1,L={},F={internal:{},__private__:{}};F.__private__.PubSub=jq;var j="1.3",H=F.__private__.getPdfVersion=function(){return j};F.__private__.setPdfVersion=function(ce){j=ce};var q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};F.__private__.getPageFormats=function(){return q};var W=F.__private__.getPageFormat=function(ce){return q[ce]};i=i||"a4";var ee={COMPAT:"compat",ADVANCED:"advanced"},oe=ee.COMPAT;function fe(){this.saveGraphicsState(),_t(new Fe(ua,0,0,-ua,0,tu()*ua).toString()+" cm"),this.setFontSize(this.getFontSize()/ua),R="n",oe=ee.ADVANCED}function se(){this.restoreGraphicsState(),R="S",oe=ee.COMPAT}var me=F.__private__.combineFontStyleAndFontWeight=function(ce,Je){if(ce=="bold"&&Je=="normal"||ce=="bold"&&Je==400||ce=="normal"&&Je=="italic"||ce=="bold"&&Je=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Je&&(ce=Je==400||Je==="normal"?ce==="italic"?"italic":"normal":Je!=700&&Je!=="bold"||ce!=="normal"?(Je==700?"bold":Je)+""+ce:"bold"),ce};F.advancedAPI=function(ce){var Je=oe===ee.COMPAT;return Je&&fe.call(this),typeof ce!="function"||(ce(this),Je&&se.call(this)),this},F.compatAPI=function(ce){var Je=oe===ee.ADVANCED;return Je&&se.call(this),typeof ce!="function"||(ce(this),Je&&fe.call(this)),this},F.isAdvancedAPI=function(){return oe===ee.ADVANCED};var ge,Re=function(ce){if(oe!==ee.ADVANCED)throw new Error(ce+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},we=F.roundToPrecision=F.__private__.roundToPrecision=function(ce,Je){var Mt=e||Je;if(isNaN(ce)||isNaN(Mt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ce.toFixed(Mt).replace(/0+$/,"")};ge=F.hpf=F.__private__.hpf=typeof v=="number"?function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return we(ce,v)}:v==="smart"?function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return we(ce,ce>-1&&ce<1?16:5)}:function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return we(ce,16)};var Ee=F.f2=F.__private__.f2=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.f2");return we(ce,2)},ae=F.__private__.f3=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.f3");return we(ce,3)},_e=F.scale=F.__private__.scale=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.scale");return oe===ee.COMPAT?ce*ua:oe===ee.ADVANCED?ce:void 0},Ie=function(ce){return oe===ee.COMPAT?tu()-ce:oe===ee.ADVANCED?ce:void 0},xe=function(ce){return _e(Ie(ce))};F.__private__.setPrecision=F.setPrecision=function(ce){typeof parseInt(ce,10)=="number"&&(e=parseInt(ce,10))};var ze,Me="00000000000000000000000000000000",je=F.__private__.getFileId=function(){return Me},Ue=F.__private__.setFileId=function(ce){return Me=ce!==void 0&&/^[a-fA-F0-9]{32}$/.test(ce)?ce.toUpperCase():Me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(mo=new H0(x.userPermissions,x.userPassword,x.ownerPassword,Me)),Me};F.setFileId=function(ce){return Ue(ce),this},F.getFileId=function(){return je()};var Qe=F.__private__.convertDateToPDFDate=function(ce){var Je=ce.getTimezoneOffset(),Mt=Je<0?"+":"-",Jt=Math.floor(Math.abs(Je/60)),ha=Math.abs(Je%60),Da=[Mt,qe(Jt),"'",qe(ha),"'"].join("");return["D:",ce.getFullYear(),qe(ce.getMonth()+1),qe(ce.getDate()),qe(ce.getHours()),qe(ce.getMinutes()),qe(ce.getSeconds()),Da].join("")},ke=F.__private__.convertPDFDateToDate=function(ce){var Je=parseInt(ce.substr(2,4),10),Mt=parseInt(ce.substr(6,2),10)-1,Jt=parseInt(ce.substr(8,2),10),ha=parseInt(ce.substr(10,2),10),Da=parseInt(ce.substr(12,2),10),nr=parseInt(ce.substr(14,2),10);return new Date(Je,Mt,Jt,ha,Da,nr,0)},Ge=F.__private__.setCreationDate=function(ce){var Je;if(ce===void 0&&(ce=new Date),ce instanceof Date)Je=Qe(ce);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ce))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Je=ce}return ze=Je},Se=F.__private__.getCreationDate=function(ce){var Je=ze;return ce==="jsDate"&&(Je=ke(ze)),Je};F.setCreationDate=function(ce){return Ge(ce),this},F.getCreationDate=function(ce){return Se(ce)};var Te,qe=F.__private__.padd2=function(ce){return("0"+parseInt(ce)).slice(-2)},Ze=F.__private__.padd2Hex=function(ce){return("00"+(ce=ce.toString())).substr(ce.length)},lt=0,st=[],ht=[],He=0,Ae=[],zt=[],kt=!1,ma=ht,It=function(){lt=0,He=0,ht=[],st=[],Ae=[],Wt=Gt(),$t=Gt()};F.__private__.setCustomOutputDestination=function(ce){kt=!0,ma=ce};var Ht=function(ce){kt||(ma=ce)};F.__private__.resetCustomOutputDestination=function(){kt=!1,ma=ht};var _t=F.__private__.out=function(ce){return ce=ce.toString(),He+=ce.length+1,ma.push(ce),ma},ir=F.__private__.write=function(ce){return _t(arguments.length===1?ce.toString():Array.prototype.join.call(arguments," "))},Ea=F.__private__.getArrayBuffer=function(ce){for(var Je=ce.length,Mt=new ArrayBuffer(Je),Jt=new Uint8Array(Mt);Je--;)Jt[Je]=ce.charCodeAt(Je);return Mt},Na=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];F.__private__.getStandardFonts=function(){return Na};var Ja=t.fontSize||16;F.__private__.setFontSize=F.setFontSize=function(ce){return Ja=oe===ee.ADVANCED?ce/ua:ce,this};var cr,dr=F.__private__.getFontSize=F.getFontSize=function(){return oe===ee.COMPAT?Ja:Ja*ua},Sr=t.R2L||!1;F.__private__.setR2L=F.setR2L=function(ce){return Sr=ce,this},F.__private__.getR2L=F.getR2L=function(){return Sr};var ka,Gr=F.__private__.setZoomMode=function(ce){var Je=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ce))cr=ce;else if(isNaN(ce)){if(Je.indexOf(ce)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ce+'" is not recognized.');cr=ce}else cr=parseInt(ce,10)};F.__private__.getZoomMode=function(){return cr};var dn,Cn=F.__private__.setPageMode=function(ce){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ce)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ce+'" is not recognized.');ka=ce};F.__private__.getPageMode=function(){return ka};var fn=F.__private__.setLayoutMode=function(ce){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ce)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ce+'" is not recognized.');dn=ce};F.__private__.getLayoutMode=function(){return dn},F.__private__.setDisplayMode=F.setDisplayMode=function(ce,Je,Mt){return Gr(ce),fn(Je),Cn(Mt),this};var va={title:"",subject:"",author:"",keywords:"",creator:""};F.__private__.getDocumentProperty=function(ce){if(Object.keys(va).indexOf(ce)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return va[ce]},F.__private__.getDocumentProperties=function(){return va},F.__private__.setDocumentProperties=F.setProperties=F.setDocumentProperties=function(ce){for(var Je in va)va.hasOwnProperty(Je)&&ce[Je]&&(va[Je]=ce[Je]);return this},F.__private__.setDocumentProperty=function(ce,Je){if(Object.keys(va).indexOf(ce)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return va[ce]=Je};var Wa,ua,Xa,pr,Mn,Sn={},hn={},$r=[],br={},$i={},zi={},Ui={},ao=null,di=0,rn=[],Jn=new jq(F),vu=t.hotfixes||[],us={},Xt={},Ne=[],Fe=function ce(Je,Mt,Jt,ha,Da,nr){if(!(this instanceof ce))return new ce(Je,Mt,Jt,ha,Da,nr);isNaN(Je)&&(Je=1),isNaN(Mt)&&(Mt=0),isNaN(Jt)&&(Jt=0),isNaN(ha)&&(ha=1),isNaN(Da)&&(Da=0),isNaN(nr)&&(nr=0),this._matrix=[Je,Mt,Jt,ha,Da,nr]};Object.defineProperty(Fe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ce){this._matrix[0]=ce}}),Object.defineProperty(Fe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ce){this._matrix[1]=ce}}),Object.defineProperty(Fe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ce){this._matrix[2]=ce}}),Object.defineProperty(Fe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ce){this._matrix[3]=ce}}),Object.defineProperty(Fe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ce){this._matrix[4]=ce}}),Object.defineProperty(Fe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ce){this._matrix[5]=ce}}),Object.defineProperty(Fe.prototype,"a",{get:function(){return this._matrix[0]},set:function(ce){this._matrix[0]=ce}}),Object.defineProperty(Fe.prototype,"b",{get:function(){return this._matrix[1]},set:function(ce){this._matrix[1]=ce}}),Object.defineProperty(Fe.prototype,"c",{get:function(){return this._matrix[2]},set:function(ce){this._matrix[2]=ce}}),Object.defineProperty(Fe.prototype,"d",{get:function(){return this._matrix[3]},set:function(ce){this._matrix[3]=ce}}),Object.defineProperty(Fe.prototype,"e",{get:function(){return this._matrix[4]},set:function(ce){this._matrix[4]=ce}}),Object.defineProperty(Fe.prototype,"f",{get:function(){return this._matrix[5]},set:function(ce){this._matrix[5]=ce}}),Object.defineProperty(Fe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Fe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Fe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Fe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Fe.prototype.join=function(ce){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ge).join(ce)},Fe.prototype.multiply=function(ce){var Je=ce.sx*this.sx+ce.shy*this.shx,Mt=ce.sx*this.shy+ce.shy*this.sy,Jt=ce.shx*this.sx+ce.sy*this.shx,ha=ce.shx*this.shy+ce.sy*this.sy,Da=ce.tx*this.sx+ce.ty*this.shx+this.tx,nr=ce.tx*this.shy+ce.ty*this.sy+this.ty;return new Fe(Je,Mt,Jt,ha,Da,nr)},Fe.prototype.decompose=function(){var ce=this.sx,Je=this.shy,Mt=this.shx,Jt=this.sy,ha=this.tx,Da=this.ty,nr=Math.sqrt(ce*ce+Je*Je),Rr=(ce/=nr)*Mt+(Je/=nr)*Jt;Mt-=ce*Rr,Jt-=Je*Rr;var Wr=Math.sqrt(Mt*Mt+Jt*Jt);return Rr/=Wr,ce*(Jt/=Wr)<Je*(Mt/=Wr)&&(ce=-ce,Je=-Je,Rr=-Rr,nr=-nr),{scale:new Fe(nr,0,0,Wr,0,0),translate:new Fe(1,0,0,1,ha,Da),rotate:new Fe(ce,Je,-Je,ce,0,0),skew:new Fe(1,0,Rr,1,0,0)}},Fe.prototype.toString=function(ce){return this.join(" ")},Fe.prototype.inversed=function(){var ce=this.sx,Je=this.shy,Mt=this.shx,Jt=this.sy,ha=this.tx,Da=this.ty,nr=1/(ce*Jt-Je*Mt),Rr=Jt*nr,Wr=-Je*nr,xn=-Mt*nr,zn=ce*nr;return new Fe(Rr,Wr,xn,zn,-Rr*ha-xn*Da,-Wr*ha-zn*Da)},Fe.prototype.applyToPoint=function(ce){var Je=ce.x*this.sx+ce.y*this.shx+this.tx,Mt=ce.x*this.shy+ce.y*this.sy+this.ty;return new Tu(Je,Mt)},Fe.prototype.applyToRectangle=function(ce){var Je=this.applyToPoint(ce),Mt=this.applyToPoint(new Tu(ce.x+ce.w,ce.y+ce.h));return new Cu(Je.x,Je.y,Mt.x-Je.x,Mt.y-Je.y)},Fe.prototype.clone=function(){var ce=this.sx,Je=this.shy,Mt=this.shx,Jt=this.sy,ha=this.tx,Da=this.ty;return new Fe(ce,Je,Mt,Jt,ha,Da)},F.Matrix=Fe;var Xe=F.matrixMult=function(ce,Je){return Je.multiply(ce)},wt=new Fe(1,0,0,1,0,0);F.unitMatrix=F.identityMatrix=wt;var yt=function(ce,Je){if(!$i[ce]){var Mt=(Je instanceof ov?"Sh":"P")+(Object.keys(br).length+1).toString(10);Je.id=Mt,$i[ce]=Mt,br[Mt]=Je,Jn.publish("addPattern",Je)}};F.ShadingPattern=ov,F.TilingPattern=a_,F.addShadingPattern=function(ce,Je){return Re("addShadingPattern()"),yt(ce,Je),this},F.beginTilingPattern=function(ce){Re("beginTilingPattern()"),eu(ce.boundingBox[0],ce.boundingBox[1],ce.boundingBox[2]-ce.boundingBox[0],ce.boundingBox[3]-ce.boundingBox[1],ce.matrix)},F.endTilingPattern=function(ce,Je){Re("endTilingPattern()"),Je.stream=zt[Te].join(`
`),yt(ce,Je),Jn.publish("endTilingPattern",Je),Ne.pop().restore()};var bt=F.__private__.newObject=function(){var ce=Gt();return Et(ce,!0),ce},Gt=F.__private__.newObjectDeferred=function(){return lt++,st[lt]=function(){return He},lt},Et=function(ce,Je){return Je=typeof Je=="boolean"&&Je,st[ce]=He,Je&&_t(ce+" 0 obj"),ce},Kt=F.__private__.newAdditionalObject=function(){var ce={objId:Gt(),content:""};return Ae.push(ce),ce},Wt=Gt(),$t=Gt(),Ta=F.__private__.decodeColorString=function(ce){var Je=ce.split(" ");if(Je.length!==2||Je[1]!=="g"&&Je[1]!=="G")Je.length===5&&(Je[4]==="k"||Je[4]==="K")&&(Je=[(1-Je[0])*(1-Je[3]),(1-Je[1])*(1-Je[3]),(1-Je[2])*(1-Je[3]),"r"]);else{var Mt=parseFloat(Je[0]);Je=[Mt,Mt,Mt,"r"]}for(var Jt="#",ha=0;ha<3;ha++)Jt+=("0"+Math.floor(255*parseFloat(Je[ha])).toString(16)).slice(-2);return Jt},Ma=F.__private__.encodeColorString=function(ce){var Je;typeof ce=="string"&&(ce={ch1:ce});var Mt=ce.ch1,Jt=ce.ch2,ha=ce.ch3,Da=ce.ch4,nr=ce.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Mt=="string"&&Mt.charAt(0)!=="#"){var Rr=new Cte(Mt);if(Rr.ok)Mt=Rr.toHex();else if(!/^\d*\.?\d*$/.test(Mt))throw new Error('Invalid color "'+Mt+'" passed to jsPDF.encodeColorString.')}if(typeof Mt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Mt)&&(Mt="#"+Mt[1]+Mt[1]+Mt[2]+Mt[2]+Mt[3]+Mt[3]),typeof Mt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Mt)){var Wr=parseInt(Mt.substr(1),16);Mt=Wr>>16&255,Jt=Wr>>8&255,ha=255&Wr}if(Jt===void 0||Da===void 0&&Mt===Jt&&Jt===ha)if(typeof Mt=="string")Je=Mt+" "+nr[0];else switch(ce.precision){case 2:Je=Ee(Mt/255)+" "+nr[0];break;case 3:default:Je=ae(Mt/255)+" "+nr[0]}else if(Da===void 0||Gs(Da)==="object"){if(Da&&!isNaN(Da.a)&&Da.a===0)return Je=["1.","1.","1.",nr[1]].join(" ");if(typeof Mt=="string")Je=[Mt,Jt,ha,nr[1]].join(" ");else switch(ce.precision){case 2:Je=[Ee(Mt/255),Ee(Jt/255),Ee(ha/255),nr[1]].join(" ");break;default:case 3:Je=[ae(Mt/255),ae(Jt/255),ae(ha/255),nr[1]].join(" ")}}else if(typeof Mt=="string")Je=[Mt,Jt,ha,Da,nr[2]].join(" ");else switch(ce.precision){case 2:Je=[Ee(Mt),Ee(Jt),Ee(ha),Ee(Da),nr[2]].join(" ");break;case 3:default:Je=[ae(Mt),ae(Jt),ae(ha),ae(Da),nr[2]].join(" ")}return Je},ja=F.__private__.getFilters=function(){return c},_r=F.__private__.putStream=function(ce){var Je=(ce=ce||{}).data||"",Mt=ce.filters||ja(),Jt=ce.alreadyAppliedFilters||[],ha=ce.addLength1||!1,Da=Je.length,nr=ce.objectId,Rr=function(is){return is};if(x!==null&&nr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(Rr=mo.encryptor(nr,0));var Wr={};Mt===!0&&(Mt=["FlateEncode"]);var xn=ce.additionalKeyValues||[],zn=(Wr=qn.API.processDataByFilters!==void 0?qn.API.processDataByFilters(Je,Mt):{data:Je,reverseChain:[]}).reverseChain+(Array.isArray(Jt)?Jt.join(" "):Jt.toString());if(Wr.data.length!==0&&(xn.push({key:"Length",value:Wr.data.length}),ha===!0&&xn.push({key:"Length1",value:Da})),zn.length!=0)if(zn.split("/").length-1==1)xn.push({key:"Filter",value:zn});else{xn.push({key:"Filter",value:"["+zn+"]"});for(var yi=0;yi<xn.length;yi+=1)if(xn[yi].key==="DecodeParms"){for(var Os=[],Vs=0;Vs<Wr.reverseChain.split("/").length-1;Vs+=1)Os.push("null");Os.push(xn[yi].value),xn[yi].value="["+Os.join(" ")+"]"}}_t("<<");for(var no=0;no<xn.length;no++)_t("/"+xn[no].key+" "+xn[no].value);_t(">>"),Wr.data.length!==0&&(_t("stream"),_t(Rr(Wr.data)),_t("endstream"))},Vr=F.__private__.putPage=function(ce){var Je=ce.number,Mt=ce.data,Jt=ce.objId,ha=ce.contentsObjId;Et(Jt,!0),_t("<</Type /Page"),_t("/Parent "+ce.rootDictionaryObjId+" 0 R"),_t("/Resources "+ce.resourceDictionaryObjId+" 0 R"),_t("/MediaBox ["+parseFloat(ge(ce.mediaBox.bottomLeftX))+" "+parseFloat(ge(ce.mediaBox.bottomLeftY))+" "+ge(ce.mediaBox.topRightX)+" "+ge(ce.mediaBox.topRightY)+"]"),ce.cropBox!==null&&_t("/CropBox ["+ge(ce.cropBox.bottomLeftX)+" "+ge(ce.cropBox.bottomLeftY)+" "+ge(ce.cropBox.topRightX)+" "+ge(ce.cropBox.topRightY)+"]"),ce.bleedBox!==null&&_t("/BleedBox ["+ge(ce.bleedBox.bottomLeftX)+" "+ge(ce.bleedBox.bottomLeftY)+" "+ge(ce.bleedBox.topRightX)+" "+ge(ce.bleedBox.topRightY)+"]"),ce.trimBox!==null&&_t("/TrimBox ["+ge(ce.trimBox.bottomLeftX)+" "+ge(ce.trimBox.bottomLeftY)+" "+ge(ce.trimBox.topRightX)+" "+ge(ce.trimBox.topRightY)+"]"),ce.artBox!==null&&_t("/ArtBox ["+ge(ce.artBox.bottomLeftX)+" "+ge(ce.artBox.bottomLeftY)+" "+ge(ce.artBox.topRightX)+" "+ge(ce.artBox.topRightY)+"]"),typeof ce.userUnit=="number"&&ce.userUnit!==1&&_t("/UserUnit "+ce.userUnit),Jn.publish("putPage",{objId:Jt,pageContext:rn[Je],pageNumber:Je,page:Mt}),_t("/Contents "+ha+" 0 R"),_t(">>"),_t("endobj");var Da=Mt.join(`
`);return oe===ee.ADVANCED&&(Da+=`
Q`),Et(ha,!0),_r({data:Da,filters:ja(),objectId:ha}),_t("endobj"),Jt},zr=F.__private__.putPages=function(){var ce,Je,Mt=[];for(ce=1;ce<=di;ce++)rn[ce].objId=Gt(),rn[ce].contentsObjId=Gt();for(ce=1;ce<=di;ce++)Mt.push(Vr({number:ce,data:zt[ce],objId:rn[ce].objId,contentsObjId:rn[ce].contentsObjId,mediaBox:rn[ce].mediaBox,cropBox:rn[ce].cropBox,bleedBox:rn[ce].bleedBox,trimBox:rn[ce].trimBox,artBox:rn[ce].artBox,userUnit:rn[ce].userUnit,rootDictionaryObjId:Wt,resourceDictionaryObjId:$t}));Et(Wt,!0),_t("<</Type /Pages");var Jt="/Kids [";for(Je=0;Je<di;Je++)Jt+=Mt[Je]+" 0 R ";_t(Jt+"]"),_t("/Count "+di),_t(">>"),_t("endobj"),Jn.publish("postPutPages")},Zr=function(ce){Jn.publish("putFont",{font:ce,out:_t,newObject:bt,putStream:_r}),ce.isAlreadyPutted!==!0&&(ce.objectNumber=bt(),_t("<<"),_t("/Type /Font"),_t("/BaseFont /"+$0(ce.postScriptName)),_t("/Subtype /Type1"),typeof ce.encoding=="string"&&_t("/Encoding /"+ce.encoding),_t("/FirstChar 32"),_t("/LastChar 255"),_t(">>"),_t("endobj"))},In=function(){for(var ce in Sn)Sn.hasOwnProperty(ce)&&(N===!1||N===!0&&L.hasOwnProperty(ce))&&Zr(Sn[ce])},ei=function(ce){ce.objectNumber=bt();var Je=[];Je.push({key:"Type",value:"/XObject"}),Je.push({key:"Subtype",value:"/Form"}),Je.push({key:"BBox",value:"["+[ge(ce.x),ge(ce.y),ge(ce.x+ce.width),ge(ce.y+ce.height)].join(" ")+"]"}),Je.push({key:"Matrix",value:"["+ce.matrix.toString()+"]"});var Mt=ce.pages[1].join(`
`);_r({data:Mt,additionalKeyValues:Je,objectId:ce.objectNumber}),_t("endobj")},Hr=function(){for(var ce in us)us.hasOwnProperty(ce)&&ei(us[ce])},An=function(ce,Je){var Mt,Jt=[],ha=1/(Je-1);for(Mt=0;Mt<1;Mt+=ha)Jt.push(Mt);if(Jt.push(1),ce[0].offset!=0){var Da={offset:0,color:ce[0].color};ce.unshift(Da)}if(ce[ce.length-1].offset!=1){var nr={offset:1,color:ce[ce.length-1].color};ce.push(nr)}for(var Rr="",Wr=0,xn=0;xn<Jt.length;xn++){for(Mt=Jt[xn];Mt>ce[Wr+1].offset;)Wr++;var zn=ce[Wr].offset,yi=(Mt-zn)/(ce[Wr+1].offset-zn),Os=ce[Wr].color,Vs=ce[Wr+1].color;Rr+=Ze(Math.round((1-yi)*Os[0]+yi*Vs[0]).toString(16))+Ze(Math.round((1-yi)*Os[1]+yi*Vs[1]).toString(16))+Ze(Math.round((1-yi)*Os[2]+yi*Vs[2]).toString(16))}return Rr.trim()},Kr=function(ce,Je){Je||(Je=21);var Mt=bt(),Jt=An(ce.colors,Je),ha=[];ha.push({key:"FunctionType",value:"0"}),ha.push({key:"Domain",value:"[0.0 1.0]"}),ha.push({key:"Size",value:"["+Je+"]"}),ha.push({key:"BitsPerSample",value:"8"}),ha.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ha.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_r({data:Jt,additionalKeyValues:ha,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Mt}),_t("endobj"),ce.objectNumber=bt(),_t("<< /ShadingType "+ce.type),_t("/ColorSpace /DeviceRGB");var Da="/Coords ["+ge(parseFloat(ce.coords[0]))+" "+ge(parseFloat(ce.coords[1]))+" ";ce.type===2?Da+=ge(parseFloat(ce.coords[2]))+" "+ge(parseFloat(ce.coords[3])):Da+=ge(parseFloat(ce.coords[2]))+" "+ge(parseFloat(ce.coords[3]))+" "+ge(parseFloat(ce.coords[4]))+" "+ge(parseFloat(ce.coords[5])),_t(Da+="]"),ce.matrix&&_t("/Matrix ["+ce.matrix.toString()+"]"),_t("/Function "+Mt+" 0 R"),_t("/Extend [true true]"),_t(">>"),_t("endobj")},Fn=function(ce,Je){var Mt=Gt(),Jt=bt();Je.push({resourcesOid:Mt,objectOid:Jt}),ce.objectNumber=Jt;var ha=[];ha.push({key:"Type",value:"/Pattern"}),ha.push({key:"PatternType",value:"1"}),ha.push({key:"PaintType",value:"1"}),ha.push({key:"TilingType",value:"1"}),ha.push({key:"BBox",value:"["+ce.boundingBox.map(ge).join(" ")+"]"}),ha.push({key:"XStep",value:ge(ce.xStep)}),ha.push({key:"YStep",value:ge(ce.yStep)}),ha.push({key:"Resources",value:Mt+" 0 R"}),ce.matrix&&ha.push({key:"Matrix",value:"["+ce.matrix.toString()+"]"}),_r({data:ce.stream,additionalKeyValues:ha,objectId:ce.objectNumber}),_t("endobj")},Di=function(ce){var Je;for(Je in br)br.hasOwnProperty(Je)&&(br[Je]instanceof ov?Kr(br[Je]):br[Je]instanceof a_&&Fn(br[Je],ce))},Ki=function(ce){for(var Je in ce.objectNumber=bt(),_t("<<"),ce)switch(Je){case"opacity":_t("/ca "+Ee(ce[Je]));break;case"stroke-opacity":_t("/CA "+Ee(ce[Je]))}_t(">>"),_t("endobj")},bs=function(){var ce;for(ce in zi)zi.hasOwnProperty(ce)&&Ki(zi[ce])},xs=function(){for(var ce in _t("/XObject <<"),us)us.hasOwnProperty(ce)&&us[ce].objectNumber>=0&&_t("/"+ce+" "+us[ce].objectNumber+" 0 R");Jn.publish("putXobjectDict"),_t(">>")},Uo=function(){mo.oid=bt(),_t("<<"),_t("/Filter /Standard"),_t("/V "+mo.v),_t("/R "+mo.r),_t("/U <"+mo.toHexString(mo.U)+">"),_t("/O <"+mo.toHexString(mo.O)+">"),_t("/P "+mo.P),_t(">>"),_t("endobj")},Ps=function(){for(var ce in _t("/Font <<"),Sn)Sn.hasOwnProperty(ce)&&(N===!1||N===!0&&L.hasOwnProperty(ce))&&_t("/"+ce+" "+Sn[ce].objectNumber+" 0 R");_t(">>")},qs=function(){if(Object.keys(br).length>0){for(var ce in _t("/Shading <<"),br)br.hasOwnProperty(ce)&&br[ce]instanceof ov&&br[ce].objectNumber>=0&&_t("/"+ce+" "+br[ce].objectNumber+" 0 R");Jn.publish("putShadingPatternDict"),_t(">>")}},fc=function(ce){if(Object.keys(br).length>0){for(var Je in _t("/Pattern <<"),br)br.hasOwnProperty(Je)&&br[Je]instanceof F.TilingPattern&&br[Je].objectNumber>=0&&br[Je].objectNumber<ce&&_t("/"+Je+" "+br[Je].objectNumber+" 0 R");Jn.publish("putTilingPatternDict"),_t(">>")}},el=function(){if(Object.keys(zi).length>0){var ce;for(ce in _t("/ExtGState <<"),zi)zi.hasOwnProperty(ce)&&zi[ce].objectNumber>=0&&_t("/"+ce+" "+zi[ce].objectNumber+" 0 R");Jn.publish("putGStateDict"),_t(">>")}},Mi=function(ce){Et(ce.resourcesOid,!0),_t("<<"),_t("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ps(),qs(),fc(ce.objectOid),el(),xs(),_t(">>"),_t("endobj")},Yl=function(){var ce=[];In(),bs(),Hr(),Di(ce),Jn.publish("putResources"),ce.forEach(Mi),Mi({resourcesOid:$t,objectOid:Number.MAX_SAFE_INTEGER}),Jn.publish("postPutResources")},Bo=function(){Jn.publish("putAdditionalObjects");for(var ce=0;ce<Ae.length;ce++){var Je=Ae[ce];Et(Je.objId,!0),_t(Je.content),_t("endobj")}Jn.publish("postPutAdditionalObjects")},Pd=function(ce){hn[ce.fontName]=hn[ce.fontName]||{},hn[ce.fontName][ce.fontStyle]=ce.id},Fc=function(ce,Je,Mt,Jt,ha){var Da={id:"F"+(Object.keys(Sn).length+1).toString(10),postScriptName:ce,fontName:Je,fontStyle:Mt,encoding:Jt,isStandardFont:ha||!1,metadata:{}};return Jn.publish("addFont",{font:Da,instance:this}),Sn[Da.id]=Da,Pd(Da),Da.id},fh=function(ce){for(var Je=0,Mt=Na.length;Je<Mt;Je++){var Jt=Fc.call(this,ce[Je][0],ce[Je][1],ce[Je][2],Na[Je][3],!0);N===!1&&(L[Jt]=!0);var ha=ce[Je][0].split("-");Pd({id:Jt,fontName:ha[0],fontStyle:ha[1]||""})}Jn.publish("addFonts",{fonts:Sn,dictionary:hn})},_u=function(ce){return ce.foo=function(){try{return ce.apply(this,arguments)}catch(Jt){var Je=Jt.stack||"";~Je.indexOf(" at ")&&(Je=Je.split(" at ")[1]);var Mt="Error in function "+Je.split(`
`)[0].split("<")[0]+": "+Jt.message;if(!Yn.console)throw new Error(Mt);Yn.console.error(Mt,Jt),Yn.alert&&alert(Mt)}},ce.foo.bar=ce,ce.foo},kc=function(ce,Je){var Mt,Jt,ha,Da,nr,Rr,Wr,xn,zn;if(ha=(Je=Je||{}).sourceEncoding||"Unicode",nr=Je.outputEncoding,(Je.autoencode||nr)&&Sn[Wa].metadata&&Sn[Wa].metadata[ha]&&Sn[Wa].metadata[ha].encoding&&(Da=Sn[Wa].metadata[ha].encoding,!nr&&Sn[Wa].encoding&&(nr=Sn[Wa].encoding),!nr&&Da.codePages&&(nr=Da.codePages[0]),typeof nr=="string"&&(nr=Da[nr]),nr)){for(Wr=!1,Rr=[],Mt=0,Jt=ce.length;Mt<Jt;Mt++)(xn=nr[ce.charCodeAt(Mt)])?Rr.push(String.fromCharCode(xn)):Rr.push(ce[Mt]),Rr[Mt].charCodeAt(0)>>8&&(Wr=!0);ce=Rr.join("")}for(Mt=ce.length;Wr===void 0&&Mt!==0;)ce.charCodeAt(Mt-1)>>8&&(Wr=!0),Mt--;if(!Wr)return ce;for(Rr=Je.noBOM?[]:[254,255],Mt=0,Jt=ce.length;Mt<Jt;Mt++){if((zn=(xn=ce.charCodeAt(Mt))>>8)>>8)throw new Error("Character at position "+Mt+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rr.push(zn),Rr.push(xn-(zn<<8))}return String.fromCharCode.apply(void 0,Rr)},yl=F.__private__.pdfEscape=F.pdfEscape=function(ce,Je){return kc(ce,Je).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ro=F.__private__.beginPage=function(ce){zt[++di]=[],rn[di]={objId:0,contentsObjId:0,userUnit:Number(n),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ce[0]),topRightY:Number(ce[1])}},wu(di),Ht(zt[Te])},jo=function(ce,Je){var Mt,Jt,ha;switch(a=Je||a,typeof ce=="string"&&(Mt=W(ce.toLowerCase()),Array.isArray(Mt)&&(Jt=Mt[0],ha=Mt[1])),Array.isArray(ce)&&(Jt=ce[0]*ua,ha=ce[1]*ua),isNaN(Jt)&&(Jt=i[0],ha=i[1]),(Jt>14400||ha>14400)&&(ho.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Jt=Math.min(14400,Jt),ha=Math.min(14400,ha)),i=[Jt,ha],a.substr(0,1)){case"l":ha>Jt&&(i=[ha,Jt]);break;case"p":Jt>ha&&(i=[ha,Jt])}ro(i),Od(Ei),_t(Vl),Bh!==0&&_t(Bh+" J"),Ho!==0&&_t(Ho+" j"),Jn.publish("addPage",{pageNumber:di})},Xl=function(ce){ce>0&&ce<=di&&(zt.splice(ce,1),rn.splice(ce,1),di--,Te>di&&(Te=di),this.setPage(Te))},wu=function(ce){ce>0&&ce<=di&&(Te=ce)},po=F.__private__.getNumberOfPages=F.getNumberOfPages=function(){return zt.length-1},Go=function(ce,Je,Mt){var Jt,ha=void 0;return Mt=Mt||{},ce=ce!==void 0?ce:Sn[Wa].fontName,Je=Je!==void 0?Je:Sn[Wa].fontStyle,Jt=ce.toLowerCase(),hn[Jt]!==void 0&&hn[Jt][Je]!==void 0?ha=hn[Jt][Je]:hn[ce]!==void 0&&hn[ce][Je]!==void 0?ha=hn[ce][Je]:Mt.disableWarning===!1&&ho.warn("Unable to look up font label for font '"+ce+"', '"+Je+"'. Refer to getFontList() for available fonts."),ha||Mt.noFallback||(ha=hn.times[Je])==null&&(ha=hn.times.normal),ha},Ed=F.__private__.putInfo=function(){var ce=bt(),Je=function(Jt){return Jt};for(var Mt in x!==null&&(Je=mo.encryptor(ce,0)),_t("<<"),_t("/Producer ("+yl(Je("jsPDF "+qn.version))+")"),va)va.hasOwnProperty(Mt)&&va[Mt]&&_t("/"+Mt.substr(0,1).toUpperCase()+Mt.substr(1)+" ("+yl(Je(va[Mt]))+")");_t("/CreationDate ("+yl(Je(ze))+")"),_t(">>"),_t("endobj")},$u=F.__private__.putCatalog=function(ce){var Je=(ce=ce||{}).rootDictionaryObjId||Wt;switch(bt(),_t("<<"),_t("/Type /Catalog"),_t("/Pages "+Je+" 0 R"),cr||(cr="fullwidth"),cr){case"fullwidth":_t("/OpenAction [3 0 R /FitH null]");break;case"fullheight":_t("/OpenAction [3 0 R /FitV null]");break;case"fullpage":_t("/OpenAction [3 0 R /Fit]");break;case"original":_t("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Mt=""+cr;Mt.substr(Mt.length-1)==="%"&&(cr=parseInt(cr)/100),typeof cr=="number"&&_t("/OpenAction [3 0 R /XYZ null null "+Ee(cr)+"]")}switch(dn||(dn="continuous"),dn){case"continuous":_t("/PageLayout /OneColumn");break;case"single":_t("/PageLayout /SinglePage");break;case"two":case"twoleft":_t("/PageLayout /TwoColumnLeft");break;case"tworight":_t("/PageLayout /TwoColumnRight")}ka&&_t("/PageMode /"+ka),Jn.publish("putCatalog"),_t(">>"),_t("endobj")},Rf=F.__private__.putTrailer=function(){_t("trailer"),_t("<<"),_t("/Size "+(lt+1)),_t("/Root "+lt+" 0 R"),_t("/Info "+(lt-1)+" 0 R"),x!==null&&_t("/Encrypt "+mo.oid+" 0 R"),_t("/ID [ <"+Me+"> <"+Me+"> ]"),_t(">>")},Jl=F.__private__.putHeader=function(){_t("%PDF-"+j),_t("%")},Zo=F.__private__.putXRef=function(){var ce="0000000000";_t("xref"),_t("0 "+(lt+1)),_t("0000000000 65535 f ");for(var Je=1;Je<=lt;Je++)typeof st[Je]=="function"?_t((ce+st[Je]()).slice(-10)+" 00000 n "):st[Je]!==void 0?_t((ce+st[Je]).slice(-10)+" 00000 n "):_t("0000000000 00000 n ")},Ku=F.__private__.buildDocument=function(){It(),Ht(ht),Jn.publish("buildDocument"),Jl(),zr(),Bo(),Yl(),x!==null&&Uo(),Ed(),$u();var ce=He;return Zo(),Rf(),_t("startxref"),_t(""+ce),_t("%%EOF"),Ht(zt[Te]),ht.join(`
`)},ph=F.__private__.getBlob=function(ce){return new Blob([Ea(ce)],{type:"application/pdf"})},tl=F.output=F.__private__.output=_u(function(ce,Je){switch(typeof(Je=Je||{})=="string"?Je={filename:Je}:Je.filename=Je.filename||"generated.pdf",ce){case void 0:return Ku();case"save":F.save(Je.filename);break;case"arraybuffer":return Ea(Ku());case"blob":return ph(Ku());case"bloburi":case"bloburl":if(Yn.URL!==void 0&&typeof Yn.URL.createObjectURL=="function")return Yn.URL&&Yn.URL.createObjectURL(ph(Ku()))||void 0;ho.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Mt="",Jt=Ku();try{Mt=qI(Jt)}catch{Mt=qI(unescape(encodeURIComponent(Jt)))}return"data:application/pdf;filename="+Je.filename+";base64,"+Mt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yn)==="[object Window]"){var ha="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Da=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Je.pdfObjectUrl&&(ha=Je.pdfObjectUrl,Da="");var nr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ha+'"'+Da+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Je)+");<\/script></body></html>",Rr=Yn.open();return Rr!==null&&Rr.document.write(nr),Rr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yn)==="[object Window]"){var Wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Je.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Je.filename+'" width="500px" height="400px" /></body></html>',xn=Yn.open();if(xn!==null){xn.document.write(Wr);var zn=this;xn.document.documentElement.querySelector("#pdfViewer").onload=function(){xn.document.title=Je.filename,xn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(zn.output("bloburl"))}}return xn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Je)+'"></iframe></body></html>',Os=Yn.open();if(Os!==null&&(Os.document.write(yi),Os.document.title=Je.filename),Os||typeof safari>"u")return Os;break;case"datauri":case"dataurl":return Yn.document.location.href=this.output("datauristring",Je);default:return null}}),En=function(ce){return Array.isArray(vu)===!0&&vu.indexOf(ce)>-1};switch(r){case"pt":ua=1;break;case"mm":ua=72/25.4;break;case"cm":ua=72/2.54;break;case"in":ua=72;break;case"px":ua=En("px_scaling")==1?.75:96/72;break;case"pc":case"em":ua=12;break;case"ex":ua=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ua=r}var mo=null;Ge(),Ue();var mr=function(ce){return x!==null?mo.encryptor(ce,0):function(Je){return Je}},Uc=F.__private__.getPageInfo=F.getPageInfo=function(ce){if(isNaN(ce)||ce%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rn[ce].objId,pageNumber:ce,pageContext:rn[ce]}},vn=F.__private__.getPageInfoByObjId=function(ce){if(isNaN(ce)||ce%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Je in rn)if(rn[Je].objId===ce)break;return Uc(Je)},mh=F.__private__.getCurrentPageInfo=F.getCurrentPageInfo=function(){return{objId:rn[Te].objId,pageNumber:Te,pageContext:rn[Te]}};F.addPage=function(){return jo.apply(this,arguments),this},F.setPage=function(){return wu.apply(this,arguments),Ht.call(this,zt[Te]),this},F.insertPage=function(ce){return this.addPage(),this.movePage(Te,ce),this},F.movePage=function(ce,Je){var Mt,Jt;if(ce>Je){Mt=zt[ce],Jt=rn[ce];for(var ha=ce;ha>Je;ha--)zt[ha]=zt[ha-1],rn[ha]=rn[ha-1];zt[Je]=Mt,rn[Je]=Jt,this.setPage(Je)}else if(ce<Je){Mt=zt[ce],Jt=rn[ce];for(var Da=ce;Da<Je;Da++)zt[Da]=zt[Da+1],rn[Da]=rn[Da+1];zt[Je]=Mt,rn[Je]=Jt,this.setPage(Je)}return this},F.deletePage=function(){return Xl.apply(this,arguments),this},F.__private__.text=F.text=function(ce,Je,Mt,Jt,ha){var Da,nr,Rr,Wr,xn,zn,yi,Os,Vs,no=(Jt=Jt||{}).scope||this;if(typeof ce=="number"&&typeof Je=="number"&&(typeof Mt=="string"||Array.isArray(Mt))){var is=Mt;Mt=Je,Je=ce,ce=is}if(arguments[3]instanceof Fe?(Re("The transform parameter of text() with a Matrix value"),Vs=ha):(Rr=arguments[4],Wr=arguments[5],Gs(yi=arguments[3])==="object"&&yi!==null||(typeof Rr=="string"&&(Wr=Rr,Rr=null),typeof yi=="string"&&(Wr=yi,yi=null),typeof yi=="number"&&(Rr=yi,yi=null),Jt={flags:yi,angle:Rr,align:Wr})),isNaN(Je)||isNaN(Mt)||ce==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ce.length===0)return no;var Nr="",or=!1,Al=typeof Jt.lineHeightFactor=="number"?Jt.lineHeightFactor:Gi,Tr=no.internal.scaleFactor;function Su(Qn){return Qn=Qn.split("	").join(Array(Jt.TabLen||9).join(" ")),yl(Qn,yi)}function au(Qn){for(var ni,Xi=Qn.concat(),ds=[],iu=Xi.length;iu--;)typeof(ni=Xi.shift())=="string"?ds.push(ni):Array.isArray(Qn)&&(ni.length===1||ni[1]===void 0&&ni[2]===void 0)?ds.push(ni[0]):ds.push([ni[0],ni[1],ni[2]]);return ds}function wr(Qn,ni){var Xi;if(typeof Qn=="string")Xi=ni(Qn)[0];else if(Array.isArray(Qn)){for(var ds,iu,Hc=Qn.concat(),nl=[],su=Hc.length;su--;)typeof(ds=Hc.shift())=="string"?nl.push(ni(ds)[0]):Array.isArray(ds)&&typeof ds[0]=="string"&&(iu=ni(ds[0],ds[1],ds[2]),nl.push([iu[0],iu[1],iu[2]]));Xi=nl}return Xi}var yh=!1,ru=!0;if(typeof ce=="string")yh=!0;else if(Array.isArray(ce)){var Ac=ce.concat();nr=[];for(var Dd,zs=Ac.length;zs--;)(typeof(Dd=Ac.shift())!="string"||Array.isArray(Dd)&&typeof Dd[0]!="string")&&(ru=!1);yh=ru}if(yh===!1)throw new Error('Type of text must be string or Array. "'+ce+'" is not recognized.');typeof ce=="string"&&(ce=ce.match(/[\r?\n]/)?ce.split(/\r\n|\r|\n/g):[ce]);var wi=Ja/no.internal.scaleFactor,vc=wi*(Al-1);switch(Jt.baseline){case"bottom":Mt-=vc;break;case"top":Mt+=wi-vc;break;case"hanging":Mt+=wi-2*vc;break;case"middle":Mt+=wi/2-vc}if((zn=Jt.maxWidth||0)>0&&(typeof ce=="string"?ce=no.splitTextToSize(ce,zn):Object.prototype.toString.call(ce)==="[object Array]"&&(ce=ce.reduce(function(Qn,ni){return Qn.concat(no.splitTextToSize(ni,zn))},[]))),Da={text:ce,x:Je,y:Mt,options:Jt,mutex:{pdfEscape:yl,activeFontKey:Wa,fonts:Sn,activeFontSize:Ja}},Jn.publish("preProcessText",Da),ce=Da.text,Rr=(Jt=Da.options).angle,!(Vs instanceof Fe)&&Rr&&typeof Rr=="number"){Rr*=Math.PI/180,Jt.rotationDirection===0&&(Rr=-Rr),oe===ee.ADVANCED&&(Rr=-Rr);var Va=Math.cos(Rr),Md=Math.sin(Rr);Vs=new Fe(Va,Md,-Md,Va,0,0)}else Rr&&Rr instanceof Fe&&(Vs=Rr);oe!==ee.ADVANCED||Vs||(Vs=wt),(xn=Jt.charSpace||Ql)!==void 0&&(Nr+=ge(_e(xn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Os=Jt.horizontalScale)!==void 0&&(Nr+=ge(100*Os)+` Tz
`),Jt.lang;var Ys=-1,yo=Jt.renderingMode!==void 0?Jt.renderingMode:Jt.stroke,Sf=no.internal.getCurrentPageInfo().pageContext;switch(yo){case 0:case!1:case"fill":Ys=0;break;case 1:case!0:case"stroke":Ys=1;break;case 2:case"fillThenStroke":Ys=2;break;case 3:case"invisible":Ys=3;break;case 4:case"fillAndAddForClipping":Ys=4;break;case 5:case"strokeAndAddPathForClipping":Ys=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ys=6;break;case 7:case"addToPathForClipping":Ys=7}var jh=Sf.usedRenderingMode!==void 0?Sf.usedRenderingMode:-1;Ys!==-1?Nr+=Ys+` Tr
`:jh!==-1&&(Nr+=`0 Tr
`),Ys!==-1&&(Sf.usedRenderingMode=Ys),Wr=Jt.align||"left";var Ao,Us=Ja*Al,zl=no.internal.pageSize.getWidth(),Bc=Sn[Wa];xn=Jt.charSpace||Ql,zn=Jt.maxWidth||0,yi=Object.assign({autoencode:!0,noBOM:!0},Jt.flags);var nu=[],Ah=function(Qn){return no.getStringUnitWidth(Qn,{font:Bc,charSpace:xn,fontSize:Ja,doKerning:!1})*Ja/Tr};if(Object.prototype.toString.call(ce)==="[object Array]"){var Dl;nr=au(ce),Wr!=="left"&&(Ao=nr.map(Ah));var Po,Id=0;if(Wr==="right"){Je-=Ao[0],ce=[],zs=nr.length;for(var jc=0;jc<zs;jc++)jc===0?(Po=al(Je),Dl=ms(Mt)):(Po=_e(Id-Ao[jc]),Dl=-Us),ce.push([nr[jc],Po,Dl]),Id=Ao[jc]}else if(Wr==="center"){Je-=Ao[0]/2,ce=[],zs=nr.length;for(var Ml=0;Ml<zs;Ml++)Ml===0?(Po=al(Je),Dl=ms(Mt)):(Po=_e((Id-Ao[Ml])/2),Dl=-Us),ce.push([nr[Ml],Po,Dl]),Id=Ao[Ml]}else if(Wr==="left"){ce=[],zs=nr.length;for(var _c=0;_c<zs;_c++)ce.push(nr[_c])}else if(Wr==="justify"&&Bc.encoding==="Identity-H"){ce=[],zs=nr.length,zn=zn!==0?zn:zl;for(var bu=0,Yi=0;Yi<zs;Yi++)if(Dl=Yi===0?ms(Mt):-Us,Po=Yi===0?al(Je):bu,Yi<zs-1){var bf=_e((zn-Ao[Yi])/(nr[Yi].split(" ").length-1)),io=nr[Yi].split(" ");ce.push([io[0]+" ",Po,Dl]),bu=0;for(var vo=1;vo<io.length;vo++){var Ld=(Ah(io[vo-1]+" "+io[vo])-Ah(io[vo]))*Tr+bf;vo==io.length-1?ce.push([io[vo],Ld,0]):ce.push([io[vo]+" ",Ld,0]),bu-=Ld}}else ce.push([nr[Yi],Po,Dl]);ce.push(["",bu,0])}else{if(Wr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ce=[],zs=nr.length,zn=zn!==0?zn:zl,Yi=0;Yi<zs;Yi++)Dl=Yi===0?ms(Mt):-Us,Po=Yi===0?al(Je):0,Yi<zs-1?nu.push(ge(_e((zn-Ao[Yi])/(nr[Yi].split(" ").length-1)))):nu.push(0),ce.push([nr[Yi],Po,Dl])}}var Fd=typeof Jt.R2L=="boolean"?Jt.R2L:Sr;Fd===!0&&(ce=wr(ce,function(Qn,ni,Xi){return[Qn.split("").reverse().join(""),ni,Xi]})),Da={text:ce,x:Je,y:Mt,options:Jt,mutex:{pdfEscape:yl,activeFontKey:Wa,fonts:Sn,activeFontSize:Ja}},Jn.publish("postProcessText",Da),ce=Da.text,or=Da.mutex.isHex||!1;var so=Sn[Wa].encoding;so!=="WinAnsiEncoding"&&so!=="StandardEncoding"||(ce=wr(ce,function(Qn,ni,Xi){return[Su(Qn),ni,Xi]})),nr=au(ce),ce=[];for(var Gc,wc,xu,Zc=0,Pu=1,qc=Array.isArray(nr[0])?Pu:Zc,Rc="",Yu=function(Qn,ni,Xi){var ds="";return Xi instanceof Fe?(Xi=typeof Jt.angle=="number"?Xe(Xi,new Fe(1,0,0,1,Qn,ni)):Xe(new Fe(1,0,0,1,Qn,ni),Xi),oe===ee.ADVANCED&&(Xi=Xe(new Fe(1,0,0,-1,0,0),Xi)),ds=Xi.join(" ")+` Tm
`):ds=ge(Qn)+" "+ge(ni)+` Td
`,ds},$o=0;$o<nr.length;$o++){switch(Rc="",qc){case Pu:xu=(or?"<":"(")+nr[$o][0]+(or?">":")"),Gc=parseFloat(nr[$o][1]),wc=parseFloat(nr[$o][2]);break;case Zc:xu=(or?"<":"(")+nr[$o]+(or?">":")"),Gc=al(Je),wc=ms(Mt)}nu!==void 0&&nu[$o]!==void 0&&(Rc=nu[$o]+` Tw
`),$o===0?ce.push(Rc+Yu(Gc,wc,Vs)+xu):qc===Zc?ce.push(Rc+xu):qc===Pu&&ce.push(Rc+Yu(Gc,wc,Vs)+xu)}ce=qc===Zc?ce.join(` Tj
T* `):ce.join(` Tj
`),ce+=` Tj
`;var gs=`BT
/`;return gs+=Wa+" "+Ja+` Tf
`,gs+=ge(Ja*Al)+` TL
`,gs+=Wi+`
`,gs+=Nr,gs+=ce,_t(gs+="ET"),L[Wa]=!0,no};var bn=F.__private__.clip=F.clip=function(ce){return _t(ce==="evenodd"?"W*":"W"),this};F.clipEvenOdd=function(){return bn("evenodd")},F.__private__.discardPath=F.discardPath=function(){return _t("n"),this};var Hs=F.__private__.isValidStyle=function(ce){var Je=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ce)!==-1&&(Je=!0),Je};F.__private__.setDefaultPathOperation=F.setDefaultPathOperation=function(ce){return Hs(ce)&&(R=ce),this};var pc=F.__private__.getStyle=F.getStyle=function(ce){var Je=R;switch(ce){case"D":case"S":Je="S";break;case"F":Je="f";break;case"FD":case"DF":Je="B";break;case"f":case"f*":case"B":case"B*":Je=ce}return Je},mc=F.close=function(){return _t("h"),this};F.stroke=function(){return _t("S"),this},F.fill=function(ce){return er("f",ce),this},F.fillEvenOdd=function(ce){return er("f*",ce),this},F.fillStroke=function(ce){return er("B",ce),this},F.fillStrokeEvenOdd=function(ce){return er("B*",ce),this};var er=function(ce,Je){Gs(Je)==="object"?$s(Je,ce):_t(ce)},nn=function(ce){ce===null||oe===ee.ADVANCED&&ce===void 0||(ce=pc(ce),_t(ce))};function _n(ce,Je,Mt,Jt,ha){var Da=new a_(Je||this.boundingBox,Mt||this.xStep,Jt||this.yStep,this.gState,ha||this.matrix);Da.stream=this.stream;var nr=ce+"$$"+this.cloneIndex+++"$$";return yt(nr,Da),Da}var $s=function(ce,Je){var Mt=$i[ce.key],Jt=br[Mt];if(Jt instanceof ov)_t("q"),_t(Nd(Je)),Jt.gState&&F.setGState(Jt.gState),_t(ce.matrix.toString()+" cm"),_t("/"+Mt+" sh"),_t("Q");else if(Jt instanceof a_){var ha=new Fe(1,0,0,-1,0,tu());ce.matrix&&(ha=ha.multiply(ce.matrix||wt),Mt=_n.call(Jt,ce.key,ce.boundingBox,ce.xStep,ce.yStep,ha).id),_t("q"),_t("/Pattern cs"),_t("/"+Mt+" scn"),Jt.gState&&F.setGState(Jt.gState),_t(Je),_t("Q")}},Nd=function(ce){switch(ce){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},pn=F.moveTo=function(ce,Je){return _t(ge(_e(ce))+" "+ge(xe(Je))+" m"),this},qo=F.lineTo=function(ce,Je){return _t(ge(_e(ce))+" "+ge(xe(Je))+" l"),this},Ru=F.curveTo=function(ce,Je,Mt,Jt,ha,Da){return _t([ge(_e(ce)),ge(xe(Je)),ge(_e(Mt)),ge(xe(Jt)),ge(_e(ha)),ge(xe(Da)),"c"].join(" ")),this};F.__private__.line=F.line=function(ce,Je,Mt,Jt,ha){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||!Hs(ha))throw new Error("Invalid arguments passed to jsPDF.line");return oe===ee.COMPAT?this.lines([[Mt-ce,Jt-Je]],ce,Je,[1,1],ha||"S"):this.lines([[Mt-ce,Jt-Je]],ce,Je,[1,1]).stroke()},F.__private__.lines=F.lines=function(ce,Je,Mt,Jt,ha,Da){var nr,Rr,Wr,xn,zn,yi,Os,Vs,no,is,Nr,or;if(typeof ce=="number"&&(or=Mt,Mt=Je,Je=ce,ce=or),Jt=Jt||[1,1],Da=Da||!1,isNaN(Je)||isNaN(Mt)||!Array.isArray(ce)||!Array.isArray(Jt)||!Hs(ha)||typeof Da!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(pn(Je,Mt),nr=Jt[0],Rr=Jt[1],xn=ce.length,is=Je,Nr=Mt,Wr=0;Wr<xn;Wr++)(zn=ce[Wr]).length===2?(is=zn[0]*nr+is,Nr=zn[1]*Rr+Nr,qo(is,Nr)):(yi=zn[0]*nr+is,Os=zn[1]*Rr+Nr,Vs=zn[2]*nr+is,no=zn[3]*Rr+Nr,is=zn[4]*nr+is,Nr=zn[5]*Rr+Nr,Ru(yi,Os,Vs,no,is,Nr));return Da&&mc(),nn(ha),this},F.path=function(ce){for(var Je=0;Je<ce.length;Je++){var Mt=ce[Je],Jt=Mt.c;switch(Mt.op){case"m":pn(Jt[0],Jt[1]);break;case"l":qo(Jt[0],Jt[1]);break;case"c":Ru.apply(this,Jt);break;case"h":mc()}}return this},F.__private__.rect=F.rect=function(ce,Je,Mt,Jt,ha){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||!Hs(ha))throw new Error("Invalid arguments passed to jsPDF.rect");return oe===ee.COMPAT&&(Jt=-Jt),_t([ge(_e(ce)),ge(xe(Je)),ge(_e(Mt)),ge(_e(Jt)),"re"].join(" ")),nn(ha),this},F.__private__.triangle=F.triangle=function(ce,Je,Mt,Jt,ha,Da,nr){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||isNaN(ha)||isNaN(Da)||!Hs(nr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Mt-ce,Jt-Je],[ha-Mt,Da-Jt],[ce-ha,Je-Da]],ce,Je,[1,1],nr,!0),this},F.__private__.roundedRect=F.roundedRect=function(ce,Je,Mt,Jt,ha,Da,nr){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||isNaN(ha)||isNaN(Da)||!Hs(nr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Rr=4/3*(Math.SQRT2-1);return ha=Math.min(ha,.5*Mt),Da=Math.min(Da,.5*Jt),this.lines([[Mt-2*ha,0],[ha*Rr,0,ha,Da-Da*Rr,ha,Da],[0,Jt-2*Da],[0,Da*Rr,-ha*Rr,Da,-ha,Da],[2*ha-Mt,0],[-ha*Rr,0,-ha,-Da*Rr,-ha,-Da],[0,2*Da-Jt],[0,-Da*Rr,ha*Rr,-Da,ha,-Da]],ce+ha,Je,[1,1],nr,!0),this},F.__private__.ellipse=F.ellipse=function(ce,Je,Mt,Jt,ha){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||!Hs(ha))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Da=4/3*(Math.SQRT2-1)*Mt,nr=4/3*(Math.SQRT2-1)*Jt;return pn(ce+Mt,Je),Ru(ce+Mt,Je-nr,ce+Da,Je-Jt,ce,Je-Jt),Ru(ce-Da,Je-Jt,ce-Mt,Je-nr,ce-Mt,Je),Ru(ce-Mt,Je+nr,ce-Da,Je+Jt,ce,Je+Jt),Ru(ce+Da,Je+Jt,ce+Mt,Je+nr,ce+Mt,Je),nn(ha),this},F.__private__.circle=F.circle=function(ce,Je,Mt,Jt){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||!Hs(Jt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ce,Je,Mt,Mt,Jt)},F.setFont=function(ce,Je,Mt){return Mt&&(Je=me(Je,Mt)),Wa=Go(ce,Je,{disableWarning:!1}),this};var Es=F.__private__.getFont=F.getFont=function(){return Sn[Go.apply(F,arguments)]};F.__private__.getFontList=F.getFontList=function(){var ce,Je,Mt={};for(ce in hn)if(hn.hasOwnProperty(ce))for(Je in Mt[ce]=[],hn[ce])hn[ce].hasOwnProperty(Je)&&Mt[ce].push(Je);return Mt},F.addFont=function(ce,Je,Mt,Jt,ha){var Da=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Da.indexOf(arguments[3])!==-1?ha=arguments[3]:arguments[3]&&Da.indexOf(arguments[3])==-1&&(Mt=me(Mt,Jt)),ha=ha||"Identity-H",Fc.call(this,ce,Je,Mt,ha)};var Gi,Ei=t.lineWidth||.200025,go=F.__private__.getLineWidth=F.getLineWidth=function(){return Ei},Od=F.__private__.setLineWidth=F.setLineWidth=function(ce){return Ei=ce,_t(ge(_e(ce))+" w"),this};F.__private__.setLineDash=qn.API.setLineDash=qn.API.setLineDashPattern=function(ce,Je){if(ce=ce||[],Je=Je||0,isNaN(Je)||!Array.isArray(ce))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ce=ce.map(function(Mt){return ge(_e(Mt))}).join(" "),Je=ge(_e(Je)),_t("["+ce+"] "+Je+" d"),this};var gh=F.__private__.getLineHeight=F.getLineHeight=function(){return Ja*Gi};F.__private__.getLineHeight=F.getLineHeight=function(){return Ja*Gi};var gc=F.__private__.setLineHeightFactor=F.setLineHeightFactor=function(ce){return typeof(ce=ce||1.15)=="number"&&(Gi=ce),this},yc=F.__private__.getLineHeightFactor=F.getLineHeightFactor=function(){return Gi};gc(t.lineHeight);var al=F.__private__.getHorizontalCoordinate=function(ce){return _e(ce)},ms=F.__private__.getVerticalCoordinate=function(ce){return oe===ee.ADVANCED?ce:rn[Te].mediaBox.topRightY-rn[Te].mediaBox.bottomLeftY-_e(ce)},Wu=F.__private__.getHorizontalCoordinateString=F.getHorizontalCoordinateString=function(ce){return ge(al(ce))},Ns=F.__private__.getVerticalCoordinateString=F.getVerticalCoordinateString=function(ce){return ge(ms(ce))},Vl=t.strokeColor||"0 G";F.__private__.getStrokeColor=F.getDrawColor=function(){return Ta(Vl)},F.__private__.setStrokeColor=F.setDrawColor=function(ce,Je,Mt,Jt){return Vl=Ma({ch1:ce,ch2:Je,ch3:Mt,ch4:Jt,pdfColorType:"draw",precision:2}),_t(Vl),this};var rl=t.fillColor||"0 g";F.__private__.getFillColor=F.getFillColor=function(){return Ta(rl)},F.__private__.setFillColor=F.setFillColor=function(ce,Je,Mt,Jt){return rl=Ma({ch1:ce,ch2:Je,ch3:Mt,ch4:Jt,pdfColorType:"fill",precision:2}),_t(rl),this};var Wi=t.textColor||"0 g",Ks=F.__private__.getTextColor=F.getTextColor=function(){return Ta(Wi)};F.__private__.setTextColor=F.setTextColor=function(ce,Je,Mt,Jt){return Wi=Ma({ch1:ce,ch2:Je,ch3:Mt,ch4:Jt,pdfColorType:"text",precision:3}),this};var Ql=t.charSpace,cs=F.__private__.getCharSpace=F.getCharSpace=function(){return parseFloat(Ql||0)};F.__private__.setCharSpace=F.setCharSpace=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ql=ce,this};var Bh=0;F.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},F.__private__.setLineCap=F.setLineCap=function(ce){var Je=F.CapJoinStyles[ce];if(Je===void 0)throw new Error("Line cap style of '"+ce+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bh=Je,_t(Je+" J"),this};var Ho=0;F.__private__.setLineJoin=F.setLineJoin=function(ce){var Je=F.CapJoinStyles[ce];if(Je===void 0)throw new Error("Line join style of '"+ce+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ho=Je,_t(Je+" j"),this},F.__private__.setLineMiterLimit=F.__private__.setMiterLimit=F.setLineMiterLimit=F.setMiterLimit=function(ce){if(ce=ce||0,isNaN(ce))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return _t(ge(_e(ce))+" M"),this},F.GState=c2,F.setGState=function(ce){(ce=typeof ce=="string"?zi[Ui[ce]]:Vd(null,ce)).equals(ao)||(_t("/"+ce.id+" gs"),ao=ce)};var Vd=function(ce,Je){if(!ce||!Ui[ce]){var Mt=!1;for(var Jt in zi)if(zi.hasOwnProperty(Jt)&&zi[Jt].equals(Je)){Mt=!0;break}if(Mt)Je=zi[Jt];else{var ha="GS"+(Object.keys(zi).length+1).toString(10);zi[ha]=Je,Je.id=ha}return ce&&(Ui[ce]=Je.id),Jn.publish("addGState",Je),Je}};F.addGState=function(ce,Je){return Vd(ce,Je),this},F.saveGraphicsState=function(){return _t("q"),$r.push({key:Wa,size:Ja,color:Wi}),this},F.restoreGraphicsState=function(){_t("Q");var ce=$r.pop();return Wa=ce.key,Ja=ce.size,Wi=ce.color,ao=null,this},F.setCurrentTransformationMatrix=function(ce){return _t(ce.toString()+" cm"),this},F.comment=function(ce){return _t("#"+ce),this};var Tu=function(ce,Je){var Mt=ce||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Mt},set:function(Da){isNaN(Da)||(Mt=parseFloat(Da))}});var Jt=Je||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Jt},set:function(Da){isNaN(Da)||(Jt=parseFloat(Da))}});var ha="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ha},set:function(Da){ha=Da.toString()}}),this},Cu=function(ce,Je,Mt,Jt){Tu.call(this,ce,Je),this.type="rect";var ha=Mt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ha},set:function(nr){isNaN(nr)||(ha=parseFloat(nr))}});var Da=Jt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Da},set:function(nr){isNaN(nr)||(Da=parseFloat(nr))}}),this},sp=function(){this.page=di,this.currentPage=Te,this.pages=zt.slice(0),this.pagesContext=rn.slice(0),this.x=Xa,this.y=pr,this.matrix=Mn,this.width=Ws(Te),this.height=tu(Te),this.outputDestination=ma,this.id="",this.objectNumber=-1};sp.prototype.restore=function(){di=this.page,Te=this.currentPage,rn=this.pagesContext,zt=this.pages,Xa=this.x,pr=this.y,Mn=this.matrix,Tf(Te,this.width),Cf(Te,this.height),ma=this.outputDestination};var eu=function(ce,Je,Mt,Jt,ha){Ne.push(new sp),di=Te=0,zt=[],Xa=ce,pr=Je,Mn=ha,ro([Mt,Jt])},Jm=function(ce){if(Xt[ce])Ne.pop().restore();else{var Je=new sp,Mt="Xo"+(Object.keys(us).length+1).toString(10);Je.id=Mt,Xt[ce]=Mt,us[Mt]=Je,Jn.publish("addFormObject",Je),Ne.pop().restore()}};for(var zd in F.beginFormObject=function(ce,Je,Mt,Jt,ha){return eu(ce,Je,Mt,Jt,ha),this},F.endFormObject=function(ce){return Jm(ce),this},F.doFormObject=function(ce,Je){var Mt=us[Xt[ce]];return _t("q"),_t(Je.toString()+" cm"),_t("/"+Mt.id+" Do"),_t("Q"),this},F.getFormObject=function(ce){var Je=us[Xt[ce]];return{x:Je.x,y:Je.y,width:Je.width,height:Je.height,matrix:Je.matrix}},F.save=function(ce,Je){return ce=ce||"generated.pdf",(Je=Je||{}).returnPromise=Je.returnPromise||!1,Je.returnPromise===!1?(iv(ph(Ku()),ce),typeof iv.unload=="function"&&Yn.setTimeout&&setTimeout(iv.unload,911),this):new Promise(function(Mt,Jt){try{var ha=iv(ph(Ku()),ce);typeof iv.unload=="function"&&Yn.setTimeout&&setTimeout(iv.unload,911),Mt(ha)}catch(Da){Jt(Da.message)}})},qn.API)qn.API.hasOwnProperty(zd)&&(zd==="events"&&qn.API.events.length?function(ce,Je){var Mt,Jt,ha;for(ha=Je.length-1;ha!==-1;ha--)Mt=Je[ha][0],Jt=Je[ha][1],ce.subscribe.apply(ce,[Mt].concat(typeof Jt=="function"?[Jt]:Jt))}(Jn,qn.API.events):F[zd]=qn.API[zd]);var Ws=F.getPageWidth=function(ce){return(rn[ce=ce||Te].mediaBox.topRightX-rn[ce].mediaBox.bottomLeftX)/ua},Tf=F.setPageWidth=function(ce,Je){rn[ce].mediaBox.topRightX=Je*ua+rn[ce].mediaBox.bottomLeftX},tu=F.getPageHeight=function(ce){return(rn[ce=ce||Te].mediaBox.topRightY-rn[ce].mediaBox.bottomLeftY)/ua},Cf=F.setPageHeight=function(ce,Je){rn[ce].mediaBox.topRightY=Je*ua+rn[ce].mediaBox.bottomLeftY};return F.internal={pdfEscape:yl,getStyle:pc,getFont:Es,getFontSize:dr,getCharSpace:cs,getTextColor:Ks,getLineHeight:gh,getLineHeightFactor:yc,getLineWidth:go,write:ir,getHorizontalCoordinate:al,getVerticalCoordinate:ms,getCoordinateString:Wu,getVerticalCoordinateString:Ns,collections:{},newObject:bt,newAdditionalObject:Kt,newObjectDeferred:Gt,newObjectDeferredBegin:Et,getFilters:ja,putStream:_r,events:Jn,scaleFactor:ua,pageSize:{getWidth:function(){return Ws(Te)},setWidth:function(ce){Tf(Te,ce)},getHeight:function(){return tu(Te)},setHeight:function(ce){Cf(Te,ce)}},encryptionOptions:x,encryption:mo,getEncryptor:mr,output:tl,getNumberOfPages:po,pages:zt,out:_t,f2:Ee,f3:ae,getPageInfo:Uc,getPageInfoByObjId:vn,getCurrentPageInfo:mh,getPDFVersion:H,Point:Tu,Rectangle:Cu,Matrix:Fe,hasHotfix:En},Object.defineProperty(F.internal.pageSize,"width",{get:function(){return Ws(Te)},set:function(ce){Tf(Te,ce)},enumerable:!0,configurable:!0}),Object.defineProperty(F.internal.pageSize,"height",{get:function(){return tu(Te)},set:function(ce){Cf(Te,ce)},enumerable:!0,configurable:!0}),fh.call(F,Na),Wa="F1",jo(i,a),Jn.publish("initialized"),F}H0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},H0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},H0.prototype.hexToBytes=function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(String.fromCharCode(parseInt(t.substr(a,2),16)));return e.join("")},H0.prototype.processOwnerPassword=function(t,e){return $I(HI(e).substr(0,5),t)},H0.prototype.encryptor=function(t,e){var a=HI(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return $I(a,r)}},c2.prototype.equals=function(t){var e,a="id,objectNumber,equals";if(!t||Gs(t)!==Gs(this))return!1;var r=0;for(e in this)if(!(a.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&a.indexOf(e)<0&&r--;return r===0},qn.API={events:[]},qn.version="3.0.1";var xl=qn.API,B4=1,Xv=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},B0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ci=function(t){return t.toFixed(2)},by=function(t){return t.toFixed(5)};xl.__acroform__={};var Uh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Gq=function(t){return t*B4},Pm=function(t){var e=new Pte,a=tn.internal.getHeight(t)||0,r=tn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ci(r)),Number(ci(a))],e},gOe=xl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},yOe=xl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},AOe=xl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Hl=xl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return AOe(t,e-1)},$l=xl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return gOe(t,e-1)},Kl=xl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yOe(t,e-1)},vOe=xl.__acroform__.calculateCoordinates=function(t,e){var a=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],l=t[1],c=t[2],n=t[3],v={};return v.lowerLeft_X=a(i)||0,v.lowerLeft_Y=r(l+n)||0,v.upperRight_X=a(i+c)||0,v.upperRight_Y=r(l)||0,[Number(ci(v.lowerLeft_X)),Number(ci(v.lowerLeft_Y)),Number(ci(v.upperRight_X)),Number(ci(v.upperRight_Y))]},_Oe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],a=t._V||t.DV,r=KI(t,a),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ci(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=Pm(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},KI=function(t,e){var a=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(ae){return ae.split(`
`)}):i.map(function(ae){return[ae]});var l=a,c=tn.internal.getHeight(t)||0;c=c<0?-c:c;var n=tn.internal.getWidth(t)||0;n=n<0?-n:n;var v=function(ae,_e,Ie){if(ae+1<i.length){var xe=_e+" "+i[ae+1][0];return ib(xe,t,Ie).width<=n-4}return!1};l++;e:for(;l>0;){e="",l--;var R,x,N=ib("3",t,l).height,L=t.multiline?c-l:(c-N)/2,F=L+=2,j=0,H=0,q=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+ib(e,t,l=12).width+", FieldWidth:"+n+`
`;break}for(var W="",ee=0,oe=0;oe<i.length;oe++)if(i.hasOwnProperty(oe)){var fe=!1;if(i[oe].length!==1&&q!==i[oe].length-1){if((N+2)*(ee+2)+2>c)continue e;W+=i[oe][q],fe=!0,H=oe,oe--}else{W=(W+=i[oe][q]+" ").substr(W.length-1)==" "?W.substr(0,W.length-1):W;var se=parseInt(oe),me=v(se,W,l),ge=oe>=i.length-1;if(me&&!ge){W+=" ",q=0;continue}if(me||ge){if(ge)H=se;else if(t.multiline&&(N+2)*(ee+2)+2>c)continue e}else{if(!t.multiline||(N+2)*(ee+2)+2>c)continue e;H=se}}for(var Re="",we=j;we<=H;we++){var Ee=i[we];if(t.multiline){if(we===H){Re+=Ee[q]+" ",q=(q+1)%Ee.length;continue}if(we===j){Re+=Ee[Ee.length-1]+" ";continue}}Re+=Ee[0]+" "}switch(Re=Re.substr(Re.length-1)==" "?Re.substr(0,Re.length-1):Re,x=ib(Re,t,l).width,t.textAlign){case"right":R=n-x-2;break;case"center":R=(n-x)/2;break;case"left":default:R=2}e+=ci(R)+" "+ci(F)+` Td
`,e+="("+Xv(Re)+`) Tj
`,e+=-ci(R)+` 0 Td
`,F=-(l+2),x=0,j=fe?H:H+1,ee++,W=""}break}return r.text=e,r.fontSize=l,r},ib=function(t,e,a){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:i}},wOe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ROe=function(t,e){var a={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(a)},TOe=function(t,e){for(var a in t)if(t.hasOwnProperty(a)){var r=a,i=t[a];e.internal.newObjectDeferredBegin(i.objId,!0),Gs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},COe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Xp.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(wOe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");B4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Ete,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var l=r[i];l.objId=void 0,l.hasAnnotation&&ROe(l,a)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(a){(function(r,i){var l=!r;for(var c in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var n=r[c],v=[],R=n.Rect;if(n.Rect&&(n.Rect=vOe(n.Rect,i)),i.internal.newObjectDeferredBegin(n.objId,!0),n.DA=tn.createDefaultAppearanceStream(n),Gs(n)==="object"&&typeof n.getKeyValueListForStream=="function"&&(v=n.getKeyValueListForStream()),n.Rect=R,n.hasAppearanceStream&&!n.appearanceStreamContent){var x=_Oe(n);v.push({key:"AP",value:"<</N "+x+">>"}),i.internal.acroformPlugin.xForms.push(x)}if(n.appearanceStreamContent){var N="";for(var L in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(L)){var F=n.appearanceStreamContent[L];if(N+="/"+L+" ",N+="<<",Object.keys(F).length>=1||Array.isArray(F)){for(var c in F)if(F.hasOwnProperty(c)){var j=F[c];typeof j=="function"&&(j=j.call(i,n)),N+="/"+c+" "+j+" ",i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j)}}else typeof(j=F)=="function"&&(j=j.call(i,n)),N+="/"+c+" "+j,i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j);N+=">>"}v.push({key:"AP",value:`<<
`+N+">>"})}i.internal.putStream({additionalKeyValues:v,objectId:n.objId}),i.internal.out("endobj")}l&&TOe(i.internal.acroformPlugin.xForms,i)})(a,t)}),t.internal.acroformPlugin.isInitialized=!0}},xte=xl.__acroform__.arrayToPdfArray=function(t,e,a){var r=function(c){return c};if(Array.isArray(t)){for(var i="[",l=0;l<t.length;l++)switch(l!==0&&(i+=" "),Gs(t[l])){case"boolean":case"number":case"object":i+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&a&&(r=a.internal.getEncryptor(e)),i+="("+Xv(r(t[l].toString()))+")"):i+=t[l].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yD=function(t,e,a){var r=function(i){return i};return e!==void 0&&a&&(r=a.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Xv(r(t))+")"},Mm=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Mm.prototype.toString=function(){return this.objId+" 0 R"},Mm.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Mm.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var a in e)if(Object.getOwnPropertyDescriptor(this,e[a]).configurable===!1){var r=e[a],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:xte(i,this.objId,this.scope)}):i instanceof Mm?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Pte=function(){Mm.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){t=a.trim()},get:function(){return t||null}})};Uh(Pte,Mm);var Ete=function(){Mm.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+Xv(a(t))+")"}},set:function(a){t=a}})};Uh(Ete,Mm);var Xp=function t(){Mm.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute F supplied.');e=W}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Hl(e,3)},set:function(W){W?this.F=$l(e,3):this.F=Kl(e,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute Ff supplied.');a=W}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(W){r=W!==void 0?W:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(W){r[0]=W}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(W){r[1]=W}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(W){r[2]=W}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(W){r[3]=W}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(W){switch(W){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=W;break;default:throw new Error('Invalid value "'+W+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof d2)return;l="FieldObject"+t.FieldNum++}var W=function(ee){return ee};return this.scope&&(W=this.scope.internal.getEncryptor(this.objId)),"("+Xv(W(l))+")"},set:function(W){l=W.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(W){l=W}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(W){c=W}});var n="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return n},set:function(W){n=W}});var v=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return v},set:function(W){v=W}});var R=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return R===void 0?50/B4:R},set:function(W){R=W}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(W){x=W}});var N="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!N||this instanceof d2||this instanceof Tv))return yD(N,this.objId,this.scope)},set:function(W){W=W.toString(),N=W}});var L=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(L)return this instanceof lc?L:yD(L,this.objId,this.scope)},set:function(W){W=W.toString(),L=this instanceof lc?W:W.substr(0,1)==="("?B0(W.substr(1,W.length-2)):B0(W)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof lc?B0(L.substr(1,L.length-1)):L},set:function(W){W=W.toString(),L=this instanceof lc?"/"+W:W}});var F=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(F)return F},set:function(W){this.V=W}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(F)return this instanceof lc?F:yD(F,this.objId,this.scope)},set:function(W){W=W.toString(),F=this instanceof lc?W:W.substr(0,1)==="("?B0(W.substr(1,W.length-2)):B0(W)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof lc?B0(F.substr(1,F.length-1)):F},set:function(W){W=W.toString(),F=this instanceof lc?"/"+W:W}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,H=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return H},set:function(W){W=!!W,H=W}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(W){j=W}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,1)},set:function(W){W?this.Ff=$l(this.Ff,1):this.Ff=Kl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,2)},set:function(W){W?this.Ff=$l(this.Ff,2):this.Ff=Kl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,3)},set:function(W){W?this.Ff=$l(this.Ff,3):this.Ff=Kl(this.Ff,3)}});var q=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(q!==null)return q},set:function(W){if([0,1,2].indexOf(W)===-1)throw new Error('Invalid value "'+W+'" for attribute Q supplied.');q=W}}),Object.defineProperty(this,"textAlign",{get:function(){var W;switch(q){case 0:default:W="left";break;case 1:W="center";break;case 2:W="right"}return W},configurable:!0,enumerable:!0,set:function(W){switch(W){case"right":case 2:q=2;break;case"center":case 1:q=1;break;case"left":case 0:default:q=0}}})};Uh(Xp,Mm);var p_=function(){Xp.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){t=a}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xte(e,this.objId,this.scope)},set:function(a){var r,i;i=[],typeof(r=a)=="string"&&(i=function(l,c,n){n||(n=1);for(var v,R=[];v=c.exec(l);)R.push(v[n]);return R}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(a){e=a,this.sort&&e.sort()},this.addOption=function(a){a=(a=a||"").toString(),e.push(a),this.sort&&e.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();e.indexOf(a)!==-1&&(e.splice(e.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,18)},set:function(a){a?this.Ff=$l(this.Ff,18):this.Ff=Kl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=$l(this.Ff,19):this.Ff=Kl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,20)},set:function(a){a?(this.Ff=$l(this.Ff,20),e.sort()):this.Ff=Kl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,22)},set:function(a){a?this.Ff=$l(this.Ff,22):this.Ff=Kl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,23)},set:function(a){a?this.Ff=$l(this.Ff,23):this.Ff=Kl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,27)},set:function(a){a?this.Ff=$l(this.Ff,27):this.Ff=Kl(this.Ff,27)}}),this.hasAppearanceStream=!1};Uh(p_,Xp);var m_=function(){p_.call(this),this.fontName="helvetica",this.combo=!1};Uh(m_,p_);var g_=function(){m_.call(this),this.combo=!0};Uh(g_,m_);var xb=function(){g_.call(this),this.edit=!0};Uh(xb,g_);var lc=function(){Xp.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,15)},set:function(a){a?this.Ff=$l(this.Ff,15):this.Ff=Kl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,16)},set:function(a){a?this.Ff=$l(this.Ff,16):this.Ff=Kl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,17)},set:function(a){a?this.Ff=$l(this.Ff,17):this.Ff=Kl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,26)},set:function(a){a?this.Ff=$l(this.Ff,26):this.Ff=Kl(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Xv(a(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(a){Gs(a)==="object"&&(e=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(a){typeof a=="string"&&(e.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}})};Uh(lc,Xp);var Pb=function(){lc.call(this),this.pushButton=!0};Uh(Pb,lc);var y_=function(){lc.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Uh(y_,lc);var d2=function(){var t,e;Xp.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(n){return n};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),r)c.push("/"+l+" ("+Xv(i(r[l]))+")");return c.push(">>"),c.join(`
`)},set:function(i){Gs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(i){a=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(i){a="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Uh(d2,Xp),y_.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var a=this.Kids[e];a.appearanceStreamContent=t.createAppearanceStream(a.optionName),a.caption=t.getCA()}},y_.prototype.createOption=function(t){var e=new d2;return e.Parent=this,e.optionName=t,this.Kids.push(e),SOe.call(this.scope,e),e};var Eb=function(){lc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tn.CheckBox.createAppearanceStream()};Uh(Eb,lc);var Tv=function(){Xp.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,13)},set:function(e){e?this.Ff=$l(this.Ff,13):this.Ff=Kl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,21)},set:function(e){e?this.Ff=$l(this.Ff,21):this.Ff=Kl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,23)},set:function(e){e?this.Ff=$l(this.Ff,23):this.Ff=Kl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,24)},set:function(e){e?this.Ff=$l(this.Ff,24):this.Ff=Kl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,25)},set:function(e){e?this.Ff=$l(this.Ff,25):this.Ff=Kl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,26)},set:function(e){e?this.Ff=$l(this.Ff,26):this.Ff=Kl(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Uh(Tv,Xp);var Nb=function(){Tv.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Hl(this.Ff,14)},set:function(t){t?this.Ff=$l(this.Ff,14):this.Ff=Kl(this.Ff,14)}}),this.password=!0};Uh(Nb,Tv);var tn={CheckBox:{createAppearanceStream:function(){return{N:{On:tn.CheckBox.YesNormal},D:{On:tn.CheckBox.YesPushDown,Off:tn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Pm(t);e.scope=t.scope;var a=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),l=KI(t,t.caption);return a.push("0.749023 g"),a.push("0 0 "+ci(tn.internal.getWidth(t))+" "+ci(tn.internal.getHeight(t))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+ci(l.fontSize)+" Tf "+i),a.push("BT"),a.push(l.text),a.push("ET"),a.push("Q"),a.push("EMC"),e.stream=a.join(`
`),e},YesNormal:function(t){var e=Pm(t);e.scope=t.scope;var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],l=tn.internal.getHeight(t),c=tn.internal.getWidth(t),n=KI(t,t.caption);return i.push("1 g"),i.push("0 0 "+ci(c)+" "+ci(l)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ci(c-1)+" "+ci(l-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+a+" "+ci(n.fontSize)+" Tf "+r),i.push(n.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Pm(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+ci(tn.internal.getWidth(t))+" "+ci(tn.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Circle.YesNormal,e.D[t]=tn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Pm(t);e.scope=t.scope;var a=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=tn.internal.Bezier_C,l=Number((r*i).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+by(tn.internal.getWidth(t)/2)+" "+by(tn.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=Pm(t);e.scope=t.scope;var a=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*tn.internal.Bezier_C).toFixed(5)),c=Number((r*tn.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+by(tn.internal.getWidth(t)/2)+" "+by(tn.internal.getHeight(t)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),a.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),a.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),a.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+by(tn.internal.getWidth(t)/2)+" "+by(tn.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),a.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),a.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),a.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Pm(t);e.scope=t.scope;var a=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*tn.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+by(tn.internal.getWidth(t)/2)+" "+by(tn.internal.getHeight(t)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),a.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),a.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),a.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Cross.YesNormal,e.D[t]=tn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Pm(t);e.scope=t.scope;var a=[],r=tn.internal.calculateCross(t);return a.push("q"),a.push("1 1 "+ci(tn.internal.getWidth(t)-2)+" "+ci(tn.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(ci(r.x1.x)+" "+ci(r.x1.y)+" m"),a.push(ci(r.x2.x)+" "+ci(r.x2.y)+" l"),a.push(ci(r.x4.x)+" "+ci(r.x4.y)+" m"),a.push(ci(r.x3.x)+" "+ci(r.x3.y)+" l"),a.push("s"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=Pm(t);e.scope=t.scope;var a=tn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ci(tn.internal.getWidth(t))+" "+ci(tn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ci(tn.internal.getWidth(t)-2)+" "+ci(tn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ci(a.x1.x)+" "+ci(a.x1.y)+" m"),r.push(ci(a.x2.x)+" "+ci(a.x2.y)+" l"),r.push(ci(a.x4.x)+" "+ci(a.x4.y)+" m"),r.push(ci(a.x3.x)+" "+ci(a.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Pm(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+ci(tn.internal.getWidth(t))+" "+ci(tn.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+a}};tn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=tn.internal.getWidth(t),a=tn.internal.getHeight(t),r=Math.min(e,a);return{x1:{x:(e-r)/2,y:(a-r)/2+r},x2:{x:(e-r)/2+r,y:(a-r)/2},x3:{x:(e-r)/2,y:(a-r)/2},x4:{x:(e-r)/2+r,y:(a-r)/2+r}}}},tn.internal.getWidth=function(t){var e=0;return Gs(t)==="object"&&(e=Gq(t.Rect[2])),e},tn.internal.getHeight=function(t){var e=0;return Gs(t)==="object"&&(e=Gq(t.Rect[3])),e};var SOe=xl.addField=function(t){if(COe(this,t),!(t instanceof Xp))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};xl.AcroFormChoiceField=p_,xl.AcroFormListBox=m_,xl.AcroFormComboBox=g_,xl.AcroFormEditBox=xb,xl.AcroFormButton=lc,xl.AcroFormPushButton=Pb,xl.AcroFormRadioButton=y_,xl.AcroFormCheckBox=Eb,xl.AcroFormTextField=Tv,xl.AcroFormPasswordField=Nb,xl.AcroFormAppearance=tn,xl.AcroForm={ChoiceField:p_,ListBox:m_,ComboBox:g_,EditBox:xb,Button:lc,PushButton:Pb,RadioButton:y_,CheckBox:Eb,TextField:Tv,PasswordField:Nb,Appearance:tn},qn.AcroForm={ChoiceField:p_,ListBox:m_,ComboBox:g_,EditBox:xb,Button:lc,PushButton:Pb,RadioButton:y_,CheckBox:Eb,TextField:Tv,PasswordField:Nb,Appearance:tn};qn.AcroForm;function Nte(t){return t.reduce(function(e,a,r){return e[a]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(ae,_e){var Ie,xe,ze,Me,je,Ue=e;if((_e=_e||e)==="RGBA"||ae.data!==void 0&&ae.data instanceof Uint8ClampedArray&&"height"in ae&&"width"in ae)return"RGBA";if(me(ae))for(je in a)for(ze=a[je],Ie=0;Ie<ze.length;Ie+=1){for(Me=!0,xe=0;xe<ze[Ie].length;xe+=1)if(ze[Ie][xe]!==void 0&&ze[Ie][xe]!==ae[xe]){Me=!1;break}if(Me===!0){Ue=je;break}}else for(je in a)for(ze=a[je],Ie=0;Ie<ze.length;Ie+=1){for(Me=!0,xe=0;xe<ze[Ie].length;xe+=1)if(ze[Ie][xe]!==void 0&&ze[Ie][xe]!==ae.charCodeAt(xe)){Me=!1;break}if(Me===!0){Ue=je;break}}return Ue===e&&_e!==e&&(Ue=_e),Ue},i=function ae(_e){for(var Ie=this.internal.write,xe=this.internal.putStream,ze=(0,this.internal.getFilters)();ze.indexOf("FlateEncode")!==-1;)ze.splice(ze.indexOf("FlateEncode"),1);_e.objectId=this.internal.newObject();var Me=[];if(Me.push({key:"Type",value:"/XObject"}),Me.push({key:"Subtype",value:"/Image"}),Me.push({key:"Width",value:_e.width}),Me.push({key:"Height",value:_e.height}),_e.colorSpace===q.INDEXED?Me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_e.palette.length/3-1)+" "+("sMask"in _e&&_e.sMask!==void 0?_e.objectId+2:_e.objectId+1)+" 0 R]"}):(Me.push({key:"ColorSpace",value:"/"+_e.colorSpace}),_e.colorSpace===q.DEVICE_CMYK&&Me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Me.push({key:"BitsPerComponent",value:_e.bitsPerComponent}),"decodeParameters"in _e&&_e.decodeParameters!==void 0&&Me.push({key:"DecodeParms",value:"<<"+_e.decodeParameters+">>"}),"transparency"in _e&&Array.isArray(_e.transparency)){for(var je="",Ue=0,Qe=_e.transparency.length;Ue<Qe;Ue++)je+=_e.transparency[Ue]+" "+_e.transparency[Ue]+" ";Me.push({key:"Mask",value:"["+je+"]"})}_e.sMask!==void 0&&Me.push({key:"SMask",value:_e.objectId+1+" 0 R"});var ke=_e.filter!==void 0?["/"+_e.filter]:void 0;if(xe({data:_e.data,additionalKeyValues:Me,alreadyAppliedFilters:ke,objectId:_e.objectId}),Ie("endobj"),"sMask"in _e&&_e.sMask!==void 0){var Ge="/Predictor "+_e.predictor+" /Colors 1 /BitsPerComponent "+_e.bitsPerComponent+" /Columns "+_e.width,Se={width:_e.width,height:_e.height,colorSpace:"DeviceGray",bitsPerComponent:_e.bitsPerComponent,decodeParameters:Ge,data:_e.sMask};"filter"in _e&&(Se.filter=_e.filter),ae.call(this,Se)}if(_e.colorSpace===q.INDEXED){var Te=this.internal.newObject();xe({data:Re(new Uint8Array(_e.palette)),objectId:Te}),Ie("endobj")}},l=function(){var ae=this.internal.collections.addImage_images;for(var _e in ae)i.call(this,ae[_e])},c=function(){var ae,_e=this.internal.collections.addImage_images,Ie=this.internal.write;for(var xe in _e)Ie("/I"+(ae=_e[xe]).index,ae.objectId,"0","R")},n=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},v=function(){var ae=this.internal.collections.addImage_images;return n.call(this),ae},R=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(ae){return typeof t["process"+ae.toUpperCase()]=="function"},N=function(ae){return Gs(ae)==="object"&&ae.nodeType===1},L=function(ae,_e){if(ae.nodeName==="IMG"&&ae.hasAttribute("src")){var Ie=""+ae.getAttribute("src");if(Ie.indexOf("data:image/")===0)return NR(unescape(Ie).split("base64,").pop());var xe=t.loadFile(Ie,!0);if(xe!==void 0)return xe}if(ae.nodeName==="CANVAS"){if(ae.width===0||ae.height===0)throw new Error("Given canvas must have data. Canvas width: "+ae.width+", height: "+ae.height);var ze;switch(_e){case"PNG":ze="image/png";break;case"WEBP":ze="image/webp";break;case"JPEG":case"JPG":default:ze="image/jpeg"}return NR(ae.toDataURL(ze,1).split("base64,").pop())}},F=function(ae){var _e=this.internal.collections.addImage_images;if(_e){for(var Ie in _e)if(ae===_e[Ie].alias)return _e[Ie]}},j=function(ae,_e,Ie){return ae||_e||(ae=-96,_e=-96),ae<0&&(ae=-1*Ie.width*72/ae/this.internal.scaleFactor),_e<0&&(_e=-1*Ie.height*72/_e/this.internal.scaleFactor),ae===0&&(ae=_e*Ie.width/Ie.height),_e===0&&(_e=ae*Ie.height/Ie.width),[ae,_e]},H=function(ae,_e,Ie,xe,ze,Me){var je=j.call(this,Ie,xe,ze),Ue=this.internal.getCoordinateString,Qe=this.internal.getVerticalCoordinateString,ke=v.call(this);if(Ie=je[0],xe=je[1],ke[ze.index]=ze,Me){Me*=Math.PI/180;var Ge=Math.cos(Me),Se=Math.sin(Me),Te=function(Ze){return Ze.toFixed(4)},qe=[Te(Ge),Te(Se),Te(-1*Se),Te(Ge),0,0,"cm"]}this.internal.write("q"),Me?(this.internal.write([1,"0","0",1,Ue(ae),Qe(_e+xe),"cm"].join(" ")),this.internal.write(qe.join(" ")),this.internal.write([Ue(Ie),"0","0",Ue(xe),"0","0","cm"].join(" "))):this.internal.write([Ue(Ie),"0","0",Ue(xe),Ue(ae),Qe(_e+xe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ze.index+" Do"),this.internal.write("Q")},q=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var W=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ee=t.__addimage__.sHashCode=function(ae){var _e,Ie,xe=0;if(typeof ae=="string")for(Ie=ae.length,_e=0;_e<Ie;_e++)xe=(xe<<5)-xe+ae.charCodeAt(_e),xe|=0;else if(me(ae))for(Ie=ae.byteLength/2,_e=0;_e<Ie;_e++)xe=(xe<<5)-xe+ae[_e],xe|=0;return xe},oe=t.__addimage__.validateStringAsBase64=function(ae){(ae=ae||"").toString().trim();var _e=!0;return ae.length===0&&(_e=!1),ae.length%4!=0&&(_e=!1),/^[A-Za-z0-9+/]+$/.test(ae.substr(0,ae.length-2))===!1&&(_e=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ae.substr(-2))===!1&&(_e=!1),_e},fe=t.__addimage__.extractImageFromDataUrl=function(ae){if(ae==null||!(ae=ae.trim()).startsWith("data:"))return null;var _e=ae.indexOf(",");return _e<0?null:ae.substring(0,_e).trim().endsWith("base64")?ae.substring(_e+1):null},se=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(ae){return se()&&ae instanceof ArrayBuffer};var me=t.__addimage__.isArrayBufferView=function(ae){return se()&&typeof Uint32Array<"u"&&(ae instanceof Int8Array||ae instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ae instanceof Uint8ClampedArray||ae instanceof Int16Array||ae instanceof Uint16Array||ae instanceof Int32Array||ae instanceof Uint32Array||ae instanceof Float32Array||ae instanceof Float64Array)},ge=t.__addimage__.binaryStringToUint8Array=function(ae){for(var _e=ae.length,Ie=new Uint8Array(_e),xe=0;xe<_e;xe++)Ie[xe]=ae.charCodeAt(xe);return Ie},Re=t.__addimage__.arrayBufferToBinaryString=function(ae){for(var _e="",Ie=me(ae)?ae:new Uint8Array(ae),xe=0;xe<Ie.length;xe+=8192)_e+=String.fromCharCode.apply(null,Ie.subarray(xe,xe+8192));return _e};t.addImage=function(){var ae,_e,Ie,xe,ze,Me,je,Ue,Qe;if(typeof arguments[1]=="number"?(_e=e,Ie=arguments[1],xe=arguments[2],ze=arguments[3],Me=arguments[4],je=arguments[5],Ue=arguments[6],Qe=arguments[7]):(_e=arguments[1],Ie=arguments[2],xe=arguments[3],ze=arguments[4],Me=arguments[5],je=arguments[6],Ue=arguments[7],Qe=arguments[8]),Gs(ae=arguments[0])==="object"&&!N(ae)&&"imageData"in ae){var ke=ae;ae=ke.imageData,_e=ke.format||_e||e,Ie=ke.x||Ie||0,xe=ke.y||xe||0,ze=ke.w||ke.width||ze,Me=ke.h||ke.height||Me,je=ke.alias||je,Ue=ke.compression||Ue,Qe=ke.rotation||ke.angle||Qe}var Ge=this.internal.getFilters();if(Ue===void 0&&Ge.indexOf("FlateEncode")!==-1&&(Ue="SLOW"),isNaN(Ie)||isNaN(xe))throw new Error("Invalid coordinates passed to jsPDF.addImage");n.call(this);var Se=we.call(this,ae,_e,je,Ue);return H.call(this,Ie,xe,ze,Me,Se,Qe),this};var we=function(ae,_e,Ie,xe){var ze,Me,je;if(typeof ae=="string"&&r(ae)===e){ae=unescape(ae);var Ue=Ee(ae,!1);(Ue!==""||(Ue=t.loadFile(ae,!0))!==void 0)&&(ae=Ue)}if(N(ae)&&(ae=L(ae,_e)),_e=r(ae,_e),!x(_e))throw new Error("addImage does not support files of type '"+_e+"', please ensure that a plugin for '"+_e+"' support is added.");if(((je=Ie)==null||je.length===0)&&(Ie=function(Qe){return typeof Qe=="string"||me(Qe)?ee(Qe):me(Qe.data)?ee(Qe.data):null}(ae)),(ze=F.call(this,Ie))||(se()&&(ae instanceof Uint8Array||_e==="RGBA"||(Me=ae,ae=ge(ae))),ze=this["process"+_e.toUpperCase()](ae,R.call(this),Ie,function(Qe){return Qe&&typeof Qe=="string"&&(Qe=Qe.toUpperCase()),Qe in t.image_compression?Qe:W.NONE}(xe),Me)),!ze)throw new Error("An unknown error occurred whilst processing the image.");return ze},Ee=t.__addimage__.convertBase64ToBinaryString=function(ae,_e){_e=typeof _e!="boolean"||_e;var Ie,xe="";if(typeof ae=="string"){var ze;Ie=(ze=fe(ae))!==null&&ze!==void 0?ze:ae;try{xe=NR(Ie)}catch(Me){if(_e)throw oe(Ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return xe};t.getImageProperties=function(ae){var _e,Ie,xe="";if(N(ae)&&(ae=L(ae)),typeof ae=="string"&&r(ae)===e&&((xe=Ee(ae,!1))===""&&(xe=t.loadFile(ae)||""),ae=xe),Ie=r(ae),!x(Ie))throw new Error("addImage does not support files of type '"+Ie+"', please ensure that a plugin for '"+Ie+"' support is added.");if(!se()||ae instanceof Uint8Array||(ae=ge(ae)),!(_e=this["process"+Ie.toUpperCase()](ae)))throw new Error("An unknown error occurred whilst processing the image");return _e.fileType=Ie,_e}})(qn.API),function(t){var e=function(a){if(a!==void 0&&a!="")return!0};qn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(a){for(var r,i,l,c=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,v=this.internal.getPageInfoByObjId(a.objId),R=a.pageContext.annotations,x=!1,N=0;N<R.length&&!x;N++)switch((r=R[N]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var L=0;L<R.length;L++){r=R[L];var F=this.internal.pdfEscape,j=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var H=this.internal.newAdditionalObject(),q=this.internal.newAdditionalObject(),W=this.internal.getEncryptor(H.objId),ee=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(r.bounds.x)+" "+n(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y)+"] ")+"/Contents ("+F(W(r.contents))+")",l+=" /Popup "+q.objId+" 0 R",l+=" /P "+v.objId+" 0 R",l+=" /T ("+F(W(ee))+") >>",H.content=l;var oe=H.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(r.bounds.x+30)+" "+n(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+n(r.bounds.y)+"] ")+" /Parent "+oe,r.open&&(l+=" /Open true"),l+=" >>",q.content=l,this.internal.write(H.objId,"0 R",q.objId,"0 R");break;case"freetext":i="/Rect ["+c(r.bounds.x)+" "+n(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y+r.bounds.h)+"] ";var fe=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+F(j(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+fe+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var se=this.annotations._nameMap[r.options.name];r.options.pageNumber=se.page,r.options.top=se.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+F(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var me=n(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+me+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},t.link=function(a,r,i,l,c){var n=this.internal.getCurrentPageInfo(),v=this.internal.getCoordinateString,R=this.internal.getVerticalCoordinateString;n.pageContext.annotations.push({finalBounds:{x:v(a),y:R(r),w:v(a+i),h:R(r+l)},options:c,type:"link"})},t.textWithLink=function(a,r,i,l){var c,n,v=this.getTextWidth(a),R=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){n=l.maxWidth;var x=this.splitTextToSize(a,n).length;c=Math.ceil(R*x)}else n=v,c=R;return this.text(a,r,i,l),i+=.2*R,l.align==="center"&&(r-=v/2),l.align==="right"&&(r-=v),this.link(r,i-R,n,c,l),v},t.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(qn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(H){return e[H.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(H){return typeof H=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(H)},n=t.__arabicParser__.isArabicEndLetter=function(H){return c(H)&&l(H)&&e[H.charCodeAt(0)].length<=2},v=t.__arabicParser__.isArabicAlfLetter=function(H){return c(H)&&i.indexOf(H.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(H){return c(H)&&l(H)&&e[H.charCodeAt(0)].length>=1};var R=t.__arabicParser__.arabicLetterHasFinalForm=function(H){return c(H)&&l(H)&&e[H.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(H){return c(H)&&l(H)&&e[H.charCodeAt(0)].length>=3};var x=t.__arabicParser__.arabicLetterHasMedialForm=function(H){return c(H)&&l(H)&&e[H.charCodeAt(0)].length==4},N=t.__arabicParser__.resolveLigatures=function(H){var q=0,W=a,ee="",oe=0;for(q=0;q<H.length;q+=1)W[H.charCodeAt(q)]!==void 0?(oe++,typeof(W=W[H.charCodeAt(q)])=="number"&&(ee+=String.fromCharCode(W),W=a,oe=0),q===H.length-1&&(W=a,ee+=H.charAt(q-(oe-1)),q-=oe-1,oe=0)):(W=a,ee+=H.charAt(q-oe),q-=oe,oe=0);return ee};t.__arabicParser__.isArabicDiacritic=function(H){return H!==void 0&&r[H.charCodeAt(0)]!==void 0};var L=t.__arabicParser__.getCorrectForm=function(H,q,W){return c(H)?l(H)===!1?-1:!R(H)||!c(q)&&!c(W)||!c(W)&&n(q)||n(H)&&!c(q)||n(H)&&v(q)||n(H)&&n(q)?0:x(H)&&c(q)&&!n(q)&&c(W)&&R(W)?3:n(H)||!c(W)?1:2:-1},F=function(H){var q=0,W=0,ee=0,oe="",fe="",se="",me=(H=H||"").split("\\s+"),ge=[];for(q=0;q<me.length;q+=1){for(ge.push(""),W=0;W<me[q].length;W+=1)oe=me[q][W],fe=me[q][W-1],se=me[q][W+1],c(oe)?(ee=L(oe,fe,se),ge[q]+=ee!==-1?String.fromCharCode(e[oe.charCodeAt(0)][ee]):oe):ge[q]+=oe;ge[q]=N(ge[q])}return ge.join(" ")},j=t.__arabicParser__.processArabic=t.processArabic=function(){var H,q=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,W=[];if(Array.isArray(q)){var ee=0;for(W=[],ee=0;ee<q.length;ee+=1)Array.isArray(q[ee])?W.push([F(q[ee][0]),q[ee][1],q[ee][2]]):W.push([F(q[ee])]);H=W}else H=F(q);return typeof arguments[0]=="string"?H:(arguments[0].text=H,arguments[0])};t.events.push(["preProcessText",j])}(qn.API),qn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(n){a=n}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(n){r=isNaN(n)||Number.isInteger(n)===!1||n<0?150:n,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(n){i=isNaN(n)||Number.isInteger(n)===!1||n<0?300:n,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(n){l=n}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(n){c=n}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(a,r){var i;if((a=a||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(qn.API),function(t){var e={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var v=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return v},set:function(H){v=H}});var R=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return R},set:function(H){R=H}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(H){x=H}});var N=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return N},set:function(H){N=H}});var L=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return L},set:function(H){L=H}});var F=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return F},set:function(H){F=H}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(H){j=H}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(v){return r.call(this),this.internal.__cell__.headerFunction=typeof v=="function"?v:void 0,this},t.getTextDimensions=function(v,R){r.call(this);var x=(R=R||{}).fontSize||this.getFontSize(),N=R.font||this.getFont(),L=R.scaleFactor||this.internal.scaleFactor,F=0,j=0,H=0,q=this;if(!Array.isArray(v)&&typeof v!="string"){if(typeof v!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");v=String(v)}var W=R.maxWidth;W>0?typeof v=="string"?v=this.splitTextToSize(v,W):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(oe,fe){return oe.concat(q.splitTextToSize(fe,W))},[])):v=Array.isArray(v)?v:[v];for(var ee=0;ee<v.length;ee++)F<(H=this.getStringUnitWidth(v[ee],{font:N})*x)&&(F=H);return F!==0&&(j=v.length),{w:F/=L,h:Math.max((j*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/L,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var v=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(v.left,v.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var v;v=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var R=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,N=this.internal.__cell__.margins||e,L=this.internal.__cell__.tableHeaderRow,F=this.internal.__cell__.printHeaders;return R.lineNumber!==void 0&&(R.lineNumber===v.lineNumber?(v.x=(R.x||0)+(R.width||0),v.y=R.y||0):R.y+R.height+v.height+N.bottom>this.getPageHeight()?(this.cellAddPage(),v.y=N.top,F&&L&&(this.printHeaderRow(v.lineNumber,!0),v.y+=L[0].height)):v.y=R.y+R.height||v.y),v.text[0]!==void 0&&(this.rect(v.x,v.y,v.width,v.height,a===!0?"FD":void 0),v.align==="right"?this.text(v.text,v.x+v.width-x,v.y+x,{align:"right",baseline:"top"}):v.align==="center"?this.text(v.text,v.x+v.width/2,v.y+x,{align:"center",baseline:"top",maxWidth:v.width-x-x}):this.text(v.text,v.x+x,v.y+x,{align:"left",baseline:"top",maxWidth:v.width-x-x})),this.internal.__cell__.lastCell=v,this};t.table=function(v,R,x,N,L){if(r.call(this),!x)throw new Error("No data for PDF table.");var F,j,H,q,W=[],ee=[],oe=[],fe={},se={},me=[],ge=[],Re=(L=L||{}).autoSize||!1,we=L.printHeaders!==!1,Ee=L.css&&L.css["font-size"]!==void 0?16*L.css["font-size"]:L.fontSize||12,ae=L.margins||Object.assign({width:this.getPageWidth()},e),_e=typeof L.padding=="number"?L.padding:3,Ie=L.headerBackgroundColor||"#c8c8c8",xe=L.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=we,this.internal.__cell__.margins=ae,this.internal.__cell__.table_font_size=Ee,this.internal.__cell__.padding=_e,this.internal.__cell__.headerBackgroundColor=Ie,this.internal.__cell__.headerTextColor=xe,this.setFontSize(Ee),N==null)ee=W=Object.keys(x[0]),oe=W.map(function(){return"left"});else if(Array.isArray(N)&&Gs(N[0])==="object")for(W=N.map(function(ke){return ke.name}),ee=N.map(function(ke){return ke.prompt||ke.name||""}),oe=N.map(function(ke){return ke.align||"left"}),F=0;F<N.length;F+=1)se[N[F].name]=N[F].width*(19.049976/25.4);else Array.isArray(N)&&typeof N[0]=="string"&&(ee=W=N,oe=W.map(function(){return"left"}));if(Re||Array.isArray(N)&&typeof N[0]=="string")for(F=0;F<W.length;F+=1){for(fe[q=W[F]]=x.map(function(ke){return ke[q]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(ee[F],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=fe[q],this.setFont(void 0,"normal"),H=0;H<j.length;H+=1)me.push(this.getTextDimensions(j[H],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[q]=Math.max.apply(null,me)+_e+_e,me=[]}if(we){var ze={};for(F=0;F<W.length;F+=1)ze[W[F]]={},ze[W[F]].text=ee[F],ze[W[F]].align=oe[F];var Me=n.call(this,ze,se);ge=W.map(function(ke){return new l(v,R,se[ke],Me,ze[ke].text,void 0,ze[ke].align)}),this.setTableHeaderRow(ge),this.printHeaderRow(1,!1)}var je=N.reduce(function(ke,Ge){return ke[Ge.name]=Ge.align,ke},{});for(F=0;F<x.length;F+=1){"rowStart"in L&&L.rowStart instanceof Function&&L.rowStart({row:F,data:x[F]},this);var Ue=n.call(this,x[F],se);for(H=0;H<W.length;H+=1){var Qe=x[F][W[H]];"cellStart"in L&&L.cellStart instanceof Function&&L.cellStart({row:F,col:H,data:Qe},this),c.call(this,new l(v,R,se[W[H]],Ue,Qe,F+2,je[W[H]]))}}return this.internal.__cell__.table_x=v,this.internal.__cell__.table_y=R,this};var n=function(v,R){var x=this.internal.__cell__.padding,N=this.internal.__cell__.table_font_size,L=this.internal.scaleFactor;return Object.keys(v).map(function(F){var j=v[F];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,R[F]-x-x)},this).map(function(F){return this.getLineHeightFactor()*F.length*N/L+x+x},this).reduce(function(F,j){return Math.max(F,j)},0)};t.setTableHeaderRow=function(v){r.call(this),this.internal.__cell__.tableHeaderRow=v},t.printHeaderRow=function(v,R){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var N=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(N[0],N[1],N[2],N[3],void 0,-1)}this.setFont(void 0,"bold");for(var L=[],F=0;F<this.internal.__cell__.tableHeaderRow.length;F+=1){x=this.internal.__cell__.tableHeaderRow[F].clone(),R&&(x.y=this.internal.__cell__.margins.top||0,L.push(x)),x.lineNumber=v;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(j)}L.length>0&&this.setTableHeaderRow(L),this.setFont(void 0,"normal"),a=!1}}(qn.API);var Ote={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Vte=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],WI=Nte(Vte),zte=[100,200,300,400,500,600,700,800,900],bOe=Nte(zte);function YI(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),a=function(l){return Ote[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(l){return typeof WI[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:a,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,a,r].join(" ")}}}function Zq(t,e,a,r){var i;for(i=a;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=a;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var xOe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Hq(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function POe(t,e,a){for(var r=(a=a||{}).defaultFontFamily||"times",i=Object.assign({},xOe,a.genericFontFamilies||{}),l=null,c=null,n=0;n<e.length;++n)if(i[(l=YI(e[n])).family]&&(l.family=i[l.family]),t.hasOwnProperty(l.family)){c=t[l.family];break}if(!(c=c||t[r]))throw new Error("Could not find a font-family for the rule '"+Hq(l)+"' and default family '"+r+"'.");if(c=function(v,R){if(R[v])return R[v];var x=WI[v],N=x<=WI.normal?-1:1,L=Zq(R,Vte,x,N);if(!L)throw new Error("Could not find a matching font-stretch value for "+v);return L}(l.stretch,c),c=function(v,R){if(R[v])return R[v];for(var x=Ote[v],N=0;N<x.length;++N)if(R[x[N]])return R[x[N]];throw new Error("Could not find a matching font-style for "+v)}(l.style,c),!(c=function(v,R){if(R[v])return R[v];if(v===400&&R[500])return R[500];if(v===500&&R[400])return R[400];var x=bOe[v],N=Zq(R,zte,x,v<400?-1:1);if(!N)throw new Error("Could not find a matching font-weight for value "+v);return N}(l.weight,c)))throw new Error("Failed to resolve a font for the rule '"+Hq(l)+"'.");return c}function $q(t){return t.trimLeft()}function EOe(t,e){for(var a=0;a<t.length;){if(t.charAt(a)===e)return[t.substring(0,a),t.substring(a+1)];a+=1}return null}function NOe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var sb,Kq,Wq,AD=["times"];(function(t){var e,a,r,i,l,c,n,v,R,x=function(Se){return Se=Se||{},this.isStrokeTransparent=Se.isStrokeTransparent||!1,this.strokeOpacity=Se.strokeOpacity||1,this.strokeStyle=Se.strokeStyle||"#000000",this.fillStyle=Se.fillStyle||"#000000",this.isFillTransparent=Se.isFillTransparent||!1,this.fillOpacity=Se.fillOpacity||1,this.font=Se.font||"10px sans-serif",this.textBaseline=Se.textBaseline||"alphabetic",this.textAlign=Se.textAlign||"left",this.lineWidth=Se.lineWidth||1,this.lineJoin=Se.lineJoin||"miter",this.lineCap=Se.lineCap||"butt",this.path=Se.path||[],this.transform=Se.transform!==void 0?Se.transform.clone():new v,this.globalCompositeOperation=Se.globalCompositeOperation||"normal",this.globalAlpha=Se.globalAlpha||1,this.clip_path=Se.clip_path||[],this.currentPoint=Se.currentPoint||new c,this.miterLimit=Se.miterLimit||10,this.lastPoint=Se.lastPoint||new c,this.lineDashOffset=Se.lineDashOffset||0,this.lineDash=Se.lineDash||[],this.margin=Se.margin||[0,0,0,0],this.prevPageLastElemOffset=Se.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Se.ignoreClearRect!="boolean"||Se.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new N(this),e=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,n=this.internal.Rectangle,v=this.internal.Matrix,R=new x}]);var N=function(Se){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Te=Se;Object.defineProperty(this,"pdf",{get:function(){return Te}});var qe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return qe},set:function(Ht){qe=!!Ht}});var Ze=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ze},set:function(Ht){Ze=!!Ht}});var lt=0;Object.defineProperty(this,"posX",{get:function(){return lt},set:function(Ht){isNaN(Ht)||(lt=Ht)}});var st=0;Object.defineProperty(this,"posY",{get:function(){return st},set:function(Ht){isNaN(Ht)||(st=Ht)}}),Object.defineProperty(this,"margin",{get:function(){return R.margin},set:function(Ht){var _t;typeof Ht=="number"?_t=[Ht,Ht,Ht,Ht]:((_t=new Array(4))[0]=Ht[0],_t[1]=Ht.length>=2?Ht[1]:_t[0],_t[2]=Ht.length>=3?Ht[2]:_t[0],_t[3]=Ht.length>=4?Ht[3]:_t[1]),R.margin=_t}});var ht=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ht},set:function(Ht){ht=Ht}});var He=0;Object.defineProperty(this,"lastBreak",{get:function(){return He},set:function(Ht){He=Ht}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(Ht){Ae=Ht}}),Object.defineProperty(this,"ctx",{get:function(){return R},set:function(Ht){Ht instanceof x&&(R=Ht)}}),Object.defineProperty(this,"path",{get:function(){return R.path},set:function(Ht){R.path=Ht}});var zt=[];Object.defineProperty(this,"ctxStack",{get:function(){return zt},set:function(Ht){zt=Ht}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ht){var _t;_t=L(Ht),this.ctx.fillStyle=_t.style,this.ctx.isFillTransparent=_t.a===0,this.ctx.fillOpacity=_t.a,this.pdf.setFillColor(_t.r,_t.g,_t.b,{a:_t.a}),this.pdf.setTextColor(_t.r,_t.g,_t.b,{a:_t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ht){var _t=L(Ht);this.ctx.strokeStyle=_t.style,this.ctx.isStrokeTransparent=_t.a===0,this.ctx.strokeOpacity=_t.a,_t.a===0?this.pdf.setDrawColor(255,255,255):(_t.a,this.pdf.setDrawColor(_t.r,_t.g,_t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ht){["butt","round","square"].indexOf(Ht)!==-1&&(this.ctx.lineCap=Ht,this.pdf.setLineCap(Ht))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ht){isNaN(Ht)||(this.ctx.lineWidth=Ht,this.pdf.setLineWidth(Ht))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ht){["bevel","round","miter"].indexOf(Ht)!==-1&&(this.ctx.lineJoin=Ht,this.pdf.setLineJoin(Ht))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ht){isNaN(Ht)||(this.ctx.miterLimit=Ht,this.pdf.setMiterLimit(Ht))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ht){this.ctx.textBaseline=Ht}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ht){["right","end","center","left","start"].indexOf(Ht)!==-1&&(this.ctx.textAlign=Ht)}});var kt=null;function ma(Ht,_t){if(kt===null){var ir=function(Ea){var Na=[];return Object.keys(Ea).forEach(function(Ja){Ea[Ja].forEach(function(cr){var dr=null;switch(cr){case"bold":dr={family:Ja,weight:"bold"};break;case"italic":dr={family:Ja,style:"italic"};break;case"bolditalic":dr={family:Ja,weight:"bold",style:"italic"};break;case"":case"normal":dr={family:Ja}}dr!==null&&(dr.ref={name:Ja,style:cr},Na.push(dr))})}),Na}(Ht.getFontList());kt=function(Ea){for(var Na={},Ja=0;Ja<Ea.length;++Ja){var cr=YI(Ea[Ja]),dr=cr.family,Sr=cr.stretch,ka=cr.style,Gr=cr.weight;Na[dr]=Na[dr]||{},Na[dr][Sr]=Na[dr][Sr]||{},Na[dr][Sr][ka]=Na[dr][Sr][ka]||{},Na[dr][Sr][ka][Gr]=cr}return Na}(ir.concat(_t))}return kt}var It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(Ht){kt=null,It=Ht}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ht){var _t;if(this.ctx.font=Ht,(_t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ht))!==null){var ir=_t[1];_t[2];var Ea=_t[3],Na=_t[4];_t[5];var Ja=_t[6],cr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Na)[2];Na=Math.floor(cr==="px"?parseFloat(Na)*this.pdf.internal.scaleFactor:cr==="em"?parseFloat(Na)*this.pdf.getFontSize():parseFloat(Na)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Na);var dr=function(va){var Wa,ua,Xa=[],pr=va.trim();if(pr==="")return AD;if(pr in qq)return[qq[pr]];for(;pr!=="";){switch(ua=null,Wa=(pr=$q(pr)).charAt(0)){case'"':case"'":ua=EOe(pr.substring(1),Wa);break;default:ua=NOe(pr)}if(ua===null||(Xa.push(ua[0]),(pr=$q(ua[1]))!==""&&pr.charAt(0)!==","))return AD;pr=pr.replace(/^,/,"")}return Xa}(Ja);if(this.fontFaces){var Sr=POe(ma(this.pdf,this.fontFaces),dr.map(function(va){return{family:va,stretch:"normal",weight:Ea,style:ir}}));this.pdf.setFont(Sr.ref.name,Sr.ref.style)}else{var ka="";(Ea==="bold"||parseInt(Ea,10)>=700||ir==="bold")&&(ka="bold"),ir==="italic"&&(ka+="italic"),ka.length===0&&(ka="normal");for(var Gr="",dn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Cn=0;Cn<dr.length;Cn++){if(this.pdf.internal.getFont(dr[Cn],ka,{noFallback:!0,disableWarning:!0})!==void 0){Gr=dr[Cn];break}if(ka==="bolditalic"&&this.pdf.internal.getFont(dr[Cn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Gr=dr[Cn],ka="bold";else if(this.pdf.internal.getFont(dr[Cn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Gr=dr[Cn],ka="normal";break}}if(Gr===""){for(var fn=0;fn<dr.length;fn++)if(dn[dr[fn]]){Gr=dn[dr[fn]];break}}Gr=Gr===""?"Times":Gr,this.pdf.setFont(Gr,ka)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ht){this.ctx.globalCompositeOperation=Ht}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ht){this.ctx.globalAlpha=Ht}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ht){this.ctx.lineDashOffset=Ht,Ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ht){this.ctx.lineDash=Ht,Ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ht){this.ctx.ignoreClearRect=!!Ht}})};N.prototype.setLineDash=function(Se){this.lineDash=Se},N.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},N.prototype.fill=function(){fe.call(this,"fill",!1)},N.prototype.stroke=function(){fe.call(this,"stroke",!1)},N.prototype.beginPath=function(){this.path=[{type:"begin"}]},N.prototype.moveTo=function(Se,Te){if(isNaN(Se)||isNaN(Te))throw ho.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var qe=this.ctx.transform.applyToPoint(new c(Se,Te));this.path.push({type:"mt",x:qe.x,y:qe.y}),this.ctx.lastPoint=new c(Se,Te)},N.prototype.closePath=function(){var Se=new c(0,0),Te=0;for(Te=this.path.length-1;Te!==-1;Te--)if(this.path[Te].type==="begin"&&Gs(this.path[Te+1])==="object"&&typeof this.path[Te+1].x=="number"){Se=new c(this.path[Te+1].x,this.path[Te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(Se.x,Se.y)},N.prototype.lineTo=function(Se,Te){if(isNaN(Se)||isNaN(Te))throw ho.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var qe=this.ctx.transform.applyToPoint(new c(Se,Te));this.path.push({type:"lt",x:qe.x,y:qe.y}),this.ctx.lastPoint=new c(qe.x,qe.y)},N.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),fe.call(this,null,!0)},N.prototype.quadraticCurveTo=function(Se,Te,qe,Ze){if(isNaN(qe)||isNaN(Ze)||isNaN(Se)||isNaN(Te))throw ho.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var lt=this.ctx.transform.applyToPoint(new c(qe,Ze)),st=this.ctx.transform.applyToPoint(new c(Se,Te));this.path.push({type:"qct",x1:st.x,y1:st.y,x:lt.x,y:lt.y}),this.ctx.lastPoint=new c(lt.x,lt.y)},N.prototype.bezierCurveTo=function(Se,Te,qe,Ze,lt,st){if(isNaN(lt)||isNaN(st)||isNaN(Se)||isNaN(Te)||isNaN(qe)||isNaN(Ze))throw ho.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ht=this.ctx.transform.applyToPoint(new c(lt,st)),He=this.ctx.transform.applyToPoint(new c(Se,Te)),Ae=this.ctx.transform.applyToPoint(new c(qe,Ze));this.path.push({type:"bct",x1:He.x,y1:He.y,x2:Ae.x,y2:Ae.y,x:ht.x,y:ht.y}),this.ctx.lastPoint=new c(ht.x,ht.y)},N.prototype.arc=function(Se,Te,qe,Ze,lt,st){if(isNaN(Se)||isNaN(Te)||isNaN(qe)||isNaN(Ze)||isNaN(lt))throw ho.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(st=!!st,!this.ctx.transform.isIdentity){var ht=this.ctx.transform.applyToPoint(new c(Se,Te));Se=ht.x,Te=ht.y;var He=this.ctx.transform.applyToPoint(new c(0,qe)),Ae=this.ctx.transform.applyToPoint(new c(0,0));qe=Math.sqrt(Math.pow(He.x-Ae.x,2)+Math.pow(He.y-Ae.y,2))}Math.abs(lt-Ze)>=2*Math.PI&&(Ze=0,lt=2*Math.PI),this.path.push({type:"arc",x:Se,y:Te,radius:qe,startAngle:Ze,endAngle:lt,counterclockwise:st})},N.prototype.arcTo=function(Se,Te,qe,Ze,lt){throw new Error("arcTo not implemented.")},N.prototype.rect=function(Se,Te,qe,Ze){if(isNaN(Se)||isNaN(Te)||isNaN(qe)||isNaN(Ze))throw ho.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Se,Te),this.lineTo(Se+qe,Te),this.lineTo(Se+qe,Te+Ze),this.lineTo(Se,Te+Ze),this.lineTo(Se,Te),this.lineTo(Se+qe,Te),this.lineTo(Se,Te)},N.prototype.fillRect=function(Se,Te,qe,Ze){if(isNaN(Se)||isNaN(Te)||isNaN(qe)||isNaN(Ze))throw ho.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!F.call(this)){var lt={};this.lineCap!=="butt"&&(lt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(lt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Se,Te,qe,Ze),this.fill(),lt.hasOwnProperty("lineCap")&&(this.lineCap=lt.lineCap),lt.hasOwnProperty("lineJoin")&&(this.lineJoin=lt.lineJoin)}},N.prototype.strokeRect=function(Se,Te,qe,Ze){if(isNaN(Se)||isNaN(Te)||isNaN(qe)||isNaN(Ze))throw ho.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(Se,Te,qe,Ze),this.stroke())},N.prototype.clearRect=function(Se,Te,qe,Ze){if(isNaN(Se)||isNaN(Te)||isNaN(qe)||isNaN(Ze))throw ho.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Se,Te,qe,Ze))},N.prototype.save=function(Se){Se=typeof Se!="boolean"||Se;for(var Te=this.pdf.internal.getCurrentPageInfo().pageNumber,qe=0;qe<this.pdf.internal.getNumberOfPages();qe++)this.pdf.setPage(qe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Te),Se){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ze=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ze}},N.prototype.restore=function(Se){Se=typeof Se!="boolean"||Se;for(var Te=this.pdf.internal.getCurrentPageInfo().pageNumber,qe=0;qe<this.pdf.internal.getNumberOfPages();qe++)this.pdf.setPage(qe+1),this.pdf.internal.out("Q");this.pdf.setPage(Te),Se&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},N.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var L=function(Se){var Te,qe,Ze,lt;if(Se.isCanvasGradient===!0&&(Se=Se.getColor()),!Se)return{r:0,g:0,b:0,a:0,style:Se};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Se))Te=0,qe=0,Ze=0,lt=0;else{var st=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Se);if(st!==null)Te=parseInt(st[1]),qe=parseInt(st[2]),Ze=parseInt(st[3]),lt=1;else if((st=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Se))!==null)Te=parseInt(st[1]),qe=parseInt(st[2]),Ze=parseInt(st[3]),lt=parseFloat(st[4]);else{if(lt=1,typeof Se=="string"&&Se.charAt(0)!=="#"){var ht=new Cte(Se);Se=ht.ok?ht.toHex():"#000000"}Se.length===4?(Te=Se.substring(1,2),Te+=Te,qe=Se.substring(2,3),qe+=qe,Ze=Se.substring(3,4),Ze+=Ze):(Te=Se.substring(1,3),qe=Se.substring(3,5),Ze=Se.substring(5,7)),Te=parseInt(Te,16),qe=parseInt(qe,16),Ze=parseInt(Ze,16)}}return{r:Te,g:qe,b:Ze,a:lt,style:Se}},F=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};N.prototype.fillText=function(Se,Te,qe,Ze){if(isNaN(Te)||isNaN(qe)||typeof Se!="string")throw ho.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ze=isNaN(Ze)?void 0:Ze,!F.call(this)){var lt=Ue(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;_e.call(this,{text:Se,x:Te,y:qe,scale:st,angle:lt,align:this.textAlign,maxWidth:Ze})}},N.prototype.strokeText=function(Se,Te,qe,Ze){if(isNaN(Te)||isNaN(qe)||typeof Se!="string")throw ho.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){Ze=isNaN(Ze)?void 0:Ze;var lt=Ue(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;_e.call(this,{text:Se,x:Te,y:qe,scale:st,renderingMode:"stroke",angle:lt,align:this.textAlign,maxWidth:Ze})}},N.prototype.measureText=function(Se){if(typeof Se!="string")throw ho.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Te=this.pdf,qe=this.pdf.internal.scaleFactor,Ze=Te.internal.getFontSize(),lt=Te.getStringUnitWidth(Se)*Ze/Te.internal.scaleFactor,st=function(ht){var He=(ht=ht||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return He}}),this};return new st({width:lt*=Math.round(96*qe/72*1e4)/1e4})},N.prototype.scale=function(Se,Te){if(isNaN(Se)||isNaN(Te))throw ho.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var qe=new v(Se,0,0,Te,0,0);this.ctx.transform=this.ctx.transform.multiply(qe)},N.prototype.rotate=function(Se){if(isNaN(Se))throw ho.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Te=new v(Math.cos(Se),Math.sin(Se),-Math.sin(Se),Math.cos(Se),0,0);this.ctx.transform=this.ctx.transform.multiply(Te)},N.prototype.translate=function(Se,Te){if(isNaN(Se)||isNaN(Te))throw ho.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var qe=new v(1,0,0,1,Se,Te);this.ctx.transform=this.ctx.transform.multiply(qe)},N.prototype.transform=function(Se,Te,qe,Ze,lt,st){if(isNaN(Se)||isNaN(Te)||isNaN(qe)||isNaN(Ze)||isNaN(lt)||isNaN(st))throw ho.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ht=new v(Se,Te,qe,Ze,lt,st);this.ctx.transform=this.ctx.transform.multiply(ht)},N.prototype.setTransform=function(Se,Te,qe,Ze,lt,st){Se=isNaN(Se)?1:Se,Te=isNaN(Te)?0:Te,qe=isNaN(qe)?0:qe,Ze=isNaN(Ze)?1:Ze,lt=isNaN(lt)?0:lt,st=isNaN(st)?0:st,this.ctx.transform=new v(Se,Te,qe,Ze,lt,st)};var H=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};N.prototype.drawImage=function(Se,Te,qe,Ze,lt,st,ht,He,Ae){var zt=this.pdf.getImageProperties(Se),kt=1,ma=1,It=1,Ht=1;Ze!==void 0&&He!==void 0&&(It=He/Ze,Ht=Ae/lt,kt=zt.width/Ze*He/Ze,ma=zt.height/lt*Ae/lt),st===void 0&&(st=Te,ht=qe,Te=0,qe=0),Ze!==void 0&&He===void 0&&(He=Ze,Ae=lt),Ze===void 0&&He===void 0&&(He=zt.width,Ae=zt.height);for(var _t,ir=this.ctx.transform.decompose(),Ea=Ue(ir.rotate.shx),Na=new v,Ja=(Na=(Na=(Na=Na.multiply(ir.translate)).multiply(ir.skew)).multiply(ir.scale)).applyToRectangle(new n(st-Te*It,ht-qe*Ht,Ze*kt,lt*ma)),cr=q.call(this,Ja),dr=[],Sr=0;Sr<cr.length;Sr+=1)dr.indexOf(cr[Sr])===-1&&dr.push(cr[Sr]);if(oe(dr),this.autoPaging)for(var ka=dr[0],Gr=dr[dr.length-1],dn=ka;dn<Gr+1;dn++){this.pdf.setPage(dn);var Cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],fn=dn===1?this.posY+this.margin[0]:this.margin[0],va=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wa=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ua=dn===1?0:va+(dn-2)*Wa;if(this.ctx.clip_path.length!==0){var Xa=this.path;_t=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(_t,this.posX+this.margin[3],-ua+fn+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Xa}var pr=JSON.parse(JSON.stringify(Ja));pr=ee([pr],this.posX+this.margin[3],-ua+fn+this.ctx.prevPageLastElemOffset)[0];var Mn=(dn>ka||dn<Gr)&&H.call(this);Mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Cn,Wa,null).clip().discardPath()),this.pdf.addImage(Se,"JPEG",pr.x,pr.y,pr.w,pr.h,null,null,Ea),Mn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Se,"JPEG",Ja.x,Ja.y,Ja.w,Ja.h,null,null,Ea)};var q=function(Se,Te,qe){var Ze=[];Te=Te||this.pdf.internal.pageSize.width,qe=qe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var lt=this.posY+this.ctx.prevPageLastElemOffset;switch(Se.type){default:case"mt":case"lt":Ze.push(Math.floor((Se.y+lt)/qe)+1);break;case"arc":Ze.push(Math.floor((Se.y+lt-Se.radius)/qe)+1),Ze.push(Math.floor((Se.y+lt+Se.radius)/qe)+1);break;case"qct":var st=Qe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Se.x1,Se.y1,Se.x,Se.y);Ze.push(Math.floor((st.y+lt)/qe)+1),Ze.push(Math.floor((st.y+st.h+lt)/qe)+1);break;case"bct":var ht=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Se.x1,Se.y1,Se.x2,Se.y2,Se.x,Se.y);Ze.push(Math.floor((ht.y+lt)/qe)+1),Ze.push(Math.floor((ht.y+ht.h+lt)/qe)+1);break;case"rect":Ze.push(Math.floor((Se.y+lt)/qe)+1),Ze.push(Math.floor((Se.y+Se.h+lt)/qe)+1)}for(var He=0;He<Ze.length;He+=1)for(;this.pdf.internal.getNumberOfPages()<Ze[He];)W.call(this);return Ze},W=function(){var Se=this.fillStyle,Te=this.strokeStyle,qe=this.font,Ze=this.lineCap,lt=this.lineWidth,st=this.lineJoin;this.pdf.addPage(),this.fillStyle=Se,this.strokeStyle=Te,this.font=qe,this.lineCap=Ze,this.lineWidth=lt,this.lineJoin=st},ee=function(Se,Te,qe){for(var Ze=0;Ze<Se.length;Ze++)switch(Se[Ze].type){case"bct":Se[Ze].x2+=Te,Se[Ze].y2+=qe;case"qct":Se[Ze].x1+=Te,Se[Ze].y1+=qe;case"mt":case"lt":case"arc":default:Se[Ze].x+=Te,Se[Ze].y+=qe}return Se},oe=function(Se){return Se.sort(function(Te,qe){return Te-qe})},fe=function(Se,Te){for(var qe,Ze,lt=this.fillStyle,st=this.strokeStyle,ht=this.lineCap,He=this.lineWidth,Ae=Math.abs(He*this.ctx.transform.scaleX),zt=this.lineJoin,kt=JSON.parse(JSON.stringify(this.path)),ma=JSON.parse(JSON.stringify(this.path)),It=[],Ht=0;Ht<ma.length;Ht++)if(ma[Ht].x!==void 0)for(var _t=q.call(this,ma[Ht]),ir=0;ir<_t.length;ir+=1)It.indexOf(_t[ir])===-1&&It.push(_t[ir]);for(var Ea=0;Ea<It.length;Ea++)for(;this.pdf.internal.getNumberOfPages()<It[Ea];)W.call(this);if(oe(It),this.autoPaging)for(var Na=It[0],Ja=It[It.length-1],cr=Na;cr<Ja+1;cr++){this.pdf.setPage(cr),this.fillStyle=lt,this.strokeStyle=st,this.lineCap=ht,this.lineWidth=Ae,this.lineJoin=zt;var dr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Sr=cr===1?this.posY+this.margin[0]:this.margin[0],ka=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dn=cr===1?0:ka+(cr-2)*Gr;if(this.ctx.clip_path.length!==0){var Cn=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(qe,this.posX+this.margin[3],-dn+Sr+this.ctx.prevPageLastElemOffset),se.call(this,Se,!0),this.path=Cn}if(Ze=JSON.parse(JSON.stringify(kt)),this.path=ee(Ze,this.posX+this.margin[3],-dn+Sr+this.ctx.prevPageLastElemOffset),Te===!1||cr===0){var fn=(cr>Na||cr<Ja)&&H.call(this);fn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dr,Gr,null).clip().discardPath()),se.call(this,Se,Te),fn&&this.pdf.restoreGraphicsState()}this.lineWidth=He}else this.lineWidth=Ae,se.call(this,Se,Te),this.lineWidth=He;this.path=kt},se=function(Se,Te){if((Se!=="stroke"||Te||!j.call(this))&&(Se==="stroke"||Te||!F.call(this))){for(var qe,Ze,lt=[],st=this.path,ht=0;ht<st.length;ht++){var He=st[ht];switch(He.type){case"begin":lt.push({begin:!0});break;case"close":lt.push({close:!0});break;case"mt":lt.push({start:He,deltas:[],abs:[]});break;case"lt":var Ae=lt.length;if(st[ht-1]&&!isNaN(st[ht-1].x)&&(qe=[He.x-st[ht-1].x,He.y-st[ht-1].y],Ae>0)){for(;Ae>=0;Ae--)if(lt[Ae-1].close!==!0&&lt[Ae-1].begin!==!0){lt[Ae-1].deltas.push(qe),lt[Ae-1].abs.push(He);break}}break;case"bct":qe=[He.x1-st[ht-1].x,He.y1-st[ht-1].y,He.x2-st[ht-1].x,He.y2-st[ht-1].y,He.x-st[ht-1].x,He.y-st[ht-1].y],lt[lt.length-1].deltas.push(qe);break;case"qct":var zt=st[ht-1].x+2/3*(He.x1-st[ht-1].x),kt=st[ht-1].y+2/3*(He.y1-st[ht-1].y),ma=He.x+2/3*(He.x1-He.x),It=He.y+2/3*(He.y1-He.y),Ht=He.x,_t=He.y;qe=[zt-st[ht-1].x,kt-st[ht-1].y,ma-st[ht-1].x,It-st[ht-1].y,Ht-st[ht-1].x,_t-st[ht-1].y],lt[lt.length-1].deltas.push(qe);break;case"arc":lt.push({deltas:[],abs:[],arc:!0}),Array.isArray(lt[lt.length-1].abs)&&lt[lt.length-1].abs.push(He)}}Ze=Te?null:Se==="stroke"?"stroke":"fill";for(var ir=!1,Ea=0;Ea<lt.length;Ea++)if(lt[Ea].arc)for(var Na=lt[Ea].abs,Ja=0;Ja<Na.length;Ja++){var cr=Na[Ja];cr.type==="arc"?Re.call(this,cr.x,cr.y,cr.radius,cr.startAngle,cr.endAngle,cr.counterclockwise,void 0,Te,!ir):Ie.call(this,cr.x,cr.y),ir=!0}else if(lt[Ea].close===!0)this.pdf.internal.out("h"),ir=!1;else if(lt[Ea].begin!==!0){var dr=lt[Ea].start.x,Sr=lt[Ea].start.y;xe.call(this,lt[Ea].deltas,dr,Sr),ir=!0}Ze&&we.call(this,Ze),Te&&Ee.call(this)}},me=function(Se){var Te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,qe=Te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Se-qe;case"top":return Se+Te-qe;case"hanging":return Se+Te-2*qe;case"middle":return Se+Te/2-qe;case"ideographic":return Se;case"alphabetic":default:return Se}},ge=function(Se){return Se+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};N.prototype.createLinearGradient=function(){var Se=function(){};return Se.colorStops=[],Se.addColorStop=function(Te,qe){this.colorStops.push([Te,qe])},Se.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Se.isCanvasGradient=!0,Se},N.prototype.createPattern=function(){return this.createLinearGradient()},N.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Re=function(Se,Te,qe,Ze,lt,st,ht,He,Ae){for(var zt=Me.call(this,qe,Ze,lt,st),kt=0;kt<zt.length;kt++){var ma=zt[kt];kt===0&&(Ae?ae.call(this,ma.x1+Se,ma.y1+Te):Ie.call(this,ma.x1+Se,ma.y1+Te)),ze.call(this,Se,Te,ma.x2,ma.y2,ma.x3,ma.y3,ma.x4,ma.y4)}He?Ee.call(this):we.call(this,ht)},we=function(Se){switch(Se){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ee=function(){this.pdf.clip(),this.pdf.discardPath()},ae=function(Se,Te){this.pdf.internal.out(a(Se)+" "+r(Te)+" m")},_e=function(Se){var Te;switch(Se.align){case"right":case"end":Te="right";break;case"center":Te="center";break;case"left":case"start":default:Te="left"}var qe=this.pdf.getTextDimensions(Se.text),Ze=me.call(this,Se.y),lt=ge.call(this,Ze)-qe.h,st=this.ctx.transform.applyToPoint(new c(Se.x,Ze)),ht=this.ctx.transform.decompose(),He=new v;He=(He=(He=He.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale);for(var Ae,zt,kt,ma=this.ctx.transform.applyToRectangle(new n(Se.x,Ze,qe.w,qe.h)),It=He.applyToRectangle(new n(Se.x,lt,qe.w,qe.h)),Ht=q.call(this,It),_t=[],ir=0;ir<Ht.length;ir+=1)_t.indexOf(Ht[ir])===-1&&_t.push(Ht[ir]);if(oe(_t),this.autoPaging)for(var Ea=_t[0],Na=_t[_t.length-1],Ja=Ea;Ja<Na+1;Ja++){this.pdf.setPage(Ja);var cr=Ja===1?this.posY+this.margin[0]:this.margin[0],dr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Sr=this.pdf.internal.pageSize.height-this.margin[2],ka=Sr-this.margin[0],Gr=this.pdf.internal.pageSize.width-this.margin[1],dn=Gr-this.margin[3],Cn=Ja===1?0:dr+(Ja-2)*ka;if(this.ctx.clip_path.length!==0){var fn=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(Ae,this.posX+this.margin[3],-1*Cn+cr),se.call(this,"fill",!0),this.path=fn}var va=ee([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-Cn+cr+this.ctx.prevPageLastElemOffset)[0];Se.scale>=.01&&(zt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(zt*Se.scale),kt=this.lineWidth,this.lineWidth=kt*Se.scale);var Wa=this.autoPaging!=="text";if(Wa||va.y+va.h<=Sr){if(Wa||va.y>=cr&&va.x<=Gr){var ua=Wa?Se.text:this.pdf.splitTextToSize(Se.text,Se.maxWidth||Gr-va.x)[0],Xa=ee([JSON.parse(JSON.stringify(ma))],this.posX+this.margin[3],-Cn+cr+this.ctx.prevPageLastElemOffset)[0],pr=Wa&&(Ja>Ea||Ja<Na)&&H.call(this);pr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dn,ka,null).clip().discardPath()),this.pdf.text(ua,Xa.x,Xa.y,{angle:Se.angle,align:Te,renderingMode:Se.renderingMode}),pr&&this.pdf.restoreGraphicsState()}}else va.y<Sr&&(this.ctx.prevPageLastElemOffset+=Sr-va.y);Se.scale>=.01&&(this.pdf.setFontSize(zt),this.lineWidth=kt)}else Se.scale>=.01&&(zt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(zt*Se.scale),kt=this.lineWidth,this.lineWidth=kt*Se.scale),this.pdf.text(Se.text,st.x+this.posX,st.y+this.posY,{angle:Se.angle,align:Te,renderingMode:Se.renderingMode,maxWidth:Se.maxWidth}),Se.scale>=.01&&(this.pdf.setFontSize(zt),this.lineWidth=kt)},Ie=function(Se,Te,qe,Ze){qe=qe||0,Ze=Ze||0,this.pdf.internal.out(a(Se+qe)+" "+r(Te+Ze)+" l")},xe=function(Se,Te,qe){return this.pdf.lines(Se,Te,qe,null,null)},ze=function(Se,Te,qe,Ze,lt,st,ht,He){this.pdf.internal.out([e(i(qe+Se)),e(l(Ze+Te)),e(i(lt+Se)),e(l(st+Te)),e(i(ht+Se)),e(l(He+Te)),"c"].join(" "))},Me=function(Se,Te,qe,Ze){for(var lt=2*Math.PI,st=Math.PI/2;Te>qe;)Te-=lt;var ht=Math.abs(qe-Te);ht<lt&&Ze&&(ht=lt-ht);for(var He=[],Ae=Ze?-1:1,zt=Te;ht>1e-5;){var kt=zt+Ae*Math.min(ht,st);He.push(je.call(this,Se,zt,kt)),ht-=Math.abs(kt-zt),zt=kt}return He},je=function(Se,Te,qe){var Ze=(qe-Te)/2,lt=Se*Math.cos(Ze),st=Se*Math.sin(Ze),ht=lt,He=-st,Ae=ht*ht+He*He,zt=Ae+ht*lt+He*st,kt=4/3*(Math.sqrt(2*Ae*zt)-zt)/(ht*st-He*lt),ma=ht-kt*He,It=He+kt*ht,Ht=ma,_t=-It,ir=Ze+Te,Ea=Math.cos(ir),Na=Math.sin(ir);return{x1:Se*Math.cos(Te),y1:Se*Math.sin(Te),x2:ma*Ea-It*Na,y2:ma*Na+It*Ea,x3:Ht*Ea-_t*Na,y3:Ht*Na+_t*Ea,x4:Se*Math.cos(qe),y4:Se*Math.sin(qe)}},Ue=function(Se){return 180*Se/Math.PI},Qe=function(Se,Te,qe,Ze,lt,st){var ht=Se+.5*(qe-Se),He=Te+.5*(Ze-Te),Ae=lt+.5*(qe-lt),zt=st+.5*(Ze-st),kt=Math.min(Se,lt,ht,Ae),ma=Math.max(Se,lt,ht,Ae),It=Math.min(Te,st,He,zt),Ht=Math.max(Te,st,He,zt);return new n(kt,It,ma-kt,Ht-It)},ke=function(Se,Te,qe,Ze,lt,st,ht,He){var Ae,zt,kt,ma,It,Ht,_t,ir,Ea,Na,Ja,cr,dr,Sr,ka=qe-Se,Gr=Ze-Te,dn=lt-qe,Cn=st-Ze,fn=ht-lt,va=He-st;for(zt=0;zt<41;zt++)Ea=(_t=(kt=Se+(Ae=zt/40)*ka)+Ae*((It=qe+Ae*dn)-kt))+Ae*(It+Ae*(lt+Ae*fn-It)-_t),Na=(ir=(ma=Te+Ae*Gr)+Ae*((Ht=Ze+Ae*Cn)-ma))+Ae*(Ht+Ae*(st+Ae*va-Ht)-ir),zt==0?(Ja=Ea,cr=Na,dr=Ea,Sr=Na):(Ja=Math.min(Ja,Ea),cr=Math.min(cr,Na),dr=Math.max(dr,Ea),Sr=Math.max(Sr,Na));return new n(Math.round(Ja),Math.round(cr),Math.round(dr-Ja),Math.round(Sr-cr))},Ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Se,Te,qe=(Se=this.ctx.lineDash,Te=this.ctx.lineDashOffset,JSON.stringify({lineDash:Se,lineDashOffset:Te}));this.prevLineDash!==qe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=qe)}}})(qn.API),function(t){var e=function(l){var c,n,v,R,x,N,L,F,j,H;for(n=[],v=0,R=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;R>v;v+=4)(x=(l.charCodeAt(v)<<24)+(l.charCodeAt(v+1)<<16)+(l.charCodeAt(v+2)<<8)+l.charCodeAt(v+3))!==0?(N=(x=((x=((x=((x=(x-(H=x%85))/85)-(j=x%85))/85)-(F=x%85))/85)-(L=x%85))/85)%85,n.push(N+33,L+33,F+33,j+33,H+33)):n.push(122);return function(q,W){for(var ee=W;ee>0;ee--)q.pop()}(n,c.length),String.fromCharCode.apply(String,n)+"~>"},a=function(l){var c,n,v,R,x,N=String,L="length",F=255,j="charCodeAt",H="slice",q="replace";for(l[H](-2),l=l[H](0,-2)[q](/\s/g,"")[q]("z","!!!!!"),v=[],R=0,x=(l+=c="uuuuu"[H](l[L]%5||5))[L];x>R;R+=5)n=52200625*(l[j](R)-33)+614125*(l[j](R+1)-33)+7225*(l[j](R+2)-33)+85*(l[j](R+3)-33)+(l[j](R+4)-33),v.push(F&n>>24,F&n>>16,F&n>>8,F&n);return function(W,ee){for(var oe=ee;oe>0;oe--)W.pop()}(v,c[L]),N.fromCharCode.apply(N,v)},r=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var n="",v=0;v<l.length;v+=2)n+=String.fromCharCode("0x"+(l[v]+l[v+1]));return n},i=function(l){for(var c=new Uint8Array(l.length),n=l.length;n--;)c[n]=l.charCodeAt(n);return l=(c=ZI(c)).reduce(function(v,R){return v+String.fromCharCode(R)},"")};t.processDataByFilters=function(l,c){var n=0,v=l||"",R=[];for(typeof(c=c||[])=="string"&&(c=[c]),n=0;n<c.length;n+=1)switch(c[n]){case"ASCII85Decode":case"/ASCII85Decode":v=a(v),R.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=e(v),R.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=r(v),R.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=v.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",R.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=i(v),R.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[n]+'" is not implemented')}return{data:v,reverseChain:R.reverse().join(" ")}}}(qn.API),function(t){t.loadFile=function(e,a,r){return function(i,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var n=void 0;try{n=function(v,R,x){var N=new XMLHttpRequest,L=0,F=function(j){var H=j.length,q=[],W=String.fromCharCode;for(L=0;L<H;L+=1)q.push(W(255&j.charCodeAt(L)));return q.join("")};if(N.open("GET",v,!R),N.overrideMimeType("text/plain; charset=x-user-defined"),R===!1&&(N.onload=function(){N.status===200?x(F(this.responseText)):x(void 0)}),N.send(null),R&&N.status===200)return F(N.responseText)}(i,l,c)}catch{}return n}(e,a,r)},t.loadImageFile=t.loadFile}(qn.API),function(t){function e(){return(Yn.html2canvas?Promise.resolve(Yn.html2canvas):kI(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function a(){return(Yn.DOMPurify?Promise.resolve(Yn.DOMPurify):kI(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var n=Gs(c);return n==="undefined"?"undefined":n==="string"||c instanceof String?"string":n==="number"||c instanceof Number?"number":n==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":n==="object"?"object":"unknown"},i=function(c,n){var v=document.createElement(c);for(var R in n.className&&(v.className=n.className),n.innerHTML&&n.dompurify&&(v.innerHTML=n.dompurify.sanitize(n.innerHTML)),n.style)v.style[R]=n.style[R];return v},l=function c(n){var v=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),R=c.convert(Promise.resolve(),v);return R=(R=R.setProgress(1,c,1,[c])).set(n)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,n){return c.__proto__=n||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,n){return this.then(function(){switch(n=n||function(v){switch(r(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(a).then(function(v){return this.set({src:i("div",{innerHTML:c,dompurify:v})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},n=function v(R,x){for(var N=R.nodeType===3?document.createTextNode(R.nodeValue):R.cloneNode(!1),L=R.firstChild;L;L=L.nextSibling)x!==!0&&L.nodeType===1&&L.nodeName==="SCRIPT"||N.appendChild(v(L,x));return R.nodeType===1&&(R.nodeName==="CANVAS"?(N.width=R.width,N.height=R.height,N.getContext("2d").drawImage(R,0,0)):R.nodeName!=="TEXTAREA"&&R.nodeName!=="SELECT"||(N.value=R.value),N.addEventListener("load",function(){N.scrollTop=R.scrollTop,N.scrollLeft=R.scrollLeft},!0)),N}(this.prop.src,this.opt.html2canvas.javascriptEnabled);n.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(n),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(n){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,n(this.prop.container,v)}).then(function(n){(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(n){var v=this.opt.jsPDF,R=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=R,R)for(var L=0;L<R.length;++L){var F=R[L],j=F.src.find(function(H){return H.format==="truetype"});j&&v.addFont(j.url,F.ref.name,F.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,v.context2d.save(!0),n(this.prop.container,N)}).then(function(n){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,n,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(c,n):this.outputPdf(c,n)},l.prototype.outputPdf=function(c,n){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,n)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(r(c)!=="object")return this;var n=Object.keys(c||{}).map(function(v){if(v in l.template.prop)return function(){this.prop[v]=c[v]};switch(v){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[v]=c[v]}}},this);return this.then(function(){return this.thenList(n)})},l.prototype.get=function(c,n){return this.then(function(){var v=c in l.template.prop?this.prop[c]:this.opt[c];return n?n(v):v})},l.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function n(v,R){return Math.floor(v*R/72*96)}return this.then(function(){(c=c||qn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:n(c.inner.width,c.k),height:n(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,n,v,R){return c!=null&&(this.progress.val=c),n!=null&&(this.progress.state=n),v!=null&&(this.progress.n=v),R!=null&&(this.progress.stack=R),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,n,v,R){return this.setProgress(c?this.progress.val+c:null,n||null,v?this.progress.n+v:null,R?this.progress.stack.concat(R):null)},l.prototype.then=function(c,n){var v=this;return this.thenCore(c,n,function(R,x){return v.updateProgress(null,null,1,[R]),Promise.prototype.then.call(this,function(N){return v.updateProgress(null,R),N}).then(R,x).then(function(N){return v.updateProgress(1),N})})},l.prototype.thenCore=function(c,n,v){v=v||Promise.prototype.then,c&&(c=c.bind(this)),n&&(n=n.bind(this));var R=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),x=v.call(R,c,n);return l.convert(x,this.__proto__)},l.prototype.thenExternal=function(c,n){return Promise.prototype.then.call(this,c,n)},l.prototype.thenList=function(c){var n=this;return c.forEach(function(v){n=n.thenCore(v)}),n},l.prototype.catch=function(c){c&&(c=c.bind(this));var n=Promise.prototype.catch.call(this,c);return l.convert(n,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,qn.getPageSize=function(c,n,v){if(Gs(c)==="object"){var R=c;c=R.orientation,n=R.unit||n,v=R.format||v}n=n||"mm",v=v||"a4",c=(""+(c||"P")).toLowerCase();var x,N=(""+v).toLowerCase(),L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(n){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+n}var F,j=0,H=0;if(L.hasOwnProperty(N))j=L[N][1]/x,H=L[N][0]/x;else try{j=v[1],H=v[0]}catch{throw new Error("Invalid format: "+v)}if(c==="p"||c==="portrait")c="p",H>j&&(F=H,H=j,j=F);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",j>H&&(F=H,H=j,j=F)}return{width:H,height:j,unit:n,k:x,orientation:c}},t.html=function(c,n){(n=n||{}).callback=n.callback||function(){},n.html2canvas=n.html2canvas||{},n.html2canvas.canvas=n.html2canvas.canvas||this.canvas,n.jsPDF=n.jsPDF||this,n.fontFaces=n.fontFaces?n.fontFaces.map(YI):null;var v=new l(n);return n.worker?v:v.from(c).doCallback()}}(qn.API),qn.API.addJS=function(t){return Wq=t,this.internal.events.subscribe("postPutResources",function(){sb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Kq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Wq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){sb!==void 0&&Kq!==void 0&&this.internal.out("/Names <</JavaScript "+sb+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=a.outline.render().split(/\r\n/),l=0;l<i.length;l++){var c=i[l],n=r.exec(c);if(n!=null){var v=n[1];a.internal.newObjectDeferredBegin(v,!1)}a.internal.write(c)}if(this.outline.createNamedDestinations){var R=this.internal.pages.length,x=[];for(l=0;l<R;l++){var N=a.internal.newObject();x.push(N);var L=a.internal.getPageInfo(l+1);a.internal.write("<< /D["+L.objId+" 0 R /XYZ null null null]>> endobj")}var F=a.internal.newObject();for(a.internal.write("<< /Names [ "),l=0;l<x.length;l++)a.internal.write("(page_"+(l+1)+")"+x[l]+" 0 R");a.internal.write(" ] >>","endobj"),e=a.internal.newObject(),a.internal.write("<< /Dests "+F+" 0 R"),a.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,i,l){var c={title:i,options:l,children:[]};return r==null&&(r=this.root),r.children.push(c),c},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var c=r.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var n=this.count=this.count_r({count:0},c);if(n>0&&this.line("/Count "+n),c.options&&c.options.pageNumber){var v=a.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+v.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var R=0;R<r.children.length;R++)this.renderItems(r.children[R])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,i){for(var l=0;l<i.children.length;l++)r.count++,this.count_r(r,i.children[l]);return r.count}}])}(qn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(a,r,i,l,c,n){var v,R=this.decode.DCT_DECODE,x=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=c||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,(v=function(N){for(var L,F=256*N.charCodeAt(4)+N.charCodeAt(5),j=N.length,H={width:0,height:0,numcomponents:1},q=4;q<j;q+=2){if(q+=F,e.indexOf(N.charCodeAt(q+1))!==-1){L=256*N.charCodeAt(q+5)+N.charCodeAt(q+6),H={width:256*N.charCodeAt(q+7)+N.charCodeAt(q+8),height:L,numcomponents:N.charCodeAt(q+9)};break}F=256*N.charCodeAt(q+2)+N.charCodeAt(q+3)}return H}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a)).numcomponents){case 1:n=this.color_spaces.DEVICE_GRAY;break;case 4:n=this.color_spaces.DEVICE_CMYK;break;case 3:n=this.color_spaces.DEVICE_RGB}x={data:a,width:v.width,height:v.height,colorSpace:n,bitsPerComponent:8,filter:R,index:r,alias:i}}return x}}(qn.API);var j0,ob,Yq,Xq,Jq,OOe=function(){var t,e,a;function r(l){var c,n,v,R,x,N,L,F,j,H,q,W,ee,oe;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},N=null;;){switch(c=this.readUInt32(),j=(function(){var fe,se;for(se=[],fe=0;fe<4;++fe)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":N&&this.animation.frames.push(N),this.pos+=4,N={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),R=this.readUInt16()||100,N.delay=1e3*x/R,N.disposeOp=this.data[this.pos++],N.blendOp=this.data[this.pos++],N.data=[];break;case"IDAT":case"fdAT":for(j==="fdAT"&&(this.pos+=4,c-=4),l=(N!=null?N.data:void 0)||this.imgData,W=0;0<=c?W<c:W>c;0<=c?++W:--W)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(v=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>v)throw new Error("More transparent colors than palette size");if((H=v-this.transparency.indexed.length)>0)for(ee=0;0<=H?ee<H:ee>H;0<=H?++ee:--ee)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":L=(q=this.read(c)).indexOf(0),F=String.fromCharCode.apply(String,q.slice(0,L)),this.text[F]=String.fromCharCode.apply(String,q.slice(L+1));break;case"IEND":return N&&this.animation.frames.push(N),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(oe=this.colorType)===4||oe===6,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var c,n;for(n=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var c=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*c),v=0,R=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function x(N,L,F,j){var H,q,W,ee,oe,fe,se,me,ge,Re,we,Ee,ae,_e,Ie,xe,ze,Me,je,Ue,Qe,ke=Math.ceil((R.width-N)/F),Ge=Math.ceil((R.height-L)/j),Se=R.width==ke&&R.height==Ge;for(_e=c*ke,Ee=Se?n:new Uint8Array(_e*Ge),fe=l.length,ae=0,q=0;ae<Ge&&v<fe;){switch(l[v++]){case 0:for(ee=ze=0;ze<_e;ee=ze+=1)Ee[q++]=l[v++];break;case 1:for(ee=Me=0;Me<_e;ee=Me+=1)H=l[v++],oe=ee<c?0:Ee[q-c],Ee[q++]=(H+oe)%256;break;case 2:for(ee=je=0;je<_e;ee=je+=1)H=l[v++],W=(ee-ee%c)/c,Ie=ae&&Ee[(ae-1)*_e+W*c+ee%c],Ee[q++]=(Ie+H)%256;break;case 3:for(ee=Ue=0;Ue<_e;ee=Ue+=1)H=l[v++],W=(ee-ee%c)/c,oe=ee<c?0:Ee[q-c],Ie=ae&&Ee[(ae-1)*_e+W*c+ee%c],Ee[q++]=(H+Math.floor((oe+Ie)/2))%256;break;case 4:for(ee=Qe=0;Qe<_e;ee=Qe+=1)H=l[v++],W=(ee-ee%c)/c,oe=ee<c?0:Ee[q-c],ae===0?Ie=xe=0:(Ie=Ee[(ae-1)*_e+W*c+ee%c],xe=W&&Ee[(ae-1)*_e+(W-1)*c+ee%c]),se=oe+Ie-xe,me=Math.abs(se-oe),Re=Math.abs(se-Ie),we=Math.abs(se-xe),ge=me<=Re&&me<=we?oe:Re<=we?Ie:xe,Ee[q++]=(H+ge)%256;break;default:throw new Error("Invalid filter algorithm: "+l[v-1])}if(!Se){var Te=((L+ae*j)*R.width+N)*c,qe=ae*_e;for(ee=0;ee<ke;ee+=1){for(var Ze=0;Ze<c;Ze+=1)n[Te++]=Ee[qe++];Te+=(F-1)*c}}ae++}}return l=uOe(l),R.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),n},r.prototype.decodePalette=function(){var l,c,n,v,R,x,N,L,F;for(n=this.palette,x=this.transparency.indexed||[],R=new Uint8Array((x.length||0)+n.length),v=0,l=0,c=N=0,L=n.length;N<L;c=N+=3)R[v++]=n[c],R[v++]=n[c+1],R[v++]=n[c+2],R[v++]=(F=x[l++])!=null?F:255;return R},r.prototype.copyToImageData=function(l,c){var n,v,R,x,N,L,F,j,H,q,W;if(v=this.colors,H=null,n=this.hasAlphaChannel,this.palette.length&&(H=(W=this._decodedPalette)!=null?W:this._decodedPalette=this.decodePalette(),v=4,n=!0),j=(R=l.data||l).length,N=H||c,x=L=0,v===1)for(;x<j;)F=H?4*c[x/4]:L,q=N[F++],R[x++]=q,R[x++]=q,R[x++]=q,R[x++]=n?N[F++]:255,L=F;else for(;x<j;)F=H?4*c[x/4]:L,R[x++]=N[F++],R[x++]=N[F++],R[x++]=N[F++],R[x++]=n?N[F++]:255,L=F},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var i=function(){if(Object.prototype.toString.call(Yn)==="[object Window]"){try{e=Yn.document.createElement("canvas"),a=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(l){var c;if(i()===!0)return a.width=l.width,a.height=l.height,a.clearRect(0,0,l.width,l.height),a.putImageData(l,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var c,n,v,R,x,N,L,F;if(this.animation){for(F=[],n=x=0,N=(L=this.animation.frames).length;x<N;n=++x)c=L[n],v=l.createImageData(c.width,c.height),R=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(v,R),c.imageData=v,F.push(c.image=t(v));return F}},r.prototype.renderFrame=function(l,c){var n,v,R;return n=(v=this.animation.frames)[c],R=v[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(R!=null?R.disposeOp:void 0)===1?l.clearRect(R.xOffset,R.yOffset,R.width,R.height):(R!=null?R.disposeOp:void 0)===2&&l.putImageData(R.imageData,R.xOffset,R.yOffset),n.blendOp===0&&l.clearRect(n.xOffset,n.yOffset,n.width,n.height),l.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(l){var c,n,v,R,x,N,L=this;return n=0,N=this.animation,R=N.numFrames,v=N.frames,x=N.numPlays,(c=function(){var F,j;if(F=n++%R,j=v[F],L.renderFrame(l,F),R>1&&n/R<x)return L.animation._timeout=setTimeout(c,j.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var c,n;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(n=c.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),c.putImageData(n,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function VOe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],l=i>>7,c=1<<(7&i)+1;t[e++],t[e++];var n=null,v=null;l&&(n=e,v=c,e+=3*c);var R=!0,x=[],N=0,L=null,F=0,j=null;for(this.width=a,this.height=r;R&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,j=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((ae=t[e++])>=0))throw Error("Invalid block size");if(ae===0)break;e+=ae}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var H=t[e++];N=t[e++]|t[e++]<<8,L=t[e++],(1&H)==0&&(L=null),F=H>>2&7,e++;break;case 254:for(;;){if(!((ae=t[e++])>=0))throw Error("Invalid block size");if(ae===0)break;e+=ae}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var q=t[e++]|t[e++]<<8,W=t[e++]|t[e++]<<8,ee=t[e++]|t[e++]<<8,oe=t[e++]|t[e++]<<8,fe=t[e++],se=fe>>6&1,me=1<<(7&fe)+1,ge=n,Re=v,we=!1;fe>>7&&(we=!0,ge=e,Re=me,e+=3*me);var Ee=e;for(e++;;){var ae;if(!((ae=t[e++])>=0))throw Error("Invalid block size");if(ae===0)break;e+=ae}x.push({x:q,y:W,width:ee,height:oe,has_local_palette:we,palette_offset:ge,palette_size:Re,data_offset:Ee,data_length:e-Ee,transparent_index:L,interlaced:!!se,delay:N,disposal:F});break;case 59:R=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return j},this.frameInfo=function(_e){if(_e<0||_e>=x.length)throw new Error("Frame index out of range.");return x[_e]},this.decodeAndBlitFrameBGRA=function(_e,Ie){var xe=this.frameInfo(_e),ze=xe.width*xe.height,Me=new Uint8Array(ze);Qq(t,xe.data_offset,Me,ze);var je=xe.palette_offset,Ue=xe.transparent_index;Ue===null&&(Ue=256);var Qe=xe.width,ke=a-Qe,Ge=Qe,Se=4*(xe.y*a+xe.x),Te=4*((xe.y+xe.height)*a+xe.x),qe=Se,Ze=4*ke;xe.interlaced===!0&&(Ze+=4*a*7);for(var lt=8,st=0,ht=Me.length;st<ht;++st){var He=Me[st];if(Ge===0&&(Ge=Qe,(qe+=Ze)>=Te&&(Ze=4*ke+4*a*(lt-1),qe=Se+(Qe+ke)*(lt<<1),lt>>=1)),He===Ue)qe+=4;else{var Ae=t[je+3*He],zt=t[je+3*He+1],kt=t[je+3*He+2];Ie[qe++]=kt,Ie[qe++]=zt,Ie[qe++]=Ae,Ie[qe++]=255}--Ge}},this.decodeAndBlitFrameRGBA=function(_e,Ie){var xe=this.frameInfo(_e),ze=xe.width*xe.height,Me=new Uint8Array(ze);Qq(t,xe.data_offset,Me,ze);var je=xe.palette_offset,Ue=xe.transparent_index;Ue===null&&(Ue=256);var Qe=xe.width,ke=a-Qe,Ge=Qe,Se=4*(xe.y*a+xe.x),Te=4*((xe.y+xe.height)*a+xe.x),qe=Se,Ze=4*ke;xe.interlaced===!0&&(Ze+=4*a*7);for(var lt=8,st=0,ht=Me.length;st<ht;++st){var He=Me[st];if(Ge===0&&(Ge=Qe,(qe+=Ze)>=Te&&(Ze=4*ke+4*a*(lt-1),qe=Se+(Qe+ke)*(lt<<1),lt>>=1)),He===Ue)qe+=4;else{var Ae=t[je+3*He],zt=t[je+3*He+1],kt=t[je+3*He+2];Ie[qe++]=Ae,Ie[qe++]=zt,Ie[qe++]=kt,Ie[qe++]=255}--Ge}}}function Qq(t,e,a,r){for(var i=t[e++],l=1<<i,c=l+1,n=c+1,v=i+1,R=(1<<v)-1,x=0,N=0,L=0,F=t[e++],j=new Int32Array(4096),H=null;;){for(;x<16&&F!==0;)N|=t[e++]<<x,x+=8,F===1?F=t[e++]:--F;if(x<v)break;var q=N&R;if(N>>=v,x-=v,q!==l){if(q===c)break;for(var W=q<n?q:H,ee=0,oe=W;oe>l;)oe=j[oe]>>8,++ee;var fe=oe;if(L+ee+(W!==q?1:0)>r)return void ho.log("Warning, gif stream longer than expected.");a[L++]=fe;var se=L+=ee;for(W!==q&&(a[L++]=fe),oe=W;ee--;)oe=j[oe],a[--se]=255&oe,oe>>=8;H!==null&&n<4096&&(j[n++]=H<<8|fe,n>=R+1&&v<12&&(++v,R=R<<1|1)),H=q}else n=c+1,R=(1<<(v=i+1))-1,H=null}return L!==r&&ho.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vD(t){var e,a,r,i,l,c=Math.floor,n=new Array(64),v=new Array(64),R=new Array(64),x=new Array(64),N=new Array(65535),L=new Array(65535),F=new Array(64),j=new Array(64),H=[],q=0,W=7,ee=new Array(64),oe=new Array(64),fe=new Array(64),se=new Array(256),me=new Array(2048),ge=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],we=[0,1,2,3,4,5,6,7,8,9,10,11],Ee=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ae=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_e=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ie=[0,1,2,3,4,5,6,7,8,9,10,11],xe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ze=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Me(Se,Te){for(var qe=0,Ze=0,lt=new Array,st=1;st<=16;st++){for(var ht=1;ht<=Se[st];ht++)lt[Te[Ze]]=[],lt[Te[Ze]][0]=qe,lt[Te[Ze]][1]=st,Ze++,qe++;qe*=2}return lt}function je(Se){for(var Te=Se[0],qe=Se[1]-1;qe>=0;)Te&1<<qe&&(q|=1<<W),qe--,--W<0&&(q==255?(Ue(255),Ue(0)):Ue(q),W=7,q=0)}function Ue(Se){H.push(Se)}function Qe(Se){Ue(Se>>8&255),Ue(255&Se)}function ke(Se,Te,qe,Ze,lt){for(var st,ht=lt[0],He=lt[240],Ae=function(Na,Ja){var cr,dr,Sr,ka,Gr,dn,Cn,fn,va,Wa,ua=0;for(va=0;va<8;++va){cr=Na[ua],dr=Na[ua+1],Sr=Na[ua+2],ka=Na[ua+3],Gr=Na[ua+4],dn=Na[ua+5],Cn=Na[ua+6];var Xa=cr+(fn=Na[ua+7]),pr=cr-fn,Mn=dr+Cn,Sn=dr-Cn,hn=Sr+dn,$r=Sr-dn,br=ka+Gr,$i=ka-Gr,zi=Xa+br,Ui=Xa-br,ao=Mn+hn,di=Mn-hn;Na[ua]=zi+ao,Na[ua+4]=zi-ao;var rn=.707106781*(di+Ui);Na[ua+2]=Ui+rn,Na[ua+6]=Ui-rn;var Jn=.382683433*((zi=$i+$r)-(di=Sn+pr)),vu=.5411961*zi+Jn,us=1.306562965*di+Jn,Xt=.707106781*(ao=$r+Sn),Ne=pr+Xt,Fe=pr-Xt;Na[ua+5]=Fe+vu,Na[ua+3]=Fe-vu,Na[ua+1]=Ne+us,Na[ua+7]=Ne-us,ua+=8}for(ua=0,va=0;va<8;++va){cr=Na[ua],dr=Na[ua+8],Sr=Na[ua+16],ka=Na[ua+24],Gr=Na[ua+32],dn=Na[ua+40],Cn=Na[ua+48];var Xe=cr+(fn=Na[ua+56]),wt=cr-fn,yt=dr+Cn,bt=dr-Cn,Gt=Sr+dn,Et=Sr-dn,Kt=ka+Gr,Wt=ka-Gr,$t=Xe+Kt,Ta=Xe-Kt,Ma=yt+Gt,ja=yt-Gt;Na[ua]=$t+Ma,Na[ua+32]=$t-Ma;var _r=.707106781*(ja+Ta);Na[ua+16]=Ta+_r,Na[ua+48]=Ta-_r;var Vr=.382683433*(($t=Wt+Et)-(ja=bt+wt)),zr=.5411961*$t+Vr,Zr=1.306562965*ja+Vr,In=.707106781*(Ma=Et+bt),ei=wt+In,Hr=wt-In;Na[ua+40]=Hr+zr,Na[ua+24]=Hr-zr,Na[ua+8]=ei+Zr,Na[ua+56]=ei-Zr,ua++}for(va=0;va<64;++va)Wa=Na[va]*Ja[va],F[va]=Wa>0?Wa+.5|0:Wa-.5|0;return F}(Se,Te),zt=0;zt<64;++zt)j[ge[zt]]=Ae[zt];var kt=j[0]-qe;qe=j[0],kt==0?je(Ze[0]):(je(Ze[L[st=32767+kt]]),je(N[st]));for(var ma=63;ma>0&&j[ma]==0;)ma--;if(ma==0)return je(ht),qe;for(var It,Ht=1;Ht<=ma;){for(var _t=Ht;j[Ht]==0&&Ht<=ma;)++Ht;var ir=Ht-_t;if(ir>=16){It=ir>>4;for(var Ea=1;Ea<=It;++Ea)je(He);ir&=15}st=32767+j[Ht],je(lt[(ir<<4)+L[st]]),je(N[st]),Ht++}return ma!=63&&je(ht),qe}function Ge(Se){Se=Math.min(Math.max(Se,1),100),l!=Se&&(function(Te){for(var qe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ze=0;Ze<64;Ze++){var lt=c((qe[Ze]*Te+50)/100);lt=Math.min(Math.max(lt,1),255),n[ge[Ze]]=lt}for(var st=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ht=0;ht<64;ht++){var He=c((st[ht]*Te+50)/100);He=Math.min(Math.max(He,1),255),v[ge[ht]]=He}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],zt=0,kt=0;kt<8;kt++)for(var ma=0;ma<8;ma++)R[zt]=1/(n[ge[zt]]*Ae[kt]*Ae[ma]*8),x[zt]=1/(v[ge[zt]]*Ae[kt]*Ae[ma]*8),zt++}(Se<50?Math.floor(5e3/Se):Math.floor(200-2*Se)),l=Se)}this.encode=function(Se,Te){Te&&Ge(Te),H=new Array,q=0,W=7,Qe(65496),Qe(65504),Qe(16),Ue(74),Ue(70),Ue(73),Ue(70),Ue(0),Ue(1),Ue(1),Ue(0),Qe(1),Qe(1),Ue(0),Ue(0),function(){Qe(65499),Qe(132),Ue(0);for(var dr=0;dr<64;dr++)Ue(n[dr]);Ue(1);for(var Sr=0;Sr<64;Sr++)Ue(v[Sr])}(),function(dr,Sr){Qe(65472),Qe(17),Ue(8),Qe(Sr),Qe(dr),Ue(3),Ue(1),Ue(17),Ue(0),Ue(2),Ue(17),Ue(1),Ue(3),Ue(17),Ue(1)}(Se.width,Se.height),function(){Qe(65476),Qe(418),Ue(0);for(var dr=0;dr<16;dr++)Ue(Re[dr+1]);for(var Sr=0;Sr<=11;Sr++)Ue(we[Sr]);Ue(16);for(var ka=0;ka<16;ka++)Ue(Ee[ka+1]);for(var Gr=0;Gr<=161;Gr++)Ue(ae[Gr]);Ue(1);for(var dn=0;dn<16;dn++)Ue(_e[dn+1]);for(var Cn=0;Cn<=11;Cn++)Ue(Ie[Cn]);Ue(17);for(var fn=0;fn<16;fn++)Ue(xe[fn+1]);for(var va=0;va<=161;va++)Ue(ze[va])}(),Qe(65498),Qe(12),Ue(3),Ue(1),Ue(0),Ue(2),Ue(17),Ue(3),Ue(17),Ue(0),Ue(63),Ue(0);var qe=0,Ze=0,lt=0;q=0,W=7,this.encode.displayName="_encode_";for(var st,ht,He,Ae,zt,kt,ma,It,Ht,_t=Se.data,ir=Se.width,Ea=Se.height,Na=4*ir,Ja=0;Ja<Ea;){for(st=0;st<Na;){for(zt=Na*Ja+st,ma=-1,It=0,Ht=0;Ht<64;Ht++)kt=zt+(It=Ht>>3)*Na+(ma=4*(7&Ht)),Ja+It>=Ea&&(kt-=Na*(Ja+1+It-Ea)),st+ma>=Na&&(kt-=st+ma-Na+4),ht=_t[kt++],He=_t[kt++],Ae=_t[kt++],ee[Ht]=(me[ht]+me[He+256>>0]+me[Ae+512>>0]>>16)-128,oe[Ht]=(me[ht+768>>0]+me[He+1024>>0]+me[Ae+1280>>0]>>16)-128,fe[Ht]=(me[ht+1280>>0]+me[He+1536>>0]+me[Ae+1792>>0]>>16)-128;qe=ke(ee,R,qe,e,r),Ze=ke(oe,x,Ze,a,i),lt=ke(fe,x,lt,a,i),st+=32}Ja+=8}if(W>=0){var cr=[];cr[1]=W+1,cr[0]=(1<<W+1)-1,je(cr)}return Qe(65497),new Uint8Array(H)},t=t||50,function(){for(var Se=String.fromCharCode,Te=0;Te<256;Te++)se[Te]=Se(Te)}(),e=Me(Re,we),a=Me(_e,Ie),r=Me(Ee,ae),i=Me(xe,ze),function(){for(var Se=1,Te=2,qe=1;qe<=15;qe++){for(var Ze=Se;Ze<Te;Ze++)L[32767+Ze]=qe,N[32767+Ze]=[],N[32767+Ze][1]=qe,N[32767+Ze][0]=Ze;for(var lt=-(Te-1);lt<=-Se;lt++)L[32767+lt]=qe,N[32767+lt]=[],N[32767+lt][1]=qe,N[32767+lt][0]=Te-1+lt;Se<<=1,Te<<=1}}(),function(){for(var Se=0;Se<256;Se++)me[Se]=19595*Se,me[Se+256>>0]=38470*Se,me[Se+512>>0]=7471*Se+32768,me[Se+768>>0]=-11059*Se,me[Se+1024>>0]=-21709*Se,me[Se+1280>>0]=32768*Se+8421375,me[Se+1536>>0]=-27439*Se,me[Se+1792>>0]=-5329*Se}(),Ge(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Lp(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eH(t){function e(Re){if(!Re)throw Error("assert :P")}function a(Re,we,Ee){for(var ae=0;4>ae;ae++)if(Re[we+ae]!=Ee.charCodeAt(ae))return!0;return!1}function r(Re,we,Ee,ae,_e){for(var Ie=0;Ie<_e;Ie++)Re[we+Ie]=Ee[ae+Ie]}function i(Re,we,Ee,ae){for(var _e=0;_e<ae;_e++)Re[we+_e]=Ee}function l(Re){return new Int32Array(Re)}function c(Re,we){for(var Ee=[],ae=0;ae<Re;ae++)Ee.push(new we);return Ee}function n(Re,we){var Ee=[];return function ae(_e,Ie,xe){for(var ze=xe[Ie],Me=0;Me<ze&&(_e.push(xe.length>Ie+1?[]:new we),!(xe.length<Ie+1));Me++)ae(_e[Me],Ie+1,xe)}(Ee,0,Re),Ee}var v=function(){var Re=this;function we(G,Q){for(var ye=1<<Q-1>>>0;G&ye;)ye>>>=1;return ye?(G&ye-1)+ye:G}function Ee(G,Q,ye,De,Ke){e(!(De%ye));do G[Q+(De-=ye)]=Ke;while(0<De)}function ae(G,Q,ye,De,Ke){if(e(2328>=Ke),512>=Ke)var rt=l(512);else if((rt=l(Ke))==null)return 0;return function(it,dt,mt,St,ea,Pt){var _a,na,Ra=dt,fa=1<<mt,Rt=l(16),aa=l(16);for(e(ea!=0),e(St!=null),e(it!=null),e(0<mt),na=0;na<ea;++na){if(15<St[na])return 0;++Rt[St[na]]}if(Rt[0]==ea)return 0;for(aa[1]=0,_a=1;15>_a;++_a){if(Rt[_a]>1<<_a)return 0;aa[_a+1]=aa[_a]+Rt[_a]}for(na=0;na<ea;++na)_a=St[na],0<St[na]&&(Pt[aa[_a]++]=na);if(aa[15]==1)return(St=new _e).g=0,St.value=Pt[0],Ee(it,Ra,1,fa,St),fa;var Ga,Ya=-1,Ha=fa-1,xr=0,gr=1,sn=1,hr=1<<mt;for(na=0,_a=1,ea=2;_a<=mt;++_a,ea<<=1){if(gr+=sn<<=1,0>(sn-=Rt[_a]))return 0;for(;0<Rt[_a];--Rt[_a])(St=new _e).g=_a,St.value=Pt[na++],Ee(it,Ra+xr,ea,hr,St),xr=we(xr,_a)}for(_a=mt+1,ea=2;15>=_a;++_a,ea<<=1){if(gr+=sn<<=1,0>(sn-=Rt[_a]))return 0;for(;0<Rt[_a];--Rt[_a]){if(St=new _e,(xr&Ha)!=Ya){for(Ra+=hr,Ga=1<<(Ya=_a)-mt;15>Ya&&!(0>=(Ga-=Rt[Ya]));)++Ya,Ga<<=1;fa+=hr=1<<(Ga=Ya-mt),it[dt+(Ya=xr&Ha)].g=Ga+mt,it[dt+Ya].value=Ra-dt-Ya}St.g=_a-mt,St.value=Pt[na++],Ee(it,Ra+(xr>>mt),ea,hr,St),xr=we(xr,_a)}}return gr!=2*aa[15]-1?0:fa}(G,Q,ye,De,Ke,rt)}function _e(){this.value=this.g=0}function Ie(){this.value=this.g=0}function xe(){this.G=c(5,_e),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(zs,Ie)}function ze(G,Q,ye,De){e(G!=null),e(Q!=null),e(2147483648>De),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=Q,G.pa=ye,G.Jd=Q,G.Yc=ye+De,G.Zc=4<=De?ye+De-4+1:ye,st(G)}function Me(G,Q){for(var ye=0;0<Q--;)ye|=He(G,128)<<Q;return ye}function je(G,Q){var ye=Me(G,Q);return ht(G)?-ye:ye}function Ue(G,Q,ye,De){var Ke,rt=0;for(e(G!=null),e(Q!=null),e(4294967288>De),G.Sb=De,G.Ra=0,G.u=0,G.h=0,4<De&&(De=4),Ke=0;Ke<De;++Ke)rt+=Q[ye+Ke]<<8*Ke;G.Ra=rt,G.bb=De,G.oa=Q,G.pa=ye}function Qe(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<Va-8>>>0,++G.bb,G.u-=8;qe(G)&&(G.h=1,G.u=0)}function ke(G,Q){if(e(0<=Q),!G.h&&Q<=vc){var ye=Te(G)&wi[Q];return G.u+=Q,Qe(G),ye}return G.h=1,G.u=0}function Ge(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Se(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Te(G){return G.Ra>>>(G.u&Va-1)>>>0}function qe(G){return e(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>Va}function Ze(G,Q){G.u=Q,G.h=qe(G)}function lt(G){G.u>=Md&&(e(G.u>=Md),Qe(G))}function st(G){e(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(e(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function ht(G){return Me(G,1)}function He(G,Q){var ye=G.Ca;0>G.b&&st(G);var De=G.b,Ke=ye*Q>>>8,rt=(G.I>>>De>Ke)+0;for(rt?(ye-=Ke,G.I-=Ke+1<<De>>>0):ye=Ke+1,De=ye,Ke=0;256<=De;)Ke+=8,De>>=8;return De=7^Ke+Ys[De],G.b-=De,G.Ca=(ye<<De)-1,rt}function Ae(G,Q,ye){G[Q+0]=ye>>24&255,G[Q+1]=ye>>16&255,G[Q+2]=ye>>8&255,G[Q+3]=ye>>0&255}function zt(G,Q){return G[Q+0]<<0|G[Q+1]<<8}function kt(G,Q){return zt(G,Q)|G[Q+2]<<16}function ma(G,Q){return zt(G,Q)|zt(G,Q+2)<<16}function It(G,Q){var ye=1<<Q;return e(G!=null),e(0<Q),G.X=l(ye),G.X==null?0:(G.Mb=32-Q,G.Xa=Q,1)}function Ht(G,Q){e(G!=null),e(Q!=null),e(G.Xa==Q.Xa),r(Q.X,0,G.X,0,1<<Q.Xa)}function _t(){this.X=[],this.Xa=this.Mb=0}function ir(G,Q,ye,De){e(ye!=null),e(De!=null);var Ke=ye[0],rt=De[0];return Ke==0&&(Ke=(G*rt+Q/2)/Q),rt==0&&(rt=(Q*Ke+G/2)/G),0>=Ke||0>=rt?0:(ye[0]=Ke,De[0]=rt,1)}function Ea(G,Q){return G+(1<<Q)-1>>>Q}function Na(G,Q){return((4278255360&G)+(4278255360&Q)>>>0&4278255360)+((16711935&G)+(16711935&Q)>>>0&16711935)>>>0}function Ja(G,Q){Re[Q]=function(ye,De,Ke,rt,it,dt,mt){var St;for(St=0;St<it;++St){var ea=Re[G](dt[mt+St-1],Ke,rt+St);dt[mt+St]=Na(ye[De+St],ea)}}}function cr(){this.ud=this.hd=this.jd=0}function dr(G,Q){return((4278124286&(G^Q))>>>1)+(G&Q)>>>0}function Sr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function ka(G,Q){return Sr(G+(G-Q+.5>>1))}function Gr(G,Q,ye){return Math.abs(Q-ye)-Math.abs(G-ye)}function dn(G,Q,ye,De,Ke,rt,it){for(De=rt[it-1],ye=0;ye<Ke;++ye)rt[it+ye]=De=Na(G[Q+ye],De)}function Cn(G,Q,ye,De,Ke){var rt;for(rt=0;rt<ye;++rt){var it=G[Q+rt],dt=it>>8&255,mt=16711935&(mt=(mt=16711935&it)+((dt<<16)+dt));De[Ke+rt]=(4278255360&it)+mt>>>0}}function fn(G,Q){Q.jd=G>>0&255,Q.hd=G>>8&255,Q.ud=G>>16&255}function va(G,Q,ye,De,Ke,rt){var it;for(it=0;it<De;++it){var dt=Q[ye+it],mt=dt>>>8,St=dt,ea=255&(ea=(ea=dt>>>16)+((G.jd<<24>>24)*(mt<<24>>24)>>>5));St=255&(St=(St=St+((G.hd<<24>>24)*(mt<<24>>24)>>>5))+((G.ud<<24>>24)*(ea<<24>>24)>>>5)),Ke[rt+it]=(4278255360&dt)+(ea<<16)+St}}function Wa(G,Q,ye,De,Ke){Re[Q]=function(rt,it,dt,mt,St,ea,Pt,_a,na){for(mt=Pt;mt<_a;++mt)for(Pt=0;Pt<na;++Pt)St[ea++]=Ke(dt[De(rt[it++])])},Re[G]=function(rt,it,dt,mt,St,ea,Pt){var _a=8>>rt.b,na=rt.Ea,Ra=rt.K[0],fa=rt.w;if(8>_a)for(rt=(1<<rt.b)-1,fa=(1<<_a)-1;it<dt;++it){var Rt,aa=0;for(Rt=0;Rt<na;++Rt)Rt&rt||(aa=De(mt[St++])),ea[Pt++]=Ke(Ra[aa&fa]),aa>>=_a}else Re["VP8LMapColor"+ye](mt,St,Ra,fa,ea,Pt,it,dt,na)}}function ua(G,Q,ye,De,Ke){for(ye=Q+ye;Q<ye;){var rt=G[Q++];De[Ke++]=rt>>16&255,De[Ke++]=rt>>8&255,De[Ke++]=rt>>0&255}}function Xa(G,Q,ye,De,Ke){for(ye=Q+ye;Q<ye;){var rt=G[Q++];De[Ke++]=rt>>16&255,De[Ke++]=rt>>8&255,De[Ke++]=rt>>0&255,De[Ke++]=rt>>24&255}}function pr(G,Q,ye,De,Ke){for(ye=Q+ye;Q<ye;){var rt=(it=G[Q++])>>16&240|it>>12&15,it=it>>0&240|it>>28&15;De[Ke++]=rt,De[Ke++]=it}}function Mn(G,Q,ye,De,Ke){for(ye=Q+ye;Q<ye;){var rt=(it=G[Q++])>>16&248|it>>13&7,it=it>>5&224|it>>3&31;De[Ke++]=rt,De[Ke++]=it}}function Sn(G,Q,ye,De,Ke){for(ye=Q+ye;Q<ye;){var rt=G[Q++];De[Ke++]=rt>>0&255,De[Ke++]=rt>>8&255,De[Ke++]=rt>>16&255}}function hn(G,Q,ye,De,Ke,rt){if(rt==0)for(ye=Q+ye;Q<ye;)Ae(De,((rt=G[Q++])[0]>>24|rt[1]>>8&65280|rt[2]<<8&16711680|rt[3]<<24)>>>0),Ke+=32;else r(De,Ke,G,Q,ye)}function $r(G,Q){Re[Q][0]=Re[G+"0"],Re[Q][1]=Re[G+"1"],Re[Q][2]=Re[G+"2"],Re[Q][3]=Re[G+"3"],Re[Q][4]=Re[G+"4"],Re[Q][5]=Re[G+"5"],Re[Q][6]=Re[G+"6"],Re[Q][7]=Re[G+"7"],Re[Q][8]=Re[G+"8"],Re[Q][9]=Re[G+"9"],Re[Q][10]=Re[G+"10"],Re[Q][11]=Re[G+"11"],Re[Q][12]=Re[G+"12"],Re[Q][13]=Re[G+"13"],Re[Q][14]=Re[G+"0"],Re[Q][15]=Re[G+"0"]}function br(G){return G==Eu||G==Xu||G==Cc||G==em}function $i(){this.eb=[],this.size=this.A=this.fb=0}function zi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ui(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new $i,this.f.kb=new zi,this.sd=null}function ao(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function di(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rn(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function Jn(G,Q){var ye=G.T,De=Q.ba.f.RGBA,Ke=De.eb,rt=De.fb+G.ka*De.A,it=ol[Q.ba.S],dt=G.y,mt=G.O,St=G.f,ea=G.N,Pt=G.ea,_a=G.W,na=Q.cc,Ra=Q.dc,fa=Q.Mc,Rt=Q.Nc,aa=G.ka,Ga=G.ka+G.T,Ya=G.U,Ha=Ya+1>>1;for(aa==0?it(dt,mt,null,null,St,ea,Pt,_a,St,ea,Pt,_a,Ke,rt,null,null,Ya):(it(Q.ec,Q.fc,dt,mt,na,Ra,fa,Rt,St,ea,Pt,_a,Ke,rt-De.A,Ke,rt,Ya),++ye);aa+2<Ga;aa+=2)na=St,Ra=ea,fa=Pt,Rt=_a,ea+=G.Rc,_a+=G.Rc,rt+=2*De.A,it(dt,(mt+=2*G.fa)-G.fa,dt,mt,na,Ra,fa,Rt,St,ea,Pt,_a,Ke,rt-De.A,Ke,rt,Ya);return mt+=G.fa,G.j+Ga<G.o?(r(Q.ec,Q.fc,dt,mt,Ya),r(Q.cc,Q.dc,St,ea,Ha),r(Q.Mc,Q.Nc,Pt,_a,Ha),ye--):1&Ga||it(dt,mt,null,null,St,ea,Pt,_a,St,ea,Pt,_a,Ke,rt+De.A,null,null,Ya),ye}function vu(G,Q,ye){var De=G.F,Ke=[G.J];if(De!=null){var rt=G.U,it=Q.ba.S,dt=it==il||it==Cc;Q=Q.ba.f.RGBA;var mt=[0],St=G.ka;mt[0]=G.T,G.Kb&&(St==0?--mt[0]:(--St,Ke[0]-=G.width),G.j+G.ka+G.T==G.o&&(mt[0]=G.o-G.j-St));var ea=Q.eb;St=Q.fb+St*Q.A,G=ni(De,Ke[0],G.width,rt,mt,ea,St+(dt?0:3),Q.A),e(ye==mt),G&&br(it)&&gs(ea,St,dt,rt,mt,Q.A)}return 0}function us(G){var Q=G.ma,ye=Q.ba.S,De=11>ye,Ke=ye==kd||ye==Gh||ye==il||ye==vl||ye==12||br(ye);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!ru(Q.Oa,G,Ke?11:12))return 0;if(Ke&&br(ye)&&nr(),G.da)alert("todo:use_scaling");else{if(De){if(Q.Ib=rn,G.Kb){if(ye=G.U+1>>1,Q.memory=l(G.U+2*ye),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+G.U,Q.Mc=Q.cc,Q.Nc=Q.dc+ye,Q.Ib=Jn,nr()}}else alert("todo:EmitYUV");Ke&&(Q.Jb=vu,De&&ha())}if(De&&!Qu){for(G=0;256>G;++G)Xc[G]=89858*(G-128)+Vu>>Gd,Jc[G]=-22014*(G-128)+Vu,qd[G]=-45773*(G-128),lp[G]=113618*(G-128)+Vu>>Gd;for(G=Zd;G<Yc;++G)Q=76283*(G-16)+Vu>>Gd,Bs[G-Zd]=Al(Q,255),rm[G-Zd]=Al(Q+8>>4,15);Qu=1}return 1}function Xt(G){var Q=G.ma,ye=G.U,De=G.T;return e(!(1&G.ka)),0>=ye||0>=De?0:(ye=Q.Ib(G,Q),Q.Jb!=null&&Q.Jb(G,Q,ye),Q.Dc+=ye,1)}function Ne(G){G.ma.memory=null}function Fe(G,Q,ye,De){return ke(G,8)!=47?0:(Q[0]=ke(G,14)+1,ye[0]=ke(G,14)+1,De[0]=ke(G,1),ke(G,3)!=0?0:!G.h)}function Xe(G,Q){if(4>G)return G+1;var ye=G-2>>1;return(2+(1&G)<<ye)+ke(Q,ye)+1}function wt(G,Q){return 120<Q?Q-120:1<=(ye=((ye=ou[Q-1])>>4)*G+(8-(15&ye)))?ye:1;var ye}function yt(G,Q,ye){var De=Te(ye),Ke=G[Q+=255&De].g-8;return 0<Ke&&(Ze(ye,ye.u+8),De=Te(ye),Q+=G[Q].value,Q+=De&(1<<Ke)-1),Ze(ye,ye.u+G[Q].g),G[Q].value}function bt(G,Q,ye){return ye.g+=G.g,ye.value+=G.value<<Q>>>0,e(8>=ye.g),G.g}function Gt(G,Q,ye){var De=G.xc;return e((Q=De==0?0:G.vc[G.md*(ye>>De)+(Q>>De)])<G.Wb),G.Ya[Q]}function Et(G,Q,ye,De){var Ke=G.ab,rt=G.c*Q,it=G.C;Q=it+Q;var dt=ye,mt=De;for(De=G.Ta,ye=G.Ua;0<Ke--;){var St=G.gc[Ke],ea=it,Pt=Q,_a=dt,na=mt,Ra=(mt=De,dt=ye,St.Ea);switch(e(ea<Pt),e(Pt<=St.nc),St.hc){case 2:jh(_a,na,(Pt-ea)*Ra,mt,dt);break;case 0:var fa=ea,Rt=Pt,aa=mt,Ga=dt,Ya=(hr=St).Ea;fa==0&&(yo(_a,na,null,null,1,aa,Ga),dn(_a,na+1,0,0,Ya-1,aa,Ga+1),na+=Ya,Ga+=Ya,++fa);for(var Ha=1<<hr.b,xr=Ha-1,gr=Ea(Ya,hr.b),sn=hr.K,hr=hr.w+(fa>>hr.b)*gr;fa<Rt;){var Ti=sn,Ni=hr,$n=1;for(Sf(_a,na,aa,Ga-Ya,1,aa,Ga);$n<Ya;){var ii=($n&~xr)+Ha;ii>Ya&&(ii=Ya),(0,nu[Ti[Ni++]>>8&15])(_a,na+ +$n,aa,Ga+$n-Ya,ii-$n,aa,Ga+$n),$n=ii}na+=Ya,Ga+=Ya,++fa&xr||(hr+=gr)}Pt!=St.nc&&r(mt,dt-Ra,mt,dt+(Pt-ea-1)*Ra,Ra);break;case 1:for(Ra=_a,Rt=na,Ya=(_a=St.Ea)-(Ga=_a&~(aa=(na=1<<St.b)-1)),fa=Ea(_a,St.b),Ha=St.K,St=St.w+(ea>>St.b)*fa;ea<Pt;){for(xr=Ha,gr=St,sn=new cr,hr=Rt+Ga,Ti=Rt+_a;Rt<hr;)fn(xr[gr++],sn),Ah(sn,Ra,Rt,na,mt,dt),Rt+=na,dt+=na;Rt<Ti&&(fn(xr[gr++],sn),Ah(sn,Ra,Rt,Ya,mt,dt),Rt+=Ya,dt+=Ya),++ea&aa||(St+=fa)}break;case 3:if(_a==mt&&na==dt&&0<St.b){for(Rt=mt,_a=Ra=dt+(Pt-ea)*Ra-(Ga=(Pt-ea)*Ea(St.Ea,St.b)),na=mt,aa=dt,fa=[],Ga=(Ya=Ga)-1;0<=Ga;--Ga)fa[Ga]=na[aa+Ga];for(Ga=Ya-1;0<=Ga;--Ga)Rt[_a+Ga]=fa[Ga];Ao(St,ea,Pt,mt,Ra,mt,dt)}else Ao(St,ea,Pt,_a,na,mt,dt)}dt=De,mt=ye}mt!=ye&&r(De,ye,dt,mt,rt)}function Kt(G,Q){var ye=G.V,De=G.Ba+G.c*G.C,Ke=Q-G.C;if(e(Q<=G.l.o),e(16>=Ke),0<Ke){var rt=G.l,it=G.Ta,dt=G.Ua,mt=rt.width;if(Et(G,Ke,ye,De),Ke=dt=[dt],e((ye=G.C)<(De=Q)),e(rt.v<rt.va),De>rt.o&&(De=rt.o),ye<rt.j){var St=rt.j-ye;ye=rt.j,Ke[0]+=St*mt}if(ye>=De?ye=0:(Ke[0]+=4*rt.v,rt.ka=ye-rt.j,rt.U=rt.va-rt.v,rt.T=De-ye,ye=1),ye){if(dt=dt[0],11>(ye=G.ca).S){var ea=ye.f.RGBA,Pt=(De=ye.S,Ke=rt.U,rt=rt.T,St=ea.eb,ea.A),_a=rt;for(ea=ea.fb+G.Ma*ea.A;0<_a--;){var na=it,Ra=dt,fa=Ke,Rt=St,aa=ea;switch(De){case Tc:Dl(na,Ra,fa,Rt,aa);break;case kd:Po(na,Ra,fa,Rt,aa);break;case Eu:Po(na,Ra,fa,Rt,aa),gs(Rt,aa,0,fa,1,0);break;case fi:Ml(na,Ra,fa,Rt,aa);break;case Gh:hn(na,Ra,fa,Rt,aa,1);break;case Xu:hn(na,Ra,fa,Rt,aa,1),gs(Rt,aa,0,fa,1,0);break;case il:hn(na,Ra,fa,Rt,aa,0);break;case Cc:hn(na,Ra,fa,Rt,aa,0),gs(Rt,aa,1,fa,1,0);break;case vl:Id(na,Ra,fa,Rt,aa);break;case em:Id(na,Ra,fa,Rt,aa),Qn(Rt,aa,fa,1,0);break;case Kc:jc(na,Ra,fa,Rt,aa);break;default:e(0)}dt+=mt,ea+=Pt}G.Ma+=rt}else alert("todo:EmitRescaledRowsYUVA");e(G.Ma<=ye.height)}}G.C=Q,e(G.C<=G.i)}function Wt(G){var Q;if(0<G.ua)return 0;for(Q=0;Q<G.Wb;++Q){var ye=G.Ya[Q].G,De=G.Ya[Q].H;if(0<ye[1][De[1]+0].g||0<ye[2][De[2]+0].g||0<ye[3][De[3]+0].g)return 0}return 1}function $t(G,Q,ye,De,Ke,rt){if(G.Z!=0){var it=G.qd,dt=G.rd;for(e(_l[G.Z]!=null);Q<ye;++Q)_l[G.Z](it,dt,De,Ke,De,Ke,rt),it=De,dt=Ke,Ke+=rt;G.qd=it,G.rd=dt}}function Ta(G,Q){var ye=G.l.ma,De=ye.Z==0||ye.Z==1?G.l.j:G.C;if(De=G.C<De?De:G.C,e(Q<=G.l.o),Q>De){var Ke=G.l.width,rt=ye.ca,it=ye.tb+Ke*De,dt=G.V,mt=G.Ba+G.c*De,St=G.gc;e(G.ab==1),e(St[0].hc==3),zl(St[0],De,Q,dt,mt,rt,it),$t(ye,De,Q,rt,it,Ke)}G.C=G.Ma=Q}function Ma(G,Q,ye,De,Ke,rt,it){var dt=G.$/De,mt=G.$%De,St=G.m,ea=G.s,Pt=ye+G.$,_a=Pt;Ke=ye+De*Ke;var na=ye+De*rt,Ra=280+ea.ua,fa=G.Pb?dt:16777216,Rt=0<ea.ua?ea.Wa:null,aa=ea.wc,Ga=Pt<na?Gt(ea,mt,dt):null;e(G.C<rt),e(na<=Ke);var Ya=!1;e:for(;;){for(;Ya||Pt<na;){var Ha=0;if(dt>=fa){var xr=Pt-ye;e((fa=G).Pb),fa.wd=fa.m,fa.xd=xr,0<fa.s.ua&&Ht(fa.s.Wa,fa.s.vb),fa=dt+op}if(mt&aa||(Ga=Gt(ea,mt,dt)),e(Ga!=null),Ga.Qb&&(Q[Pt]=Ga.qb,Ya=!0),!Ya)if(lt(St),Ga.jc){Ha=St,xr=Q;var gr=Pt,sn=Ga.pd[Te(Ha)&zs-1];e(Ga.jc),256>sn.g?(Ze(Ha,Ha.u+sn.g),xr[gr]=sn.value,Ha=0):(Ze(Ha,Ha.u+sn.g-256),e(256<=sn.value),Ha=sn.value),Ha==0&&(Ya=!0)}else Ha=yt(Ga.G[0],Ga.H[0],St);if(St.h)break;if(Ya||256>Ha){if(!Ya)if(Ga.nd)Q[Pt]=(Ga.qb|Ha<<8)>>>0;else{if(lt(St),Ya=yt(Ga.G[1],Ga.H[1],St),lt(St),xr=yt(Ga.G[2],Ga.H[2],St),gr=yt(Ga.G[3],Ga.H[3],St),St.h)break;Q[Pt]=(gr<<24|Ya<<16|Ha<<8|xr)>>>0}if(Ya=!1,++Pt,++mt>=De&&(mt=0,++dt,it!=null&&dt<=rt&&!(dt%16)&&it(G,dt),Rt!=null))for(;_a<Pt;)Ha=Q[_a++],Rt.X[(506832829*Ha&4294967295)>>>Rt.Mb]=Ha}else if(280>Ha){if(Ha=Xe(Ha-256,St),xr=yt(Ga.G[4],Ga.H[4],St),lt(St),xr=wt(De,xr=Xe(xr,St)),St.h)break;if(Pt-ye<xr||Ke-Pt<Ha)break e;for(gr=0;gr<Ha;++gr)Q[Pt+gr]=Q[Pt+gr-xr];for(Pt+=Ha,mt+=Ha;mt>=De;)mt-=De,++dt,it!=null&&dt<=rt&&!(dt%16)&&it(G,dt);if(e(Pt<=Ke),mt&aa&&(Ga=Gt(ea,mt,dt)),Rt!=null)for(;_a<Pt;)Ha=Q[_a++],Rt.X[(506832829*Ha&4294967295)>>>Rt.Mb]=Ha}else{if(!(Ha<Ra))break e;for(Ya=Ha-280,e(Rt!=null);_a<Pt;)Ha=Q[_a++],Rt.X[(506832829*Ha&4294967295)>>>Rt.Mb]=Ha;Ha=Pt,e(!(Ya>>>(xr=Rt).Xa)),Q[Ha]=xr.X[Ya],Ya=!0}Ya||e(St.h==qe(St))}if(G.Pb&&St.h&&Pt<Ke)e(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&Ht(G.s.vb,G.s.Wa);else{if(St.h)break e;it!=null&&it(G,dt>rt?rt:dt),G.a=0,G.$=Pt-ye}return 1}return G.a=3,0}function ja(G){e(G!=null),G.vc=null,G.yc=null,G.Ya=null;var Q=G.Wa;Q!=null&&(Q.X=null),G.vb=null,e(G!=null)}function _r(){var G=new Jm;return G==null?null:(G.a=0,G.xb=Kh,$r("Predictor","VP8LPredictors"),$r("Predictor","VP8LPredictors_C"),$r("PredictorAdd","VP8LPredictorsAdd"),$r("PredictorAdd","VP8LPredictorsAdd_C"),jh=Cn,Ah=va,Dl=ua,Po=Xa,Id=pr,jc=Mn,Ml=Sn,Re.VP8LMapColor32b=Us,Re.VP8LMapColor8b=Bc,G)}function Vr(G,Q,ye,De,Ke){var rt=1,it=[G],dt=[Q],mt=De.m,St=De.s,ea=null,Pt=0;e:for(;;){if(ye)for(;rt&&ke(mt,1);){var _a=it,na=dt,Ra=De,fa=1,Rt=Ra.m,aa=Ra.gc[Ra.ab],Ga=ke(Rt,2);if(Ra.Oc&1<<Ga)rt=0;else{switch(Ra.Oc|=1<<Ga,aa.hc=Ga,aa.Ea=_a[0],aa.nc=na[0],aa.K=[null],++Ra.ab,e(4>=Ra.ab),Ga){case 0:case 1:aa.b=ke(Rt,3)+2,fa=Vr(Ea(aa.Ea,aa.b),Ea(aa.nc,aa.b),0,Ra,aa.K),aa.K=aa.K[0];break;case 3:var Ya,Ha=ke(Rt,8)+1,xr=16<Ha?0:4<Ha?1:2<Ha?2:3;if(_a[0]=Ea(aa.Ea,xr),aa.b=xr,Ya=fa=Vr(Ha,1,0,Ra,aa.K)){var gr,sn=Ha,hr=aa,Ti=1<<(8>>hr.b),Ni=l(Ti);if(Ni==null)Ya=0;else{var $n=hr.K[0],ii=hr.w;for(Ni[0]=hr.K[0][0],gr=1;gr<1*sn;++gr)Ni[gr]=Na($n[ii+gr],Ni[gr-1]);for(;gr<4*Ti;++gr)Ni[gr]=0;hr.K[0]=null,hr.K[0]=Ni,Ya=1}}fa=Ya;break;case 2:break;default:e(0)}rt=fa}}if(it=it[0],dt=dt[0],rt&&ke(mt,1)&&!(rt=1<=(Pt=ke(mt,4))&&11>=Pt)){De.a=3;break e}var Qi;if(Qi=rt)t:{var jn,wn,ys,Zi=De,Gn=it,_o=dt,Ci=Pt,hs=ye,Rn=Zi.m,Bi=Zi.s,Xs=[null],Eo=1,ul=0,Fl=Nu[Ci];a:for(;;){if(hs&&ke(Rn,1)){var Ds=ke(Rn,3)+2,kl=Ea(Gn,Ds),zu=Ea(_o,Ds),ba=kl*zu;if(!Vr(kl,zu,0,Zi,Xs))break a;for(Xs=Xs[0],Bi.xc=Ds,jn=0;jn<ba;++jn){var Ua=Xs[jn]>>8&65535;Xs[jn]=Ua,Ua>=Eo&&(Eo=Ua+1)}}if(Rn.h)break a;for(wn=0;5>wn;++wn){var es=sl[wn];!wn&&0<Ci&&(es+=1<<Ci),ul<es&&(ul=es)}var Ii=c(Eo*Fl,_e),Zt=Eo,im=c(Zt,xe);if(im==null)var _h=null;else e(65536>=Zt),_h=im;var wh=l(ul);if(_h==null||wh==null||Ii==null){Zi.a=1;break a}var Rh=Ii;for(jn=ys=0;jn<Eo;++jn){var Du=_h[jn],Th=Du.G,ec=Du.H,tg=0,up=1,ag=0;for(wn=0;5>wn;++wn){es=sl[wn],Th[wn]=Rh,ec[wn]=ys,!wn&&0<Ci&&(es+=1<<Ci);n:{var Ch,Ul=es,Xh=Zi,Qc=wh,ed=Rh,cp=ys,td=0,cl=Xh.m,rg=ke(cl,1);if(i(Qc,0,0,Ul),rg){var lo=ke(cl,1)+1,$g=ke(cl,1),Sh=ke(cl,$g==0?1:8);Qc[Sh]=1,lo==2&&(Qc[Sh=ke(cl,8)]=1);var si=1}else{var Nn=l(19),dp=ke(cl,4)+4;if(19<dp){Xh.a=3;var Mu=0;break n}for(Ch=0;Ch<dp;++Ch)Nn[Ri[Ch]]=ke(cl,3);var Hd=void 0,Iu=void 0,ad=Xh,Of=Nn,Jh=Ul,Bl=Qc,Vf=0,No=ad.m,$d=8,hp=c(128,_e);r:for(;ae(hp,0,7,Of,19);){if(ke(No,1)){var fp=2+2*ke(No,3);if((Hd=2+ke(No,fp))>Jh)break r}else Hd=Jh;for(Iu=0;Iu<Jh&&Hd--;){lt(No);var bh=hp[0+(127&Te(No))];Ze(No,No.u+bh.g);var rd=bh.value;if(16>rd)Bl[Iu++]=rd,rd!=0&&($d=rd);else{var nd=rd==16,pp=rd-16,Kd=qh[pp],Lu=ke(No,Zh[pp])+Kd;if(Iu+Lu>Jh)break r;for(var xc=nd?$d:0;0<Lu--;)Bl[Iu++]=xc}}Vf=1;break r}Vf||(ad.a=3),si=Vf}(si=si&&!cl.h)&&(td=ae(ed,cp,8,Qc,Ul)),si&&td!=0?Mu=td:(Xh.a=3,Mu=0)}if(Mu==0)break a;if(up&&Ji[wn]==1&&(up=Rh[ys].g==0),tg+=Rh[ys].g,ys+=Mu,3>=wn){var lu,Pc=wh[0];for(lu=1;lu<es;++lu)wh[lu]>Pc&&(Pc=wh[lu]);ag+=Pc}}if(Du.nd=up,Du.Qb=0,up&&(Du.qb=(Th[3][ec[3]+0].value<<24|Th[1][ec[1]+0].value<<16|Th[2][ec[2]+0].value)>>>0,tg==0&&256>Th[0][ec[0]+0].value&&(Du.Qb=1,Du.qb+=Th[0][ec[0]+0].value<<8)),Du.jc=!Du.Qb&&6>ag,Du.jc){var Ms,uu=Du;for(Ms=0;Ms<zs;++Ms){var tc=Ms,Js=uu.pd[tc],Fu=uu.G[0][uu.H[0]+tc];256<=Fu.value?(Js.g=Fu.g+256,Js.value=Fu.value):(Js.g=0,Js.value=0,tc>>=bt(Fu,8,Js),tc>>=bt(uu.G[1][uu.H[1]+tc],16,Js),tc>>=bt(uu.G[2][uu.H[2]+tc],0,Js),bt(uu.G[3][uu.H[3]+tc],24,Js))}}}Bi.vc=Xs,Bi.Wb=Eo,Bi.Ya=_h,Bi.yc=Ii,Qi=1;break t}Qi=0}if(!(rt=Qi)){De.a=3;break e}if(0<Pt){if(St.ua=1<<Pt,!It(St.Wa,Pt)){De.a=1,rt=0;break e}}else St.ua=0;var xh=De,mp=it,Qh=dt,Ph=xh.s,Wd=Ph.xc;if(xh.c=mp,xh.i=Qh,Ph.md=Ea(mp,Wd),Ph.wc=Wd==0?-1:(1<<Wd)-1,ye){De.xb=Hg;break e}if((ea=l(it*dt))==null){De.a=1,rt=0;break e}rt=(rt=Ma(De,ea,0,it,dt,dt,null))&&!mt.h;break e}return rt?(Ke!=null?Ke[0]=ea:(e(ea==null),e(ye)),De.$=0,ye||ja(St)):ja(St),rt}function zr(G,Q){var ye=G.c*G.i,De=ye+Q+16*Q;return e(G.c<=Q),G.V=l(De),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+ye+Q,1)}function Zr(G,Q){var ye=G.C,De=Q-ye,Ke=G.V,rt=G.Ba+G.c*ye;for(e(Q<=G.l.o);0<De;){var it=16<De?16:De,dt=G.l.ma,mt=G.l.width,St=mt*it,ea=dt.ca,Pt=dt.tb+mt*ye,_a=G.Ta,na=G.Ua;Et(G,it,Ke,rt),Xi(_a,na,ea,Pt,St),$t(dt,ye,ye+it,ea,Pt,mt),De-=it,Ke+=it*G.c,ye+=it}e(ye==Q),G.C=G.Ma=Q}function In(){this.ub=this.yd=this.td=this.Rb=0}function ei(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function An(){this.Yb=function(){var G=[];return function Q(ye,De,Ke){for(var rt=Ke[De],it=0;it<rt&&(ye.push(Ke.length>De+1?[]:0),!(Ke.length<De+1));it++)Q(ye[it],De+1,Ke)}(G,0,[3,11]),G}()}function Kr(){this.jb=l(3),this.Wc=n([4,8],An),this.Xc=n([4,17],An)}function Fn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Di(){this.ld=this.La=this.dd=this.tc=0}function Ki(){this.Na=this.la=0}function bs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xs(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Uo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Di),this.Y=0,this.ya=Array(new xs),this.aa=0,this.l=new fc}function Ps(){this.y=l(16),this.f=l(8),this.ea=l(8)}function qs(){this.cb=this.a=0,this.sc="",this.m=new Ge,this.Od=new In,this.Kc=new ei,this.ed=new Fn,this.Qa=new Hr,this.Ic=this.$c=this.Aa=0,this.D=new Uo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,Ge),this.ia=0,this.pb=c(4,bs),this.Pa=new Kr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ps),this.Hd=0,this.rb=Array(new Ki),this.sb=0,this.wa=Array(new Di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xs),this.L=this.aa=0,this.gd=n([4,2],Di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function el(){var G=new qs;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,Ud||(Ud=Pd)),G}function Mi(G,Q,ye){return G.a==0&&(G.a=Q,G.sc=ye,G.cb=0),0}function Yl(G,Q,ye){return 3<=ye&&G[Q+0]==157&&G[Q+1]==1&&G[Q+2]==42}function Bo(G,Q){if(G==null)return 0;if(G.a=0,G.sc="OK",Q==null)return Mi(G,2,"null VP8Io passed to VP8GetHeaders()");var ye=Q.data,De=Q.w,Ke=Q.ha;if(4>Ke)return Mi(G,7,"Truncated header.");var rt=ye[De+0]|ye[De+1]<<8|ye[De+2]<<16,it=G.Od;if(it.Rb=!(1&rt),it.td=rt>>1&7,it.yd=rt>>4&1,it.ub=rt>>5,3<it.td)return Mi(G,3,"Incorrect keyframe parameters.");if(!it.yd)return Mi(G,4,"Frame not displayable.");De+=3,Ke-=3;var dt=G.Kc;if(it.Rb){if(7>Ke)return Mi(G,7,"cannot parse picture header");if(!Yl(ye,De,Ke))return Mi(G,3,"Bad code word");dt.c=16383&(ye[De+4]<<8|ye[De+3]),dt.Td=ye[De+4]>>6,dt.i=16383&(ye[De+6]<<8|ye[De+5]),dt.Ud=ye[De+6]>>6,De+=7,Ke-=7,G.za=dt.c+15>>4,G.Ub=dt.i+15>>4,Q.width=dt.c,Q.height=dt.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,i((rt=G.Pa).jb,0,255,rt.jb.length),e((rt=G.Qa)!=null),rt.Cb=0,rt.Bb=0,rt.Fb=1,i(rt.Zb,0,0,rt.Zb.length),i(rt.Lb,0,0,rt.Lb)}if(it.ub>Ke)return Mi(G,7,"bad partition length");ze(rt=G.m,ye,De,it.ub),De+=it.ub,Ke-=it.ub,it.Rb&&(dt.Ld=ht(rt),dt.Kd=ht(rt)),dt=G.Qa;var mt,St=G.Pa;if(e(rt!=null),e(dt!=null),dt.Cb=ht(rt),dt.Cb){if(dt.Bb=ht(rt),ht(rt)){for(dt.Fb=ht(rt),mt=0;4>mt;++mt)dt.Zb[mt]=ht(rt)?je(rt,7):0;for(mt=0;4>mt;++mt)dt.Lb[mt]=ht(rt)?je(rt,6):0}if(dt.Bb)for(mt=0;3>mt;++mt)St.jb[mt]=ht(rt)?Me(rt,8):255}else dt.Bb=0;if(rt.Ka)return Mi(G,3,"cannot parse segment header");if((dt=G.ed).zd=ht(rt),dt.Tb=Me(rt,6),dt.wb=Me(rt,3),dt.Pc=ht(rt),dt.Pc&&ht(rt)){for(St=0;4>St;++St)ht(rt)&&(dt.vd[St]=je(rt,6));for(St=0;4>St;++St)ht(rt)&&(dt.od[St]=je(rt,6))}if(G.L=dt.Tb==0?0:dt.zd?1:2,rt.Ka)return Mi(G,3,"cannot parse filter header");var ea=Ke;if(Ke=mt=De,De=mt+ea,dt=ea,G.Xb=(1<<Me(G.m,2))-1,ea<3*(St=G.Xb))ye=7;else{for(mt+=3*St,dt-=3*St,ea=0;ea<St;++ea){var Pt=ye[Ke+0]|ye[Ke+1]<<8|ye[Ke+2]<<16;Pt>dt&&(Pt=dt),ze(G.Jc[+ea],ye,mt,Pt),mt+=Pt,dt-=Pt,Ke+=3}ze(G.Jc[+St],ye,mt,dt),ye=mt<De?0:5}if(ye!=0)return Mi(G,ye,"cannot parse partitions");for(ye=Me(mt=G.m,7),Ke=ht(mt)?je(mt,4):0,De=ht(mt)?je(mt,4):0,dt=ht(mt)?je(mt,4):0,St=ht(mt)?je(mt,4):0,mt=ht(mt)?je(mt,4):0,ea=G.Qa,Pt=0;4>Pt;++Pt){if(ea.Cb){var _a=ea.Zb[Pt];ea.Fb||(_a+=ye)}else{if(0<Pt){G.pb[Pt]=G.pb[0];continue}_a=ye}var na=G.pb[Pt];na.Sc[0]=Sc[Al(_a+Ke,127)],na.Sc[1]=xf[Al(_a+0,127)],na.Eb[0]=2*Sc[Al(_a+De,127)],na.Eb[1]=101581*xf[Al(_a+dt,127)]>>16,8>na.Eb[1]&&(na.Eb[1]=8),na.Qc[0]=Sc[Al(_a+St,117)],na.Qc[1]=xf[Al(_a+mt,127)],na.lc=_a+mt}if(!it.Rb)return Mi(G,4,"Not a key frame.");for(ht(rt),it=G.Pa,ye=0;4>ye;++ye){for(Ke=0;8>Ke;++Ke)for(De=0;3>De;++De)for(dt=0;11>dt;++dt)St=He(rt,vh[ye][Ke][De][dt])?Me(rt,8):Pf[ye][Ke][De][dt],it.Wc[ye][Ke].Yb[De][dt]=St;for(Ke=0;17>Ke;++Ke)it.Xc[ye][Ke]=it.Wc[ye][qg[Ke]]}return G.kc=ht(rt),G.kc&&(G.Bd=Me(rt,8)),G.cb=1}function Pd(G,Q,ye,De,Ke,rt,it){var dt=Q[Ke].Yb[ye];for(ye=0;16>Ke;++Ke){if(!He(G,dt[ye+0]))return Ke;for(;!He(G,dt[ye+1]);)if(dt=Q[++Ke].Yb[0],ye=0,Ke==16)return 16;var mt=Q[Ke+1].Yb;if(He(G,dt[ye+2])){var St=G,ea=0;if(He(St,(_a=dt)[(Pt=ye)+3]))if(He(St,_a[Pt+6])){for(dt=0,Pt=2*(ea=He(St,_a[Pt+8]))+(_a=He(St,_a[Pt+9+ea])),ea=0,_a=Hh[Pt];_a[dt];++dt)ea+=ea+He(St,_a[dt]);ea+=3+(8<<Pt)}else He(St,_a[Pt+7])?(ea=7+2*He(St,165),ea+=He(St,145)):ea=5+He(St,159);else ea=He(St,_a[Pt+4])?3+He(St,_a[Pt+5]):2;dt=mt[2]}else ea=1,dt=mt[1];mt=it+$h[Ke],0>(St=G).b&&st(St);var Pt,_a=St.b,na=(Pt=St.Ca>>1)-(St.I>>_a)>>31;--St.b,St.Ca+=na,St.Ca|=1,St.I-=(Pt+1&na)<<_a,rt[mt]=((ea^na)-na)*De[(0<Ke)+0]}return 16}function Fc(G){var Q=G.rb[G.sb-1];Q.la=0,Q.Na=0,i(G.zc,0,0,G.zc.length),G.ja=0}function fh(G,Q){if(G==null)return 0;if(Q==null)return Mi(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!Bo(G,Q))return 0;if(e(G.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(G.L=0);var ye=Nf[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=Q.v-ye>>4,G.zb=Q.j-ye>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=Q.o+15+ye>>4,G.Hb=Q.va+15+ye>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var De=G.ed;for(ye=0;4>ye;++ye){var Ke;if(G.Qa.Cb){var rt=G.Qa.Lb[ye];G.Qa.Fb||(rt+=De.Tb)}else rt=De.Tb;for(Ke=0;1>=Ke;++Ke){var it=G.gd[ye][Ke],dt=rt;if(De.Pc&&(dt+=De.vd[0],Ke&&(dt+=De.od[0])),0<(dt=0>dt?0:63<dt?63:dt)){var mt=dt;0<De.wb&&(mt=4<De.wb?mt>>2:mt>>1)>9-De.wb&&(mt=9-De.wb),1>mt&&(mt=1),it.dd=mt,it.tc=2*dt+mt,it.ld=40<=dt?2:15<=dt?1:0}else it.tc=0;it.La=Ke}}}ye=0}else Mi(G,6,"Frame setup failed"),ye=G.a;if(ye=ye==0){if(ye){G.$c=0,0<G.Aa||(G.Ic=oo);e:{ye=G.Ic,De=4*(mt=G.za);var St=32*mt,ea=mt+1,Pt=0<G.L?mt*(0<G.Aa?2:1):0,_a=(G.Aa==2?2:1)*mt;if((it=De+832+(Ke=3*(16*ye+Nf[G.L])/2*St)+(rt=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=it)ye=0;else{if(it>G.Vb){if(G.Vb=0,G.Ec=l(it),G.Fc=0,G.Ec==null){ye=Mi(G,1,"no memory during frame initialization.");break e}G.Vb=it}it=G.Ec,dt=G.Fc,G.Ac=it,G.Bc=dt,dt+=De,G.Gd=c(St,Ps),G.Hd=0,G.rb=c(ea+1,Ki),G.sb=1,G.wa=Pt?c(Pt,Di):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=mt),e(!0),G.oc=it,G.pc=dt,dt+=832,G.ya=c(_a,xs),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=mt),G.R=16*mt,G.B=8*mt,mt=(St=Nf[G.L])*G.R,St=St/2*G.B,G.sa=it,G.ta=dt+mt,G.qa=G.sa,G.ra=G.ta+16*ye*G.R+St,G.Ha=G.qa,G.Ia=G.ra+8*ye*G.B+St,G.$c=0,dt+=Ke,G.mb=rt?it:null,G.nb=rt?dt:null,e(dt+rt<=G.Fc+G.Vb),Fc(G),i(G.Ac,G.Bc,0,De),ye=1}}if(ye){if(Q.ka=0,Q.y=G.sa,Q.O=G.ta,Q.f=G.qa,Q.N=G.ra,Q.ea=G.Ha,Q.Vd=G.Ia,Q.fa=G.R,Q.Rc=G.B,Q.F=null,Q.J=0,!su){for(ye=-255;255>=ye;++ye)ds[255+ye]=0>ye?-ye:ye;for(ye=-1020;1020>=ye;++ye)iu[1020+ye]=-128>ye?-128:127<ye?127:ye;for(ye=-112;112>=ye;++ye)Hc[112+ye]=-16>ye?-16:15<ye?15:ye;for(ye=-255;510>=ye;++ye)nl[255+ye]=0>ye?0:255<ye?255:ye;su=1}_c=Ed,bu=Xl,bf=wu,io=po,vo=Go,Yi=jo,Ld=rl,Fd=Wi,so=cs,Gc=Bh,wc=Ks,xu=Ql,Zc=Ho,Pu=Vd,qc=yc,Rc=al,Yu=ms,$o=Wu,Ju[0]=Hs,Ju[1]=Rf,Ju[2]=mh,Ju[3]=bn,Ju[4]=pc,Ju[5]=er,Ju[6]=mc,Ju[7]=nn,Ju[8]=$s,Ju[9]=_n,bc[0]=En,bc[1]=Zo,bc[2]=Ku,bc[3]=ph,bc[4]=mo,bc[5]=mr,bc[6]=Uc,Ou[0]=Ru,Ou[1]=Jl,Ou[2]=Nd,Ou[3]=pn,Ou[4]=Gi,Ou[5]=Es,Ou[6]=Ei,ye=1}else ye=0}ye&&(ye=function(na,Ra){for(na.M=0;na.M<na.Va;++na.M){var fa,Rt=na.Jc[na.M&na.Xb],aa=na.m,Ga=na;for(fa=0;fa<Ga.za;++fa){var Ya=aa,Ha=Ga,xr=Ha.Ac,gr=Ha.Bc+4*fa,sn=Ha.zc,hr=Ha.ya[Ha.aa+fa];if(Ha.Qa.Bb?hr.$b=He(Ya,Ha.Pa.jb[0])?2+He(Ya,Ha.Pa.jb[2]):He(Ya,Ha.Pa.jb[1]):hr.$b=0,Ha.kc&&(hr.Ad=He(Ya,Ha.Bd)),hr.Za=!He(Ya,145)+0,hr.Za){var Ti=hr.Ob,Ni=0;for(Ha=0;4>Ha;++Ha){var $n,ii=sn[0+Ha];for($n=0;4>$n;++$n){ii=Qm[xr[gr+$n]][ii];for(var Qi=Bd[He(Ya,ii[0])];0<Qi;)Qi=Bd[2*Qi+He(Ya,ii[Qi])];ii=-Qi,xr[gr+$n]=ii}r(Ti,Ni,xr,gr,4),Ni+=4,sn[0+Ha]=ii}}else ii=He(Ya,156)?He(Ya,128)?1:3:He(Ya,163)?2:0,hr.Ob[0]=ii,i(xr,gr,ii,4),i(sn,0,ii,4);hr.Dd=He(Ya,142)?He(Ya,114)?He(Ya,183)?1:3:2:0}if(Ga.m.Ka)return Mi(na,7,"Premature end-of-partition0 encountered.");for(;na.ja<na.za;++na.ja){if(Ga=Rt,Ya=(aa=na).rb[aa.sb-1],xr=aa.rb[aa.sb+aa.ja],fa=aa.ya[aa.aa+aa.ja],gr=aa.kc?fa.Ad:0)Ya.la=xr.la=0,fa.Za||(Ya.Na=xr.Na=0),fa.Hc=0,fa.Gc=0,fa.ia=0;else{var jn,wn;if(Ya=xr,xr=Ga,gr=aa.Pa.Xc,sn=aa.ya[aa.aa+aa.ja],hr=aa.pb[sn.$b],Ha=sn.ad,Ti=0,Ni=aa.rb[aa.sb-1],ii=$n=0,i(Ha,Ti,0,384),sn.Za)var ys=0,Zi=gr[3];else{Qi=l(16);var Gn=Ya.Na+Ni.Na;if(Gn=Ud(xr,gr[1],Gn,hr.Eb,0,Qi,0),Ya.Na=Ni.Na=(0<Gn)+0,1<Gn)_c(Qi,0,Ha,Ti);else{var _o=Qi[0]+3>>3;for(Qi=0;256>Qi;Qi+=16)Ha[Ti+Qi]=_o}ys=1,Zi=gr[0]}var Ci=15&Ya.la,hs=15&Ni.la;for(Qi=0;4>Qi;++Qi){var Rn=1&hs;for(_o=wn=0;4>_o;++_o)Ci=Ci>>1|(Rn=(Gn=Ud(xr,Zi,Gn=Rn+(1&Ci),hr.Sc,ys,Ha,Ti))>ys)<<7,wn=wn<<2|(3<Gn?3:1<Gn?2:Ha[Ti+0]!=0),Ti+=16;Ci>>=4,hs=hs>>1|Rn<<7,$n=($n<<8|wn)>>>0}for(Zi=Ci,ys=hs>>4,jn=0;4>jn;jn+=2){for(wn=0,Ci=Ya.la>>4+jn,hs=Ni.la>>4+jn,Qi=0;2>Qi;++Qi){for(Rn=1&hs,_o=0;2>_o;++_o)Gn=Rn+(1&Ci),Ci=Ci>>1|(Rn=0<(Gn=Ud(xr,gr[2],Gn,hr.Qc,0,Ha,Ti)))<<3,wn=wn<<2|(3<Gn?3:1<Gn?2:Ha[Ti+0]!=0),Ti+=16;Ci>>=2,hs=hs>>1|Rn<<5}ii|=wn<<4*jn,Zi|=Ci<<4<<jn,ys|=(240&hs)<<jn}Ya.la=Zi,Ni.la=ys,sn.Hc=$n,sn.Gc=ii,sn.ia=43690&ii?0:hr.ia,gr=!($n|ii)}if(0<aa.L&&(aa.wa[aa.Y+aa.ja]=aa.gd[fa.$b][fa.Za],aa.wa[aa.Y+aa.ja].La|=!gr),Ga.Ka)return Mi(na,7,"Premature end-of-file encountered.")}if(Fc(na),aa=Ra,Ga=1,fa=(Rt=na).D,Ya=0<Rt.L&&Rt.M>=Rt.zb&&Rt.M<=Rt.Va,Rt.Aa==0)e:{if(fa.M=Rt.M,fa.uc=Ya,wr(Rt,fa),Ga=1,fa=(wn=Rt.D).Nb,Ya=(ii=Nf[Rt.L])*Rt.R,xr=ii/2*Rt.B,Qi=16*fa*Rt.R,_o=8*fa*Rt.B,gr=Rt.sa,sn=Rt.ta-Ya+Qi,hr=Rt.qa,Ha=Rt.ra-xr+_o,Ti=Rt.Ha,Ni=Rt.Ia-xr+_o,hs=(Ci=wn.M)==0,$n=Ci>=Rt.Va-1,Rt.Aa==2&&wr(Rt,wn),wn.uc)for(Rn=(Gn=Rt).D.M,e(Gn.D.uc),wn=Gn.yb;wn<Gn.Hb;++wn){ys=wn,Zi=Rn;var Bi=(Xs=(es=Gn).D).Nb;jn=es.R;var Xs=Xs.wa[Xs.Y+ys],Eo=es.sa,ul=es.ta+16*Bi*jn+16*ys,Fl=Xs.dd,Ds=Xs.tc;if(Ds!=0)if(e(3<=Ds),es.L==1)0<ys&&Rc(Eo,ul,jn,Ds+4),Xs.La&&$o(Eo,ul,jn,Ds),0<Zi&&qc(Eo,ul,jn,Ds+4),Xs.La&&Yu(Eo,ul,jn,Ds);else{var kl=es.B,zu=es.qa,ba=es.ra+8*Bi*kl+8*ys,Ua=es.Ha,es=es.Ia+8*Bi*kl+8*ys;Bi=Xs.ld,0<ys&&(Fd(Eo,ul,jn,Ds+4,Fl,Bi),Gc(zu,ba,Ua,es,kl,Ds+4,Fl,Bi)),Xs.La&&(xu(Eo,ul,jn,Ds,Fl,Bi),Pu(zu,ba,Ua,es,kl,Ds,Fl,Bi)),0<Zi&&(Ld(Eo,ul,jn,Ds+4,Fl,Bi),so(zu,ba,Ua,es,kl,Ds+4,Fl,Bi)),Xs.La&&(wc(Eo,ul,jn,Ds,Fl,Bi),Zc(zu,ba,Ua,es,kl,Ds,Fl,Bi))}}if(Rt.ia&&alert("todo:DitherRow"),aa.put!=null){if(wn=16*Ci,Ci=16*(Ci+1),hs?(aa.y=Rt.sa,aa.O=Rt.ta+Qi,aa.f=Rt.qa,aa.N=Rt.ra+_o,aa.ea=Rt.Ha,aa.W=Rt.Ia+_o):(wn-=ii,aa.y=gr,aa.O=sn,aa.f=hr,aa.N=Ha,aa.ea=Ti,aa.W=Ni),$n||(Ci-=ii),Ci>aa.o&&(Ci=aa.o),aa.F=null,aa.J=null,Rt.Fa!=null&&0<Rt.Fa.length&&wn<Ci&&(aa.J=Cf(Rt,aa,wn,Ci-wn),aa.F=Rt.mb,aa.F==null&&aa.F.length==0)){Ga=Mi(Rt,3,"Could not decode alpha data.");break e}wn<aa.j&&(ii=aa.j-wn,wn=aa.j,e(!(1&ii)),aa.O+=Rt.R*ii,aa.N+=Rt.B*(ii>>1),aa.W+=Rt.B*(ii>>1),aa.F!=null&&(aa.J+=aa.width*ii)),wn<Ci&&(aa.O+=aa.v,aa.N+=aa.v>>1,aa.W+=aa.v>>1,aa.F!=null&&(aa.J+=aa.v),aa.ka=wn-aa.j,aa.U=aa.va-aa.v,aa.T=Ci-wn,Ga=aa.put(aa))}fa+1!=Rt.Ic||$n||(r(Rt.sa,Rt.ta-Ya,gr,sn+16*Rt.R,Ya),r(Rt.qa,Rt.ra-xr,hr,Ha+8*Rt.B,xr),r(Rt.Ha,Rt.Ia-xr,Ti,Ni+8*Rt.B,xr))}if(!Ga)return Mi(na,6,"Output aborted.")}return 1}(G,Q)),Q.bc!=null&&Q.bc(Q),ye&=1}return ye?(G.cb=0,ye):0}function _u(G,Q,ye,De,Ke){Ke=G[Q+ye+32*De]+(Ke>>3),G[Q+ye+32*De]=-256&Ke?0>Ke?0:255:Ke}function kc(G,Q,ye,De,Ke,rt){_u(G,Q,0,ye,De+Ke),_u(G,Q,1,ye,De+rt),_u(G,Q,2,ye,De-rt),_u(G,Q,3,ye,De-Ke)}function yl(G){return(20091*G>>16)+G}function ro(G,Q,ye,De){var Ke,rt=0,it=l(16);for(Ke=0;4>Ke;++Ke){var dt=G[Q+0]+G[Q+8],mt=G[Q+0]-G[Q+8],St=(35468*G[Q+4]>>16)-yl(G[Q+12]),ea=yl(G[Q+4])+(35468*G[Q+12]>>16);it[rt+0]=dt+ea,it[rt+1]=mt+St,it[rt+2]=mt-St,it[rt+3]=dt-ea,rt+=4,Q++}for(Ke=rt=0;4>Ke;++Ke)dt=(G=it[rt+0]+4)+it[rt+8],mt=G-it[rt+8],St=(35468*it[rt+4]>>16)-yl(it[rt+12]),_u(ye,De,0,0,dt+(ea=yl(it[rt+4])+(35468*it[rt+12]>>16))),_u(ye,De,1,0,mt+St),_u(ye,De,2,0,mt-St),_u(ye,De,3,0,dt-ea),rt++,De+=32}function jo(G,Q,ye,De){var Ke=G[Q+0]+4,rt=35468*G[Q+4]>>16,it=yl(G[Q+4]),dt=35468*G[Q+1]>>16;kc(ye,De,0,Ke+it,G=yl(G[Q+1]),dt),kc(ye,De,1,Ke+rt,G,dt),kc(ye,De,2,Ke-rt,G,dt),kc(ye,De,3,Ke-it,G,dt)}function Xl(G,Q,ye,De,Ke){ro(G,Q,ye,De),Ke&&ro(G,Q+16,ye,De+4)}function wu(G,Q,ye,De){bu(G,Q+0,ye,De,1),bu(G,Q+32,ye,De+128,1)}function po(G,Q,ye,De){var Ke;for(G=G[Q+0]+4,Ke=0;4>Ke;++Ke)for(Q=0;4>Q;++Q)_u(ye,De,Q,Ke,G)}function Go(G,Q,ye,De){G[Q+0]&&io(G,Q+0,ye,De),G[Q+16]&&io(G,Q+16,ye,De+4),G[Q+32]&&io(G,Q+32,ye,De+128),G[Q+48]&&io(G,Q+48,ye,De+128+4)}function Ed(G,Q,ye,De){var Ke,rt=l(16);for(Ke=0;4>Ke;++Ke){var it=G[Q+0+Ke]+G[Q+12+Ke],dt=G[Q+4+Ke]+G[Q+8+Ke],mt=G[Q+4+Ke]-G[Q+8+Ke],St=G[Q+0+Ke]-G[Q+12+Ke];rt[0+Ke]=it+dt,rt[8+Ke]=it-dt,rt[4+Ke]=St+mt,rt[12+Ke]=St-mt}for(Ke=0;4>Ke;++Ke)it=(G=rt[0+4*Ke]+3)+rt[3+4*Ke],dt=rt[1+4*Ke]+rt[2+4*Ke],mt=rt[1+4*Ke]-rt[2+4*Ke],St=G-rt[3+4*Ke],ye[De+0]=it+dt>>3,ye[De+16]=St+mt>>3,ye[De+32]=it-dt>>3,ye[De+48]=St-mt>>3,De+=64}function $u(G,Q,ye){var De,Ke=Q-32,rt=Il,it=255-G[Ke-1];for(De=0;De<ye;++De){var dt,mt=rt,St=it+G[Q-1];for(dt=0;dt<ye;++dt)G[Q+dt]=mt[St+G[Ke+dt]];Q+=32}}function Rf(G,Q){$u(G,Q,4)}function Jl(G,Q){$u(G,Q,8)}function Zo(G,Q){$u(G,Q,16)}function Ku(G,Q){var ye;for(ye=0;16>ye;++ye)r(G,Q+32*ye,G,Q-32,16)}function ph(G,Q){var ye;for(ye=16;0<ye;--ye)i(G,Q,G[Q-1],16),Q+=32}function tl(G,Q,ye){var De;for(De=0;16>De;++De)i(Q,ye+32*De,G,16)}function En(G,Q){var ye,De=16;for(ye=0;16>ye;++ye)De+=G[Q-1+32*ye]+G[Q+ye-32];tl(De>>5,G,Q)}function mo(G,Q){var ye,De=8;for(ye=0;16>ye;++ye)De+=G[Q-1+32*ye];tl(De>>4,G,Q)}function mr(G,Q){var ye,De=8;for(ye=0;16>ye;++ye)De+=G[Q+ye-32];tl(De>>4,G,Q)}function Uc(G,Q){tl(128,G,Q)}function vn(G,Q,ye){return G+2*Q+ye+2>>2}function mh(G,Q){var ye,De=Q-32;for(De=new Uint8Array([vn(G[De-1],G[De+0],G[De+1]),vn(G[De+0],G[De+1],G[De+2]),vn(G[De+1],G[De+2],G[De+3]),vn(G[De+2],G[De+3],G[De+4])]),ye=0;4>ye;++ye)r(G,Q+32*ye,De,0,De.length)}function bn(G,Q){var ye=G[Q-1],De=G[Q-1+32],Ke=G[Q-1+64],rt=G[Q-1+96];Ae(G,Q+0,16843009*vn(G[Q-1-32],ye,De)),Ae(G,Q+32,16843009*vn(ye,De,Ke)),Ae(G,Q+64,16843009*vn(De,Ke,rt)),Ae(G,Q+96,16843009*vn(Ke,rt,rt))}function Hs(G,Q){var ye,De=4;for(ye=0;4>ye;++ye)De+=G[Q+ye-32]+G[Q-1+32*ye];for(De>>=3,ye=0;4>ye;++ye)i(G,Q+32*ye,De,4)}function pc(G,Q){var ye=G[Q-1+0],De=G[Q-1+32],Ke=G[Q-1+64],rt=G[Q-1-32],it=G[Q+0-32],dt=G[Q+1-32],mt=G[Q+2-32],St=G[Q+3-32];G[Q+0+96]=vn(De,Ke,G[Q-1+96]),G[Q+1+96]=G[Q+0+64]=vn(ye,De,Ke),G[Q+2+96]=G[Q+1+64]=G[Q+0+32]=vn(rt,ye,De),G[Q+3+96]=G[Q+2+64]=G[Q+1+32]=G[Q+0+0]=vn(it,rt,ye),G[Q+3+64]=G[Q+2+32]=G[Q+1+0]=vn(dt,it,rt),G[Q+3+32]=G[Q+2+0]=vn(mt,dt,it),G[Q+3+0]=vn(St,mt,dt)}function mc(G,Q){var ye=G[Q+1-32],De=G[Q+2-32],Ke=G[Q+3-32],rt=G[Q+4-32],it=G[Q+5-32],dt=G[Q+6-32],mt=G[Q+7-32];G[Q+0+0]=vn(G[Q+0-32],ye,De),G[Q+1+0]=G[Q+0+32]=vn(ye,De,Ke),G[Q+2+0]=G[Q+1+32]=G[Q+0+64]=vn(De,Ke,rt),G[Q+3+0]=G[Q+2+32]=G[Q+1+64]=G[Q+0+96]=vn(Ke,rt,it),G[Q+3+32]=G[Q+2+64]=G[Q+1+96]=vn(rt,it,dt),G[Q+3+64]=G[Q+2+96]=vn(it,dt,mt),G[Q+3+96]=vn(dt,mt,mt)}function er(G,Q){var ye=G[Q-1+0],De=G[Q-1+32],Ke=G[Q-1+64],rt=G[Q-1-32],it=G[Q+0-32],dt=G[Q+1-32],mt=G[Q+2-32],St=G[Q+3-32];G[Q+0+0]=G[Q+1+64]=rt+it+1>>1,G[Q+1+0]=G[Q+2+64]=it+dt+1>>1,G[Q+2+0]=G[Q+3+64]=dt+mt+1>>1,G[Q+3+0]=mt+St+1>>1,G[Q+0+96]=vn(Ke,De,ye),G[Q+0+64]=vn(De,ye,rt),G[Q+0+32]=G[Q+1+96]=vn(ye,rt,it),G[Q+1+32]=G[Q+2+96]=vn(rt,it,dt),G[Q+2+32]=G[Q+3+96]=vn(it,dt,mt),G[Q+3+32]=vn(dt,mt,St)}function nn(G,Q){var ye=G[Q+0-32],De=G[Q+1-32],Ke=G[Q+2-32],rt=G[Q+3-32],it=G[Q+4-32],dt=G[Q+5-32],mt=G[Q+6-32],St=G[Q+7-32];G[Q+0+0]=ye+De+1>>1,G[Q+1+0]=G[Q+0+64]=De+Ke+1>>1,G[Q+2+0]=G[Q+1+64]=Ke+rt+1>>1,G[Q+3+0]=G[Q+2+64]=rt+it+1>>1,G[Q+0+32]=vn(ye,De,Ke),G[Q+1+32]=G[Q+0+96]=vn(De,Ke,rt),G[Q+2+32]=G[Q+1+96]=vn(Ke,rt,it),G[Q+3+32]=G[Q+2+96]=vn(rt,it,dt),G[Q+3+64]=vn(it,dt,mt),G[Q+3+96]=vn(dt,mt,St)}function _n(G,Q){var ye=G[Q-1+0],De=G[Q-1+32],Ke=G[Q-1+64],rt=G[Q-1+96];G[Q+0+0]=ye+De+1>>1,G[Q+2+0]=G[Q+0+32]=De+Ke+1>>1,G[Q+2+32]=G[Q+0+64]=Ke+rt+1>>1,G[Q+1+0]=vn(ye,De,Ke),G[Q+3+0]=G[Q+1+32]=vn(De,Ke,rt),G[Q+3+32]=G[Q+1+64]=vn(Ke,rt,rt),G[Q+3+64]=G[Q+2+64]=G[Q+0+96]=G[Q+1+96]=G[Q+2+96]=G[Q+3+96]=rt}function $s(G,Q){var ye=G[Q-1+0],De=G[Q-1+32],Ke=G[Q-1+64],rt=G[Q-1+96],it=G[Q-1-32],dt=G[Q+0-32],mt=G[Q+1-32],St=G[Q+2-32];G[Q+0+0]=G[Q+2+32]=ye+it+1>>1,G[Q+0+32]=G[Q+2+64]=De+ye+1>>1,G[Q+0+64]=G[Q+2+96]=Ke+De+1>>1,G[Q+0+96]=rt+Ke+1>>1,G[Q+3+0]=vn(dt,mt,St),G[Q+2+0]=vn(it,dt,mt),G[Q+1+0]=G[Q+3+32]=vn(ye,it,dt),G[Q+1+32]=G[Q+3+64]=vn(De,ye,it),G[Q+1+64]=G[Q+3+96]=vn(Ke,De,ye),G[Q+1+96]=vn(rt,Ke,De)}function Nd(G,Q){var ye;for(ye=0;8>ye;++ye)r(G,Q+32*ye,G,Q-32,8)}function pn(G,Q){var ye;for(ye=0;8>ye;++ye)i(G,Q,G[Q-1],8),Q+=32}function qo(G,Q,ye){var De;for(De=0;8>De;++De)i(Q,ye+32*De,G,8)}function Ru(G,Q){var ye,De=8;for(ye=0;8>ye;++ye)De+=G[Q+ye-32]+G[Q-1+32*ye];qo(De>>4,G,Q)}function Es(G,Q){var ye,De=4;for(ye=0;8>ye;++ye)De+=G[Q+ye-32];qo(De>>3,G,Q)}function Gi(G,Q){var ye,De=4;for(ye=0;8>ye;++ye)De+=G[Q-1+32*ye];qo(De>>3,G,Q)}function Ei(G,Q){qo(128,G,Q)}function go(G,Q,ye){var De=G[Q-ye],Ke=G[Q+0],rt=3*(Ke-De)+an[1020+G[Q-2*ye]-G[Q+ye]],it=$c[112+(rt+4>>3)];G[Q-ye]=Il[255+De+$c[112+(rt+3>>3)]],G[Q+0]=Il[255+Ke-it]}function Od(G,Q,ye,De){var Ke=G[Q+0],rt=G[Q+ye];return ss[255+G[Q-2*ye]-G[Q-ye]]>De||ss[255+rt-Ke]>De}function gh(G,Q,ye,De){return 4*ss[255+G[Q-ye]-G[Q+0]]+ss[255+G[Q-2*ye]-G[Q+ye]]<=De}function gc(G,Q,ye,De,Ke){var rt=G[Q-3*ye],it=G[Q-2*ye],dt=G[Q-ye],mt=G[Q+0],St=G[Q+ye],ea=G[Q+2*ye],Pt=G[Q+3*ye];return 4*ss[255+dt-mt]+ss[255+it-St]>De?0:ss[255+G[Q-4*ye]-rt]<=Ke&&ss[255+rt-it]<=Ke&&ss[255+it-dt]<=Ke&&ss[255+Pt-ea]<=Ke&&ss[255+ea-St]<=Ke&&ss[255+St-mt]<=Ke}function yc(G,Q,ye,De){var Ke=2*De+1;for(De=0;16>De;++De)gh(G,Q+De,ye,Ke)&&go(G,Q+De,ye)}function al(G,Q,ye,De){var Ke=2*De+1;for(De=0;16>De;++De)gh(G,Q+De*ye,1,Ke)&&go(G,Q+De*ye,1)}function ms(G,Q,ye,De){var Ke;for(Ke=3;0<Ke;--Ke)yc(G,Q+=4*ye,ye,De)}function Wu(G,Q,ye,De){var Ke;for(Ke=3;0<Ke;--Ke)al(G,Q+=4,ye,De)}function Ns(G,Q,ye,De,Ke,rt,it,dt){for(rt=2*rt+1;0<Ke--;){if(gc(G,Q,ye,rt,it))if(Od(G,Q,ye,dt))go(G,Q,ye);else{var mt=G,St=Q,ea=ye,Pt=mt[St-2*ea],_a=mt[St-ea],na=mt[St+0],Ra=mt[St+ea],fa=mt[St+2*ea],Rt=27*(Ga=an[1020+3*(na-_a)+an[1020+Pt-Ra]])+63>>7,aa=18*Ga+63>>7,Ga=9*Ga+63>>7;mt[St-3*ea]=Il[255+mt[St-3*ea]+Ga],mt[St-2*ea]=Il[255+Pt+aa],mt[St-ea]=Il[255+_a+Rt],mt[St+0]=Il[255+na-Rt],mt[St+ea]=Il[255+Ra-aa],mt[St+2*ea]=Il[255+fa-Ga]}Q+=De}}function Vl(G,Q,ye,De,Ke,rt,it,dt){for(rt=2*rt+1;0<Ke--;){if(gc(G,Q,ye,rt,it))if(Od(G,Q,ye,dt))go(G,Q,ye);else{var mt=G,St=Q,ea=ye,Pt=mt[St-ea],_a=mt[St+0],na=mt[St+ea],Ra=$c[112+((fa=3*(_a-Pt))+4>>3)],fa=$c[112+(fa+3>>3)],Rt=Ra+1>>1;mt[St-2*ea]=Il[255+mt[St-2*ea]+Rt],mt[St-ea]=Il[255+Pt+fa],mt[St+0]=Il[255+_a-Ra],mt[St+ea]=Il[255+na-Rt]}Q+=De}}function rl(G,Q,ye,De,Ke,rt){Ns(G,Q,ye,1,16,De,Ke,rt)}function Wi(G,Q,ye,De,Ke,rt){Ns(G,Q,1,ye,16,De,Ke,rt)}function Ks(G,Q,ye,De,Ke,rt){var it;for(it=3;0<it;--it)Vl(G,Q+=4*ye,ye,1,16,De,Ke,rt)}function Ql(G,Q,ye,De,Ke,rt){var it;for(it=3;0<it;--it)Vl(G,Q+=4,1,ye,16,De,Ke,rt)}function cs(G,Q,ye,De,Ke,rt,it,dt){Ns(G,Q,Ke,1,8,rt,it,dt),Ns(ye,De,Ke,1,8,rt,it,dt)}function Bh(G,Q,ye,De,Ke,rt,it,dt){Ns(G,Q,1,Ke,8,rt,it,dt),Ns(ye,De,1,Ke,8,rt,it,dt)}function Ho(G,Q,ye,De,Ke,rt,it,dt){Vl(G,Q+4*Ke,Ke,1,8,rt,it,dt),Vl(ye,De+4*Ke,Ke,1,8,rt,it,dt)}function Vd(G,Q,ye,De,Ke,rt,it,dt){Vl(G,Q+4,1,Ke,8,rt,it,dt),Vl(ye,De+4,1,Ke,8,rt,it,dt)}function Tu(){this.ba=new Ui,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new di,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Cu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function eu(){this.ua=0,this.Wa=new _t,this.vb=new _t,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new xe,this.yc=new _e}function Jm(){this.xb=this.a=0,this.l=new fc,this.ca=new Ui,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Se,this.Pb=0,this.wd=new Se,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new eu,this.ab=0,this.gc=c(4,sp),this.Oc=0}function zd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ws(G,Q,ye,De,Ke,rt,it){for(G=G==null?0:G[Q+0],Q=0;Q<it;++Q)Ke[rt+Q]=G+ye[De+Q]&255,G=Ke[rt+Q]}function Tf(G,Q,ye,De,Ke,rt,it){var dt;if(G==null)Ws(null,null,ye,De,Ke,rt,it);else for(dt=0;dt<it;++dt)Ke[rt+dt]=G[Q+dt]+ye[De+dt]&255}function tu(G,Q,ye,De,Ke,rt,it){if(G==null)Ws(null,null,ye,De,Ke,rt,it);else{var dt,mt=G[Q+0],St=mt,ea=mt;for(dt=0;dt<it;++dt)St=ea+(mt=G[Q+dt])-St,ea=ye[De+dt]+(-256&St?0>St?0:255:St)&255,St=mt,Ke[rt+dt]=ea}}function Cf(G,Q,ye,De){var Ke=Q.width,rt=Q.o;if(e(G!=null&&Q!=null),0>ye||0>=De||ye+De>rt)return null;if(!G.Cc){if(G.ga==null){var it;if(G.ga=new zd,(it=G.ga==null)||(it=Q.width*Q.o,e(G.Gb.length==0),G.Gb=l(it),G.Uc=0,G.Gb==null?it=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,it=1),it=!it),!it){it=G.ga;var dt=G.Fa,mt=G.P,St=G.qc,ea=G.mb,Pt=G.nb,_a=mt+1,na=St-1,Ra=it.l;if(e(dt!=null&&ea!=null&&Q!=null),_l[0]=null,_l[1]=Ws,_l[2]=Tf,_l[3]=tu,it.ca=ea,it.tb=Pt,it.c=Q.width,it.i=Q.height,e(0<it.c&&0<it.i),1>=St)Q=0;else if(it.$a=dt[mt+0]>>0&3,it.Z=dt[mt+0]>>2&3,it.Lc=dt[mt+0]>>4&3,mt=dt[mt+0]>>6&3,0>it.$a||1<it.$a||4<=it.Z||1<it.Lc||mt)Q=0;else if(Ra.put=Xt,Ra.ac=us,Ra.bc=Ne,Ra.ma=it,Ra.width=Q.width,Ra.height=Q.height,Ra.Da=Q.Da,Ra.v=Q.v,Ra.va=Q.va,Ra.j=Q.j,Ra.o=Q.o,it.$a)e:{e(it.$a==1),Q=_r();t:for(;;){if(Q==null){Q=0;break e}if(e(it!=null),it.mc=Q,Q.c=it.c,Q.i=it.i,Q.l=it.l,Q.l.ma=it,Q.l.width=it.c,Q.l.height=it.i,Q.a=0,Ue(Q.m,dt,_a,na),!Vr(it.c,it.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Wt(Q.s)?(it.ic=1,dt=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=l(dt),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(it.ic=0,Q=zr(Q,it.c)),!Q))break t;Q=1;break e}it.mc=null,Q=0}else Q=na>=it.c*it.i;it=!Q}if(it)return null;G.ga.Lc!=1?G.Ga=0:De=rt-ye}e(G.ga!=null),e(ye+De<=rt);e:{if(Q=(dt=G.ga).c,rt=dt.l.o,dt.$a==0){if(_a=G.rc,na=G.Vc,Ra=G.Fa,mt=G.P+1+ye*Q,St=G.mb,ea=G.nb+ye*Q,e(mt<=G.P+G.qc),dt.Z!=0)for(e(_l[dt.Z]!=null),it=0;it<De;++it)_l[dt.Z](_a,na,Ra,mt,St,ea,Q),_a=St,na=ea,ea+=Q,mt+=Q;else for(it=0;it<De;++it)r(St,ea,Ra,mt,Q),_a=St,na=ea,ea+=Q,mt+=Q;G.rc=_a,G.Vc=na}else{if(e(dt.mc!=null),Q=ye+De,e((it=dt.mc)!=null),e(Q<=it.i),it.C>=Q)Q=1;else if(dt.ic||ha(),dt.ic){dt=it.V,_a=it.Ba,na=it.c;var fa=it.i,Rt=(Ra=1,mt=it.$/na,St=it.$%na,ea=it.m,Pt=it.s,it.$),aa=na*fa,Ga=na*Q,Ya=Pt.wc,Ha=Rt<Ga?Gt(Pt,St,mt):null;e(Rt<=aa),e(Q<=fa),e(Wt(Pt));t:for(;;){for(;!ea.h&&Rt<Ga;){if(St&Ya||(Ha=Gt(Pt,St,mt)),e(Ha!=null),lt(ea),256>(fa=yt(Ha.G[0],Ha.H[0],ea)))dt[_a+Rt]=fa,++Rt,++St>=na&&(St=0,++mt<=Q&&!(mt%16)&&Ta(it,mt));else{if(!(280>fa)){Ra=0;break t}fa=Xe(fa-256,ea);var xr,gr=yt(Ha.G[4],Ha.H[4],ea);if(lt(ea),!(Rt>=(gr=wt(na,gr=Xe(gr,ea)))&&aa-Rt>=fa)){Ra=0;break t}for(xr=0;xr<fa;++xr)dt[_a+Rt+xr]=dt[_a+Rt+xr-gr];for(Rt+=fa,St+=fa;St>=na;)St-=na,++mt<=Q&&!(mt%16)&&Ta(it,mt);Rt<Ga&&St&Ya&&(Ha=Gt(Pt,St,mt))}e(ea.h==qe(ea))}Ta(it,mt>Q?Q:mt);break t}!Ra||ea.h&&Rt<aa?(Ra=0,it.a=ea.h?5:3):it.$=Rt,Q=Ra}else Q=Ma(it,it.V,it.Ba,it.c,it.i,Q,Zr);if(!Q){De=0;break e}}ye+De>=rt&&(G.Cc=1),De=1}if(!De)return null;if(G.Cc&&((De=G.ga)!=null&&(De.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+ye*Ke}function ce(G,Q,ye,De,Ke,rt){for(;0<Ke--;){var it,dt=G,mt=Q+(ye?1:0),St=G,ea=Q+(ye?0:3);for(it=0;it<De;++it){var Pt=St[ea+4*it];Pt!=255&&(Pt*=32897,dt[mt+4*it+0]=dt[mt+4*it+0]*Pt>>23,dt[mt+4*it+1]=dt[mt+4*it+1]*Pt>>23,dt[mt+4*it+2]=dt[mt+4*it+2]*Pt>>23)}Q+=rt}}function Je(G,Q,ye,De,Ke){for(;0<De--;){var rt;for(rt=0;rt<ye;++rt){var it=G[Q+2*rt+0],dt=15&(St=G[Q+2*rt+1]),mt=4369*dt,St=(240&St|St>>4)*mt>>16;G[Q+2*rt+0]=(240&it|it>>4)*mt>>16&240|(15&it|it<<4)*mt>>16>>4&15,G[Q+2*rt+1]=240&St|dt}Q+=Ke}}function Mt(G,Q,ye,De,Ke,rt,it,dt){var mt,St,ea=255;for(St=0;St<Ke;++St){for(mt=0;mt<De;++mt){var Pt=G[Q+mt];rt[it+4*mt]=Pt,ea&=Pt}Q+=ye,it+=dt}return ea!=255}function Jt(G,Q,ye,De,Ke){var rt;for(rt=0;rt<Ke;++rt)ye[De+rt]=G[Q+rt]>>8}function ha(){gs=ce,Qn=Je,ni=Mt,Xi=Jt}function Da(G,Q,ye){Re[G]=function(De,Ke,rt,it,dt,mt,St,ea,Pt,_a,na,Ra,fa,Rt,aa,Ga,Ya){var Ha,xr=Ya-1>>1,gr=dt[mt+0]|St[ea+0]<<16,sn=Pt[_a+0]|na[Ra+0]<<16;e(De!=null);var hr=3*gr+sn+131074>>2;for(Q(De[Ke+0],255&hr,hr>>16,fa,Rt),rt!=null&&(hr=3*sn+gr+131074>>2,Q(rt[it+0],255&hr,hr>>16,aa,Ga)),Ha=1;Ha<=xr;++Ha){var Ti=dt[mt+Ha]|St[ea+Ha]<<16,Ni=Pt[_a+Ha]|na[Ra+Ha]<<16,$n=gr+Ti+sn+Ni+524296,ii=$n+2*(Ti+sn)>>3;hr=ii+gr>>1,gr=($n=$n+2*(gr+Ni)>>3)+Ti>>1,Q(De[Ke+2*Ha-1],255&hr,hr>>16,fa,Rt+(2*Ha-1)*ye),Q(De[Ke+2*Ha-0],255&gr,gr>>16,fa,Rt+(2*Ha-0)*ye),rt!=null&&(hr=$n+sn>>1,gr=ii+Ni>>1,Q(rt[it+2*Ha-1],255&hr,hr>>16,aa,Ga+(2*Ha-1)*ye),Q(rt[it+2*Ha+0],255&gr,gr>>16,aa,Ga+(2*Ha+0)*ye)),gr=Ti,sn=Ni}1&Ya||(hr=3*gr+sn+131074>>2,Q(De[Ke+Ya-1],255&hr,hr>>16,fa,Rt+(Ya-1)*ye),rt!=null&&(hr=3*sn+gr+131074>>2,Q(rt[it+Ya-1],255&hr,hr>>16,aa,Ga+(Ya-1)*ye)))}}function nr(){ol[Tc]=Wh,ol[kd]=tm,ol[fi]=jd,ol[Gh]=am,ol[il]=Wc,ol[vl]=Ef,ol[Kc]=ll,ol[Eu]=tm,ol[Xu]=am,ol[Cc]=Wc,ol[em]=Ef}function Rr(G){return G&-16384?0>G?0:255:G>>Ll}function Wr(G,Q){return Rr((19077*G>>8)+(26149*Q>>8)-14234)}function xn(G,Q,ye){return Rr((19077*G>>8)-(6419*Q>>8)-(13320*ye>>8)+8708)}function zn(G,Q){return Rr((19077*G>>8)+(33050*Q>>8)-17685)}function yi(G,Q,ye,De,Ke){De[Ke+0]=Wr(G,ye),De[Ke+1]=xn(G,Q,ye),De[Ke+2]=zn(G,Q)}function Os(G,Q,ye,De,Ke){De[Ke+0]=zn(G,Q),De[Ke+1]=xn(G,Q,ye),De[Ke+2]=Wr(G,ye)}function Vs(G,Q,ye,De,Ke){var rt=xn(G,Q,ye);Q=rt<<3&224|zn(G,Q)>>3,De[Ke+0]=248&Wr(G,ye)|rt>>5,De[Ke+1]=Q}function no(G,Q,ye,De,Ke){var rt=240&zn(G,Q)|15;De[Ke+0]=240&Wr(G,ye)|xn(G,Q,ye)>>4,De[Ke+1]=rt}function is(G,Q,ye,De,Ke){De[Ke+0]=255,yi(G,Q,ye,De,Ke+1)}function Nr(G,Q,ye,De,Ke){Os(G,Q,ye,De,Ke),De[Ke+3]=255}function or(G,Q,ye,De,Ke){yi(G,Q,ye,De,Ke),De[Ke+3]=255}function Al(G,Q){return 0>G?0:G>Q?Q:G}function Tr(G,Q,ye){Re[G]=function(De,Ke,rt,it,dt,mt,St,ea,Pt){for(var _a=ea+(-2&Pt)*ye;ea!=_a;)Q(De[Ke+0],rt[it+0],dt[mt+0],St,ea),Q(De[Ke+1],rt[it+0],dt[mt+0],St,ea+ye),Ke+=2,++it,++mt,ea+=2*ye;1&Pt&&Q(De[Ke+0],rt[it+0],dt[mt+0],St,ea)}}function Su(G,Q,ye){return ye==0?G==0?Q==0?6:5:Q==0?4:0:ye}function au(G,Q,ye,De,Ke){switch(G>>>30){case 3:bu(Q,ye,De,Ke,0);break;case 2:Yi(Q,ye,De,Ke);break;case 1:io(Q,ye,De,Ke)}}function wr(G,Q){var ye,De,Ke=Q.M,rt=Q.Nb,it=G.oc,dt=G.pc+40,mt=G.oc,St=G.pc+584,ea=G.oc,Pt=G.pc+600;for(ye=0;16>ye;++ye)it[dt+32*ye-1]=129;for(ye=0;8>ye;++ye)mt[St+32*ye-1]=129,ea[Pt+32*ye-1]=129;for(0<Ke?it[dt-1-32]=mt[St-1-32]=ea[Pt-1-32]=129:(i(it,dt-32-1,127,21),i(mt,St-32-1,127,9),i(ea,Pt-32-1,127,9)),De=0;De<G.za;++De){var _a=Q.ya[Q.aa+De];if(0<De){for(ye=-1;16>ye;++ye)r(it,dt+32*ye-4,it,dt+32*ye+12,4);for(ye=-1;8>ye;++ye)r(mt,St+32*ye-4,mt,St+32*ye+4,4),r(ea,Pt+32*ye-4,ea,Pt+32*ye+4,4)}var na=G.Gd,Ra=G.Hd+De,fa=_a.ad,Rt=_a.Hc;if(0<Ke&&(r(it,dt-32,na[Ra].y,0,16),r(mt,St-32,na[Ra].f,0,8),r(ea,Pt-32,na[Ra].ea,0,8)),_a.Za){var aa=it,Ga=dt-32+16;for(0<Ke&&(De>=G.za-1?i(aa,Ga,na[Ra].y[15],4):r(aa,Ga,na[Ra+1].y,0,4)),ye=0;4>ye;ye++)aa[Ga+128+ye]=aa[Ga+256+ye]=aa[Ga+384+ye]=aa[Ga+0+ye];for(ye=0;16>ye;++ye,Rt<<=2)aa=it,Ga=dt+eg[ye],Ju[_a.Ob[ye]](aa,Ga),au(Rt,fa,16*+ye,aa,Ga)}else if(aa=Su(De,Ke,_a.Ob[0]),bc[aa](it,dt),Rt!=0)for(ye=0;16>ye;++ye,Rt<<=2)au(Rt,fa,16*+ye,it,dt+eg[ye]);for(ye=_a.Gc,aa=Su(De,Ke,_a.Dd),Ou[aa](mt,St),Ou[aa](ea,Pt),Rt=fa,aa=mt,Ga=St,255&(_a=ye>>0)&&(170&_a?bf(Rt,256,aa,Ga):vo(Rt,256,aa,Ga)),_a=ea,Rt=Pt,255&(ye>>=8)&&(170&ye?bf(fa,320,_a,Rt):vo(fa,320,_a,Rt)),Ke<G.Ub-1&&(r(na[Ra].y,0,it,dt+480,16),r(na[Ra].f,0,mt,St+224,8),r(na[Ra].ea,0,ea,Pt+224,8)),ye=8*rt*G.B,na=G.sa,Ra=G.ta+16*De+16*rt*G.R,fa=G.qa,_a=G.ra+8*De+ye,Rt=G.Ha,aa=G.Ia+8*De+ye,ye=0;16>ye;++ye)r(na,Ra+ye*G.R,it,dt+32*ye,16);for(ye=0;8>ye;++ye)r(fa,_a+ye*G.B,mt,St+32*ye,8),r(Rt,aa+ye*G.B,ea,Pt+32*ye,8)}}function yh(G,Q,ye,De,Ke,rt,it,dt,mt){var St=[0],ea=[0],Pt=0,_a=mt!=null?mt.kd:0,na=mt??new Cu;if(G==null||12>ye)return 7;na.data=G,na.w=Q,na.ha=ye,Q=[Q],ye=[ye],na.gb=[na.gb];e:{var Ra=Q,fa=ye,Rt=na.gb;if(e(G!=null),e(fa!=null),e(Rt!=null),Rt[0]=0,12<=fa[0]&&!a(G,Ra[0],"RIFF")){if(a(G,Ra[0]+8,"WEBP")){Rt=3;break e}var aa=ma(G,Ra[0]+4);if(12>aa||4294967286<aa){Rt=3;break e}if(_a&&aa>fa[0]-8){Rt=7;break e}Rt[0]=aa,Ra[0]+=12,fa[0]-=12}Rt=0}if(Rt!=0)return Rt;for(aa=0<na.gb[0],ye=ye[0];;){e:{var Ga=G;fa=Q,Rt=ye;var Ya=St,Ha=ea,xr=Ra=[0];if((hr=Pt=[Pt])[0]=0,8>Rt[0])Rt=7;else{if(!a(Ga,fa[0],"VP8X")){if(ma(Ga,fa[0]+4)!=10){Rt=3;break e}if(18>Rt[0]){Rt=7;break e}var gr=ma(Ga,fa[0]+8),sn=1+kt(Ga,fa[0]+12);if(2147483648<=sn*(Ga=1+kt(Ga,fa[0]+15))){Rt=3;break e}xr!=null&&(xr[0]=gr),Ya!=null&&(Ya[0]=sn),Ha!=null&&(Ha[0]=Ga),fa[0]+=18,Rt[0]-=18,hr[0]=1}Rt=0}}if(Pt=Pt[0],Ra=Ra[0],Rt!=0)return Rt;if(fa=!!(2&Ra),!aa&&Pt)return 3;if(rt!=null&&(rt[0]=!!(16&Ra)),it!=null&&(it[0]=fa),dt!=null&&(dt[0]=0),it=St[0],Ra=ea[0],Pt&&fa&&mt==null){Rt=0;break}if(4>ye){Rt=7;break}if(aa&&Pt||!aa&&!Pt&&!a(G,Q[0],"ALPH")){ye=[ye],na.na=[na.na],na.P=[na.P],na.Sa=[na.Sa];e:{gr=G,Rt=Q,aa=ye;var hr=na.gb;Ya=na.na,Ha=na.P,xr=na.Sa,sn=22,e(gr!=null),e(aa!=null),Ga=Rt[0];var Ti=aa[0];for(e(Ya!=null),e(xr!=null),Ya[0]=null,Ha[0]=null,xr[0]=0;;){if(Rt[0]=Ga,aa[0]=Ti,8>Ti){Rt=7;break e}var Ni=ma(gr,Ga+4);if(4294967286<Ni){Rt=3;break e}var $n=8+Ni+1&-2;if(sn+=$n,0<hr&&sn>hr){Rt=3;break e}if(!a(gr,Ga,"VP8 ")||!a(gr,Ga,"VP8L")){Rt=0;break e}if(Ti[0]<$n){Rt=7;break e}a(gr,Ga,"ALPH")||(Ya[0]=gr,Ha[0]=Ga+8,xr[0]=Ni),Ga+=$n,Ti-=$n}}if(ye=ye[0],na.na=na.na[0],na.P=na.P[0],na.Sa=na.Sa[0],Rt!=0)break}ye=[ye],na.Ja=[na.Ja],na.xa=[na.xa];e:if(hr=G,Rt=Q,aa=ye,Ya=na.gb[0],Ha=na.Ja,xr=na.xa,gr=Rt[0],Ga=!a(hr,gr,"VP8 "),sn=!a(hr,gr,"VP8L"),e(hr!=null),e(aa!=null),e(Ha!=null),e(xr!=null),8>aa[0])Rt=7;else{if(Ga||sn){if(hr=ma(hr,gr+4),12<=Ya&&hr>Ya-12){Rt=3;break e}if(_a&&hr>aa[0]-8){Rt=7;break e}Ha[0]=hr,Rt[0]+=8,aa[0]-=8,xr[0]=sn}else xr[0]=5<=aa[0]&&hr[gr+0]==47&&!(hr[gr+4]>>5),Ha[0]=aa[0];Rt=0}if(ye=ye[0],na.Ja=na.Ja[0],na.xa=na.xa[0],Q=Q[0],Rt!=0)break;if(4294967286<na.Ja)return 3;if(dt==null||fa||(dt[0]=na.xa?2:1),it=[it],Ra=[Ra],na.xa){if(5>ye){Rt=7;break}dt=it,_a=Ra,fa=rt,G==null||5>ye?G=0:5<=ye&&G[Q+0]==47&&!(G[Q+4]>>5)?(aa=[0],hr=[0],Ya=[0],Ue(Ha=new Se,G,Q,ye),Fe(Ha,aa,hr,Ya)?(dt!=null&&(dt[0]=aa[0]),_a!=null&&(_a[0]=hr[0]),fa!=null&&(fa[0]=Ya[0]),G=1):G=0):G=0}else{if(10>ye){Rt=7;break}dt=Ra,G==null||10>ye||!Yl(G,Q+3,ye-3)?G=0:(_a=G[Q+0]|G[Q+1]<<8|G[Q+2]<<16,fa=16383&(G[Q+7]<<8|G[Q+6]),G=16383&(G[Q+9]<<8|G[Q+8]),1&_a||3<(_a>>1&7)||!(_a>>4&1)||_a>>5>=na.Ja||!fa||!G?G=0:(it&&(it[0]=fa),dt&&(dt[0]=G),G=1))}if(!G||(it=it[0],Ra=Ra[0],Pt&&(St[0]!=it||ea[0]!=Ra)))return 3;mt!=null&&(mt[0]=na,mt.offset=Q-mt.w,e(4294967286>Q-mt.w),e(mt.offset==mt.ha-ye));break}return Rt==0||Rt==7&&Pt&&mt==null?(rt!=null&&(rt[0]|=na.na!=null&&0<na.na.length),De!=null&&(De[0]=it),Ke!=null&&(Ke[0]=Ra),0):Rt}function ru(G,Q,ye){var De=Q.width,Ke=Q.height,rt=0,it=0,dt=De,mt=Ke;if(Q.Da=G!=null&&0<G.Da,Q.Da&&(dt=G.cd,mt=G.bd,rt=G.v,it=G.j,11>ye||(rt&=-2,it&=-2),0>rt||0>it||0>=dt||0>=mt||rt+dt>De||it+mt>Ke))return 0;if(Q.v=rt,Q.j=it,Q.va=rt+dt,Q.o=it+mt,Q.U=dt,Q.T=mt,Q.da=G!=null&&0<G.da,Q.da){if(!ir(dt,mt,ye=[G.ib],rt=[G.hb]))return 0;Q.ib=ye[0],Q.hb=rt[0]}return Q.ob=G!=null&&G.ob,Q.Kb=G==null||!G.Sd,Q.da&&(Q.ob=Q.ib<3*De/4&&Q.hb<3*Ke/4,Q.Kb=0),1}function Ac(G){if(G==null)return 2;if(11>G.S){var Q=G.f.RGBA;Q.fb+=(G.height-1)*Q.A,Q.A=-Q.A}else Q=G.f.kb,G=G.height,Q.O+=(G-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(G-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(G-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(G-1)*Q.lb,Q.lb=-Q.lb);return 0}function Dd(G,Q,ye,De){if(De==null||0>=G||0>=Q)return 2;if(ye!=null){if(ye.Da){var Ke=ye.cd,rt=ye.bd,it=-2&ye.v,dt=-2&ye.j;if(0>it||0>dt||0>=Ke||0>=rt||it+Ke>G||dt+rt>Q)return 2;G=Ke,Q=rt}if(ye.da){if(!ir(G,Q,Ke=[ye.ib],rt=[ye.hb]))return 2;G=Ke[0],Q=rt[0]}}De.width=G,De.height=Q;e:{var mt=De.width,St=De.height;if(G=De.S,0>=mt||0>=St||!(G>=Tc&&13>G))G=2;else{if(0>=De.Rd&&De.sd==null){it=rt=Ke=Q=0;var ea=(dt=mt*Yh[G])*St;if(11>G||(rt=(St+1)/2*(Q=(mt+1)/2),G==12&&(it=(Ke=mt)*St)),(St=l(ea+2*rt+it))==null){G=1;break e}De.sd=St,11>G?((mt=De.f.RGBA).eb=St,mt.fb=0,mt.A=dt,mt.size=ea):((mt=De.f.kb).y=St,mt.O=0,mt.fa=dt,mt.Fd=ea,mt.f=St,mt.N=0+ea,mt.Ab=Q,mt.Cd=rt,mt.ea=St,mt.W=0+ea+rt,mt.Db=Q,mt.Ed=rt,G==12&&(mt.F=St,mt.J=0+ea+2*rt),mt.Tc=it,mt.lb=Ke)}if(Q=1,Ke=De.S,rt=De.width,it=De.height,Ke>=Tc&&13>Ke)if(11>Ke)G=De.f.RGBA,Q&=(dt=Math.abs(G.A))*(it-1)+rt<=G.size,Q&=dt>=rt*Yh[Ke],Q&=G.eb!=null;else{G=De.f.kb,dt=(rt+1)/2,ea=(it+1)/2,mt=Math.abs(G.fa),St=Math.abs(G.Ab);var Pt=Math.abs(G.Db),_a=Math.abs(G.lb),na=_a*(it-1)+rt;Q&=mt*(it-1)+rt<=G.Fd,Q&=St*(ea-1)+dt<=G.Cd,Q=(Q&=Pt*(ea-1)+dt<=G.Ed)&mt>=rt&St>=dt&Pt>=dt,Q&=G.y!=null,Q&=G.f!=null,Q&=G.ea!=null,Ke==12&&(Q&=_a>=rt,Q&=na<=G.Tc,Q&=G.F!=null)}else Q=0;G=Q?0:2}}return G!=0||ye!=null&&ye.fd&&(G=Ac(De)),G}var zs=64,wi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vc=24,Va=32,Md=8,Ys=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ja("Predictor0","PredictorAdd0"),Re.Predictor0=function(){return 4278190080},Re.Predictor1=function(G){return G},Re.Predictor2=function(G,Q,ye){return Q[ye+0]},Re.Predictor3=function(G,Q,ye){return Q[ye+1]},Re.Predictor4=function(G,Q,ye){return Q[ye-1]},Re.Predictor5=function(G,Q,ye){return dr(dr(G,Q[ye+1]),Q[ye+0])},Re.Predictor6=function(G,Q,ye){return dr(G,Q[ye-1])},Re.Predictor7=function(G,Q,ye){return dr(G,Q[ye+0])},Re.Predictor8=function(G,Q,ye){return dr(Q[ye-1],Q[ye+0])},Re.Predictor9=function(G,Q,ye){return dr(Q[ye+0],Q[ye+1])},Re.Predictor10=function(G,Q,ye){return dr(dr(G,Q[ye-1]),dr(Q[ye+0],Q[ye+1]))},Re.Predictor11=function(G,Q,ye){var De=Q[ye+0];return 0>=Gr(De>>24&255,G>>24&255,(Q=Q[ye-1])>>24&255)+Gr(De>>16&255,G>>16&255,Q>>16&255)+Gr(De>>8&255,G>>8&255,Q>>8&255)+Gr(255&De,255&G,255&Q)?De:G},Re.Predictor12=function(G,Q,ye){var De=Q[ye+0];return(Sr((G>>24&255)+(De>>24&255)-((Q=Q[ye-1])>>24&255))<<24|Sr((G>>16&255)+(De>>16&255)-(Q>>16&255))<<16|Sr((G>>8&255)+(De>>8&255)-(Q>>8&255))<<8|Sr((255&G)+(255&De)-(255&Q)))>>>0},Re.Predictor13=function(G,Q,ye){var De=Q[ye-1];return(ka((G=dr(G,Q[ye+0]))>>24&255,De>>24&255)<<24|ka(G>>16&255,De>>16&255)<<16|ka(G>>8&255,De>>8&255)<<8|ka(G>>0&255,De>>0&255))>>>0};var yo=Re.PredictorAdd0;Re.PredictorAdd1=dn,Ja("Predictor2","PredictorAdd2"),Ja("Predictor3","PredictorAdd3"),Ja("Predictor4","PredictorAdd4"),Ja("Predictor5","PredictorAdd5"),Ja("Predictor6","PredictorAdd6"),Ja("Predictor7","PredictorAdd7"),Ja("Predictor8","PredictorAdd8"),Ja("Predictor9","PredictorAdd9"),Ja("Predictor10","PredictorAdd10"),Ja("Predictor11","PredictorAdd11"),Ja("Predictor12","PredictorAdd12"),Ja("Predictor13","PredictorAdd13");var Sf=Re.PredictorAdd2;Wa("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),Wa("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var jh,Ao=Re.ColorIndexInverseTransform,Us=Re.MapARGB,zl=Re.VP8LColorIndexInverseTransformAlpha,Bc=Re.MapAlpha,nu=Re.VP8LPredictorsAdd=[];nu.length=16,(Re.VP8LPredictors=[]).length=16,(Re.VP8LPredictorsAdd_C=[]).length=16,(Re.VP8LPredictors_C=[]).length=16;var Ah,Dl,Po,Id,jc,Ml,_c,bu,Yi,bf,io,vo,Ld,Fd,so,Gc,wc,xu,Zc,Pu,qc,Rc,Yu,$o,gs,Qn,ni,Xi,ds=l(511),iu=l(2041),Hc=l(225),nl=l(767),su=0,an=iu,$c=Hc,Il=nl,ss=ds,Tc=0,kd=1,fi=2,Gh=3,il=4,vl=5,Kc=6,Eu=7,Xu=8,Cc=9,em=10,Zh=[2,3,7],qh=[3,3,11],sl=[280,256,256,256,40],Ji=[0,1,1,1,0],Ri=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ou=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],op=8,Sc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ud=null,Hh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$h=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],qg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],bc=[],Ju=[],Ou=[],Hg=1,Kh=2,_l=[],ol=[];Da("UpsampleRgbLinePair",yi,3),Da("UpsampleBgrLinePair",Os,3),Da("UpsampleRgbaLinePair",or,4),Da("UpsampleBgraLinePair",Nr,4),Da("UpsampleArgbLinePair",is,4),Da("UpsampleRgba4444LinePair",no,2),Da("UpsampleRgb565LinePair",Vs,2);var Wh=Re.UpsampleRgbLinePair,jd=Re.UpsampleBgrLinePair,tm=Re.UpsampleRgbaLinePair,am=Re.UpsampleBgraLinePair,Wc=Re.UpsampleArgbLinePair,Ef=Re.UpsampleRgba4444LinePair,ll=Re.UpsampleRgb565LinePair,Gd=16,Vu=1<<Gd-1,Zd=-227,Yc=482,Ll=6,Qu=0,Xc=l(256),lp=l(256),qd=l(256),Jc=l(256),Bs=l(Yc-Zd),rm=l(Yc-Zd);Tr("YuvToRgbRow",yi,3),Tr("YuvToBgrRow",Os,3),Tr("YuvToRgbaRow",or,4),Tr("YuvToBgraRow",Nr,4),Tr("YuvToArgbRow",is,4),Tr("YuvToRgba4444Row",no,2),Tr("YuvToRgb565Row",Vs,2);var eg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Nf=[0,2,8],nm=[8,7,6,4,4,2,2,2,1,1,1,1],oo=1;this.WebPDecodeRGBA=function(G,Q,ye,De,Ke){var rt=kd,it=new Tu,dt=new Ui;it.ba=dt,dt.S=rt,dt.width=[dt.width],dt.height=[dt.height];var mt=dt.width,St=dt.height,ea=new ao;if(ea==null||G==null)var Pt=2;else e(ea!=null),Pt=yh(G,Q,ye,ea.width,ea.height,ea.Pd,ea.Qd,ea.format,null);if(Pt!=0?mt=0:(mt!=null&&(mt[0]=ea.width[0]),St!=null&&(St[0]=ea.height[0]),mt=1),mt){dt.width=dt.width[0],dt.height=dt.height[0],De!=null&&(De[0]=dt.width),Ke!=null&&(Ke[0]=dt.height);e:{if(De=new fc,(Ke=new Cu).data=G,Ke.w=Q,Ke.ha=ye,Ke.kd=1,Q=[0],e(Ke!=null),((G=yh(Ke.data,Ke.w,Ke.ha,null,null,null,Q,null,Ke))==0||G==7)&&Q[0]&&(G=4),(Q=G)==0){if(e(it!=null),De.data=Ke.data,De.w=Ke.w+Ke.offset,De.ha=Ke.ha-Ke.offset,De.put=Xt,De.ac=us,De.bc=Ne,De.ma=it,Ke.xa){if((G=_r())==null){it=1;break e}if(function(_a,na){var Ra=[0],fa=[0],Rt=[0];t:for(;;){if(_a==null)return 0;if(na==null)return _a.a=2,0;if(_a.l=na,_a.a=0,Ue(_a.m,na.data,na.w,na.ha),!Fe(_a.m,Ra,fa,Rt)){_a.a=3;break t}if(_a.xb=Kh,na.width=Ra[0],na.height=fa[0],!Vr(Ra[0],fa[0],1,_a,null))break t;return 1}return e(_a.a!=0),0}(G,De)){if(De=(Q=Dd(De.width,De.height,it.Oa,it.ba))==0){t:{De=G;a:for(;;){if(De==null){De=0;break t}if(e(De.s.yc!=null),e(De.s.Ya!=null),e(0<De.s.Wb),e((ye=De.l)!=null),e((Ke=ye.ma)!=null),De.xb!=0){if(De.ca=Ke.ba,De.tb=Ke.tb,e(De.ca!=null),!ru(Ke.Oa,ye,Gh)){De.a=2;break a}if(!zr(De,ye.width)||ye.da)break a;if((ye.da||br(De.ca.S))&&ha(),11>De.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),De.ca.f.kb.F!=null&&ha()),De.Pb&&0<De.s.ua&&De.s.vb.X==null&&!It(De.s.vb,De.s.Wa.Xa)){De.a=1;break a}De.xb=0}if(!Ma(De,De.V,De.Ba,De.c,De.i,ye.o,Kt))break a;Ke.Dc=De.Ma,De=1;break t}e(De.a!=0),De=0}De=!De}De&&(Q=G.a)}else Q=G.a}else{if((G=new el)==null){it=1;break e}if(G.Fa=Ke.na,G.P=Ke.P,G.qc=Ke.Sa,Bo(G,De)){if((Q=Dd(De.width,De.height,it.Oa,it.ba))==0){if(G.Aa=0,ye=it.Oa,e((Ke=G)!=null),ye!=null){if(0<(mt=0>(mt=ye.Md)?0:100<mt?255:255*mt/100)){for(St=ea=0;4>St;++St)12>(Pt=Ke.pb[St]).lc&&(Pt.ia=mt*nm[0>Pt.lc?0:Pt.lc]>>3),ea|=Pt.ia;ea&&(alert("todo:VP8InitRandom"),Ke.ia=1)}Ke.Ga=ye.Id,100<Ke.Ga?Ke.Ga=100:0>Ke.Ga&&(Ke.Ga=0)}fh(G,De)||(Q=G.a)}}else Q=G.a}Q==0&&it.Oa!=null&&it.Oa.fd&&(Q=Ac(it.ba))}it=Q}rt=it!=0?null:11>rt?dt.f.RGBA.eb:dt.f.kb.y}else rt=null;return rt};var Yh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function R(Re,we){for(var Ee="",ae=0;ae<4;ae++)Ee+=String.fromCharCode(Re[we++]);return Ee}function x(Re,we){return(Re[we+0]<<0|Re[we+1]<<8|Re[we+2]<<16)>>>0}function N(Re,we){return(Re[we+0]<<0|Re[we+1]<<8|Re[we+2]<<16|Re[we+3]<<24)>>>0}new v;var L=[0],F=[0],j=[],H=new v,q=t,W=function(Re,we){var Ee={},ae=0,_e=!1,Ie=0,xe=0;if(Ee.frames=[],!function(Te,qe,Ze,lt){for(var st=0;st<lt;st++)if(Te[qe+st]!=Ze.charCodeAt(st))return!0;return!1}(Re,we,"RIFF",4)){for(N(Re,we+=4),we+=8;we<Re.length;){var ze=R(Re,we),Me=N(Re,we+=4);we+=4;var je=Me+(1&Me);switch(ze){case"VP8 ":case"VP8L":Ee.frames[ae]===void 0&&(Ee.frames[ae]={}),(ke=Ee.frames[ae]).src_off=_e?xe:we-8,ke.src_size=Ie+Me+8,ae++,_e&&(_e=!1,Ie=0,xe=0);break;case"VP8X":(ke=Ee.header={}).feature_flags=Re[we];var Ue=we+4;ke.canvas_width=1+x(Re,Ue),Ue+=3,ke.canvas_height=1+x(Re,Ue),Ue+=3;break;case"ALPH":_e=!0,Ie=je+8,xe=we-8;break;case"ANIM":(ke=Ee.header).bgcolor=N(Re,we),Ue=we+4,ke.loop_count=(Ge=Re)[(Se=Ue)+0]<<0|Ge[Se+1]<<8,Ue+=2;break;case"ANMF":var Qe,ke;(ke=Ee.frames[ae]={}).offset_x=2*x(Re,we),we+=3,ke.offset_y=2*x(Re,we),we+=3,ke.width=1+x(Re,we),we+=3,ke.height=1+x(Re,we),we+=3,ke.duration=x(Re,we),we+=3,Qe=Re[we++],ke.dispose=1&Qe,ke.blend=Qe>>1&1}ze!="ANMF"&&(we+=je)}var Ge,Se;return Ee}}(q,0);W.response=q,W.rgbaoutput=!0,W.dataurl=!1;var ee=W.header?W.header:null,oe=W.frames?W.frames:null;if(ee){ee.loop_counter=ee.loop_count,L=[ee.canvas_height],F=[ee.canvas_width];for(var fe=0;fe<oe.length&&oe[fe].blend!=0;fe++);}var se=oe[0],me=H.WebPDecodeRGBA(q,se.src_off,se.src_size,F,L);se.rgba=me,se.imgwidth=F[0],se.imgheight=L[0];for(var ge=0;ge<F[0]*L[0]*4;ge++)j[ge]=me[ge];return this.width=F,this.height=L,this.data=j,this}(function(t){var e=function(){return typeof ZI=="function"},a=function(L,F,j,H){var q=4,W=c;switch(H){case t.image_compression.FAST:q=1,W=l;break;case t.image_compression.MEDIUM:q=6,W=n;break;case t.image_compression.SLOW:q=9,W=v}L=r(L,F,j,W);var ee=ZI(L,{level:q});return t.__addimage__.arrayBufferToBinaryString(ee)},r=function(L,F,j,H){for(var q,W,ee,oe=L.length/F,fe=new Uint8Array(L.length+oe),se=x(),me=0;me<oe;me+=1){if(ee=me*F,q=L.subarray(ee,ee+F),H)fe.set(H(q,j,W),ee+me);else{for(var ge,Re=se.length,we=[];ge<Re;ge+=1)we[ge]=se[ge](q,j,W);var Ee=N(we.concat());fe.set(we[Ee],ee+me)}W=q}return fe},i=function(L){var F=Array.apply([],L);return F.unshift(0),F},l=function(L,F){var j,H=[],q=L.length;H[0]=1;for(var W=0;W<q;W+=1)j=L[W-F]||0,H[W+1]=L[W]-j+256&255;return H},c=function(L,F,j){var H,q=[],W=L.length;q[0]=2;for(var ee=0;ee<W;ee+=1)H=j&&j[ee]||0,q[ee+1]=L[ee]-H+256&255;return q},n=function(L,F,j){var H,q,W=[],ee=L.length;W[0]=3;for(var oe=0;oe<ee;oe+=1)H=L[oe-F]||0,q=j&&j[oe]||0,W[oe+1]=L[oe]+256-(H+q>>>1)&255;return W},v=function(L,F,j){var H,q,W,ee,oe=[],fe=L.length;oe[0]=4;for(var se=0;se<fe;se+=1)H=L[se-F]||0,q=j&&j[se]||0,W=j&&j[se-F]||0,ee=R(H,q,W),oe[se+1]=L[se]-ee+256&255;return oe},R=function(L,F,j){if(L===F&&F===j)return L;var H=Math.abs(F-j),q=Math.abs(L-j),W=Math.abs(L+F-j-j);return H<=q&&H<=W?L:q<=W?F:j},x=function(){return[i,l,c,n,v]},N=function(L){var F=L.map(function(j){return j.reduce(function(H,q){return H+Math.abs(q)},0)});return F.indexOf(Math.min.apply(null,F))};t.processPNG=function(L,F,j,H){var q,W,ee,oe,fe,se,me,ge,Re,we,Ee,ae,_e,Ie,xe,ze=this.decode.FLATE_DECODE,Me="";if(this.__addimage__.isArrayBuffer(L)&&(L=new Uint8Array(L)),this.__addimage__.isArrayBufferView(L)){if(L=(ee=new OOe(L)).imgData,W=ee.bits,q=ee.colorSpace,fe=ee.colors,[4,6].indexOf(ee.colorType)!==-1){if(ee.bits===8){Re=(ge=ee.pixelBitlength==32?new Uint32Array(ee.decodePixels().buffer):ee.pixelBitlength==16?new Uint16Array(ee.decodePixels().buffer):new Uint8Array(ee.decodePixels().buffer)).length,Ee=new Uint8Array(Re*ee.colors),we=new Uint8Array(Re);var je,Ue=ee.pixelBitlength-ee.bits;for(Ie=0,xe=0;Ie<Re;Ie++){for(_e=ge[Ie],je=0;je<Ue;)Ee[xe++]=_e>>>je&255,je+=ee.bits;we[Ie]=_e>>>je&255}}if(ee.bits===16){Re=(ge=new Uint32Array(ee.decodePixels().buffer)).length,Ee=new Uint8Array(Re*(32/ee.pixelBitlength)*ee.colors),we=new Uint8Array(Re*(32/ee.pixelBitlength)),ae=ee.colors>1,Ie=0,xe=0;for(var Qe=0;Ie<Re;)_e=ge[Ie++],Ee[xe++]=_e>>>0&255,ae&&(Ee[xe++]=_e>>>16&255,_e=ge[Ie++],Ee[xe++]=_e>>>0&255),we[Qe++]=_e>>>16&255;W=8}H!==t.image_compression.NONE&&e()?(L=a(Ee,ee.width*ee.colors,ee.colors,H),me=a(we,ee.width,1,H)):(L=Ee,me=we,ze=void 0)}if(ee.colorType===3&&(q=this.color_spaces.INDEXED,se=ee.palette,ee.transparency.indexed)){var ke=ee.transparency.indexed,Ge=0;for(Ie=0,Re=ke.length;Ie<Re;++Ie)Ge+=ke[Ie];if((Ge/=255)===Re-1&&ke.indexOf(0)!==-1)oe=[ke.indexOf(0)];else if(Ge!==Re){for(ge=ee.decodePixels(),we=new Uint8Array(ge.length),Ie=0,Re=ge.length;Ie<Re;Ie++)we[Ie]=ke[ge[Ie]];me=a(we,ee.width,1)}}var Se=function(Te){var qe;switch(Te){case t.image_compression.FAST:qe=11;break;case t.image_compression.MEDIUM:qe=13;break;case t.image_compression.SLOW:qe=14;break;default:qe=12}return qe}(H);return ze===this.decode.FLATE_DECODE&&(Me="/Predictor "+Se+" "),Me+="/Colors "+fe+" /BitsPerComponent "+W+" /Columns "+ee.width,(this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),(me&&this.__addimage__.isArrayBuffer(me)||this.__addimage__.isArrayBufferView(me))&&(me=this.__addimage__.arrayBufferToBinaryString(me)),{alias:j,data:L,index:F,filter:ze,decodeParameters:Me,transparency:oe,palette:se,sMask:me,predictor:Se,width:ee.width,height:ee.height,bitsPerComponent:W,colorSpace:q}}}})(qn.API),function(t){t.processGIF89A=function(e,a,r,i){var l=new VOe(e),c=l.width,n=l.height,v=[];l.decodeAndBlitFrameRGBA(0,v);var R={data:v,width:c,height:n},x=new vD(100).encode(R,100);return t.processJPEG.call(this,x,a,r,i)},t.processGIF87A=t.processGIF89A}(qn.API),Lp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:a,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Lp.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(a){ho.log("bit decode error:"+a)}},Lp.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),a=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*i*4,n=0;n<8&&8*i+n<this.width;n++){var v=this.palette[l>>7-n&1];this.data[c+4*n]=v.blue,this.data[c+4*n+1]=v.green,this.data[c+4*n+2]=v.red,this.data[c+4*n+3]=255}a!==0&&(this.pos+=4-a)}},Lp.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,i=0;i<t;i++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*i*4,n=l>>4,v=15&l,R=this.palette[n];if(this.data[c]=R.blue,this.data[c+1]=R.green,this.data[c+2]=R.red,this.data[c+3]=255,2*i+1>=this.width)break;R=this.palette[v],this.data[c+4]=R.blue,this.data[c+4+1]=R.green,this.data[c+4+2]=R.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Lp.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+4*r;if(i<this.palette.length){var c=this.palette[i];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},Lp.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,n=(l>>5&e)/e*255|0,v=(l>>10&e)/e*255|0,R=l>>15?255:0,x=r*this.width*4+4*i;this.data[x]=v,this.data[x+1]=n,this.data[x+2]=c,this.data[x+3]=R}this.pos+=t}},Lp.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var n=(c&e)/e*255|0,v=(c>>5&a)/a*255|0,R=(c>>11)/e*255|0,x=i*this.width*4+4*l;this.data[x]=R,this.data[x+1]=v,this.data[x+2]=n,this.data[x+3]=255}this.pos+=t}},Lp.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*a;this.data[c]=l,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},Lp.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),n=e*this.width*4+4*a;this.data[n]=l,this.data[n+1]=i,this.data[n+2]=r,this.data[n+3]=c}},Lp.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,a,r,i){var l=new Lp(e,!1),c=l.width,n=l.height,v={data:l.getData(),width:c,height:n},R=new vD(100).encode(v,100);return t.processJPEG.call(this,R,a,r,i)}}(qn.API),eH.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,a,r,i){var l=new eH(e),c=l.width,n=l.height,v={data:l.getData(),width:c,height:n},R=new vD(100).encode(v,100);return t.processJPEG.call(this,R,a,r,i)}}(qn.API),qn.API.processRGBA=function(t,e,a){for(var r=t.data,i=r.length,l=new Uint8Array(i/4*3),c=new Uint8Array(i/4),n=0,v=0,R=0;R<i;R+=4){var x=r[R],N=r[R+1],L=r[R+2],F=r[R+3];l[n++]=x,l[n++]=N,l[n++]=L,c[v++]=F}var j=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:j,index:e,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},qn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},j0=qn.API,ob=j0.getCharWidthsArray=function(t,e){var a,r,i=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),n=e.widths?e.widths:i.metadata.Unicode.widths,v=n.fof?n.fof:1,R=e.kerning?e.kerning:i.metadata.Unicode.kerning,x=R.fof?R.fof:1,N=e.doKerning!==!1,L=0,F=t.length,j=0,H=n[0]||v,q=[];for(a=0;a<F;a++)r=t.charCodeAt(a),typeof i.metadata.widthOfString=="function"?q.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+c*(1e3/l)||0)/1e3):(L=N&&Gs(R[r])==="object"&&!isNaN(parseInt(R[r][j],10))?R[r][j]/x:0,q.push((n[r]||H)/v+L)),j=r;return q},Yq=j0.getStringUnitWidth=function(t,e){var a=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return j0.processArabic&&(t=j0.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,a,i)/a:ob.apply(this,arguments).reduce(function(l,c){return l+c},0)},Xq=function(t,e,a,r){for(var i=[],l=0,c=t.length,n=0;l!==c&&n+e[l]<a;)n+=e[l],l++;i.push(t.slice(0,l));var v=l;for(n=0;l!==c;)n+e[l]>r&&(i.push(t.slice(v,l)),n=0,v=l),n+=e[l],l++;return v!==l&&i.push(t.slice(v,l)),i},Jq=function(t,e,a){a||(a={});var r,i,l,c,n,v,R,x=[],N=[x],L=a.textIndent||0,F=0,j=0,H=t.split(" "),q=ob.apply(this,[" ",a])[0];if(v=a.lineIndent===-1?H[0].length+2:a.lineIndent||0){var W=Array(v).join(" "),ee=[];H.map(function(fe){(fe=fe.split(/\s*\n/)).length>1?ee=ee.concat(fe.map(function(se,me){return(me&&se.length?`
`:"")+se})):ee.push(fe[0])}),H=ee,v=Yq.apply(this,[W,a])}for(l=0,c=H.length;l<c;l++){var oe=0;if(r=H[l],v&&r[0]==`
`&&(r=r.substr(1),oe=1),L+F+(j=(i=ob.apply(this,[r,a])).reduce(function(fe,se){return fe+se},0))>e||oe){if(j>e){for(n=Xq.apply(this,[r,i,e-(L+F),e]),x.push(n.shift()),x=[n.pop()];n.length;)N.push([n.shift()]);j=i.slice(r.length-(x[0]?x[0].length:0)).reduce(function(fe,se){return fe+se},0)}else x=[r];N.push(x),L=j+v,F=q}else x.push(r),L+=F+j,F=q}return R=v?function(fe,se){return(se?W:"")+fe.join(" ")}:function(fe){return fe.join(" ")},N.map(R)},j0.splitTextToSize=function(t,e,a){var r,i=(a=a||{}).fontSize||this.internal.getFontSize(),l=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var N=this.internal.getFont(x.fontName,x.fontStyle);return N.metadata.Unicode?{widths:N.metadata.Unicode.widths||{0:1},kerning:N.metadata.Unicode.kerning||{}}:{font:N.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/i;l.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/i:0,l.lineIndent=a.lineIndent;var n,v,R=[];for(n=0,v=r.length;n<v;n++)R=R.concat(Jq.apply(this,[r[n],c,l]));return R},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",a={},r={},i=0;i<e.length;i++)a[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var l=function(N){return"0x"+parseInt(N,10).toString(16)},c=t.__fontmetrics__.compress=function(N){var L,F,j,H,q=["{"];for(var W in N){if(L=N[W],isNaN(parseInt(W,10))?F="'"+W+"'":(W=parseInt(W,10),F=(F=l(W).slice(2)).slice(0,-1)+r[F.slice(-1)]),typeof L=="number")L<0?(j=l(L).slice(3),H="-"):(j=l(L).slice(2),H=""),j=H+j.slice(0,-1)+r[j.slice(-1)];else{if(Gs(L)!=="object")throw new Error("Don't know what to do with value type "+Gs(L)+".");j=c(L)}q.push(F+j)}return q.push("}"),q.join("")},n=t.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var L,F,j,H,q={},W=1,ee=q,oe=[],fe="",se="",me=N.length-1,ge=1;ge<me;ge+=1)(H=N[ge])=="'"?L?(j=L.join(""),L=void 0):L=[]:L?L.push(H):H=="{"?(oe.push([ee,j]),ee={},j=void 0):H=="}"?((F=oe.pop())[0][F[1]]=ee,j=void 0,ee=F[0]):H=="-"?W=-1:j===void 0?a.hasOwnProperty(H)?(fe+=a[H],j=parseInt(fe,16)*W,W=1,fe=""):fe+=H:a.hasOwnProperty(H)?(se+=a[H],ee[j]=parseInt(se,16)*W,W=1,j=void 0,se=""):se+=H;return q},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:n("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},R={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},x={Unicode:{"Courier-Oblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":n("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":n("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:n("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:n("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":n("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":n("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(N){var L=N.font,F=x.Unicode[L.postScriptName];F&&(L.metadata.Unicode={},L.metadata.Unicode.widths=F.widths,L.metadata.Unicode.kerning=F.kerning);var j=R.Unicode[L.postScriptName];j&&(L.metadata.Unicode.encoding=j,L.encoding=j.codePages[0])}])}(qn.API),function(t){var e=function(a){for(var r=a.length,i=new Uint8Array(r),l=0;l<r;l++)i[l]=a.charCodeAt(l);return i};t.API.events.push(["addFont",function(a){var r=void 0,i=a.font,l=a.instance;if(!i.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=l.existsFileInVFS(i.postScriptName)===!1?l.loadFile(i.postScriptName):l.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(NR(n)),c.metadata=t.API.TTFFont.open(n),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,r)}}])}(qn),function(t){function e(){return(Yn.canvg?Promise.resolve(Yn.canvg):kI(()=>import("./index.es-BxSNViyx.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load canvg: "+a))}).then(function(a){return a.default?a.default:a})}qn.API.addSvgAsImage=function(a,r,i,l,c,n,v,R){if(isNaN(r)||isNaN(i))throw ho.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(c))throw ho.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=l,x.height=c;var N=x.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,x.width,x.height);var L={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},F=this;return e().then(function(j){return j.fromString(N,a,L)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(L)}).then(function(){F.addImage(x.toDataURL("image/jpeg",1),r,i,l,c,v,R)})}}(),qn.API.putTotalPages=function(t){var e,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),a=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,a);return this},qn.API.viewerPreferences=function(t,e){var a;t=t||{},e=e||!1;var r,i,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},n=Object.keys(c),v=[],R=0,x=0,N=0;function L(j,H){var q,W=!1;for(q=0;q<j.length;q+=1)j[q]===H&&(W=!0);return W}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var F=n.length;for(N=0;N<F;N+=1)a[n[N]].value=a[n[N]].defaultValue,a[n[N]].explicitSet=!1}if(Gs(t)==="object"){for(i in t)if(l=t[i],L(n,i)&&l!==void 0){if(a[i].type==="boolean"&&typeof l=="boolean")a[i].value=l;else if(a[i].type==="name"&&L(a[i].valueSet,l))a[i].value=l;else if(a[i].type==="integer"&&Number.isInteger(l))a[i].value=l;else if(a[i].type==="array"){for(R=0;R<l.length;R+=1)if(r=!0,l[R].length===1&&typeof l[R][0]=="number")v.push(String(l[R]-1));else if(l[R].length>1){for(x=0;x<l[R].length;x+=1)typeof l[R][x]!="number"&&(r=!1);r===!0&&v.push([l[R][0]-1,l[R][1]-1].join(" "))}a[i].value="["+v.join(" ")+"]"}else a[i].value=a[i].defaultValue;a[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,H=[];for(j in a)a[j].explicitSet===!0&&(a[j].type==="name"?H.push("/"+j+" /"+a[j].value):H.push("/"+j+" "+a[j].value));H.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+H.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),v=unescape(encodeURIComponent("</x:xmpmeta>")),R=l.length+c.length+n.length+i.length+v.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+R+" >>"),this.internal.write("stream"),this.internal.write(i+l+c+n+v),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",e)),this}}(qn.API),function(t){var e=t.API,a=e.pdfEscape16=function(l,c){for(var n,v=c.metadata.Unicode.widths,R=["","0","00","000","0000"],x=[""],N=0,L=l.length;N<L;++N){if(n=c.metadata.characterToGlyph(l.charCodeAt(N)),c.metadata.glyIdsUsed.push(n),c.metadata.toUnicode[n]=l.charCodeAt(N),v.indexOf(n)==-1&&(v.push(n),v.push([parseInt(c.metadata.widthOfGlyph(n),10)])),n=="0")return x.join("");n=n.toString(16),x.push(R[4-n.length],n)}return x.join("")},r=function(l){var c,n,v,R,x,N,L;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,v=[],N=0,L=(n=Object.keys(l).sort(function(F,j){return F-j})).length;N<L;N++)c=n[N],v.length>=100&&(x+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar`,v=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(R=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),v.push("<"+c+"><"+R+">"));return v.length&&(x+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(c){var n=c.font,v=c.out,R=c.newObject,x=c.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="Identity-H"){for(var N=n.metadata.Unicode.widths,L=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),F="",j=0;j<L.length;j++)F+=String.fromCharCode(L[j]);var H=R();x({data:F,addLength1:!0,objectId:H}),v("endobj");var q=R();x({data:r(n.metadata.toUnicode),addLength1:!0,objectId:q}),v("endobj");var W=R();v("<<"),v("/Type /FontDescriptor"),v("/FontName /"+$0(n.fontName)),v("/FontFile2 "+H+" 0 R"),v("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),v("/Flags "+n.metadata.flags),v("/StemV "+n.metadata.stemV),v("/ItalicAngle "+n.metadata.italicAngle),v("/Ascent "+n.metadata.ascender),v("/Descent "+n.metadata.decender),v("/CapHeight "+n.metadata.capHeight),v(">>"),v("endobj");var ee=R();v("<<"),v("/Type /Font"),v("/BaseFont /"+$0(n.fontName)),v("/FontDescriptor "+W+" 0 R"),v("/W "+t.API.PDFObject.convert(N)),v("/CIDToGIDMap /Identity"),v("/DW 1000"),v("/Subtype /CIDFontType2"),v("/CIDSystemInfo"),v("<<"),v("/Supplement 0"),v("/Registry (Adobe)"),v("/Ordering ("+n.encoding+")"),v(">>"),v(">>"),v("endobj"),n.objectNumber=R(),v("<<"),v("/Type /Font"),v("/Subtype /Type0"),v("/ToUnicode "+q+" 0 R"),v("/BaseFont /"+$0(n.fontName)),v("/Encoding /"+n.encoding),v("/DescendantFonts ["+ee+" 0 R]"),v(">>"),v("endobj"),n.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(c){var n=c.font,v=c.out,R=c.newObject,x=c.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="WinAnsiEncoding"){for(var N=n.metadata.rawData,L="",F=0;F<N.length;F++)L+=String.fromCharCode(N[F]);var j=R();x({data:L,addLength1:!0,objectId:j}),v("endobj");var H=R();x({data:r(n.metadata.toUnicode),addLength1:!0,objectId:H}),v("endobj");var q=R();v("<<"),v("/Descent "+n.metadata.decender),v("/CapHeight "+n.metadata.capHeight),v("/StemV "+n.metadata.stemV),v("/Type /FontDescriptor"),v("/FontFile2 "+j+" 0 R"),v("/Flags 96"),v("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),v("/FontName /"+$0(n.fontName)),v("/ItalicAngle "+n.metadata.italicAngle),v("/Ascent "+n.metadata.ascender),v(">>"),v("endobj"),n.objectNumber=R();for(var W=0;W<n.metadata.hmtx.widths.length;W++)n.metadata.hmtx.widths[W]=parseInt(n.metadata.hmtx.widths[W]*(1e3/n.metadata.head.unitsPerEm));v("<</Subtype/TrueType/Type/Font/ToUnicode "+H+" 0 R/BaseFont/"+$0(n.fontName)+"/FontDescriptor "+q+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),v("endobj"),n.isAlreadyPutted=!0}})(l)}]);var i=function(l){var c,n=l.text||"",v=l.x,R=l.y,x=l.options||{},N=l.mutex||{},L=N.pdfEscape,F=N.activeFontKey,j=N.fonts,H=F,q="",W=0,ee="",oe=j[H].encoding;if(j[H].encoding!=="Identity-H")return{text:n,x:v,y:R,options:x,mutex:N};for(ee=n,H=F,Array.isArray(n)&&(ee=n[0]),W=0;W<ee.length;W+=1)j[H].metadata.hasOwnProperty("cmap")&&(c=j[H].metadata.cmap.unicode.codeMap[ee[W].charCodeAt(0)]),c||ee[W].charCodeAt(0)<256&&j[H].metadata.hasOwnProperty("Unicode")?q+=ee[W]:q+="";var fe="";return parseInt(H.slice(1))<14||oe==="WinAnsiEncoding"?fe=L(q,H).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):oe==="Identity-H"&&(fe=a(q,j[H])),N.isHex=!0,{text:fe,x:v,y:R,options:x,mutex:N}};e.events.push(["postProcessText",function(l){var c=l.text||"",n=[],v={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var R=0;for(R=0;R<c.length;R+=1)Array.isArray(c[R])&&c[R].length===3?n.push([i(Object.assign({},v,{text:c[R][0]})).text,c[R][1],c[R][2]]):n.push(i(Object.assign({},v,{text:c[R]})).text);l.text=n}else l.text=i(Object.assign({},v,{text:c})).text}])}(qn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0},t.addFileToVFS=function(a,r){return e.call(this),this.internal.vFS[a]=r,this},t.getFileFromVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(qn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,l,c,n,v,R,x,N=e,L=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],F=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},H={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},q=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],W=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ee=!1,oe=0;this.__bidiEngine__={};var fe=function(ae){var _e=ae.charCodeAt(),Ie=_e>>8,xe=H[Ie];return xe!==void 0?N[256*xe+(255&_e)]:Ie===252||Ie===253?"AL":W.test(Ie)?"L":Ie===8?"R":"N"},se=function(ae){for(var _e,Ie=0;Ie<ae.length;Ie++){if((_e=fe(ae.charAt(Ie)))==="L")return!1;if(_e==="R")return!0}return!1},me=function(ae,_e,Ie,xe){var ze,Me,je,Ue,Qe=_e[xe];switch(Qe){case"L":case"R":ee=!1;break;case"N":case"AN":break;case"EN":ee&&(Qe="AN");break;case"AL":ee=!0,Qe="R";break;case"WS":Qe="N";break;case"CS":xe<1||xe+1>=_e.length||(ze=Ie[xe-1])!=="EN"&&ze!=="AN"||(Me=_e[xe+1])!=="EN"&&Me!=="AN"?Qe="N":ee&&(Me="AN"),Qe=Me===ze?Me:"N";break;case"ES":Qe=(ze=xe>0?Ie[xe-1]:"B")==="EN"&&xe+1<_e.length&&_e[xe+1]==="EN"?"EN":"N";break;case"ET":if(xe>0&&Ie[xe-1]==="EN"){Qe="EN";break}if(ee){Qe="N";break}for(je=xe+1,Ue=_e.length;je<Ue&&_e[je]==="ET";)je++;Qe=je<Ue&&_e[je]==="EN"?"EN":"N";break;case"NSM":if(c&&!n){for(Ue=_e.length,je=xe+1;je<Ue&&_e[je]==="NSM";)je++;if(je<Ue){var ke=ae[xe],Ge=ke>=1425&&ke<=2303||ke===64286;if(ze=_e[je],Ge&&(ze==="R"||ze==="AL")){Qe="R";break}}}Qe=xe<1||(ze=_e[xe-1])==="B"?"N":Ie[xe-1];break;case"B":ee=!1,i=!0,Qe=oe;break;case"S":l=!0,Qe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ee=!1;break;case"BN":Qe="N"}return Qe},ge=function(ae,_e,Ie){var xe=ae.split("");return Ie&&Re(xe,Ie,{hiLevel:oe}),xe.reverse(),_e&&_e.reverse(),xe.join("")},Re=function(ae,_e,Ie){var xe,ze,Me,je,Ue,Qe=-1,ke=ae.length,Ge=0,Se=[],Te=oe?F:L,qe=[];for(ee=!1,i=!1,l=!1,ze=0;ze<ke;ze++)qe[ze]=fe(ae[ze]);for(Me=0;Me<ke;Me++){if(Ue=Ge,Se[Me]=me(ae,qe,Se,Me),xe=240&(Ge=Te[Ue][j[Se[Me]]]),Ge&=15,_e[Me]=je=Te[Ge][5],xe>0)if(xe===16){for(ze=Qe;ze<Me;ze++)_e[ze]=1;Qe=-1}else Qe=-1;if(Te[Ge][6])Qe===-1&&(Qe=Me);else if(Qe>-1){for(ze=Qe;ze<Me;ze++)_e[ze]=je;Qe=-1}qe[Me]==="B"&&(_e[Me]=0),Ie.hiLevel|=je}l&&function(Ze,lt,st){for(var ht=0;ht<st;ht++)if(Ze[ht]==="S"){lt[ht]=oe;for(var He=ht-1;He>=0&&Ze[He]==="WS";He--)lt[He]=oe}}(qe,_e,ke)},we=function(ae,_e,Ie,xe,ze){if(!(ze.hiLevel<ae)){if(ae===1&&oe===1&&!i)return _e.reverse(),void(Ie&&Ie.reverse());for(var Me,je,Ue,Qe,ke=_e.length,Ge=0;Ge<ke;){if(xe[Ge]>=ae){for(Ue=Ge+1;Ue<ke&&xe[Ue]>=ae;)Ue++;for(Qe=Ge,je=Ue-1;Qe<je;Qe++,je--)Me=_e[Qe],_e[Qe]=_e[je],_e[je]=Me,Ie&&(Me=Ie[Qe],Ie[Qe]=Ie[je],Ie[je]=Me);Ge=Ue}Ge++}}},Ee=function(ae,_e,Ie){var xe=ae.split(""),ze={hiLevel:oe};return Ie||(Ie=[]),Re(xe,Ie,ze),function(Me,je,Ue){if(Ue.hiLevel!==0&&x)for(var Qe,ke=0;ke<Me.length;ke++)je[ke]===1&&(Qe=q.indexOf(Me[ke]))>=0&&(Me[ke]=q[Qe+1])}(xe,Ie,ze),we(2,xe,_e,Ie,ze),we(1,xe,_e,Ie,ze),xe.join("")};return this.__bidiEngine__.doBidiReorder=function(ae,_e,Ie){if(function(ze,Me){if(Me)for(var je=0;je<ze.length;je++)Me[je]=je;n===void 0&&(n=se(ze)),R===void 0&&(R=se(ze))}(ae,_e),c||!v||R)if(c&&v&&n^R)oe=n?1:0,ae=ge(ae,_e,Ie);else if(!c&&v&&R)oe=n?1:0,ae=Ee(ae,_e,Ie),ae=ge(ae,_e);else if(!c||n||v||R){if(c&&!v&&n^R)ae=ge(ae,_e),n?(oe=0,ae=Ee(ae,_e,Ie)):(oe=1,ae=Ee(ae,_e,Ie),ae=ge(ae,_e));else if(c&&n&&!v&&R)oe=1,ae=Ee(ae,_e,Ie),ae=ge(ae,_e);else if(!c&&!v&&n^R){var xe=x;n?(oe=1,ae=Ee(ae,_e,Ie),oe=0,x=!1,ae=Ee(ae,_e,Ie),x=xe):(oe=0,ae=Ee(ae,_e,Ie),ae=ge(ae,_e),oe=1,x=!1,ae=Ee(ae,_e,Ie),x=xe,ae=ge(ae,_e))}}else oe=0,ae=Ee(ae,_e,Ie);else oe=n?1:0,ae=Ee(ae,_e,Ie);return ae},this.__bidiEngine__.setOptions=function(ae){ae&&(c=ae.isInputVisual,v=ae.isOutputVisual,n=ae.isInputRtl,R=ae.isOutputRtl,x=ae.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var c=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,a.setOptions(l),Object.prototype.toString.call(i)==="[object Array]"){var n=0;for(c=[],n=0;n<i.length;n+=1)Object.prototype.toString.call(i[n])==="[object Array]"?c.push([a.doBidiReorder(i[n][0]),i[n][1],i[n][2]]):c.push([a.doBidiReorder(i[n])]);r.text=c}else r.text=a.doBidiReorder(i);a.setOptions({isInputVisual:!0})}])}(qn),qn.API.TTFFont=function(){function t(e){var a;if(this.rawData=e,a=this.contents=new tA(e),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new $Oe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new zOe(this.contents),this.head=new MOe(this),this.name=new UOe(this),this.cmap=new Dte(this),this.toUnicode={},this.hhea=new IOe(this),this.maxp=new BOe(this),this.hmtx=new jOe(this),this.post=new FOe(this),this.os2=new LOe(this),this.loca=new HOe(this),this.glyf=new GOe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,a,r,i,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,n,v,R;for(R=[],c=0,n=(v=this.bbox).length;c<n;c++)e=v[c],R.push(Math.round(e*this.scaleFactor));return R}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(a=i>>16))!=0&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var a;return((a=this.cmap.unicode)!=null?a.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*a},t.prototype.widthOfString=function(e,a,r){var i,l,c,n;for(c=0,l=0,n=(e=""+e).length;0<=n?l<n:l>n;l=0<=n?++l:--l)i=e.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/a)||0;return c*(a/1e3)},t.prototype.lineHeight=function(e,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Jp,tA=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var a,r;for(r=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var a,r,i;for(i=[],a=0,r=e.length;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push(this.writeByte(e.charCodeAt(a)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,a,r,i,l,c,n,v;return e=this.readByte(),a=this.readByte(),r=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),n=this.readByte(),v=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^l)+65536*(255^c)+256*(255^n)+(255^v)+1):72057594037927940*e+281474976710656*a+1099511627776*r+4294967296*i+16777216*l+65536*c+256*n+v},t.prototype.writeLongLong=function(e){var a,r;return a=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var a,r;for(a=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)a.push(this.readByte());return a},t.prototype.write=function(e){var a,r,i,l;for(l=[],r=0,i=e.length;r<i;r++)a=e[r],l.push(this.writeByte(a));return l},t}(),zOe=function(){var t;function e(a){var r,i,l;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},i=0,l=this.tableCount;0<=l?i<l:i>l;i=0<=l?++i:--i)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(a){var r,i,l,c,n,v,R,x,N,L,F,j,H;for(H in F=Object.keys(a).length,v=Math.log(2),N=16*Math.floor(Math.log(F)/v),c=Math.floor(N/v),x=16*F-N,(i=new tA).writeInt(this.scalarType),i.writeShort(F),i.writeShort(N),i.writeShort(c),i.writeShort(x),l=16*F,R=i.pos+l,n=null,j=[],a)for(L=a[H],i.writeString(H),i.writeInt(t(L)),i.writeInt(R),i.writeInt(L.length),j=j.concat(L),H==="head"&&(n=R),R+=L.length;R%4;)j.push(0),R++;return i.write(j),r=2981146554-t(i.data),i.pos=n+8,i.writeUInt32(r),i.data},t=function(a){var r,i,l,c;for(a=Mte.call(a);a.length%4;)a.push(0);for(l=new tA(a),i=0,r=0,c=a.length;r<c;r=r+=4)i+=l.readUInt32();return 4294967295&i},e}(),DOe={}.hasOwnProperty,Xm=function(t,e){for(var a in e)DOe.call(e,a)&&(t[a]=e[a]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Jp=function(){function t(e){var a;this.file=e,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var MOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="head",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},e.prototype.encode=function(a){var r;return(r=new tA).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},e}(),tH=function(){function t(e,a){var r,i,l,c,n,v,R,x,N,L,F,j,H,q,W,ee,oe;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=a+e.readInt(),N=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(v=0;v<256;++v)this.codeMap[v]=e.readByte();break;case 4:for(F=e.readUInt16(),L=F/2,e.pos+=6,l=function(){var fe,se;for(se=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)se.push(e.readUInt16());return se}(),e.pos+=2,H=function(){var fe,se;for(se=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)se.push(e.readUInt16());return se}(),R=function(){var fe,se;for(se=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)se.push(e.readUInt16());return se}(),x=function(){var fe,se;for(se=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)se.push(e.readUInt16());return se}(),i=(this.length-e.pos+this.offset)/2,n=function(){var fe,se;for(se=[],v=fe=0;0<=i?fe<i:fe>i;v=0<=i?++fe:--fe)se.push(e.readUInt16());return se}(),v=W=0,oe=l.length;W<oe;v=++W)for(q=l[v],r=ee=j=H[v];j<=q?ee<=q:ee>=q;r=j<=q?++ee:--ee)x[v]===0?c=r+R[v]:(c=n[x[v]/2+(r-j)-(L-v)]||0)!==0&&(c+=R[v]),this.codeMap[r]=65535&c}e.pos=N}return t.encode=function(e,a){var r,i,l,c,n,v,R,x,N,L,F,j,H,q,W,ee,oe,fe,se,me,ge,Re,we,Ee,ae,_e,Ie,xe,ze,Me,je,Ue,Qe,ke,Ge,Se,Te,qe,Ze,lt,st,ht,He,Ae,zt,kt;switch(xe=new tA,c=Object.keys(e).sort(function(ma,It){return ma-It}),a){case"macroman":for(H=0,q=function(){var ma=[];for(j=0;j<256;++j)ma.push(0);return ma}(),ee={0:0},l={},ze=0,Qe=c.length;ze<Qe;ze++)ee[He=e[i=c[ze]]]==null&&(ee[He]=++H),l[i]={old:e[i],new:ee[e[i]]},q[i]=ee[e[i]];return xe.writeUInt16(1),xe.writeUInt16(0),xe.writeUInt32(12),xe.writeUInt16(0),xe.writeUInt16(262),xe.writeUInt16(0),xe.write(q),{charMap:l,subtable:xe.data,maxGlyphID:H+1};case"unicode":for(_e=[],N=[],oe=0,ee={},r={},W=R=null,Me=0,ke=c.length;Me<ke;Me++)ee[se=e[i=c[Me]]]==null&&(ee[se]=++oe),r[i]={old:se,new:ee[se]},n=ee[se]-i,W!=null&&n===R||(W&&N.push(W),_e.push(i),R=n),W=i;for(W&&N.push(W),N.push(65535),_e.push(65535),Ee=2*(we=_e.length),Re=2*Math.pow(Math.log(we)/Math.LN2,2),L=Math.log(Re/2)/Math.LN2,ge=2*we-Re,v=[],me=[],F=[],j=je=0,Ge=_e.length;je<Ge;j=++je){if(ae=_e[j],x=N[j],ae===65535){v.push(0),me.push(0);break}if(ae-(Ie=r[ae].new)>=32768)for(v.push(0),me.push(2*(F.length+we-j)),i=Ue=ae;ae<=x?Ue<=x:Ue>=x;i=ae<=x?++Ue:--Ue)F.push(r[i].new);else v.push(Ie-ae),me.push(0)}for(xe.writeUInt16(3),xe.writeUInt16(1),xe.writeUInt32(12),xe.writeUInt16(4),xe.writeUInt16(16+8*we+2*F.length),xe.writeUInt16(0),xe.writeUInt16(Ee),xe.writeUInt16(Re),xe.writeUInt16(L),xe.writeUInt16(ge),st=0,Se=N.length;st<Se;st++)i=N[st],xe.writeUInt16(i);for(xe.writeUInt16(0),ht=0,Te=_e.length;ht<Te;ht++)i=_e[ht],xe.writeUInt16(i);for(Ae=0,qe=v.length;Ae<qe;Ae++)n=v[Ae],xe.writeUInt16(n);for(zt=0,Ze=me.length;zt<Ze;zt++)fe=me[zt],xe.writeUInt16(fe);for(kt=0,lt=F.length;kt<lt;kt++)H=F[kt],xe.writeUInt16(H);return{charMap:r,subtable:xe.data,maxGlyphID:oe+1}}},t}(),Dte=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="cmap",e.prototype.parse=function(a){var r,i,l;for(a.pos=this.offset,this.version=a.readUInt16(),l=a.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=l?i<l:i>l;i=0<=l?++i:--i)r=new tH(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(a,r){var i,l;return r==null&&(r="macroman"),i=tH.encode(a,r),(l=new tA).writeUInt16(0),l.writeUInt16(1),i.table=l.data.concat(i.subtable),i},e}(),IOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="hhea",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},e}(),LOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="OS/2",e.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(a.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(a.readInt());return i}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(a.readInt());return i}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},e}(),FOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="post",e.prototype.parse=function(a){var r,i,l;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:break;case 131072:var c;for(i=a.readUInt16(),this.glyphNameIndex=[],c=0;0<=i?c<i:c>i;c=0<=i?++c:--c)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],l=[];a.pos<this.offset+this.length;)r=a.readByte(),l.push(this.names.push(a.readString(r)));return l;case 151552:return i=a.readUInt16(),this.offsets=a.read(i);case 196608:break;case 262144:return this.map=(function(){var n,v,R;for(R=[],c=n=0,v=this.file.maxp.numGlyphs;0<=v?n<v:n>v;c=0<=v?++n:--n)R.push(a.readUInt32());return R}).call(this)}},e}(),kOe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},UOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="name",e.prototype.parse=function(a){var r,i,l,c,n,v,R,x,N,L,F;for(a.pos=this.offset,a.readShort(),r=a.readShort(),v=a.readShort(),i=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)i.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+v+a.readShort()});for(R={},c=N=0,L=i.length;N<L;c=++N)l=i[c],a.pos=l.offset,x=a.readString(l.length),n=new kOe(x,l),R[F=l.nameID]==null&&(R[F]=[]),R[l.nameID].push(n);this.strings=R,this.copyright=R[0],this.fontFamily=R[1],this.fontSubfamily=R[2],this.uniqueSubfamily=R[3],this.fontName=R[4],this.version=R[5];try{this.postscriptName=R[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=R[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=R[7],this.manufacturer=R[8],this.designer=R[9],this.description=R[10],this.vendorUrl=R[11],this.designerUrl=R[12],this.license=R[13],this.licenseUrl=R[14],this.preferredFamily=R[15],this.preferredSubfamily=R[17],this.compatibleFull=R[18],this.sampleText=R[19]},e}(),BOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="maxp",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},e}(),jOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="hmtx",e.prototype.parse=function(a){var r,i,l,c,n,v,R;for(a.pos=this.offset,this.metrics=[],r=0,v=this.file.hhea.numberOfMetrics;0<=v?r<v:r>v;r=0<=v?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,N;for(N=[],r=x=0;0<=l?x<l:x>l;r=0<=l?++x:--x)N.push(a.readInt16());return N}(),this.widths=(function(){var x,N,L,F;for(F=[],x=0,N=(L=this.metrics).length;x<N;x++)c=L[x],F.push(c.advance);return F}).call(this),i=this.widths[this.widths.length-1],R=[],r=n=0;0<=l?n<l:n>l;r=0<=l?++n:--n)R.push(this.widths.push(i));return R},e.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},e}(),Mte=[].slice,GOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(a){var r,i,l,c,n,v,R,x,N,L;return a in this.cache?this.cache[a]:(c=this.file.loca,r=this.file.contents,i=c.indexOf(a),(l=c.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+i,n=(v=new tA(r.read(l))).readShort(),x=v.readShort(),L=v.readShort(),R=v.readShort(),N=v.readShort(),this.cache[a]=n===-1?new qOe(v,x,L,R,N):new ZOe(v,n,x,L,R,N),this.cache[a]))},e.prototype.encode=function(a,r,i){var l,c,n,v,R;for(n=[],c=[],v=0,R=r.length;v<R;v++)l=a[r[v]],c.push(n.length),l&&(n=n.concat(l.encode(i)));return c.push(n.length),{table:n,offsets:c}},e}(),ZOe=function(){function t(e,a,r,i,l,c){this.raw=e,this.numberOfContours=a,this.xMin=r,this.yMin=i,this.xMax=l,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),qOe=function(){function t(e,a,r,i,l){var c,n;for(this.raw=e,this.xMin=a,this.yMin=r,this.xMax=i,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;n=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&n;)c.pos+=1&n?4:2,128&n?c.pos+=8:64&n?c.pos+=4:8&n&&(c.pos+=2)}return t.prototype.encode=function(){var e,a,r;for(a=new tA(Mte.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)a.pos=this.glyphOffsets[e];return a.data},t}(),HOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Xm(e,Jp),e.prototype.tag="loca",e.prototype.parse=function(a){var r,i;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=2)c.push(2*a.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=4)c.push(a.readUInt32());return c}).call(this)},e.prototype.indexOf=function(a){return this.offsets[a]},e.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},e.prototype.encode=function(a,r){for(var i=new Uint32Array(this.offsets.length),l=0,c=0,n=0;n<i.length;++n)if(i[n]=l,c<r.length&&r[c]==n){++c,i[n]=l;var v=this.offsets[n],R=this.offsets[n+1]-v;R>0&&(l+=R)}for(var x=new Array(4*i.length),N=0;N<i.length;++N)x[4*N+3]=255&i[N],x[4*N+2]=(65280&i[N])>>8,x[4*N+1]=(16711680&i[N])>>16,x[4*N]=(4278190080&i[N])>>24;return x},e}(),$Oe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,a,r,i,l;for(a in i=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[a],e[a]=i[r];return e},t.prototype.glyphsFor=function(e){var a,r,i,l,c,n,v;for(i={},c=0,n=e.length;c<n;c++)i[l=e[c]]=this.font.glyf.glyphFor(l);for(l in a=[],i)(r=i[l])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(l in v=this.glyphsFor(a))r=v[l],i[l]=r;return i},t.prototype.encode=function(e,a){var r,i,l,c,n,v,R,x,N,L,F,j,H,q,W;for(i in r=Dte.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),F={0:0},W=r.charMap)F[(v=W[i]).old]=v.new;for(j in L=r.maxGlyphID,c)j in F||(F[j]=L++);return x=function(ee){var oe,fe;for(oe in fe={},ee)fe[ee[oe]]=oe;return fe}(F),N=Object.keys(x).sort(function(ee,oe){return ee-oe}),H=function(){var ee,oe,fe;for(fe=[],ee=0,oe=N.length;ee<oe;ee++)n=N[ee],fe.push(x[n]);return fe}(),l=this.font.glyf.encode(c,H,F),R=this.font.loca.encode(l.offsets,H),q={cmap:this.font.cmap.raw(),glyf:l.table,loca:R,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(q["OS/2"]=this.font.os2.raw()),this.font.directory.encode(q)},t}();qn.API.PDFObject=function(){var t;function e(){}return t=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},e.convert=function(a){var r,i,l,c;if(Array.isArray(a))return"["+function(){var n,v,R;for(R=[],n=0,v=a.length;n<v;n++)r=a[n],R.push(e.convert(r));return R}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+t(a.getUTCFullYear(),4)+t(a.getUTCMonth(),2)+t(a.getUTCDate(),2)+t(a.getUTCHours(),2)+t(a.getUTCMinutes(),2)+t(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(i in l=["<<"],a)c=a[i],l.push("/"+i+" "+e.convert(c));return l.push(">>"),l.join(`
`)}return""+a},e}();const KOe=()=>{const[t,e]=le.useState("available"),[a,r]=le.useState("bike"),[i,l]=le.useState(null),[c,n]=le.useState([]),[v,R]=le.useState(null),[x,N]=le.useState(""),[L,F]=le.useState(!1),[j,H]=le.useState(!1),[q,W]=le.useState(null),[ee,oe]=le.useState(!1),[fe,se]=le.useState(""),[me,ge]=le.useState(""),[Re,we]=le.useState("all"),[Ee,ae]=le.useState(1),[_e]=le.useState(10);le.useEffect(()=>{Ie()},[]);const Ie=async()=>{const Ae=(await rs(Hn(Er,"bikes"))).docs.map(zt=>({id:zt.id,...zt.data()}));n(Ae)},xe=He=>{l(He.target.files[0])},ze=()=>{const He=c.filter(ma=>ma.bikeCategory==="Regular Bicycle").length+1,Ae=c.filter(ma=>ma.bikeCategory==="Electric Bicycle").length+1;return`${me==="Regular Bicycle"?"BK":"EBK"}-${String(me==="Regular Bicycle"?He:Ae).padStart(3,"0")}`},Me=He=>new Promise(Ae=>{const zt=new FileReader;zt.readAsDataURL(He),zt.onload=kt=>{const ma=new Image;ma.src=kt.target.result,ma.onload=()=>{const It=document.createElement("canvas"),Ht=It.getContext("2d");let _t=ma.width,ir=ma.height;const Ea=800;_t>ir&&_t>Ea?(ir=ir*Ea/_t,_t=Ea):ir>Ea&&(_t=_t*Ea/ir,ir=Ea),It.width=_t,It.height=ir,Ht.drawImage(ma,0,0,_t,ir),It.toBlob(Na=>{Ae(Na)},"image/jpeg",.6)}}}),je=async()=>{if(!i)return null;try{const He=await Me(i),Ae=`bikes/${Date.now()}_${i.name}`,zt=cte(),kt=ute(zt,Ae);return await ote(kt,He),await lte(kt)}catch(He){return console.error("Error uploading image:",He),null}},Ue=async He=>{He.preventDefault();const Ae=await je();if(!Ae){alert("Image upload failed. Try again.");return}const kt={bikeId:ze(),bikeName:fe,bikeCategory:me,bikeType:a,imageUrl:Ae,bikeStatus:"Available",isAvailable:!0,createdAt:new Date};try{await x_(Hn(Er,"bikes"),kt),alert("Bike added successfully!"),n([...c,kt]),F(!1),Ge()}catch(ma){console.error("Error adding bike:",ma)}},Qe=async He=>{He.preventDefault();const Ae=await je(),zt={bikeName:fe,bikeCategory:me,bikeType:a,bikeStatus:t,imageUrl:Ae||v.imageUrl};try{await Ad(Ss(Er,"bikes",v.id),zt),alert("Bike updated successfully!"),R(null),H(!1),Ie(),Ge()}catch(kt){console.error("Error updating bike:",kt)}},ke=(He,Ae)=>{Ae.stopPropagation(),R(He),se(He.bikeName),ge(He.bikeCategory),r(He.bikeType),e(He.bikeStatus),H(!0)},Ge=()=>{se(""),ge(""),r(""),l(null),e("Available"),R(null)},Se=async()=>{const He=new qn,Ae=40,zt=5,kt=3;let ma=10,It=10;for(let Ht=0;Ht<c.length;Ht++){const _t=c[Ht];try{const ir=await KNe.toDataURL(_t.id,{type:"image/jpeg"});ir?(He.text(`Bike ID: ${_t.bikeId}`,ma,It+Ae+5),He.addImage(ir,"JPEG",ma,It,Ae,Ae),ma+=Ae+zt,(Ht+1)%kt===0&&(ma=10,It+=Ae+20),It+Ae+20>He.internal.pageSize.height&&(He.addPage(),ma=10,It=10)):console.error("QR code generation failed for bike:",_t.bikeId)}catch(ir){console.error("Error generating QR code: ",ir)}}He.save("bike_qr_codes.pdf")},Te=He=>{N(He.target.value.toUpperCase()),ae(1)},qe=He=>{we(He.target.value),ae(1)},Ze=Ee*_e,lt=Ze-_e,st=Math.ceil(c.length/_e),ht=()=>({regularBikes:c.filter(He=>He.bikeCategory==="Regular Bicycle").length,electricBikes:c.filter(He=>He.bikeCategory==="Electric Bicycle").length,available:c.filter(He=>He.bikeStatus==="Available").length,inUse:c.filter(He=>He.bikeStatus==="In Use").length,toRepair:c.filter(He=>He.bikeStatus==="To Repair").length,toReplace:c.filter(He=>He.bikeStatus==="To Replace").length,retired:c.filter(He=>He.bikeStatus==="Retired").length});return $.jsxs(Kv,{children:[$.jsx(oA,{title:"Bike Management"}),$.jsxs("div",{className:"bike-management-container",children:[$.jsx("div",{className:"bike-management-header",children:$.jsx("h2",{children:"Bike Management"})}),$.jsxs("div",{className:"search-container",children:[$.jsx("input",{type:"text",placeholder:" Search by Bike ID (e.g., BK-001)...",className:"search-box",value:x,onChange:Te}),$.jsxs("button",{className:"add-bike-btn",onClick:()=>F(!0),children:[$.jsx(EL,{})," Add Bike"]}),$.jsx("button",{className:"generate-pdf-btn",onClick:Se,children:"Generate QR (PDF)"}),$.jsxs("div",{className:"sort-container",children:[$.jsx("label",{className:"sort-label",children:"Sort By:"}),$.jsxs("select",{value:Re,onChange:qe,className:"sort-dropdown",children:[$.jsx("option",{value:"all",children:"All Bikes"}),$.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),$.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"}),$.jsxs("optgroup",{label:"Status",children:[$.jsx("option",{value:"Available",children:"Available"}),$.jsx("option",{value:"In Use",children:"In Use"}),$.jsx("option",{value:"To Repair",children:"To Repair"}),$.jsx("option",{value:"To Replace",children:"To Replace"}),$.jsx("option",{value:"Retired",children:"Retired"})]})]})]})]}),L&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content",children:[$.jsx("h2",{children:"Adding New Bike"}),$.jsxs("form",{className:"bike-form",onSubmit:Ue,children:[$.jsx("div",{className:"upload-box",children:$.jsxs("label",{className:"upload-label",children:[$.jsx(JU,{})," Upload Bike Image",$.jsx("input",{type:"file",accept:"image/*",onChange:xe,required:!0})]})}),$.jsx("label",{children:"Bike Name:"}),$.jsx("input",{type:"text",value:fe,onChange:He=>se(He.target.value),required:!0}),$.jsx("label",{children:"Category of Bike:"}),$.jsxs("select",{value:me,onChange:He=>ge(He.target.value),required:!0,children:[$.jsx("option",{value:"",children:"Select Category"}),$.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),$.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),$.jsx("label",{children:"Bike Type:"}),$.jsxs("select",{value:a,onChange:He=>r(He.target.value),required:!0,children:[$.jsx("option",{value:"",children:"Select Bike Type"}),$.jsx("option",{value:"Road Bike",children:"Road Bike"}),$.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),$.jsx("option",{value:"City Bike",children:"City Bike"}),$.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),$.jsx("option",{value:"BMX",children:"BMX"}),$.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),$.jsxs("div",{className:"modal-buttons",children:[$.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),$.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>F(!1),children:"Cancel"})]})]})]})}),$.jsxs("div",{className:"bike-stats-overlay",children:[$.jsxs("div",{className:"stats-row",children:[$.jsxs("div",{className:"stat-card regular",children:[$.jsx("h3",{children:"Regular Bikes"}),$.jsx("p",{children:ht().regularBikes})]}),$.jsxs("div",{className:"stat-card electric",children:[$.jsx("h3",{children:"Electric Bikes"}),$.jsx("p",{children:ht().electricBikes})]}),$.jsxs("div",{className:"stat-card available",children:[$.jsx("h3",{children:"Available"}),$.jsx("p",{children:ht().available})]}),$.jsxs("div",{className:"stat-card in-use",children:[$.jsx("h3",{children:"In Use"}),$.jsx("p",{children:ht().inUse})]})]}),$.jsxs("div",{className:"stats-row",children:[$.jsxs("div",{className:"stat-card repair",children:[$.jsx("h3",{children:"To Repair"}),$.jsx("p",{children:ht().toRepair})]}),$.jsxs("div",{className:"stat-card replace",children:[$.jsx("h3",{children:"To Replace"}),$.jsx("p",{children:ht().toReplace})]}),$.jsxs("div",{className:"stat-card retired",children:[$.jsx("h3",{children:"Retired"}),$.jsx("p",{children:ht().retired})]}),$.jsxs("div",{className:"stat-card total",children:[$.jsx("h3",{children:"Total Bikes"}),$.jsx("p",{children:c.length})]})]})]}),$.jsx("div",{className:"bike-list",children:$.jsxs("table",{children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Bike Name"}),$.jsx("th",{children:"Bike ID"}),$.jsx("th",{children:"Category"}),$.jsx("th",{children:"Type"}),$.jsx("th",{children:"Image"}),$.jsx("th",{children:"Status"}),$.jsx("th",{children:"Action"})]})}),$.jsx("tbody",{children:c.filter(He=>He.bikeId.toUpperCase().includes(x)&&(Re==="all"||Re==="Regular Bicycle"&&He.bikeCategory==="Regular Bicycle"||Re==="Electric Bicycle"&&He.bikeCategory==="Electric Bicycle"||He.bikeStatus===Re)).slice(lt,Ze).map(He=>$.jsxs("tr",{onClick:()=>{W(He),oe(!0)},className:"clickable-row",children:[$.jsx("td",{children:He.bikeName||"No Name"}),$.jsx("td",{children:$.jsx("strong",{children:He.bikeId})}),$.jsx("td",{children:He.bikeCategory}),$.jsx("td",{children:He.bikeType}),$.jsx("td",{children:$.jsx("img",{src:He.imageUrl,alt:He.bikeName,className:"table-bike-image",onClick:Ae=>{Ae.stopPropagation(),W(He),oe(!0)}})}),$.jsx("td",{children:$.jsx("div",{className:`status-container status-${He.bikeStatus.replace(/\s+/g,"-")}`,children:He.bikeStatus})}),$.jsx("td",{children:$.jsx("button",{className:"edit-btn",onClick:Ae=>ke(He,Ae),children:$.jsx(vR,{})})})]},He.id))})]})}),ee&&q&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content",children:[$.jsx("h2",{children:"Bike Details"}),$.jsx("div",{className:"bike-image-container",children:$.jsx("img",{src:q.imageUrl,alt:"Bike",className:"bike-preview"})}),$.jsxs("p",{children:[$.jsx("strong",{children:"Bike Name:"})," ",q.bikeName]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Bike ID:"})," ",q.bikeId]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Category:"})," ",q.bikeCategory]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Bike Type:"})," ",q.bikeType]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Status:"})," ",q.bikeStatus]}),$.jsx("div",{className:"modal-buttons",children:$.jsx("button",{className:"cancel-btn",onClick:()=>oe(!1),children:"Close"})})]})}),j&&v&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content",children:[$.jsx("h2",{children:"Edit Bike"}),$.jsxs("form",{className:"bike-form",onSubmit:Qe,children:[$.jsxs("div",{className:"upload-box",children:[$.jsxs("label",{className:"upload-label",children:[$.jsx(JU,{})," Upload New Image",$.jsx("input",{type:"file",accept:"image/*",onChange:xe})]}),v.imageUrl&&$.jsx("img",{src:v.imageUrl,alt:"Current Bike",className:"bike-preview"})]}),$.jsx("label",{children:"Bike Name:"}),$.jsx("input",{type:"text",value:fe,onChange:He=>se(He.target.value),required:!0}),$.jsx("label",{children:"Category of Bike:"}),$.jsxs("select",{value:me,onChange:He=>ge(He.target.value),required:!0,children:[$.jsx("option",{value:"",children:"Select Category"}),$.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),$.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),$.jsx("label",{children:"Bike Type:"}),$.jsxs("select",{value:a,onChange:He=>r(He.target.value),required:!0,children:[$.jsx("option",{value:"",children:"Select Bike Type"}),$.jsx("option",{value:"Road Bike",children:"Road Bike"}),$.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),$.jsx("option",{value:"City Bike",children:"City Bike"}),$.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),$.jsx("option",{value:"BMX",children:"BMX"}),$.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),$.jsx("label",{children:"Status:"}),$.jsxs("select",{value:t,onChange:He=>e(He.target.value),required:!0,children:[$.jsx("option",{value:"Available",children:"Available"}),$.jsx("option",{value:"To Repair",children:"To Repair"}),$.jsx("option",{value:"To Replace",children:"To Replace"}),$.jsx("option",{value:"Retired",children:"Retired"})]}),$.jsxs("div",{className:"modal-buttons",children:[$.jsx("button",{type:"submit",className:"save-btn",children:"Update"}),$.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{H(!1),Ge()},children:"Cancel"})]})]})]})})]}),$.jsxs("div",{className:"pagination-controls",children:[$.jsx("button",{className:"pagination-button",onClick:()=>ae(Ee-1),disabled:Ee===1,children:"Previous"}),$.jsxs("span",{className:"pagination-info",children:["Page ",Ee," of ",st]}),$.jsx("button",{className:"pagination-button",onClick:()=>ae(Ee+1),disabled:Ee===st,children:"Next"})]})]})};function Ite(t,e){return function(){return t.apply(e,arguments)}}const{toString:WOe}=Object.prototype,{getPrototypeOf:j4}=Object,XP=(t=>e=>{const a=WOe.call(e);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Qp=t=>(t=t.toLowerCase(),e=>XP(e)===t),JP=t=>e=>typeof e===t,{isArray:b1}=Array,zT=JP("undefined");function YOe(t){return t!==null&&!zT(t)&&t.constructor!==null&&!zT(t.constructor)&&_f(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Lte=Qp("ArrayBuffer");function XOe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Lte(t.buffer),e}const JOe=JP("string"),_f=JP("function"),Fte=JP("number"),QP=t=>t!==null&&typeof t=="object",QOe=t=>t===!0||t===!1,Ob=t=>{if(XP(t)!=="object")return!1;const e=j4(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},eVe=Qp("Date"),tVe=Qp("File"),aVe=Qp("Blob"),rVe=Qp("FileList"),nVe=t=>QP(t)&&_f(t.pipe),iVe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||_f(t.append)&&((e=XP(t))==="formdata"||e==="object"&&_f(t.toString)&&t.toString()==="[object FormData]"))},sVe=Qp("URLSearchParams"),[oVe,lVe,uVe,cVe]=["ReadableStream","Request","Response","Headers"].map(Qp),dVe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function AC(t,e,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),b1(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const l=a?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let n;for(r=0;r<c;r++)n=l[r],e.call(null,t[n],n,t)}}function kte(t,e){e=e.toLowerCase();const a=Object.keys(t);let r=a.length,i;for(;r-- >0;)if(i=a[r],e===i.toLowerCase())return i;return null}const yv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ute=t=>!zT(t)&&t!==yv;function XI(){const{caseless:t}=Ute(this)&&this||{},e={},a=(r,i)=>{const l=t&&kte(e,i)||i;Ob(e[l])&&Ob(r)?e[l]=XI(e[l],r):Ob(r)?e[l]=XI({},r):b1(r)?e[l]=r.slice():e[l]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&AC(arguments[r],a);return e}const hVe=(t,e,a,{allOwnKeys:r}={})=>(AC(e,(i,l)=>{a&&_f(i)?t[l]=Ite(i,a):t[l]=i},{allOwnKeys:r}),t),fVe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),pVe=(t,e,a,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),a&&Object.assign(t.prototype,a)},mVe=(t,e,a,r)=>{let i,l,c;const n={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)c=i[l],(!r||r(c,t,e))&&!n[c]&&(e[c]=t[c],n[c]=!0);t=a!==!1&&j4(t)}while(t&&(!a||a(t,e))&&t!==Object.prototype);return e},gVe=(t,e,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=e.length;const r=t.indexOf(e,a);return r!==-1&&r===a},yVe=t=>{if(!t)return null;if(b1(t))return t;let e=t.length;if(!Fte(e))return null;const a=new Array(e);for(;e-- >0;)a[e]=t[e];return a},AVe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&j4(Uint8Array)),vVe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},_Ve=(t,e)=>{let a;const r=[];for(;(a=t.exec(e))!==null;)r.push(a);return r},wVe=Qp("HTMLFormElement"),RVe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,i){return r.toUpperCase()+i}),aH=(({hasOwnProperty:t})=>(e,a)=>t.call(e,a))(Object.prototype),TVe=Qp("RegExp"),Bte=(t,e)=>{const a=Object.getOwnPropertyDescriptors(t),r={};AC(a,(i,l)=>{let c;(c=e(i,l,t))!==!1&&(r[l]=c||i)}),Object.defineProperties(t,r)},CVe=t=>{Bte(t,(e,a)=>{if(_f(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(_f(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},SVe=(t,e)=>{const a={},r=i=>{i.forEach(l=>{a[l]=!0})};return b1(t)?r(t):r(String(t).split(e)),a},bVe=()=>{},xVe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function PVe(t){return!!(t&&_f(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const EVe=t=>{const e=new Array(10),a=(r,i)=>{if(QP(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const l=b1(r)?[]:{};return AC(r,(c,n)=>{const v=a(c,i+1);!zT(v)&&(l[n]=v)}),e[i]=void 0,l}}return r};return a(t,0)},NVe=Qp("AsyncFunction"),OVe=t=>t&&(QP(t)||_f(t))&&_f(t.then)&&_f(t.catch),jte=((t,e)=>t?setImmediate:e?((a,r)=>(yv.addEventListener("message",({source:i,data:l})=>{i===yv&&l===a&&r.length&&r.shift()()},!1),i=>{r.push(i),yv.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",_f(yv.postMessage)),VVe=typeof queueMicrotask<"u"?queueMicrotask.bind(yv):typeof process<"u"&&process.nextTick||jte,Fa={isArray:b1,isArrayBuffer:Lte,isBuffer:YOe,isFormData:iVe,isArrayBufferView:XOe,isString:JOe,isNumber:Fte,isBoolean:QOe,isObject:QP,isPlainObject:Ob,isReadableStream:oVe,isRequest:lVe,isResponse:uVe,isHeaders:cVe,isUndefined:zT,isDate:eVe,isFile:tVe,isBlob:aVe,isRegExp:TVe,isFunction:_f,isStream:nVe,isURLSearchParams:sVe,isTypedArray:AVe,isFileList:rVe,forEach:AC,merge:XI,extend:hVe,trim:dVe,stripBOM:fVe,inherits:pVe,toFlatObject:mVe,kindOf:XP,kindOfTest:Qp,endsWith:gVe,toArray:yVe,forEachEntry:vVe,matchAll:_Ve,isHTMLForm:wVe,hasOwnProperty:aH,hasOwnProp:aH,reduceDescriptors:Bte,freezeMethods:CVe,toObjectSet:SVe,toCamelCase:RVe,noop:bVe,toFiniteNumber:xVe,findKey:kte,global:yv,isContextDefined:Ute,isSpecCompliantForm:PVe,toJSONObject:EVe,isAsyncFn:NVe,isThenable:OVe,setImmediate:jte,asap:VVe};function pi(t,e,a,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),a&&(this.config=a),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Fa.inherits(pi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fa.toJSONObject(this.config),code:this.code,status:this.status}}});const Gte=pi.prototype,Zte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Zte[t]={value:t}});Object.defineProperties(pi,Zte);Object.defineProperty(Gte,"isAxiosError",{value:!0});pi.from=(t,e,a,r,i,l)=>{const c=Object.create(Gte);return Fa.toFlatObject(t,c,function(v){return v!==Error.prototype},n=>n!=="isAxiosError"),pi.call(c,t.message,e,a,r,i),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const zVe=null;function JI(t){return Fa.isPlainObject(t)||Fa.isArray(t)}function qte(t){return Fa.endsWith(t,"[]")?t.slice(0,-2):t}function rH(t,e,a){return t?t.concat(e).map(function(i,l){return i=qte(i),!a&&l?"["+i+"]":i}).join(a?".":""):e}function DVe(t){return Fa.isArray(t)&&!t.some(JI)}const MVe=Fa.toFlatObject(Fa,{},null,function(e){return/^is[A-Z]/.test(e)});function eE(t,e,a){if(!Fa.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,a=Fa.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(H,q){return!Fa.isUndefined(q[H])});const r=a.metaTokens,i=a.visitor||x,l=a.dots,c=a.indexes,v=(a.Blob||typeof Blob<"u"&&Blob)&&Fa.isSpecCompliantForm(e);if(!Fa.isFunction(i))throw new TypeError("visitor must be a function");function R(j){if(j===null)return"";if(Fa.isDate(j))return j.toISOString();if(!v&&Fa.isBlob(j))throw new pi("Blob is not supported. Use a Buffer instead.");return Fa.isArrayBuffer(j)||Fa.isTypedArray(j)?v&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function x(j,H,q){let W=j;if(j&&!q&&typeof j=="object"){if(Fa.endsWith(H,"{}"))H=r?H:H.slice(0,-2),j=JSON.stringify(j);else if(Fa.isArray(j)&&DVe(j)||(Fa.isFileList(j)||Fa.endsWith(H,"[]"))&&(W=Fa.toArray(j)))return H=qte(H),W.forEach(function(oe,fe){!(Fa.isUndefined(oe)||oe===null)&&e.append(c===!0?rH([H],fe,l):c===null?H:H+"[]",R(oe))}),!1}return JI(j)?!0:(e.append(rH(q,H,l),R(j)),!1)}const N=[],L=Object.assign(MVe,{defaultVisitor:x,convertValue:R,isVisitable:JI});function F(j,H){if(!Fa.isUndefined(j)){if(N.indexOf(j)!==-1)throw Error("Circular reference detected in "+H.join("."));N.push(j),Fa.forEach(j,function(W,ee){(!(Fa.isUndefined(W)||W===null)&&i.call(e,W,Fa.isString(ee)?ee.trim():ee,H,L))===!0&&F(W,H?H.concat(ee):[ee])}),N.pop()}}if(!Fa.isObject(t))throw new TypeError("data must be an object");return F(t),e}function nH(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function G4(t,e){this._pairs=[],t&&eE(t,this,e)}const Hte=G4.prototype;Hte.append=function(e,a){this._pairs.push([e,a])};Hte.toString=function(e){const a=e?function(r){return e.call(this,r,nH)}:nH;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function IVe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $te(t,e,a){if(!e)return t;const r=a&&a.encode||IVe;Fa.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let l;if(i?l=i(e,a):l=Fa.isURLSearchParams(e)?e.toString():new G4(e,a).toString(r),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class iH{constructor(){this.handlers=[]}use(e,a,r){return this.handlers.push({fulfilled:e,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fa.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Kte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LVe=typeof URLSearchParams<"u"?URLSearchParams:G4,FVe=typeof FormData<"u"?FormData:null,kVe=typeof Blob<"u"?Blob:null,UVe={isBrowser:!0,classes:{URLSearchParams:LVe,FormData:FVe,Blob:kVe},protocols:["http","https","file","blob","url","data"]},Z4=typeof window<"u"&&typeof document<"u",QI=typeof navigator=="object"&&navigator||void 0,BVe=Z4&&(!QI||["ReactNative","NativeScript","NS"].indexOf(QI.product)<0),jVe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",GVe=Z4&&window.location.href||"http://localhost",ZVe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Z4,hasStandardBrowserEnv:BVe,hasStandardBrowserWebWorkerEnv:jVe,navigator:QI,origin:GVe},Symbol.toStringTag,{value:"Module"})),wd={...ZVe,...UVe};function qVe(t,e){return eE(t,new wd.classes.URLSearchParams,Object.assign({visitor:function(a,r,i,l){return wd.isNode&&Fa.isBuffer(a)?(this.append(r,a.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function HVe(t){return Fa.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $Ve(t){const e={},a=Object.keys(t);let r;const i=a.length;let l;for(r=0;r<i;r++)l=a[r],e[l]=t[l];return e}function Wte(t){function e(a,r,i,l){let c=a[l++];if(c==="__proto__")return!0;const n=Number.isFinite(+c),v=l>=a.length;return c=!c&&Fa.isArray(i)?i.length:c,v?(Fa.hasOwnProp(i,c)?i[c]=[i[c],r]:i[c]=r,!n):((!i[c]||!Fa.isObject(i[c]))&&(i[c]=[]),e(a,r,i[c],l)&&Fa.isArray(i[c])&&(i[c]=$Ve(i[c])),!n)}if(Fa.isFormData(t)&&Fa.isFunction(t.entries)){const a={};return Fa.forEachEntry(t,(r,i)=>{e(HVe(r),i,a,0)}),a}return null}function KVe(t,e,a){if(Fa.isString(t))try{return(e||JSON.parse)(t),Fa.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const vC={transitional:Kte,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const r=a.getContentType()||"",i=r.indexOf("application/json")>-1,l=Fa.isObject(e);if(l&&Fa.isHTMLForm(e)&&(e=new FormData(e)),Fa.isFormData(e))return i?JSON.stringify(Wte(e)):e;if(Fa.isArrayBuffer(e)||Fa.isBuffer(e)||Fa.isStream(e)||Fa.isFile(e)||Fa.isBlob(e)||Fa.isReadableStream(e))return e;if(Fa.isArrayBufferView(e))return e.buffer;if(Fa.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return qVe(e,this.formSerializer).toString();if((n=Fa.isFileList(e))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return eE(n?{"files[]":e}:e,v&&new v,this.formSerializer)}}return l||i?(a.setContentType("application/json",!1),KVe(e)):e}],transformResponse:[function(e){const a=this.transitional||vC.transitional,r=a&&a.forcedJSONParsing,i=this.responseType==="json";if(Fa.isResponse(e)||Fa.isReadableStream(e))return e;if(e&&Fa.isString(e)&&(r&&!this.responseType||i)){const c=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(n){if(c)throw n.name==="SyntaxError"?pi.from(n,pi.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wd.classes.FormData,Blob:wd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fa.forEach(["delete","get","head","post","put","patch"],t=>{vC.headers[t]={}});const WVe=Fa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YVe=t=>{const e={};let a,r,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),a=c.substring(0,i).trim().toLowerCase(),r=c.substring(i+1).trim(),!(!a||e[a]&&WVe[a])&&(a==="set-cookie"?e[a]?e[a].push(r):e[a]=[r]:e[a]=e[a]?e[a]+", "+r:r)}),e},sH=Symbol("internals");function Qw(t){return t&&String(t).trim().toLowerCase()}function Vb(t){return t===!1||t==null?t:Fa.isArray(t)?t.map(Vb):String(t)}function XVe(t){const e=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)e[r[1]]=r[2];return e}const JVe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _D(t,e,a,r,i){if(Fa.isFunction(r))return r.call(this,e,a);if(i&&(e=a),!!Fa.isString(e)){if(Fa.isString(r))return e.indexOf(r)!==-1;if(Fa.isRegExp(r))return r.test(e)}}function QVe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,r)=>a.toUpperCase()+r)}function eze(t,e){const a=Fa.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(i,l,c){return this[r].call(this,e,i,l,c)},configurable:!0})})}let Fh=class{constructor(e){e&&this.set(e)}set(e,a,r){const i=this;function l(n,v,R){const x=Qw(v);if(!x)throw new Error("header name must be a non-empty string");const N=Fa.findKey(i,x);(!N||i[N]===void 0||R===!0||R===void 0&&i[N]!==!1)&&(i[N||v]=Vb(n))}const c=(n,v)=>Fa.forEach(n,(R,x)=>l(R,x,v));if(Fa.isPlainObject(e)||e instanceof this.constructor)c(e,a);else if(Fa.isString(e)&&(e=e.trim())&&!JVe(e))c(YVe(e),a);else if(Fa.isHeaders(e))for(const[n,v]of e.entries())l(v,n,r);else e!=null&&l(a,e,r);return this}get(e,a){if(e=Qw(e),e){const r=Fa.findKey(this,e);if(r){const i=this[r];if(!a)return i;if(a===!0)return XVe(i);if(Fa.isFunction(a))return a.call(this,i,r);if(Fa.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=Qw(e),e){const r=Fa.findKey(this,e);return!!(r&&this[r]!==void 0&&(!a||_D(this,this[r],r,a)))}return!1}delete(e,a){const r=this;let i=!1;function l(c){if(c=Qw(c),c){const n=Fa.findKey(r,c);n&&(!a||_D(r,r[n],n,a))&&(delete r[n],i=!0)}}return Fa.isArray(e)?e.forEach(l):l(e),i}clear(e){const a=Object.keys(this);let r=a.length,i=!1;for(;r--;){const l=a[r];(!e||_D(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const a=this,r={};return Fa.forEach(this,(i,l)=>{const c=Fa.findKey(r,l);if(c){a[c]=Vb(i),delete a[l];return}const n=e?QVe(l):String(l).trim();n!==l&&delete a[l],a[n]=Vb(i),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return Fa.forEach(this,(r,i)=>{r!=null&&r!==!1&&(a[i]=e&&Fa.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,a])=>e+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const r=new this(e);return a.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[sH]=this[sH]={accessors:{}}).accessors,i=this.prototype;function l(c){const n=Qw(c);r[n]||(eze(i,c),r[n]=!0)}return Fa.isArray(e)?e.forEach(l):l(e),this}};Fh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fa.reduceDescriptors(Fh.prototype,({value:t},e)=>{let a=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[a]=r}}});Fa.freezeMethods(Fh);function wD(t,e){const a=this||vC,r=e||a,i=Fh.from(r.headers);let l=r.data;return Fa.forEach(t,function(n){l=n.call(a,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function Yte(t){return!!(t&&t.__CANCEL__)}function x1(t,e,a){pi.call(this,t??"canceled",pi.ERR_CANCELED,e,a),this.name="CanceledError"}Fa.inherits(x1,pi,{__CANCEL__:!0});function Xte(t,e,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):e(new pi("Request failed with status code "+a.status,[pi.ERR_BAD_REQUEST,pi.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function tze(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function aze(t,e){t=t||10;const a=new Array(t),r=new Array(t);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(v){const R=Date.now(),x=r[l];c||(c=R),a[i]=v,r[i]=R;let N=l,L=0;for(;N!==i;)L+=a[N++],N=N%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),R-c<e)return;const F=x&&R-x;return F?Math.round(L*1e3/F):void 0}}function rze(t,e){let a=0,r=1e3/e,i,l;const c=(R,x=Date.now())=>{a=x,i=null,l&&(clearTimeout(l),l=null),t.apply(null,R)};return[(...R)=>{const x=Date.now(),N=x-a;N>=r?c(R,x):(i=R,l||(l=setTimeout(()=>{l=null,c(i)},r-N)))},()=>i&&c(i)]}const h2=(t,e,a=3)=>{let r=0;const i=aze(50,250);return rze(l=>{const c=l.loaded,n=l.lengthComputable?l.total:void 0,v=c-r,R=i(v),x=c<=n;r=c;const N={loaded:c,total:n,progress:n?c/n:void 0,bytes:v,rate:R||void 0,estimated:R&&n&&x?(n-c)/R:void 0,event:l,lengthComputable:n!=null,[e?"download":"upload"]:!0};t(N)},a)},oH=(t,e)=>{const a=t!=null;return[r=>e[0]({lengthComputable:a,total:t,loaded:r}),e[1]]},lH=t=>(...e)=>Fa.asap(()=>t(...e)),nze=wd.hasStandardBrowserEnv?((t,e)=>a=>(a=new URL(a,wd.origin),t.protocol===a.protocol&&t.host===a.host&&(e||t.port===a.port)))(new URL(wd.origin),wd.navigator&&/(msie|trident)/i.test(wd.navigator.userAgent)):()=>!0,ize=wd.hasStandardBrowserEnv?{write(t,e,a,r,i,l){const c=[t+"="+encodeURIComponent(e)];Fa.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),Fa.isString(r)&&c.push("path="+r),Fa.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function sze(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oze(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Jte(t,e,a){let r=!sze(e);return t&&(r||a==!1)?oze(t,e):e}const uH=t=>t instanceof Fh?{...t}:t;function Lv(t,e){e=e||{};const a={};function r(R,x,N,L){return Fa.isPlainObject(R)&&Fa.isPlainObject(x)?Fa.merge.call({caseless:L},R,x):Fa.isPlainObject(x)?Fa.merge({},x):Fa.isArray(x)?x.slice():x}function i(R,x,N,L){if(Fa.isUndefined(x)){if(!Fa.isUndefined(R))return r(void 0,R,N,L)}else return r(R,x,N,L)}function l(R,x){if(!Fa.isUndefined(x))return r(void 0,x)}function c(R,x){if(Fa.isUndefined(x)){if(!Fa.isUndefined(R))return r(void 0,R)}else return r(void 0,x)}function n(R,x,N){if(N in e)return r(R,x);if(N in t)return r(void 0,R)}const v={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:n,headers:(R,x,N)=>i(uH(R),uH(x),N,!0)};return Fa.forEach(Object.keys(Object.assign({},t,e)),function(x){const N=v[x]||i,L=N(t[x],e[x],x);Fa.isUndefined(L)&&N!==n||(a[x]=L)}),a}const Qte=t=>{const e=Lv({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:n}=e;e.headers=c=Fh.from(c),e.url=$te(Jte(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),n&&c.set("Authorization","Basic "+btoa((n.username||"")+":"+(n.password?unescape(encodeURIComponent(n.password)):"")));let v;if(Fa.isFormData(a)){if(wd.hasStandardBrowserEnv||wd.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((v=c.getContentType())!==!1){const[R,...x]=v?v.split(";").map(N=>N.trim()).filter(Boolean):[];c.setContentType([R||"multipart/form-data",...x].join("; "))}}if(wd.hasStandardBrowserEnv&&(r&&Fa.isFunction(r)&&(r=r(e)),r||r!==!1&&nze(e.url))){const R=i&&l&&ize.read(l);R&&c.set(i,R)}return e},lze=typeof XMLHttpRequest<"u",uze=lze&&function(t){return new Promise(function(a,r){const i=Qte(t);let l=i.data;const c=Fh.from(i.headers).normalize();let{responseType:n,onUploadProgress:v,onDownloadProgress:R}=i,x,N,L,F,j;function H(){F&&F(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(x),i.signal&&i.signal.removeEventListener("abort",x)}let q=new XMLHttpRequest;q.open(i.method.toUpperCase(),i.url,!0),q.timeout=i.timeout;function W(){if(!q)return;const oe=Fh.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),se={data:!n||n==="text"||n==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:oe,config:t,request:q};Xte(function(ge){a(ge),H()},function(ge){r(ge),H()},se),q=null}"onloadend"in q?q.onloadend=W:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(W)},q.onabort=function(){q&&(r(new pi("Request aborted",pi.ECONNABORTED,t,q)),q=null)},q.onerror=function(){r(new pi("Network Error",pi.ERR_NETWORK,t,q)),q=null},q.ontimeout=function(){let fe=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const se=i.transitional||Kte;i.timeoutErrorMessage&&(fe=i.timeoutErrorMessage),r(new pi(fe,se.clarifyTimeoutError?pi.ETIMEDOUT:pi.ECONNABORTED,t,q)),q=null},l===void 0&&c.setContentType(null),"setRequestHeader"in q&&Fa.forEach(c.toJSON(),function(fe,se){q.setRequestHeader(se,fe)}),Fa.isUndefined(i.withCredentials)||(q.withCredentials=!!i.withCredentials),n&&n!=="json"&&(q.responseType=i.responseType),R&&([L,j]=h2(R,!0),q.addEventListener("progress",L)),v&&q.upload&&([N,F]=h2(v),q.upload.addEventListener("progress",N),q.upload.addEventListener("loadend",F)),(i.cancelToken||i.signal)&&(x=oe=>{q&&(r(!oe||oe.type?new x1(null,t,q):oe),q.abort(),q=null)},i.cancelToken&&i.cancelToken.subscribe(x),i.signal&&(i.signal.aborted?x():i.signal.addEventListener("abort",x)));const ee=tze(i.url);if(ee&&wd.protocols.indexOf(ee)===-1){r(new pi("Unsupported protocol "+ee+":",pi.ERR_BAD_REQUEST,t));return}q.send(l||null)})},cze=(t,e)=>{const{length:a}=t=t?t.filter(Boolean):[];if(e||a){let r=new AbortController,i;const l=function(R){if(!i){i=!0,n();const x=R instanceof Error?R:this.reason;r.abort(x instanceof pi?x:new x1(x instanceof Error?x.message:x))}};let c=e&&setTimeout(()=>{c=null,l(new pi(`timeout ${e} of ms exceeded`,pi.ETIMEDOUT))},e);const n=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(R=>{R.unsubscribe?R.unsubscribe(l):R.removeEventListener("abort",l)}),t=null)};t.forEach(R=>R.addEventListener("abort",l));const{signal:v}=r;return v.unsubscribe=()=>Fa.asap(n),v}},dze=function*(t,e){let a=t.byteLength;if(a<e){yield t;return}let r=0,i;for(;r<a;)i=r+e,yield t.slice(r,i),r=i},hze=async function*(t,e){for await(const a of fze(t))yield*dze(a,e)},fze=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:a,value:r}=await e.read();if(a)break;yield r}}finally{await e.cancel()}},cH=(t,e,a,r)=>{const i=hze(t,e);let l=0,c,n=v=>{c||(c=!0,r&&r(v))};return new ReadableStream({async pull(v){try{const{done:R,value:x}=await i.next();if(R){n(),v.close();return}let N=x.byteLength;if(a){let L=l+=N;a(L)}v.enqueue(new Uint8Array(x))}catch(R){throw n(R),R}},cancel(v){return n(v),i.return()}},{highWaterMark:2})},tE=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",eae=tE&&typeof ReadableStream=="function",pze=tE&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),tae=(t,...e)=>{try{return!!t(...e)}catch{return!1}},mze=eae&&tae(()=>{let t=!1;const e=new Request(wd.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),dH=64*1024,e3=eae&&tae(()=>Fa.isReadableStream(new Response("").body)),f2={stream:e3&&(t=>t.body)};tE&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!f2[e]&&(f2[e]=Fa.isFunction(t[e])?a=>a[e]():(a,r)=>{throw new pi(`Response type '${e}' is not supported`,pi.ERR_NOT_SUPPORT,r)})})})(new Response);const gze=async t=>{if(t==null)return 0;if(Fa.isBlob(t))return t.size;if(Fa.isSpecCompliantForm(t))return(await new Request(wd.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Fa.isArrayBufferView(t)||Fa.isArrayBuffer(t))return t.byteLength;if(Fa.isURLSearchParams(t)&&(t=t+""),Fa.isString(t))return(await pze(t)).byteLength},yze=async(t,e)=>{const a=Fa.toFiniteNumber(t.getContentLength());return a??gze(e)},Aze=tE&&(async t=>{let{url:e,method:a,data:r,signal:i,cancelToken:l,timeout:c,onDownloadProgress:n,onUploadProgress:v,responseType:R,headers:x,withCredentials:N="same-origin",fetchOptions:L}=Qte(t);R=R?(R+"").toLowerCase():"text";let F=cze([i,l&&l.toAbortSignal()],c),j;const H=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let q;try{if(v&&mze&&a!=="get"&&a!=="head"&&(q=await yze(x,r))!==0){let se=new Request(e,{method:"POST",body:r,duplex:"half"}),me;if(Fa.isFormData(r)&&(me=se.headers.get("content-type"))&&x.setContentType(me),se.body){const[ge,Re]=oH(q,h2(lH(v)));r=cH(se.body,dH,ge,Re)}}Fa.isString(N)||(N=N?"include":"omit");const W="credentials"in Request.prototype;j=new Request(e,{...L,signal:F,method:a.toUpperCase(),headers:x.normalize().toJSON(),body:r,duplex:"half",credentials:W?N:void 0});let ee=await fetch(j);const oe=e3&&(R==="stream"||R==="response");if(e3&&(n||oe&&H)){const se={};["status","statusText","headers"].forEach(we=>{se[we]=ee[we]});const me=Fa.toFiniteNumber(ee.headers.get("content-length")),[ge,Re]=n&&oH(me,h2(lH(n),!0))||[];ee=new Response(cH(ee.body,dH,ge,()=>{Re&&Re(),H&&H()}),se)}R=R||"text";let fe=await f2[Fa.findKey(f2,R)||"text"](ee,t);return!oe&&H&&H(),await new Promise((se,me)=>{Xte(se,me,{data:fe,headers:Fh.from(ee.headers),status:ee.status,statusText:ee.statusText,config:t,request:j})})}catch(W){throw H&&H(),W&&W.name==="TypeError"&&/fetch/i.test(W.message)?Object.assign(new pi("Network Error",pi.ERR_NETWORK,t,j),{cause:W.cause||W}):pi.from(W,W&&W.code,t,j)}}),t3={http:zVe,xhr:uze,fetch:Aze};Fa.forEach(t3,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const hH=t=>`- ${t}`,vze=t=>Fa.isFunction(t)||t===null||t===!1,aae={getAdapter:t=>{t=Fa.isArray(t)?t:[t];const{length:e}=t;let a,r;const i={};for(let l=0;l<e;l++){a=t[l];let c;if(r=a,!vze(a)&&(r=t3[(c=String(a)).toLowerCase()],r===void 0))throw new pi(`Unknown adapter '${c}'`);if(r)break;i[c||"#"+l]=r}if(!r){const l=Object.entries(i).map(([n,v])=>`adapter ${n} `+(v===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(hH).join(`
`):" "+hH(l[0]):"as no adapter specified";throw new pi("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:t3};function RD(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new x1(null,t)}function fH(t){return RD(t),t.headers=Fh.from(t.headers),t.data=wD.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),aae.getAdapter(t.adapter||vC.adapter)(t).then(function(r){return RD(t),r.data=wD.call(t,t.transformResponse,r),r.headers=Fh.from(r.headers),r},function(r){return Yte(r)||(RD(t),r&&r.response&&(r.response.data=wD.call(t,t.transformResponse,r.response),r.response.headers=Fh.from(r.response.headers))),Promise.reject(r)})}const rae="1.8.4",aE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{aE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const pH={};aE.transitional=function(e,a,r){function i(l,c){return"[Axios v"+rae+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,n)=>{if(e===!1)throw new pi(i(c," has been removed"+(a?" in "+a:"")),pi.ERR_DEPRECATED);return a&&!pH[c]&&(pH[c]=!0,console.warn(i(c," has been deprecated since v"+a+" and will be removed in the near future"))),e?e(l,c,n):!0}};aE.spelling=function(e){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function _ze(t,e,a){if(typeof t!="object")throw new pi("options must be an object",pi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const l=r[i],c=e[l];if(c){const n=t[l],v=n===void 0||c(n,l,t);if(v!==!0)throw new pi("option "+l+" must be "+v,pi.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new pi("Unknown option "+l,pi.ERR_BAD_OPTION)}}const zb={assertOptions:_ze,validators:aE},xm=zb.validators;let Cv=class{constructor(e){this.defaults=e,this.interceptors={request:new iH,response:new iH}}async request(e,a){try{return await this._request(e,a)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,a){typeof e=="string"?(a=a||{},a.url=e):a=e||{},a=Lv(this.defaults,a);const{transitional:r,paramsSerializer:i,headers:l}=a;r!==void 0&&zb.assertOptions(r,{silentJSONParsing:xm.transitional(xm.boolean),forcedJSONParsing:xm.transitional(xm.boolean),clarifyTimeoutError:xm.transitional(xm.boolean)},!1),i!=null&&(Fa.isFunction(i)?a.paramsSerializer={serialize:i}:zb.assertOptions(i,{encode:xm.function,serialize:xm.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),zb.assertOptions(a,{baseUrl:xm.spelling("baseURL"),withXsrfToken:xm.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let c=l&&Fa.merge(l.common,l[a.method]);l&&Fa.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),a.headers=Fh.concat(c,l);const n=[];let v=!0;this.interceptors.request.forEach(function(H){typeof H.runWhen=="function"&&H.runWhen(a)===!1||(v=v&&H.synchronous,n.unshift(H.fulfilled,H.rejected))});const R=[];this.interceptors.response.forEach(function(H){R.push(H.fulfilled,H.rejected)});let x,N=0,L;if(!v){const j=[fH.bind(this),void 0];for(j.unshift.apply(j,n),j.push.apply(j,R),L=j.length,x=Promise.resolve(a);N<L;)x=x.then(j[N++],j[N++]);return x}L=n.length;let F=a;for(N=0;N<L;){const j=n[N++],H=n[N++];try{F=j(F)}catch(q){H.call(this,q);break}}try{x=fH.call(this,F)}catch(j){return Promise.reject(j)}for(N=0,L=R.length;N<L;)x=x.then(R[N++],R[N++]);return x}getUri(e){e=Lv(this.defaults,e);const a=Jte(e.baseURL,e.url,e.allowAbsoluteUrls);return $te(a,e.params,e.paramsSerializer)}};Fa.forEach(["delete","get","head","options"],function(e){Cv.prototype[e]=function(a,r){return this.request(Lv(r||{},{method:e,url:a,data:(r||{}).data}))}});Fa.forEach(["post","put","patch"],function(e){function a(r){return function(l,c,n){return this.request(Lv(n||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Cv.prototype[e]=a(),Cv.prototype[e+"Form"]=a(!0)});let wze=class nae{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(l){a=l});const r=this;this.promise.then(i=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](i);r._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(n=>{r.subscribe(n),l=n}).then(i);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,n){r.reason||(r.reason=new x1(l,c,n),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=r=>{e.abort(r)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new nae(function(i){e=i}),cancel:e}}};function Rze(t){return function(a){return t.apply(null,a)}}function Tze(t){return Fa.isObject(t)&&t.isAxiosError===!0}const a3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(a3).forEach(([t,e])=>{a3[e]=t});function iae(t){const e=new Cv(t),a=Ite(Cv.prototype.request,e);return Fa.extend(a,Cv.prototype,e,{allOwnKeys:!0}),Fa.extend(a,e,null,{allOwnKeys:!0}),a.create=function(i){return iae(Lv(t,i))},a}const Wl=iae(vC);Wl.Axios=Cv;Wl.CanceledError=x1;Wl.CancelToken=wze;Wl.isCancel=Yte;Wl.VERSION=rae;Wl.toFormData=eE;Wl.AxiosError=pi;Wl.Cancel=Wl.CanceledError;Wl.all=function(e){return Promise.all(e)};Wl.spread=Rze;Wl.isAxiosError=Tze;Wl.mergeConfig=Lv;Wl.AxiosHeaders=Fh;Wl.formToJSON=t=>Wte(Fa.isHTMLForm(t)?new FormData(t):t);Wl.getAdapter=aae.getAdapter;Wl.HttpStatusCode=a3;Wl.default=Wl;const{Axios:aMe,AxiosError:rMe,CanceledError:nMe,isCancel:iMe,CancelToken:sMe,VERSION:oMe,all:lMe,Cancel:uMe,isAxiosError:cMe,spread:dMe,toFormData:hMe,AxiosHeaders:fMe,HttpStatusCode:pMe,formToJSON:mMe,getAdapter:gMe,mergeConfig:yMe}=Wl,Cze="/ecpcaps/assets/bike_icon-CFICwI6a.png";ep.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const Sze=({onEditStation:t})=>{const[e,a]=le.useState(null),[r,i]=le.useState([]),[l,c]=le.useState(null),[n,v]=le.useState(!1),[R,x]=le.useState([]),[N,L]=le.useState(!0),[F,j]=le.useState([]),[H,q]=le.useState(""),[W,ee]=le.useState("all"),[oe,fe]=le.useState([]);le.useEffect(()=>{if(!e){const ge=new ep.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12});ge.on("load",()=>{a(ge)})}},[e]),le.useEffect(()=>e?(r.forEach(Re=>Re.remove()),(async()=>{try{const Re=await rs(Hn(Er,"stations")),we=await rs(Hn(Er,"admins")),Ee={};we.docs.forEach(_e=>{const Ie=_e.data();Ee[_e.id]={name:Ie.name,profilePhoto:Ie.profilePhoto}});const ae=[];if(Re.docs.forEach(_e=>{const Ie=_e.data(),xe=Ie.tanodAssigned||[],ze=Array.isArray(xe)?xe:[xe],Me={id:_e.id,...Ie,tanodAssigned:ze,tanodAssignedName:ze.map(je=>{var Ue;return((Ue=Ee[je])==null?void 0:Ue.name)||"Unknown"}).join(", "),tanodAssignedAvatar:ze.map(je=>{var Ue;return(Ue=Ee[je])==null?void 0:Ue.profilePhoto}).filter(je=>je)};if(Me.coordinates&&Array.isArray(Me.coordinates)&&Me.coordinates.length===2){const je=document.createElement("div");je.className="custom-marker";const Ue=document.createElement("div");Ue.className="station-name",Ue.textContent=Me.stationName,je.appendChild(Ue);const Qe=document.createElement("img");Qe.src=Cze,Qe.className="marker-icon",je.appendChild(Qe),je.addEventListener("click",()=>{c(Me),v(!0)});const ke=new ep.Marker(je).setLngLat([Me.coordinates[1],Me.coordinates[0]]).addTo(e);ae.push(ke)}}),i(ae),ae.length>0){const _e=new ep.LngLatBounds;Re.docs.forEach(Ie=>{const xe=Ie.data();xe.coordinates&&Array.isArray(xe.coordinates)&&xe.coordinates.length===2&&_e.extend([xe.coordinates[1],xe.coordinates[0]])}),e.fitBounds(_e,{padding:50})}}catch(Re){console.error("Error fetching stations:",Re)}})(),()=>{r.forEach(Re=>Re.remove())}):void 0,[e]);const se=async()=>{try{const Re=(await rs(Hn(Er,"admins"))).docs.map(we=>({id:we.id,...we.data()}));fe(Re)}catch(ge){console.error("Error fetching admins:",ge)}};le.useEffect(()=>{se()},[]);const me=({station:ge,onClose:Re})=>{const[we,Ee]=le.useState(!1),[ae,_e]=le.useState(!1),[Ie,xe]=le.useState(!1),[ze,Me]=le.useState([]),[je,Ue]=le.useState([]),[Qe,ke]=le.useState([]),[Ge,Se]=le.useState([]),[Te,qe]=le.useState(0),[Ze,lt]=le.useState(!1),[st,ht]=le.useState(!1),[He,Ae]=le.useState(!1),[zt,kt]=le.useState(null),[ma,It]=le.useState(!1),[Ht,_t]=le.useState([]),[ir,Ea]=le.useState(!1),[Na,Ja]=le.useState(!1),[cr,dr]=le.useState(null),[Sr,ka]=le.useState([]);le.useEffect(()=>{Gr(),dn(),Cn()},[ge.id]);const Gr=async()=>{try{const Xa=(await rs(Hn(Er,"bikes"))).docs.map(pr=>({id:pr.id,...pr.data()})).filter(pr=>pr.stationAssigned===ge.id);ke(Xa)}catch(ua){console.error("Error fetching station bikes:",ua)}},dn=async()=>{try{const Xa=(await rs(Hn(Er,"bikes"))).docs.map(pr=>({id:pr.id,...pr.data()})).filter(pr=>!pr.stationAssigned);Se(Xa)}catch(ua){console.error("Error fetching unassigned bikes:",ua)}},Cn=async()=>{try{const Xa=(await rs(Hn(Er,"admins"))).docs.map(pr=>({id:pr.id,...pr.data()})).filter(pr=>{var Mn;return!((Mn=ge.tanodAssigned)!=null&&Mn.includes(pr.id))&&!pr.stationAssignedTo});_t(Xa)}catch(ua){console.error("Error fetching unassigned admins:",ua)}},fn=async()=>{try{Ee(!0);const ua=ze.map(Xa=>Ad(Ss(Er,"bikes",Xa),{stationAssigned:null}));await Promise.all(ua),_e(!1),Me([]),Gr()}catch(ua){console.error("Error removing bikes:",ua),alert("Failed to remove bikes")}finally{Ee(!1)}},va=async()=>{try{Ee(!0);const ua=je.map(Xa=>Ad(Ss(Er,"bikes",Xa),{stationAssigned:ge.id}));await Promise.all(ua),xe(!1),Ue([]),Gr()}catch(ua){console.error("Error adding bikes:",ua),alert("Failed to add bikes")}finally{Ee(!1)}},Wa=async ua=>{try{Ee(!0);const Xa=ge.tanodAssigned||[];await Ad(Ss(Er,"stations",ge.id),{tanodAssigned:[...Xa,...ua]});const pr=ua.map(Mn=>Ad(Ss(Er,"admins",Mn),{stationAssignedTo:ge.id}));await Promise.all(pr),It(!1),window.location.reload()}catch(Xa){console.error("Error assigning admins:",Xa),alert("Failed to assign admins")}finally{Ee(!1)}};return $.jsx("div",{className:"map-modal-overlay",children:$.jsxs("div",{className:"map-modal-content large",children:[$.jsxs("div",{className:"modal-header",children:[$.jsxs("div",{className:"station-header",children:[$.jsx("h2",{children:ge.stationName}),$.jsx("p",{className:"station-address",children:ge.stationAddress})]}),$.jsx("button",{className:"close-button",onClick:Re,children:""})]}),$.jsxs("div",{className:"modal-body",children:[$.jsxs("div",{className:"admin-section",children:[$.jsxs("div",{className:"count-card",children:[$.jsxs("div",{className:"count-header",children:[$.jsx("h3",{children:"Station Admin"}),$.jsx("button",{className:"edit-btn",onClick:()=>It(!ma),children:$.jsx(vR,{})})]}),ma&&$.jsx("div",{className:"action-dropdown",children:$.jsx("button",{onClick:()=>{Ea(!0),Ja(!1),It(!1),Cn()},children:"Add Admin"})})]}),$.jsx("div",{className:"admin-content",children:ir?$.jsxs("div",{className:"admin-list",children:[$.jsx("h4",{children:"Select Admin to Assign"}),$.jsx("div",{className:"admin-grid",children:Ht.map(ua=>$.jsxs("div",{className:"admin-card",children:[$.jsx("input",{type:"checkbox",className:"admin-checkbox",checked:Sr.includes(ua.id),onChange:Xa=>{Xa.target.checked?ka([...Sr,ua.id]):ka(Sr.filter(pr=>pr!==ua.id))}}),$.jsx("img",{src:ua.profilePhoto||"/default-avatar.png",alt:ua.name,className:"admin-photo"}),$.jsx("span",{className:"admin-name",children:ua.name})]},ua.id))}),$.jsxs("div",{className:"action-buttons",children:[$.jsx("button",{className:"save-btn",onClick:()=>{Sr.length>0&&Wa(Sr)},disabled:Sr.length===0||we,children:we?"Saving...":"Save Changes"}),$.jsx("button",{className:"discard-btn",onClick:()=>{Ea(!1),ka([])},children:"Discard Changes"})]})]}):$.jsx("div",{className:"admin-profile",children:Array.isArray(ge.tanodAssigned)&&ge.tanodAssigned.length>0?ge.tanodAssigned.map(ua=>{const Xa=oe.find(pr=>pr.id===ua);return $.jsxs("div",{className:"admin-avatar",children:[$.jsx("img",{src:(Xa==null?void 0:Xa.profilePhoto)||"/default-avatar.png",alt:Xa==null?void 0:Xa.name}),$.jsx("span",{children:(Xa==null?void 0:Xa.name)||"Unknown Admin"})]},ua)}):$.jsx("div",{className:"no-admin",children:$.jsx("span",{children:"No Admin Assigned"})})})})]}),$.jsxs("div",{className:"bikes-section",children:[$.jsxs("div",{className:"bikes-header-section",children:[$.jsx("h3",{children:"Station Bikes"}),$.jsx("div",{className:"counts-section",children:$.jsxs("div",{className:"count-cards",children:[$.jsxs("div",{className:"count-card",children:[$.jsxs("div",{className:"count-header",children:[$.jsxs("span",{children:["Regular Bikes:"," ",Qe.filter(ua=>ua.bikeCategory==="Regular Bicycle").length]}),$.jsx("button",{className:"edit-btn",onClick:()=>ht(!st),children:$.jsx(vR,{})})]}),st&&$.jsxs("div",{className:"action-dropdown",children:[$.jsx("button",{onClick:()=>{xe(!0),_e(!1),kt("Regular"),ht(!1)},children:"Add Bikes"}),$.jsx("button",{onClick:()=>{_e(!0),xe(!1),kt("Regular"),ht(!1)},children:"Remove Bikes"})]})]}),$.jsxs("div",{className:"count-card",children:[$.jsxs("div",{className:"count-header",children:[$.jsxs("span",{children:["E-Bikes:"," ",Qe.filter(ua=>ua.bikeCategory==="Electric Bicycle").length]}),$.jsx("button",{className:"edit-btn",onClick:()=>Ae(!He),children:$.jsx(vR,{})})]}),He&&$.jsxs("div",{className:"action-dropdown",children:[$.jsx("button",{onClick:()=>{xe(!0),_e(!1),kt("Electric"),Ae(!1)},children:"Add E-Bikes"}),$.jsx("button",{onClick:()=>{_e(!0),xe(!1),kt("Electric"),Ae(!1)},children:"Remove E-Bikes"})]})]})]})})]}),$.jsx("div",{className:"bikes-content",children:$.jsx("div",{className:"bikes-grid",children:(ae||Ie?ae?Qe.filter(ua=>zt==="Regular"?ua.bikeCategory==="Regular Bicycle":ua.bikeCategory==="Electric Bicycle"):Ge.filter(ua=>zt==="Regular"?ua.bikeCategory==="Regular Bicycle":ua.bikeCategory==="Electric Bicycle"):Qe).slice(Te*6,(Te+1)*6).map(ua=>$.jsxs("div",{className:"bike-card",children:[(ae||Ie)&&$.jsx("input",{type:"checkbox",className:"bike-checkbox",checked:ae?ze.includes(ua.id):je.includes(ua.id),onChange:Xa=>{const pr=ae?Me:Ue,Mn=ae?ze:je;Xa.target.checked?pr([...Mn,ua.id]):pr(Mn.filter(Sn=>Sn!==ua.id))}}),$.jsx("img",{src:ua.imageUrl||"/default-bike.png",alt:ua.bikeName}),$.jsxs("div",{className:"bike-info",children:[$.jsx("span",{className:"bike-id",children:ua.bikeId}),$.jsx("span",{className:"bike-name",children:ua.bikeName})]})]},ua.id))})}),$.jsxs("div",{className:"bikes-footer",children:[$.jsxs("div",{className:"pagination",children:[$.jsx("button",{onClick:()=>qe(ua=>ua-1),disabled:Te===0,className:"page-btn",children:$.jsx(Ofe,{})}),$.jsxs("span",{children:["Page ",Te+1]}),$.jsx("button",{onClick:()=>qe(ua=>ua+1),disabled:(Te+1)*6>=(ae?Qe.length:Ie?Ge.length:Qe.length),className:"page-btn",children:$.jsx(Vfe,{})})]}),(ae||Ie)&&$.jsxs("div",{className:"action-buttons",children:[$.jsx("button",{className:"save-btn",onClick:ae?fn:va,disabled:we||(ae?ze.length===0:je.length===0),children:we?"Saving...":"Save Changes"}),$.jsx("button",{className:"discard-btn",onClick:()=>{_e(!1),xe(!1),Me([]),Ue([]),kt(null)},children:"Discard Changes"})]})]})]})]})]})})};return $.jsxs("div",{className:"map-container",children:[$.jsx("div",{id:"map",className:"map-element"}),n&&$.jsx(me,{station:l,onClose:()=>v(!1)})]})};ep.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const bze=({onSelectLocation:t,isSelectingLocation:e})=>{const a=le.useRef(null),r=le.useRef(null),i=le.useRef(null);return le.useEffect(()=>{if(!r.current)return r.current=new ep.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),()=>{r.current&&(r.current.remove(),r.current=null)}},[]),le.useEffect(()=>{if(!r.current)return;const l=c=>{e&&(i.current&&i.current.remove(),i.current=new ep.Marker({draggable:!0,color:"#FF0000",scale:.8}).setLngLat([c.lngLat.lng,c.lngLat.lat]).addTo(r.current),i.current.on("dragend",()=>{const n=i.current.getLngLat();t([n.lat,n.lng])}),t([c.lngLat.lat,c.lngLat.lng]))};return e?(r.current.getCanvas().style.cursor="crosshair",r.current.on("click",l)):(r.current.getCanvas().style.cursor="",r.current.off("click",l)),()=>{r.current&&(r.current.off("click",l),r.current.getCanvas().style.cursor=""),i.current&&(i.current.remove(),i.current=null)}},[e,t]),$.jsx("div",{ref:a,className:"add-station-map"})},xze=()=>{const[t,e]=le.useState([]),[a,r]=le.useState([]),[i,l]=le.useState(!1),[c,n]=le.useState(!1),[v,R]=le.useState(null),[x,N]=le.useState(!1),[L,F]=le.useState(null),[j,H]=le.useState(""),[q,W]=le.useState(""),[ee,oe]=le.useState(""),[fe,se]=le.useState(""),[me,ge]=le.useState([]),[Re,we]=le.useState([]),[Ee,ae]=le.useState([]),[_e,Ie]=le.useState([]),[xe,ze]=le.useState(!1),[Me,je]=le.useState(!1),[Ue,Qe]=le.useState(!1),[ke,Ge]=le.useState(!1),[Se,Te]=le.useState([]),[qe,Ze]=le.useState([]),[lt,st]=le.useState(!1),[ht,He]=le.useState(!1),[Ae,zt]=le.useState("");le.useEffect(()=>{kt(),ma(),It(),Ht()},[]);const kt=async()=>{try{const Wa=(await rs(Hn(Er,"admins"))).docs.map(ua=>({id:ua.id,...ua.data()}));Ze(Wa)}catch(va){console.error("Error fetching all admins:",va)}},ma=async()=>{try{const ua=(await rs(Hn(Er,"admins"))).docs.map(Xa=>({id:Xa.id,...Xa.data()})).filter(Xa=>!Xa.stationAssignedTo);Te(ua)}catch(va){console.error("Error fetching unassigned admins:",va)}},It=async()=>{try{const va=await rs(Hn(Er,"admins")),Wa={};va.docs.forEach(hn=>{const $r=hn.data();Wa[hn.id]=$r.name});const Xa=(await rs(Hn(Er,"stations"))).docs.map(hn=>{const $r=hn.data(),br=$r.tanodAssigned||[],$i=Array.isArray(br)?br:[br];return{id:hn.id,...$r,tanodAssignedID:$i,tanodAssignedName:$i.map(zi=>Wa[zi]||"Unknown").join(", ")||"Not Assigned"}}),Mn=(await rs(Hn(Er,"bikes"))).docs.map(hn=>({id:hn.id,...hn.data()})),Sn=Xa.map(hn=>{const $r=Mn.filter($i=>$i.stationAssigned===hn.id&&$i.bikeCategory==="Regular Bicycle"&&$i.bikeStatus==="Available"&&$i.isAvailable===!0).length,br=Mn.filter($i=>$i.stationAssigned===hn.id&&$i.bikeCategory==="Electric Bicycle"&&$i.bikeStatus==="Available"&&$i.isAvailable===!0).length;return{...hn,totalRegularBikes:$r,totalElectricBikes:br}});e(Sn)}catch(va){console.error("Error fetching stations:",va)}},Ht=async()=>{const Wa=(await rs(Hn(Er,"bikes"))).docs.map(Xa=>({id:Xa.id,...Xa.data()})),ua=Wa.filter(Xa=>!Xa.stationAssigned&&Xa.bikeStatus==="Available"&&Xa.isAvailable===!0);r(Wa),ae(ua.filter(Xa=>Xa.bikeCategory==="Regular Bicycle")),Ie(ua.filter(Xa=>Xa.bikeCategory==="Electric Bicycle"))},_t=async va=>{if(window.confirm("Are you sure you want to delete this station?"))try{const Wa=Ss(Er,"stations",va),Xa=(await Xf(Wa)).data(),pr=(Xa==null?void 0:Xa.tanodAssigned)||[],Sn=(Array.isArray(pr)?pr:[pr]).map(hn=>Ad(Ss(Er,"admins",hn),{stationAssignedTo:null}));await Promise.all(Sn),await PL(Wa)}catch(Wa){console.error("Error deleting station:",Wa)}},ir=async va=>{R(va),H(va.stationName||""),W(va.stationAddress||""),se(va.coordinates||""),oe(va.tanodAssignedID||""),n(!0);const ua=(await rs(Hn(Er,"bikes"))).docs.map(Xa=>({id:Xa.id,...Xa.data()}));ge(ua.filter(Xa=>Xa.bikeCategory==="Regular Bicycle"&&Xa.stationAssigned===va.id).map(Xa=>Xa.id)),we(ua.filter(Xa=>Xa.bikeCategory==="Electric Bicycle"&&Xa.stationAssigned===va.id).map(Xa=>Xa.id)),Ht()},Ea=()=>{R(null),H(""),W(""),se(""),oe(""),ge([]),we([]),st(!1),l(!0)},Na=async(va,Wa)=>{try{const ua=await Wl.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${va}&lon=${Wa}`);W(ua.data.display_name||"Unknown Address")}catch(ua){console.error("Error fetching address:",ua)}},Ja=va=>{const Wa=va.target.value;se(Wa);const[ua,Xa]=Wa.split(",");ua&&Xa&&Na(ua.trim(),Xa.trim())},cr=va=>{se(va.join(",")),Na(va[0],va[1])},dr=async va=>{if(va.preventDefault(),!ee){alert("Please select an admin (or allow none).");return}try{const Wa=typeof fe=="string"?fe.split(",").map(pr=>parseFloat(pr.trim())):[],ua=Array.isArray(ee)?ee:[ee];let Xa;if(v)Xa=Ss(Er,"stations",v.id),await Ad(Xa,{stationName:j,stationAddress:q,coordinates:Wa,tanodAssigned:ua}),zt("Station updated successfully!"),n(!1);else{const pr={stationName:j,stationAddress:q,coordinates:Wa,tanodAssigned:ua};Xa=await x_(Hn(Er,"stations"),pr),zt("Station added successfully!"),l(!1)}if(Xa&&Xa.id){const pr=ua.map(Mn=>Ad(Ss(Er,"admins",Mn),{stationAssignedTo:Xa.id}));await Promise.all(pr),await Sr(Xa.id),ma(),It(),He(!0),setTimeout(()=>{He(!1)},2e3)}}catch(Wa){console.error("Error saving station:",Wa)}},Sr=async va=>{try{for(const Wa of me){const ua=Ss(Er,"bikes",Wa);await Ad(ua,{stationAssigned:va})}for(const Wa of Re){const ua=Ss(Er,"bikes",Wa);await Ad(ua,{stationAssigned:va})}console.log("Bikes assigned successfully:",va)}catch(Wa){console.error("Error assigning bikes:",Wa)}},ka=va=>{va==="Regular Bicycle"?je(!0):ze(!0)},Gr=va=>{va==="Regular Bicycle"?(Qe(!0),Ge(!1)):(Ge(!0),Qe(!1))},dn=async(va,Wa)=>{try{const ua=Ss(Er,"bikes",va);await Ad(ua,{stationAssigned:null}),Wa==="Regular Bicycle"?ge(Xa=>Xa.filter(pr=>pr!==va)):we(Xa=>Xa.filter(pr=>pr!==va)),Ht(),console.log(`Bike ${va} unassigned successfully.`)}catch(ua){console.error("Error unassigning bike:",ua)}},Cn=({station:va,onClose:Wa})=>$.jsx("div",{className:"modal-overlay",onClick:Wa,children:$.jsxs("div",{className:"modal-content",onClick:ua=>ua.stopPropagation(),children:[$.jsx("h2",{children:va.stationName}),$.jsxs("p",{children:[$.jsx("strong",{children:"Address:"})," ",va.stationAddress]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Coordinates:"})," ",va.coordinates]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Tanod Assigned:"})," ",va.tanodAssignedName||"Not Assigned"]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Total Bikes:"})," ",va.totalRegularBikes||0," ","(Regular), ",va.totalElectricBikes||0," (Electric)"]}),$.jsx("button",{className:"cancel-btn",onClick:Wa,children:"Close"})]})}),fn=({message:va})=>$.jsx("div",{className:"success-overlay",children:$.jsxs("div",{className:"success-content",children:[$.jsx("div",{className:"success-icon",children:""}),$.jsx("p",{children:va})]})});return $.jsxs(Kv,{children:[$.jsx(oA,{title:"Station Management"}),$.jsxs("div",{className:"station-management-container",children:[$.jsxs("div",{className:"station-management-header",children:[$.jsx("h2",{children:"Station Overview"}),$.jsxs("button",{className:"add-station-btn",onClick:Ea,children:[$.jsx(EL,{})," Add New Station"]})]}),$.jsxs("div",{className:"station-map-section",children:[$.jsx("h2",{children:"Station Locations"}),$.jsx("div",{className:"map-container",children:$.jsx(Sze,{onEditStation:va=>{ir(va)}})})]}),$.jsx("div",{className:"station-list",children:$.jsxs("table",{children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Station Name"}),$.jsx("th",{children:"Station Address"}),$.jsx("th",{children:"Total Bikes"}),$.jsx("th",{children:"Total E-Bikes"}),$.jsx("th",{children:"Tanod Assigned"}),$.jsx("th",{children:"Action"})]})}),$.jsx("tbody",{children:t.length>0?t.map(va=>$.jsxs("tr",{children:[$.jsx("td",{children:$.jsx("strong",{children:va.stationName})}),$.jsx("td",{children:$.jsx("span",{onClick:()=>{F(va),N(!0)},style:{cursor:"pointer",color:"#00796b"},children:va.stationAddress})}),$.jsx("td",{children:va.totalRegularBikes||0}),$.jsx("td",{children:va.totalElectricBikes||0}),$.jsx("td",{children:$.jsx("strong",{children:va.tanodAssignedName||"Not Assigned"})}),$.jsx("td",{children:$.jsx("button",{className:"delete-btn",onClick:()=>_t(va.id),children:$.jsx(fX,{})})})]},va.id)):$.jsx("tr",{children:$.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"10px"},children:"No stations available"})})})]})}),x&&L&&$.jsx(Cn,{station:L,onClose:()=>N(!1)}),i&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content large",children:[$.jsxs("div",{className:"modal-header",children:[$.jsx("h2",{children:"Add Station"}),$.jsx("button",{className:"close-modal-btn",onClick:()=>{st(!1),l(!1)},children:$.jsx(hX,{})})]}),$.jsxs("form",{onSubmit:dr,children:[$.jsx("label",{children:"Station Name:"}),$.jsx("input",{type:"text",value:j,onChange:va=>H(va.target.value),required:!0}),$.jsx("label",{children:"Location:"}),$.jsxs("div",{className:"location-selection",children:[$.jsxs("div",{className:"coordinates-input",children:[$.jsx("input",{type:"text",value:fe,onChange:Ja,placeholder:"Click on map or enter lat,long",readOnly:!0}),$.jsx("button",{type:"button",className:`select-location-btn ${lt?"active":""}`,onClick:()=>st(!lt),children:lt?"Done Selecting":"Select on Map"})]}),$.jsx("div",{className:"map-container",children:$.jsx(bze,{onSelectLocation:cr,isSelectingLocation:lt})})]}),$.jsx("label",{children:"Address:"}),$.jsx("textarea",{value:q,readOnly:!0}),$.jsx("label",{children:"Tanod Assigned:"}),$.jsxs("select",{value:ee,onChange:va=>oe(va.target.value),required:!0,children:[$.jsx("option",{value:"",children:"Select Tanod"}),Se.map(va=>$.jsxs("option",{value:va.id,children:[va.name," (",va.email,")"]},va.id))]}),$.jsx("label",{children:"Add Bikes:"}),$.jsxs("div",{className:"bike-selection",children:[$.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:""}),$.jsx("input",{type:"text",value:`${me.length} Selected`,readOnly:!0})]}),$.jsx("label",{children:"Add E-Bikes:"}),$.jsxs("div",{className:"bike-selection",children:[$.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:""}),$.jsx("input",{type:"text",value:`${Re.length} Selected`,readOnly:!0})]}),$.jsxs("div",{className:"modal-buttons",children:[$.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),$.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>l(!1),children:"Cancel"})]})]})]})}),Me&&$.jsx("div",{className:"add-bike-modal-overlay",children:$.jsxs("div",{className:"add-bike-modal",children:[$.jsx("h2",{children:"Select Regular Bikes"}),$.jsx("div",{className:"bike-list-container",children:Ee.length>0?Ee.map(va=>$.jsxs("div",{className:"bike-item",children:[$.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),$.jsx("input",{type:"checkbox",checked:me.includes(va.id),onChange:()=>{ge(Wa=>Wa.includes(va.id)?Wa.filter(ua=>ua!==va.id):[...Wa,va.id])}})]},va.id)):$.jsx("p",{children:"No unassigned bikes available"})}),$.jsx("button",{className:"save-btn",onClick:()=>je(!1),children:"Done"})]})}),xe&&$.jsx("div",{className:"add-bike-modal-overlay",children:$.jsxs("div",{className:"add-bike-modal",children:[$.jsx("h2",{children:"Select Electric Bikes"}),$.jsx("div",{className:"bike-list-container",children:_e.length>0?_e.map(va=>$.jsxs("div",{className:"bike-item",children:[$.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),$.jsx("input",{type:"checkbox",checked:Re.includes(va.id),onChange:()=>{we(Wa=>Wa.includes(va.id)?Wa.filter(ua=>ua!==va.id):[...Wa,va.id])}})]},va.id)):$.jsx("p",{children:"No unassigned e-bikes available"})}),$.jsx("button",{className:"save-btn",onClick:()=>ze(!1),children:"Done"})]})}),Ue&&$.jsx("div",{className:"assigned-bike-overlay",children:$.jsxs("div",{className:"assigned-bike-modal",children:[$.jsx("h2",{children:"Remove Assigned Regular Bikes"}),$.jsx("div",{className:"bike-list-container",children:me.length>0?me.map(va=>{const Wa=a.find(ua=>ua.id===va);return $.jsxs("div",{className:"bike-item",children:[$.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),$.jsx("button",{className:"remove-btn",onClick:()=>dn(va,"Regular Bicycle"),children:" Remove"})]},va)}):$.jsx("p",{children:"No assigned bikes."})}),$.jsx("button",{className:"save-btn",onClick:()=>Qe(!1),children:"Done"})]})}),ke&&$.jsx("div",{className:"assigned-bike-overlay",children:$.jsxs("div",{className:"assigned-bike-modal",children:[$.jsx("h2",{children:"Remove Assigned Electric Bikes"}),$.jsx("div",{className:"bike-list-container",children:Re.length>0?Re.map(va=>{const Wa=a.find(ua=>ua.id===va);return $.jsxs("div",{className:"bike-item",children:[$.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),$.jsx("button",{className:"remove-btn",onClick:()=>dn(va,"Electric Bicycle"),children:" Remove"})]},va)}):$.jsx("p",{children:"No assigned e-bikes."})}),$.jsx("button",{className:"save-btn",onClick:()=>Ge(!1),children:"Done"})]})}),c&&v&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content",children:[$.jsx("h2",{children:"Edit Station"}),$.jsxs("form",{onSubmit:dr,children:[$.jsx("label",{children:"Station Name:"}),$.jsx("input",{type:"text",value:j,onChange:va=>H(va.target.value),required:!0}),$.jsx("label",{children:"Coordinates:"}),$.jsx("input",{type:"text",value:fe,onChange:Ja,placeholder:"Enter lat,long"}),$.jsx("label",{children:"Address:"}),$.jsx("textarea",{value:q,readOnly:!0}),$.jsx("label",{children:"Tanod Assigned:"}),(()=>{const va=v.tanodAssignedID,Wa=qe.find(Xa=>Xa.id===va);let ua=[...Se];return Wa&&!ua.some(Xa=>Xa.id===Wa.id)&&ua.unshift(Wa),$.jsxs("select",{value:ee,onChange:Xa=>oe(Xa.target.value),required:!0,children:[$.jsx("option",{value:"",children:"Select Tanod"}),ua.map(Xa=>$.jsxs("option",{value:Xa.id,children:[Xa.name," (",Xa.email,")"]},Xa.id))]})})(),$.jsx("label",{children:"Assigned Bikes:"}),$.jsxs("div",{className:"bike-selection",children:[$.jsx("button",{type:"button",onClick:()=>Gr("Regular Bicycle"),children:""}),$.jsx("input",{type:"text",value:`${me.length} Assigned`,readOnly:!0}),$.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:""})]}),$.jsx("label",{children:"Assigned E-Bikes:"}),$.jsxs("div",{className:"bike-selection",children:[$.jsx("button",{type:"button",onClick:()=>Gr("Electric Bicycle"),children:""}),$.jsx("input",{type:"text",value:`${Re.length} Assigned`,readOnly:!0}),$.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:""})]}),$.jsxs("div",{className:"modal-buttons",children:[$.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),$.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>n(!1),children:"Cancel"})]})]})]})}),ht&&$.jsx(fn,{message:Ae})]})]})},Pze=()=>{const[t,e]=le.useState([]),[a,r]=le.useState(""),[i,l]=le.useState(""),[c,n]=le.useState(""),[v,R]=le.useState(null),[x,N]=le.useState(""),[L,F]=le.useState(!1),[j,H]=le.useState("station_manager"),[q,W]=le.useState(!1),[ee,oe]=le.useState(null),[fe,se]=le.useState(null),[me,ge]=le.useState({adminId:null,role:""}),[Re,we]=le.useState([]),[Ee,ae]=le.useState({total:0,active:0,inactive:0,onBreak:0}),[_e,Ie]=le.useState(null),xe={ACTIVE:"Active",INACTIVE:"Inactive",ON_BREAK:"On Break"},ze={Active:"#4CAF50",Inactive:"#F44336","On Break":"#FFC107"},Me=st=>{const ht={total:st.length,active:0,inactive:0,onBreak:0};return st.forEach(He=>{switch(He.status){case xe.ACTIVE:ht.active++;break;case xe.INACTIVE:ht.inactive++;break;case xe.ON_BREAK:ht.onBreak++;break;default:ht.inactive++;break}}),ht};le.useEffect(()=>{const st=async()=>{const He=await rs(Hn(Er,"stations")),Ae={};return He.docs.forEach(zt=>{Ae[zt.id]={stationName:zt.data().stationName,stationAddress:zt.data().stationAddress}}),we(Ae),Ae},ht=He=>{const Ae=Hn(Er,"admins");return Ag(Ae,zt=>{const kt=zt.docs.map(ma=>({id:ma.id,...ma.data(),stationDetails:ma.data().stationAssignedTo?He[ma.data().stationAssignedTo]:null}));e(kt),ae(Me(kt))})};st().then(He=>{const Ae=ht(He);return()=>Ae()})},[]);const je=async(st,ht)=>{try{const He=Ss(Er,"admins",st);await Ad(He,{roles:[ht],updatedAt:new Date}),alert("Role updated successfully!")}catch(He){console.error("Error updating role:",He),alert("Failed to update admin role. Please try again.")}},Ue=(st,ht)=>{ge({adminId:st,role:ht||"Station Manager"})},Qe=async()=>{if(!me.adminId||!me.role){alert("Please select a role");return}try{await je(me.adminId,me.role),ge({adminId:null,role:""})}catch(st){console.error("Error saving role:",st),alert("Failed to save role changes")}},ke=st=>new Promise(ht=>{const He=new FileReader;He.readAsDataURL(st),He.onload=Ae=>{const zt=new Image;zt.src=Ae.target.result,zt.onload=()=>{const kt=document.createElement("canvas"),ma=kt.getContext("2d");let It=zt.width,Ht=zt.height;const _t=800;It>Ht&&It>_t?(Ht=Ht*_t/It,It=_t):Ht>_t&&(It=It*_t/Ht,Ht=_t),kt.width=It,kt.height=Ht,ma.drawImage(zt,0,0,It,Ht),kt.toBlob(ir=>{ht(ir)},"image/jpeg",.6)}}}),Ge=async st=>{if(!st)return null;try{const ht=await ke(st),He=`admin_profiles/${Date.now()}_${st.name}`,Ae=cte(),zt=ute(Ae,He);return await ote(zt,ht),await lte(zt)}catch(ht){return console.error("Error uploading image:",ht),null}},Se=async st=>{if(st.preventDefault(),!a||!i||!c){alert("Please fill in all fields.");return}try{const ht=GK(),Ae=(await lle(ht,i,c)).user;let zt="";if(v&&(zt=await Ge(v),!zt)){alert("Failed to upload profile image.");return}const kt={uid:Ae.uid,name:a,email:i,roles:[j],profilePhoto:zt||"",status:"Active",stationAssignedTo:null,createdAt:new Date,updatedAt:new Date};await x_(Hn(Er,"admins"),kt),alert("Admin added successfully!"),r(""),l(""),n(""),R(null),N(""),F(!1)}catch(ht){console.error("Error creating admin:",ht),alert(ht.message||"There was an error creating the admin. Please try again.")}},Te=async st=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await PL(Ss(Er,"admins",st))}catch(ht){console.error("Error deleting admin:",ht)}},qe=st=>{oe(st),W(!0),se(null),H(st.roles[0])},Ze=async st=>{if(st.preventDefault(),!fe){alert("Please select a new profile image.");return}const ht=await Ge(fe);if(!ht){alert("Failed to upload new profile image.");return}try{const He=Ss(Er,"admins",ee.id);await Ad(He,{profilePhoto:ht}),alert("Profile photo updated successfully!"),W(!1),oe(null),se(null)}catch(He){console.error("Error updating admin profile photo:",He),alert("Failed to update admin profile photo. Please try again.")}},lt=()=>{W(!1),oe(null),se(null)};return $.jsxs(Kv,{children:[$.jsx(oA,{title:"Admin Management"}),$.jsxs("div",{className:"admin-management-container",children:[$.jsxs("div",{className:"stats-container",children:[$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Total Admins"}),$.jsx("p",{children:Ee.total})]}),$.jsxs("div",{className:"stat-card active",children:[$.jsx("h3",{children:"Active"}),$.jsx("p",{children:Ee.active})]}),$.jsxs("div",{className:"stat-card break",children:[$.jsx("h3",{children:"On Break"}),$.jsx("p",{children:Ee.onBreak})]}),$.jsxs("div",{className:"stat-card inactive",children:[$.jsx("h3",{children:"Inactive"}),$.jsx("p",{children:Ee.inactive})]})]}),$.jsxs("div",{className:"admin-management-header",children:[$.jsx("h2",{children:"Admin Creation"}),$.jsxs("button",{className:"btn-create-admin",onClick:()=>F(!0),children:[$.jsx(EL,{})," Create New Admin Account"]})]}),$.jsx("div",{className:"admin-gallery",children:t.length>0?t.map(st=>{var ht,He;return $.jsxs("div",{className:"admin-card",children:[$.jsxs("div",{className:"edit-container",children:[$.jsx("button",{className:"edit-toggle",onClick:()=>Ie(_e===st.id?null:st.id),children:$.jsx(Ife,{})}),_e===st.id&&$.jsxs("div",{className:"edit-options",children:[$.jsxs("button",{onClick:()=>{qe(st),Ie(null)},children:[$.jsx(Nfe,{})," Change Photo"]}),$.jsxs("button",{onClick:()=>{var Ae;Ue(st.id,(Ae=st.roles)==null?void 0:Ae[0]),Ie(null)},children:[$.jsx(Lfe,{})," Change Role"]}),$.jsxs("button",{onClick:()=>{Te(st.id),Ie(null)},children:[$.jsx(fX,{})," Delete Admin"]})]})]}),$.jsxs("div",{className:"admin-photo",children:[$.jsxs("div",{className:"status-dot-container",children:[$.jsx("span",{className:`status-dot ${(ht=st.status)==null?void 0:ht.toLowerCase()}`,style:{backgroundColor:ze[st.status]||ze.Inactive}}),$.jsxs("div",{className:"status-tooltip",children:[st.status||"Inactive","  Last updated:"," ",st.statusUpdatedAt?qi(st.statusUpdatedAt.toDate()).format("MMM D, HH:mm"):"Not available"]})]}),st.profilePhoto?$.jsx("img",{src:st.profilePhoto,alt:"Admin"}):$.jsx("div",{className:"placeholder",children:"No Image"})]}),$.jsxs("div",{className:"admin-info",children:[$.jsx("h4",{children:st.name}),$.jsx("p",{children:st.email}),$.jsx("div",{className:"role-badge",children:((He=st.roles)==null?void 0:He[0])||"No Role"}),$.jsx("div",{className:"station-info",children:st.stationDetails?$.jsxs("span",{className:"station-name",children:[" ",st.stationDetails.stationName]}):$.jsx("span",{className:"no-station",children:"No Station Assigned"})})]})]},st.id)}):$.jsx("p",{children:"No admins found"})}),L&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content",children:[$.jsx("h3",{children:"Create Admin Account"}),$.jsxs("form",{onSubmit:Se,children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Name:"}),$.jsx("input",{type:"text",value:a,onChange:st=>r(st.target.value),required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Role:"}),$.jsxs("select",{value:j,onChange:st=>H(st.target.value),children:[$.jsx("option",{value:"Station Manager",children:"Station Manager"}),$.jsx("option",{value:"User Support",children:"User Support"})]})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Email:"}),$.jsx("input",{type:"email",value:i,onChange:st=>l(st.target.value),required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Password:"}),$.jsx("input",{type:"password",value:c,onChange:st=>n(st.target.value),required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Profile Picture:"}),$.jsx("input",{type:"file",accept:"image/*",onChange:st=>R(st.target.files[0])})]}),v&&$.jsx("div",{className:"preview-image",children:$.jsx("img",{src:URL.createObjectURL(v),alt:"Preview"})}),$.jsx("button",{type:"submit",className:"btn-create",children:"Create"}),$.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>F(!1),children:"Cancel"})]})]})}),q&&ee&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content",children:[$.jsxs("h3",{children:["Edit Profile Photo for ",ee.name]}),$.jsxs("form",{onSubmit:Ze,children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"New Profile Picture:"}),$.jsx("input",{type:"file",accept:"image/*",onChange:st=>se(st.target.files[0])})]}),fe&&$.jsx("div",{className:"preview-image",children:$.jsx("img",{src:URL.createObjectURL(fe),alt:"Preview"})}),$.jsx("button",{type:"submit",className:"btn-update",children:"Update Photo"}),$.jsx("button",{type:"button",className:"btn-cancel",onClick:lt,children:"Cancel"})]})]})}),me.adminId&&$.jsx("div",{className:"modal-overlay",children:$.jsxs("div",{className:"modal-content",children:[$.jsx("h3",{children:"Change Admin Role"}),$.jsxs("form",{onSubmit:st=>{st.preventDefault(),Qe()},children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{children:"Select Role:"}),$.jsxs("select",{value:me.role,onChange:st=>ge({...me,role:st.target.value}),children:[$.jsx("option",{value:"Station Manager",children:"Station Manager"}),$.jsx("option",{value:"User Support",children:"User Support"})]})]}),$.jsxs("div",{className:"button-group",children:[$.jsx("button",{type:"submit",className:"btn-update",children:"Save Role"}),$.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>ge({adminId:null,role:""}),children:"Cancel"})]})]})]})})]})]})},TD={RegularBicycle:"Regular Bicycle",ElectricBicycle:"Electric Bicycle"},Eze=()=>{const[t,e]=le.useState([]),[a,r]=le.useState(!0),[i,l]=le.useState(null),[c,n]=le.useState(""),[v,R]=le.useState([]),[x,N]=le.useState([]),[L,F]=le.useState(!1),[j,H]=le.useState("daily"),[q,W]=le.useState({daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0},all:{revenue:0,rides:0}}),[ee,oe]=le.useState({key:"revenue",direction:"desc"}),fe=ae=>{oe({key:ae,direction:ee.key===ae&&ee.direction==="asc"?"desc":"asc"})};le.useEffect(()=>{se(),me(),ge()},[]),le.useEffect(()=>{ge()},[j]);const se=async()=>{try{const _e=(await rs(Hn(Er,"rentalRates"))).docs.map(Ie=>({id:Ie.id,...Ie.data()}));e(_e)}catch(ae){console.error("Error fetching rental rates:",ae)}finally{r(!1)}},me=async()=>{try{const ae=Hn(Er,"rateHistory"),_e=Y0(ae,rX("timestamp","desc")),xe=(await rs(_e)).docs.map(ze=>({id:ze.id,...ze.data()}));R(xe)}catch(ae){console.error("Error fetching rate history:",ae)}},ge=async()=>{try{const ae=Hn(Er,"stations"),_e=await rs(ae),Ie=new Map;_e.forEach(ke=>{const Ge=ke.data();Ie.set(ke.id,{id:ke.id,stationName:Ge.stationName,revenue:0,rides:0})});const xe=Hn(Er,"ride_history"),ze=await rs(xe),Me=ze.docs.length,je=qi(),Ue={daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0}};ze.docs.forEach(ke=>{const Ge=ke.data(),Se=qi(Ge.rideEndedAt.toDate()),Te=Number(Ge.amountPaid||0);if((j==="all"?!0:j==="daily"?Se.isSame(je,"day"):j==="weekly"?Se.isAfter(je.subtract(1,"week")):j==="monthly"?Se.isAfter(je.subtract(1,"month")):!0)&&Ge.startStation){const Ze=Ie.get(Ge.startStation);Ze&&(Ze.rides+=1,Ze.revenue+=Te)}Ue.total.rides+=1,Ue.total.revenue+=Te,Se.isSame(je,"day")&&(Ue.daily.rides+=1,Ue.daily.revenue+=Te),Se.isAfter(je.subtract(1,"week"))&&(Ue.weekly.rides+=1,Ue.weekly.revenue+=Te),Se.isAfter(je.subtract(1,"month"))&&(Ue.monthly.rides+=1,Ue.monthly.revenue+=Te)}),W({daily:Ue.daily,weekly:Ue.weekly,monthly:Ue.monthly,total:Ue.total,all:Ue.total});const Qe=Array.from(Ie.values()).sort((ke,Ge)=>Ge.revenue-ke.revenue).map(ke=>({...ke,totalSystemRides:Me}));N(Qe)}catch(ae){console.error("Error fetching station revenue:",ae)}},Re=ae=>{var _e;l(ae),n(((_e=ae.pricePerMinute)==null?void 0:_e.toString())||"")},we=()=>{l(null),n("")},Ee=async()=>{if(!i)return;const ae=parseFloat(c);if(isNaN(ae)||ae<=0){alert("Please enter a valid number greater than 0 for the price.");return}try{const _e=g1.currentUser;if(!_e)throw new Error("No user is signed in");const Ie=Ss(Er,"users",_e.uid),xe=await Xf(Ie),ze=xe.exists()?xe.data().name:"Unknown User",Me=Ss(Er,"rentalRates",i.id);await Ad(Me,{pricePerMinute:ae}),await x_(Hn(Er,"rateHistory"),{bikeType:i.id,oldPrice:i.pricePerMinute,newPrice:ae,timestamp:new Date,updatedBy:ze});const je=t.map(Ue=>Ue.id===i.id?{...Ue,pricePerMinute:ae}:Ue);e(je),await me(),we()}catch(_e){console.error("Error updating rate:",_e),alert("Failed to update the rate. See console for details.")}};return $.jsxs(Kv,{children:[$.jsx(oA,{title:"Bike Management"}),$.jsxs("div",{className:"rate-management-container",children:[$.jsx("h2",{children:"Rental Rate Management"}),a?$.jsx("p",{children:"Loading..."}):$.jsx($.Fragment,{children:$.jsx("div",{className:"table-container",children:$.jsxs("table",{className:"rate-table",children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Bike Type"}),$.jsx("th",{children:"Price Per Minute ()"}),$.jsx("th",{children:"Actions"})]})}),$.jsx("tbody",{children:t.length>0?t.map(ae=>{var Ie;const _e=TD[ae.id]||ae.id;return $.jsxs("tr",{children:[$.jsx("td",{children:_e}),$.jsx("td",{children:(Ie=ae.pricePerMinute)==null?void 0:Ie.toFixed(2)}),$.jsx("td",{children:$.jsxs("button",{className:"edit-btn",onClick:()=>Re(ae),children:[$.jsx(vR,{})," Edit"]})})]},ae.id)}):$.jsx("tr",{children:$.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No rental rates available."})})})]})})}),$.jsxs("div",{className:"revenue-section",children:[$.jsx("h3",{children:"Station Revenue"}),$.jsx("div",{className:"controls",children:$.jsxs("div",{className:"time-filter",children:[$.jsx("button",{className:`filter-btn ${j==="all"?"active":""}`,onClick:()=>H("all"),children:"All Time"}),$.jsx("button",{className:`filter-btn ${j==="daily"?"active":""}`,onClick:()=>H("daily"),children:"Today"}),$.jsx("button",{className:`filter-btn ${j==="weekly"?"active":""}`,onClick:()=>H("weekly"),children:"This Week"}),$.jsx("button",{className:`filter-btn ${j==="monthly"?"active":""}`,onClick:()=>H("monthly"),children:"This Month"})]})}),$.jsx("div",{className:"table-container",children:$.jsxs("table",{className:"revenue-table",children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsxs("th",{onClick:()=>fe("stationName"),children:["Station Name"," ",ee.key==="stationName"&&(ee.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>fe("revenue"),children:["Total Revenue ()"," ",ee.key==="revenue"&&(ee.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>fe("rides"),children:["Total Rides"," ",ee.key==="rides"&&(ee.direction==="asc"?"":"")]})]})}),$.jsxs("tbody",{children:[x.sort((ae,_e)=>ee.key==="stationName"?ee.direction==="asc"?ae.stationName.localeCompare(_e.stationName):_e.stationName.localeCompare(ae.stationName):ee.direction==="asc"?ae[ee.key]-_e[ee.key]:_e[ee.key]-ae[ee.key]).map(ae=>$.jsxs("tr",{children:[$.jsx("td",{children:ae.stationName}),$.jsx("td",{children:ae.revenue.toFixed(2)}),$.jsx("td",{children:ae.rides})]},ae.id)),$.jsxs("tr",{className:"total-row",children:[$.jsx("td",{children:$.jsx("strong",{children:"Total"})}),$.jsx("td",{children:$.jsxs("strong",{children:["",q[j].revenue.toFixed(2)]})}),$.jsx("td",{children:$.jsx("strong",{children:q[j].rides})})]})]})]})})]}),$.jsxs("div",{className:"history-section",children:[$.jsxs("div",{className:"history-header",children:[$.jsx("h3",{children:"Rate History"}),$.jsxs("button",{className:"history-toggle-btn",onClick:()=>F(!L),children:[$.jsx(Dfe,{})," ",L?"Hide History":"Show History"]})]}),L&&$.jsx("div",{className:"table-container",children:$.jsxs("table",{className:"history-table",children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Date"}),$.jsx("th",{children:"Bike Type"}),$.jsx("th",{children:"Old Price ()"}),$.jsx("th",{children:"New Price ()"}),$.jsx("th",{children:"Updated By"})]})}),$.jsx("tbody",{children:v.map(ae=>{var _e;return $.jsxs("tr",{children:[$.jsx("td",{children:qi(ae.timestamp.toDate()).format("MMM D, YYYY HH:mm")}),$.jsx("td",{children:TD[ae.bikeType]||ae.bikeType}),$.jsx("td",{children:(_e=ae.oldPrice)==null?void 0:_e.toFixed(2)}),$.jsx("td",{children:ae.newPrice.toFixed(2)}),$.jsx("td",{children:ae.updatedBy})]},ae.id)})})]})})]}),i&&$.jsx("div",{className:"modal-overlay",onClick:we,children:$.jsxs("div",{className:"modal-content",onClick:ae=>ae.stopPropagation(),children:[$.jsx("h3",{children:"Edit Rental Rate"}),$.jsxs("p",{children:["Bike Type:"," ",$.jsx("strong",{children:TD[i.id]||i.id})]}),$.jsx("label",{children:"Price Per Minute ():"}),$.jsx("input",{type:"number",step:"0.01",value:c,onChange:ae=>n(ae.target.value)}),$.jsxs("div",{className:"modal-buttons",children:[$.jsx("button",{className:"save-btn",onClick:Ee,children:"Save"}),$.jsx("button",{className:"cancel-btn",onClick:we,children:"Cancel"})]})]})})]})]})};var Db={exports:{}},Nze=Db.exports,mH;function Oze(){return mH||(mH=1,function(t,e){(function(a,r){t.exports=r()})(Nze,function(){var a="week",r="year";return function(i,l,c){var n=l.prototype;n.week=function(v){if(v===void 0&&(v=null),v!==null)return this.add(7*(v-this.week()),"day");var R=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var x=c(this).startOf(r).add(1,r).date(R),N=c(this).endOf(a);if(x.isBefore(N))return 1}var L=c(this).startOf(r).date(R).startOf(a).subtract(1,"millisecond"),F=this.diff(L,a,!0);return F<0?c(this).startOf("week").week():Math.ceil(F)},n.weeks=function(v){return v===void 0&&(v=null),this.week(v)}}})}(Db)),Db.exports}var Vze=Oze();const zze=ns(Vze);var Mb={exports:{}},Dze=Mb.exports,gH;function Mze(){return gH||(gH=1,function(t,e){(function(a,r){t.exports=r()})(Dze,function(){return function(a,r,i){r.prototype.isBetween=function(l,c,n,v){var R=i(l),x=i(c),N=(v=v||"()")[0]==="(",L=v[1]===")";return(N?this.isAfter(R,n):!this.isBefore(R,n))&&(L?this.isBefore(x,n):!this.isAfter(x,n))||(N?this.isBefore(R,n):!this.isAfter(R,n))&&(L?this.isAfter(x,n):!this.isBefore(x,n))}}})}(Mb)),Mb.exports}var Ize=Mze();const Lze=ns(Ize);qi.extend(zze);qi.extend(Lze);const Fze=({text:t})=>{const e=new RegExp("(?<![A-Za-z])(?<!-)(?<!\\/)\\b(\\d+\\.?\\d*)\\b(?![A-Za-z])","g"),a=t.split(e);return $.jsx("span",{children:a.map((r,i)=>e.test(r)?$.jsx("span",{className:"highlighted-number",children:r},i):$.jsx("span",{children:r},i))})},xy=({title:t,analysis:e})=>$.jsxs("div",{className:"analysis-card",children:[$.jsx("h3",{children:t}),$.jsx("p",{children:$.jsx(Fze,{text:e})})]}),kze=()=>{var ge,Re,we,Ee;const[t,e]=le.useState([]),[a,r]=le.useState({calories:[],distance:[],duration:[],carbonSaved:[]}),[i,l]=le.useState([]),[c,n]=le.useState([]),[v,R]=le.useState("monthly"),[x,N]=le.useState([]),[L,F]=le.useState([]),j=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],H=["#009C8C","#4CAF50","#2196F3","#FFA726","#FF5722","#9C27B0","#673AB7","#3F51B5","#00BCD4","#795548"],q=(ae,_e,Ie)=>{const xe=qi(),ze=new Map;return _e.filter(je=>{const Ue=qi(je.rideEndedAt);switch(Ie){case"daily":return Ue.isSame(xe,"day");case"weekly":return Ue.isAfter(xe.subtract(1,"week"));case"monthly":return Ue.isAfter(xe.subtract(1,"month"));default:return!0}}).forEach(je=>{je.startStation&&ze.set(je.startStation,(ze.get(je.startStation)||0)+1)}),ae.map(je=>({id:je.id,stationName:je.stationName,rides:ze.get(je.id)||0})).sort((je,Ue)=>Ue.rides-je.rides)},W=(ae,_e)=>{const Ie=new Map,xe=qi();let ze,Me;switch(_e){case"daily":ze=xe.subtract(6,"day").startOf("day"),Me=xe.endOf("day");break;case"weekly":ze=xe.subtract(11,"week").startOf("week"),Me=xe.endOf("week");break;case"monthly":ze=xe.subtract(11,"month").startOf("month"),Me=xe.endOf("month");break;default:const Ue=ae.map(Qe=>qi(Qe.rideEndedAt));ze=qi.min(Ue),Me=xe}let je=ze;for(;je.isBefore(Me);){let Ue;switch(_e){case"daily":Ue=je.format("MMM DD"),je=je.add(1,"day");break;case"weekly":Ue=`Week ${je.week()} - ${je.format("MMM")}`,je=je.add(1,"week");break;case"monthly":Ue=je.format("MMM YYYY"),je=je.add(1,"month");break}Ie.set(Ue,{period:Ue,revenue:0,calories:0,distance:0,duration:0,carbonSaved:0,rides:0})}return ae.forEach(Ue=>{const Qe=qi(Ue.rideEndedAt);if(Qe.isBetween(ze,Me,null,"[]")){let ke;switch(_e){case"daily":ke=Qe.format("MMM DD");break;case"weekly":ke=`Week ${Qe.week()} - ${Qe.format("MMM")}`;break;case"monthly":ke=Qe.format("MMM YYYY");break}if(Ie.has(ke)){const Ge=Ie.get(ke);Ge.revenue+=Number(Ue.amountPaid||0),Ge.calories+=Number(Ue.caloriesBurned||0),Ge.distance+=Number(Ue.distance||0),Ge.duration+=Number(Ue.duration||0)/60,Ge.carbonSaved+=Number(Ue.carbonSaved||0),Ge.rides+=1}}}),Array.from(Ie.values()).map(Ue=>({...Ue,avgCalories:Ue.rides>0?Ue.calories/Ue.rides:0,avgDistance:Ue.rides>0?Ue.distance/Ue.rides:0,avgDuration:Ue.rides>0?Ue.duration/Ue.rides:0,avgCarbonSaved:Ue.rides>0?Ue.carbonSaved/Ue.rides:0}))},ee=(ae,_e)=>{const Ie=qi();switch(_e){case"daily":return ae.filter(xe=>qi(xe.rideEndedAt).isSame(Ie,"day"));case"weekly":return ae.filter(xe=>qi(xe.rideEndedAt).isAfter(Ie.subtract(1,"week")));case"monthly":return ae.filter(xe=>qi(xe.rideEndedAt).isAfter(Ie.subtract(1,"month")));default:return ae}},oe=(ae,_e)=>{if(!ae||ae.length===0)return"No data available";const Ie=ee(x,v),xe=Ie.reduce((je,Ue)=>{switch(_e){case"revenue":return je+(Ue.amountPaid||0);case"calories":return je+(Ue.caloriesBurned||0);case"distance":return je+(Ue.distance||0);case"duration":return je+(Ue.duration||0)/60;case"carbonSaved":return je+(Ue.carbonSaved||0);default:return je}},0),ze=Ie.length,Me=v==="daily"?"today":v==="weekly"?"this week":"this month";switch(_e){case"revenue":const je=ze>0?xe/ze:0;return`The EcoRide Parada system generated ${xe.toFixed(2)} in revenue ${Me}. 
                With ${ze} rides completed, residents spent an average of ${je.toFixed(2)} per trip. 
                These funds support system maintenance and expansion, creating sustainable transportation
                infrastructure for Barangay Parada while providing an affordable alternative to motor vehicles.`;case"calories":const Ue=xe*.26;return`Barangay Parada residents burned ${xe.toFixed(0)} calories through cycling ${Me}, 
                equivalent to approximately ${Math.round(xe/100)} healthy meals worth of energy. 
                This active transportation promotes community health and wellness, generating estimated healthcare 
                cost savings of ${Ue.toFixed(2)} through preventative exercise. Regular cyclists in Parada 
                report improved cardiovascular health and reduced stress levels, creating a healthier community.`;case"distance":const ke=xe*.25;return`EcoRide users covered ${xe.toFixed(2)} km by bike ${Me}. 
                Based on Metro Manila traffic research, each bike takes up only 0.25 car units 
                of road space, representing approximately ${Math.round(ke)} car-equivalent 
                trips removed from local roads. This efficient use of road space helps reduce 
                traffic congestion in Barangay Parada's busiest areas.`;case"duration":const Ge=Math.floor(xe/60),Se=Math.floor(xe%60),Te=ze*5,qe=xe*.3;return`Barangay Parada cyclists spent ${Ge} hours and ${Se} minutes riding ${Me}. 
                By choosing EcoRide over cars, residents collectively saved approximately ${Math.round(Te/60+qe)} hours 
                on parking and traffic delays. This represents significant quality-of-life improvement for
                community members while reducing road congestion by an estimated ${Math.round(ze*.8)} vehicles during 
                peak hours, improving mobility for all Parada residents.`;case"carbonSaved":const Ze=(xe/21).toFixed(1),lt=(xe/.251).toFixed(1),st=(xe*.05).toFixed(1);return`The EcoRide system prevented ${xe.toFixed(2)} kg of CO2 emissions in Barangay Parada ${Me}, 
                equivalent to the yearly CO2 absorption of ${Ze} trees. This translates to approximately 
                ${lt} km of car travel removed from local roads and an estimated ${st}% 
                improvement in local air quality. Every ride contributes to Parada's sustainability goals, helping 
                transform the barangay into a model for eco-friendly transportation in Metro Manila.`;default:return"No analysis available"}},fe=(ae,_e)=>{const Ie=new Map;return qi(),ae.forEach(xe=>{const ze=qi(xe.timestamp);let Me;switch(_e){case"daily":Me=ze.format("MMM DD");break;case"weekly":Me=`Week ${ze.week()} - ${ze.format("MMM")}`;break;case"monthly":Me=ze.format("MMM YYYY");break}if(!Ie.has(Me))Ie.set(Me,{period:Me,averageRating:xe.rating,totalRatings:1});else{const je=Ie.get(Me);je.averageRating=(je.averageRating*je.totalRatings+xe.rating)/(je.totalRatings+1),je.totalRatings+=1}}),Array.from(Ie.values())},se=async()=>{try{const ae=Hn(Er,"ride_history"),Ie=(await rs(ae)).docs.map(lt=>{var st;return{id:lt.id,...lt.data(),rideEndedAt:(st=lt.data().rideEndedAt)!=null&&st.toDate?lt.data().rideEndedAt.toDate():new Date(lt.data().rideEndedAt.seconds*1e3)}});N(Ie);const xe=Hn(Er,"stations"),Me=(await rs(xe)).docs.map(lt=>({id:lt.id,stationName:lt.data().stationName})),je=q(Me,Ie,v);n(je);const Ue=W(Ie,"monthly"),Qe=W(Ie,"weekly"),ke=W(Ie,"daily");l({monthly:Ue,weekly:Qe,daily:ke});const Ge=new Map;Me.forEach(lt=>{Ge.set(lt.id,{stationName:lt.stationName,revenue:0,rides:0})}),Ie.forEach(lt=>{if(lt.startStation){const st=Ge.get(lt.startStation);st&&(st.revenue+=Number(lt.amountPaid),st.rides+=1)}});const Se=Array.from(Ge.values()).sort((lt,st)=>st.revenue-lt.revenue);e(Se);const Te=Hn(Er,"ride_ratings"),Ze=(await rs(Te)).docs.map(lt=>{var st;return{id:lt.id,...lt.data(),timestamp:(st=lt.data().timestamp)!=null&&st.toDate?lt.data().timestamp.toDate():new Date(lt.data().timestamp.seconds*1e3)}});F(Ze)}catch(ae){console.error("Error fetching analytics:",ae)}};le.useEffect(()=>{se()},[v]);const me=(ae,_e)=>ae[_e]||[];return $.jsxs(Kv,{children:[$.jsx(oA,{})," ",$.jsxs("div",{className:"analytics-container",children:[$.jsxs("div",{className:"analytics-header",children:[$.jsx("h1",{children:"System Analytics"}),$.jsx("div",{className:"time-filter",children:j.map(ae=>$.jsx("button",{className:`filter-btn ${v===ae.value?"active":""}`,onClick:()=>R(ae.value),children:ae.label},ae.value))})]}),$.jsxs("div",{className:"charts-grid",children:[$.jsxs("div",{className:"chart-section full-width",children:[$.jsx("h2",{children:"Revenue Trend"}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:500,children:$.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:90},children:[$.jsx("defs",{children:$.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"5%",stopColor:"#009C8C",stopOpacity:.8}),$.jsx("stop",{offset:"95%",stopColor:"#009C8C",stopOpacity:.1})]})}),$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),$.jsx(gd,{tickFormatter:ae=>`${ae.toFixed(0)}`,label:{value:"Revenue ()",angle:-90,position:"insideLeft",offset:10,dy:50}}),$.jsx(mu,{formatter:ae=>[`${ae.toFixed(2)}`,"Revenue"]}),$.jsx(hf,{verticalAlign:"bottom",height:36,wrapperStyle:{paddingTop:"20px",marginBottom:"10px"}}),$.jsx(mf,{type:"monotone",dataKey:"revenue",stroke:"#009C8C",fill:"url(#revenueGradient)",name:"Revenue",dot:{r:4}})]})}),$.jsx(xy,{title:"Revenue Analysis",analysis:oe(me(i,v),"revenue")})]})]}),$.jsxs("div",{className:"chart-section full-width",children:[$.jsx("h2",{children:"Revenue by Station"}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:500,children:$.jsxs(LI,{data:t.filter(ae=>ae.revenue>0),margin:{top:20,right:30,left:20,bottom:120},children:[$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"stationName",angle:-45,textAnchor:"end",height:100,interval:0,tick:{fontSize:12}}),$.jsx(gd,{tickFormatter:ae=>`${ae.toFixed(2)}`}),$.jsx(mu,{formatter:ae=>`${ae.toFixed(2)}`}),$.jsx(Wp,{dataKey:"revenue",children:t.filter(ae=>ae.revenue>0).map((ae,_e)=>$.jsx(z_,{fill:H[_e%H.length]},`cell-${_e}`))})]})}),$.jsx(xy,{title:"Station Revenue Analysis",analysis:`The top earning station is ${((ge=t[0])==null?void 0:ge.stationName)||"N/A"} with ${(Re=t[0])==null?void 0:Re.revenue.toFixed(2)} in revenue. There are ${t.filter(ae=>ae.revenue>0).length} stations generating revenue, with a total system revenue of ${t.reduce((ae,_e)=>ae+_e.revenue,0).toFixed(2)}.`})]})]}),$.jsxs("div",{className:"chart-section full-width",children:[$.jsx("h2",{children:"Average Calories Burned"}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:500,children:$.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[$.jsx("defs",{children:$.jsxs("linearGradient",{id:"caloriesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"5%",stopColor:"#FF5722",stopOpacity:.8}),$.jsx("stop",{offset:"95%",stopColor:"#FF5722",stopOpacity:.1})]})}),$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"period"}),$.jsx(gd,{}),$.jsx(mu,{}),$.jsx(hf,{}),$.jsx(mf,{type:"monotone",dataKey:"calories",stroke:"#FF5722",fill:"url(#caloriesGradient)",name:"Calories Burned",dot:{fill:"#FF5722"}})]})}),$.jsx(xy,{title:"Health Impact Analysis",analysis:oe(me(i,v),"calories")})]})]}),$.jsxs("div",{className:"chart-section full-width",children:[$.jsx("h2",{children:"Average Distance Covered"}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:500,children:$.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[$.jsx("defs",{children:$.jsxs("linearGradient",{id:"distanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"5%",stopColor:"#2196F3",stopOpacity:.8}),$.jsx("stop",{offset:"95%",stopColor:"#2196F3",stopOpacity:.1})]})}),$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"period"}),$.jsx(gd,{}),$.jsx(mu,{}),$.jsx(hf,{}),$.jsx(mf,{type:"monotone",dataKey:"distance",stroke:"#2196F3",fill:"url(#distanceGradient)",name:"Distance (km)",dot:{fill:"#2196F3"}})]})}),$.jsx(xy,{title:"Distance Analysis",analysis:oe(me(i,v),"distance")})]})]}),$.jsxs("div",{className:"chart-section full-width",children:[$.jsx("h2",{children:"Average Ride Duration"}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:500,children:$.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[$.jsx("defs",{children:$.jsxs("linearGradient",{id:"durationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"5%",stopColor:"#9C27B0",stopOpacity:.8}),$.jsx("stop",{offset:"95%",stopColor:"#9C27B0",stopOpacity:.1})]})}),$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"period"}),$.jsx(gd,{}),$.jsx(mu,{formatter:(ae,_e)=>[`${ae.toFixed(0)} minutes`,"Duration"]}),$.jsx(hf,{}),$.jsx(mf,{type:"monotone",dataKey:"duration",stroke:"#9C27B0",fill:"url(#durationGradient)",name:"Duration (minutes)",dot:{fill:"#9C27B0"}})]})}),$.jsx(xy,{title:"Duration Analysis",analysis:oe(me(i,v),"duration")})]})]}),$.jsxs("div",{className:"chart-section full-width",children:[$.jsx("h2",{children:"Average CO2 Saved"}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:500,children:$.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[$.jsx("defs",{children:$.jsxs("linearGradient",{id:"co2Gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"5%",stopColor:"#4CAF50",stopOpacity:.8}),$.jsx("stop",{offset:"95%",stopColor:"#4CAF50",stopOpacity:.1})]})}),$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"period"}),$.jsx(gd,{}),$.jsx(mu,{}),$.jsx(hf,{}),$.jsx(mf,{type:"monotone",dataKey:"carbonSaved",stroke:"#4CAF50",fill:"url(#co2Gradient)",name:"CO2 Saved (kg)",dot:{fill:"#4CAF50"}})]})}),$.jsx(xy,{title:"Environmental Impact Analysis",analysis:oe(me(i,v),"carbonSaved")})]})]}),$.jsxs("div",{className:"chart-section full-width",children:[$.jsx("h2",{children:"User Ride Ratings"}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:500,children:$.jsxs(nEe,{data:fe(L,v),margin:{top:20,right:30,left:20,bottom:70},children:[$.jsx(Bp,{strokeDasharray:"3 3"}),$.jsx(md,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),$.jsx(gd,{domain:[0,5],ticks:[0,1,2,3,4,5],label:{value:"Average Rating",angle:-90,position:"insideLeft",offset:10}}),$.jsx(mu,{formatter:(ae,_e)=>[_e==="averageRating"?`${ae.toFixed(2)} stars`:ae,_e==="averageRating"?"Average Rating":"Total Ratings"]}),$.jsx(hf,{}),$.jsx(Wp,{dataKey:"totalRatings",fill:"#82ca9d",name:"Total Ratings",opacity:.3}),$.jsx($v,{type:"monotone",dataKey:"averageRating",stroke:"#ff7300",name:"Average Rating",strokeWidth:2,dot:{fill:"#ff7300"}})]})}),$.jsx(xy,{title:"User Satisfaction Analysis",analysis:(()=>{const ae=fe(L,v);if(ae.length===0)return"No ratings data available for this period.";const _e=ae.reduce((ze,Me)=>ze+Me.totalRatings,0),Ie=ae.reduce((ze,Me)=>ze+Me.averageRating*Me.totalRatings,0)/_e;return`Users submitted ${_e} ride ratings ${v==="daily"?"today":v==="weekly"?"this week":"this month"}, with an average satisfaction score of ${Ie.toFixed(2)} out of 5 stars. ${Ie>=4.5?"Users are highly satisfied with the service.":Ie>=4?"Users are generally satisfied with the service.":Ie>=3.5?"Users find the service acceptable but there's room for improvement.":"User satisfaction needs attention and improvement measures should be considered."}`})()})]})]}),$.jsxs("div",{className:"chart-section full-width",children:[$.jsxs("h2",{children:["Most Popular Stations (",v,")"]}),$.jsxs("div",{className:"chart-with-analysis",children:[$.jsx(Fp,{width:"100%",height:600,children:$.jsxs(rEe,{children:[$.jsx(Zg,{data:q(c,x,v).filter(ae=>ae.rides>0).slice(0,5),dataKey:"rides",nameKey:"stationName",cx:"50%",cy:"50%",outerRadius:180,label:({name:ae,percent:_e})=>`${ae} ${(_e*100).toFixed(0)}%`,children:q(c,x,v).filter(ae=>ae.rides>0).slice(0,5).map((ae,_e)=>$.jsx(z_,{fill:H[_e%H.length]},`cell-${_e}`))}),$.jsx(mu,{formatter:(ae,_e)=>[`${ae} rides`,_e]}),$.jsx(hf,{verticalAlign:"bottom",height:36})]})}),$.jsx(xy,{title:`Station Usage Analysis (${v})`,analysis:`For this ${v} period, the top stations account for ${q(c,x,v).filter(ae=>ae.rides>0).slice(0,5).reduce((ae,_e)=>ae+_e.rides,0)} rides out of ${x.length} total system rides. ${((we=q(c,x,v)[0])==null?void 0:we.stationName)||"N/A"} is currently the most active station with ${((Ee=q(c,x,v)[0])==null?void 0:Ee.rides)||0} rides in this period.`})]})]})]})]})]})},Uze=()=>{const[t,e]=le.useState([]),[a,r]=le.useState({}),[i,l]=le.useState({}),[c,n]=le.useState({}),[v,R]=le.useState(!0),[x,N]=le.useState("all"),[L,F]=le.useState({key:"rideEndedAt",direction:"desc"}),[j,H]=le.useState(1),q=10,[W,ee]=le.useState({totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});le.useEffect(()=>{oe()},[]);const oe=async()=>{try{const we=Hn(Er,"bikes"),Ee=await rs(we),ae={};Ee.docs.forEach(Ge=>{ae[Ge.id]=Ge.data()}),r(ae);const _e=Hn(Er,"approved_users"),Ie=await rs(_e),xe={};Ie.docs.forEach(Ge=>{const Se=Ge.data();xe[Ge.id]=`${Se.first_name} ${Se.surname}`}),l(xe);const ze=Hn(Er,"stations"),Me=await rs(ze),je={};Me.docs.forEach(Ge=>{je[Ge.id]=Ge.data().stationName}),n(je);const Ue=Hn(Er,"ride_history"),ke=(await rs(Ue)).docs.map(Ge=>{var Se;return{id:Ge.id,...Ge.data(),rideEndedAt:((Se=Ge.data().rideEndedAt)==null?void 0:Se.toDate())||new Date(Ge.data().rideEndedAt.seconds*1e3)}});e(ke),R(!1)}catch(we){console.error("Error fetching data:",we),R(!1)}},fe=we=>{const Ee=qi();switch(x){case"today":return we.filter(ae=>qi(ae.rideEndedAt).isSame(Ee,"day"));case"week":return we.filter(ae=>qi(ae.rideEndedAt).isAfter(Ee.subtract(1,"week")));case"month":return we.filter(ae=>qi(ae.rideEndedAt).isAfter(Ee.subtract(1,"month")));default:return we}};le.useEffect(()=>{const Ee=fe(t).reduce((ae,_e)=>({totalRides:ae.totalRides+1,totalRevenue:ae.totalRevenue+(_e.amountPaid||0),totalDistance:ae.totalDistance+(_e.distance||0),totalDuration:ae.totalDuration+(_e.duration||0),totalCalories:ae.totalCalories+(_e.caloriesBurned||0),totalCarbonSaved:ae.totalCarbonSaved+(_e.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});ee(Ee)},[t,x]);const se=we=>{F({key:we,direction:L.key===we&&L.direction==="asc"?"desc":"asc"})},me=Ot.useMemo(()=>[...fe(t)].sort((Ee,ae)=>L.key==="rideEndedAt"?L.direction==="asc"?Ee[L.key]-ae[L.key]:ae[L.key]-Ee[L.key]:L.direction==="asc"?Ee[L.key]>ae[L.key]?1:-1:Ee[L.key]<ae[L.key]?1:-1),[t,x,L]),ge=me.slice((j-1)*q,j*q),Re=Math.ceil(me.length/q);return $.jsxs(Kv,{children:[$.jsx(oA,{})," ",$.jsxs("div",{className:"ride-details-container",children:[$.jsx("h1",{children:"Ride Details"}),$.jsx("div",{className:"controls",children:$.jsxs("div",{className:"time-filter",children:[$.jsx("button",{className:`filter-btn ${x==="all"?"active":""}`,onClick:()=>N("all"),children:"All Time"}),$.jsx("button",{className:`filter-btn ${x==="today"?"active":""}`,onClick:()=>N("today"),children:"Today"}),$.jsx("button",{className:`filter-btn ${x==="week"?"active":""}`,onClick:()=>N("week"),children:"This Week"}),$.jsx("button",{className:`filter-btn ${x==="month"?"active":""}`,onClick:()=>N("month"),children:"This Month"})]})}),$.jsxs("div",{className:"stats-grid",children:[$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Total Rides"}),$.jsx("p",{children:W.totalRides})]}),$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Total Revenue"}),$.jsxs("p",{children:["",W.totalRevenue.toFixed(2)]})]}),$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Total Distance"}),$.jsxs("p",{children:[W.totalDistance.toFixed(2)," km"]})]}),$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Total Duration"}),$.jsxs("p",{children:[Math.round(W.totalDuration/60)," min"]})]}),$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"Calories Burned"}),$.jsxs("p",{children:[Math.round(W.totalCalories)," cal"]})]}),$.jsxs("div",{className:"stat-card",children:[$.jsx("h3",{children:"CO2 Saved"}),$.jsxs("p",{children:[W.totalCarbonSaved.toFixed(2)," kg"]})]})]}),v?$.jsx("div",{className:"loading",children:"Loading..."}):$.jsxs($.Fragment,{children:[$.jsx("div",{className:"table-container",children:$.jsxs("table",{children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsxs("th",{onClick:()=>se("rideEndedAt"),children:["Date"," ",L.key==="rideEndedAt"&&(L.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>se("userId"),children:["User"," ",L.key==="userId"&&(L.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>se("bikeId"),children:["Bike"," ",L.key==="bikeId"&&(L.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>se("duration"),children:["Duration"," ",L.key==="duration"&&(L.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>se("distance"),children:["Distance"," ",L.key==="distance"&&(L.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>se("caloriesBurned"),children:["Calories"," ",L.key==="caloriesBurned"&&(L.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>se("carbonSaved"),children:["CO2 Saved"," ",L.key==="carbonSaved"&&(L.direction==="asc"?"":"")]}),$.jsxs("th",{onClick:()=>se("amountPaid"),children:["Amount"," ",L.key==="amountPaid"&&(L.direction==="asc"?"":"")]}),$.jsx("th",{children:"Start Station"}),$.jsx("th",{children:"End Station"})]})}),$.jsx("tbody",{children:ge.map(we=>{var Ee,ae,_e,Ie;return $.jsxs("tr",{children:[$.jsx("td",{children:qi(we.rideEndedAt).format("MMM D, YYYY HH:mm")}),$.jsx("td",{children:i[we.userId]||"Unknown User"}),$.jsx("td",{children:((Ee=a[we.bikeId])==null?void 0:Ee.bikeName)||"Unknown Bike"}),$.jsxs("td",{children:[Math.round(we.duration/60)," min"]}),$.jsxs("td",{children:[((ae=we.distance)==null?void 0:ae.toFixed(2))||0," km"]}),$.jsxs("td",{children:[Math.round(we.caloriesBurned)||0," cal"]}),$.jsxs("td",{children:[((_e=we.carbonSaved)==null?void 0:_e.toFixed(2))||0," kg"]}),$.jsxs("td",{children:["",((Ie=we.amountPaid)==null?void 0:Ie.toFixed(2))||0]}),$.jsx("td",{children:c[we.startStation]||"Unknown Station"}),$.jsx("td",{children:c[we.endStation]||"Unknown Station"})]},we.id)})})]})}),$.jsxs("div",{className:"pagination-controls",children:[$.jsx("button",{className:"pagination-button",onClick:()=>H(we=>Math.max(1,we-1)),disabled:j===1,children:"Previous"}),$.jsxs("span",{className:"pagination-info",children:["Page ",j," of ",Re]}),$.jsx("button",{className:"pagination-button",onClick:()=>H(we=>Math.min(Re,we+1)),disabled:j===Re,children:"Next"})]})]})]})]})};function DT(t){"@babel/helpers - typeof";return DT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DT(t)}function Bze(t,e){if(DT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(DT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jze(t){var e=Bze(t,"string");return DT(e)=="symbol"?e:e+""}function Ba(t,e,a){return(e=jze(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function sae(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var CD,yH;function Gze(){if(yH)return CD;yH=1;var t=function(a,r,i,l,c,n,v,R){if(!a){var x;if(r===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var N=[i,l,c,n,v,R],L=0;x=new Error(r.replace(/%s/g,function(){return N[L++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}};return CD=t,CD}var Zze=Gze(),qu=sae(Zze),_i=le.createContext(null);function qze(){qu(!!le.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=le.useContext(_i);return qu(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function Hze(t,e,a){return Object.keys(t).reduce(function(i,l){return e(i,t[l],l)},a)}function $ze(t,e){Object.keys(t).forEach(a=>e(t[a],a))}function Kze(t,e,a,r){var i={},l=(c,n)=>{var v=a[n];v!==e[n]&&(i[n]=v,c(r,v))};return $ze(t,l),i}function Wze(t,e,a){var r=Hze(a,function(l,c,n){return typeof t[n]=="function"&&l.push(google.maps.event.addListener(e,c,t[n])),l},[]);return r}function Yze(t){google.maps.event.removeListener(t)}function ji(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(Yze)}function ki(t){var{updaterMap:e,eventMap:a,prevProps:r,nextProps:i,instance:l}=t,c=Wze(i,l,a);return Kze(e,r,i,l),c}var AH={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},vH={extraMapTypes(t,e){e.forEach(function(r,i){t.mapTypes.set(String(i),r)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function Xze(t){var{children:e,options:a,id:r,mapContainerStyle:i,mapContainerClassName:l,center:c,onClick:n,onDblClick:v,onDrag:R,onDragEnd:x,onDragStart:N,onMouseMove:L,onMouseOut:F,onMouseOver:j,onMouseDown:H,onMouseUp:q,onRightClick:W,onCenterChanged:ee,onLoad:oe,onUnmount:fe}=t,[se,me]=le.useState(null),ge=le.useRef(null),[Re,we]=le.useState(null),[Ee,ae]=le.useState(null),[_e,Ie]=le.useState(null),[xe,ze]=le.useState(null),[Me,je]=le.useState(null),[Ue,Qe]=le.useState(null),[ke,Ge]=le.useState(null),[Se,Te]=le.useState(null),[qe,Ze]=le.useState(null),[lt,st]=le.useState(null),[ht,He]=le.useState(null),[Ae,zt]=le.useState(null);return le.useEffect(()=>{a&&se!==null&&se.setOptions(a)},[se,a]),le.useEffect(()=>{se!==null&&typeof c<"u"&&se.setCenter(c)},[se,c]),le.useEffect(()=>{se&&v&&(Ee!==null&&google.maps.event.removeListener(Ee),ae(google.maps.event.addListener(se,"dblclick",v)))},[v]),le.useEffect(()=>{se&&x&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(se,"dragend",x)))},[x]),le.useEffect(()=>{se&&N&&(xe!==null&&google.maps.event.removeListener(xe),ze(google.maps.event.addListener(se,"dragstart",N)))},[N]),le.useEffect(()=>{se&&H&&(Me!==null&&google.maps.event.removeListener(Me),je(google.maps.event.addListener(se,"mousedown",H)))},[H]),le.useEffect(()=>{se&&L&&(Ue!==null&&google.maps.event.removeListener(Ue),Qe(google.maps.event.addListener(se,"mousemove",L)))},[L]),le.useEffect(()=>{se&&F&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(se,"mouseout",F)))},[F]),le.useEffect(()=>{se&&j&&(Se!==null&&google.maps.event.removeListener(Se),Te(google.maps.event.addListener(se,"mouseover",j)))},[j]),le.useEffect(()=>{se&&q&&(qe!==null&&google.maps.event.removeListener(qe),Ze(google.maps.event.addListener(se,"mouseup",q)))},[q]),le.useEffect(()=>{se&&W&&(lt!==null&&google.maps.event.removeListener(lt),st(google.maps.event.addListener(se,"rightclick",W)))},[W]),le.useEffect(()=>{se&&n&&(ht!==null&&google.maps.event.removeListener(ht),He(google.maps.event.addListener(se,"click",n)))},[n]),le.useEffect(()=>{se&&R&&(Ae!==null&&google.maps.event.removeListener(Ae),zt(google.maps.event.addListener(se,"drag",R)))},[R]),le.useEffect(()=>{se&&ee&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(se,"center_changed",ee)))},[n]),le.useEffect(()=>{var kt=ge.current===null?null:new google.maps.Map(ge.current,a);return me(kt),kt!==null&&oe&&oe(kt),()=>{kt!==null&&fe&&fe(kt)}},[]),$.jsx("div",{id:r,ref:ge,style:i,className:l,children:$.jsx(_i.Provider,{value:se,children:se!==null?e:null})})}le.memo(Xze);class Jze extends le.PureComponent{constructor(){super(...arguments),Ba(this,"state",{map:null}),Ba(this,"registeredEvents",[]),Ba(this,"mapRef",null),Ba(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),Ba(this,"panTo",e=>{var a=this.getInstance();a&&a.panTo(e)}),Ba(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Ba(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=ki({updaterMap:vH,eventMap:AH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:vH,eventMap:AH,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ji(this.registeredEvents))}render(){return $.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:$.jsx(_i.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function _H(t,e,a,r,i,l,c){try{var n=t[l](c),v=n.value}catch(R){return void a(R)}n.done?e(v):Promise.resolve(v).then(r,i)}function oae(t){return function(){var e=this,a=arguments;return new Promise(function(r,i){var l=t.apply(e,a);function c(v){_H(l,r,i,c,n,"next",v)}function n(v){_H(l,r,i,c,n,"throw",v)}c(void 0)})}}function lae(t){var{googleMapsApiKey:e,googleMapsClientId:a,version:r="weekly",language:i,region:l,libraries:c,channel:n,mapIds:v,authReferrerPolicy:R}=t,x=[];return qu(e&&a||!(e&&a),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?x.push("key=".concat(e)):a&&x.push("client=".concat(a)),r&&x.push("v=".concat(r)),i&&x.push("language=".concat(i)),l&&x.push("region=".concat(l)),c&&c.length&&x.push("libraries=".concat(c.sort().join(","))),n&&x.push("channel=".concat(n)),v&&v.length&&x.push("map_ids=".concat(v.join(","))),R&&x.push("auth_referrer_policy=".concat(R)),x.push("loading=async"),x.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(x.join("&"))}var Gy=typeof document<"u";function uae(t){var{url:e,id:a,nonce:r}=t;return Gy?new Promise(function(l,c){var n=document.getElementById(a),v=window;if(n){var R=n.getAttribute("data-state");if(n.src===e&&R!=="error"){if(R==="ready")return l(a);var x=v.initMap,N=n.onerror;v.initMap=function(){x&&x(),l(a)},n.onerror=function(F){N&&N(F),c(F)};return}else n.remove()}var L=document.createElement("script");L.type="text/javascript",L.src=e,L.id=a,L.async=!0,L.nonce=r||"",L.onerror=function(j){L.setAttribute("data-state","error"),c(j)},v.initMap=function(){L.setAttribute("data-state","ready"),l(a)},document.head.appendChild(L)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function wH(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function q4(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,l){return wH(i)||Reflect.apply(e,t,[i,l]),i};var a=t.appendChild.bind(t);t.appendChild=function(i){return wH(i)||Reflect.apply(a,t,[i]),i}}}var eR=!1;function cae(){return $.jsx("div",{children:"Loading..."})}var MT={id:"script-loader",version:"weekly"};class Qze extends le.PureComponent{constructor(){super(...arguments),Ba(this,"check",null),Ba(this,"state",{loaded:!1}),Ba(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Ba(this,"isCleaningUp",oae(function*(){function e(a){if(!eR)a();else if(Gy)var r=window.setInterval(function(){eR||(window.clearInterval(r),a())},1)}return new Promise(e)})),Ba(this,"cleanup",()=>{eR=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),Ba(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&q4(),qu(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:lae(this.props)};uae(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(a=>{this.props.onError&&this.props.onError(a),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Ba(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Gy){if(window.google&&window.google.maps&&!eR){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(a){console.error("Error at injecting script after cleaning up: ",a)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Gy&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Gy){this.cleanup();var e=()=>{this.check||(delete window.google,eR=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return $.jsxs($.Fragment,{children:[$.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||$.jsx(cae,{})]})}}Ba(Qze,"defaultProps",MT);function e5e(t,e){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;a[r]=t[r]}return a}function H4(t,e){if(t==null)return{};var a,r,i=e5e(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)a=l[r],e.includes(a)||{}.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var RH;function t5e(t){var{id:e=MT.id,version:a=MT.version,nonce:r,googleMapsApiKey:i,googleMapsClientId:l,language:c,region:n,libraries:v,preventGoogleFontsLoading:R,channel:x,mapIds:N,authReferrerPolicy:L}=t,F=le.useRef(!1),[j,H]=le.useState(!1),[q,W]=le.useState(void 0);le.useEffect(function(){return F.current=!0,()=>{F.current=!1}},[]),le.useEffect(function(){Gy&&R&&q4()},[R]),le.useEffect(function(){j&&qu(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[j]);var ee=lae({version:a,googleMapsApiKey:i,googleMapsClientId:l,language:c,region:n,libraries:v,channel:x,mapIds:N,authReferrerPolicy:L});le.useEffect(function(){if(!Gy)return;function se(){F.current&&(H(!0),RH=ee)}if(window.google&&window.google.maps&&RH===ee){se();return}uae({id:e,url:ee,nonce:r}).then(se).catch(function(ge){F.current&&W(ge),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(l||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(ge)})},[e,ee,r]);var oe=le.useRef(void 0);return le.useEffect(function(){oe.current&&v!==oe.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),oe.current=v},[v]),{isLoaded:j,loadError:q,url:ee}}var a5e=["loadingElement","onLoad","onError","onUnmount","children"],r5e=$.jsx(cae,{});function n5e(t){var{loadingElement:e,onLoad:a,onError:r,onUnmount:i,children:l}=t,c=H4(t,a5e),{isLoaded:n,loadError:v}=t5e(c);return le.useEffect(function(){n&&typeof a=="function"&&a()},[n,a]),le.useEffect(function(){v&&typeof r=="function"&&r(v)},[v,r]),le.useEffect(function(){return()=>{i&&i()}},[i]),n?l:e||r5e}le.memo(n5e);function i5e(t,e,a,r){function i(l){return l instanceof a?l:new a(function(c){c(l)})}return new(a||(a=Promise))(function(l,c){function n(x){try{R(r.next(x))}catch(N){c(N)}}function v(x){try{R(r.throw(x))}catch(N){c(N)}}function R(x){x.done?l(x.value):i(x.value).then(n,v)}R((r=r.apply(t,[])).next())})}function s5e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o5e=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=a.length)return!1;for(i=r;i--!==0;)if(!t(e[i],a[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(a).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[i]))return!1;for(i=r;i--!==0;){var c=l[i];if(!t(e[c],a[c]))return!1}return!0}return e!==e&&a!==a},l5e=s5e(o5e),TH="__googleMapsScriptId",r_;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(r_||(r_={}));class lv{constructor(e){var{apiKey:a,authReferrerPolicy:r,channel:i,client:l,id:c=TH,language:n,libraries:v=[],mapIds:R,nonce:x,region:N,retries:L=3,url:F="https://maps.googleapis.com/maps/api/js",version:j}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=a,this.authReferrerPolicy=r,this.channel=i,this.client=l,this.id=c||TH,this.language=n,this.libraries=v,this.mapIds=R,this.nonce=x,this.region=N,this.retries=L,this.url=F,this.version=j,lv.instance){if(!l5e(this.options,lv.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(lv.instance.options)));return lv.instance}lv.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?r_.FAILURE:this.done?r_.SUCCESS:this.loading?r_.LOADING:r_.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,a)=>{this.loadCallback(r=>{r?a(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,a;if(document.getElementById(this.id)){this.callback();return}var r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(l=>!r[l]&&delete r[l]),!((a=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||a===void 0)&&a.importLibrary||(l=>{var c,n,v,R="The Google Maps JavaScript API",x="google",N="importLibrary",L="__ib__",F=document,j=window;j=j[x]||(j[x]={});var H=j.maps||(j.maps={}),q=new Set,W=new URLSearchParams,ee=()=>c||(c=new Promise((oe,fe)=>i5e(this,void 0,void 0,function*(){var se;yield n=F.createElement("script"),n.id=this.id,W.set("libraries",[...q]+"");for(v in l)W.set(v.replace(/[A-Z]/g,me=>"_"+me[0].toLowerCase()),l[v]);W.set("callback",x+".maps."+L),n.src=this.url+"?"+W,H[L]=oe,n.onerror=()=>c=fe(Error(R+" could not load.")),n.nonce=this.nonce||((se=F.querySelector("script[nonce]"))===null||se===void 0?void 0:se.nonce)||"",F.head.append(n)})));H[N]?console.warn(R+" only loads once. Ignoring:",l):H[N]=function(oe){for(var fe=arguments.length,se=new Array(fe>1?fe-1:0),me=1;me<fe;me++)se[me-1]=arguments[me];return q.add(oe)&&ee().then(()=>H[N](oe,...se))}})(r);var i=this.libraries.map(l=>this.importLibrary(l));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),l=>{var c=new ErrorEvent("error",{error:l});this.loadErrorCallback(c)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var a=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(a," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},a)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var u5e=["maps"];function c5e(t){var{id:e=MT.id,version:a=MT.version,nonce:r,googleMapsApiKey:i,language:l,region:c,libraries:n=u5e,preventGoogleFontsLoading:v,mapIds:R,authReferrerPolicy:x}=t,N=le.useRef(!1),[L,F]=le.useState(!1),[j,H]=le.useState(void 0);le.useEffect(function(){return N.current=!0,()=>{N.current=!1}},[]);var q=le.useMemo(()=>new lv({id:e,apiKey:i,version:a,libraries:n,language:l||"en",region:c||"US",mapIds:R||[],nonce:r||"",authReferrerPolicy:x||"origin"}),[e,i,a,n,l,c,R,r,x]);le.useEffect(function(){L||q.load().then(()=>{N.current&&F(!0)}).catch(oe=>{H(oe)})},[]),le.useEffect(()=>{Gy&&v&&q4()},[v]);var W=le.useRef();return le.useEffect(()=>{W.current&&n!==W.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),W.current=n},[n]),{isLoaded:L,loadError:j}}function CH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function p2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?CH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):CH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var SH={},bH={options(t,e){t.setOptions(e)}};function d5e(t){var{options:e,onLoad:a,onUnmount:r}=t,i=le.useContext(_i),[l,c]=le.useState(null);return le.useEffect(()=>{l!==null&&l.setMap(i)},[i]),le.useEffect(()=>{e&&l!==null&&l.setOptions(e)},[l,e]),le.useEffect(()=>{var n=new google.maps.TrafficLayer(p2(p2({},e),{},{map:i}));return c(n),a&&a(n),()=>{l!==null&&(r&&r(l),l.setMap(null))}},[]),null}le.memo(d5e);class h5e extends le.PureComponent{constructor(){super(...arguments),Ba(this,"state",{trafficLayer:null}),Ba(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Ba(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(p2(p2({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:bH,eventMap:SH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:bH,eventMap:SH,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ji(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Ba(h5e,"contextType",_i);function f5e(t){var{onLoad:e,onUnmount:a}=t,r=le.useContext(_i),[i,l]=le.useState(null);return le.useEffect(()=>{i!==null&&i.setMap(r)},[r]),le.useEffect(()=>{var c=new google.maps.BicyclingLayer;return l(c),c.setMap(r),e&&e(c),()=>{c!==null&&(a&&a(c),c.setMap(null))}},[]),null}le.memo(f5e);class p5e extends le.PureComponent{constructor(){super(...arguments),Ba(this,"state",{bicyclingLayer:null}),Ba(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Ba(p5e,"contextType",_i);function m5e(t){var{onLoad:e,onUnmount:a}=t,r=le.useContext(_i),[i,l]=le.useState(null);return le.useEffect(()=>{i!==null&&i.setMap(r)},[r]),le.useEffect(()=>{var c=new google.maps.TransitLayer;return l(c),c.setMap(r),e&&e(c),()=>{i!==null&&(a&&a(i),i.setMap(null))}},[]),null}le.memo(m5e);class g5e extends le.PureComponent{constructor(){super(...arguments),Ba(this,"state",{transitLayer:null}),Ba(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Ba(g5e,"contextType",_i);function xH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function m2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?xH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var PH={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},EH={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function y5e(t){var{options:e,drawingMode:a,onCircleComplete:r,onMarkerComplete:i,onOverlayComplete:l,onPolygonComplete:c,onPolylineComplete:n,onRectangleComplete:v,onLoad:R,onUnmount:x}=t,N=le.useContext(_i),[L,F]=le.useState(null),[j,H]=le.useState(null),[q,W]=le.useState(null),[ee,oe]=le.useState(null),[fe,se]=le.useState(null),[me,ge]=le.useState(null),[Re,we]=le.useState(null);return le.useEffect(()=>{L!==null&&L.setMap(N)},[N]),le.useEffect(()=>{e&&L!==null&&L.setOptions(e)},[L,e]),le.useEffect(()=>{L!==null&&L.setDrawingMode(a??null)},[L,a]),le.useEffect(()=>{L&&r&&(j!==null&&google.maps.event.removeListener(j),H(google.maps.event.addListener(L,"circlecomplete",r)))},[L,r]),le.useEffect(()=>{L&&i&&(q!==null&&google.maps.event.removeListener(q),W(google.maps.event.addListener(L,"markercomplete",i)))},[L,i]),le.useEffect(()=>{L&&l&&(ee!==null&&google.maps.event.removeListener(ee),oe(google.maps.event.addListener(L,"overlaycomplete",l)))},[L,l]),le.useEffect(()=>{L&&c&&(fe!==null&&google.maps.event.removeListener(fe),se(google.maps.event.addListener(L,"polygoncomplete",c)))},[L,c]),le.useEffect(()=>{L&&n&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(L,"polylinecomplete",n)))},[L,n]),le.useEffect(()=>{L&&v&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(L,"rectanglecomplete",v)))},[L,v]),le.useEffect(()=>{qu(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var Ee=new google.maps.drawing.DrawingManager(m2(m2({},e),{},{map:N}));return a&&Ee.setDrawingMode(a),r&&H(google.maps.event.addListener(Ee,"circlecomplete",r)),i&&W(google.maps.event.addListener(Ee,"markercomplete",i)),l&&oe(google.maps.event.addListener(Ee,"overlaycomplete",l)),c&&se(google.maps.event.addListener(Ee,"polygoncomplete",c)),n&&ge(google.maps.event.addListener(Ee,"polylinecomplete",n)),v&&we(google.maps.event.addListener(Ee,"rectanglecomplete",v)),F(Ee),R&&R(Ee),()=>{L!==null&&(j&&google.maps.event.removeListener(j),q&&google.maps.event.removeListener(q),ee&&google.maps.event.removeListener(ee),fe&&google.maps.event.removeListener(fe),me&&google.maps.event.removeListener(me),Re&&google.maps.event.removeListener(Re),x&&x(L),L.setMap(null))}},[]),null}le.memo(y5e);class dae extends le.PureComponent{constructor(e){super(e),Ba(this,"registeredEvents",[]),Ba(this,"state",{drawingManager:null}),Ba(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),qu(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(m2(m2({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:EH,eventMap:PH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:EH,eventMap:PH,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ji(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Ba(dae,"contextType",_i);function NH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function A_(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?NH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):NH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var OH={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},VH={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},g2={};function A5e(t){var{position:e,options:a,clusterer:r,noClustererRedraw:i,children:l,draggable:c,visible:n,animation:v,clickable:R,cursor:x,icon:N,label:L,opacity:F,shape:j,title:H,zIndex:q,onClick:W,onDblClick:ee,onDrag:oe,onDragEnd:fe,onDragStart:se,onMouseOut:me,onMouseOver:ge,onMouseUp:Re,onMouseDown:we,onRightClick:Ee,onClickableChanged:ae,onCursorChanged:_e,onAnimationChanged:Ie,onDraggableChanged:xe,onFlatChanged:ze,onIconChanged:Me,onPositionChanged:je,onShapeChanged:Ue,onTitleChanged:Qe,onVisibleChanged:ke,onZindexChanged:Ge,onLoad:Se,onUnmount:Te}=t,qe=le.useContext(_i),[Ze,lt]=le.useState(null),[st,ht]=le.useState(null),[He,Ae]=le.useState(null),[zt,kt]=le.useState(null),[ma,It]=le.useState(null),[Ht,_t]=le.useState(null),[ir,Ea]=le.useState(null),[Na,Ja]=le.useState(null),[cr,dr]=le.useState(null),[Sr,ka]=le.useState(null),[Gr,dn]=le.useState(null),[Cn,fn]=le.useState(null),[va,Wa]=le.useState(null),[ua,Xa]=le.useState(null),[pr,Mn]=le.useState(null),[Sn,hn]=le.useState(null),[$r,br]=le.useState(null),[$i,zi]=le.useState(null),[Ui,ao]=le.useState(null),[di,rn]=le.useState(null),[Jn,vu]=le.useState(null),[us,Xt]=le.useState(null);le.useEffect(()=>{Ze!==null&&Ze.setMap(qe)},[qe]),le.useEffect(()=>{typeof a<"u"&&Ze!==null&&Ze.setOptions(a)},[Ze,a]),le.useEffect(()=>{typeof c<"u"&&Ze!==null&&Ze.setDraggable(c)},[Ze,c]),le.useEffect(()=>{e&&Ze!==null&&Ze.setPosition(e)},[Ze,e]),le.useEffect(()=>{typeof n<"u"&&Ze!==null&&Ze.setVisible(n)},[Ze,n]),le.useEffect(()=>{Ze==null||Ze.setAnimation(v)},[Ze,v]),le.useEffect(()=>{Ze&&R!==void 0&&Ze.setClickable(R)},[Ze,R]),le.useEffect(()=>{Ze&&x!==void 0&&Ze.setCursor(x)},[Ze,x]),le.useEffect(()=>{Ze&&N!==void 0&&Ze.setIcon(N)},[Ze,N]),le.useEffect(()=>{Ze&&L!==void 0&&Ze.setLabel(L)},[Ze,L]),le.useEffect(()=>{Ze&&F!==void 0&&Ze.setOpacity(F)},[Ze,F]),le.useEffect(()=>{Ze&&j!==void 0&&Ze.setShape(j)},[Ze,j]),le.useEffect(()=>{Ze&&H!==void 0&&Ze.setTitle(H)},[Ze,H]),le.useEffect(()=>{Ze&&q!==void 0&&Ze.setZIndex(q)},[Ze,q]),le.useEffect(()=>{Ze&&ee&&(st!==null&&google.maps.event.removeListener(st),ht(google.maps.event.addListener(Ze,"dblclick",ee)))},[ee]),le.useEffect(()=>{Ze&&fe&&(He!==null&&google.maps.event.removeListener(He),Ae(google.maps.event.addListener(Ze,"dragend",fe)))},[fe]),le.useEffect(()=>{Ze&&se&&(zt!==null&&google.maps.event.removeListener(zt),kt(google.maps.event.addListener(Ze,"dragstart",se)))},[se]),le.useEffect(()=>{Ze&&we&&(ma!==null&&google.maps.event.removeListener(ma),It(google.maps.event.addListener(Ze,"mousedown",we)))},[we]),le.useEffect(()=>{Ze&&me&&(Ht!==null&&google.maps.event.removeListener(Ht),_t(google.maps.event.addListener(Ze,"mouseout",me)))},[me]),le.useEffect(()=>{Ze&&ge&&(ir!==null&&google.maps.event.removeListener(ir),Ea(google.maps.event.addListener(Ze,"mouseover",ge)))},[ge]),le.useEffect(()=>{Ze&&Re&&(Na!==null&&google.maps.event.removeListener(Na),Ja(google.maps.event.addListener(Ze,"mouseup",Re)))},[Re]),le.useEffect(()=>{Ze&&Ee&&(cr!==null&&google.maps.event.removeListener(cr),dr(google.maps.event.addListener(Ze,"rightclick",Ee)))},[Ee]),le.useEffect(()=>{Ze&&W&&(Sr!==null&&google.maps.event.removeListener(Sr),ka(google.maps.event.addListener(Ze,"click",W)))},[W]),le.useEffect(()=>{Ze&&oe&&(Gr!==null&&google.maps.event.removeListener(Gr),dn(google.maps.event.addListener(Ze,"drag",oe)))},[oe]),le.useEffect(()=>{Ze&&ae&&(Cn!==null&&google.maps.event.removeListener(Cn),fn(google.maps.event.addListener(Ze,"clickable_changed",ae)))},[ae]),le.useEffect(()=>{Ze&&_e&&(va!==null&&google.maps.event.removeListener(va),Wa(google.maps.event.addListener(Ze,"cursor_changed",_e)))},[_e]),le.useEffect(()=>{Ze&&Ie&&(ua!==null&&google.maps.event.removeListener(ua),Xa(google.maps.event.addListener(Ze,"animation_changed",Ie)))},[Ie]),le.useEffect(()=>{Ze&&xe&&(pr!==null&&google.maps.event.removeListener(pr),Mn(google.maps.event.addListener(Ze,"draggable_changed",xe)))},[xe]),le.useEffect(()=>{Ze&&ze&&(Sn!==null&&google.maps.event.removeListener(Sn),hn(google.maps.event.addListener(Ze,"flat_changed",ze)))},[ze]),le.useEffect(()=>{Ze&&Me&&($r!==null&&google.maps.event.removeListener($r),br(google.maps.event.addListener(Ze,"icon_changed",Me)))},[Me]),le.useEffect(()=>{Ze&&je&&($i!==null&&google.maps.event.removeListener($i),zi(google.maps.event.addListener(Ze,"position_changed",je)))},[je]),le.useEffect(()=>{Ze&&Ue&&(Ui!==null&&google.maps.event.removeListener(Ui),ao(google.maps.event.addListener(Ze,"shape_changed",Ue)))},[Ue]),le.useEffect(()=>{Ze&&Qe&&(di!==null&&google.maps.event.removeListener(di),rn(google.maps.event.addListener(Ze,"title_changed",Qe)))},[Qe]),le.useEffect(()=>{Ze&&ke&&(Jn!==null&&google.maps.event.removeListener(Jn),vu(google.maps.event.addListener(Ze,"visible_changed",ke)))},[ke]),le.useEffect(()=>{Ze&&Ge&&(us!==null&&google.maps.event.removeListener(us),Xt(google.maps.event.addListener(Ze,"zindex_changed",Ge)))},[Ge]),le.useEffect(()=>{var Fe=A_(A_(A_({},a||g2),r?g2:{map:qe}),{},{position:e}),Xe=new google.maps.Marker(Fe);return r?r.addMarker(Xe,!!i):Xe.setMap(qe),e&&Xe.setPosition(e),typeof n<"u"&&Xe.setVisible(n),typeof c<"u"&&Xe.setDraggable(c),typeof R<"u"&&Xe.setClickable(R),typeof x=="string"&&Xe.setCursor(x),N&&Xe.setIcon(N),typeof L<"u"&&Xe.setLabel(L),typeof F<"u"&&Xe.setOpacity(F),j&&Xe.setShape(j),typeof H=="string"&&Xe.setTitle(H),typeof q=="number"&&Xe.setZIndex(q),ee&&ht(google.maps.event.addListener(Xe,"dblclick",ee)),fe&&Ae(google.maps.event.addListener(Xe,"dragend",fe)),se&&kt(google.maps.event.addListener(Xe,"dragstart",se)),we&&It(google.maps.event.addListener(Xe,"mousedown",we)),me&&_t(google.maps.event.addListener(Xe,"mouseout",me)),ge&&Ea(google.maps.event.addListener(Xe,"mouseover",ge)),Re&&Ja(google.maps.event.addListener(Xe,"mouseup",Re)),Ee&&dr(google.maps.event.addListener(Xe,"rightclick",Ee)),W&&ka(google.maps.event.addListener(Xe,"click",W)),oe&&dn(google.maps.event.addListener(Xe,"drag",oe)),ae&&fn(google.maps.event.addListener(Xe,"clickable_changed",ae)),_e&&Wa(google.maps.event.addListener(Xe,"cursor_changed",_e)),Ie&&Xa(google.maps.event.addListener(Xe,"animation_changed",Ie)),xe&&Mn(google.maps.event.addListener(Xe,"draggable_changed",xe)),ze&&hn(google.maps.event.addListener(Xe,"flat_changed",ze)),Me&&br(google.maps.event.addListener(Xe,"icon_changed",Me)),je&&zi(google.maps.event.addListener(Xe,"position_changed",je)),Ue&&ao(google.maps.event.addListener(Xe,"shape_changed",Ue)),Qe&&rn(google.maps.event.addListener(Xe,"title_changed",Qe)),ke&&vu(google.maps.event.addListener(Xe,"visible_changed",ke)),Ge&&Xt(google.maps.event.addListener(Xe,"zindex_changed",Ge)),lt(Xe),Se&&Se(Xe),()=>{st!==null&&google.maps.event.removeListener(st),He!==null&&google.maps.event.removeListener(He),zt!==null&&google.maps.event.removeListener(zt),ma!==null&&google.maps.event.removeListener(ma),Ht!==null&&google.maps.event.removeListener(Ht),ir!==null&&google.maps.event.removeListener(ir),Na!==null&&google.maps.event.removeListener(Na),cr!==null&&google.maps.event.removeListener(cr),Sr!==null&&google.maps.event.removeListener(Sr),Cn!==null&&google.maps.event.removeListener(Cn),va!==null&&google.maps.event.removeListener(va),ua!==null&&google.maps.event.removeListener(ua),pr!==null&&google.maps.event.removeListener(pr),Sn!==null&&google.maps.event.removeListener(Sn),$r!==null&&google.maps.event.removeListener($r),$i!==null&&google.maps.event.removeListener($i),di!==null&&google.maps.event.removeListener(di),Jn!==null&&google.maps.event.removeListener(Jn),us!==null&&google.maps.event.removeListener(us),Te&&Te(Xe),r?r.removeMarker(Xe,!!i):Xe&&Xe.setMap(null)}},[]);var Ne=le.useMemo(()=>l?le.Children.map(l,Fe=>{if(!le.isValidElement(Fe))return Fe;var Xe=Fe;return le.cloneElement(Xe,{anchor:Ze})}):null,[l,Ze]);return $.jsx($.Fragment,{children:Ne})||null}le.memo(A5e);class v5e extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[])}componentDidMount(){var e=this;return oae(function*(){var a=A_(A_(A_({},e.props.options||g2),e.props.clusterer?g2:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(a),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=ki({updaterMap:VH,eventMap:OH,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:VH,eventMap:OH,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ji(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?le.Children.map(this.props.children,a=>{if(!le.isValidElement(a))return a;var r=a;return le.cloneElement(r,{anchor:this.marker})}):null;return e||null}}Ba(v5e,"contextType",_i);var _5e=function(){function t(e,a){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=a,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var a=this.cluster.getClusterer();if(google.maps.event.trigger(a,"click",this.cluster),google.maps.event.trigger(a,"clusterclick",this.cluster),a.getZoomOnClick()){var r=a.getMaxZoom(),i=this.cluster.getBounds(),l=a.getMap();l!==null&&"fitBounds"in l&&l.fitBounds(i),this.timeOut=window.setTimeout(function(){var c=a.getMap();if(c!==null){"fitBounds"in c&&c.fitBounds(i);var n=c.getZoom()||0;r!==null&&n>r&&c.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var a=this.getMap();a!==null&&(this.boundsChangedListener=google.maps.event.addListener(a,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,a,r,i,l,c;if(this.div&&this.center){var n=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,v=this.backgroundPosition.split(" "),R=parseInt(((e=v[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),x=parseInt(((a=v[1])===null||a===void 0?void 0:a.replace(/^\s+|\s+$/g,""))||"0",10),N=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(N!==null?"".concat(N.y,"px"):"0","; left: ").concat(N!==null?"".concat(N.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var L=document.createElement("img");L.alt=n,L.src=this.url,L.width=this.width,L.height=this.height,L.setAttribute("style","position: absolute; top: ".concat(x,"px; left: ").concat(R,"px")),this.cluster.getClusterer().enableRetinaIcons||(L.style.clip="rect(-".concat(x,"px, -").concat(R+this.width,"px, -").concat(x+this.height,", -").concat(R,")"));var F=document.createElement("div");F.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(F.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((l=this.sums)===null||l===void 0)&&l.html&&(F.innerHTML="".concat((c=this.sums)===null||c===void 0?void 0:c.html)),this.div.innerHTML="",this.div.appendChild(L),this.div.appendChild(F),this.div.title=n,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var a=this.cluster.getClusterer().getStyles(),r=a[Math.min(a.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var a=this.getProjection().fromLatLngToDivPixel(e);return a!==null&&(a.x-=this.anchorIcon[1],a.y-=this.anchorIcon[0]),a},t}(),w5e=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new _5e(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),a=this.getMarkers(),r=0,i=a;r<i.length;r++){var l=i[r],c=l.getPosition();c&&e.extend(c)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var a;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+r.lat())/i,(this.center.lng()*(i-1)+r.lng())/i),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var l=this.markers.length,c=this.markerClusterer.getMaxZoom(),n=(a=this.map)===null||a===void 0?void 0:a.getZoom();if(c!==null&&typeof n<"u"&&n>c)e.getMap()!==this.map&&e.setMap(this.map);else if(l<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(l===this.minClusterSize)for(var v=0,R=this.markers;v<R.length;v++){var x=R[v];x.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var a=e.getPosition();if(a)return this.bounds.contains(a)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,a=this.markers.length,r=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof i<"u"&&i>r){this.clusterIcon.hide();return}if(a<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var a=0;a<this.markers.length;a++)if(e===this.markers[a])return!0;return!1},t}();function R5e(t,e){var a=t.length,r=a.toString().length,i=Math.min(r,e);return{text:a.toString(),index:i,title:""}}var T5e=2e3,C5e=500,S5e="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",b5e="png",x5e=[53,56,66,78,90],P5e="cluster",hae=function(){function t(e,a,r){a===void 0&&(a=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||S5e,this.imageExtension=r.imageExtension||b5e,this.imageSizes=r.imageSizes||x5e,this.calculator=r.calculator||R5e,this.batchSize=r.batchSize||T5e,this.batchSizeIE=r.batchSizeIE||C5e,this.clusterClass=r.clusterClass||P5e,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(a,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,a;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((a=this.getMap())===null||a===void 0?void 0:a.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,a=this.markers;e<a.length;e++){var r=a[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var i=0,l=this.clusters;i<l.length;i++){var c=l[i];c.remove()}this.clusters=[];for(var n=0,v=this.listeners;n<v.length;n++){var R=v[n];google.maps.event.removeListener(R)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),a=new google.maps.LatLngBounds,r=0,i=e;r<i.length;r++){var l=i[r],c=l.getPosition();c&&a.extend(c)}var n=this.getMap();n!==null&&"fitBounds"in n&&n.fitBounds(a)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,a){this.pushMarkerTo(e),a||this.redraw()},t.prototype.addMarkers=function(e,a){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];i&&this.pushMarkerTo(i)}a||this.redraw()},t.prototype.pushMarkerTo=function(e){var a=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){a.ready&&(e.isAdded=!1,a.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var a=-1;if(this.markers.indexOf)a=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){a=r;break}return a===-1?!1:(e.setMap(null),this.markers.splice(a,1),!0)},t.prototype.removeMarker=function(e,a){var r=this.removeMarker_(e);return!a&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,a){for(var r=!1,i=0,l=e;i<l.length;i++){var c=l[i];r=r||this.removeMarker_(c)}return!a&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,i=e;r<i.length;r++){var l=i[r];l.remove()}},0)},t.prototype.getExtendedBounds=function(e){var a=this.getProjection(),r=a.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var i=a.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),r!==null){var l=a.fromDivPixelToLatLng(r);l!==null&&e.extend(l)}if(i!==null){var c=a.fromDivPixelToLatLng(i);c!==null&&e.extend(c)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var a=0,r=this.clusters;a<r.length;a++){var i=r[a];i.remove()}this.clusters=[];for(var l=0,c=this.markers;l<c.length;l++){var n=c[l];n.isAdded=!1,e&&n.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,a){var r=6371,i=(a.lat()-e.lat())*Math.PI/180,l=(a.lng()-e.lng())*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(a.lat()*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return r*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},t.prototype.isMarkerInBounds=function(e,a){var r=e.getPosition();return r?a.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var a,r=4e4,i=null,l=0,c=this.clusters;l<c.length;l++){var n=c[l];a=n;var v=a.getCenter(),R=e.getPosition();if(v&&R){var x=this.distanceBetweenPoints(v,R);x<r&&(r=x,i=a)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(a=new w5e(this),a.addMarker(e),this.clusters.push(a))},t.prototype.createClusters=function(e){var a=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),i=r!==null&&("getBounds"in r)?r.getBounds():null,l=(r==null?void 0:r.getZoom())||0,c=l>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),n=this.getExtendedBounds(c),v=Math.min(e+this.batchSize,this.markers.length),R=e;R<v;R++){var x=this.markers[R];x&&!x.isAdded&&this.isMarkerInBounds(x,n)&&(!this.ignoreHidden||this.ignoreHidden&&x.getVisible())&&this.addToClosestCluster(x)}if(v<this.markers.length)this.timerRefStatic=window.setTimeout(function(){a.createClusters(v)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var N=0,L=this.clusters;N<L.length;N++){var F=L[N];F.updateIcon()}}}},t.prototype.extend=function(e,a){return(function(i){for(var l in i.prototype){var c=l;this.prototype[c]=i.prototype[c]}return this}).apply(e,[a])},t}();function zH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function E5e(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?zH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var Wf={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},vs={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},N5e={};function O5e(t){var{children:e,options:a,averageCenter:r,batchSizeIE:i,calculator:l,clusterClass:c,enableRetinaIcons:n,gridSize:v,ignoreHidden:R,imageExtension:x,imagePath:N,imageSizes:L,maxZoom:F,minimumClusterSize:j,styles:H,title:q,zoomOnClick:W,onClick:ee,onClusteringBegin:oe,onClusteringEnd:fe,onMouseOver:se,onMouseOut:me,onLoad:ge,onUnmount:Re}=t,[we,Ee]=le.useState(null),ae=le.useContext(_i),[_e,Ie]=le.useState(null),[xe,ze]=le.useState(null),[Me,je]=le.useState(null),[Ue,Qe]=le.useState(null),[ke,Ge]=le.useState(null);return le.useEffect(()=>{we&&me&&(Ue!==null&&google.maps.event.removeListener(Ue),Qe(google.maps.event.addListener(we,Wf.onMouseOut,me)))},[me]),le.useEffect(()=>{we&&se&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(we,Wf.onMouseOver,se)))},[se]),le.useEffect(()=>{we&&ee&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(we,Wf.onClick,ee)))},[ee]),le.useEffect(()=>{we&&oe&&(xe!==null&&google.maps.event.removeListener(xe),ze(google.maps.event.addListener(we,Wf.onClusteringBegin,oe)))},[oe]),le.useEffect(()=>{we&&fe&&(Me!==null&&google.maps.event.removeListener(Me),ze(google.maps.event.addListener(we,Wf.onClusteringEnd,fe)))},[fe]),le.useEffect(()=>{typeof r<"u"&&we!==null&&vs.averageCenter(we,r)},[we,r]),le.useEffect(()=>{typeof i<"u"&&we!==null&&vs.batchSizeIE(we,i)},[we,i]),le.useEffect(()=>{typeof l<"u"&&we!==null&&vs.calculator(we,l)},[we,l]),le.useEffect(()=>{typeof c<"u"&&we!==null&&vs.clusterClass(we,c)},[we,c]),le.useEffect(()=>{typeof n<"u"&&we!==null&&vs.enableRetinaIcons(we,n)},[we,n]),le.useEffect(()=>{typeof v<"u"&&we!==null&&vs.gridSize(we,v)},[we,v]),le.useEffect(()=>{typeof R<"u"&&we!==null&&vs.ignoreHidden(we,R)},[we,R]),le.useEffect(()=>{typeof x<"u"&&we!==null&&vs.imageExtension(we,x)},[we,x]),le.useEffect(()=>{typeof N<"u"&&we!==null&&vs.imagePath(we,N)},[we,N]),le.useEffect(()=>{typeof L<"u"&&we!==null&&vs.imageSizes(we,L)},[we,L]),le.useEffect(()=>{typeof F<"u"&&we!==null&&vs.maxZoom(we,F)},[we,F]),le.useEffect(()=>{typeof j<"u"&&we!==null&&vs.minimumClusterSize(we,j)},[we,j]),le.useEffect(()=>{typeof H<"u"&&we!==null&&vs.styles(we,H)},[we,H]),le.useEffect(()=>{typeof q<"u"&&we!==null&&vs.title(we,q)},[we,q]),le.useEffect(()=>{typeof W<"u"&&we!==null&&vs.zoomOnClick(we,W)},[we,W]),le.useEffect(()=>{if(ae){var Se=E5e({},a||N5e),Te=new hae(ae,[],Se);return r&&vs.averageCenter(Te,r),i&&vs.batchSizeIE(Te,i),l&&vs.calculator(Te,l),c&&vs.clusterClass(Te,c),n&&vs.enableRetinaIcons(Te,n),v&&vs.gridSize(Te,v),R&&vs.ignoreHidden(Te,R),x&&vs.imageExtension(Te,x),N&&vs.imagePath(Te,N),L&&vs.imageSizes(Te,L),F&&vs.maxZoom(Te,F),j&&vs.minimumClusterSize(Te,j),H&&vs.styles(Te,H),q&&vs.title(Te,q),W&&vs.zoomOnClick(Te,W),me&&Qe(google.maps.event.addListener(Te,Wf.onMouseOut,me)),se&&Ge(google.maps.event.addListener(Te,Wf.onMouseOver,se)),ee&&Ie(google.maps.event.addListener(Te,Wf.onClick,ee)),oe&&ze(google.maps.event.addListener(Te,Wf.onClusteringBegin,oe)),fe&&je(google.maps.event.addListener(Te,Wf.onClusteringEnd,fe)),Ee(Te),ge&&ge(Te),()=>{Ue!==null&&google.maps.event.removeListener(Ue),ke!==null&&google.maps.event.removeListener(ke),_e!==null&&google.maps.event.removeListener(_e),xe!==null&&google.maps.event.removeListener(xe),Me!==null&&google.maps.event.removeListener(Me),Re&&Re(Te)}}},[]),we!==null&&e(we)||null}le.memo(O5e);class V5e extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{markerClusterer:null}),Ba(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new hae(this.context,[],this.props.options);this.registeredEvents=ki({updaterMap:vs,eventMap:Wf,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:vs,eventMap:Wf,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ji(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Ba(V5e,"contextType",_i);function DH(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var fae=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,a=function(x){x.returnValue=!1,x.preventDefault&&x.preventDefault(),e.enableEventPropagation||DH(x)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var l=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],c=0,n=l;c<n.length;c++){var v=n[c];this.eventListeners.push(google.maps.event.addListener(this.div,v,DH))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",a),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var a=this.getMap();if(a instanceof google.maps.Map){var r=0,i=0,l=a.getBounds();l&&!l.contains(this.position)&&a.setCenter(this.position);var c=a.getDiv(),n=c.offsetWidth,v=c.offsetHeight,R=this.pixelOffset.width,x=this.pixelOffset.height,N=this.div.offsetWidth,L=this.div.offsetHeight,F=this.infoBoxClearance.width,j=this.infoBoxClearance.height,H=this.getProjection(),q=H.fromLatLngToContainerPixel(this.position);q!==null&&(q.x<-R+F?r=q.x+R-F:q.x+N+R+F>n&&(r=q.x+N+R+F-n),this.alignBottom?q.y<-x+j+L?i=q.y+x-j-L:q.y+x+j>v&&(i=q.y+x+j-v):q.y<-x+j?i=q.y+x-j:q.y+L+x+j>v&&(i=q.y+L+x+j-v)),r===0&&i===0||a.panBy(r,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(this.div.style[a]=e[a]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var a=this.div.ownerDocument,r=a&&a.defaultView?a.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),a=e.fromLatLngToDivPixel(this.position);a!==null&&(this.div.style.left=a.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(a.y+this.pixelOffset.height)+"px":this.div.style.top=a.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,a){var r=this;a&&(this.position=a.getPosition(),this.moveListener=google.maps.event.addListener(a,"position_changed",function(){var i=a.getPosition();r.setPosition(i)}),this.mapListener=google.maps.event.addListener(a,"map_changed",function(){r.setMap(a.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,a=this.eventListeners;e<a.length;e++){var r=a[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,a){return(function(i){for(var l in i.prototype)Object.prototype.hasOwnProperty.call(this,l)||(this.prototype[l]=i.prototype[l]);return this}).apply(e,[a])},t}(),z5e=["position"],D5e=["position"];function MH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function y2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?MH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):MH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var IH={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},LH={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},M5e={};function I5e(t){var{children:e,anchor:a,options:r,position:i,zIndex:l,onCloseClick:c,onDomReady:n,onContentChanged:v,onPositionChanged:R,onZindexChanged:x,onLoad:N,onUnmount:L}=t,F=le.useContext(_i),[j,H]=le.useState(null),[q,W]=le.useState(null),[ee,oe]=le.useState(null),[fe,se]=le.useState(null),[me,ge]=le.useState(null),[Re,we]=le.useState(null),Ee=le.useRef(null);return le.useEffect(()=>{F&&j!==null&&(j.close(),a?j.open(F,a):j.getPosition()&&j.open(F))},[F,j,a]),le.useEffect(()=>{r&&j!==null&&j.setOptions(r)},[j,r]),le.useEffect(()=>{if(i&&j!==null){var ae=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);j.setPosition(ae)}},[i]),le.useEffect(()=>{typeof l=="number"&&j!==null&&j.setZIndex(l)},[l]),le.useEffect(()=>{j&&c&&(q!==null&&google.maps.event.removeListener(q),W(google.maps.event.addListener(j,"closeclick",c)))},[c]),le.useEffect(()=>{j&&n&&(ee!==null&&google.maps.event.removeListener(ee),oe(google.maps.event.addListener(j,"domready",n)))},[n]),le.useEffect(()=>{j&&v&&(fe!==null&&google.maps.event.removeListener(fe),se(google.maps.event.addListener(j,"content_changed",v)))},[v]),le.useEffect(()=>{j&&R&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(j,"position_changed",R)))},[R]),le.useEffect(()=>{j&&x&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(j,"zindex_changed",x)))},[x]),le.useEffect(()=>{if(F){var ae=r||M5e,{position:_e}=ae,Ie=H4(ae,z5e),xe;_e&&!(_e instanceof google.maps.LatLng)&&(xe=new google.maps.LatLng(_e.lat,_e.lng));var ze=new fae(y2(y2({},Ie),xe?{position:xe}:{}));Ee.current=document.createElement("div"),H(ze),c&&W(google.maps.event.addListener(ze,"closeclick",c)),n&&oe(google.maps.event.addListener(ze,"domready",n)),v&&se(google.maps.event.addListener(ze,"content_changed",v)),R&&ge(google.maps.event.addListener(ze,"position_changed",R)),x&&we(google.maps.event.addListener(ze,"zindex_changed",x)),ze.setContent(Ee.current),a?ze.open(F,a):ze.getPosition()?ze.open(F):qu(!1,"You must provide either an anchor or a position prop for <InfoBox>."),N&&N(ze)}return()=>{j!==null&&(q&&google.maps.event.removeListener(q),fe&&google.maps.event.removeListener(fe),ee&&google.maps.event.removeListener(ee),me&&google.maps.event.removeListener(me),Re&&google.maps.event.removeListener(Re),L&&L(j),j.close())}},[]),Ee.current?i1.createPortal(le.Children.only(e),Ee.current):null}le.memo(I5e);class L5e extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"containerElement",null),Ba(this,"state",{infoBox:null}),Ba(this,"open",(e,a)=>{a?this.context!==null&&e.open(this.context,a):e.getPosition()?this.context!==null&&e.open(this.context):qu(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Ba(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:a}=e,r=H4(e,D5e),i;a&&!(a instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(a.lat,a.lng));var l=new fae(y2(y2({},r),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=ki({updaterMap:LH,eventMap:IH,prevProps:{},nextProps:this.props,instance:l}),this.setState({infoBox:l},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:a}=this.state;a!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:LH,eventMap:IH,prevProps:e,nextProps:this.props,instance:a}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:a}=this.state;a!==null&&(e&&e(a),ji(this.registeredEvents),a.close())}render(){return this.containerElement?i1.createPortal(le.Children.only(this.props.children),this.containerElement):null}}Ba(L5e,"contextType",_i);var SD,FH;function F5e(){return FH||(FH=1,SD=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=a.length)return!1;for(i=r;i--!==0;)if(!t(e[i],a[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(a).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[i]))return!1;for(i=r;i--!==0;){var c=l[i];if(!t(e[c],a[c]))return!1}return!0}return e!==e&&a!==a}),SD}var k5e=F5e(),kH=sae(k5e),UH=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],bD=1,tR=8;class $4{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[a,r]=new Uint8Array(e,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=r>>4;if(i!==bD)throw new Error("Got v".concat(i," data when expected v").concat(bD,"."));var l=UH[r&15];if(!l)throw new Error("Unrecognized array type.");var[c]=new Uint16Array(e,2,1),[n]=new Uint32Array(e,4,1);return new $4(n,c,l,e)}constructor(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var l=UH.indexOf(this.ArrayType),c=e*2*this.ArrayType.BYTES_PER_ELEMENT,n=e*this.IndexArrayType.BYTES_PER_ELEMENT,v=(8-n%8)%8;if(l<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,tR,e),this.coords=new this.ArrayType(this.data,tR+n+v,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(tR+c+n+v),this.ids=new this.IndexArrayType(this.data,tR,e),this.coords=new this.ArrayType(this.data,tR+n+v,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(bD<<4)+l]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=e)}add(e,a){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=a,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return r3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,a,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:l,coords:c,nodeSize:n}=this,v=[0,l.length-1,0],R=[];v.length;){var x=v.pop()||0,N=v.pop()||0,L=v.pop()||0;if(N-L<=n){for(var F=L;F<=N;F++){var j=c[2*F],H=c[2*F+1];j>=e&&j<=r&&H>=a&&H<=i&&R.push(l[F])}continue}var q=L+N>>1,W=c[2*q],ee=c[2*q+1];W>=e&&W<=r&&ee>=a&&ee<=i&&R.push(l[q]),(x===0?e<=W:a<=ee)&&(v.push(L),v.push(q-1),v.push(1-x)),(x===0?r>=W:i>=ee)&&(v.push(q+1),v.push(N),v.push(1-x))}return R}within(e,a,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:l,nodeSize:c}=this,n=[0,i.length-1,0],v=[],R=r*r;n.length;){var x=n.pop()||0,N=n.pop()||0,L=n.pop()||0;if(N-L<=c){for(var F=L;F<=N;F++)BH(l[2*F],l[2*F+1],e,a)<=R&&v.push(i[F]);continue}var j=L+N>>1,H=l[2*j],q=l[2*j+1];BH(H,q,e,a)<=R&&v.push(i[j]),(x===0?e-r<=H:a-r<=q)&&(n.push(L),n.push(j-1),n.push(1-x)),(x===0?e+r>=H:a+r>=q)&&(n.push(j+1),n.push(N),n.push(1-x))}return v}}function r3(t,e,a,r,i,l){if(!(i-r<=a)){var c=r+i>>1;pae(t,e,c,r,i,l),r3(t,e,a,r,c-1,1-l),r3(t,e,a,c+1,i,1-l)}}function pae(t,e,a,r,i,l){for(;i>r;){if(i-r>600){var c=i-r+1,n=a-r+1,v=Math.log(c),R=.5*Math.exp(2*v/3),x=.5*Math.sqrt(v*R*(c-R)/c)*(n-c/2<0?-1:1),N=Math.max(r,Math.floor(a-n*R/c+x)),L=Math.min(i,Math.floor(a+(c-n)*R/c+x));pae(t,e,a,N,L,l)}var F=e[2*a+l],j=r,H=i;for(aR(t,e,r,a),e[2*i+l]>F&&aR(t,e,r,i);j<H;){for(aR(t,e,j,H),j++,H--;e[2*j+l]<F;)j++;for(;e[2*H+l]>F;)H--}e[2*r+l]===F?aR(t,e,r,H):(H++,aR(t,e,H,i)),H<=a&&(r=H+1),a<=H&&(i=H-1)}}function aR(t,e,a,r){xD(t,a,r),xD(e,2*a,2*r),xD(e,2*a+1,2*r+1)}function xD(t,e,a){var r=t[e];t[e]=t[a],t[a]=r}function BH(t,e,a,r){var i=t-a,l=e-r;return i*i+l*l}var U5e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},jH=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),tv=2,Oy=3,PD=4,Ey=5,mae=6;class B5e{constructor(e){this.options=Object.assign(Object.create(U5e),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:a,minZoom:r,maxZoom:i}=this.options;a&&console.time("total time");var l="prepare ".concat(e.length," points");a&&console.time(l),this.points=e;for(var c=[],n=0;n<e.length;n++){var v=e[n];if(v.geometry){var[R,x]=v.geometry.coordinates,N=jH(lb(R)),L=jH(ub(x));c.push(N,L,1/0,n,-1,1),this.options.reduce&&c.push(0)}}var F=this.trees[i+1]=this._createTree(c);a&&console.timeEnd(l);for(var j=i;j>=r;j--){var H=+Date.now();F=this.trees[j]=this._createTree(this._cluster(F,j)),a&&console.log("z%d: %d clusters in %dms",j,F.numItems,+Date.now()-H)}return a&&console.timeEnd("total time"),this}getClusters(e,a){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),l=e[2]===180?180:((e[2]+180)%360+360)%360-180,c=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,l=180;else if(r>l){var n=this.getClusters([r,i,180,c],a),v=this.getClusters([-180,i,l,c],a);return n.concat(v)}var R=this.trees[this._limitZoom(a)],x=R.range(lb(r),ub(c),lb(l),ub(i)),N=R.data,L=[];for(var F of x){var j=this.stride*F;L.push(N[j+Ey]>1?GH(N,j,this.clusterProps):this.points[N[j+Oy]])}return L}getChildren(e){var a=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",l=this.trees[r];if(!l)throw new Error(i);var c=l.data;if(a*this.stride>=c.length)throw new Error(i);var n=this.options.radius/(this.options.extent*Math.pow(2,r-1)),v=c[a*this.stride],R=c[a*this.stride+1],x=l.within(v,R,n),N=[];for(var L of x){var F=L*this.stride;c[F+PD]===e&&N.push(c[F+Ey]>1?GH(c,F,this.clusterProps):this.points[c[F+Oy]])}if(N.length===0)throw new Error(i);return N}getLeaves(e,a,r){a=a||10,r=r||0;var i=[];return this._appendLeaves(i,e,a,r,0),i}getTile(e,a,r){var i=this.trees[this._limitZoom(e)],l=Math.pow(2,e),{extent:c,radius:n}=this.options,v=n/c,R=(r-v)/l,x=(r+1+v)/l,N={features:[]};return this._addTileFeatures(i.range((a-v)/l,R,(a+1+v)/l,x),i.data,a,r,l,N),a===0&&this._addTileFeatures(i.range(1-v/l,R,1,x),i.data,l,r,l,N),a===l-1&&this._addTileFeatures(i.range(0,R,v/l,x),i.data,-1,r,l,N),N.features.length?N:null}getClusterExpansionZoom(e){for(var a=this._getOriginZoom(e)-1;a<=this.options.maxZoom;){var r=this.getChildren(e);if(a++,r.length!==1)break;e=r[0].properties.cluster_id}return a}_appendLeaves(e,a,r,i,l){var c=this.getChildren(a);for(var n of c){var v=n.properties;if(v&&v.cluster?l+v.point_count<=i?l+=v.point_count:l=this._appendLeaves(e,v.cluster_id,r,i,l):l<i?l++:e.push(n),e.length===r)break}return l}_createTree(e){for(var a=new $4(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)a.add(e[r],e[r+1]);return a.finish(),a.data=e,a}_addTileFeatures(e,a,r,i,l,c){for(var n of e){var v=n*this.stride,R=a[v+Ey]>1,x=void 0,N=void 0,L=void 0;if(R)x=gae(a,v,this.clusterProps),N=a[v],L=a[v+1];else{var F=this.points[a[v+Oy]];x=F.properties;var[j,H]=F.geometry.coordinates;N=lb(j),L=ub(H)}var q={type:1,geometry:[[Math.round(this.options.extent*(N*l-r)),Math.round(this.options.extent*(L*l-i))]],tags:x},W=void 0;R||this.options.generateId?W=a[v+Oy]:W=this.points[a[v+Oy]].id,W!==void 0&&(q.id=W),c.features.push(q)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,a){for(var{radius:r,extent:i,reduce:l,minPoints:c}=this.options,n=r/(i*Math.pow(2,a)),v=e.data,R=[],x=this.stride,N=0;N<v.length;N+=x)if(!(v[N+tv]<=a)){v[N+tv]=a;var L=v[N],F=v[N+1],j=e.within(v[N],v[N+1],n),H=v[N+Ey],q=H;for(var W of j){var ee=W*x;v[ee+tv]>a&&(q+=v[ee+Ey])}if(q>H&&q>=c){var oe=L*H,fe=F*H,se=void 0,me=-1,ge=((N/x|0)<<5)+(a+1)+this.points.length;for(var Re of j){var we=Re*x;if(!(v[we+tv]<=a)){v[we+tv]=a;var Ee=v[we+Ey];oe+=v[we]*Ee,fe+=v[we+1]*Ee,v[we+PD]=ge,l&&(se||(se=this._map(v,N,!0),me=this.clusterProps.length,this.clusterProps.push(se)),l(se,this._map(v,we)))}}v[N+PD]=ge,R.push(oe/q,fe/q,1/0,ge,-1,q),l&&R.push(me)}else{for(var ae=0;ae<x;ae++)R.push(v[N+ae]);if(q>1)for(var _e of j){var Ie=_e*x;if(!(v[Ie+tv]<=a)){v[Ie+tv]=a;for(var xe=0;xe<x;xe++)R.push(v[Ie+xe])}}}}return R}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,a,r){if(e[a+Ey]>1){var i=this.clusterProps[e[a+mae]];return r?Object.assign({},i):i}var l=this.points[e[a+Oy]].properties,c=this.options.map(l);return r&&c===l?Object.assign({},c):c}}function GH(t,e,a){return{type:"Feature",id:t[e+Oy],properties:gae(t,e,a),geometry:{type:"Point",coordinates:[j5e(t[e]),G5e(t[e+1])]}}}function gae(t,e,a){var r=t[e+Ey],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,l=t[e+mae],c=l===-1?{}:Object.assign({},a[l]);return Object.assign(c,{cluster:!0,cluster_id:t[e+Oy],point_count:r,point_count_abbreviated:i})}function lb(t){return t/360+.5}function ub(t){var e=Math.sin(t*Math.PI/180),a=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return a<0?0:a>1?1:a}function j5e(t){return(t-.5)*360}function G5e(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Z5e(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(a[r[i]]=t[r[i]]);return a}class ff{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,a){this.isAdvancedMarker(e)?e.map=a:e.setMap(a)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class n3{constructor(e){var{markers:a,position:r}=e;this.markers=a,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var a of this.markers)e.extend(ff.getPosition(a));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>ff.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(ff.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class q5e{constructor(e){var{maxZoom:a=16}=e;this.maxZoom=a}noop(e){var{markers:a}=e;return H5e(a)}}var H5e=t=>{var e=t.map(a=>new n3({position:ff.getPosition(a),markers:[a]}));return e};class $5e extends q5e{constructor(e){var{maxZoom:a,radius:r=60}=e,i=Z5e(e,["maxZoom","radius"]);super({maxZoom:a}),this.state={zoom:-1},this.superCluster=new B5e(Object.assign({maxZoom:this.maxZoom,radius:r},i))}calculate(e){var a=!1,r={zoom:e.map.getZoom()};if(!kH(e.markers,this.markers)){a=!0,this.markers=[...e.markers];var i=this.markers.map(l=>{var c=ff.getPosition(l),n=[c.lng(),c.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:n},properties:{marker:l}}});this.superCluster.load(i)}return a||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(a=!kH(this.state,r)),this.state=r,a&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:a}}cluster(e){var{map:a}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(a.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[a,r]},properties:i}=e;if(i.cluster)return new n3({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(c=>c.properties.marker),position:{lat:r,lng:a}});var l=i.marker;return new n3({markers:[l],position:ff.getPosition(l)})}}class K5e{constructor(e,a){this.markers={sum:e.length};var r=a.map(l=>l.count),i=r.reduce((l,c)=>l+c,0);this.clusters={count:a.length,markers:{mean:i/a.length,sum:i,min:Math.min(...r),max:Math.max(...r)}}}}class W5e{render(e,a,r){var{count:i,position:l}=e,c=i>Math.max(10,a.clusters.markers.mean)?"#ff0000":"#0000ff",n='<svg fill="'.concat(c,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),v="Cluster of ".concat(i," markers"),R=Number(google.maps.Marker.MAX_ZINDEX)+i;if(ff.isAdvancedMarkerAvailable(r)){var x=new DOMParser,N=x.parseFromString(n,"image/svg+xml").documentElement;N.setAttribute("transform","translate(0 25)");var L={map:r,position:l,zIndex:R,title:v,content:N};return new google.maps.marker.AdvancedMarkerElement(L)}var F={position:l,zIndex:R,title:v,icon:{url:"data:image/svg+xml;base64,".concat(btoa(n)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(F)}}function Y5e(t,e){for(var a in e.prototype)t.prototype[a]=e.prototype[a]}class K4{constructor(){Y5e(K4,google.maps.OverlayView)}}var OR;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(OR||(OR={}));var X5e=(t,e,a)=>{a.fitBounds(e.bounds)};class J5e extends K4{constructor(e){var{map:a,markers:r=[],algorithmOptions:i={},algorithm:l=new $5e(i),renderer:c=new W5e,onClusterClick:n=X5e}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=l,this.renderer=c,this.onClusterClick=n,a&&this.setMap(a)}addMarker(e,a){this.markers.includes(e)||(this.markers.push(e),a||this.render())}addMarkers(e,a){e.forEach(r=>{this.addMarker(r,!0)}),a||this.render()}removeMarker(e,a){var r=this.markers.indexOf(e);return r===-1?!1:(ff.setMap(e,null),this.markers.splice(r,1),a||this.render(),!0)}removeMarkers(e,a){var r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!a&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,OR.CLUSTERING_BEGIN,this);var{clusters:a,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var i=new Set;for(var l of a)l.markers.length==1&&i.add(l.markers[0]);var c=[];for(var n of this.clusters)n.marker!=null&&(n.markers.length==1?i.has(n.marker)||ff.setMap(n.marker,null):c.push(n.marker));this.clusters=a,this.renderClusters(),requestAnimationFrame(()=>c.forEach(v=>ff.setMap(v,null)))}google.maps.event.trigger(this,OR.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>ff.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new K5e(this.markers,this.clusters),a=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,a),r.markers.forEach(i=>ff.setMap(i,null)),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,OR.CLUSTER_CLICK,r),this.onClusterClick(i,r,a)})),ff.setMap(r.marker,a)})}}function ZH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function qH(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ZH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ZH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Q5e(t){var e=qze(),[a,r]=le.useState(null);return le.useEffect(()=>{if(e&&a===null){var i=new J5e(qH(qH({},t),{},{map:e}));r(i)}},[e]),a}function eDe(t){var{children:e,options:a}=t,r=Q5e(a);return r!==null?e(r):null}le.memo(eDe);var HH={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},$H={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function tDe(t){var{children:e,anchor:a,options:r,position:i,zIndex:l,onCloseClick:c,onDomReady:n,onContentChanged:v,onPositionChanged:R,onZindexChanged:x,onLoad:N,onUnmount:L}=t,F=le.useContext(_i),[j,H]=le.useState(null),[q,W]=le.useState(null),[ee,oe]=le.useState(null),[fe,se]=le.useState(null),[me,ge]=le.useState(null),[Re,we]=le.useState(null),Ee=le.useRef(null);return le.useEffect(()=>{j!==null&&(j.close(),a?j.open(F,a):j.getPosition()&&j.open(F))},[F,j,a]),le.useEffect(()=>{r&&j!==null&&j.setOptions(r)},[j,r]),le.useEffect(()=>{i&&j!==null&&j.setPosition(i)},[i]),le.useEffect(()=>{typeof l=="number"&&j!==null&&j.setZIndex(l)},[l]),le.useEffect(()=>{j&&c&&(q!==null&&google.maps.event.removeListener(q),W(google.maps.event.addListener(j,"closeclick",c)))},[c]),le.useEffect(()=>{j&&n&&(ee!==null&&google.maps.event.removeListener(ee),oe(google.maps.event.addListener(j,"domready",n)))},[n]),le.useEffect(()=>{j&&v&&(fe!==null&&google.maps.event.removeListener(fe),se(google.maps.event.addListener(j,"content_changed",v)))},[v]),le.useEffect(()=>{j&&R&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(j,"position_changed",R)))},[R]),le.useEffect(()=>{j&&x&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(j,"zindex_changed",x)))},[x]),le.useEffect(()=>{var ae=new google.maps.InfoWindow(r);return H(ae),Ee.current=document.createElement("div"),c&&W(google.maps.event.addListener(ae,"closeclick",c)),n&&oe(google.maps.event.addListener(ae,"domready",n)),v&&se(google.maps.event.addListener(ae,"content_changed",v)),R&&ge(google.maps.event.addListener(ae,"position_changed",R)),x&&we(google.maps.event.addListener(ae,"zindex_changed",x)),ae.setContent(Ee.current),i&&ae.setPosition(i),l&&ae.setZIndex(l),a?ae.open(F,a):ae.getPosition()?ae.open(F):qu(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),N&&N(ae),()=>{q&&google.maps.event.removeListener(q),fe&&google.maps.event.removeListener(fe),ee&&google.maps.event.removeListener(ee),me&&google.maps.event.removeListener(me),Re&&google.maps.event.removeListener(Re),L&&L(ae),ae.close()}},[]),Ee.current?i1.createPortal(le.Children.only(e),Ee.current):null}le.memo(tDe);class aDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"containerElement",null),Ba(this,"state",{infoWindow:null}),Ba(this,"open",(e,a)=>{a?e.open(this.context,a):e.getPosition()?e.open(this.context):qu(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Ba(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=ki({updaterMap:$H,eventMap:HH,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:$H,eventMap:HH,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(ji(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?i1.createPortal(le.Children.only(this.props.children),this.containerElement):null}}Ba(aDe,"contextType",_i);function KH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function A2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?KH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):KH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var WH={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},YH={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},rDe={};function nDe(t){var{options:e,draggable:a,editable:r,visible:i,path:l,onDblClick:c,onDragEnd:n,onDragStart:v,onMouseDown:R,onMouseMove:x,onMouseOut:N,onMouseOver:L,onMouseUp:F,onRightClick:j,onClick:H,onDrag:q,onLoad:W,onUnmount:ee}=t,oe=le.useContext(_i),[fe,se]=le.useState(null),[me,ge]=le.useState(null),[Re,we]=le.useState(null),[Ee,ae]=le.useState(null),[_e,Ie]=le.useState(null),[xe,ze]=le.useState(null),[Me,je]=le.useState(null),[Ue,Qe]=le.useState(null),[ke,Ge]=le.useState(null),[Se,Te]=le.useState(null),[qe,Ze]=le.useState(null),[lt,st]=le.useState(null);return le.useEffect(()=>{fe!==null&&fe.setMap(oe)},[oe]),le.useEffect(()=>{typeof e<"u"&&fe!==null&&fe.setOptions(e)},[fe,e]),le.useEffect(()=>{typeof a<"u"&&fe!==null&&fe.setDraggable(a)},[fe,a]),le.useEffect(()=>{typeof r<"u"&&fe!==null&&fe.setEditable(r)},[fe,r]),le.useEffect(()=>{typeof i<"u"&&fe!==null&&fe.setVisible(i)},[fe,i]),le.useEffect(()=>{typeof l<"u"&&fe!==null&&fe.setPath(l)},[fe,l]),le.useEffect(()=>{fe&&c&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(fe,"dblclick",c)))},[c]),le.useEffect(()=>{fe&&n&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(fe,"dragend",n)))},[n]),le.useEffect(()=>{fe&&v&&(Ee!==null&&google.maps.event.removeListener(Ee),ae(google.maps.event.addListener(fe,"dragstart",v)))},[v]),le.useEffect(()=>{fe&&R&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(fe,"mousedown",R)))},[R]),le.useEffect(()=>{fe&&x&&(xe!==null&&google.maps.event.removeListener(xe),ze(google.maps.event.addListener(fe,"mousemove",x)))},[x]),le.useEffect(()=>{fe&&N&&(Me!==null&&google.maps.event.removeListener(Me),je(google.maps.event.addListener(fe,"mouseout",N)))},[N]),le.useEffect(()=>{fe&&L&&(Ue!==null&&google.maps.event.removeListener(Ue),Qe(google.maps.event.addListener(fe,"mouseover",L)))},[L]),le.useEffect(()=>{fe&&F&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(fe,"mouseup",F)))},[F]),le.useEffect(()=>{fe&&j&&(Se!==null&&google.maps.event.removeListener(Se),Te(google.maps.event.addListener(fe,"rightclick",j)))},[j]),le.useEffect(()=>{fe&&H&&(qe!==null&&google.maps.event.removeListener(qe),Ze(google.maps.event.addListener(fe,"click",H)))},[H]),le.useEffect(()=>{fe&&q&&(lt!==null&&google.maps.event.removeListener(lt),st(google.maps.event.addListener(fe,"drag",q)))},[q]),le.useEffect(()=>{var ht=new google.maps.Polyline(A2(A2({},e||rDe),{},{map:oe}));return l&&ht.setPath(l),typeof i<"u"&&ht.setVisible(i),typeof r<"u"&&ht.setEditable(r),typeof a<"u"&&ht.setDraggable(a),c&&ge(google.maps.event.addListener(ht,"dblclick",c)),n&&we(google.maps.event.addListener(ht,"dragend",n)),v&&ae(google.maps.event.addListener(ht,"dragstart",v)),R&&Ie(google.maps.event.addListener(ht,"mousedown",R)),x&&ze(google.maps.event.addListener(ht,"mousemove",x)),N&&je(google.maps.event.addListener(ht,"mouseout",N)),L&&Qe(google.maps.event.addListener(ht,"mouseover",L)),F&&Ge(google.maps.event.addListener(ht,"mouseup",F)),j&&Te(google.maps.event.addListener(ht,"rightclick",j)),H&&Ze(google.maps.event.addListener(ht,"click",H)),q&&st(google.maps.event.addListener(ht,"drag",q)),se(ht),W&&W(ht),()=>{me!==null&&google.maps.event.removeListener(me),Re!==null&&google.maps.event.removeListener(Re),Ee!==null&&google.maps.event.removeListener(Ee),_e!==null&&google.maps.event.removeListener(_e),xe!==null&&google.maps.event.removeListener(xe),Me!==null&&google.maps.event.removeListener(Me),Ue!==null&&google.maps.event.removeListener(Ue),ke!==null&&google.maps.event.removeListener(ke),Se!==null&&google.maps.event.removeListener(Se),qe!==null&&google.maps.event.removeListener(qe),ee&&ee(ht),ht.setMap(null)}},[]),null}le.memo(nDe);class iDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{polyline:null}),Ba(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(A2(A2({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:YH,eventMap:WH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:YH,eventMap:WH,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ji(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Ba(iDe,"contextType",_i);function XH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function JH(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?XH(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):XH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var QH={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},e$={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function sDe(t){var{options:e,draggable:a,editable:r,visible:i,path:l,paths:c,onDblClick:n,onDragEnd:v,onDragStart:R,onMouseDown:x,onMouseMove:N,onMouseOut:L,onMouseOver:F,onMouseUp:j,onRightClick:H,onClick:q,onDrag:W,onLoad:ee,onUnmount:oe,onEdit:fe}=t,se=le.useContext(_i),[me,ge]=le.useState(null),[Re,we]=le.useState(null),[Ee,ae]=le.useState(null),[_e,Ie]=le.useState(null),[xe,ze]=le.useState(null),[Me,je]=le.useState(null),[Ue,Qe]=le.useState(null),[ke,Ge]=le.useState(null),[Se,Te]=le.useState(null),[qe,Ze]=le.useState(null),[lt,st]=le.useState(null),[ht,He]=le.useState(null);return le.useEffect(()=>{me!==null&&me.setMap(se)},[se]),le.useEffect(()=>{typeof e<"u"&&me!==null&&me.setOptions(e)},[me,e]),le.useEffect(()=>{typeof a<"u"&&me!==null&&me.setDraggable(a)},[me,a]),le.useEffect(()=>{typeof r<"u"&&me!==null&&me.setEditable(r)},[me,r]),le.useEffect(()=>{typeof i<"u"&&me!==null&&me.setVisible(i)},[me,i]),le.useEffect(()=>{typeof l<"u"&&me!==null&&me.setPath(l)},[me,l]),le.useEffect(()=>{typeof c<"u"&&me!==null&&me.setPaths(c)},[me,c]),le.useEffect(()=>{me&&typeof n=="function"&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(me,"dblclick",n)))},[n]),le.useEffect(()=>{me&&(google.maps.event.addListener(me.getPath(),"insert_at",()=>{fe==null||fe(me)}),google.maps.event.addListener(me.getPath(),"set_at",()=>{fe==null||fe(me)}),google.maps.event.addListener(me.getPath(),"remove_at",()=>{fe==null||fe(me)}))},[me,fe]),le.useEffect(()=>{me&&typeof v=="function"&&(Ee!==null&&google.maps.event.removeListener(Ee),ae(google.maps.event.addListener(me,"dragend",v)))},[v]),le.useEffect(()=>{me&&typeof R=="function"&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(me,"dragstart",R)))},[R]),le.useEffect(()=>{me&&typeof x=="function"&&(xe!==null&&google.maps.event.removeListener(xe),ze(google.maps.event.addListener(me,"mousedown",x)))},[x]),le.useEffect(()=>{me&&typeof N=="function"&&(Me!==null&&google.maps.event.removeListener(Me),je(google.maps.event.addListener(me,"mousemove",N)))},[N]),le.useEffect(()=>{me&&typeof L=="function"&&(Ue!==null&&google.maps.event.removeListener(Ue),Qe(google.maps.event.addListener(me,"mouseout",L)))},[L]),le.useEffect(()=>{me&&typeof F=="function"&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(me,"mouseover",F)))},[F]),le.useEffect(()=>{me&&typeof j=="function"&&(Se!==null&&google.maps.event.removeListener(Se),Te(google.maps.event.addListener(me,"mouseup",j)))},[j]),le.useEffect(()=>{me&&typeof H=="function"&&(qe!==null&&google.maps.event.removeListener(qe),Ze(google.maps.event.addListener(me,"rightclick",H)))},[H]),le.useEffect(()=>{me&&typeof q=="function"&&(lt!==null&&google.maps.event.removeListener(lt),st(google.maps.event.addListener(me,"click",q)))},[q]),le.useEffect(()=>{me&&typeof W=="function"&&(ht!==null&&google.maps.event.removeListener(ht),He(google.maps.event.addListener(me,"drag",W)))},[W]),le.useEffect(()=>{var Ae=new google.maps.Polygon(JH(JH({},e),{},{map:se}));return l&&Ae.setPath(l),c&&Ae.setPaths(c),typeof i<"u"&&Ae.setVisible(i),typeof r<"u"&&Ae.setEditable(r),typeof a<"u"&&Ae.setDraggable(a),n&&we(google.maps.event.addListener(Ae,"dblclick",n)),v&&ae(google.maps.event.addListener(Ae,"dragend",v)),R&&Ie(google.maps.event.addListener(Ae,"dragstart",R)),x&&ze(google.maps.event.addListener(Ae,"mousedown",x)),N&&je(google.maps.event.addListener(Ae,"mousemove",N)),L&&Qe(google.maps.event.addListener(Ae,"mouseout",L)),F&&Ge(google.maps.event.addListener(Ae,"mouseover",F)),j&&Te(google.maps.event.addListener(Ae,"mouseup",j)),H&&Ze(google.maps.event.addListener(Ae,"rightclick",H)),q&&st(google.maps.event.addListener(Ae,"click",q)),W&&He(google.maps.event.addListener(Ae,"drag",W)),ge(Ae),ee&&ee(Ae),()=>{Re!==null&&google.maps.event.removeListener(Re),Ee!==null&&google.maps.event.removeListener(Ee),_e!==null&&google.maps.event.removeListener(_e),xe!==null&&google.maps.event.removeListener(xe),Me!==null&&google.maps.event.removeListener(Me),Ue!==null&&google.maps.event.removeListener(Ue),ke!==null&&google.maps.event.removeListener(ke),Se!==null&&google.maps.event.removeListener(Se),qe!==null&&google.maps.event.removeListener(qe),lt!==null&&google.maps.event.removeListener(lt),oe&&oe(Ae),Ae.setMap(null)}},[]),null}le.memo(sDe);class yae extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=ki({updaterMap:e$,eventMap:QH,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:e$,eventMap:QH,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),ji(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Ba(yae,"contextType",_i);function t$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function v2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?t$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):t$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var a$={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},r$={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function oDe(t){var{options:e,bounds:a,draggable:r,editable:i,visible:l,onDblClick:c,onDragEnd:n,onDragStart:v,onMouseDown:R,onMouseMove:x,onMouseOut:N,onMouseOver:L,onMouseUp:F,onRightClick:j,onClick:H,onDrag:q,onBoundsChanged:W,onLoad:ee,onUnmount:oe}=t,fe=le.useContext(_i),[se,me]=le.useState(null),[ge,Re]=le.useState(null),[we,Ee]=le.useState(null),[ae,_e]=le.useState(null),[Ie,xe]=le.useState(null),[ze,Me]=le.useState(null),[je,Ue]=le.useState(null),[Qe,ke]=le.useState(null),[Ge,Se]=le.useState(null),[Te,qe]=le.useState(null),[Ze,lt]=le.useState(null),[st,ht]=le.useState(null),[He,Ae]=le.useState(null);return le.useEffect(()=>{se!==null&&se.setMap(fe)},[fe]),le.useEffect(()=>{typeof e<"u"&&se!==null&&se.setOptions(e)},[se,e]),le.useEffect(()=>{typeof r<"u"&&se!==null&&se.setDraggable(r)},[se,r]),le.useEffect(()=>{typeof i<"u"&&se!==null&&se.setEditable(i)},[se,i]),le.useEffect(()=>{typeof l<"u"&&se!==null&&se.setVisible(l)},[se,l]),le.useEffect(()=>{typeof a<"u"&&se!==null&&se.setBounds(a)},[se,a]),le.useEffect(()=>{se&&c&&(ge!==null&&google.maps.event.removeListener(ge),Re(google.maps.event.addListener(se,"dblclick",c)))},[c]),le.useEffect(()=>{se&&n&&(we!==null&&google.maps.event.removeListener(we),Ee(google.maps.event.addListener(se,"dragend",n)))},[n]),le.useEffect(()=>{se&&v&&(ae!==null&&google.maps.event.removeListener(ae),_e(google.maps.event.addListener(se,"dragstart",v)))},[v]),le.useEffect(()=>{se&&R&&(Ie!==null&&google.maps.event.removeListener(Ie),xe(google.maps.event.addListener(se,"mousedown",R)))},[R]),le.useEffect(()=>{se&&x&&(ze!==null&&google.maps.event.removeListener(ze),Me(google.maps.event.addListener(se,"mousemove",x)))},[x]),le.useEffect(()=>{se&&N&&(je!==null&&google.maps.event.removeListener(je),Ue(google.maps.event.addListener(se,"mouseout",N)))},[N]),le.useEffect(()=>{se&&L&&(Qe!==null&&google.maps.event.removeListener(Qe),ke(google.maps.event.addListener(se,"mouseover",L)))},[L]),le.useEffect(()=>{se&&F&&(Ge!==null&&google.maps.event.removeListener(Ge),Se(google.maps.event.addListener(se,"mouseup",F)))},[F]),le.useEffect(()=>{se&&j&&(Te!==null&&google.maps.event.removeListener(Te),qe(google.maps.event.addListener(se,"rightclick",j)))},[j]),le.useEffect(()=>{se&&H&&(Ze!==null&&google.maps.event.removeListener(Ze),lt(google.maps.event.addListener(se,"click",H)))},[H]),le.useEffect(()=>{se&&q&&(st!==null&&google.maps.event.removeListener(st),ht(google.maps.event.addListener(se,"drag",q)))},[q]),le.useEffect(()=>{se&&W&&(He!==null&&google.maps.event.removeListener(He),Ae(google.maps.event.addListener(se,"bounds_changed",W)))},[W]),le.useEffect(()=>{var zt=new google.maps.Rectangle(v2(v2({},e),{},{map:fe}));return typeof l<"u"&&zt.setVisible(l),typeof i<"u"&&zt.setEditable(i),typeof r<"u"&&zt.setDraggable(r),typeof a<"u"&&zt.setBounds(a),c&&Re(google.maps.event.addListener(zt,"dblclick",c)),n&&Ee(google.maps.event.addListener(zt,"dragend",n)),v&&_e(google.maps.event.addListener(zt,"dragstart",v)),R&&xe(google.maps.event.addListener(zt,"mousedown",R)),x&&Me(google.maps.event.addListener(zt,"mousemove",x)),N&&Ue(google.maps.event.addListener(zt,"mouseout",N)),L&&ke(google.maps.event.addListener(zt,"mouseover",L)),F&&Se(google.maps.event.addListener(zt,"mouseup",F)),j&&qe(google.maps.event.addListener(zt,"rightclick",j)),H&&lt(google.maps.event.addListener(zt,"click",H)),q&&ht(google.maps.event.addListener(zt,"drag",q)),W&&Ae(google.maps.event.addListener(zt,"bounds_changed",W)),me(zt),ee&&ee(zt),()=>{ge!==null&&google.maps.event.removeListener(ge),we!==null&&google.maps.event.removeListener(we),ae!==null&&google.maps.event.removeListener(ae),Ie!==null&&google.maps.event.removeListener(Ie),ze!==null&&google.maps.event.removeListener(ze),je!==null&&google.maps.event.removeListener(je),Qe!==null&&google.maps.event.removeListener(Qe),Ge!==null&&google.maps.event.removeListener(Ge),Te!==null&&google.maps.event.removeListener(Te),Ze!==null&&google.maps.event.removeListener(Ze),st!==null&&google.maps.event.removeListener(st),He!==null&&google.maps.event.removeListener(He),oe&&oe(zt),zt.setMap(null)}},[]),null}le.memo(oDe);class lDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{rectangle:null}),Ba(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(v2(v2({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:r$,eventMap:a$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:r$,eventMap:a$,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ji(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Ba(lDe,"contextType",_i);function n$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function _2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?n$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var i$={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},s$={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},uDe={};function cDe(t){var{options:e,center:a,radius:r,draggable:i,editable:l,visible:c,onDblClick:n,onDragEnd:v,onDragStart:R,onMouseDown:x,onMouseMove:N,onMouseOut:L,onMouseOver:F,onMouseUp:j,onRightClick:H,onClick:q,onDrag:W,onCenterChanged:ee,onRadiusChanged:oe,onLoad:fe,onUnmount:se}=t,me=le.useContext(_i),[ge,Re]=le.useState(null),[we,Ee]=le.useState(null),[ae,_e]=le.useState(null),[Ie,xe]=le.useState(null),[ze,Me]=le.useState(null),[je,Ue]=le.useState(null),[Qe,ke]=le.useState(null),[Ge,Se]=le.useState(null),[Te,qe]=le.useState(null),[Ze,lt]=le.useState(null),[st,ht]=le.useState(null),[He,Ae]=le.useState(null),[zt,kt]=le.useState(null),[ma,It]=le.useState(null);return le.useEffect(()=>{ge!==null&&ge.setMap(me)},[me]),le.useEffect(()=>{typeof e<"u"&&ge!==null&&ge.setOptions(e)},[ge,e]),le.useEffect(()=>{typeof i<"u"&&ge!==null&&ge.setDraggable(i)},[ge,i]),le.useEffect(()=>{typeof l<"u"&&ge!==null&&ge.setEditable(l)},[ge,l]),le.useEffect(()=>{typeof c<"u"&&ge!==null&&ge.setVisible(c)},[ge,c]),le.useEffect(()=>{typeof r=="number"&&ge!==null&&ge.setRadius(r)},[ge,r]),le.useEffect(()=>{typeof a<"u"&&ge!==null&&ge.setCenter(a)},[ge,a]),le.useEffect(()=>{ge&&n&&(we!==null&&google.maps.event.removeListener(we),Ee(google.maps.event.addListener(ge,"dblclick",n)))},[n]),le.useEffect(()=>{ge&&v&&(ae!==null&&google.maps.event.removeListener(ae),_e(google.maps.event.addListener(ge,"dragend",v)))},[v]),le.useEffect(()=>{ge&&R&&(Ie!==null&&google.maps.event.removeListener(Ie),xe(google.maps.event.addListener(ge,"dragstart",R)))},[R]),le.useEffect(()=>{ge&&x&&(ze!==null&&google.maps.event.removeListener(ze),Me(google.maps.event.addListener(ge,"mousedown",x)))},[x]),le.useEffect(()=>{ge&&N&&(je!==null&&google.maps.event.removeListener(je),Ue(google.maps.event.addListener(ge,"mousemove",N)))},[N]),le.useEffect(()=>{ge&&L&&(Qe!==null&&google.maps.event.removeListener(Qe),ke(google.maps.event.addListener(ge,"mouseout",L)))},[L]),le.useEffect(()=>{ge&&F&&(Ge!==null&&google.maps.event.removeListener(Ge),Se(google.maps.event.addListener(ge,"mouseover",F)))},[F]),le.useEffect(()=>{ge&&j&&(Te!==null&&google.maps.event.removeListener(Te),qe(google.maps.event.addListener(ge,"mouseup",j)))},[j]),le.useEffect(()=>{ge&&H&&(Ze!==null&&google.maps.event.removeListener(Ze),lt(google.maps.event.addListener(ge,"rightclick",H)))},[H]),le.useEffect(()=>{ge&&q&&(st!==null&&google.maps.event.removeListener(st),ht(google.maps.event.addListener(ge,"click",q)))},[q]),le.useEffect(()=>{ge&&W&&(He!==null&&google.maps.event.removeListener(He),Ae(google.maps.event.addListener(ge,"drag",W)))},[W]),le.useEffect(()=>{ge&&ee&&(zt!==null&&google.maps.event.removeListener(zt),kt(google.maps.event.addListener(ge,"center_changed",ee)))},[q]),le.useEffect(()=>{ge&&oe&&(ma!==null&&google.maps.event.removeListener(ma),It(google.maps.event.addListener(ge,"radius_changed",oe)))},[oe]),le.useEffect(()=>{var Ht=new google.maps.Circle(_2(_2({},e||uDe),{},{map:me}));return typeof r=="number"&&Ht.setRadius(r),typeof a<"u"&&Ht.setCenter(a),typeof r=="number"&&Ht.setRadius(r),typeof c<"u"&&Ht.setVisible(c),typeof l<"u"&&Ht.setEditable(l),typeof i<"u"&&Ht.setDraggable(i),n&&Ee(google.maps.event.addListener(Ht,"dblclick",n)),v&&_e(google.maps.event.addListener(Ht,"dragend",v)),R&&xe(google.maps.event.addListener(Ht,"dragstart",R)),x&&Me(google.maps.event.addListener(Ht,"mousedown",x)),N&&Ue(google.maps.event.addListener(Ht,"mousemove",N)),L&&ke(google.maps.event.addListener(Ht,"mouseout",L)),F&&Se(google.maps.event.addListener(Ht,"mouseover",F)),j&&qe(google.maps.event.addListener(Ht,"mouseup",j)),H&&lt(google.maps.event.addListener(Ht,"rightclick",H)),q&&ht(google.maps.event.addListener(Ht,"click",q)),W&&Ae(google.maps.event.addListener(Ht,"drag",W)),ee&&kt(google.maps.event.addListener(Ht,"center_changed",ee)),oe&&It(google.maps.event.addListener(Ht,"radius_changed",oe)),Re(Ht),fe&&fe(Ht),()=>{we!==null&&google.maps.event.removeListener(we),ae!==null&&google.maps.event.removeListener(ae),Ie!==null&&google.maps.event.removeListener(Ie),ze!==null&&google.maps.event.removeListener(ze),je!==null&&google.maps.event.removeListener(je),Qe!==null&&google.maps.event.removeListener(Qe),Ge!==null&&google.maps.event.removeListener(Ge),Te!==null&&google.maps.event.removeListener(Te),Ze!==null&&google.maps.event.removeListener(Ze),st!==null&&google.maps.event.removeListener(st),zt!==null&&google.maps.event.removeListener(zt),ma!==null&&google.maps.event.removeListener(ma),se&&se(Ht),Ht.setMap(null)}},[]),null}le.memo(cDe);class Aae extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{circle:null}),Ba(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(_2(_2({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:s$,eventMap:i$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:s$,eventMap:i$,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),ji(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}Ba(Aae,"contextType",_i);function o$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function w2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var l$={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},u$={add(t,e){t.add(e)},addgeojson(t,e,a){t.addGeoJson(e,a)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,a,r){t.loadGeoJson(e,a,r)},overridestyle(t,e,a){t.overrideStyle(e,a)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function dDe(t){var{options:e,onClick:a,onDblClick:r,onMouseDown:i,onMouseMove:l,onMouseOut:c,onMouseOver:n,onMouseUp:v,onRightClick:R,onAddFeature:x,onRemoveFeature:N,onRemoveProperty:L,onSetGeometry:F,onSetProperty:j,onLoad:H,onUnmount:q}=t,W=le.useContext(_i),[ee,oe]=le.useState(null),[fe,se]=le.useState(null),[me,ge]=le.useState(null),[Re,we]=le.useState(null),[Ee,ae]=le.useState(null),[_e,Ie]=le.useState(null),[xe,ze]=le.useState(null),[Me,je]=le.useState(null),[Ue,Qe]=le.useState(null),[ke,Ge]=le.useState(null),[Se,Te]=le.useState(null),[qe,Ze]=le.useState(null),[lt,st]=le.useState(null),[ht,He]=le.useState(null);return le.useEffect(()=>{ee!==null&&ee.setMap(W)},[W]),le.useEffect(()=>{ee&&r&&(fe!==null&&google.maps.event.removeListener(fe),se(google.maps.event.addListener(ee,"dblclick",r)))},[r]),le.useEffect(()=>{ee&&i&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(ee,"mousedown",i)))},[i]),le.useEffect(()=>{ee&&l&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(ee,"mousemove",l)))},[l]),le.useEffect(()=>{ee&&c&&(Ee!==null&&google.maps.event.removeListener(Ee),ae(google.maps.event.addListener(ee,"mouseout",c)))},[c]),le.useEffect(()=>{ee&&n&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(ee,"mouseover",n)))},[n]),le.useEffect(()=>{ee&&v&&(xe!==null&&google.maps.event.removeListener(xe),ze(google.maps.event.addListener(ee,"mouseup",v)))},[v]),le.useEffect(()=>{ee&&R&&(Me!==null&&google.maps.event.removeListener(Me),je(google.maps.event.addListener(ee,"rightclick",R)))},[R]),le.useEffect(()=>{ee&&a&&(Ue!==null&&google.maps.event.removeListener(Ue),Qe(google.maps.event.addListener(ee,"click",a)))},[a]),le.useEffect(()=>{ee&&x&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(ee,"addfeature",x)))},[x]),le.useEffect(()=>{ee&&N&&(Se!==null&&google.maps.event.removeListener(Se),Te(google.maps.event.addListener(ee,"removefeature",N)))},[N]),le.useEffect(()=>{ee&&L&&(qe!==null&&google.maps.event.removeListener(qe),Ze(google.maps.event.addListener(ee,"removeproperty",L)))},[L]),le.useEffect(()=>{ee&&F&&(lt!==null&&google.maps.event.removeListener(lt),st(google.maps.event.addListener(ee,"setgeometry",F)))},[F]),le.useEffect(()=>{ee&&j&&(ht!==null&&google.maps.event.removeListener(ht),He(google.maps.event.addListener(ee,"setproperty",j)))},[j]),le.useEffect(()=>{if(W!==null){var Ae=new google.maps.Data(w2(w2({},e),{},{map:W}));r&&se(google.maps.event.addListener(Ae,"dblclick",r)),i&&ge(google.maps.event.addListener(Ae,"mousedown",i)),l&&we(google.maps.event.addListener(Ae,"mousemove",l)),c&&ae(google.maps.event.addListener(Ae,"mouseout",c)),n&&Ie(google.maps.event.addListener(Ae,"mouseover",n)),v&&ze(google.maps.event.addListener(Ae,"mouseup",v)),R&&je(google.maps.event.addListener(Ae,"rightclick",R)),a&&Qe(google.maps.event.addListener(Ae,"click",a)),x&&Ge(google.maps.event.addListener(Ae,"addfeature",x)),N&&Te(google.maps.event.addListener(Ae,"removefeature",N)),L&&Ze(google.maps.event.addListener(Ae,"removeproperty",L)),F&&st(google.maps.event.addListener(Ae,"setgeometry",F)),j&&He(google.maps.event.addListener(Ae,"setproperty",j)),oe(Ae),H&&H(Ae)}return()=>{ee&&(fe!==null&&google.maps.event.removeListener(fe),me!==null&&google.maps.event.removeListener(me),Re!==null&&google.maps.event.removeListener(Re),Ee!==null&&google.maps.event.removeListener(Ee),_e!==null&&google.maps.event.removeListener(_e),xe!==null&&google.maps.event.removeListener(xe),Me!==null&&google.maps.event.removeListener(Me),Ue!==null&&google.maps.event.removeListener(Ue),ke!==null&&google.maps.event.removeListener(ke),Se!==null&&google.maps.event.removeListener(Se),qe!==null&&google.maps.event.removeListener(qe),lt!==null&&google.maps.event.removeListener(lt),ht!==null&&google.maps.event.removeListener(ht),q&&q(ee),ee.setMap(null))}},[]),null}le.memo(dDe);class hDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{data:null}),Ba(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(w2(w2({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:u$,eventMap:l$,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:u$,eventMap:l$,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ji(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Ba(hDe,"contextType",_i);function c$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function d$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var h$={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},f$={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class fDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{kmlLayer:null}),Ba(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(d$(d$({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:f$,eventMap:h$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:f$,eventMap:h$,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ji(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Ba(fDe,"contextType",_i);function vae(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function pDe(t,e){return new e(t.lat,t.lng)}function mDe(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function gDe(t,e,a){return t instanceof e?t:a(t,e)}function yDe(t,e,a){return t instanceof e?t:a(t,e)}function ADe(t,e,a){var r=t&&t.fromLatLngToDivPixel(a.getNorthEast()),i=t&&t.fromLatLngToDivPixel(a.getSouthWest());return r&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-i.x-e.x,"px"),height:"".concat(i.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function vDe(t,e,a){var r=t&&t.fromLatLngToDivPixel(a);if(r){var{x:i,y:l}=r;return{left:"".concat(i+e.x,"px"),top:"".concat(l+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function _ae(t,e,a,r){return a!==void 0?ADe(t,e,yDe(a,google.maps.LatLngBounds,mDe)):vDe(t,e,gDe(r,google.maps.LatLng,pDe))}function _De(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function p$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function wDe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function RDe(t,e,a,r,i){class l extends google.maps.OverlayView{constructor(n,v,R,x){super(),this.container=n,this.pane=v,this.position=R,this.bounds=x}onAdd(){var n,v=(n=this.getPanes())===null||n===void 0?void 0:n[this.pane];v==null||v.appendChild(this.container)}draw(){var n=this.getProjection(),v=wDe({},this.container?vae(this.container,i):{x:0,y:0}),R=_ae(n,v,this.bounds,this.position);for(var[x,N]of Object.entries(R))this.container.style[x]=N}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new l(t,e,a,r)}function m$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function TDe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function g$(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function y$(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function CDe(t){var{position:e,bounds:a,mapPaneName:r,zIndex:i,onLoad:l,onUnmount:c,getPixelPositionOffset:n,children:v}=t,R=le.useContext(_i),x=le.useMemo(()=>{var L=document.createElement("div");return L.style.position="absolute",L},[]),N=le.useMemo(()=>RDe(x,r,e,a,n),[x,r,e,a]);return le.useEffect(()=>(l==null||l(N),N==null||N.setMap(R),()=>{c==null||c(N),N==null||N.setMap(null)}),[R,N]),le.useEffect(()=>{x.style.zIndex="".concat(i)},[i,x]),i1.createPortal(v,x)}le.memo(CDe);class P1 extends le.PureComponent{constructor(e){super(e),Ba(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Ba(this,"updatePane",()=>{var r=this.props.mapPaneName,i=this.overlayView.getPanes();qu(!!r,"OverlayView requires props.mapPaneName but got %s",r),i?this.setState({paneEl:i[r]}):this.setState({paneEl:null})}),Ba(this,"onAdd",()=>{var r,i;this.updatePane(),(r=(i=this.props).onLoad)===null||r===void 0||r.call(i,this.overlayView)}),Ba(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),i=TDe({x:0,y:0},this.containerRef.current?vae(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=_ae(r,i,this.props.bounds,this.props.position);if(!_De(l,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var c,n,v,R;this.setState({containerStyle:{top:(c=l.top)!==null&&c!==void 0?c:0,left:(n=l.left)!==null&&n!==void 0?n:0,width:(v=l.width)!==null&&v!==void 0?v:0,height:(R=l.height)!==null&&R!==void 0?R:0,position:"absolute"}})}}),Ba(this,"draw",()=>{this.onPositionElement()}),Ba(this,"onRemove",()=>{var r,i;this.setState(()=>({paneEl:null})),(r=(i=this.props).onUnmount)===null||r===void 0||r.call(i,this.overlayView)}),this.containerRef=le.createRef();var a=new google.maps.OverlayView;a.onAdd=this.onAdd,a.draw=this.draw,a.onRemove=this.onRemove,this.overlayView=a}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var a=g$(e.position),r=g$(this.props.position),i=y$(e.bounds),l=y$(this.props.bounds);(a!==r||i!==l)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?i1.createPortal($.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:le.Children.only(this.props.children)}),e):null}}Ba(P1,"FLOAT_PANE","floatPane");Ba(P1,"MAP_PANE","mapPane");Ba(P1,"MARKER_LAYER","markerLayer");Ba(P1,"OVERLAY_LAYER","overlayLayer");Ba(P1,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Ba(P1,"contextType",_i);function SDe(){}function A$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function v$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var _$={onDblClick:"dblclick",onClick:"click"},w$={opacity(t,e){t.setOpacity(e)}};function bDe(t){var{url:e,bounds:a,options:r,visible:i}=t,l=le.useContext(_i),c=new google.maps.LatLngBounds(new google.maps.LatLng(a.south,a.west),new google.maps.LatLng(a.north,a.east)),n=le.useMemo(()=>new google.maps.GroundOverlay(e,c,r),[]);return le.useEffect(()=>{n!==null&&n.setMap(l)},[l]),le.useEffect(()=>{typeof e<"u"&&n!==null&&(n.set("url",e),n.setMap(l))},[n,e]),le.useEffect(()=>{typeof i<"u"&&n!==null&&n.setOpacity(i?1:0)},[n,i]),le.useEffect(()=>{var v=new google.maps.LatLngBounds(new google.maps.LatLng(a.south,a.west),new google.maps.LatLng(a.north,a.east));typeof a<"u"&&n!==null&&(n.set("bounds",v),n.setMap(l))},[n,a]),null}le.memo(bDe);class wae extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{groundOverlay:null}),Ba(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){qu(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,v$(v$({},this.props.options),{},{map:this.context}));this.registeredEvents=ki({updaterMap:w$,eventMap:_$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:w$,eventMap:_$,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Ba(wae,"defaultProps",{onLoad:SDe});Ba(wae,"contextType",_i);function R$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function R2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(a),!0).forEach(function(r){Ba(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var T$={},C$={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function xDe(t){var{data:e,onLoad:a,onUnmount:r,options:i}=t,l=le.useContext(_i),[c,n]=le.useState(null);return le.useEffect(()=>{google.maps.visualization||qu(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),le.useEffect(()=>{qu(!!e,"data property is required in HeatmapLayer %s",e)},[e]),le.useEffect(()=>{c!==null&&c.setMap(l)},[l]),le.useEffect(()=>{i&&c!==null&&c.setOptions(i)},[c,i]),le.useEffect(()=>{var v=new google.maps.visualization.HeatmapLayer(R2(R2({},i),{},{data:e,map:l}));return n(v),a&&a(v),()=>{c!==null&&(r&&r(c),c.setMap(null))}},[]),null}le.memo(xDe);class PDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{heatmapLayer:null}),Ba(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){qu(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),qu(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(R2(R2({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=ki({updaterMap:C$,eventMap:T$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:C$,eventMap:T$,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ji(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Ba(PDe,"contextType",_i);var S$={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},b$={register(t,e,a){t.registerPanoProvider(e,a)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class EDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{streetViewPanorama:null}),Ba(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,a,r=(e=(a=this.context)===null||a===void 0?void 0:a.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=ki({updaterMap:b$,eventMap:S$,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:b$,eventMap:S$,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ji(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Ba(EDe,"contextType",_i);class NDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"state",{streetViewService:null}),Ba(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Ba(NDe,"contextType",_i);var x$={onDirectionsChanged:"directions_changed"},P$={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class ODe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"state",{directionsRenderer:null}),Ba(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=ki({updaterMap:P$,eventMap:x$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:P$,eventMap:x$,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ji(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Ba(ODe,"contextType",_i);var E$={onPlacesChanged:"places_changed"},N$={bounds(t,e){t.setBounds(e)}};class VDe extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"containerElement",le.createRef()),Ba(this,"state",{searchBox:null}),Ba(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(qu(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var a=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=ki({updaterMap:N$,eventMap:E$,prevProps:{},nextProps:this.props,instance:a}),this.setState(function(){return{searchBox:a}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:N$,eventMap:E$,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ji(this.registeredEvents))}render(){return $.jsx("div",{ref:this.containerElement,children:le.Children.only(this.props.children)})}}Ba(VDe,"contextType",_i);var O$={onPlaceChanged:"place_changed"},V$={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class Rae extends le.PureComponent{constructor(){super(...arguments),Ba(this,"registeredEvents",[]),Ba(this,"containerElement",le.createRef()),Ba(this,"state",{autocomplete:null}),Ba(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;qu(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var a=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(a){var r=new google.maps.places.Autocomplete(a,this.props.options);this.registeredEvents=ki({updaterMap:V$,eventMap:O$,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){ji(this.registeredEvents),this.registeredEvents=ki({updaterMap:V$,eventMap:O$,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&ji(this.registeredEvents)}render(){return $.jsx("div",{ref:this.containerElement,className:this.props.className,children:le.Children.only(this.props.children)})}}Ba(Rae,"defaultProps",{className:""});Ba(Rae,"contextType",_i);const zDe={width:"100%",height:"500px"},DDe={lat:14.69583930582976,lng:120.98925961701622},MDe=["drawing"],IDe=()=>{const[t,e]=le.useState(!0),[a,r]=le.useState(null),[i,l]=le.useState("circle"),[c,n]=le.useState([]),[v,R]=le.useState(null),[x,N]=le.useState(!1),[L,F]=le.useState([]),[j,H]=le.useState(-1),[q,W]=le.useState(null),ee=le.useRef([]),{isLoaded:oe}=c5e({id:"google-map-script",googleMapsApiKey:"AIzaSyCIaoxdmh-5kDnUuVyyCyimR_HwVgQWJYk",libraries:MDe});le.useEffect(()=>{(async()=>{try{const Me=await Xf(Ss(Er,"system_settings","coverage_area"));if(Me.exists()){const je=Me.data();je.geometries&&(n(je.geometries),F([je.geometries]),H(0))}}catch(Me){console.error("Error loading coverage areas:",Me),r("Failed to load coverage areas. Please try again.")}})()},[]);const fe=le.useCallback(ze=>{R(ze),e(!1)},[]),se=le.useCallback(()=>{R(null)},[]),me=()=>{ee.current.forEach(ze=>{ze&&typeof ze.setMap=="function"&&ze.setMap(null)}),ee.current=[]},ge=ze=>{let Me;if(ee.current.push(ze),i==="circle"){const je=ze;if(!je||typeof je.getCenter!="function"){console.error("Invalid circle object:",ze);return}const Ue=je.getCenter();Me={type:"circle",center:{lat:Ue.lat(),lng:Ue.lng()},radius:je.getRadius()}}else{const je=ze;if(!je||typeof je.getPath!="function"){console.error("Invalid polygon object:",ze);return}Me={type:"polygon",coordinates:je.getPath().getArray().map(Qe=>({lat:Qe.lat(),lng:Qe.lng()}))}}if(Me){const je=[...c,Me];n(je);const Ue=L.slice(0,j+1);Ue.push(je),F(Ue),H(Ue.length-1)}},Re=ze=>{W(ze)},we=(ze,Me,je)=>{let Ue;if(ze==="circle"){const ke=Me.getCenter();Ue={type:"circle",center:{lat:ke.lat(),lng:ke.lng()},radius:Me.getRadius()}}else Ue={type:"polygon",coordinates:Me.getPath().getArray().map(Ge=>({lat:Ge.lat(),lng:Ge.lng()}))};const Qe=c.map((ke,Ge)=>Ge===je?Ue:ke);n(Qe),W(null)},Ee=()=>{if(j>0){const ze=j-1;H(ze),n(L[ze]),W(null),me()}},ae=()=>{if(j<L.length-1){const ze=j+1;H(ze),n(L[ze]),W(null),me()}},_e=()=>{n([]),me(),W(null);const ze=L.slice(0,j+1);ze.push([]),F(ze),H(ze.length-1)},Ie=async()=>{try{N(!0),await Afe(Ss(Er,"system_settings","coverage_area"),{geometries:c,updatedAt:new Date().toISOString()}),r(null)}catch(ze){console.error("Error saving coverage areas:",ze),r("Failed to save coverage areas. Please try again.")}finally{N(!1)}},xe=()=>{l(i==="circle"?"polygon":"circle"),W(null)};return oe?$.jsxs($.Fragment,{children:[$.jsx(NL,{}),$.jsx("div",{className:"coverage-area-content",children:$.jsxs("div",{className:"coverage-area-container",children:[$.jsxs("div",{className:"coverage-area-header",children:[$.jsx("h1",{children:"Coverage Area Management"}),$.jsx("p",{children:"Define the allowed registration areas for your system"})]}),$.jsxs("div",{className:"map-controls",children:[$.jsx("button",{className:`draw-mode-btn ${i==="circle"?"active":""}`,onClick:xe,children:i==="circle"?"Switch to Polygon":"Switch to Circle"}),$.jsx("button",{className:"action-btn",onClick:Ee,disabled:j<=0,children:"Undo"}),$.jsx("button",{className:"action-btn",onClick:ae,disabled:j>=L.length-1,children:"Redo"}),$.jsx("button",{className:"action-btn",onClick:_e,disabled:c.length===0,children:"Clear"}),$.jsx("button",{className:"action-btn save",onClick:Ie,disabled:x||c.length===0,children:x?"Saving...":"Save"})]}),a&&$.jsx("div",{className:"error-message",children:a}),$.jsx("div",{className:"map-container",children:$.jsxs(Jze,{mapContainerStyle:zDe,center:DDe,zoom:15,onLoad:fe,onUnmount:se,children:[$.jsx(dae,{drawingMode:i==="circle"?"circle":"polygon",options:{drawingControl:!1,circleOptions:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,clickable:!0,editable:!1,zIndex:1},polygonOptions:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,clickable:!0,editable:!1,zIndex:1}},onCircleComplete:ge,onPolygonComplete:ge}),c.map((ze,Me)=>ze.type==="circle"?$.jsx(Aae,{center:ze.center,radius:ze.radius,options:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,editable:q===Me,clickable:!0},onClick:()=>Re(Me),onDragEnd:je=>{q===Me&&we("circle",je.overlay,Me)}},`circle-${Me}`):$.jsx(yae,{paths:ze.coordinates,options:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,editable:q===Me,clickable:!0},onClick:()=>Re(Me),onMouseUp:je=>{q===Me&&we("polygon",je.overlay,Me)}},`polygon-${Me}`))]})}),$.jsxs("div",{className:"instructions",children:[$.jsx("h3",{children:"How to use:"}),$.jsxs("ol",{children:[$.jsx("li",{children:"Click the button above to switch between Circle and Polygon drawing modes"}),$.jsx("li",{children:"Draw your coverage areas on the map (you can draw multiple areas)"}),$.jsx("li",{children:`Click "Save Areas" when you're done`}),$.jsx("li",{children:'Use "Clear All" to remove all areas and start over'}),$.jsx("li",{children:"Click a shape to select and edit it, then save your changes"})]})]})]})})]}):$.jsx("div",{className:"loading",children:"Loading map..."})};class LDe extends Ot.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("Error caught by boundary:",e,a)}render(){return this.state.hasError?$.jsxs("div",{className:"error-container",children:[$.jsx("h2",{children:"Something went wrong."}),$.jsx("p",{children:"Please refresh the page or try again later."})]}):this.props.children}}const FDe=()=>{const[t,e]=le.useState(null);return le.useEffect(()=>{g1.onAuthStateChanged(a=>{e(a)})},[]),$.jsx(LDe,{children:$.jsx(Die,{children:$.jsxs(die,{children:[$.jsx(Kf,{path:"/login",element:t?$.jsx(k5,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/dashboard",element:t?$.jsx(k5,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/user-management",element:t?$.jsx(mEe,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/bike-management",element:t?$.jsx(KOe,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/stations",element:t?$.jsx(xze,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/admin-management",element:t?$.jsx(Pze,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/rate-management",element:t?$.jsx(Eze,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/system-analytics",element:t?$.jsx(kze,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/ride-details",element:t?$.jsx(Uze,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/coverage-area",element:t?$.jsx(IDe,{}):$.jsx(Mp,{})}),$.jsx(Kf,{path:"/",element:t?$.jsx(k5,{}):$.jsx(Mp,{})})]})})})};wne.createRoot(document.getElementById("root")).render($.jsx(le.StrictMode,{children:$.jsx(FDe,{})}));export{Gs as _,ES as c,ns as g};
