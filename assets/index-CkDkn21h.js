(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=a(i);fetch(i.href,l)}})();var DS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ss(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pN={exports:{}},Mw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y6;function yne(){if(y6)return Mw;y6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(r,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var n in i)n!=="key"&&(l[n]=i[n])}else l=i;return i=l.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:l}}return Mw.Fragment=e,Mw.jsx=a,Mw.jsxs=a,Mw}var A6;function Ane(){return A6||(A6=1,pN.exports=yne()),pN.exports}var B=Ane(),mN={exports:{}},Ti={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v6;function vne(){if(v6)return Ti;v6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.iterator;function I(Ue){return Ue===null||typeof Ue!="object"?null:(Ue=N&&Ue[N]||Ue["@@iterator"],typeof Ue=="function"?Ue:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,$={};function H(Ue,ct,Se){this.props=Ue,this.context=ct,this.refs=$,this.updater=Se||k}H.prototype.isReactComponent={},H.prototype.setState=function(Ue,ct){if(typeof Ue!="object"&&typeof Ue!="function"&&Ue!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ue,ct,"setState")},H.prototype.forceUpdate=function(Ue){this.updater.enqueueForceUpdate(this,Ue,"forceUpdate")};function W(){}W.prototype=H.prototype;function ee(Ue,ct,Se){this.props=Ue,this.context=ct,this.refs=$,this.updater=Se||k}var oe=ee.prototype=new W;oe.constructor=ee,Z(oe,H.prototype),oe.isPureReactComponent=!0;var pe=Array.isArray,le={H:null,A:null,T:null,S:null},ge=Object.prototype.hasOwnProperty;function ue(Ue,ct,Se,Ie,je,Ze){return Se=Ze.ref,{$$typeof:t,type:Ue,key:ct,ref:Se!==void 0?Se:null,props:Ze}}function Re(Ue,ct){return ue(Ue.type,ct,void 0,void 0,void 0,Ue.props)}function we(Ue){return typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===t}function Ne(Ue){var ct={"=":"=0",":":"=2"};return"$"+Ue.replace(/[=:]/g,function(Se){return ct[Se]})}var ne=/\/+/g;function _e(Ue,ct){return typeof Ue=="object"&&Ue!==null&&Ue.key!=null?Ne(""+Ue.key):ct.toString(36)}function ke(){}function Pe(Ue){switch(Ue.status){case"fulfilled":return Ue.value;case"rejected":throw Ue.reason;default:switch(typeof Ue.status=="string"?Ue.then(ke,ke):(Ue.status="pending",Ue.then(function(ct){Ue.status==="pending"&&(Ue.status="fulfilled",Ue.value=ct)},function(ct){Ue.status==="pending"&&(Ue.status="rejected",Ue.reason=ct)})),Ue.status){case"fulfilled":return Ue.value;case"rejected":throw Ue.reason}}throw Ue}function Ee(Ue,ct,Se,Ie,je){var Ze=typeof Ue;(Ze==="undefined"||Ze==="boolean")&&(Ue=null);var Be=!1;if(Ue===null)Be=!0;else switch(Ze){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(Ue.$$typeof){case t:case e:Be=!0;break;case x:return Be=Ue._init,Ee(Be(Ue._payload),ct,Se,Ie,je)}}if(Be)return je=je(Ue),Be=Ie===""?"."+_e(Ue,0):Ie,pe(je)?(Se="",Be!=null&&(Se=Be.replace(ne,"$&/")+"/"),Ee(je,ct,Se,"",function(ut){return ut})):je!=null&&(we(je)&&(je=Re(je,Se+(je.key==null||Ue&&Ue.key===je.key?"":(""+je.key).replace(ne,"$&/")+"/")+Be)),ct.push(je)),1;Be=0;var Je=Ie===""?".":Ie+":";if(pe(Ue))for(var dt=0;dt<Ue.length;dt++)Ie=Ue[dt],Ze=Je+_e(Ie,dt),Be+=Ee(Ie,ct,Se,Ze,je);else if(dt=I(Ue),typeof dt=="function")for(Ue=dt.call(Ue),dt=0;!(Ie=Ue.next()).done;)Ie=Ie.value,Ze=Je+_e(Ie,dt++),Be+=Ee(Ie,ct,Se,Ze,je);else if(Ze==="object"){if(typeof Ue.then=="function")return Ee(Pe(Ue),ct,Se,Ie,je);throw ct=String(Ue),Error("Objects are not valid as a React child (found: "+(ct==="[object Object]"?"object with keys {"+Object.keys(Ue).join(", ")+"}":ct)+"). If you meant to render a collection of children, use an array instead.")}return Be}function De(Ue,ct,Se){if(Ue==null)return Ue;var Ie=[],je=0;return Ee(Ue,Ie,"","",function(Ze){return ct.call(Se,Ze,je++)}),Ie}function qe(Ue){if(Ue._status===-1){var ct=Ue._result;ct=ct(),ct.then(function(Se){(Ue._status===0||Ue._status===-1)&&(Ue._status=1,Ue._result=Se)},function(Se){(Ue._status===0||Ue._status===-1)&&(Ue._status=2,Ue._result=Se)}),Ue._status===-1&&(Ue._status=0,Ue._result=ct)}if(Ue._status===1)return Ue._result.default;throw Ue._result}var Oe=typeof reportError=="function"?reportError:function(Ue){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ct=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ue=="object"&&Ue!==null&&typeof Ue.message=="string"?String(Ue.message):String(Ue),error:Ue});if(!window.dispatchEvent(ct))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ue);return}console.error(Ue)};function He(){}return Ti.Children={map:De,forEach:function(Ue,ct,Se){De(Ue,function(){ct.apply(this,arguments)},Se)},count:function(Ue){var ct=0;return De(Ue,function(){ct++}),ct},toArray:function(Ue){return De(Ue,function(ct){return ct})||[]},only:function(Ue){if(!we(Ue))throw Error("React.Children.only expected to receive a single React element child.");return Ue}},Ti.Component=H,Ti.Fragment=a,Ti.Profiler=i,Ti.PureComponent=ee,Ti.StrictMode=r,Ti.Suspense=v,Ti.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ti.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ti.cache=function(Ue){return function(){return Ue.apply(null,arguments)}},Ti.cloneElement=function(Ue,ct,Se){if(Ue==null)throw Error("The argument must be a React element, but you passed "+Ue+".");var Ie=Z({},Ue.props),je=Ue.key,Ze=void 0;if(ct!=null)for(Be in ct.ref!==void 0&&(Ze=void 0),ct.key!==void 0&&(je=""+ct.key),ct)!ge.call(ct,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ct.ref===void 0||(Ie[Be]=ct[Be]);var Be=arguments.length-2;if(Be===1)Ie.children=Se;else if(1<Be){for(var Je=Array(Be),dt=0;dt<Be;dt++)Je[dt]=arguments[dt+2];Ie.children=Je}return ue(Ue.type,je,void 0,void 0,Ze,Ie)},Ti.createContext=function(Ue){return Ue={$$typeof:c,_currentValue:Ue,_currentValue2:Ue,_threadCount:0,Provider:null,Consumer:null},Ue.Provider=Ue,Ue.Consumer={$$typeof:l,_context:Ue},Ue},Ti.createElement=function(Ue,ct,Se){var Ie,je={},Ze=null;if(ct!=null)for(Ie in ct.key!==void 0&&(Ze=""+ct.key),ct)ge.call(ct,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(je[Ie]=ct[Ie]);var Be=arguments.length-2;if(Be===1)je.children=Se;else if(1<Be){for(var Je=Array(Be),dt=0;dt<Be;dt++)Je[dt]=arguments[dt+2];je.children=Je}if(Ue&&Ue.defaultProps)for(Ie in Be=Ue.defaultProps,Be)je[Ie]===void 0&&(je[Ie]=Be[Ie]);return ue(Ue,Ze,void 0,void 0,null,je)},Ti.createRef=function(){return{current:null}},Ti.forwardRef=function(Ue){return{$$typeof:n,render:Ue}},Ti.isValidElement=we,Ti.lazy=function(Ue){return{$$typeof:x,_payload:{_status:-1,_result:Ue},_init:qe}},Ti.memo=function(Ue,ct){return{$$typeof:R,type:Ue,compare:ct===void 0?null:ct}},Ti.startTransition=function(Ue){var ct=le.T,Se={};le.T=Se;try{var Ie=Ue(),je=le.S;je!==null&&je(Se,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(He,Oe)}catch(Ze){Oe(Ze)}finally{le.T=ct}},Ti.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ti.use=function(Ue){return le.H.use(Ue)},Ti.useActionState=function(Ue,ct,Se){return le.H.useActionState(Ue,ct,Se)},Ti.useCallback=function(Ue,ct){return le.H.useCallback(Ue,ct)},Ti.useContext=function(Ue){return le.H.useContext(Ue)},Ti.useDebugValue=function(){},Ti.useDeferredValue=function(Ue,ct){return le.H.useDeferredValue(Ue,ct)},Ti.useEffect=function(Ue,ct){return le.H.useEffect(Ue,ct)},Ti.useId=function(){return le.H.useId()},Ti.useImperativeHandle=function(Ue,ct,Se){return le.H.useImperativeHandle(Ue,ct,Se)},Ti.useInsertionEffect=function(Ue,ct){return le.H.useInsertionEffect(Ue,ct)},Ti.useLayoutEffect=function(Ue,ct){return le.H.useLayoutEffect(Ue,ct)},Ti.useMemo=function(Ue,ct){return le.H.useMemo(Ue,ct)},Ti.useOptimistic=function(Ue,ct){return le.H.useOptimistic(Ue,ct)},Ti.useReducer=function(Ue,ct,Se){return le.H.useReducer(Ue,ct,Se)},Ti.useRef=function(Ue){return le.H.useRef(Ue)},Ti.useState=function(Ue){return le.H.useState(Ue)},Ti.useSyncExternalStore=function(Ue,ct,Se){return le.H.useSyncExternalStore(Ue,ct,Se)},Ti.useTransition=function(){return le.H.useTransition()},Ti.version="19.0.0",Ti}var _6;function f3(){return _6||(_6=1,mN.exports=vne()),mN.exports}var ie=f3();const Vt=ss(ie);var gN={exports:{}},Iw={},yN={exports:{}},AN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w6;function _ne(){return w6||(w6=1,function(t){function e(De,qe){var Oe=De.length;De.push(qe);e:for(;0<Oe;){var He=Oe-1>>>1,Ue=De[He];if(0<i(Ue,qe))De[He]=qe,De[Oe]=Ue,Oe=He;else break e}}function a(De){return De.length===0?null:De[0]}function r(De){if(De.length===0)return null;var qe=De[0],Oe=De.pop();if(Oe!==qe){De[0]=Oe;e:for(var He=0,Ue=De.length,ct=Ue>>>1;He<ct;){var Se=2*(He+1)-1,Ie=De[Se],je=Se+1,Ze=De[je];if(0>i(Ie,Oe))je<Ue&&0>i(Ze,Ie)?(De[He]=Ze,De[je]=Oe,He=je):(De[He]=Ie,De[Se]=Oe,He=Se);else if(je<Ue&&0>i(Ze,Oe))De[He]=Ze,De[je]=Oe,He=je;else break e}}return qe}function i(De,qe){var Oe=De.sortIndex-qe.sortIndex;return Oe!==0?Oe:De.id-qe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,n=c.now();t.unstable_now=function(){return c.now()-n}}var v=[],R=[],x=1,N=null,I=3,k=!1,Z=!1,$=!1,H=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function oe(De){for(var qe=a(R);qe!==null;){if(qe.callback===null)r(R);else if(qe.startTime<=De)r(R),qe.sortIndex=qe.expirationTime,e(v,qe);else break;qe=a(R)}}function pe(De){if($=!1,oe(De),!Z)if(a(v)!==null)Z=!0,Pe();else{var qe=a(R);qe!==null&&Ee(pe,qe.startTime-De)}}var le=!1,ge=-1,ue=5,Re=-1;function we(){return!(t.unstable_now()-Re<ue)}function Ne(){if(le){var De=t.unstable_now();Re=De;var qe=!0;try{e:{Z=!1,$&&($=!1,W(ge),ge=-1),k=!0;var Oe=I;try{t:{for(oe(De),N=a(v);N!==null&&!(N.expirationTime>De&&we());){var He=N.callback;if(typeof He=="function"){N.callback=null,I=N.priorityLevel;var Ue=He(N.expirationTime<=De);if(De=t.unstable_now(),typeof Ue=="function"){N.callback=Ue,oe(De),qe=!0;break t}N===a(v)&&r(v),oe(De)}else r(v);N=a(v)}if(N!==null)qe=!0;else{var ct=a(R);ct!==null&&Ee(pe,ct.startTime-De),qe=!1}}break e}finally{N=null,I=Oe,k=!1}qe=void 0}}finally{qe?ne():le=!1}}}var ne;if(typeof ee=="function")ne=function(){ee(Ne)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,ke=_e.port2;_e.port1.onmessage=Ne,ne=function(){ke.postMessage(null)}}else ne=function(){H(Ne,0)};function Pe(){le||(le=!0,ne())}function Ee(De,qe){ge=H(function(){De(t.unstable_now())},qe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(De){De.callback=null},t.unstable_continueExecution=function(){Z||k||(Z=!0,Pe())},t.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<De?Math.floor(1e3/De):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return a(v)},t.unstable_next=function(De){switch(I){case 1:case 2:case 3:var qe=3;break;default:qe=I}var Oe=I;I=qe;try{return De()}finally{I=Oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(De,qe){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var Oe=I;I=De;try{return qe()}finally{I=Oe}},t.unstable_scheduleCallback=function(De,qe,Oe){var He=t.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?He+Oe:He):Oe=He,De){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=Oe+Ue,De={id:x++,callback:qe,priorityLevel:De,startTime:Oe,expirationTime:Ue,sortIndex:-1},Oe>He?(De.sortIndex=Oe,e(R,De),a(v)===null&&De===a(R)&&($?(W(ge),ge=-1):$=!0,Ee(pe,Oe-He))):(De.sortIndex=Ue,e(v,De),Z||k||(Z=!0,Pe())),De},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(De){var qe=I;return function(){var Oe=I;I=qe;try{return De.apply(this,arguments)}finally{I=Oe}}}}(AN)),AN}var R6;function wne(){return R6||(R6=1,yN.exports=_ne()),yN.exports}var vN={exports:{}},ud={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T6;function Rne(){if(T6)return ud;T6=1;var t=f3();function e(v){var R="https://react.dev/errors/"+v;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)R+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(v,R,x){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:N==null?null:""+N,children:v,containerInfo:R,implementation:x}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(v,R){if(v==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return ud.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ud.createPortal=function(v,R){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(e(299));return l(v,R,null,x)},ud.flushSync=function(v){var R=c.T,x=r.p;try{if(c.T=null,r.p=2,v)return v()}finally{c.T=R,r.p=x,r.d.f()}},ud.preconnect=function(v,R){typeof v=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,r.d.C(v,R))},ud.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},ud.preinit=function(v,R){if(typeof v=="string"&&R&&typeof R.as=="string"){var x=R.as,N=n(x,R.crossOrigin),I=typeof R.integrity=="string"?R.integrity:void 0,k=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;x==="style"?r.d.S(v,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:N,integrity:I,fetchPriority:k}):x==="script"&&r.d.X(v,{crossOrigin:N,integrity:I,fetchPriority:k,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},ud.preinitModule=function(v,R){if(typeof v=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var x=n(R.as,R.crossOrigin);r.d.M(v,{crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&r.d.M(v)},ud.preload=function(v,R){if(typeof v=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var x=R.as,N=n(x,R.crossOrigin);r.d.L(v,x,{crossOrigin:N,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},ud.preloadModule=function(v,R){if(typeof v=="string")if(R){var x=n(R.as,R.crossOrigin);r.d.m(v,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else r.d.m(v)},ud.requestFormReset=function(v){r.d.r(v)},ud.unstable_batchedUpdates=function(v,R){return v(R)},ud.useFormState=function(v,R,x){return c.H.useFormState(v,R,x)},ud.useFormStatus=function(){return c.H.useHostTransitionStatus()},ud.version="19.0.0",ud}var C6;function j$(){if(C6)return vN.exports;C6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vN.exports=Rne(),vN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S6;function Tne(){if(S6)return Iw;S6=1;var t=wne(),e=f3(),a=j$();function r(p){var w="https://react.dev/errors/"+p;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var P=2;P<arguments.length;P++)w+="&args[]="+encodeURIComponent(arguments[P])}return"Minified React error #"+p+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),k=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),pe=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function ge(p){return p===null||typeof p!="object"?null:(p=le&&p[le]||p["@@iterator"],typeof p=="function"?p:null)}var ue=Symbol.for("react.client.reference");function Re(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===ue?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case v:return"Fragment";case n:return"Portal";case x:return"Profiler";case R:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case k:return(p.displayName||"Context")+".Provider";case I:return(p._context.displayName||"Context")+".Consumer";case Z:var w=p.render;return p=p.displayName,p||(p=w.displayName||w.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case W:return w=p.displayName||null,w!==null?w:Re(p.type)||"Memo";case ee:w=p._payload,p=p._init;try{return Re(p(w))}catch{}}return null}var we=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne=Object.assign,ne,_e;function ke(p){if(ne===void 0)try{throw Error()}catch(P){var w=P.stack.trim().match(/\n( *(at )?)/);ne=w&&w[1]||"",_e=-1<P.stack.indexOf(`
    at`)?" (<anonymous>)":-1<P.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+p+_e}var Pe=!1;function Ee(p,w){if(!p||Pe)return"";Pe=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var U={DetermineComponentFrameRoot:function(){try{if(w){var sr=function(){throw Error()};if(Object.defineProperty(sr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(sr,[])}catch(Ka){var Ea=Ka}Reflect.construct(p,[],sr)}else{try{sr.call()}catch(Ka){Ea=Ka}p.call(sr.prototype)}}else{try{throw Error()}catch(Ka){Ea=Ka}(sr=p())&&typeof sr.catch=="function"&&sr.catch(function(){})}}catch(Ka){if(Ka&&Ea&&typeof Ka.stack=="string")return[Ka.stack,Ea.stack]}return[null,null]}};U.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var X=Object.getOwnPropertyDescriptor(U.DetermineComponentFrameRoot,"name");X&&X.configurable&&Object.defineProperty(U.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ce=U.DetermineComponentFrameRoot(),Ge=ce[0],ft=ce[1];if(Ge&&ft){var Bt=Ge.split(`
`),ca=ft.split(`
`);for(X=U=0;U<Bt.length&&!Bt[U].includes("DetermineComponentFrameRoot");)U++;for(;X<ca.length&&!ca[X].includes("DetermineComponentFrameRoot");)X++;if(U===Bt.length||X===ca.length)for(U=Bt.length-1,X=ca.length-1;1<=U&&0<=X&&Bt[U]!==ca[X];)X--;for(;1<=U&&0<=X;U--,X--)if(Bt[U]!==ca[X]){if(U!==1||X!==1)do if(U--,X--,0>X||Bt[U]!==ca[X]){var $a=`
`+Bt[U].replace(" at new "," at ");return p.displayName&&$a.includes("<anonymous>")&&($a=$a.replace("<anonymous>",p.displayName)),$a}while(1<=U&&0<=X);break}}}finally{Pe=!1,Error.prepareStackTrace=P}return(P=p?p.displayName||p.name:"")?ke(P):""}function De(p){switch(p.tag){case 26:case 27:case 5:return ke(p.type);case 16:return ke("Lazy");case 13:return ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return p=Ee(p.type,!1),p;case 11:return p=Ee(p.type.render,!1),p;case 1:return p=Ee(p.type,!0),p;default:return""}}function qe(p){try{var w="";do w+=De(p),p=p.return;while(p);return w}catch(P){return`
Error generating stack: `+P.message+`
`+P.stack}}function Oe(p){var w=p,P=p;if(p.alternate)for(;w.return;)w=w.return;else{p=w;do w=p,(w.flags&4098)!==0&&(P=w.return),p=w.return;while(p)}return w.tag===3?P:null}function He(p){if(p.tag===13){var w=p.memoizedState;if(w===null&&(p=p.alternate,p!==null&&(w=p.memoizedState)),w!==null)return w.dehydrated}return null}function Ue(p){if(Oe(p)!==p)throw Error(r(188))}function ct(p){var w=p.alternate;if(!w){if(w=Oe(p),w===null)throw Error(r(188));return w!==p?null:p}for(var P=p,U=w;;){var X=P.return;if(X===null)break;var ce=X.alternate;if(ce===null){if(U=X.return,U!==null){P=U;continue}break}if(X.child===ce.child){for(ce=X.child;ce;){if(ce===P)return Ue(X),p;if(ce===U)return Ue(X),w;ce=ce.sibling}throw Error(r(188))}if(P.return!==U.return)P=X,U=ce;else{for(var Ge=!1,ft=X.child;ft;){if(ft===P){Ge=!0,P=X,U=ce;break}if(ft===U){Ge=!0,U=X,P=ce;break}ft=ft.sibling}if(!Ge){for(ft=ce.child;ft;){if(ft===P){Ge=!0,P=ce,U=X;break}if(ft===U){Ge=!0,U=ce,P=X;break}ft=ft.sibling}if(!Ge)throw Error(r(189))}}if(P.alternate!==U)throw Error(r(190))}if(P.tag!==3)throw Error(r(188));return P.stateNode.current===P?p:w}function Se(p){var w=p.tag;if(w===5||w===26||w===27||w===6)return p;for(p=p.child;p!==null;){if(w=Se(p),w!==null)return w;p=p.sibling}return null}var Ie=Array.isArray,je=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze={pending:!1,data:null,method:null,action:null},Be=[],Je=-1;function dt(p){return{current:p}}function ut(p){0>Je||(p.current=Be[Je],Be[Je]=null,Je--)}function Ae(p,w){Je++,Be[Je]=p.current,p.current=w}var Dt=dt(null),Lt=dt(null),fa=dt(null),Nt=dt(null);function Ht(p,w){switch(Ae(fa,w),Ae(Lt,p),Ae(Dt,null),p=w.nodeType,p){case 9:case 11:w=(w=w.documentElement)&&(w=w.namespaceURI)?j1(w):0;break;default:if(p=p===8?w.parentNode:w,w=p.tagName,p=p.namespaceURI)p=j1(p),w=G1(p,w);else switch(w){case"svg":w=1;break;case"math":w=2;break;default:w=0}}ut(Dt),Ae(Dt,w)}function wt(){ut(Dt),ut(Lt),ut(fa)}function fr(p){p.memoizedState!==null&&Ae(Nt,p);var w=Dt.current,P=G1(w,p.type);w!==P&&(Ae(Lt,p),Ae(Dt,P))}function Ca(p){Lt.current===p&&(ut(Dt),ut(Lt)),Nt.current===p&&(ut(Nt),py._currentValue=Ze)}var za=Object.prototype.hasOwnProperty,ar=t.unstable_scheduleCallback,ur=t.unstable_cancelCallback,or=t.unstable_shouldYield,Cr=t.unstable_requestPaint,Ia=t.unstable_now,Fr=t.unstable_getCurrentPriorityLevel,tn=t.unstable_ImmediatePriority,lr=t.unstable_UserBlockingPriority,wr=t.unstable_NormalPriority,na=t.unstable_LowPriority,Oa=t.unstable_IdlePriority,ra=t.log,ja=t.unstable_setDisableYieldValue,gr=null,Tn=null;function an(p){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(gr,p,void 0,(p.current.flags&128)===128)}catch{}}function dn(p){if(typeof ra=="function"&&ja(p),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(gr,p)}catch{}}var Yr=Math.clz32?Math.clz32:gi,Pr=Math.log,ki=Math.LN2;function gi(p){return p>>>=0,p===0?32:31-(Pr(p)/ki|0)|0}var oi=128,Cs=4194304;function Aa(p){var w=p&42;if(w!==0)return w;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function mr(p,w){var P=p.pendingLanes;if(P===0)return 0;var U=0,X=p.suspendedLanes,ce=p.pingedLanes,Ge=p.warmLanes;p=p.finishedLanes!==0;var ft=P&134217727;return ft!==0?(P=ft&~X,P!==0?U=Aa(P):(ce&=ft,ce!==0?U=Aa(ce):p||(Ge=ft&~Ge,Ge!==0&&(U=Aa(Ge))))):(ft=P&~X,ft!==0?U=Aa(ft):ce!==0?U=Aa(ce):p||(Ge=P&~Ge,Ge!==0&&(U=Aa(Ge)))),U===0?0:w!==0&&w!==U&&(w&X)===0&&(X=U&-U,Ge=w&-w,X>=Ge||X===32&&(Ge&4194176)!==0)?w:U}function Zr(p,w){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&w)===0}function ti(p,w){switch(p){case 1:case 2:case 4:case 8:return w+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(){var p=oi;return oi<<=1,(oi&4194176)===0&&(oi=128),p}function Zt(){var p=Cs;return Cs<<=1,(Cs&62914560)===0&&(Cs=4194304),p}function xe(p){for(var w=[],P=0;31>P;P++)w.push(p);return w}function Le(p,w){p.pendingLanes|=w,w!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function $e(p,w,P,U,X,ce){var Ge=p.pendingLanes;p.pendingLanes=P,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=P,p.entangledLanes&=P,p.errorRecoveryDisabledLanes&=P,p.shellSuspendCounter=0;var ft=p.entanglements,Bt=p.expirationTimes,ca=p.hiddenUpdates;for(P=Ge&~P;0<P;){var $a=31-Yr(P),sr=1<<$a;ft[$a]=0,Bt[$a]=-1;var Ea=ca[$a];if(Ea!==null)for(ca[$a]=null,$a=0;$a<Ea.length;$a++){var Ka=Ea[$a];Ka!==null&&(Ka.lane&=-536870913)}P&=~sr}U!==0&&yt(p,U,0),ce!==0&&X===0&&p.tag!==0&&(p.suspendedLanes|=ce&~(Ge&~w))}function yt(p,w,P){p.pendingLanes|=w,p.suspendedLanes&=~w;var U=31-Yr(w);p.entangledLanes|=w,p.entanglements[U]=p.entanglements[U]|1073741824|P&4194218}function At(p,w){var P=p.entangledLanes|=w;for(p=p.entanglements;P;){var U=31-Yr(P),X=1<<U;X&w|p[U]&w&&(p[U]|=w),P&=~X}}function bt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Gt(){var p=je.p;return p!==0?p:(p=window.event,p===void 0?32:XC(p.type))}function Et(p,w){var P=je.p;try{return je.p=p,w()}finally{je.p=P}}var Wt=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Wt,Kt="__reactProps$"+Wt,Sa="__reactContainer$"+Wt,Fa="__reactEvents$"+Wt,qa="__reactListeners$"+Wt,br="__reactHandles$"+Wt,Ir="__reactResources$"+Wt,Lr="__reactMarker$"+Wt;function Wr(p){delete p[Yt],delete p[Kt],delete p[Fa],delete p[qa],delete p[br]}function Un(p){var w=p[Yt];if(w)return w;for(var P=p.parentNode;P;){if(w=P[Sa]||P[Yt]){if(P=w.alternate,w.child!==null||P!==null&&P.child!==null)for(p=$1(p);p!==null;){if(P=p[Yt])return P;p=$1(p)}return w}p=P,P=p.parentNode}return null}function ri(p){if(p=p[Yt]||p[Sa]){var w=p.tag;if(w===5||w===6||w===13||w===26||w===27||w===3)return p}return null}function Jr(p){var w=p.tag;if(w===5||w===26||w===27||w===6)return p.stateNode;throw Error(r(33))}function Cn(p){var w=p[Ir];return w||(w=p[Ir]={hoistableStyles:new Map,hoistableScripts:new Map}),w}function Qr(p){p[Lr]=!0}var jn=new Set,Ui={};function Xi(p,w){Ps(p,w),Ps(p+"Capture",w)}function Ps(p,w){for(Ui[p]=w,p=0;p<w.length;p++)jn.add(w[p])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},$s={};function pc(p){return za.call($s,p)?!0:za.call(Ns,p)?!1:Bo.test(p)?$s[p]=!0:(Ns[p]=!0,!1)}function al(p,w,P){if(pc(w))if(P===null)p.removeAttribute(w);else{switch(typeof P){case"undefined":case"function":case"symbol":p.removeAttribute(w);return;case"boolean":var U=w.toLowerCase().slice(0,5);if(U!=="data-"&&U!=="aria-"){p.removeAttribute(w);return}}p.setAttribute(w,""+P)}}function Bi(p,w,P){if(P===null)p.removeAttribute(w);else{switch(typeof P){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(w);return}p.setAttribute(w,""+P)}}function Jl(p,w,P,U){if(U===null)p.removeAttribute(P);else{switch(typeof U){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(P);return}p.setAttributeNS(w,P,""+U)}}function jo(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Ed(p){var w=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(w==="checkbox"||w==="radio")}function Uc(p){var w=Ed(p)?"checked":"value",P=Object.getOwnPropertyDescriptor(p.constructor.prototype,w),U=""+p[w];if(!p.hasOwnProperty(w)&&typeof P<"u"&&typeof P.get=="function"&&typeof P.set=="function"){var X=P.get,ce=P.set;return Object.defineProperty(p,w,{configurable:!0,get:function(){return X.call(this)},set:function(Ge){U=""+Ge,ce.call(this,Ge)}}),Object.defineProperty(p,w,{enumerable:P.enumerable}),{getValue:function(){return U},setValue:function(Ge){U=""+Ge},stopTracking:function(){p._valueTracker=null,delete p[w]}}}}function gh(p){p._valueTracker||(p._valueTracker=Uc(p))}function wu(p){if(!p)return!1;var w=p._valueTracker;if(!w)return!0;var P=w.getValue(),U="";return p&&(U=Ed(p)?p.checked?"true":"false":p.value),p=U,p!==P?(w.setValue(p),!0):!1}function Bc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var Al=/[\n"\\]/g;function no(p){return p.replace(Al,function(w){return"\\"+w.charCodeAt(0).toString(16)+" "})}function Go(p,w,P,U,X,ce,Ge,ft){p.name="",Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&typeof Ge!="boolean"?p.type=Ge:p.removeAttribute("type"),w!=null?Ge==="number"?(w===0&&p.value===""||p.value!=w)&&(p.value=""+jo(w)):p.value!==""+jo(w)&&(p.value=""+jo(w)):Ge!=="submit"&&Ge!=="reset"||p.removeAttribute("value"),w!=null?Ru(p,Ge,jo(w)):P!=null?Ru(p,Ge,jo(P)):U!=null&&p.removeAttribute("value"),X==null&&ce!=null&&(p.defaultChecked=!!ce),X!=null&&(p.checked=X&&typeof X!="function"&&typeof X!="symbol"),ft!=null&&typeof ft!="function"&&typeof ft!="symbol"&&typeof ft!="boolean"?p.name=""+jo(ft):p.removeAttribute("name")}function Ql(p,w,P,U,X,ce,Ge,ft){if(ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"&&(p.type=ce),w!=null||P!=null){if(!(ce!=="submit"&&ce!=="reset"||w!=null))return;P=P!=null?""+jo(P):"",w=w!=null?""+jo(w):P,ft||w===p.value||(p.value=w),p.defaultValue=w}U=U??X,U=typeof U!="function"&&typeof U!="symbol"&&!!U,p.checked=ft?p.checked:!!U,p.defaultChecked=!!U,Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&typeof Ge!="boolean"&&(p.name=Ge)}function Ru(p,w,P){w==="number"&&Bc(p.ownerDocument)===p||p.defaultValue===""+P||(p.defaultValue=""+P)}function mo(p,w,P,U){if(p=p.options,w){w={};for(var X=0;X<P.length;X++)w["$"+P[X]]=!0;for(P=0;P<p.length;P++)X=w.hasOwnProperty("$"+p[P].value),p[P].selected!==X&&(p[P].selected=X),X&&U&&(p[P].defaultSelected=!0)}else{for(P=""+jo(P),w=null,X=0;X<p.length;X++){if(p[X].value===P){p[X].selected=!0,U&&(p[X].defaultSelected=!0);return}w!==null||p[X].disabled||(w=p[X])}w!==null&&(w.selected=!0)}}function Zo(p,w,P){if(w!=null&&(w=""+jo(w),w!==p.value&&(p.value=w),P==null)){p.defaultValue!==w&&(p.defaultValue=w);return}p.defaultValue=P!=null?""+jo(P):""}function Nd(p,w,P,U){if(w==null){if(U!=null){if(P!=null)throw Error(r(92));if(Ie(U)){if(1<U.length)throw Error(r(93));U=U[0]}P=U}P==null&&(P=""),w=P}P=jo(w),p.defaultValue=P,U=p.textContent,U===P&&U!==""&&U!==null&&(p.value=U)}function Ku(p,w){if(w){var P=p.firstChild;if(P&&P===p.lastChild&&P.nodeType===3){P.nodeValue=w;return}}p.textContent=w}var Sf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eu(p,w,P){var U=w.indexOf("--")===0;P==null||typeof P=="boolean"||P===""?U?p.setProperty(w,""):w==="float"?p.cssFloat="":p[w]="":U?p.setProperty(w,P):typeof P!="number"||P===0||Sf.has(w)?w==="float"?p.cssFloat=P:p[w]=(""+P).trim():p[w]=P+"px"}function qo(p,w,P){if(w!=null&&typeof w!="object")throw Error(r(62));if(p=p.style,P!=null){for(var U in P)!P.hasOwnProperty(U)||w!=null&&w.hasOwnProperty(U)||(U.indexOf("--")===0?p.setProperty(U,""):U==="float"?p.cssFloat="":p[U]="");for(var X in w)U=w[X],w.hasOwnProperty(X)&&P[X]!==U&&eu(p,X,U)}else for(var ce in w)w.hasOwnProperty(ce)&&eu(p,ce,w[ce])}function Wu(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zn(p){return rl.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var go=null;function vr(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var jc=null,Sn=null;function Ah(p){var w=ri(p);if(w&&(p=w.stateNode)){var P=p[Kt]||null;e:switch(p=w.stateNode,w.type){case"input":if(Go(p,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name),w=P.name,P.type==="radio"&&w!=null){for(P=p;P.parentNode;)P=P.parentNode;for(P=P.querySelectorAll('input[name="'+no(""+w)+'"][type="radio"]'),w=0;w<P.length;w++){var U=P[w];if(U!==p&&U.form===p.form){var X=U[Kt]||null;if(!X)throw Error(r(90));Go(U,X.value,X.defaultValue,X.defaultValue,X.checked,X.defaultChecked,X.type,X.name)}}for(w=0;w<P.length;w++)U=P[w],U.form===p.form&&wu(U)}break e;case"textarea":Zo(p,P.value,P.defaultValue);break e;case"select":w=P.value,w!=null&&mo(p,!!P.multiple,w,!1)}}}var Nn=!1;function Ks(p,w,P){if(Nn)return p(w,P);Nn=!0;try{var U=p(w);return U}finally{if(Nn=!1,(jc!==null||Sn!==null)&&(r0(),jc&&(w=jc,p=Sn,Sn=jc=null,Ah(w),p)))for(w=0;w<p.length;w++)Ah(p[w])}}function mc(p,w){var P=p.stateNode;if(P===null)return null;var U=P[Kt]||null;if(U===null)return null;P=U[w];e:switch(w){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(U=!U.disabled)||(p=p.type,U=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!U;break e;default:p=!1}if(p)return null;if(P&&typeof P!="function")throw Error(r(231,w,typeof P));return P}var gc=!1;if(Es)try{var er={};Object.defineProperty(er,"passive",{get:function(){gc=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{gc=!1}var hn=null,bn=null,Ws=null;function Od(){if(Ws)return Ws;var p,w=bn,P=w.length,U,X="value"in hn?hn.value:hn.textContent,ce=X.length;for(p=0;p<P&&w[p]===X[p];p++);var Ge=P-p;for(U=1;U<=Ge&&w[P-U]===X[ce-U];U++);return Ws=X.slice(p,1<U?1-U:void 0)}function An(p){var w=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&w===13&&(p=13)):p=w,p===10&&(p=13),32<=p||p===13?p:0}function Ho(){return!0}function Tu(){return!1}function Os(p){function w(P,U,X,ce,Ge){this._reactName=P,this._targetInst=X,this.type=U,this.nativeEvent=ce,this.target=Ge,this.currentTarget=null;for(var ft in p)p.hasOwnProperty(ft)&&(P=p[ft],this[ft]=P?P(ce):ce[ft]);return this.isDefaultPrevented=(ce.defaultPrevented!=null?ce.defaultPrevented:ce.returnValue===!1)?Ho:Tu,this.isPropagationStopped=Tu,this}return Ne(w.prototype,{preventDefault:function(){this.defaultPrevented=!0;var P=this.nativeEvent;P&&(P.preventDefault?P.preventDefault():typeof P.returnValue!="unknown"&&(P.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var P=this.nativeEvent;P&&(P.stopPropagation?P.stopPropagation():typeof P.cancelBubble!="unknown"&&(P.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),w}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Os(Ki),yo=Ne({},Ki,{view:0,detail:0}),Vd=Os(yo),vh,yc,Ac,nl=Ne({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:au,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Ac&&(Ac&&p.type==="mousemove"?(vh=p.screenX-Ac.screenX,yc=p.screenY-Ac.screenY):yc=vh=0,Ac=p),vh)},movementY:function(p){return"movementY"in p?p.movementY:yc}}),ys=Os(nl),Yu=Ne({},nl,{dataTransfer:0}),Vs=Os(Yu),zl=Ne({},yo,{relatedTarget:0}),il=Os(zl),Ji=Ne({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Ys=Os(Ji),tu=Ne({},Ki,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),ds=Os(tu),Zh=Ne({},Ki,{data:0}),$o=Os(Zh),zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lp(p){var w=this.nativeEvent;return w.getModifierState?w.getModifierState(p):(p=Su[p])?!!w[p]:!1}function au(){return lp}var tg=Ne({},yo,{key:function(p){if(p.key){var w=zd[p.key]||p.key;if(w!=="Unidentified")return w}return p.type==="keypress"?(p=An(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Cu[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:au,charCode:function(p){return p.type==="keypress"?An(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?An(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Dd=Os(tg),Xs=Ne({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=Os(Xs),ru=Ne({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:au}),xf=Os(ru),de=Ne({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qe=Os(de),It=Ne({},nl,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Jt=Os(It),pa=Ne({},Ki,{newState:0,oldState:0}),La=Os(pa),ir=[9,13,27,32],Er=Es&&"CompositionEvent"in window,en=null;Es&&"documentMode"in document&&(en=document.documentMode);var On=Es&&"TextEvent"in window&&!en,Fn=Es&&(!Er||en&&8<en&&11>=en),wi=" ",zs=!1;function Ds(p,w){switch(p){case"keyup":return ir.indexOf(w.keyCode)!==-1;case"keydown":return w.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var os=!1;function Dr(p,w){switch(p){case"compositionend":return io(w);case"keypress":return w.which!==32?null:(zs=!0,wi);case"textInput":return p=w.data,p===wi&&zs?null:p;default:return null}}function cr(p,w){if(os)return p==="compositionend"||!Er&&Ds(p,w)?(p=Od(),Ws=bn=hn=null,os=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(w.ctrlKey||w.altKey||w.metaKey)||w.ctrlKey&&w.altKey){if(w.char&&1<w.char.length)return w.char;if(w.which)return String.fromCharCode(w.which)}return null;case"compositionend":return Fn&&w.locale!=="ko"?null:w.data;default:return null}}var vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nr(p){var w=p&&p.nodeName&&p.nodeName.toLowerCase();return w==="input"?!!vl[p.type]:w==="textarea"}function bu(p,w,P,U){jc?Sn?Sn.push(U):Sn=[U]:jc=U,w=Gf(w,"onChange"),0<w.length&&(P=new Mi("onChange","change",null,P,U),p.push({event:P,listeners:w}))}var nu=null,xr=null;function _h(p){c0(p,0)}function iu(p){var w=Jr(p);if(wu(w))return p}function vc(p,w){if(p==="change")return w}var Md=!1;if(Es){var Ms;if(Es){var Si="oninput"in document;if(!Si){var _c=document.createElement("div");_c.setAttribute("oninput","return;"),Si=typeof _c.oninput=="function"}Ms=Si}else Ms=!1;Md=Ms&&(!document.documentMode||9<document.documentMode)}function Da(){nu&&(nu.detachEvent("onpropertychange",Id),xr=nu=null)}function Id(p){if(p.propertyName==="value"&&iu(xr)){var w=[];bu(w,xr,p,vr(p)),Ks(_h,w)}}function Js(p,w,P){p==="focusin"?(Da(),nu=w,xr=P,nu.attachEvent("onpropertychange",Id)):p==="focusout"&&Da()}function Ao(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return iu(xr)}function Pf(p,w){if(p==="click")return iu(w)}function qh(p,w){if(p==="input"||p==="change")return iu(w)}function vo(p,w){return p===w&&(p!==0||1/p===1/w)||p!==p&&w!==w}var js=typeof Object.is=="function"?Object.is:vo;function Dl(p,w){if(js(p,w))return!0;if(typeof p!="object"||p===null||typeof w!="object"||w===null)return!1;var P=Object.keys(p),U=Object.keys(w);if(P.length!==U.length)return!1;for(U=0;U<P.length;U++){var X=P[U];if(!za.call(w,X)||!js(p[X],w[X]))return!1}return!0}function Gc(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function su(p,w){var P=Gc(p);p=0;for(var U;P;){if(P.nodeType===3){if(U=p+P.textContent.length,p<=w&&U>=w)return{node:P,offset:w-p};p=U}e:{for(;P;){if(P.nextSibling){P=P.nextSibling;break e}P=P.parentNode}P=void 0}P=Gc(P)}}function wh(p,w){return p&&w?p===w?!0:p&&p.nodeType===3?!1:w&&w.nodeType===3?wh(p,w.parentNode):"contains"in p?p.contains(w):p.compareDocumentPosition?!!(p.compareDocumentPosition(w)&16):!1:!1}function Ml(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var w=Bc(p.document);w instanceof p.HTMLIFrameElement;){try{var P=typeof w.contentWindow.location.href=="string"}catch{P=!1}if(P)p=w.contentWindow;else break;w=Bc(p.document)}return w}function No(p){var w=p&&p.nodeName&&p.nodeName.toLowerCase();return w&&(w==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||w==="textarea"||p.contentEditable==="true")}function Ld(p,w){var P=Ml(w);w=p.focusedElem;var U=p.selectionRange;if(P!==w&&w&&w.ownerDocument&&wh(w.ownerDocument.documentElement,w)){if(U!==null&&No(w)){if(p=U.start,P=U.end,P===void 0&&(P=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(P,w.value.length);else if(P=(p=w.ownerDocument||document)&&p.defaultView||window,P.getSelection){P=P.getSelection();var X=w.textContent.length,ce=Math.min(U.start,X);U=U.end===void 0?ce:Math.min(U.end,X),!P.extend&&ce>U&&(X=U,U=ce,ce=X),X=su(w,ce);var Ge=su(w,U);X&&Ge&&(P.rangeCount!==1||P.anchorNode!==X.node||P.anchorOffset!==X.offset||P.focusNode!==Ge.node||P.focusOffset!==Ge.offset)&&(p=p.createRange(),p.setStart(X.node,X.offset),P.removeAllRanges(),ce>U?(P.addRange(p),P.extend(Ge.node,Ge.offset)):(p.setEnd(Ge.node,Ge.offset),P.addRange(p)))}}for(p=[],P=w;P=P.parentNode;)P.nodeType===1&&p.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)P=p[w],P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}var Zc=Es&&"documentMode"in document&&11>=document.documentMode,Il=null,wc=null,xu=null,Qi=!1;function Ef(p,w,P){var U=P.window===P?P.document:P.nodeType===9?P:P.ownerDocument;Qi||Il==null||Il!==Bc(U)||(U=Il,"selectionStart"in U&&No(U)?U={start:U.selectionStart,end:U.selectionEnd}:(U=(U.ownerDocument&&U.ownerDocument.defaultView||window).getSelection(),U={anchorNode:U.anchorNode,anchorOffset:U.anchorOffset,focusNode:U.focusNode,focusOffset:U.focusOffset}),xu&&Dl(xu,U)||(xu=U,U=Gf(wc,"onSelect"),0<U.length&&(w=new Mi("onSelect","select",null,w,P),p.push({event:w,listeners:U}),w.target=Il)))}function so(p,w){var P={};return P[p.toLowerCase()]=w.toLowerCase(),P["Webkit"+p]="webkit"+w,P["Moz"+p]="moz"+w,P}var _o={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionrun:so("Transition","TransitionRun"),transitionstart:so("Transition","TransitionStart"),transitioncancel:so("Transition","TransitionCancel"),transitionend:so("Transition","TransitionEnd")},Fd={},kd={};Es&&(kd=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function oo(p){if(Fd[p])return Fd[p];if(!_o[p])return p;var w=_o[p],P;for(P in w)if(w.hasOwnProperty(P)&&P in kd)return Fd[p]=w[P];return p}var qc=oo("animationend"),Rc=oo("animationiteration"),Pu=oo("animationstart"),Hc=oo("transitionrun"),Eu=oo("transitionstart"),$c=oo("transitioncancel"),Tc=oo("transitionend"),Xu=new Map,Ko="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function As(p,w){Xu.set(p,w),Xi(w,[p])}var ai=[],li=0,es=0;function hs(){for(var p=li,w=es=li=0;w<p;){var P=ai[w];ai[w++]=null;var U=ai[w];ai[w++]=null;var X=ai[w];ai[w++]=null;var ce=ai[w];if(ai[w++]=null,U!==null&&X!==null){var Ge=U.pending;Ge===null?X.next=X:(X.next=Ge.next,Ge.next=X),U.pending=X}ce!==0&&lu(P,X,ce)}}function ou(p,w,P,U){ai[li++]=p,ai[li++]=w,ai[li++]=P,ai[li++]=U,es|=U,p.lanes|=U,p=p.alternate,p!==null&&(p.lanes|=U)}function Kc(p,w,P,U){return ou(p,w,P,U),cn(p)}function sl(p,w){return ou(p,null,null,w),cn(p)}function lu(p,w,P){p.lanes|=P;var U=p.alternate;U!==null&&(U.lanes|=P);for(var X=!1,ce=p.return;ce!==null;)ce.childLanes|=P,U=ce.alternate,U!==null&&(U.childLanes|=P),ce.tag===22&&(p=ce.stateNode,p===null||p._visibility&1||(X=!0)),p=ce,ce=ce.return;X&&w!==null&&p.tag===3&&(ce=p.stateNode,X=31-Yr(P),ce=ce.hiddenUpdates,p=ce[X],p===null?ce[X]=[w]:p.push(w),w.lane=P|536870912)}function cn(p){if(50<bl)throw bl=0,Qd=null,Error(r(185));for(var w=p.return;w!==null;)p=w,w=p.return;return p.tag===3?p.stateNode:null}var Wc={},Ll=new WeakMap;function ls(p,w){if(typeof p=="object"&&p!==null){var P=Ll.get(p);return P!==void 0?P:(w={value:p,source:w,stack:qe(w)},Ll.set(p,w),w)}return{value:p,source:w,stack:qe(w)}}var Cc=[],Ud=0,yi=null,Hh=0,ol=[],_l=0,Yc=null,Nu=1,Ju="";function Sc(p,w){Cc[Ud++]=Hh,Cc[Ud++]=yi,yi=p,Hh=w}function rm(p,w,P){ol[_l++]=Nu,ol[_l++]=Ju,ol[_l++]=Yc,Yc=p;var U=Nu;p=Ju;var X=32-Yr(U)-1;U&=~(1<<X),P+=1;var ce=32-Yr(w)+X;if(30<ce){var Ge=X-X%5;ce=(U&(1<<Ge)-1).toString(32),U>>=Ge,X-=Ge,Nu=1<<32-Yr(w)+X|P<<X|U,Ju=ce+p}else Nu=1<<ce|P<<X|U,Ju=p}function $h(p){p.return!==null&&(Sc(p,1),rm(p,1,0))}function Kh(p){for(;p===yi;)yi=Cc[--Ud],Cc[Ud]=null,Hh=Cc[--Ud],Cc[Ud]=null;for(;p===Yc;)Yc=ol[--_l],ol[_l]=null,Ju=ol[--_l],ol[_l]=null,Nu=ol[--_l],ol[_l]=null}var ll=null,ts=null,bi=!1,uu=null,Ou=!1,up=Error(r(519));function bc(p){var w=Error(r(418,""));throw jd(ls(w,p)),up}function Nf(p){var w=p.stateNode,P=p.type,U=p.memoizedProps;switch(w[Yt]=p,w[Kt]=U,P){case"dialog":Zi("cancel",w),Zi("close",w);break;case"iframe":case"object":case"embed":Zi("load",w);break;case"video":case"audio":for(P=0;P<hg.length;P++)Zi(hg[P],w);break;case"source":Zi("error",w);break;case"img":case"image":case"link":Zi("error",w),Zi("load",w);break;case"details":Zi("toggle",w);break;case"input":Zi("invalid",w),Ql(w,U.value,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name,!0),gh(w);break;case"select":Zi("invalid",w);break;case"textarea":Zi("invalid",w),Nd(w,U.value,U.defaultValue,U.children),gh(w)}P=U.children,typeof P!="string"&&typeof P!="number"&&typeof P!="bigint"||w.textContent===""+P||U.suppressHydrationWarning===!0||Zf(w.textContent,P)?(U.popover!=null&&(Zi("beforetoggle",w),Zi("toggle",w)),U.onScroll!=null&&Zi("scroll",w),U.onScrollEnd!=null&&Zi("scrollend",w),U.onClick!=null&&(w.onclick=uy),w=!0):w=!1,w||bc(p)}function Bd(p){for(ll=p.return;ll;)switch(ll.tag){case 3:case 27:Ou=!0;return;case 5:case 13:Ou=!1;return;default:ll=ll.return}}function Wh(p){if(p!==ll)return!1;if(!bi)return Bd(p),bi=!0,!1;var w=!1,P;if((P=p.tag!==3&&p.tag!==27)&&((P=p.tag===5)&&(P=p.type,P=!(P!=="form"&&P!=="button")||m0(p.type,p.memoizedProps)),P=!P),P&&(w=!0),w&&ts&&bc(p),Bd(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,w=0;p;){if(p.nodeType===8)if(P=p.data,P==="/$"){if(w===0){ts=ju(p.nextSibling);break e}w--}else P!=="$"&&P!=="$!"&&P!=="$?"||w++;p=p.nextSibling}ts=null}}else ts=ll?ju(p.stateNode.nextSibling):null;return!0}function Yh(){ts=ll=null,bi=!1}function jd(p){uu===null?uu=[p]:uu.push(p)}var Of=Error(r(460)),ag=Error(r(474)),Rh={then:function(){}};function $g(p){return p=p.status,p==="fulfilled"||p==="rejected"}function xc(){}function Qu(p,w,P){switch(P=p[P],P===void 0?p.push(w):P!==w&&(w.then(xc,xc),w=P),w.status){case"fulfilled":return w.value;case"rejected":throw p=w.reason,p===Of?Error(r(483)):p;default:if(typeof w.status=="string")w.then(xc,xc);else{if(p=Hr,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=w,p.status="pending",p.then(function(U){if(w.status==="pending"){var X=w;X.status="fulfilled",X.value=U}},function(U){if(w.status==="pending"){var X=w;X.status="rejected",X.reason=U}})}switch(w.status){case"fulfilled":return w.value;case"rejected":throw p=w.reason,p===Of?Error(r(483)):p}throw Vu=w,Of}}var Vu=null;function Kg(){if(Vu===null)throw Error(r(459));var p=Vu;return Vu=null,p}var Xh=null,wl=0;function ul(p){var w=wl;return wl+=1,Xh===null&&(Xh=[]),Qu(Xh,p,w)}function Jh(p,w){w=w.props.ref,p.ref=w!==void 0?w:null}function Gd(p,w){throw w.$$typeof===l?Error(r(525)):(p=Object.prototype.toString.call(w),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":p)))}function nm(p){var w=p._init;return w(p._payload)}function im(p){function w(va,oa){if(p){var ba=va.deletions;ba===null?(va.deletions=[oa],va.flags|=16):ba.push(oa)}}function P(va,oa){if(!p)return null;for(;oa!==null;)w(va,oa),oa=oa.sibling;return null}function U(va){for(var oa=new Map;va!==null;)va.key!==null?oa.set(va.key,va):oa.set(va.index,va),va=va.sibling;return oa}function X(va,oa){return va=xa(va,oa),va.index=0,va.sibling=null,va}function ce(va,oa,ba){return va.index=ba,p?(ba=va.alternate,ba!==null?(ba=ba.index,ba<oa?(va.flags|=33554434,oa):ba):(va.flags|=33554434,oa)):(va.flags|=1048576,oa)}function Ge(va){return p&&va.alternate===null&&(va.flags|=33554434),va}function ft(va,oa,ba,tr){return oa===null||oa.tag!==6?(oa=ta(ba,va.mode,tr),oa.return=va,oa):(oa=X(oa,ba),oa.return=va,oa)}function Bt(va,oa,ba,tr){var rn=ba.type;return rn===v?$a(va,oa,ba.props.children,tr,ba.key):oa!==null&&(oa.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===ee&&nm(rn)===oa.type)?(oa=X(oa,ba.props),Jh(oa,ba),oa.return=va,oa):(oa=la(ba.type,ba.key,ba.props,null,va.mode,tr),Jh(oa,ba),oa.return=va,oa)}function ca(va,oa,ba,tr){return oa===null||oa.tag!==4||oa.stateNode.containerInfo!==ba.containerInfo||oa.stateNode.implementation!==ba.implementation?(oa=ha(ba,va.mode,tr),oa.return=va,oa):(oa=X(oa,ba.children||[]),oa.return=va,oa)}function $a(va,oa,ba,tr,rn){return oa===null||oa.tag!==7?(oa=zt(ba,va.mode,tr,rn),oa.return=va,oa):(oa=X(oa,ba),oa.return=va,oa)}function sr(va,oa,ba){if(typeof oa=="string"&&oa!==""||typeof oa=="number"||typeof oa=="bigint")return oa=ta(""+oa,va.mode,ba),oa.return=va,oa;if(typeof oa=="object"&&oa!==null){switch(oa.$$typeof){case c:return ba=la(oa.type,oa.key,oa.props,null,va.mode,ba),Jh(ba,oa),ba.return=va,ba;case n:return oa=ha(oa,va.mode,ba),oa.return=va,oa;case ee:var tr=oa._init;return oa=tr(oa._payload),sr(va,oa,ba)}if(Ie(oa)||ge(oa))return oa=zt(oa,va.mode,ba,null),oa.return=va,oa;if(typeof oa.then=="function")return sr(va,ul(oa),ba);if(oa.$$typeof===k)return sr(va,rc(va,oa),ba);Gd(va,oa)}return null}function Ea(va,oa,ba,tr){var rn=oa!==null?oa.key:null;if(typeof ba=="string"&&ba!==""||typeof ba=="number"||typeof ba=="bigint")return rn!==null?null:ft(va,oa,""+ba,tr);if(typeof ba=="object"&&ba!==null){switch(ba.$$typeof){case c:return ba.key===rn?Bt(va,oa,ba,tr):null;case n:return ba.key===rn?ca(va,oa,ba,tr):null;case ee:return rn=ba._init,ba=rn(ba._payload),Ea(va,oa,ba,tr)}if(Ie(ba)||ge(ba))return rn!==null?null:$a(va,oa,ba,tr,null);if(typeof ba.then=="function")return Ea(va,oa,ul(ba),tr);if(ba.$$typeof===k)return Ea(va,oa,rc(va,ba),tr);Gd(va,ba)}return null}function Ka(va,oa,ba,tr,rn){if(typeof tr=="string"&&tr!==""||typeof tr=="number"||typeof tr=="bigint")return va=va.get(ba)||null,ft(oa,va,""+tr,rn);if(typeof tr=="object"&&tr!==null){switch(tr.$$typeof){case c:return va=va.get(tr.key===null?ba:tr.key)||null,Bt(oa,va,tr,rn);case n:return va=va.get(tr.key===null?ba:tr.key)||null,ca(oa,va,tr,rn);case ee:var Ri=tr._init;return tr=Ri(tr._payload),Ka(va,oa,ba,tr,rn)}if(Ie(tr)||ge(tr))return va=va.get(ba)||null,$a(oa,va,tr,rn,null);if(typeof tr.then=="function")return Ka(va,oa,ba,ul(tr),rn);if(tr.$$typeof===k)return Ka(va,oa,ba,rc(oa,tr),rn);Gd(oa,tr)}return null}function sn(va,oa,ba,tr){for(var rn=null,Ri=null,gn=oa,Mn=oa=0,fu=null;gn!==null&&Mn<ba.length;Mn++){gn.index>Mn?(fu=gn,gn=null):fu=gn.sibling;var us=Ea(va,gn,ba[Mn],tr);if(us===null){gn===null&&(gn=fu);break}p&&gn&&us.alternate===null&&w(va,gn),oa=ce(us,oa,Mn),Ri===null?rn=us:Ri.sibling=us,Ri=us,gn=fu}if(Mn===ba.length)return P(va,gn),bi&&Sc(va,Mn),rn;if(gn===null){for(;Mn<ba.length;Mn++)gn=sr(va,ba[Mn],tr),gn!==null&&(oa=ce(gn,oa,Mn),Ri===null?rn=gn:Ri.sibling=gn,Ri=gn);return bi&&Sc(va,Mn),rn}for(gn=U(gn);Mn<ba.length;Mn++)fu=Ka(gn,va,Mn,ba[Mn],tr),fu!==null&&(p&&fu.alternate!==null&&gn.delete(fu.key===null?Mn:fu.key),oa=ce(fu,oa,Mn),Ri===null?rn=fu:Ri.sibling=fu,Ri=fu);return p&&gn.forEach(function(xm){return w(va,xm)}),bi&&Sc(va,Mn),rn}function ni(va,oa,ba,tr){if(ba==null)throw Error(r(151));for(var rn=null,Ri=null,gn=oa,Mn=oa=0,fu=null,us=ba.next();gn!==null&&!us.done;Mn++,us=ba.next()){gn.index>Mn?(fu=gn,gn=null):fu=gn.sibling;var xm=Ea(va,gn,us.value,tr);if(xm===null){gn===null&&(gn=fu);break}p&&gn&&xm.alternate===null&&w(va,gn),oa=ce(xm,oa,Mn),Ri===null?rn=xm:Ri.sibling=xm,Ri=xm,gn=fu}if(us.done)return P(va,gn),bi&&Sc(va,Mn),rn;if(gn===null){for(;!us.done;Mn++,us=ba.next())us=sr(va,us.value,tr),us!==null&&(oa=ce(us,oa,Mn),Ri===null?rn=us:Ri.sibling=us,Ri=us);return bi&&Sc(va,Mn),rn}for(gn=U(gn);!us.done;Mn++,us=ba.next())us=Ka(gn,va,Mn,us.value,tr),us!==null&&(p&&us.alternate!==null&&gn.delete(us.key===null?Mn:us.key),oa=ce(us,oa,Mn),Ri===null?rn=us:Ri.sibling=us,Ri=us);return p&&gn.forEach(function(RE){return w(va,RE)}),bi&&Sc(va,Mn),rn}function Qo(va,oa,ba,tr){if(typeof ba=="object"&&ba!==null&&ba.type===v&&ba.key===null&&(ba=ba.props.children),typeof ba=="object"&&ba!==null){switch(ba.$$typeof){case c:e:{for(var rn=ba.key;oa!==null;){if(oa.key===rn){if(rn=ba.type,rn===v){if(oa.tag===7){P(va,oa.sibling),tr=X(oa,ba.props.children),tr.return=va,va=tr;break e}}else if(oa.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===ee&&nm(rn)===oa.type){P(va,oa.sibling),tr=X(oa,ba.props),Jh(tr,ba),tr.return=va,va=tr;break e}P(va,oa);break}else w(va,oa);oa=oa.sibling}ba.type===v?(tr=zt(ba.props.children,va.mode,tr,ba.key),tr.return=va,va=tr):(tr=la(ba.type,ba.key,ba.props,null,va.mode,tr),Jh(tr,ba),tr.return=va,va=tr)}return Ge(va);case n:e:{for(rn=ba.key;oa!==null;){if(oa.key===rn)if(oa.tag===4&&oa.stateNode.containerInfo===ba.containerInfo&&oa.stateNode.implementation===ba.implementation){P(va,oa.sibling),tr=X(oa,ba.children||[]),tr.return=va,va=tr;break e}else{P(va,oa);break}else w(va,oa);oa=oa.sibling}tr=ha(ba,va.mode,tr),tr.return=va,va=tr}return Ge(va);case ee:return rn=ba._init,ba=rn(ba._payload),Qo(va,oa,ba,tr)}if(Ie(ba))return sn(va,oa,ba,tr);if(ge(ba)){if(rn=ge(ba),typeof rn!="function")throw Error(r(150));return ba=rn.call(ba),ni(va,oa,ba,tr)}if(typeof ba.then=="function")return Qo(va,oa,ul(ba),tr);if(ba.$$typeof===k)return Qo(va,oa,rc(va,ba),tr);Gd(va,ba)}return typeof ba=="string"&&ba!==""||typeof ba=="number"||typeof ba=="bigint"?(ba=""+ba,oa!==null&&oa.tag===6?(P(va,oa.sibling),tr=X(oa,ba),tr.return=va,va=tr):(P(va,oa),tr=ta(ba,va.mode,tr),tr.return=va,va=tr),Ge(va)):P(va,oa)}return function(va,oa,ba,tr){try{wl=0;var rn=Qo(va,oa,ba,tr);return Xh=null,rn}catch(gn){if(gn===Of)throw gn;var Ri=ia(29,gn,null,va.mode);return Ri.lanes=tr,Ri.return=va,Ri}finally{}}}var Xc=im(!0),Vf=im(!1),cl=dt(null),Zd=dt(0);function zu(p,w){p=vn,Ae(Zd,p),Ae(cl,w),vn=p|w.baseLanes}function qd(){Ae(Zd,vn),Ae(cl,cl.current)}function Jc(){vn=Zd.current,ut(cl),ut(Zd)}var Fl=dt(null),ec=null;function Qc(p){var w=p.alternate;Ae(Gs,Gs.current&1),Ae(Fl,p),ec===null&&(w===null||cl.current!==null||w.memoizedState!==null)&&(ec=p)}function cp(p){if(p.tag===22){if(Ae(Gs,Gs.current),Ae(Fl,p),ec===null){var w=p.alternate;w!==null&&w.memoizedState!==null&&(ec=p)}}else Hd()}function Hd(){Ae(Gs,Gs.current),Ae(Fl,Fl.current)}function ed(p){ut(Fl),ec===p&&(ec=null),ut(Gs)}var Gs=dt(0);function sm(p){for(var w=p;w!==null;){if(w.tag===13){var P=w.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||P.data==="$?"||P.data==="$!"))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var rg=typeof AbortController<"u"?AbortController:function(){var p=[],w=this.signal={aborted:!1,addEventListener:function(P,U){p.push(U)}};this.abort=function(){w.aborted=!0,p.forEach(function(P){return P()})}},zf=t.unstable_scheduleCallback,om=t.unstable_NormalPriority,lo={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qh(){return{controller:new rg,data:new Map,refCount:0}}function G(p){p.refCount--,p.refCount===0&&zf(om,function(){p.controller.abort()})}var Q=null,ye=0,Me=0,We=null;function rt(p,w){if(Q===null){var P=Q=[];ye=0,Me=VA(),We={status:"pending",value:void 0,then:function(U){P.push(U)}}}return ye++,w.then(it,it),w}function it(){if(--ye===0&&Q!==null){We!==null&&(We.status="fulfilled");var p=Q;Q=null,Me=0,We=null;for(var w=0;w<p.length;w++)(0,p[w])()}}function ht(p,w){var P=[],U={status:"pending",value:null,reason:null,then:function(X){P.push(X)}};return p.then(function(){U.status="fulfilled",U.value=w;for(var X=0;X<P.length;X++)(0,P[X])(w)},function(X){for(U.status="rejected",U.reason=X,X=0;X<P.length;X++)(0,P[X])(void 0)}),U}var mt=we.S;we.S=function(p,w){typeof w=="object"&&w!==null&&typeof w.then=="function"&&rt(p,w),mt!==null&&mt(p,w)};var St=dt(null);function ea(){var p=St.current;return p!==null?p:Hr.pooledCache}function Pt(p,w){w===null?Ae(St,St.current):Ae(St,w.pool)}function wa(){var p=ea();return p===null?null:{parent:lo._currentValue,pool:p}}var sa=0,Ta=null,ma=null,Rt=null,aa=!1,Ha=!1,Ja=!1,Wa=0,Vr=0,_r=null,fn=0;function pr(){throw Error(r(321))}function xi(p,w){if(w===null)return!1;for(var P=0;P<w.length&&P<p.length;P++)if(!js(p[P],w[P]))return!1;return!0}function Ii(p,w,P,U,X,ce){return sa=ce,Ta=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,we.H=p===null||p.memoizedState===null?Pc:cu,Ja=!1,ce=P(U,X),Ja=!1,Ha&&(ce=ui(w,P,U,X)),Yn(p),ce}function Yn(p){we.H=Fu;var w=ma!==null&&ma.next!==null;if(sa=0,Rt=ma=Ta=null,aa=!1,Vr=0,_r=null,w)throw Error(r(300));p===null||fl||(p=p.dependencies,p!==null&&Lf(p)&&(fl=!0))}function ui(p,w,P,U){Ta=p;var X=0;do{if(Ha&&(_r=null),Vr=0,Ha=!1,25<=X)throw Error(r(301));if(X+=1,Rt=ma=null,p.updateQueue!=null){var ce=p.updateQueue;ce.lastEffect=null,ce.events=null,ce.stores=null,ce.memoCache!=null&&(ce.memoCache.index=0)}we.H=Ec,ce=w(P,U)}while(Ha);return ce}function as(){var p=we.H,w=p.useState()[0];return w=typeof w.then=="function"?Pi(w):w,p=p.useState()[0],(ma!==null?ma.memoizedState:null)!==p&&(Ta.flags|=1024),w}function Hn(){var p=Wa!==0;return Wa=0,p}function xn(p,w,P){w.updateQueue=p.updateQueue,w.flags&=-2053,p.lanes&=~P}function vs(p){if(aa){for(p=p.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}aa=!1}sa=0,Rt=ma=Ta=null,Ha=!1,Vr=Wa=0,_r=null}function Wi(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ta.memoizedState=Rt=p:Rt=Rt.next=p,Rt}function $n(){if(ma===null){var p=Ta.alternate;p=p!==null?p.memoizedState:null}else p=ma.next;var w=Rt===null?Ta.memoizedState:Rt.next;if(w!==null)Rt=w,ma=p;else{if(p===null)throw Ta.alternate===null?Error(r(467)):Error(r(310));ma=p,p={memoizedState:ma.memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},Rt===null?Ta.memoizedState=Rt=p:Rt=Rt.next=p}return Rt}var wo;wo=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Pi(p){var w=Vr;return Vr+=1,_r===null&&(_r=[]),p=Qu(_r,p,w),w=Ta,(Rt===null?w.memoizedState:Rt.next)===null&&(w=w.alternate,we.H=w===null||w.memoizedState===null?Pc:cu),p}function fs(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Pi(p);if(p.$$typeof===k)return to(p)}throw Error(r(438,String(p)))}function Pn(p){var w=null,P=Ta.updateQueue;if(P!==null&&(w=P.memoCache),w==null){var U=Ta.alternate;U!==null&&(U=U.updateQueue,U!==null&&(U=U.memoCache,U!=null&&(w={data:U.data.map(function(X){return X.slice()}),index:0})))}if(w==null&&(w={data:[],index:0}),P===null&&(P=wo(),Ta.updateQueue=P),P.memoCache=w,P=w.data[w.index],P===void 0)for(P=w.data[w.index]=Array(p),U=0;U<p;U++)P[U]=pe;return w.index++,P}function Hi(p,w){return typeof w=="function"?w(p):w}function Qs(p){var w=$n();return Oo(w,ma,p)}function Oo(p,w,P){var U=p.queue;if(U===null)throw Error(r(311));U.lastRenderedReducer=P;var X=p.baseQueue,ce=U.pending;if(ce!==null){if(X!==null){var Ge=X.next;X.next=ce.next,ce.next=Ge}w.baseQueue=X=ce,U.pending=null}if(ce=p.baseState,X===null)p.memoizedState=ce;else{w=X.next;var ft=Ge=null,Bt=null,ca=w,$a=!1;do{var sr=ca.lane&-536870913;if(sr!==ca.lane?(yr&sr)===sr:(sa&sr)===sr){var Ea=ca.revertLane;if(Ea===0)Bt!==null&&(Bt=Bt.next={lane:0,revertLane:0,action:ca.action,hasEagerState:ca.hasEagerState,eagerState:ca.eagerState,next:null}),sr===Me&&($a=!0);else if((sa&Ea)===Ea){ca=ca.next,Ea===Me&&($a=!0);continue}else sr={lane:0,revertLane:ca.revertLane,action:ca.action,hasEagerState:ca.hasEagerState,eagerState:ca.eagerState,next:null},Bt===null?(ft=Bt=sr,Ge=ce):Bt=Bt.next=sr,Ta.lanes|=Ea,ns|=Ea;sr=ca.action,Ja&&P(ce,sr),ce=ca.hasEagerState?ca.eagerState:P(ce,sr)}else Ea={lane:sr,revertLane:ca.revertLane,action:ca.action,hasEagerState:ca.hasEagerState,eagerState:ca.eagerState,next:null},Bt===null?(ft=Bt=Ea,Ge=ce):Bt=Bt.next=Ea,Ta.lanes|=sr,ns|=sr;ca=ca.next}while(ca!==null&&ca!==w);if(Bt===null?Ge=ce:Bt.next=ft,!js(ce,p.memoizedState)&&(fl=!0,$a&&(P=We,P!==null)))throw P;p.memoizedState=ce,p.baseState=Ge,p.baseQueue=Bt,U.lastRenderedState=ce}return X===null&&(U.lanes=0),[p.memoizedState,U.dispatch]}function dl(p){var w=$n(),P=w.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=p;var U=P.dispatch,X=P.pending,ce=w.memoizedState;if(X!==null){P.pending=null;var Ge=X=X.next;do ce=p(ce,Ge.action),Ge=Ge.next;while(Ge!==X);js(ce,w.memoizedState)||(fl=!0),w.memoizedState=ce,w.baseQueue===null&&(w.baseState=ce),P.lastRenderedState=ce}return[ce,U]}function kl(p,w,P){var U=Ta,X=$n(),ce=bi;if(ce){if(P===void 0)throw Error(r(407));P=P()}else P=w();var Ge=!js((ma||X).memoizedState,P);if(Ge&&(X.memoizedState=P,fl=!0),X=X.queue,rd(Du.bind(null,U,X,p),[p]),X.getSnapshot!==w||Ge||Rt!==null&&Rt.memoizedState.tag&1){if(U.flags|=2048,Bl(9,Ul.bind(null,U,X,P,w),{destroy:void 0},null),Hr===null)throw Error(r(349));ce||(sa&60)!==0||Is(U,w,P)}return P}function Is(p,w,P){p.flags|=16384,p={getSnapshot:w,value:P},w=Ta.updateQueue,w===null?(w=wo(),Ta.updateQueue=w,w.stores=[p]):(P=w.stores,P===null?w.stores=[p]:P.push(p))}function Ul(p,w,P,U){w.value=P,w.getSnapshot=U,Pa(w)&&Ga(p)}function Du(p,w,P){return P(function(){Pa(w)&&Ga(p)})}function Pa(p){var w=p.getSnapshot;p=p.value;try{var P=w();return!js(p,P)}catch{return!0}}function Ga(p){var w=sl(p,2);w!==null&&Zl(w,p,2)}function rs(p){var w=Wi();if(typeof p=="function"){var P=p;if(p=P(),Ja){dn(!0);try{P()}finally{dn(!1)}}}return w.memoizedState=w.baseState=p,w.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:p},w}function ji(p,w,P,U){return p.baseState=P,Oo(p,ma,typeof U=="function"?U:Hi)}function qt(p,w,P,U,X){if(sd(p))throw Error(r(485));if(p=w.action,p!==null){var ce={payload:X,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ge){ce.listeners.push(Ge)}};we.T!==null?P(!0):ce.isTransition=!1,U(ce),P=w.pending,P===null?(ce.next=w.pending=ce,lm(w,ce)):(ce.next=P.next,w.pending=P.next=ce)}}function lm(p,w){var P=w.action,U=w.payload,X=p.state;if(w.isTransition){var ce=we.T,Ge={};we.T=Ge;try{var ft=P(X,U),Bt=we.S;Bt!==null&&Bt(Ge,ft),Th(p,w,ft)}catch(ca){Sh(p,w,ca)}finally{we.T=ce}}else try{ce=P(X,U),Th(p,w,ce)}catch(ca){Sh(p,w,ca)}}function Th(p,w,P){P!==null&&typeof P=="object"&&typeof P.then=="function"?P.then(function(U){Ch(p,w,U)},function(U){return Sh(p,w,U)}):Ch(p,w,P)}function Ch(p,w,P){w.status="fulfilled",w.value=P,Mu(w),p.state=P,w=p.pending,w!==null&&(P=w.next,P===w?p.pending=null:(P=P.next,w.next=P,lm(p,P)))}function Sh(p,w,P){var U=p.pending;if(p.pending=null,U!==null){U=U.next;do w.status="rejected",w.reason=P,Mu(w),w=w.next;while(w!==U)}p.action=null}function Mu(p){p=p.listeners;for(var w=0;w<p.length;w++)(0,p[w])()}function bh(p,w){return w}function tc(p,w){if(bi){var P=Hr.formState;if(P!==null){e:{var U=Ta;if(bi){if(ts){t:{for(var X=ts,ce=Ou;X.nodeType!==8;){if(!ce){X=null;break t}if(X=ju(X.nextSibling),X===null){X=null;break t}}ce=X.data,X=ce==="F!"||ce==="F"?X:null}if(X){ts=ju(X.nextSibling),U=X.data==="F!";break e}}bc(U)}U=!1}U&&(w=P[0])}}return P=Wi(),P.memoizedState=P.baseState=w,U={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:w},P.queue=U,P=mp.bind(null,Ta,U),U.dispatch=P,U=rs(!1),ce=id.bind(null,Ta,!1,U.queue),U=Wi(),X={state:w,dispatch:null,action:p,pending:null},U.queue=X,P=qt.bind(null,Ta,X,ce,P),X.dispatch=P,U.memoizedState=p,[w,P,!1]}function ng(p){var w=$n();return dp(w,ma,p)}function dp(p,w,P){w=Oo(p,w,bh)[0],p=Qs(Hi)[0],w=typeof w=="object"&&w!==null&&typeof w.then=="function"?Pi(w):w;var U=$n(),X=U.queue,ce=X.dispatch;return P!==U.memoizedState&&(Ta.flags|=2048,Bl(9,ig.bind(null,X,P),{destroy:void 0},null)),[w,ce,p]}function ig(p,w){p.action=w}function xh(p){var w=$n(),P=ma;if(P!==null)return dp(w,P,p);$n(),w=w.memoizedState,P=$n();var U=P.queue.dispatch;return P.memoizedState=p,[w,U,!1]}function Bl(p,w,P,U){return p={tag:p,create:w,inst:P,deps:U,next:null},w=Ta.updateQueue,w===null&&(w=wo(),Ta.updateQueue=w),P=w.lastEffect,P===null?w.lastEffect=p.next=p:(U=P.next,P.next=p,p.next=U,w.lastEffect=p),p}function ef(){return $n().memoizedState}function td(p,w,P,U){var X=Wi();Ta.flags|=p,X.memoizedState=Bl(1|w,P,{destroy:void 0},U===void 0?null:U)}function ad(p,w,P,U){var X=$n();U=U===void 0?null:U;var ce=X.memoizedState.inst;ma!==null&&U!==null&&xi(U,ma.memoizedState.deps)?X.memoizedState=Bl(w,P,ce,U):(Ta.flags|=p,X.memoizedState=Bl(1|w,P,ce,U))}function hp(p,w){td(8390656,8,p,w)}function rd(p,w){ad(2048,8,p,w)}function hl(p,w){return ad(4,2,p,w)}function sg(p,w){return ad(4,4,p,w)}function uo(p,w){if(typeof w=="function"){p=p();var P=w(p);return function(){typeof P=="function"?P():w(null)}}if(w!=null)return p=p(),w.current=p,function(){w.current=null}}function Wg(p,w,P){P=P!=null?P.concat([p]):null,ad(4,4,uo.bind(null,w,p),P)}function Ph(){}function ci(p,w){var P=$n();w=w===void 0?null:w;var U=P.memoizedState;return w!==null&&xi(w,U[1])?U[0]:(P.memoizedState=[p,w],p)}function Dn(p,w){var P=$n();w=w===void 0?null:w;var U=P.memoizedState;if(w!==null&&xi(w,U[1]))return U[0];if(U=p(),Ja){dn(!0);try{p()}finally{dn(!1)}}return P.memoizedState=[U,w],U}function fp(p,w,P){return P===void 0||(sa&1073741824)!==0?p.memoizedState=w:(p.memoizedState=P,p=Mh(),Ta.lanes|=p,ns|=p,P)}function Iu(p,w,P,U){return js(P,w)?P:cl.current!==null?(p=fp(p,P,U),js(p,w)||(fl=!0),p):(sa&42)===0?(fl=!0,p.memoizedState=P):(p=Mh(),Ta.lanes|=p,ns|=p,w)}function $d(p,w,P,U,X){var ce=je.p;je.p=ce!==0&&8>ce?ce:8;var Ge=we.T,ft={};we.T=ft,id(p,!1,w,P);try{var Bt=X(),ca=we.S;if(ca!==null&&ca(ft,Bt),Bt!==null&&typeof Bt=="object"&&typeof Bt.then=="function"){var $a=ht(Bt,U);Eh(p,w,$a,Co(p))}else Eh(p,w,U,Co(p))}catch(sr){Eh(p,w,{then:function(){},status:"rejected",reason:sr},Co())}finally{je.p=ce,we.T=Ge}}function Lu(){}function nd(p,w,P,U){if(p.tag!==5)throw Error(r(476));var X=Df(p).queue;$d(p,X,w,Ze,P===null?Lu:function(){return tf(p),P(U)})}function Df(p){var w=p.memoizedState;if(w!==null)return w;w={memoizedState:Ze,baseState:Ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:Ze},next:null};var P={};return w.next={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:P},next:null},p.memoizedState=w,p=p.alternate,p!==null&&(p.memoizedState=w),w}function tf(p){var w=Df(p).next.queue;Eh(p,w,{},Co())}function jl(){return to(py)}function Mf(){return $n().memoizedState}function Vo(){return $n().memoizedState}function Kd(p){for(var w=p.return;w!==null;){switch(w.tag){case 24:case 3:var P=Co();p=Ff(P);var U=kf(w,p,P);U!==null&&(Zl(U,w,P),Uf(U,w,P)),w={cache:Qh()},p.payload=w;return}w=w.return}}function pp(p,w,P){var U=Co();P={lane:U,revertLane:0,action:P,hasEagerState:!1,eagerState:null,next:null},sd(p)?gp(w,P):(P=Kc(p,w,P,U),P!==null&&(Zl(P,p,U),Wd(P,w,U)))}function mp(p,w,P){var U=Co();Eh(p,w,P,U)}function Eh(p,w,P,U){var X={lane:U,revertLane:0,action:P,hasEagerState:!1,eagerState:null,next:null};if(sd(p))gp(w,X);else{var ce=p.alternate;if(p.lanes===0&&(ce===null||ce.lanes===0)&&(ce=w.lastRenderedReducer,ce!==null))try{var Ge=w.lastRenderedState,ft=ce(Ge,P);if(X.hasEagerState=!0,X.eagerState=ft,js(ft,Ge))return ou(p,w,X,0),Hr===null&&hs(),!1}catch{}finally{}if(P=Kc(p,w,X,U),P!==null)return Zl(P,p,U),Wd(P,w,U),!0}return!1}function id(p,w,P,U){if(U={lane:2,revertLane:VA(),action:U,hasEagerState:!1,eagerState:null,next:null},sd(p)){if(w)throw Error(r(479))}else w=Kc(p,P,U,2),w!==null&&Zl(w,p,2)}function sd(p){var w=p.alternate;return p===Ta||w!==null&&w===Ta}function gp(p,w){Ha=aa=!0;var P=p.pending;P===null?w.next=w:(w.next=P.next,P.next=w),p.pending=w}function Wd(p,w,P){if((P&4194176)!==0){var U=w.lanes;U&=p.pendingLanes,P|=U,w.lanes=P,At(p,P)}}var Fu={readContext:to,use:fs,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useLayoutEffect:pr,useInsertionEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useSyncExternalStore:pr,useId:pr};Fu.useCacheRefresh=pr,Fu.useMemoCache=pr,Fu.useHostTransitionStatus=pr,Fu.useFormState=pr,Fu.useActionState=pr,Fu.useOptimistic=pr;var Pc={readContext:to,use:fs,useCallback:function(p,w){return Wi().memoizedState=[p,w===void 0?null:w],p},useContext:to,useEffect:hp,useImperativeHandle:function(p,w,P){P=P!=null?P.concat([p]):null,td(4194308,4,uo.bind(null,w,p),P)},useLayoutEffect:function(p,w){return td(4194308,4,p,w)},useInsertionEffect:function(p,w){td(4,2,p,w)},useMemo:function(p,w){var P=Wi();w=w===void 0?null:w;var U=p();if(Ja){dn(!0);try{p()}finally{dn(!1)}}return P.memoizedState=[U,w],U},useReducer:function(p,w,P){var U=Wi();if(P!==void 0){var X=P(w);if(Ja){dn(!0);try{P(w)}finally{dn(!1)}}}else X=w;return U.memoizedState=U.baseState=X,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:X},U.queue=p,p=p.dispatch=pp.bind(null,Ta,p),[U.memoizedState,p]},useRef:function(p){var w=Wi();return p={current:p},w.memoizedState=p},useState:function(p){p=rs(p);var w=p.queue,P=mp.bind(null,Ta,w);return w.dispatch=P,[p.memoizedState,P]},useDebugValue:Ph,useDeferredValue:function(p,w){var P=Wi();return fp(P,p,w)},useTransition:function(){var p=rs(!1);return p=$d.bind(null,Ta,p.queue,!0,!1),Wi().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,w,P){var U=Ta,X=Wi();if(bi){if(P===void 0)throw Error(r(407));P=P()}else{if(P=w(),Hr===null)throw Error(r(349));(yr&60)!==0||Is(U,w,P)}X.memoizedState=P;var ce={value:P,getSnapshot:w};return X.queue=ce,hp(Du.bind(null,U,ce,p),[p]),U.flags|=2048,Bl(9,Ul.bind(null,U,ce,P,w),{destroy:void 0},null),P},useId:function(){var p=Wi(),w=Hr.identifierPrefix;if(bi){var P=Ju,U=Nu;P=(U&~(1<<32-Yr(U)-1)).toString(32)+P,w=":"+w+"R"+P,P=Wa++,0<P&&(w+="H"+P.toString(32)),w+=":"}else P=fn++,w=":"+w+"r"+P.toString(32)+":";return p.memoizedState=w},useCacheRefresh:function(){return Wi().memoizedState=Kd.bind(null,Ta)}};Pc.useMemoCache=Pn,Pc.useHostTransitionStatus=jl,Pc.useFormState=tc,Pc.useActionState=tc,Pc.useOptimistic=function(p){var w=Wi();w.memoizedState=w.baseState=p;var P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return w.queue=P,w=id.bind(null,Ta,!0,P),P.dispatch=w,[p,w]};var cu={readContext:to,use:fs,useCallback:ci,useContext:to,useEffect:rd,useImperativeHandle:Wg,useInsertionEffect:hl,useLayoutEffect:sg,useMemo:Dn,useReducer:Qs,useRef:ef,useState:function(){return Qs(Hi)},useDebugValue:Ph,useDeferredValue:function(p,w){var P=$n();return Iu(P,ma.memoizedState,p,w)},useTransition:function(){var p=Qs(Hi)[0],w=$n().memoizedState;return[typeof p=="boolean"?p:Pi(p),w]},useSyncExternalStore:kl,useId:Mf};cu.useCacheRefresh=Vo,cu.useMemoCache=Pn,cu.useHostTransitionStatus=jl,cu.useFormState=ng,cu.useActionState=ng,cu.useOptimistic=function(p,w){var P=$n();return ji(P,ma,p,w)};var Ec={readContext:to,use:fs,useCallback:ci,useContext:to,useEffect:rd,useImperativeHandle:Wg,useInsertionEffect:hl,useLayoutEffect:sg,useMemo:Dn,useReducer:dl,useRef:ef,useState:function(){return dl(Hi)},useDebugValue:Ph,useDeferredValue:function(p,w){var P=$n();return ma===null?fp(P,p,w):Iu(P,ma.memoizedState,p,w)},useTransition:function(){var p=dl(Hi)[0],w=$n().memoizedState;return[typeof p=="boolean"?p:Pi(p),w]},useSyncExternalStore:kl,useId:Mf};Ec.useCacheRefresh=Vo,Ec.useMemoCache=Pn,Ec.useHostTransitionStatus=jl,Ec.useFormState=xh,Ec.useActionState=xh,Ec.useOptimistic=function(p,w){var P=$n();return ma!==null?ji(P,ma,p,w):(P.baseState=p,[p,P.queue.dispatch])};function Ls(p,w,P,U){w=p.memoizedState,P=P(U,w),P=P==null?w:Ne({},w,P),p.memoizedState=P,p.lanes===0&&(p.updateQueue.baseState=P)}var du={isMounted:function(p){return(p=p._reactInternals)?Oe(p)===p:!1},enqueueSetState:function(p,w,P){p=p._reactInternals;var U=Co(),X=Ff(U);X.payload=w,P!=null&&(X.callback=P),w=kf(p,X,U),w!==null&&(Zl(w,p,U),Uf(w,p,U))},enqueueReplaceState:function(p,w,P){p=p._reactInternals;var U=Co(),X=Ff(U);X.tag=1,X.payload=w,P!=null&&(X.callback=P),w=kf(p,X,U),w!==null&&(Zl(w,p,U),Uf(w,p,U))},enqueueForceUpdate:function(p,w){p=p._reactInternals;var P=Co(),U=Ff(P);U.tag=2,w!=null&&(U.callback=w),w=kf(p,U,P),w!==null&&(Zl(w,p,P),Uf(w,p,P))}};function ac(p,w,P,U,X,ce,Ge){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(U,ce,Ge):w.prototype&&w.prototype.isPureReactComponent?!Dl(P,U)||!Dl(X,ce):!0}function eo(p,w,P,U){p=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(P,U),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(P,U),w.state!==p&&du.enqueueReplaceState(w,w.state,null)}function ku(p,w){var P=w;if("ref"in w){P={};for(var U in w)U!=="ref"&&(P[U]=w[U])}if(p=p.defaultProps){P===w&&(P=Ne({},P));for(var X in p)P[X]===void 0&&(P[X]=p[X])}return P}var Nh=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var w=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(w))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function yp(p){Nh(p)}function af(p){console.error(p)}function Oh(p){Nh(p)}function Yd(p,w){try{var P=p.onUncaughtError;P(w.value,{componentStack:w.stack})}catch(U){setTimeout(function(){throw U})}}function og(p,w,P){try{var U=p.onCaughtError;U(P.value,{componentStack:P.stack,errorBoundary:w.tag===1?w.stateNode:null})}catch(X){setTimeout(function(){throw X})}}function um(p,w,P){return P=Ff(P),P.tag=3,P.payload={element:null},P.callback=function(){Yd(p,w)},P}function lg(p){return p=Ff(p),p.tag=3,p}function Yg(p,w,P,U){var X=P.type.getDerivedStateFromError;if(typeof X=="function"){var ce=U.value;p.payload=function(){return X(ce)},p.callback=function(){og(w,P,U)}}var Ge=P.stateNode;Ge!==null&&typeof Ge.componentDidCatch=="function"&&(p.callback=function(){og(w,P,U),typeof X!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var ft=U.stack;this.componentDidCatch(U.value,{componentStack:ft!==null?ft:""})})}function gA(p,w,P,U,X){if(P.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){if(w=P.alternate,w!==null&&Rp(w,P,X,!0),P=Fl.current,P!==null){switch(P.tag){case 13:return ec===null?i0():P.alternate===null&&kn===0&&(kn=3),P.flags&=-257,P.flags|=65536,P.lanes=X,U===Rh?P.flags|=16384:(w=P.updateQueue,w===null?P.updateQueue=new Set([U]):w.add(U),L1(p,U,X)),!1;case 22:return P.flags|=65536,U===Rh?P.flags|=16384:(w=P.updateQueue,w===null?(w={transitions:null,markerInstances:null,retryQueue:new Set([U])},P.updateQueue=w):(P=w.retryQueue,P===null?w.retryQueue=new Set([U]):P.add(U)),L1(p,U,X)),!1}throw Error(r(435,P.tag))}return L1(p,U,X),i0(),!1}if(bi)return w=Fl.current,w!==null?((w.flags&65536)===0&&(w.flags|=256),w.flags|=65536,w.lanes=X,U!==up&&(p=Error(r(422),{cause:U}),jd(ls(p,P)))):(U!==up&&(w=Error(r(423),{cause:U}),jd(ls(w,P))),p=p.current.alternate,p.flags|=65536,X&=-X,p.lanes|=X,U=ls(U,P),X=um(p.stateNode,U,X),Qg(p,X),kn!==4&&(kn=2)),!1;var ce=Error(r(520),{cause:U});if(ce=ls(ce,P),Vn===null?Vn=[ce]:Vn.push(ce),kn!==4&&(kn=2),w===null)return!0;U=ls(U,P),P=w;do{switch(P.tag){case 3:return P.flags|=65536,p=X&-X,P.lanes|=p,p=um(P.stateNode,U,p),Qg(P,p),!1;case 1:if(w=P.type,ce=P.stateNode,(P.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(ps===null||!ps.has(ce))))return P.flags|=65536,X&=-X,P.lanes|=X,X=lg(X),Yg(X,p,P,U),Qg(P,X),!1}P=P.return}while(P!==null);return!1}var cm=Error(r(461)),fl=!1;function Rl(p,w,P,U){w.child=p===null?Vf(w,null,P,U):Xc(w,p.child,P,U)}function yA(p,w,P,U,X){P=P.render;var ce=w.ref;if("ref"in U){var Ge={};for(var ft in U)ft!=="ref"&&(Ge[ft]=U[ft])}else Ge=U;return Oc(w),U=Ii(p,w,P,Ge,ce,X),ft=Hn(),p!==null&&!fl?(xn(p,w,X),Nc(p,w,X)):(bi&&ft&&$h(w),w.flags|=1,Rl(p,w,U,X),w.child)}function AA(p,w,P,U,X){if(p===null){var ce=P.type;return typeof ce=="function"&&!da(ce)&&ce.defaultProps===void 0&&P.compare===null?(w.tag=15,w.type=ce,vA(p,w,ce,U,X)):(p=la(P.type,null,U,w,w.mode,X),p.ref=w.ref,p.return=w,w.child=p)}if(ce=p.child,!Ss(p,X)){var Ge=ce.memoizedProps;if(P=P.compare,P=P!==null?P:Dl,P(Ge,U)&&p.ref===w.ref)return Nc(p,w,X)}return w.flags|=1,p=xa(ce,U),p.ref=w.ref,p.return=w,w.child=p}function vA(p,w,P,U,X){if(p!==null){var ce=p.memoizedProps;if(Dl(ce,U)&&p.ref===w.ref)if(fl=!1,w.pendingProps=U=ce,Ss(p,X))(p.flags&131072)!==0&&(fl=!0);else return w.lanes=p.lanes,Nc(p,w,X)}return Ap(p,w,P,U,X)}function dm(p,w,P){var U=w.pendingProps,X=U.children,ce=(w.stateNode._pendingVisibility&2)!==0,Ge=p!==null?p.memoizedState:null;if(Tl(p,w),U.mode==="hidden"||ce){if((w.flags&128)!==0){if(U=Ge!==null?Ge.baseLanes|P:P,p!==null){for(X=w.child=p.child,ce=0;X!==null;)ce=ce|X.lanes|X.childLanes,X=X.sibling;w.childLanes=ce&~U}else w.childLanes=0,w.child=null;return hm(p,w,U,P)}if((P&536870912)!==0)w.memoizedState={baseLanes:0,cachePool:null},p!==null&&Pt(w,Ge!==null?Ge.cachePool:null),Ge!==null?zu(w,Ge):qd(),cp(w);else return w.lanes=w.childLanes=536870912,hm(p,w,Ge!==null?Ge.baseLanes|P:P,P)}else Ge!==null?(Pt(w,Ge.cachePool),zu(w,Ge),Hd(),w.memoizedState=null):(p!==null&&Pt(w,null),qd(),Hd());return Rl(p,w,X,P),w.child}function hm(p,w,P,U){var X=ea();return X=X===null?null:{parent:lo._currentValue,pool:X},w.memoizedState={baseLanes:P,cachePool:X},p!==null&&Pt(w,null),qd(),cp(w),p!==null&&Rp(p,w,U,!0),null}function Tl(p,w){var P=w.ref;if(P===null)p!==null&&p.ref!==null&&(w.flags|=2097664);else{if(typeof P!="function"&&typeof P!="object")throw Error(r(284));(p===null||p.ref!==P)&&(w.flags|=2097664)}}function Ap(p,w,P,U,X){return Oc(w),P=Ii(p,w,P,U,void 0,X),U=Hn(),p!==null&&!fl?(xn(p,w,X),Nc(p,w,X)):(bi&&U&&$h(w),w.flags|=1,Rl(p,w,P,X),w.child)}function _A(p,w,P,U,X,ce){return Oc(w),w.updateQueue=null,P=ui(w,U,P,X),Yn(p),U=Hn(),p!==null&&!fl?(xn(p,w,ce),Nc(p,w,ce)):(bi&&U&&$h(w),w.flags|=1,Rl(p,w,P,ce),w.child)}function wA(p,w,P,U,X){if(Oc(w),w.stateNode===null){var ce=Wc,Ge=P.contextType;typeof Ge=="object"&&Ge!==null&&(ce=to(Ge)),ce=new P(U,ce),w.memoizedState=ce.state!==null&&ce.state!==void 0?ce.state:null,ce.updater=du,w.stateNode=ce,ce._reactInternals=w,ce=w.stateNode,ce.props=U,ce.state=w.memoizedState,ce.refs={},zh(w),Ge=P.contextType,ce.context=typeof Ge=="object"&&Ge!==null?to(Ge):Wc,ce.state=w.memoizedState,Ge=P.getDerivedStateFromProps,typeof Ge=="function"&&(Ls(w,P,Ge,U),ce.state=w.memoizedState),typeof P.getDerivedStateFromProps=="function"||typeof ce.getSnapshotBeforeUpdate=="function"||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(Ge=ce.state,typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount(),Ge!==ce.state&&du.enqueueReplaceState(ce,ce.state,null),mm(w,U,ce,X),Dh(),ce.state=w.memoizedState),typeof ce.componentDidMount=="function"&&(w.flags|=4194308),U=!0}else if(p===null){ce=w.stateNode;var ft=w.memoizedProps,Bt=ku(P,ft);ce.props=Bt;var ca=ce.context,$a=P.contextType;Ge=Wc,typeof $a=="object"&&$a!==null&&(Ge=to($a));var sr=P.getDerivedStateFromProps;$a=typeof sr=="function"||typeof ce.getSnapshotBeforeUpdate=="function",ft=w.pendingProps!==ft,$a||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(ft||ca!==Ge)&&eo(w,ce,U,Ge),nc=!1;var Ea=w.memoizedState;ce.state=Ea,mm(w,U,ce,X),Dh(),ca=w.memoizedState,ft||Ea!==ca||nc?(typeof sr=="function"&&(Ls(w,P,sr,U),ca=w.memoizedState),(Bt=nc||ac(w,P,Bt,U,Ea,ca,Ge))?($a||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=U,w.memoizedState=ca),ce.props=U,ce.state=ca,ce.context=Ge,U=Bt):(typeof ce.componentDidMount=="function"&&(w.flags|=4194308),U=!1)}else{ce=w.stateNode,SA(p,w),Ge=w.memoizedProps,$a=ku(P,Ge),ce.props=$a,sr=w.pendingProps,Ea=ce.context,ca=P.contextType,Bt=Wc,typeof ca=="object"&&ca!==null&&(Bt=to(ca)),ft=P.getDerivedStateFromProps,(ca=typeof ft=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Ge!==sr||Ea!==Bt)&&eo(w,ce,U,Bt),nc=!1,Ea=w.memoizedState,ce.state=Ea,mm(w,U,ce,X),Dh();var Ka=w.memoizedState;Ge!==sr||Ea!==Ka||nc||p!==null&&p.dependencies!==null&&Lf(p.dependencies)?(typeof ft=="function"&&(Ls(w,P,ft,U),Ka=w.memoizedState),($a=nc||ac(w,P,$a,U,Ea,Ka,Bt)||p!==null&&p.dependencies!==null&&Lf(p.dependencies))?(ca||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(U,Ka,Bt),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(U,Ka,Bt)),typeof ce.componentDidUpdate=="function"&&(w.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ce.componentDidUpdate!="function"||Ge===p.memoizedProps&&Ea===p.memoizedState||(w.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Ge===p.memoizedProps&&Ea===p.memoizedState||(w.flags|=1024),w.memoizedProps=U,w.memoizedState=Ka),ce.props=U,ce.state=Ka,ce.context=Bt,U=$a):(typeof ce.componentDidUpdate!="function"||Ge===p.memoizedProps&&Ea===p.memoizedState||(w.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Ge===p.memoizedProps&&Ea===p.memoizedState||(w.flags|=1024),U=!1)}return ce=U,Tl(p,w),U=(w.flags&128)!==0,ce||U?(ce=w.stateNode,P=U&&typeof P.getDerivedStateFromError!="function"?null:ce.render(),w.flags|=1,p!==null&&U?(w.child=Xc(w,p.child,null,X),w.child=Xc(w,null,P,X)):Rl(p,w,P,X),w.memoizedState=ce.state,p=w.child):p=Nc(p,w,X),p}function a0(p,w,P,U){return Yh(),w.flags|=256,Rl(p,w,P,U),w.child}var RA={dehydrated:null,treeContext:null,retryLane:0};function Gi(p){return{baseLanes:p,cachePool:wa()}}function Xg(p,w,P){return p=p!==null?p.childLanes&~P:0,w&&(p|=ao),p}function Jg(p,w,P){var U=w.pendingProps,X=!1,ce=(w.flags&128)!==0,Ge;if((Ge=ce)||(Ge=p!==null&&p.memoizedState===null?!1:(Gs.current&2)!==0),Ge&&(X=!0,w.flags&=-129),Ge=(w.flags&32)!==0,w.flags&=-33,p===null){if(bi){if(X?Qc(w):Hd(),bi){var ft=ts,Bt;if(Bt=ft){e:{for(Bt=ft,ft=Ou;Bt.nodeType!==8;){if(!ft){ft=null;break e}if(Bt=ju(Bt.nextSibling),Bt===null){ft=null;break e}}ft=Bt}ft!==null?(w.memoizedState={dehydrated:ft,treeContext:Yc!==null?{id:Nu,overflow:Ju}:null,retryLane:536870912},Bt=ia(18,null,null,0),Bt.stateNode=ft,Bt.return=w,w.child=Bt,ll=w,ts=null,Bt=!0):Bt=!1}Bt||bc(w)}if(ft=w.memoizedState,ft!==null&&(ft=ft.dehydrated,ft!==null))return ft.data==="$!"?w.lanes=16:w.lanes=536870912,null;ed(w)}return ft=U.children,U=U.fallback,X?(Hd(),X=w.mode,ft=vp({mode:"hidden",children:ft},X),U=zt(U,X,P,null),ft.return=w,U.return=w,ft.sibling=U,w.child=ft,X=w.child,X.memoizedState=Gi(P),X.childLanes=Xg(p,Ge,P),w.memoizedState=RA,U):(Qc(w),TA(w,ft))}if(Bt=p.memoizedState,Bt!==null&&(ft=Bt.dehydrated,ft!==null)){if(ce)w.flags&256?(Qc(w),w.flags&=-257,w=ug(p,w,P)):w.memoizedState!==null?(Hd(),w.child=p.child,w.flags|=128,w=null):(Hd(),X=U.fallback,ft=w.mode,U=vp({mode:"visible",children:U.children},ft),X=zt(X,ft,P,null),X.flags|=2,U.return=w,X.return=w,U.sibling=X,w.child=U,Xc(w,p.child,null,P),U=w.child,U.memoizedState=Gi(P),U.childLanes=Xg(p,Ge,P),w.memoizedState=RA,w=X);else if(Qc(w),ft.data==="$!"){if(Ge=ft.nextSibling&&ft.nextSibling.dataset,Ge)var ca=Ge.dgst;Ge=ca,U=Error(r(419)),U.stack="",U.digest=Ge,jd({value:U,source:null,stack:null}),w=ug(p,w,P)}else if(fl||Rp(p,w,P,!1),Ge=(P&p.childLanes)!==0,fl||Ge){if(Ge=Hr,Ge!==null){if(U=P&-P,(U&42)!==0)U=1;else switch(U){case 2:U=1;break;case 8:U=4;break;case 32:U=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:U=64;break;case 268435456:U=134217728;break;default:U=0}if(U=(U&(Ge.suspendedLanes|P))!==0?0:U,U!==0&&U!==Bt.retryLane)throw Bt.retryLane=U,sl(p,U),Zl(Ge,p,U),cm}ft.data==="$?"||i0(),w=ug(p,w,P)}else ft.data==="$?"?(w.flags|=128,w.child=p.child,w=uE.bind(null,p),ft._reactRetry=w,w=null):(p=Bt.treeContext,ts=ju(ft.nextSibling),ll=w,bi=!0,uu=null,Ou=!1,p!==null&&(ol[_l++]=Nu,ol[_l++]=Ju,ol[_l++]=Yc,Nu=p.id,Ju=p.overflow,Yc=w),w=TA(w,U.children),w.flags|=4096);return w}return X?(Hd(),X=U.fallback,ft=w.mode,Bt=p.child,ca=Bt.sibling,U=xa(Bt,{mode:"hidden",children:U.children}),U.subtreeFlags=Bt.subtreeFlags&31457280,ca!==null?X=xa(ca,X):(X=zt(X,ft,P,null),X.flags|=2),X.return=w,U.return=w,U.sibling=X,w.child=U,U=X,X=w.child,ft=p.child.memoizedState,ft===null?ft=Gi(P):(Bt=ft.cachePool,Bt!==null?(ca=lo._currentValue,Bt=Bt.parent!==ca?{parent:ca,pool:ca}:Bt):Bt=wa(),ft={baseLanes:ft.baseLanes|P,cachePool:Bt}),X.memoizedState=ft,X.childLanes=Xg(p,Ge,P),w.memoizedState=RA,U):(Qc(w),P=p.child,p=P.sibling,P=xa(P,{mode:"visible",children:U.children}),P.return=w,P.sibling=null,p!==null&&(Ge=w.deletions,Ge===null?(w.deletions=[p],w.flags|=16):Ge.push(p)),w.child=P,w.memoizedState=null,P)}function TA(p,w){return w=vp({mode:"visible",children:w},p.mode),w.return=p,p.child=w}function vp(p,w){return ua(p,w,0,null)}function ug(p,w,P){return Xc(w,p.child,null,P),p=TA(w,w.pendingProps.children),p.flags|=2,w.memoizedState=null,p}function fm(p,w,P){p.lanes|=w;var U=p.alternate;U!==null&&(U.lanes|=w),CA(p.return,w,P)}function pm(p,w,P,U,X){var ce=p.memoizedState;ce===null?p.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:U,tail:P,tailMode:X}:(ce.isBackwards=w,ce.rendering=null,ce.renderingStartTime=0,ce.last=U,ce.tail=P,ce.tailMode=X)}function Xd(p,w,P){var U=w.pendingProps,X=U.revealOrder,ce=U.tail;if(Rl(p,w,U.children,P),U=Gs.current,(U&2)!==0)U=U&1|2,w.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=w.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&fm(p,P,w);else if(p.tag===19)fm(p,P,w);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===w)break e;for(;p.sibling===null;){if(p.return===null||p.return===w)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}U&=1}switch(Ae(Gs,U),X){case"forwards":for(P=w.child,X=null;P!==null;)p=P.alternate,p!==null&&sm(p)===null&&(X=P),P=P.sibling;P=X,P===null?(X=w.child,w.child=null):(X=P.sibling,P.sibling=null),pm(w,!1,X,P,ce);break;case"backwards":for(P=null,X=w.child,w.child=null;X!==null;){if(p=X.alternate,p!==null&&sm(p)===null){w.child=X;break}p=X.sibling,X.sibling=P,P=X,X=p}pm(w,!0,P,null,ce);break;case"together":pm(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Nc(p,w,P){if(p!==null&&(w.dependencies=p.dependencies),ns|=w.lanes,(P&w.childLanes)===0)if(p!==null){if(Rp(p,w,P,!1),(P&w.childLanes)===0)return null}else return null;if(p!==null&&w.child!==p.child)throw Error(r(153));if(w.child!==null){for(p=w.child,P=xa(p,p.pendingProps),w.child=P,P.return=w;p.sibling!==null;)p=p.sibling,P=P.sibling=xa(p,p.pendingProps),P.return=w;P.sibling=null}return w.child}function Ss(p,w){return(p.lanes&w)!==0?!0:(p=p.dependencies,!!(p!==null&&Lf(p)))}function od(p,w,P){switch(w.tag){case 3:Ht(w,w.stateNode.containerInfo),ld(w,lo,p.memoizedState.cache),Yh();break;case 27:case 5:fr(w);break;case 4:Ht(w,w.stateNode.containerInfo);break;case 10:ld(w,w.type,w.memoizedProps.value);break;case 13:var U=w.memoizedState;if(U!==null)return U.dehydrated!==null?(Qc(w),w.flags|=128,null):(P&w.child.childLanes)!==0?Jg(p,w,P):(Qc(w),p=Nc(p,w,P),p!==null?p.sibling:null);Qc(w);break;case 19:var X=(p.flags&128)!==0;if(U=(P&w.childLanes)!==0,U||(Rp(p,w,P,!1),U=(P&w.childLanes)!==0),X){if(U)return Xd(p,w,P);w.flags|=128}if(X=w.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),Ae(Gs,Gs.current),U)break;return null;case 22:case 23:return w.lanes=0,dm(p,w,P);case 24:ld(w,lo,p.memoizedState.cache)}return Nc(p,w,P)}function _p(p,w,P){if(p!==null)if(p.memoizedProps!==w.pendingProps)fl=!0;else{if(!Ss(p,P)&&(w.flags&128)===0)return fl=!1,od(p,w,P);fl=(p.flags&131072)!==0}else fl=!1,bi&&(w.flags&1048576)!==0&&rm(w,Hh,w.index);switch(w.lanes=0,w.tag){case 16:e:{p=w.pendingProps;var U=w.elementType,X=U._init;if(U=X(U._payload),w.type=U,typeof U=="function")da(U)?(p=ku(U,p),w.tag=1,w=wA(null,w,U,p,P)):(w.tag=0,w=Ap(null,w,U,p,P));else{if(U!=null){if(X=U.$$typeof,X===Z){w.tag=11,w=yA(null,w,U,p,P);break e}else if(X===W){w.tag=14,w=AA(null,w,U,p,P);break e}}throw w=Re(U)||U,Error(r(306,w,""))}}return w;case 0:return Ap(p,w,w.type,w.pendingProps,P);case 1:return U=w.type,X=ku(U,w.pendingProps),wA(p,w,U,X,P);case 3:e:{if(Ht(w,w.stateNode.containerInfo),p===null)throw Error(r(387));var ce=w.pendingProps;X=w.memoizedState,U=X.element,SA(p,w),mm(w,ce,null,P);var Ge=w.memoizedState;if(ce=Ge.cache,ld(w,lo,ce),ce!==X.cache&&cg(w,[lo],P,!0),Dh(),ce=Ge.element,X.isDehydrated)if(X={element:ce,isDehydrated:!1,cache:Ge.cache},w.updateQueue.baseState=X,w.memoizedState=X,w.flags&256){w=a0(p,w,ce,P);break e}else if(ce!==U){U=ls(Error(r(424)),w),jd(U),w=a0(p,w,ce,P);break e}else for(ts=ju(w.stateNode.containerInfo.firstChild),ll=w,bi=!0,uu=null,Ou=!0,P=Vf(w,null,ce,P),w.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(Yh(),ce===U){w=Nc(p,w,P);break e}Rl(p,w,ce,P)}w=w.child}return w;case 26:return Tl(p,w),p===null?(P=Y1(w.type,null,w.pendingProps,null))?w.memoizedState=P:bi||(P=w.type,p=w.pendingProps,U=cy(fa.current).createElement(P),U[Yt]=w,U[Kt]=p,zo(U,P,p),Qr(U),w.stateNode=U):w.memoizedState=Y1(w.type,p.memoizedProps,w.pendingProps,p.memoizedState),null;case 27:return fr(w),p===null&&bi&&(U=w.stateNode=LA(w.type,w.pendingProps,fa.current),ll=w,Ou=!0,ts=ju(U.firstChild)),U=w.pendingProps.children,p!==null||bi?Rl(p,w,U,P):w.child=Xc(w,null,U,P),Tl(p,w),w.child;case 5:return p===null&&bi&&((X=U=ts)&&(U=gE(U,w.type,w.pendingProps,Ou),U!==null?(w.stateNode=U,ll=w,ts=ju(U.firstChild),Ou=!1,X=!0):X=!1),X||bc(w)),fr(w),X=w.type,ce=w.pendingProps,Ge=p!==null?p.memoizedProps:null,U=ce.children,m0(X,ce)?U=null:Ge!==null&&m0(X,Ge)&&(w.flags|=32),w.memoizedState!==null&&(X=Ii(p,w,as,null,null,P),py._currentValue=X),Tl(p,w),Rl(p,w,U,P),w.child;case 6:return p===null&&bi&&((p=P=ts)&&(P=yE(P,w.pendingProps,Ou),P!==null?(w.stateNode=P,ll=w,ts=null,p=!0):p=!1),p||bc(w)),null;case 13:return Jg(p,w,P);case 4:return Ht(w,w.stateNode.containerInfo),U=w.pendingProps,p===null?w.child=Xc(w,null,U,P):Rl(p,w,U,P),w.child;case 11:return yA(p,w,w.type,w.pendingProps,P);case 7:return Rl(p,w,w.pendingProps,P),w.child;case 8:return Rl(p,w,w.pendingProps.children,P),w.child;case 12:return Rl(p,w,w.pendingProps.children,P),w.child;case 10:return U=w.pendingProps,ld(w,w.type,U.value),Rl(p,w,U.children,P),w.child;case 9:return X=w.type._context,U=w.pendingProps.children,Oc(w),X=to(X),U=U(X),w.flags|=1,Rl(p,w,U,P),w.child;case 14:return AA(p,w,w.type,w.pendingProps,P);case 15:return vA(p,w,w.type,w.pendingProps,P);case 19:return Xd(p,w,P);case 22:return dm(p,w,P);case 24:return Oc(w),U=to(lo),p===null?(X=ea(),X===null&&(X=Hr,ce=Qh(),X.pooledCache=ce,ce.refCount++,ce!==null&&(X.pooledCacheLanes|=P),X=ce),w.memoizedState={parent:U,cache:X},zh(w),ld(w,lo,X)):((p.lanes&P)!==0&&(SA(p,w),mm(w,null,null,P),Dh()),X=p.memoizedState,ce=w.memoizedState,X.parent!==U?(X={parent:U,cache:U},w.memoizedState=X,w.lanes===0&&(w.memoizedState=w.updateQueue.baseState=X),ld(w,lo,U)):(U=ce.cache,ld(w,lo,U),U!==X.cache&&cg(w,[lo],P,!0))),Rl(p,w,w.pendingProps.children,P),w.child;case 29:throw w.pendingProps}throw Error(r(156,w.tag))}var wp=dt(null),If=null,Vh=null;function ld(p,w,P){Ae(wp,w._currentValue),w._currentValue=P}function Jd(p){p._currentValue=wp.current,ut(wp)}function CA(p,w,P){for(;p!==null;){var U=p.alternate;if((p.childLanes&w)!==w?(p.childLanes|=w,U!==null&&(U.childLanes|=w)):U!==null&&(U.childLanes&w)!==w&&(U.childLanes|=w),p===P)break;p=p.return}}function cg(p,w,P,U){var X=p.child;for(X!==null&&(X.return=p);X!==null;){var ce=X.dependencies;if(ce!==null){var Ge=X.child;ce=ce.firstContext;e:for(;ce!==null;){var ft=ce;ce=X;for(var Bt=0;Bt<w.length;Bt++)if(ft.context===w[Bt]){ce.lanes|=P,ft=ce.alternate,ft!==null&&(ft.lanes|=P),CA(ce.return,P,p),U||(Ge=null);break e}ce=ft.next}}else if(X.tag===18){if(Ge=X.return,Ge===null)throw Error(r(341));Ge.lanes|=P,ce=Ge.alternate,ce!==null&&(ce.lanes|=P),CA(Ge,P,p),Ge=null}else Ge=X.child;if(Ge!==null)Ge.return=X;else for(Ge=X;Ge!==null;){if(Ge===p){Ge=null;break}if(X=Ge.sibling,X!==null){X.return=Ge.return,Ge=X;break}Ge=Ge.return}X=Ge}}function Rp(p,w,P,U){p=null;for(var X=w,ce=!1;X!==null;){if(!ce){if((X.flags&524288)!==0)ce=!0;else if((X.flags&262144)!==0)break}if(X.tag===10){var Ge=X.alternate;if(Ge===null)throw Error(r(387));if(Ge=Ge.memoizedProps,Ge!==null){var ft=X.type;js(X.pendingProps.value,Ge.value)||(p!==null?p.push(ft):p=[ft])}}else if(X===Nt.current){if(Ge=X.alternate,Ge===null)throw Error(r(387));Ge.memoizedState.memoizedState!==X.memoizedState.memoizedState&&(p!==null?p.push(py):p=[py])}X=X.return}p!==null&&cg(w,p,P,U),w.flags|=262144}function Lf(p){for(p=p.firstContext;p!==null;){if(!js(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function Oc(p){If=p,Vh=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function to(p){return rf(If,p)}function rc(p,w){return If===null&&Oc(p),rf(p,w)}function rf(p,w){var P=w._currentValue;if(w={context:w,memoizedValue:P,next:null},Vh===null){if(p===null)throw Error(r(308));Vh=w,p.dependencies={lanes:0,firstContext:w},p.flags|=524288}else Vh=Vh.next=w;return P}var nc=!1;function zh(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function SA(p,w){p=p.updateQueue,w.updateQueue===p&&(w.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Ff(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function kf(p,w,P){var U=p.updateQueue;if(U===null)return null;if(U=U.shared,(Mr&2)!==0){var X=U.pending;return X===null?w.next=w:(w.next=X.next,X.next=w),U.pending=w,w=cn(p),lu(p,null,P),w}return ou(p,U,w,P),cn(p)}function Uf(p,w,P){if(w=w.updateQueue,w!==null&&(w=w.shared,(P&4194176)!==0)){var U=w.lanes;U&=p.pendingLanes,P|=U,w.lanes=P,At(p,P)}}function Qg(p,w){var P=p.updateQueue,U=p.alternate;if(U!==null&&(U=U.updateQueue,P===U)){var X=null,ce=null;if(P=P.firstBaseUpdate,P!==null){do{var Ge={lane:P.lane,tag:P.tag,payload:P.payload,callback:null,next:null};ce===null?X=ce=Ge:ce=ce.next=Ge,P=P.next}while(P!==null);ce===null?X=ce=w:ce=ce.next=w}else X=ce=w;P={baseState:U.baseState,firstBaseUpdate:X,lastBaseUpdate:ce,shared:U.shared,callbacks:U.callbacks},p.updateQueue=P;return}p=P.lastBaseUpdate,p===null?P.firstBaseUpdate=w:p.next=w,P.lastBaseUpdate=w}var Cl=!1;function Dh(){if(Cl){var p=We;if(p!==null)throw p}}function mm(p,w,P,U){Cl=!1;var X=p.updateQueue;nc=!1;var ce=X.firstBaseUpdate,Ge=X.lastBaseUpdate,ft=X.shared.pending;if(ft!==null){X.shared.pending=null;var Bt=ft,ca=Bt.next;Bt.next=null,Ge===null?ce=ca:Ge.next=ca,Ge=Bt;var $a=p.alternate;$a!==null&&($a=$a.updateQueue,ft=$a.lastBaseUpdate,ft!==Ge&&(ft===null?$a.firstBaseUpdate=ca:ft.next=ca,$a.lastBaseUpdate=Bt))}if(ce!==null){var sr=X.baseState;Ge=0,$a=ca=Bt=null,ft=ce;do{var Ea=ft.lane&-536870913,Ka=Ea!==ft.lane;if(Ka?(yr&Ea)===Ea:(U&Ea)===Ea){Ea!==0&&Ea===Me&&(Cl=!0),$a!==null&&($a=$a.next={lane:0,tag:ft.tag,payload:ft.payload,callback:null,next:null});e:{var sn=p,ni=ft;Ea=w;var Qo=P;switch(ni.tag){case 1:if(sn=ni.payload,typeof sn=="function"){sr=sn.call(Qo,sr,Ea);break e}sr=sn;break e;case 3:sn.flags=sn.flags&-65537|128;case 0:if(sn=ni.payload,Ea=typeof sn=="function"?sn.call(Qo,sr,Ea):sn,Ea==null)break e;sr=Ne({},sr,Ea);break e;case 2:nc=!0}}Ea=ft.callback,Ea!==null&&(p.flags|=64,Ka&&(p.flags|=8192),Ka=X.callbacks,Ka===null?X.callbacks=[Ea]:Ka.push(Ea))}else Ka={lane:Ea,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},$a===null?(ca=$a=Ka,Bt=sr):$a=$a.next=Ka,Ge|=Ea;if(ft=ft.next,ft===null){if(ft=X.shared.pending,ft===null)break;Ka=ft,ft=Ka.next,Ka.next=null,X.lastBaseUpdate=Ka,X.shared.pending=null}}while(!0);$a===null&&(Bt=sr),X.baseState=Bt,X.firstBaseUpdate=ca,X.lastBaseUpdate=$a,ce===null&&(X.shared.lanes=0),ns|=Ge,p.lanes=Ge,p.memoizedState=sr}}function bA(p,w){if(typeof p!="function")throw Error(r(191,p));p.call(w)}function Tp(p,w){var P=p.callbacks;if(P!==null)for(p.callbacks=null,p=0;p<P.length;p++)bA(P[p],w)}function Bf(p,w){try{var P=w.updateQueue,U=P!==null?P.lastEffect:null;if(U!==null){var X=U.next;P=X;do{if((P.tag&p)===p){U=void 0;var ce=P.create,Ge=P.inst;U=ce(),Ge.destroy=U}P=P.next}while(P!==X)}}catch(ft){Zs(w,w.return,ft)}}function Wo(p,w,P){try{var U=w.updateQueue,X=U!==null?U.lastEffect:null;if(X!==null){var ce=X.next;U=ce;do{if((U.tag&p)===p){var Ge=U.inst,ft=Ge.destroy;if(ft!==void 0){Ge.destroy=void 0,X=w;var Bt=P;try{ft()}catch(ca){Zs(X,Bt,ca)}}}U=U.next}while(U!==ce)}}catch(ca){Zs(w,w.return,ca)}}function ic(p){var w=p.updateQueue;if(w!==null){var P=p.stateNode;try{Tp(w,P)}catch(U){Zs(p,p.return,U)}}}function Cp(p,w,P){P.props=ku(p.type,p.memoizedProps),P.state=p.memoizedState;try{P.componentWillUnmount()}catch(U){Zs(p,w,U)}}function Vc(p,w){try{var P=p.ref;if(P!==null){var U=p.stateNode;switch(p.tag){case 26:case 27:case 5:var X=U;break;default:X=U}typeof P=="function"?p.refCleanup=P(X):P.current=X}}catch(ce){Zs(p,w,ce)}}function pl(p,w){var P=p.ref,U=p.refCleanup;if(P!==null)if(typeof U=="function")try{U()}catch(X){Zs(p,w,X)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof P=="function")try{P(null)}catch(X){Zs(p,w,X)}else P.current=null}function ey(p){var w=p.type,P=p.memoizedProps,U=p.stateNode;try{e:switch(w){case"button":case"input":case"select":case"textarea":P.autoFocus&&U.focus();break e;case"img":P.src?U.src=P.src:P.srcSet&&(U.srcset=P.srcSet)}}catch(X){Zs(p,p.return,X)}}function Gn(p,w,P){try{var U=p.stateNode;fE(U,p.type,P,w),U[Kt]=w}catch(X){Zs(p,p.return,X)}}function nf(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27||p.tag===4}function xA(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||nf(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==27&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function PA(p,w,P){var U=p.tag;if(U===5||U===6)p=p.stateNode,w?P.nodeType===8?P.parentNode.insertBefore(p,w):P.insertBefore(p,w):(P.nodeType===8?(w=P.parentNode,w.insertBefore(p,P)):(w=P,w.appendChild(p)),P=P._reactRootContainer,P!=null||w.onclick!==null||(w.onclick=uy));else if(U!==4&&U!==27&&(p=p.child,p!==null))for(PA(p,w,P),p=p.sibling;p!==null;)PA(p,w,P),p=p.sibling}function Sp(p,w,P){var U=p.tag;if(U===5||U===6)p=p.stateNode,w?P.insertBefore(p,w):P.appendChild(p);else if(U!==4&&U!==27&&(p=p.child,p!==null))for(Sp(p,w,P),p=p.sibling;p!==null;)Sp(p,w,P),p=p.sibling}var Sl=!1,Li=!1,Yo=!1,Uu=typeof WeakSet=="function"?WeakSet:Set,Ei=null,ty=!1;function Bu(p,w){if(p=p.containerInfo,eh=Cm,p=Ml(p),No(p)){if("selectionStart"in p)var P={start:p.selectionStart,end:p.selectionEnd};else e:{P=(P=p.ownerDocument)&&P.defaultView||window;var U=P.getSelection&&P.getSelection();if(U&&U.rangeCount!==0){P=U.anchorNode;var X=U.anchorOffset,ce=U.focusNode;U=U.focusOffset;try{P.nodeType,ce.nodeType}catch{P=null;break e}var Ge=0,ft=-1,Bt=-1,ca=0,$a=0,sr=p,Ea=null;t:for(;;){for(var Ka;sr!==P||X!==0&&sr.nodeType!==3||(ft=Ge+X),sr!==ce||U!==0&&sr.nodeType!==3||(Bt=Ge+U),sr.nodeType===3&&(Ge+=sr.nodeValue.length),(Ka=sr.firstChild)!==null;)Ea=sr,sr=Ka;for(;;){if(sr===p)break t;if(Ea===P&&++ca===X&&(ft=Ge),Ea===ce&&++$a===U&&(Bt=Ge),(Ka=sr.nextSibling)!==null)break;sr=Ea,Ea=sr.parentNode}sr=Ka}P=ft===-1||Bt===-1?null:{start:ft,end:Bt}}else P=null}P=P||{start:0,end:0}}else P=null;for(IA={focusedElem:p,selectionRange:P},Cm=!1,Ei=w;Ei!==null;)if(w=Ei,p=w.child,(w.subtreeFlags&1028)!==0&&p!==null)p.return=w,Ei=p;else for(;Ei!==null;){switch(w=Ei,ce=w.alternate,p=w.flags,w.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&ce!==null){p=void 0,P=w,X=ce.memoizedProps,ce=ce.memoizedState,U=P.stateNode;try{var sn=ku(P.type,X,P.elementType===P.type);p=U.getSnapshotBeforeUpdate(sn,ce),U.__reactInternalSnapshotBeforeUpdate=p}catch(ni){Zs(P,P.return,ni)}}break;case 3:if((p&1024)!==0){if(p=w.stateNode.containerInfo,P=p.nodeType,P===9)H1(p);else if(P===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":H1(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=w.sibling,p!==null){p.return=w.return,Ei=p;break}Ei=w.return}return sn=ty,ty=!1,sn}function EA(p,w,P){var U=P.flags;switch(P.tag){case 0:case 11:case 15:ae(p,P),U&4&&Bf(5,P);break;case 1:if(ae(p,P),U&4)if(p=P.stateNode,w===null)try{p.componentDidMount()}catch(ft){Zs(P,P.return,ft)}else{var X=ku(P.type,w.memoizedProps);w=w.memoizedState;try{p.componentDidUpdate(X,w,p.__reactInternalSnapshotBeforeUpdate)}catch(ft){Zs(P,P.return,ft)}}U&64&&ic(P),U&512&&Vc(P,P.return);break;case 3:if(ae(p,P),U&64&&(U=P.updateQueue,U!==null)){if(p=null,P.child!==null)switch(P.child.tag){case 27:case 5:p=P.child.stateNode;break;case 1:p=P.child.stateNode}try{Tp(U,p)}catch(ft){Zs(P,P.return,ft)}}break;case 26:ae(p,P),U&512&&Vc(P,P.return);break;case 27:case 5:ae(p,P),w===null&&U&4&&ey(P),U&512&&Vc(P,P.return);break;case 12:ae(p,P);break;case 13:ae(p,P),U&4&&A(p,P);break;case 22:if(X=P.memoizedState!==null||Sl,!X){w=w!==null&&w.memoizedState!==null||Li;var ce=Sl,Ge=Li;Sl=X,(Li=w)&&!Ge?me(p,P,(P.subtreeFlags&8772)!==0):ae(p,P),Sl=ce,Li=Ge}U&512&&(P.memoizedProps.mode==="manual"?Vc(P,P.return):pl(P,P.return));break;default:ae(p,P)}}function sf(p){var w=p.alternate;w!==null&&(p.alternate=null,sf(w)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(w=p.stateNode,w!==null&&Wr(w)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Xo=null,y=!1;function o(p,w,P){for(P=P.child;P!==null;)d(p,w,P),P=P.sibling}function d(p,w,P){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(gr,P)}catch{}switch(P.tag){case 26:Li||pl(P,w),o(p,w,P),P.memoizedState?P.memoizedState.count--:P.stateNode&&(P=P.stateNode,P.parentNode.removeChild(P));break;case 27:Li||pl(P,w);var U=Xo,X=y;for(Xo=P.stateNode,o(p,w,P),P=P.stateNode,w=P.attributes;w.length;)P.removeAttributeNode(w[0]);Wr(P),Xo=U,y=X;break;case 5:Li||pl(P,w);case 6:X=Xo;var ce=y;if(Xo=null,o(p,w,P),Xo=X,y=ce,Xo!==null)if(y)try{p=Xo,U=P.stateNode,p.nodeType===8?p.parentNode.removeChild(U):p.removeChild(U)}catch(Ge){Zs(P,w,Ge)}else try{Xo.removeChild(P.stateNode)}catch(Ge){Zs(P,w,Ge)}break;case 18:Xo!==null&&(y?(w=Xo,P=P.stateNode,w.nodeType===8?q1(w.parentNode,P):w.nodeType===1&&q1(w,P),qA(w)):q1(Xo,P.stateNode));break;case 4:U=Xo,X=y,Xo=P.stateNode.containerInfo,y=!0,o(p,w,P),Xo=U,y=X;break;case 0:case 11:case 14:case 15:Li||Wo(2,P,w),Li||Wo(4,P,w),o(p,w,P);break;case 1:Li||(pl(P,w),U=P.stateNode,typeof U.componentWillUnmount=="function"&&Cp(P,w,U)),o(p,w,P);break;case 21:o(p,w,P);break;case 22:Li||pl(P,w),Li=(U=Li)||P.memoizedState!==null,o(p,w,P),Li=U;break;default:o(p,w,P)}}function A(p,w){if(w.memoizedState===null&&(p=w.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{qA(p)}catch(P){Zs(w,w.return,P)}}function T(p){switch(p.tag){case 13:case 19:var w=p.stateNode;return w===null&&(w=p.stateNode=new Uu),w;case 22:return p=p.stateNode,w=p._retryCache,w===null&&(w=p._retryCache=new Uu),w;default:throw Error(r(435,p.tag))}}function S(p,w){var P=T(p);w.forEach(function(U){var X=cE.bind(null,p,U);P.has(U)||(P.add(U),U.then(X,X))})}function E(p,w){var P=w.deletions;if(P!==null)for(var U=0;U<P.length;U++){var X=P[U],ce=p,Ge=w,ft=Ge;e:for(;ft!==null;){switch(ft.tag){case 27:case 5:Xo=ft.stateNode,y=!1;break e;case 3:Xo=ft.stateNode.containerInfo,y=!0;break e;case 4:Xo=ft.stateNode.containerInfo,y=!0;break e}ft=ft.return}if(Xo===null)throw Error(r(160));d(ce,Ge,X),Xo=null,y=!1,ce=X.alternate,ce!==null&&(ce.return=null),X.return=null}if(w.subtreeFlags&13878)for(w=w.child;w!==null;)q(w,p),w=w.sibling}var F=null;function q(p,w){var P=p.alternate,U=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:E(w,p),K(p),U&4&&(Wo(3,p,p.return),Bf(3,p),Wo(5,p,p.return));break;case 1:E(w,p),K(p),U&512&&(Li||P===null||pl(P,P.return)),U&64&&Sl&&(p=p.updateQueue,p!==null&&(U=p.callbacks,U!==null&&(P=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=P===null?U:P.concat(U))));break;case 26:var X=F;if(E(w,p),K(p),U&512&&(Li||P===null||pl(P,P.return)),U&4){var ce=P!==null?P.memoizedState:null;if(U=p.memoizedState,P===null)if(U===null)if(p.stateNode===null){e:{U=p.type,P=p.memoizedProps,X=X.ownerDocument||X;t:switch(U){case"title":ce=X.getElementsByTagName("title")[0],(!ce||ce[Lr]||ce[Yt]||ce.namespaceURI==="http://www.w3.org/2000/svg"||ce.hasAttribute("itemprop"))&&(ce=X.createElement(U),X.head.insertBefore(ce,X.querySelector("head > title"))),zo(ce,U,P),ce[Yt]=p,Qr(ce),U=ce;break e;case"link":var Ge=X1("link","href",X).get(U+(P.href||""));if(Ge){for(var ft=0;ft<Ge.length;ft++)if(ce=Ge[ft],ce.getAttribute("href")===(P.href==null?null:P.href)&&ce.getAttribute("rel")===(P.rel==null?null:P.rel)&&ce.getAttribute("title")===(P.title==null?null:P.title)&&ce.getAttribute("crossorigin")===(P.crossOrigin==null?null:P.crossOrigin)){Ge.splice(ft,1);break t}}ce=X.createElement(U),zo(ce,U,P),X.head.appendChild(ce);break;case"meta":if(Ge=X1("meta","content",X).get(U+(P.content||""))){for(ft=0;ft<Ge.length;ft++)if(ce=Ge[ft],ce.getAttribute("content")===(P.content==null?null:""+P.content)&&ce.getAttribute("name")===(P.name==null?null:P.name)&&ce.getAttribute("property")===(P.property==null?null:P.property)&&ce.getAttribute("http-equiv")===(P.httpEquiv==null?null:P.httpEquiv)&&ce.getAttribute("charset")===(P.charSet==null?null:P.charSet)){Ge.splice(ft,1);break t}}ce=X.createElement(U),zo(ce,U,P),X.head.appendChild(ce);break;default:throw Error(r(468,U))}ce[Yt]=p,Qr(ce),U=ce}p.stateNode=U}else J1(X,p.type,p.stateNode);else p.stateNode=Pp(X,U,p.memoizedProps);else ce!==U?(ce===null?P.stateNode!==null&&(P=P.stateNode,P.parentNode.removeChild(P)):ce.count--,U===null?J1(X,p.type,p.stateNode):Pp(X,U,p.memoizedProps)):U===null&&p.stateNode!==null&&Gn(p,p.memoizedProps,P.memoizedProps)}break;case 27:if(U&4&&p.alternate===null){X=p.stateNode,ce=p.memoizedProps;try{for(var Bt=X.firstChild;Bt;){var ca=Bt.nextSibling,$a=Bt.nodeName;Bt[Lr]||$a==="HEAD"||$a==="BODY"||$a==="SCRIPT"||$a==="STYLE"||$a==="LINK"&&Bt.rel.toLowerCase()==="stylesheet"||X.removeChild(Bt),Bt=ca}for(var sr=p.type,Ea=X.attributes;Ea.length;)X.removeAttributeNode(Ea[0]);zo(X,sr,ce),X[Yt]=p,X[Kt]=ce}catch(sn){Zs(p,p.return,sn)}}case 5:if(E(w,p),K(p),U&512&&(Li||P===null||pl(P,P.return)),p.flags&32){X=p.stateNode;try{Ku(X,"")}catch(sn){Zs(p,p.return,sn)}}U&4&&p.stateNode!=null&&(X=p.memoizedProps,Gn(p,X,P!==null?P.memoizedProps:X)),U&1024&&(Yo=!0);break;case 6:if(E(w,p),K(p),U&4){if(p.stateNode===null)throw Error(r(162));U=p.memoizedProps,P=p.stateNode;try{P.nodeValue=U}catch(sn){Zs(p,p.return,sn)}}break;case 3:if(Tm=null,X=F,F=mg(w.containerInfo),E(w,p),F=X,K(p),U&4&&P!==null&&P.memoizedState.isDehydrated)try{qA(w.containerInfo)}catch(sn){Zs(p,p.return,sn)}Yo&&(Yo=!1,Y(p));break;case 4:U=F,F=mg(p.stateNode.containerInfo),E(w,p),K(p),F=U;break;case 12:E(w,p),K(p);break;case 13:E(w,p),K(p),p.child.flags&8192&&p.memoizedState!==null!=(P!==null&&P.memoizedState!==null)&&(fi=Ia()),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,S(p,U)));break;case 22:if(U&512&&(Li||P===null||pl(P,P.return)),Bt=p.memoizedState!==null,ca=P!==null&&P.memoizedState!==null,$a=Sl,sr=Li,Sl=$a||Bt,Li=sr||ca,E(w,p),Li=sr,Sl=$a,K(p),w=p.stateNode,w._current=p,w._visibility&=-3,w._visibility|=w._pendingVisibility&2,U&8192&&(w._visibility=Bt?w._visibility&-2:w._visibility|1,Bt&&(w=Sl||Li,P===null||ca||w||re(p)),p.memoizedProps===null||p.memoizedProps.mode!=="manual"))e:for(P=null,w=p;;){if(w.tag===5||w.tag===26||w.tag===27){if(P===null){ca=P=w;try{if(X=ca.stateNode,Bt)ce=X.style,typeof ce.setProperty=="function"?ce.setProperty("display","none","important"):ce.display="none";else{Ge=ca.stateNode,ft=ca.memoizedProps.style;var Ka=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;Ge.style.display=Ka==null||typeof Ka=="boolean"?"":(""+Ka).trim()}}catch(sn){Zs(ca,ca.return,sn)}}}else if(w.tag===6){if(P===null){ca=w;try{ca.stateNode.nodeValue=Bt?"":ca.memoizedProps}catch(sn){Zs(ca,ca.return,sn)}}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===p)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break e;for(;w.sibling===null;){if(w.return===null||w.return===p)break e;P===w&&(P=null),w=w.return}P===w&&(P=null),w.sibling.return=w.return,w=w.sibling}U&4&&(U=p.updateQueue,U!==null&&(P=U.retryQueue,P!==null&&(U.retryQueue=null,S(p,P))));break;case 19:E(w,p),K(p),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,S(p,U)));break;case 21:break;default:E(w,p),K(p)}}function K(p){var w=p.flags;if(w&2){try{if(p.tag!==27){e:{for(var P=p.return;P!==null;){if(nf(P)){var U=P;break e}P=P.return}throw Error(r(160))}switch(U.tag){case 27:var X=U.stateNode,ce=xA(p);Sp(p,ce,X);break;case 5:var Ge=U.stateNode;U.flags&32&&(Ku(Ge,""),U.flags&=-33);var ft=xA(p);Sp(p,ft,Ge);break;case 3:case 4:var Bt=U.stateNode.containerInfo,ca=xA(p);PA(p,ca,Bt);break;default:throw Error(r(161))}}}catch($a){Zs(p,p.return,$a)}p.flags&=-3}w&4096&&(p.flags&=-4097)}function Y(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var w=p;Y(w),w.tag===5&&w.flags&1024&&w.stateNode.reset(),p=p.sibling}}function ae(p,w){if(w.subtreeFlags&8772)for(w=w.child;w!==null;)EA(p,w.alternate,w),w=w.sibling}function re(p){for(p=p.child;p!==null;){var w=p;switch(w.tag){case 0:case 11:case 14:case 15:Wo(4,w,w.return),re(w);break;case 1:pl(w,w.return);var P=w.stateNode;typeof P.componentWillUnmount=="function"&&Cp(w,w.return,P),re(w);break;case 26:case 27:case 5:pl(w,w.return),re(w);break;case 22:pl(w,w.return),w.memoizedState===null&&re(w);break;default:re(w)}p=p.sibling}}function me(p,w,P){for(P=P&&(w.subtreeFlags&8772)!==0,w=w.child;w!==null;){var U=w.alternate,X=p,ce=w,Ge=ce.flags;switch(ce.tag){case 0:case 11:case 15:me(X,ce,P),Bf(4,ce);break;case 1:if(me(X,ce,P),U=ce,X=U.stateNode,typeof X.componentDidMount=="function")try{X.componentDidMount()}catch(ca){Zs(U,U.return,ca)}if(U=ce,X=U.updateQueue,X!==null){var ft=U.stateNode;try{var Bt=X.shared.hiddenCallbacks;if(Bt!==null)for(X.shared.hiddenCallbacks=null,X=0;X<Bt.length;X++)bA(Bt[X],ft)}catch(ca){Zs(U,U.return,ca)}}P&&Ge&64&&ic(ce),Vc(ce,ce.return);break;case 26:case 27:case 5:me(X,ce,P),P&&U===null&&Ge&4&&ey(ce),Vc(ce,ce.return);break;case 12:me(X,ce,P);break;case 13:me(X,ce,P),P&&Ge&4&&A(X,ce);break;case 22:ce.memoizedState===null&&me(X,ce,P),Vc(ce,ce.return);break;default:me(X,ce,P)}w=w.sibling}}function be(p,w){var P=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(P=p.memoizedState.cachePool.pool),p=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(p=w.memoizedState.cachePool.pool),p!==P&&(p!=null&&p.refCount++,P!=null&&G(P))}function Te(p,w){p=null,w.alternate!==null&&(p=w.alternate.memoizedState.cache),w=w.memoizedState.cache,w!==p&&(w.refCount++,p!=null&&G(p))}function ze(p,w,P,U){if(w.subtreeFlags&10256)for(w=w.child;w!==null;)Fe(p,w,P,U),w=w.sibling}function Fe(p,w,P,U){var X=w.flags;switch(w.tag){case 0:case 11:case 15:ze(p,w,P,U),X&2048&&Bf(9,w);break;case 3:ze(p,w,P,U),X&2048&&(p=null,w.alternate!==null&&(p=w.alternate.memoizedState.cache),w=w.memoizedState.cache,w!==p&&(w.refCount++,p!=null&&G(p)));break;case 12:if(X&2048){ze(p,w,P,U),p=w.stateNode;try{var ce=w.memoizedProps,Ge=ce.id,ft=ce.onPostCommit;typeof ft=="function"&&ft(Ge,w.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Bt){Zs(w,w.return,Bt)}}else ze(p,w,P,U);break;case 23:break;case 22:ce=w.stateNode,w.memoizedState!==null?ce._visibility&4?ze(p,w,P,U):nt(p,w):ce._visibility&4?ze(p,w,P,U):(ce._visibility|=4,Ke(p,w,P,U,(w.subtreeFlags&10256)!==0)),X&2048&&be(w.alternate,w);break;case 24:ze(p,w,P,U),X&2048&&Te(w.alternate,w);break;default:ze(p,w,P,U)}}function Ke(p,w,P,U,X){for(X=X&&(w.subtreeFlags&10256)!==0,w=w.child;w!==null;){var ce=p,Ge=w,ft=P,Bt=U,ca=Ge.flags;switch(Ge.tag){case 0:case 11:case 15:Ke(ce,Ge,ft,Bt,X),Bf(8,Ge);break;case 23:break;case 22:var $a=Ge.stateNode;Ge.memoizedState!==null?$a._visibility&4?Ke(ce,Ge,ft,Bt,X):nt(ce,Ge):($a._visibility|=4,Ke(ce,Ge,ft,Bt,X)),X&&ca&2048&&be(Ge.alternate,Ge);break;case 24:Ke(ce,Ge,ft,Bt,X),X&&ca&2048&&Te(Ge.alternate,Ge);break;default:Ke(ce,Ge,ft,Bt,X)}w=w.sibling}}function nt(p,w){if(w.subtreeFlags&10256)for(w=w.child;w!==null;){var P=p,U=w,X=U.flags;switch(U.tag){case 22:nt(P,U),X&2048&&be(U.alternate,U);break;case 24:nt(P,U),X&2048&&Te(U.alternate,U);break;default:nt(P,U)}w=w.sibling}}var at=8192;function pt(p){if(p.subtreeFlags&at)for(p=p.child;p!==null;)st(p),p=p.sibling}function st(p){switch(p.tag){case 26:pt(p),p.flags&at&&p.memoizedState!==null&&HC(F,p.memoizedState,p.memoizedProps);break;case 5:pt(p);break;case 3:case 4:var w=F;F=mg(p.stateNode.containerInfo),pt(p),F=w;break;case 22:p.memoizedState===null&&(w=p.alternate,w!==null&&w.memoizedState!==null?(w=at,at=16777216,pt(p),at=w):pt(p));break;default:pt(p)}}function ot(p){var w=p.alternate;if(w!==null&&(p=w.child,p!==null)){w.child=null;do w=p.sibling,p.sibling=null,p=w;while(p!==null)}}function lt(p){var w=p.deletions;if((p.flags&16)!==0){if(w!==null)for(var P=0;P<w.length;P++){var U=w[P];Ei=U,Qt(U,p)}ot(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)vt(p),p=p.sibling}function vt(p){switch(p.tag){case 0:case 11:case 15:lt(p),p.flags&2048&&Wo(9,p,p.return);break;case 3:lt(p);break;case 12:lt(p);break;case 22:var w=p.stateNode;p.memoizedState!==null&&w._visibility&4&&(p.return===null||p.return.tag!==13)?(w._visibility&=-5,Tt(p)):lt(p);break;default:lt(p)}}function Tt(p){var w=p.deletions;if((p.flags&16)!==0){if(w!==null)for(var P=0;P<w.length;P++){var U=w[P];Ei=U,Qt(U,p)}ot(p)}for(p=p.child;p!==null;){switch(w=p,w.tag){case 0:case 11:case 15:Wo(8,w,w.return),Tt(w);break;case 22:P=w.stateNode,P._visibility&4&&(P._visibility&=-5,Tt(w));break;default:Tt(w)}p=p.sibling}}function Qt(p,w){for(;Ei!==null;){var P=Ei;switch(P.tag){case 0:case 11:case 15:Wo(8,P,w);break;case 23:case 22:if(P.memoizedState!==null&&P.memoizedState.cachePool!==null){var U=P.memoizedState.cachePool.pool;U!=null&&U.refCount++}break;case 24:G(P.memoizedState.cache)}if(U=P.child,U!==null)U.return=P,Ei=U;else e:for(P=p;Ei!==null;){U=Ei;var X=U.sibling,ce=U.return;if(sf(U),U===P){Ei=null;break e}if(X!==null){X.return=ce,Ei=X;break e}Ei=ce}}}function Ut(p,w,P,U){this.tag=p,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ia(p,w,P,U){return new Ut(p,w,P,U)}function da(p){return p=p.prototype,!(!p||!p.isReactComponent)}function xa(p,w){var P=p.alternate;return P===null?(P=ia(p.tag,w,p.key,p.mode),P.elementType=p.elementType,P.type=p.type,P.stateNode=p.stateNode,P.alternate=p,p.alternate=P):(P.pendingProps=w,P.type=p.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=p.flags&31457280,P.childLanes=p.childLanes,P.lanes=p.lanes,P.child=p.child,P.memoizedProps=p.memoizedProps,P.memoizedState=p.memoizedState,P.updateQueue=p.updateQueue,w=p.dependencies,P.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},P.sibling=p.sibling,P.index=p.index,P.ref=p.ref,P.refCleanup=p.refCleanup,P}function kt(p,w){p.flags&=31457282;var P=p.alternate;return P===null?(p.childLanes=0,p.lanes=w,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=P.childLanes,p.lanes=P.lanes,p.child=P.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=P.memoizedProps,p.memoizedState=P.memoizedState,p.updateQueue=P.updateQueue,p.type=P.type,w=P.dependencies,p.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),p}function la(p,w,P,U,X,ce){var Ge=0;if(U=p,typeof p=="function")da(p)&&(Ge=1);else if(typeof p=="string")Ge=qC(p,P,Dt.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case v:return zt(P.children,X,ce,w);case R:Ge=8,X|=24;break;case x:return p=ia(12,P,w,X|2),p.elementType=x,p.lanes=ce,p;case $:return p=ia(13,P,w,X),p.elementType=$,p.lanes=ce,p;case H:return p=ia(19,P,w,X),p.elementType=H,p.lanes=ce,p;case oe:return ua(P,X,ce,w);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case N:case k:Ge=10;break e;case I:Ge=9;break e;case Z:Ge=11;break e;case W:Ge=14;break e;case ee:Ge=16,U=null;break e}Ge=29,P=Error(r(130,p===null?"null":typeof p,"")),U=null}return w=ia(Ge,P,w,X),w.elementType=p,w.type=U,w.lanes=ce,w}function zt(p,w,P,U){return p=ia(7,p,U,w),p.lanes=P,p}function ua(p,w,P,U){p=ia(22,p,U,w),p.elementType=oe,p.lanes=P;var X={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ce=X._current;if(ce===null)throw Error(r(456));if((X._pendingVisibility&2)===0){var Ge=sl(ce,2);Ge!==null&&(X._pendingVisibility|=2,Zl(Ge,ce,2))}},attach:function(){var ce=X._current;if(ce===null)throw Error(r(456));if((X._pendingVisibility&2)!==0){var Ge=sl(ce,2);Ge!==null&&(X._pendingVisibility&=-3,Zl(Ge,ce,2))}}};return p.stateNode=X,p}function ta(p,w,P){return p=ia(6,p,null,w),p.lanes=P,p}function ha(p,w,P){return w=ia(4,p.children!==null?p.children:[],p.key,w),w.lanes=P,w.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},w}function Xt(p){p.flags|=4}function ga(p,w){if(w.type!=="stylesheet"||(w.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!Q1(w)){if(w=Fl.current,w!==null&&((yr&4194176)===yr?ec!==null:(yr&62914560)!==yr&&(yr&536870912)===0||w!==ec))throw Vu=Rh,ag;p.flags|=8192}}function ka(p,w){w!==null&&(p.flags|=4),p.flags&16384&&(w=p.tag!==22?Zt():536870912,p.lanes|=w,Ro|=w)}function Ua(p,w){if(!bi)switch(p.tailMode){case"hidden":w=p.tail;for(var P=null;w!==null;)w.alternate!==null&&(P=w),w=w.sibling;P===null?p.tail=null:P.sibling=null;break;case"collapsed":P=p.tail;for(var U=null;P!==null;)P.alternate!==null&&(U=P),P=P.sibling;U===null?w||p.tail===null?p.tail=null:p.tail.sibling=null:U.sibling=null}}function Va(p){var w=p.alternate!==null&&p.alternate.child===p.child,P=0,U=0;if(w)for(var X=p.child;X!==null;)P|=X.lanes|X.childLanes,U|=X.subtreeFlags&31457280,U|=X.flags&31457280,X.return=p,X=X.sibling;else for(X=p.child;X!==null;)P|=X.lanes|X.childLanes,U|=X.subtreeFlags,U|=X.flags,X.return=p,X=X.sibling;return p.subtreeFlags|=U,p.childLanes=P,w}function dr(p,w,P){var U=w.pendingProps;switch(Kh(w),w.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(w),null;case 1:return Va(w),null;case 3:return P=w.stateNode,U=null,p!==null&&(U=p.memoizedState.cache),w.memoizedState.cache!==U&&(w.flags|=2048),Jd(lo),wt(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(p===null||p.child===null)&&(Wh(w)?Xt(w):p===null||p.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,uu!==null&&(gm(uu),uu=null))),Va(w),null;case 26:return P=w.memoizedState,p===null?(Xt(w),P!==null?(Va(w),ga(w,P)):(Va(w),w.flags&=-16777217)):P?P!==p.memoizedState?(Xt(w),Va(w),ga(w,P)):(Va(w),w.flags&=-16777217):(p.memoizedProps!==U&&Xt(w),Va(w),w.flags&=-16777217),null;case 27:Ca(w),P=fa.current;var X=w.type;if(p!==null&&w.stateNode!=null)p.memoizedProps!==U&&Xt(w);else{if(!U){if(w.stateNode===null)throw Error(r(166));return Va(w),null}p=Dt.current,Wh(w)?Nf(w):(p=LA(X,U,P),w.stateNode=p,Xt(w))}return Va(w),null;case 5:if(Ca(w),P=w.type,p!==null&&w.stateNode!=null)p.memoizedProps!==U&&Xt(w);else{if(!U){if(w.stateNode===null)throw Error(r(166));return Va(w),null}if(p=Dt.current,Wh(w))Nf(w);else{switch(X=cy(fa.current),p){case 1:p=X.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:p=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":p=X.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":p=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof U.is=="string"?X.createElement("select",{is:U.is}):X.createElement("select"),U.multiple?p.multiple=!0:U.size&&(p.size=U.size);break;default:p=typeof U.is=="string"?X.createElement(P,{is:U.is}):X.createElement(P)}}p[Yt]=w,p[Kt]=U;e:for(X=w.child;X!==null;){if(X.tag===5||X.tag===6)p.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===w)break e;for(;X.sibling===null;){if(X.return===null||X.return===w)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}w.stateNode=p;e:switch(zo(p,P,U),P){case"button":case"input":case"select":case"textarea":p=!!U.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Xt(w)}}return Va(w),w.flags&=-16777217,null;case 6:if(p&&w.stateNode!=null)p.memoizedProps!==U&&Xt(w);else{if(typeof U!="string"&&w.stateNode===null)throw Error(r(166));if(p=fa.current,Wh(w)){if(p=w.stateNode,P=w.memoizedProps,U=null,X=ll,X!==null)switch(X.tag){case 27:case 5:U=X.memoizedProps}p[Yt]=w,p=!!(p.nodeValue===P||U!==null&&U.suppressHydrationWarning===!0||Zf(p.nodeValue,P)),p||bc(w)}else p=cy(p).createTextNode(U),p[Yt]=w,w.stateNode=p}return Va(w),null;case 13:if(U=w.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(X=Wh(w),U!==null&&U.dehydrated!==null){if(p===null){if(!X)throw Error(r(318));if(X=w.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(r(317));X[Yt]=w}else Yh(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;Va(w),X=!1}else uu!==null&&(gm(uu),uu=null),X=!0;if(!X)return w.flags&256?(ed(w),w):(ed(w),null)}if(ed(w),(w.flags&128)!==0)return w.lanes=P,w;if(P=U!==null,p=p!==null&&p.memoizedState!==null,P){U=w.child,X=null,U.alternate!==null&&U.alternate.memoizedState!==null&&U.alternate.memoizedState.cachePool!==null&&(X=U.alternate.memoizedState.cachePool.pool);var ce=null;U.memoizedState!==null&&U.memoizedState.cachePool!==null&&(ce=U.memoizedState.cachePool.pool),ce!==X&&(U.flags|=2048)}return P!==p&&P&&(w.child.flags|=8192),ka(w,w.updateQueue),Va(w),null;case 4:return wt(),p===null&&h0(w.stateNode.containerInfo),Va(w),null;case 10:return Jd(w.type),Va(w),null;case 19:if(ut(Gs),X=w.memoizedState,X===null)return Va(w),null;if(U=(w.flags&128)!==0,ce=X.rendering,ce===null)if(U)Ua(X,!1);else{if(kn!==0||p!==null&&(p.flags&128)!==0)for(p=w.child;p!==null;){if(ce=sm(p),ce!==null){for(w.flags|=128,Ua(X,!1),p=ce.updateQueue,w.updateQueue=p,ka(w,p),w.subtreeFlags=0,p=P,P=w.child;P!==null;)kt(P,p),P=P.sibling;return Ae(Gs,Gs.current&1|2),w.child}p=p.sibling}X.tail!==null&&Ia()>To&&(w.flags|=128,U=!0,Ua(X,!1),w.lanes=4194304)}else{if(!U)if(p=sm(ce),p!==null){if(w.flags|=128,U=!0,p=p.updateQueue,w.updateQueue=p,ka(w,p),Ua(X,!0),X.tail===null&&X.tailMode==="hidden"&&!ce.alternate&&!bi)return Va(w),null}else 2*Ia()-X.renderingStartTime>To&&P!==536870912&&(w.flags|=128,U=!0,Ua(X,!1),w.lanes=4194304);X.isBackwards?(ce.sibling=w.child,w.child=ce):(p=X.last,p!==null?p.sibling=ce:w.child=ce,X.last=ce)}return X.tail!==null?(w=X.tail,X.rendering=w,X.tail=w.sibling,X.renderingStartTime=Ia(),w.sibling=null,p=Gs.current,Ae(Gs,U?p&1|2:p&1),w):(Va(w),null);case 22:case 23:return ed(w),Jc(),U=w.memoizedState!==null,p!==null?p.memoizedState!==null!==U&&(w.flags|=8192):U&&(w.flags|=8192),U?(P&536870912)!==0&&(w.flags&128)===0&&(Va(w),w.subtreeFlags&6&&(w.flags|=8192)):Va(w),P=w.updateQueue,P!==null&&ka(w,P.retryQueue),P=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(P=p.memoizedState.cachePool.pool),U=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(U=w.memoizedState.cachePool.pool),U!==P&&(w.flags|=2048),p!==null&&ut(St),null;case 24:return P=null,p!==null&&(P=p.memoizedState.cache),w.memoizedState.cache!==P&&(w.flags|=2048),Jd(lo),Va(w),null;case 25:return null}throw Error(r(156,w.tag))}function qr(p,w){switch(Kh(w),w.tag){case 1:return p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 3:return Jd(lo),wt(),p=w.flags,(p&65536)!==0&&(p&128)===0?(w.flags=p&-65537|128,w):null;case 26:case 27:case 5:return Ca(w),null;case 13:if(ed(w),p=w.memoizedState,p!==null&&p.dehydrated!==null){if(w.alternate===null)throw Error(r(340));Yh()}return p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 19:return ut(Gs),null;case 4:return wt(),null;case 10:return Jd(w.type),null;case 22:case 23:return ed(w),Jc(),p!==null&&ut(St),p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 24:return Jd(lo),null;case 25:return null;default:return null}}function Rr(p,w){switch(Kh(w),w.tag){case 3:Jd(lo),wt();break;case 26:case 27:case 5:Ca(w);break;case 4:wt();break;case 13:ed(w);break;case 19:ut(Gs);break;case 10:Jd(w.type);break;case 22:case 23:ed(w),Jc(),p!==null&&ut(St);break;case 24:Jd(lo)}}var kr={getCacheForType:function(p){var w=to(lo),P=w.data.get(p);return P===void 0&&(P=p(),w.data.set(p,P)),P}},zr=typeof WeakMap=="function"?WeakMap:Map,Mr=0,Hr=null,jr=null,yr=0,pn=0,Or=null,rr=!1,mn=!1,Xn=!1,vn=0,kn=0,ns=0,_s=0,co=0,ao=0,Ro=0,Vn=null,di=null,Bn=!1,fi=0,To=1/0,Ni=null,ps=null,zc=!1,Jo=null,hu=0,Gl=0,sc=null,bl=0,Qd=null;function Co(){if((Mr&2)!==0&&yr!==0)return yr&-yr;if(we.T!==null){var p=Me;return p!==0?p:VA()}return Gt()}function Mh(){ao===0&&(ao=(yr&536870912)===0||bi?Rn():536870912);var p=Fl.current;return p!==null&&(p.flags|=32),ao}function Zl(p,w,P){(p===Hr&&pn===2||p.cancelPendingCommit!==null)&&(dg(p,0),xp(p,yr,ao,!1)),Le(p,P),((Mr&2)===0||p!==Hr)&&(p===Hr&&((Mr&2)===0&&(_s|=P),kn===4&&xp(p,yr,ao,!1)),of(p))}function bp(p,w,P){if((Mr&6)!==0)throw Error(r(327));var U=!P&&(w&60)===0&&(w&p.expiredLanes)===0||Zr(p,w),X=U?ym(p,w):s0(p,w,!0),ce=U;do{if(X===0){mn&&!U&&xp(p,w,0,!1);break}else if(X===6)xp(p,w,0,!rr);else{if(P=p.current.alternate,ce&&!SC(P)){X=s0(p,w,!1),ce=!1;continue}if(X===2){if(ce=w,p.errorRecoveryDisabledLanes&ce)var Ge=0;else Ge=p.pendingLanes&-536870913,Ge=Ge!==0?Ge:Ge&536870912?536870912:0;if(Ge!==0){w=Ge;e:{var ft=p;X=Vn;var Bt=ft.current.memoizedState.isDehydrated;if(Bt&&(dg(ft,Ge).flags|=256),Ge=s0(ft,Ge,!1),Ge!==2){if(Xn&&!Bt){ft.errorRecoveryDisabledLanes|=ce,_s|=ce,X=4;break e}ce=di,di=X,ce!==null&&gm(ce)}X=Ge}if(ce=!1,X!==2)continue}}if(X===1){dg(p,0),xp(p,w,0,!0);break}e:{switch(U=p,X){case 0:case 1:throw Error(r(345));case 4:if((w&4194176)===w){xp(U,w,ao,!rr);break e}break;case 2:di=null;break;case 3:case 5:break;default:throw Error(r(329))}if(U.finishedWork=P,U.finishedLanes=w,(w&62914560)===w&&(ce=fi+300-Ia(),10<ce)){if(xp(U,w,ao,!rr),mr(U,0)!==0)break e;U.timeoutHandle=lf(ay.bind(null,U,P,di,Ni,Bn,w,ao,_s,Ro,rr,2,-0,0),ce);break e}ay(U,P,di,Ni,Bn,w,ao,_s,Ro,rr,0,-0,0)}}break}while(!0);of(p)}function gm(p){di===null?di=p:di.push.apply(di,p)}function ay(p,w,P,U,X,ce,Ge,ft,Bt,ca,$a,sr,Ea){var Ka=w.subtreeFlags;if((Ka&8192||(Ka&16785408)===16785408)&&(kA={stylesheets:null,count:0,unsuspend:_E},st(w),w=v0(),w!==null)){p.cancelPendingCommit=w(xC.bind(null,p,P,U,X,Ge,ft,Bt,1,sr,Ea)),xp(p,ce,Ge,!ca);return}xC(p,P,U,X,Ge,ft,Bt,$a,sr,Ea)}function SC(p){for(var w=p;;){var P=w.tag;if((P===0||P===11||P===15)&&w.flags&16384&&(P=w.updateQueue,P!==null&&(P=P.stores,P!==null)))for(var U=0;U<P.length;U++){var X=P[U],ce=X.getSnapshot;X=X.value;try{if(!js(ce(),X))return!1}catch{return!1}}if(P=w.child,w.subtreeFlags&16384&&P!==null)P.return=w,w=P;else{if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function xp(p,w,P,U){w&=~co,w&=~_s,p.suspendedLanes|=w,p.pingedLanes&=~w,U&&(p.warmLanes|=w),U=p.expirationTimes;for(var X=w;0<X;){var ce=31-Yr(X),Ge=1<<ce;U[ce]=-1,X&=~Ge}P!==0&&yt(p,P,w)}function r0(){return(Mr&6)===0?(vm(0),!1):!0}function n0(){if(jr!==null){if(pn===0)var p=jr.return;else p=jr,Vh=If=null,vs(p),Xh=null,wl=0,p=jr;for(;p!==null;)Rr(p.alternate,p),p=p.return;jr=null}}function dg(p,w){p.finishedWork=null,p.finishedLanes=0;var P=p.timeoutHandle;P!==-1&&(p.timeoutHandle=-1,IC(P)),P=p.cancelPendingCommit,P!==null&&(p.cancelPendingCommit=null,P()),n0(),Hr=p,jr=P=xa(p.current,null),yr=w,pn=0,Or=null,rr=!1,mn=Zr(p,w),Xn=!1,Ro=ao=co=_s=ns=kn=0,di=Vn=null,Bn=!1,(w&8)!==0&&(w|=w&32);var U=p.entangledLanes;if(U!==0)for(p=p.entanglements,U&=w;0<U;){var X=31-Yr(U),ce=1<<X;w|=p[X],U&=~ce}return vn=w,hs(),P}function O1(p,w){Ta=null,we.H=Fu,w===Of?(w=Kg(),pn=3):w===ag?(w=Kg(),pn=4):pn=w===cm?8:w!==null&&typeof w=="object"&&typeof w.then=="function"?6:1,Or=w,jr===null&&(kn=1,Yd(p,ls(w,p.current)))}function V1(){var p=we.H;return we.H=Fu,p===null?Fu:p}function z1(){var p=we.A;return we.A=kr,p}function i0(){kn=4,rr||(yr&4194176)!==yr&&Fl.current!==null||(mn=!0),(ns&134217727)===0&&(_s&134217727)===0||Hr===null||xp(Hr,yr,ao,!1)}function s0(p,w,P){var U=Mr;Mr|=2;var X=V1(),ce=z1();(Hr!==p||yr!==w)&&(Ni=null,dg(p,w)),w=!1;var Ge=kn;e:do try{if(pn!==0&&jr!==null){var ft=jr,Bt=Or;switch(pn){case 8:n0(),Ge=6;break e;case 3:case 2:case 6:Fl.current===null&&(w=!0);var ca=pn;if(pn=0,Or=null,ny(p,ft,Bt,ca),P&&mn){Ge=0;break e}break;default:ca=pn,pn=0,Or=null,ny(p,ft,Bt,ca)}}D1(),Ge=kn;break}catch($a){O1(p,$a)}while(!0);return w&&p.shellSuspendCounter++,Vh=If=null,Mr=U,we.H=X,we.A=ce,jr===null&&(Hr=null,yr=0,hs()),Ge}function D1(){for(;jr!==null;)M1(jr)}function ym(p,w){var P=Mr;Mr|=2;var U=V1(),X=z1();Hr!==p||yr!==w?(Ni=null,To=Ia()+500,dg(p,w)):mn=Zr(p,w);e:do try{if(pn!==0&&jr!==null){w=jr;var ce=Or;t:switch(pn){case 1:pn=0,Or=null,ny(p,w,ce,1);break;case 2:if($g(ce)){pn=0,Or=null,ry(w);break}w=function(){pn===2&&Hr===p&&(pn=7),of(p)},ce.then(w,w);break e;case 3:pn=7;break e;case 4:pn=5;break e;case 7:$g(ce)?(pn=0,Or=null,ry(w)):(pn=0,Or=null,ny(p,w,ce,7));break;case 5:var Ge=null;switch(jr.tag){case 26:Ge=jr.memoizedState;case 5:case 27:var ft=jr;if(!Ge||Q1(Ge)){pn=0,Or=null;var Bt=ft.sibling;if(Bt!==null)jr=Bt;else{var ca=ft.return;ca!==null?(jr=ca,o0(ca)):jr=null}break t}}pn=0,Or=null,ny(p,w,ce,5);break;case 6:pn=0,Or=null,ny(p,w,ce,6);break;case 8:n0(),kn=6;break e;default:throw Error(r(462))}}xl();break}catch($a){O1(p,$a)}while(!0);return Vh=If=null,we.H=U,we.A=X,Mr=P,jr!==null?0:(Hr=null,yr=0,hs(),kn)}function xl(){for(;jr!==null&&!or();)M1(jr)}function M1(p){var w=_p(p.alternate,p,vn);p.memoizedProps=p.pendingProps,w===null?o0(p):jr=w}function ry(p){var w=p,P=w.alternate;switch(w.tag){case 15:case 0:w=_A(P,w,w.pendingProps,w.type,void 0,yr);break;case 11:w=_A(P,w,w.pendingProps,w.type.render,w.ref,yr);break;case 5:vs(w);default:Rr(P,w),w=jr=kt(w,vn),w=_p(P,w,vn)}p.memoizedProps=p.pendingProps,w===null?o0(p):jr=w}function ny(p,w,P,U){Vh=If=null,vs(w),Xh=null,wl=0;var X=w.return;try{if(gA(p,X,w,P,yr)){kn=1,Yd(p,ls(P,p.current)),jr=null;return}}catch(ce){if(X!==null)throw jr=X,ce;kn=1,Yd(p,ls(P,p.current)),jr=null;return}w.flags&32768?(bi||U===1?p=!0:mn||(yr&536870912)!==0?p=!1:(rr=p=!0,(U===2||U===3||U===6)&&(U=Fl.current,U!==null&&U.tag===13&&(U.flags|=16384))),bC(w,p)):o0(w)}function o0(p){var w=p;do{if((w.flags&32768)!==0){bC(w,rr);return}p=w.return;var P=dr(w.alternate,w,vn);if(P!==null){jr=P;return}if(w=w.sibling,w!==null){jr=w;return}jr=w=p}while(w!==null);kn===0&&(kn=5)}function bC(p,w){do{var P=qr(p.alternate,p);if(P!==null){P.flags&=32767,jr=P;return}if(P=p.return,P!==null&&(P.flags|=32768,P.subtreeFlags=0,P.deletions=null),!w&&(p=p.sibling,p!==null)){jr=p;return}jr=p=P}while(p!==null);kn=6,jr=null}function xC(p,w,P,U,X,ce,Ge,ft,Bt,ca){var $a=we.T,sr=je.p;try{je.p=2,we.T=null,NA(p,w,P,U,sr,X,ce,Ge,ft,Bt,ca)}finally{we.T=$a,je.p=sr}}function NA(p,w,P,U,X,ce,Ge,ft){do Ih();while(Jo!==null);if((Mr&6)!==0)throw Error(r(327));var Bt=p.finishedWork;if(U=p.finishedLanes,Bt===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Bt===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var ca=Bt.lanes|Bt.childLanes;if(ca|=es,$e(p,U,ca,ce,Ge,ft),p===Hr&&(jr=Hr=null,yr=0),(Bt.subtreeFlags&10256)===0&&(Bt.flags&10256)===0||zc||(zc=!0,Gl=ca,sc=P,dE(wr,function(){return Ih(),null})),P=(Bt.flags&15990)!==0,(Bt.subtreeFlags&15990)!==0||P?(P=we.T,we.T=null,ce=je.p,je.p=2,Ge=Mr,Mr|=4,Bu(p,Bt),q(Bt,p),Ld(IA,p.containerInfo),Cm=!!eh,IA=eh=null,p.current=Bt,EA(p,Bt.alternate,Bt),Cr(),Mr=Ge,je.p=ce,we.T=P):p.current=Bt,zc?(zc=!1,Jo=p,hu=U):I1(p,ca),ca=p.pendingLanes,ca===0&&(ps=null),an(Bt.stateNode),of(p),w!==null)for(X=p.onRecoverableError,Bt=0;Bt<w.length;Bt++)ca=w[Bt],X(ca.value,{componentStack:ca.stack});return(hu&3)!==0&&Ih(),ca=p.pendingLanes,(U&4194218)!==0&&(ca&42)!==0?p===Qd?bl++:(bl=0,Qd=p):bl=0,vm(0),null}function I1(p,w){(p.pooledCacheLanes&=w)===0&&(w=p.pooledCache,w!=null&&(p.pooledCache=null,G(w)))}function Ih(){if(Jo!==null){var p=Jo,w=Gl;Gl=0;var P=bt(hu),U=we.T,X=je.p;try{if(je.p=32>P?32:P,we.T=null,Jo===null)var ce=!1;else{P=sc,sc=null;var Ge=Jo,ft=hu;if(Jo=null,hu=0,(Mr&6)!==0)throw Error(r(331));var Bt=Mr;if(Mr|=4,vt(Ge.current),Fe(Ge,Ge.current,ft,P),Mr=Bt,vm(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(gr,Ge)}catch{}ce=!0}return ce}finally{je.p=X,we.T=U,I1(p,w)}}return!1}function iy(p,w,P){w=ls(P,w),w=um(p.stateNode,w,2),p=kf(p,w,2),p!==null&&(Le(p,2),of(p))}function Zs(p,w,P){if(p.tag===3)iy(p,p,P);else for(;w!==null;){if(w.tag===3){iy(w,p,P);break}else if(w.tag===1){var U=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(ps===null||!ps.has(U))){p=ls(P,p),P=lg(2),U=kf(w,P,2),U!==null&&(Yg(P,U,w,p),Le(U,2),of(U));break}}w=w.return}}function L1(p,w,P){var U=p.pingCache;if(U===null){U=p.pingCache=new zr;var X=new Set;U.set(w,X)}else X=U.get(w),X===void 0&&(X=new Set,U.set(w,X));X.has(P)||(Xn=!0,X.add(P),p=lE.bind(null,p,w,P),w.then(p,p))}function lE(p,w,P){var U=p.pingCache;U!==null&&U.delete(w),p.pingedLanes|=p.suspendedLanes&P,p.warmLanes&=~P,Hr===p&&(yr&P)===P&&(kn===4||kn===3&&(yr&62914560)===yr&&300>Ia()-fi?(Mr&2)===0&&dg(p,0):co|=P,Ro===yr&&(Ro=0)),of(p)}function PC(p,w){w===0&&(w=Zt()),p=sl(p,w),p!==null&&(Le(p,w),of(p))}function uE(p){var w=p.memoizedState,P=0;w!==null&&(P=w.retryLane),PC(p,P)}function cE(p,w){var P=0;switch(p.tag){case 13:var U=p.stateNode,X=p.memoizedState;X!==null&&(P=X.retryLane);break;case 19:U=p.stateNode;break;case 22:U=p.stateNode._retryCache;break;default:throw Error(r(314))}U!==null&&U.delete(w),PC(p,P)}function dE(p,w){return ar(p,w)}var sy=null,oy=null,Am=!1,l0=!1,ho=!1,jf=0;function of(p){p!==oy&&p.next===null&&(oy===null?sy=oy=p:oy=oy.next=p),l0=!0,Am||(Am=!0,OA(u0))}function vm(p,w){if(!ho&&l0){ho=!0;do for(var P=!1,U=sy;U!==null;){if(p!==0){var X=U.pendingLanes;if(X===0)var ce=0;else{var Ge=U.suspendedLanes,ft=U.pingedLanes;ce=(1<<31-Yr(42|p)+1)-1,ce&=X&~(Ge&~ft),ce=ce&201326677?ce&201326677|1:ce?ce|2:0}ce!==0&&(P=!0,k1(U,ce))}else ce=yr,ce=mr(U,U===Hr?ce:0),(ce&3)===0||Zr(U,ce)||(P=!0,k1(U,ce));U=U.next}while(P);ho=!1}}function u0(){l0=Am=!1;var p=0;jf!==0&&(Z1()&&(p=jf),jf=0);for(var w=Ia(),P=null,U=sy;U!==null;){var X=U.next,ce=ly(U,w);ce===0?(U.next=null,P===null?sy=X:P.next=X,X===null&&(oy=P)):(P=U,(p!==0||(ce&3)!==0)&&(l0=!0)),U=X}vm(p)}function ly(p,w){for(var P=p.suspendedLanes,U=p.pingedLanes,X=p.expirationTimes,ce=p.pendingLanes&-62914561;0<ce;){var Ge=31-Yr(ce),ft=1<<Ge,Bt=X[Ge];Bt===-1?((ft&P)===0||(ft&U)!==0)&&(X[Ge]=ti(ft,w)):Bt<=w&&(p.expiredLanes|=ft),ce&=~ft}if(w=Hr,P=yr,P=mr(p,p===w?P:0),U=p.callbackNode,P===0||p===w&&pn===2||p.cancelPendingCommit!==null)return U!==null&&U!==null&&ur(U),p.callbackNode=null,p.callbackPriority=0;if((P&3)===0||Zr(p,P)){if(w=P&-P,w===p.callbackPriority)return w;switch(U!==null&&ur(U),bt(P)){case 2:case 8:P=lr;break;case 32:P=wr;break;case 268435456:P=Oa;break;default:P=wr}return U=F1.bind(null,p),P=ar(P,U),p.callbackPriority=w,p.callbackNode=P,w}return U!==null&&U!==null&&ur(U),p.callbackPriority=2,p.callbackNode=null,2}function F1(p,w){var P=p.callbackNode;if(Ih()&&p.callbackNode!==P)return null;var U=yr;return U=mr(p,p===Hr?U:0),U===0?null:(bp(p,U,w),ly(p,Ia()),p.callbackNode!=null&&p.callbackNode===P?F1.bind(null,p):null)}function k1(p,w){if(Ih())return null;bp(p,w,!0)}function OA(p){pE(function(){(Mr&6)!==0?ar(tn,p):p()})}function VA(){return jf===0&&(jf=Rn()),jf}function zA(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:zn(""+p)}function EC(p,w){var P=w.ownerDocument.createElement("input");return P.name=w.name,P.value=w.value,p.id&&P.setAttribute("form",p.id),w.parentNode.insertBefore(P,w),p=new FormData(p),P.parentNode.removeChild(P),p}function NC(p,w,P,U,X){if(w==="submit"&&P&&P.stateNode===X){var ce=zA((X[Kt]||null).action),Ge=U.submitter;Ge&&(w=(w=Ge[Kt]||null)?zA(w.formAction):Ge.getAttribute("formAction"),w!==null&&(ce=w,Ge=null));var ft=new Mi("action","action",null,U,X);p.push({event:ft,listeners:[{instance:null,listener:function(){if(U.defaultPrevented){if(jf!==0){var Bt=Ge?EC(X,Ge):new FormData(X);nd(P,{pending:!0,data:Bt,method:X.method,action:ce},null,Bt)}}else typeof ce=="function"&&(ft.preventDefault(),Bt=Ge?EC(X,Ge):new FormData(X),nd(P,{pending:!0,data:Bt,method:X.method,action:ce},ce,Bt))},currentTarget:X}]})}}for(var DA=0;DA<Ko.length;DA++){var MA=Ko[DA],U1=MA.toLowerCase(),OC=MA[0].toUpperCase()+MA.slice(1);As(U1,"on"+OC)}As(qc,"onAnimationEnd"),As(Rc,"onAnimationIteration"),As(Pu,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Hc,"onTransitionRun"),As(Eu,"onTransitionStart"),As($c,"onTransitionCancel"),As(Tc,"onTransitionEnd"),Ps("onMouseEnter",["mouseout","mouseover"]),Ps("onMouseLeave",["mouseout","mouseover"]),Ps("onPointerEnter",["pointerout","pointerover"]),Ps("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hg));function c0(p,w){w=(w&4)!==0;for(var P=0;P<p.length;P++){var U=p[P],X=U.event;U=U.listeners;e:{var ce=void 0;if(w)for(var Ge=U.length-1;0<=Ge;Ge--){var ft=U[Ge],Bt=ft.instance,ca=ft.currentTarget;if(ft=ft.listener,Bt!==ce&&X.isPropagationStopped())break e;ce=ft,X.currentTarget=ca;try{ce(X)}catch($a){Nh($a)}X.currentTarget=null,ce=Bt}else for(Ge=0;Ge<U.length;Ge++){if(ft=U[Ge],Bt=ft.instance,ca=ft.currentTarget,ft=ft.listener,Bt!==ce&&X.isPropagationStopped())break e;ce=ft,X.currentTarget=ca;try{ce(X)}catch($a){Nh($a)}X.currentTarget=null,ce=Bt}}}}function Zi(p,w){var P=w[Fa];P===void 0&&(P=w[Fa]=new Set);var U=p+"__bubble";P.has(U)||(B1(w,p,2,!1),P.add(U))}function d0(p,w,P){var U=0;w&&(U|=4),B1(P,p,U,w)}var fg="_reactListening"+Math.random().toString(36).slice(2);function h0(p){if(!p[fg]){p[fg]=!0,jn.forEach(function(P){P!=="selectionchange"&&(VC.has(P)||d0(P,!1,p),d0(P,!0,p))});var w=p.nodeType===9?p:p.ownerDocument;w===null||w[fg]||(w[fg]=!0,d0("selectionchange",!1,w))}}function B1(p,w,P,U){switch(XC(w)){case 2:var X=WC;break;case 8:X=YC;break;default:X=iw}P=X.bind(null,w,P,p),X=void 0,!gc||w!=="touchstart"&&w!=="touchmove"&&w!=="wheel"||(X=!0),U?X!==void 0?p.addEventListener(w,P,{capture:!0,passive:X}):p.addEventListener(w,P,!0):X!==void 0?p.addEventListener(w,P,{passive:X}):p.addEventListener(w,P,!1)}function f0(p,w,P,U,X){var ce=U;if((w&1)===0&&(w&2)===0&&U!==null)e:for(;;){if(U===null)return;var Ge=U.tag;if(Ge===3||Ge===4){var ft=U.stateNode.containerInfo;if(ft===X||ft.nodeType===8&&ft.parentNode===X)break;if(Ge===4)for(Ge=U.return;Ge!==null;){var Bt=Ge.tag;if((Bt===3||Bt===4)&&(Bt=Ge.stateNode.containerInfo,Bt===X||Bt.nodeType===8&&Bt.parentNode===X))return;Ge=Ge.return}for(;ft!==null;){if(Ge=Un(ft),Ge===null)return;if(Bt=Ge.tag,Bt===5||Bt===6||Bt===26||Bt===27){U=ce=Ge;continue e}ft=ft.parentNode}}U=U.return}Ks(function(){var ca=ce,$a=vr(P),sr=[];e:{var Ea=Xu.get(p);if(Ea!==void 0){var Ka=Mi,sn=p;switch(p){case"keypress":if(An(P)===0)break e;case"keydown":case"keyup":Ka=Dd;break;case"focusin":sn="focus",Ka=il;break;case"focusout":sn="blur",Ka=il;break;case"beforeblur":case"afterblur":Ka=il;break;case"click":if(P.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ka=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ka=Vs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ka=xf;break;case qc:case Rc:case Pu:Ka=Ys;break;case Tc:Ka=Qe;break;case"scroll":case"scrollend":Ka=Vd;break;case"wheel":Ka=Jt;break;case"copy":case"cut":case"paste":Ka=ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ka=bf;break;case"toggle":case"beforetoggle":Ka=La}var ni=(w&4)!==0,Qo=!ni&&(p==="scroll"||p==="scrollend"),va=ni?Ea!==null?Ea+"Capture":null:Ea;ni=[];for(var oa=ca,ba;oa!==null;){var tr=oa;if(ba=tr.stateNode,tr=tr.tag,tr!==5&&tr!==26&&tr!==27||ba===null||va===null||(tr=mc(oa,va),tr!=null&&ni.push(Lh(oa,tr,ba))),Qo)break;oa=oa.return}0<ni.length&&(Ea=new Ka(Ea,sn,null,P,$a),sr.push({event:Ea,listeners:ni}))}}if((w&7)===0){e:{if(Ea=p==="mouseover"||p==="pointerover",Ka=p==="mouseout"||p==="pointerout",Ea&&P!==go&&(sn=P.relatedTarget||P.fromElement)&&(Un(sn)||sn[Sa]))break e;if((Ka||Ea)&&(Ea=$a.window===$a?$a:(Ea=$a.ownerDocument)?Ea.defaultView||Ea.parentWindow:window,Ka?(sn=P.relatedTarget||P.toElement,Ka=ca,sn=sn?Un(sn):null,sn!==null&&(Qo=Oe(sn),ni=sn.tag,sn!==Qo||ni!==5&&ni!==27&&ni!==6)&&(sn=null)):(Ka=null,sn=ca),Ka!==sn)){if(ni=ys,tr="onMouseLeave",va="onMouseEnter",oa="mouse",(p==="pointerout"||p==="pointerover")&&(ni=bf,tr="onPointerLeave",va="onPointerEnter",oa="pointer"),Qo=Ka==null?Ea:Jr(Ka),ba=sn==null?Ea:Jr(sn),Ea=new ni(tr,oa+"leave",Ka,P,$a),Ea.target=Qo,Ea.relatedTarget=ba,tr=null,Un($a)===ca&&(ni=new ni(va,oa+"enter",sn,P,$a),ni.target=ba,ni.relatedTarget=Qo,tr=ni),Qo=tr,Ka&&sn)t:{for(ni=Ka,va=sn,oa=0,ba=ni;ba;ba=pg(ba))oa++;for(ba=0,tr=va;tr;tr=pg(tr))ba++;for(;0<oa-ba;)ni=pg(ni),oa--;for(;0<ba-oa;)va=pg(va),ba--;for(;oa--;){if(ni===va||va!==null&&ni===va.alternate)break t;ni=pg(ni),va=pg(va)}ni=null}else ni=null;Ka!==null&&zC(sr,Ea,Ka,ni,!1),sn!==null&&Qo!==null&&zC(sr,Qo,sn,ni,!0)}}e:{if(Ea=ca?Jr(ca):window,Ka=Ea.nodeName&&Ea.nodeName.toLowerCase(),Ka==="select"||Ka==="input"&&Ea.type==="file")var rn=vc;else if(Nr(Ea))if(Md)rn=qh;else{rn=Ao;var Ri=Js}else Ka=Ea.nodeName,!Ka||Ka.toLowerCase()!=="input"||Ea.type!=="checkbox"&&Ea.type!=="radio"?ca&&Wu(ca.elementType)&&(rn=vc):rn=Pf;if(rn&&(rn=rn(p,ca))){bu(sr,rn,P,$a);break e}Ri&&Ri(p,Ea,ca),p==="focusout"&&ca&&Ea.type==="number"&&ca.memoizedProps.value!=null&&Ru(Ea,"number",Ea.value)}switch(Ri=ca?Jr(ca):window,p){case"focusin":(Nr(Ri)||Ri.contentEditable==="true")&&(Il=Ri,wc=ca,xu=null);break;case"focusout":xu=wc=Il=null;break;case"mousedown":Qi=!0;break;case"contextmenu":case"mouseup":case"dragend":Qi=!1,Ef(sr,P,$a);break;case"selectionchange":if(Zc)break;case"keydown":case"keyup":Ef(sr,P,$a)}var gn;if(Er)e:{switch(p){case"compositionstart":var Mn="onCompositionStart";break e;case"compositionend":Mn="onCompositionEnd";break e;case"compositionupdate":Mn="onCompositionUpdate";break e}Mn=void 0}else os?Ds(p,P)&&(Mn="onCompositionEnd"):p==="keydown"&&P.keyCode===229&&(Mn="onCompositionStart");Mn&&(Fn&&P.locale!=="ko"&&(os||Mn!=="onCompositionStart"?Mn==="onCompositionEnd"&&os&&(gn=Od()):(hn=$a,bn="value"in hn?hn.value:hn.textContent,os=!0)),Ri=Gf(ca,Mn),0<Ri.length&&(Mn=new $o(Mn,p,null,P,$a),sr.push({event:Mn,listeners:Ri}),gn?Mn.data=gn:(gn=io(P),gn!==null&&(Mn.data=gn)))),(gn=On?Dr(p,P):cr(p,P))&&(Mn=Gf(ca,"onBeforeInput"),0<Mn.length&&(Ri=new $o("onBeforeInput","beforeinput",null,P,$a),sr.push({event:Ri,listeners:Mn}),Ri.data=gn)),NC(sr,p,ca,P,$a)}c0(sr,w)})}function Lh(p,w,P){return{instance:p,listener:w,currentTarget:P}}function Gf(p,w){for(var P=w+"Capture",U=[];p!==null;){var X=p,ce=X.stateNode;X=X.tag,X!==5&&X!==26&&X!==27||ce===null||(X=mc(p,P),X!=null&&U.unshift(Lh(p,X,ce)),X=mc(p,w),X!=null&&U.push(Lh(p,X,ce))),p=p.return}return U}function pg(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function zC(p,w,P,U,X){for(var ce=w._reactName,Ge=[];P!==null&&P!==U;){var ft=P,Bt=ft.alternate,ca=ft.stateNode;if(ft=ft.tag,Bt!==null&&Bt===U)break;ft!==5&&ft!==26&&ft!==27||ca===null||(Bt=ca,X?(ca=mc(P,ce),ca!=null&&Ge.unshift(Lh(P,ca,Bt))):X||(ca=mc(P,ce),ca!=null&&Ge.push(Lh(P,ca,Bt)))),P=P.return}Ge.length!==0&&p.push({event:w,listeners:Ge})}var DC=/\r\n?/g,hE=/\u0000|\uFFFD/g;function MC(p){return(typeof p=="string"?p:""+p).replace(DC,`
`).replace(hE,"")}function Zf(p,w){return w=MC(w),MC(p)===w}function uy(){}function Fs(p,w,P,U,X,ce){switch(P){case"children":typeof U=="string"?w==="body"||w==="textarea"&&U===""||Ku(p,U):(typeof U=="number"||typeof U=="bigint")&&w!=="body"&&Ku(p,""+U);break;case"className":Bi(p,"class",U);break;case"tabIndex":Bi(p,"tabindex",U);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(p,P,U);break;case"style":qo(p,U,ce);break;case"data":if(w!=="object"){Bi(p,"data",U);break}case"src":case"href":if(U===""&&(w!=="a"||P!=="href")){p.removeAttribute(P);break}if(U==null||typeof U=="function"||typeof U=="symbol"||typeof U=="boolean"){p.removeAttribute(P);break}U=zn(""+U),p.setAttribute(P,U);break;case"action":case"formAction":if(typeof U=="function"){p.setAttribute(P,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ce=="function"&&(P==="formAction"?(w!=="input"&&Fs(p,w,"name",X.name,X,null),Fs(p,w,"formEncType",X.formEncType,X,null),Fs(p,w,"formMethod",X.formMethod,X,null),Fs(p,w,"formTarget",X.formTarget,X,null)):(Fs(p,w,"encType",X.encType,X,null),Fs(p,w,"method",X.method,X,null),Fs(p,w,"target",X.target,X,null)));if(U==null||typeof U=="symbol"||typeof U=="boolean"){p.removeAttribute(P);break}U=zn(""+U),p.setAttribute(P,U);break;case"onClick":U!=null&&(p.onclick=uy);break;case"onScroll":U!=null&&Zi("scroll",p);break;case"onScrollEnd":U!=null&&Zi("scrollend",p);break;case"dangerouslySetInnerHTML":if(U!=null){if(typeof U!="object"||!("__html"in U))throw Error(r(61));if(P=U.__html,P!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=P}}break;case"multiple":p.multiple=U&&typeof U!="function"&&typeof U!="symbol";break;case"muted":p.muted=U&&typeof U!="function"&&typeof U!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(U==null||typeof U=="function"||typeof U=="boolean"||typeof U=="symbol"){p.removeAttribute("xlink:href");break}P=zn(""+U),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":U!=null&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,""+U):p.removeAttribute(P);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":U&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,""):p.removeAttribute(P);break;case"capture":case"download":U===!0?p.setAttribute(P,""):U!==!1&&U!=null&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,U):p.removeAttribute(P);break;case"cols":case"rows":case"size":case"span":U!=null&&typeof U!="function"&&typeof U!="symbol"&&!isNaN(U)&&1<=U?p.setAttribute(P,U):p.removeAttribute(P);break;case"rowSpan":case"start":U==null||typeof U=="function"||typeof U=="symbol"||isNaN(U)?p.removeAttribute(P):p.setAttribute(P,U);break;case"popover":Zi("beforetoggle",p),Zi("toggle",p),al(p,"popover",U);break;case"xlinkActuate":Jl(p,"http://www.w3.org/1999/xlink","xlink:actuate",U);break;case"xlinkArcrole":Jl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",U);break;case"xlinkRole":Jl(p,"http://www.w3.org/1999/xlink","xlink:role",U);break;case"xlinkShow":Jl(p,"http://www.w3.org/1999/xlink","xlink:show",U);break;case"xlinkTitle":Jl(p,"http://www.w3.org/1999/xlink","xlink:title",U);break;case"xlinkType":Jl(p,"http://www.w3.org/1999/xlink","xlink:type",U);break;case"xmlBase":Jl(p,"http://www.w3.org/XML/1998/namespace","xml:base",U);break;case"xmlLang":Jl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",U);break;case"xmlSpace":Jl(p,"http://www.w3.org/XML/1998/namespace","xml:space",U);break;case"is":al(p,"is",U);break;case"innerText":case"textContent":break;default:(!(2<P.length)||P[0]!=="o"&&P[0]!=="O"||P[1]!=="n"&&P[1]!=="N")&&(P=yh.get(P)||P,al(p,P,U))}}function p0(p,w,P,U,X,ce){switch(P){case"style":qo(p,U,ce);break;case"dangerouslySetInnerHTML":if(U!=null){if(typeof U!="object"||!("__html"in U))throw Error(r(61));if(P=U.__html,P!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=P}}break;case"children":typeof U=="string"?Ku(p,U):(typeof U=="number"||typeof U=="bigint")&&Ku(p,""+U);break;case"onScroll":U!=null&&Zi("scroll",p);break;case"onScrollEnd":U!=null&&Zi("scrollend",p);break;case"onClick":U!=null&&(p.onclick=uy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ui.hasOwnProperty(P))e:{if(P[0]==="o"&&P[1]==="n"&&(X=P.endsWith("Capture"),w=P.slice(2,X?P.length-7:void 0),ce=p[Kt]||null,ce=ce!=null?ce[P]:null,typeof ce=="function"&&p.removeEventListener(w,ce,X),typeof U=="function")){typeof ce!="function"&&ce!==null&&(P in p?p[P]=null:p.hasAttribute(P)&&p.removeAttribute(P)),p.addEventListener(w,U,X);break e}P in p?p[P]=U:U===!0?p.setAttribute(P,""):al(p,P,U)}}}function zo(p,w,P){switch(w){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zi("error",p),Zi("load",p);var U=!1,X=!1,ce;for(ce in P)if(P.hasOwnProperty(ce)){var Ge=P[ce];if(Ge!=null)switch(ce){case"src":U=!0;break;case"srcSet":X=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,w));default:Fs(p,w,ce,Ge,P,null)}}X&&Fs(p,w,"srcSet",P.srcSet,P,null),U&&Fs(p,w,"src",P.src,P,null);return;case"input":Zi("invalid",p);var ft=ce=Ge=X=null,Bt=null,ca=null;for(U in P)if(P.hasOwnProperty(U)){var $a=P[U];if($a!=null)switch(U){case"name":X=$a;break;case"type":Ge=$a;break;case"checked":Bt=$a;break;case"defaultChecked":ca=$a;break;case"value":ce=$a;break;case"defaultValue":ft=$a;break;case"children":case"dangerouslySetInnerHTML":if($a!=null)throw Error(r(137,w));break;default:Fs(p,w,U,$a,P,null)}}Ql(p,ce,ft,Bt,ca,Ge,X,!1),gh(p);return;case"select":Zi("invalid",p),U=Ge=ce=null;for(X in P)if(P.hasOwnProperty(X)&&(ft=P[X],ft!=null))switch(X){case"value":ce=ft;break;case"defaultValue":Ge=ft;break;case"multiple":U=ft;default:Fs(p,w,X,ft,P,null)}w=ce,P=Ge,p.multiple=!!U,w!=null?mo(p,!!U,w,!1):P!=null&&mo(p,!!U,P,!0);return;case"textarea":Zi("invalid",p),ce=X=U=null;for(Ge in P)if(P.hasOwnProperty(Ge)&&(ft=P[Ge],ft!=null))switch(Ge){case"value":U=ft;break;case"defaultValue":X=ft;break;case"children":ce=ft;break;case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(91));break;default:Fs(p,w,Ge,ft,P,null)}Nd(p,U,X,ce),gh(p);return;case"option":for(Bt in P)if(P.hasOwnProperty(Bt)&&(U=P[Bt],U!=null))switch(Bt){case"selected":p.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Fs(p,w,Bt,U,P,null)}return;case"dialog":Zi("cancel",p),Zi("close",p);break;case"iframe":case"object":Zi("load",p);break;case"video":case"audio":for(U=0;U<hg.length;U++)Zi(hg[U],p);break;case"image":Zi("error",p),Zi("load",p);break;case"details":Zi("toggle",p);break;case"embed":case"source":case"link":Zi("error",p),Zi("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ca in P)if(P.hasOwnProperty(ca)&&(U=P[ca],U!=null))switch(ca){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,w));default:Fs(p,w,ca,U,P,null)}return;default:if(Wu(w)){for($a in P)P.hasOwnProperty($a)&&(U=P[$a],U!==void 0&&p0(p,w,$a,U,P,void 0));return}}for(ft in P)P.hasOwnProperty(ft)&&(U=P[ft],U!=null&&Fs(p,w,ft,U,P,null))}function fE(p,w,P,U){switch(w){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var X=null,ce=null,Ge=null,ft=null,Bt=null,ca=null,$a=null;for(Ka in P){var sr=P[Ka];if(P.hasOwnProperty(Ka)&&sr!=null)switch(Ka){case"checked":break;case"value":break;case"defaultValue":Bt=sr;default:U.hasOwnProperty(Ka)||Fs(p,w,Ka,null,U,sr)}}for(var Ea in U){var Ka=U[Ea];if(sr=P[Ea],U.hasOwnProperty(Ea)&&(Ka!=null||sr!=null))switch(Ea){case"type":ce=Ka;break;case"name":X=Ka;break;case"checked":ca=Ka;break;case"defaultChecked":$a=Ka;break;case"value":Ge=Ka;break;case"defaultValue":ft=Ka;break;case"children":case"dangerouslySetInnerHTML":if(Ka!=null)throw Error(r(137,w));break;default:Ka!==sr&&Fs(p,w,Ea,Ka,U,sr)}}Go(p,Ge,ft,Bt,ca,$a,ce,X);return;case"select":Ka=Ge=ft=Ea=null;for(ce in P)if(Bt=P[ce],P.hasOwnProperty(ce)&&Bt!=null)switch(ce){case"value":break;case"multiple":Ka=Bt;default:U.hasOwnProperty(ce)||Fs(p,w,ce,null,U,Bt)}for(X in U)if(ce=U[X],Bt=P[X],U.hasOwnProperty(X)&&(ce!=null||Bt!=null))switch(X){case"value":Ea=ce;break;case"defaultValue":ft=ce;break;case"multiple":Ge=ce;default:ce!==Bt&&Fs(p,w,X,ce,U,Bt)}w=ft,P=Ge,U=Ka,Ea!=null?mo(p,!!P,Ea,!1):!!U!=!!P&&(w!=null?mo(p,!!P,w,!0):mo(p,!!P,P?[]:"",!1));return;case"textarea":Ka=Ea=null;for(ft in P)if(X=P[ft],P.hasOwnProperty(ft)&&X!=null&&!U.hasOwnProperty(ft))switch(ft){case"value":break;case"children":break;default:Fs(p,w,ft,null,U,X)}for(Ge in U)if(X=U[Ge],ce=P[Ge],U.hasOwnProperty(Ge)&&(X!=null||ce!=null))switch(Ge){case"value":Ea=X;break;case"defaultValue":Ka=X;break;case"children":break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:X!==ce&&Fs(p,w,Ge,X,U,ce)}Zo(p,Ea,Ka);return;case"option":for(var sn in P)if(Ea=P[sn],P.hasOwnProperty(sn)&&Ea!=null&&!U.hasOwnProperty(sn))switch(sn){case"selected":p.selected=!1;break;default:Fs(p,w,sn,null,U,Ea)}for(Bt in U)if(Ea=U[Bt],Ka=P[Bt],U.hasOwnProperty(Bt)&&Ea!==Ka&&(Ea!=null||Ka!=null))switch(Bt){case"selected":p.selected=Ea&&typeof Ea!="function"&&typeof Ea!="symbol";break;default:Fs(p,w,Bt,Ea,U,Ka)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ni in P)Ea=P[ni],P.hasOwnProperty(ni)&&Ea!=null&&!U.hasOwnProperty(ni)&&Fs(p,w,ni,null,U,Ea);for(ca in U)if(Ea=U[ca],Ka=P[ca],U.hasOwnProperty(ca)&&Ea!==Ka&&(Ea!=null||Ka!=null))switch(ca){case"children":case"dangerouslySetInnerHTML":if(Ea!=null)throw Error(r(137,w));break;default:Fs(p,w,ca,Ea,U,Ka)}return;default:if(Wu(w)){for(var Qo in P)Ea=P[Qo],P.hasOwnProperty(Qo)&&Ea!==void 0&&!U.hasOwnProperty(Qo)&&p0(p,w,Qo,void 0,U,Ea);for($a in U)Ea=U[$a],Ka=P[$a],!U.hasOwnProperty($a)||Ea===Ka||Ea===void 0&&Ka===void 0||p0(p,w,$a,Ea,U,Ka);return}}for(var va in P)Ea=P[va],P.hasOwnProperty(va)&&Ea!=null&&!U.hasOwnProperty(va)&&Fs(p,w,va,null,U,Ea);for(sr in U)Ea=U[sr],Ka=P[sr],!U.hasOwnProperty(sr)||Ea===Ka||Ea==null&&Ka==null||Fs(p,w,sr,Ea,U,Ka)}var eh=null,IA=null;function cy(p){return p.nodeType===9?p:p.ownerDocument}function j1(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G1(p,w){if(p===0)switch(w){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&w==="foreignObject"?0:p}function m0(p,w){return p==="textarea"||p==="noscript"||typeof w.children=="string"||typeof w.children=="number"||typeof w.children=="bigint"||typeof w.dangerouslySetInnerHTML=="object"&&w.dangerouslySetInnerHTML!==null&&w.dangerouslySetInnerHTML.__html!=null}var g0=null;function Z1(){var p=window.event;return p&&p.type==="popstate"?p===g0?!1:(g0=p,!0):(g0=null,!1)}var lf=typeof setTimeout=="function"?setTimeout:void 0,IC=typeof clearTimeout=="function"?clearTimeout:void 0,LC=typeof Promise=="function"?Promise:void 0,pE=typeof queueMicrotask=="function"?queueMicrotask:typeof LC<"u"?function(p){return LC.resolve(null).then(p).catch(mE)}:lf;function mE(p){setTimeout(function(){throw p})}function q1(p,w){var P=w,U=0;do{var X=P.nextSibling;if(p.removeChild(P),X&&X.nodeType===8)if(P=X.data,P==="/$"){if(U===0){p.removeChild(X),qA(w);return}U--}else P!=="$"&&P!=="$?"&&P!=="$!"||U++;P=X}while(P);qA(w)}function H1(p){var w=p.firstChild;for(w&&w.nodeType===10&&(w=w.nextSibling);w;){var P=w;switch(w=w.nextSibling,P.nodeName){case"HTML":case"HEAD":case"BODY":H1(P),Wr(P);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(P.rel.toLowerCase()==="stylesheet")continue}p.removeChild(P)}}function gE(p,w,P,U){for(;p.nodeType===1;){var X=P;if(p.nodeName.toLowerCase()!==w.toLowerCase()){if(!U&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(U){if(!p[Lr])switch(w){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(ce=p.getAttribute("rel"),ce==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(ce!==X.rel||p.getAttribute("href")!==(X.href==null?null:X.href)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin)||p.getAttribute("title")!==(X.title==null?null:X.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(ce=p.getAttribute("src"),(ce!==(X.src==null?null:X.src)||p.getAttribute("type")!==(X.type==null?null:X.type)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin))&&ce&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(w==="input"&&p.type==="hidden"){var ce=X.name==null?null:""+X.name;if(X.type==="hidden"&&p.getAttribute("name")===ce)return p}else return p;if(p=ju(p.nextSibling),p===null)break}return null}function yE(p,w,P){if(w==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!P||(p=ju(p.nextSibling),p===null))return null;return p}function ju(p){for(;p!=null;p=p.nextSibling){var w=p.nodeType;if(w===1||w===3)break;if(w===8){if(w=p.data,w==="$"||w==="$!"||w==="$?"||w==="F!"||w==="F")break;if(w==="/$")return null}}return p}function $1(p){p=p.previousSibling;for(var w=0;p;){if(p.nodeType===8){var P=p.data;if(P==="$"||P==="$!"||P==="$?"){if(w===0)return p;w--}else P==="/$"&&w++}p=p.previousSibling}return null}function LA(p,w,P){switch(w=cy(P),p){case"html":if(p=w.documentElement,!p)throw Error(r(452));return p;case"head":if(p=w.head,!p)throw Error(r(453));return p;case"body":if(p=w.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}var th=new Map,K1=new Set;function mg(p){return typeof p.getRootNode=="function"?p.getRootNode():p.ownerDocument}var qf=je.d;je.d={f:y0,r:FC,D:kC,C:AE,L:UC,m:BC,X:GC,S:jC,M:W1};function y0(){var p=qf.f(),w=r0();return p||w}function FC(p){var w=ri(p);w!==null&&w.tag===5&&w.type==="form"?tf(w):qf.r(p)}var _m=typeof document>"u"?null:document;function A0(p,w,P){var U=_m;if(U&&typeof w=="string"&&w){var X=no(w);X='link[rel="'+p+'"][href="'+X+'"]',typeof P=="string"&&(X+='[crossorigin="'+P+'"]'),K1.has(X)||(K1.add(X),p={rel:p,crossOrigin:P,href:w},U.querySelector(X)===null&&(w=U.createElement("link"),zo(w,"link",p),Qr(w),U.head.appendChild(w)))}}function kC(p){qf.D(p),A0("dns-prefetch",p,null)}function AE(p,w){qf.C(p,w),A0("preconnect",p,w)}function UC(p,w,P){qf.L(p,w,P);var U=_m;if(U&&p&&w){var X='link[rel="preload"][as="'+no(w)+'"]';w==="image"&&P&&P.imageSrcSet?(X+='[imagesrcset="'+no(P.imageSrcSet)+'"]',typeof P.imageSizes=="string"&&(X+='[imagesizes="'+no(P.imageSizes)+'"]')):X+='[href="'+no(p)+'"]';var ce=X;switch(w){case"style":ce=wm(p);break;case"script":ce=dy(p)}th.has(ce)||(p=Ne({rel:"preload",href:w==="image"&&P&&P.imageSrcSet?void 0:p,as:w},P),th.set(ce,p),U.querySelector(X)!==null||w==="style"&&U.querySelector(FA(ce))||w==="script"&&U.querySelector(hy(ce))||(w=U.createElement("link"),zo(w,"link",p),Qr(w),U.head.appendChild(w)))}}function BC(p,w){qf.m(p,w);var P=_m;if(P&&p){var U=w&&typeof w.as=="string"?w.as:"script",X='link[rel="modulepreload"][as="'+no(U)+'"][href="'+no(p)+'"]',ce=X;switch(U){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ce=dy(p)}if(!th.has(ce)&&(p=Ne({rel:"modulepreload",href:p},w),th.set(ce,p),P.querySelector(X)===null)){switch(U){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(P.querySelector(hy(ce)))return}U=P.createElement("link"),zo(U,"link",p),Qr(U),P.head.appendChild(U)}}}function jC(p,w,P){qf.S(p,w,P);var U=_m;if(U&&p){var X=Cn(U).hoistableStyles,ce=wm(p);w=w||"default";var Ge=X.get(ce);if(!Ge){var ft={loading:0,preload:null};if(Ge=U.querySelector(FA(ce)))ft.loading=5;else{p=Ne({rel:"stylesheet",href:p,"data-precedence":w},P),(P=th.get(ce))&&gg(p,P);var Bt=Ge=U.createElement("link");Qr(Bt),zo(Bt,"link",p),Bt._p=new Promise(function(ca,$a){Bt.onload=ca,Bt.onerror=$a}),Bt.addEventListener("load",function(){ft.loading|=1}),Bt.addEventListener("error",function(){ft.loading|=2}),ft.loading|=4,Rm(Ge,w,U)}Ge={type:"stylesheet",instance:Ge,count:1,state:ft},X.set(ce,Ge)}}}function GC(p,w){qf.X(p,w);var P=_m;if(P&&p){var U=Cn(P).hoistableScripts,X=dy(p),ce=U.get(X);ce||(ce=P.querySelector(hy(X)),ce||(p=Ne({src:p,async:!0},w),(w=th.get(X))&&fy(p,w),ce=P.createElement("script"),Qr(ce),zo(ce,"link",p),P.head.appendChild(ce)),ce={type:"script",instance:ce,count:1,state:null},U.set(X,ce))}}function W1(p,w){qf.M(p,w);var P=_m;if(P&&p){var U=Cn(P).hoistableScripts,X=dy(p),ce=U.get(X);ce||(ce=P.querySelector(hy(X)),ce||(p=Ne({src:p,async:!0,type:"module"},w),(w=th.get(X))&&fy(p,w),ce=P.createElement("script"),Qr(ce),zo(ce,"link",p),P.head.appendChild(ce)),ce={type:"script",instance:ce,count:1,state:null},U.set(X,ce))}}function Y1(p,w,P,U){var X=(X=fa.current)?mg(X):null;if(!X)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof P.precedence=="string"&&typeof P.href=="string"?(w=wm(P.href),P=Cn(X).hoistableStyles,U=P.get(w),U||(U={type:"style",instance:null,count:0,state:null},P.set(w,U)),U):{type:"void",instance:null,count:0,state:null};case"link":if(P.rel==="stylesheet"&&typeof P.href=="string"&&typeof P.precedence=="string"){p=wm(P.href);var ce=Cn(X).hoistableStyles,Ge=ce.get(p);if(Ge||(X=X.ownerDocument||X,Ge={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ce.set(p,Ge),(ce=X.querySelector(FA(p)))&&!ce._p&&(Ge.instance=ce,Ge.state.loading=5),th.has(p)||(P={rel:"preload",as:"style",href:P.href,crossOrigin:P.crossOrigin,integrity:P.integrity,media:P.media,hrefLang:P.hrefLang,referrerPolicy:P.referrerPolicy},th.set(p,P),ce||vE(X,p,P,Ge.state))),w&&U===null)throw Error(r(528,""));return Ge}if(w&&U!==null)throw Error(r(529,""));return null;case"script":return w=P.async,P=P.src,typeof P=="string"&&w&&typeof w!="function"&&typeof w!="symbol"?(w=dy(P),P=Cn(X).hoistableScripts,U=P.get(w),U||(U={type:"script",instance:null,count:0,state:null},P.set(w,U)),U):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function wm(p){return'href="'+no(p)+'"'}function FA(p){return'link[rel="stylesheet"]['+p+"]"}function ZC(p){return Ne({},p,{"data-precedence":p.precedence,precedence:null})}function vE(p,w,P,U){p.querySelector('link[rel="preload"][as="style"]['+w+"]")?U.loading=1:(w=p.createElement("link"),U.preload=w,w.addEventListener("load",function(){return U.loading|=1}),w.addEventListener("error",function(){return U.loading|=2}),zo(w,"link",P),Qr(w),p.head.appendChild(w))}function dy(p){return'[src="'+no(p)+'"]'}function hy(p){return"script[async]"+p}function Pp(p,w,P){if(w.count++,w.instance===null)switch(w.type){case"style":var U=p.querySelector('style[data-href~="'+no(P.href)+'"]');if(U)return w.instance=U,Qr(U),U;var X=Ne({},P,{"data-href":P.href,"data-precedence":P.precedence,href:null,precedence:null});return U=(p.ownerDocument||p).createElement("style"),Qr(U),zo(U,"style",X),Rm(U,P.precedence,p),w.instance=U;case"stylesheet":X=wm(P.href);var ce=p.querySelector(FA(X));if(ce)return w.state.loading|=4,w.instance=ce,Qr(ce),ce;U=ZC(P),(X=th.get(X))&&gg(U,X),ce=(p.ownerDocument||p).createElement("link"),Qr(ce);var Ge=ce;return Ge._p=new Promise(function(ft,Bt){Ge.onload=ft,Ge.onerror=Bt}),zo(ce,"link",U),w.state.loading|=4,Rm(ce,P.precedence,p),w.instance=ce;case"script":return ce=dy(P.src),(X=p.querySelector(hy(ce)))?(w.instance=X,Qr(X),X):(U=P,(X=th.get(ce))&&(U=Ne({},P),fy(U,X)),p=p.ownerDocument||p,X=p.createElement("script"),Qr(X),zo(X,"link",U),p.head.appendChild(X),w.instance=X);case"void":return null;default:throw Error(r(443,w.type))}else w.type==="stylesheet"&&(w.state.loading&4)===0&&(U=w.instance,w.state.loading|=4,Rm(U,P.precedence,p));return w.instance}function Rm(p,w,P){for(var U=P.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),X=U.length?U[U.length-1]:null,ce=X,Ge=0;Ge<U.length;Ge++){var ft=U[Ge];if(ft.dataset.precedence===w)ce=ft;else if(ce!==X)break}ce?ce.parentNode.insertBefore(p,ce.nextSibling):(w=P.nodeType===9?P.head:P,w.insertBefore(p,w.firstChild))}function gg(p,w){p.crossOrigin==null&&(p.crossOrigin=w.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=w.referrerPolicy),p.title==null&&(p.title=w.title)}function fy(p,w){p.crossOrigin==null&&(p.crossOrigin=w.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=w.referrerPolicy),p.integrity==null&&(p.integrity=w.integrity)}var Tm=null;function X1(p,w,P){if(Tm===null){var U=new Map,X=Tm=new Map;X.set(P,U)}else X=Tm,U=X.get(P),U||(U=new Map,X.set(P,U));if(U.has(p))return U;for(U.set(p,null),P=P.getElementsByTagName(p),X=0;X<P.length;X++){var ce=P[X];if(!(ce[Lr]||ce[Yt]||p==="link"&&ce.getAttribute("rel")==="stylesheet")&&ce.namespaceURI!=="http://www.w3.org/2000/svg"){var Ge=ce.getAttribute(w)||"";Ge=p+Ge;var ft=U.get(Ge);ft?ft.push(ce):U.set(Ge,[ce])}}return U}function J1(p,w,P){p=p.ownerDocument||p,p.head.insertBefore(P,w==="title"?p.querySelector("head > title"):null)}function qC(p,w,P){if(P===1||w.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof w.precedence!="string"||typeof w.href!="string"||w.href==="")break;return!0;case"link":if(typeof w.rel!="string"||typeof w.href!="string"||w.href===""||w.onLoad||w.onError)break;switch(w.rel){case"stylesheet":return p=w.disabled,typeof w.precedence=="string"&&p==null;default:return!0}case"script":if(w.async&&typeof w.async!="function"&&typeof w.async!="symbol"&&!w.onLoad&&!w.onError&&w.src&&typeof w.src=="string")return!0}return!1}function Q1(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var kA=null;function _E(){}function HC(p,w,P){if(kA===null)throw Error(r(475));var U=kA;if(w.type==="stylesheet"&&(typeof P.media!="string"||matchMedia(P.media).matches!==!1)&&(w.state.loading&4)===0){if(w.instance===null){var X=wm(P.href),ce=p.querySelector(FA(X));if(ce){p=ce._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(U.count++,U=UA.bind(U),p.then(U,U)),w.state.loading|=4,w.instance=ce,Qr(ce);return}ce=p.ownerDocument||p,P=ZC(P),(X=th.get(X))&&gg(P,X),ce=ce.createElement("link"),Qr(ce);var Ge=ce;Ge._p=new Promise(function(ft,Bt){Ge.onload=ft,Ge.onerror=Bt}),zo(ce,"link",P),w.instance=ce}U.stylesheets===null&&(U.stylesheets=new Map),U.stylesheets.set(w,p),(p=w.state.preload)&&(w.state.loading&3)===0&&(U.count++,w=UA.bind(U),p.addEventListener("load",w),p.addEventListener("error",w))}}function v0(){if(kA===null)throw Error(r(475));var p=kA;return p.stylesheets&&p.count===0&&w0(p,p.stylesheets),0<p.count?function(w){var P=setTimeout(function(){if(p.stylesheets&&w0(p,p.stylesheets),p.unsuspend){var U=p.unsuspend;p.unsuspend=null,U()}},6e4);return p.unsuspend=w,function(){p.unsuspend=null,clearTimeout(P)}}:null}function UA(){if(this.count--,this.count===0){if(this.stylesheets)w0(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var _0=null;function w0(p,w){p.stylesheets=null,p.unsuspend!==null&&(p.count++,_0=new Map,w.forEach(ew,p),_0=null,UA.call(p))}function ew(p,w){if(!(w.state.loading&4)){var P=_0.get(p);if(P)var U=P.get(null);else{P=new Map,_0.set(p,P);for(var X=p.querySelectorAll("link[data-precedence],style[data-precedence]"),ce=0;ce<X.length;ce++){var Ge=X[ce];(Ge.nodeName==="LINK"||Ge.getAttribute("media")!=="not all")&&(P.set(Ge.dataset.precedence,Ge),U=Ge)}U&&P.set(null,U)}X=w.instance,Ge=X.getAttribute("data-precedence"),ce=P.get(Ge)||U,ce===U&&P.set(null,X),P.set(Ge,X),this.count++,U=UA.bind(this),X.addEventListener("load",U),X.addEventListener("error",U),ce?ce.parentNode.insertBefore(X,ce.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(X,p.firstChild)),w.state.loading|=4}}var py={$$typeof:k,Provider:null,Consumer:null,_currentValue:Ze,_currentValue2:Ze,_threadCount:0};function $C(p,w,P,U,X,ce,Ge,ft){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.hiddenUpdates=xe(null),this.identifierPrefix=U,this.onUncaughtError=X,this.onCaughtError=ce,this.onRecoverableError=Ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ft,this.incompleteTransitions=new Map}function tw(p,w,P,U,X,ce,Ge,ft,Bt,ca,$a,sr){return p=new $C(p,w,P,Ge,ft,Bt,ca,sr),w=1,ce===!0&&(w|=24),ce=ia(3,null,null,w),p.current=ce,ce.stateNode=p,w=Qh(),w.refCount++,p.pooledCache=w,w.refCount++,ce.memoizedState={element:U,isDehydrated:P,cache:w},zh(ce),p}function aw(p){return p?(p=Wc,p):Wc}function rw(p,w,P,U,X,ce){X=aw(X),U.context===null?U.context=X:U.pendingContext=X,U=Ff(w),U.payload={element:P},ce=ce===void 0?null:ce,ce!==null&&(U.callback=ce),P=kf(p,U,w),P!==null&&(Zl(P,p,w),Uf(P,p,w))}function KC(p,w){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var P=p.retryLane;p.retryLane=P!==0&&P<w?P:w}}function R0(p,w){KC(p,w),(p=p.alternate)&&KC(p,w)}function nw(p){if(p.tag===13){var w=sl(p,67108864);w!==null&&Zl(w,p,67108864),R0(p,67108864)}}var Cm=!0;function WC(p,w,P,U){var X=we.T;we.T=null;var ce=je.p;try{je.p=2,iw(p,w,P,U)}finally{je.p=ce,we.T=X}}function YC(p,w,P,U){var X=we.T;we.T=null;var ce=je.p;try{je.p=8,iw(p,w,P,U)}finally{je.p=ce,we.T=X}}function iw(p,w,P,U){if(Cm){var X=sw(U);if(X===null)f0(p,w,U,T0,P),cw(p,U);else if(JC(X,p,w,P,U))U.stopPropagation();else if(cw(p,U),w&4&&-1<uw.indexOf(p)){for(;X!==null;){var ce=ri(X);if(ce!==null)switch(ce.tag){case 3:if(ce=ce.stateNode,ce.current.memoizedState.isDehydrated){var Ge=Aa(ce.pendingLanes);if(Ge!==0){var ft=ce;for(ft.pendingLanes|=2,ft.entangledLanes|=2;Ge;){var Bt=1<<31-Yr(Ge);ft.entanglements[1]|=Bt,Ge&=~Bt}of(ce),(Mr&6)===0&&(To=Ia()+500,vm(0))}}break;case 13:ft=sl(ce,2),ft!==null&&Zl(ft,ce,2),r0(),R0(ce,2)}if(ce=sw(U),ce===null&&f0(p,w,U,T0,P),ce===X)break;X=ce}X!==null&&U.stopPropagation()}else f0(p,w,U,null,P)}}function sw(p){return p=vr(p),ow(p)}var T0=null;function ow(p){if(T0=null,p=Un(p),p!==null){var w=Oe(p);if(w===null)p=null;else{var P=w.tag;if(P===13){if(p=He(w),p!==null)return p;p=null}else if(P===3){if(w.stateNode.current.memoizedState.isDehydrated)return w.tag===3?w.stateNode.containerInfo:null;p=null}else w!==p&&(p=null)}}return T0=p,null}function XC(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fr()){case tn:return 2;case lr:return 8;case wr:case na:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var lw=!1,Sm=null,Ep=null,bm=null,BA=new Map,jA=new Map,Hf=[],uw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cw(p,w){switch(p){case"focusin":case"focusout":Sm=null;break;case"dragenter":case"dragleave":Ep=null;break;case"mouseover":case"mouseout":bm=null;break;case"pointerover":case"pointerout":BA.delete(w.pointerId);break;case"gotpointercapture":case"lostpointercapture":jA.delete(w.pointerId)}}function my(p,w,P,U,X,ce){return p===null||p.nativeEvent!==ce?(p={blockedOn:w,domEventName:P,eventSystemFlags:U,nativeEvent:ce,targetContainers:[X]},w!==null&&(w=ri(w),w!==null&&nw(w)),p):(p.eventSystemFlags|=U,w=p.targetContainers,X!==null&&w.indexOf(X)===-1&&w.push(X),p)}function JC(p,w,P,U,X){switch(w){case"focusin":return Sm=my(Sm,p,w,P,U,X),!0;case"dragenter":return Ep=my(Ep,p,w,P,U,X),!0;case"mouseover":return bm=my(bm,p,w,P,U,X),!0;case"pointerover":var ce=X.pointerId;return BA.set(ce,my(BA.get(ce)||null,p,w,P,U,X)),!0;case"gotpointercapture":return ce=X.pointerId,jA.set(ce,my(jA.get(ce)||null,p,w,P,U,X)),!0}return!1}function dw(p){var w=Un(p.target);if(w!==null){var P=Oe(w);if(P!==null){if(w=P.tag,w===13){if(w=He(P),w!==null){p.blockedOn=w,Et(p.priority,function(){if(P.tag===13){var U=Co(),X=sl(P,U);X!==null&&Zl(X,P,U),R0(P,U)}});return}}else if(w===3&&P.stateNode.current.memoizedState.isDehydrated){p.blockedOn=P.tag===3?P.stateNode.containerInfo:null;return}}}p.blockedOn=null}function GA(p){if(p.blockedOn!==null)return!1;for(var w=p.targetContainers;0<w.length;){var P=sw(p.nativeEvent);if(P===null){P=p.nativeEvent;var U=new P.constructor(P.type,P);go=U,P.target.dispatchEvent(U),go=null}else return w=ri(P),w!==null&&nw(w),p.blockedOn=P,!1;w.shift()}return!0}function hw(p,w,P){GA(p)&&P.delete(w)}function QC(){lw=!1,Sm!==null&&GA(Sm)&&(Sm=null),Ep!==null&&GA(Ep)&&(Ep=null),bm!==null&&GA(bm)&&(bm=null),BA.forEach(hw),jA.forEach(hw)}function ZA(p,w){p.blockedOn===w&&(p.blockedOn=null,lw||(lw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QC)))}var gy=null;function fw(p){gy!==p&&(gy=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){gy===p&&(gy=null);for(var w=0;w<p.length;w+=3){var P=p[w],U=p[w+1],X=p[w+2];if(typeof U!="function"){if(ow(U||P)===null)continue;break}var ce=ri(P);ce!==null&&(p.splice(w,3),w-=3,nd(ce,{pending:!0,data:X,method:P.method,action:U},U,X))}}))}function qA(p){function w(Bt){return ZA(Bt,p)}Sm!==null&&ZA(Sm,p),Ep!==null&&ZA(Ep,p),bm!==null&&ZA(bm,p),BA.forEach(w),jA.forEach(w);for(var P=0;P<Hf.length;P++){var U=Hf[P];U.blockedOn===p&&(U.blockedOn=null)}for(;0<Hf.length&&(P=Hf[0],P.blockedOn===null);)dw(P),P.blockedOn===null&&Hf.shift();if(P=(p.ownerDocument||p).$$reactFormReplay,P!=null)for(U=0;U<P.length;U+=3){var X=P[U],ce=P[U+1],Ge=X[Kt]||null;if(typeof ce=="function")Ge||fw(P);else if(Ge){var ft=null;if(ce&&ce.hasAttribute("formAction")){if(X=ce,Ge=ce[Kt]||null)ft=Ge.formAction;else if(ow(X)!==null)continue}else ft=Ge.action;typeof ft=="function"?P[U+1]=ft:(P.splice(U,3),U-=3),fw(P)}}}function yg(p){this._internalRoot=p}HA.prototype.render=yg.prototype.render=function(p){var w=this._internalRoot;if(w===null)throw Error(r(409));var P=w.current,U=Co();rw(P,U,p,w,null,null)},HA.prototype.unmount=yg.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var w=p.containerInfo;p.tag===0&&Ih(),rw(p.current,2,null,p,null,null),r0(),w[Sa]=null}};function HA(p){this._internalRoot=p}HA.prototype.unstable_scheduleHydration=function(p){if(p){var w=Gt();p={blockedOn:null,target:p,priority:w};for(var P=0;P<Hf.length&&w!==0&&w<Hf[P].priority;P++);Hf.splice(P,0,p),P===0&&dw(p)}};var eS=e.version;if(eS!=="19.0.0")throw Error(r(527,eS,"19.0.0"));je.findDOMNode=function(p){var w=p._reactInternals;if(w===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=ct(w),p=p!==null?Se(p):null,p=p===null?null:p.stateNode,p};var wE={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:we,findFiberByHostInstance:Un,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var C0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C0.isDisabled&&C0.supportsFiber)try{gr=C0.inject(wE),Tn=C0}catch{}}return Iw.createRoot=function(p,w){if(!i(p))throw Error(r(299));var P=!1,U="",X=yp,ce=af,Ge=Oh,ft=null;return w!=null&&(w.unstable_strictMode===!0&&(P=!0),w.identifierPrefix!==void 0&&(U=w.identifierPrefix),w.onUncaughtError!==void 0&&(X=w.onUncaughtError),w.onCaughtError!==void 0&&(ce=w.onCaughtError),w.onRecoverableError!==void 0&&(Ge=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(ft=w.unstable_transitionCallbacks)),w=tw(p,1,!1,null,null,P,U,X,ce,Ge,ft,null),p[Sa]=w.current,h0(p.nodeType===8?p.parentNode:p),new yg(w)},Iw.hydrateRoot=function(p,w,P){if(!i(p))throw Error(r(299));var U=!1,X="",ce=yp,Ge=af,ft=Oh,Bt=null,ca=null;return P!=null&&(P.unstable_strictMode===!0&&(U=!0),P.identifierPrefix!==void 0&&(X=P.identifierPrefix),P.onUncaughtError!==void 0&&(ce=P.onUncaughtError),P.onCaughtError!==void 0&&(Ge=P.onCaughtError),P.onRecoverableError!==void 0&&(ft=P.onRecoverableError),P.unstable_transitionCallbacks!==void 0&&(Bt=P.unstable_transitionCallbacks),P.formState!==void 0&&(ca=P.formState)),w=tw(p,1,!0,w,P??null,U,X,ce,Ge,ft,Bt,ca),w.context=aw(null),P=w.current,U=Co(),X=Ff(U),X.callback=null,kf(P,X,U),w.current.lanes=U,Le(w,U),of(w),p[Sa]=w.current,h0(p),new HA(w)},Iw.version="19.0.0",Iw}var b6;function Cne(){if(b6)return gN.exports;b6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gN.exports=Tne(),gN.exports}var Sne=Cne(),Lw={},x6;function bne(){if(x6)return Lw;x6=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.parse=c,Lw.serialize=R;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function c(I,k){const Z=new l,$=I.length;if($<2)return Z;const H=(k==null?void 0:k.decode)||x;let W=0;do{const ee=I.indexOf("=",W);if(ee===-1)break;const oe=I.indexOf(";",W),pe=oe===-1?$:oe;if(ee>pe){W=I.lastIndexOf(";",ee-1)+1;continue}const le=n(I,W,ee),ge=v(I,ee,le),ue=I.slice(le,ge);if(Z[ue]===void 0){let Re=n(I,ee+1,pe),we=v(I,pe,Re);const Ne=H(I.slice(Re,we));Z[ue]=Ne}W=pe+1}while(W<$);return Z}function n(I,k,Z){do{const $=I.charCodeAt(k);if($!==32&&$!==9)return k}while(++k<Z);return Z}function v(I,k,Z){for(;k>Z;){const $=I.charCodeAt(--k);if($!==32&&$!==9)return k+1}return Z}function R(I,k,Z){const $=(Z==null?void 0:Z.encode)||encodeURIComponent;if(!t.test(I))throw new TypeError(`argument name is invalid: ${I}`);const H=$(k);if(!e.test(H))throw new TypeError(`argument val is invalid: ${k}`);let W=I+"="+H;if(!Z)return W;if(Z.maxAge!==void 0){if(!Number.isInteger(Z.maxAge))throw new TypeError(`option maxAge is invalid: ${Z.maxAge}`);W+="; Max-Age="+Z.maxAge}if(Z.domain){if(!a.test(Z.domain))throw new TypeError(`option domain is invalid: ${Z.domain}`);W+="; Domain="+Z.domain}if(Z.path){if(!r.test(Z.path))throw new TypeError(`option path is invalid: ${Z.path}`);W+="; Path="+Z.path}if(Z.expires){if(!N(Z.expires)||!Number.isFinite(Z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Z.expires}`);W+="; Expires="+Z.expires.toUTCString()}if(Z.httpOnly&&(W+="; HttpOnly"),Z.secure&&(W+="; Secure"),Z.partitioned&&(W+="; Partitioned"),Z.priority)switch(typeof Z.priority=="string"?Z.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Z.priority}`)}if(Z.sameSite)switch(typeof Z.sameSite=="string"?Z.sameSite.toLowerCase():Z.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Z.sameSite}`)}return W}function x(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function N(I){return i.call(I)==="[object Date]"}return Lw}bne();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var P6="popstate";function xne(t={}){function e(i,l){let{pathname:c="/",search:n="",hash:v=""}=jv(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),D5("",{pathname:c,search:n,hash:v},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(i,l){let c=i.document.querySelector("base"),n="";if(c&&c.getAttribute("href")){let v=i.location.href,R=v.indexOf("#");n=R===-1?v:v.slice(0,R)}return n+"#"+(typeof l=="string"?l:DR(l))}function r(i,l){Kp(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Ene(e,a,r,t)}function yl(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pne(){return Math.random().toString(36).substring(2,10)}function E6(t,e){return{usr:t.state,key:t.key,idx:e}}function D5(t,e,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?jv(e):e,state:a,key:e&&e.key||r||Pne()}}function DR({pathname:t="/",search:e="",hash:a=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function jv(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Ene(t,e,a,r={}){let{window:i=document.defaultView,v5Compat:l=!1}=r,c=i.history,n="POP",v=null,R=x();R==null&&(R=0,c.replaceState({...c.state,idx:R},""));function x(){return(c.state||{idx:null}).idx}function N(){n="POP";let H=x(),W=H==null?null:H-R;R=H,v&&v({action:n,location:$.location,delta:W})}function I(H,W){n="PUSH";let ee=D5($.location,H,W);a&&a(ee,H),R=x()+1;let oe=E6(ee,R),pe=$.createHref(ee);try{c.pushState(oe,"",pe)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;i.location.assign(pe)}l&&v&&v({action:n,location:$.location,delta:1})}function k(H,W){n="REPLACE";let ee=D5($.location,H,W);a&&a(ee,H),R=x();let oe=E6(ee,R),pe=$.createHref(ee);c.replaceState(oe,"",pe),l&&v&&v({action:n,location:$.location,delta:0})}function Z(H){let W=i.location.origin!=="null"?i.location.origin:i.location.href,ee=typeof H=="string"?H:DR(H);return ee=ee.replace(/ $/,"%20"),yl(W,`No window.location.(origin|href) available to create URL for href: ${ee}`),new URL(ee,W)}let $={get action(){return n},get location(){return t(i,c)},listen(H){if(v)throw new Error("A history only accepts one active listener");return i.addEventListener(P6,N),v=H,()=>{i.removeEventListener(P6,N),v=null}},createHref(H){return e(i,H)},createURL:Z,encodeLocation(H){let W=Z(H);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:I,replace:k,go(H){return c.go(H)}};return $}function G$(t,e,a="/"){return Nne(t,e,a,!1)}function Nne(t,e,a,r){let i=typeof e=="string"?jv(e):e,l=Vg(i.pathname||"/",a);if(l==null)return null;let c=Z$(t);One(c);let n=null;for(let v=0;n==null&&v<c.length;++v){let R=jne(l);n=Une(c[v],R,r)}return n}function Z$(t,e=[],a=[],r=""){let i=(l,c,n)=>{let v={relativePath:n===void 0?l.path||"":n,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};v.relativePath.startsWith("/")&&(yl(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length));let R=Pg([r,v.relativePath]),x=a.concat(v);l.children&&l.children.length>0&&(yl(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),Z$(l.children,e,x,R)),!(l.path==null&&!l.index)&&e.push({path:R,score:Fne(R,l.index),routesMeta:x})};return t.forEach((l,c)=>{var n;if(l.path===""||!((n=l.path)!=null&&n.includes("?")))i(l,c);else for(let v of q$(l.path))i(l,c,v)}),e}function q$(t){let e=t.split("/");if(e.length===0)return[];let[a,...r]=e,i=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let c=q$(r.join("/")),n=[];return n.push(...c.map(v=>v===""?l:[l,v].join("/"))),i&&n.push(...c),n.map(v=>t.startsWith("/")&&v===""?"/":v)}function One(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:kne(e.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var Vne=/^:[\w-]+$/,zne=3,Dne=2,Mne=1,Ine=10,Lne=-2,N6=t=>t==="*";function Fne(t,e){let a=t.split("/"),r=a.length;return a.some(N6)&&(r+=Lne),e&&(r+=Dne),a.filter(i=>!N6(i)).reduce((i,l)=>i+(Vne.test(l)?zne:l===""?Mne:Ine),r)}function kne(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Une(t,e,a=!1){let{routesMeta:r}=t,i={},l="/",c=[];for(let n=0;n<r.length;++n){let v=r[n],R=n===r.length-1,x=l==="/"?e:e.slice(l.length)||"/",N=Ub({path:v.relativePath,caseSensitive:v.caseSensitive,end:R},x),I=v.route;if(!N&&R&&a&&!r[r.length-1].route.index&&(N=Ub({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},x)),!N)return null;Object.assign(i,N.params),c.push({params:i,pathname:Pg([l,N.pathname]),pathnameBase:Hne(Pg([l,N.pathnameBase])),route:I}),N.pathnameBase!=="/"&&(l=Pg([l,N.pathnameBase]))}return c}function Ub(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=Bne(t.path,t.caseSensitive,t.end),i=e.match(a);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),n=i.slice(1);return{params:r.reduce((R,{paramName:x,isOptional:N},I)=>{if(x==="*"){let Z=n[I]||"";c=l.slice(0,l.length-Z.length).replace(/(.)\/+$/,"$1")}const k=n[I];return N&&!k?R[x]=void 0:R[x]=(k||"").replace(/%2F/g,"/"),R},{}),pathname:l,pathnameBase:c,pattern:t}}function Bne(t,e=!1,a=!0){Kp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,n,v)=>(r.push({paramName:n,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function jne(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kp(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function Gne(t,e="/"){let{pathname:a,search:r="",hash:i=""}=typeof t=="string"?jv(t):t;return{pathname:a?a.startsWith("/")?a:Zne(a,e):e,search:$ne(r),hash:Kne(i)}}function Zne(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?a.length>1&&a.pop():i!=="."&&a.push(i)}),a.length>1?a.join("/"):"/"}function _N(t,e,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qne(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function H$(t){let e=qne(t);return e.map((a,r)=>r===e.length-1?a.pathname:a.pathnameBase)}function $$(t,e,a,r=!1){let i;typeof t=="string"?i=jv(t):(i={...t},yl(!i.pathname||!i.pathname.includes("?"),_N("?","pathname","search",i)),yl(!i.pathname||!i.pathname.includes("#"),_N("#","pathname","hash",i)),yl(!i.search||!i.search.includes("#"),_N("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,n;if(c==null)n=a;else{let N=e.length-1;if(!r&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),N-=1;i.pathname=I.join("/")}n=N>=0?e[N]:"/"}let v=Gne(i,n),R=c&&c!=="/"&&c.endsWith("/"),x=(l||c===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(R||x)&&(v.pathname+="/"),v}var Pg=t=>t.join("/").replace(/\/\/+/g,"/"),Hne=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$ne=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Kne=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Wne(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var K$=["POST","PUT","PATCH","DELETE"];new Set(K$);var Yne=["GET",...K$];new Set(Yne);var o1=ie.createContext(null);o1.displayName="DataRouter";var x2=ie.createContext(null);x2.displayName="DataRouterState";var W$=ie.createContext({isTransitioning:!1});W$.displayName="ViewTransition";var Xne=ie.createContext(new Map);Xne.displayName="Fetchers";var Jne=ie.createContext(null);Jne.displayName="Await";var Ym=ie.createContext(null);Ym.displayName="Navigation";var BT=ie.createContext(null);BT.displayName="Location";var Bg=ie.createContext({outlet:null,matches:[],isDataRoute:!1});Bg.displayName="Route";var p3=ie.createContext(null);p3.displayName="RouteError";function Qne(t,{relative:e}={}){yl(jT(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=ie.useContext(Ym),{hash:i,pathname:l,search:c}=GT(t,{relative:e}),n=l;return a!=="/"&&(n=l==="/"?a:Pg([a,l])),r.createHref({pathname:n,search:c,hash:i})}function jT(){return ie.useContext(BT)!=null}function iA(){return yl(jT(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(BT).location}var Y$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X$(t){ie.useContext(Ym).static||ie.useLayoutEffect(t)}function m3(){let{isDataRoute:t}=ie.useContext(Bg);return t?hie():eie()}function eie(){yl(jT(),"useNavigate() may be used only in the context of a <Router> component.");let t=ie.useContext(o1),{basename:e,navigator:a}=ie.useContext(Ym),{matches:r}=ie.useContext(Bg),{pathname:i}=iA(),l=JSON.stringify(H$(r)),c=ie.useRef(!1);return X$(()=>{c.current=!0}),ie.useCallback((v,R={})=>{if(Kp(c.current,Y$),!c.current)return;if(typeof v=="number"){a.go(v);return}let x=$$(v,JSON.parse(l),i,R.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Pg([e,x.pathname])),(R.replace?a.replace:a.push)(x,R.state,R)},[e,a,l,i,t])}ie.createContext(null);function GT(t,{relative:e}={}){let{matches:a}=ie.useContext(Bg),{pathname:r}=iA(),i=JSON.stringify(H$(a));return ie.useMemo(()=>$$(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function tie(t,e){return J$(t,e)}function J$(t,e,a,r){var ee;yl(jT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=ie.useContext(Ym),{matches:c}=ie.useContext(Bg),n=c[c.length-1],v=n?n.params:{},R=n?n.pathname:"/",x=n?n.pathnameBase:"/",N=n&&n.route;{let oe=N&&N.path||"";Q$(R,!N||oe.endsWith("*")||oe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${oe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${oe}"> to <Route path="${oe==="/"?"*":`${oe}/*`}">.`)}let I=iA(),k;if(e){let oe=typeof e=="string"?jv(e):e;yl(x==="/"||((ee=oe.pathname)==null?void 0:ee.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${oe.pathname}" was given in the \`location\` prop.`),k=oe}else k=I;let Z=k.pathname||"/",$=Z;if(x!=="/"){let oe=x.replace(/^\//,"").split("/");$="/"+Z.replace(/^\//,"").split("/").slice(oe.length).join("/")}let H=!l&&a&&a.matches&&a.matches.length>0?a.matches:G$(t,{pathname:$});Kp(N||H!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Kp(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=sie(H&&H.map(oe=>Object.assign({},oe,{params:Object.assign({},v,oe.params),pathname:Pg([x,i.encodeLocation?i.encodeLocation(oe.pathname).pathname:oe.pathname]),pathnameBase:oe.pathnameBase==="/"?x:Pg([x,i.encodeLocation?i.encodeLocation(oe.pathnameBase).pathname:oe.pathnameBase])})),c,a,r);return e&&W?ie.createElement(BT.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},W):W}function aie(){let t=die(),e=Wne(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=ie.createElement(ie.Fragment,null,ie.createElement("p",null," Hey developer "),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:l},"ErrorBoundary")," or"," ",ie.createElement("code",{style:l},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),a?ie.createElement("pre",{style:i},a):null,c)}var rie=ie.createElement(aie,null),nie=class extends ie.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?ie.createElement(Bg.Provider,{value:this.props.routeContext},ie.createElement(p3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iie({routeContext:t,match:e,children:a}){let r=ie.useContext(o1);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(Bg.Provider,{value:t},a)}function sie(t,e=[],a=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,l=a==null?void 0:a.errors;if(l!=null){let v=i.findIndex(R=>R.route.id&&(l==null?void 0:l[R.route.id])!==void 0);yl(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,v+1))}let c=!1,n=-1;if(a)for(let v=0;v<i.length;v++){let R=i[v];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(n=v),R.route.id){let{loaderData:x,errors:N}=a,I=R.route.loader&&!x.hasOwnProperty(R.route.id)&&(!N||N[R.route.id]===void 0);if(R.route.lazy||I){c=!0,n>=0?i=i.slice(0,n+1):i=[i[0]];break}}}return i.reduceRight((v,R,x)=>{let N,I=!1,k=null,Z=null;a&&(N=l&&R.route.id?l[R.route.id]:void 0,k=R.route.errorElement||rie,c&&(n<0&&x===0?(Q$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,Z=null):n===x&&(I=!0,Z=R.route.hydrateFallbackElement||null)));let $=e.concat(i.slice(0,x+1)),H=()=>{let W;return N?W=k:I?W=Z:R.route.Component?W=ie.createElement(R.route.Component,null):R.route.element?W=R.route.element:W=v,ie.createElement(iie,{match:R,routeContext:{outlet:v,matches:$,isDataRoute:a!=null},children:W})};return a&&(R.route.ErrorBoundary||R.route.errorElement||x===0)?ie.createElement(nie,{location:a.location,revalidation:a.revalidation,component:k,error:N,children:H(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):H()},null)}function g3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oie(t){let e=ie.useContext(o1);return yl(e,g3(t)),e}function lie(t){let e=ie.useContext(x2);return yl(e,g3(t)),e}function uie(t){let e=ie.useContext(Bg);return yl(e,g3(t)),e}function y3(t){let e=uie(t),a=e.matches[e.matches.length-1];return yl(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function cie(){return y3("useRouteId")}function die(){var r;let t=ie.useContext(p3),e=lie("useRouteError"),a=y3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[a]}function hie(){let{router:t}=oie("useNavigate"),e=y3("useNavigate"),a=ie.useRef(!1);return X$(()=>{a.current=!0}),ie.useCallback(async(i,l={})=>{Kp(a.current,Y$),a.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...l}))},[t,e])}var O6={};function Q$(t,e,a){!e&&!O6[t]&&(O6[t]=!0,Kp(!1,a))}ie.memo(fie);function fie({routes:t,future:e,state:a}){return J$(t,void 0,a,e)}function Xf(t){yl(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pie({basename:t="/",children:e=null,location:a,navigationType:r="POP",navigator:i,static:l=!1}){yl(!jT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),n=ie.useMemo(()=>({basename:c,navigator:i,static:l,future:{}}),[c,i,l]);typeof a=="string"&&(a=jv(a));let{pathname:v="/",search:R="",hash:x="",state:N=null,key:I="default"}=a,k=ie.useMemo(()=>{let Z=Vg(v,c);return Z==null?null:{location:{pathname:Z,search:R,hash:x,state:N,key:I},navigationType:r}},[c,v,R,x,N,I,r]);return Kp(k!=null,`<Router basename="${c}"> is not able to match the URL "${v}${R}${x}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:ie.createElement(Ym.Provider,{value:n},ie.createElement(BT.Provider,{children:e,value:k}))}function mie({children:t,location:e}){return tie(M5(t),e)}function M5(t,e=[]){let a=[];return ie.Children.forEach(t,(r,i)=>{if(!ie.isValidElement(r))return;let l=[...e,i];if(r.type===ie.Fragment){a.push.apply(a,M5(r.props.children,l));return}yl(r.type===Xf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yl(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=M5(r.props.children,l)),a.push(c)}),a}var pb="get",mb="application/x-www-form-urlencoded";function P2(t){return t!=null&&typeof t.tagName=="string"}function gie(t){return P2(t)&&t.tagName.toLowerCase()==="button"}function yie(t){return P2(t)&&t.tagName.toLowerCase()==="form"}function Aie(t){return P2(t)&&t.tagName.toLowerCase()==="input"}function vie(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _ie(t,e){return t.button===0&&(!e||e==="_self")&&!vie(t)}var MS=null;function wie(){if(MS===null)try{new FormData(document.createElement("form"),0),MS=!1}catch{MS=!0}return MS}var Rie=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wN(t){return t!=null&&!Rie.has(t)?(Kp(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mb}"`),null):t}function Tie(t,e){let a,r,i,l,c;if(yie(t)){let n=t.getAttribute("action");r=n?Vg(n,e):null,a=t.getAttribute("method")||pb,i=wN(t.getAttribute("enctype"))||mb,l=new FormData(t)}else if(gie(t)||Aie(t)&&(t.type==="submit"||t.type==="image")){let n=t.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=t.getAttribute("formaction")||n.getAttribute("action");if(r=v?Vg(v,e):null,a=t.getAttribute("formmethod")||n.getAttribute("method")||pb,i=wN(t.getAttribute("formenctype"))||wN(n.getAttribute("enctype"))||mb,l=new FormData(n,t),!wie()){let{name:R,type:x,value:N}=t;if(x==="image"){let I=R?`${R}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else R&&l.append(R,N)}}else{if(P2(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=pb,r=null,i=mb,c=t}return l&&i==="text/plain"&&(c=l,l=void 0),{action:r,method:a.toLowerCase(),encType:i,formData:l,body:c}}function A3(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Cie(t,e){if(t.id in e)return e[t.id];try{let a=await import(t.module);return e[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Sie(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function bie(t,e,a){let r=await Promise.all(t.map(async i=>{let l=e.routes[i.route.id];if(l){let c=await Cie(l,a);return c.links?c.links():[]}return[]}));return Nie(r.flat(1).filter(Sie).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function V6(t,e,a,r,i,l){let c=(v,R)=>a[R]?v.route.id!==a[R].route.id:!0,n=(v,R)=>{var x;return a[R].pathname!==v.pathname||((x=a[R].route.path)==null?void 0:x.endsWith("*"))&&a[R].params["*"]!==v.params["*"]};return l==="assets"?e.filter((v,R)=>c(v,R)||n(v,R)):l==="data"?e.filter((v,R)=>{var N;let x=r.routes[v.route.id];if(!x||!x.hasLoader)return!1;if(c(v,R)||n(v,R))return!0;if(v.route.shouldRevalidate){let I=v.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((N=a[0])==null?void 0:N.params)||{},nextUrl:new URL(t,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function xie(t,e,{includeHydrateFallback:a}={}){return Pie(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),a&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function Pie(t){return[...new Set(t)]}function Eie(t){let e={},a=Object.keys(t).sort();for(let r of a)e[r]=t[r];return e}function Nie(t,e){let a=new Set;return new Set(e),t.reduce((r,i)=>{let l=JSON.stringify(Eie(i));return a.has(l)||(a.add(l),r.push({key:l,link:i})),r},[])}function Oie(t,e){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname="_root.data":e&&Vg(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function eK(){let t=ie.useContext(o1);return A3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Vie(){let t=ie.useContext(x2);return A3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var v3=ie.createContext(void 0);v3.displayName="FrameworkContext";function tK(){let t=ie.useContext(v3);return A3(t,"You must render this element inside a <HydratedRouter> element"),t}function zie(t,e){let a=ie.useContext(v3),[r,i]=ie.useState(!1),[l,c]=ie.useState(!1),{onFocus:n,onBlur:v,onMouseEnter:R,onMouseLeave:x,onTouchStart:N}=e,I=ie.useRef(null);ie.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let $=W=>{W.forEach(ee=>{c(ee.isIntersecting)})},H=new IntersectionObserver($,{threshold:.5});return I.current&&H.observe(I.current),()=>{H.disconnect()}}},[t]),ie.useEffect(()=>{if(r){let $=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout($)}}},[r]);let k=()=>{i(!0)},Z=()=>{i(!1),c(!1)};return a?t!=="intent"?[l,I,{}]:[l,I,{onFocus:Fw(n,k),onBlur:Fw(v,Z),onMouseEnter:Fw(R,k),onMouseLeave:Fw(x,Z),onTouchStart:Fw(N,k)}]:[!1,I,{}]}function Fw(t,e){return a=>{t&&t(a),a.defaultPrevented||e(a)}}function Die({page:t,...e}){let{router:a}=eK(),r=ie.useMemo(()=>G$(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?ie.createElement(Iie,{page:t,matches:r,...e}):null}function Mie(t){let{manifest:e,routeModules:a}=tK(),[r,i]=ie.useState([]);return ie.useEffect(()=>{let l=!1;return bie(t,e,a).then(c=>{l||i(c)}),()=>{l=!0}},[t,e,a]),r}function Iie({page:t,matches:e,...a}){let r=iA(),{manifest:i,routeModules:l}=tK(),{basename:c}=eK(),{loaderData:n,matches:v}=Vie(),R=ie.useMemo(()=>V6(t,e,v,i,r,"data"),[t,e,v,i,r]),x=ie.useMemo(()=>V6(t,e,v,i,r,"assets"),[t,e,v,i,r]),N=ie.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let Z=new Set,$=!1;if(e.forEach(W=>{var oe;let ee=i.routes[W.route.id];!ee||!ee.hasLoader||(!R.some(pe=>pe.route.id===W.route.id)&&W.route.id in n&&((oe=l[W.route.id])!=null&&oe.shouldRevalidate)||ee.hasClientLoader?$=!0:Z.add(W.route.id))}),Z.size===0)return[];let H=Oie(t,c);return $&&Z.size>0&&H.searchParams.set("_routes",e.filter(W=>Z.has(W.route.id)).map(W=>W.route.id).join(",")),[H.pathname+H.search]},[c,n,r,i,R,e,t,l]),I=ie.useMemo(()=>xie(x,i),[x,i]),k=Mie(x);return ie.createElement(ie.Fragment,null,N.map(Z=>ie.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...a})),I.map(Z=>ie.createElement("link",{key:Z,rel:"modulepreload",href:Z,...a})),k.map(({key:Z,link:$})=>ie.createElement("link",{key:Z,...$})))}function Lie(...t){return e=>{t.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var aK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aK&&(window.__reactRouterVersion="7.3.0")}catch{}function Fie({basename:t,children:e,window:a}){let r=ie.useRef();r.current==null&&(r.current=xne({window:a,v5Compat:!0}));let i=r.current,[l,c]=ie.useState({action:i.action,location:i.location}),n=ie.useCallback(v=>{ie.startTransition(()=>c(v))},[c]);return ie.useLayoutEffect(()=>i.listen(n),[i,n]),ie.createElement(pie,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:i})}var rK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nK=ie.forwardRef(function({onClick:e,discover:a="render",prefetch:r="none",relative:i,reloadDocument:l,replace:c,state:n,target:v,to:R,preventScrollReset:x,viewTransition:N,...I},k){let{basename:Z}=ie.useContext(Ym),$=typeof R=="string"&&rK.test(R),H,W=!1;if(typeof R=="string"&&$&&(H=R,aK))try{let we=new URL(window.location.href),Ne=R.startsWith("//")?new URL(we.protocol+R):new URL(R),ne=Vg(Ne.pathname,Z);Ne.origin===we.origin&&ne!=null?R=ne+Ne.search+Ne.hash:W=!0}catch{Kp(!1,`<Link to="${R}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=Qne(R,{relative:i}),[oe,pe,le]=zie(r,I),ge=jie(R,{replace:c,state:n,target:v,preventScrollReset:x,relative:i,viewTransition:N});function ue(we){e&&e(we),we.defaultPrevented||ge(we)}let Re=ie.createElement("a",{...I,...le,href:H||ee,onClick:W||l?e:ue,ref:Lie(k,pe),target:v,"data-discover":!$&&a==="render"?"true":void 0});return oe&&!$?ie.createElement(ie.Fragment,null,Re,ie.createElement(Die,{page:ee})):Re});nK.displayName="Link";var kie=ie.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:r="",end:i=!1,style:l,to:c,viewTransition:n,children:v,...R},x){let N=GT(c,{relative:R.relative}),I=iA(),k=ie.useContext(x2),{navigator:Z,basename:$}=ie.useContext(Ym),H=k!=null&&$ie(N)&&n===!0,W=Z.encodeLocation?Z.encodeLocation(N).pathname:N.pathname,ee=I.pathname,oe=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;a||(ee=ee.toLowerCase(),oe=oe?oe.toLowerCase():null,W=W.toLowerCase()),oe&&$&&(oe=Vg(oe,$)||oe);const pe=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let le=ee===W||!i&&ee.startsWith(W)&&ee.charAt(pe)==="/",ge=oe!=null&&(oe===W||!i&&oe.startsWith(W)&&oe.charAt(W.length)==="/"),ue={isActive:le,isPending:ge,isTransitioning:H},Re=le?e:void 0,we;typeof r=="function"?we=r(ue):we=[r,le?"active":null,ge?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let Ne=typeof l=="function"?l(ue):l;return ie.createElement(nK,{...R,"aria-current":Re,className:we,ref:x,style:Ne,to:c,viewTransition:n},typeof v=="function"?v(ue):v)});kie.displayName="NavLink";var Uie=ie.forwardRef(({discover:t="render",fetcherKey:e,navigate:a,reloadDocument:r,replace:i,state:l,method:c=pb,action:n,onSubmit:v,relative:R,preventScrollReset:x,viewTransition:N,...I},k)=>{let Z=qie(),$=Hie(n,{relative:R}),H=c.toLowerCase()==="get"?"get":"post",W=typeof n=="string"&&rK.test(n),ee=oe=>{if(v&&v(oe),oe.defaultPrevented)return;oe.preventDefault();let pe=oe.nativeEvent.submitter,le=(pe==null?void 0:pe.getAttribute("formmethod"))||c;Z(pe||oe.currentTarget,{fetcherKey:e,method:le,navigate:a,replace:i,state:l,relative:R,preventScrollReset:x,viewTransition:N})};return ie.createElement("form",{ref:k,method:H,action:$,onSubmit:r?v:ee,...I,"data-discover":!W&&t==="render"?"true":void 0})});Uie.displayName="Form";function Bie(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iK(t){let e=ie.useContext(o1);return yl(e,Bie(t)),e}function jie(t,{target:e,replace:a,state:r,preventScrollReset:i,relative:l,viewTransition:c}={}){let n=m3(),v=iA(),R=GT(t,{relative:l});return ie.useCallback(x=>{if(_ie(x,e)){x.preventDefault();let N=a!==void 0?a:DR(v)===DR(R);n(t,{replace:N,state:r,preventScrollReset:i,relative:l,viewTransition:c})}},[v,n,R,a,r,e,t,i,l,c])}var Gie=0,Zie=()=>`__${String(++Gie)}__`;function qie(){let{router:t}=iK("useSubmit"),{basename:e}=ie.useContext(Ym),a=cie();return ie.useCallback(async(r,i={})=>{let{action:l,method:c,encType:n,formData:v,body:R}=Tie(r,e);if(i.navigate===!1){let x=i.fetcherKey||Zie();await t.fetch(x,a,i.action||l,{preventScrollReset:i.preventScrollReset,formData:v,body:R,formMethod:i.method||c,formEncType:i.encType||n,flushSync:i.flushSync})}else await t.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:v,body:R,formMethod:i.method||c,formEncType:i.encType||n,replace:i.replace,state:i.state,fromRouteId:a,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,a])}function Hie(t,{relative:e}={}){let{basename:a}=ie.useContext(Ym),r=ie.useContext(Bg);yl(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),l={...GT(t||".",{relative:e})},c=iA();if(t==null){l.search=c.search;let n=new URLSearchParams(l.search),v=n.getAll("index");if(v.some(x=>x==="")){n.delete("index"),v.filter(N=>N).forEach(N=>n.append("index",N));let x=n.toString();l.search=x?`?${x}`:""}}return(!t||t===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:Pg([a,l.pathname])),DR(l)}function $ie(t,e={}){let a=ie.useContext(W$);yl(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=iK("useViewTransitionState"),i=GT(t,{relative:e.relative});if(!a.isTransitioning)return!1;let l=Vg(a.currentLocation.pathname,r)||a.currentLocation.pathname,c=Vg(a.nextLocation.pathname,r)||a.nextLocation.pathname;return Ub(i.pathname,c)!=null||Ub(i.pathname,l)!=null}new TextEncoder;var l1=j$(),z6={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK=function(t){const e=[];let a=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[a++]=i:i<2048?(e[a++]=i>>6|192,e[a++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[a++]=i>>18|240,e[a++]=i>>12&63|128,e[a++]=i>>6&63|128,e[a++]=i&63|128):(e[a++]=i>>12|224,e[a++]=i>>6&63|128,e[a++]=i&63|128)}return e},Kie=function(t){const e=[];let a=0,r=0;for(;a<t.length;){const i=t[a++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const l=t[a++];e[r++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=t[a++],c=t[a++],n=t[a++],v=((i&7)<<18|(l&63)<<12|(c&63)<<6|n&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const l=t[a++],c=t[a++];e[r++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},oK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const l=t[i],c=i+1<t.length,n=c?t[i+1]:0,v=i+2<t.length,R=v?t[i+2]:0,x=l>>2,N=(l&3)<<4|n>>4;let I=(n&15)<<2|R>>6,k=R&63;v||(k=64,c||(I=64)),r.push(a[x],a[N],a[I],a[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Kie(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const a=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const l=a[t.charAt(i++)],n=i<t.length?a[t.charAt(i)]:0;++i;const R=i<t.length?a[t.charAt(i)]:64;++i;const N=i<t.length?a[t.charAt(i)]:64;if(++i,l==null||n==null||R==null||N==null)throw new Wie;const I=l<<2|n>>4;if(r.push(I),R!==64){const k=n<<4&240|R>>2;if(r.push(k),N!==64){const Z=R<<6&192|N;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Wie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yie=function(t){const e=sK(t);return oK.encodeByteArray(e,!0)},Bb=function(t){return Yie(t).replace(/\./g,"")},lK=function(t){try{return oK.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jie=()=>Xie().__FIREBASE_DEFAULTS__,Qie=()=>{if(typeof process>"u"||typeof z6>"u")return;const t=z6.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ese=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lK(t[1]);return e&&JSON.parse(e)},E2=()=>{try{return Jie()||Qie()||ese()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uK=t=>{var e,a;return(a=(e=E2())===null||e===void 0?void 0:e.emulatorHosts)===null||a===void 0?void 0:a[t]},cK=t=>{const e=uK(t);if(!e)return;const a=e.lastIndexOf(":");if(a<=0||a+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(a+1),10);return e[0]==="["?[e.substring(1,a-1),r]:[e.substring(0,a),r]},dK=()=>{var t;return(t=E2())===null||t===void 0?void 0:t.config},hK=t=>{var e;return(e=E2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tse{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}wrapCallback(e){return(a,r)=>{a?this.reject(a):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(a):e(a,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bb(JSON.stringify(a)),Bb(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ase(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xd())}function rse(){var t;const e=(t=E2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nse(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ise(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sse(){const t=xd();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ose(){try{return typeof indexedDB=="object"}catch{return!1}}function lse(){return new Promise((t,e)=>{try{let a=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),a||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{a=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(a){e(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const use="FirebaseError";class Xm extends Error{constructor(e,a,r){super(a),this.code=e,this.customData=r,this.name=use,Object.setPrototypeOf(this,Xm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ZT.prototype.create)}}class ZT{constructor(e,a,r){this.service=e,this.serviceName=a,this.errors=r}create(e,...a){const r=a[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?cse(l,r):"Error",n=`${this.serviceName}: ${c} (${i}).`;return new Xm(i,n,r)}}function cse(t,e){return t.replace(dse,(a,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dse=/\{\$([^}]+)}/g;function hse(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jb(t,e){if(t===e)return!0;const a=Object.keys(t),r=Object.keys(e);for(const i of a){if(!r.includes(i))return!1;const l=t[i],c=e[i];if(D6(l)&&D6(c)){if(!jb(l,c))return!1}else if(l!==c)return!1}for(const i of r)if(!a.includes(i))return!1;return!0}function D6(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){const e=[];for(const[a,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(a)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(a)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iR(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,l]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function sR(t){const e=t.indexOf("?");if(!e)return"";const a=t.indexOf("#",e);return t.substring(e,a>0?a:void 0)}function fse(t,e){const a=new pse(t,e);return a.subscribe.bind(a)}class pse{constructor(e,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(a=>{a.next(e)})}error(e){this.forEachObserver(a=>{a.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,a,r){let i;if(e===void 0&&a===void 0&&r===void 0)throw new Error("Missing Observer.");mse(e,["next","error","complete"])?i=e:i={next:e,error:a,complete:r},i.next===void 0&&(i.next=RN),i.error===void 0&&(i.error=RN),i.complete===void 0&&(i.complete=RN);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,e)}sendOne(e,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{a(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mse(t,e){if(typeof t!="object"||t===null)return!1;for(const a of e)if(a in t&&typeof t[a]=="function")return!0;return!1}function RN(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){return t&&t._delegate?t._delegate:t}class Xy{constructor(e,a,r){this.name=e,this.instanceFactory=a,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gse{constructor(e,a){this.name=e,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const a=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(a)){const r=new tse;if(this.instancesDeferred.set(a,r),this.isInitialized(a)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:a});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(e){var a;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(a=e==null?void 0:e.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ase(e))try{this.getOrInitializeService({instanceIdentifier:iv})}catch{}for(const[a,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(a);try{const l=this.getOrInitializeService({instanceIdentifier:i});r.resolve(l)}catch{}}}}clearInstance(e=iv){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...e.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=iv){return this.instances.has(e)}getOptions(e=iv){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:a={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:a});for(const[l,c]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(l);r===n&&c.resolve(i)}return i}onInit(e,a){var r;const i=this.normalizeInstanceIdentifier(a),l=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,a){const r=this.onInitCallbacks.get(a);if(r)for(const i of r)try{i(e,a)}catch{}}getOrInitializeService({instanceIdentifier:e,options:a={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yse(e),options:a}),this.instances.set(e,r),this.instancesOptions.set(e,a),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=iv){return this.component?this.component.multipleInstances?e:iv:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yse(t){return t===iv?void 0:t}function Ase(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const a=this.getProvider(e.name);if(a.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);a.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const a=new gse(e,this);return this.providers.set(e,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rs;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rs||(Rs={}));const _se={debug:Rs.DEBUG,verbose:Rs.VERBOSE,info:Rs.INFO,warn:Rs.WARN,error:Rs.ERROR,silent:Rs.SILENT},wse=Rs.INFO,Rse={[Rs.DEBUG]:"log",[Rs.VERBOSE]:"log",[Rs.INFO]:"info",[Rs.WARN]:"warn",[Rs.ERROR]:"error"},Tse=(t,e,...a)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Rse[e];if(i)console[i](`[${r}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _3{constructor(e){this.name=e,this._logLevel=wse,this._logHandler=Tse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_se[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rs.DEBUG,...e),this._logHandler(this,Rs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rs.VERBOSE,...e),this._logHandler(this,Rs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rs.INFO,...e),this._logHandler(this,Rs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rs.WARN,...e),this._logHandler(this,Rs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rs.ERROR,...e),this._logHandler(this,Rs.ERROR,...e)}}const Cse=(t,e)=>e.some(a=>t instanceof a);let M6,I6;function Sse(){return M6||(M6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bse(){return I6||(I6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pK=new WeakMap,I5=new WeakMap,mK=new WeakMap,TN=new WeakMap,w3=new WeakMap;function xse(t){const e=new Promise((a,r)=>{const i=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{a(Hy(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(a=>{a instanceof IDBCursor&&pK.set(a,t)}).catch(()=>{}),w3.set(e,t),e}function Pse(t){if(I5.has(t))return;const e=new Promise((a,r)=>{const i=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{a(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});I5.set(t,e)}let L5={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return I5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mK.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Hy(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ese(t){L5=t(L5)}function Nse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const r=t.call(CN(this),e,...a);return mK.set(r,e.sort?e.sort():[e]),Hy(r)}:bse().includes(t)?function(...e){return t.apply(CN(this),e),Hy(pK.get(this))}:function(...e){return Hy(t.apply(CN(this),e))}}function Ose(t){return typeof t=="function"?Nse(t):(t instanceof IDBTransaction&&Pse(t),Cse(t,Sse())?new Proxy(t,L5):t)}function Hy(t){if(t instanceof IDBRequest)return xse(t);if(TN.has(t))return TN.get(t);const e=Ose(t);return e!==t&&(TN.set(t,e),w3.set(e,t)),e}const CN=t=>w3.get(t);function Vse(t,e,{blocked:a,upgrade:r,blocking:i,terminated:l}={}){const c=indexedDB.open(t,e),n=Hy(c);return r&&c.addEventListener("upgradeneeded",v=>{r(Hy(c.result),v.oldVersion,v.newVersion,Hy(c.transaction),v)}),a&&c.addEventListener("blocked",v=>a(v.oldVersion,v.newVersion,v)),n.then(v=>{l&&v.addEventListener("close",()=>l()),i&&v.addEventListener("versionchange",R=>i(R.oldVersion,R.newVersion,R))}).catch(()=>{}),n}const zse=["get","getKey","getAll","getAllKeys","count"],Dse=["put","add","delete","clear"],SN=new Map;function L6(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(SN.get(e))return SN.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,i=Dse.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zse.includes(a)))return;const l=async function(c,...n){const v=this.transaction(c,i?"readwrite":"readonly");let R=v.store;return r&&(R=R.index(n.shift())),(await Promise.all([R[a](...n),i&&v.done]))[0]};return SN.set(e,l),l}Ese(t=>({...t,get:(e,a,r)=>L6(e,a)||t.get(e,a,r),has:(e,a)=>!!L6(e,a)||t.has(e,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(Ise(a)){const r=a.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(a=>a).join(" ")}}function Ise(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const F5="@firebase/app",F6="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new _3("@firebase/app"),Lse="@firebase/app-compat",Fse="@firebase/analytics-compat",kse="@firebase/analytics",Use="@firebase/app-check-compat",Bse="@firebase/app-check",jse="@firebase/auth",Gse="@firebase/auth-compat",Zse="@firebase/database",qse="@firebase/database-compat",Hse="@firebase/functions",$se="@firebase/functions-compat",Kse="@firebase/installations",Wse="@firebase/installations-compat",Yse="@firebase/messaging",Xse="@firebase/messaging-compat",Jse="@firebase/performance",Qse="@firebase/performance-compat",eoe="@firebase/remote-config",toe="@firebase/remote-config-compat",aoe="@firebase/storage",roe="@firebase/storage-compat",noe="@firebase/firestore",ioe="@firebase/firestore-compat",soe="firebase",ooe="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="[DEFAULT]",loe={[F5]:"fire-core",[Lse]:"fire-core-compat",[kse]:"fire-analytics",[Fse]:"fire-analytics-compat",[Bse]:"fire-app-check",[Use]:"fire-app-check-compat",[jse]:"fire-auth",[Gse]:"fire-auth-compat",[Zse]:"fire-rtdb",[qse]:"fire-rtdb-compat",[Hse]:"fire-fn",[$se]:"fire-fn-compat",[Kse]:"fire-iid",[Wse]:"fire-iid-compat",[Yse]:"fire-fcm",[Xse]:"fire-fcm-compat",[Jse]:"fire-perf",[Qse]:"fire-perf-compat",[eoe]:"fire-rc",[toe]:"fire-rc-compat",[aoe]:"fire-gcs",[roe]:"fire-gcs-compat",[noe]:"fire-fst",[ioe]:"fire-fst-compat","fire-js":"fire-js",[soe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new Map,U5=new Map;function uoe(t,e){try{t.container.addComponent(e)}catch(a){Pv.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,a)}}function Ev(t){const e=t.name;if(U5.has(e))return Pv.debug(`There were multiple attempts to register component ${e}.`),!1;U5.set(e,t);for(const a of Gb.values())uoe(a,t);return!0}function N2(t,e){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const coe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},$y=new ZT("app","Firebase",coe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class doe{constructor(e,a,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $y.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=ooe;function gK(t,e={}){let a=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:k5,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $y.create("bad-app-name",{appName:String(i)});if(a||(a=dK()),!a)throw $y.create("no-options");const l=Gb.get(i);if(l){if(jb(a,l.options)&&jb(r,l.config))return l;throw $y.create("duplicate-app",{appName:i})}const c=new vse(i);for(const v of U5.values())c.addComponent(v);const n=new doe(a,r,c);return Gb.set(i,n),n}function R3(t=k5){const e=Gb.get(t);if(!e&&t===k5&&dK())return gK();if(!e)throw $y.create("no-app",{appName:t});return e}function km(t,e,a){var r;let i=(r=loe[t])!==null&&r!==void 0?r:t;a&&(i+=`-${a}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const n=[`Unable to register library "${i}" with version "${e}":`];l&&n.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&n.push("and"),c&&n.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pv.warn(n.join(" "));return}Ev(new Xy(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hoe="firebase-heartbeat-database",foe=1,MR="firebase-heartbeat-store";let bN=null;function yK(){return bN||(bN=Vse(hoe,foe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(MR)}}}).catch(t=>{throw $y.create("idb-open",{originalErrorMessage:t.message})})),bN}async function poe(t){try{return await(await yK()).transaction(MR).objectStore(MR).get(AK(t))}catch(e){if(e instanceof Xm)Pv.warn(e.message);else{const a=$y.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pv.warn(a.message)}}}async function k6(t,e){try{const r=(await yK()).transaction(MR,"readwrite");await r.objectStore(MR).put(e,AK(t)),await r.done}catch(a){if(a instanceof Xm)Pv.warn(a.message);else{const r=$y.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});Pv.warn(r.message)}}}function AK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const moe=1024,goe=30*24*60*60*1e3;class yoe{constructor(e){this.container=e,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new voe(a),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=U6();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=goe}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=U6(),{heartbeatsToSend:a,unsentEntries:r}=Aoe(this._heartbeatsCache.heartbeats),i=Bb(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function U6(){return new Date().toISOString().substring(0,10)}function Aoe(t,e=moe){const a=[];let r=t.slice();for(const i of t){const l=a.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),B6(a)>e){l.dates.pop();break}}else if(a.push({agent:i.agent,dates:[i.date]}),B6(a)>e){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class voe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ose()?lse().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await poe(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return k6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return k6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function B6(t){return Bb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _oe(t){Ev(new Xy("platform-logger",e=>new Mse(e),"PRIVATE")),Ev(new Xy("heartbeat",e=>new yoe(e),"PRIVATE")),km(F5,F6,t),km(F5,F6,"esm2017"),km("fire-js","")}_oe("");var woe="firebase",Roe="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */km(woe,Roe,"app");function T3(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(a[r[i]]=t[r[i]]);return a}function vK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Toe=vK,_K=new ZT("auth","Firebase",vK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new _3("@firebase/auth");function Coe(t,...e){Zb.logLevel<=Rs.WARN&&Zb.warn(`Auth (${Gv}): ${t}`,...e)}function gb(t,...e){Zb.logLevel<=Rs.ERROR&&Zb.error(`Auth (${Gv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,...e){throw C3(t,...e)}function Um(t,...e){return C3(t,...e)}function Soe(t,e,a){const r=Object.assign(Object.assign({},Toe()),{[e]:a});return new ZT("auth","Firebase",r).create(e,{appName:t.name})}function C3(t,...e){if(typeof t!="string"){const a=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(a,...r)}return _K.create(t,...e)}function ii(t,e,...a){if(!t)throw C3(e,...a)}function Rg(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gb(e),new Error(e)}function zg(t,e){t||Rg(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function boe(){return j6()==="http:"||j6()==="https:"}function j6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xoe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(boe()||nse()||"connection"in navigator)?navigator.onLine:!0}function Poe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,a){this.shortDelay=e,this.longDelay=a,zg(a>e,"Short delay should be less than long delay!"),this.isMobile=ase()||ise()}get(){return xoe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t,e){zg(t.emulator,"Emulator should always be set here");const{url:a}=t.emulator;return e?`${a}${e.startsWith("/")?e.slice(1):e}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{static initialize(e,a,r){this.fetchImpl=e,a&&(this.headersImpl=a),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Rg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Rg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Rg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eoe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Noe=new HT(3e4,6e4);function u1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function c1(t,e,a,r,i={}){return RK(t,i,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const n=qT(Object.assign({key:t.config.apiKey},c)).slice(1),v=await t._getAdditionalHeaders();return v["Content-Type"]="application/json",t.languageCode&&(v["X-Firebase-Locale"]=t.languageCode),wK.fetch()(TK(t,t.config.apiHost,a,n),Object.assign({method:e,headers:v,referrerPolicy:"no-referrer"},l))})}async function RK(t,e,a){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Eoe),e);try{const i=new Ooe(t),l=await Promise.race([a(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw IS(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const n=l.ok?c.errorMessage:c.error.message,[v,R]=n.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw IS(t,"credential-already-in-use",c);if(v==="EMAIL_EXISTS")throw IS(t,"email-already-in-use",c);if(v==="USER_DISABLED")throw IS(t,"user-disabled",c);const x=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(R)throw Soe(t,x,R);Wp(t,x)}}catch(i){if(i instanceof Xm)throw i;Wp(t,"network-request-failed",{message:String(i)})}}async function $T(t,e,a,r,i={}){const l=await c1(t,e,a,r,i);return"mfaPendingCredential"in l&&Wp(t,"multi-factor-auth-required",{_serverResponse:l}),l}function TK(t,e,a,r){const i=`${e}${a}?${r}`;return t.config.emulator?S3(t.config,i):`${t.config.apiScheme}://${i}`}class Ooe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((a,r)=>{this.timer=setTimeout(()=>r(Um(this.auth,"network-request-failed")),Noe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function IS(t,e,a){const r={appName:t.name};a.email&&(r.email=a.email),a.phoneNumber&&(r.phoneNumber=a.phoneNumber);const i=Um(t,e,r);return i.customData._tokenResponse=a,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Voe(t,e){return c1(t,"POST","/v1/accounts:delete",e)}async function zoe(t,e){return c1(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Doe(t,e=!1){const a=tl(t),r=await a.getIdToken(e),i=b3(r);ii(i&&i.exp&&i.auth_time&&i.iat,a.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:r,authTime:gR(xN(i.auth_time)),issuedAtTime:gR(xN(i.iat)),expirationTime:gR(xN(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function xN(t){return Number(t)*1e3}function b3(t){const[e,a,r]=t.split(".");if(e===void 0||a===void 0||r===void 0)return gb("JWT malformed, contained fewer than 3 sections"),null;try{const i=lK(a);return i?JSON.parse(i):(gb("Failed to decode base64 JWT payload"),null)}catch(i){return gb("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Moe(t){const e=b3(t);return ii(e,"internal-error"),ii(typeof e.exp<"u","internal-error"),ii(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e,a=!1){if(a)return e;try{return await e}catch(r){throw r instanceof Xm&&Ioe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Ioe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Loe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var a;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const a=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,a){this.createdAt=e,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=gR(this.lastLoginAt),this.creationTime=gR(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(t){var e;const a=t.auth,r=await t.getIdToken(),i=await IR(t,zoe(a,{idToken:r}));ii(i==null?void 0:i.users.length,a,"internal-error");const l=i.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Uoe(l.providerUserInfo):[],n=koe(t.providerData,c),v=t.isAnonymous,R=!(t.email&&l.passwordHash)&&!(n!=null&&n.length),x=v?R:!1,N={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:n,metadata:new CK(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(t,N)}async function Foe(t){const e=tl(t);await qb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function koe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Uoe(t){return t.map(e=>{var{providerId:a}=e,r=T3(e,["providerId"]);return{providerId:a,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Boe(t,e){const a=await RK(t,{},async()=>{const r=qT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=t.config,c=TK(t,i,"/v1/token",`key=${l}`),n=await t._getAdditionalHeaders();return n["Content-Type"]="application/x-www-form-urlencoded",wK.fetch()(c,{method:"POST",headers:n,body:r})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ii(e.idToken,"internal-error"),ii(typeof e.idToken<"u","internal-error"),ii(typeof e.refreshToken<"u","internal-error");const a="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Moe(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,a)}async getToken(e,a=!1){return ii(!this.accessToken||this.refreshToken,e,"user-token-expired"),!a&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,a){const{accessToken:r,refreshToken:i,expiresIn:l}=await Boe(e,a);this.updateTokensAndExpiration(r,i,Number(l))}updateTokensAndExpiration(e,a,r){this.refreshToken=a||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,a){const{refreshToken:r,accessToken:i,expirationTime:l}=a,c=new LR;return r&&(ii(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ii(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(ii(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new LR,this.toJSON())}_performRefresh(){return Rg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){ii(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wv{constructor(e){var{uid:a,auth:r,stsTokenManager:i}=e,l=T3(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Loe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new CK(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const a=await IR(this,this.stsTokenManager.getToken(this.auth,e));return ii(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(e){return Doe(this,e)}reload(){return Foe(this)}_assign(e){this!==e&&(ii(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(a=>Object.assign({},a)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const a=new wv(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(e){ii(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,a=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),a&&await qb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await IR(this,Voe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,a){var r,i,l,c,n,v,R,x;const N=(r=a.displayName)!==null&&r!==void 0?r:void 0,I=(i=a.email)!==null&&i!==void 0?i:void 0,k=(l=a.phoneNumber)!==null&&l!==void 0?l:void 0,Z=(c=a.photoURL)!==null&&c!==void 0?c:void 0,$=(n=a.tenantId)!==null&&n!==void 0?n:void 0,H=(v=a._redirectEventId)!==null&&v!==void 0?v:void 0,W=(R=a.createdAt)!==null&&R!==void 0?R:void 0,ee=(x=a.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:oe,emailVerified:pe,isAnonymous:le,providerData:ge,stsTokenManager:ue}=a;ii(oe&&ue,e,"internal-error");const Re=LR.fromJSON(this.name,ue);ii(typeof oe=="string",e,"internal-error"),Sy(N,e.name),Sy(I,e.name),ii(typeof pe=="boolean",e,"internal-error"),ii(typeof le=="boolean",e,"internal-error"),Sy(k,e.name),Sy(Z,e.name),Sy($,e.name),Sy(H,e.name),Sy(W,e.name),Sy(ee,e.name);const we=new wv({uid:oe,auth:e,email:I,emailVerified:pe,displayName:N,isAnonymous:le,photoURL:Z,phoneNumber:k,tenantId:$,stsTokenManager:Re,createdAt:W,lastLoginAt:ee});return ge&&Array.isArray(ge)&&(we.providerData=ge.map(Ne=>Object.assign({},Ne))),H&&(we._redirectEventId=H),we}static async _fromIdTokenResponse(e,a,r=!1){const i=new LR;i.updateFromServerResponse(a);const l=new wv({uid:a.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qb(l),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new Map;function Tg(t){zg(t instanceof Function,"Expected a class definition");let e=G6.get(t);return e?(zg(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,G6.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,a){this.storage[e]=a}async _get(e){const a=this.storage[e];return a===void 0?null:a}async _remove(e){delete this.storage[e]}_addListener(e,a){}_removeListener(e,a){}}SK.type="NONE";const Z6=SK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t,e,a){return`firebase:${t}:${e}:${a}`}class l_{constructor(e,a,r){this.persistence=e,this.auth=a,this.userKey=r;const{config:i,name:l}=this.auth;this.fullUserKey=yb(this.userKey,i.apiKey,l),this.fullPersistenceKey=yb("persistence",i.apiKey,l),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wv._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,a,r="authUser"){if(!a.length)return new l_(Tg(Z6),e,r);const i=(await Promise.all(a.map(async R=>{if(await R._isAvailable())return R}))).filter(R=>R);let l=i[0]||Tg(Z6);const c=yb(r,e.config.apiKey,e.name);let n=null;for(const R of a)try{const x=await R._get(c);if(x){const N=wv._fromJSON(e,x);R!==l&&(n=N),l=R;break}}catch{}const v=i.filter(R=>R._shouldAllowMigration);return!l._shouldAllowMigration||!v.length?new l_(l,e,r):(l=v[0],n&&await l._set(c,n.toJSON()),await Promise.all(a.map(async R=>{if(R!==l)try{await R._remove(c)}catch{}})),new l_(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PK(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NK(e))return"Blackberry";if(OK(e))return"Webos";if(x3(e))return"Safari";if((e.includes("chrome/")||xK(e))&&!e.includes("edge/"))return"Chrome";if(EK(e))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(a);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bK(t=xd()){return/firefox\//i.test(t)}function x3(t=xd()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xK(t=xd()){return/crios\//i.test(t)}function PK(t=xd()){return/iemobile/i.test(t)}function EK(t=xd()){return/android/i.test(t)}function NK(t=xd()){return/blackberry/i.test(t)}function OK(t=xd()){return/webos/i.test(t)}function O2(t=xd()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function joe(t=xd()){var e;return O2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Goe(){return sse()&&document.documentMode===10}function VK(t=xd()){return O2(t)||EK(t)||OK(t)||NK(t)||/windows phone/i.test(t)||PK(t)}function Zoe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zK(t,e=[]){let a;switch(t){case"Browser":a=q6(xd());break;case"Worker":a=`${q6(xd())}-${t}`;break;default:a=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${a}/JsCore/${Gv}/${r}`}async function DK(t,e){return c1(t,"GET","/v2/recaptchaConfig",u1(t,e))}function H6(t){return t!==void 0&&t.enterprise!==void 0}class MK{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(a=>a.provider==="EMAIL_PASSWORD_PROVIDER"&&a.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qoe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function IK(t){return new Promise((e,a)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const l=Um("internal-error");l.customData=i,a(l)},r.type="text/javascript",r.charset="UTF-8",qoe().appendChild(r)})}function Hoe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $oe="https://www.google.com/recaptcha/enterprise.js?render=",Koe="recaptcha-enterprise",Woe="NO_RECAPTCHA";class LK{constructor(e){this.type=Koe,this.auth=d1(e)}async verify(e="verify",a=!1){async function r(l){if(!a){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,n)=>{DK(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)n(new Error("recaptcha Enterprise site key undefined"));else{const R=new MK(v);return l.tenantId==null?l._agentRecaptchaConfig=R:l._tenantRecaptchaConfigs[l.tenantId]=R,c(R.siteKey)}}).catch(v=>{n(v)})})}function i(l,c,n){const v=window.grecaptcha;H6(v)?v.enterprise.ready(()=>{v.enterprise.execute(l,{action:e}).then(R=>{c(R)}).catch(()=>{c(Woe)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,c)=>{r(this.auth).then(n=>{if(!a&&H6(window.grecaptcha))i(n,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}IK($oe+n).then(()=>{i(n,l,c)}).catch(v=>{c(v)})}}).catch(n=>{c(n)})})}}async function Hb(t,e,a,r=!1){const i=new LK(t);let l;try{l=await i.verify(a)}catch{l=await i.verify(a,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yoe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,a){const r=l=>new Promise((c,n)=>{try{const v=e(l);c(v)}catch(v){n(v)}});r.onAbort=a,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const a=[];try{for(const r of this.queue)await r(e),r.onAbort&&a.push(r.onAbort)}catch(r){a.reverse();for(const i of a)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xoe{constructor(e,a,r,i){this.app=e,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $6(this),this.idTokenSubscription=new $6(this),this.beforeStateQueue=new Yoe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_K,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,a){return a&&(this._popupRedirectResolver=Tg(a)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await l_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var a;const r=await this.assertedPersistence.getCurrentUser();let i=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,n=i==null?void 0:i._redirectEventId,v=await this.tryRedirectSignIn(e);(!c||c===n)&&(v!=null&&v.user)&&(i=v.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ii(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(e){try{await qb(e)}catch(a){if((a==null?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Poe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const a=e?tl(e):null;return a&&ii(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(e,a=!1){if(!this._deleted)return e&&ii(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Tg(e))})}async initializeRecaptchaConfig(){const e=await DK(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new MK(e);this.tenantId==null?this._agentRecaptchaConfig=a:this._tenantRecaptchaConfigs[this.tenantId]=a,a.emailPasswordEnabled&&new LK(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ZT("auth","Firebase",e())}onAuthStateChanged(e,a,r){return this.registerStateListener(this.authStateSubscription,e,a,r)}beforeAuthStateChanged(e,a){return this.beforeStateQueue.pushCallback(e,a)}onIdTokenChanged(e,a,r){return this.registerStateListener(this.idTokenSubscription,e,a,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,a){const r=await this.getOrInitRedirectPersistenceManager(a);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const a=e&&Tg(e)||this._popupRedirectResolver;ii(a,this,"argument-error"),this.redirectPersistenceManager=await l_.create(this,[Tg(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var a,r;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(a=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,a,r,i){if(this._deleted)return()=>{};const l=typeof a=="function"?a:a.next.bind(a),c=this._isInitialized?Promise.resolve():this._initializationPromise;return ii(c,this,"internal-error"),c.then(()=>l(this.currentUser)),typeof a=="function"?e.addObserver(a,r,i):e.addObserver(a)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ii(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(a["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(a["X-Firebase-AppCheck"]=i),a}async _getAppCheckToken(){var e;const a=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return a!=null&&a.error&&Coe(`Error while retrieving App Check token: ${a.error}`),a==null?void 0:a.token}}function d1(t){return tl(t)}class $6{constructor(e){this.auth=e,this.observer=null,this.addObserver=fse(a=>this.observer=a)}get next(){return ii(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Joe(t,e){const a=N2(t,"auth");if(a.isInitialized()){const i=a.getImmediate(),l=a.getOptions();if(jb(l,e??{}))return i;Wp(i,"already-initialized")}return a.initialize({options:e})}function Qoe(t,e){const a=(e==null?void 0:e.persistence)||[],r=(Array.isArray(a)?a:[a]).map(Tg);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ele(t,e,a){const r=d1(t);ii(r._canInitEmulator,r,"emulator-config-failed"),ii(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,l=FK(e),{host:c,port:n}=tle(e),v=n===null?"":`:${n}`;r.config.emulator={url:`${l}//${c}${v}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:n,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})}),ale()}function FK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tle(t){const e=FK(t),a=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!a)return{host:"",port:null};const r=a[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const l=i[1];return{host:l,port:K6(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:K6(c)}}}function K6(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ale(){function t(){const e=document.createElement("p"),a=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,a){this.providerId=e,this.signInMethod=a}toJSON(){return Rg("not implemented")}_getIdTokenResponse(e){return Rg("not implemented")}_linkToIdToken(e,a){return Rg("not implemented")}_getReauthenticationResolver(e){return Rg("not implemented")}}async function rle(t,e){return c1(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e){return $T(t,"POST","/v1/accounts:signInWithPassword",u1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nle(t,e){return $T(t,"POST","/v1/accounts:signInWithEmailLink",u1(t,e))}async function ile(t,e){return $T(t,"POST","/v1/accounts:signInWithEmailLink",u1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends P3{constructor(e,a,r,i=null){super("password",r),this._email=e,this._password=a,this._tenantId=i}static _fromEmailAndPassword(e,a){return new FR(e,a,"password")}static _fromEmailAndCode(e,a,r=null){return new FR(e,a,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e;if(a!=null&&a.email&&(a!=null&&a.password)){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(e){var a;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.emailPasswordEnabled){const i=await Hb(e,r,"signInWithPassword");return PN(e,i)}else return PN(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await Hb(e,r,"signInWithPassword");return PN(e,l)}else return Promise.reject(i)});case"emailLink":return nle(e,{email:this._email,oobCode:this._password});default:Wp(e,"internal-error")}}async _linkToIdToken(e,a){switch(this.signInMethod){case"password":return rle(e,{idToken:a,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ile(e,{idToken:a,email:this._email,oobCode:this._password});default:Wp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u_(t,e){return $T(t,"POST","/v1/accounts:signInWithIdp",u1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sle="http://localhost";class Nv extends P3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const a=new Nv(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(a.idToken=e.idToken),e.accessToken&&(a.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(a.nonce=e.nonce),e.pendingToken&&(a.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(a.accessToken=e.oauthToken,a.secret=e.oauthTokenSecret):Wp("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,l=T3(a,["providerId","signInMethod"]);if(!r||!i)return null;const c=new Nv(r,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const a=this.buildRequest();return u_(e,a)}_linkToIdToken(e,a){const r=this.buildRequest();return r.idToken=a,u_(e,r)}_getReauthenticationResolver(e){const a=this.buildRequest();return a.autoCreate=!1,u_(e,a)}buildRequest(){const e={requestUri:sle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),e.postBody=qT(a)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ole(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lle(t){const e=iR(sR(t)).link,a=e?iR(sR(e)).deep_link_id:null,r=iR(sR(t)).deep_link_id;return(r?iR(sR(r)).link:null)||r||a||e||t}class E3{constructor(e){var a,r,i,l,c,n;const v=iR(sR(e)),R=(a=v.apiKey)!==null&&a!==void 0?a:null,x=(r=v.oobCode)!==null&&r!==void 0?r:null,N=ole((i=v.mode)!==null&&i!==void 0?i:null);ii(R&&x&&N,"argument-error"),this.apiKey=R,this.operation=N,this.code=x,this.continueUrl=(l=v.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=v.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(n=v.tenantId)!==null&&n!==void 0?n:null}static parseLink(e){const a=lle(e);try{return new E3(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.providerId=h1.PROVIDER_ID}static credential(e,a){return FR._fromEmailAndPassword(e,a)}static credentialWithLink(e,a){const r=E3.parseLink(a);return ii(r,"argument-error"),FR._fromEmailAndCode(e,r.code,r.tenantId)}}h1.PROVIDER_ID="password";h1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";h1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends kK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends KT{constructor(){super("facebook.com")}static credential(e){return Nv._fromParams({providerId:Dy.PROVIDER_ID,signInMethod:Dy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dy.credentialFromTaggedObject(e)}static credentialFromError(e){return Dy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dy.credential(e.oauthAccessToken)}catch{return null}}}Dy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends KT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,a){return Nv._fromParams({providerId:My.PROVIDER_ID,signInMethod:My.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:a})}static credentialFromResult(e){return My.credentialFromTaggedObject(e)}static credentialFromError(e){return My.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:a,oauthAccessToken:r}=e;if(!a&&!r)return null;try{return My.credential(a,r)}catch{return null}}}My.GOOGLE_SIGN_IN_METHOD="google.com";My.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy extends KT{constructor(){super("github.com")}static credential(e){return Nv._fromParams({providerId:Iy.PROVIDER_ID,signInMethod:Iy.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Iy.credentialFromTaggedObject(e)}static credentialFromError(e){return Iy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Iy.credential(e.oauthAccessToken)}catch{return null}}}Iy.GITHUB_SIGN_IN_METHOD="github.com";Iy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends KT{constructor(){super("twitter.com")}static credential(e,a){return Nv._fromParams({providerId:Ly.PROVIDER_ID,signInMethod:Ly.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:a})}static credentialFromResult(e){return Ly.credentialFromTaggedObject(e)}static credentialFromError(e){return Ly.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:a,oauthTokenSecret:r}=e;if(!a||!r)return null;try{return Ly.credential(a,r)}catch{return null}}}Ly.TWITTER_SIGN_IN_METHOD="twitter.com";Ly.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e){return $T(t,"POST","/v1/accounts:signUp",u1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,a,r,i=!1){const l=await wv._fromIdTokenResponse(e,r,i),c=W6(r);return new Ov({user:l,providerId:c,_tokenResponse:r,operationType:a})}static async _forOperation(e,a,r){await e._updateTokensIfNecessary(r,!0);const i=W6(r);return new Ov({user:e,providerId:i,_tokenResponse:r,operationType:a})}}function W6(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Xm{constructor(e,a,r,i){var l;super(a.code,a.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$b.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:a.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,a,r,i){return new $b(e,a,r,i)}}function UK(t,e,a,r){return(e==="reauthenticate"?a._getReauthenticationResolver(t):a._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$b._fromErrorAndOperation(t,l,e,r):l})}async function ule(t,e,a=!1){const r=await IR(t,e._linkToIdToken(t.auth,await t.getIdToken()),a);return Ov._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cle(t,e,a=!1){const{auth:r}=t,i="reauthenticate";try{const l=await IR(t,UK(r,i,e,t),a);ii(l.idToken,r,"internal-error");const c=b3(l.idToken);ii(c,r,"internal-error");const{sub:n}=c;return ii(t.uid===n,r,"user-mismatch"),Ov._forOperation(t,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Wp(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BK(t,e,a=!1){const r="signIn",i=await UK(t,r,e),l=await Ov._fromIdTokenResponse(t,r,i);return a||await t._updateCurrentUser(l.user),l}async function dle(t,e){return BK(d1(t),e)}async function hle(t,e,a){var r;const i=d1(t),l={returnSecureToken:!0,email:e,password:a,clientType:"CLIENT_TYPE_WEB"};let c;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const R=await Hb(i,l,"signUpPassword");c=EN(i,R)}else c=EN(i,l).catch(async R=>{if(R.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const x=await Hb(i,l,"signUpPassword");return EN(i,x)}else return Promise.reject(R)});const n=await c.catch(R=>Promise.reject(R)),v=await Ov._fromIdTokenResponse(i,"signIn",n);return await i._updateCurrentUser(v.user),v}function fle(t,e,a){return dle(tl(t),h1.credential(e,a))}function ple(t,e,a,r){return tl(t).onIdTokenChanged(e,a,r)}function mle(t,e,a){return tl(t).beforeAuthStateChanged(e,a)}function gle(t){return tl(t).signOut()}const Kb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e,a){this.storageRetriever=e,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(Kb,"1"),this.storage.removeItem(Kb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,a){return this.storage.setItem(e,JSON.stringify(a)),Promise.resolve()}_get(e){const a=this.storage.getItem(e);return Promise.resolve(a?JSON.parse(a):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yle(){const t=xd();return x3(t)||O2(t)}const Ale=1e3,vle=10;class GK extends jK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,a)=>this.onStorageEvent(e,a),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=yle()&&Zoe(),this.fallbackToPolling=VK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const a of Object.keys(this.listeners)){const r=this.storage.getItem(a),i=this.localCache[a];r!==i&&e(a,i,r)}}onStorageEvent(e,a=!1){if(!e.key){this.forAllChangedKeys((c,n,v)=>{this.notifyListeners(c,v)});return}const r=e.key;if(a?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!a)return}const i=()=>{const c=this.storage.getItem(r);!a&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Goe()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vle):i()}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,a,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:a,newValue:r}),!0)})},Ale)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,a){await super._set(e,a),this.localCache[e]=JSON.stringify(a)}async _get(e){const a=await super._get(e);return this.localCache[e]=JSON.stringify(a),a}async _remove(e){await super._remove(e),delete this.localCache[e]}}GK.type="LOCAL";const _le=GK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK extends jK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,a){}_removeListener(e,a){}}ZK.type="SESSION";const qK=ZK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wle(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const a=this.receivers.find(i=>i.isListeningto(e));if(a)return a;const r=new V2(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const a=e,{eventId:r,eventType:i,data:l}=a.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;a.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const n=Array.from(c).map(async R=>R(a.origin,l)),v=await wle(n);a.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:v})}_subscribe(e,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(a)}_unsubscribe(e,a){this.handlersMap[e]&&a&&this.handlersMap[e].delete(a),(!a||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}V2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t="",e=10){let a="";for(let r=0;r<e;r++)a+=Math.floor(Math.random()*10);return t+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rle{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,a,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((n,v)=>{const R=N3("",20);i.port1.start();const x=setTimeout(()=>{v(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(N){const I=N;if(I.data.eventId===R)switch(I.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),n(I.data.response);break;default:clearTimeout(x),clearTimeout(l),v(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:R,data:a},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){return window}function Tle(t){Bm().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(){return typeof Bm().WorkerGlobalScope<"u"&&typeof Bm().importScripts=="function"}async function Cle(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Sle(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ble(){return HK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K="firebaseLocalStorageDb",xle=1,Wb="firebaseLocalStorage",KK="fbase_key";class WT{constructor(e){this.request=e}toPromise(){return new Promise((e,a)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function z2(t,e){return t.transaction([Wb],e?"readwrite":"readonly").objectStore(Wb)}function Ple(){const t=indexedDB.deleteDatabase($K);return new WT(t).toPromise()}function j5(){const t=indexedDB.open($K,xle);return new Promise((e,a)=>{t.addEventListener("error",()=>{a(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wb,{keyPath:KK})}catch(i){a(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wb)?e(r):(r.close(),await Ple(),e(await j5()))})})}async function Y6(t,e,a){const r=z2(t,!0).put({[KK]:e,value:a});return new WT(r).toPromise()}async function Ele(t,e){const a=z2(t,!1).get(e),r=await new WT(a).toPromise();return r===void 0?null:r.value}function X6(t,e){const a=z2(t,!0).delete(e);return new WT(a).toPromise()}const Nle=800,Ole=3;class WK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await j5(),this.db)}async _withRetries(e){let a=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(a++>Ole)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V2._getInstance(ble()),this.receiver._subscribe("keyChanged",async(e,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(e,a)=>["keyChanged"])}async initializeSender(){var e,a;if(this.activeServiceWorker=await Cle(),!this.activeServiceWorker)return;this.sender=new Rle(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((a=r[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Sle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await j5();return await Y6(e,Kb,"1"),await X6(e,Kb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,a){return this._withPendingWrite(async()=>(await this._withRetries(r=>Y6(r,e,a)),this.localCache[e]=a,this.notifyServiceWorker(e)))}async _get(e){const a=await this._withRetries(r=>Ele(r,e));return this.localCache[e]=a,a}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(a=>X6(a,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=z2(i,!1).getAll();return new WT(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const a=[],r=new Set;for(const{fbase_key:i,value:l}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),a.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),a.push(i));return a}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WK.type="LOCAL";const Vle=WK;new HT(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zle(t,e){return e?Tg(e):(ii(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3 extends P3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return u_(e,this._buildIdpRequest())}_linkToIdToken(e,a){return u_(e,this._buildIdpRequest(a))}_getReauthenticationResolver(e){return u_(e,this._buildIdpRequest())}_buildIdpRequest(e){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(a.idToken=e),a}}function Dle(t){return BK(t.auth,new O3(t),t.bypassAuthState)}function Mle(t){const{auth:e,user:a}=t;return ii(a,e,"internal-error"),cle(a,new O3(t),t.bypassAuthState)}async function Ile(t){const{auth:e,user:a}=t;return ii(a,e,"internal-error"),ule(a,new O3(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(e,a,r,i,l=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(e,a)=>{this.pendingPromise={resolve:e,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:a,sessionId:r,postBody:i,tenantId:l,error:c,type:n}=e;if(c){this.reject(c);return}const v={auth:this.auth,requestUri:a,sessionId:r,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(n)(v))}catch(R){this.reject(R)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dle;case"linkViaPopup":case"linkViaRedirect":return Ile;case"reauthViaPopup":case"reauthViaRedirect":return Mle;default:Wp(this.auth,"internal-error")}}resolve(e){zg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lle=new HT(2e3,1e4);class J0 extends YK{constructor(e,a,r,i,l){super(e,a,i,l),this.provider=r,this.authWindow=null,this.pollId=null,J0.currentPopupAction&&J0.currentPopupAction.cancel(),J0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ii(e,this.auth,"internal-error"),e}async onExecution(){zg(this.filter.length===1,"Popup operations only handle one event");const e=N3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(Um(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Um(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,J0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var a,r;if(!((r=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Um(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lle.get())};e()}}J0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fle="pendingRedirect",Ab=new Map;class kle extends YK{constructor(e,a,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,r),this.eventId=null}async execute(){let e=Ab.get(this.auth._key());if(!e){try{const r=await Ule(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(a){e=()=>Promise.reject(a)}Ab.set(this.auth._key(),e)}return this.bypassAuthState||Ab.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const a=await this.auth._redirectUserForId(e.eventId);if(a)return this.user=a,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ule(t,e){const a=Gle(e),r=jle(t);if(!await r._isAvailable())return!1;const i=await r._get(a)==="true";return await r._remove(a),i}function Ble(t,e){Ab.set(t._key(),e)}function jle(t){return Tg(t._redirectPersistence)}function Gle(t){return yb(Fle,t.config.apiKey,t.name)}async function Zle(t,e,a=!1){const r=d1(t),i=zle(r,e),c=await new kle(r,i,a).execute();return c&&!a&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qle=10*60*1e3;class Hle{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let a=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(a=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$le(e)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=e,a=!0)),a}sendToConsumer(e,a){var r;if(e.error&&!XK(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";a.onError(Um(this.auth,i))}else a.onAuthEvent(e)}isEventForConsumer(e,a){const r=a.eventId===null||!!e.eventId&&e.eventId===a.eventId;return a.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qle&&this.cachedEventUids.clear(),this.cachedEventUids.has(J6(e))}saveEventToCache(e){this.cachedEventUids.add(J6(e)),this.lastProcessedEventTime=Date.now()}}function J6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XK({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $le(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XK(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kle(t,e={}){return c1(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yle=/^https?/;async function Xle(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Kle(t);for(const a of e)try{if(Jle(a))return}catch{}Wp(t,"unauthorized-domain")}function Jle(t){const e=B5(),{protocol:a,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?a==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):a==="chrome-extension:"&&c.hostname===r}if(!Yle.test(a))return!1;if(Wle.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qle=new HT(3e4,6e4);function Q6(){const t=Bm().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let a=0;a<t.CP.length;a++)t.CP[a]=null}}function eue(t){return new Promise((e,a)=>{var r,i,l;function c(){Q6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q6(),a(Um(t,"network-request-failed"))},timeout:Qle.get()})}if(!((i=(r=Bm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=Bm().gapi)===null||l===void 0)&&l.load)c();else{const n=Hoe("iframefcb");return Bm()[n]=()=>{gapi.load?c():a(Um(t,"network-request-failed"))},IK(`https://apis.google.com/js/api.js?onload=${n}`).catch(v=>a(v))}}).catch(e=>{throw vb=null,e})}let vb=null;function tue(t){return vb=vb||eue(t),vb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aue=new HT(5e3,15e3),rue="__/auth/iframe",nue="emulator/auth/iframe",iue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oue(t){const e=t.config;ii(e.authDomain,t,"auth-domain-config-required");const a=e.emulator?S3(e,nue):`https://${t.config.authDomain}/${rue}`,r={apiKey:e.apiKey,appName:t.name,v:Gv},i=sue.get(t.config.apiHost);i&&(r.eid=i);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${a}?${qT(r).slice(1)}`}async function lue(t){const e=await tue(t),a=Bm().gapi;return ii(a,t,"internal-error"),e.open({where:document.body,url:oue(t),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iue,dontclear:!0},r=>new Promise(async(i,l)=>{await r.restyle({setHideOnLeave:!1});const c=Um(t,"network-request-failed"),n=Bm().setTimeout(()=>{l(c)},aue.get());function v(){Bm().clearTimeout(n),i(r)}r.ping(v).then(v,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cue=500,due=600,hue="_blank",fue="http://localhost";class eU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pue(t,e,a,r=cue,i=due){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let n="";const v=Object.assign(Object.assign({},uue),{width:r.toString(),height:i.toString(),top:l,left:c}),R=xd().toLowerCase();a&&(n=xK(R)?hue:a),bK(R)&&(e=e||fue,v.scrollbars="yes");const x=Object.entries(v).reduce((I,[k,Z])=>`${I}${k}=${Z},`,"");if(joe(R)&&n!=="_self")return mue(e||"",n),new eU(null);const N=window.open(e||"",n,x);ii(N,t,"popup-blocked");try{N.focus()}catch{}return new eU(N)}function mue(t,e){const a=document.createElement("a");a.href=t,a.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gue="__/auth/handler",yue="emulator/auth/handler",Aue=encodeURIComponent("fac");async function tU(t,e,a,r,i,l){ii(t.config.authDomain,t,"auth-domain-config-required"),ii(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:a,redirectUrl:r,v:Gv,eventId:i};if(e instanceof kK){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",hse(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,N]of Object.entries({}))c[x]=N}if(e instanceof KT){const x=e.getScopes().filter(N=>N!=="");x.length>0&&(c.scopes=x.join(","))}t.tenantId&&(c.tid=t.tenantId);const n=c;for(const x of Object.keys(n))n[x]===void 0&&delete n[x];const v=await t._getAppCheckToken(),R=v?`#${Aue}=${encodeURIComponent(v)}`:"";return`${vue(t)}?${qT(n).slice(1)}${R}`}function vue({config:t}){return t.emulator?S3(t,yue):`https://${t.authDomain}/${gue}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="webStorageSupport";class _ue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qK,this._completeRedirectFn=Zle,this._overrideRedirectResult=Ble}async _openPopup(e,a,r,i){var l;zg((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await tU(e,a,r,B5(),i);return pue(e,c,N3())}async _openRedirect(e,a,r,i){await this._originValidation(e);const l=await tU(e,a,r,B5(),i);return Tle(l),new Promise(()=>{})}_initialize(e){const a=e._key();if(this.eventManagers[a]){const{manager:i,promise:l}=this.eventManagers[a];return i?Promise.resolve(i):(zg(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[a]={promise:r},r.catch(()=>{delete this.eventManagers[a]}),r}async initAndGetManager(e){const a=await lue(e),r=new Hle(e);return a.register("authEvent",i=>(ii(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=a,r}_isIframeWebStorageSupported(e,a){this.iframes[e._key()].send(NN,{type:NN},i=>{var l;const c=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[NN];c!==void 0&&a(!!c),Wp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const a=e._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=Xle(e)),this.originValidationPromises[a]}get _shouldInitProactively(){return VK()||x3()||O2()}}const wue=_ue;var aU="@firebase/auth",rU="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rue{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const a=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,a),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const a=this.internalListeners.get(e);a&&(this.internalListeners.delete(e),a(),this.updateProactiveRefresh())}assertAuthConfigured(){ii(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tue(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Cue(t){Ev(new Xy("auth",(e,{options:a})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:n}=r.options;ii(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:c,authDomain:n,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zK(t)},R=new Xoe(r,i,l,v);return Qoe(R,a),R},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,a,r)=>{e.getProvider("auth-internal").initialize()})),Ev(new Xy("auth-internal",e=>{const a=d1(e.getProvider("auth").getImmediate());return(r=>new Rue(r))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),km(aU,rU,Tue(t)),km(aU,rU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sue=5*60,bue=hK("authIdTokenMaxAge")||Sue;let nU=null;const xue=t=>async e=>{const a=e&&await e.getIdTokenResult(),r=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(r&&r>bue)return;const i=a==null?void 0:a.token;nU!==i&&(nU=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function V3(t=R3()){const e=N2(t,"auth");if(e.isInitialized())return e.getImmediate();const a=Joe(t,{popupRedirectResolver:wue,persistence:[Vle,_le,qK]}),r=hK("authTokenSyncURL");if(r){const l=xue(r);mle(a,l,()=>l(a.currentUser)),ple(a,c=>l(c))}const i=uK("auth");return i&&ele(a,`http://${i}`),a}Cue("Browser");var Pue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kr,z3=z3||{},hi=Pue||self;function D2(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function M2(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Eue(t,e,a){return t.call.apply(t.bind,arguments)}function Nue(t,e,a){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Td(t,e,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Td=Eue:Td=Nue,Td.apply(null,arguments)}function LS(t,e){var a=Array.prototype.slice.call(arguments,1);return function(){var r=a.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function hc(t,e){function a(){}a.prototype=e.prototype,t.$=e.prototype,t.prototype=new a,t.prototype.constructor=t,t.ac=function(r,i,l){for(var c=Array(arguments.length-2),n=2;n<arguments.length;n++)c[n-2]=arguments[n];return e.prototype[i].apply(r,c)}}function sA(){this.s=this.s,this.o=this.o}var Oue=0;sA.prototype.s=!1;sA.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Oue!=0)};sA.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const JK=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let a=0;a<t.length;a++)if(a in t&&t[a]===e)return a;return-1};function D3(t){const e=t.length;if(0<e){const a=Array(e);for(let r=0;r<e;r++)a[r]=t[r];return a}return[]}function iU(t,e){for(let a=1;a<arguments.length;a++){const r=arguments[a];if(D2(r)){const i=t.length||0,l=r.length||0;t.length=i+l;for(let c=0;c<l;c++)t[i+c]=r[c]}else t.push(r)}}function Cd(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Cd.prototype.h=function(){this.defaultPrevented=!0};var Vue=function(){if(!hi.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{hi.addEventListener("test",()=>{},e),hi.removeEventListener("test",()=>{},e)}catch{}return t}();function kR(t){return/^[\s\xa0]*$/.test(t)}function I2(){var t=hi.navigator;return t&&(t=t.userAgent)?t:""}function Vm(t){return I2().indexOf(t)!=-1}function M3(t){return M3[" "](t),t}M3[" "]=function(){};function zue(t,e){var a=bce;return Object.prototype.hasOwnProperty.call(a,t)?a[t]:a[t]=e(t)}var Due=Vm("Opera"),T_=Vm("Trident")||Vm("MSIE"),QK=Vm("Edge"),G5=QK||T_,eW=Vm("Gecko")&&!(I2().toLowerCase().indexOf("webkit")!=-1&&!Vm("Edge"))&&!(Vm("Trident")||Vm("MSIE"))&&!Vm("Edge"),Mue=I2().toLowerCase().indexOf("webkit")!=-1&&!Vm("Edge");function tW(){var t=hi.document;return t?t.documentMode:void 0}var Z5;e:{var ON="",VN=function(){var t=I2();if(eW)return/rv:([^\);]+)(\)|;)/.exec(t);if(QK)return/Edge\/([\d\.]+)/.exec(t);if(T_)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Mue)return/WebKit\/(\S+)/.exec(t);if(Due)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(VN&&(ON=VN?VN[1]:""),T_){var zN=tW();if(zN!=null&&zN>parseFloat(ON)){Z5=String(zN);break e}}Z5=ON}var q5;if(hi.document&&T_){var sU=tW();q5=sU||parseInt(Z5,10)||void 0}else q5=void 0;var Iue=q5;function UR(t,e){if(Cd.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(eW){e:{try{M3(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else a=="mouseover"?e=t.fromElement:a=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Lue[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&UR.$.h.call(this)}}hc(UR,Cd);var Lue={2:"touch",3:"pen",4:"mouse"};UR.prototype.h=function(){UR.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var L2="closure_listenable_"+(1e6*Math.random()|0),Fue=0;function kue(t,e,a,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=a,this.capture=!!r,this.la=i,this.key=++Fue,this.fa=this.ia=!1}function F2(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function I3(t,e,a){for(const r in t)e.call(a,t[r],r,t)}function Uue(t,e){for(const a in t)e.call(void 0,t[a],a,t)}function aW(t){const e={};for(const a in t)e[a]=t[a];return e}const oU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rW(t,e){let a,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(a in r)t[a]=r[a];for(let l=0;l<oU.length;l++)a=oU[l],Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}}function k2(t){this.src=t,this.g={},this.h=0}k2.prototype.add=function(t,e,a,r,i){var l=t.toString();t=this.g[l],t||(t=this.g[l]=[],this.h++);var c=$5(t,e,r,i);return-1<c?(e=t[c],a||(e.ia=!1)):(e=new kue(e,this.src,l,!!r,i),e.ia=a,t.push(e)),e};function H5(t,e){var a=e.type;if(a in t.g){var r=t.g[a],i=JK(r,e),l;(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(F2(e),t.g[a].length==0&&(delete t.g[a],t.h--))}}function $5(t,e,a,r){for(var i=0;i<t.length;++i){var l=t[i];if(!l.fa&&l.listener==e&&l.capture==!!a&&l.la==r)return i}return-1}var L3="closure_lm_"+(1e6*Math.random()|0),DN={};function nW(t,e,a,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)nW(t,e[l],a,r,i);return null}return a=oW(a),t&&t[L2]?t.O(e,a,M2(r)?!!r.capture:!1,i):Bue(t,e,a,!1,r,i)}function Bue(t,e,a,r,i,l){if(!e)throw Error("Invalid event type");var c=M2(i)?!!i.capture:!!i,n=k3(t);if(n||(t[L3]=n=new k2(t)),a=n.add(e,a,r,c,l),a.proxy)return a;if(r=jue(),a.proxy=r,r.src=t,r.listener=a,t.addEventListener)Vue||(i=c),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sW(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return a}function jue(){function t(a){return e.call(t.src,t.listener,a)}const e=Gue;return t}function iW(t,e,a,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)iW(t,e[l],a,r,i);else r=M2(r)?!!r.capture:!!r,a=oW(a),t&&t[L2]?(t=t.i,e=String(e).toString(),e in t.g&&(l=t.g[e],a=$5(l,a,r,i),-1<a&&(F2(l[a]),Array.prototype.splice.call(l,a,1),l.length==0&&(delete t.g[e],t.h--)))):t&&(t=k3(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$5(e,a,r,i)),(a=-1<t?e[t]:null)&&F3(a))}function F3(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[L2])H5(e.i,t);else{var a=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(a,r,t.capture):e.detachEvent?e.detachEvent(sW(a),r):e.addListener&&e.removeListener&&e.removeListener(r),(a=k3(e))?(H5(a,t),a.h==0&&(a.src=null,e[L3]=null)):F2(t)}}}function sW(t){return t in DN?DN[t]:DN[t]="on"+t}function Gue(t,e){if(t.fa)t=!0;else{e=new UR(e,this);var a=t.listener,r=t.la||t.src;t.ia&&F3(t),t=a.call(r,e)}return t}function k3(t){return t=t[L3],t instanceof k2?t:null}var MN="__closure_events_fn_"+(1e9*Math.random()>>>0);function oW(t){return typeof t=="function"?t:(t[MN]||(t[MN]=function(e){return t.handleEvent(e)}),t[MN])}function dc(){sA.call(this),this.i=new k2(this),this.S=this,this.J=null}hc(dc,sA);dc.prototype[L2]=!0;dc.prototype.removeEventListener=function(t,e,a,r){iW(this,t,e,a,r)};function kc(t,e){var a,r=t.J;if(r)for(a=[];r;r=r.J)a.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Cd(e,t);else if(e instanceof Cd)e.target=e.target||t;else{var i=e;e=new Cd(r,t),rW(e,i)}if(i=!0,a)for(var l=a.length-1;0<=l;l--){var c=e.g=a[l];i=FS(c,r,!0,e)&&i}if(c=e.g=t,i=FS(c,r,!0,e)&&i,i=FS(c,r,!1,e)&&i,a)for(l=0;l<a.length;l++)c=e.g=a[l],i=FS(c,r,!1,e)&&i}dc.prototype.N=function(){if(dc.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var a=t.g[e],r=0;r<a.length;r++)F2(a[r]);delete t.g[e],t.h--}}this.J=null};dc.prototype.O=function(t,e,a,r){return this.i.add(String(t),e,!1,a,r)};dc.prototype.P=function(t,e,a,r){return this.i.add(String(t),e,!0,a,r)};function FS(t,e,a,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var c=e[l];if(c&&!c.fa&&c.capture==a){var n=c.listener,v=c.la||c.src;c.ia&&H5(t.i,c),i=n.call(v,r)!==!1&&i}}return i&&!r.defaultPrevented}var U3=hi.JSON.stringify;class Zue{constructor(e,a){this.i=e,this.j=a,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function que(){var t=B3;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Hue{constructor(){this.h=this.g=null}add(e,a){const r=lW.get();r.set(e,a),this.h?this.h.next=r:this.g=r,this.h=r}}var lW=new Zue(()=>new $ue,t=>t.reset());class $ue{constructor(){this.next=this.g=this.h=null}set(e,a){this.h=e,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}function Kue(t){var e=1;t=t.split(":");const a=[];for(;0<e&&t.length;)a.push(t.shift()),e--;return t.length&&a.push(t.join(":")),a}function Wue(t){hi.setTimeout(()=>{throw t},0)}let BR,jR=!1,B3=new Hue,uW=()=>{const t=hi.Promise.resolve(void 0);BR=()=>{t.then(Yue)}};var Yue=()=>{for(var t;t=que();){try{t.h.call(t.g)}catch(a){Wue(a)}var e=lW;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}jR=!1};function U2(t,e){dc.call(this),this.h=t||1,this.g=e||hi,this.j=Td(this.qb,this),this.l=Date.now()}hc(U2,dc);Kr=U2.prototype;Kr.ga=!1;Kr.T=null;Kr.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kc(this,"tick"),this.ga&&(j3(this),this.start()))}};Kr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function j3(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Kr.N=function(){U2.$.N.call(this),j3(this),delete this.g};function G3(t,e,a){if(typeof t=="function")a&&(t=Td(t,a));else if(t&&typeof t.handleEvent=="function")t=Td(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:hi.setTimeout(t,e||0)}function cW(t){t.g=G3(()=>{t.g=null,t.i&&(t.i=!1,cW(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Xue extends sA{constructor(e,a){super(),this.m=e,this.j=a,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cW(this)}N(){super.N(),this.g&&(hi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function GR(t){sA.call(this),this.h=t,this.g={}}hc(GR,sA);var lU=[];function dW(t,e,a,r){Array.isArray(a)||(a&&(lU[0]=a.toString()),a=lU);for(var i=0;i<a.length;i++){var l=nW(e,a[i],r||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function hW(t){I3(t.g,function(e,a){this.g.hasOwnProperty(a)&&F3(e)},t),t.g={}}GR.prototype.N=function(){GR.$.N.call(this),hW(this)};GR.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function B2(){this.g=!0}B2.prototype.Ea=function(){this.g=!1};function Jue(t,e,a,r,i,l){t.info(function(){if(t.g)if(l)for(var c="",n=l.split("&"),v=0;v<n.length;v++){var R=n[v].split("=");if(1<R.length){var x=R[0];R=R[1];var N=x.split("_");c=2<=N.length&&N[1]=="type"?c+(x+"="+R+"&"):c+(x+"=redacted&")}}else c=null;else c=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+a+`
`+c})}function Que(t,e,a,r,i,l,c){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+a+`
`+l+" "+c})}function Q0(t,e,a,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+tce(t,a)+(r?" "+r:"")})}function ece(t,e){t.info(function(){return"TIMEOUT: "+e})}B2.prototype.info=function(){};function tce(t,e){if(!t.g)return e;if(!e)return null;try{var a=JSON.parse(e);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var r=a[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if(l!="noop"&&l!="stop"&&l!="close")for(var c=1;c<i.length;c++)i[c]=""}}}}return U3(a)}catch{return e}}var Zv={},uU=null;function j2(){return uU=uU||new dc}Zv.Ta="serverreachability";function fW(t){Cd.call(this,Zv.Ta,t)}hc(fW,Cd);function ZR(t){const e=j2();kc(e,new fW(e))}Zv.STAT_EVENT="statevent";function pW(t,e){Cd.call(this,Zv.STAT_EVENT,t),this.stat=e}hc(pW,Cd);function oh(t){const e=j2();kc(e,new pW(e,t))}Zv.Ua="timingevent";function mW(t,e){Cd.call(this,Zv.Ua,t),this.size=e}hc(mW,Cd);function YT(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return hi.setTimeout(function(){t()},e)}var G2={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gW={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Z3(){}Z3.prototype.h=null;function cU(t){return t.h||(t.h=t.i())}function yW(){}var XT={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function q3(){Cd.call(this,"d")}hc(q3,Cd);function H3(){Cd.call(this,"c")}hc(H3,Cd);var K5;function Z2(){}hc(Z2,Z3);Z2.prototype.g=function(){return new XMLHttpRequest};Z2.prototype.i=function(){return{}};K5=new Z2;function JT(t,e,a,r){this.l=t,this.j=e,this.m=a,this.W=r||1,this.U=new GR(this),this.P=ace,t=G5?125:void 0,this.V=new U2(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new AW}function AW(){this.i=null,this.g="",this.h=!1}var ace=45e3,W5={},Yb={};Kr=JT.prototype;Kr.setTimeout=function(t){this.P=t};function Y5(t,e,a){t.L=1,t.v=H2(Dg(e)),t.s=a,t.S=!0,vW(t,null)}function vW(t,e){t.G=Date.now(),QT(t),t.A=Dg(t.v);var a=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),xW(a.i,"t",r),t.C=0,a=t.l.J,t.h=new AW,t.g=KW(t.l,a?e:null,!t.s),0<t.O&&(t.M=new Xue(Td(t.Pa,t,t.g),t.O)),dW(t.U,t.g,"readystatechange",t.nb),e=t.I?aW(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),ZR(),Jue(t.j,t.u,t.A,t.m,t.W,t.s)}Kr.nb=function(t){t=t.target;const e=this.M;e&&zm(t)==3?e.l():this.Pa(t)};Kr.Pa=function(t){try{if(t==this.g)e:{const x=zm(this.g);var e=this.g.Ia();const N=this.g.da();if(!(3>x)&&(x!=3||G5||this.g&&(this.h.h||this.g.ja()||pU(this.g)))){this.J||x!=4||e==7||(e==8||0>=N?ZR(3):ZR(2)),q2(this);var a=this.g.da();this.ca=a;t:if(_W(this)){var r=pU(this.g);t="";var i=r.length,l=zm(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hv(this),yR(this);var c="";break t}this.h.i=new hi.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=a==200,Que(this.j,this.u,this.A,this.m,this.W,x,a),this.i){if(this.aa&&!this.K){t:{if(this.g){var n,v=this.g;if((n=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kR(n)){var R=n;break t}}R=null}if(a=R)Q0(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,X5(this,a);else{this.i=!1,this.o=3,oh(12),hv(this),yR(this);break e}}this.S?(wW(this,x,c),G5&&this.i&&x==3&&(dW(this.U,this.V,"tick",this.mb),this.V.start())):(Q0(this.j,this.m,c,null),X5(this,c)),x==4&&hv(this),this.i&&!this.J&&(x==4?ZW(this.l,this):(this.i=!1,QT(this)))}else Tce(this.g),a==400&&0<c.indexOf("Unknown SID")?(this.o=3,oh(12)):(this.o=0,oh(13)),hv(this),yR(this)}}}catch{}finally{}};function _W(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function wW(t,e,a){let r=!0,i;for(;!t.J&&t.C<a.length;)if(i=rce(t,a),i==Yb){e==4&&(t.o=4,oh(14),r=!1),Q0(t.j,t.m,null,"[Incomplete Response]");break}else if(i==W5){t.o=4,oh(15),Q0(t.j,t.m,a,"[Invalid Chunk]"),r=!1;break}else Q0(t.j,t.m,i,null),X5(t,i);_W(t)&&i!=Yb&&i!=W5&&(t.h.g="",t.C=0),e!=4||a.length!=0||t.h.h||(t.o=1,oh(16),r=!1),t.i=t.i&&r,r?0<a.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+a.length),J3(e),e.M=!0,oh(11))):(Q0(t.j,t.m,a,"[Invalid Chunked Response]"),hv(t),yR(t))}Kr.mb=function(){if(this.g){var t=zm(this.g),e=this.g.ja();this.C<e.length&&(q2(this),wW(this,t,e),this.i&&t!=4&&QT(this))}};function rce(t,e){var a=t.C,r=e.indexOf(`
`,a);return r==-1?Yb:(a=Number(e.substring(a,r)),isNaN(a)?W5:(r+=1,r+a>e.length?Yb:(e=e.slice(r,r+a),t.C=r+a,e)))}Kr.cancel=function(){this.J=!0,hv(this)};function QT(t){t.Y=Date.now()+t.P,RW(t,t.P)}function RW(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=YT(Td(t.lb,t),e)}function q2(t){t.B&&(hi.clearTimeout(t.B),t.B=null)}Kr.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(ece(this.j,this.A),this.L!=2&&(ZR(),oh(17)),hv(this),this.o=2,yR(this)):RW(this,this.Y-t)};function yR(t){t.l.H==0||t.J||ZW(t.l,t)}function hv(t){q2(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,j3(t.V),hW(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function X5(t,e){try{var a=t.l;if(a.H!=0&&(a.g==t||J5(a.i,t))){if(!t.K&&J5(a.i,t)&&a.H==3){try{var r=a.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!a.u){if(a.g)if(a.g.G+3e3<t.G)Qb(a),W2(a);else break e;X3(a),oh(18)}}else a.Fa=i[1],0<a.Fa-a.V&&37500>i[2]&&a.G&&a.A==0&&!a.v&&(a.v=YT(Td(a.ib,a),6e3));if(1>=NW(a.i)&&a.oa){try{a.oa()}catch{}a.oa=void 0}}else fv(a,11)}else if((t.K||a.g==t)&&Qb(a),!kR(e))for(i=a.Ja.g.parse(e),e=0;e<i.length;e++){let R=i[e];if(a.V=R[0],R=R[1],a.H==2)if(R[0]=="c"){a.K=R[1],a.pa=R[2];const x=R[3];x!=null&&(a.ra=x,a.l.info("VER="+a.ra));const N=R[4];N!=null&&(a.Ga=N,a.l.info("SVER="+a.Ga));const I=R[5];I!=null&&typeof I=="number"&&0<I&&(r=1.5*I,a.L=r,a.l.info("backChannelRequestTimeoutMs_="+r)),r=a;const k=t.g;if(k){const Z=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var l=r.i;l.g||Z.indexOf("spdy")==-1&&Z.indexOf("quic")==-1&&Z.indexOf("h2")==-1||(l.j=l.l,l.g=new Set,l.h&&($3(l,l.h),l.h=null))}if(r.F){const $=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;$&&(r.Da=$,Lo(r.I,r.F,$))}}a.H=3,a.h&&a.h.Ba(),a.ca&&(a.S=Date.now()-t.G,a.l.info("Handshake RTT: "+a.S+"ms")),r=a;var c=t;if(r.wa=$W(r,r.J?r.pa:null,r.Y),c.K){OW(r.i,c);var n=c,v=r.L;v&&n.setTimeout(v),n.B&&(q2(n),QT(n)),r.g=c}else jW(r);0<a.j.length&&Y2(a)}else R[0]!="stop"&&R[0]!="close"||fv(a,7);else a.H==3&&(R[0]=="stop"||R[0]=="close"?R[0]=="stop"?fv(a,7):Y3(a):R[0]!="noop"&&a.h&&a.h.Aa(R),a.A=0)}}ZR(4)}catch{}}function nce(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(D2(t)){for(var e=[],a=t.length,r=0;r<a;r++)e.push(t[r]);return e}e=[],a=0;for(r in t)e[a++]=t[r];return e}function ice(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(D2(t)||typeof t=="string"){var e=[];t=t.length;for(var a=0;a<t;a++)e.push(a);return e}e=[],a=0;for(const r in t)e[a++]=r;return e}}}function TW(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(D2(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var a=ice(t),r=nce(t),i=r.length,l=0;l<i;l++)e.call(void 0,r[l],a&&a[l],t)}var CW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sce(t,e){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var r=t[a].indexOf("="),i=null;if(0<=r){var l=t[a].substring(0,r);i=t[a].substring(r+1)}else l=t[a];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Rv(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Rv){this.h=t.h,Xb(this,t.j),this.s=t.s,this.g=t.g,Jb(this,t.m),this.l=t.l;var e=t.i,a=new qR;a.i=e.i,e.g&&(a.g=new Map(e.g),a.h=e.h),dU(this,a),this.o=t.o}else t&&(e=String(t).match(CW))?(this.h=!1,Xb(this,e[1]||"",!0),this.s=oR(e[2]||""),this.g=oR(e[3]||"",!0),Jb(this,e[4]),this.l=oR(e[5]||"",!0),dU(this,e[6]||"",!0),this.o=oR(e[7]||"")):(this.h=!1,this.i=new qR(null,this.h))}Rv.prototype.toString=function(){var t=[],e=this.j;e&&t.push(lR(e,hU,!0),":");var a=this.g;return(a||e=="file")&&(t.push("//"),(e=this.s)&&t.push(lR(e,hU,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.m,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(lR(a,a.charAt(0)=="/"?uce:lce,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.o)&&t.push("#",lR(a,dce)),t.join("")};function Dg(t){return new Rv(t)}function Xb(t,e,a){t.j=a?oR(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Jb(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function dU(t,e,a){e instanceof qR?(t.i=e,hce(t.i,t.h)):(a||(e=lR(e,cce)),t.i=new qR(e,t.h))}function Lo(t,e,a){t.i.set(e,a)}function H2(t){return Lo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function oR(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function lR(t,e,a){return typeof t=="string"?(t=encodeURI(t).replace(e,oce),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function oce(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var hU=/[#\/\?@]/g,lce=/[#\?:]/g,uce=/[#\?]/g,cce=/[#\?@]/g,dce=/#/g;function qR(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function oA(t){t.g||(t.g=new Map,t.h=0,t.i&&sce(t.i,function(e,a){t.add(decodeURIComponent(e.replace(/\+/g," ")),a)}))}Kr=qR.prototype;Kr.add=function(t,e){oA(this),this.i=null,t=f1(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(e),this.h+=1,this};function SW(t,e){oA(t),e=f1(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function bW(t,e){return oA(t),e=f1(t,e),t.g.has(e)}Kr.forEach=function(t,e){oA(this),this.g.forEach(function(a,r){a.forEach(function(i){t.call(e,i,r,this)},this)},this)};Kr.ta=function(){oA(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),a=[];for(let r=0;r<e.length;r++){const i=t[r];for(let l=0;l<i.length;l++)a.push(e[r])}return a};Kr.Z=function(t){oA(this);let e=[];if(typeof t=="string")bW(this,t)&&(e=e.concat(this.g.get(f1(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)e=e.concat(t[a])}return e};Kr.set=function(t,e){return oA(this),this.i=null,t=f1(this,t),bW(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Kr.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function xW(t,e,a){SW(t,e),0<a.length&&(t.i=null,t.g.set(f1(t,e),D3(a)),t.h+=a.length)}Kr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var a=0;a<e.length;a++){var r=e[a];const l=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=l;c[r]!==""&&(i+="="+encodeURIComponent(String(c[r]))),t.push(i)}}return this.i=t.join("&")};function f1(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function hce(t,e){e&&!t.j&&(oA(t),t.i=null,t.g.forEach(function(a,r){var i=r.toLowerCase();r!=i&&(SW(this,r),xW(this,i,a))},t)),t.j=e}var fce=class{constructor(t,e){this.g=t,this.map=e}};function PW(t){this.l=t||pce,hi.PerformanceNavigationTiming?(t=hi.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(hi.g&&hi.g.Ka&&hi.g.Ka()&&hi.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pce=10;function EW(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function NW(t){return t.h?1:t.g?t.g.size:0}function J5(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function $3(t,e){t.g?t.g.add(e):t.h=e}function OW(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}PW.prototype.cancel=function(){if(this.i=VW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function VW(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const a of t.g.values())e=e.concat(a.F);return e}return D3(t.i)}var mce=class{stringify(t){return hi.JSON.stringify(t,void 0)}parse(t){return hi.JSON.parse(t,void 0)}};function gce(){this.g=new mce}function yce(t,e,a){const r=a||"";try{TW(t,function(i,l){let c=i;M2(i)&&(c=U3(i)),e.push(r+l+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ace(t,e){const a=new B2;if(hi.Image){const r=new Image;r.onload=LS(kS,a,r,"TestLoadImage: loaded",!0,e),r.onerror=LS(kS,a,r,"TestLoadImage: error",!1,e),r.onabort=LS(kS,a,r,"TestLoadImage: abort",!1,e),r.ontimeout=LS(kS,a,r,"TestLoadImage: timeout",!1,e),hi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function kS(t,e,a,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function eC(t){this.l=t.fc||null,this.j=t.ob||!1}hc(eC,Z3);eC.prototype.g=function(){return new $2(this.l,this.j)};eC.prototype.i=function(t){return function(){return t}}({});function $2(t,e){dc.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=K3,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hc($2,dc);var K3=0;Kr=$2.prototype;Kr.open=function(t,e){if(this.readyState!=K3)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,HR(this)};Kr.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||hi).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Kr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tC(this)),this.readyState=K3};Kr.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,HR(this)),this.g&&(this.readyState=3,HR(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof hi.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zW(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function zW(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Kr.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?tC(this):HR(this),this.readyState==3&&zW(this)}};Kr.Za=function(t){this.g&&(this.response=this.responseText=t,tC(this))};Kr.Ya=function(t){this.g&&(this.response=t,tC(this))};Kr.ka=function(){this.g&&tC(this)};function tC(t){t.readyState=4,t.l=null,t.j=null,t.A=null,HR(t)}Kr.setRequestHeader=function(t,e){this.v.append(t,e)};Kr.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Kr.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var a=e.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=e.next();return t.join(`\r
`)};function HR(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty($2.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var vce=hi.JSON.parse;function Nl(t){dc.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=DW,this.L=this.M=!1}hc(Nl,dc);var DW="",_ce=/^https?$/i,wce=["POST","PUT"];Kr=Nl.prototype;Kr.Oa=function(t){this.M=t};Kr.ha=function(t,e,a,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():K5.g(),this.C=this.u?cU(this.u):cU(K5),this.g.onreadystatechange=Td(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(l){fU(this,l);return}if(t=a||"",a=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)a.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const l of r.keys())a.set(l,r.get(l));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(a.keys()).find(l=>l.toLowerCase()=="content-type"),i=hi.FormData&&t instanceof hi.FormData,!(0<=JK(wce,e))||r||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,c]of a)this.g.setRequestHeader(l,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LW(this),0<this.B&&((this.L=Rce(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Td(this.ua,this)):this.A=G3(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){fU(this,l)}};function Rce(t){return T_&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Kr.ua=function(){typeof z3<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kc(this,"timeout"),this.abort(8))};function fU(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,MW(t),K2(t)}function MW(t){t.F||(t.F=!0,kc(t,"complete"),kc(t,"error"))}Kr.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kc(this,"complete"),kc(this,"abort"),K2(this))};Kr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),K2(this,!0)),Nl.$.N.call(this)};Kr.La=function(){this.s||(this.G||this.v||this.l?IW(this):this.kb())};Kr.kb=function(){IW(this)};function IW(t){if(t.h&&typeof z3<"u"&&(!t.C[1]||zm(t)!=4||t.da()!=2)){if(t.v&&zm(t)==4)G3(t.La,0,t);else if(kc(t,"readystatechange"),zm(t)==4){t.h=!1;try{const c=t.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var a;if(!(a=e)){var r;if(r=c===0){var i=String(t.I).match(CW)[1]||null;!i&&hi.self&&hi.self.location&&(i=hi.self.location.protocol.slice(0,-1)),r=!_ce.test(i?i.toLowerCase():"")}a=r}if(a)kc(t,"complete"),kc(t,"success");else{t.m=6;try{var l=2<zm(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.da()+"]",MW(t)}}finally{K2(t)}}}}function K2(t,e){if(t.g){LW(t);const a=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||kc(t,"ready");try{a.onreadystatechange=r}catch{}}}function LW(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(hi.clearTimeout(t.A),t.A=null)}Kr.isActive=function(){return!!this.g};function zm(t){return t.g?t.g.readyState:0}Kr.da=function(){try{return 2<zm(this)?this.g.status:-1}catch{return-1}};Kr.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Kr.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),vce(e)}};function pU(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case DW:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Tce(t){const e={};t=(t.g&&2<=zm(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(kR(t[r]))continue;var a=Kue(t[r]);const i=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();const l=e[i]||[];e[i]=l,l.push(a)}Uue(e,function(r){return r.join(", ")})}Kr.Ia=function(){return this.m};Kr.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function FW(t){let e="";return I3(t,function(a,r){e+=r,e+=":",e+=a,e+=`\r
`}),e}function W3(t,e,a){e:{for(r in a){var r=!1;break e}r=!0}r||(a=FW(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):Lo(t,e,a))}function kw(t,e,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||e}function kW(t){this.Ga=0,this.j=[],this.l=new B2,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=kw("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=kw("baseRetryDelayMs",5e3,t),this.hb=kw("retryDelaySeedMs",1e4,t),this.eb=kw("forwardChannelMaxRetries",2,t),this.xa=kw("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new PW(t&&t.concurrentRequestLimit),this.Ja=new gce,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Kr=kW.prototype;Kr.ra=8;Kr.H=1;function Y3(t){if(UW(t),t.H==3){var e=t.W++,a=Dg(t.I);if(Lo(a,"SID",t.K),Lo(a,"RID",e),Lo(a,"TYPE","terminate"),aC(t,a),e=new JT(t,t.l,e),e.L=2,e.v=H2(Dg(a)),a=!1,hi.navigator&&hi.navigator.sendBeacon)try{a=hi.navigator.sendBeacon(e.v.toString(),"")}catch{}!a&&hi.Image&&(new Image().src=e.v,a=!0),a||(e.g=KW(e.l,null),e.g.ha(e.v)),e.G=Date.now(),QT(e)}HW(t)}function W2(t){t.g&&(J3(t),t.g.cancel(),t.g=null)}function UW(t){W2(t),t.u&&(hi.clearTimeout(t.u),t.u=null),Qb(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&hi.clearTimeout(t.m),t.m=null)}function Y2(t){if(!EW(t.i)&&!t.m){t.m=!0;var e=t.Na;BR||uW(),jR||(BR(),jR=!0),B3.add(e,t),t.C=0}}function Cce(t,e){return NW(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=YT(Td(t.Na,t,e),qW(t,t.C)),t.C++,!0)}Kr.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new JT(this,this.l,t);let l=this.s;if(this.U&&(l?(l=aW(l),rW(l,this.U)):l=this.U),this.o!==null||this.O||(i.I=l,l=null),this.P)e:{for(var e=0,a=0;a<this.j.length;a++){t:{var r=this.j[a];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=a;break e}if(e===4096||a===this.j.length-1){e=a+1;break e}}e=1e3}else e=1e3;e=BW(this,i,e),a=Dg(this.I),Lo(a,"RID",t),Lo(a,"CVER",22),this.F&&Lo(a,"X-HTTP-Session-Id",this.F),aC(this,a),l&&(this.O?e="headers="+encodeURIComponent(String(FW(l)))+"&"+e:this.o&&W3(a,this.o,l)),$3(this.i,i),this.bb&&Lo(a,"TYPE","init"),this.P?(Lo(a,"$req",e),Lo(a,"SID","null"),i.aa=!0,Y5(i,a,null)):Y5(i,a,e),this.H=2}}else this.H==3&&(t?mU(this,t):this.j.length==0||EW(this.i)||mU(this))};function mU(t,e){var a;e?a=e.m:a=t.W++;const r=Dg(t.I);Lo(r,"SID",t.K),Lo(r,"RID",a),Lo(r,"AID",t.V),aC(t,r),t.o&&t.s&&W3(r,t.o,t.s),a=new JT(t,t.l,a,t.C+1),t.o===null&&(a.I=t.s),e&&(t.j=e.F.concat(t.j)),e=BW(t,a,1e3),a.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),$3(t.i,a),Y5(a,r,e)}function aC(t,e){t.na&&I3(t.na,function(a,r){Lo(e,r,a)}),t.h&&TW({},function(a,r){Lo(e,r,a)})}function BW(t,e,a){a=Math.min(t.j.length,a);var r=t.h?Td(t.h.Va,t.h,t):null;e:{var i=t.j;let l=-1;for(;;){const c=["count="+a];l==-1?0<a?(l=i[0].g,c.push("ofs="+l)):l=0:c.push("ofs="+l);let n=!0;for(let v=0;v<a;v++){let R=i[v].g;const x=i[v].map;if(R-=l,0>R)l=Math.max(0,i[v].g-100),n=!1;else try{yce(x,c,"req"+R+"_")}catch{r&&r(x)}}if(n){r=c.join("&");break e}}}return t=t.j.splice(0,a),e.F=t,r}function jW(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;BR||uW(),jR||(BR(),jR=!0),B3.add(e,t),t.A=0}}function X3(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=YT(Td(t.Ma,t),qW(t,t.A)),t.A++,!0)}Kr.Ma=function(){if(this.u=null,GW(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=YT(Td(this.jb,this),t)}};Kr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,oh(10),W2(this),GW(this))};function J3(t){t.B!=null&&(hi.clearTimeout(t.B),t.B=null)}function GW(t){t.g=new JT(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Dg(t.wa);Lo(e,"RID","rpc"),Lo(e,"SID",t.K),Lo(e,"AID",t.V),Lo(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Lo(e,"TO",t.qa),Lo(e,"TYPE","xmlhttp"),aC(t,e),t.o&&t.s&&W3(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var a=t.g;t=t.pa,a.L=1,a.v=H2(Dg(e)),a.s=null,a.S=!0,vW(a,t)}Kr.ib=function(){this.v!=null&&(this.v=null,W2(this),X3(this),oh(19))};function Qb(t){t.v!=null&&(hi.clearTimeout(t.v),t.v=null)}function ZW(t,e){var a=null;if(t.g==e){Qb(t),J3(t),t.g=null;var r=2}else if(J5(t.i,e))a=e.F,OW(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){a=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=j2(),kc(r,new mW(r,a)),Y2(t)}else jW(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&Cce(t,e)||r==2&&X3(t)))switch(a&&0<a.length&&(e=t.i,e.i=e.i.concat(a)),i){case 1:fv(t,5);break;case 4:fv(t,10);break;case 3:fv(t,6);break;default:fv(t,2)}}}function qW(t,e){let a=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(a*=2),a*e}function fv(t,e){if(t.l.info("Error code "+e),e==2){var a=null;t.h&&(a=null);var r=Td(t.pb,t);a||(a=new Rv("//www.google.com/images/cleardot.gif"),hi.location&&hi.location.protocol=="http"||Xb(a,"https"),H2(a)),Ace(a.toString(),r)}else oh(2);t.H=0,t.h&&t.h.za(e),HW(t),UW(t)}Kr.pb=function(t){t?(this.l.info("Successfully pinged google.com"),oh(2)):(this.l.info("Failed to ping google.com"),oh(1))};function HW(t){if(t.H=0,t.ma=[],t.h){const e=VW(t.i);(e.length!=0||t.j.length!=0)&&(iU(t.ma,e),iU(t.ma,t.j),t.i.i.length=0,D3(t.j),t.j.length=0),t.h.ya()}}function $W(t,e,a){var r=a instanceof Rv?Dg(a):new Rv(a);if(r.g!="")e&&(r.g=e+"."+r.g),Jb(r,r.m);else{var i=hi.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var l=new Rv(null);r&&Xb(l,r),e&&(l.g=e),i&&Jb(l,i),a&&(l.l=a),r=l}return a=t.F,e=t.Da,a&&e&&Lo(r,a,e),Lo(r,"VER",t.ra),aC(t,r),r}function KW(t,e,a){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=a&&t.Ha&&!t.va?new Nl(new eC({ob:!0})):new Nl(t.va),e.Oa(t.J),e}Kr.isActive=function(){return!!this.h&&this.h.isActive(this)};function WW(){}Kr=WW.prototype;Kr.Ba=function(){};Kr.Aa=function(){};Kr.za=function(){};Kr.ya=function(){};Kr.isActive=function(){return!0};Kr.Va=function(){};function ex(){if(T_&&!(10<=Number(Iue)))throw Error("Environmental error: no available transport.")}ex.prototype.g=function(t,e){return new Cf(t,e)};function Cf(t,e){dc.call(this),this.g=new kW(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!kR(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kR(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new p1(this)}hc(Cf,dc);Cf.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,a=this.h||void 0;oh(0),t.Y=e,t.na=a||{},t.G=t.aa,t.I=$W(t,null,t.Y),Y2(t)};Cf.prototype.close=function(){Y3(this.g)};Cf.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.v&&(a={},a.__data__=U3(t),t=a);e.j.push(new fce(e.fb++,t)),e.H==3&&Y2(e)};Cf.prototype.N=function(){this.g.h=null,delete this.j,Y3(this.g),delete this.g,Cf.$.N.call(this)};function YW(t){q3.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const a in e){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}hc(YW,q3);function XW(){H3.call(this),this.status=1}hc(XW,H3);function p1(t){this.g=t}hc(p1,WW);p1.prototype.Ba=function(){kc(this.g,"a")};p1.prototype.Aa=function(t){kc(this.g,new YW(t))};p1.prototype.za=function(t){kc(this.g,new XW)};p1.prototype.ya=function(){kc(this.g,"b")};function Sce(){this.blockSize=-1}function Yp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}hc(Yp,Sce);Yp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function IN(t,e,a){a||(a=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(a++)|e.charCodeAt(a++)<<8|e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<24;else for(i=0;16>i;++i)r[i]=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;e=t.g[0],a=t.g[1],i=t.g[2];var l=t.g[3],c=e+(l^a&(i^l))+r[0]+3614090360&4294967295;e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[1]+3905402710&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[2]+606105819&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[3]+3250441966&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[4]+4118548399&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[5]+1200080426&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[6]+2821735955&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[7]+4249261313&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[8]+1770035416&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[9]+2336552879&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[10]+4294925233&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[11]+2304563134&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[12]+1804603682&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[13]+4254626195&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[14]+2792965006&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[15]+1236535329&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(i^l&(a^i))+r[1]+4129170786&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[6]+3225465664&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[11]+643717713&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[0]+3921069994&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[5]+3593408605&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[10]+38016083&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[15]+3634488961&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[4]+3889429448&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[9]+568446438&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[14]+3275163606&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[3]+4107603335&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[8]+1163531501&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[13]+2850285829&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[2]+4243563512&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[7]+1735328473&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[12]+2368359562&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(a^i^l)+r[5]+4294588738&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[8]+2272392833&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[11]+1839030562&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[14]+4259657740&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[1]+2763975236&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[4]+1272893353&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[7]+4139469664&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[10]+3200236656&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[13]+681279174&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[0]+3936430074&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[3]+3572445317&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[6]+76029189&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[9]+3654602809&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[12]+3873151461&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[15]+530742520&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[2]+3299628645&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(i^(a|~l))+r[0]+4096336452&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[7]+1126891415&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[14]+2878612391&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[5]+4237533241&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[12]+1700485571&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[3]+2399980690&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[10]+4293915773&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[1]+2240044497&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[8]+1873313359&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[15]+4264355552&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[6]+2734768916&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[13]+1309151649&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[4]+4149444226&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[11]+3174756917&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[2]+718787259&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+l&4294967295}Yp.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var a=e-this.blockSize,r=this.m,i=this.h,l=0;l<e;){if(i==0)for(;l<=a;)IN(this,t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<e;)if(r[i++]=t.charCodeAt(l++),i==this.blockSize){IN(this,r),i=0;break}}else for(;l<e;)if(r[i++]=t[l++],i==this.blockSize){IN(this,r),i=0;break}}this.h=i,this.i+=e};Yp.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var a=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=a&255,a/=256;for(this.j(t),t=Array(16),e=a=0;4>e;++e)for(var r=0;32>r;r+=8)t[a++]=this.g[e]>>>r&255;return t};function Hs(t,e){this.h=e;for(var a=[],r=!0,i=t.length-1;0<=i;i--){var l=t[i]|0;r&&l==e||(a[i]=l,r=!1)}this.g=a}var bce={};function Q3(t){return-128<=t&&128>t?zue(t,function(e){return new Hs([e|0],0>e?-1:0)}):new Hs([t|0],0>t?-1:0)}function Dm(t){if(isNaN(t)||!isFinite(t))return c_;if(0>t)return Lc(Dm(-t));for(var e=[],a=1,r=0;t>=a;r++)e[r]=t/a|0,a*=Q5;return new Hs(e,0)}function JW(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Lc(JW(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=Dm(Math.pow(e,8)),r=c_,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),e);8>l?(l=Dm(Math.pow(e,l)),r=r.R(l).add(Dm(c))):(r=r.R(a),r=r.add(Dm(c)))}return r}var Q5=4294967296,c_=Q3(0),eM=Q3(1),gU=Q3(16777216);Kr=Hs.prototype;Kr.ea=function(){if(ep(this))return-Lc(this).ea();for(var t=0,e=1,a=0;a<this.g.length;a++){var r=this.D(a);t+=(0<=r?r:Q5+r)*e,e*=Q5}return t};Kr.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Cg(this))return"0";if(ep(this))return"-"+Lc(this).toString(t);for(var e=Dm(Math.pow(t,6)),a=this,r="";;){var i=ax(a,e).g;a=tx(a,i.R(e));var l=((0<a.g.length?a.g[0]:a.h)>>>0).toString(t);if(a=i,Cg(a))return l+r;for(;6>l.length;)l="0"+l;r=l+r}};Kr.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Cg(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ep(t){return t.h==-1}Kr.X=function(t){return t=tx(this,t),ep(t)?-1:Cg(t)?0:1};function Lc(t){for(var e=t.g.length,a=[],r=0;r<e;r++)a[r]=~t.g[r];return new Hs(a,~t.h).add(eM)}Kr.abs=function(){return ep(this)?Lc(this):this};Kr.add=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0,i=0;i<=e;i++){var l=r+(this.D(i)&65535)+(t.D(i)&65535),c=(l>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=c>>>16,l&=65535,c&=65535,a[i]=c<<16|l}return new Hs(a,a[a.length-1]&-2147483648?-1:0)};function tx(t,e){return t.add(Lc(e))}Kr.R=function(t){if(Cg(this)||Cg(t))return c_;if(ep(this))return ep(t)?Lc(this).R(Lc(t)):Lc(Lc(this).R(t));if(ep(t))return Lc(this.R(Lc(t)));if(0>this.X(gU)&&0>t.X(gU))return Dm(this.ea()*t.ea());for(var e=this.g.length+t.g.length,a=[],r=0;r<2*e;r++)a[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var l=this.D(r)>>>16,c=this.D(r)&65535,n=t.D(i)>>>16,v=t.D(i)&65535;a[2*r+2*i]+=c*v,US(a,2*r+2*i),a[2*r+2*i+1]+=l*v,US(a,2*r+2*i+1),a[2*r+2*i+1]+=c*n,US(a,2*r+2*i+1),a[2*r+2*i+2]+=l*n,US(a,2*r+2*i+2)}for(r=0;r<e;r++)a[r]=a[2*r+1]<<16|a[2*r];for(r=e;r<2*e;r++)a[r]=0;return new Hs(a,0)};function US(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Uw(t,e){this.g=t,this.h=e}function ax(t,e){if(Cg(e))throw Error("division by zero");if(Cg(t))return new Uw(c_,c_);if(ep(t))return e=ax(Lc(t),e),new Uw(Lc(e.g),Lc(e.h));if(ep(e))return e=ax(t,Lc(e)),new Uw(Lc(e.g),e.h);if(30<t.g.length){if(ep(t)||ep(e))throw Error("slowDivide_ only works with positive integers.");for(var a=eM,r=e;0>=r.X(t);)a=yU(a),r=yU(r);var i=k0(a,1),l=k0(r,1);for(r=k0(r,2),a=k0(a,2);!Cg(r);){var c=l.add(r);0>=c.X(t)&&(i=i.add(a),l=c),r=k0(r,1),a=k0(a,1)}return e=tx(t,i.R(e)),new Uw(i,e)}for(i=c_;0<=t.X(e);){for(a=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(a)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),l=Dm(a),c=l.R(e);ep(c)||0<c.X(t);)a-=r,l=Dm(a),c=l.R(e);Cg(l)&&(l=eM),i=i.add(l),t=tx(t,c)}return new Uw(i,t)}Kr.gb=function(t){return ax(this,t).h};Kr.and=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)&t.D(r);return new Hs(a,this.h&t.h)};Kr.or=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)|t.D(r);return new Hs(a,this.h|t.h)};Kr.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)^t.D(r);return new Hs(a,this.h^t.h)};function yU(t){for(var e=t.g.length+1,a=[],r=0;r<e;r++)a[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Hs(a,t.h)}function k0(t,e){var a=e>>5;e%=32;for(var r=t.g.length-a,i=[],l=0;l<r;l++)i[l]=0<e?t.D(l+a)>>>e|t.D(l+a+1)<<32-e:t.D(l+a);return new Hs(i,t.h)}ex.prototype.createWebChannel=ex.prototype.g;Cf.prototype.send=Cf.prototype.u;Cf.prototype.open=Cf.prototype.m;Cf.prototype.close=Cf.prototype.close;G2.NO_ERROR=0;G2.TIMEOUT=8;G2.HTTP_ERROR=6;gW.COMPLETE="complete";yW.EventType=XT;XT.OPEN="a";XT.CLOSE="b";XT.ERROR="c";XT.MESSAGE="d";dc.prototype.listen=dc.prototype.O;Nl.prototype.listenOnce=Nl.prototype.P;Nl.prototype.getLastError=Nl.prototype.Sa;Nl.prototype.getLastErrorCode=Nl.prototype.Ia;Nl.prototype.getStatus=Nl.prototype.da;Nl.prototype.getResponseJson=Nl.prototype.Wa;Nl.prototype.getResponseText=Nl.prototype.ja;Nl.prototype.send=Nl.prototype.ha;Nl.prototype.setWithCredentials=Nl.prototype.Oa;Yp.prototype.digest=Yp.prototype.l;Yp.prototype.reset=Yp.prototype.reset;Yp.prototype.update=Yp.prototype.j;Hs.prototype.add=Hs.prototype.add;Hs.prototype.multiply=Hs.prototype.R;Hs.prototype.modulo=Hs.prototype.gb;Hs.prototype.compare=Hs.prototype.X;Hs.prototype.toNumber=Hs.prototype.ea;Hs.prototype.toString=Hs.prototype.toString;Hs.prototype.getBits=Hs.prototype.D;Hs.fromNumber=Dm;Hs.fromString=JW;var xce=function(){return new ex},Pce=function(){return j2()},LN=G2,Ece=gW,Nce=Zv,AU={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Oce=eC,BS=yW,Vce=Nl,zce=Yp,d_=Hs;const vU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gd.UNAUTHENTICATED=new gd(null),gd.GOOGLE_CREDENTIALS=new gd("google-credentials-uid"),gd.FIRST_PARTY=new gd("first-party-uid"),gd.MOCK_USER=new gd("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m1="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=new _3("@firebase/firestore");function _U(){return Vv.logLevel}function wn(t,...e){if(Vv.logLevel<=Rs.DEBUG){const a=e.map(eL);Vv.debug(`Firestore (${m1}): ${t}`,...a)}}function Mg(t,...e){if(Vv.logLevel<=Rs.ERROR){const a=e.map(eL);Vv.error(`Firestore (${m1}): ${t}`,...a)}}function C_(t,...e){if(Vv.logLevel<=Rs.WARN){const a=e.map(eL);Vv.warn(`Firestore (${m1}): ${t}`,...a)}}function eL(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t="Unexpected state"){const e=`FIRESTORE (${m1}) INTERNAL ASSERTION FAILED: `+t;throw Mg(e),new Error(e)}function Uo(t,e){t||si()}function _i(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let Xr=class extends Xm{constructor(e,a){super(e,a),this.code=e,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg=class{constructor(){this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QW=class{constructor(e,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dce=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,a){e.enqueueRetryable(()=>a(gd.UNAUTHENTICATED))}shutdown(){}},Mce=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,a){this.changeListener=a,e.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}},Ice=class{constructor(e){this.t=e,this.currentUser=gd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,a){let r=this.i;const i=v=>this.i!==r?(r=this.i,a(v)):Promise.resolve();let l=new Eg;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Eg,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const v=l;e.enqueueRetryable(async()=>{await v.promise,await i(this.currentUser)})},n=v=>{wn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(v=>n(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?n(v):(wn("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Eg)}},0),c()}getToken(){const e=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(r=>this.i!==e?(wn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Uo(typeof r.accessToken=="string"),new QW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Uo(e===null||typeof e=="string"),new gd(e)}},Lce=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r,this.type="FirstParty",this.user=gd.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},Fce=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r}getToken(){return Promise.resolve(new Lce(this.h,this.l,this.m))}start(e,a){e.enqueueRetryable(()=>a(gd.FIRST_PARTY))}shutdown(){}invalidateToken(){}},kce=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Uce=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,a){const r=l=>{l.error!=null&&wn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.T;return this.T=l.token,wn("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?a(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{wn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?i(l):wn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(a=>a?(Uo(typeof a.token=="string"),this.T=a.token,new kce(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(a);else for(let r=0;r<t;r++)a[r]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eY=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Bce(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<a&&(r+=e.charAt(i[l]%e.length))}return r}};function xs(t,e){return t<e?-1:t>e?1:0}function S_(t,e,a){return t.length===e.length&&t.every((r,i)=>a(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=class _b{constructor(e,a){if(this.seconds=e,this.nanoseconds=a,a<0)throw new Xr(nr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new Xr(nr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(e<-62135596800)throw new Xr(nr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xr(nr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _b.fromMillis(Date.now())}static fromDate(e){return _b.fromMillis(e.getTime())}static fromMillis(e){const a=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*a));return new _b(a,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xs(this.nanoseconds,e.nanoseconds):xs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi=class wb{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wb(e)}static min(){return new wb(new hh(0,0))}static max(){return new wb(new hh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tY=class tM{constructor(e,a,r){a===void 0?a=0:a>e.length&&si(),r===void 0?r=e.length-a:r>e.length-a&&si(),this.segments=e,this.offset=a,this.len=r}get length(){return this.len}isEqual(e){return tM.comparator(this,e)===0}child(e){const a=this.segments.slice(this.offset,this.limit());return e instanceof tM?e.forEach(r=>{a.push(r)}):a.push(e),this.construct(a)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}forEach(e){for(let a=this.offset,r=this.limit();a<r;a++)e(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,a){const r=Math.min(e.length,a.length);for(let i=0;i<r;i++){const l=e.get(i),c=a.get(i);if(l<c)return-1;if(l>c)return 1}return e.length<a.length?-1:e.length>a.length?1:0}},$l=class Rb extends tY{construct(e,a,r){return new Rb(e,a,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const a=[];for(const r of e){if(r.indexOf("//")>=0)throw new Xr(nr.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);a.push(...r.split("/").filter(i=>i.length>0))}return new Rb(a)}static emptyPath(){return new Rb([])}};const jce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Hm=class $0 extends tY{construct(e,a,r){return new $0(e,a,r)}static isValidIdentifier(e){return jce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$0.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $0(["__name__"])}static fromServerFormat(e){const a=[];let r="",i=0;const l=()=>{if(r.length===0)throw new Xr(nr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(r),r=""};let c=!1;for(;i<e.length;){const n=e[i];if(n==="\\"){if(i+1===e.length)throw new Xr(nr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Xr(nr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else n==="`"?(c=!c,i++):n!=="."||c?(r+=n,i++):(l(),i++)}if(l(),c)throw new Xr(nr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $0(a)}static emptyPath(){return new $0([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=class uR{constructor(e){this.path=e}static fromPath(e){return new uR($l.fromString(e))}static fromName(e){return new uR($l.fromString(e).popFirst(5))}static empty(){return new uR($l.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$l.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,a){return $l.comparator(e.path,a.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new uR(new $l(e.slice()))}};function Gce(t,e){const a=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=zi.fromTimestamp(r===1e9?new hh(a+1,0):new hh(a,r));return new $R(i,ei.empty(),e)}function Zce(t){return new $R(t.readTime,t.key,-1)}let $R=class aM{constructor(e,a,r){this.readTime=e,this.documentKey=a,this.largestBatchId=r}static min(){return new aM(zi.min(),ei.empty(),-1)}static max(){return new aM(zi.max(),ei.empty(),-1)}};function qce(t,e){let a=t.readTime.compareTo(e.readTime);return a!==0?a:(a=ei.comparator(t.documentKey,e.documentKey),a!==0?a:xs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let $ce=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(t){if(t.code!==nr.FAILED_PRECONDITION||t.message!==Hce)throw t;wn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Br=class Fh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(e){return this.next(void 0,e)}next(e,a){return this.callbackAttached&&si(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(e,this.result):new Fh((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(a,l).next(r,i)}})}toPromise(){return new Promise((e,a)=>{this.next(e,a)})}wrapUserFunction(e){try{const a=e();return a instanceof Fh?a:Fh.resolve(a)}catch(a){return Fh.reject(a)}}wrapSuccess(e,a){return e?this.wrapUserFunction(()=>e(a)):Fh.resolve(a)}wrapFailure(e,a){return e?this.wrapUserFunction(()=>e(a)):Fh.reject(a)}static resolve(e){return new Fh((a,r)=>{a(e)})}static reject(e){return new Fh((a,r)=>{r(e)})}static waitFor(e){return new Fh((a,r)=>{let i=0,l=0,c=!1;e.forEach(n=>{++i,n.next(()=>{++l,c&&l===i&&a()},v=>r(v))}),c=!0,l===i&&a()})}static or(e){let a=Fh.resolve(!1);for(const r of e)a=a.next(i=>i?Fh.resolve(i):r());return a}static forEach(e,a){const r=[];return e.forEach((i,l)=>{r.push(a.call(this,i,l))}),this.waitFor(r)}static mapArray(e,a){return new Fh((r,i)=>{const l=e.length,c=new Array(l);let n=0;for(let v=0;v<l;v++){const R=v;a(e[R]).next(x=>{c[R]=x,++n,n===l&&r(c)},x=>i(x))}})}static doWhile(e,a){return new Fh((r,i)=>{const l=()=>{e()===!0?a().next(()=>{l()},i):r()};l()})}};function nC(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tL=class{constructor(e,a){this.previousValue=e,a&&(a.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>a.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};tL.ct=-1;function X2(t){return t==null}function rx(t){return t===0&&1/t==-1/0}function Kce(t){return typeof t=="number"&&Number.isInteger(t)&&!rx(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e}function qv(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e(a,t[a])}function aY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=class rM{constructor(e,a){this.comparator=e,this.root=a||Ic.EMPTY}insert(e,a){return new rM(this.comparator,this.root.insert(e,a,this.comparator).copy(null,null,Ic.BLACK,null,null))}remove(e){return new rM(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ic.BLACK,null,null))}get(e){let a=this.root;for(;!a.isEmpty();){const r=this.comparator(e,a.key);if(r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}indexOf(e){let a=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return a+r.left.size;i<0?r=r.left:(a+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((a,r)=>(e(a,r),!1))}toString(){const e=[];return this.inorderTraversal((a,r)=>(e.push(`${a}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jS(this.root,e,this.comparator,!1)}getReverseIterator(){return new jS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jS(this.root,e,this.comparator,!0)}};class jS{constructor(e,a,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=a?r(e.key,a):1,a&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const a={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ic{constructor(e,a,r,i,l){this.key=e,this.value=a,this.color=r??Ic.RED,this.left=i??Ic.EMPTY,this.right=l??Ic.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,a,r,i,l){return new Ic(e??this.key,a??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,a,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,a,r),null):l===0?i.copy(null,a,null,null,null):i.copy(null,null,null,null,i.right.insert(e,a,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ic.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,a){let r,i=this;if(a(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,a),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),a(e,i.key)===0){if(i.right.isEmpty())return Ic.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,a))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ic.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ic.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,a)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw si();const e=this.left.check();if(e!==this.right.check())throw si();return e+(this.isRed()?0:1)}}Ic.EMPTY=null,Ic.RED=!0,Ic.BLACK=!1;Ic.EMPTY=new class{constructor(){this.size=0}get key(){throw si()}get value(){throw si()}get color(){throw si()}get left(){throw si()}get right(){throw si()}copy(t,e,a,r,i){return this}insert(t,e,a){return new Ic(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this.comparator=e,this.data=new _u(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((a,r)=>(e(a),!1))}forEachInRange(e,a){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;a(i.key)}}forEachWhile(e,a){let r;for(r=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const a=this.data.getIteratorFrom(e);return a.hasNext()?a.getNext().key:null}getIterator(){return new RU(this.data.getIterator())}getIteratorFrom(e){return new RU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let a=this;return a.size<e.size&&(a=e,e=this),e.forEach(r=>{a=a.add(r)}),a}isEqual(e){if(!(e instanceof Sd)||this.size!==e.size)return!1;const a=this.data.getIterator(),r=e.data.getIterator();for(;a.hasNext();){const i=a.getNext().key,l=r.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(a=>{e.push(a)}),e}toString(){const e=[];return this.forEach(a=>e.push(a)),"SortedSet("+e.toString()+")"}copy(e){const a=new Sd(this.comparator);return a.data=e,a}}class RU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.fields=e,e.sort(Hm.comparator)}static empty(){return new vf([])}unionWith(e){let a=new Sd(Hm.comparator);for(const r of this.fields)a=a.add(r);for(const r of e)a=a.add(r);return new vf(a.toArray())}covers(e){for(const a of this.fields)if(a.isPrefixOf(e))return!0;return!1}isEqual(e){return S_(this.fields,e.fields,(a,r)=>a.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.binaryString=e}static fromBase64String(e){const a=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rY("Invalid base64 string: "+i):i}}(e);return new Pd(a)}static fromUint8Array(e){const a=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new Pd(a)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const a=new Uint8Array(e.length);for(let r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pd.EMPTY_BYTE_STRING=new Pd("");const Wce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jy(t){if(Uo(!!t),typeof t=="string"){let e=0;const a=Wce.exec(t);if(Uo(!!a),a[1]){let i=a[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gu(t.seconds),nanos:gu(t.nanos)}}function gu(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zv(t){return typeof t=="string"?Pd.fromBase64String(t):Pd.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){var e,a;return((a=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function rL(t){const e=t.mapValue.fields.__previous_value__;return aL(e)?rL(e):e}function KR(t){const e=Jy(t.mapValue.fields.__local_write_time__.timestampValue);return new hh(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{constructor(e,a,r,i,l,c,n,v,R){this.databaseId=e,this.appId=a,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=n,this.longPollingOptions=v,this.useFetchStreams=R}}class WR{constructor(e,a){this.projectId=e,this.database=a||"(default)"}static empty(){return new WR("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof WR&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={mapValue:{}};function Dv(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?aL(t)?4:Xce(t)?9007199254740991:10:si()}function $m(t,e){if(t===e)return!0;const a=Dv(t);if(a!==Dv(e))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return KR(t).isEqual(KR(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Jy(r.timestampValue),c=Jy(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return zv(r.bytesValue).isEqual(zv(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return gu(r.geoPointValue.latitude)===gu(i.geoPointValue.latitude)&&gu(r.geoPointValue.longitude)===gu(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gu(r.integerValue)===gu(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=gu(r.doubleValue),c=gu(i.doubleValue);return l===c?rx(l)===rx(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return S_(t.arrayValue.values||[],e.arrayValue.values||[],$m);case 10:return function(r,i){const l=r.mapValue.fields||{},c=i.mapValue.fields||{};if(wU(l)!==wU(c))return!1;for(const n in l)if(l.hasOwnProperty(n)&&(c[n]===void 0||!$m(l[n],c[n])))return!1;return!0}(t,e);default:return si()}}function YR(t,e){return(t.values||[]).find(a=>$m(a,e))!==void 0}function b_(t,e){if(t===e)return 0;const a=Dv(t),r=Dv(e);if(a!==r)return xs(a,r);switch(a){case 0:case 9007199254740991:return 0;case 1:return xs(t.booleanValue,e.booleanValue);case 2:return function(i,l){const c=gu(i.integerValue||i.doubleValue),n=gu(l.integerValue||l.doubleValue);return c<n?-1:c>n?1:c===n?0:isNaN(c)?isNaN(n)?0:-1:1}(t,e);case 3:return TU(t.timestampValue,e.timestampValue);case 4:return TU(KR(t),KR(e));case 5:return xs(t.stringValue,e.stringValue);case 6:return function(i,l){const c=zv(i),n=zv(l);return c.compareTo(n)}(t.bytesValue,e.bytesValue);case 7:return function(i,l){const c=i.split("/"),n=l.split("/");for(let v=0;v<c.length&&v<n.length;v++){const R=xs(c[v],n[v]);if(R!==0)return R}return xs(c.length,n.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,l){const c=xs(gu(i.latitude),gu(l.latitude));return c!==0?c:xs(gu(i.longitude),gu(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,l){const c=i.values||[],n=l.values||[];for(let v=0;v<c.length&&v<n.length;++v){const R=b_(c[v],n[v]);if(R)return R}return xs(c.length,n.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,l){if(i===GS.mapValue&&l===GS.mapValue)return 0;if(i===GS.mapValue)return 1;if(l===GS.mapValue)return-1;const c=i.fields||{},n=Object.keys(c),v=l.fields||{},R=Object.keys(v);n.sort(),R.sort();for(let x=0;x<n.length&&x<R.length;++x){const N=xs(n[x],R[x]);if(N!==0)return N;const I=b_(c[n[x]],v[R[x]]);if(I!==0)return I}return xs(n.length,R.length)}(t.mapValue,e.mapValue);default:throw si()}}function TU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xs(t,e);const a=Jy(t),r=Jy(e),i=xs(a.seconds,r.seconds);return i!==0?i:xs(a.nanos,r.nanos)}function x_(t){return nM(t)}function nM(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Jy(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zv(t.bytesValue).toBase64():"referenceValue"in t?(a=t.referenceValue,ei.fromName(a).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",l=!0;for(const c of r.values||[])l?l=!1:i+=",",i+=nM(c);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const n of i)c?c=!1:l+=",",l+=`${n}:${nM(r.fields[n])}`;return l+"}"}(t.mapValue):si();var e,a}function CU(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iM(t){return!!t&&"integerValue"in t}function nL(t){return!!t&&"arrayValue"in t}function SU(t){return!!t&&"nullValue"in t}function bU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tb(t){return!!t&&"mapValue"in t}function AR(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qv(t.mapValue.fields,(a,r)=>e.mapValue.fields[a]=AR(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let a=0;a<(t.arrayValue.values||[]).length;++a)e.arrayValue.values[a]=AR(t.arrayValue.values[a]);return e}return Object.assign({},t)}function Xce(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.value=e}static empty(){return new kh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let a=this.value;for(let r=0;r<e.length-1;++r)if(a=(a.mapValue.fields||{})[e.get(r)],!Tb(a))return null;return a=(a.mapValue.fields||{})[e.lastSegment()],a||null}}set(e,a){this.getFieldsMap(e.popLast())[e.lastSegment()]=AR(a)}setAll(e){let a=Hm.emptyPath(),r={},i=[];e.forEach((c,n)=>{if(!a.isImmediateParentOf(n)){const v=this.getFieldsMap(a);this.applyChanges(v,r,i),r={},i=[],a=n.popLast()}c?r[n.lastSegment()]=AR(c):i.push(n.lastSegment())});const l=this.getFieldsMap(a);this.applyChanges(l,r,i)}delete(e){const a=this.field(e.popLast());Tb(a)&&a.mapValue.fields&&delete a.mapValue.fields[e.lastSegment()]}isEqual(e){return $m(this.value,e.value)}getFieldsMap(e){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=a.mapValue.fields[e.get(r)];Tb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},a.mapValue.fields[e.get(r)]=i),a=i}return a.mapValue.fields}applyChanges(e,a,r){qv(a,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new kh(AR(this.value))}}function nY(t){const e=[];return qv(t.fields,(a,r)=>{const i=new Hm([a]);if(Tb(r)){const l=nY(r.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)}),new vf(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,a,r,i,l,c,n){this.key=e,this.documentType=a,this.version=r,this.readTime=i,this.createTime=l,this.data=c,this.documentState=n}static newInvalidDocument(e){return new vd(e,0,zi.min(),zi.min(),zi.min(),kh.empty(),0)}static newFoundDocument(e,a,r,i){return new vd(e,1,a,zi.min(),r,i,0)}static newNoDocument(e,a){return new vd(e,2,a,zi.min(),zi.min(),kh.empty(),0)}static newUnknownDocument(e,a){return new vd(e,3,a,zi.min(),zi.min(),kh.empty(),2)}convertToFoundDocument(e,a){return!this.createTime.isEqual(zi.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,a){this.position=e,this.inclusive=a}}function xU(t,e,a){let r=0;for(let i=0;i<t.position.length;i++){const l=e[i],c=t.position[i];if(l.field.isKeyField()?r=ei.comparator(ei.fromName(c.referenceValue),a.key):r=b_(c,a.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function PU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let a=0;a<t.position.length;a++)if(!$m(t.position[a],e.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,a="asc"){this.field=e,this.dir=a}}function Jce(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{}class Au extends iY{constructor(e,a,r){super(),this.field=e,this.op=a,this.value=r}static create(e,a,r){return e.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(e,a,r):new ede(e,a,r):a==="array-contains"?new rde(e,r):a==="in"?new nde(e,r):a==="not-in"?new ide(e,r):a==="array-contains-any"?new sde(e,r):new Au(e,a,r)}static createKeyFieldInFilter(e,a,r){return a==="in"?new tde(e,r):new ade(e,r)}matches(e){const a=e.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(b_(a,this.value)):a!==null&&Dv(this.value)===Dv(a)&&this.matchesComparison(b_(a,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return si()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Xp extends iY{constructor(e,a){super(),this.filters=e,this.op=a,this.lt=null}static create(e,a){return new Xp(e,a)}matches(e){return sY(this)?this.filters.find(a=>!a.matches(e))===void 0:this.filters.find(a=>a.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,a)=>e.concat(a.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(a=>a.isInequality());return e!==null?e.field:null}ft(e){for(const a of this.getFlattenedFilters())if(e(a))return a;return null}}function sY(t){return t.op==="and"}function oY(t){return Qce(t)&&sY(t)}function Qce(t){for(const e of t.filters)if(e instanceof Xp)return!1;return!0}function sM(t){if(t instanceof Au)return t.field.canonicalString()+t.op.toString()+x_(t.value);if(oY(t))return t.filters.map(e=>sM(e)).join(",");{const e=t.filters.map(a=>sM(a)).join(",");return`${t.op}(${e})`}}function lY(t,e){return t instanceof Au?function(a,r){return r instanceof Au&&a.op===r.op&&a.field.isEqual(r.field)&&$m(a.value,r.value)}(t,e):t instanceof Xp?function(a,r){return r instanceof Xp&&a.op===r.op&&a.filters.length===r.filters.length?a.filters.reduce((i,l,c)=>i&&lY(l,r.filters[c]),!0):!1}(t,e):void si()}function uY(t){return t instanceof Au?function(e){return`${e.field.canonicalString()} ${e.op} ${x_(e.value)}`}(t):t instanceof Xp?function(e){return e.op.toString()+" {"+e.getFilters().map(uY).join(" ,")+"}"}(t):"Filter"}class ede extends Au{constructor(e,a,r){super(e,a,r),this.key=ei.fromName(r.referenceValue)}matches(e){const a=ei.comparator(e.key,this.key);return this.matchesComparison(a)}}class tde extends Au{constructor(e,a){super(e,"in",a),this.keys=cY("in",a)}matches(e){return this.keys.some(a=>a.isEqual(e.key))}}class ade extends Au{constructor(e,a){super(e,"not-in",a),this.keys=cY("not-in",a)}matches(e){return!this.keys.some(a=>a.isEqual(e.key))}}function cY(t,e){var a;return(((a=e.arrayValue)===null||a===void 0?void 0:a.values)||[]).map(r=>ei.fromName(r.referenceValue))}class rde extends Au{constructor(e,a){super(e,"array-contains",a)}matches(e){const a=e.data.field(this.field);return nL(a)&&YR(a.arrayValue,this.value)}}class nde extends Au{constructor(e,a){super(e,"in",a)}matches(e){const a=e.data.field(this.field);return a!==null&&YR(this.value.arrayValue,a)}}class ide extends Au{constructor(e,a){super(e,"not-in",a)}matches(e){if(YR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=e.data.field(this.field);return a!==null&&!YR(this.value.arrayValue,a)}}class sde extends Au{constructor(e,a){super(e,"array-contains-any",a)}matches(e){const a=e.data.field(this.field);return!(!nL(a)||!a.arrayValue.values)&&a.arrayValue.values.some(r=>YR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ode{constructor(e,a=null,r=[],i=[],l=null,c=null,n=null){this.path=e,this.collectionGroup=a,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=c,this.endAt=n,this.dt=null}}function EU(t,e=null,a=[],r=[],i=null,l=null,c=null){return new ode(t,e,a,r,i,l,c)}function iL(t){const e=_i(t);if(e.dt===null){let a=e.path.canonicalString();e.collectionGroup!==null&&(a+="|cg:"+e.collectionGroup),a+="|f:",a+=e.filters.map(r=>sM(r)).join(","),a+="|ob:",a+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),X2(e.limit)||(a+="|l:",a+=e.limit),e.startAt&&(a+="|lb:",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>x_(r)).join(",")),e.endAt&&(a+="|ub:",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>x_(r)).join(",")),e.dt=a}return e.dt}function sL(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<t.orderBy.length;a++)if(!Jce(t.orderBy[a],e.orderBy[a]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let a=0;a<t.filters.length;a++)if(!lY(t.filters[a],e.filters[a]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PU(t.startAt,e.startAt)&&PU(t.endAt,e.endAt)}function oM(t){return ei.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,a=null,r=[],i=[],l=null,c="F",n=null,v=null){this.path=e,this.collectionGroup=a,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=c,this.startAt=n,this.endAt=v,this.wt=null,this._t=null,this.startAt,this.endAt}}function lde(t,e,a,r,i,l,c,n){return new g1(t,e,a,r,i,l,c,n)}function J2(t){return new g1(t)}function NU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oL(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Q2(t){for(const e of t.filters){const a=e.getFirstInequalityField();if(a!==null)return a}return null}function dY(t){return t.collectionGroup!==null}function f_(t){const e=_i(t);if(e.wt===null){e.wt=[];const a=Q2(e),r=oL(e);if(a!==null&&r===null)a.isKeyField()||e.wt.push(new h_(a)),e.wt.push(new h_(Hm.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new h_(Hm.keyField(),l))}}}return e.wt}function Ig(t){const e=_i(t);if(!e._t)if(e.limitType==="F")e._t=EU(e.path,e.collectionGroup,f_(e),e.filters,e.limit,e.startAt,e.endAt);else{const a=[];for(const l of f_(e)){const c=l.dir==="desc"?"asc":"desc";a.push(new h_(l.field,c))}const r=e.endAt?new nx(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new nx(e.startAt.position,e.startAt.inclusive):null;e._t=EU(e.path,e.collectionGroup,a,e.filters,e.limit,r,i)}return e._t}function lM(t,e){e.getFirstInequalityField(),Q2(t);const a=t.filters.concat([e]);return new g1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),a,t.limit,t.limitType,t.startAt,t.endAt)}function uM(t,e,a){return new g1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,a,t.startAt,t.endAt)}function eP(t,e){return sL(Ig(t),Ig(e))&&t.limitType===e.limitType}function hY(t){return`${iL(Ig(t))}|lt:${t.limitType}`}function cM(t){return`Query(target=${function(e){let a=e.path.canonicalString();return e.collectionGroup!==null&&(a+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(a+=`, filters: [${e.filters.map(r=>uY(r)).join(", ")}]`),X2(e.limit)||(a+=", limit: "+e.limit),e.orderBy.length>0&&(a+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(a+=", startAt: ",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>x_(r)).join(",")),e.endAt&&(a+=", endAt: ",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>x_(r)).join(",")),`Target(${a})`}(Ig(t))}; limitType=${t.limitType})`}function tP(t,e){return e.isFoundDocument()&&function(a,r){const i=r.key.path;return a.collectionGroup!==null?r.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(i):ei.isDocumentKey(a.path)?a.path.isEqual(i):a.path.isImmediateParentOf(i)}(t,e)&&function(a,r){for(const i of f_(a))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(a,r){for(const i of a.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(a,r){return!(a.startAt&&!function(i,l,c){const n=xU(i,l,c);return i.inclusive?n<=0:n<0}(a.startAt,f_(a),r)||a.endAt&&!function(i,l,c){const n=xU(i,l,c);return i.inclusive?n>=0:n>0}(a.endAt,f_(a),r))}(t,e)}function ude(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fY(t){return(e,a)=>{let r=!1;for(const i of f_(t)){const l=cde(i,e,a);if(l!==0)return l;r=r||i.field.isKeyField()}return 0}}function cde(t,e,a){const r=t.field.isKeyField()?ei.comparator(e.key,a.key):function(i,l,c){const n=l.data.field(i),v=c.data.field(i);return n!==null&&v!==null?b_(n,v):si()}(t.field,e,a);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return si()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,a){this.mapKeyFn=e,this.equalsFn=a,this.inner={},this.innerSize=0}get(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r!==void 0){for(const[i,l]of r)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,a){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,a]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,a]);i.push([e,a]),this.innerSize++}delete(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[a]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qv(this.inner,(a,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return aY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dde=new _u(ei.comparator);function Lg(){return dde}const pY=new _u(ei.comparator);function cR(...t){let e=pY;for(const a of t)e=e.insert(a.key,a);return e}function mY(t){let e=pY;return t.forEach((a,r)=>e=e.insert(a,r.overlayedDocument)),e}function pv(){return vR()}function gY(){return vR()}function vR(){return new y1(t=>t.toString(),(t,e)=>t.isEqual(e))}const hde=new _u(ei.comparator),fde=new Sd(ei.comparator);function Yi(...t){let e=fde;for(const a of t)e=e.add(a);return e}const pde=new Sd(xs);function mde(){return pde}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yY(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rx(e)?"-0":e}}function AY(t){return{integerValue:""+t}}function gde(t,e){return Kce(e)?AY(e):yY(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this._=void 0}}function yde(t,e,a){return t instanceof XR?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&aL(i)&&(i=rL(i)),i&&(l.fields.__previous_value__=i),{mapValue:l}}(a,e):t instanceof JR?_Y(t,e):t instanceof QR?wY(t,e):function(r,i){const l=vY(r,i),c=OU(l)+OU(r.gt);return iM(l)&&iM(r.gt)?AY(c):yY(r.serializer,c)}(t,e)}function Ade(t,e,a){return t instanceof JR?_Y(t,e):t instanceof QR?wY(t,e):a}function vY(t,e){return t instanceof ix?iM(a=e)||function(r){return!!r&&"doubleValue"in r}(a)?e:{integerValue:0}:null;var a}class XR extends aP{}class JR extends aP{constructor(e){super(),this.elements=e}}function _Y(t,e){const a=RY(e);for(const r of t.elements)a.some(i=>$m(i,r))||a.push(r);return{arrayValue:{values:a}}}class QR extends aP{constructor(e){super(),this.elements=e}}function wY(t,e){let a=RY(e);for(const r of t.elements)a=a.filter(i=>!$m(i,r));return{arrayValue:{values:a}}}class ix extends aP{constructor(e,a){super(),this.serializer=e,this.gt=a}}function OU(t){return gu(t.integerValue||t.doubleValue)}function RY(t){return nL(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vde{constructor(e,a){this.field=e,this.transform=a}}function _de(t,e){return t.field.isEqual(e.field)&&function(a,r){return a instanceof JR&&r instanceof JR||a instanceof QR&&r instanceof QR?S_(a.elements,r.elements,$m):a instanceof ix&&r instanceof ix?$m(a.gt,r.gt):a instanceof XR&&r instanceof XR}(t.transform,e.transform)}class wde{constructor(e,a){this.version=e,this.transformResults=a}}class fh{constructor(e,a){this.updateTime=e,this.exists=a}static none(){return new fh}static exists(e){return new fh(void 0,e)}static updateTime(e){return new fh(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rP{}function TY(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nP(t.key,fh.none()):new iC(t.key,t.data,fh.none());{const a=t.data,r=kh.empty();let i=new Sd(Hm.comparator);for(let l of e.fields)if(!i.has(l)){let c=a.field(l);c===null&&l.length>1&&(l=l.popLast(),c=a.field(l)),c===null?r.delete(l):r.set(l,c),i=i.add(l)}return new lA(t.key,r,new vf(i.toArray()),fh.none())}}function Rde(t,e,a){t instanceof iC?function(r,i,l){const c=r.value.clone(),n=zU(r.fieldTransforms,i,l.transformResults);c.setAll(n),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,a):t instanceof lA?function(r,i,l){if(!Cb(r.precondition,i))return void i.convertToUnknownDocument(l.version);const c=zU(r.fieldTransforms,i,l.transformResults),n=i.data;n.setAll(CY(r)),n.setAll(c),i.convertToFoundDocument(l.version,n).setHasCommittedMutations()}(t,e,a):function(r,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,a)}function _R(t,e,a,r){return t instanceof iC?function(i,l,c,n){if(!Cb(i.precondition,l))return c;const v=i.value.clone(),R=DU(i.fieldTransforms,n,l);return v.setAll(R),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),null}(t,e,a,r):t instanceof lA?function(i,l,c,n){if(!Cb(i.precondition,l))return c;const v=DU(i.fieldTransforms,n,l),R=l.data;return R.setAll(CY(i)),R.setAll(v),l.convertToFoundDocument(l.version,R).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(x=>x.field))}(t,e,a,r):function(i,l,c){return Cb(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,a)}function Tde(t,e){let a=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),l=vY(r.transform,i||null);l!=null&&(a===null&&(a=kh.empty()),a.set(r.field,l))}return a||null}function VU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,r){return a===void 0&&r===void 0||!(!a||!r)&&S_(a,r,(i,l)=>_de(i,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class iC extends rP{constructor(e,a,r,i=[]){super(),this.key=e,this.value=a,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class lA extends rP{constructor(e,a,r,i,l=[]){super(),this.key=e,this.data=a,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function CY(t){const e=new Map;return t.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const r=t.data.field(a);e.set(a,r)}}),e}function zU(t,e,a){const r=new Map;Uo(t.length===a.length);for(let i=0;i<a.length;i++){const l=t[i],c=l.transform,n=e.data.field(l.field);r.set(l.field,Ade(c,n,a[i]))}return r}function DU(t,e,a){const r=new Map;for(const i of t){const l=i.transform,c=a.data.field(i.field);r.set(i.field,yde(l,c,e))}return r}class nP extends rP{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cde extends rP{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sde{constructor(e,a,r,i){this.batchId=e,this.localWriteTime=a,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,a){const r=a.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&Rde(l,e,r[i])}}applyToLocalView(e,a){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(a=_R(r,e,a,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(a=_R(r,e,a,this.localWriteTime));return a}applyToLocalDocumentSet(e,a){const r=gY();return this.mutations.forEach(i=>{const l=e.get(i.key),c=l.overlayedDocument;let n=this.applyToLocalView(c,l.mutatedFields);n=a.has(i.key)?null:n;const v=TY(c,n);v!==null&&r.set(i.key,v),c.isValidDocument()||c.convertToNoDocument(zi.min())}),r}keys(){return this.mutations.reduce((e,a)=>e.add(a.key),Yi())}isEqual(e){return this.batchId===e.batchId&&S_(this.mutations,e.mutations,(a,r)=>VU(a,r))&&S_(this.baseMutations,e.baseMutations,(a,r)=>VU(a,r))}}class lL{constructor(e,a,r,i){this.batch=e,this.commitVersion=a,this.mutationResults=r,this.docVersions=i}static from(e,a,r){Uo(e.mutations.length===r.length);let i=hde;const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,r[c].version);return new lL(e,a,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bde{constructor(e,a){this.largestBatchId=e,this.mutation=a}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xde{constructor(e,a){this.count=e,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pu,cs;function Pde(t){switch(t){default:return si();case nr.CANCELLED:case nr.UNKNOWN:case nr.DEADLINE_EXCEEDED:case nr.RESOURCE_EXHAUSTED:case nr.INTERNAL:case nr.UNAVAILABLE:case nr.UNAUTHENTICATED:return!1;case nr.INVALID_ARGUMENT:case nr.NOT_FOUND:case nr.ALREADY_EXISTS:case nr.PERMISSION_DENIED:case nr.FAILED_PRECONDITION:case nr.ABORTED:case nr.OUT_OF_RANGE:case nr.UNIMPLEMENTED:case nr.DATA_LOSS:return!0}}function SY(t){if(t===void 0)return Mg("GRPC error has no .code"),nr.UNKNOWN;switch(t){case pu.OK:return nr.OK;case pu.CANCELLED:return nr.CANCELLED;case pu.UNKNOWN:return nr.UNKNOWN;case pu.DEADLINE_EXCEEDED:return nr.DEADLINE_EXCEEDED;case pu.RESOURCE_EXHAUSTED:return nr.RESOURCE_EXHAUSTED;case pu.INTERNAL:return nr.INTERNAL;case pu.UNAVAILABLE:return nr.UNAVAILABLE;case pu.UNAUTHENTICATED:return nr.UNAUTHENTICATED;case pu.INVALID_ARGUMENT:return nr.INVALID_ARGUMENT;case pu.NOT_FOUND:return nr.NOT_FOUND;case pu.ALREADY_EXISTS:return nr.ALREADY_EXISTS;case pu.PERMISSION_DENIED:return nr.PERMISSION_DENIED;case pu.FAILED_PRECONDITION:return nr.FAILED_PRECONDITION;case pu.ABORTED:return nr.ABORTED;case pu.OUT_OF_RANGE:return nr.OUT_OF_RANGE;case pu.UNIMPLEMENTED:return nr.UNIMPLEMENTED;case pu.DATA_LOSS:return nr.DATA_LOSS;default:return si()}}(cs=pu||(pu={}))[cs.OK=0]="OK",cs[cs.CANCELLED=1]="CANCELLED",cs[cs.UNKNOWN=2]="UNKNOWN",cs[cs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cs[cs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cs[cs.NOT_FOUND=5]="NOT_FOUND",cs[cs.ALREADY_EXISTS=6]="ALREADY_EXISTS",cs[cs.PERMISSION_DENIED=7]="PERMISSION_DENIED",cs[cs.UNAUTHENTICATED=16]="UNAUTHENTICATED",cs[cs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cs[cs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cs[cs.ABORTED=10]="ABORTED",cs[cs.OUT_OF_RANGE=11]="OUT_OF_RANGE",cs[cs.UNIMPLEMENTED=12]="UNIMPLEMENTED",cs[cs.INTERNAL=13]="INTERNAL",cs[cs.UNAVAILABLE=14]="UNAVAILABLE",cs[cs.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ZS}static getOrCreateInstance(){return ZS===null&&(ZS=new uL),ZS}onExistenceFilterMismatch(e){const a=Symbol();return this.onExistenceFilterMismatchCallbacks.set(a,e),()=>this.onExistenceFilterMismatchCallbacks.delete(a)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(a=>a(e))}}let ZS=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ede(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nde=new d_([4294967295,4294967295],0);function MU(t){const e=Ede().encode(t),a=new zce;return a.update(e),new Uint8Array(a.digest())}function IU(t){const e=new DataView(t.buffer),a=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new d_([a,r],0),new d_([i,l],0)]}class cL{constructor(e,a,r){if(this.bitmap=e,this.padding=a,this.hashCount=r,a<0||a>=8)throw new dR(`Invalid padding: ${a}`);if(r<0)throw new dR(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dR(`Invalid hash count: ${r}`);if(e.length===0&&a!==0)throw new dR(`Invalid padding when bitmap length is 0: ${a}`);this.It=8*e.length-a,this.Tt=d_.fromNumber(this.It)}Et(e,a,r){let i=e.add(a.multiply(d_.fromNumber(r)));return i.compare(Nde)===1&&(i=new d_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const a=MU(e),[r,i]=IU(a);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);if(!this.At(c))return!1}return!0}static create(e,a,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new cL(l,i,a);return r.forEach(n=>c.insert(n)),c}insert(e){if(this.It===0)return;const a=MU(e),[r,i]=IU(a);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);this.Rt(c)}}Rt(e){const a=Math.floor(e/8),r=e%8;this.bitmap[a]|=1<<r}}class dR extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,a,r,i,l){this.snapshotVersion=e,this.targetChanges=a,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,a,r){const i=new Map;return i.set(e,sC.createSynthesizedTargetChangeForCurrentChange(e,a,r)),new iP(zi.min(),i,new _u(xs),Lg(),Yi())}}class sC{constructor(e,a,r,i,l){this.resumeToken=e,this.current=a,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,a,r){return new sC(r,a,Yi(),Yi(),Yi())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,a,r,i){this.Pt=e,this.removedTargetIds=a,this.key=r,this.bt=i}}let bY=class{constructor(e,a){this.targetId=e,this.Vt=a}};class xY{constructor(e,a,r=Pd.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=a,this.resumeToken=r,this.cause=i}}class LU{constructor(){this.St=0,this.Dt=kU(),this.Ct=Pd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Yi(),a=Yi(),r=Yi();return this.Dt.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:a=a.add(i);break;case 1:r=r.add(i);break;default:si()}}),new sC(this.Ct,this.xt,e,a,r)}Ft(){this.Nt=!1,this.Dt=kU()}Bt(e,a){this.Nt=!0,this.Dt=this.Dt.insert(e,a)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Ode{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Lg(),this.zt=FU(),this.Wt=new _u(xs)}Ht(e){for(const a of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(a,e.bt):this.Yt(a,e.key,e.bt);for(const a of e.removedTargetIds)this.Yt(a,e.key,e.bt)}Xt(e){this.forEachTarget(e,a=>{const r=this.Zt(a);switch(e.state){case 0:this.te(a)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(a);break;case 3:this.te(a)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(a)&&(this.ee(a),r.$t(e.resumeToken));break;default:si()}})}forEachTarget(e,a){e.targetIds.length>0?e.targetIds.forEach(a):this.Qt.forEach((r,i)=>{this.te(i)&&a(i)})}ne(e){var a;const r=e.targetId,i=e.Vt.count,l=this.se(r);if(l){const c=l.target;if(oM(c))if(i===0){const n=new ei(c.path);this.Yt(r,n,vd.newNoDocument(n,zi.min()))}else Uo(i===1);else{const n=this.ie(r);if(n!==i){const v=this.re(e,n);if(v!==0){this.ee(r);const R=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,R)}(a=uL.instance)===null||a===void 0||a.notifyOnExistenceFilterMismatch(function(R,x,N){var I,k,Z,$,H,W;const ee={localCacheCount:x,existenceFilterCount:N.count},oe=N.unchangedNames;return oe&&(ee.bloomFilter={applied:R===0,hashCount:(I=oe==null?void 0:oe.hashCount)!==null&&I!==void 0?I:0,bitmapLength:($=(Z=(k=oe==null?void 0:oe.bits)===null||k===void 0?void 0:k.bitmap)===null||Z===void 0?void 0:Z.length)!==null&&$!==void 0?$:0,padding:(W=(H=oe==null?void 0:oe.bits)===null||H===void 0?void 0:H.padding)!==null&&W!==void 0?W:0}),ee}(v,n,e.Vt))}}}}re(e,a){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:c=0},hashCount:n=0}=r;let v,R;try{v=zv(l).toUint8Array()}catch(x){if(x instanceof rY)return C_("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{R=new cL(v,c,n)}catch(x){return C_(x instanceof dR?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return R.It===0?1:i!==a-this.oe(e.targetId,R)?2:0}oe(e,a){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(l=>{const c=this.Gt.ue(),n=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;a.vt(n)||(this.Yt(e,l,null),i++)}),i}ce(e){const a=new Map;this.Qt.forEach((l,c)=>{const n=this.se(c);if(n){if(l.current&&oM(n.target)){const v=new ei(n.target.path);this.jt.get(v)!==null||this.ae(c,v)||this.Yt(c,v,vd.newNoDocument(v,e))}l.Mt&&(a.set(c,l.Ot()),l.Ft())}});let r=Yi();this.zt.forEach((l,c)=>{let n=!0;c.forEachWhile(v=>{const R=this.se(v);return!R||R.purpose==="TargetPurposeLimboResolution"||(n=!1,!1)}),n&&(r=r.add(l))}),this.jt.forEach((l,c)=>c.setReadTime(e));const i=new iP(e,a,this.Wt,this.jt,r);return this.jt=Lg(),this.zt=FU(),this.Wt=new _u(xs),i}Jt(e,a){if(!this.te(e))return;const r=this.ae(e,a.key)?2:0;this.Zt(e).Bt(a.key,r),this.jt=this.jt.insert(a.key,a),this.zt=this.zt.insert(a.key,this.he(a.key).add(e))}Yt(e,a,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,a)?i.Bt(a,1):i.Lt(a),this.zt=this.zt.insert(a,this.he(a).delete(e)),r&&(this.jt=this.jt.insert(a,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const a=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+a.addedDocuments.size-a.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let a=this.Qt.get(e);return a||(a=new LU,this.Qt.set(e,a)),a}he(e){let a=this.zt.get(e);return a||(a=new Sd(xs),this.zt=this.zt.insert(e,a)),a}te(e){const a=this.se(e)!==null;return a||wn("WatchChangeAggregator","Detected inactive target",e),a}se(e){const a=this.Qt.get(e);return a&&a.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new LU),this.Gt.getRemoteKeysForTarget(e).forEach(a=>{this.Yt(e,a,null)})}ae(e,a){return this.Gt.getRemoteKeysForTarget(e).has(a)}}function FU(){return new _u(ei.comparator)}function kU(){return new _u(ei.comparator)}const Vde={asc:"ASCENDING",desc:"DESCENDING"},zde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dde={and:"AND",or:"OR"};class Mde{constructor(e,a){this.databaseId=e,this.useProto3Json=a}}function dM(t,e){return t.useProto3Json||X2(e)?e:{value:e}}function sx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PY(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ide(t,e){return sx(t,e.toTimestamp())}function jm(t){return Uo(!!t),zi.fromTimestamp(function(e){const a=Jy(e);return new hh(a.seconds,a.nanos)}(t))}function dL(t,e){return function(a){return new $l(["projects",a.projectId,"databases",a.database])}(t).child("documents").child(e).canonicalString()}function EY(t){const e=$l.fromString(t);return Uo(zY(e)),e}function hM(t,e){return dL(t.databaseId,e.path)}function FN(t,e){const a=EY(e);if(a.get(1)!==t.databaseId.projectId)throw new Xr(nr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+t.databaseId.projectId);if(a.get(3)!==t.databaseId.database)throw new Xr(nr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+t.databaseId.database);return new ei(NY(a))}function fM(t,e){return dL(t.databaseId,e)}function Lde(t){const e=EY(t);return e.length===4?$l.emptyPath():NY(e)}function pM(t){return new $l(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NY(t){return Uo(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function UU(t,e,a){return{name:hM(t,e),fields:a.value.mapValue.fields}}function Fde(t,e){let a;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:si()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=function(v,R){return v.useProto3Json?(Uo(R===void 0||typeof R=="string"),Pd.fromBase64String(R||"")):(Uo(R===void 0||R instanceof Uint8Array),Pd.fromUint8Array(R||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,n=c&&function(v){const R=v.code===void 0?nr.UNKNOWN:SY(v.code);return new Xr(R,v.message||"")}(c);a=new xY(r,i,l,n||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=FN(t,r.document.name),l=jm(r.document.updateTime),c=r.document.createTime?jm(r.document.createTime):zi.min(),n=new kh({mapValue:{fields:r.document.fields}}),v=vd.newFoundDocument(i,l,c,n),R=r.targetIds||[],x=r.removedTargetIds||[];a=new Sb(R,x,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=FN(t,r.document),l=r.readTime?jm(r.readTime):zi.min(),c=vd.newNoDocument(i,l),n=r.removedTargetIds||[];a=new Sb([],n,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=FN(t,r.document),l=r.removedTargetIds||[];a=new Sb([],l,i,null)}else{if(!("filter"in e))return si();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:l}=r,c=new xde(i,l),n=r.targetId;a=new bY(n,c)}}return a}function kde(t,e){let a;if(e instanceof iC)a={update:UU(t,e.key,e.value)};else if(e instanceof nP)a={delete:hM(t,e.key)};else if(e instanceof lA)a={update:UU(t,e.key,e.data),updateMask:Kde(e.fieldMask)};else{if(!(e instanceof Cde))return si();a={verify:hM(t,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const c=l.transform;if(c instanceof XR)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof JR)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof QR)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ix)return{fieldPath:l.field.canonicalString(),increment:c.gt};throw si()}(0,r))),e.precondition.isNone||(a.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Ide(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:si()}(t,e.precondition)),a}function Ude(t,e){return t&&t.length>0?(Uo(e!==void 0),t.map(a=>function(r,i){let l=r.updateTime?jm(r.updateTime):jm(i);return l.isEqual(zi.min())&&(l=jm(i)),new wde(l,r.transformResults||[])}(a,e))):[]}function Bde(t,e){return{documents:[fM(t,e.path)]}}function jde(t,e){const a={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(a.parent=fM(t,r),a.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a.parent=fM(t,r.popLast()),a.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(v.length!==0)return VY(Xp.create(v,"and"))}(e.filters);i&&(a.structuredQuery.where=i);const l=function(v){if(v.length!==0)return v.map(R=>function(x){return{field:K0(x.field),direction:qde(x.dir)}}(R))}(e.orderBy);l&&(a.structuredQuery.orderBy=l);const c=dM(t,e.limit);var n;return c!==null&&(a.structuredQuery.limit=c),e.startAt&&(a.structuredQuery.startAt={before:(n=e.startAt).inclusive,values:n.position}),e.endAt&&(a.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),a}function Gde(t){let e=Lde(t.parent);const a=t.structuredQuery,r=a.from?a.from.length:0;let i=null;if(r>0){Uo(r===1);const x=a.from[0];x.allDescendants?i=x.collectionId:e=e.child(x.collectionId)}let l=[];a.where&&(l=function(x){const N=OY(x);return N instanceof Xp&&oY(N)?N.getFilters():[N]}(a.where));let c=[];a.orderBy&&(c=a.orderBy.map(x=>function(N){return new h_(W0(N.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x)));let n=null;a.limit&&(n=function(x){let N;return N=typeof x=="object"?x.value:x,X2(N)?null:N}(a.limit));let v=null;a.startAt&&(v=function(x){const N=!!x.before,I=x.values||[];return new nx(I,N)}(a.startAt));let R=null;return a.endAt&&(R=function(x){const N=!x.before,I=x.values||[];return new nx(I,N)}(a.endAt)),lde(e,i,c,l,n,"F",v,R)}function Zde(t,e){const a=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return si()}}(e.purpose);return a==null?null:{"goog-listen-tags":a}}function OY(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const a=W0(e.unaryFilter.field);return Au.create(a,"==",{doubleValue:NaN});case"IS_NULL":const r=W0(e.unaryFilter.field);return Au.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=W0(e.unaryFilter.field);return Au.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=W0(e.unaryFilter.field);return Au.create(l,"!=",{nullValue:"NULL_VALUE"});default:return si()}}(t):t.fieldFilter!==void 0?function(e){return Au.create(W0(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return si()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Xp.create(e.compositeFilter.filters.map(a=>OY(a)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return si()}}(e.compositeFilter.op))}(t):si()}function qde(t){return Vde[t]}function Hde(t){return zde[t]}function $de(t){return Dde[t]}function K0(t){return{fieldPath:t.canonicalString()}}function W0(t){return Hm.fromServerFormat(t.fieldPath)}function VY(t){return t instanceof Au?function(e){if(e.op==="=="){if(bU(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NAN"}};if(SU(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(bU(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NOT_NAN"}};if(SU(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K0(e.field),op:Hde(e.op),value:e.value}}}(t):t instanceof Xp?function(e){const a=e.getFilters().map(r=>VY(r));return a.length===1?a[0]:{compositeFilter:{op:$de(e.op),filters:a}}}(t):si()}function Kde(t){const e=[];return t.fields.forEach(a=>e.push(a.canonicalString())),{fieldPaths:e}}function zY(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,a,r,i,l=zi.min(),c=zi.min(),n=Pd.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=a,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=n,this.expectedCount=v}withSequenceNumber(e){return new Uy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,a){return new Uy(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wde{constructor(e){this.fe=e}}function Yde(t){const e=Gde({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uM(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xde{constructor(){this.rn=new Jde}addToCollectionParentIndex(e,a){return this.rn.add(a),Br.resolve()}getCollectionParents(e,a){return Br.resolve(this.rn.getEntries(a))}addFieldIndex(e,a){return Br.resolve()}deleteFieldIndex(e,a){return Br.resolve()}getDocumentsMatchingTarget(e,a){return Br.resolve(null)}getIndexType(e,a){return Br.resolve(0)}getFieldIndexes(e,a){return Br.resolve([])}getNextCollectionGroupToUpdate(e){return Br.resolve(null)}getMinOffset(e,a){return Br.resolve($R.min())}getMinOffsetFromCollectionGroup(e,a){return Br.resolve($R.min())}updateCollectionGroup(e,a,r){return Br.resolve()}updateIndexEntries(e,a){return Br.resolve()}}class Jde{constructor(){this.index={}}add(e){const a=e.lastSegment(),r=e.popLast(),i=this.index[a]||new Sd($l.comparator),l=!i.has(r);return this.index[a]=i.add(r),l}has(e){const a=e.lastSegment(),r=e.popLast(),i=this.index[a];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sd($l.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new P_(0)}static Mn(){return new P_(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qde{constructor(){this.changes=new y1(e=>e.toString(),(e,a)=>e.isEqual(a)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,a){this.assertNotApplied(),this.changes.set(e,vd.newInvalidDocument(e).setReadTime(a))}getEntry(e,a){this.assertNotApplied();const r=this.changes.get(a);return r!==void 0?Br.resolve(r):this.getFromCache(e,a)}getEntries(e,a){return this.getAllFromCache(e,a)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ehe{constructor(e,a){this.overlayedDocument=e,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(e,a,r,i){this.remoteDocumentCache=e,this.mutationQueue=a,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,a){let r=null;return this.documentOverlayCache.getOverlay(e,a).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,a))).next(i=>(r!==null&&_R(r.mutation,i,vf.empty(),hh.now()),i))}getDocuments(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.getLocalViewOfDocuments(e,r,Yi()).next(()=>r))}getLocalViewOfDocuments(e,a,r=Yi()){const i=pv();return this.populateOverlays(e,i,a).next(()=>this.computeViews(e,a,i,r).next(l=>{let c=cR();return l.forEach((n,v)=>{c=c.insert(n,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,a){const r=pv();return this.populateOverlays(e,r,a).next(()=>this.computeViews(e,a,r,Yi()))}populateOverlays(e,a,r){const i=[];return r.forEach(l=>{a.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((c,n)=>{a.set(c,n)})})}computeViews(e,a,r,i){let l=Lg();const c=vR(),n=vR();return a.forEach((v,R)=>{const x=r.get(R.key);i.has(R.key)&&(x===void 0||x.mutation instanceof lA)?l=l.insert(R.key,R):x!==void 0?(c.set(R.key,x.mutation.getFieldMask()),_R(x.mutation,R,x.mutation.getFieldMask(),hh.now())):c.set(R.key,vf.empty())}),this.recalculateAndSaveOverlays(e,l).next(v=>(v.forEach((R,x)=>c.set(R,x)),a.forEach((R,x)=>{var N;return n.set(R,new ehe(x,(N=c.get(R))!==null&&N!==void 0?N:null))}),n))}recalculateAndSaveOverlays(e,a){const r=vR();let i=new _u((c,n)=>c-n),l=Yi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,a).next(c=>{for(const n of c)n.keys().forEach(v=>{const R=a.get(v);if(R===null)return;let x=r.get(v)||vf.empty();x=n.applyToLocalView(R,x),r.set(v,x);const N=(i.get(n.batchId)||Yi()).add(v);i=i.insert(n.batchId,N)})}).next(()=>{const c=[],n=i.getReverseIterator();for(;n.hasNext();){const v=n.getNext(),R=v.key,x=v.value,N=gY();x.forEach(I=>{if(!l.has(I)){const k=TY(a.get(I),r.get(I));k!==null&&N.set(I,k),l=l.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(e,R,N))}return Br.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,a,r){return function(i){return ei.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(e,a.path):dY(a)?this.getDocumentsMatchingCollectionGroupQuery(e,a,r):this.getDocumentsMatchingCollectionQuery(e,a,r)}getNextDocuments(e,a,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,a,r,i).next(l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,a,r.largestBatchId,i-l.size):Br.resolve(pv());let n=-1,v=l;return c.next(R=>Br.forEach(R,(x,N)=>(n<N.largestBatchId&&(n=N.largestBatchId),l.get(x)?Br.resolve():this.remoteDocumentCache.getEntry(e,x).next(I=>{v=v.insert(x,I)}))).next(()=>this.populateOverlays(e,R,l)).next(()=>this.computeViews(e,v,R,Yi())).next(x=>({batchId:n,changes:mY(x)})))})}getDocumentsMatchingDocumentQuery(e,a){return this.getDocument(e,new ei(a)).next(r=>{let i=cR();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,a,r){const i=a.collectionGroup;let l=cR();return this.indexManager.getCollectionParents(e,i).next(c=>Br.forEach(c,n=>{const v=function(R,x){return new g1(x,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(a,n.child(i));return this.getDocumentsMatchingCollectionQuery(e,v,r).next(R=>{R.forEach((x,N)=>{l=l.insert(x,N)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,a,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,a.path,r.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,a,r,i))).next(l=>{i.forEach((n,v)=>{const R=v.getKey();l.get(R)===null&&(l=l.insert(R,vd.newInvalidDocument(R)))});let c=cR();return l.forEach((n,v)=>{const R=i.get(n);R!==void 0&&_R(R.mutation,v,vf.empty(),hh.now()),tP(a,v)&&(c=c.insert(n,v))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ahe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,a){return Br.resolve(this.cs.get(a))}saveBundleMetadata(e,a){var r;return this.cs.set(a.id,{id:(r=a).id,version:r.version,createTime:jm(r.createTime)}),Br.resolve()}getNamedQuery(e,a){return Br.resolve(this.hs.get(a))}saveNamedQuery(e,a){return this.hs.set(a.name,function(r){return{name:r.name,query:Yde(r.bundledQuery),readTime:jm(r.readTime)}}(a)),Br.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rhe{constructor(){this.overlays=new _u(ei.comparator),this.ls=new Map}getOverlay(e,a){return Br.resolve(this.overlays.get(a))}getOverlays(e,a){const r=pv();return Br.forEach(a,i=>this.getOverlay(e,i).next(l=>{l!==null&&r.set(i,l)})).next(()=>r)}saveOverlays(e,a,r){return r.forEach((i,l)=>{this.we(e,a,l)}),Br.resolve()}removeOverlaysForBatchId(e,a,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),Br.resolve()}getOverlaysForCollection(e,a,r){const i=pv(),l=a.length+1,c=new ei(a.child("")),n=this.overlays.getIteratorFrom(c);for(;n.hasNext();){const v=n.getNext().value,R=v.getKey();if(!a.isPrefixOf(R.path))break;R.path.length===l&&v.largestBatchId>r&&i.set(v.getKey(),v)}return Br.resolve(i)}getOverlaysForCollectionGroup(e,a,r,i){let l=new _u((R,x)=>R-x);const c=this.overlays.getIterator();for(;c.hasNext();){const R=c.getNext().value;if(R.getKey().getCollectionGroup()===a&&R.largestBatchId>r){let x=l.get(R.largestBatchId);x===null&&(x=pv(),l=l.insert(R.largestBatchId,x)),x.set(R.getKey(),R)}}const n=pv(),v=l.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((R,x)=>n.set(R,x)),!(n.size()>=i)););return Br.resolve(n)}we(e,a,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new bde(a,r));let l=this.ls.get(a);l===void 0&&(l=Yi(),this.ls.set(a,l)),this.ls.set(a,l.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.fs=new Sd(oc.ds),this.ws=new Sd(oc._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,a){const r=new oc(e,a);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,a){e.forEach(r=>this.addReference(r,a))}removeReference(e,a){this.ys(new oc(e,a))}ps(e,a){e.forEach(r=>this.removeReference(r,a))}Is(e){const a=new ei(new $l([])),r=new oc(a,e),i=new oc(a,e+1),l=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),l.push(c.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const a=new ei(new $l([])),r=new oc(a,e),i=new oc(a,e+1);let l=Yi();return this.ws.forEachInRange([r,i],c=>{l=l.add(c.key)}),l}containsKey(e){const a=new oc(e,0),r=this.fs.firstAfterOrEqual(a);return r!==null&&e.isEqual(r.key)}}class oc{constructor(e,a){this.key=e,this.As=a}static ds(e,a){return ei.comparator(e.key,a.key)||xs(e.As,a.As)}static _s(e,a){return xs(e.As,a.As)||ei.comparator(e.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{constructor(e,a){this.indexManager=e,this.referenceDelegate=a,this.mutationQueue=[],this.vs=1,this.Rs=new Sd(oc.ds)}checkEmpty(e){return Br.resolve(this.mutationQueue.length===0)}addMutationBatch(e,a,r,i){const l=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Sde(l,a,r,i);this.mutationQueue.push(c);for(const n of i)this.Rs=this.Rs.add(new oc(n.key,l)),this.indexManager.addToCollectionParentIndex(e,n.key.path.popLast());return Br.resolve(c)}lookupMutationBatch(e,a){return Br.resolve(this.Ps(a))}getNextMutationBatchAfterBatchId(e,a){const r=a+1,i=this.bs(r),l=i<0?0:i;return Br.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Br.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return Br.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){const r=new oc(a,0),i=new oc(a,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,i],c=>{const n=this.Ps(c.As);l.push(n)}),Br.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,a){let r=new Sd(xs);return a.forEach(i=>{const l=new oc(i,0),c=new oc(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,c],n=>{r=r.add(n.As)})}),Br.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,a){const r=a.path,i=r.length+1;let l=r;ei.isDocumentKey(l)||(l=l.child(""));const c=new oc(new ei(l),0);let n=new Sd(xs);return this.Rs.forEachWhile(v=>{const R=v.key.path;return!!r.isPrefixOf(R)&&(R.length===i&&(n=n.add(v.As)),!0)},c),Br.resolve(this.Vs(n))}Vs(e){const a=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&a.push(i)}),a}removeMutationBatch(e,a){Uo(this.Ss(a.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return Br.forEach(a.mutations,i=>{const l=new oc(i.key,a.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,a){const r=new oc(a,0),i=this.Rs.firstAfterOrEqual(r);return Br.resolve(a.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Br.resolve()}Ss(e,a){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const a=this.bs(e);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ihe{constructor(e){this.Ds=e,this.docs=new _u(ei.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,a){const r=a.key,i=this.docs.get(r),l=i?i.size:0,c=this.Ds(a);return this.docs=this.docs.insert(r,{document:a.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const a=this.docs.get(e);a&&(this.docs=this.docs.remove(e),this.size-=a.size)}getEntry(e,a){const r=this.docs.get(a);return Br.resolve(r?r.document.mutableCopy():vd.newInvalidDocument(a))}getEntries(e,a){let r=Lg();return a.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():vd.newInvalidDocument(i))}),Br.resolve(r)}getDocumentsMatchingQuery(e,a,r,i){let l=Lg();const c=a.path,n=new ei(c.child("")),v=this.docs.getIteratorFrom(n);for(;v.hasNext();){const{key:R,value:{document:x}}=v.getNext();if(!c.isPrefixOf(R.path))break;R.path.length>c.length+1||qce(Zce(x),r)<=0||(i.has(x.key)||tP(a,x))&&(l=l.insert(x.key,x.mutableCopy()))}return Br.resolve(l)}getAllFromCollectionGroup(e,a,r,i){si()}Cs(e,a){return Br.forEach(this.docs,r=>a(r))}newChangeBuffer(e){return new she(this)}getSize(e){return Br.resolve(this.size)}}class she extends Qde{constructor(e){super(),this.os=e}applyChanges(e){const a=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?a.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Br.waitFor(a)}getFromCache(e,a){return this.os.getEntry(e,a)}getAllFromCache(e,a){return this.os.getEntries(e,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ohe{constructor(e){this.persistence=e,this.xs=new y1(a=>iL(a),sL),this.lastRemoteSnapshotVersion=zi.min(),this.highestTargetId=0,this.Ns=0,this.ks=new hL,this.targetCount=0,this.Ms=P_.kn()}forEachTarget(e,a){return this.xs.forEach((r,i)=>a(i)),Br.resolve()}getLastRemoteSnapshotVersion(e){return Br.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Br.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Br.resolve(this.highestTargetId)}setTargetsMetadata(e,a,r){return r&&(this.lastRemoteSnapshotVersion=r),a>this.Ns&&(this.Ns=a),Br.resolve()}Fn(e){this.xs.set(e.target,e);const a=e.targetId;a>this.highestTargetId&&(this.Ms=new P_(a),this.highestTargetId=a),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,a){return this.Fn(a),this.targetCount+=1,Br.resolve()}updateTargetData(e,a){return this.Fn(a),Br.resolve()}removeTargetData(e,a){return this.xs.delete(a.target),this.ks.Is(a.targetId),this.targetCount-=1,Br.resolve()}removeTargets(e,a,r){let i=0;const l=[];return this.xs.forEach((c,n)=>{n.sequenceNumber<=a&&r.get(n.targetId)===null&&(this.xs.delete(c),l.push(this.removeMatchingKeysForTargetId(e,n.targetId)),i++)}),Br.waitFor(l).next(()=>i)}getTargetCount(e){return Br.resolve(this.targetCount)}getTargetData(e,a){const r=this.xs.get(a)||null;return Br.resolve(r)}addMatchingKeys(e,a,r){return this.ks.gs(a,r),Br.resolve()}removeMatchingKeys(e,a,r){this.ks.ps(a,r);const i=this.persistence.referenceDelegate,l=[];return i&&a.forEach(c=>{l.push(i.markPotentiallyOrphaned(e,c))}),Br.waitFor(l)}removeMatchingKeysForTargetId(e,a){return this.ks.Is(a),Br.resolve()}getMatchingKeysForTargetId(e,a){const r=this.ks.Es(a);return Br.resolve(r)}containsKey(e,a){return Br.resolve(this.ks.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lhe{constructor(e,a){this.$s={},this.overlays={},this.Os=new tL(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ohe(this),this.indexManager=new Xde,this.remoteDocumentCache=function(r){return new ihe(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new Wde(a),this.qs=new ahe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let a=this.overlays[e.toKey()];return a||(a=new rhe,this.overlays[e.toKey()]=a),a}getMutationQueue(e,a){let r=this.$s[e.toKey()];return r||(r=new nhe(a,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,a,r){wn("MemoryPersistence","Starting transaction:",e);const i=new uhe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(l=>this.referenceDelegate.Ks(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Gs(e,a){return Br.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,a)))}}class uhe extends $ce{constructor(e){super(),this.currentSequenceNumber=e}}class fL{constructor(e){this.persistence=e,this.Qs=new hL,this.js=null}static zs(e){return new fL(e)}get Ws(){if(this.js)return this.js;throw si()}addReference(e,a,r){return this.Qs.addReference(r,a),this.Ws.delete(r.toString()),Br.resolve()}removeReference(e,a,r){return this.Qs.removeReference(r,a),this.Ws.add(r.toString()),Br.resolve()}markPotentiallyOrphaned(e,a){return this.Ws.add(a.toString()),Br.resolve()}removeTarget(e,a){this.Qs.Is(a.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,a.targetId).next(i=>{i.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,a))}Us(){this.js=new Set}Ks(e){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Br.forEach(this.Ws,r=>{const i=ei.fromPath(r);return this.Hs(e,i).next(l=>{l||a.removeEntry(i,zi.min())})}).next(()=>(this.js=null,a.apply(e)))}updateLimboDocument(e,a){return this.Hs(e,a).next(r=>{r?this.Ws.delete(a.toString()):this.Ws.add(a.toString())})}Ls(e){return 0}Hs(e,a){return Br.or([()=>Br.resolve(this.Qs.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(e,a),()=>this.persistence.Gs(e,a)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,a,r,i){this.targetId=e,this.fromCache=a,this.Fi=r,this.Bi=i}static Li(e,a){let r=Yi(),i=Yi();for(const l of a.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new pL(e,a.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(){this.qi=!1}initialize(e,a){this.Ui=e,this.indexManager=a,this.qi=!0}getDocumentsMatchingQuery(e,a,r,i){return this.Ki(e,a).next(l=>l||this.Gi(e,a,i,r)).next(l=>l||this.Qi(e,a))}Ki(e,a){if(NU(a))return Br.resolve(null);let r=Ig(a);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(a.limit!==null&&i===1&&(a=uM(a,null,"F"),r=Ig(a)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Yi(...l);return this.Ui.getDocuments(e,c).next(n=>this.indexManager.getMinOffset(e,r).next(v=>{const R=this.ji(a,n);return this.zi(a,R,c,v.readTime)?this.Ki(e,uM(a,null,"F")):this.Wi(e,R,a,v)}))})))}Gi(e,a,r,i){return NU(a)||i.isEqual(zi.min())?this.Qi(e,a):this.Ui.getDocuments(e,r).next(l=>{const c=this.ji(a,l);return this.zi(a,c,r,i)?this.Qi(e,a):(_U()<=Rs.DEBUG&&wn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cM(a)),this.Wi(e,c,a,Gce(i,-1)))})}ji(e,a){let r=new Sd(fY(e));return a.forEach((i,l)=>{tP(e,l)&&(r=r.add(l))}),r}zi(e,a,r,i){if(e.limit===null)return!1;if(r.size!==a.size)return!0;const l=e.limitType==="F"?a.last():a.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Qi(e,a){return _U()<=Rs.DEBUG&&wn("QueryEngine","Using full collection scan to execute query:",cM(a)),this.Ui.getDocumentsMatchingQuery(e,a,$R.min())}Wi(e,a,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(l=>(a.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dhe{constructor(e,a,r,i){this.persistence=e,this.Hi=a,this.serializer=i,this.Ji=new _u(xs),this.Yi=new y1(l=>iL(l),sL),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new the(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>e.collect(a,this.Ji))}}function hhe(t,e,a,r){return new dhe(t,e,a,r)}async function DY(t,e){const a=_i(t);return await a.persistence.runTransaction("Handle user change","readonly",r=>{let i;return a.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,a.tr(e),a.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],n=[];let v=Yi();for(const R of i){c.push(R.batchId);for(const x of R.mutations)v=v.add(x.key)}for(const R of l){n.push(R.batchId);for(const x of R.mutations)v=v.add(x.key)}return a.localDocuments.getDocuments(r,v).next(R=>({er:R,removedBatchIds:c,addedBatchIds:n}))})})}function fhe(t,e){const a=_i(t);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=a.Zi.newChangeBuffer({trackRemovals:!0});return function(c,n,v,R){const x=v.batch,N=x.keys();let I=Br.resolve();return N.forEach(k=>{I=I.next(()=>R.getEntry(n,k)).next(Z=>{const $=v.docVersions.get(k);Uo($!==null),Z.version.compareTo($)<0&&(x.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),R.addEntry(Z)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(n,x))}(a,r,e,l).next(()=>l.apply(r)).next(()=>a.mutationQueue.performConsistencyCheck(r)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let n=Yi();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(n=n.add(c.batch.mutations[v].key));return n}(e))).next(()=>a.localDocuments.getDocuments(r,i))})}function MY(t){const e=_i(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",a=>e.Bs.getLastRemoteSnapshotVersion(a))}function phe(t,e){const a=_i(t),r=e.snapshotVersion;let i=a.Ji;return a.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=a.Zi.newChangeBuffer({trackRemovals:!0});i=a.Ji;const n=[];e.targetChanges.forEach((x,N)=>{const I=i.get(N);if(!I)return;n.push(a.Bs.removeMatchingKeys(l,x.removedDocuments,N).next(()=>a.Bs.addMatchingKeys(l,x.addedDocuments,N)));let k=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(N)!==null?k=k.withResumeToken(Pd.EMPTY_BYTE_STRING,zi.min()).withLastLimboFreeSnapshotVersion(zi.min()):x.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(x.resumeToken,r)),i=i.insert(N,k),function(Z,$,H){return Z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(I,k,x)&&n.push(a.Bs.updateTargetData(l,k))});let v=Lg(),R=Yi();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&n.push(a.persistence.referenceDelegate.updateLimboDocument(l,x))}),n.push(mhe(l,c,e.documentUpdates).next(x=>{v=x.nr,R=x.sr})),!r.isEqual(zi.min())){const x=a.Bs.getLastRemoteSnapshotVersion(l).next(N=>a.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));n.push(x)}return Br.waitFor(n).next(()=>c.apply(l)).next(()=>a.localDocuments.getLocalViewOfDocuments(l,v,R)).next(()=>v)}).then(l=>(a.Ji=i,l))}function mhe(t,e,a){let r=Yi(),i=Yi();return a.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let c=Lg();return a.forEach((n,v)=>{const R=l.get(n);v.isFoundDocument()!==R.isFoundDocument()&&(i=i.add(n)),v.isNoDocument()&&v.version.isEqual(zi.min())?(e.removeEntry(n,v.readTime),c=c.insert(n,v)):!R.isValidDocument()||v.version.compareTo(R.version)>0||v.version.compareTo(R.version)===0&&R.hasPendingWrites?(e.addEntry(v),c=c.insert(n,v)):wn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",R.version," Watch version:",v.version)}),{nr:c,sr:i}})}function ghe(t,e){const a=_i(t);return a.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),a.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yhe(t,e){const a=_i(t);return a.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return a.Bs.getTargetData(r,e).next(l=>l?(i=l,Br.resolve(i)):a.Bs.allocateTargetId(r).next(c=>(i=new Uy(e,c,"TargetPurposeListen",r.currentSequenceNumber),a.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=a.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(a.Ji=a.Ji.insert(r.targetId,r),a.Yi.set(e,r.targetId)),r})}async function mM(t,e,a){const r=_i(t),i=r.Ji.get(e),l=a?"readwrite":"readwrite-primary";try{a||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!nC(c))throw c;wn("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function BU(t,e,a){const r=_i(t);let i=zi.min(),l=Yi();return r.persistence.runTransaction("Execute query","readonly",c=>function(n,v,R){const x=_i(n),N=x.Yi.get(R);return N!==void 0?Br.resolve(x.Ji.get(N)):x.Bs.getTargetData(v,R)}(r,c,Ig(e)).next(n=>{if(n)return i=n.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,n.targetId).next(v=>{l=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,a?i:zi.min(),a?l:Yi())).next(n=>(Ahe(r,ude(e),n),{documents:n,ir:l})))}function Ahe(t,e,a){let r=t.Xi.get(e)||zi.min();a.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.Xi.set(e,r)}class jU{constructor(){this.activeTargetIds=mde()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vhe{constructor(){this.Hr=new jU,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,a,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,a,r){this.Jr[e]=a}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new jU,Promise.resolve()}handleUserChange(e,a,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _he{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){wn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){wn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qS=null;function kN(){return qS===null?qS=268435456+Math.round(2147483648*Math.random()):qS++,"0x"+qS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const whe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="WebChannelConnection";class The extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const a=e.ssl?"https":"http";this.mo=a+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,a,r,i,l){const c=kN(),n=this.To(e,a);wn("RestConnection",`Sending RPC '${e}' ${c}:`,n,r);const v={};return this.Eo(v,i,l),this.Ao(e,n,v,r).then(R=>(wn("RestConnection",`Received RPC '${e}' ${c}: `,R),R),R=>{throw C_("RestConnection",`RPC '${e}' ${c} failed with error: `,R,"url: ",n,"request:",r),R})}vo(e,a,r,i,l,c){return this.Io(e,a,r,i,l)}Eo(e,a,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+m1,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}To(e,a){const r=whe[e];return`${this.mo}/v1/${a}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,a,r,i){const l=kN();return new Promise((c,n)=>{const v=new Vce;v.setWithCredentials(!0),v.listenOnce(Ece.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case LN.NO_ERROR:const x=v.getResponseJson();wn(cd,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),c(x);break;case LN.TIMEOUT:wn(cd,`RPC '${e}' ${l} timed out`),n(new Xr(nr.DEADLINE_EXCEEDED,"Request time out"));break;case LN.HTTP_ERROR:const N=v.getStatus();if(wn(cd,`RPC '${e}' ${l} failed with status:`,N,"response text:",v.getResponseText()),N>0){let I=v.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const Z=function($){const H=$.toLowerCase().replace(/_/g,"-");return Object.values(nr).indexOf(H)>=0?H:nr.UNKNOWN}(k.status);n(new Xr(Z,k.message))}else n(new Xr(nr.UNKNOWN,"Server responded with status "+v.getStatus()))}else n(new Xr(nr.UNAVAILABLE,"Connection failed."));break;default:si()}}finally{wn(cd,`RPC '${e}' ${l} completed.`)}});const R=JSON.stringify(i);wn(cd,`RPC '${e}' ${l} sending request:`,i),v.send(a,"POST",R,r,15)})}Ro(e,a,r){const i=kN(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=xce(),n=Pce(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},R=this.longPollingOptions.timeoutSeconds;R!==void 0&&(v.longPollingTimeout=Math.round(1e3*R)),this.useFetchStreams&&(v.xmlHttpFactory=new Oce({})),this.Eo(v.initMessageHeaders,a,r),v.encodeInitMessageHeaders=!0;const x=l.join("");wn(cd,`Creating RPC '${e}' stream ${i}: ${x}`,v);const N=c.createWebChannel(x,v);let I=!1,k=!1;const Z=new Rhe({ro:H=>{k?wn(cd,`Not sending because RPC '${e}' stream ${i} is closed:`,H):(I||(wn(cd,`Opening RPC '${e}' stream ${i} transport.`),N.open(),I=!0),wn(cd,`RPC '${e}' stream ${i} sending:`,H),N.send(H))},oo:()=>N.close()}),$=(H,W,ee)=>{H.listen(W,oe=>{try{ee(oe)}catch(pe){setTimeout(()=>{throw pe},0)}})};return $(N,BS.EventType.OPEN,()=>{k||wn(cd,`RPC '${e}' stream ${i} transport opened.`)}),$(N,BS.EventType.CLOSE,()=>{k||(k=!0,wn(cd,`RPC '${e}' stream ${i} transport closed`),Z.wo())}),$(N,BS.EventType.ERROR,H=>{k||(k=!0,C_(cd,`RPC '${e}' stream ${i} transport errored:`,H),Z.wo(new Xr(nr.UNAVAILABLE,"The operation could not be completed")))}),$(N,BS.EventType.MESSAGE,H=>{var W;if(!k){const ee=H.data[0];Uo(!!ee);const oe=ee,pe=oe.error||((W=oe[0])===null||W===void 0?void 0:W.error);if(pe){wn(cd,`RPC '${e}' stream ${i} received error:`,pe);const le=pe.status;let ge=function(Re){const we=pu[Re];if(we!==void 0)return SY(we)}(le),ue=pe.message;ge===void 0&&(ge=nr.INTERNAL,ue="Unknown error status: "+le+" with message "+pe.message),k=!0,Z.wo(new Xr(ge,ue)),N.close()}else wn(cd,`RPC '${e}' stream ${i} received:`,ee),Z._o(ee)}}),$(n,Nce.STAT_EVENT,H=>{H.stat===AU.PROXY?wn(cd,`RPC '${e}' stream ${i} detected buffering proxy`):H.stat===AU.NOPROXY&&wn(cd,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function UN(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){return new Mde(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(e,a,r=1e3,i=1.5,l=6e4){this.ii=e,this.timerId=a,this.Po=r,this.bo=i,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const a=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,a-r);i>0&&wn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${a} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(e,a,r,i,l,c,n,v){this.ii=e,this.$o=r,this.Oo=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=n,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new IY(e,a)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,a){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():a&&a.code===nr.RESOURCE_EXHAUSTED?(Mg(a.toString()),Mg("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):a&&a.code===nr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(a)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),a=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===a&&this.Zo(r,i)},r=>{e(()=>{const i=new Xr(nr.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,a){const r=this.Xo(this.Fo);this.stream=this.eu(e,a),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return wn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return a=>{this.ii.enqueueAndForget(()=>this.Fo===e?a():(wn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Che extends LY{constructor(e,a,r,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,r,i,c),this.serializer=l}eu(e,a){return this.connection.Ro("Listen",e,a)}onMessage(e){this.qo.reset();const a=Fde(this.serializer,e),r=function(i){if(!("targetChange"in i))return zi.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?zi.min():l.readTime?jm(l.readTime):zi.min()}(e);return this.listener.nu(a,r)}su(e){const a={};a.database=pM(this.serializer),a.addTarget=function(i,l){let c;const n=l.target;if(c=oM(n)?{documents:Bde(i,n)}:{query:jde(i,n)},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=PY(i,l.resumeToken);const v=dM(i,l.expectedCount);v!==null&&(c.expectedCount=v)}else if(l.snapshotVersion.compareTo(zi.min())>0){c.readTime=sx(i,l.snapshotVersion.toTimestamp());const v=dM(i,l.expectedCount);v!==null&&(c.expectedCount=v)}return c}(this.serializer,e);const r=Zde(this.serializer,e);r&&(a.labels=r),this.Wo(a)}iu(e){const a={};a.database=pM(this.serializer),a.removeTarget=e,this.Wo(a)}}class She extends LY{constructor(e,a,r,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,r,i,c),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,a){return this.connection.Ro("Write",e,a)}onMessage(e){if(Uo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const a=Ude(e.writeResults,e.commitTime),r=jm(e.commitTime);return this.listener.cu(r,a)}return Uo(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=pM(this.serializer),this.Wo(e)}uu(e){const a={streamToken:this.lastStreamToken,writes:e.map(r=>kde(this.serializer,r))};this.Wo(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bhe extends class{}{constructor(e,a,r,i){super(),this.authCredentials=e,this.appCheckCredentials=a,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Xr(nr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,a,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Io(e,a,r,i,l)).catch(i=>{throw i.name==="FirebaseError"?(i.code===nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xr(nr.UNKNOWN,i.toString())})}vo(e,a,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.vo(e,a,r,l,c,i)).catch(l=>{throw l.name==="FirebaseError"?(l.code===nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Xr(nr.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class xhe{constructor(e,a){this.asyncQueue=e,this.onlineStateHandler=a,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const a=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Mg(a),this.mu=!1):wn("OnlineStateTracker",a)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Phe{constructor(e,a,r,i,l){this.localStore=e,this.datastore=a,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(c=>{r.enqueueAndForget(async()=>{Hv(this)&&(wn("RemoteStore","Restarting streams for network reachability change."),await async function(n){const v=_i(n);v.vu.add(4),await oC(v),v.bu.set("Unknown"),v.vu.delete(4),await oP(v)}(this))})}),this.bu=new xhe(r,i)}}async function oP(t){if(Hv(t))for(const e of t.Ru)await e(!0)}async function oC(t){for(const e of t.Ru)await e(!1)}function FY(t,e){const a=_i(t);a.Au.has(e.targetId)||(a.Au.set(e.targetId,e),yL(a)?gL(a):A1(a).Ko()&&mL(a,e))}function kY(t,e){const a=_i(t),r=A1(a);a.Au.delete(e),r.Ko()&&UY(a,e),a.Au.size===0&&(r.Ko()?r.jo():Hv(a)&&a.bu.set("Unknown"))}function mL(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zi.min())>0){const a=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(a)}A1(t).su(e)}function UY(t,e){t.Vu.qt(e),A1(t).iu(e)}function gL(t){t.Vu=new Ode({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),A1(t).start(),t.bu.gu()}function yL(t){return Hv(t)&&!A1(t).Uo()&&t.Au.size>0}function Hv(t){return _i(t).vu.size===0}function BY(t){t.Vu=void 0}async function Ehe(t){t.Au.forEach((e,a)=>{mL(t,e)})}async function Nhe(t,e){BY(t),yL(t)?(t.bu.Iu(e),gL(t)):t.bu.set("Unknown")}async function Ohe(t,e,a){if(t.bu.set("Online"),e instanceof xY&&e.state===2&&e.cause)try{await async function(r,i){const l=i.cause;for(const c of i.targetIds)r.Au.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Au.delete(c),r.Vu.removeTarget(c))}(t,e)}catch(r){wn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ox(t,r)}else if(e instanceof Sb?t.Vu.Ht(e):e instanceof bY?t.Vu.ne(e):t.Vu.Xt(e),!a.isEqual(zi.min()))try{const r=await MY(t.localStore);a.compareTo(r)>=0&&await function(i,l){const c=i.Vu.ce(l);return c.targetChanges.forEach((n,v)=>{if(n.resumeToken.approximateByteSize()>0){const R=i.Au.get(v);R&&i.Au.set(v,R.withResumeToken(n.resumeToken,l))}}),c.targetMismatches.forEach((n,v)=>{const R=i.Au.get(n);if(!R)return;i.Au.set(n,R.withResumeToken(Pd.EMPTY_BYTE_STRING,R.snapshotVersion)),UY(i,n);const x=new Uy(R.target,n,v,R.sequenceNumber);mL(i,x)}),i.remoteSyncer.applyRemoteEvent(c)}(t,a)}catch(r){wn("RemoteStore","Failed to raise snapshot:",r),await ox(t,r)}}async function ox(t,e,a){if(!nC(e))throw e;t.vu.add(1),await oC(t),t.bu.set("Offline"),a||(a=()=>MY(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{wn("RemoteStore","Retrying IndexedDB access"),await a(),t.vu.delete(1),await oP(t)})}function jY(t,e){return e().catch(a=>ox(t,a,e))}async function lP(t){const e=_i(t),a=Qy(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Vhe(e);)try{const i=await ghe(e.localStore,r);if(i===null){e.Eu.length===0&&a.jo();break}r=i.batchId,zhe(e,i)}catch(i){await ox(e,i)}GY(e)&&ZY(e)}function Vhe(t){return Hv(t)&&t.Eu.length<10}function zhe(t,e){t.Eu.push(e);const a=Qy(t);a.Ko()&&a.ou&&a.uu(e.mutations)}function GY(t){return Hv(t)&&!Qy(t).Uo()&&t.Eu.length>0}function ZY(t){Qy(t).start()}async function Dhe(t){Qy(t).hu()}async function Mhe(t){const e=Qy(t);for(const a of t.Eu)e.uu(a.mutations)}async function Ihe(t,e,a){const r=t.Eu.shift(),i=lL.from(r,e,a);await jY(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lP(t)}async function Lhe(t,e){e&&Qy(t).ou&&await async function(a,r){if(i=r.code,Pde(i)&&i!==nr.ABORTED){const l=a.Eu.shift();Qy(a).Qo(),await jY(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,r)),await lP(a)}var i}(t,e),GY(t)&&ZY(t)}async function ZU(t,e){const a=_i(t);a.asyncQueue.verifyOperationInProgress(),wn("RemoteStore","RemoteStore received new credentials");const r=Hv(a);a.vu.add(3),await oC(a),r&&a.bu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(e),a.vu.delete(3),await oP(a)}async function Fhe(t,e){const a=_i(t);e?(a.vu.delete(2),await oP(a)):e||(a.vu.add(2),await oC(a),a.bu.set("Unknown"))}function A1(t){return t.Su||(t.Su=function(e,a,r){const i=_i(e);return i.fu(),new Che(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:Ehe.bind(null,t),ao:Nhe.bind(null,t),nu:Ohe.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),yL(t)?gL(t):t.bu.set("Unknown")):(await t.Su.stop(),BY(t))})),t.Su}function Qy(t){return t.Du||(t.Du=function(e,a,r){const i=_i(e);return i.fu(),new She(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:Dhe.bind(null,t),ao:Lhe.bind(null,t),au:Mhe.bind(null,t),cu:Ihe.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await lP(t)):(await t.Du.stop(),t.Eu.length>0&&(wn("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,a,r,i,l){this.asyncQueue=e,this.timerId=a,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Eg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,a,r,i,l){const c=Date.now()+r,n=new AL(e,a,c,i,l);return n.start(r),n}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xr(nr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vL(t,e){if(Mg("AsyncQueue",`${e}: ${t}`),nC(t))return new Xr(nr.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.comparator=e?(a,r)=>e(a,r)||ei.comparator(a.key,r.key):(a,r)=>ei.comparator(a.key,r.key),this.keyedMap=cR(),this.sortedSet=new _u(this.comparator)}static emptySet(e){return new p_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const a=this.keyedMap.get(e);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((a,r)=>(e(a),!1))}add(e){const a=this.delete(e.key);return a.copy(a.keyedMap.insert(e.key,e),a.sortedSet.insert(e,null))}delete(e){const a=this.get(e);return a?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(a)):this}isEqual(e){if(!(e instanceof p_)||this.size!==e.size)return!1;const a=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;a.hasNext();){const i=a.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(a=>{e.push(a.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,a){const r=new p_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=a,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(){this.Cu=new _u(ei.comparator)}track(e){const a=e.doc.key,r=this.Cu.get(a);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(a,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(a,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(a,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(a):e.type===1&&r.type===2?this.Cu=this.Cu.insert(a,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):si():this.Cu=this.Cu.insert(a,e)}xu(){const e=[];return this.Cu.inorderTraversal((a,r)=>{e.push(r)}),e}}class E_{constructor(e,a,r,i,l,c,n,v,R){this.query=e,this.docs=a,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=n,this.excludesMetadataChanges=v,this.hasCachedResults=R}static fromInitialDocuments(e,a,r,i,l){const c=[];return a.forEach(n=>{c.push({type:0,doc:n})}),new E_(e,a,p_.emptySet(a),c,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eP(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const a=this.docChanges,r=e.docChanges;if(a.length!==r.length)return!1;for(let i=0;i<a.length;i++)if(a[i].type!==r[i].type||!a[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class khe{constructor(){this.Nu=void 0,this.listeners=[]}}class Uhe{constructor(){this.queries=new y1(e=>hY(e),eP),this.onlineState="Unknown",this.ku=new Set}}async function _L(t,e){const a=_i(t),r=e.query;let i=!1,l=a.queries.get(r);if(l||(i=!0,l=new khe),i)try{l.Nu=await a.onListen(r)}catch(c){const n=vL(c,`Initialization of query '${cM(e.query)}' failed`);return void e.onError(n)}a.queries.set(r,l),l.listeners.push(e),e.Mu(a.onlineState),l.Nu&&e.$u(l.Nu)&&RL(a)}async function wL(t,e){const a=_i(t),r=e.query;let i=!1;const l=a.queries.get(r);if(l){const c=l.listeners.indexOf(e);c>=0&&(l.listeners.splice(c,1),i=l.listeners.length===0)}if(i)return a.queries.delete(r),a.onUnlisten(r)}function Bhe(t,e){const a=_i(t);let r=!1;for(const i of e){const l=i.query,c=a.queries.get(l);if(c){for(const n of c.listeners)n.$u(i)&&(r=!0);c.Nu=i}}r&&RL(a)}function jhe(t,e,a){const r=_i(t),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(a);r.queries.delete(e)}function RL(t){t.ku.forEach(e=>{e.next()})}class TL{constructor(e,a,r){this.query=e,this.Ou=a,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new E_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let a=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),a=!0),a}qu(e,a){if(!e.fromCache)return!0;const r=a!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||a==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const a=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Uu(e){e=E_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(e){this.key=e}}class HY{constructor(e){this.key=e}}class Ghe{constructor(e,a){this.query=e,this.Yu=a,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Yi(),this.mutatedKeys=Yi(),this.tc=fY(e),this.ec=new p_(this.tc)}get nc(){return this.Yu}sc(e,a){const r=a?a.ic:new qU,i=a?a.ec:this.ec;let l=a?a.mutatedKeys:this.mutatedKeys,c=i,n=!1;const v=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,R=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((x,N)=>{const I=i.get(x),k=tP(this.query,N)?N:null,Z=!!I&&this.mutatedKeys.has(I.key),$=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let H=!1;I&&k?I.data.isEqual(k.data)?Z!==$&&(r.track({type:3,doc:k}),H=!0):this.rc(I,k)||(r.track({type:2,doc:k}),H=!0,(v&&this.tc(k,v)>0||R&&this.tc(k,R)<0)&&(n=!0)):!I&&k?(r.track({type:0,doc:k}),H=!0):I&&!k&&(r.track({type:1,doc:I}),H=!0,(v||R)&&(n=!0)),H&&(k?(c=c.add(k),l=$?l.add(x):l.delete(x)):(c=c.delete(x),l=l.delete(x)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{ec:c,ic:r,zi:n,mutatedKeys:l}}rc(e,a){return e.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(e,a,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((R,x)=>function(N,I){const k=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return si()}};return k(N)-k(I)}(R.type,x.type)||this.tc(R.doc,x.doc)),this.oc(r);const c=a?this.uc():[],n=this.Zu.size===0&&this.current?1:0,v=n!==this.Xu;return this.Xu=n,l.length!==0||v?{snapshot:new E_(this.query,e.ec,i,l,e.mutatedKeys,n===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new qU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(a=>this.Yu=this.Yu.add(a)),e.modifiedDocuments.forEach(a=>{}),e.removedDocuments.forEach(a=>this.Yu=this.Yu.delete(a)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Yi(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const a=[];return e.forEach(r=>{this.Zu.has(r)||a.push(new HY(r))}),this.Zu.forEach(r=>{e.has(r)||a.push(new qY(r))}),a}hc(e){this.Yu=e.ir,this.Zu=Yi();const a=this.sc(e.documents);return this.applyChanges(a,!0)}lc(){return E_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class Zhe{constructor(e,a,r){this.query=e,this.targetId=a,this.view=r}}class qhe{constructor(e){this.key=e,this.fc=!1}}class Hhe{constructor(e,a,r,i,l,c){this.localStore=e,this.remoteStore=a,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new y1(n=>hY(n),eP),this._c=new Map,this.mc=new Set,this.gc=new _u(ei.comparator),this.yc=new Map,this.Ic=new hL,this.Tc={},this.Ec=new Map,this.Ac=P_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function $he(t,e){const a=rfe(t);let r,i;const l=a.wc.get(e);if(l)r=l.targetId,a.sharedClientState.addLocalQueryTarget(r),i=l.view.lc();else{const c=await yhe(a.localStore,Ig(e)),n=a.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=await Khe(a,e,r,n==="current",c.resumeToken),a.isPrimaryClient&&FY(a.remoteStore,c)}return i}async function Khe(t,e,a,r,i){t.Rc=(N,I,k)=>async function(Z,$,H,W){let ee=$.view.sc(H);ee.zi&&(ee=await BU(Z.localStore,$.query,!1).then(({documents:le})=>$.view.sc(le,ee)));const oe=W&&W.targetChanges.get($.targetId),pe=$.view.applyChanges(ee,Z.isPrimaryClient,oe);return $U(Z,$.targetId,pe.cc),pe.snapshot}(t,N,I,k);const l=await BU(t.localStore,e,!0),c=new Ghe(e,l.ir),n=c.sc(l.documents),v=sC.createSynthesizedTargetChangeForCurrentChange(a,r&&t.onlineState!=="Offline",i),R=c.applyChanges(n,t.isPrimaryClient,v);$U(t,a,R.cc);const x=new Zhe(e,a,c);return t.wc.set(e,x),t._c.has(a)?t._c.get(a).push(e):t._c.set(a,[e]),R.snapshot}async function Whe(t,e){const a=_i(t),r=a.wc.get(e),i=a._c.get(r.targetId);if(i.length>1)return a._c.set(r.targetId,i.filter(l=>!eP(l,e))),void a.wc.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(r.targetId),a.sharedClientState.isActiveQueryTarget(r.targetId)||await mM(a.localStore,r.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(r.targetId),kY(a.remoteStore,r.targetId),gM(a,r.targetId)}).catch(rC)):(gM(a,r.targetId),await mM(a.localStore,r.targetId,!0))}async function Yhe(t,e,a){const r=nfe(t);try{const i=await function(l,c){const n=_i(l),v=hh.now(),R=c.reduce((I,k)=>I.add(k.key),Yi());let x,N;return n.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=Lg(),Z=Yi();return n.Zi.getEntries(I,R).next($=>{k=$,k.forEach((H,W)=>{W.isValidDocument()||(Z=Z.add(H))})}).next(()=>n.localDocuments.getOverlayedDocuments(I,k)).next($=>{x=$;const H=[];for(const W of c){const ee=Tde(W,x.get(W.key).overlayedDocument);ee!=null&&H.push(new lA(W.key,ee,nY(ee.value.mapValue),fh.exists(!0)))}return n.mutationQueue.addMutationBatch(I,v,H,c)}).next($=>{N=$;const H=$.applyToLocalDocumentSet(x,Z);return n.documentOverlayCache.saveOverlays(I,$.batchId,H)})}).then(()=>({batchId:N.batchId,changes:mY(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,n){let v=l.Tc[l.currentUser.toKey()];v||(v=new _u(xs)),v=v.insert(c,n),l.Tc[l.currentUser.toKey()]=v}(r,i.batchId,a),await lC(r,i.changes),await lP(r.remoteStore)}catch(i){const l=vL(i,"Failed to persist write");a.reject(l)}}async function $Y(t,e){const a=_i(t);try{const r=await phe(a.localStore,e);e.targetChanges.forEach((i,l)=>{const c=a.yc.get(l);c&&(Uo(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Uo(c.fc):i.removedDocuments.size>0&&(Uo(c.fc),c.fc=!1))}),await lC(a,r,e)}catch(r){await rC(r)}}function HU(t,e,a){const r=_i(t);if(r.isPrimaryClient&&a===0||!r.isPrimaryClient&&a===1){const i=[];r.wc.forEach((l,c)=>{const n=c.view.Mu(e);n.snapshot&&i.push(n.snapshot)}),function(l,c){const n=_i(l);n.onlineState=c;let v=!1;n.queries.forEach((R,x)=>{for(const N of x.listeners)N.Mu(c)&&(v=!0)}),v&&RL(n)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Xhe(t,e,a){const r=_i(t);r.sharedClientState.updateQueryState(e,"rejected",a);const i=r.yc.get(e),l=i&&i.key;if(l){let c=new _u(ei.comparator);c=c.insert(l,vd.newNoDocument(l,zi.min()));const n=Yi().add(l),v=new iP(zi.min(),new Map,new _u(xs),c,n);await $Y(r,v),r.gc=r.gc.remove(l),r.yc.delete(e),CL(r)}else await mM(r.localStore,e,!1).then(()=>gM(r,e,a)).catch(rC)}async function Jhe(t,e){const a=_i(t),r=e.batch.batchId;try{const i=await fhe(a.localStore,e);WY(a,r,null),KY(a,r),a.sharedClientState.updateMutationState(r,"acknowledged"),await lC(a,i)}catch(i){await rC(i)}}async function Qhe(t,e,a){const r=_i(t);try{const i=await function(l,c){const n=_i(l);return n.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let R;return n.mutationQueue.lookupMutationBatch(v,c).next(x=>(Uo(x!==null),R=x.keys(),n.mutationQueue.removeMutationBatch(v,x))).next(()=>n.mutationQueue.performConsistencyCheck(v)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(v,R,c)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,R)).next(()=>n.localDocuments.getDocuments(v,R))})}(r.localStore,e);WY(r,e,a),KY(r,e),r.sharedClientState.updateMutationState(e,"rejected",a),await lC(r,i)}catch(i){await rC(i)}}function KY(t,e){(t.Ec.get(e)||[]).forEach(a=>{a.resolve()}),t.Ec.delete(e)}function WY(t,e,a){const r=_i(t);let i=r.Tc[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(a?l.reject(a):l.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function gM(t,e,a=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),a&&t.dc.Pc(r,a);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||YY(t,r)})}function YY(t,e){t.mc.delete(e.path.canonicalString());const a=t.gc.get(e);a!==null&&(kY(t.remoteStore,a),t.gc=t.gc.remove(e),t.yc.delete(a),CL(t))}function $U(t,e,a){for(const r of a)r instanceof qY?(t.Ic.addReference(r.key,e),efe(t,r)):r instanceof HY?(wn("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||YY(t,r.key)):si()}function efe(t,e){const a=e.key,r=a.path.canonicalString();t.gc.get(a)||t.mc.has(r)||(wn("SyncEngine","New document in limbo: "+a),t.mc.add(r),CL(t))}function CL(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const a=new ei($l.fromString(e)),r=t.Ac.next();t.yc.set(r,new qhe(a)),t.gc=t.gc.insert(a,r),FY(t.remoteStore,new Uy(Ig(J2(a.path)),r,"TargetPurposeLimboResolution",tL.ct))}}async function lC(t,e,a){const r=_i(t),i=[],l=[],c=[];r.wc.isEmpty()||(r.wc.forEach((n,v)=>{c.push(r.Rc(v,e,a).then(R=>{if((R||a)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,R!=null&&R.fromCache?"not-current":"current"),R){i.push(R);const x=pL.Li(v.targetId,R);l.push(x)}}))}),await Promise.all(c),r.dc.nu(i),await async function(n,v){const R=_i(n);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Br.forEach(v,N=>Br.forEach(N.Fi,I=>R.persistence.referenceDelegate.addReference(x,N.targetId,I)).next(()=>Br.forEach(N.Bi,I=>R.persistence.referenceDelegate.removeReference(x,N.targetId,I)))))}catch(x){if(!nC(x))throw x;wn("LocalStore","Failed to update sequence numbers: "+x)}for(const x of v){const N=x.targetId;if(!x.fromCache){const I=R.Ji.get(N),k=I.snapshotVersion,Z=I.withLastLimboFreeSnapshotVersion(k);R.Ji=R.Ji.insert(N,Z)}}}(r.localStore,l))}async function tfe(t,e){const a=_i(t);if(!a.currentUser.isEqual(e)){wn("SyncEngine","User change. New user:",e.toKey());const r=await DY(a.localStore,e);a.currentUser=e,function(i,l){i.Ec.forEach(c=>{c.forEach(n=>{n.reject(new Xr(nr.CANCELLED,l))})}),i.Ec.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lC(a,r.er)}}function afe(t,e){const a=_i(t),r=a.yc.get(e);if(r&&r.fc)return Yi().add(r.key);{let i=Yi();const l=a._c.get(e);if(!l)return i;for(const c of l){const n=a.wc.get(c);i=i.unionWith(n.view.nc)}return i}}function rfe(t){const e=_i(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$Y.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=afe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xhe.bind(null,e),e.dc.nu=Bhe.bind(null,e.eventManager),e.dc.Pc=jhe.bind(null,e.eventManager),e}function nfe(t){const e=_i(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qhe.bind(null,e),e}class KU{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=sP(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,a){return null}createIndexBackfillerScheduler(e,a){return null}createLocalStore(e){return hhe(this.persistence,new che,e.initialUser,this.serializer)}createPersistence(e){return new lhe(fL.zs,this.serializer)}createSharedClientState(e){return new vhe}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ife{async initialize(e,a){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tfe.bind(null,this.syncEngine),await Fhe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Uhe}createDatastore(e){const a=sP(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new The(i));var i;return function(l,c,n,v){return new bhe(l,c,n,v)}(e.authCredentials,e.appCheckCredentials,r,a)}createRemoteStore(e){return a=this.localStore,r=this.datastore,i=e.asyncQueue,l=n=>HU(this.syncEngine,n,0),c=GU.D()?new GU:new _he,new Phe(a,r,i,l,c);var a,r,i,l,c}createSyncEngine(e,a){return function(r,i,l,c,n,v,R){const x=new Hhe(r,i,l,c,n,v);return R&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,a)}terminate(){return async function(e){const a=_i(e);wn("RemoteStore","RemoteStore shutting down."),a.vu.add(5),await oC(a),a.Pu.shutdown(),a.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Mg("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,a){this.muted||setTimeout(()=>{this.muted||e(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sfe{constructor(e,a,r,i){this.authCredentials=e,this.appCheckCredentials=a,this.asyncQueue=r,this.databaseInfo=i,this.user=gd.UNAUTHENTICATED,this.clientId=eY.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async l=>{wn("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(wn("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xr(nr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Eg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(a){const r=vL(a,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function BN(t,e){t.asyncQueue.verifyOperationInProgress(),wn("FirestoreClient","Initializing OfflineComponentProvider");const a=await t.getConfiguration();await e.initialize(a);let r=a.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DY(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function WU(t,e){t.asyncQueue.verifyOperationInProgress();const a=await lfe(t);wn("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(a,r),t.setCredentialChangeListener(i=>ZU(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,l)=>ZU(e.remoteStore,l)),t._onlineComponents=e}function ofe(t){return t.name==="FirebaseError"?t.code===nr.FAILED_PRECONDITION||t.code===nr.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function lfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){wn("FirestoreClient","Using user provided OfflineComponentProvider");try{await BN(t,t._uninitializedComponentsProvider._offline)}catch(e){const a=e;if(!ofe(a))throw a;C_("Error using user provided cache. Falling back to memory cache: "+a),await BN(t,new KU)}}else wn("FirestoreClient","Using default OfflineComponentProvider"),await BN(t,new KU);return t._offlineComponents}async function XY(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(wn("FirestoreClient","Using user provided OnlineComponentProvider"),await WU(t,t._uninitializedComponentsProvider._online)):(wn("FirestoreClient","Using default OnlineComponentProvider"),await WU(t,new ife))),t._onlineComponents}function ufe(t){return XY(t).then(e=>e.syncEngine)}async function lx(t){const e=await XY(t),a=e.eventManager;return a.onListen=$he.bind(null,e.syncEngine),a.onUnlisten=Whe.bind(null,e.syncEngine),a}function cfe(t,e,a={}){const r=new Eg;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,c,n,v){const R=new SL({next:N=>{l.enqueueAndForget(()=>wL(i,x));const I=N.docs.has(c);!I&&N.fromCache?v.reject(new Xr(nr.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&N.fromCache&&n&&n.source==="server"?v.reject(new Xr(nr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),x=new TL(J2(c.path),R,{includeMetadataChanges:!0,Ku:!0});return _L(i,x)}(await lx(t),t.asyncQueue,e,a,r)),r.promise}function dfe(t,e,a={}){const r=new Eg;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,c,n,v){const R=new SL({next:N=>{l.enqueueAndForget(()=>wL(i,x)),N.fromCache&&n.source==="server"?v.reject(new Xr(nr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),x=new TL(c,R,{includeMetadataChanges:!0,Ku:!0});return _L(i,x)}(await lx(t),t.asyncQueue,e,a,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QY(t,e,a){if(!a)throw new Xr(nr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hfe(t,e,a,r){if(e===!0&&r===!0)throw new Xr(nr.INVALID_ARGUMENT,`${t} and ${a} cannot be used together.`)}function XU(t){if(!ei.isDocumentKey(t))throw new Xr(nr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JU(t){if(ei.isDocumentKey(t))throw new Xr(nr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uP(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":si()}function ph(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xr(nr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=uP(t);throw new Xr(nr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${a}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){var a,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Xr(nr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(a=e.ssl)===null||a===void 0||a;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Xr(nr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hfe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JY((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Xr(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Xr(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Xr(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(a=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,a.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var a,r}}class cP{constructor(e,a,r,i){this._authCredentials=e,this._appCheckCredentials=a,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xr(nr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Xr(nr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QU(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Dce;switch(a.type){case"firstParty":return new Fce(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Xr(nr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const a=YU.get(e);a&&(wn("ComponentProvider","Removing Datastore"),YU.delete(e),a.terminate())}(this),Promise.resolve()}}function ffe(t,e,a,r={}){var i;const l=(t=ph(t,cP))._getSettings(),c=`${e}:${a}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&C_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let n,v;if(typeof r.mockUserToken=="string")n=r.mockUserToken,v=gd.MOCK_USER;else{n=fK(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const R=r.mockUserToken.sub||r.mockUserToken.user_id;if(!R)throw new Xr(nr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new gd(R)}t._authCredentials=new Mce(new QW(n,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,a,r){this.converter=a,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ky(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bd(this.firestore,e,this._key)}}class uA{constructor(e,a,r){this.converter=a,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uA(this.firestore,e,this._query)}}class Ky extends uA{constructor(e,a,r){super(e,a,J2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bd(this.firestore,null,new ei(e))}withConverter(e){return new Ky(this.firestore,e,this._path)}}function Ln(t,e,...a){if(t=tl(t),QY("collection","path",e),t instanceof cP){const r=$l.fromString(e,...a);return JU(r),new Ky(t,null,r)}{if(!(t instanceof bd||t instanceof Ky))throw new Xr(nr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($l.fromString(e,...a));return JU(r),new Ky(t.firestore,null,r)}}function Di(t,e,...a){if(t=tl(t),arguments.length===1&&(e=eY.A()),QY("doc","path",e),t instanceof cP){const r=$l.fromString(e,...a);return XU(r),new bd(t,null,new ei(r))}{if(!(t instanceof bd||t instanceof Ky))throw new Xr(nr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($l.fromString(e,...a));return XU(r),new bd(t.firestore,t instanceof Ky?t.converter:null,new ei(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pfe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new IY(this,"async_queue_retry"),this.Xc=()=>{const a=UN();a&&wn("AsyncQueue","Visibility state changed to "+a.visibilityState),this.qo.Mo()};const e=UN();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const a=UN();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const a=new Eg;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!nC(e))throw e;wn("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const a=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Mg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=a,a}enqueueAfterDelay(e,a,r){this.Zc(),this.Yc.indexOf(e)>-1&&(a=0);const i=AL.createAndSchedule(this,e,a,r,l=>this.na(l));return this.zc.push(i),i}Zc(){this.Wc&&si()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const a of this.zc)if(a.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((a,r)=>a.targetTimeMs-r.targetTimeMs);for(const a of this.zc)if(a.skipDelay(),e!=="all"&&a.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const a=this.zc.indexOf(e);this.zc.splice(a,1)}}function eB(t){return function(e,a){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of a)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Km extends cP{constructor(e,a,r,i){super(e,a,r,i),this.type="firestore",this._queue=new pfe,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||eX(this),this._firestoreClient.terminate()}}function mfe(t,e){const a=typeof t=="object"?t:R3(),r=typeof t=="string"?t:"(default)",i=N2(a,"firestore").getImmediate({identifier:r});if(!i._initialized){const l=cK("firestore");l&&ffe(i,...l)}return i}function uC(t){return t._firestoreClient||eX(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eX(t){var e,a,r;const i=t._freezeSettings(),l=function(c,n,v,R){return new Yce(c,n,v,R.host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,JY(R.experimentalLongPollingOptions),R.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new sfe(t._authCredentials,t._appCheckCredentials,t._queue,l),!((a=i.cache)===null||a===void 0)&&a._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new N_(Pd.fromBase64String(e))}catch(a){throw new Xr(nr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(e){return new N_(Pd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(...e){for(let a=0;a<e.length;++a)if(e[a].length===0)throw new Xr(nr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,a){if(!isFinite(e)||e<-90||e>90)throw new Xr(nr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(a)||a<-180||a>180)throw new Xr(nr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=e,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xs(this._lat,e._lat)||xs(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gfe=/^__.*__$/;class yfe{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return this.fieldMask!==null?new lA(e,this.data,this.fieldMask,a,this.fieldTransforms):new iC(e,this.data,a,this.fieldTransforms)}}class tX{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return new lA(e,this.data,this.fieldMask,a,this.fieldTransforms)}}function aX(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw si()}}class xL{constructor(e,a,r,i,l,c){this.settings=e,this.databaseId=a,this.serializer=r,this.ignoreUndefinedProperties=i,l===void 0&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new xL(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ux(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(a=>e.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>e.isPrefixOf(a.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(aX(this.ca)&&gfe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Afe{constructor(e,a,r){this.databaseId=e,this.ignoreUndefinedProperties=a,this.serializer=r||sP(e)}ya(e,a,r,i=!1){return new xL({ca:e,methodName:a,ga:r,path:Hm.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dC(t){const e=t._freezeSettings(),a=sP(t._databaseId);return new Afe(t._databaseId,!!e.ignoreUndefinedProperties,a)}function PL(t,e,a,r,i,l={}){const c=t.ya(l.merge||l.mergeFields?2:0,e,a,i);NL("Data must be an object, but it was:",c,r);const n=iX(r,c);let v,R;if(l.merge)v=new vf(c.fieldMask),R=c.fieldTransforms;else if(l.mergeFields){const x=[];for(const N of l.mergeFields){const I=yM(e,N,a);if(!c.contains(I))throw new Xr(nr.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);oX(x,I)||x.push(I)}v=new vf(x),R=c.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,R=c.fieldTransforms;return new yfe(new kh(n),v,R)}class hP extends dP{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hP}}class EL extends dP{_toFieldTransform(e){return new vde(e.path,new XR)}isEqual(e){return e instanceof EL}}function rX(t,e,a,r){const i=t.ya(1,e,a);NL("Data must be an object, but it was:",i,r);const l=[],c=kh.empty();qv(r,(v,R)=>{const x=OL(e,v,a);R=tl(R);const N=i.da(x);if(R instanceof hP)l.push(x);else{const I=hC(R,N);I!=null&&(l.push(x),c.set(x,I))}});const n=new vf(l);return new tX(c,n,i.fieldTransforms)}function nX(t,e,a,r,i,l){const c=t.ya(1,e,a),n=[yM(e,r,a)],v=[i];if(l.length%2!=0)throw new Xr(nr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)n.push(yM(e,l[I])),v.push(l[I+1]);const R=[],x=kh.empty();for(let I=n.length-1;I>=0;--I)if(!oX(R,n[I])){const k=n[I];let Z=v[I];Z=tl(Z);const $=c.da(k);if(Z instanceof hP)R.push(k);else{const H=hC(Z,$);H!=null&&(R.push(k),x.set(k,H))}}const N=new vf(R);return new tX(x,N,c.fieldTransforms)}function vfe(t,e,a,r=!1){return hC(a,t.ya(r?4:3,e))}function hC(t,e){if(sX(t=tl(t)))return NL("Unsupported field value:",e,t),iX(t,e);if(t instanceof dP)return function(a,r){if(!aX(r.ca))throw r._a(`${a._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${a._methodName}() is not currently supported inside arrays`);const i=a._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(a,r){const i=[];let l=0;for(const c of a){let n=hC(c,r.wa(l));n==null&&(n={nullValue:"NULL_VALUE"}),i.push(n),l++}return{arrayValue:{values:i}}}(t,e)}return function(a,r){if((a=tl(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return gde(r.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const i=hh.fromDate(a);return{timestampValue:sx(r.serializer,i)}}if(a instanceof hh){const i=new hh(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:sx(r.serializer,i)}}if(a instanceof bL)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof N_)return{bytesValue:PY(r.serializer,a._byteString)};if(a instanceof bd){const i=r.databaseId,l=a.firestore._databaseId;if(!l.isEqual(i))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dL(a.firestore._databaseId||r.databaseId,a._key.path)}}throw r._a(`Unsupported field value: ${uP(a)}`)}(t,e)}function iX(t,e){const a={};return aY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qv(t,(r,i)=>{const l=hC(i,e.ha(r));l!=null&&(a[r]=l)}),{mapValue:{fields:a}}}function sX(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof hh||t instanceof bL||t instanceof N_||t instanceof bd||t instanceof dP)}function NL(t,e,a){if(!sX(a)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(a)){const r=uP(a);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function yM(t,e,a){if((e=tl(e))instanceof cC)return e._internalPath;if(typeof e=="string")return OL(t,e);throw ux("Field path arguments must be of type string or ",t,!1,void 0,a)}const _fe=new RegExp("[~\\*/\\[\\]]");function OL(t,e,a){if(e.search(_fe)>=0)throw ux(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,a);try{return new cC(...e.split("."))._internalPath}catch{throw ux(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,a)}}function ux(t,e,a,r,i){const l=r&&!r.isEmpty(),c=i!==void 0;let n=`Function ${e}() called with invalid data`;a&&(n+=" (via `toFirestore()`)"),n+=". ";let v="";return(l||c)&&(v+=" (found",l&&(v+=` in field ${r}`),c&&(v+=` in document ${i}`),v+=")"),new Xr(nr.INVALID_ARGUMENT,n+t+v)}function oX(t,e){return t.some(a=>a.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lX{constructor(e,a,r,i,l){this._firestore=e,this._userDataWriter=a,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new bd(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const a=this._document.data.field(fP("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a)}}}class wfe extends lX{data(){return super.data()}}function fP(t,e){return typeof e=="string"?OL(t,e):e instanceof cC?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uX(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Xr(nr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VL{}class cX extends VL{}function Hp(t,e,...a){let r=[];e instanceof VL&&r.push(e),r=r.concat(a),function(i){const l=i.filter(n=>n instanceof zL).length,c=i.filter(n=>n instanceof pP).length;if(l>1||l>0&&c>0)throw new Xr(nr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class pP extends cX{constructor(e,a,r){super(),this._field=e,this._op=a,this._value=r,this.type="where"}static _create(e,a,r){return new pP(e,a,r)}_apply(e){const a=this._parse(e);return dX(e._query,a),new uA(e.firestore,e.converter,lM(e._query,a))}_parse(e){const a=dC(e.firestore);return function(i,l,c,n,v,R,x){let N;if(v.isKeyField()){if(R==="array-contains"||R==="array-contains-any")throw new Xr(nr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${R}' queries on documentId().`);if(R==="in"||R==="not-in"){aB(x,R);const I=[];for(const k of x)I.push(tB(n,i,k));N={arrayValue:{values:I}}}else N=tB(n,i,x)}else R!=="in"&&R!=="not-in"&&R!=="array-contains-any"||aB(x,R),N=vfe(c,l,x,R==="in"||R==="not-in");return Au.create(v,R,N)}(e._query,"where",a,e.firestore._databaseId,this._field,this._op,this._value)}}function e_(t,e,a){const r=e,i=fP("where",t);return pP._create(i,r,a)}class zL extends VL{constructor(e,a){super(),this.type=e,this._queryConstraints=a}static _create(e,a){return new zL(e,a)}_parse(e){const a=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return a.length===1?a[0]:Xp.create(a,this._getOperator())}_apply(e){const a=this._parse(e);return a.getFilters().length===0?e:(function(r,i){let l=r;const c=i.getFlattenedFilters();for(const n of c)dX(l,n),l=lM(l,n)}(e._query,a),new uA(e.firestore,e.converter,lM(e._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class DL extends cX{constructor(e,a){super(),this._field=e,this._direction=a,this.type="orderBy"}static _create(e,a){return new DL(e,a)}_apply(e){const a=function(r,i,l){if(r.startAt!==null)throw new Xr(nr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Xr(nr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new h_(i,l);return function(n,v){if(oL(n)===null){const R=Q2(n);R!==null&&hX(n,R,v.field)}}(r,c),c}(e._query,this._field,this._direction);return new uA(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new g1(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,a))}}function eT(t,e="asc"){const a=e,r=fP("orderBy",t);return DL._create(r,a)}function tB(t,e,a){if(typeof(a=tl(a))=="string"){if(a==="")throw new Xr(nr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dY(e)&&a.indexOf("/")!==-1)throw new Xr(nr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const r=e.path.child($l.fromString(a));if(!ei.isDocumentKey(r))throw new Xr(nr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CU(t,new ei(r))}if(a instanceof bd)return CU(t,a._key);throw new Xr(nr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uP(a)}.`)}function aB(t,e){if(!Array.isArray(t)||t.length===0)throw new Xr(nr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dX(t,e){if(e.isInequality()){const r=Q2(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new Xr(nr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const l=oL(t);l!==null&&hX(t,i,l)}const a=function(r,i){for(const l of r)for(const c of l.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(a!==null)throw a===e.op?new Xr(nr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xr(nr.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${a.toString()}' filters.`)}function hX(t,e,a){if(!a.isEqual(e))throw new Xr(nr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${a.toString()}' instead.`)}class Rfe{convertValue(e,a="none"){switch(Dv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,a);case 5:return e.stringValue;case 6:return this.convertBytes(zv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,a);case 10:return this.convertObject(e.mapValue,a);default:throw si()}}convertObject(e,a){return this.convertObjectMap(e.fields,a)}convertObjectMap(e,a="none"){const r={};return qv(e,(i,l)=>{r[i]=this.convertValue(l,a)}),r}convertGeoPoint(e){return new bL(gu(e.latitude),gu(e.longitude))}convertArray(e,a){return(e.values||[]).map(r=>this.convertValue(r,a))}convertServerTimestamp(e,a){switch(a){case"previous":const r=rL(e);return r==null?null:this.convertValue(r,a);case"estimate":return this.convertTimestamp(KR(e));default:return null}}convertTimestamp(e){const a=Jy(e);return new hh(a.seconds,a.nanos)}convertDocumentKey(e,a){const r=$l.fromString(e);Uo(zY(r));const i=new WR(r.get(1),r.get(3)),l=new ei(r.popFirst(5));return i.isEqual(a)||Mg(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t,e,a){let r;return r=t?a&&(a.merge||a.mergeFields)?t.toFirestore(e,a):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,a){this.hasPendingWrites=e,this.fromCache=a}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fX extends lX{constructor(e,a,r,i,l,c){super(e,a,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const a=new bb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,a={}){if(this._document){const r=this._document.data.field(fP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,a.serverTimestamps)}}}class bb extends fX{data(e={}){return super.data(e)}}class pX{constructor(e,a,r,i){this._firestore=e,this._userDataWriter=a,this._snapshot=i,this.metadata=new hR(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(a=>e.push(a)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,a){this._snapshot.docs.forEach(r=>{e.call(a,new bb(this._firestore,this._userDataWriter,r.key,r,new hR(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const a=!!e.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new Xr(nr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(c=>{const n=new bb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new hR(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:n,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const n=new bb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new hR(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,R=-1;return c.type!==0&&(v=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),R=l.indexOf(c.doc.key)),{type:Tfe(c.type),doc:n,oldIndex:v,newIndex:R}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function Tfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return si()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){t=ph(t,bd);const e=ph(t.firestore,Km);return cfe(uC(e),t._key).then(a=>gX(e,t,a))}class IL extends Rfe{constructor(e){super(),this.firestore=e}convertBytes(e){return new N_(e)}convertReference(e){const a=this.convertDocumentKey(e,this.firestore._databaseId);return new bd(this.firestore,null,a)}}function gs(t){t=ph(t,uA);const e=ph(t.firestore,Km),a=uC(e),r=new IL(e);return uX(t._query),dfe(a,t._query).then(i=>new pX(e,r,t,i))}function rB(t,e,a){t=ph(t,bd);const r=ph(t.firestore,Km),i=ML(t.converter,e,a);return fC(r,[PL(dC(r),"setDoc",t._key,i,t.converter!==null,a).toMutation(t._key,fh.none())])}function Hl(t,e,a,...r){t=ph(t,bd);const i=ph(t.firestore,Km),l=dC(i);let c;return c=typeof(e=tl(e))=="string"||e instanceof cC?nX(l,"updateDoc",t._key,e,a,r):rX(l,"updateDoc",t._key,e),fC(i,[c.toMutation(t._key,fh.exists(!0))])}function mX(t){return fC(ph(t.firestore,Km),[new nP(t._key,fh.none())])}function Mv(t,e){const a=ph(t.firestore,Km),r=Di(t),i=ML(t.converter,e);return fC(a,[PL(dC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,fh.exists(!1))]).then(()=>r)}function sh(t,...e){var a,r,i;t=tl(t);let l={includeMetadataChanges:!1},c=0;typeof e[c]!="object"||eB(e[c])||(l=e[c],c++);const n={includeMetadataChanges:l.includeMetadataChanges};if(eB(e[c])){const N=e[c];e[c]=(a=N.next)===null||a===void 0?void 0:a.bind(N),e[c+1]=(r=N.error)===null||r===void 0?void 0:r.bind(N),e[c+2]=(i=N.complete)===null||i===void 0?void 0:i.bind(N)}let v,R,x;if(t instanceof bd)R=ph(t.firestore,Km),x=J2(t._key.path),v={next:N=>{e[c]&&e[c](gX(R,t,N))},error:e[c+1],complete:e[c+2]};else{const N=ph(t,uA);R=ph(N.firestore,Km),x=N._query;const I=new IL(R);v={next:k=>{e[c]&&e[c](new pX(R,I,N,k))},error:e[c+1],complete:e[c+2]},uX(t._query)}return function(N,I,k,Z){const $=new SL(Z),H=new TL(I,$,k);return N.asyncQueue.enqueueAndForget(async()=>_L(await lx(N),H)),()=>{$.Dc(),N.asyncQueue.enqueueAndForget(async()=>wL(await lx(N),H))}}(uC(R),x,n,v)}function fC(t,e){return function(a,r){const i=new Eg;return a.asyncQueue.enqueueAndForget(async()=>Yhe(await ufe(a),r,i)),i.promise}(uC(t),e)}function gX(t,e,a){const r=a.docs.get(e._key),i=new IL(t);return new fX(t,i,e._key,r,new hR(a.hasPendingWrites,a.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cfe{constructor(e,a){this._firestore=e,this._commitHandler=a,this._mutations=[],this._committed=!1,this._dataReader=dC(e)}set(e,a,r){this._verifyNotCommitted();const i=jN(e,this._firestore),l=ML(i.converter,a,r),c=PL(this._dataReader,"WriteBatch.set",i._key,l,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,fh.none())),this}update(e,a,r,...i){this._verifyNotCommitted();const l=jN(e,this._firestore);let c;return c=typeof(a=tl(a))=="string"||a instanceof cC?nX(this._dataReader,"WriteBatch.update",l._key,a,r,i):rX(this._dataReader,"WriteBatch.update",l._key,a),this._mutations.push(c.toMutation(l._key,fh.exists(!0))),this}delete(e){this._verifyNotCommitted();const a=jN(e,this._firestore);return this._mutations=this._mutations.concat(new nP(a._key,fh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xr(nr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jN(t,e){if((t=tl(t)).firestore!==e)throw new Xr(nr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Sfe(){return new EL("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(t){return uC(t=ph(t,Km)),new Cfe(t,e=>fC(t,e))}(function(t,e=!0){(function(a){m1=a})(Gv),Ev(new Xy("firestore",(a,{instanceIdentifier:r,options:i})=>{const l=a.getProvider("app").getImmediate(),c=new Km(new Ice(a.getProvider("auth-internal")),new Uce(a.getProvider("app-check-internal")),function(n,v){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Xr(nr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new WR(n.options.projectId,v)}(l,r),l);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),km(vU,"3.13.0",t),km(vU,"3.13.0","esm2017")})();const bfe={apiKey:"AIzaSyAqEefB5cZ1jVzeqdhxfRYHUzOqgyUqieo",authDomain:"ecp-caps.firebaseapp.com",projectId:"ecp-caps",storageBucket:"ecp-caps.firebasestorage.app",messagingSenderId:"1040391525167",appId:"1:1040391525167:web:c4b9bff139a86daacf47da"},AX=gK(bfe),eA=V3(AX),Ar=mfe(AX);var vX={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},nB=Vt.createContext&&Vt.createContext(vX),xfe=["attr","size","title"];function Pfe(t,e){if(t==null)return{};var a=Efe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Efe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},cx.apply(this,arguments)}function iB(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function dx(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?iB(Object(a),!0).forEach(function(r){Nfe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):iB(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Nfe(t,e,a){return e=Ofe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ofe(t){var e=Vfe(t,"string");return typeof e=="symbol"?e:e+""}function Vfe(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _X(t){return t&&t.map((e,a)=>Vt.createElement(e.tag,dx({key:a},e.attr),_X(e.child)))}function Eo(t){return e=>Vt.createElement(zfe,cx({attr:dx({},t.attr)},e),_X(t.child))}function zfe(t){var e=a=>{var{attr:r,size:i,title:l}=t,c=Pfe(t,xfe),n=i||a.size||"1em",v;return a.className&&(v=a.className),t.className&&(v=(v?v+" ":"")+t.className),Vt.createElement("svg",cx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,c,{className:v,style:dx(dx({color:t.color||a.color},a.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),l&&Vt.createElement("title",null,l),t.children)};return nB!==void 0?Vt.createElement(nB.Consumer,null,a=>e(a)):e(vX)}function Dfe(t){return Eo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Mfe(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(t)}function sB(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function Ife(t){return Eo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Lfe(t){return Eo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Ffe(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function wR(t){return Eo({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function wX(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function kfe(t){return Eo({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function Ufe(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(t)}function hx(t){return Eo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function LL(t){return Eo({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Bfe(t){return Eo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function oB(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function jfe(t){return Eo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M630.6 364.9l-90.3-90.2c-12-12-28.3-18.7-45.3-18.7h-79.3c-17.7 0-32 14.3-32 32v79.2c0 17 6.7 33.2 18.7 45.2l90.3 90.2c12.5 12.5 32.8 12.5 45.3 0l92.5-92.5c12.6-12.5 12.6-32.7.1-45.2zm-182.8-21c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24c0 13.2-10.7 24-24 24zm-223.8-88c70.7 0 128-57.3 128-128C352 57.3 294.7 0 224 0S96 57.3 96 128c0 70.6 57.3 127.9 128 127.9zm127.8 111.2V294c-12.2-3.6-24.9-6.2-38.2-6.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 287.9 0 348.1 0 422.3v41.6c0 26.5 21.5 48 48 48h352c15.5 0 29.1-7.5 37.9-18.9l-58-58c-18.1-18.1-28.1-42.2-28.1-67.9z"},child:[]}]})(t)}function Gfe(t){return Eo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M589.6 240l45.6-45.6c6.3-6.3 6.3-16.5 0-22.8l-22.8-22.8c-6.3-6.3-16.5-6.3-22.8 0L544 194.4l-45.6-45.6c-6.3-6.3-16.5-6.3-22.8 0l-22.8 22.8c-6.3 6.3-6.3 16.5 0 22.8l45.6 45.6-45.6 45.6c-6.3 6.3-6.3 16.5 0 22.8l22.8 22.8c6.3 6.3 16.5 6.3 22.8 0l45.6-45.6 45.6 45.6c6.3 6.3 16.5 6.3 22.8 0l22.8-22.8c6.3-6.3 6.3-16.5 0-22.8L589.6 240zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX="firebasestorage.googleapis.com",TX="storageBucket",Zfe=2*60*1e3,qfe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends Xm{constructor(e,a,r=0){super(GN(e),`Firebase Storage: ${a} (${GN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vl.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return GN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ol;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ol||(Ol={}));function GN(t){return"storage/"+t}function FL(){const t="An unknown error occurred, please check the error payload for server response.";return new Vl(Ol.UNKNOWN,t)}function Hfe(t){return new Vl(Ol.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function $fe(t){return new Vl(Ol.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kfe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vl(Ol.UNAUTHENTICATED,t)}function Wfe(){return new Vl(Ol.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Yfe(t){return new Vl(Ol.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Xfe(){return new Vl(Ol.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jfe(){return new Vl(Ol.CANCELED,"User canceled the upload/download.")}function Qfe(t){return new Vl(Ol.INVALID_URL,"Invalid URL '"+t+"'.")}function epe(t){return new Vl(Ol.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function tpe(){return new Vl(Ol.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TX+"' property when initializing the app?")}function ape(){return new Vl(Ol.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rpe(){return new Vl(Ol.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function npe(t){return new Vl(Ol.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function AM(t){return new Vl(Ol.INVALID_ARGUMENT,t)}function CX(){return new Vl(Ol.APP_DELETED,"The Firebase app was deleted.")}function ipe(t){return new Vl(Ol.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function RR(t,e){return new Vl(Ol.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bw(t){throw new Vl(Ol.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,a){this.bucket=e,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,a){let r;try{r=_f.makeFromUrl(e,a)}catch{return new _f(e,"")}if(r.path==="")return r;throw epe(e)}static makeFromUrl(e,a){let r=null;const i="([A-Za-z0-9.\\-_]+)";function l(pe){pe.path.charAt(pe.path.length-1)==="/"&&(pe.path_=pe.path_.slice(0,-1))}const c="(/(.*))?$",n=new RegExp("^gs://"+i+c,"i"),v={bucket:1,path:3};function R(pe){pe.path_=decodeURIComponent(pe.path)}const x="v[A-Za-z0-9_]+",N=a.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",k=new RegExp(`^https?://${N}/${x}/b/${i}/o${I}`,"i"),Z={bucket:1,path:3},$=a===RX?"(?:storage.googleapis.com|storage.cloud.google.com)":a,H="([^?#]*)",W=new RegExp(`^https?://${$}/${i}/${H}`,"i"),oe=[{regex:n,indices:v,postModify:l},{regex:k,indices:Z,postModify:R},{regex:W,indices:{bucket:1,path:2},postModify:R}];for(let pe=0;pe<oe.length;pe++){const le=oe[pe],ge=le.regex.exec(e);if(ge){const ue=ge[le.indices.bucket];let Re=ge[le.indices.path];Re||(Re=""),r=new _f(ue,Re),le.postModify(r);break}}if(r==null)throw Qfe(e);return r}}class spe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ope(t,e,a){let r=1,i=null,l=null,c=!1,n=0;function v(){return n===2}let R=!1;function x(...H){R||(R=!0,e.apply(null,H))}function N(H){i=setTimeout(()=>{i=null,t(k,v())},H)}function I(){l&&clearTimeout(l)}function k(H,...W){if(R){I();return}if(H){I(),x.call(null,H,...W);return}if(v()||c){I(),x.call(null,H,...W);return}r<64&&(r*=2);let oe;n===1?(n=2,oe=0):oe=(r+Math.random())*1e3,N(oe)}let Z=!1;function $(H){Z||(Z=!0,I(),!R&&(i!==null?(H||(n=2),clearTimeout(i),N(0)):H||(n=1)))}return N(0),l=setTimeout(()=>{c=!0,$(!0)},a),$}function lpe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function upe(t){return t!==void 0}function cpe(t){return typeof t=="object"&&!Array.isArray(t)}function kL(t){return typeof t=="string"||t instanceof String}function lB(t){return UL()&&t instanceof Blob}function UL(){return typeof Blob<"u"&&!rse()}function uB(t,e,a,r){if(r<e)throw AM(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>a)throw AM(`Invalid value for '${t}'. Expected ${a} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t,e,a){let r=e;return a==null&&(r=`https://${e}`),`${a}://${r}/v0${t}`}function SX(t){const e=encodeURIComponent;let a="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);a=a+i+"&"}return a=a.slice(0,-1),a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tv;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Tv||(Tv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dpe(t,e){const a=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return a||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hpe{constructor(e,a,r,i,l,c,n,v,R,x,N,I=!0){this.url_=e,this.method_=a,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=n,this.errorCallback_=v,this.timeout_=R,this.progressCallback_=x,this.connectionFactory_=N,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,Z)=>{this.resolve_=k,this.reject_=Z,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new HS(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=n=>{const v=n.loaded,R=n.lengthComputable?n.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,R)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const n=l.getErrorCode()===Tv.NO_ERROR,v=l.getStatus();if(!n||dpe(v,this.additionalRetryCodes_)&&this.retry){const x=l.getErrorCode()===Tv.ABORT;r(!1,new HS(!1,null,x));return}const R=this.successCodes_.indexOf(v)!==-1;r(!0,new HS(R,l))})},a=(r,i)=>{const l=this.resolve_,c=this.reject_,n=i.connection;if(i.wasSuccessCode)try{const v=this.callback_(n,n.getResponse());upe(v)?l(v):l()}catch(v){c(v)}else if(n!==null){const v=FL();v.serverResponse=n.getErrorText(),this.errorCallback_?c(this.errorCallback_(n,v)):c(v)}else if(i.canceled){const v=this.appDelete_?CX():Jfe();c(v)}else{const v=Xfe();c(v)}};this.canceled_?a(!1,new HS(!1,null,!0)):this.backoffId_=ope(e,a,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lpe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class HS{constructor(e,a,r){this.wasSuccessCode=e,this.connection=a,this.canceled=!!r}}function fpe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ppe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mpe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gpe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ype(t,e,a,r,i,l,c=!0){const n=SX(t.urlParams),v=t.url+n,R=Object.assign({},t.headers);return mpe(R,e),fpe(R,a),ppe(R,l),gpe(R,r),new hpe(v,t.method,R,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ape(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vpe(...t){const e=Ape();if(e!==void 0){const a=new e;for(let r=0;r<t.length;r++)a.append(t[r]);return a.getBlob()}else{if(UL())return new Blob(t);throw new Vl(Ol.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _pe(t,e,a){return t.webkitSlice?t.webkitSlice(e,a):t.mozSlice?t.mozSlice(e,a):t.slice?t.slice(e,a):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wpe(t){if(typeof atob>"u")throw npe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ZN{constructor(e,a){this.data=e,this.contentType=a||null}}function Rpe(t,e){switch(t){case Mm.RAW:return new ZN(bX(e));case Mm.BASE64:case Mm.BASE64URL:return new ZN(xX(t,e));case Mm.DATA_URL:return new ZN(Cpe(e),Spe(e))}throw FL()}function bX(t){const e=[];for(let a=0;a<t.length;a++){let r=t.charCodeAt(a);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(a<t.length-1&&(t.charCodeAt(a+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=t.charCodeAt(++a);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Tpe(t){let e;try{e=decodeURIComponent(t)}catch{throw RR(Mm.DATA_URL,"Malformed data URL.")}return bX(e)}function xX(t,e){switch(t){case Mm.BASE64:{const i=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(i||l)throw RR(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Mm.BASE64URL:{const i=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(i||l)throw RR(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let a;try{a=wpe(e)}catch(i){throw i.message.includes("polyfill")?i:RR(t,"Invalid character found")}const r=new Uint8Array(a.length);for(let i=0;i<a.length;i++)r[i]=a.charCodeAt(i);return r}class PX{constructor(e){this.base64=!1,this.contentType=null;const a=e.match(/^data:([^,]+)?,/);if(a===null)throw RR(Mm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=a[1]||null;r!=null&&(this.base64=bpe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Cpe(t){const e=new PX(t);return e.base64?xX(Mm.BASE64,e.rest):Tpe(e.rest)}function Spe(t){return new PX(t).contentType}function bpe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,a){let r=0,i="";lB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(a?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(a?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,a){if(lB(this.data_)){const r=this.data_,i=_pe(r,e,a);return i===null?null:new Fy(i)}else{const r=new Uint8Array(this.data_.buffer,e,a-e);return new Fy(r,!0)}}static getBlob(...e){if(UL()){const a=e.map(r=>r instanceof Fy?r.data_:r);return new Fy(vpe.apply(null,a))}else{const a=e.map(c=>kL(c)?Rpe(Mm.RAW,c).data:c.data_);let r=0;a.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let l=0;return a.forEach(c=>{for(let n=0;n<c.length;n++)i[l++]=c[n]}),new Fy(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EX(t){let e;try{e=JSON.parse(t)}catch{return null}return cpe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xpe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Ppe(t,e){const a=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?a:t+"/"+a}function NX(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Epe(t,e){return e}class nh{constructor(e,a,r,i){this.server=e,this.local=a||e,this.writable=!!r,this.xform=i||Epe}}let $S=null;function Npe(t){return!kL(t)||t.length<2?t:NX(t)}function OX(){if($S)return $S;const t=[];t.push(new nh("bucket")),t.push(new nh("generation")),t.push(new nh("metageneration")),t.push(new nh("name","fullPath",!0));function e(l,c){return Npe(c)}const a=new nh("name");a.xform=e,t.push(a);function r(l,c){return c!==void 0?Number(c):c}const i=new nh("size");return i.xform=r,t.push(i),t.push(new nh("timeCreated")),t.push(new nh("updated")),t.push(new nh("md5Hash",null,!0)),t.push(new nh("cacheControl",null,!0)),t.push(new nh("contentDisposition",null,!0)),t.push(new nh("contentEncoding",null,!0)),t.push(new nh("contentLanguage",null,!0)),t.push(new nh("contentType",null,!0)),t.push(new nh("metadata","customMetadata",!0)),$S=t,$S}function Ope(t,e){function a(){const r=t.bucket,i=t.fullPath,l=new _f(r,i);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:a})}function Vpe(t,e,a){const r={};r.type="file";const i=a.length;for(let l=0;l<i;l++){const c=a[l];r[c.local]=c.xform(r,e[c.server])}return Ope(r,t),r}function VX(t,e,a){const r=EX(e);return r===null?null:Vpe(t,r,a)}function zpe(t,e,a,r){const i=EX(e);if(i===null||!kL(i.downloadTokens))return null;const l=i.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(R=>{const x=t.bucket,N=t.fullPath,I="/b/"+c(x)+"/o/"+c(N),k=BL(I,a,r),Z=SX({alt:"media",token:R});return k+Z})[0]}function Dpe(t,e){const a={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(a[l.server]=t[l.local])}return JSON.stringify(a)}class zX{constructor(e,a,r,i){this.url=e,this.method=a,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DX(t){if(!t)throw FL()}function Mpe(t,e){function a(r,i){const l=VX(t,i,e);return DX(l!==null),l}return a}function Ipe(t,e){function a(r,i){const l=VX(t,i,e);return DX(l!==null),zpe(l,i,t.host,t._protocol)}return a}function MX(t){function e(a,r){let i;return a.getStatus()===401?a.getErrorText().includes("Firebase App Check token is invalid")?i=Wfe():i=Kfe():a.getStatus()===402?i=$fe(t.bucket):a.getStatus()===403?i=Yfe(t.path):i=r,i.status=a.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Lpe(t){const e=MX(t);function a(r,i){let l=e(r,i);return r.getStatus()===404&&(l=Hfe(t.path)),l.serverResponse=i.serverResponse,l}return a}function Fpe(t,e,a){const r=e.fullServerUrl(),i=BL(r,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,n=new zX(i,l,Ipe(t,a),c);return n.errorHandler=Lpe(e),n}function kpe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Upe(t,e,a){const r=Object.assign({},a);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kpe(null,e)),r}function Bpe(t,e,a,r,i){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function n(){let oe="";for(let pe=0;pe<2;pe++)oe=oe+Math.random().toString().slice(2);return oe}const v=n();c["Content-Type"]="multipart/related; boundary="+v;const R=Upe(e,r,i),x=Dpe(R,a),N="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+v+`\r
Content-Type: `+R.contentType+`\r
\r
`,I=`\r
--`+v+"--",k=Fy.getBlob(N,r,I);if(k===null)throw ape();const Z={name:R.fullPath},$=BL(l,t.host,t._protocol),H="POST",W=t.maxUploadRetryTime,ee=new zX($,H,Mpe(t,a),W);return ee.urlParams=Z,ee.headers=c,ee.body=k.uploadData(),ee.errorHandler=MX(e),ee}class jpe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Tv.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Tv.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Tv.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,a,r,i){if(this.sent_)throw Bw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(a,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Gpe extends jpe{initXhr(){this.xhr_.responseType="text"}}function IX(){return new Gpe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,a){this._service=e,a instanceof _f?this._location=a:this._location=_f.makeFromUrl(a,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,a){return new Iv(e,a)}get root(){const e=new _f(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NX(this._location.path)}get storage(){return this._service}get parent(){const e=xpe(this._location.path);if(e===null)return null;const a=new _f(this._location.bucket,e);return new Iv(this._service,a)}_throwIfRoot(e){if(this._location.path==="")throw ipe(e)}}function Zpe(t,e,a){t._throwIfRoot("uploadBytes");const r=Bpe(t.storage,t._location,OX(),new Fy(e,!0),a);return t.storage.makeRequestWithTokens(r,IX).then(i=>({metadata:i,ref:t}))}function qpe(t){t._throwIfRoot("getDownloadURL");const e=Fpe(t.storage,t._location,OX());return t.storage.makeRequestWithTokens(e,IX).then(a=>{if(a===null)throw rpe();return a})}function Hpe(t,e){const a=Ppe(t._location.path,e),r=new _f(t._location.bucket,a);return new Iv(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $pe(t){return/^[A-Za-z]+:\/\//.test(t)}function Kpe(t,e){return new Iv(t,e)}function LX(t,e){if(t instanceof jL){const a=t;if(a._bucket==null)throw tpe();const r=new Iv(a,a._bucket);return e!=null?LX(r,e):r}else return e!==void 0?Hpe(t,e):t}function Wpe(t,e){if(e&&$pe(e)){if(t instanceof jL)return Kpe(t,e);throw AM("To use ref(service, url), the first argument must be a Storage instance.")}else return LX(t,e)}function cB(t,e){const a=e==null?void 0:e[TX];return a==null?null:_f.makeFromBucketSpec(a,t)}function Ype(t,e,a,r={}){t.host=`${e}:${a}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:fK(i,t.app.options.projectId))}class jL{constructor(e,a,r,i,l){this.app=e,this._authProvider=a,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=RX,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zfe,this._maxUploadRetryTime=qfe,this._requests=new Set,i!=null?this._bucket=_f.makeFromBucketSpec(i,this._host):this._bucket=cB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_f.makeFromBucketSpec(this._url,e):this._bucket=cB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const a=await e.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Iv(this,e)}_makeRequest(e,a,r,i,l=!0){if(this._deleted)return new spe(CX());{const c=ype(e,this._appId,r,i,a,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,a){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,a,r,i).getPromise()}}const dB="@firebase/storage",hB="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FX="storage";function vM(t,e,a){return t=tl(t),Zpe(t,e,a)}function _M(t){return t=tl(t),qpe(t)}function wM(t,e){return t=tl(t),Wpe(t,e)}function RM(t=R3(),e){t=tl(t);const r=N2(t,FX).getImmediate({identifier:e}),i=cK("storage");return i&&Xpe(r,...i),r}function Xpe(t,e,a,r={}){Ype(t,e,a,r)}function Jpe(t,{instanceIdentifier:e}){const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new jL(a,r,i,e,Gv)}function Qpe(){Ev(new Xy(FX,Jpe,"PUBLIC").setMultipleInstances(!0)),km(dB,hB,""),km(dB,hB,"esm2017")}Qpe();const cA=()=>{const[t,e]=ie.useState("Loading..."),[a,r]=ie.useState([]),[i,l]=ie.useState(!1),[c,n]=ie.useState(0),[v,R]=ie.useState(!1),[x,N]=ie.useState([]),[I,k]=ie.useState(""),[Z,$]=ie.useState(""),[H,W]=ie.useState(""),ee="https://ecorideupload.s3.ap-southeast-2.amazonaws.com/uploads/profile/1742829316204_image.png";ie.useEffect(()=>{const ue=Ln(Ar,"notifications"),Re=Hp(ue,eT("timestamp","desc")),we=sh(Re,Ne=>{const ne=[];Ne.forEach(_e=>{ne.push({id:_e.id,..._e.data()})}),r(ne),n(ne.filter(_e=>!_e.read).length)});return()=>we()},[]),ie.useEffect(()=>{const ue=eA.onAuthStateChanged(async Re=>{if(Re)try{const we=Di(Ar,"super_admins",Re.uid),Ne=await Fc(we);if(Ne.exists())e(Ne.data().name);else{const ne=Di(Ar,"users",Re.uid),_e=await Fc(ne);_e.exists()?e(_e.data().name):e("Super Admin")}}catch(we){console.error("Error fetching user data:",we),e("Super Admin")}else e("Unknown User")});return()=>ue()},[]),ie.useEffect(()=>{if(v){const ue=Ln(Ar,"admin_logs"),Re=Hp(ue,eT("timestamp","desc")),we=sh(Re,Ne=>{const ne=[];Ne.forEach(_e=>{ne.push({id:_e.id,..._e.data()})}),N(ne)});return()=>we()}},[v]);const oe=()=>{l(!i)},pe=async()=>{try{const ue=yX(Ar);a.filter(Re=>!Re.read).forEach(Re=>{const we=Di(Ar,"notifications",Re.id);ue.update(we,{read:!0})}),await ue.commit(),r(a.map(Re=>({...Re,read:!0}))),n(0)}catch(ue){console.error("Error marking notifications as read:",ue)}},le=ue=>{if(!ue)return"";const Re=ue.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(Re)},ge=ue=>{switch(ue.type){case"status_update":return B.jsxs("div",{className:"notification-message",children:[B.jsx("p",{children:ue.message}),B.jsx("span",{className:`status-badge ${ue.status.toLowerCase().replace(" ","-")}`,children:ue.status})]});case"battery_update":return B.jsxs("div",{className:"notification-message",children:[B.jsx("p",{children:ue.message}),B.jsx("div",{className:"battery-indicator",children:B.jsx("span",{className:"battery-level",style:{width:`${ue.batteryLevel}%`}})})]});default:return B.jsx("p",{children:ue.message})}};return B.jsxs("div",{className:"header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[B.jsx("div",{className:"user-profile",style:{display:"flex",alignItems:"center",gap:16,flex:1},children:B.jsxs("div",{className:"profile",children:[B.jsx("img",{src:ee,alt:"Profile",className:"profile-img"}),B.jsxs("div",{className:"profile-name",children:[B.jsx("p",{children:t}),B.jsx("small",{children:"Super Admin"})]})]})}),B.jsxs("button",{className:"view-reports-btn",style:{marginRight:16,fontSize:14,padding:"6px 16px",display:"flex",alignItems:"center",gap:6},onClick:()=>R(!0),children:[B.jsx(wX,{style:{fontSize:16}})," Logs"]}),B.jsxs("div",{className:"notification-container",children:[B.jsx(Dfe,{className:"icon",onClick:oe}),c>0&&B.jsx("span",{className:"notification-badge",children:c}),i&&B.jsxs("div",{className:"notifications-modal",children:[B.jsxs("div",{className:"notifications-header",children:[B.jsx("h3",{children:"Notifications"}),B.jsx("button",{className:"mark-all-read",onClick:pe,disabled:c===0,children:"Mark all as read"})]}),B.jsx("div",{className:"notifications-list",children:a.length>0?a.map(ue=>B.jsx("div",{className:`notification-item ${ue.read?"":"unread"}`,children:B.jsxs("div",{className:"notification-content",children:[ge(ue),B.jsx("span",{className:"notification-time",children:le(ue.timestamp)})]})},ue.id)):B.jsx("p",{className:"no-notifications",children:"No notifications"})})]})]}),v&&B.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:B.jsxs("div",{className:"modal-content",style:{minWidth:400,maxWidth:700},onClick:ue=>ue.stopPropagation(),children:[B.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:8,marginBottom:16},children:[B.jsx("h3",{style:{margin:0},children:"Super Admin Logs"}),B.jsx("button",{className:"close-modal",onClick:()=>R(!1),children:""})]}),B.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16,flexWrap:"wrap",justifyContent:"center"},children:[B.jsx("input",{type:"date",value:I,onChange:ue=>k(ue.target.value),style:{padding:4}}),B.jsxs("select",{value:Z,onChange:ue=>$(ue.target.value),style:{padding:4},children:[B.jsx("option",{value:"",children:"All Actions"}),[...new Set(x.map(ue=>ue.actionType))].map(ue=>B.jsx("option",{value:ue,children:ue},ue))]}),B.jsx("input",{type:"text",placeholder:"Search logs...",value:H,onChange:ue=>W(ue.target.value),style:{padding:4,minWidth:160}})]}),(()=>{let ue=x;if(I&&(ue=ue.filter(Re=>{if(!Re.timestamp||!Re.timestamp.toDate)return!1;const we=Re.timestamp.toDate(),Ne=we.getFullYear(),ne=String(we.getMonth()+1).padStart(2,"0"),_e=String(we.getDate()).padStart(2,"0");return`${Ne}-${ne}-${_e}`===I})),Z&&(ue=ue.filter(Re=>Re.actionType===Z)),H){const Re=H.toLowerCase();ue=ue.filter(we=>we.details&&we.details.toLowerCase().includes(Re)||we.adminName&&we.adminName.toLowerCase().includes(Re)||we.actionType&&we.actionType.toLowerCase().includes(Re)||we.targetId&&String(we.targetId).toLowerCase().includes(Re))}return ue.length===0?B.jsx("div",{children:"No logs found."}):B.jsx("ul",{style:{textAlign:"left",padding:0,listStyle:"none"},children:ue.map(Re=>B.jsxs("li",{style:{marginBottom:12,borderBottom:"1px solid #eee",paddingBottom:8},children:[B.jsxs("div",{children:[B.jsx("strong",{children:Re.actionType}),"  ",Re.details]}),B.jsxs("div",{style:{fontSize:12,color:"#888"},children:[Re.adminName?`By: ${Re.adminName}`:"",Re.timestamp&&B.jsxs(B.Fragment,{children:[" ","at"," ",Re.timestamp.toDate?Re.timestamp.toDate().toLocaleString():""]})]})]},Re.id))})})()]})})]})};function eme(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2zm0 14H5V5c0-.806.55-.988 1-1h13v12z"},child:[]}]})(t)}function tme(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 15.414V20h2v-4.586c0-.526-.214-1.042-.586-1.414l-2-2L13 9.414l2 2c.372.372.888.586 1.414.586H20v-2h-3.586l-3.707-3.707a.999.999 0 0 0-1.414 0L8 9.586c-.378.378-.586.88-.586 1.414s.208 1.036.586 1.414l3 3z"},child:[]},{tag:"circle",attr:{cx:"16",cy:"5",r:"2"},child:[]},{tag:"path",attr:{d:"M18 14c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM6 22c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]}]})(t)}function ame(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"},child:[]}]})(t)}function rme(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 13v-2H7V8l-5 4 5 4v-3z"},child:[]},{tag:"path",attr:{d:"M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"},child:[]}]})(t)}function nme(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 14c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]},{tag:"path",attr:{d:"M11.42 21.814a.998.998 0 0 0 1.16 0C12.884 21.599 20.029 16.44 20 10c0-4.411-3.589-8-8-8S4 5.589 4 9.995c-.029 6.445 7.116 11.604 7.42 11.819zM12 4c3.309 0 6 2.691 6 6.005.021 4.438-4.388 8.423-6 9.73-1.611-1.308-6.021-5.294-6-9.735 0-3.309 2.691-6 6-6z"},child:[]}]})(t)}function ime(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 12a2 2 0 0 0-.703.133l-2.398-1.963c.059-.214.101-.436.101-.67C17 8.114 15.886 7 14.5 7S12 8.114 12 9.5c0 .396.1.765.262 1.097l-2.909 3.438A2.06 2.06 0 0 0 9 14c-.179 0-.348.03-.512.074l-2.563-2.563C5.97 11.348 6 11.179 6 11c0-1.108-.892-2-2-2s-2 .892-2 2 .892 2 2 2c.179 0 .348-.03.512-.074l2.563 2.563A1.906 1.906 0 0 0 7 16c0 1.108.892 2 2 2s2-.892 2-2c0-.237-.048-.46-.123-.671l2.913-3.442c.227.066.462.113.71.113a2.48 2.48 0 0 0 1.133-.281l2.399 1.963A2.077 2.077 0 0 0 18 14c0 1.108.892 2 2 2s2-.892 2-2-.892-2-2-2z"},child:[]}]})(t)}function sme(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h15.893c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zm0-2v-5h4v5H4zM14 7v5h-4V7h4zM8 7v5H4V7h4zm2 12v-5h4v5h-4zm6 0v-5h3.894v5H16zm3.893-7H16V7h3.893v5z"},child:[]}]})(t)}function ome(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1H5c-1.103 0-2 .897-2 2v15c0 1.103.897 2 2 2zM5 5h2v2h10V5h2v15H5V5z"},child:[]},{tag:"path",attr:{d:"m11 13.586-1.793-1.793-1.414 1.414L11 16.414l5.207-5.207-1.414-1.414z"},child:[]}]})(t)}function lme(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.29 8.29 16 12.58l-1.3-1.29-1.41 1.42 2.7 2.7 5.72-5.7zM4 8a3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4 3.91 3.91 0 0 0-4 4zm6 0a1.91 1.91 0 0 1-2 2 1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2zM4 18a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h2v-1a5 5 0 0 0-5-5H7a5 5 0 0 0-5 5v1h2z"},child:[]}]})(t)}function ume(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m20 8-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM9 19H7v-9h2v9zm4 0h-2v-6h2v6zm4 0h-2v-3h2v3zM14 9h-1V4l5 5h-4z"},child:[]}]})(t)}const GL=()=>{const t=m3(),e=iA(),a=async()=>{try{await eA.signOut(),t("/login")}catch(i){console.error("Error signing out: ",i.message)}},r=i=>e.pathname===i;return B.jsxs("div",{className:"sidebar",children:[B.jsx("div",{className:"logo",children:B.jsx("img",{src:"/ecpcaps/assets/ecoridelogo2.png",alt:"EcoRide Logo",style:{width:"100%",maxWidth:"100px",height:"auto"}})}),B.jsxs("div",{className:"menu-list",children:[B.jsxs("div",{className:`menu-item ${r("/dashboard")?"active":""}`,onClick:()=>t("/dashboard"),children:[B.jsx(ame,{}),B.jsx("span",{children:"Dashboard"})]}),B.jsxs("div",{className:`menu-item ${r("/stations")?"active":""}`,onClick:()=>t("/stations"),children:[B.jsx(eme,{}),B.jsx("span",{children:"Manage Stations"})]}),B.jsxs("div",{className:`menu-item ${r("/user-management")?"active":""}`,onClick:()=>t("/user-management"),children:[B.jsx(lme,{}),B.jsx("span",{children:"Manage User"})]}),B.jsxs("div",{className:`menu-item ${r("/admin-management")?"active":""}`,onClick:()=>t("/admin-management"),children:[B.jsx(ume,{}),B.jsx("span",{children:"Manage & Create Admin"})]}),B.jsxs("div",{className:`menu-item ${r("/bike-management")?"active":""}`,onClick:()=>t("/bike-management"),children:[B.jsx(tme,{}),B.jsx("span",{children:"Manage Bikes"})]}),B.jsxs("div",{className:`menu-item ${r("/rate-management")?"active":""}`,onClick:()=>t("/rate-management"),children:[B.jsx(ome,{}),B.jsx("span",{children:"Rate Management"})]}),B.jsxs("div",{className:`menu-item ${r("/system-analytics")?"active":""}`,onClick:()=>t("/system-analytics"),children:[B.jsx(ime,{}),B.jsx("span",{children:"System Analytics"})]}),B.jsxs("div",{className:`menu-item ${r("/ride-details")?"active":""}`,onClick:()=>t("/ride-details"),children:[B.jsx(sme,{}),B.jsx("span",{children:"Ride Details"})]}),B.jsxs("div",{className:`menu-item ${r("/coverage-area")?"active":""}`,onClick:()=>t("/coverage-area"),children:[B.jsx(nme,{}),B.jsx("span",{children:"Coverage Area"})]}),B.jsxs("div",{className:"menu-item logout",onClick:a,children:[B.jsx(rme,{}),B.jsx("span",{children:"Logout"})]})]})]})};var xb={exports:{}},cme=xb.exports,fB;function dme(){return fB||(fB=1,function(t,e){(function(a,r){t.exports=r()})(cme,function(){var a,r,i;function l(n,v){if(!a)a=v;else if(!r)r=v;else{var R="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};a(x),i=v(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}l(["exports"],function(n){function v(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var R,x={},N={};function I(){if(R)return N;R=1,Object.defineProperty(N,"__esModule",{value:!0}),N.setMatrixArrayType=function(g){N.ARRAY_TYPE=s=g},N.toRadian=function(g){return g*f},N.equals=function(g,m){return Math.abs(g-m)<=h*Math.max(1,Math.abs(g),Math.abs(m))},N.RANDOM=N.ARRAY_TYPE=N.EPSILON=void 0;var h=1e-6;N.EPSILON=h;var s=typeof Float32Array<"u"?Float32Array:Array;N.ARRAY_TYPE=s;var u=Math.random;N.RANDOM=u;var f=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var g=0,m=arguments.length;m--;)g+=arguments[m]*arguments[m];return Math.sqrt(g)}),N}var k,Z={};function $(){if(k)return Z;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}k=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.create=function(){var m=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},Z.clone=function(m){var _=new s.ARRAY_TYPE(4);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_},Z.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m},Z.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},Z.fromValues=function(m,_,b,O){var D=new s.ARRAY_TYPE(4);return D[0]=m,D[1]=_,D[2]=b,D[3]=O,D},Z.set=function(m,_,b,O,D){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m},Z.transpose=function(m,_){if(m===_){var b=_[1];m[1]=_[2],m[2]=b}else m[0]=_[0],m[1]=_[2],m[2]=_[1],m[3]=_[3];return m},Z.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=b*C-D*O;return V?(m[0]=C*(V=1/V),m[1]=-O*V,m[2]=-D*V,m[3]=b*V,m):null},Z.adjoint=function(m,_){var b=_[0];return m[0]=_[3],m[1]=-_[1],m[2]=-_[2],m[3]=b,m},Z.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},Z.multiply=f,Z.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=Math.sin(b),z=Math.cos(b);return m[0]=O*z+C*L,m[1]=D*z+V*L,m[2]=O*-L+C*z,m[3]=D*-L+V*z,m},Z.scale=function(m,_,b){var O=_[1],D=_[2],C=_[3],V=b[0],L=b[1];return m[0]=_[0]*V,m[1]=O*V,m[2]=D*L,m[3]=C*L,m},Z.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=-b,m[3]=O,m},Z.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m},Z.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},Z.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},Z.LDU=function(m,_,b,O){return m[2]=O[2]/O[0],b[0]=O[0],b[1]=O[1],b[3]=O[3]-m[2]*b[1],[m,_,b]},Z.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m},Z.subtract=g,Z.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]},Z.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=_[0],L=_[1],z=_[2],M=_[3];return Math.abs(b-V)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(O-L)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(L))&&Math.abs(D-z)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(z))&&Math.abs(C-M)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(M))},Z.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m},Z.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m},Z.sub=Z.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(I());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=b[0],z=b[1],M=b[2],j=b[3];return m[0]=O*L+C*z,m[1]=D*L+V*z,m[2]=O*M+C*j,m[3]=D*M+V*j,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m}return Z.mul=f,Z.sub=g,Z}var H,W={};function ee(){if(H)return W;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}H=1,Object.defineProperty(W,"__esModule",{value:!0}),W.create=function(){var m=new s.ARRAY_TYPE(6);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},W.clone=function(m){var _=new s.ARRAY_TYPE(6);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_},W.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m},W.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},W.fromValues=function(m,_,b,O,D,C){var V=new s.ARRAY_TYPE(6);return V[0]=m,V[1]=_,V[2]=b,V[3]=O,V[4]=D,V[5]=C,V},W.set=function(m,_,b,O,D,C,V){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m[4]=C,m[5]=V,m},W.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],L=_[5],z=b*C-O*D;return z?(m[0]=C*(z=1/z),m[1]=-O*z,m[2]=-D*z,m[3]=b*z,m[4]=(D*L-C*V)*z,m[5]=(O*V-b*L)*z,m):null},W.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},W.multiply=f,W.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=_[4],z=_[5],M=Math.sin(b),j=Math.cos(b);return m[0]=O*j+C*M,m[1]=D*j+V*M,m[2]=O*-M+C*j,m[3]=D*-M+V*j,m[4]=L,m[5]=z,m},W.scale=function(m,_,b){var O=_[1],D=_[2],C=_[3],V=_[4],L=_[5],z=b[0],M=b[1];return m[0]=_[0]*z,m[1]=O*z,m[2]=D*M,m[3]=C*M,m[4]=V,m[5]=L,m},W.translate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=_[4],z=_[5],M=b[0],j=b[1];return m[0]=O,m[1]=D,m[2]=C,m[3]=V,m[4]=O*M+C*j+L,m[5]=D*M+V*j+z,m},W.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=-b,m[3]=O,m[4]=0,m[5]=0,m},W.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m[4]=0,m[5]=0,m},W.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=_[0],m[5]=_[1],m},W.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},W.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},W.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m},W.subtract=g,W.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m},W.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m[4]=_[4]+b[4]*O,m[5]=_[5]+b[5]*O,m},W.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]},W.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=m[4],L=m[5],z=_[0],M=_[1],j=_[2],J=_[3],te=_[4],fe=_[5];return Math.abs(b-z)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(z))&&Math.abs(O-M)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(M))&&Math.abs(D-j)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(j))&&Math.abs(C-J)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(J))&&Math.abs(V-te)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(te))&&Math.abs(L-fe)<=s.EPSILON*Math.max(1,Math.abs(L),Math.abs(fe))},W.sub=W.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(I());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=_[4],z=_[5],M=b[0],j=b[1],J=b[2],te=b[3],fe=b[4],he=b[5];return m[0]=O*M+C*j,m[1]=D*M+V*j,m[2]=O*J+C*te,m[3]=D*J+V*te,m[4]=O*fe+C*he+L,m[5]=D*fe+V*he+z,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m}return W.mul=f,W.sub=g,W}var oe,pe={};function le(){if(oe)return pe;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}oe=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.create=function(){var m=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},pe.fromMat4=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[4],m[4]=_[5],m[5]=_[6],m[6]=_[8],m[7]=_[9],m[8]=_[10],m},pe.clone=function(m){var _=new s.ARRAY_TYPE(9);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_[6]=m[6],_[7]=m[7],_[8]=m[8],_},pe.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},pe.fromValues=function(m,_,b,O,D,C,V,L,z){var M=new s.ARRAY_TYPE(9);return M[0]=m,M[1]=_,M[2]=b,M[3]=O,M[4]=D,M[5]=C,M[6]=V,M[7]=L,M[8]=z,M},pe.set=function(m,_,b,O,D,C,V,L,z,M){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m[4]=C,m[5]=V,m[6]=L,m[7]=z,m[8]=M,m},pe.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},pe.transpose=function(m,_){if(m===_){var b=_[1],O=_[2],D=_[5];m[1]=_[3],m[2]=_[6],m[3]=b,m[5]=_[7],m[6]=O,m[7]=D}else m[0]=_[0],m[1]=_[3],m[2]=_[6],m[3]=_[1],m[4]=_[4],m[5]=_[7],m[6]=_[2],m[7]=_[5],m[8]=_[8];return m},pe.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],L=_[5],z=_[6],M=_[7],j=_[8],J=j*V-L*M,te=-j*C+L*z,fe=M*C-V*z,he=b*J+O*te+D*fe;return he?(m[0]=J*(he=1/he),m[1]=(-j*O+D*M)*he,m[2]=(L*O-D*V)*he,m[3]=te*he,m[4]=(j*b-D*z)*he,m[5]=(-L*b+D*C)*he,m[6]=fe*he,m[7]=(-M*b+O*z)*he,m[8]=(V*b-O*C)*he,m):null},pe.adjoint=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],L=_[5],z=_[6],M=_[7],j=_[8];return m[0]=V*j-L*M,m[1]=D*M-O*j,m[2]=O*L-D*V,m[3]=L*z-C*j,m[4]=b*j-D*z,m[5]=D*C-b*L,m[6]=C*M-V*z,m[7]=O*z-b*M,m[8]=b*V-O*C,m},pe.determinant=function(m){var _=m[3],b=m[4],O=m[5],D=m[6],C=m[7],V=m[8];return m[0]*(V*b-O*C)+m[1]*(-V*_+O*D)+m[2]*(C*_-b*D)},pe.multiply=f,pe.translate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=_[4],z=_[5],M=_[6],j=_[7],J=_[8],te=b[0],fe=b[1];return m[0]=O,m[1]=D,m[2]=C,m[3]=V,m[4]=L,m[5]=z,m[6]=te*O+fe*V+M,m[7]=te*D+fe*L+j,m[8]=te*C+fe*z+J,m},pe.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=_[4],z=_[5],M=_[6],j=_[7],J=_[8],te=Math.sin(b),fe=Math.cos(b);return m[0]=fe*O+te*V,m[1]=fe*D+te*L,m[2]=fe*C+te*z,m[3]=fe*V-te*O,m[4]=fe*L-te*D,m[5]=fe*z-te*C,m[6]=M,m[7]=j,m[8]=J,m},pe.scale=function(m,_,b){var O=b[0],D=b[1];return m[0]=O*_[0],m[1]=O*_[1],m[2]=O*_[2],m[3]=D*_[3],m[4]=D*_[4],m[5]=D*_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},pe.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=_[0],m[7]=_[1],m[8]=1,m},pe.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=0,m[3]=-b,m[4]=O,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},pe.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=0,m[4]=_[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},pe.fromMat2d=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=0,m[3]=_[2],m[4]=_[3],m[5]=0,m[6]=_[4],m[7]=_[5],m[8]=1,m},pe.fromQuat=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=b+b,L=O+O,z=D+D,M=b*V,j=O*V,J=O*L,te=D*V,fe=D*L,he=D*z,se=C*V,ve=C*L,Ce=C*z;return m[0]=1-J-he,m[3]=j-Ce,m[6]=te+ve,m[1]=j+Ce,m[4]=1-M-he,m[7]=fe-se,m[2]=te-ve,m[5]=fe+se,m[8]=1-M-J,m},pe.normalFromMat4=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],L=_[5],z=_[6],M=_[7],j=_[8],J=_[9],te=_[10],fe=_[11],he=_[12],se=_[13],ve=_[14],Ce=_[15],Ve=b*L-O*V,et=b*z-D*V,Ye=b*M-C*V,Xe=O*z-D*L,gt=O*M-C*L,tt=D*M-C*z,_t=j*se-J*he,xt=j*ve-te*he,Ct=j*Ce-fe*he,Mt=J*ve-te*se,Ot=J*Ce-fe*se,jt=te*Ce-fe*ve,Ft=Ve*jt-et*Ot+Ye*Mt+Xe*Ct-gt*xt+tt*_t;return Ft?(m[0]=(L*jt-z*Ot+M*Mt)*(Ft=1/Ft),m[1]=(z*Ct-V*jt-M*xt)*Ft,m[2]=(V*Ot-L*Ct+M*_t)*Ft,m[3]=(D*Ot-O*jt-C*Mt)*Ft,m[4]=(b*jt-D*Ct+C*xt)*Ft,m[5]=(O*Ct-b*Ot-C*_t)*Ft,m[6]=(se*tt-ve*gt+Ce*Xe)*Ft,m[7]=(ve*Ye-he*tt-Ce*et)*Ft,m[8]=(he*gt-se*Ye+Ce*Ve)*Ft,m):null},pe.projection=function(m,_,b){return m[0]=2/_,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/b,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},pe.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},pe.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},pe.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m[6]=_[6]+b[6],m[7]=_[7]+b[7],m[8]=_[8]+b[8],m},pe.subtract=g,pe.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m[6]=_[6]*b,m[7]=_[7]*b,m[8]=_[8]*b,m},pe.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m[4]=_[4]+b[4]*O,m[5]=_[5]+b[5]*O,m[6]=_[6]+b[6]*O,m[7]=_[7]+b[7]*O,m[8]=_[8]+b[8]*O,m},pe.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]&&m[6]===_[6]&&m[7]===_[7]&&m[8]===_[8]},pe.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=m[4],L=m[5],z=m[6],M=m[7],j=m[8],J=_[0],te=_[1],fe=_[2],he=_[3],se=_[4],ve=_[5],Ce=_[6],Ve=_[7],et=_[8];return Math.abs(b-J)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(J))&&Math.abs(O-te)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(te))&&Math.abs(D-fe)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(fe))&&Math.abs(C-he)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(he))&&Math.abs(V-se)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(se))&&Math.abs(L-ve)<=s.EPSILON*Math.max(1,Math.abs(L),Math.abs(ve))&&Math.abs(z-Ce)<=s.EPSILON*Math.max(1,Math.abs(z),Math.abs(Ce))&&Math.abs(M-Ve)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(Ve))&&Math.abs(j-et)<=s.EPSILON*Math.max(1,Math.abs(j),Math.abs(et))},pe.sub=pe.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(I());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],L=_[4],z=_[5],M=_[6],j=_[7],J=_[8],te=b[0],fe=b[1],he=b[2],se=b[3],ve=b[4],Ce=b[5],Ve=b[6],et=b[7],Ye=b[8];return m[0]=te*O+fe*V+he*M,m[1]=te*D+fe*L+he*j,m[2]=te*C+fe*z+he*J,m[3]=se*O+ve*V+Ce*M,m[4]=se*D+ve*L+Ce*j,m[5]=se*C+ve*z+Ce*J,m[6]=Ve*O+et*V+Ye*M,m[7]=Ve*D+et*L+Ye*j,m[8]=Ve*C+et*z+Ye*J,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m[6]=_[6]-b[6],m[7]=_[7]-b[7],m[8]=_[8]-b[8],m}return pe.mul=f,pe.sub=g,pe}var ge,ue={};function Re(){if(ge)return ue;function h(C){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},h(C)}ge=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.create=function(){var C=new s.ARRAY_TYPE(16);return s.ARRAY_TYPE!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},ue.clone=function(C){var V=new s.ARRAY_TYPE(16);return V[0]=C[0],V[1]=C[1],V[2]=C[2],V[3]=C[3],V[4]=C[4],V[5]=C[5],V[6]=C[6],V[7]=C[7],V[8]=C[8],V[9]=C[9],V[10]=C[10],V[11]=C[11],V[12]=C[12],V[13]=C[13],V[14]=C[14],V[15]=C[15],V},ue.copy=function(C,V){return C[0]=V[0],C[1]=V[1],C[2]=V[2],C[3]=V[3],C[4]=V[4],C[5]=V[5],C[6]=V[6],C[7]=V[7],C[8]=V[8],C[9]=V[9],C[10]=V[10],C[11]=V[11],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15],C},ue.fromValues=function(C,V,L,z,M,j,J,te,fe,he,se,ve,Ce,Ve,et,Ye){var Xe=new s.ARRAY_TYPE(16);return Xe[0]=C,Xe[1]=V,Xe[2]=L,Xe[3]=z,Xe[4]=M,Xe[5]=j,Xe[6]=J,Xe[7]=te,Xe[8]=fe,Xe[9]=he,Xe[10]=se,Xe[11]=ve,Xe[12]=Ce,Xe[13]=Ve,Xe[14]=et,Xe[15]=Ye,Xe},ue.set=function(C,V,L,z,M,j,J,te,fe,he,se,ve,Ce,Ve,et,Ye,Xe){return C[0]=V,C[1]=L,C[2]=z,C[3]=M,C[4]=j,C[5]=J,C[6]=te,C[7]=fe,C[8]=he,C[9]=se,C[10]=ve,C[11]=Ce,C[12]=Ve,C[13]=et,C[14]=Ye,C[15]=Xe,C},ue.identity=f,ue.transpose=function(C,V){if(C===V){var L=V[1],z=V[2],M=V[3],j=V[6],J=V[7],te=V[11];C[1]=V[4],C[2]=V[8],C[3]=V[12],C[4]=L,C[6]=V[9],C[7]=V[13],C[8]=z,C[9]=j,C[11]=V[14],C[12]=M,C[13]=J,C[14]=te}else C[0]=V[0],C[1]=V[4],C[2]=V[8],C[3]=V[12],C[4]=V[1],C[5]=V[5],C[6]=V[9],C[7]=V[13],C[8]=V[2],C[9]=V[6],C[10]=V[10],C[11]=V[14],C[12]=V[3],C[13]=V[7],C[14]=V[11],C[15]=V[15];return C},ue.invert=function(C,V){var L=V[0],z=V[1],M=V[2],j=V[3],J=V[4],te=V[5],fe=V[6],he=V[7],se=V[8],ve=V[9],Ce=V[10],Ve=V[11],et=V[12],Ye=V[13],Xe=V[14],gt=V[15],tt=L*te-z*J,_t=L*fe-M*J,xt=L*he-j*J,Ct=z*fe-M*te,Mt=z*he-j*te,Ot=M*he-j*fe,jt=se*Ye-ve*et,Ft=se*Xe-Ce*et,$t=se*gt-Ve*et,_a=ve*Xe-Ce*Ye,ya=ve*gt-Ve*Ye,Qa=Ce*gt-Ve*Xe,Na=tt*Qa-_t*ya+xt*_a+Ct*$t-Mt*Ft+Ot*jt;return Na?(C[0]=(te*Qa-fe*ya+he*_a)*(Na=1/Na),C[1]=(M*ya-z*Qa-j*_a)*Na,C[2]=(Ye*Ot-Xe*Mt+gt*Ct)*Na,C[3]=(Ce*Mt-ve*Ot-Ve*Ct)*Na,C[4]=(fe*$t-J*Qa-he*Ft)*Na,C[5]=(L*Qa-M*$t+j*Ft)*Na,C[6]=(Xe*xt-et*Ot-gt*_t)*Na,C[7]=(se*Ot-Ce*xt+Ve*_t)*Na,C[8]=(J*ya-te*$t+he*jt)*Na,C[9]=(z*$t-L*ya-j*jt)*Na,C[10]=(et*Mt-Ye*xt+gt*tt)*Na,C[11]=(ve*xt-se*Mt-Ve*tt)*Na,C[12]=(te*Ft-J*_a-fe*jt)*Na,C[13]=(L*_a-z*Ft+M*jt)*Na,C[14]=(Ye*_t-et*Ct-Xe*tt)*Na,C[15]=(se*Ct-ve*_t+Ce*tt)*Na,C):null},ue.adjoint=function(C,V){var L=V[0],z=V[1],M=V[2],j=V[3],J=V[4],te=V[5],fe=V[6],he=V[7],se=V[8],ve=V[9],Ce=V[10],Ve=V[11],et=V[12],Ye=V[13],Xe=V[14],gt=V[15];return C[0]=te*(Ce*gt-Ve*Xe)-ve*(fe*gt-he*Xe)+Ye*(fe*Ve-he*Ce),C[1]=-(z*(Ce*gt-Ve*Xe)-ve*(M*gt-j*Xe)+Ye*(M*Ve-j*Ce)),C[2]=z*(fe*gt-he*Xe)-te*(M*gt-j*Xe)+Ye*(M*he-j*fe),C[3]=-(z*(fe*Ve-he*Ce)-te*(M*Ve-j*Ce)+ve*(M*he-j*fe)),C[4]=-(J*(Ce*gt-Ve*Xe)-se*(fe*gt-he*Xe)+et*(fe*Ve-he*Ce)),C[5]=L*(Ce*gt-Ve*Xe)-se*(M*gt-j*Xe)+et*(M*Ve-j*Ce),C[6]=-(L*(fe*gt-he*Xe)-J*(M*gt-j*Xe)+et*(M*he-j*fe)),C[7]=L*(fe*Ve-he*Ce)-J*(M*Ve-j*Ce)+se*(M*he-j*fe),C[8]=J*(ve*gt-Ve*Ye)-se*(te*gt-he*Ye)+et*(te*Ve-he*ve),C[9]=-(L*(ve*gt-Ve*Ye)-se*(z*gt-j*Ye)+et*(z*Ve-j*ve)),C[10]=L*(te*gt-he*Ye)-J*(z*gt-j*Ye)+et*(z*he-j*te),C[11]=-(L*(te*Ve-he*ve)-J*(z*Ve-j*ve)+se*(z*he-j*te)),C[12]=-(J*(ve*Xe-Ce*Ye)-se*(te*Xe-fe*Ye)+et*(te*Ce-fe*ve)),C[13]=L*(ve*Xe-Ce*Ye)-se*(z*Xe-M*Ye)+et*(z*Ce-M*ve),C[14]=-(L*(te*Xe-fe*Ye)-J*(z*Xe-M*Ye)+et*(z*fe-M*te)),C[15]=L*(te*Ce-fe*ve)-J*(z*Ce-M*ve)+se*(z*fe-M*te),C},ue.determinant=function(C){var V=C[0],L=C[1],z=C[2],M=C[3],j=C[4],J=C[5],te=C[6],fe=C[7],he=C[8],se=C[9],ve=C[10],Ce=C[11],Ve=C[12],et=C[13],Ye=C[14],Xe=C[15];return(V*J-L*j)*(ve*Xe-Ce*Ye)-(V*te-z*j)*(se*Xe-Ce*et)+(V*fe-M*j)*(se*Ye-ve*et)+(L*te-z*J)*(he*Xe-Ce*Ve)-(L*fe-M*J)*(he*Ye-ve*Ve)+(z*fe-M*te)*(he*et-se*Ve)},ue.multiply=g,ue.translate=function(C,V,L){var z,M,j,J,te,fe,he,se,ve,Ce,Ve,et,Ye=L[0],Xe=L[1],gt=L[2];return V===C?(C[12]=V[0]*Ye+V[4]*Xe+V[8]*gt+V[12],C[13]=V[1]*Ye+V[5]*Xe+V[9]*gt+V[13],C[14]=V[2]*Ye+V[6]*Xe+V[10]*gt+V[14],C[15]=V[3]*Ye+V[7]*Xe+V[11]*gt+V[15]):(M=V[1],j=V[2],J=V[3],te=V[4],fe=V[5],he=V[6],se=V[7],ve=V[8],Ce=V[9],Ve=V[10],et=V[11],C[0]=z=V[0],C[1]=M,C[2]=j,C[3]=J,C[4]=te,C[5]=fe,C[6]=he,C[7]=se,C[8]=ve,C[9]=Ce,C[10]=Ve,C[11]=et,C[12]=z*Ye+te*Xe+ve*gt+V[12],C[13]=M*Ye+fe*Xe+Ce*gt+V[13],C[14]=j*Ye+he*Xe+Ve*gt+V[14],C[15]=J*Ye+se*Xe+et*gt+V[15]),C},ue.scale=function(C,V,L){var z=L[0],M=L[1],j=L[2];return C[0]=V[0]*z,C[1]=V[1]*z,C[2]=V[2]*z,C[3]=V[3]*z,C[4]=V[4]*M,C[5]=V[5]*M,C[6]=V[6]*M,C[7]=V[7]*M,C[8]=V[8]*j,C[9]=V[9]*j,C[10]=V[10]*j,C[11]=V[11]*j,C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15],C},ue.rotate=function(C,V,L,z){var M,j,J,te,fe,he,se,ve,Ce,Ve,et,Ye,Xe,gt,tt,_t,xt,Ct,Mt,Ot,jt,Ft,$t,_a,ya=z[0],Qa=z[1],Na=z[2],Ma=Math.hypot(ya,Qa,Na);return Ma<s.EPSILON?null:(ya*=Ma=1/Ma,Qa*=Ma,Na*=Ma,M=Math.sin(L),j=Math.cos(L),fe=V[1],he=V[2],se=V[3],Ce=V[5],Ve=V[6],et=V[7],Xe=V[9],gt=V[10],tt=V[11],_t=ya*ya*(J=1-j)+j,Mt=ya*Qa*J-Na*M,Ot=Qa*Qa*J+j,jt=Na*Qa*J+ya*M,Ft=ya*Na*J+Qa*M,$t=Qa*Na*J-ya*M,_a=Na*Na*J+j,C[0]=(te=V[0])*_t+(ve=V[4])*(xt=Qa*ya*J+Na*M)+(Ye=V[8])*(Ct=Na*ya*J-Qa*M),C[1]=fe*_t+Ce*xt+Xe*Ct,C[2]=he*_t+Ve*xt+gt*Ct,C[3]=se*_t+et*xt+tt*Ct,C[4]=te*Mt+ve*Ot+Ye*jt,C[5]=fe*Mt+Ce*Ot+Xe*jt,C[6]=he*Mt+Ve*Ot+gt*jt,C[7]=se*Mt+et*Ot+tt*jt,C[8]=te*Ft+ve*$t+Ye*_a,C[9]=fe*Ft+Ce*$t+Xe*_a,C[10]=he*Ft+Ve*$t+gt*_a,C[11]=se*Ft+et*$t+tt*_a,V!==C&&(C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C)},ue.rotateX=function(C,V,L){var z=Math.sin(L),M=Math.cos(L),j=V[4],J=V[5],te=V[6],fe=V[7],he=V[8],se=V[9],ve=V[10],Ce=V[11];return V!==C&&(C[0]=V[0],C[1]=V[1],C[2]=V[2],C[3]=V[3],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[4]=j*M+he*z,C[5]=J*M+se*z,C[6]=te*M+ve*z,C[7]=fe*M+Ce*z,C[8]=he*M-j*z,C[9]=se*M-J*z,C[10]=ve*M-te*z,C[11]=Ce*M-fe*z,C},ue.rotateY=function(C,V,L){var z=Math.sin(L),M=Math.cos(L),j=V[0],J=V[1],te=V[2],fe=V[3],he=V[8],se=V[9],ve=V[10],Ce=V[11];return V!==C&&(C[4]=V[4],C[5]=V[5],C[6]=V[6],C[7]=V[7],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[0]=j*M-he*z,C[1]=J*M-se*z,C[2]=te*M-ve*z,C[3]=fe*M-Ce*z,C[8]=j*z+he*M,C[9]=J*z+se*M,C[10]=te*z+ve*M,C[11]=fe*z+Ce*M,C},ue.rotateZ=function(C,V,L){var z=Math.sin(L),M=Math.cos(L),j=V[0],J=V[1],te=V[2],fe=V[3],he=V[4],se=V[5],ve=V[6],Ce=V[7];return V!==C&&(C[8]=V[8],C[9]=V[9],C[10]=V[10],C[11]=V[11],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[0]=j*M+he*z,C[1]=J*M+se*z,C[2]=te*M+ve*z,C[3]=fe*M+Ce*z,C[4]=he*M-j*z,C[5]=se*M-J*z,C[6]=ve*M-te*z,C[7]=Ce*M-fe*z,C},ue.fromTranslation=function(C,V){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=V[0],C[13]=V[1],C[14]=V[2],C[15]=1,C},ue.fromScaling=function(C,V){return C[0]=V[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=V[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=V[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ue.fromRotation=function(C,V,L){var z,M,j,J=L[0],te=L[1],fe=L[2],he=Math.hypot(J,te,fe);return he<s.EPSILON?null:(J*=he=1/he,te*=he,fe*=he,z=Math.sin(V),M=Math.cos(V),C[0]=J*J*(j=1-M)+M,C[1]=te*J*j+fe*z,C[2]=fe*J*j-te*z,C[3]=0,C[4]=J*te*j-fe*z,C[5]=te*te*j+M,C[6]=fe*te*j+J*z,C[7]=0,C[8]=J*fe*j+te*z,C[9]=te*fe*j-J*z,C[10]=fe*fe*j+M,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C)},ue.fromXRotation=function(C,V){var L=Math.sin(V),z=Math.cos(V);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=z,C[6]=L,C[7]=0,C[8]=0,C[9]=-L,C[10]=z,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ue.fromYRotation=function(C,V){var L=Math.sin(V),z=Math.cos(V);return C[0]=z,C[1]=0,C[2]=-L,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=L,C[9]=0,C[10]=z,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ue.fromZRotation=function(C,V){var L=Math.sin(V),z=Math.cos(V);return C[0]=z,C[1]=L,C[2]=0,C[3]=0,C[4]=-L,C[5]=z,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ue.fromRotationTranslation=m,ue.fromQuat2=function(C,V){var L=new s.ARRAY_TYPE(3),z=-V[0],M=-V[1],j=-V[2],J=V[3],te=V[4],fe=V[5],he=V[6],se=V[7],ve=z*z+M*M+j*j+J*J;return ve>0?(L[0]=2*(te*J+se*z+fe*j-he*M)/ve,L[1]=2*(fe*J+se*M+he*z-te*j)/ve,L[2]=2*(he*J+se*j+te*M-fe*z)/ve):(L[0]=2*(te*J+se*z+fe*j-he*M),L[1]=2*(fe*J+se*M+he*z-te*j),L[2]=2*(he*J+se*j+te*M-fe*z)),m(C,V,L),C},ue.getTranslation=function(C,V){return C[0]=V[12],C[1]=V[13],C[2]=V[14],C},ue.getScaling=_,ue.getRotation=function(C,V){var L=new s.ARRAY_TYPE(3);_(L,V);var z=1/L[0],M=1/L[1],j=1/L[2],J=V[0]*z,te=V[1]*M,fe=V[2]*j,he=V[4]*z,se=V[5]*M,ve=V[6]*j,Ce=V[8]*z,Ve=V[9]*M,et=V[10]*j,Ye=J+se+et,Xe=0;return Ye>0?(Xe=2*Math.sqrt(Ye+1),C[3]=.25*Xe,C[0]=(ve-Ve)/Xe,C[1]=(Ce-fe)/Xe,C[2]=(te-he)/Xe):J>se&&J>et?(Xe=2*Math.sqrt(1+J-se-et),C[3]=(ve-Ve)/Xe,C[0]=.25*Xe,C[1]=(te+he)/Xe,C[2]=(Ce+fe)/Xe):se>et?(Xe=2*Math.sqrt(1+se-J-et),C[3]=(Ce-fe)/Xe,C[0]=(te+he)/Xe,C[1]=.25*Xe,C[2]=(ve+Ve)/Xe):(Xe=2*Math.sqrt(1+et-J-se),C[3]=(te-he)/Xe,C[0]=(Ce+fe)/Xe,C[1]=(ve+Ve)/Xe,C[2]=.25*Xe),C},ue.fromRotationTranslationScale=function(C,V,L,z){var M=V[0],j=V[1],J=V[2],te=V[3],fe=M+M,he=j+j,se=J+J,ve=M*fe,Ce=M*he,Ve=M*se,et=j*he,Ye=j*se,Xe=J*se,gt=te*fe,tt=te*he,_t=te*se,xt=z[0],Ct=z[1],Mt=z[2];return C[0]=(1-(et+Xe))*xt,C[1]=(Ce+_t)*xt,C[2]=(Ve-tt)*xt,C[3]=0,C[4]=(Ce-_t)*Ct,C[5]=(1-(ve+Xe))*Ct,C[6]=(Ye+gt)*Ct,C[7]=0,C[8]=(Ve+tt)*Mt,C[9]=(Ye-gt)*Mt,C[10]=(1-(ve+et))*Mt,C[11]=0,C[12]=L[0],C[13]=L[1],C[14]=L[2],C[15]=1,C},ue.fromRotationTranslationScaleOrigin=function(C,V,L,z,M){var j=V[0],J=V[1],te=V[2],fe=V[3],he=j+j,se=J+J,ve=te+te,Ce=j*he,Ve=j*se,et=j*ve,Ye=J*se,Xe=J*ve,gt=te*ve,tt=fe*he,_t=fe*se,xt=fe*ve,Ct=z[0],Mt=z[1],Ot=z[2],jt=M[0],Ft=M[1],$t=M[2],_a=(1-(Ye+gt))*Ct,ya=(Ve+xt)*Ct,Qa=(et-_t)*Ct,Na=(Ve-xt)*Mt,Ma=(1-(Ce+gt))*Mt,Ra=(Xe+tt)*Mt,Sr=(et+_t)*Ot,Xa=(Xe-tt)*Ot,hr=(1-(Ce+Ye))*Ot;return C[0]=_a,C[1]=ya,C[2]=Qa,C[3]=0,C[4]=Na,C[5]=Ma,C[6]=Ra,C[7]=0,C[8]=Sr,C[9]=Xa,C[10]=hr,C[11]=0,C[12]=L[0]+jt-(_a*jt+Na*Ft+Sr*$t),C[13]=L[1]+Ft-(ya*jt+Ma*Ft+Xa*$t),C[14]=L[2]+$t-(Qa*jt+Ra*Ft+hr*$t),C[15]=1,C},ue.fromQuat=function(C,V){var L=V[0],z=V[1],M=V[2],j=V[3],J=L+L,te=z+z,fe=M+M,he=L*J,se=z*J,ve=z*te,Ce=M*J,Ve=M*te,et=M*fe,Ye=j*J,Xe=j*te,gt=j*fe;return C[0]=1-ve-et,C[1]=se+gt,C[2]=Ce-Xe,C[3]=0,C[4]=se-gt,C[5]=1-he-et,C[6]=Ve+Ye,C[7]=0,C[8]=Ce+Xe,C[9]=Ve-Ye,C[10]=1-he-ve,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ue.frustum=function(C,V,L,z,M,j,J){var te=1/(L-V),fe=1/(M-z),he=1/(j-J);return C[0]=2*j*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=2*j*fe,C[6]=0,C[7]=0,C[8]=(L+V)*te,C[9]=(M+z)*fe,C[10]=(J+j)*he,C[11]=-1,C[12]=0,C[13]=0,C[14]=J*j*2*he,C[15]=0,C},ue.perspectiveNO=b,ue.perspectiveZO=function(C,V,L,z,M){var j,J=1/Math.tan(V/2);return C[0]=J/L,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=J,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,M!=null&&M!==1/0?(C[10]=M*(j=1/(z-M)),C[14]=M*z*j):(C[10]=-1,C[14]=-z),C},ue.perspectiveFromFieldOfView=function(C,V,L,z){var M=Math.tan(V.upDegrees*Math.PI/180),j=Math.tan(V.downDegrees*Math.PI/180),J=Math.tan(V.leftDegrees*Math.PI/180),te=Math.tan(V.rightDegrees*Math.PI/180),fe=2/(J+te),he=2/(M+j);return C[0]=fe,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=he,C[6]=0,C[7]=0,C[8]=-(J-te)*fe*.5,C[9]=(M-j)*he*.5,C[10]=z/(L-z),C[11]=-1,C[12]=0,C[13]=0,C[14]=z*L/(L-z),C[15]=0,C},ue.orthoNO=O,ue.orthoZO=function(C,V,L,z,M,j,J){var te=1/(V-L),fe=1/(z-M),he=1/(j-J);return C[0]=-2*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*fe,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=he,C[11]=0,C[12]=(V+L)*te,C[13]=(M+z)*fe,C[14]=j*he,C[15]=1,C},ue.lookAt=function(C,V,L,z){var M,j,J,te,fe,he,se,ve,Ce,Ve,et=V[0],Ye=V[1],Xe=V[2],gt=z[0],tt=z[1],_t=z[2],xt=L[0],Ct=L[1],Mt=L[2];return Math.abs(et-xt)<s.EPSILON&&Math.abs(Ye-Ct)<s.EPSILON&&Math.abs(Xe-Mt)<s.EPSILON?f(C):(se=et-xt,ve=Ye-Ct,Ce=Xe-Mt,M=tt*(Ce*=Ve=1/Math.hypot(se,ve,Ce))-_t*(ve*=Ve),j=_t*(se*=Ve)-gt*Ce,J=gt*ve-tt*se,(Ve=Math.hypot(M,j,J))?(M*=Ve=1/Ve,j*=Ve,J*=Ve):(M=0,j=0,J=0),te=ve*J-Ce*j,fe=Ce*M-se*J,he=se*j-ve*M,(Ve=Math.hypot(te,fe,he))?(te*=Ve=1/Ve,fe*=Ve,he*=Ve):(te=0,fe=0,he=0),C[0]=M,C[1]=te,C[2]=se,C[3]=0,C[4]=j,C[5]=fe,C[6]=ve,C[7]=0,C[8]=J,C[9]=he,C[10]=Ce,C[11]=0,C[12]=-(M*et+j*Ye+J*Xe),C[13]=-(te*et+fe*Ye+he*Xe),C[14]=-(se*et+ve*Ye+Ce*Xe),C[15]=1,C)},ue.targetTo=function(C,V,L,z){var M=V[0],j=V[1],J=V[2],te=z[0],fe=z[1],he=z[2],se=M-L[0],ve=j-L[1],Ce=J-L[2],Ve=se*se+ve*ve+Ce*Ce;Ve>0&&(se*=Ve=1/Math.sqrt(Ve),ve*=Ve,Ce*=Ve);var et=fe*Ce-he*ve,Ye=he*se-te*Ce,Xe=te*ve-fe*se;return(Ve=et*et+Ye*Ye+Xe*Xe)>0&&(et*=Ve=1/Math.sqrt(Ve),Ye*=Ve,Xe*=Ve),C[0]=et,C[1]=Ye,C[2]=Xe,C[3]=0,C[4]=ve*Xe-Ce*Ye,C[5]=Ce*et-se*Xe,C[6]=se*Ye-ve*et,C[7]=0,C[8]=se,C[9]=ve,C[10]=Ce,C[11]=0,C[12]=M,C[13]=j,C[14]=J,C[15]=1,C},ue.str=function(C){return"mat4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+", "+C[9]+", "+C[10]+", "+C[11]+", "+C[12]+", "+C[13]+", "+C[14]+", "+C[15]+")"},ue.frob=function(C){return Math.hypot(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],C[8],C[9],C[10],C[11],C[12],C[13],C[14],C[15])},ue.add=function(C,V,L){return C[0]=V[0]+L[0],C[1]=V[1]+L[1],C[2]=V[2]+L[2],C[3]=V[3]+L[3],C[4]=V[4]+L[4],C[5]=V[5]+L[5],C[6]=V[6]+L[6],C[7]=V[7]+L[7],C[8]=V[8]+L[8],C[9]=V[9]+L[9],C[10]=V[10]+L[10],C[11]=V[11]+L[11],C[12]=V[12]+L[12],C[13]=V[13]+L[13],C[14]=V[14]+L[14],C[15]=V[15]+L[15],C},ue.subtract=D,ue.multiplyScalar=function(C,V,L){return C[0]=V[0]*L,C[1]=V[1]*L,C[2]=V[2]*L,C[3]=V[3]*L,C[4]=V[4]*L,C[5]=V[5]*L,C[6]=V[6]*L,C[7]=V[7]*L,C[8]=V[8]*L,C[9]=V[9]*L,C[10]=V[10]*L,C[11]=V[11]*L,C[12]=V[12]*L,C[13]=V[13]*L,C[14]=V[14]*L,C[15]=V[15]*L,C},ue.multiplyScalarAndAdd=function(C,V,L,z){return C[0]=V[0]+L[0]*z,C[1]=V[1]+L[1]*z,C[2]=V[2]+L[2]*z,C[3]=V[3]+L[3]*z,C[4]=V[4]+L[4]*z,C[5]=V[5]+L[5]*z,C[6]=V[6]+L[6]*z,C[7]=V[7]+L[7]*z,C[8]=V[8]+L[8]*z,C[9]=V[9]+L[9]*z,C[10]=V[10]+L[10]*z,C[11]=V[11]+L[11]*z,C[12]=V[12]+L[12]*z,C[13]=V[13]+L[13]*z,C[14]=V[14]+L[14]*z,C[15]=V[15]+L[15]*z,C},ue.exactEquals=function(C,V){return C[0]===V[0]&&C[1]===V[1]&&C[2]===V[2]&&C[3]===V[3]&&C[4]===V[4]&&C[5]===V[5]&&C[6]===V[6]&&C[7]===V[7]&&C[8]===V[8]&&C[9]===V[9]&&C[10]===V[10]&&C[11]===V[11]&&C[12]===V[12]&&C[13]===V[13]&&C[14]===V[14]&&C[15]===V[15]},ue.equals=function(C,V){var L=C[0],z=C[1],M=C[2],j=C[3],J=C[4],te=C[5],fe=C[6],he=C[7],se=C[8],ve=C[9],Ce=C[10],Ve=C[11],et=C[12],Ye=C[13],Xe=C[14],gt=C[15],tt=V[0],_t=V[1],xt=V[2],Ct=V[3],Mt=V[4],Ot=V[5],jt=V[6],Ft=V[7],$t=V[8],_a=V[9],ya=V[10],Qa=V[11],Na=V[12],Ma=V[13],Ra=V[14],Sr=V[15];return Math.abs(L-tt)<=s.EPSILON*Math.max(1,Math.abs(L),Math.abs(tt))&&Math.abs(z-_t)<=s.EPSILON*Math.max(1,Math.abs(z),Math.abs(_t))&&Math.abs(M-xt)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(xt))&&Math.abs(j-Ct)<=s.EPSILON*Math.max(1,Math.abs(j),Math.abs(Ct))&&Math.abs(J-Mt)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(Mt))&&Math.abs(te-Ot)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ot))&&Math.abs(fe-jt)<=s.EPSILON*Math.max(1,Math.abs(fe),Math.abs(jt))&&Math.abs(he-Ft)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ft))&&Math.abs(se-$t)<=s.EPSILON*Math.max(1,Math.abs(se),Math.abs($t))&&Math.abs(ve-_a)<=s.EPSILON*Math.max(1,Math.abs(ve),Math.abs(_a))&&Math.abs(Ce-ya)<=s.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(ya))&&Math.abs(Ve-Qa)<=s.EPSILON*Math.max(1,Math.abs(Ve),Math.abs(Qa))&&Math.abs(et-Na)<=s.EPSILON*Math.max(1,Math.abs(et),Math.abs(Na))&&Math.abs(Ye-Ma)<=s.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Ma))&&Math.abs(Xe-Ra)<=s.EPSILON*Math.max(1,Math.abs(Xe),Math.abs(Ra))&&Math.abs(gt-Sr)<=s.EPSILON*Math.max(1,Math.abs(gt),Math.abs(Sr))},ue.sub=ue.mul=ue.ortho=ue.perspective=void 0;var s=function(C,V){if(C&&C.__esModule)return C;if(C===null||h(C)!=="object"&&typeof C!="function")return{default:C};var L=u(void 0);if(L&&L.has(C))return L.get(C);var z={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in C)if(j!=="default"&&Object.prototype.hasOwnProperty.call(C,j)){var J=M?Object.getOwnPropertyDescriptor(C,j):null;J&&(J.get||J.set)?Object.defineProperty(z,j,J):z[j]=C[j]}return z.default=C,L&&L.set(C,z),z}(I());function u(C){if(typeof WeakMap!="function")return null;var V=new WeakMap,L=new WeakMap;return(u=function(z){return z?L:V})(C)}function f(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function g(C,V,L){var z=V[0],M=V[1],j=V[2],J=V[3],te=V[4],fe=V[5],he=V[6],se=V[7],ve=V[8],Ce=V[9],Ve=V[10],et=V[11],Ye=V[12],Xe=V[13],gt=V[14],tt=V[15],_t=L[0],xt=L[1],Ct=L[2],Mt=L[3];return C[0]=_t*z+xt*te+Ct*ve+Mt*Ye,C[1]=_t*M+xt*fe+Ct*Ce+Mt*Xe,C[2]=_t*j+xt*he+Ct*Ve+Mt*gt,C[3]=_t*J+xt*se+Ct*et+Mt*tt,C[4]=(_t=L[4])*z+(xt=L[5])*te+(Ct=L[6])*ve+(Mt=L[7])*Ye,C[5]=_t*M+xt*fe+Ct*Ce+Mt*Xe,C[6]=_t*j+xt*he+Ct*Ve+Mt*gt,C[7]=_t*J+xt*se+Ct*et+Mt*tt,C[8]=(_t=L[8])*z+(xt=L[9])*te+(Ct=L[10])*ve+(Mt=L[11])*Ye,C[9]=_t*M+xt*fe+Ct*Ce+Mt*Xe,C[10]=_t*j+xt*he+Ct*Ve+Mt*gt,C[11]=_t*J+xt*se+Ct*et+Mt*tt,C[12]=(_t=L[12])*z+(xt=L[13])*te+(Ct=L[14])*ve+(Mt=L[15])*Ye,C[13]=_t*M+xt*fe+Ct*Ce+Mt*Xe,C[14]=_t*j+xt*he+Ct*Ve+Mt*gt,C[15]=_t*J+xt*se+Ct*et+Mt*tt,C}function m(C,V,L){var z=V[0],M=V[1],j=V[2],J=V[3],te=z+z,fe=M+M,he=j+j,se=z*te,ve=z*fe,Ce=z*he,Ve=M*fe,et=M*he,Ye=j*he,Xe=J*te,gt=J*fe,tt=J*he;return C[0]=1-(Ve+Ye),C[1]=ve+tt,C[2]=Ce-gt,C[3]=0,C[4]=ve-tt,C[5]=1-(se+Ye),C[6]=et+Xe,C[7]=0,C[8]=Ce+gt,C[9]=et-Xe,C[10]=1-(se+Ve),C[11]=0,C[12]=L[0],C[13]=L[1],C[14]=L[2],C[15]=1,C}function _(C,V){var L=V[4],z=V[5],M=V[6],j=V[8],J=V[9],te=V[10];return C[0]=Math.hypot(V[0],V[1],V[2]),C[1]=Math.hypot(L,z,M),C[2]=Math.hypot(j,J,te),C}function b(C,V,L,z,M){var j,J=1/Math.tan(V/2);return C[0]=J/L,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=J,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,M!=null&&M!==1/0?(C[10]=(M+z)*(j=1/(z-M)),C[14]=2*M*z*j):(C[10]=-1,C[14]=-2*z),C}function O(C,V,L,z,M,j,J){var te=1/(V-L),fe=1/(z-M),he=1/(j-J);return C[0]=-2*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*fe,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*he,C[11]=0,C[12]=(V+L)*te,C[13]=(M+z)*fe,C[14]=(J+j)*he,C[15]=1,C}function D(C,V,L){return C[0]=V[0]-L[0],C[1]=V[1]-L[1],C[2]=V[2]-L[2],C[3]=V[3]-L[3],C[4]=V[4]-L[4],C[5]=V[5]-L[5],C[6]=V[6]-L[6],C[7]=V[7]-L[7],C[8]=V[8]-L[8],C[9]=V[9]-L[9],C[10]=V[10]-L[10],C[11]=V[11]-L[11],C[12]=V[12]-L[12],C[13]=V[13]-L[13],C[14]=V[14]-L[14],C[15]=V[15]-L[15],C}return ue.perspective=b,ue.ortho=O,ue.mul=g,ue.sub=D,ue}var we,Ne={},ne={};function _e(){if(we)return ne;function h(M){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},h(M)}we=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.create=f,ne.clone=function(M){var j=new s.ARRAY_TYPE(3);return j[0]=M[0],j[1]=M[1],j[2]=M[2],j},ne.length=g,ne.fromValues=function(M,j,J){var te=new s.ARRAY_TYPE(3);return te[0]=M,te[1]=j,te[2]=J,te},ne.copy=function(M,j){return M[0]=j[0],M[1]=j[1],M[2]=j[2],M},ne.set=function(M,j,J,te){return M[0]=j,M[1]=J,M[2]=te,M},ne.add=function(M,j,J){return M[0]=j[0]+J[0],M[1]=j[1]+J[1],M[2]=j[2]+J[2],M},ne.subtract=m,ne.multiply=_,ne.divide=b,ne.ceil=function(M,j){return M[0]=Math.ceil(j[0]),M[1]=Math.ceil(j[1]),M[2]=Math.ceil(j[2]),M},ne.floor=function(M,j){return M[0]=Math.floor(j[0]),M[1]=Math.floor(j[1]),M[2]=Math.floor(j[2]),M},ne.min=function(M,j,J){return M[0]=Math.min(j[0],J[0]),M[1]=Math.min(j[1],J[1]),M[2]=Math.min(j[2],J[2]),M},ne.max=function(M,j,J){return M[0]=Math.max(j[0],J[0]),M[1]=Math.max(j[1],J[1]),M[2]=Math.max(j[2],J[2]),M},ne.round=function(M,j){return M[0]=Math.round(j[0]),M[1]=Math.round(j[1]),M[2]=Math.round(j[2]),M},ne.scale=function(M,j,J){return M[0]=j[0]*J,M[1]=j[1]*J,M[2]=j[2]*J,M},ne.scaleAndAdd=function(M,j,J,te){return M[0]=j[0]+J[0]*te,M[1]=j[1]+J[1]*te,M[2]=j[2]+J[2]*te,M},ne.distance=O,ne.squaredDistance=D,ne.squaredLength=C,ne.negate=function(M,j){return M[0]=-j[0],M[1]=-j[1],M[2]=-j[2],M},ne.inverse=function(M,j){return M[0]=1/j[0],M[1]=1/j[1],M[2]=1/j[2],M},ne.normalize=function(M,j){var J=j[0],te=j[1],fe=j[2],he=J*J+te*te+fe*fe;return he>0&&(he=1/Math.sqrt(he)),M[0]=j[0]*he,M[1]=j[1]*he,M[2]=j[2]*he,M},ne.dot=V,ne.cross=function(M,j,J){var te=j[0],fe=j[1],he=j[2],se=J[0],ve=J[1],Ce=J[2];return M[0]=fe*Ce-he*ve,M[1]=he*se-te*Ce,M[2]=te*ve-fe*se,M},ne.lerp=function(M,j,J,te){var fe=j[0],he=j[1],se=j[2];return M[0]=fe+te*(J[0]-fe),M[1]=he+te*(J[1]-he),M[2]=se+te*(J[2]-se),M},ne.hermite=function(M,j,J,te,fe,he){var se=he*he,ve=se*(2*he-3)+1,Ce=se*(he-2)+he,Ve=se*(he-1),et=se*(3-2*he);return M[0]=j[0]*ve+J[0]*Ce+te[0]*Ve+fe[0]*et,M[1]=j[1]*ve+J[1]*Ce+te[1]*Ve+fe[1]*et,M[2]=j[2]*ve+J[2]*Ce+te[2]*Ve+fe[2]*et,M},ne.bezier=function(M,j,J,te,fe,he){var se=1-he,ve=se*se,Ce=he*he,Ve=ve*se,et=3*he*ve,Ye=3*Ce*se,Xe=Ce*he;return M[0]=j[0]*Ve+J[0]*et+te[0]*Ye+fe[0]*Xe,M[1]=j[1]*Ve+J[1]*et+te[1]*Ye+fe[1]*Xe,M[2]=j[2]*Ve+J[2]*et+te[2]*Ye+fe[2]*Xe,M},ne.random=function(M,j){j=j||1;var J=2*s.RANDOM()*Math.PI,te=2*s.RANDOM()-1,fe=Math.sqrt(1-te*te)*j;return M[0]=Math.cos(J)*fe,M[1]=Math.sin(J)*fe,M[2]=te*j,M},ne.transformMat4=function(M,j,J){var te=j[0],fe=j[1],he=j[2],se=J[3]*te+J[7]*fe+J[11]*he+J[15];return M[0]=(J[0]*te+J[4]*fe+J[8]*he+J[12])/(se=se||1),M[1]=(J[1]*te+J[5]*fe+J[9]*he+J[13])/se,M[2]=(J[2]*te+J[6]*fe+J[10]*he+J[14])/se,M},ne.transformMat3=function(M,j,J){var te=j[0],fe=j[1],he=j[2];return M[0]=te*J[0]+fe*J[3]+he*J[6],M[1]=te*J[1]+fe*J[4]+he*J[7],M[2]=te*J[2]+fe*J[5]+he*J[8],M},ne.transformQuat=function(M,j,J){var te=J[0],fe=J[1],he=J[2],se=j[0],ve=j[1],Ce=j[2],Ve=fe*Ce-he*ve,et=he*se-te*Ce,Ye=te*ve-fe*se,Xe=fe*Ye-he*et,gt=he*Ve-te*Ye,tt=te*et-fe*Ve,_t=2*J[3];return et*=_t,Ye*=_t,gt*=2,tt*=2,M[0]=se+(Ve*=_t)+(Xe*=2),M[1]=ve+et+gt,M[2]=Ce+Ye+tt,M},ne.rotateX=function(M,j,J,te){var fe=[],he=[];return fe[0]=j[0]-J[0],fe[1]=j[1]-J[1],fe[2]=j[2]-J[2],he[0]=fe[0],he[1]=fe[1]*Math.cos(te)-fe[2]*Math.sin(te),he[2]=fe[1]*Math.sin(te)+fe[2]*Math.cos(te),M[0]=he[0]+J[0],M[1]=he[1]+J[1],M[2]=he[2]+J[2],M},ne.rotateY=function(M,j,J,te){var fe=[],he=[];return fe[0]=j[0]-J[0],fe[1]=j[1]-J[1],fe[2]=j[2]-J[2],he[0]=fe[2]*Math.sin(te)+fe[0]*Math.cos(te),he[1]=fe[1],he[2]=fe[2]*Math.cos(te)-fe[0]*Math.sin(te),M[0]=he[0]+J[0],M[1]=he[1]+J[1],M[2]=he[2]+J[2],M},ne.rotateZ=function(M,j,J,te){var fe=[],he=[];return fe[0]=j[0]-J[0],fe[1]=j[1]-J[1],fe[2]=j[2]-J[2],he[0]=fe[0]*Math.cos(te)-fe[1]*Math.sin(te),he[1]=fe[0]*Math.sin(te)+fe[1]*Math.cos(te),he[2]=fe[2],M[0]=he[0]+J[0],M[1]=he[1]+J[1],M[2]=he[2]+J[2],M},ne.angle=function(M,j){var J=M[0],te=M[1],fe=M[2],he=j[0],se=j[1],ve=j[2],Ce=Math.sqrt(J*J+te*te+fe*fe)*Math.sqrt(he*he+se*se+ve*ve),Ve=Ce&&V(M,j)/Ce;return Math.acos(Math.min(Math.max(Ve,-1),1))},ne.zero=function(M){return M[0]=0,M[1]=0,M[2]=0,M},ne.str=function(M){return"vec3("+M[0]+", "+M[1]+", "+M[2]+")"},ne.exactEquals=function(M,j){return M[0]===j[0]&&M[1]===j[1]&&M[2]===j[2]},ne.equals=function(M,j){var J=M[0],te=M[1],fe=M[2],he=j[0],se=j[1],ve=j[2];return Math.abs(J-he)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(he))&&Math.abs(te-se)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(se))&&Math.abs(fe-ve)<=s.EPSILON*Math.max(1,Math.abs(fe),Math.abs(ve))},ne.forEach=ne.sqrLen=ne.len=ne.sqrDist=ne.dist=ne.div=ne.mul=ne.sub=void 0;var s=function(M,j){if(M&&M.__esModule)return M;if(M===null||h(M)!=="object"&&typeof M!="function")return{default:M};var J=u(void 0);if(J&&J.has(M))return J.get(M);var te={},fe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in M)if(he!=="default"&&Object.prototype.hasOwnProperty.call(M,he)){var se=fe?Object.getOwnPropertyDescriptor(M,he):null;se&&(se.get||se.set)?Object.defineProperty(te,he,se):te[he]=M[he]}return te.default=M,J&&J.set(M,te),te}(I());function u(M){if(typeof WeakMap!="function")return null;var j=new WeakMap,J=new WeakMap;return(u=function(te){return te?J:j})(M)}function f(){var M=new s.ARRAY_TYPE(3);return s.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0),M}function g(M){return Math.hypot(M[0],M[1],M[2])}function m(M,j,J){return M[0]=j[0]-J[0],M[1]=j[1]-J[1],M[2]=j[2]-J[2],M}function _(M,j,J){return M[0]=j[0]*J[0],M[1]=j[1]*J[1],M[2]=j[2]*J[2],M}function b(M,j,J){return M[0]=j[0]/J[0],M[1]=j[1]/J[1],M[2]=j[2]/J[2],M}function O(M,j){return Math.hypot(j[0]-M[0],j[1]-M[1],j[2]-M[2])}function D(M,j){var J=j[0]-M[0],te=j[1]-M[1],fe=j[2]-M[2];return J*J+te*te+fe*fe}function C(M){var j=M[0],J=M[1],te=M[2];return j*j+J*J+te*te}function V(M,j){return M[0]*j[0]+M[1]*j[1]+M[2]*j[2]}ne.sub=m,ne.mul=_,ne.div=b,ne.dist=O,ne.sqrDist=D,ne.len=g,ne.sqrLen=C;var L,z=(L=f(),function(M,j,J,te,fe,he){var se,ve;for(j||(j=3),J||(J=0),ve=te?Math.min(te*j+J,M.length):M.length,se=J;se<ve;se+=j)L[0]=M[se],L[1]=M[se+1],L[2]=M[se+2],fe(L,L,he),M[se]=L[0],M[se+1]=L[1],M[se+2]=L[2];return M});return ne.forEach=z,ne}var ke,Pe,Ee={};function De(){if(ke)return Ee;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}ke=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.create=f,Ee.clone=function(z){var M=new s.ARRAY_TYPE(4);return M[0]=z[0],M[1]=z[1],M[2]=z[2],M[3]=z[3],M},Ee.fromValues=function(z,M,j,J){var te=new s.ARRAY_TYPE(4);return te[0]=z,te[1]=M,te[2]=j,te[3]=J,te},Ee.copy=function(z,M){return z[0]=M[0],z[1]=M[1],z[2]=M[2],z[3]=M[3],z},Ee.set=function(z,M,j,J,te){return z[0]=M,z[1]=j,z[2]=J,z[3]=te,z},Ee.add=function(z,M,j){return z[0]=M[0]+j[0],z[1]=M[1]+j[1],z[2]=M[2]+j[2],z[3]=M[3]+j[3],z},Ee.subtract=g,Ee.multiply=m,Ee.divide=_,Ee.ceil=function(z,M){return z[0]=Math.ceil(M[0]),z[1]=Math.ceil(M[1]),z[2]=Math.ceil(M[2]),z[3]=Math.ceil(M[3]),z},Ee.floor=function(z,M){return z[0]=Math.floor(M[0]),z[1]=Math.floor(M[1]),z[2]=Math.floor(M[2]),z[3]=Math.floor(M[3]),z},Ee.min=function(z,M,j){return z[0]=Math.min(M[0],j[0]),z[1]=Math.min(M[1],j[1]),z[2]=Math.min(M[2],j[2]),z[3]=Math.min(M[3],j[3]),z},Ee.max=function(z,M,j){return z[0]=Math.max(M[0],j[0]),z[1]=Math.max(M[1],j[1]),z[2]=Math.max(M[2],j[2]),z[3]=Math.max(M[3],j[3]),z},Ee.round=function(z,M){return z[0]=Math.round(M[0]),z[1]=Math.round(M[1]),z[2]=Math.round(M[2]),z[3]=Math.round(M[3]),z},Ee.scale=function(z,M,j){return z[0]=M[0]*j,z[1]=M[1]*j,z[2]=M[2]*j,z[3]=M[3]*j,z},Ee.scaleAndAdd=function(z,M,j,J){return z[0]=M[0]+j[0]*J,z[1]=M[1]+j[1]*J,z[2]=M[2]+j[2]*J,z[3]=M[3]+j[3]*J,z},Ee.distance=b,Ee.squaredDistance=O,Ee.length=D,Ee.squaredLength=C,Ee.negate=function(z,M){return z[0]=-M[0],z[1]=-M[1],z[2]=-M[2],z[3]=-M[3],z},Ee.inverse=function(z,M){return z[0]=1/M[0],z[1]=1/M[1],z[2]=1/M[2],z[3]=1/M[3],z},Ee.normalize=function(z,M){var j=M[0],J=M[1],te=M[2],fe=M[3],he=j*j+J*J+te*te+fe*fe;return he>0&&(he=1/Math.sqrt(he)),z[0]=j*he,z[1]=J*he,z[2]=te*he,z[3]=fe*he,z},Ee.dot=function(z,M){return z[0]*M[0]+z[1]*M[1]+z[2]*M[2]+z[3]*M[3]},Ee.cross=function(z,M,j,J){var te=j[0]*J[1]-j[1]*J[0],fe=j[0]*J[2]-j[2]*J[0],he=j[0]*J[3]-j[3]*J[0],se=j[1]*J[2]-j[2]*J[1],ve=j[1]*J[3]-j[3]*J[1],Ce=j[2]*J[3]-j[3]*J[2],Ve=M[0],et=M[1],Ye=M[2],Xe=M[3];return z[0]=et*Ce-Ye*ve+Xe*se,z[1]=-Ve*Ce+Ye*he-Xe*fe,z[2]=Ve*ve-et*he+Xe*te,z[3]=-Ve*se+et*fe-Ye*te,z},Ee.lerp=function(z,M,j,J){var te=M[0],fe=M[1],he=M[2],se=M[3];return z[0]=te+J*(j[0]-te),z[1]=fe+J*(j[1]-fe),z[2]=he+J*(j[2]-he),z[3]=se+J*(j[3]-se),z},Ee.random=function(z,M){var j,J,te,fe,he,se;M=M||1;do he=(j=2*s.RANDOM()-1)*j+(J=2*s.RANDOM()-1)*J;while(he>=1);do se=(te=2*s.RANDOM()-1)*te+(fe=2*s.RANDOM()-1)*fe;while(se>=1);var ve=Math.sqrt((1-he)/se);return z[0]=M*j,z[1]=M*J,z[2]=M*te*ve,z[3]=M*fe*ve,z},Ee.transformMat4=function(z,M,j){var J=M[0],te=M[1],fe=M[2],he=M[3];return z[0]=j[0]*J+j[4]*te+j[8]*fe+j[12]*he,z[1]=j[1]*J+j[5]*te+j[9]*fe+j[13]*he,z[2]=j[2]*J+j[6]*te+j[10]*fe+j[14]*he,z[3]=j[3]*J+j[7]*te+j[11]*fe+j[15]*he,z},Ee.transformQuat=function(z,M,j){var J=M[0],te=M[1],fe=M[2],he=j[0],se=j[1],ve=j[2],Ce=j[3],Ve=Ce*J+se*fe-ve*te,et=Ce*te+ve*J-he*fe,Ye=Ce*fe+he*te-se*J,Xe=-he*J-se*te-ve*fe;return z[0]=Ve*Ce+Xe*-he+et*-ve-Ye*-se,z[1]=et*Ce+Xe*-se+Ye*-he-Ve*-ve,z[2]=Ye*Ce+Xe*-ve+Ve*-se-et*-he,z[3]=M[3],z},Ee.zero=function(z){return z[0]=0,z[1]=0,z[2]=0,z[3]=0,z},Ee.str=function(z){return"vec4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+")"},Ee.exactEquals=function(z,M){return z[0]===M[0]&&z[1]===M[1]&&z[2]===M[2]&&z[3]===M[3]},Ee.equals=function(z,M){var j=z[0],J=z[1],te=z[2],fe=z[3],he=M[0],se=M[1],ve=M[2],Ce=M[3];return Math.abs(j-he)<=s.EPSILON*Math.max(1,Math.abs(j),Math.abs(he))&&Math.abs(J-se)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(se))&&Math.abs(te-ve)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(ve))&&Math.abs(fe-Ce)<=s.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Ce))},Ee.forEach=Ee.sqrLen=Ee.len=Ee.sqrDist=Ee.dist=Ee.div=Ee.mul=Ee.sub=void 0;var s=function(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var j=u(void 0);if(j&&j.has(z))return j.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var fe in z)if(fe!=="default"&&Object.prototype.hasOwnProperty.call(z,fe)){var he=te?Object.getOwnPropertyDescriptor(z,fe):null;he&&(he.get||he.set)?Object.defineProperty(J,fe,he):J[fe]=z[fe]}return J.default=z,j&&j.set(z,J),J}(I());function u(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,j=new WeakMap;return(u=function(J){return J?j:M})(z)}function f(){var z=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0),z}function g(z,M,j){return z[0]=M[0]-j[0],z[1]=M[1]-j[1],z[2]=M[2]-j[2],z[3]=M[3]-j[3],z}function m(z,M,j){return z[0]=M[0]*j[0],z[1]=M[1]*j[1],z[2]=M[2]*j[2],z[3]=M[3]*j[3],z}function _(z,M,j){return z[0]=M[0]/j[0],z[1]=M[1]/j[1],z[2]=M[2]/j[2],z[3]=M[3]/j[3],z}function b(z,M){return Math.hypot(M[0]-z[0],M[1]-z[1],M[2]-z[2],M[3]-z[3])}function O(z,M){var j=M[0]-z[0],J=M[1]-z[1],te=M[2]-z[2],fe=M[3]-z[3];return j*j+J*J+te*te+fe*fe}function D(z){return Math.hypot(z[0],z[1],z[2],z[3])}function C(z){var M=z[0],j=z[1],J=z[2],te=z[3];return M*M+j*j+J*J+te*te}Ee.sub=g,Ee.mul=m,Ee.div=_,Ee.dist=b,Ee.sqrDist=O,Ee.len=D,Ee.sqrLen=C;var V,L=(V=f(),function(z,M,j,J,te,fe){var he,se;for(M||(M=4),j||(j=0),se=J?Math.min(J*M+j,z.length):z.length,he=j;he<se;he+=M)V[0]=z[he],V[1]=z[he+1],V[2]=z[he+2],V[3]=z[he+3],te(V,V,fe),z[he]=V[0],z[he+1]=V[1],z[he+2]=V[2],z[he+3]=V[3];return z});return Ee.forEach=L,Ee}function qe(){if(Pe)return Ne;function h(tt){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_t){return typeof _t}:function(_t){return _t&&typeof Symbol=="function"&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t},h(tt)}Pe=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.create=b,Ne.identity=function(tt){return tt[0]=0,tt[1]=0,tt[2]=0,tt[3]=1,tt},Ne.setAxisAngle=O,Ne.getAxisAngle=function(tt,_t){var xt=2*Math.acos(_t[3]),Ct=Math.sin(xt/2);return Ct>s.EPSILON?(tt[0]=_t[0]/Ct,tt[1]=_t[1]/Ct,tt[2]=_t[2]/Ct):(tt[0]=1,tt[1]=0,tt[2]=0),xt},Ne.getAngle=function(tt,_t){var xt=j(tt,_t);return Math.acos(2*xt*xt-1)},Ne.multiply=D,Ne.rotateX=function(tt,_t,xt){xt*=.5;var Ct=_t[0],Mt=_t[1],Ot=_t[2],jt=_t[3],Ft=Math.sin(xt),$t=Math.cos(xt);return tt[0]=Ct*$t+jt*Ft,tt[1]=Mt*$t+Ot*Ft,tt[2]=Ot*$t-Mt*Ft,tt[3]=jt*$t-Ct*Ft,tt},Ne.rotateY=function(tt,_t,xt){xt*=.5;var Ct=_t[0],Mt=_t[1],Ot=_t[2],jt=_t[3],Ft=Math.sin(xt),$t=Math.cos(xt);return tt[0]=Ct*$t-Ot*Ft,tt[1]=Mt*$t+jt*Ft,tt[2]=Ot*$t+Ct*Ft,tt[3]=jt*$t-Mt*Ft,tt},Ne.rotateZ=function(tt,_t,xt){xt*=.5;var Ct=_t[0],Mt=_t[1],Ot=_t[2],jt=_t[3],Ft=Math.sin(xt),$t=Math.cos(xt);return tt[0]=Ct*$t+Mt*Ft,tt[1]=Mt*$t-Ct*Ft,tt[2]=Ot*$t+jt*Ft,tt[3]=jt*$t-Ot*Ft,tt},Ne.calculateW=function(tt,_t){var xt=_t[0],Ct=_t[1],Mt=_t[2];return tt[0]=xt,tt[1]=Ct,tt[2]=Mt,tt[3]=Math.sqrt(Math.abs(1-xt*xt-Ct*Ct-Mt*Mt)),tt},Ne.exp=C,Ne.ln=V,Ne.pow=function(tt,_t,xt){return V(tt,_t),M(tt,tt,xt),C(tt,tt),tt},Ne.slerp=L,Ne.random=function(tt){var _t=s.RANDOM(),xt=s.RANDOM(),Ct=s.RANDOM(),Mt=Math.sqrt(1-_t),Ot=Math.sqrt(_t);return tt[0]=Mt*Math.sin(2*Math.PI*xt),tt[1]=Mt*Math.cos(2*Math.PI*xt),tt[2]=Ot*Math.sin(2*Math.PI*Ct),tt[3]=Ot*Math.cos(2*Math.PI*Ct),tt},Ne.invert=function(tt,_t){var xt=_t[0],Ct=_t[1],Mt=_t[2],Ot=_t[3],jt=xt*xt+Ct*Ct+Mt*Mt+Ot*Ot,Ft=jt?1/jt:0;return tt[0]=-xt*Ft,tt[1]=-Ct*Ft,tt[2]=-Mt*Ft,tt[3]=Ot*Ft,tt},Ne.conjugate=function(tt,_t){return tt[0]=-_t[0],tt[1]=-_t[1],tt[2]=-_t[2],tt[3]=_t[3],tt},Ne.fromMat3=z,Ne.fromEuler=function(tt,_t,xt,Ct){var Mt=.5*Math.PI/180;_t*=Mt,xt*=Mt,Ct*=Mt;var Ot=Math.sin(_t),jt=Math.cos(_t),Ft=Math.sin(xt),$t=Math.cos(xt),_a=Math.sin(Ct),ya=Math.cos(Ct);return tt[0]=Ot*$t*ya-jt*Ft*_a,tt[1]=jt*Ft*ya+Ot*$t*_a,tt[2]=jt*$t*_a-Ot*Ft*ya,tt[3]=jt*$t*ya+Ot*Ft*_a,tt},Ne.str=function(tt){return"quat("+tt[0]+", "+tt[1]+", "+tt[2]+", "+tt[3]+")"},Ne.setAxes=Ne.sqlerp=Ne.rotationTo=Ne.equals=Ne.exactEquals=Ne.normalize=Ne.sqrLen=Ne.squaredLength=Ne.len=Ne.length=Ne.lerp=Ne.dot=Ne.scale=Ne.mul=Ne.add=Ne.set=Ne.copy=Ne.fromValues=Ne.clone=void 0;var s=_(I()),u=_(le()),f=_(_e()),g=_(De());function m(tt){if(typeof WeakMap!="function")return null;var _t=new WeakMap,xt=new WeakMap;return(m=function(Ct){return Ct?xt:_t})(tt)}function _(tt,_t){if(tt&&tt.__esModule)return tt;if(tt===null||h(tt)!=="object"&&typeof tt!="function")return{default:tt};var xt=m(_t);if(xt&&xt.has(tt))return xt.get(tt);var Ct={},Mt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ot in tt)if(Ot!=="default"&&Object.prototype.hasOwnProperty.call(tt,Ot)){var jt=Mt?Object.getOwnPropertyDescriptor(tt,Ot):null;jt&&(jt.get||jt.set)?Object.defineProperty(Ct,Ot,jt):Ct[Ot]=tt[Ot]}return Ct.default=tt,xt&&xt.set(tt,Ct),Ct}function b(){var tt=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(tt[0]=0,tt[1]=0,tt[2]=0),tt[3]=1,tt}function O(tt,_t,xt){xt*=.5;var Ct=Math.sin(xt);return tt[0]=Ct*_t[0],tt[1]=Ct*_t[1],tt[2]=Ct*_t[2],tt[3]=Math.cos(xt),tt}function D(tt,_t,xt){var Ct=_t[0],Mt=_t[1],Ot=_t[2],jt=_t[3],Ft=xt[0],$t=xt[1],_a=xt[2],ya=xt[3];return tt[0]=Ct*ya+jt*Ft+Mt*_a-Ot*$t,tt[1]=Mt*ya+jt*$t+Ot*Ft-Ct*_a,tt[2]=Ot*ya+jt*_a+Ct*$t-Mt*Ft,tt[3]=jt*ya-Ct*Ft-Mt*$t-Ot*_a,tt}function C(tt,_t){var xt=_t[0],Ct=_t[1],Mt=_t[2],Ot=_t[3],jt=Math.sqrt(xt*xt+Ct*Ct+Mt*Mt),Ft=Math.exp(Ot),$t=jt>0?Ft*Math.sin(jt)/jt:0;return tt[0]=xt*$t,tt[1]=Ct*$t,tt[2]=Mt*$t,tt[3]=Ft*Math.cos(jt),tt}function V(tt,_t){var xt=_t[0],Ct=_t[1],Mt=_t[2],Ot=_t[3],jt=Math.sqrt(xt*xt+Ct*Ct+Mt*Mt),Ft=jt>0?Math.atan2(jt,Ot)/jt:0;return tt[0]=xt*Ft,tt[1]=Ct*Ft,tt[2]=Mt*Ft,tt[3]=.5*Math.log(xt*xt+Ct*Ct+Mt*Mt+Ot*Ot),tt}function L(tt,_t,xt,Ct){var Mt,Ot,jt,Ft,$t,_a=_t[0],ya=_t[1],Qa=_t[2],Na=_t[3],Ma=xt[0],Ra=xt[1],Sr=xt[2],Xa=xt[3];return(Ot=_a*Ma+ya*Ra+Qa*Sr+Na*Xa)<0&&(Ot=-Ot,Ma=-Ma,Ra=-Ra,Sr=-Sr,Xa=-Xa),1-Ot>s.EPSILON?(Mt=Math.acos(Ot),jt=Math.sin(Mt),Ft=Math.sin((1-Ct)*Mt)/jt,$t=Math.sin(Ct*Mt)/jt):(Ft=1-Ct,$t=Ct),tt[0]=Ft*_a+$t*Ma,tt[1]=Ft*ya+$t*Ra,tt[2]=Ft*Qa+$t*Sr,tt[3]=Ft*Na+$t*Xa,tt}function z(tt,_t){var xt,Ct=_t[0]+_t[4]+_t[8];if(Ct>0)xt=Math.sqrt(Ct+1),tt[3]=.5*xt,tt[0]=(_t[5]-_t[7])*(xt=.5/xt),tt[1]=(_t[6]-_t[2])*xt,tt[2]=(_t[1]-_t[3])*xt;else{var Mt=0;_t[4]>_t[0]&&(Mt=1),_t[8]>_t[3*Mt+Mt]&&(Mt=2);var Ot=(Mt+1)%3,jt=(Mt+2)%3;xt=Math.sqrt(_t[3*Mt+Mt]-_t[3*Ot+Ot]-_t[3*jt+jt]+1),tt[Mt]=.5*xt,tt[3]=(_t[3*Ot+jt]-_t[3*jt+Ot])*(xt=.5/xt),tt[Ot]=(_t[3*Ot+Mt]+_t[3*Mt+Ot])*xt,tt[jt]=(_t[3*jt+Mt]+_t[3*Mt+jt])*xt}return tt}Ne.clone=g.clone,Ne.fromValues=g.fromValues,Ne.copy=g.copy,Ne.set=g.set,Ne.add=g.add,Ne.mul=D;var M=g.scale;Ne.scale=M;var j=g.dot;Ne.dot=j,Ne.lerp=g.lerp;var J=g.length;Ne.length=J,Ne.len=J;var te=g.squaredLength;Ne.squaredLength=te,Ne.sqrLen=te;var fe=g.normalize;Ne.normalize=fe,Ne.exactEquals=g.exactEquals,Ne.equals=g.equals;var he,se,ve,Ce=(he=f.create(),se=f.fromValues(1,0,0),ve=f.fromValues(0,1,0),function(tt,_t,xt){var Ct=f.dot(_t,xt);return Ct<-.999999?(f.cross(he,se,_t),f.len(he)<1e-6&&f.cross(he,ve,_t),f.normalize(he,he),O(tt,he,Math.PI),tt):Ct>.999999?(tt[0]=0,tt[1]=0,tt[2]=0,tt[3]=1,tt):(f.cross(he,_t,xt),tt[0]=he[0],tt[1]=he[1],tt[2]=he[2],tt[3]=1+Ct,fe(tt,tt))});Ne.rotationTo=Ce;var Ve,et,Ye=(Ve=b(),et=b(),function(tt,_t,xt,Ct,Mt,Ot){return L(Ve,_t,Mt,Ot),L(et,xt,Ct,Ot),L(tt,Ve,et,2*Ot*(1-Ot)),tt});Ne.sqlerp=Ye;var Xe,gt=(Xe=u.create(),function(tt,_t,xt,Ct){return Xe[0]=xt[0],Xe[3]=xt[1],Xe[6]=xt[2],Xe[1]=Ct[0],Xe[4]=Ct[1],Xe[7]=Ct[2],Xe[2]=-_t[0],Xe[5]=-_t[1],Xe[8]=-_t[2],fe(tt,z(tt,Xe))});return Ne.setAxes=gt,Ne}var Oe,He={};function Ue(){if(Oe)return He;function h(L){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},h(L)}Oe=1,Object.defineProperty(He,"__esModule",{value:!0}),He.create=function(){var L=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[4]=0,L[5]=0,L[6]=0,L[7]=0),L[3]=1,L},He.clone=function(L){var z=new s.ARRAY_TYPE(8);return z[0]=L[0],z[1]=L[1],z[2]=L[2],z[3]=L[3],z[4]=L[4],z[5]=L[5],z[6]=L[6],z[7]=L[7],z},He.fromValues=function(L,z,M,j,J,te,fe,he){var se=new s.ARRAY_TYPE(8);return se[0]=L,se[1]=z,se[2]=M,se[3]=j,se[4]=J,se[5]=te,se[6]=fe,se[7]=he,se},He.fromRotationTranslationValues=function(L,z,M,j,J,te,fe){var he=new s.ARRAY_TYPE(8);he[0]=L,he[1]=z,he[2]=M,he[3]=j;var se=.5*J,ve=.5*te,Ce=.5*fe;return he[4]=se*j+ve*M-Ce*z,he[5]=ve*j+Ce*L-se*M,he[6]=Ce*j+se*z-ve*L,he[7]=-se*L-ve*z-Ce*M,he},He.fromRotationTranslation=_,He.fromTranslation=function(L,z){return L[0]=0,L[1]=0,L[2]=0,L[3]=1,L[4]=.5*z[0],L[5]=.5*z[1],L[6]=.5*z[2],L[7]=0,L},He.fromRotation=function(L,z){return L[0]=z[0],L[1]=z[1],L[2]=z[2],L[3]=z[3],L[4]=0,L[5]=0,L[6]=0,L[7]=0,L},He.fromMat4=function(L,z){var M=u.create();f.getRotation(M,z);var j=new s.ARRAY_TYPE(3);return f.getTranslation(j,z),_(L,M,j),L},He.copy=b,He.identity=function(L){return L[0]=0,L[1]=0,L[2]=0,L[3]=1,L[4]=0,L[5]=0,L[6]=0,L[7]=0,L},He.set=function(L,z,M,j,J,te,fe,he,se){return L[0]=z,L[1]=M,L[2]=j,L[3]=J,L[4]=te,L[5]=fe,L[6]=he,L[7]=se,L},He.getDual=function(L,z){return L[0]=z[4],L[1]=z[5],L[2]=z[6],L[3]=z[7],L},He.setDual=function(L,z){return L[4]=z[0],L[5]=z[1],L[6]=z[2],L[7]=z[3],L},He.getTranslation=function(L,z){var M=z[4],j=z[5],J=z[6],te=z[7],fe=-z[0],he=-z[1],se=-z[2],ve=z[3];return L[0]=2*(M*ve+te*fe+j*se-J*he),L[1]=2*(j*ve+te*he+J*fe-M*se),L[2]=2*(J*ve+te*se+M*he-j*fe),L},He.translate=function(L,z,M){var j=z[0],J=z[1],te=z[2],fe=z[3],he=.5*M[0],se=.5*M[1],ve=.5*M[2],Ce=z[4],Ve=z[5],et=z[6],Ye=z[7];return L[0]=j,L[1]=J,L[2]=te,L[3]=fe,L[4]=fe*he+J*ve-te*se+Ce,L[5]=fe*se+te*he-j*ve+Ve,L[6]=fe*ve+j*se-J*he+et,L[7]=-j*he-J*se-te*ve+Ye,L},He.rotateX=function(L,z,M){var j=-z[0],J=-z[1],te=-z[2],fe=z[3],he=z[4],se=z[5],ve=z[6],Ce=z[7],Ve=he*fe+Ce*j+se*te-ve*J,et=se*fe+Ce*J+ve*j-he*te,Ye=ve*fe+Ce*te+he*J-se*j,Xe=Ce*fe-he*j-se*J-ve*te;return u.rotateX(L,z,M),L[4]=Ve*(fe=L[3])+Xe*(j=L[0])+et*(te=L[2])-Ye*(J=L[1]),L[5]=et*fe+Xe*J+Ye*j-Ve*te,L[6]=Ye*fe+Xe*te+Ve*J-et*j,L[7]=Xe*fe-Ve*j-et*J-Ye*te,L},He.rotateY=function(L,z,M){var j=-z[0],J=-z[1],te=-z[2],fe=z[3],he=z[4],se=z[5],ve=z[6],Ce=z[7],Ve=he*fe+Ce*j+se*te-ve*J,et=se*fe+Ce*J+ve*j-he*te,Ye=ve*fe+Ce*te+he*J-se*j,Xe=Ce*fe-he*j-se*J-ve*te;return u.rotateY(L,z,M),L[4]=Ve*(fe=L[3])+Xe*(j=L[0])+et*(te=L[2])-Ye*(J=L[1]),L[5]=et*fe+Xe*J+Ye*j-Ve*te,L[6]=Ye*fe+Xe*te+Ve*J-et*j,L[7]=Xe*fe-Ve*j-et*J-Ye*te,L},He.rotateZ=function(L,z,M){var j=-z[0],J=-z[1],te=-z[2],fe=z[3],he=z[4],se=z[5],ve=z[6],Ce=z[7],Ve=he*fe+Ce*j+se*te-ve*J,et=se*fe+Ce*J+ve*j-he*te,Ye=ve*fe+Ce*te+he*J-se*j,Xe=Ce*fe-he*j-se*J-ve*te;return u.rotateZ(L,z,M),L[4]=Ve*(fe=L[3])+Xe*(j=L[0])+et*(te=L[2])-Ye*(J=L[1]),L[5]=et*fe+Xe*J+Ye*j-Ve*te,L[6]=Ye*fe+Xe*te+Ve*J-et*j,L[7]=Xe*fe-Ve*j-et*J-Ye*te,L},He.rotateByQuatAppend=function(L,z,M){var j=M[0],J=M[1],te=M[2],fe=M[3],he=z[0],se=z[1],ve=z[2],Ce=z[3];return L[0]=he*fe+Ce*j+se*te-ve*J,L[1]=se*fe+Ce*J+ve*j-he*te,L[2]=ve*fe+Ce*te+he*J-se*j,L[3]=Ce*fe-he*j-se*J-ve*te,L[4]=(he=z[4])*fe+(Ce=z[7])*j+(se=z[5])*te-(ve=z[6])*J,L[5]=se*fe+Ce*J+ve*j-he*te,L[6]=ve*fe+Ce*te+he*J-se*j,L[7]=Ce*fe-he*j-se*J-ve*te,L},He.rotateByQuatPrepend=function(L,z,M){var j=z[0],J=z[1],te=z[2],fe=z[3],he=M[0],se=M[1],ve=M[2],Ce=M[3];return L[0]=j*Ce+fe*he+J*ve-te*se,L[1]=J*Ce+fe*se+te*he-j*ve,L[2]=te*Ce+fe*ve+j*se-J*he,L[3]=fe*Ce-j*he-J*se-te*ve,L[4]=j*(Ce=M[7])+fe*(he=M[4])+J*(ve=M[6])-te*(se=M[5]),L[5]=J*Ce+fe*se+te*he-j*ve,L[6]=te*Ce+fe*ve+j*se-J*he,L[7]=fe*Ce-j*he-J*se-te*ve,L},He.rotateAroundAxis=function(L,z,M,j){if(Math.abs(j)<s.EPSILON)return b(L,z);var J=Math.hypot(M[0],M[1],M[2]);j*=.5;var te=Math.sin(j),fe=te*M[0]/J,he=te*M[1]/J,se=te*M[2]/J,ve=Math.cos(j),Ce=z[0],Ve=z[1],et=z[2],Ye=z[3];L[0]=Ce*ve+Ye*fe+Ve*se-et*he,L[1]=Ve*ve+Ye*he+et*fe-Ce*se,L[2]=et*ve+Ye*se+Ce*he-Ve*fe,L[3]=Ye*ve-Ce*fe-Ve*he-et*se;var Xe=z[4],gt=z[5],tt=z[6],_t=z[7];return L[4]=Xe*ve+_t*fe+gt*se-tt*he,L[5]=gt*ve+_t*he+tt*fe-Xe*se,L[6]=tt*ve+_t*se+Xe*he-gt*fe,L[7]=_t*ve-Xe*fe-gt*he-tt*se,L},He.add=function(L,z,M){return L[0]=z[0]+M[0],L[1]=z[1]+M[1],L[2]=z[2]+M[2],L[3]=z[3]+M[3],L[4]=z[4]+M[4],L[5]=z[5]+M[5],L[6]=z[6]+M[6],L[7]=z[7]+M[7],L},He.multiply=O,He.scale=function(L,z,M){return L[0]=z[0]*M,L[1]=z[1]*M,L[2]=z[2]*M,L[3]=z[3]*M,L[4]=z[4]*M,L[5]=z[5]*M,L[6]=z[6]*M,L[7]=z[7]*M,L},He.lerp=function(L,z,M,j){var J=1-j;return D(z,M)<0&&(j=-j),L[0]=z[0]*J+M[0]*j,L[1]=z[1]*J+M[1]*j,L[2]=z[2]*J+M[2]*j,L[3]=z[3]*J+M[3]*j,L[4]=z[4]*J+M[4]*j,L[5]=z[5]*J+M[5]*j,L[6]=z[6]*J+M[6]*j,L[7]=z[7]*J+M[7]*j,L},He.invert=function(L,z){var M=V(z);return L[0]=-z[0]/M,L[1]=-z[1]/M,L[2]=-z[2]/M,L[3]=z[3]/M,L[4]=-z[4]/M,L[5]=-z[5]/M,L[6]=-z[6]/M,L[7]=z[7]/M,L},He.conjugate=function(L,z){return L[0]=-z[0],L[1]=-z[1],L[2]=-z[2],L[3]=z[3],L[4]=-z[4],L[5]=-z[5],L[6]=-z[6],L[7]=z[7],L},He.normalize=function(L,z){var M=V(z);if(M>0){M=Math.sqrt(M);var j=z[0]/M,J=z[1]/M,te=z[2]/M,fe=z[3]/M,he=z[4],se=z[5],ve=z[6],Ce=z[7],Ve=j*he+J*se+te*ve+fe*Ce;L[0]=j,L[1]=J,L[2]=te,L[3]=fe,L[4]=(he-j*Ve)/M,L[5]=(se-J*Ve)/M,L[6]=(ve-te*Ve)/M,L[7]=(Ce-fe*Ve)/M}return L},He.str=function(L){return"quat2("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+")"},He.exactEquals=function(L,z){return L[0]===z[0]&&L[1]===z[1]&&L[2]===z[2]&&L[3]===z[3]&&L[4]===z[4]&&L[5]===z[5]&&L[6]===z[6]&&L[7]===z[7]},He.equals=function(L,z){var M=L[0],j=L[1],J=L[2],te=L[3],fe=L[4],he=L[5],se=L[6],ve=L[7],Ce=z[0],Ve=z[1],et=z[2],Ye=z[3],Xe=z[4],gt=z[5],tt=z[6],_t=z[7];return Math.abs(M-Ce)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(Ce))&&Math.abs(j-Ve)<=s.EPSILON*Math.max(1,Math.abs(j),Math.abs(Ve))&&Math.abs(J-et)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(et))&&Math.abs(te-Ye)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ye))&&Math.abs(fe-Xe)<=s.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Xe))&&Math.abs(he-gt)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(gt))&&Math.abs(se-tt)<=s.EPSILON*Math.max(1,Math.abs(se),Math.abs(tt))&&Math.abs(ve-_t)<=s.EPSILON*Math.max(1,Math.abs(ve),Math.abs(_t))},He.sqrLen=He.squaredLength=He.len=He.length=He.dot=He.mul=He.setReal=He.getReal=void 0;var s=m(I()),u=m(qe()),f=m(Re());function g(L){if(typeof WeakMap!="function")return null;var z=new WeakMap,M=new WeakMap;return(g=function(j){return j?M:z})(L)}function m(L,z){if(L&&L.__esModule)return L;if(L===null||h(L)!=="object"&&typeof L!="function")return{default:L};var M=g(z);if(M&&M.has(L))return M.get(L);var j={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in L)if(te!=="default"&&Object.prototype.hasOwnProperty.call(L,te)){var fe=J?Object.getOwnPropertyDescriptor(L,te):null;fe&&(fe.get||fe.set)?Object.defineProperty(j,te,fe):j[te]=L[te]}return j.default=L,M&&M.set(L,j),j}function _(L,z,M){var j=.5*M[0],J=.5*M[1],te=.5*M[2],fe=z[0],he=z[1],se=z[2],ve=z[3];return L[0]=fe,L[1]=he,L[2]=se,L[3]=ve,L[4]=j*ve+J*se-te*he,L[5]=J*ve+te*fe-j*se,L[6]=te*ve+j*he-J*fe,L[7]=-j*fe-J*he-te*se,L}function b(L,z){return L[0]=z[0],L[1]=z[1],L[2]=z[2],L[3]=z[3],L[4]=z[4],L[5]=z[5],L[6]=z[6],L[7]=z[7],L}function O(L,z,M){var j=z[0],J=z[1],te=z[2],fe=z[3],he=M[4],se=M[5],ve=M[6],Ce=M[7],Ve=z[4],et=z[5],Ye=z[6],Xe=z[7],gt=M[0],tt=M[1],_t=M[2],xt=M[3];return L[0]=j*xt+fe*gt+J*_t-te*tt,L[1]=J*xt+fe*tt+te*gt-j*_t,L[2]=te*xt+fe*_t+j*tt-J*gt,L[3]=fe*xt-j*gt-J*tt-te*_t,L[4]=j*Ce+fe*he+J*ve-te*se+Ve*xt+Xe*gt+et*_t-Ye*tt,L[5]=J*Ce+fe*se+te*he-j*ve+et*xt+Xe*tt+Ye*gt-Ve*_t,L[6]=te*Ce+fe*ve+j*se-J*he+Ye*xt+Xe*_t+Ve*tt-et*gt,L[7]=fe*Ce-j*he-J*se-te*ve+Xe*xt-Ve*gt-et*tt-Ye*_t,L}He.getReal=u.copy,He.setReal=u.copy,He.mul=O;var D=u.dot;He.dot=D;var C=u.length;He.length=C,He.len=C;var V=u.squaredLength;return He.squaredLength=V,He.sqrLen=V,He}var ct,Se,Ie={};function je(){if(ct)return Ie;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}ct=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.create=f,Ie.clone=function(z){var M=new s.ARRAY_TYPE(2);return M[0]=z[0],M[1]=z[1],M},Ie.fromValues=function(z,M){var j=new s.ARRAY_TYPE(2);return j[0]=z,j[1]=M,j},Ie.copy=function(z,M){return z[0]=M[0],z[1]=M[1],z},Ie.set=function(z,M,j){return z[0]=M,z[1]=j,z},Ie.add=function(z,M,j){return z[0]=M[0]+j[0],z[1]=M[1]+j[1],z},Ie.subtract=g,Ie.multiply=m,Ie.divide=_,Ie.ceil=function(z,M){return z[0]=Math.ceil(M[0]),z[1]=Math.ceil(M[1]),z},Ie.floor=function(z,M){return z[0]=Math.floor(M[0]),z[1]=Math.floor(M[1]),z},Ie.min=function(z,M,j){return z[0]=Math.min(M[0],j[0]),z[1]=Math.min(M[1],j[1]),z},Ie.max=function(z,M,j){return z[0]=Math.max(M[0],j[0]),z[1]=Math.max(M[1],j[1]),z},Ie.round=function(z,M){return z[0]=Math.round(M[0]),z[1]=Math.round(M[1]),z},Ie.scale=function(z,M,j){return z[0]=M[0]*j,z[1]=M[1]*j,z},Ie.scaleAndAdd=function(z,M,j,J){return z[0]=M[0]+j[0]*J,z[1]=M[1]+j[1]*J,z},Ie.distance=b,Ie.squaredDistance=O,Ie.length=D,Ie.squaredLength=C,Ie.negate=function(z,M){return z[0]=-M[0],z[1]=-M[1],z},Ie.inverse=function(z,M){return z[0]=1/M[0],z[1]=1/M[1],z},Ie.normalize=function(z,M){var j=M[0],J=M[1],te=j*j+J*J;return te>0&&(te=1/Math.sqrt(te)),z[0]=M[0]*te,z[1]=M[1]*te,z},Ie.dot=function(z,M){return z[0]*M[0]+z[1]*M[1]},Ie.cross=function(z,M,j){var J=M[0]*j[1]-M[1]*j[0];return z[0]=z[1]=0,z[2]=J,z},Ie.lerp=function(z,M,j,J){var te=M[0],fe=M[1];return z[0]=te+J*(j[0]-te),z[1]=fe+J*(j[1]-fe),z},Ie.random=function(z,M){M=M||1;var j=2*s.RANDOM()*Math.PI;return z[0]=Math.cos(j)*M,z[1]=Math.sin(j)*M,z},Ie.transformMat2=function(z,M,j){var J=M[0],te=M[1];return z[0]=j[0]*J+j[2]*te,z[1]=j[1]*J+j[3]*te,z},Ie.transformMat2d=function(z,M,j){var J=M[0],te=M[1];return z[0]=j[0]*J+j[2]*te+j[4],z[1]=j[1]*J+j[3]*te+j[5],z},Ie.transformMat3=function(z,M,j){var J=M[0],te=M[1];return z[0]=j[0]*J+j[3]*te+j[6],z[1]=j[1]*J+j[4]*te+j[7],z},Ie.transformMat4=function(z,M,j){var J=M[0],te=M[1];return z[0]=j[0]*J+j[4]*te+j[12],z[1]=j[1]*J+j[5]*te+j[13],z},Ie.rotate=function(z,M,j,J){var te=M[0]-j[0],fe=M[1]-j[1],he=Math.sin(J),se=Math.cos(J);return z[0]=te*se-fe*he+j[0],z[1]=te*he+fe*se+j[1],z},Ie.angle=function(z,M){var j=z[0],J=z[1],te=M[0],fe=M[1],he=Math.sqrt(j*j+J*J)*Math.sqrt(te*te+fe*fe);return Math.acos(Math.min(Math.max(he&&(j*te+J*fe)/he,-1),1))},Ie.zero=function(z){return z[0]=0,z[1]=0,z},Ie.str=function(z){return"vec2("+z[0]+", "+z[1]+")"},Ie.exactEquals=function(z,M){return z[0]===M[0]&&z[1]===M[1]},Ie.equals=function(z,M){var j=z[0],J=z[1],te=M[0],fe=M[1];return Math.abs(j-te)<=s.EPSILON*Math.max(1,Math.abs(j),Math.abs(te))&&Math.abs(J-fe)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(fe))},Ie.forEach=Ie.sqrLen=Ie.sqrDist=Ie.dist=Ie.div=Ie.mul=Ie.sub=Ie.len=void 0;var s=function(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var j=u(void 0);if(j&&j.has(z))return j.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var fe in z)if(fe!=="default"&&Object.prototype.hasOwnProperty.call(z,fe)){var he=te?Object.getOwnPropertyDescriptor(z,fe):null;he&&(he.get||he.set)?Object.defineProperty(J,fe,he):J[fe]=z[fe]}return J.default=z,j&&j.set(z,J),J}(I());function u(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,j=new WeakMap;return(u=function(J){return J?j:M})(z)}function f(){var z=new s.ARRAY_TYPE(2);return s.ARRAY_TYPE!=Float32Array&&(z[0]=0,z[1]=0),z}function g(z,M,j){return z[0]=M[0]-j[0],z[1]=M[1]-j[1],z}function m(z,M,j){return z[0]=M[0]*j[0],z[1]=M[1]*j[1],z}function _(z,M,j){return z[0]=M[0]/j[0],z[1]=M[1]/j[1],z}function b(z,M){return Math.hypot(M[0]-z[0],M[1]-z[1])}function O(z,M){var j=M[0]-z[0],J=M[1]-z[1];return j*j+J*J}function D(z){return Math.hypot(z[0],z[1])}function C(z){var M=z[0],j=z[1];return M*M+j*j}Ie.len=D,Ie.sub=g,Ie.mul=m,Ie.div=_,Ie.dist=b,Ie.sqrDist=O,Ie.sqrLen=C;var V,L=(V=f(),function(z,M,j,J,te,fe){var he,se;for(M||(M=2),j||(j=0),se=J?Math.min(J*M+j,z.length):z.length,he=j;he<se;he+=M)V[0]=z[he],V[1]=z[he+1],te(V,V,fe),z[he]=V[0],z[he+1]=V[1];return z});return Ie.forEach=L,Ie}function Ze(){if(Se)return x;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}Se=1,Object.defineProperty(x,"__esModule",{value:!0}),x.vec4=x.vec3=x.vec2=x.quat2=x.quat=x.mat4=x.mat3=x.mat2d=x.mat2=x.glMatrix=void 0;var s=L(I());x.glMatrix=s;var u=L($());x.mat2=u;var f=L(ee());x.mat2d=f;var g=L(le());x.mat3=g;var m=L(Re());x.mat4=m;var _=L(qe());x.quat=_;var b=L(Ue());x.quat2=b;var O=L(je());x.vec2=O;var D=L(_e());x.vec3=D;var C=L(De());function V(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,j=new WeakMap;return(V=function(J){return J?j:M})(z)}function L(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var j=V(M);if(j&&j.has(z))return j.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var fe in z)if(fe!=="default"&&Object.prototype.hasOwnProperty.call(z,fe)){var he=te?Object.getOwnPropertyDescriptor(z,fe):null;he&&(he.get||he.set)?Object.defineProperty(J,fe,he):J[fe]=z[fe]}return J.default=z,j&&j.set(z,J),J}return x.vec4=C,x}var Be,Je,dt,ut,Ae=Ze(),Dt=function(){if(Je)return Be;function h(s,u,f,g){this.cx=3*s,this.bx=3*(f-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(g-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=f,this.p2y=g}return Je=1,Be=h,h.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var f=s,g=0;g<8;g++){var m=this.sampleCurveX(f)-s;if(Math.abs(m)<u)return f;var _=this.sampleCurveDerivativeX(f);if(Math.abs(_)<1e-6)break;f-=m/_}var b=0,O=1;for(f=s,g=0;g<20&&(m=this.sampleCurveX(f),!(Math.abs(m-s)<u));g++)s>m?b=f:O=f,f=.5*(O-b)+b;return f},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},Be}(),Lt=v(Dt);function fa(){if(ut)return dt;function h(s,u){this.x=s,this.y=u}return ut=1,dt=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,u){return this.clone()._rotateAround(s,u)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var u=s.x-this.x,f=s.y-this.y;return u*u+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,u){return Math.atan2(this.x*u-this.y*s,this.x*s+this.y*u)},_matMult:function(s){var u=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=u,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var u=Math.cos(s),f=Math.sin(s),g=f*this.x+u*this.y;return this.x=u*this.x-f*this.y,this.y=g,this},_rotateAround:function(s,u){var f=Math.cos(s),g=Math.sin(s),m=u.y+g*(this.x-u.x)+f*(this.y-u.y);return this.x=u.x+f*(this.x-u.x)-g*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(s){return s instanceof h?s:Array.isArray(s)?new h(s[0],s[1]):s},dt}var Nt=v(fa());function Ht(h,s){if(Array.isArray(h)){if(!Array.isArray(s)||h.length!==s.length)return!1;for(let u=0;u<h.length;u++)if(!Ht(h[u],s[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&s!==null){if(typeof s!="object"||Object.keys(h).length!==Object.keys(s).length)return!1;for(const u in h)if(!Ht(h[u],s[u]))return!1;return!0}return h===s}const wt=Math.PI/180,fr=180/Math.PI;function Ca(h){return h*wt}function za(h){return h*fr}const ar=[[0,0],[1,0],[1,1],[0,1]];function ur(h){if(h<=0)return 0;if(h>=1)return 1;const s=h*h,u=s*h;return 4*(h<.5?u:3*(h-s)+u-.75)}function or(h,s,u,f){const g=new Lt(h,s,u,f);return function(m){return g.solve(m)}}const Cr=or(.25,.1,.25,1);function Ia(h,s,u){return Math.min(u,Math.max(s,h))}function Fr(h,s,u){return(u=Ia((u-h)/(s-h),0,1))*u*(3-2*u)}function tn(h,s,u){const f=u-s,g=((h-s)%f+f)%f+s;return g===s?u:g}function lr(h,s,u){if(!h.length)return u(null,[]);let f=h.length;const g=new Array(h.length);let m=null;h.forEach((_,b)=>{s(_,(O,D)=>{O&&(m=O),g[b]=D,--f==0&&u(m,g)})})}function wr(h,...s){for(const u of s)for(const f in u)h[f]=u[f];return h}let na=1;function Oa(){return na++}function ra(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))}function ja(h,s){h.forEach(u=>{s[u]&&(s[u]=s[u].bind(s))})}function gr(h,s,u){const f={};for(const g in h)f[g]=s.call(this,h[g],g,h);return f}function Tn(h,s,u){const f={};for(const g in h)s.call(this,h[g],g,h)&&(f[g]=h[g]);return f}function an(h){return Array.isArray(h)?h.map(an):typeof h=="object"&&h?gr(h,an):h}const dn={};function Yr(h){dn[h]||(typeof console<"u"&&console.warn(h),dn[h]=!0)}function Pr(h,s,u){return(u.y-h.y)*(s.x-h.x)>(s.y-h.y)*(u.x-h.x)}function ki(h){let s=0;for(let u,f,g=0,m=h.length,_=m-1;g<m;_=g++)u=h[g],f=h[_],s+=(f.x-u.x)*(u.y+f.y);return s}function gi([h,s,u]){const f=Ca(s+90),g=Ca(u);return{x:h*Math.cos(f)*Math.sin(g),y:h*Math.sin(f)*Math.sin(g),z:h*Math.cos(g),azimuthal:s,polar:u}}function oi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Cs(h){const s={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,g,m)=>{const _=g||m;return s[f]=!_||_.toLowerCase(),""}),s["max-age"]){const u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s}let Aa=null;function mr(h,s){return[h[4*s],h[4*s+1],h[4*s+2],h[4*s+3]]}function Zr(h,s,u,f){for(;s<u;){const g=s+u>>1;h[g]<f?s=g+1:u=g}return s}function ti(h,s,u,f){for(;s<u;){const g=s+u>>1;h[g]<=f?s=g+1:u=g}return s}function Rn(h){return h>0?1/(1.001-h):1+h}function Zt(h){return h>0?1-1/(1.001-h):-h}const xe={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!xe.API_URL)return null;try{const h=new URL(xe.API_URL);return h.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":h.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Le(h){return xe.API_URL_REGEX.test(h)}function $e(h){return xe.API_SPRITE_REGEX.test(h)}let yt,At,bt,Gt,Et,Wt;function Yt(){return yt==null&&(yt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),yt}const Kt={now:()=>Gt!==void 0?Gt:performance.now(),setNow(h){Gt=h},restoreNow(){Gt=void 0},frame(h){const s=requestAnimationFrame(h);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(h,s=0){const{width:u,height:f}=h;Et||(Et=document.createElement("canvas"));const g=Et.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>Et.width||f>Et.height)&&(Et.width=u,Et.height=f),g.clearRect(-s,-s,u+2*s,f+2*s),g.drawImage(h,0,0,u,f),g.getImageData(-s,-s,u+2*s,f+2*s)},resolveURL:h=>(At||(At=document.createElement("a")),At.href=h,At.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(bt==null&&(bt=window.matchMedia("(prefers-reduced-motion: reduce)")),bt.matches)},hasCanvasFingerprintNoise(){if(Wt!==void 0)return Wt;if(!Yt())return Wt=!1,!1;const h=new OffscreenCanvas(85,1),s=h.getContext("2d",{willReadFrequently:!0});let u=0;for(let g=0;g<h.width;++g)s.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,s.fillRect(g,0,1,1);const f=s.getImageData(0,0,h.width,h.height);u=0;for(let g=0;g<f.data.length;++g)if(g%4!=3&&u++!==f.data[g])return Wt=!0,!0;return Wt=!1,!1}};function Sa(h,s){const u=h.indexOf("?");if(u<0)return`${h}?${new URLSearchParams(s).toString()}`;const f=new URLSearchParams(h.slice(u));for(const g in s)f.set(g,s[g]);return`${h.slice(0,u)}?${f.toString()}`}function Fa(h,s={persistentParams:[]}){const u=h.indexOf("?");if(u<0)return h;const f=new URLSearchParams,g=new URLSearchParams(h.slice(u));for(const _ of s.persistentParams){const b=g.get(_);b&&f.set(_,b)}const m=f.toString();return`${h.slice(0,u)}${m.length>0?`?${m}`:""}`}const qa="mapbox-tiles";let br=500,Ir=50;const Lr=["language","worldview","jobid"];let Wr,Un;function ri(){try{return caches}catch{}}function Jr(){const h=ri();h&&Wr==null&&(Wr=h.open(qa))}let Cn=1/0;const Qr={supported:!1,testSupport:function(h){!Xi&&Ui&&(Ps?Bo(h):jn=h)}};let jn,Ui,Xi=!1,Ps=!1;const Es=typeof self<"u"?self:{};function Bo(h){const s=h.createTexture();h.bindTexture(h.TEXTURE_2D,s);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,Ui),h.isContextLost())return;Qr.supported=!0}catch{}h.deleteTexture(s),Xi=!0}Es.document&&(Ui=Es.document.createElement("img"),Ui.onload=function(){jn&&Bo(jn),jn=null,Ps=!0},Ui.onerror=function(){Xi=!0,jn=null},Ui.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ns={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ns);class $s extends Error{constructor(s,u,f){u===401&&Le(f)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const pc=oi()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,al=function(h,s){if(!(/^file:/.test(u=h.url)||/^file:/.test(pc())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,g){const m=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:pc(),referrerPolicy:f.referrerPolicy,signal:m.signal});let b=!1,O=!1;const D=(C=_.url).indexOf("sku=")>0&&Le(C);var C;f.type==="json"&&_.headers.set("Accept","application/json");const V=(z,M,j)=>{if(O)return;if(z&&z.message!=="SecurityError"&&Yr(z.toString()),M&&j)return L(M);const J=Date.now();fetch(_).then(te=>{if(te.ok){const fe=D?te.clone():null;return L(te,fe,J)}return g(new $s(te.statusText,te.status,f.url))}).catch(te=>{te.name!=="AbortError"&&g(new Error(`${te.message} ${f.url}`))})},L=(z,M,j)=>{(f.type==="arrayBuffer"?z.arrayBuffer():f.type==="json"?z.json():z.text()).then(J=>{O||(M&&j&&function(te,fe,he){if(Jr(),Wr==null)return;const se=Cs(fe.headers.get("Cache-Control")||"");if(se["no-store"])return;const ve={status:fe.status,statusText:fe.statusText,headers:new Headers};fe.headers.forEach((et,Ye)=>ve.headers.set(Ye,et)),se["max-age"]&&ve.headers.set("Expires",new Date(he+1e3*se["max-age"]).toUTCString());const Ce=ve.headers.get("Expires");if(!Ce||new Date(Ce).getTime()-he<42e4)return;let Ve=Fa(te.url,{persistentParams:Lr});if(fe.status===206){const et=te.headers.get("Range");if(!et)return;ve.status=200,Ve=Sa(Ve,{range:et})}(function(et,Ye){if(Un===void 0)try{new Response(new ReadableStream),Un=!0}catch{Un=!1}Un?Ye(et.body):et.blob().then(Ye)})(fe,et=>{const Ye=new Response((Xe=fe.status)!==200&&Xe!==404&&[101,103,204,205,304].includes(Xe)?null:et,ve);var Xe;Jr(),Wr!=null&&Wr.then(gt=>gt.put(Ve,Ye)).catch(gt=>Yr(gt.message))})}(_,M,j),b=!0,g(null,J,z.headers.get("Cache-Control"),z.headers.get("Expires")))}).catch(J=>{O||g(new Error(J.message))})};return D?function(z,M){if(Jr(),Wr==null)return M(null);Wr.then(j=>{let J=Fa(z.url,{persistentParams:Lr});const te=z.headers.get("Range");te&&(J=Sa(J,{range:te})),j.match(J).then(fe=>{const he=function(se){if(!se)return!1;const ve=new Date(se.headers.get("Expires")||0),Ce=Cs(se.headers.get("Cache-Control")||"");return ve>Date.now()&&!Ce["no-cache"]}(fe);j.delete(J),he&&j.put(J,fe.clone()),M(null,fe,he)}).catch(M)}).catch(M)}(_,V):V(null,null),{cancel:()=>{O=!0,b||m.abort()}}}(h,s);if(oi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,s,void 0,!0)}var u;return function(f,g){const m=new XMLHttpRequest;m.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in f.headers)m.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=f.credentials==="include",m.onerror=()=>{g(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(f.type==="json")try{_=JSON.parse(m.response)}catch(b){return g(b)}g(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else g(new $s(m.statusText,m.status,f.url))},m.send(f.body),{cancel:()=>m.abort()}}(h,s)},Bi=function(h,s){return al(wr(h,{type:"arrayBuffer"}),s)};function Jl(h){const s=document.createElement("a");return s.href=h,s.protocol===location.protocol&&s.host===location.host}const jo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ed,Uc;Ed=[],Uc=0;const gh=function(h,s){if(Qr.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),Uc>=xe.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:h,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Ed.push(m),m}Uc++;let u=!1;const f=()=>{if(!u)for(u=!0,Uc--;Ed.length&&Uc<xe.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Ed.shift(),{requestParameters:_,callback:b,cancelled:O}=m;O||(m.cancel=gh(_,b).cancel)}},g=Bi(h,(m,_,b,O)=>{f(),m?s(m):_&&(self.createImageBitmap?function(D,C){const V=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(V).then(L=>{C(null,L)}).catch(L=>{C(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(D,C)=>s(D,C,b,O)):function(D,C){const V=new Image;V.onload=()=>{C(null,V),URL.revokeObjectURL(V.src),V.onload=null,requestAnimationFrame(()=>{V.src=jo})},V.onerror=()=>C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new Blob([new Uint8Array(D)],{type:"image/png"});V.src=D.byteLength?URL.createObjectURL(L):jo}(_,(D,C)=>s(D,C,b,O)))});return{cancel:()=>{g.cancel(),f()}}};var wu,Bc,Al,no={exports:{}},Go={exports:{}},Ql={exports:{}},Ru=function(){if(Al)return no.exports;Al=1;var h=(wu||(wu=1,Go.exports=function(u,f){var g,m,_,b,O,D,C,V;for(m=u.length-(g=3&u.length),_=f,O=3432918353,D=461845907,V=0;V<m;)C=255&u.charCodeAt(V)|(255&u.charCodeAt(++V))<<8|(255&u.charCodeAt(++V))<<16|(255&u.charCodeAt(++V))<<24,++V,_=27492+(65535&(b=5*(65535&(_=(_^=C=(65535&(C=(C=(65535&C)*O+(((C>>>16)*O&65535)<<16)&4294967295)<<15|C>>>17))*D+(((C>>>16)*D&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(C=0,g){case 3:C^=(255&u.charCodeAt(V+2))<<16;case 2:C^=(255&u.charCodeAt(V+1))<<8;case 1:_^=C=(65535&(C=(C=(65535&(C^=255&u.charCodeAt(V)))*O+(((C>>>16)*O&65535)<<16)&4294967295)<<15|C>>>17))*D+(((C>>>16)*D&65535)<<16)&4294967295}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Go.exports),s=(Bc||(Bc=1,Ql.exports=function(u,f){for(var g,m=u.length,_=f^m,b=0;m>=4;)g=1540483477*(65535&(g=255&u.charCodeAt(b)|(255&u.charCodeAt(++b))<<8|(255&u.charCodeAt(++b))<<16|(255&u.charCodeAt(++b))<<24))+((1540483477*(g>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),m-=4,++b;switch(m){case 3:_^=(255&u.charCodeAt(b+2))<<16;case 2:_^=(255&u.charCodeAt(b+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(b)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Ql.exports);return no.exports=h,no.exports.murmur3=h,no.exports.murmur2=s,no.exports}(),mo=v(Ru);class Zo{constructor(s,...u){wr(this,u[0]||{}),this.type=s}}class Nd extends Zo{constructor(s,u={}){super("error",wr({error:s},u))}}function Ku(h,s,u){u[h]&&u[h].indexOf(s)!==-1||(u[h]=u[h]||[],u[h].push(s))}function Sf(h,s,u){if(u&&u[h]){const f=u[h].indexOf(s);f!==-1&&u[h].splice(f,1)}}class eu{on(s,u){return this._listeners=this._listeners||{},Ku(s,u,this._listeners),this}off(s,u){return Sf(s,u,this._listeners),Sf(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ku(s,u,this._oneTimeListeners),this):new Promise(f=>{this.once(s,f)})}fire(s,u){const f=typeof s=="string"?new Zo(s,u):s,g=f.type;if(this.listens(g)){f.target=this;const m=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const O of m)O.call(this,f);const _=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const O of _)Sf(g,O,this._oneTimeListeners),O.call(this,f);const b=this._eventedParent;b&&(wr(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(f))}else f instanceof Nd&&console.error(f.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}class qo{constructor(s){typeof s=="string"?this.name=s:(this.name=s.name,this.iconsetId=s.iconsetId)}static from(s){return new qo(s)}static toString(s){return s.iconsetId?`${s.name}${s.iconsetId}`:s.name}static parse(s){const[u,f]=s.split("");return new qo({name:u,iconsetId:f})}static isEqual(s,u){return s.name===u.name&&s.iconsetId===u.iconsetId}toString(){return qo.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Wu,yh={},rl=function(){if(Wu)return yh;Wu=1;var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return s(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function f(m){return(_=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:_>1?1:_;var _}function g(m,_,b){return b<0?b+=1:b>1&&(b-=1),6*b<1?m+(_-m)*b*6:2*b<1?_:3*b<2?m+(_-m)*(2/3-b)*6:m}try{yh.parseCSSColor=function(m){var _,b=m.replace(/ /g,"").toLowerCase();if(b in h)return h[b].slice();if(b[0]==="#")return b.length===4?(_=parseInt(b.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:b.length===7&&(_=parseInt(b.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var O=b.indexOf("("),D=b.indexOf(")");if(O!==-1&&D+1===b.length){var C=b.substr(0,O),V=b.substr(O+1,D-(O+1)).split(","),L=1;switch(C){case"rgba":if(V.length!==4)return null;L=f(V.pop());case"rgb":return V.length!==3?null:[u(V[0]),u(V[1]),u(V[2]),L];case"hsla":if(V.length!==4)return null;L=f(V.pop());case"hsl":if(V.length!==3)return null;var z=(parseFloat(V[0])%360+360)%360/360,M=f(V[1]),j=f(V[2]),J=j<=.5?j*(M+1):j+M-j*M,te=2*j-J;return[s(255*g(te,J,z+1/3)),s(255*g(te,J,z)),s(255*g(te,J,z-1/3)),L];default:return null}}return null}}catch{}return yh}();class zn{constructor(s,u,f,g=1){this.r=s,this.g=u,this.b=f,this.a=g}static parse(s){if(!s)return;if(s instanceof zn)return s;if(typeof s!="string")return;const u=rl.parseCSSColor(s);return u?new zn(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[s,u,f,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(s)},${Math.round(u)},${Math.round(f)},${g})`}toString(){const[s,u,f,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*s)},${Math.round(255*u)},${Math.round(255*f)},${g})`}toRenderColor(s){const{r:u,g:f,b:g,a:m}=this;return new go(s,u,f,g,m)}clone(){return new zn(this.r,this.g,this.b,this.a)}}class go{constructor(s,u,f,g,m){if(s){const _=s.image.height,b=_*_;u=m===0?0:u/m*(_-1),f=m===0?0:f/m*(_-1),g=m===0?0:g/m*(_-1);const O=Math.floor(u),D=Math.floor(f),C=Math.floor(g),V=Math.ceil(u),L=Math.ceil(f),z=Math.ceil(g),M=u-O,j=f-D,J=g-C,te=s.image.data,fe=4*(O+D*b+C*_),he=4*(O+D*b+z*_),se=4*(O+L*b+C*_),ve=4*(O+L*b+z*_),Ce=4*(V+D*b+C*_),Ve=4*(V+D*b+z*_),et=4*(V+L*b+C*_),Ye=4*(V+L*b+z*_);if(fe<0||Ye>=te.length)throw new Error("out of range");this.r=vr(vr(vr(te[fe],te[he],J),vr(te[se],te[ve],J),j),vr(vr(te[Ce],te[Ve],J),vr(te[et],te[Ye],J),j),M)/255*m,this.g=vr(vr(vr(te[fe+1],te[he+1],J),vr(te[se+1],te[ve+1],J),j),vr(vr(te[Ce+1],te[Ve+1],J),vr(te[et+1],te[Ye+1],J),j),M)/255*m,this.b=vr(vr(vr(te[fe+2],te[he+2],J),vr(te[se+2],te[ve+2],J),j),vr(vr(te[Ce+2],te[Ve+2],J),vr(te[et+2],te[Ye+2],J),j),M)/255*m,this.a=m}else this.r=u,this.g=f,this.b=g,this.a=m}toArray(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*s/g,255*u/g,255*f/g,g]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:s,g:u,b:f,a:g}=this,m=Math.min(Math.max(s/g,0),1),_=Math.min(Math.max(u/g,0),1),b=Math.min(Math.max(f/g,0),1),O=Math.min(m,_,b),D=Math.max(m,_,b),C=(O+D)/2;if(O===D)return[0,0,100*C,g];const V=D-O,L=C>.5?V/(2-D-O):V/(D+O);let z=0;return D===m?z=(_-b)/V+(_<b?6:0):D===_?z=(b-m)/V+2:D===b&&(z=(m-_)/V+4),z*=60,[Math.min(Math.max(z,0),360),Math.min(Math.max(100*L,0),100),Math.min(Math.max(100*C,0),100),g]}toArray01(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[s/g,u/g,f/g,g]}toArray01Scaled(s){const{r:u,g:f,b:g,a:m}=this;return m===0?[0,0,0]:[u/m*s,f/m*s,g/m*s]}toArray01PremultipliedAlpha(){const{r:s,g:u,b:f,a:g}=this;return[s,u,f,g]}toArray01Linear(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(s/g,2.2),Math.pow(u/g,2.2),Math.pow(f/g,2.2),g]}}function vr(h,s,u){return h*(1-u)+s*u}function jc(h,s,u){return h.map((f,g)=>vr(f,s[g],u))}function Sn(h){return h*h*h*h*h}zn.black=new zn(0,0,0,1),zn.white=new zn(1,1,1,1),zn.transparent=new zn(0,0,0,0),zn.red=new zn(1,0,0,1),zn.blue=new zn(0,0,1,1);var Ah=Object.freeze({__proto__:null,array:jc,color:function(h,s,u){return new zn(vr(h.r,s.r,u),vr(h.g,s.g,u),vr(h.b,s.b,u),vr(h.a,s.a,u))},easeIn:Sn,number:vr});function Nn(h,...s){for(const u of s)for(const f in u)h[f]=u[f];return h}class Ks extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class mc{constructor(s,u=[]){this.parent=s,this.bindings={};for(const[f,g]of u)this.bindings[f]=g}concat(s){return new mc(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const gc={kind:"null"},er={kind:"number"},hn={kind:"string"},bn={kind:"boolean"},Ws={kind:"color"},Od={kind:"object"},An={kind:"value"},Ho={kind:"collator"},Tu={kind:"formatted"},Os={kind:"resolvedImage"};function Ki(h,s){return{kind:"array",itemType:h,N:s}}function Mi(h){if(h.kind==="array"){const s=Mi(h.itemType);return typeof h.N=="number"?`array<${s}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${s}>`}return h.kind}const yo=[gc,er,hn,bn,Ws,Tu,Od,Ki(An),Os];function Vd(h,s){if(s.kind==="error")return null;if(h.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Vd(h.itemType,s.itemType))&&(typeof h.N!="number"||h.N===s.N))return null}else{if(h.kind===s.kind)return null;if(h.kind==="value"){for(const u of yo)if(!Vd(u,s))return null}}return`Expected ${Mi(h)} but found ${Mi(s)} instead.`}function vh(h,s){return s.some(u=>u.kind===h.kind)}function yc(h,s){return s.some(u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h)}class Ac{constructor(s,u,f){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class nl{constructor(s,u,f,g,m){this.text=s.normalize?s.normalize():s,this.image=u,this.scale=f,this.fontStack=g,this.textColor=m}}class ys{constructor(s){this.sections=s}static fromString(s){return new ys([new nl(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||!!s.image&&s.image.hasPrimary())}static factory(s){return s instanceof ys?s:ys.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const u of this.sections){if(u.image){const g=u.image.getPrimary().id.toString();s.push(["image",g]);continue}s.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),s.push(f)}return s}}class Yu{constructor(s,u={}){if(this.id=qo.from(s),this.options=Object.assign({},u),u.transform){const{a:f,b:g,c:m,d:_,e:b,f:O}=u.transform;this.options.transform=new DOMMatrix([f,g,m,_,b,O])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:s,b:u,c:f,d:g,e:m,f:_}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:s,b:u,c:f,d:g,e:m,f:_}})}static parse(s){let u,f,g,m;try{({name:u,iconsetId:f,params:g,transform:m}=JSON.parse(s)||{})}catch{return null}if(!u)return null;const{a:_,b,c:O,d:D,e:C,f:V}=m||{};return new Yu({name:u,iconsetId:f},{params:g,transform:new DOMMatrix([_,b,O,D,C,V])})}scaleSelf(s){return this.options.transform.scaleSelf(s),this}}class Vs{constructor(s,u,f,g,m=!1){this.primaryId=qo.from(s),this.primaryOptions=u,f&&(this.secondaryId=qo.from(f)),this.secondaryOptions=g,this.available=m}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Yu(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Yu(this.secondaryId,this.secondaryOptions):null}static from(s){return typeof s=="string"?Vs.build({name:s}):s}static build(s,u,f,g){return!s||typeof s=="object"&&!("name"in s)?null:new Vs(s,f,u,g)}}function zl(h,s,u,f){return typeof h=="number"&&h>=0&&h<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[h,s,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[h,s,u,f]:[h,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function il(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof zn||h instanceof Ac||h instanceof ys||h instanceof Vs)return!0;if(Array.isArray(h)){for(const s of h)if(!il(s))return!1;return!0}if(typeof h=="object"){for(const s in h)if(!il(h[s]))return!1;return!0}return!1}function Ji(h){if(h===null)return gc;if(typeof h=="string")return hn;if(typeof h=="boolean")return bn;if(typeof h=="number")return er;if(h instanceof zn)return Ws;if(h instanceof Ac)return Ho;if(h instanceof ys)return Tu;if(h instanceof Vs)return Os;if(Array.isArray(h)){const s=h.length;let u;for(const f of h){const g=Ji(f);if(u){if(u===g)continue;u=An;break}u=g}return Ki(u||An,s)}return Od}function Ys(h){const s=typeof h;return h===null?"":s==="string"||s==="number"||s==="boolean"?String(h):h instanceof zn?h.toStringPremultipliedAlpha():h instanceof ys||h instanceof Vs?h.toString():JSON.stringify(h)}class tu{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(s.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!il(s[1]))return u.error("invalid value");const f=s[1];let g=Ji(f);const m=u.expectedType;return g.kind!=="array"||g.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(g=m),new tu(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zn?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof ys?this.value.serialize():this.value}}class ds{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Zh={string:hn,number:er,boolean:bn,object:Od};class $o{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let f,g=1;const m=s[0];if(m==="array"){let b,O;if(s.length>2){const D=s[1];if(typeof D!="string"||!(D in Zh)||D==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);b=Zh[D],g++}else b=An;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=s[2],g++}f=Ki(b,O)}else f=Zh[m];const _=[];for(;g<s.length;g++){const b=u.parse(s[g],g,An);if(!b)return null;_.push(b)}return new $o(f,_)}evaluate(s){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(s);if(!Vd(this.type,Ji(f)))return f;if(u===this.args.length-1)throw new ds(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${Mi(Ji(f))} but was expected to be of type ${Mi(this.type)}.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,u=[s.kind];if(s.kind==="array"){const f=s.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);const g=s.N;(typeof g=="number"||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(f=>f.serialize()))}}class zd{constructor(s){this.type=Tu,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const f=s[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const g=[];let m=!1;for(let _=1;_<=s.length-1;++_){const b=s[_];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let O=null;if(b["font-scale"]&&(O=u.parseObjectValue(b["font-scale"],_,"font-scale",er),!O))return null;let D=null;if(b["text-font"]&&(D=u.parseObjectValue(b["text-font"],_,"text-font",Ki(hn)),!D))return null;let C=null;if(b["text-color"]&&(C=u.parseObjectValue(b["text-color"],_,"text-color",Ws),!C))return null;const V=g[g.length-1];V.scale=O,V.font=D,V.textColor=C}else{const O=u.parse(s[_],_,An);if(!O)return null;const D=O.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,g.push({content:O,scale:null,font:null,textColor:null})}}return new zd(g)}evaluate(s){return new ys(this.sections.map(u=>{const f=u.content.evaluate(s);return Ji(f)===Os?new nl("",f,null,null,null):new nl(Ys(f),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)}))}eachChild(s){for(const u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const u of this.sections){s.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),s.push(f)}return s}}class Cu{constructor(s,u,f,g){this._imageWarnHistory={},this.type=Os,this.namePrimary=s,this.nameSecondary=u,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),g&&(this.paramsSecondary=g.params,this.iconsetIdSecondary=g.iconset?g.iconset.id:void 0)}static parse(s,u){if(s.length<2)return u.error("Expected two or more arguments.");let f=1;const g=[];function m(){if(f<s.length){const b=u.parse(s[f],f++,hn);return b?(g.push({image:b,options:{}}),!0):(u.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function _(){if(f<s.length){const O=s[f];if((b=O)===null||typeof b!="object"||Array.isArray(b))return!0;const D=O.params,C=O.iconset,V=u.concat(f);if(!D&&!C)return f++,!0;if(D){if(typeof D!="object"||D.constructor!==Object)return V.error('Image options "params" should be an object'),!1;const L={},z=V.concat(void 0,"params");for(const M in D){if(!M)return z.error("Image parameter name should be non-empty"),!1;const j=z.concat(void 0,M).parse(D[M],void 0,Ws,void 0,{typeAnnotation:"coerce"});if(!j)return!1;L[M]=j}g[g.length-1].options.params=L}if(C){if(typeof C!="object"||C.constructor!==Object)return V.error('Image options "iconset" should be an object'),!1;if(!C.id)return V.error('Image options "iconset" should have an "id" property'),!1;g[g.length-1].options.iconset=C}return f++,!0}var b;return!0}for(let b=0;b<2;b++)if(!m()||!_())return;return new Cu(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(s,u){const f={};if(u){for(const g in u)if(u[g])try{f[g]=u[g].evaluate(s)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(s){const u={name:this.namePrimary.evaluate(s),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(s),iconsetId:this.iconsetIdSecondary}:void 0,g=Vs.build(u,f,this.paramsPrimary?this.evaluateParams(s,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(s,this.paramsSecondary):void 0);if(g&&s.availableImages){const m=g.getPrimary().id;if(g.available=s.availableImages.some(_=>qo.isEqual(_,m)),g.available){const _=g.getSecondary()?g.getSecondary().id:null;_&&(g.available=s.availableImages.some(b=>qo.isEqual(b,_)))}}return g}eachChild(s){if(s(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&s(this.paramsPrimary[u]);if(this.nameSecondary&&(s(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&s(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(s,u){const f={};if(u&&(f.iconset={id:u}),s){f.params={};for(const g in s)s[g]&&(f.params[g]=s[g].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const s=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&s.push(u)}if(this.nameSecondary&&(s.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&s.push(u)}return s}}function Su(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}const lp={"to-boolean":bn,"to-color":Ws,"to-number":er,"to-string":hn};class au{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const f=s[0],g=[];let m=gc;if(f==="to-array"){if(!Array.isArray(s[1]))return null;const _=s[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Ki(u.expectedType.itemType,_)}else{if(!(_>0&&il(s[1][0])))return null;m=Ki(Ji(s[1][0]),_)}for(let b=0;b<_;b++){const O=s[1][b];let D;if(Su(O)==="array")D=u.parse(O,void 0,m.itemType);else{const C=Su(O);if(C!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${C}.`);D=u.registry.literal.parse(["literal",O===void 0?null:O],u)}if(!D)return null;g.push(D)}}else{if((f==="to-boolean"||f==="to-string")&&s.length!==2)return u.error("Expected one argument.");m=lp[f];for(let _=1;_<s.length;_++){const b=u.parse(s[_],_,An);if(!b)return null;g.push(b)}}return new au(m,g)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let u,f;for(const g of this.args){if(u=g.evaluate(s),f=null,u instanceof zn)return u;if(typeof u=="string"){const m=s.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:zl(u[0],u[1],u[2],u[3]),!f))return new zn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new ds(f||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(s),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new ds(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?ys.fromString(Ys(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?Vs.build(Ys(this.args[0].evaluate(s))):this.type.kind==="array"?this.args.map(u=>u.evaluate(s)):Ys(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if(this.type.kind==="formatted")return new zd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Cu(this.args[0]).serialize();const s=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{s.push(u.serialize())}),s}}const tg=["Unknown","Point","LineString","Polygon"];class Dd{constructor(s,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=s,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?tg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(s){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:f,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*u-s[0])+this.featureDistanceData.bearing[1]*(g*u-s[1])}return 0}parseColor(s){let u=this._parseColorCache[s];return u||(u=this._parseColorCache[s]=zn.parse(s)),u}getConfig(s){return this.options?this.options.get(s):null}}class Xs{constructor(s,u,f,g,m){this.name=s,this.type=u,this._evaluate=f,this.args=g,this._overloadIndex=m}evaluate(s){if(!this._evaluate){const u=Xs.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,u){const f=s[0],g=Xs.definitions[f];if(!g)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(g)?g[0]:g.type,_=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,b=[];let O=null,D=-1;for(const[C,V]of _){if(Array.isArray(C)&&C.length!==s.length-1)continue;b.push(C),D++,O=new ou(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const L=[];let z=!1;for(let M=1;M<s.length;M++){const j=s[M],J=Array.isArray(C)?C[M-1]:C.type,te=O.parse(j,1+L.length,J);if(!te){z=!0;break}L.push(te)}if(!z)if(Array.isArray(C)&&C.length!==L.length)O.error(`Expected ${C.length} arguments, but found ${L.length} instead.`);else{for(let M=0;M<L.length;M++){const j=Array.isArray(C)?C[M]:C.type,J=L[M];O.concat(M+1).checkSubtype(j,J.type)}if(O.errors.length===0)return new Xs(f,m,V,L,D)}}if(b.length===1)u.errors.push(...O.errors);else{const C=(b.length?b:_.map(([L])=>L)).map(bf).join(" | "),V=[];for(let L=1;L<s.length;L++){const z=u.parse(s[L],1+V.length);if(!z)return null;V.push(Mi(z.type))}u.error(`Expected arguments of type ${C}, but found (${V.join(", ")}) instead.`)}return null}static register(s,u){Xs.definitions=u;for(const f in u)s[f]=Xs}}function bf(h){return Array.isArray(h)?`(${h.map(Mi).join(", ")})`:`(${Mi(h.type)}...)`}class ru{constructor(s,u,f){this.type=Ho,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(s.length!==2)return u.error("Expected one argument.");const f=s[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const g=f["case-sensitive"]===void 0?u.parse(!1,1,bn):u.parseObjectValue(f["case-sensitive"],1,"case-sensitive",bn);if(!g)return null;const m=f["diacritic-sensitive"]===void 0?u.parse(!1,1,bn):u.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",bn);if(!m)return null;let _=null;return f.locale&&(_=u.parseObjectValue(f.locale,1,"locale",hn),!_)?null:new ru(g,m,_)}evaluate(s){return new Ac(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}function xf(h,s,u=0,f=h.length-1,g=Qe){for(;f>u;){if(f-u>600){const O=f-u+1,D=s-u+1,C=Math.log(O),V=.5*Math.exp(2*C/3),L=.5*Math.sqrt(C*V*(O-V)/O)*(D-O/2<0?-1:1);xf(h,s,Math.max(u,Math.floor(s-D*V/O+L)),Math.min(f,Math.floor(s+(O-D)*V/O+L)),g)}const m=h[s];let _=u,b=f;for(de(h,u,s),g(h[f],m)>0&&de(h,u,f);_<b;){for(de(h,_,b),_++,b--;g(h[_],m)<0;)_++;for(;g(h[b],m)>0;)b--}g(h[u],m)===0?de(h,u,b):(b++,de(h,b,f)),b<=s&&(u=b+1),s<=b&&(f=b-1)}}function de(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}function Qe(h,s){return h<s?-1:h>s?1:0}function It(h){let s=0;for(let u,f,g=0,m=h.length,_=m-1;g<m;_=g++)u=h[g],f=h[_],s+=(f.x-u.x)*(u.y+f.y);return s}function Jt(h,s){h[0]=Math.min(h[0],s[0]),h[1]=Math.min(h[1],s[1]),h[2]=Math.max(h[2],s[0]),h[3]=Math.max(h[3],s[1])}function pa(h,s){return!(h[0]<=s[0]||h[2]>=s[2]||h[1]<=s[1]||h[3]>=s[3])}function La(h,s,u){const f=h[0]-s[0],g=h[1]-s[1],m=h[0]-u[0],_=h[1]-u[1];return f*_-m*g==0&&f*m<=0&&g*_<=0}function ir(h,s,u=!1){let f=!1;for(let b=0,O=s.length;b<O;b++){const D=s[b];for(let C=0,V=D.length,L=V-1;C<V;L=C++){const z=D[L],M=D[C];if(La(h,z,M))return u;(m=z)[1]>(g=h)[1]!=(_=M)[1]>g[1]&&g[0]<(_[0]-m[0])*(g[1]-m[1])/(_[1]-m[1])+m[0]&&(f=!f)}}var g,m,_;return f}function Er(h,s,u,f){const g=f[0]-u[0],m=f[1]-u[1],_=(h[0]-u[0])*m-g*(h[1]-u[1]),b=(s[0]-u[0])*m-g*(s[1]-u[1]);return _>0&&b<0||_<0&&b>0}function en(h,s,u,f){return(g=[f[0]-u[0],f[1]-u[1]])[0]*(m=[s[0]-h[0],s[1]-h[1]])[1]-g[1]*m[0]!=0&&!(!Er(h,s,u,f)||!Er(u,f,h,s));var g,m}const On=8192;function Fn(h,s){const u=(180+h[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,g=Math.pow(2,s.z);return[Math.round(u*g*On),Math.round(f*g*On)]}function wi(h,s){for(let u=0;u<s.length;u++)if(ir(h,s[u]))return!0;return!1}function zs(h,s,u){for(const f of u)for(let g=0,m=f.length,_=m-1;g<m;_=g++)if(en(h,s,f[_],f[g]))return!0;return!1}function Ds(h,s){for(let u=0;u<h.length;++u)if(!ir(h[u],s))return!1;for(let u=0;u<h.length-1;++u)if(zs(h[u],h[u+1],s))return!1;return!0}function io(h,s){for(let u=0;u<s.length;u++)if(Ds(h,s[u]))return!0;return!1}function os(h,s,u){const f=[];for(let g=0;g<h.length;g++){const m=[];for(let _=0;_<h[g].length;_++){const b=Fn(h[g][_],u);Jt(s,b),m.push(b)}f.push(m)}return f}function Dr(h,s,u){const f=[];for(let g=0;g<h.length;g++){const m=os(h[g],s,u);f.push(m)}return f}function cr(h,s,u,f){if(h[0]<u[0]||h[0]>u[2]){const g=.5*f;let m=h[0]-u[0]>g?-f:u[0]-h[0]>g?f:0;m===0&&(m=h[0]-u[2]>g?-f:u[2]-h[0]>g?f:0),h[0]+=m}Jt(s,h)}function vl(h,s,u,f){const g=Math.pow(2,f.z)*On,m=[f.x*On,f.y*On],_=[];if(!h)return _;for(const b of h)for(const O of b){const D=[O.x+m[0],O.y+m[1]];cr(D,s,u,g),_.push(D)}return _}function Nr(h,s,u,f){const g=Math.pow(2,f.z)*On,m=[f.x*On,f.y*On],_=[];if(!h)return _;for(const O of h){const D=[];for(const C of O){const V=[C.x+m[0],C.y+m[1]];Jt(s,V),D.push(V)}_.push(D)}if(s[2]-s[0]<=g/2){(b=s)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const O of _)for(const D of O)cr(D,s,u,g)}var b;return _}class bu{constructor(s,u){this.type=bn,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(il(s[1])){const f=s[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const m=f.features[g].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new bu(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new bu(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new bu(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=os(f.coordinates,m,_),O=vl(u.geometry(),g,m,_);if(!pa(g,m))return!1;for(const D of O)if(!ir(D,b))return!1}if(f.type==="MultiPolygon"){const b=Dr(f.coordinates,m,_),O=vl(u.geometry(),g,m,_);if(!pa(g,m))return!1;for(const D of O)if(!wi(D,b))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=os(f.coordinates,m,_),O=Nr(u.geometry(),g,m,_);if(!pa(g,m))return!1;for(const D of O)if(!Ds(D,b))return!1}if(f.type==="MultiPolygon"){const b=Dr(f.coordinates,m,_),O=Nr(u.geometry(),g,m,_);if(!pa(g,m))return!1;for(const D of O)if(!io(D,b))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const nu={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},xr=1/298.257223563,_h=xr*(2-xr),iu=Math.PI/180;class vc{static fromTile(s,u,f){const g=Math.PI*(1-2*(s+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/iu;return new vc(m,f)}static get units(){return nu}constructor(s,u){if(s===void 0)throw new Error("No latitude given.");if(u&&!nu[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(nu).join(", ")}`);const f=6378.137*iu*(u?nu[u]:1),g=Math.cos(s*iu),m=1/(1-_h*(1-g*g)),_=Math.sqrt(m);this.kx=f*_*g,this.ky=f*_*m*(1-_h)}distance(s,u){const f=Si(s[0]-u[0])*this.kx,g=(s[1]-u[1])*this.ky;return Math.sqrt(f*f+g*g)}bearing(s,u){const f=Si(u[0]-s[0])*this.kx;return Math.atan2(f,(u[1]-s[1])*this.ky)/iu}destination(s,u,f){const g=f*iu;return this.offset(s,Math.sin(g)*u,Math.cos(g)*u)}offset(s,u,f){return[s[0]+u/this.kx,s[1]+f/this.ky]}lineDistance(s){let u=0;for(let f=0;f<s.length-1;f++)u+=this.distance(s[f],s[f+1]);return u}area(s){let u=0;for(let f=0;f<s.length;f++){const g=s[f];for(let m=0,_=g.length,b=_-1;m<_;b=m++)u+=Si(g[m][0]-g[b][0])*(g[m][1]+g[b][1])*(f?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(s,u){let f=0;if(u<=0)return s[0];for(let g=0;g<s.length-1;g++){const m=s[g],_=s[g+1],b=this.distance(m,_);if(f+=b,f>u)return Ms(m,_,(u-(f-b))/b)}return s[s.length-1]}pointToSegmentDistance(s,u,f){let[g,m]=u,_=Si(f[0]-g)*this.kx,b=(f[1]-m)*this.ky;if(_!==0||b!==0){const O=(Si(s[0]-g)*this.kx*_+(s[1]-m)*this.ky*b)/(_*_+b*b);O>1?(g=f[0],m=f[1]):O>0&&(g+=_/this.kx*O,m+=b/this.ky*O)}return _=Si(s[0]-g)*this.kx,b=(s[1]-m)*this.ky,Math.sqrt(_*_+b*b)}pointOnLine(s,u){let f=1/0,g=s[0][0],m=s[0][1],_=0,b=0;for(let O=0;O<s.length-1;O++){let D=s[O][0],C=s[O][1],V=Si(s[O+1][0]-D)*this.kx,L=(s[O+1][1]-C)*this.ky,z=0;V===0&&L===0||(z=(Si(u[0]-D)*this.kx*V+(u[1]-C)*this.ky*L)/(V*V+L*L),z>1?(D=s[O+1][0],C=s[O+1][1]):z>0&&(D+=V/this.kx*z,C+=L/this.ky*z)),V=Si(u[0]-D)*this.kx,L=(u[1]-C)*this.ky;const M=V*V+L*L;M<f&&(f=M,g=D,m=C,_=O,b=z)}return{point:[g,m],index:_,t:Math.max(0,Math.min(1,b))}}lineSlice(s,u,f){let g=this.pointOnLine(f,s),m=this.pointOnLine(f,u);if(g.index>m.index||g.index===m.index&&g.t>m.t){const D=g;g=m,m=D}const _=[g.point],b=g.index+1,O=m.index;!Md(f[b],_[0])&&b<=O&&_.push(f[b]);for(let D=b+1;D<=O;D++)_.push(f[D]);return Md(f[O],m.point)||_.push(m.point),_}lineSliceAlong(s,u,f){let g=0;const m=[];for(let _=0;_<f.length-1;_++){const b=f[_],O=f[_+1],D=this.distance(b,O);if(g+=D,g>s&&m.length===0&&m.push(Ms(b,O,(s-(g-D))/D)),g>=u)return m.push(Ms(b,O,(u-(g-D))/D)),m;g>s&&m.push(O)}return m}bufferPoint(s,u){const f=u/this.ky,g=u/this.kx;return[s[0]-g,s[1]-f,s[0]+g,s[1]+f]}bufferBBox(s,u){const f=u/this.ky,g=u/this.kx;return[s[0]-g,s[1]-f,s[2]+g,s[3]+f]}insideBBox(s,u){return Si(s[0]-u[0])>=0&&Si(s[0]-u[2])<=0&&s[1]>=u[1]&&s[1]<=u[3]}}function Md(h,s){return h[0]===s[0]&&h[1]===s[1]}function Ms(h,s,u){const f=Si(s[0]-h[0]);return[h[0]+f*u,h[1]+(s[1]-h[1])*u]}function Si(h){for(;h<-180;)h+=360;for(;h>180;)h-=360;return h}class _c{constructor(s=[],u=(f,g)=>f<g?-1:f>g?1:0){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:u,compare:f}=this,g=u[s];for(;s>0;){const m=s-1>>1,_=u[m];if(f(g,_)>=0)break;u[s]=_,s=m}u[s]=g}_down(s){const{data:u,compare:f}=this,g=this.length>>1,m=u[s];for(;s<g;){let _=1+(s<<1);const b=_+1;if(b<this.length&&f(u[b],u[_])<0&&(_=b),f(u[_],m)>=0)break;u[s]=u[_],s=_}u[s]=m}}var Da=8192;function Id(h,s){return s.dist-h.dist}const Js=100,Ao=50;function Pf(h){const s=[1/0,1/0,-1/0,-1/0];if(s.length!==h.length)return!1;for(let u=0;u<s.length;u++)if(s[u]!==h[u])return!1;return!0}function qh(h){return h[1]-h[0]+1}function vo(h,s){const u=h[1]>=h[0]&&h[1]<s;return u||console.warn("Distance Expression: Index is out of range"),u}function js(h,s){if(h[0]>h[1])return[null,null];const u=qh(h);if(s){if(u===2)return[h,null];const f=Math.floor(u/2);return[[h[0],h[0]+f],[h[0]+f,h[1]]]}{if(u===1)return[h,null];const f=Math.floor(u/2)-1;return[[h[0],h[0]+f],[h[0]+f+1,h[1]]]}}function Dl(h,s){const u=[1/0,1/0,-1/0,-1/0];if(!vo(s,h.length))return u;for(let f=s[0];f<=s[1];++f)Jt(u,h[f]);return u}function Gc(h){const s=[1/0,1/0,-1/0,-1/0];for(let u=0;u<h.length;++u)for(let f=0;f<h[u].length;++f)Jt(s,h[u][f]);return s}function su(h,s,u){if(Pf(h)||Pf(s))return NaN;let f=0,g=0;return h[2]<s[0]&&(f=s[0]-h[2]),h[0]>s[2]&&(f=h[0]-s[2]),h[1]>s[3]&&(g=h[1]-s[3]),h[3]<s[1]&&(g=s[1]-h[3]),u.distance([0,0],[f,g])}function wh(h){return 360*h-180}function Ml(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function No(h,s){const u=Math.pow(2,s.z),f=(h.y/Da+s.y)/u;return[wh((h.x/Da+s.x)/u),Ml(f)]}function Ld(h,s){const u=[];for(let f=0;f<h.length;++f)u.push(No(h[f],s));return u}function Zc(h,s,u){const f=u.pointOnLine(s,h).point;return u.distance(h,f)}function Il(h,s,u,f,g){const m=u.slice(f[0],f[1]+1);let _=1/0;for(let b=s[0];b<=s[1];++b)if((_=Math.min(_,Zc(h[b],m,g)))===0)return 0;return _}function wc(h,s,u,f,g){const m=Math.min(g.pointToSegmentDistance(h,u,f),g.pointToSegmentDistance(s,u,f)),_=Math.min(g.pointToSegmentDistance(u,h,s),g.pointToSegmentDistance(f,h,s));return Math.min(m,_)}function xu(h,s,u,f,g){if(!vo(s,h.length)||!vo(f,u.length))return NaN;let m=1/0;for(let _=s[0];_<s[1];++_)for(let b=f[0];b<f[1];++b){if(en(h[_],h[_+1],u[b],u[b+1]))return 0;m=Math.min(m,wc(h[_],h[_+1],u[b],u[b+1],g))}return m}function Qi(h,s,u,f,g){if(!vo(s,h.length)||!vo(f,u.length))return NaN;let m=1/0;for(let _=s[0];_<=s[1];++_)for(let b=f[0];b<=f[1];++b)if((m=Math.min(m,g.distance(h[_],u[b])))===0)return m;return m}function Ef(h,s,u){if(ir(h,s,!0))return 0;let f=1/0;for(const g of s){const m=g.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[m-1]&&(f=Math.min(f,u.pointToSegmentDistance(h,g[m-1],g[0])))===0||(f=Math.min(f,Zc(h,g,u)))===0)return f}return f}function so(h,s,u,f){if(!vo(s,h.length))return NaN;for(let m=s[0];m<=s[1];++m)if(ir(h[m],u,!0))return 0;let g=1/0;for(let m=s[0];m<s[1];++m)for(const _ of u)for(let b=0,O=_.length,D=O-1;b<O;D=b++){if(en(h[m],h[m+1],_[D],_[b]))return 0;g=Math.min(g,wc(h[m],h[m+1],_[D],_[b],f))}return g}function _o(h,s){for(const u of h)for(let f=0;f<=u.length-1;++f)if(ir(u[f],s,!0))return!0;return!1}function Fd(h,s,u,f=1/0){const g=Gc(h),m=Gc(s);if(f!==1/0&&su(g,m,u)>=f)return f;if(pa(g,m)){if(_o(h,s))return 0}else if(_o(s,h))return 0;let _=f;for(const b of h)for(let O=0,D=b.length,C=D-1;O<D;C=O++)for(const V of s)for(let L=0,z=V.length,M=z-1;L<z;M=L++){if(en(b[C],b[O],V[M],V[L]))return 0;_=Math.min(_,wc(b[C],b[O],V[M],V[L],u))}return _}function kd(h,s,u,f,g,m,_){if(m===null||_===null)return;const b=su(Dl(f,m),Dl(g,_),u);b<s&&h.push({dist:b,range1:m,range2:_})}function oo(h,s,u,f,g=1/0){let m=Math.min(f.distance(h[0],u[0][0]),g);if(m===0)return m;const _=new _c([{dist:0,range1:[0,h.length-1],range2:[0,0]}],Id),b=s?Ao:Js,O=Gc(u);for(;_.length;){const D=_.pop();if(D.dist>=m)continue;const C=D.range1;if(qh(C)<=b){if(!vo(C,h.length))return NaN;if(s){const V=so(h,C,u,f);if((m=Math.min(m,V))===0)return m}else for(let V=C[0];V<=C[1];++V){const L=Ef(h[V],u,f);if((m=Math.min(m,L))===0)return m}}else{const V=js(C,s);if(V[0]!==null){const L=su(Dl(h,V[0]),O,f);L<m&&_.push({dist:L,range1:V[0],range2:[0,0]})}if(V[1]!==null){const L=su(Dl(h,V[1]),O,f);L<m&&_.push({dist:L,range1:V[1],range2:[0,0]})}}}return m}function qc(h,s,u,f,g,m=1/0){let _=Math.min(m,g.distance(h[0],u[0]));if(_===0)return _;const b=new _c([{dist:0,range1:[0,h.length-1],range2:[0,u.length-1]}],Id),O=s?Ao:Js,D=f?Ao:Js;for(;b.length;){const C=b.pop();if(C.dist>=_)continue;const V=C.range1,L=C.range2;if(qh(V)<=O&&qh(L)<=D){if(!vo(V,h.length)||!vo(L,u.length))return NaN;if(s&&f?_=Math.min(_,xu(h,V,u,L,g)):s||f?s&&!f?_=Math.min(_,Il(u,L,h,V,g)):!s&&f&&(_=Math.min(_,Il(h,V,u,L,g))):_=Math.min(_,Qi(h,V,u,L,g)),_===0)return _}else{const z=js(V,s),M=js(L,f);kd(b,_,g,h,u,z[0],M[0]),kd(b,_,g,h,u,z[0],M[1]),kd(b,_,g,h,u,z[1],M[0]),kd(b,_,g,h,u,z[1],M[1])}}return _}function Rc(h,s,u,f,g=1/0){let m=g;const _=Dl(h,[0,h.length-1]);for(const b of u)if(!(m!==1/0&&su(_,Dl(b,[0,b.length-1]),f)>=m)&&(m=Math.min(m,qc(h,s,b,!0,f,m)),m===0))return m;return m}function Pu(h,s,u,f,g=1/0){let m=g;const _=Dl(h,[0,h.length-1]);for(const b of u){if(m!==1/0&&su(_,Gc(b),f)>=m)continue;const O=oo(h,s,b,f,m);if(isNaN(O))return O;if((m=Math.min(m,O))===0)return m}return m}function Hc(h){return h==="Point"||h==="MultiPoint"||h==="LineString"||h==="MultiLineString"||h==="Polygon"||h==="MultiPolygon"}class Eu{constructor(s,u){this.type=er,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${s.length-1} instead.`);if(il(s[1])){const f=s[1];if(f.type==="FeatureCollection"){for(let g=0;g<f.features.length;++g)if(Hc(f.features[g].geometry.type))return new Eu(f,f.features[g].geometry)}else if(f.type==="Feature"){if(Hc(f.geometry.type))return new Eu(f,f.geometry)}else if(Hc(f.type))return new Eu(f,f)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(s){const u=s.geometry(),f=s.canonicalID();if(u!=null&&f!=null){if(s.geometryType()==="Point")return function(g,m,_){const b=[];for(const D of g)for(const C of D)b.push(No(C,m));const O=new vc(b[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?qc(b,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",O):_.type==="MultiLineString"?Rc(b,!1,_.coordinates,O):_.type==="Polygon"||_.type==="MultiPolygon"?Pu(b,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,O):null}(u,f,this.geometries);if(s.geometryType()==="LineString")return function(g,m,_){const b=[];for(const D of g){const C=[];for(const V of D)C.push(No(V,m));b.push(C)}const O=new vc(b[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Rc(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,O);if(_.type==="MultiLineString"){let D=1/0;for(let C=0;C<_.coordinates.length;C++){const V=Rc(_.coordinates[C],!0,b,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}if(_.type==="Polygon"||_.type==="MultiPolygon"){let D=1/0;for(let C=0;C<b.length;C++){const V=Pu(b[C],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return null}(u,f,this.geometries);if(s.geometryType()==="Polygon")return function(g,m,_){const b=[];for(const D of function(C,V){const L=C.length;if(L<=1)return[C];const z=[];let M,j;for(let J=0;J<L;J++){const te=It(C[J]);te!==0&&(C[J].area=Math.abs(te),j===void 0&&(j=te<0),j===te<0?(M&&z.push(M),M=[C[J]]):M.push(C[J]))}return M&&z.push(M),z}(g)){const C=[];for(let V=0;V<D.length;++V)C.push(Ld(D[V],m));b.push(C)}const O=new vc(b[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Pu(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,O);if(_.type==="MultiLineString"){let D=1/0;for(let C=0;C<_.coordinates.length;C++){const V=Pu(_.coordinates[C],!0,b,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return _.type==="Polygon"||_.type==="MultiPolygon"?function(D,C,V){let L=1/0;for(const z of D)for(const M of C){const j=Fd(z,M,V,L);if(isNaN(j))return j;if((L=Math.min(L,j))===0)return L}return L}(_.type==="Polygon"?[_.coordinates]:_.coordinates,b,O):null}(u,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function $c(h,s){switch(h){case"string":return Ys(s);case"number":return+s;case"boolean":return!!s;case"color":return zn.parse(s);case"formatted":return ys.fromString(Ys(s));case"resolvedImage":return Vs.build(Ys(s))}return s}function Tc(h,s,u,f){return f!==void 0&&(h=f*Math.round(h/f)),s!==void 0&&h<s&&(h=s),u!==void 0&&h>u&&(h=u),h}class Xu{constructor(s,u,f){this.type=s,this.key=u,this.scope=f}static parse(s,u){let f=u.expectedType;if(f==null&&(f=An),s.length<2||s.length>3)return u.error("Invalid number of arguments for 'config' expression.");const g=u.parse(s[1],1);if(!(g instanceof tu))return u.error("Key name of 'config' expression must be a string literal.");if(s.length>=3){const m=u.parse(s[2],2);return m instanceof tu?new Xu(f,Ys(g.value),Ys(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new Xu(f,Ys(g.value))}evaluate(s){const u=[this.key,this.scope,s.scope].filter(Boolean).join(""),f=s.getConfig(u);if(!f)return null;const{type:g,value:m,values:_,minValue:b,maxValue:O,stepValue:D}=f,C=f.default.evaluate(s);let V=C;if(m){const L=s.scope;s.scope=(L||"").split("").slice(1).join(""),V=m.evaluate(s),s.scope=L}return g&&(V=$c(g,V)),V===void 0||b===void 0&&O===void 0&&D===void 0||(typeof V=="number"?V=Tc(V,b,O,D):Array.isArray(V)&&(V=V.map(L=>typeof L=="number"?Tc(L,b,O,D):L))),m!==void 0&&V!==void 0&&_&&!_.includes(V)&&(V=C,g&&(V=$c(g,V))),(g&&g!==this.type||V!==void 0&&Ji(V)!==this.type)&&(V=$c(this.type.kind,V)),V}eachChild(){}outputDefined(){return!1}serialize(){const s=["config",this.key];return this.scope&&s.concat(this.key),s}}function Ko(h){if(h instanceof Xs&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof bu||h instanceof Eu)return!1;let s=!0;return h.eachChild(u=>{s&&!Ko(u)&&(s=!1)}),s}function As(h){if(h instanceof Xs&&h.name==="feature-state")return!1;let s=!0;return h.eachChild(u=>{s&&!As(u)&&(s=!1)}),s}function ai(h){if(h instanceof Xu)return new Set([h.key]);let s=new Set;return h.eachChild(u=>{s=new Set([...s,...ai(u)])}),s}function li(h,s){if(h instanceof Xs&&s.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild(f=>{u&&!li(f,s)&&(u=!1)}),u}class es{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=s[1];return u.scope.has(f)?new es(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class hs{constructor(s,u=[],f,g=new mc,m=[],_,b){this.registry=s,this.path=u,this.key=u.map(O=>typeof O=="string"?`['${O}']`:`[${O}]`).join(""),this.scope=g,this.errors=m,this.expectedType=f,this._scope=_,this.options=b}parse(s,u,f,g,m={}){return u||f?this.concat(u,null,f,g)._parse(s,m):this._parse(s,m)}parseObjectValue(s,u,f,g,m,_={}){return this.concat(u,f,g,m)._parse(s,_)}_parse(s,u){function f(g,m,_){return _==="assert"?new $o(m,[g]):_==="coerce"?new au(m,[g]):g}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof s[0]=="string"?this.registry[s[0]]:void 0;if(g){let m=g.parse(s,this);if(!m)return null;if(this.expectedType){const _=this.expectedType,b=m.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||b.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(_,b))return null}else m=f(m,_,u.typeAnnotation||"coerce");else m=f(m,_,u.typeAnnotation||"assert")}if(!(m instanceof tu)&&m.type.kind!=="resolvedImage"&&Kc(m)){const _=new Dd(this._scope,this.options);try{m=new tu(m.type,m.evaluate(_))}catch(b){return this.error(b.message),null}}return m}return au.parse(["to-array",s],this)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,u,f,g){let m=typeof s=="number"?this.path.concat(s):this.path;m=typeof u=="string"?m.concat(u):m;const _=g?this.scope.concat(g):this.scope;return new hs(this.registry,m,f||null,_,this.errors,this._scope,this.options)}error(s,...u){const f=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new Ks(f,s))}checkSubtype(s,u){const f=Vd(s,u);return f&&this.error(f),f}}var ou=hs;function Kc(h){if(h instanceof es)return Kc(h.boundExpression);if(h instanceof Xs&&h.name==="error"||h instanceof ru||h instanceof bu||h instanceof Eu||h instanceof Xu)return!1;const s=h instanceof au||h instanceof $o;let u=!0;return h.eachChild(f=>{u=s?u&&Kc(f):u&&f instanceof tu}),!!u&&Ko(h)&&li(h,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function sl(h,s){const u=h.length-1;let f,g,m=0,_=u,b=0;for(;m<=_;)if(b=Math.floor((m+_)/2),f=h[b],g=h[b+1],f<=s){if(b===u||s<g)return b;m=b+1}else{if(!(f>s))throw new ds("Input is not a number.");_=b-1}return 0}class lu{constructor(s,u,f){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(const[g,m]of f)this.labels.push(g),this.outputs.push(m)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(s[1],1,er);if(!f)return null;const g=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let _=1;_<s.length;_+=2){const b=_===1?-1/0:s[_],O=s[_+1],D=_,C=_+1;if(typeof b!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=b)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=u.parse(O,C,m);if(!V)return null;m=m||V.type,g.push([b,V])}return new lu(m,f,g)}evaluate(s){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);const g=this.input.evaluate(s);if(g<=u[0])return f[0].evaluate(s);const m=u.length;return g>=u[m-1]?f[m-1].evaluate(s):f[sl(u,g)].evaluate(s)}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&s.push(this.labels[u]),s.push(this.outputs[u].serialize());return s}}const cn=.95047,Wc=1.08883,Ll=4/29,ls=6/29,Cc=3*ls*ls,Ud=ls*ls*ls,yi=Math.PI/180,Hh=180/Math.PI;function ol(h){return h>Ud?Math.pow(h,1/3):h/Cc+Ll}function _l(h){return h>ls?h*h*h:Cc*(h-Ll)}function Yc(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Nu(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Ju(h){const s=Nu(h.r),u=Nu(h.g),f=Nu(h.b),g=ol((.4124564*s+.3575761*u+.1804375*f)/cn),m=ol((.2126729*s+.7151522*u+.072175*f)/1);return{l:116*m-16,a:500*(g-m),b:200*(m-ol((.0193339*s+.119192*u+.9503041*f)/Wc)),alpha:h.a}}function Sc(h){let s=(h.l+16)/116,u=isNaN(h.a)?s:s+h.a/500,f=isNaN(h.b)?s:s-h.b/200;return s=1*_l(s),u=cn*_l(u),f=Wc*_l(f),new zn(Yc(3.2404542*u-1.5371385*s-.4985314*f),Yc(-.969266*u+1.8760108*s+.041556*f),Yc(.0556434*u-.2040259*s+1.0572252*f),h.alpha)}function rm(h,s,u){const f=s-h;return h+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const $h={forward:Ju,reverse:Sc,interpolate:function(h,s,u){return{l:vr(h.l,s.l,u),a:vr(h.a,s.a,u),b:vr(h.b,s.b,u),alpha:vr(h.alpha,s.alpha,u)}}},Kh={forward:function(h){const{l:s,a:u,b:f}=Ju(h),g=Math.atan2(f,u)*Hh;return{h:g<0?g+360:g,c:Math.sqrt(u*u+f*f),l:s,alpha:h.a}},reverse:function(h){const s=h.h*yi,u=h.c;return Sc({l:h.l,a:Math.cos(s)*u,b:Math.sin(s)*u,alpha:h.alpha})},interpolate:function(h,s,u){return{h:rm(h.h,s.h,u),c:vr(h.c,s.c,u),l:vr(h.l,s.l,u),alpha:vr(h.alpha,s.alpha,u)}}};var ll=Object.freeze({__proto__:null,hcl:Kh,lab:$h});class ts{constructor(s,u,f,g,m){this.type=s,this.operator=u,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[_,b]of m)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(s,u,f,g){let m=0;if(s.name==="exponential")m=bi(u,s.base,f,g);else if(s.name==="linear")m=bi(u,1,f,g);else if(s.name==="cubic-bezier"){const _=s.controlPoints;m=new Lt(_[0],_[1],_[2],_[3]).solve(bi(u,1,f,g))}return m}static parse(s,u){let[f,g,m,..._]=s;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some(C=>typeof C!="number"||C<0||C>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length-1>3&&(s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,er),!m)return null;const b=[];let O=null;f==="interpolate-hcl"||f==="interpolate-lab"?O=Ws:u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType);for(let D=0;D<_.length;D+=2){const C=_[D],V=_[D+1],L=D+3,z=D+4;if(typeof C!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(b.length&&b[b.length-1][0]>=C)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const M=u.parse(V,z,O);if(!M)return null;O=O||M.type,b.push([C,M])}return O.kind==="number"||O.kind==="color"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new ts(O,f,g,m,b):u.error(`Type ${Mi(O)} is not interpolatable.`)}evaluate(s){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);const g=this.input.evaluate(s);if(g<=u[0])return f[0].evaluate(s);const m=u.length;if(g>=u[m-1])return f[m-1].evaluate(s);const _=sl(u,g),b=ts.interpolationFactor(this.interpolation,g,u[_],u[_+1]),O=f[_].evaluate(s),D=f[_+1].evaluate(s);return this.operator==="interpolate"?Ah[this.type.kind.toLowerCase()](O,D,b):this.operator==="interpolate-hcl"?Kh.reverse(Kh.interpolate(Kh.forward(O),Kh.forward(D),b)):$h.reverse($h.interpolate($h.forward(O),$h.forward(D),b))}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,s,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function bi(h,s,u,f){const g=f-u,m=h-u;return g===0?0:s===1?m/g:(Math.pow(s,m)-1)/(Math.pow(s,g)-1)}class uu{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expectected at least one argument.");let f=null;const g=u.expectedType;g&&g.kind!=="value"&&(f=g);const m=[];for(const b of s.slice(1)){const O=u.parse(b,1+m.length,f,void 0,{typeAnnotation:"omit"});if(!O)return null;f=f||O.type,m.push(O)}const _=g&&m.some(b=>Vd(g,b.type));return new uu(_?An:f,m)}evaluate(s){let u,f=null,g=0;for(const m of this.args){if(g++,f=m.evaluate(s),f&&f instanceof Vs&&!f.available&&(u||(u=f),f=null,g===this.args.length))return u;if(f!==null)break}return f}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class Ou{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const f=[];for(let m=1;m<s.length-1;m+=2){const _=s[m];if(typeof _!="string")return u.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=u.parse(s[m+1],m+1);if(!b)return null;f.push([_,b])}const g=u.parse(s[s.length-1],s.length-1,u.expectedType,f);return g?new Ou(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[u,f]of this.bindings)s.push(u,f.serialize());return s.push(this.result.serialize()),s}}class up{constructor(s,u,f){this.type=s,this.index=u,this.input=f}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,er),g=u.parse(s[2],2,Ki(u.expectedType||An));return f&&g?new up(g.type.itemType,f,g):null}evaluate(s){const u=this.index.evaluate(s),f=this.input.evaluate(s);if(u<0)throw new ds(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new ds(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new ds(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class bc{constructor(s,u,f){this.type=s,this.index=u,this.input=f}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,er),g=u.parse(s[2],2,Ki(u.expectedType||An));return f&&g?new bc(g.type.itemType,f,g):null}evaluate(s){const u=this.index.evaluate(s),f=this.input.evaluate(s);if(u<0)throw new ds(`Array index out of bounds: ${u} < 0.`);if(u>f.length-1)throw new ds(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u===Math.floor(u))return f[u];const g=Math.floor(u),m=Math.ceil(u),_=f[g],b=f[m];if(typeof _!="number"||typeof b!="number")throw new ds(`Cannot interpolate between non-number values at index ${u}.`);const O=u-g;return _*(1-O)+b*O}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class Nf{constructor(s,u){this.type=bn,this.needle=s,this.haystack=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,An),g=u.parse(s[2],2,An);return f&&g?vh(f.type,[bn,hn,er,gc,An])?new Nf(f,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(f.type)} instead`):null}evaluate(s){const u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(f==null)return!1;if(!yc(u,["boolean","string","number","null"]))throw new ds(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(Ji(u))} instead.`);if(!yc(f,["string","array"]))throw new ds(`Expected second argument to be of type array or string, but found ${Mi(Ji(f))} instead.`);return f.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Bd{constructor(s,u,f){this.type=er,this.needle=s,this.haystack=u,this.fromIndex=f}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,An),g=u.parse(s[2],2,An);if(!f||!g)return null;if(!vh(f.type,[bn,hn,er,gc,An]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(f.type)} instead`);if(s.length===4){const m=u.parse(s[3],3,er);return m?new Bd(f,g,m):null}return new Bd(f,g)}evaluate(s){const u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!yc(u,["boolean","string","number","null"]))throw new ds(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(Ji(u))} instead.`);if(!yc(f,["string","array"]))throw new ds(`Expected second argument to be of type array or string, but found ${Mi(Ji(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(s);return f.indexOf(u,g)}return f.indexOf(u)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Wh{constructor(s,u,f,g,m,_){this.inputType=s,this.type=u,this.input=f,this.cases=g,this.outputs=m,this.otherwise=_}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let f,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const m={},_=[];for(let D=2;D<s.length-1;D+=2){let C=s[D];const V=s[D+1];Array.isArray(C)||(C=[C]);const L=u.concat(D);if(C.length===0)return L.error("Expected at least one branch label.");for(const M of C){if(typeof M!="number"&&typeof M!="string")return L.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return L.error("Numeric branch labels must be integer values.");if(f){if(L.checkSubtype(f,Ji(M)))return null}else f=Ji(M);if(m[String(M)]!==void 0)return L.error("Branch labels must be unique.");m[String(M)]=_.length}const z=u.parse(V,D,g);if(!z)return null;g=g||z.type,_.push(z)}const b=u.parse(s[1],1,An);if(!b)return null;const O=u.parse(s[s.length-1],s.length-1,g);return O?b.type.kind!=="value"&&u.concat(1).checkSubtype(f,b.type)?null:new Wh(f,g,b,m,_,O):null}evaluate(s){const u=this.input.evaluate(s);return(Ji(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],g={};for(const _ of u){const b=g[this.cases[_]];b===void 0?(g[this.cases[_]]=f.length,f.push([this.cases[_],[_]])):f[b][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of f)s.push(b.length===1?m(b[0]):b.map(m)),s.push(this.outputs[_].serialize());return s.push(this.otherwise.serialize()),s}}class Yh{constructor(s,u,f){this.type=s,this.branches=u,this.otherwise=f}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const g=[];for(let _=1;_<s.length-1;_+=2){const b=u.parse(s[_],_,bn);if(!b)return null;const O=u.parse(s[_+1],_+1,f);if(!O)return null;g.push([b,O]),f=f||O.type}const m=u.parse(s[s.length-1],s.length-1,f);return m?new Yh(f,g,m):null}evaluate(s){for(const[u,f]of this.branches)if(u.evaluate(s))return f.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[u,f]of this.branches)s(u),s(f);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class jd{constructor(s,u,f,g){this.type=s,this.input=u,this.beginIndex=f,this.endIndex=g}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,An),g=u.parse(s[2],2,er);if(!f||!g)return null;if(!vh(f.type,[Ki(An),hn,An]))return u.error(`Expected first argument to be of type array or string, but found ${Mi(f.type)} instead`);if(s.length===4){const m=u.parse(s[3],3,er);return m?new jd(f.type,f,g,m):null}return new jd(f.type,f,g)}evaluate(s){const u=this.input.evaluate(s),f=this.beginIndex.evaluate(s);if(!yc(u,["string","array"]))throw new ds(`Expected first argument to be of type array or string, but found ${Mi(Ji(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(s);return u.slice(f,g)}return u.slice(f)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Of(h,s){return h==="=="||h==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function ag(h,s,u,f){return f.compare(s,u)===0}function Rh(h,s,u){const f=h!=="=="&&h!=="!=";return class kX{constructor(m,_,b){this.type=bn,this.lhs=m,this.rhs=_,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const b=m[0];let O=_.parse(m[1],1,An);if(!O)return null;if(!Of(b,O.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Mi(O.type)}'.`);let D=_.parse(m[2],2,An);if(!D)return null;if(!Of(b,D.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Mi(D.type)}'.`);if(O.type.kind!==D.type.kind&&O.type.kind!=="value"&&D.type.kind!=="value")return _.error(`Cannot compare types '${Mi(O.type)}' and '${Mi(D.type)}'.`);f&&(O.type.kind==="value"&&D.type.kind!=="value"?O=new $o(D.type,[O]):O.type.kind!=="value"&&D.type.kind==="value"&&(D=new $o(O.type,[D])));let C=null;if(m.length===4){if(O.type.kind!=="string"&&D.type.kind!=="string"&&O.type.kind!=="value"&&D.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(C=_.parse(m[3],3,Ho),!C)return null}return new kX(O,D,C)}evaluate(m){const _=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(f&&this.hasUntypedArgument){const O=Ji(_),D=Ji(b);if(O.kind!==D.kind||O.kind!=="string"&&O.kind!=="number")throw new ds(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${O.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const O=Ji(_),D=Ji(b);if(O.kind!=="string"||D.kind!=="string")return s(m,_,b)}return this.collator?u(m,_,b,this.collator.evaluate(m)):s(m,_,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[h];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const $g=Rh("==",function(h,s,u){return s===u},ag),xc=Rh("!=",function(h,s,u){return s!==u},function(h,s,u,f){return!ag(0,s,u,f)}),Qu=Rh("<",function(h,s,u){return s<u},function(h,s,u,f){return f.compare(s,u)<0}),Vu=Rh(">",function(h,s,u){return s>u},function(h,s,u,f){return f.compare(s,u)>0}),Kg=Rh("<=",function(h,s,u){return s<=u},function(h,s,u,f){return f.compare(s,u)<=0}),Xh=Rh(">=",function(h,s,u){return s>=u},function(h,s,u,f){return f.compare(s,u)>=0});class wl{constructor(s,u,f,g,m,_){this.type=hn,this.number=s,this.locale=u,this.currency=f,this.unit=g,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(s,u){if(s.length!==3)return u.error("Expected two arguments.");const f=u.parse(s[1],1,er);if(!f)return null;const g=s[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let m=null;if(g.locale&&(m=u.parseObjectValue(g.locale,2,"locale",hn),!m))return null;let _=null;if(g.currency&&(_=u.parseObjectValue(g.currency,2,"currency",hn),!_))return null;let b=null;if(g.unit&&(b=u.parseObjectValue(g.unit,2,"unit",hn),!b))return null;let O=null;if(g["min-fraction-digits"]&&(O=u.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",er),!O))return null;let D=null;return g["max-fraction-digits"]&&(D=u.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",er),!D)?null:new wl(f,m,_,b,O,D)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class ul{constructor(s){this.type=er,this.input=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);const f=u.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Mi(f.type)} instead.`):new ul(f):null}evaluate(s){const u=this.input.evaluate(s);if(typeof u=="string"||Array.isArray(u))return u.length;throw new ds(`Expected value to be of type string or array, but found ${Mi(Ji(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(u=>{s.push(u.serialize())}),s}}function Jh(h){return function(){h=1831565813+(h|=0)|0;let s=Math.imul(h^h>>>15,1|h);return s=s+Math.imul(s^s>>>7,61|s)^s,((s^s>>>14)>>>0)/4294967296}}const Gd={"==":$g,"!=":xc,">":Vu,"<":Qu,">=":Xh,"<=":Kg,array:$o,at:up,"at-interpolated":bc,boolean:$o,case:Yh,coalesce:uu,collator:ru,format:zd,image:Cu,in:Nf,"index-of":Bd,interpolate:ts,"interpolate-hcl":ts,"interpolate-lab":ts,length:ul,let:Ou,literal:tu,match:Wh,number:$o,"number-format":wl,object:$o,slice:jd,step:lu,string:$o,"to-boolean":au,"to-color":au,"to-number":au,"to-string":au,var:es,within:bu,distance:Eu,config:Xu};function nm(h,[s,u,f,g]){s=s.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const m=g?g.evaluate(h):1,_=zl(s,u,f,m);if(_)throw new ds(_);return new zn(s/255*m,u/255*m,f/255*m,m)}function im(h,[s,u,f,g]){s=s.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const m=g?g.evaluate(h):1,_=function(D,C,V,L){return typeof D=="number"&&D>=0&&D<=360?typeof C=="number"&&C>=0&&C<=100&&typeof V=="number"&&V>=0&&V<=100?L===void 0||typeof L=="number"&&L>=0&&L<=1?null:`Invalid hsla value [${[D,C,V,L].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof L=="number"?[D,C,V,L]:[D,C,V]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof L=="number"?[D,C,V,L]:[D,C,V]).join(", ")}]: 'h' must be between 0 and 360.`}(s,u,f,m);if(_)throw new ds(_);const b=`hsla(${s}, ${u}%, ${f}%, ${m})`,O=zn.parse(b);if(!O)throw new ds(`Failed to parse HSLA color: ${b}`);return O}function Xc(h,s){return h in s}function Vf(h,s){const u=s[h];return u===void 0?null:u}function cl(h){return{type:h}}function Zd(h){return{result:"success",value:h}}function zu(h){return{result:"error",value:h}}function qd(h,s){return!!h&&!!h.parameters&&h.parameters.indexOf(s)>-1}function Jc(h){return h["property-type"]==="data-driven"}function Fl(h){return qd(h.expression,"measure-light")}function ec(h){return qd(h.expression,"zoom")}function Qc(h){return!!h.expression&&h.expression.interpolated}function cp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function Hd(h){return h}function ed(h,s){const u=s.type==="color",f=h.stops&&typeof h.stops[0][0]=="object",g=f||!(f||h.property!==void 0),m=h.type||(Qc(s)?"exponential":"interval");if(u&&((h=Nn({},h)).stops&&(h.stops=h.stops.map(D=>[D[0],zn.parse(D[1])])),h.default=zn.parse(h.default?h.default:s.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!ll[h.colorSpace])throw new Error(`Unknown color space: ${h.colorSpace}`);let _,b,O;if(m==="exponential")_=zf;else if(m==="interval")_=rg;else if(m==="categorical"){_=sm,b=Object.create(null);for(const D of h.stops)b[D[0]]=D[1];O=typeof h.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=om}if(f){const D={},C=[];for(let z=0;z<h.stops.length;z++){const M=h.stops[z],j=M[0].zoom;D[j]===void 0&&(D[j]={zoom:j,type:h.type,property:h.property,default:h.default,stops:[]},C.push(j)),D[j].stops.push([M[0].value,M[1]])}const V=[];for(const z of C)V.push([D[z].zoom,ed(D[z],s)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:ts.interpolationFactor.bind(void 0,L),zoomStops:V.map(z=>z[0]),evaluate:({zoom:z},M)=>zf({stops:V,base:h.base},s,z).evaluate(z,M)}}if(g){const D=m==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:ts.interpolationFactor.bind(void 0,D),zoomStops:h.stops.map(C=>C[0]),evaluate:({zoom:C})=>_(h,s,C,b,O)}}return{kind:"source",evaluate(D,C){const V=C&&C.properties?C.properties[h.property]:void 0;return V===void 0?Gs(h.default,s.default):_(h,s,V,b,O)}}}function Gs(h,s,u){return h!==void 0?h:s!==void 0?s:u!==void 0?u:void 0}function sm(h,s,u,f,g){return Gs(typeof u===g?f[u]:void 0,h.default,s.default)}function rg(h,s,u){if(Su(u)!=="number")return Gs(h.default,s.default);const f=h.stops.length;if(f===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[f-1][0])return h.stops[f-1][1];const g=sl(h.stops.map(m=>m[0]),u);return h.stops[g][1]}function zf(h,s,u){const f=h.base!==void 0?h.base:1;if(Su(u)!=="number")return Gs(h.default,s.default);const g=h.stops.length;if(g===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[g-1][0])return h.stops[g-1][1];const m=sl(h.stops.map(C=>C[0]),u),_=function(C,V,L,z){const M=z-L,j=C-L;return M===0?0:V===1?j/M:(Math.pow(V,j)-1)/(Math.pow(V,M)-1)}(u,f,h.stops[m][0],h.stops[m+1][0]),b=h.stops[m][1],O=h.stops[m+1][1];let D=Ah[s.type]||Hd;if(h.colorSpace&&h.colorSpace!=="rgb"){const C=ll[h.colorSpace];D=(V,L)=>C.reverse(C.interpolate(C.forward(V),C.forward(L),_))}return typeof b.evaluate=="function"?{evaluate(...C){const V=b.evaluate.apply(void 0,C),L=O.evaluate.apply(void 0,C);if(V!==void 0&&L!==void 0)return D(V,L,_)}}:D(b,O,_)}function om(h,s,u){return s.type==="color"?u=zn.parse(u):s.type==="formatted"?u=ys.fromString(u.toString()):s.type==="resolvedImage"?u=Vs.build(u.toString()):Su(u)===s.type||s.type==="enum"&&s.values[u]||(u=void 0),Gs(u,h.default,s.default)}Xs.register(Gd,{error:[{kind:"error"},[hn],(h,[s])=>{throw new ds(s.evaluate(h))}],typeof:[hn,[An],(h,[s])=>Mi(Ji(s.evaluate(h)))],"to-rgba":[Ki(er,4),[Ws],(h,[s])=>s.evaluate(h).toRenderColor(null).toArray()],"to-hsla":[Ki(er,4),[Ws],(h,[s])=>s.evaluate(h).toRenderColor(null).toHslaArray()],rgb:[Ws,[er,er,er],nm],rgba:[Ws,[er,er,er,er],nm],hsl:[Ws,[er,er,er],im],hsla:[Ws,[er,er,er,er],im],has:{type:bn,overloads:[[[hn],(h,[s])=>Xc(s.evaluate(h),h.properties())],[[hn,Od],(h,[s,u])=>Xc(s.evaluate(h),u.evaluate(h))]]},get:{type:An,overloads:[[[hn],(h,[s])=>Vf(s.evaluate(h),h.properties())],[[hn,Od],(h,[s,u])=>Vf(s.evaluate(h),u.evaluate(h))]]},"feature-state":[An,[hn],(h,[s])=>Vf(s.evaluate(h),h.featureState||{})],properties:[Od,[],h=>h.properties()],"geometry-type":[hn,[],h=>h.geometryType()],id:[An,[],h=>h.id()],zoom:[er,[],h=>h.globals.zoom],pitch:[er,[],h=>h.globals.pitch||0],"distance-from-center":[er,[],h=>h.distanceFromCenter()],"measure-light":[er,[hn],(h,[s])=>h.measureLight(s.evaluate(h))],"heatmap-density":[er,[],h=>h.globals.heatmapDensity||0],"line-progress":[er,[],h=>h.globals.lineProgress||0],"raster-value":[er,[],h=>h.globals.rasterValue||0],"raster-particle-speed":[er,[],h=>h.globals.rasterParticleSpeed||0],"sky-radial-progress":[er,[],h=>h.globals.skyRadialProgress||0],accumulated:[An,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[er,cl(er),(h,s)=>{let u=0;for(const f of s)u+=f.evaluate(h);return u}],"*":[er,cl(er),(h,s)=>{let u=1;for(const f of s)u*=f.evaluate(h);return u}],"-":{type:er,overloads:[[[er,er],(h,[s,u])=>s.evaluate(h)-u.evaluate(h)],[[er],(h,[s])=>-s.evaluate(h)]]},"/":[er,[er,er],(h,[s,u])=>s.evaluate(h)/u.evaluate(h)],"%":[er,[er,er],(h,[s,u])=>s.evaluate(h)%u.evaluate(h)],ln2:[er,[],()=>Math.LN2],pi:[er,[],()=>Math.PI],e:[er,[],()=>Math.E],"^":[er,[er,er],(h,[s,u])=>Math.pow(s.evaluate(h),u.evaluate(h))],sqrt:[er,[er],(h,[s])=>Math.sqrt(s.evaluate(h))],log10:[er,[er],(h,[s])=>Math.log(s.evaluate(h))/Math.LN10],ln:[er,[er],(h,[s])=>Math.log(s.evaluate(h))],log2:[er,[er],(h,[s])=>Math.log(s.evaluate(h))/Math.LN2],sin:[er,[er],(h,[s])=>Math.sin(s.evaluate(h))],cos:[er,[er],(h,[s])=>Math.cos(s.evaluate(h))],tan:[er,[er],(h,[s])=>Math.tan(s.evaluate(h))],asin:[er,[er],(h,[s])=>Math.asin(s.evaluate(h))],acos:[er,[er],(h,[s])=>Math.acos(s.evaluate(h))],atan:[er,[er],(h,[s])=>Math.atan(s.evaluate(h))],min:[er,cl(er),(h,s)=>Math.min(...s.map(u=>u.evaluate(h)))],max:[er,cl(er),(h,s)=>Math.max(...s.map(u=>u.evaluate(h)))],abs:[er,[er],(h,[s])=>Math.abs(s.evaluate(h))],round:[er,[er],(h,[s])=>{const u=s.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[er,[er],(h,[s])=>Math.floor(s.evaluate(h))],ceil:[er,[er],(h,[s])=>Math.ceil(s.evaluate(h))],"filter-==":[bn,[hn,An],(h,[s,u])=>h.properties()[s.value]===u.value],"filter-id-==":[bn,[An],(h,[s])=>h.id()===s.value],"filter-type-==":[bn,[hn],(h,[s])=>h.geometryType()===s.value],"filter-<":[bn,[hn,An],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f<g}],"filter-id-<":[bn,[An],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u<f}],"filter->":[bn,[hn,An],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f>g}],"filter-id->":[bn,[An],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u>f}],"filter-<=":[bn,[hn,An],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[bn,[An],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u<=f}],"filter->=":[bn,[hn,An],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[bn,[An],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u>=f}],"filter-has":[bn,[An],(h,[s])=>s.value in h.properties()],"filter-has-id":[bn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[bn,[Ki(hn)],(h,[s])=>s.value.indexOf(h.geometryType())>=0],"filter-id-in":[bn,[Ki(An)],(h,[s])=>s.value.indexOf(h.id())>=0],"filter-in-small":[bn,[hn,Ki(An)],(h,[s,u])=>u.value.indexOf(h.properties()[s.value])>=0],"filter-in-large":[bn,[hn,Ki(An)],(h,[s,u])=>function(f,g,m,_){for(;m<=_;){const b=m+_>>1;if(g[b]===f)return!0;g[b]>f?_=b-1:m=b+1}return!1}(h.properties()[s.value],u.value,0,u.value.length-1)],all:{type:bn,overloads:[[[bn,bn],(h,[s,u])=>s.evaluate(h)&&u.evaluate(h)],[cl(bn),(h,s)=>{for(const u of s)if(!u.evaluate(h))return!1;return!0}]]},any:{type:bn,overloads:[[[bn,bn],(h,[s,u])=>s.evaluate(h)||u.evaluate(h)],[cl(bn),(h,s)=>{for(const u of s)if(u.evaluate(h))return!0;return!1}]]},"!":[bn,[bn],(h,[s])=>!s.evaluate(h)],"is-supported-script":[bn,[hn],(h,[s])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(s.evaluate(h))}],upcase:[hn,[hn],(h,[s])=>s.evaluate(h).toUpperCase()],downcase:[hn,[hn],(h,[s])=>s.evaluate(h).toLowerCase()],concat:[hn,cl(An),(h,s)=>s.map(u=>Ys(u.evaluate(h))).join("")],"resolved-locale":[hn,[Ho],(h,[s])=>s.evaluate(h).resolvedLocale()],random:[er,[er,er,An],(h,s)=>{const[u,f,g]=s.map(_=>_.evaluate(h));if(u>f||u===f)return u;let m;if(typeof g=="string")m=function(_){let b=0;if(_.length===0)return b;for(let O=0;O<_.length;O++)b=(b<<5)-b+_.charCodeAt(O),b|=0;return b}(g);else{if(typeof g!="number")throw new ds(`Invalid seed input: ${g}`);m=g}return u+Jh(m)()*(f-u)}]});class lo{constructor(s,u,f,g){this.expression=s,this._warningHistory={},this._evaluator=new Dd(f,g),this._defaultValue=u?function(m){return m.type==="color"&&(cp(m.default)||Array.isArray(m.default))?new zn(0,0,0,0):m.type==="color"?zn.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=ai(s)}evaluateWithoutErrorHandling(s,u,f,g,m,_,b,O){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=O||null,this.expression.evaluate(this._evaluator)}evaluate(s,u,f,g,m,_,b,O){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=O||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new ds(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${D.message}`)),this._defaultValue}}}function Qh(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Gd}function G(h,s,u,f){const g=new ou(Gd,[],s?function(_){const b={color:Ws,string:hn,number:er,enum:hn,boolean:bn,formatted:Tu,resolvedImage:Os};return _.type==="array"?Ki(b[_.value]||An,_.length):b[_.type]}(s):void 0,void 0,void 0,u,f),m=g.parse(h,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Zd(new lo(m,s,u,f)):zu(g.errors)}class Q{constructor(s,u,f,g){this.kind=s,this._styleExpression=u,this.isLightConstant=f,this.isLineProgressConstant=g,this.isStateDependent=s!=="constant"&&!As(u.expression),this.configDependencies=ai(u.expression)}evaluateWithoutErrorHandling(s,u,f,g,m,_){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,g,m,_)}evaluate(s,u,f,g,m,_){return this._styleExpression.evaluate(s,u,f,g,m,_)}}class ye{constructor(s,u,f,g,m,_){this.kind=s,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!As(u.expression),this.isLightConstant=m,this.isLineProgressConstant=_,this.configDependencies=ai(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(s,u,f,g,m,_){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,g,m,_)}evaluate(s,u,f,g,m,_){return this._styleExpression.evaluate(s,u,f,g,m,_)}interpolationFactor(s,u,f){return this.interpolationType?ts.interpolationFactor(this.interpolationType,s,u,f):0}}function Me(h,s,u,f){if((h=G(h,s,u,f)).result==="error")return h;const g=h.value.expression,m=Ko(g);if(!m&&!Jc(s))return zu([new Ks("","data expressions not supported")]);const _=li(g,["zoom","pitch","distance-from-center"]);if(!_&&!ec(s))return zu([new Ks("","zoom expressions not supported")]);const b=li(g,["measure-light"]);if(!b&&!Fl(s))return zu([new Ks("","measure-light expression not supported")]);const O=li(g,["line-progress"]);if(!O&&!function(V){return qd(V.expression,"line-progress")}(s))return zu([new Ks("","line-progress expression not supported")]);const D=s.expression&&s.expression.relaxZoomRestriction,C=rt(g);return C||_||D?C instanceof Ks?zu([C]):C instanceof ts&&!Qc(s)?zu([new Ks("",'"interpolate" expressions cannot be used with this property')]):Zd(C?new ye(m&&O?"camera":"composite",h.value,C.labels,C instanceof ts?C.interpolation:void 0,b,O):new Q(m&&O?"constant":"source",h.value,b,O)):zu([new Ks("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class We{constructor(s,u){this._parameters=s,this._specification=u,Nn(this,ed(this._parameters,this._specification))}static deserialize(s){return new We(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function rt(h){let s=null;if(h instanceof Ou)s=rt(h.result);else if(h instanceof uu){for(const u of h.args)if(s=rt(u),s)break}else(h instanceof lu||h instanceof ts)&&h.input instanceof Xs&&h.input.name==="zoom"&&(s=h);return s instanceof Ks||h.eachChild(u=>{const f=rt(u);f instanceof Ks?s=f:s&&f&&s!==f&&(s=new Ks("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}var it,ht,mt=function(){if(ht)return it;ht=1,it=s;var h=3;function s(u,f,g){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var _=new Int32Array(this.arrayBuffer);u=_[0],this.d=(f=_[1])+2*(g=_[2]);for(var b=0;b<this.d*this.d;b++){var O=_[h+b],D=_[h+b+1];m.push(O===D?null:_.subarray(O,D))}var C=_[h+m.length+1];this.keys=_.subarray(_[h+m.length],C),this.bboxes=_.subarray(C),this.insert=this._insertReadonly}else{this.d=f+2*g;for(var V=0;V<this.d*this.d;V++)m.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=g,this.scale=f/u,this.uid=0;var L=g/f*u;this.min=-L,this.max=u+L}return s.prototype.insert=function(u,f,g,m,_){this._forEachCell(f,g,m,_,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(m),this.bboxes.push(_)},s.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},s.prototype._insertCell=function(u,f,g,m,_,b){this.cells[_].push(b)},s.prototype.query=function(u,f,g,m,_){var b=this.min,O=this.max;if(u<=b&&f<=b&&O<=g&&O<=m&&!_)return Array.prototype.slice.call(this.keys);var D=[];return this._forEachCell(u,f,g,m,this._queryCell,D,{},_),D},s.prototype._queryCell=function(u,f,g,m,_,b,O,D){var C=this.cells[_];if(C!==null)for(var V=this.keys,L=this.bboxes,z=0;z<C.length;z++){var M=C[z];if(O[M]===void 0){var j=4*M;(D?D(L[j+0],L[j+1],L[j+2],L[j+3]):u<=L[j+2]&&f<=L[j+3]&&g>=L[j+0]&&m>=L[j+1])?(O[M]=!0,b.push(V[M])):O[M]=!1}}},s.prototype._forEachCell=function(u,f,g,m,_,b,O,D){for(var C=this._convertToCellCoord(u),V=this._convertToCellCoord(f),L=this._convertToCellCoord(g),z=this._convertToCellCoord(m),M=C;M<=L;M++)for(var j=V;j<=z;j++){var J=this.d*j+M;if((!D||D(this._convertFromCellCoord(M),this._convertFromCellCoord(j),this._convertFromCellCoord(M+1),this._convertFromCellCoord(j+1)))&&_.call(this,u,f,g,m,J,b,O,D))return}},s.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},s.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},s.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,f=h+this.cells.length+1+1,g=0,m=0;m<this.cells.length;m++)g+=this.cells[m].length;var _=new Int32Array(f+g+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var b=f,O=0;O<u.length;O++){var D=u[O];_[h+O]=b,_.set(D,b),b+=D.length}return _[h+u.length]=b,_.set(this.keys,b),_[h+u.length+1]=b+=this.keys.length,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer},it}(),St=v(mt);const ea={};function Pt(h,s,u={}){Object.defineProperty(h,"_classRegistryKey",{value:s,writable:!1}),ea[s]={klass:h,omit:u.omit||[]}}Pt(Object,"Object"),St.serialize=function(h,s){const u=h.toArrayBuffer();return s&&s.add(u),{buffer:u}},St.deserialize=function(h){return new St(h.buffer)},Object.defineProperty(St,"name",{value:"Grid"}),Pt(St,"Grid"),typeof DOMMatrix<"u"&&Pt(DOMMatrix,"DOMMatrix"),Pt(zn,"Color"),Pt(Error,"Error"),Pt(ys,"Formatted"),Pt(nl,"FormattedSection"),Pt($s,"AJAXError"),Pt(Vs,"ResolvedImage"),Pt(We,"StylePropertyFunction"),Pt(lo,"StyleExpression",{omit:["_evaluator"]}),Pt(qo,"ImageId"),Pt(Yu,"ImageVariant"),Pt(ye,"ZoomDependentExpression"),Pt(Q,"ZoomConstantExpression"),Pt(Xs,"CompoundExpression",{omit:["_evaluate"]});for(const h in Gd)ea[Gd[h]._classRegistryKey]||Pt(Gd[h],`Expression${h}`);function wa(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function sa(h){return self.ImageBitmap&&h instanceof ImageBitmap}function Ta(h,s){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(wa(h)||sa(h))return s&&s.add(h),h;if(ArrayBuffer.isView(h))return s&&s.add(h.buffer),h;if(h instanceof ImageData)return s&&s.add(h.data.buffer),h;if(Array.isArray(h)){const u=[];for(const f of h)u.push(Ta(f,s));return u}if(h instanceof Map){const u={$name:"Map",entries:[]};for(const[f,g]of h.entries())u.entries.push(Ta(f),Ta(g));return u}if(h instanceof Set){const u={$name:"Set"};let f=0;for(const g of h.values())u[++f]=Ta(g);return u}if(h instanceof DOMMatrix){const u={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const g of f)u[g]=h[g];return u}if(typeof h=="bigint")return{$name:"BigInt",value:h.toString()};if(typeof h=="object"){const u=h.constructor,f=u._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const g=u.serialize?u.serialize(h,s):{};if(!u.serialize){for(const m in h)h.hasOwnProperty(m)&&(ea[f].omit.indexOf(m)>=0||(g[m]=Ta(h[m],s)));h instanceof Error&&(g.message=h.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof h)}function ma(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||wa(h)||sa(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(ma);if(typeof h=="object"){const s=h.$name||"Object";if(s==="Map"){const g=h.entries||[],m=new Map;for(let _=0;_<g.length;_+=2)m.set(ma(g[_]),ma(g[_+1]));return m}if(s==="Set"){const g=new Set;for(const m of Object.keys(h))m!=="$name"&&g.add(ma(h[m]));return g}if(s==="DOMMatrix"){let g;return g=h.is2D?[h.a,h.b,h.c,h.d,h.e,h.f]:[h.m11,h.m12,h.m13,h.m14,h.m21,h.m22,h.m23,h.m24,h.m31,h.m32,h.m33,h.m34,h.m41,h.m42,h.m43,h.m44],new DOMMatrix(g)}if(s==="BigInt")return BigInt(h.value);const{klass:u}=ea[s];if(!u)throw new Error(`Can't deserialize unregistered class "${s}".`);if(u.deserialize)return u.deserialize(h);const f=Object.create(u.prototype);for(const g of Object.keys(h))g!=="$name"&&(f[g]=ma(h[g]));return f}throw new Error("can't deserialize object of type "+typeof h)}const Rt={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519,Osage:h=>h>=66736&&h<=66815,"CJK Unified Ideographs Extension B":h=>h>=131072&&h<=173791};function aa(h){for(const s of h)if(Wa(s.charCodeAt(0)))return!0;return!1}function Ha(h){for(const s of h)if(!Ja(s.charCodeAt(0)))return!1;return!0}function Ja(h){return!(Rt.Arabic(h)||Rt["Arabic Supplement"](h)||Rt["Arabic Extended-A"](h)||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h))}function Wa(h){return!(h!==746&&h!==747&&(h<4352||!(Rt["Bopomofo Extended"](h)||Rt.Bopomofo(h)||Rt["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Rt["CJK Compatibility Ideographs"](h)||Rt["CJK Compatibility"](h)||Rt["CJK Radicals Supplement"](h)||Rt["CJK Strokes"](h)||!(!Rt["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Rt["CJK Unified Ideographs Extension A"](h)||Rt["CJK Unified Ideographs"](h)||Rt["Enclosed CJK Letters and Months"](h)||Rt["Hangul Compatibility Jamo"](h)||Rt["Hangul Jamo Extended-A"](h)||Rt["Hangul Jamo Extended-B"](h)||Rt["Hangul Jamo"](h)||Rt["Hangul Syllables"](h)||Rt.Hiragana(h)||Rt["Ideographic Description Characters"](h)||Rt.Kanbun(h)||Rt["Kangxi Radicals"](h)||Rt["Katakana Phonetic Extensions"](h)||Rt.Katakana(h)&&h!==12540||!(!Rt["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Rt["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Rt["Unified Canadian Aboriginal Syllabics"](h)||Rt["Unified Canadian Aboriginal Syllabics Extended"](h)||Rt["Vertical Forms"](h)||Rt["Yijing Hexagram Symbols"](h)||Rt["Yi Syllables"](h)||Rt["Yi Radicals"](h))))}function Vr(h){return!(Wa(h)||function(s){return!!(Rt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Rt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Rt["Letterlike Symbols"](s)||Rt["Number Forms"](s)||Rt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Rt["Control Pictures"](s)&&s!==9251||Rt["Optical Character Recognition"](s)||Rt["Enclosed Alphanumerics"](s)||Rt["Geometric Shapes"](s)||Rt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Rt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Rt["CJK Symbols and Punctuation"](s)||Rt.Katakana(s)||Rt["Private Use Area"](s)||Rt["CJK Compatibility Forms"](s)||Rt["Small Form Variants"](s)||Rt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(h))}function _r(h){return Rt.Arabic(h)||Rt["Arabic Supplement"](h)||Rt["Arabic Extended-A"](h)||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h)}function fn(h){return h>=1424&&h<=2303||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h)}function pr(h,s){return!(!s&&fn(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Rt.Khmer(h))}function xi(h){for(const s of h)if(fn(s.charCodeAt(0)))return!0;return!1}const Ii="deferred",Yn="loading",ui="loaded";let as=null,Hn="unavailable",xn=null;const vs=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(Hn="error"),as&&as(h)};function Wi(){$n.fire(new Zo("pluginStateChange",{pluginStatus:Hn,pluginURL:xn}))}const $n=new eu,wo=function(){return Hn},Pi=function(){if(Hn!==Ii||!xn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hn=Yn,Wi(),xn&&Bi({url:xn},h=>{h?vs(h):(Hn=ui,Wi())})},fs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Hn===ui||fs.applyArabicShaping!=null,isLoading:()=>Hn===Yn,setState(h){Hn=h.pluginStatus,xn=h.pluginURL},isParsed:()=>fs.applyArabicShaping!=null&&fs.processBidirectionalText!=null&&fs.processStyledBidirectionalText!=null,getPluginURL:()=>xn};class Pn{constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(s){return function(u,f){for(const g of u)if(!pr(g.charCodeAt(0),f))return!1;return!0}(s,fs.isLoaded())}}class Hi{constructor(s,u,f,g){this.property=s,this.value=u,this.expression=function(m,_,b,O){if(cp(m))return new We(m,_);if(Qh(m)||Array.isArray(m)&&m.length>0){const D=Me(m,_,b,O);if(D.result==="error")throw new Error(D.value.map(C=>`${C.key}: ${C.message}`).join(", "));return D.value}{let D=m;return typeof m=="string"&&_.type==="color"&&(D=zn.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>D}}}(u===void 0?s.specification.default:u,s.specification,f,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,u,f){return this.property.possiblyEvaluate(this,s,u,f)}}class Qs{constructor(s,u,f){this.property=s,this.value=new Hi(s,void 0,u,f)}transitioned(s,u){return new dl(this.property,this.value,u,wr({},s.transition,this.transition),s.now)}untransitioned(){return new dl(this.property,this.value,null,{},0)}}class Oo{constructor(s,u,f){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(s){return an(this._values[s].value.value)}setValue(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Qs(this._values[s].property,this._scope,this._options)),this._values[s].value=new Hi(this._values[s].property,u===null?void 0:an(u),this._scope,this._options),this._values[s].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].value.expression.configDependencies]))}setTransitionOrValue(s,u){u&&(this._options=u);const f=this._properties.properties;if(s)for(const g in s){const m=s[g];if(g.endsWith("-transition")){const _=g.slice(0,-11);f[_]&&this.setTransition(_,m)}else f.hasOwnProperty(g)&&this.setValue(g,m)}}getTransition(s){return an(this._values[s].transition)}setTransition(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Qs(this._values[s].property)),this._values[s].transition=an(u)||void 0}serialize(){const s={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(s[u]=f);const g=this.getTransition(u);g!==void 0&&(s[`${u}-transition`]=g)}return s}transitioned(s,u){const f=new kl(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(s,u._values[g]);return f}untransitioned(){const s=new kl(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class dl{constructor(s,u,f,g,m){const _=g.delay||0,b=g.duration||0;m=m||0,this.property=s,this.value=u,this.begin=m+_,this.end=this.begin+b,s.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(s,u,f){const g=s.now||0,m=this.value.possiblyEvaluate(s,u,f),_=this.prior;if(_){if(g>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(g<this.begin)return _.possiblyEvaluate(s,u,f);{const b=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(s,u,f),m,ur(b))}}return m}}class kl{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,f){const g=new Du(this._properties);for(const m of Object.keys(this._values))g._values[m]=this._values[m].possiblyEvaluate(s,u,f);return g}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Is{constructor(s,u,f){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(s){return an(this._values[s].value)}setValue(s,u){this._values[s]=new Hi(this._values[s].property,u===null?void 0:an(u),this._scope,this._options),this._values[s].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].expression.configDependencies]))}serialize(){const s={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(s[u]=f)}return s}possiblyEvaluate(s,u,f){const g=new Du(this._properties);for(const m of Object.keys(this._values))g._values[m]=this._values[m].possiblyEvaluate(s,u,f);return g}}class Ul{constructor(s,u,f){this.property=s,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,u,f,g){return this.property.evaluate(this.value,this.parameters,s,u,f,g)}}class Du{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Pa{constructor(s){this.specification=s}possiblyEvaluate(s,u){return s.expression.evaluate(u)}interpolate(s,u,f){const g=Ah[this.specification.type];return g?g(s,u,f):s}}class Ga{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,f,g){return new Ul(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},f,g)}:s.expression,u)}interpolate(s,u,f){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new Ul(this,{kind:"constant",value:void 0},s.parameters);const g=Ah[this.specification.type];return g?new Ul(this,{kind:"constant",value:g(s.value.value,u.value.value,f)},s.parameters):s}evaluate(s,u,f,g,m,_){return s.kind==="constant"?s.value:s.evaluate(u,f,g,m,_)}}class rs{constructor(s){this.specification=s}possiblyEvaluate(s,u,f,g){return!!s.expression.evaluate(u,null,{},f,g)}interpolate(){return!1}}class ji{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new Pn(0,{});for(const f in s){const g=s[f];g.specification.overridable&&this.overridableProperties.push(f);const m=this.defaultPropertyValues[f]=new Hi(g,void 0),_=this.defaultTransitionablePropertyValues[f]=new Qs(g);this.defaultTransitioningPropertyValues[f]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=m.possiblyEvaluate(u)}}}Pt(Ga,"DataDrivenProperty"),Pt(Pa,"DataConstantProperty"),Pt(rs,"ColorRampProperty");var qt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"iconsets":{"experimental":true,"type":"iconsets"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":1}},"url":{"required":true,"type":"string"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":1}},"source":{"required":true,"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","experimental":true,"private":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","experimental":true,"private":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function lm(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Th(h){if(Array.isArray(h))return h.map(Th);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const s={};for(const u in h)s[u]=Th(h[u]);return s}return lm(h)}function Ch(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const s of h.slice(1))if(!Ch(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}function Sh(h,s="",u=null,f="fill"){if(h==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ch(h)||(h=xh(h));const g=h;let m=!0;try{m=function(C){if(!tc(C))return C;let V=Th(C);return bh(V),V=Mu(V),V}(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let _=null,b=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){b=qt[`filter_${f}`];const C=G(m,b,s,u);if(C.result==="error")throw new Error(C.value.map(V=>`${V.key}: ${V.message}`).join(", "));_=(V,L,z)=>C.value.evaluate(V,L,{},z)}let O=null,D=null;if(m!==g){const C=G(g,b,s,u);if(C.result==="error")throw new Error(C.value.map(V=>`${V.key}: ${V.message}`).join(", "));O=(V,L,z,M,j)=>C.value.evaluate(V,L,{},z,void 0,void 0,M,j),D=!Ko(C.value.expression)}return{filter:_,dynamicFilter:O||void 0,needGeometry:ig(m),needFeature:!!D}}function Mu(h){if(!Array.isArray(h))return h;const s=function(u){if(ng.has(u[0])){for(let f=1;f<u.length;f++)if(tc(u[f]))return!0}return u}(h);return s===!0?s:s.map(u=>Mu(u))}function bh(h){let s=!1;const u=[];if(h[0]==="case"){for(let f=1;f<h.length-1;f+=2)s=s||tc(h[f]),u.push(h[f+1]);u.push(h[h.length-1])}else if(h[0]==="match"){s=s||tc(h[1]);for(let f=2;f<h.length-1;f+=2)u.push(h[f+1]);u.push(h[h.length-1])}else if(h[0]==="step"){s=s||tc(h[1]);for(let f=1;f<h.length-1;f+=2)u.push(h[f+1])}s&&(h.length=0,h.push("any",...u));for(let f=1;f<h.length;f++)bh(h[f])}function tc(h){if(!Array.isArray(h))return!1;if((s=h[0])==="pitch"||s==="distance-from-center")return!0;var s;for(let u=1;u<h.length;u++)if(tc(h[u]))return!0;return!1}const ng=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function dp(h,s){return h<s?-1:h>s?1:0}function ig(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let s=1;s<h.length;s++)if(ig(h[s]))return!0;return!1}function xh(h){if(!h)return!0;const s=h[0];return h.length<=1?s!=="any":s==="=="?Bl(h[1],h[2],"=="):s==="!="?ad(Bl(h[1],h[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Bl(h[1],h[2],s):s==="any"?(u=h.slice(1),["any"].concat(u.map(xh))):s==="all"?["all"].concat(h.slice(1).map(xh)):s==="none"?["all"].concat(h.slice(1).map(xh).map(ad)):s==="in"?ef(h[1],h.slice(2)):s==="!in"?ad(ef(h[1],h.slice(2))):s==="has"?td(h[1]):s!=="!has"||ad(td(h[1]));var u}function Bl(h,s,u){switch(h){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,h,s]}}function ef(h,s){if(s.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",h,["literal",s.sort(dp)]]:["filter-in-small",h,["literal",s]]}}function td(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function ad(h){return["!",h]}const hp="";function rd(h,s){return s?`${h}${hp}${s}`:h}const hl="-transition",sg=new Set(["fill","line","background","hillshade","raster"]);class uo extends eu{constructor(s,u,f,g,m){if(super(),this.id=s.id,this.fqid=rd(this.id,f),this.type=s.type,this.scope=f,this.lut=g,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,s.type!=="custom"){if(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type&&s.type!=="background"&&s.type!=="sky"&&s.type!=="slot"){this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter;const _=G(this.filter,qt[`filter_${s.type}`]);_.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,..._.value.configDependencies]))}if(s.slot&&(this.slot=s.slot),u.layout&&(this._unevaluatedLayout=new Is(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new Oo(u.paint,this.scope,m);for(const _ in s.paint)this.setPaintProperty(_,s.paint[_]);for(const _ in s.layout)this.setLayoutProperty(_,s.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Du(u.paint)}}}onAdd(s){}onRemove(s){}isDraped(s){return!this.is3D(!0)&&sg.has(this.type)}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u){if(this.type==="custom"&&s==="visibility")return void(this.visibility=u);const f=this._unevaluatedLayout;f._properties.properties[s]&&(f.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),s==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(s){return s.endsWith(hl)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u){const f=this._transitionablePaint,g=f._properties.properties;if(s.endsWith(hl)){const V=s.slice(0,-11);return g[V]&&f.setTransition(V,u||void 0),!1}if(!g[s])return!1;const m=f._values[s],_=m.value.isDataDriven(),b=m.value;f.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(s);const O=f._values[s].value,D=O.isDataDriven(),C=s.endsWith("pattern")||s==="line-dasharray";return D||_||C||this._handleOverridablePaintPropertyUpdate(s,b,O)}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getDefaultProgramParams(s,u,f){return null}_handleOverridablePaintPropertyUpdate(s,u,f){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){return Tn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(s,u)=>!(s===void 0||u==="layout"&&!Object.keys(s).length||u==="paint"&&!Object.keys(s).length))}is3D(s){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const s in this.paint._values){const u=this.paint.get(s);if(u instanceof Ul&&Jc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(s){this._filterCompiled||(this._featureFilter=Sh(this.filter,this.scope,s),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(s){this._stats&&(s.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(s){}queryIntersectsFeature(s,u,f,g,m,_,b,O,D){}}const Wg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ph{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ci{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.add(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...s){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...s){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Dn(h,s=1){let u=0,f=0;return{members:h.map(g=>{const m=Wg[g.type].BYTES_PER_ELEMENT,_=u=fp(u,Math.max(s,m)),b=g.components||1;return f=Math.max(f,m),u+=m*b,{name:g.name,type:g.type,components:b,offset:_}}),size:fp(u,Math.max(f,s)),alignment:s}}function fp(h,s){return Math.ceil(h/s)*s}class Iu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.int16[g+0]=u,this.int16[g+1]=f,s}}Iu.prototype.bytesPerElement=4,Pt(Iu,"StructArrayLayout2i4");class $d extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=g,s}}$d.prototype.bytesPerElement=6,Pt($d,"StructArrayLayout3i6");class Lu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.int16[_+0]=u,this.int16[_+1]=f,this.int16[_+2]=g,this.int16[_+3]=m,s}}Lu.prototype.bytesPerElement=8,Pt(Lu,"StructArrayLayout4i8");class nd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}nd.prototype.bytesPerElement=4,Pt(nd,"StructArrayLayout1f4");class Df extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=4*s,_=2*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.float32[_+1]=g,s}}Df.prototype.bytesPerElement=8,Pt(Df,"StructArrayLayout2i1f8");class tf extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=4*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=g,s}}tf.prototype.bytesPerElement=8,Pt(tf,"StructArrayLayout3i8");class jl extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=5*s;return this.int16[b+0]=u,this.int16[b+1]=f,this.int16[b+2]=g,this.int16[b+3]=m,this.int16[b+4]=_,s}}jl.prototype.bytesPerElement=10,Pt(jl,"StructArrayLayout5i10");class Mf extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=6*s,C=12*s,V=3*s;return this.int16[D+0]=u,this.int16[D+1]=f,this.uint8[C+4]=g,this.uint8[C+5]=m,this.uint8[C+6]=_,this.uint8[C+7]=b,this.float32[V+2]=O,s}}Mf.prototype.bytesPerElement=12,Pt(Mf,"StructArrayLayout2i4ub1f12");class Vo extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.float32[m+0]=u,this.float32[m+1]=f,this.float32[m+2]=g,s}}Vo.prototype.bytesPerElement=12,Pt(Vo,"StructArrayLayout3f12");class Kd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=6*s,O=3*s;return this.uint16[b+0]=u,this.uint16[b+1]=f,this.uint16[b+2]=g,this.uint16[b+3]=m,this.float32[O+2]=_,s}}Kd.prototype.bytesPerElement=12,Pt(Kd,"StructArrayLayout4ui1f12");class pp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.uint16[_+0]=u,this.uint16[_+1]=f,this.uint16[_+2]=g,this.uint16[_+3]=m,s}}pp.prototype.bytesPerElement=8,Pt(pp,"StructArrayLayout4ui8");class mp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=6*s;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=g,this.int16[O+3]=m,this.int16[O+4]=_,this.int16[O+5]=b,s}}mp.prototype.bytesPerElement=12,Pt(mp,"StructArrayLayout6i12");class Eh extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,L){const z=this.length;return this.resize(z+1),this.emplace(z,s,u,f,g,m,_,b,O,D,C,V,L)}emplace(s,u,f,g,m,_,b,O,D,C,V,L,z){const M=12*s;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=g,this.int16[M+3]=m,this.uint16[M+4]=_,this.uint16[M+5]=b,this.uint16[M+6]=O,this.uint16[M+7]=D,this.int16[M+8]=C,this.int16[M+9]=V,this.int16[M+10]=L,this.int16[M+11]=z,s}}Eh.prototype.bytesPerElement=24,Pt(Eh,"StructArrayLayout4i4ui4i24");class id extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=10*s,D=5*s;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=g,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,s}}id.prototype.bytesPerElement=20,Pt(id,"StructArrayLayout3i3f20");class sd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.float32[_+0]=u,this.float32[_+1]=f,this.float32[_+2]=g,this.float32[_+3]=m,s}}sd.prototype.bytesPerElement=16,Pt(sd,"StructArrayLayout4f16");class gp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}gp.prototype.bytesPerElement=4,Pt(gp,"StructArrayLayout1ul4");class Wd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.uint16[g+0]=u,this.uint16[g+1]=f,s}}Wd.prototype.bytesPerElement=4,Pt(Wd,"StructArrayLayout2ui4");class Fu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,L,z){const M=this.length;return this.resize(M+1),this.emplace(M,s,u,f,g,m,_,b,O,D,C,V,L,z)}emplace(s,u,f,g,m,_,b,O,D,C,V,L,z,M){const j=20*s,J=10*s;return this.int16[j+0]=u,this.int16[j+1]=f,this.int16[j+2]=g,this.int16[j+3]=m,this.int16[j+4]=_,this.float32[J+3]=b,this.float32[J+4]=O,this.float32[J+5]=D,this.float32[J+6]=C,this.int16[j+14]=V,this.uint32[J+8]=L,this.uint16[j+18]=z,this.uint16[j+19]=M,s}}Fu.prototype.bytesPerElement=40,Pt(Fu,"StructArrayLayout5i4f1i1ul2ui40");class Pc extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=8*s;return this.int16[D+0]=u,this.int16[D+1]=f,this.int16[D+2]=g,this.int16[D+4]=m,this.int16[D+5]=_,this.int16[D+6]=b,this.int16[D+7]=O,s}}Pc.prototype.bytesPerElement=16,Pt(Pc,"StructArrayLayout3i2i2i16");class cu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=4*s,O=8*s;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=g,this.int16[O+6]=m,this.int16[O+7]=_,s}}cu.prototype.bytesPerElement=16,Pt(cu,"StructArrayLayout2f1f2i16");class Ec extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=20*s,D=5*s;return this.uint8[O+0]=u,this.uint8[O+1]=f,this.float32[D+1]=g,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,s}}Ec.prototype.bytesPerElement=20,Pt(Ec,"StructArrayLayout2ub4f20");class Ls extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.uint16[m+0]=u,this.uint16[m+1]=f,this.uint16[m+2]=g,s}}Ls.prototype.bytesPerElement=6,Pt(Ls,"StructArrayLayout3ui6");class du extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te,fe,he,se,ve){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te,fe,he,se,ve)}emplace(s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te,fe,he,se,ve,Ce){const Ve=30*s,et=15*s,Ye=60*s;return this.int16[Ve+0]=u,this.int16[Ve+1]=f,this.int16[Ve+2]=g,this.float32[et+2]=m,this.float32[et+3]=_,this.uint16[Ve+8]=b,this.uint16[Ve+9]=O,this.uint32[et+5]=D,this.uint32[et+6]=C,this.uint32[et+7]=V,this.uint16[Ve+16]=L,this.uint16[Ve+17]=z,this.uint16[Ve+18]=M,this.float32[et+10]=j,this.float32[et+11]=J,this.uint8[Ye+48]=te,this.uint8[Ye+49]=fe,this.uint8[Ye+50]=he,this.uint32[et+13]=se,this.int16[Ve+28]=ve,this.uint8[Ye+58]=Ce,s}}du.prototype.bytesPerElement=60,Pt(du,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ac extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te,fe,he,se,ve,Ce,Ve,et,Ye,Xe,gt,tt,_t,xt,Ct,Mt,Ot){const jt=this.length;return this.resize(jt+1),this.emplace(jt,s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te,fe,he,se,ve,Ce,Ve,et,Ye,Xe,gt,tt,_t,xt,Ct,Mt,Ot)}emplace(s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te,fe,he,se,ve,Ce,Ve,et,Ye,Xe,gt,tt,_t,xt,Ct,Mt,Ot,jt){const Ft=20*s,$t=40*s,_a=80*s;return this.float32[Ft+0]=u,this.float32[Ft+1]=f,this.int16[$t+4]=g,this.int16[$t+5]=m,this.int16[$t+6]=_,this.int16[$t+7]=b,this.int16[$t+8]=O,this.int16[$t+9]=D,this.int16[$t+10]=C,this.int16[$t+11]=V,this.int16[$t+12]=L,this.uint16[$t+13]=z,this.uint16[$t+14]=M,this.uint16[$t+15]=j,this.uint16[$t+16]=J,this.uint16[$t+17]=te,this.uint16[$t+18]=fe,this.uint16[$t+19]=he,this.uint16[$t+20]=se,this.uint16[$t+21]=ve,this.uint16[$t+22]=Ce,this.uint16[$t+23]=Ve,this.uint16[$t+24]=et,this.uint16[$t+25]=Ye,this.uint16[$t+26]=Xe,this.uint16[$t+27]=gt,this.uint32[Ft+14]=tt,this.float32[Ft+15]=_t,this.float32[Ft+16]=xt,this.float32[Ft+17]=Ct,this.float32[Ft+18]=Mt,this.uint8[_a+76]=Ot,this.uint16[$t+39]=jt,s}}ac.prototype.bytesPerElement=80,Pt(ac,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class eo extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=5*s;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=g,this.float32[b+3]=m,this.float32[b+4]=_,s}}eo.prototype.bytesPerElement=20,Pt(eo,"StructArrayLayout5f20");class ku extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=7*s;return this.float32[D+0]=u,this.float32[D+1]=f,this.float32[D+2]=g,this.float32[D+3]=m,this.float32[D+4]=_,this.float32[D+5]=b,this.float32[D+6]=O,s}}ku.prototype.bytesPerElement=28,Pt(ku,"StructArrayLayout7f28");class Nh extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V){const L=this.length;return this.resize(L+1),this.emplace(L,s,u,f,g,m,_,b,O,D,C,V)}emplace(s,u,f,g,m,_,b,O,D,C,V,L){const z=11*s;return this.float32[z+0]=u,this.float32[z+1]=f,this.float32[z+2]=g,this.float32[z+3]=m,this.float32[z+4]=_,this.float32[z+5]=b,this.float32[z+6]=O,this.float32[z+7]=D,this.float32[z+8]=C,this.float32[z+9]=V,this.float32[z+10]=L,s}}Nh.prototype.bytesPerElement=44,Pt(Nh,"StructArrayLayout11f44");class yp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D){const C=this.length;return this.resize(C+1),this.emplace(C,s,u,f,g,m,_,b,O,D)}emplace(s,u,f,g,m,_,b,O,D,C){const V=9*s;return this.float32[V+0]=u,this.float32[V+1]=f,this.float32[V+2]=g,this.float32[V+3]=m,this.float32[V+4]=_,this.float32[V+5]=b,this.float32[V+6]=O,this.float32[V+7]=D,this.float32[V+8]=C,s}}yp.prototype.bytesPerElement=36,Pt(yp,"StructArrayLayout9f36");class af extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.float32[g+0]=u,this.float32[g+1]=f,s}}af.prototype.bytesPerElement=8,Pt(af,"StructArrayLayout2f8");class Oh extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=6*s;return this.uint32[3*s+0]=u,this.uint16[_+2]=f,this.uint16[_+3]=g,this.uint16[_+4]=m,s}}Oh.prototype.bytesPerElement=12,Pt(Oh,"StructArrayLayout1ul3ui12");class Yd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}Yd.prototype.bytesPerElement=2,Pt(Yd,"StructArrayLayout1ui2");class og extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J){const te=this.length;return this.resize(te+1),this.emplace(te,s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J)}emplace(s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te){const fe=16*s;return this.float32[fe+0]=u,this.float32[fe+1]=f,this.float32[fe+2]=g,this.float32[fe+3]=m,this.float32[fe+4]=_,this.float32[fe+5]=b,this.float32[fe+6]=O,this.float32[fe+7]=D,this.float32[fe+8]=C,this.float32[fe+9]=V,this.float32[fe+10]=L,this.float32[fe+11]=z,this.float32[fe+12]=M,this.float32[fe+13]=j,this.float32[fe+14]=J,this.float32[fe+15]=te,s}}og.prototype.bytesPerElement=64,Pt(og,"StructArrayLayout16f64");class um extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=10*s,C=5*s;return this.uint16[D+0]=u,this.uint16[D+1]=f,this.uint16[D+2]=g,this.uint16[D+3]=m,this.float32[C+2]=_,this.float32[C+3]=b,this.float32[C+4]=O,s}}um.prototype.bytesPerElement=20,Pt(um,"StructArrayLayout4ui3f20");class lg extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.int16[1*s+0]=u,s}}lg.prototype.bytesPerElement=2,Pt(lg,"StructArrayLayout1i2");class Yg extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint8[1*s+0]=u,s}}Yg.prototype.bytesPerElement=1,Pt(Yg,"StructArrayLayout1ub1");class gA extends Ph{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}gA.prototype.size=40;class cm extends Fu{get(s){return new gA(this,s)}}Pt(cm,"CollisionBoxArray");class fl extends Ph{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}fl.prototype.size=60;class Rl extends du{get(s){return new fl(this,s)}}Pt(Rl,"PlacedSymbolArray");class yA extends Ph{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(s){this._structArray.uint32[this._pos4+14]=s}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(s){this._structArray.float32[this._pos4+18]=s}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}yA.prototype.size=80;class AA extends ac{get(s){return new yA(this,s)}}Pt(AA,"SymbolInstanceArray");class vA extends nd{getoffsetX(s){return this.float32[1*s+0]}}Pt(vA,"GlyphOffsetArray");class dm extends Iu{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}Pt(dm,"SymbolLineVertexArray");class hm extends Ph{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}hm.prototype.size=12;class Tl extends Oh{get(s){return new hm(this,s)}}Pt(Tl,"FeatureIndexArray");class Ap extends Wd{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}Pt(Ap,"FillExtrusionCentroidArray");class _A extends Ph{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}_A.prototype.size=6;class wA extends $d{get(s){return new _A(this,s)}}Pt(wA,"FillExtrusionWallArray");const a0=Dn([{name:"a_pos",components:2,type:"Int16"}],4),RA=Dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Gi{constructor(s=[]){this.segments=s}_prepareSegment(s,u,f,g){let m=this.segments[this.segments.length-1];return s>Gi.MAX_VERTEX_ARRAY_LENGTH&&Yr(`Max vertices per segment is ${Gi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!m||m.vertexLength+s>Gi.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==g)&&(m={vertexOffset:u,primitiveOffset:f,vertexLength:0,primitiveLength:0},g!==void 0&&(m.sortKey=g),this.segments.push(m)),m}prepareSegment(s,u,f,g){return this._prepareSegment(s,u.length,f.length,g)}get(){return this.segments}destroy(){for(const s of this.segments)for(const u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,f,g){return new Gi([{vertexOffset:s,primitiveOffset:u,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function Xg(h,s){return 256*(h=Ia(Math.floor(h),0,255))+Ia(Math.floor(s),0,255)}Gi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt(Gi,"SegmentVector");const Jg=Dn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),TA=Dn([{name:"a_dash",components:4,type:"Uint16"}]);class vp{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(s,u,f,g){this.ids.push(ug(s)),this.positions.push(u,f,g)}eachPosition(s,u){const f=ug(s);let g=0,m=this.ids.length-1;for(;g<m;){const _=g+m>>1;this.ids[_]>=f?m=_:g=_+1}for(;this.ids[g]===f;)u(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(s,u){const f=new Float64Array(s.ids),g=new Uint32Array(s.positions);return fm(f,g,0,f.length-1),u&&(u.add(f.buffer),u.add(g.buffer)),{ids:f,positions:g}}static deserialize(s){const u=new vp;let f;u.ids=s.ids,u.positions=s.positions;for(const g of u.ids)g!==f&&u.uniqueIds.push(g),f=g;return u.indexed=!0,u}}function ug(h){const s=+h;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:mo(String(h))}function fm(h,s,u,f){for(;u<f;){const g=h[u+f>>1];let m=u-1,_=f+1;for(;;){do m++;while(h[m]<g);do _--;while(h[_]>g);if(m>=_)break;pm(h,m,_),pm(s,3*m,3*_),pm(s,3*m+1,3*_+1),pm(s,3*m+2,3*_+2)}_-u<f-_?(fm(h,s,u,_),u=_+1):(fm(h,s,_+1,f),f=_)}}function pm(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}Pt(vp,"FeaturePositionMap");class Xd{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,u),this.initialized=!0),!!this.location}set(s,u,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Nc extends Xd{constructor(s){super(s),this.current=0}set(s,u,f){this.fetchUniformLocation(s,u)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class Ss extends Xd{constructor(s){super(s),this.current=0}set(s,u,f){this.fetchUniformLocation(s,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class od extends Xd{constructor(s){super(s),this.current=[0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class _p extends Xd{constructor(s){super(s),this.current=[0,0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class wp extends Xd{constructor(s){super(s),this.current=[0,0,0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class If extends Xd{constructor(s){super(s),this.current=zn.transparent.toRenderColor(null)}set(s,u,f){this.fetchUniformLocation(s,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const Vh=new Float32Array(16);class ld extends Xd{constructor(s){super(s),this.current=Vh}set(s,u,f){if(this.fetchUniformLocation(s,u)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let g=1;g<16;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const Jd=new Float32Array(9),CA=new Float32Array(4);class cg extends Xd{constructor(s){super(s),this.current=CA}set(s,u,f){if(this.fetchUniformLocation(s,u)){for(let g=0;g<4;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function Rp(h){return[Xg(255*h.r,255*h.g),Xg(255*h.b,255*h.a)]}class Lf{constructor(s,u,f,g){this.value=s,this.uniformNames=u.map(m=>`u_${m}`),this.type=f,this.context=g}setUniform(s,u,f,g,m){const _=g.constantOr(this.value);u.set(s,m,_ instanceof zn?_.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):_)}getBinding(s,u){return this.type==="color"?new If(s):new Ss(s)}}class Oc{constructor(s,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,u,f,g,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&u.set(s,m,_)}getBinding(s,u){return u==="u_pattern"||u==="u_dash"?new wp(s):new Ss(s)}}class to{constructor(s,u,f,g){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(m=>({name:`a_${m}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(s,u,f,g,m,_,b){const O=this.paintVertexArray.length,D=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Pn(0,{brightness:_}),u,{},m,g,b):this.expression.kind==="constant"&&this.expression.value,C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:_}),u,{},m,g,b):this.lutExpression.value)==="none";this.paintVertexArray.resize(s),this._setPaintValue(O,s,D,C?null:this.context.lut)}updatePaintArray(s,u,f,g,m,_,b){const O=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:b},f,g,void 0,m):this.expression.kind==="constant"&&this.expression.value,D=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:b}),f,g,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(s,u,O,D?null:this.context.lut)}_setPaintValue(s,u,f,g){if(this.type==="color"){const m=Rp(f.toRenderColor(g));for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=s;m<u;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class rc{constructor(s,u,f,g,m,_){this.expression=s,this.uniformNames=u.map(b=>`u_${b}_t`),this.type=f,this.useIntegerZoom=g,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,u,f,g,m,_,b){const O=this.expression.evaluate(new Pn(this.context.zoom,{brightness:_}),u,{},m,g,b),D=this.expression.evaluate(new Pn(this.context.zoom+1,{brightness:_}),u,{},m,g,b),C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:_}),u,{},m,g,b):this.lutExpression.value)==="none",V=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(V,s,O,D,C?null:this.context.lut)}updatePaintArray(s,u,f,g,m,_,b){const O=this.expression.evaluate({zoom:this.context.zoom,brightness:b},f,g,void 0,m),D=this.expression.evaluate({zoom:this.context.zoom+1,brightness:b},f,g,void 0,m),C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:b}),f,g,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(s,u,O,D,C?null:this.context.lut)}_setPaintValue(s,u,f,g,m){if(this.type==="color"){const _=Rp(f.toRenderColor(m)),b=Rp(f.toRenderColor(m));for(let O=s;O<u;O++)this.paintVertexArray.emplace(O,_[0],_[1],b[0],b[1])}else{for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u,f,g,m){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,b=Ia(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);u.set(s,m,b)}getBinding(s,u){return new Ss(s)}}class rf{constructor(s,u,f,g,m){this.expression=s,this.layerId=m,this.paintVertexAttributes=(f==="array"?TA:Jg).members;for(let _=0;_<u.length;++_);this.paintVertexArray=new g}populatePaintArray(s,u,f,g){const m=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(m,s,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(s,u,f,g,m,_,b){this._setPaintValues(s,u,f.patterns&&f.patterns[this.layerId],_)}_setPaintValues(s,u,f,g){if(!g||!f)return;const m=g[f];if(!m)return;const{tl:_,br:b,pixelRatio:O}=m;for(let D=s;D<u;D++)this.paintVertexArray.emplace(D,_[0],_[1],b[0],b[1],O)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class nc{constructor(s,u,f=()=>!0){this.binders={},this._buffers=[],this.context=u;const g=[];for(const m in s.paint._values){const _=s.paint.get(m);if(m.endsWith("-use-theme")||!f(m)||!(_ instanceof Ul&&Jc(_.property.specification)))continue;const b=Ff(m,s.type),O=_.value,D=_.property.specification.type,C=!!_.property.useIntegerZoom,V=m==="line-dasharray"||m.endsWith("pattern"),L=s.paint.get(`${m}-use-theme`),z=m==="line-dasharray"&&s.layout.get("line-cap").value.kind!=="constant"||L&&L.value.kind!=="constant";if(O.kind!=="constant"||z)if(O.kind==="source"||z||V){const M=Qg(m,D,"source");this.binders[m]=V?new rf(O,b,D,M,s.id):new to(O,b,D,M),g.push(`/a_${m}`)}else{const M=Qg(m,D,"composite");this.binders[m]=new rc(O,b,D,C,u,M),g.push(`/z_${m}`)}else this.binders[m]=V?new Oc(O.value,b):new Lf(O.value,b,D,u),g.push(`/u_${m}`);L&&(this.binders[m].lutExpression=L.value)}this.cacheKey=g.sort().join("")}getMaxValue(s){const u=this.binders[s];return u instanceof to||u instanceof rc?u.maxValue:0}populatePaintArrays(s,u,f,g,m,_,b){for(const O in this.binders){const D=this.binders[O];D.context=this.context,(D instanceof to||D instanceof rc||D instanceof rf)&&D.populatePaintArray(s,u,f,g,m,_,b)}}setConstantPatternPositions(s){for(const u in this.binders){const f=this.binders[u];f instanceof Oc&&f.setConstantPatternPositions(s)}}updatePaintArrays(s,u,f,g,m,_,b,O,D){let C=!1;const V=Object.keys(s),L=V.length!==0&&!O,z=L?V:u.uniqueIds;this.context.lut=m.lut;for(const M in this.binders){const j=this.binders[M];if(j.context=this.context,(j instanceof to||j instanceof rc||j instanceof rf)&&j.expression&&j.expression.kind&&j.expression.kind!=="constant"&&(j.expression.isStateDependent===!0||j.expression.isLightConstant===!1)){const J=m.paint.get(M);j.expression=J.value;for(const te of z){const fe=s[te.toString()];u.eachPosition(te,(he,se,ve)=>{const Ce=g.feature(he);j.updatePaintArray(se,ve,Ce,fe,_,b,D)})}if(!L)for(const te of f.uniqueIds){const fe=s[te.toString()];f.eachPosition(te,(he,se,ve)=>{const Ce=g.feature(he);j.updatePaintArray(se,ve,Ce,fe,_,b,D)})}C=!0}}return C}defines(){const s=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Lf||f instanceof Oc)&&s.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return s}getBinderAttributes(){const s=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof to||f instanceof rc||f instanceof rf)for(let g=0;g<f.paintVertexAttributes.length;g++)s.push(f.paintVertexAttributes[g].name)}return s}getBinderUniforms(){const s=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Lf||f instanceof Oc||f instanceof rc)for(const g of f.uniformNames)s.push(g)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const u=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof Lf||g instanceof Oc||g instanceof rc)for(const m of g.uniformNames)u.push({name:m,property:f,binding:g.getBinding(s,m)})}return u}setUniforms(s,u,f,g,m){for(const{name:_,property:b,binding:O}of f)this.binders[b].setUniform(s,O,m,g.get(b),_)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const u=this.binders[s];(u instanceof to||u instanceof rc||u instanceof rf)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(s){for(const u in this.binders){const f=this.binders[u];(f instanceof to||f instanceof rc||f instanceof rf)&&f.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const u=this.binders[s];(u instanceof to||u instanceof rc||u instanceof rf)&&u.destroy()}}}class zh{constructor(s,u,f=()=>!0){this.programConfigurations={};for(const g of s)this.programConfigurations[g.id]=new nc(g,u,f);this.needsUpload=!1,this._featureMap=new vp,this._featureMapWithoutIds=new vp,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(s,u,f,g,m,_,b,O){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(s,u,g,m,_,b,O);u.id!==void 0?this._featureMap.add(u.id,f,this._bufferOffset,s):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,s),this._idlessCounter+=1),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,f,g,m,_,b){for(const O of f)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(s,this._featureMap,this._featureMapWithoutIds,u,O,g,m,_,b||0)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const SA={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ff(h,s){return SA[h]||[h.replace(`${s}-`,"").replace(/-/g,"_")]}const kf={"line-pattern":{source:Kd,composite:Kd},"fill-pattern":{source:Kd,composite:Kd},"fill-extrusion-pattern":{source:Kd,composite:Kd},"line-dasharray":{source:pp,composite:pp}},Uf={color:{source:af,composite:sd},number:{source:nd,composite:af}};function Qg(h,s,u){const f=kf[h];return f&&f[u]||Uf[s][u]}Pt(Lf,"ConstantBinder"),Pt(Oc,"PatternConstantBinder"),Pt(to,"SourceExpressionBinder"),Pt(rf,"PatternCompositeBinder"),Pt(rc,"CompositeExpressionBinder"),Pt(nc,"ProgramConfiguration",{omit:["_buffers"]}),Pt(zh,"ProgramConfigurationSet");const Cl=Da/Math.PI/2,Dh=5,mm=6,bA=16383,Tp=64,Bf=[Tp,32,16],Wo=-Cl,ic=Cl;function Cp(h,s,u,f=Cl){return u=Ca(u),[h*Math.sin(u)*f,-s*f,h*Math.cos(u)*f]}function Vc(h,s,u){return Cp(Math.cos(Ca(h)),Math.sin(Ca(h)),s,u)}const pl=63710088e-1,ey=2*Math.PI*pl;class Gn{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gn(tn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const u=Math.PI/180,f=this.lat*u,g=s.lat*u,m=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((s.lng-this.lng)*u);return pl*Math.acos(Math.min(m,1))}toBounds(s=0){const u=360*s/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new nf({lng:this.lng-f,lat:this.lat-u},{lng:this.lng+f,lat:this.lat+u})}toEcef(s){return Vc(this.lat,this.lng,Cl+s*Cl/pl)}static convert(s){if(s instanceof Gn)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Gn(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Gn(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class nf{constructor(s,u){if(s)if(u)this.setSouthWest(s).setNorthEast(u);else if(s.length===4){const f=s;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=s;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(s){return this._ne=s instanceof Gn?new Gn(s.lng,s.lat):Gn.convert(s),this}setSouthWest(s){return this._sw=s instanceof Gn?new Gn(s.lng,s.lat):Gn.convert(s),this}extend(s){const u=this._sw,f=this._ne;let g,m;if(s instanceof Gn)g=s,m=s;else{if(!(s instanceof nf))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(nf.convert(s)):this.extend(Gn.convert(s)):typeof s=="object"&&s!==null&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(Gn.convert(s)):this;if(g=s._sw,m=s._ne,!g||!m)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new Gn(g.lng,g.lat),this._ne=new Gn(m.lng,m.lat)),this}getCenter(){return new Gn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gn(this.getWest(),this.getNorth())}getSouthEast(){return new Gn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:u,lat:f}=Gn.convert(s);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(s){if(s)return s instanceof nf?s:new nf(s)}}const xA=0,PA=25.5;function Sp(h){return ey*Math.cos(h*Math.PI/180)}function Sl(h){return(180+h)/360}function Li(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function Yo(h,s){return h/Sp(s)}function Uu(h){return 360*h-180}function Ei(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function ty(h,s){return h*Sp(Ei(s))}const Bu=85.051129;function EA(h){return Math.cos(Ca(Ia(h,-85.051129,Bu)))}function sf(h,s){const u=Ia(s,xA,PA),f=Math.pow(2,u);return EA(h)*ey/(512*f)}function Xo(h){return 1/Math.cos(h*Math.PI/180)}function y(h,s=0){const u=Math.exp(Math.PI*(1-(h.y+s/Da)/(1<<h.z)*2));return 80150034*u/(u*u+1)/Da/(1<<h.z)}class o{constructor(s,u,f=0){this.x=+s,this.y=+u,this.z=+f}static fromLngLat(s,u=0){const f=Gn.convert(s);return new o(Sl(f.lng),Li(f.lat),Yo(u,f.lat))}toLngLat(){return new Gn(Uu(this.x),Ei(this.y))}toAltitude(){return ty(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ey*Xo(Ei(this.y))}}function d(h,s,u,f,g,m,_,b,O){const D=(s+f)/2,C=(u+g)/2,V=new Nt(D,C);b(V),function(L,z,M,j,J,te){const fe=M-J,he=j-te;return Math.abs((j-z)*fe-(M-L)*he)/Math.hypot(fe,he)}(V.x,V.y,m.x,m.y,_.x,_.y)>=O?(d(h,s,u,D,C,m,V,b,O),d(h,D,C,f,g,V,_,b,O)):h.push(_)}function A(h,s,u){let f=h[0],g=f.x,m=f.y;s(f);const _=[f];for(let b=1;b<h.length;b++){const O=h[b],{x:D,y:C}=O;s(O),d(_,g,m,D,C,f,O,s,u),g=D,m=C,f=O}return _}function T(h,s,u,f){if(f(s,u)){const g=s.add(u)._mult(.5);T(h,s,g,f),T(h,g,u,f)}else h.push(u)}function S(h,s){let u=h[0];const f=[u];for(let g=1;g<h.length;g++){const m=h[g];T(f,u,m,s),u=m}return f}const E=Math.pow(2,14)-1,F=-E-1;function q(h,s){const u=Math.round(h.x*s),f=Math.round(h.y*s);return h.x=Ia(u,F,E),h.y=Ia(f,F,E),(u<h.x||u>h.x+1||f<h.y||f>h.y+1)&&Yr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),h}function K(h,s,u){const f=h.loadGeometry(),g=h.extent,m=Da/g;if(s&&u&&u.projection.isReprojectedInTileSpace){const _=1<<s.z,{scale:b,x:O,y:D,projection:C}=u,V=L=>{const z=Uu((s.x+L.x/g)/_),M=Ei((s.y+L.y/g)/_),j=C.project(z,M);L.x=(j.x*b-O)*g,L.y=(j.y*b-D)*g};for(let L=0;L<f.length;L++)if(h.type!==1)f[L]=A(f[L],V,1);else{const z=[];for(const M of f[L])M.x<0||M.x>=g||M.y<0||M.y>=g||(V(M),z.push(M));f[L]=z}}for(const _ of f)for(const b of _)q(b,m);return f}function Y(h,s){return{type:h.type,id:h.id,properties:h.properties,geometry:s?K(h):[]}}function ae(h,s,u,f,g){h.emplaceBack(2*s+(f+1)/2,2*u+(g+1)/2)}function re(h,s,u){h.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}class me{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new Iu,this.indexArray=new Ls,this.segments=new Gi,this.programConfigurations=new zh(s.layers,{zoom:s.zoom,lut:s.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}updateFootprints(s,u){}populate(s,u,f,g){const m=this.layers[0],_=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:D,id:C,index:V,sourceLayerIndex:L}of s){const z=this.layers[0]._featureFilter.needGeometry,M=Y(D,z);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),M,f))continue;const j=b?b.evaluate(M,{},f):void 0,J={id:C,properties:D.properties,type:D.type,sourceLayerIndex:L,index:V,geometry:z?M.geometry:K(D,f,g),patterns:{},sortKey:j};_.push(J)}b&&_.sort((D,C)=>D.sortKey-C.sortKey);let O=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new mp,O=g.projection);for(const D of _){const{geometry:C,index:V,sourceLayerIndex:L}=D,z=s[V].feature;this.addFeature(D,C,V,u.availableImages,f,O,u.brightness),u.featureIndex.insert(z,C,V,L,this.index)}}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,a0.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,RA.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,u,f,g,m,_,b){for(const O of u)for(const D of O){const C=D.x,V=D.y;if(C<0||C>=Da||V<0||V>=Da)continue;if(_){const M=_.projectTilePoint(C,V,m),j=_.upVector(m,C,V),J=this.globeExtVertexArray;re(J,M,j),re(J,M,j),re(J,M,j),re(J,M,j)}const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),z=L.vertexLength;ae(this.layoutVertexArray,C,V,-1,-1),ae(this.layoutVertexArray,C,V,1,-1),ae(this.layoutVertexArray,C,V,1,1),ae(this.layoutVertexArray,C,V,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+2,z+3),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},g,m,b)}}function be(h,s){for(let u=0;u<h.length;u++)if(ot(s,h[u]))return!0;for(let u=0;u<s.length;u++)if(ot(h,s[u]))return!0;return!!Ke(h,s)}function Te(h,s,u){return!!ot(h,s)||!!at(s,h,u)}function ze(h,s){if(h.length===1)return st(s,h[0]);for(let u=0;u<s.length;u++){const f=s[u];for(let g=0;g<f.length;g++)if(ot(h,f[g]))return!0}for(let u=0;u<h.length;u++)if(st(s,h[u]))return!0;for(let u=0;u<s.length;u++)if(Ke(h,s[u]))return!0;return!1}function Fe(h,s,u){if(h.length>1){if(Ke(h,s))return!0;for(let f=0;f<s.length;f++)if(at(s[f],h,u))return!0}for(let f=0;f<h.length;f++)if(at(h[f],s,u))return!0;return!1}function Ke(h,s){if(h.length===0||s.length===0)return!1;for(let u=0;u<h.length-1;u++){const f=h[u],g=h[u+1];for(let m=0;m<s.length-1;m++)if(nt(f,g,s[m],s[m+1]))return!0}return!1}function nt(h,s,u,f){return Pr(h,u,f)!==Pr(s,u,f)&&Pr(h,s,u)!==Pr(h,s,f)}function at(h,s,u){const f=u*u;if(s.length===1)return h.distSqr(s[0])<f;for(let g=1;g<s.length;g++)if(pt(h,s[g-1],s[g])<f)return!0;return!1}function pt(h,s,u){const f=s.distSqr(u);if(f===0)return h.distSqr(s);const g=((h.x-s.x)*(u.x-s.x)+(h.y-s.y)*(u.y-s.y))/f;return h.distSqr(g<0?s:g>1?u:u.sub(s)._mult(g)._add(s))}function st(h,s){let u,f,g,m=!1;for(let _=0;_<h.length;_++){u=h[_];for(let b=0,O=u.length-1;b<u.length;O=b++)f=u[b],g=u[O],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(m=!m)}return m}function ot(h,s){let u=!1;for(let f=0,g=h.length-1;f<h.length;g=f++){const m=h[f],_=h[g];m.y>s.y!=_.y>s.y&&s.x<(_.x-m.x)*(s.y-m.y)/(_.y-m.y)+m.x&&(u=!u)}return u}function lt(h,s,u,f,g){for(const _ of h)if(s<=_.x&&u<=_.y&&f>=_.x&&g>=_.y)return!0;const m=[new Nt(s,u),new Nt(s,g),new Nt(f,g),new Nt(f,u)];if(h.length>2){for(const _ of m)if(ot(h,_))return!0}for(let _=0;_<h.length-1;_++)if(vt(h[_],h[_+1],m))return!0;return!1}function vt(h,s,u){const f=u[0],g=u[2];if(h.x<f.x&&s.x<f.x||h.x>g.x&&s.x>g.x||h.y<f.y&&s.y<f.y||h.y>g.y&&s.y>g.y)return!1;const m=Pr(h,s,u[0]);return m!==Pr(h,s,u[1])||m!==Pr(h,s,u[2])||m!==Pr(h,s,u[3])}function Tt(h,s,u,f,g,m){let _=s.y-h.y,b=h.x-s.x;if(m=m||0){const O=_*_+b*b;if(O===0)return!0;const D=Math.sqrt(O);_/=D,b/=D}return!((u.x-h.x)*_+(u.y-h.y)*b-m<0||(f.x-h.x)*_+(f.y-h.y)*b-m<0||(g.x-h.x)*_+(g.y-h.y)*b-m<0)}function Qt(h,s,u,f,g,m,_){return!(Tt(h,s,f,g,m,_)||Tt(s,u,f,g,m,_)||Tt(u,h,f,g,m,_)||Tt(f,g,h,s,u,_)||Tt(g,m,h,s,u,_)||Tt(m,f,h,s,u,_))}function Ut(h,s,u){const f=s.paint.get(h).value;return f.kind==="constant"?f.value:u.programConfigurations.get(s.id).getMaxValue(h)}function ia(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function da(h,s,u,f,g){if(!s[0]&&!s[1])return h;const m=Nt.convert(s)._mult(g);u==="viewport"&&m._rotate(-f);const _=[];for(let b=0;b<h.length;b++)_.push(h[b].sub(m));return _}function xa(h,s,u,f){const g=Nt.convert(h)._mult(f);return s==="viewport"&&g._rotate(-u),g}let kt,la;Pt(me,"CircleBucket",{omit:["layers"]});var zt,ua={exports:{}},ta=(zt||(zt=1,function(h,s){(function(u){function f(m,_,b){var O=g(256*m,256*(_=Math.pow(2,b)-_-1),b),D=g(256*(m+1),256*(_+1),b);return O[0]+","+O[1]+","+D[0]+","+D[1]}function g(m,_,b){var O=2*Math.PI*6378137/256/Math.pow(2,b);return[m*O-2*Math.PI*6378137/2,_*O-2*Math.PI*6378137/2]}u.getURL=function(m,_,b,O,D,C){return C=C||{},m+"?"+["bbox="+f(b,O,D),"format="+(C.format||"image/png"),"service="+(C.service||"WMS"),"version="+(C.version||"1.1.1"),"request="+(C.request||"GetMap"),"srs="+(C.srs||"EPSG:3857"),"width="+(C.width||256),"height="+(C.height||256),"layers="+_].join("&")},u.getTileBBox=f,u.getMercCoords=g,Object.defineProperty(u,"__esModule",{value:!0})})(s)}(0,ua.exports)),ua.exports);class ha{constructor(s,u,f){this.z=s,this.x=u,this.y=f,this.key=ka(0,s,s,u,f)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u){const f=ta.getTileBBox(this.x,this.y,this.z),g=function(m,_,b){let O,D="";for(let C=m;C>0;C--)O=1<<C-1,D+=(_&O?1:0)+(b&O?2:0);return D}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xt{constructor(s,u){this.wrap=s,this.canonical=u,this.key=ka(s,u.z,u.z,u.x,u.y)}}class ga{constructor(s,u,f,g,m){this.overscaledZ=s,this.wrap=u,this.canonical=new ha(f,+g,+m),this.key=u===0&&s===f?this.canonical.key:ka(u,s,f,g,m)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const u=this.canonical.z-s;return s>this.canonical.z?new ga(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ga(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u=!0){if(this.overscaledZ===s&&u)return this.key;if(s>this.canonical.z)return ka(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-s;return ka(this.wrap*+u,s,s,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.z<this.canonical.z&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new ga(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new ga(u,this.wrap,u,f,g),new ga(u,this.wrap,u,f+1,g),new ga(u,this.wrap,u,f,g+1),new ga(u,this.wrap,u,f+1,g+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ga(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ga(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ka(h,s,u,f,g){const m=1<<Math.min(u,22);let _=m*(g%m)+f%m;return h&&u<22&&(_+=m*m*((h<0?-2*h-1:2*h)%(1<<2*(22-u)))),16*(32*_+u)+(s-u)}const Ua=[h=>{let s=h.canonical.x-1,u=h.wrap;return s<0&&(s=(1<<h.canonical.z)-1,u--),new ga(h.overscaledZ,u,h.canonical.z,s,h.canonical.y)},h=>{let s=h.canonical.x+1,u=h.wrap;return s===1<<h.canonical.z&&(s=0,u++),new ga(h.overscaledZ,u,h.canonical.z,s,h.canonical.y)},h=>new ga(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,(h.canonical.y===0?1<<h.canonical.z:h.canonical.y)-1),h=>new ga(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y===(1<<h.canonical.z)-1?0:h.canonical.y+1)];Pt(ha,"CanonicalTileID"),Pt(ga,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Va=Dn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:dr}=Va,qr=Dn([{name:"a_pos_3",components:3,type:"Int16"}]);var Rr=Dn([{name:"a_pos",type:"Int16",components:2}]);class kr{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,f){const g=Ae.vec2.dot(u,this.dir);if(Math.abs(g)<1e-6)return!1;const m=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1])/g;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,!0}}class zr{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,f){const g=Ae.vec3.dot(u,this.dir);if(Math.abs(g)<1e-6)return!1;const m=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1]+(s[2]-this.pos[2])*u[2])/g;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,f[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(s,u,f){if(Ae.vec3.equals(this.pos,s)||u===0)return f[0]=f[1]=f[2]=0,!1;const[g,m,_]=this.dir,b=this.pos[0]-s[0],O=this.pos[1]-s[1],D=this.pos[2]-s[2],C=g*g+m*m+_*_,V=2*(b*g+O*m+D*_),L=V*V-4*C*(b*b+O*O+D*D-u*u);if(L<0){const z=Math.max(-V/2,0),M=b+g*z,j=O+m*z,J=D+_*z,te=Math.hypot(M,j,J);return f[0]=M*u/te,f[1]=j*u/te,f[2]=J*u/te,!1}{const z=(-V-Math.sqrt(L))/(2*C);if(z<0){const M=Math.hypot(b,O,D);return f[0]=b*u/M,f[1]=O*u/M,f[2]=D*u/M,!1}return f[0]=b+g*z,f[1]=O+m*z,f[2]=D+_*z,!0}}}class Mr{constructor(s,u,f,g,m){this.TL=s,this.TR=u,this.BR=f,this.BL=g,this.horizon=m}static fromInvProjectionMatrix(s,u,f){const g=[-1,1,1],m=[1,1,1],_=[1,-1,1],b=[-1,-1,1],O=Ae.vec3.transformMat4(g,g,s),D=Ae.vec3.transformMat4(m,m,s),C=Ae.vec3.transformMat4(_,_,s),V=Ae.vec3.transformMat4(b,b,s);return new Mr(O,D,C,V,u/f)}}function Hr(h,s,u){let f=1/0,g=-1/0;const m=[];for(const _ of h){Ae.vec3.sub(m,_,s);const b=Ae.vec3.dot(m,u);f=Math.min(f,b),g=Math.max(g,b)}return[f,g]}function jr(h,s){let u=!0;for(let f=0;f<h.planes.length;f++){const g=h.planes[f];let m=0;for(let _=0;_<s.length;_++)m+=Ae.vec3.dot(g,s[_])+g[3]>=0;if(m===0)return 0;m!==s.length&&(u=!1)}return u?2:1}function yr(h,s){for(const u of h.projections){const f=Hr(s,h.points[0],u.axis);if(u.projection[1]<f[0]||u.projection[0]>f[1])return 0}return 1}function pn(h,s){let u=0;const f=[0,0,0,0];for(let g=0;g<h.length;g++)f[0]=h[g][0],f[1]=h[g][1],f[2]=h[g][2],f[3]=1,Ae.vec4.dot(f,s)>=0&&u++;return u}class Or{constructor(s,u){this.points=s||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=rr.fromPoints(this.points),this.projections=[],this.frustumEdges=[Ae.vec3.sub([],this.points[2],this.points[3]),Ae.vec3.sub([],this.points[0],this.points[3]),Ae.vec3.sub([],this.points[4],this.points[0]),Ae.vec3.sub([],this.points[5],this.points[1]),Ae.vec3.sub([],this.points[6],this.points[2]),Ae.vec3.sub([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const g=[0,-f[2],f[1]],m=[f[2],0,-f[0]];this.projections.push({axis:g,projection:Hr(this.points,this.points[0],g)}),this.projections.push({axis:m,projection:Hr(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(s,u,f,g){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const C=Ae.vec4.transformMat4([],D,s),V=1/C[3]/u*m;return Ae.vec4.mul(C,C,[V,V,g?1/C[3]:V,V])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const C=Ae.vec3.sub([],_[D[0]],_[D[1]]),V=Ae.vec3.sub([],_[D[2]],_[D[1]]),L=Ae.vec3.normalize([],Ae.vec3.cross([],C,V)),z=-Ae.vec3.dot(L,_[D[1]]);return L.concat(z)}),O=[];for(let D=0;D<_.length;D++)O.push([_[D][0],_[D][1],_[D][2]]);return new Or(O,b)}intersectsPrecise(s,u,f){for(let g=0;g<u.length;g++)if(!pn(s,u[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!pn(s,this.planes[g]))return 0;for(const g of f)for(const m of this.frustumEdges){const _=Ae.vec3.cross([],g,m),b=Ae.vec3.length(_);if(b===0)continue;Ae.vec3.scale(_,_,1/b);const O=Hr(this.points,this.points[0],_),D=Hr(s,this.points[0],_);if(O[0]>D[1]||D[0]>O[1])return 0}return 1}containsPoint(s){for(const u of this.planes){const f=u[3];if(Ae.vec3.dot([u[0],u[1],u[2]],s)+f<0)return!1}return!0}}class rr{static fromPoints(s){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of s)Ae.vec3.min(u,u,g),Ae.vec3.max(f,f,g);return new rr(u,f)}static fromTileIdAndHeight(s,u,f){const g=1<<s.canonical.z,m=s.canonical.x,_=s.canonical.y;return new rr([m/g,_/g,u],[(m+1)/g,(_+1)/g,f])}static applyTransform(s,u){const f=s.getCorners();for(let g=0;g<f.length;++g)Ae.vec3.transformMat4(f[g],f[g],u);return rr.fromPoints(f)}static applyTransformFast(s,u){const f=[u[12],u[13],u[14]],g=[...f];for(let m=0;m<3;m++)for(let _=0;_<3;_++){const b=u[4*_+m],O=b*s.min[_],D=b*s.max[_];f[m]+=Math.min(O,D),g[m]+=Math.max(O,D)}return new rr(f,g)}static projectAabbCorners(s,u){const f=s.getCorners();for(let g=0;g<f.length;++g)Ae.vec3.transformMat4(f[g],f[g],u);return f}constructor(s,u){this.min=s,this.max=u,this.center=Ae.vec3.scale([],Ae.vec3.add([],this.min,this.max),.5)}quadrant(s){const u=[s%2==0,s<2],f=Ae.vec3.clone(this.min),g=Ae.vec3.clone(this.max);for(let m=0;m<u.length;m++)f[m]=u[m]?this.min[m]:this.center[m],g[m]=u[m]?this.center[m]:this.max[m];return g[2]=this.max[2],new rr(f,g)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,u=this.max;return[[s[0],s[1],s[2]],[u[0],s[1],s[2]],[u[0],u[1],s[2]],[s[0],u[1],s[2]],[s[0],s[1],u[2]],[u[0],s[1],u[2]],[u[0],u[1],u[2]],[s[0],u[1],u[2]]]}intersects(s){return this.intersectsAabb(s.bounds)?jr(s,this.getCorners()):0}intersectsFlat(s){return this.intersectsAabb(s.bounds)?jr(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(s,u){return u||this.intersects(s)?yr(s,this.getCorners()):0}intersectsPreciseFlat(s,u){return u||this.intersectsFlat(s)?yr(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(s){for(let u=0;u<3;++u)if(this.min[u]>s.max[u]||s.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(s){return!(this.min[0]>s.max[0]||s.min[0]>this.max[0]||this.min[1]>s.max[1]||s.min[1]>this.max[1])}encapsulate(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s.min[u]),this.max[u]=Math.max(this.max[u],s.max[u])}encapsulatePoint(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s[u]),this.max[u]=Math.max(this.max[u],s[u])}closestPoint(s){return[Math.max(Math.min(this.max[0],s[0]),this.min[0]),Math.max(Math.min(this.max[1],s[1]),this.min[1]),Math.max(Math.min(this.max[2],s[2]),this.min[2])]}}function mn(h){return h*Cl/pl}Pt(rr,"Aabb");const Xn=[new rr([Wo,Wo,Wo],[ic,ic,ic]),new rr([Wo,Wo,Wo],[0,0,ic]),new rr([0,Wo,Wo],[ic,0,ic]),new rr([Wo,0,Wo],[0,ic,ic]),new rr([0,0,Wo],[ic,ic,ic])];function vn(h,s,u,f=!0){const g=Ae.vec3.scale([],h._camera.position,h.worldSize),m=[s,u,1,1];Ae.vec4.transformMat4(m,m,h.pixelMatrixInverse),Ae.vec4.scale(m,m,1/m[3]);const _=Ae.vec3.sub([],m,g),b=Ae.vec3.normalize([],_),O=h.globeMatrix,D=[O[12],O[13],O[14]],C=Ae.vec3.sub([],D,g),V=Ae.vec3.length(C),L=Ae.vec3.normalize([],C),z=h.worldSize/(2*Math.PI),M=Ae.vec3.dot(L,b),j=Math.asin(z/V);if(j<Math.acos(M)){if(!f)return null;const gt=[],tt=[];Ae.vec3.scale(gt,b,V/M),Ae.vec3.normalize(tt,Ae.vec3.sub(tt,gt,C)),Ae.vec3.normalize(b,Ae.vec3.add(b,C,Ae.vec3.scale(b,tt,Math.tan(j)*V)))}const J=[];new zr(g,b).closestPointOnSphere(D,z,J);const te=Ae.vec3.normalize([],mr(O,0)),fe=Ae.vec3.normalize([],mr(O,1)),he=Ae.vec3.normalize([],mr(O,2)),se=Ae.vec3.dot(te,J),ve=Ae.vec3.dot(fe,J),Ce=Ae.vec3.dot(he,J),Ve=za(Math.asin(-ve/z));let et=za(Math.atan2(se,Ce));et=h.center.lng+function(gt,tt){const _t=(tt-gt+180)%360-180;return _t<-180?_t+360:_t}(h.center.lng,et);const Ye=Sl(et),Xe=Ia(Li(Ve),0,1);return new o(Ye,Xe)}class kn{constructor(s,u,f){this.a=Ae.vec3.sub([],s,f),this.b=Ae.vec3.sub([],u,f),this.center=f;const g=Ae.vec3.normalize([],this.a),m=Ae.vec3.normalize([],this.b);this.angle=Math.acos(Ae.vec3.dot(g,m))}}function ns(h,s){if(h.angle===0)return null;let u;return u=h.a[s]===0?1/h.angle*.5*Math.PI:1/h.angle*Math.atan(h.b[s]/h.a[s]/Math.sin(h.angle)-1/Math.tan(h.angle)),u<0||u>1?null:function(f,g,m,_){const b=Math.sin(m);return f*(Math.sin((1-_)*m)/b)+g*(Math.sin(_*m)/b)}(h.a[s],h.b[s],h.angle,Ia(u,0,1))+h.center[s]}function _s(h){if(h.z<=1)return Xn[h.z+2*h.y+h.x];const s=di(Vn(h));return rr.fromPoints(s)}function co(h,s,u){return Ae.vec3.scale(h,h,1-u),Ae.vec3.scaleAndAdd(h,h,s,u)}function ao(h,s,u){for(const f of h)Ae.vec3.transformMat4(f,f,s),Ae.vec3.scale(f,f,u)}function Ro(h,s,u,f){const g=s/h.worldSize,m=h.globeMatrix;if(u.z<=1){const Ye=_s(u).getCorners();return ao(Ye,m,g),rr.fromPoints(Ye)}const _=Vn(u,f),b=di(_,Cl+mn(h._tileCoverLift));ao(b,m,g);const O=Number.MAX_VALUE,D=[-O,-O,-O],C=[O,O,O];if(_.contains(h.center)){for(const gt of b)Ae.vec3.min(C,C,gt),Ae.vec3.max(D,D,gt);D[2]=0;const Ye=h.point,Xe=[Ye.x*g,Ye.y*g,0];return Ae.vec3.min(C,C,Xe),Ae.vec3.max(D,D,Xe),new rr(C,D)}if(h._tileCoverLift>0){for(const Ye of b)Ae.vec3.min(C,C,Ye),Ae.vec3.max(D,D,Ye);return new rr(C,D)}const V=[m[12]*g,m[13]*g,m[14]*g],L=_.getCenter(),z=Ia(h.center.lat,-85.051129,Bu),M=Ia(L.lat,-85.051129,Bu),j=Sl(h.center.lng),J=Li(z);let te=j-Sl(L.lng);const fe=J-Li(M);te>.5?te-=1:te<-.5&&(te+=1);let he=0;if(Math.abs(te)>Math.abs(fe))he=te>=0?1:3;else{he=fe>=0?0:2;const Ye=[m[4]*g,m[5]*g,m[6]*g],Xe=-Math.sin(Ca(fe>=0?_.getSouth():_.getNorth()))*Cl;Ae.vec3.scaleAndAdd(V,V,Ye,Xe)}const se=b[he],ve=b[(he+1)%4],Ce=new kn(se,ve,V),Ve=[ns(Ce,0)||se[0],ns(Ce,1)||se[1],ns(Ce,2)||se[2]],et=Gl(h.zoom);if(et>0){const Ye=function({x:gt,y:tt,z:_t},xt,Ct,Mt,Ot){const jt=1/(1<<_t);let Ft=gt*jt,$t=Ft+jt,_a=tt*jt,ya=_a+jt,Qa=0;const Na=(Ft+$t)/2-Mt;return Na>.5?Qa=-1:Na<-.5&&(Qa=1),Ft=((Ft+Qa)*xt-(Mt*=xt))*Ct+Mt,$t=(($t+Qa)*xt-Mt)*Ct+Mt,_a=(_a*xt-(Ot*=xt))*Ct+Ot,ya=(ya*xt-Ot)*Ct+Ot,[[Ft,ya,0],[$t,ya,0],[$t,_a,0],[Ft,_a,0]]}(u,s,h._pixelsPerMercatorPixel,j,J);for(let gt=0;gt<b.length;gt++)co(b[gt],Ye[gt],et);const Xe=Ae.vec3.add([],Ye[he],Ye[(he+1)%4]);Ae.vec3.scale(Xe,Xe,.5),co(Ve,Xe,et)}for(const Ye of b)Ae.vec3.min(C,C,Ye),Ae.vec3.max(D,D,Ye);return C[2]=Math.min(se[2],ve[2]),Ae.vec3.min(C,C,Ve),Ae.vec3.max(D,D,Ve),new rr(C,D)}function Vn({x:h,y:s,z:u},f=!1){const g=1/(1<<u),m=new Gn(Uu(h*g),s===(1<<u)-1&&f?-90:Ei((s+1)*g)),_=new Gn(Uu((h+1)*g),s===0&&f?90:Ei(s*g));return new nf(m,_)}function di(h,s=Cl){const u=Ca(h.getNorth()),f=Ca(h.getSouth()),g=Math.cos(u),m=Math.cos(f),_=Math.sin(u),b=Math.sin(f),O=h.getWest(),D=h.getEast();return[Cp(m,b,O,s),Cp(m,b,D,s),Cp(g,_,D,s),Cp(g,_,O,s)]}function Bn(h,s,u,f){const g=1<<u.z,m=(h/Da+u.x)/g;return Vc(Ei((s/Da+u.y)/g),Uu(m),f)}function fi({min:h,max:s}){return bA/Math.max(s[0]-h[0],s[1]-h[1],s[2]-h[2])}const To=new Float64Array(16);function Ni(h){const s=fi(h),u=Ae.mat4.fromScaling(To,[s,s,s]);return Ae.mat4.translate(u,u,Ae.vec3.negate([],h.min))}function ps(h){const s=Ae.mat4.fromTranslation(To,h.min),u=1/fi(h);return Ae.mat4.scale(s,s,[u,u,u])}function zc(h){const s=Da/(2*Math.PI);return h/(2*Math.PI)/s}function Jo(h,s){return Da/(512*Math.pow(2,h))*fi(_s(s))}function hu(h,s,u,f,g){const m=zc(u),_=[h,s,-u/(2*Math.PI)],b=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.translate(b,b,_),Ae.mat4.scale(b,b,[m,m,m]),Ae.mat4.rotateX(b,b,Ca(-g)),Ae.mat4.rotateY(b,b,Ca(-f)),b}function Gl(h){return Fr(Dh,mm,h)}function sc(h,s){const u=Vc(s.lat,s.lng),f=function(m){const _=Vc(m._center.lat,m._center.lng),b=Ae.vec3.fromValues(0,1,0);let O=Ae.vec3.cross([],b,_);const D=Ae.mat4.fromRotation([],-m.angle,_);O=Ae.vec3.transformMat4(O,O,D),Ae.mat4.fromRotation(D,-m._pitch,O);const C=Ae.vec3.normalize([],_);return Ae.vec3.scale(C,C,mn(m.cameraToCenterDistance/m.pixelsPerMeter)),Ae.vec3.transformMat4(C,C,D),Ae.vec3.add([],_,C)}(h),g=Ae.vec3.subtract([],f,u);return Ae.vec3.angle(g,u)}function bl(h,s){return sc(h,s)>Math.PI/2*1.01}const Qd=Ca(85),Co=Math.cos(Qd),Mh=Math.sin(Qd),Zl=Ae.mat4.create(),bp=h=>{const s=[];return h.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),h.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s};function gm(h,s,u,f,g,m,_,b,O){if(m&&h.queryGeometry.isAboveHorizon)return!1;m&&(O*=h.pixelToTileUnitsFactor);const D=h.tileID.canonical,C=u.projection.upVectorScale(D,u.center.lat,u.worldSize).metersToTile;for(const V of s)for(const L of V){const z=L.add(b),M=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(z.x,z.y,!0):0,j=u.projection.projectTilePoint(z.x,z.y,D);if(M>0){const he=u.projection.upVector(D,z.x,z.y);j.x+=he[0]*C*M,j.y+=he[1]*C*M,j.z+=he[2]*C*M}const J=m?z:ay(j.x,j.y,j.z,f),te=m?h.tilespaceRays.map(he=>r0(he,M)):h.queryGeometry.screenGeometry,fe=Ae.vec4.transformMat4([],[j.x,j.y,j.z,1],f);if(!_&&m?O*=fe[3]/u.cameraToCenterDistance:_&&!m&&(O*=u.cameraToCenterDistance/fe[3]),m){const he=Ei((L.y/Da+D.y)/(1<<D.z));O/=u.projection.pixelsPerMeter(he,1)/Yo(1,he)}if(Te(te,J,O))return!0}return!1}function ay(h,s,u,f){const g=Ae.vec4.transformMat4([],[h,s,u,1],f);return new Nt(g[0]/g[3],g[1]/g[3])}const SC=Ae.vec3.fromValues(0,0,0),xp=Ae.vec3.fromValues(0,0,1);function r0(h,s){const u=Ae.vec3.create();return SC[2]=s,h.intersectsPlane(SC,xp,u),new Nt(u[0],u[1])}class n0 extends me{}let dg,O1,V1,z1;function i0(h,{width:s,height:u},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==s*u*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(s*u*f);return h.width=s,h.height=u,h.data=g,h}function s0(h,s,u){const{width:f,height:g}=s;f===h.width&&g===h.height||(D1(h,s,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,f),height:Math.min(h.height,g)},u,null),h.width=f,h.height=g,h.data=s.data)}function D1(h,s,u,f,g,m,_,b){if(g.width===0||g.height===0)return s;if(g.width>h.width||g.height>h.height||u.x>h.width-g.width||u.y>h.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>s.width||g.height>s.height||f.x>s.width-g.width||f.y>s.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const O=h.data,D=s.data,C=m===4&&b;for(let V=0;V<g.height;V++){const L=((u.y+V)*h.width+u.x)*m,z=((f.y+V)*s.width+f.x)*m;if(C)for(let M=0;M<g.width;M++){const j=L+M*m+3,J=z+M*m;D[J+0]=255,D[J+1]=255,D[J+2]=255,D[J+3]=O[j]}else if(_)for(let M=0;M<g.width;M++){const j=L+M*m,J=z+M*m,te=O[j+3],fe=new zn(O[j+0]/255*te,O[j+1]/255*te,O[j+2]/255*te,te).toRenderColor(_).toArray();D[J+0]=fe[0],D[J+1]=fe[1],D[J+2]=fe[2],D[J+3]=fe[3]}else for(let M=0;M<g.width*m;M++)D[z+M]=O[L+M]}return s}Pt(n0,"HeatmapBucket",{omit:["layers"]});class ym{constructor(s,u){i0(this,s,1,u)}resize(s){s0(this,new ym(s),1)}clone(){return new ym({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,f,g,m){D1(s,u,f,g,m,1,null)}}class xl{constructor(s,u){i0(this,s,4,u)}resize(s){s0(this,new xl(s),4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new xl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,f,g,m,_,b){D1(s,u,f,g,m,4,_,b)}}class M1{constructor(s,u){this.width=s.width,this.height=s.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function ry(h){const s={},u=h.resolution||256,f=h.clips?h.clips.length:1,g=h.image||new xl({width:u,height:f}),m=(_,b,O)=>{s[h.evaluationKey]=O;const D=h.expression.evaluate(s);D&&(g.data[_+b+0]=Math.floor(255*D.r/D.a),g.data[_+b+1]=Math.floor(255*D.g/D.a),g.data[_+b+2]=Math.floor(255*D.b/D.a),g.data[_+b+3]=Math.floor(255*D.a))};if(h.clips)for(let _=0,b=0;_<f;++_,b+=4*u)for(let O=0,D=0;O<u;O++,D+=4){const C=O/(u-1),{start:V,end:L}=h.clips[_];m(b,D,V*(1-C)+L*C)}else for(let _=0,b=0;_<u;_++,b+=4)m(0,b,_/(u-1));return g}Pt(ym,"AlphaImage"),Pt(xl,"RGBAImage");const ny=Dn([{name:"a_pos",components:2,type:"Int16"}],4),o0=Dn([{name:"a_road_z_offset",components:1,type:"Float32"}],4),bC=Dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),xC=Dn([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function NA(h,s,u=2){const f=s&&s.length,g=f?s[0]*u:h.length;let m=I1(h,0,g,u,!0);const _=[];if(!m||m.next===m.prev)return _;let b,O,D;if(f&&(m=function(C,V,L,z){const M=[];for(let j=0,J=V.length;j<J;j++){const te=I1(C,V[j]*z,j<J-1?V[j+1]*z:C.length,z,!1);te===te.next&&(te.steiner=!0),M.push(oy(te))}M.sort(uE);for(let j=0;j<M.length;j++)L=cE(M[j],L);return L}(h,s,m,u)),h.length>80*u){b=1/0,O=1/0;let C=-1/0,V=-1/0;for(let L=u;L<g;L+=u){const z=h[L],M=h[L+1];z<b&&(b=z),M<O&&(O=M),z>C&&(C=z),M>V&&(V=M)}D=Math.max(C-b,V-O),D=D!==0?32767/D:0}return iy(m,_,u,b,O,D,0),_}function I1(h,s,u,f,g){let m;if(g===function(_,b,O,D){let C=0;for(let V=b,L=O-D;V<O;V+=D)C+=(_[L]-_[V])*(_[V+1]+_[L+1]),L=V;return C}(h,s,u,f)>0)for(let _=s;_<u;_+=f)m=k1(_/f|0,h[_],h[_+1],m);else for(let _=u-f;_>=s;_-=f)m=k1(_/f|0,h[_],h[_+1],m);return m&&jf(m,m.next)&&(OA(m),m=m.next),m}function Ih(h,s){if(!h)return h;s||(s=h);let u,f=h;do if(u=!1,f.steiner||!jf(f,f.next)&&ho(f.prev,f,f.next)!==0)f=f.next;else{if(OA(f),f=s=f.prev,f===f.next)break;u=!0}while(u||f!==s);return s}function iy(h,s,u,f,g,m,_){if(!h)return;!_&&m&&function(O,D,C,V){let L=O;do L.z===0&&(L.z=sy(L.x,L.y,D,C,V)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next;while(L!==O);L.prevZ.nextZ=null,L.prevZ=null,function(z){let M,j=1;do{let J,te=z;z=null;let fe=null;for(M=0;te;){M++;let he=te,se=0;for(let Ce=0;Ce<j&&(se++,he=he.nextZ,he);Ce++);let ve=j;for(;se>0||ve>0&&he;)se!==0&&(ve===0||!he||te.z<=he.z)?(J=te,te=te.nextZ,se--):(J=he,he=he.nextZ,ve--),fe?fe.nextZ=J:z=J,J.prevZ=fe,fe=J;te=he}fe.nextZ=null,j*=2}while(M>1)}(L)}(h,f,g,m);let b=h;for(;h.prev!==h.next;){const O=h.prev,D=h.next;if(m?L1(h,f,g,m):Zs(h))s.push(O.i,h.i,D.i),OA(h),h=D.next,b=D.next;else if((h=D)===b){_?_===1?iy(h=lE(Ih(h),s),s,u,f,g,m,2):_===2&&PC(h,s,u,f,g,m):iy(Ih(h),s,u,f,g,m,1);break}}}function Zs(h){const s=h.prev,u=h,f=h.next;if(ho(s,u,f)>=0)return!1;const g=s.x,m=u.x,_=f.x,b=s.y,O=u.y,D=f.y,C=g<m?g<_?g:_:m<_?m:_,V=b<O?b<D?b:D:O<D?O:D,L=g>m?g>_?g:_:m>_?m:_,z=b>O?b>D?b:D:O>D?O:D;let M=f.next;for(;M!==s;){if(M.x>=C&&M.x<=L&&M.y>=V&&M.y<=z&&Am(g,b,m,O,_,D,M.x,M.y)&&ho(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function L1(h,s,u,f){const g=h.prev,m=h,_=h.next;if(ho(g,m,_)>=0)return!1;const b=g.x,O=m.x,D=_.x,C=g.y,V=m.y,L=_.y,z=b<O?b<D?b:D:O<D?O:D,M=C<V?C<L?C:L:V<L?V:L,j=b>O?b>D?b:D:O>D?O:D,J=C>V?C>L?C:L:V>L?V:L,te=sy(z,M,s,u,f),fe=sy(j,J,s,u,f);let he=h.prevZ,se=h.nextZ;for(;he&&he.z>=te&&se&&se.z<=fe;){if(he.x>=z&&he.x<=j&&he.y>=M&&he.y<=J&&he!==g&&he!==_&&Am(b,C,O,V,D,L,he.x,he.y)&&ho(he.prev,he,he.next)>=0||(he=he.prevZ,se.x>=z&&se.x<=j&&se.y>=M&&se.y<=J&&se!==g&&se!==_&&Am(b,C,O,V,D,L,se.x,se.y)&&ho(se.prev,se,se.next)>=0))return!1;se=se.nextZ}for(;he&&he.z>=te;){if(he.x>=z&&he.x<=j&&he.y>=M&&he.y<=J&&he!==g&&he!==_&&Am(b,C,O,V,D,L,he.x,he.y)&&ho(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;se&&se.z<=fe;){if(se.x>=z&&se.x<=j&&se.y>=M&&se.y<=J&&se!==g&&se!==_&&Am(b,C,O,V,D,L,se.x,se.y)&&ho(se.prev,se,se.next)>=0)return!1;se=se.nextZ}return!0}function lE(h,s){let u=h;do{const f=u.prev,g=u.next.next;!jf(f,g)&&of(f,u,u.next,g)&&ly(f,g)&&ly(g,f)&&(s.push(f.i,u.i,g.i),OA(u),OA(u.next),u=h=g),u=u.next}while(u!==h);return Ih(u)}function PC(h,s,u,f,g,m){let _=h;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&l0(_,b)){let O=F1(_,b);return _=Ih(_,_.next),O=Ih(O,O.next),iy(_,s,u,f,g,m,0),void iy(O,s,u,f,g,m,0)}b=b.next}_=_.next}while(_!==h)}function uE(h,s){return h.x-s.x}function cE(h,s){const u=function(g,m){let _=m;const b=g.x,O=g.y;let D,C=-1/0;do{if(O<=_.y&&O>=_.next.y&&_.next.y!==_.y){const j=_.x+(O-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(j<=b&&j>C&&(C=j,D=_.x<_.next.x?_:_.next,j===b))return D}_=_.next}while(_!==m);if(!D)return null;const V=D,L=D.x,z=D.y;let M=1/0;_=D;do{if(b>=_.x&&_.x>=L&&b!==_.x&&Am(O<z?b:C,O,L,z,O<z?C:b,O,_.x,_.y)){const j=Math.abs(O-_.y)/(b-_.x);ly(_,g)&&(j<M||j===M&&(_.x>D.x||_.x===D.x&&dE(D,_)))&&(D=_,M=j)}_=_.next}while(_!==V);return D}(h,s);if(!u)return s;const f=F1(u,h);return Ih(f,f.next),Ih(u,u.next)}function dE(h,s){return ho(h.prev,h,s.prev)<0&&ho(s.next,h,h.next)<0}function sy(h,s,u,f,g){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*g|0)|h<<8))|h<<4))|h<<2))|h<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-f)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function oy(h){let s=h,u=h;do(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next;while(s!==h);return u}function Am(h,s,u,f,g,m,_,b){return(g-_)*(s-b)>=(h-_)*(m-b)&&(h-_)*(f-b)>=(u-_)*(s-b)&&(u-_)*(m-b)>=(g-_)*(f-b)}function l0(h,s){return h.next.i!==s.i&&h.prev.i!==s.i&&!function(u,f){let g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==f.i&&g.next.i!==f.i&&of(g,g.next,u,f))return!0;g=g.next}while(g!==u);return!1}(h,s)&&(ly(h,s)&&ly(s,h)&&function(u,f){let g=u,m=!1;const _=(u.x+f.x)/2,b=(u.y+f.y)/2;do g.y>b!=g.next.y>b&&g.next.y!==g.y&&_<(g.next.x-g.x)*(b-g.y)/(g.next.y-g.y)+g.x&&(m=!m),g=g.next;while(g!==u);return m}(h,s)&&(ho(h.prev,h,s.prev)||ho(h,s.prev,s))||jf(h,s)&&ho(h.prev,h,h.next)>0&&ho(s.prev,s,s.next)>0)}function ho(h,s,u){return(s.y-h.y)*(u.x-s.x)-(s.x-h.x)*(u.y-s.y)}function jf(h,s){return h.x===s.x&&h.y===s.y}function of(h,s,u,f){const g=u0(ho(h,s,u)),m=u0(ho(h,s,f)),_=u0(ho(u,f,h)),b=u0(ho(u,f,s));return g!==m&&_!==b||!(g!==0||!vm(h,u,s))||!(m!==0||!vm(h,f,s))||!(_!==0||!vm(u,h,f))||!(b!==0||!vm(u,s,f))}function vm(h,s,u){return s.x<=Math.max(h.x,u.x)&&s.x>=Math.min(h.x,u.x)&&s.y<=Math.max(h.y,u.y)&&s.y>=Math.min(h.y,u.y)}function u0(h){return h>0?1:h<0?-1:0}function ly(h,s){return ho(h.prev,h,h.next)<0?ho(h,s,h.next)>=0&&ho(h,h.prev,s)>=0:ho(h,s,h.prev)<0||ho(h,h.next,s)<0}function F1(h,s){const u=VA(h.i,h.x,h.y),f=VA(s.i,s.x,s.y),g=h.next,m=s.prev;return h.next=s,s.prev=h,u.next=g,g.prev=u,f.next=u,u.prev=f,m.next=f,f.prev=m,f}function k1(h,s,u,f){const g=VA(h,s,u);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function OA(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function VA(h,s,u){return{i:h,x:s,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function zA(h,s){const u=h.length;if(u<=1)return[h];const f=[];let g,m;for(let _=0;_<u;_++){const b=ki(h[_]);b!==0&&(h[_].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(g&&f.push(g),g=[h[_]]):g.push(h[_]))}if(g&&f.push(g),s>1)for(let _=0;_<f.length;_++)f[_].length<=s||(xf(f[_],s,1,f[_].length-1,EC),f[_]=f[_].slice(0,s));return f}function EC(h,s){return s.area-h.area}function NC(h,s,u=1){if(!h)return null;const f=typeof h=="string"?Vs.from(h).getPrimary():h.getPrimary(),g=f.id.toString();return s.has(g)||s.set(g,[]),f.scaleSelf(u),s.get(g).push(f),f.toString()}function DA(h,s,u,f){const g=f.patternDependencies;let m=!1;for(const _ of s){const b=_.paint.get(`${h}-pattern`);b.isConstant()||(m=!0),NC(b.constantOr(null),g,u)&&(m=!0)}return m}function MA(h,s,u,f,g,m){const _=m.patternDependencies;for(const b of s){const O=b.paint.get(`${h}-pattern`).value;if(O.kind!=="constant"){let D=O.evaluate({zoom:f},u,{},m.availableImages);D=D&&D.name?D.name:D;const C=NC(D,_,g);C&&(u.patterns[b.id]=C)}}return u}var U1,OC,hg,VC,c0,Zi,d0,fg={};function h0(){if(OC)return U1;OC=1;var h=fa();function s(g,m,_,b,O){this.properties={},this.extent=_,this.type=0,this._pbf=g,this._geometry=-1,this._keys=b,this._values=O,g.readFields(u,this,m)}function u(g,m,_){g==1?m.id=_.readVarint():g==2?function(b,O){for(var D=b.readVarint()+b.pos;b.pos<D;){var C=O._keys[b.readVarint()],V=O._values[b.readVarint()];O.properties[C]=V}}(_,m):g==3?m.type=_.readVarint():g==4&&(m._geometry=_.pos)}function f(g){for(var m,_,b=0,O=0,D=g.length,C=D-1;O<D;C=O++)b+=((_=g[C]).x-(m=g[O]).x)*(m.y+_.y);return b}return U1=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var m,_=g.readVarint()+g.pos,b=1,O=0,D=0,C=0,V=[];g.pos<_;){if(O<=0){var L=g.readVarint();b=7&L,O=L>>3}if(O--,b===1||b===2)D+=g.readSVarint(),C+=g.readSVarint(),b===1&&(m&&V.push(m),m=[]),m.push(new h(D,C));else{if(b!==7)throw new Error("unknown command "+b);m&&m.push(m[0].clone())}}return m&&V.push(m),V},s.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var m=g.readVarint()+g.pos,_=1,b=0,O=0,D=0,C=1/0,V=-1/0,L=1/0,z=-1/0;g.pos<m;){if(b<=0){var M=g.readVarint();_=7&M,b=M>>3}if(b--,_===1||_===2)(O+=g.readSVarint())<C&&(C=O),O>V&&(V=O),(D+=g.readSVarint())<L&&(L=D),D>z&&(z=D);else if(_!==7)throw new Error("unknown command "+_)}return[C,L,V,z]},s.prototype.toGeoJSON=function(g,m,_){var b,O,D=this.extent*Math.pow(2,_),C=this.extent*g,V=this.extent*m,L=this.loadGeometry(),z=s.types[this.type];function M(te){for(var fe=0;fe<te.length;fe++){var he=te[fe];te[fe]=[360*(he.x+C)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(he.y+V)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(b=0;b<L.length;b++)j[b]=L[b][0];M(L=j);break;case 2:for(b=0;b<L.length;b++)M(L[b]);break;case 3:for(L=function(te){var fe=te.length;if(fe<=1)return[te];for(var he,se,ve=[],Ce=0;Ce<fe;Ce++){var Ve=f(te[Ce]);Ve!==0&&(se===void 0&&(se=Ve<0),se===Ve<0?(he&&ve.push(he),he=[te[Ce]]):he.push(te[Ce]))}return he&&ve.push(he),ve}(L),b=0;b<L.length;b++)for(O=0;O<L[b].length;O++)M(L[b][O])}L.length===1?L=L[0]:z="Multi"+z;var J={type:"Feature",geometry:{type:z,coordinates:L},properties:this.properties};return"id"in this&&(J.id=this.id),J},U1}function B1(){if(VC)return hg;VC=1;var h=h0();function s(f,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(u,this,g),this.length=this._features.length}function u(f,g,m){f===15?g.version=m.readVarint():f===1?g.name=m.readString():f===5?g.extent=m.readVarint():f===2?g._features.push(m.pos):f===3?g._keys.push(m.readString()):f===4&&g._values.push(function(_){for(var b=null,O=_.readVarint()+_.pos;_.pos<O;){var D=_.readVarint()>>3;b=D===1?_.readString():D===2?_.readFloat():D===3?_.readDouble():D===4?_.readVarint64():D===5?_.readVarint():D===6?_.readSVarint():D===7?_.readBoolean():null}return b}(m))}return hg=s,s.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var g=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,g,this.extent,this._keys,this._values)},hg}function f0(){return d0||(d0=1,fg.VectorTile=function(){if(Zi)return c0;Zi=1;var h=B1();function s(u,f,g){if(u===3){var m=new h(g,g.readVarint()+g.pos);m.length&&(f[m.name]=m)}}return c0=function(u,f){this.layers=u.readFields(s,{},f)},c0}(),fg.VectorTileFeature=h0(),fg.VectorTileLayer=B1()),fg}var Lh=f0();const Gf="3d_elevation_id",pg="level";class zC{constructor(){this._valid=!1}reset(s){return this.feature=s,this._valid=!0,this._geometry=s.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(s,u){return this._valid&&s(u(this._geometry)),this}require(s,u,f){return this.get(s,!0,u,f)}optional(s,u,f){return this.get(s,!1,u,f)}success(){return this._valid}get(s,u,f,g){const m=this.feature.properties.hasOwnProperty(s)?+this.feature.properties[s]:void 0;return this._valid&&m!==void 0?f(g?g(m):m):u&&(this._valid=!1),this}}class DC{constructor(s,u){this.featureFunc=s,this.vertexFunc=u}parseFeature(s,u,f){return this.featureFunc(s,u,f)}parseVertex(s,u,f){return this.vertexFunc(s,u,f)}}const hE=new DC((h,s,u)=>h.reset(s).require(Gf,f=>{u.id=f}).optional("fixed_height_relative",f=>{u.constantHeight=f},Zf.decodeRelativeHeight).geometry(f=>{u.bounds=f},Zf.computeBounds).success(),(h,s,u)=>h.reset(s).require(Gf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height_relative",f=>{u.height=f},Zf.decodeRelativeHeight).geometry(f=>{u.position=f},Zf.getPoint).success()),MC=new DC((h,s,u)=>h.reset(s).require(Gf,f=>{u.id=f}).optional("fixed_height",f=>{u.constantHeight=f},Zf.decodeMetricHeight).geometry(f=>{u.bounds=f},Zf.computeBounds).success(),(h,s,u)=>h.reset(s).require(Gf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height",f=>{u.height=f},Zf.decodeMetricHeight).geometry(f=>{u.position=f},Zf.getPoint).success());class Zf{static computeBounds(s){const u=new Nt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=new Nt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const g of s[0])u.x>g.x&&(u.x=g.x),u.y>g.y&&(u.y=g.y),f.x<g.x&&(f.x=g.x),f.y<g.y&&(f.y=g.y);return{min:u,max:f}}static getPoint(s){return Ae.vec2.fromValues(s[0][0].x,s[0][0].y)}static decodeRelativeHeight(s){return 1e-4*s*5}static decodeMetricHeight(s){return 1e-4*s}static parse(s){const u=[],f=[],g=s.length,m=new zC;for(let b=0;b<g;b++){const O=s.feature(b),D=O.properties.hasOwnProperty("version")?String(O.properties.version):void 0,C=(_=D)?_==="1.0.1"?MC:void 0:hE;if(C===void 0){Yr(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const V=O.properties.hasOwnProperty("type")?O.properties.type:void 0;if(V){if(Lh.VectorTileFeature.types[O.type]==="Point"&&V==="curve_point"){const L={};C.parseVertex(m,O,L)&&u.push(L)}else if(Lh.VectorTileFeature.types[O.type]==="Polygon"&&V==="curve_meta"){const L={};C.parseFeature(m,O,L)&&f.push(L)}}}var _;return{vertices:u,features:f}}}class uy{constructor(s,u,f,g,m,_){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=s,this.heightRange={min:f,max:f},this.safeArea=u,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||g.length!==0)){this.vertices=g,this.edges=m,this.edges=this.edges.filter(b=>b.a<this.vertices.length&&b.b<this.vertices.length&&!Ae.vec2.exactEquals(this.vertices[b.a].position,this.vertices[b.b].position)),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const b of this.vertices)this.vertexProps.push({dir:Ae.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,b.height),this.heightRange.max=Math.max(this.heightRange.max,b.height);for(const b of this.edges){const O=this.vertices[b.a].position,D=this.vertices[b.b].position,C=Ae.vec2.subtract(Ae.vec2.create(),D,O),V=Ae.vec2.length(C),L=Ae.vec2.scale(Ae.vec2.create(),C,1/V);this.edgeProps.push({vec:C,dir:L,len:V});const z=this.vertexProps[b.a].dir,M=this.vertexProps[b.b].dir;Ae.vec2.add(z,z,L),Ae.vec2.add(M,M,L)}for(const b of this.vertexProps)b.dir[0]===0&&b.dir[1]===0||Ae.vec2.normalize(b.dir,b.dir);this.tessellate(_)}}pointElevation(s){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(s);if(u==null)return 0;const[f,g]=u;return((m,_,b)=>(1-b)*m+b*_)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,g)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(s){if(this.edges.length===0)return;let u=0,f=Number.POSITIVE_INFINITY,g=0;const m=Ae.vec2.fromValues(s.x,s.y);for(let _=0;_<this.edges.length;_++){const b=this.edges[_],O=this.edgeProps[_].dir,D=new kr(m,this.edgeProps[_].dir),C=this.vertices[b.a].position,V=this.vertices[b.b].position,L=Ae.vec2.create(),z=Ae.vec2.create(),M=D.intersectsPlane(C,this.vertexProps[b.a].dir,L),j=D.intersectsPlane(V,this.vertexProps[b.b].dir,z);if(!M||!j)continue;const J=Ae.vec2.subtract(Ae.vec2.create(),z,L),te=Ae.vec2.subtract(Ae.vec2.create(),m,L),fe=Ae.vec2.dot(J,J),he=fe>0?Ae.vec2.dot(te,J)/fe:0,se=Ia(he,0,1),ve=Math.abs((he-se)*this.edgeProps[_].len),Ce=Ae.vec2.subtract(Ae.vec2.create(),m,C),Ve=ve+Math.abs(Ae.vec2.dot(Ce,Ae.vec2.fromValues(O[1],-O[0])));Ve<f&&(u=_,f=Ve,g=se)}return[u,g]}tessellate(s){for(let u=this.edges.length-1;u>=0;--u){const f=this.edges[u].a,g=this.edges[u].b,{position:m,height:_,extent:b}=this.vertices[f],{position:O,height:D,extent:C}=this.vertices[g],V=this.vertexProps[f].dir,L=this.vertexProps[g].dir,z=Ae.vec3.fromValues(m[0]/s,m[1]/s,_),M=Ae.vec3.fromValues(O[0]/s,O[1]/s,D),j=Ae.vec3.fromValues(V[1],-V[0],0);Ae.vec3.scale(j,j,b);const J=Ae.vec3.fromValues(L[1],-L[0],0);if(Ae.vec3.scale(J,J,C),this.distSqLines(Ae.vec3.fromValues(z[0]+.5*j[0],z[1]+.5*j[1],z[2]+.5*j[2]),Ae.vec3.fromValues(M[0]-.5*J[0],M[1]-.5*J[1],M[2]-.5*J[2]),Ae.vec3.fromValues(z[0]-.5*j[0],z[1]-.5*j[1],z[2]-.5*j[2]),Ae.vec3.fromValues(M[0]+.5*J[0],M[1]+.5*J[1],M[2]+.5*J[2]))<=.05*.05)continue;const te=this.vertices.length,fe=Ae.vec2.add(Ae.vec2.create(),m,O);this.vertices.push({position:Ae.vec2.scale(fe,fe,.5),height:.5*(_+D),extent:.5*(b+C)});const he=Ae.vec2.add(Ae.vec2.create(),V,L);this.vertexProps.push({dir:Ae.vec2.normalize(he,he)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:f,b:te}),this.edges.push({a:te,b:g});const se=Ae.vec2.subtract(Ae.vec2.create(),this.vertices[te].position,m),ve=Ae.vec2.length(se),Ce={vec:se,dir:Ae.vec2.scale(Ae.vec2.create(),se,1/ve),len:ve};this.edgeProps.push(Ce),this.edgeProps.push(Ce)}}distSqLines(s,u,f,g){const m=Ae.vec3.subtract(Ae.vec3.create(),u,s),_=Ae.vec3.subtract(Ae.vec3.create(),g,f),b=Ae.vec3.subtract(Ae.vec3.create(),s,f),O=Ae.vec3.dot(m,m),D=Ae.vec3.dot(m,_),C=Ae.vec3.dot(m,b),V=Ae.vec3.dot(_,_),L=Ae.vec3.dot(_,b),z=O*V-D*D;if(z===0){const fe=Ae.vec3.dot(b,_)/Ae.vec3.dot(_,_),he=Ae.vec3.lerp(Ae.vec3.create(),f,g,fe);return Ae.vec3.squaredDistance(he,s)}const M=(D*L-C*V)/z,j=(O*L-D*C)/z,J=Ae.vec3.lerp(Ae.vec3.create(),s,u,M),te=Ae.vec3.lerp(Ae.vec3.create(),f,g,j);return Ae.vec3.squaredDistance(J,te)}}class Fs{constructor(s,u){this.zScale=1,this.xOffset=0,this.yOffset=0,s.equals(u)||(this.zScale=Math.pow(2,u.z-s.z),this.xOffset=(s.x*this.zScale-u.x)*Da,this.yOffset=(s.y*this.zScale-u.y)*Da)}constantElevation(s,u){if(s.constantHeight!=null)return this.computeBiasedHeight(s.constantHeight,u)}pointElevation(s,u,f){const g=this.constantElevation(u,f);return g??(s.x=s.x*this.zScale+this.xOffset,s.y=s.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(s),f))}computeBiasedHeight(s,u){return u<=0?s:s+u*Fr(0,u,s>=0?s:Math.abs(.5*s))}}Pt(uy,"ElevationFeature");class p0{constructor(){this.polygons=new Map}add(s,...u){this.polygons.has(s)?this.polygons.get(s).push(...u):this.polygons.set(s,u)}merge(s){for(const[u,f]of s.polygons)this.add(u,...f)}}class zo{constructor(){this.portals=[]}static evaluate(s){if(s.length===0)return new zo;let u=[];for(const D of s)u.push(...D.portals);if(u.length===0)return new zo;const f=(D,C)=>D<=0&&C<=0||D>=Da&&C>=Da;for(const D of u){const C=D.va,V=D.vb;(f(C.x,V.x)||f(C.y,V.y))&&(D.type="border")}const g=u.filter(D=>D.type!=="unevaluated"),m=u.filter(D=>D.type==="unevaluated");if(m.length===0)return new zo;m.sort((D,C)=>D.hash===C.hash?D.isTunnel===C.isTunnel?0:D.isTunnel?-1:1:D.hash<C.hash?1:-1),u=g.concat(m);let _=g.length,b=_,O=_;do if(b++,b===u.length||u[_].hash!==u[b].hash){if(b-_==2){O<_&&(u[O]=u[_],u[_]=null);const D=u[O],C=u[b-1];D.type=D.isTunnel!==C.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:C.connection.a},O++}_=b}while(_!==u.length);return u.splice(O),u.sort((D,C)=>D.hash<C.hash?1:-1),{portals:u}}}Pt(zo,"ElevationPortalGraph"),Pt(p0,"ElevationPolygons");class fE{constructor(s,u,f){this.outPositions=s,this.outNormals=u,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(s,u,f){let g=s[2];f!=null&&(g*=f);const m=this.getVec3Bits(s)<<96n|this.getVec3Bits(u),_=this.vertexLookup.get(m);if(_!=null)return _;const b=this.outPositions.length;this.vertexLookup.set(m,b);const O=Math.trunc(16384*u[0]),D=Math.trunc(16384*u[1]),C=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(s[0],s[1],g),this.outNormals.emplaceBack(O,D,C),b}addVertices(s,u,...f){const g=[];for(const m of f){const _=this.addVertex(m,s,u);g.push(_)}return g}addTriangles(s,u,f){if(u&&f){const g=f.length===1,m=Ae.vec3.fromValues(0,0,0);for(let _=0;_<s.length;_+=3){const b=u[s[_+0]],O=u[s[_+1]],D=u[s[_+2]],C=g?f[0]:f[s[_+1]],V=g?f[0]:f[s[_+2]],L=this.addVertex(Ae.vec3.fromValues(b.x,b.y,g?f[0]:f[s[_+0]]),m),z=this.addVertex(Ae.vec3.fromValues(O.x,O.y,C),m),M=this.addVertex(Ae.vec3.fromValues(D.x,D.y,V),m);this.outIndices.emplaceBack(L,z,M)}}else for(let g=0;g<s.length;g+=3)this.outIndices.emplaceBack(s[g+0],s[g+1],s[g+2])}addQuad(s,u){const f=this.addVertices(u,void 0,...s.map(O=>Ae.vec3.fromValues(O.coord.x,O.coord.y,O.height))),[g,m,_,b]=f;this.addTriangles([g,m,_,_,b,g])}getBits(s){return this.view.setFloat32(0,s),BigInt(this.view.getUint32(0))}getVec3Bits(s){return this.getBits(s[0])<<64n|this.getBits(s[1])<<32n|this.getBits(s[2])}}class eh{constructor(s){this.unevaluatedPortals=new zo,this.portalPolygons=new p0,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new Df,this.vertexNormals=new tf,this.indexArray=new Ls,this.tileToMeters=y(s)}addVertices(s,u){const f=this.unevalVertices.length;for(let g=0;g<s.length;g++)this.unevalVertices.push(s[g]),this.unevalHeights.push(u[g]);return f}addTriangles(s,u,f){const g=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const m of s)g.push(m+u)}addRenderableRing(s,u,f,g,m){const _=[new Nt(m.min.x,m.min.y),new Nt(m.max.x,m.min.y),new Nt(m.max.x,m.max.y),new Nt(m.min.x,m.max.y)];for(let b=0;b<f-1;b++){const O=u+b,D=O+1,C=this.unevalVertices[O],V=this.unevalVertices[D];if(!(C.x>=m.min.x&&C.x<=m.max.x&&C.y>=m.min.y&&C.y<=m.max.y||V.x>=m.min.x&&V.x<=m.max.x&&V.y>=m.min.y&&V.y<=m.max.y||vt(C,V,_))||this.isOnBorder(C.x,V.x)||this.isOnBorder(C.y,V.y))continue;const L=eh.computeEdgeHash(this.unevalVertices[O],this.unevalVertices[D]);let z,M=this.vertexHashLookup.get(eh.computePosHash(C));M!=null?z=M.next:(M=this.vertexHashLookup.get(eh.computePosHash(V)),z=M!=null?M.prev:L),this.unevalEdges.push({polygonIdx:s,a:O,b:D,hash:L,portalHash:z,isTunnel:g,type:"unevaluated"})}}addPortalCandidates(s,u,f,g,m){if(u.length===0)return;this.portalPolygons.add(s,{geometry:u,zLevel:m});const _=u[0];this.vertexHashLookup.clear();let b=eh.computeEdgeHash(_[_.length-2],_[_.length-1]);for(let O=0;O<_.length-1;O++){const D=_[O+0],C=_[O+1],V=Ae.vec2.fromValues(C.x-D.x,C.y-D.y),L=Ae.vec2.length(V);if(L===0)continue;let z="unevaluated";const M=g.pointElevation(D),j=g.pointElevation(C);Math.abs(M)<.01&&Math.abs(j)<.01?z="entrance":(this.isOnBorder(D.x,C.x)||this.isOnBorder(D.y,C.y))&&(z="border");const J=eh.computeEdgeHash(D,C);this.unevaluatedPortals.portals.push({connection:{a:s,b:void 0},va:D,vb:C,vab:V,length:L,hash:J,isTunnel:f,type:z});const te=eh.computePosHash(D);this.vertexHashLookup.set(te,{prev:b,next:J}),b=J}}construct(s){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=V=>{V.primitiveLength=this.indexArray.length-V.primitiveOffset},g=new fE(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(s.portals,this.unevalEdges);const m=u(),_=u(),b=u(),O=(V,L)=>{V.sort((M,j)=>M.type===L&&j.type!==L?-1:M.type!==L&&j.type===L?1:0);const z=V.findIndex(M=>M.type!==L);return z>=0?z:V.length};let D=0;this.unevalEdges.length>0&&(D=O(this.unevalEdges,"none"),this.constructBridgeStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},this.tileToMeters));const C=u();if(this.unevalEdges.length>0){const V=this.unevalEdges.splice(D),L=O(V,"tunnel")+D;this.unevalEdges.push(...V),this.constructTunnelStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},{min:D,max:L})}f(b),g.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f(C),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(_),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(m),this.maskSegments=Gi.simpleSegment(0,C.primitiveOffset,0,C.primitiveLength),this.depthSegments=Gi.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength),this.renderableSegments=Gi.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.shadowCasterSegments=Gi.simpleSegment(0,m.primitiveOffset,0,m.primitiveLength)}upload(s){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=s.createVertexBuffer(this.vertexPositions,bC.members),this.vertexBufferNormal=s.createVertexBuffer(this.vertexNormals,xC.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(s,u,f,g){const m=new Map;for(let _=f;_<g;_++){const b=u[_],O=b.a,D=b.b;m.has(O)||m.set(O,{}),m.has(D)||m.set(D,{});const C=m.get(O),V=m.get(D);s[D]>0&&(C.to=D),s[O]>0&&(V.from=O)}return m}constructBridgeStructures(s,u,f,g,m,_){const b=this.computeVertexConnections(f,g,m.min,m.max),O=1/_,D=.5*O,C=L=>Ae.vec3.fromValues(u[L].x,u[L].y,f[L]*O),V=L=>{const z=b.get(L),M=z.from,j=z.to;if(!M||!j)return;const J=C(M),te=C(L),fe=C(j),he=Ae.vec3.fromValues(0,0,0);if(!Ae.vec3.exactEquals(J,te)){const ve=Ae.vec3.sub(Ae.vec3.create(),te,J);Ae.vec3.add(he,he,Ae.vec3.normalize(ve,ve))}if(!Ae.vec3.exactEquals(fe,te)){const ve=Ae.vec3.sub(Ae.vec3.create(),fe,te);Ae.vec3.add(he,he,Ae.vec3.normalize(ve,ve))}const se=Ae.vec3.len(he);return se>0?Ae.vec3.scale(he,he,1/se):void 0};for(let L=m.min;L<m.max;L++){const z=g[L],M=this.prepareEdgePoints(u,f,z,(Ra,Sr)=>Ra>=Sr);if(M==null)continue;const j=M[0],J=M[1],te=Ae.vec3.fromValues(j.coord.x,j.coord.y,O*j.height),fe=Ae.vec3.fromValues(J.coord.x,J.coord.y,O*J.height);if(Ae.vec3.exactEquals(te,fe))continue;const he=Ae.vec3.sub(Ae.vec3.create(),fe,te);Ae.vec3.normalize(he,he);const se=Ra=>Ae.vec3.normalize(Ra,Ra),ve=V(z.a)||he,Ce=V(z.b)||he,Ve=se(Ae.vec3.fromValues(ve[1],-ve[0],0)),et=se(Ae.vec3.fromValues(Ce[1],-Ce[0],0)),Ye=se(Ae.vec3.cross(Ae.vec3.create(),Ve,ve)),Xe=se(Ae.vec3.cross(Ae.vec3.create(),et,Ce)),gt=Ae.vec3.create(),tt=[Ae.vec3.add(Ae.vec3.create(),te,Ae.vec3.scale(gt,Ae.vec3.sub(gt,Ve,Ye),D)),Ae.vec3.add(Ae.vec3.create(),te,Ae.vec3.scale(gt,Ae.vec3.add(gt,Ve,Ye),D)),Ae.vec3.add(Ae.vec3.create(),te,Ae.vec3.scale(gt,Ye,D)),te],_t=[Ae.vec3.add(Ae.vec3.create(),fe,Ae.vec3.scale(gt,Ae.vec3.sub(gt,et,Xe),D)),Ae.vec3.add(Ae.vec3.create(),fe,Ae.vec3.scale(gt,Ae.vec3.add(gt,et,Xe),D)),Ae.vec3.add(Ae.vec3.create(),fe,Ae.vec3.scale(gt,Xe,D)),fe],[xt,Ct]=s.addVertices(Ve,_,tt[0],tt[1]),[Mt,Ot]=s.addVertices(et,_,_t[0],_t[1]);s.addTriangles([xt,Ct,Mt,Ct,Ot,Mt]);const[jt,Ft]=s.addVertices(Ye,_,tt[1],tt[2]),[$t,_a]=s.addVertices(Xe,_,_t[1],_t[2]);s.addTriangles([jt,Ft,$t,Ft,_a,$t]);const[ya,Qa]=s.addVertices(Ae.vec3.negate(Ve,Ve),_,tt[2],tt[3]),[Na,Ma]=s.addVertices(Ae.vec3.negate(et,et),_,_t[2],_t[3]);s.addTriangles([ya,Qa,Na,Qa,Ma,Na])}}constructTunnelStructures(s,u,f,g,m,_){const b=O=>Ae.vec3.normalize(O,O);for(let O=m.min;O<m.max;O++){const D=this.prepareEdgePoints(u,f,g[O],(z,M)=>z<=M);if(D==null)continue;const[C,V]=D,L=b(Ae.vec3.fromValues(V.coord.y-C.coord.y,-(V.coord.x-C.coord.x),0));s.addQuad([C,V,{coord:V.coord,height:g[O].isTunnel?-.1:0},{coord:C.coord,height:g[O].isTunnel?-.1:0}],L)}for(let O=_.min;O<_.max;O++){const D=g[O],C=u[D.a],V=u[D.b],L=b(Ae.vec3.fromValues(V.y-C.y,-(V.x-C.x),0));s.addQuad([{coord:V,height:0},{coord:C,height:0},{coord:C,height:f[D.a]+4},{coord:V,height:f[D.b]+4}],L),s.addQuad([{coord:C,height:0},{coord:V,height:0},{coord:V,height:f[D.b]+4},{coord:C,height:f[D.a]+4}],L)}}prepareEdgePoints(s,u,f,g){const m=s[f.a],_=s[f.b];let b=u[f.a],O=u[f.b];if(!(b!==0&&g(b,0)||O!==0&&g(O,0)))return;const D=m.clone(),C=_.clone();if(g(b,0)){if(!g(O,0)){const V=O/(O-b);C.x=vr(C.x,D.x,V),C.y=vr(C.y,D.y,V),O=vr(O,b,V)}}else{const V=b/(b-O);D.x=vr(D.x,C.x,V),D.y=vr(D.y,C.y,V),b=vr(b,O,V)}return[{coord:D,height:b},{coord:C,height:O}]}prepareEdges(s,u){if(u.length===0)return;u.sort((b,O)=>b.hash===O.hash?O.polygonIdx-b.polygonIdx:O.hash>b.hash?1:-1);let f=0,g=0,m=0,_=u[f].polygonIdx;do g++,(g===u.length||u[f].hash!==u[g].hash)&&((g-f==1||u[g-1].polygonIdx!==_)&&(m<f&&(u[m]=u[f],u[f]=null),u[m].type="none",m++),f=g,f!==u.length&&(_=u[f].polygonIdx));while(f!==u.length);if(u.splice(m),u.length!==0&&s.length!==0){u.sort((D,C)=>D.hash<C.hash?1:-1);let b=0,O=0;for(;b!==u.length&&O!==s.length;){const D=u[b],C=s[O];D.portalHash>C.hash?b++:C.hash>D.portalHash?O++:(D.type=C.type,b++)}}}isOnBorder(s,u){return s<=0&&u<=0||s>=Da&&u>=Da}static computeEdgeHash(s,u){return(s.y===u.y&&s.x>u.x||s.y>u.y)&&([s,u]=[u,s]),BigInt(eh.computePosHash(s))<<32n|BigInt(eh.computePosHash(u))}static computePosHash(s){return((65535&s.x)<<16|65535&s.y)>>>0}}class IA{constructor(s,u){this.layoutVertexArray=new Iu,this.indexArray=new Ls,this.lineIndexArray=new Wd,this.triangleSegments=new Gi,this.lineSegments=new Gi,this.programConfigurations=new zh(s.layers,{zoom:s.zoom,lut:s.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new nd)}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,ny.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.lineIndexBuffer=s.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=s.createVertexBuffer(this.elevatedLayoutVertexArray,o0.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(s,u,f,g,m,_){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,f,g,m,_)}}class cy{constructor(s){this.zoom=s.zoom,this.pixelRatio=s.pixelRatio,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new IA(s,!1),this.elevationBufferData=new IA(s,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=s.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(s,u){}populate(s,u,f,g){this.hasPattern=DA("fill",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:b,id:O,index:D,sourceLayerIndex:C}of s){const V=this.layers[0]._featureFilter.needGeometry,L=Y(b,V);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),L,f))continue;const z=m?m.evaluate(L,{},f,u.availableImages):void 0,M={id:O,properties:b.properties,type:b.type,sourceLayerIndex:C,index:D,geometry:V?L.geometry:K(b,f,g),patterns:{},sortKey:z};_.push(M)}m&&_.sort((b,O)=>b.sortKey-O.sortKey);for(const b of _){const{geometry:O,index:D,sourceLayerIndex:C}=b;if(this.hasPattern){const V=MA("fill",this.layers,b,this.zoom,this.pixelRatio,u);this.patternFeatures.push(V)}else this.addFeature(b,O,D,f,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(s[D].feature,O,D,C,this.index)}}update(s,u,f,g,m,_,b){this.bufferData.update(s,u,f,g,m,_,b),this.elevationBufferData.update(s,u,f,g,m,_,b)}addFeatures(s,u,f,g,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,g,_,s.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(s){this.bufferData.upload(s),this.elevationBufferData.upload(s),this.elevatedStructures&&this.elevatedStructures.upload(s)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(s,u,f,g,m,_=[],b,O){const D=zA(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(s,D,g,f,O):this.addGeometry(D,this.bufferData),this.bufferData.populatePaintArrays(s,f,m,_,g,b),this.elevationBufferData.populatePaintArrays(s,f,m,_,g,b)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(s){this.elevatedStructures&&this.elevatedStructures.construct(s)}addElevatedRoadFeature(s,u,f,g,m){const _=new Array,b=this.getElevationFeature(s,m);if(b){_.push({polygons:u,elevationFeature:b,elevationTileID:f});for(const O of _)if(O.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new eh(O.elevationTileID));const C=O.elevationFeature.isTunnel();let V=0;s.properties.hasOwnProperty(pg)&&(V=+s.properties[pg]);for(const L of O.polygons)this.elevatedStructures.addPortalCandidates(O.elevationFeature.id,L,C,O.elevationFeature,V)}const D=new Fs(f,O.elevationTileID);this.addElevatedGeometry(O.polygons,D,O.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,g)}}else this.addGeometry(u,this.bufferData)}addElevatedGeometry(s,u,f,g,m){const _={elevation:f,elevationSampler:u,bias:g,index:m},[b,O]=this.addGeometry(s,this.elevationBufferData,_);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:b,max:O}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,b),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,O))}addGeometry(s,u,f){let g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=null;f&&(_=f.elevationSampler.constantElevation(f.elevation,f.bias),_!=null&&(g=_,m=_));const b=(O,D,C)=>{if(f!=null)if(D.push(O),_!=null)u.elevatedLayoutVertexArray.emplaceBack(_),C.push(_);else{const V=f.elevationSampler.pointElevation(O,f.elevation,f.bias);u.elevatedLayoutVertexArray.emplaceBack(V),C.push(V),g=Math.min(g,V),m=Math.max(m,V)}};for(const O of s){let D=0;for(const he of O)D+=he.length;const C=u.triangleSegments.prepareSegment(D,u.layoutVertexArray,u.indexArray),V=C.vertexLength,L=[],z=[],M=[],j=[],J=[],te=u.layoutVertexArray.length;for(const he of O){if(he.length===0)continue;he!==O[0]&&z.push(L.length/2);const se=u.lineSegments.prepareSegment(he.length,u.layoutVertexArray,u.lineIndexArray),ve=se.vertexLength;f&&J.push(u.layoutVertexArray.length-te),b(he[0],M,j),u.layoutVertexArray.emplaceBack(he[0].x,he[0].y),u.lineIndexArray.emplaceBack(ve+he.length-1,ve),L.push(he[0].x),L.push(he[0].y);for(let Ce=1;Ce<he.length;Ce++)b(he[Ce],M,j),u.layoutVertexArray.emplaceBack(he[Ce].x,he[Ce].y),u.lineIndexArray.emplaceBack(ve+Ce-1,ve+Ce),L.push(he[Ce].x),L.push(he[Ce].y);se.vertexLength+=he.length,se.primitiveLength+=he.length}const fe=NA(L,z);for(let he=0;he<fe.length;he+=3)u.indexArray.emplaceBack(V+fe[he],V+fe[he+1],V+fe[he+2]);if(f&&this.elevationMode==="hd-road-base"){const he=f.elevation.isTunnel(),se=f.elevation.safeArea,ve=this.elevatedStructures.addVertices(M,j);this.elevatedStructures.addTriangles(fe,ve,he);const Ce=J.length;if(Ce>0){for(let Ve=0;Ve<Ce-1;Ve++)this.elevatedStructures.addRenderableRing(f.index,J[Ve]+ve,J[Ve+1]-J[Ve],he,se);this.elevatedStructures.addRenderableRing(f.index,J[Ce-1]+ve,M.length-J[Ce-1],he,se)}}C.vertexLength+=D,C.primitiveLength+=fe.length/3}return[g,m]}getElevationFeature(s,u){if(!u)return;const f=+s.properties[Gf];return f!=null?u.find(g=>g.id===f):void 0}}let j1,G1,m0,g0;Pt(cy,"FillBucket",{omit:["layers","patternFeatures"]}),Pt(IA,"FillBufferData"),Pt(eh,"ElevatedStructures");class Z1{constructor(s,u,f,g){if(this.triangleCount=u.length/3,this.min=new Nt(0,0),this.max=new Nt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||s.length===0)return;const[m,_]=[s[0].clone(),s[0].clone()];for(let V=1;V<s.length;++V){const L=s[V];m.x=Math.min(m.x,L.x),m.y=Math.min(m.y,L.y),_.x=Math.max(_.x,L.x),_.y=Math.max(_.y,L.y)}if(g){const V=Math.ceil(Math.max(_.x-m.x,_.y-m.y)/g);f=Math.max(f,V)}if(f===0)return;this.min=m,this.max=_;const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const O=Math.max(b.x,b.y)/f;this.cellsX=Math.max(1,Math.ceil(b.x/O)),this.cellsY=Math.max(1,Math.ceil(b.y/O)),this.xScale=1/O,this.yScale=1/O;const D=[];for(let V=0;V<this.triangleCount;V++){const L=s[u[3*V+0]].sub(this.min),z=s[u[3*V+1]].sub(this.min),M=s[u[3*V+2]].sub(this.min),j=lf(Math.floor(Math.min(L.x,z.x,M.x)),this.xScale,this.cellsX),J=lf(Math.floor(Math.max(L.x,z.x,M.x)),this.xScale,this.cellsX),te=lf(Math.floor(Math.min(L.y,z.y,M.y)),this.yScale,this.cellsY),fe=lf(Math.floor(Math.max(L.y,z.y,M.y)),this.yScale,this.cellsY),he=new Nt(0,0),se=new Nt(0,0),ve=new Nt(0,0),Ce=new Nt(0,0);for(let Ve=te;Ve<=fe;++Ve){he.y=se.y=Ve*O,ve.y=Ce.y=(Ve+1)*O;for(let et=j;et<=J;++et)he.x=ve.x=et*O,se.x=Ce.x=(et+1)*O,(Qt(L,z,M,he,se,Ce)||Qt(L,z,M,he,Ce,ve))&&D.push({cellIdx:Ve*this.cellsX+et,triIdx:V})}}if(D.length===0)return;D.sort((V,L)=>V.cellIdx-L.cellIdx||V.triIdx-L.triIdx);let C=0;for(;C<D.length;){const V=D[C].cellIdx,L={start:this.payload.length,len:0};for(;C<D.length&&D[C].cellIdx===V;)++L.len,this.payload.push(D[C++].triIdx);this.cells[V]=L}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(s,u){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>s.x||s.y>this.max.y||this.min.y>s.y)return;const f=lf(s.x-this.min.x,this.xScale,this.cellsX),g=lf(s.y-this.min.y,this.yScale,this.cellsY),m=this.cells[g*this.cellsX+f];if(m){this._lazyInitLookup();for(let _=0;_<m.len;_++){const b=this.payload[m.start+_],O=Math.floor(b/8),D=1<<b%8;if(!(this.lookup[O]&D)&&(this.lookup[O]|=D,u.push(b),u.length===this.triangleCount))return}}}query(s,u,f){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>u.x||s.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const g=lf(s.x-this.min.x,this.xScale,this.cellsX),m=lf(u.x-this.min.x,this.xScale,this.cellsX),_=lf(s.y-this.min.y,this.yScale,this.cellsY),b=lf(u.y-this.min.y,this.yScale,this.cellsY);for(let O=_;O<=b;O++)for(let D=g;D<=m;D++){const C=this.cells[O*this.cellsX+D];if(C)for(let V=0;V<C.len;V++){const L=this.payload[C.start+V],z=Math.floor(L/8),M=1<<L%8;if(!(this.lookup[z]&M)&&(this.lookup[z]|=M,f.push(L),f.length===this.triangleCount))return}}}}function lf(h,s,u){return Math.max(0,Math.min(u-1,Math.floor(h*s)))}Pt(Z1,"TriangleGridIndex");class IC{constructor(s){this.zoom=s.zoom,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[]}updateFootprints(s,u){for(const f of this.footprints)u.push({footprint:f,id:s})}populate(s,u,f,g){const m=[];for(const{feature:_,id:b,index:O,sourceLayerIndex:D}of s){const C=this.layers[0]._featureFilter.needGeometry,V=Y(_,C);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),V,f))continue;const L={id:b,properties:_.properties,type:_.type,sourceLayerIndex:D,index:O,geometry:C?V.geometry:K(_,f,g),patterns:{}};m.push(L)}for(const _ of m){const{geometry:b,index:O,sourceLayerIndex:D}=_;this.addFeature(_,b,O,f,{},u.availableImages,u.brightness),u.featureIndex.insert(s[O].feature,b,O,D,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(s){}update(s,u,f,g,m,_,b){}destroy(){}addFeature(s,u,f,g,m,_=[],b){for(const O of zA(u,2)){const D=[],C=[],V=[],L=new Nt(1/0,1/0),z=new Nt(-1/0,-1/0);for(const J of O)if(J.length!==0){J!==O[0]&&V.push(C.length/2);for(let te=0;te<J.length;te++)C.push(J[te].x),C.push(J[te].y),D.push(J[te]),L.x=Math.min(L.x,J[te].x),L.y=Math.min(L.y,J[te].y),z.x=Math.max(z.x,J[te].x),z.y=Math.max(z.y,J[te].y)}const M=NA(C,V),j=new Z1(D,M,8,256);this.footprints.push({vertices:D,indices:M,grid:j,min:L,max:z})}}}Pt(IC,"ClipBucket",{omit:["layers"]});const LC=Dn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),pE=Dn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),mE=Dn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),q1=Dn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),H1=Dn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),gE=Dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:yE}=LC;class ju extends Nt{constructor(s,u,f){super(s,u),this.z=f}}class $1 extends ju{constructor(s,u,f,g){super(s,u,f),this.w=g}}function LA(h,s,u,f){const g=[],m=f===0?(_,b,O,D,C,V)=>{_.push(new Nt(V,O+(V-b)/(D-b)*(C-O)))}:(_,b,O,D,C,V)=>{_.push(new Nt(b+(V-O)/(C-O)*(D-b),V))};for(const _ of h){const b=[];for(const O of _){if(O.length<=2)continue;const D=[];for(let L=0;L<O.length-1;L++){const z=O[L].x,M=O[L].y,j=O[L+1].x,J=O[L+1].y,te=f===0?z:M,fe=f===0?j:J;te<s?fe>s&&m(D,z,M,j,J,s):te>u?fe<u&&m(D,z,M,j,J,u):D.push(O[L]),fe<s&&te>=s&&m(D,z,M,j,J,s),fe>u&&te<=u&&m(D,z,M,j,J,u)}let C=O[O.length-1];const V=f===0?C.x:C.y;V>=s&&V<=u&&D.push(C),D.length&&(C=D[D.length-1],D[0].x===C.x&&D[0].y===C.y||D.push(D[0]),b.push(D))}b.length&&g.push(b)}return g}function th(h,s,u,f){const g=u==="x"?"y":"x",m=(f-h[u])/(s[u]-h[u]);h[g]=h[g]+(s[g]-h[g])*m,h[u]=f,h.hasOwnProperty("z")&&(h.z=vr(h.z,s.z,m)),h.hasOwnProperty("w")&&(h.w=vr(h.w,s.w,m))}function K1(h,s,u,f){const g=u,m=f;for(const _ of["x","y"]){let b=h,O=s;b[_]>=O[_]&&(b=s,O=h),b[_]<g&&O[_]>g&&th(b,O,_,g),b[_]<m&&O[_]>m&&th(O,b,_,m)}}const mg=Number.MAX_SAFE_INTEGER;function qf(h,s,u,f){return h.order<s||h.order===mg||!(h.clipMask&u)||function(g,m){return m.length!==0&&m.find(_=>_===g)===void 0}(f,h.clipScope)}function y0(h,s){return h.x-s.x||h.y-s.y}function FC(h,s){return y0(h.min,s.min)===0&&y0(h.max,s.max)===0}function _m(h,s){return!(h.min.x>s.max.x||h.max.x<s.min.x||h.min.y>s.max.y||h.max.y<s.min.y)}function A0(h,s){if(h.length!==s.length)return!1;for(let u=0;u<h.length;u++)if(h[u].sourceId!==s[u].sourceId||!FC(h[u],s[u])||h[u].order!==s[u].order||h[u].clipMask!==s[u].clipMask||!Ht(h[u].clipScope,s[u].clipScope))return!1;return!0}function kC(h,s,u){const f=1/Da,g=1/(1<<u.canonical.z),m=(s.x*f+u.canonical.x)*g+u.wrap,_=(s.y*f+u.canonical.y)*g;return{min:new Nt((h.x*f+u.canonical.x)*g+u.wrap,(h.y*f+u.canonical.y)*g),max:new Nt(m,_)}}function AE(h,s,u){const f=1<<u.canonical.z,g=((s.x-u.wrap)*f-u.canonical.x)*Da,m=(s.y*f-u.canonical.y)*Da;return{min:new Nt(((h.x-u.wrap)*f-u.canonical.x)*Da,(h.y*f-u.canonical.y)*Da),max:new Nt(g,m)}}function UC(h,s,u,f,g,m,_){const b=h.indices,O=h.vertices,D=[];for(let C=f;C<f+g;C+=3){const V=s[u[C+0]+m],L=s[u[C+1]+m],z=s[u[C+2]+m],M=Math.min(V.x,L.x,z.x),j=Math.max(V.x,L.x,z.x),J=Math.min(V.y,L.y,z.y),te=Math.max(V.y,L.y,z.y);D.length=0,h.grid.query(new Nt(M,J),new Nt(j,te),D);for(let fe=0;fe<D.length;fe++){const he=D[fe];if(Qt(O[b[3*he+0]],O[b[3*he+1]],O[b[3*he+2]],V,L,z,_))return!0}}return!1}function BC(h,s,u,f){if(!h||!u)return!1;let g=h.vertices;if(!s.canonical.equals(f.canonical)||s.wrap!==f.wrap){if(u.vertices.length<h.vertices.length)return BC(u,f,h,s);const m=s.canonical,_=f.canonical,b=Math.pow(2,_.z-m.z);g=h.vertices.map(O=>new Nt((O.x+m.x*Da)*b-_.x*Da,(O.y+m.y*Da)*b-_.y*Da))}return UC(u,g,h.indices,0,h.indices.length,0,0)}function jC(h,s,u,f){const g=Math.pow(2,f.z-u.z);return new Nt((h+u.x*Da)*g-f.x*Da,(s+u.y*Da)*g-f.y*Da)}function GC(h,s){const u=[];s.grid.queryPoint(h,u);const f=s.indices,g=s.vertices;for(let m=0;m<u.length;m++){const _=u[m];if(ot([g[f[3*_+0]],g[f[3*_+1]],g[f[3*_+2]]],h))return!0}return!1}const W1=[new Nt(0,0),new Nt(Da,0),new Nt(Da,Da),new Nt(0,Da)];function Y1(h,s){const u=[];let f=[];if(!s||h.length<2)return[h];if(h.length===2)return vt(h[0],h[1],W1)?[h]:[];for(let g=0;g<h.length+2;g++){const m=h[g%h.length],_=h[(g+1)%h.length],b=vt(g===0?h[h.length-1]:h[(g-1)%h.length],m,W1),O=vt(m,_,W1),D=b||O;D&&f.push(m),D&&O||f.length>0&&(f.length>1&&u.push(f),f=[])}return f.length>1&&u.push(f),u}const wm=Lh.VectorTileFeature.types,FA=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],ZC=["fill-extrusion-flood-light-ground-radius"],vE=Math.pow(2,13),dy=Math.pow(2,15)-1,hy=new Nt(0,1),Pp=2147483648;function Rm(h,s,u,f,g,m,_,b){h.emplaceBack((s<<1)+_,(u<<1)+m,(Math.floor(f*vE)<<1)+g,Math.round(b))}function gg(h,s,u){h.emplaceBack(s.x*Da,s.y*Da,u?1:0)}function fy(h,s,u,f,g,m){h.emplaceBack(s.x,s.y,(u.x<<1)+f,(u.y<<1)+g,m)}function Tm(h,s,u){h.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}class X1{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class J1{constructor(){this.centroidXY=new Nt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Nt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Nt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Nt(this.max.x-this.min.x,this.max.y-this.min.y)}}class qC{constructor(){this.acc=new Nt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(s,u){s.min.x===Number.MAX_VALUE&&(s.min.x=s.max.x=u.x,s.min.y=s.max.y=u.y)}appendEdge(s,u,f){this.accCount++,this.acc._add(u);let g=!!this.borders;u.x<s.min.x?(s.min.x=u.x,g=!0):u.x>s.max.x&&(s.max.x=u.x,g=!0),u.y<s.min.y?(s.min.y=u.y,g=!0):u.y>s.max.y&&(s.max.y=u.y,g=!0),((u.x===0||u.x===Da)&&u.x===f.x)!=((u.y===0||u.y===Da)&&u.y===f.y)&&this.processBorderOverlap(u,f),g&&this.checkBorderIntersection(u,f)}checkBorderIntersection(s,u){u.x<0!=s.x<0&&this.addBorderIntersection(0,vr(u.y,s.y,(0-u.x)/(s.x-u.x))),u.x>Da!=s.x>Da&&this.addBorderIntersection(1,vr(u.y,s.y,(Da-u.x)/(s.x-u.x))),u.y<0!=s.y<0&&this.addBorderIntersection(2,vr(u.x,s.x,(0-u.y)/(s.y-u.y))),u.y>Da!=s.y>Da&&this.addBorderIntersection(3,vr(u.x,s.x,(Da-u.y)/(s.y-u.y)))}addBorderIntersection(s,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[s];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(s,u){if(s.x===u.x){if(s.y===u.y)return;const f=s.x===0?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,s.y)}else{const f=s.y===0?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,s.x)}}centroid(){return this.accCount===0?new Nt(0,0):new Nt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((s,u)=>s+ +(u[0]!==Number.MAX_VALUE),0):0}}function Q1(h,s){const u=h.add(s)._unit(),f=Ia(h.x*u.x+h.y*u.y,-1,1);var g,m,_;return _=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(_)))/4*dy*((g=h).x*(m=s).y-g.y*m.x<0?-1:1)}const kA=[h=>h.x<0,h=>h.x>Da,h=>h.y<0,h=>h.y>Da];function _E(h,s,u,f){const g=[4];if(f===0)return g;u._mult(f);const m=h.sub(u),_=s.sub(u),b=[h,s,m,_];for(let O=0;O<4;O++)for(const D of b)if(kA[O](D)){g.push(O);break}return g}class HC{constructor(s){this.vertexArray=new jl,this.indexArray=new Ls,this.programConfigurations=new zh(s.layers,{zoom:s.zoom,lut:s.lut},u=>ZC.includes(u)),this._segments=new Gi,this.hiddenByLandmarkVertexArray=new Yg,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Gi}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(s,u,f,g=!1){const m=s.length;if(m>2){let _=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let O;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const D=s[0],C=s[1];O=Q1(D.sub(s[m-1])._perp()._unit(),C.sub(D)._perp()._unit())}for(let D=0;D<m;D++){const C=D===m-1?0:D+1,V=s[D],L=s[C],z=s[C===m-1?0:C+1],M=L.sub(V)._perp()._unit(),j=Q1(M,z.sub(L)._perp()._unit()),J=O,te=j;if(ew(V,L,u)||g&&py(V,u)&&py(L,u)){O=j;continue}const fe=b.vertexLength;fy(this.vertexArray,V,L,1,1,J),fy(this.vertexArray,V,L,1,0,J),fy(this.vertexArray,V,L,0,1,te),fy(this.vertexArray,V,L,0,0,te),b.vertexLength+=4;const he=_E(V,L,M,f);for(const se of he)this._segmentToGroundQuads[_].push({id:fe,region:se}),this._segmentToRegionTriCounts[_][se]+=2,b.primitiveLength+=2;O=j}}}prepareBorderSegments(){if(!this.hasData())return;const s=this._segments.get(),u=s.length;for(let f=0;f<u;f++)this._segmentToGroundQuads[f].sort((g,m)=>g.region-m.region);for(let f=0;f<u;f++){const g=this._segmentToGroundQuads[f],m=s[f],_=this._segmentToRegionTriCounts[f];_.reduce((O,D)=>O+D,0);let b=0;for(let O=0;O<=4;O++){const D=_[O];if(D!==0){let C=this.regionSegments[O];C||(C=this.regionSegments[O]=new Gi);const V={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+b,vertexLength:m.vertexLength,primitiveLength:D};C.get().push(V)}b+=D}for(let O=0;O<g.length;O++){const D=g[O].id;this.indexArray.emplaceBack(D,D+1,D+3),this.indexArray.emplaceBack(D,D+3,D+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(s,u,f,g,m,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,s,u,f,g,m,_)}upload(s){this.hasData()&&(this.vertexBuffer=s.createVertexBuffer(this.vertexArray,pE.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}uploadPaintProperties(s){this.hasData()&&this.programConfigurations.upload(s)}update(s,u,f,g,m,_,b){this.hasData()&&this.programConfigurations.updatePaintArrays(s,u,f,g,m,_,b)}updateHiddenByLandmark(s){if(!this.hasData())return;const u=s.groundVertexCount+s.groundVertexArrayOffset;if(s.groundVertexCount===0)return;const f=s.flags&Pp?1:0;for(let g=s.groundVertexArrayOffset;g<u;++g)this.hiddenByLandmarkVertexArray.emplace(g,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(s){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=s.createVertexBuffer(this.hiddenByLandmarkVertexArray,H1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let s=0;s<=4;s++){const u=this.regionSegments[s];u&&u.destroy()}}}}class v0{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.pixelRatio=s.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ls,this.footprintVertices=new Iu,this.footprintSegments=[],this.layoutVertexArray=new Lu,this.centroidVertexArray=new Ap,this.wallVertexArray=new wA,this.indexArray=new Ls,this.programConfigurations=new zh(s.layers,{zoom:s.zoom,lut:s.lut},u=>FA.includes(u)),this.segments=new Gi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new HC(s),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(s,u){}populate(s,u,f,g){this.features=[],this.hasPattern=DA("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=y(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:_,index:b,sourceLayerIndex:O}of s){const D=this.layers[0]._featureFilter.needGeometry,C=Y(m,D);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),C,f))continue;const V={id:_,sourceLayerIndex:O,index:b,geometry:D?C.geometry:K(m,f,g),properties:m.properties,type:m.type,patterns:{}},L=this.layoutVertexArray.length,z=wm[V.type]==="Polygon";if(this.hasPattern)this.features.push(MA("fill-extrusion",this.layers,V,this.zoom,this.pixelRatio,u));else if(this.wallMode)for(const M of V.geometry)for(const j of Y1(M,z))this.addFeature(V,[j],b,f,{},u.availableImages,g,u.brightness);else this.addFeature(V,V.geometry,b,f,{},u.availableImages,g,u.brightness);u.featureIndex.insert(m,V.geometry,b,O,this.index,L)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(s,u,f,g,m,_){for(const b of this.features){const O=wm[b.type]==="Polygon",{geometry:D}=b;if(this.wallMode)for(const C of D)for(const V of Y1(C,O))this.addFeature(b,[V],b.index,u,f,g,m,_);else this.addFeature(b,D,b.index,u,f,g,m,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b),this.groundEffect.update(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,yE),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.wallVertexBuffer=s.createVertexBuffer(this.wallVertexArray,q1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,gE.members,!0)),this.groundEffect.upload(s)),this.groundEffect.uploadPaintProperties(s),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){this.groundEffect.uploadHiddenByLandmark(s),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,mE.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,f,g,m,_,b,O){const D=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(s,{})/this.tileToMeter,C=[new Nt(0,0),new Nt(Da,Da)],V=b.projection,L=V.name==="globe",z=this.wallMode||wm[s.type]==="Polygon",M=new qC;M.centroidDataIndex=this.centroidData.length;const j=new J1,J=this.layers[0].paint.get("fill-extrusion-base").evaluate(s,{},g)<=0,te=this.layers[0].paint.get("fill-extrusion-height").evaluate(s,{},g);let fe;if(j.height=te,j.vertexArrayOffset=this.layoutVertexArray.length,j.groundVertexArrayOffset=this.groundEffect.vertexArray.length,L&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new mp),this.wallMode){if(L)return void Yr("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;fe=function(Xe){const gt=Xe[0].x===Xe[Xe.length-1].x&&Xe[0].y===Xe[Xe.length-1].y;(function(Ma){let Ra=0;const Sr=Ma.length;for(let Xa=0;Xa<Sr;Xa++)Ra+=(Ma[(Xa+1)%Sr].x-Ma[Xa].x)*(Ma[(Xa+1)%Sr].y+Ma[Xa].y);return Ra>=0})(Xe)||(Xe=Xe.reverse());const _t={geometry:[],joinNormals:[],indices:[]},xt=[],Ct=[],Mt=[];let Ot=Xe.length;for(;Ot>=2&&Xe[Ot-1].equals(Xe[Ot-2]);)Ot--;if(Ot<(gt?3:2))return _t;let jt,Ft,$t,_a,ya,Qa=0;for(;Qa<Ot-1&&Xe[Qa].equals(Xe[Qa+1]);)Qa++;gt&&(jt=Xe[Ot-2],ya=Xe[Qa].sub(jt)._unit()._perp());for(let Ma=Qa;Ma<Ot;Ma++){if($t=Ma===Ot-1?gt?Xe[Qa+1]:void 0:Xe[Ma+1],$t&&Xe[Ma].equals($t))continue;ya&&(_a=ya),jt&&(Ft=jt),jt=Xe[Ma],ya=$t?$t.sub(jt)._unit()._perp():_a,_a=_a||ya;let Ra=_a.add(ya);Ra.x===0&&Ra.y===0||Ra._unit();const Sr=Ra.x*ya.x+Ra.y*ya.y,Xa=Sr!==0?1/Sr:1/0,hr=_a.x*ya.y-_a.y*ya.x>0;let Ur="miter";const ln=2;Ur==="miter"&&Xa>ln&&(Ur="bevel"),Ur==="bevel"&&(Xa>100&&(Ur="flipbevel"),Xa<ln&&(Ur="miter"));const $r=(_n,on,En,Jn)=>{const Fi=new Nt(_n.x,_n.y),Gr=new Nt(_n.x,_n.y);Fi.x+=on.x*Jn,Fi.y+=on.y*Jn,Gr.x-=on.x*Math.max(En,1),Gr.y-=on.y*Math.max(En,1),Mt.push(on),xt.push(Fi),Ct.push(Gr)};if(Ur==="miter")Ra._mult(Xa),$r(jt,Ra,0,0);else if(Ur==="flipbevel")Ra=ya.mult(-1),$r(jt,Ra,0,0),$r(jt,Ra.mult(-1),0,0);else{const _n=-Math.sqrt(Xa*Xa-1),on=hr?_n:0,En=hr?0:_n;Ft&&$r(jt,_a,on,En),$t&&$r(jt,ya,on,En)}}_t.geometry=[...xt,...Ct.reverse(),xt[0]],_t.joinNormals=[...Mt,...Mt.reverse(),Mt[Mt.length-1]];const Na=_t.geometry.length-1;for(let Ma=0;Ma<Na/2;Ma++)if(Ma+1<Na/2){let Ra=Ma,Sr=Ma+1,Xa=Na-1-Ma,hr=Na-2-Ma;Ra=Ra===0?Na-1:Ra-1,Sr=Sr===0?Na-1:Sr-1,Xa=Xa===0?Na-1:Xa-1,hr=hr===0?Na-1:hr-1,_t.indices.push(Xa),_t.indices.push(Sr),_t.indices.push(Ra),_t.indices.push(Xa),_t.indices.push(hr),_t.indices.push(Sr)}return _t}(u[0]),u=[fe.geometry]}const he=(Xe,gt)=>Xe<(gt.length-1)/2||Xe===gt.length-1,se=this.wallMode?[u]:zA(u,500);for(let Xe=se.length-1;Xe>=0;Xe--){const gt=se[Xe];(gt.length===0||(ve=gt[0]).every(tt=>tt.x<=0)||ve.every(tt=>tt.x>=Da)||ve.every(tt=>tt.y<=0)||ve.every(tt=>tt.y>=Da))&&se.splice(Xe,1)}var ve;let Ce;if(L)Ce=rw(se,C,g);else{Ce=[];for(const Xe of se)Ce.push({polygon:Xe,bounds:C})}const Ve=z?this.edgeRadius:0,et=Ve>0&&this.zoom<17,Ye=(Xe,gt)=>{if(Xe.length===0)return!1;const tt=Xe[Xe.length-1];return gt.x===tt.x&&gt.y===tt.y};for(const{polygon:Xe,bounds:gt}of Ce){let tt=0,_t=0;for(const Ot of Xe)z&&!Ot[0].equals(Ot[Ot.length-1])&&Ot.push(Ot[0]),_t+=z?Ot.length-1:Ot.length;const xt=this.segments.prepareSegment((z?5:4)*_t,this.layoutVertexArray,this.indexArray);j.footprintSegIdx<0&&(j.footprintSegIdx=this.footprintSegments.length),j.polygonSegIdx<0&&(j.polygonSegIdx=this.polygonSegments.length);const Ct={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Mt=new X1;if(Mt.vertexOffset=this.footprintVertices.length,Mt.indexOffset=3*this.footprintIndices.length,Mt.ringIndices=[],z){const Ot=[],jt=[];tt=xt.vertexLength;for(let $t=0;$t<Xe.length;$t++){const _a=Xe[$t];_a.length&&$t!==0&&jt.push(Ot.length/2);const ya=[];let Qa,Na;Qa=_a[1].sub(_a[0])._perp()._unit(),Mt.ringIndices.push(_a.length-1);for(let Ma=1;Ma<_a.length;Ma++){const Ra=_a[Ma],Sr=_a[Ma===_a.length-1?1:Ma+1],Xa=Ra.clone();if(Ve){Na=Sr.sub(Ra)._perp()._unit();const hr=Qa.add(Na)._unit(),Ur=Ve*Math.min(4,1/(Qa.x*hr.x+Qa.y*hr.y));Xa.x+=Ur*hr.x,Xa.y+=Ur*hr.y,Xa.x=Math.round(Xa.x),Xa.y=Math.round(Xa.y),Qa=Na}if(!J||Ve!==0&&!et||Ye(ya,Xa)||ya.push(Xa),Rm(this.layoutVertexArray,Xa.x,Xa.y,0,0,1,1,0),this.wallMode){const hr=he(Ma,_a);gg(this.wallVertexArray,fe.joinNormals[Ma],!hr)}xt.vertexLength++,this.footprintVertices.emplaceBack(Ra.x,Ra.y),Ot.push(Ra.x,Ra.y),L&&Tm(this.layoutVertexExtArray,V.projectTilePoint(Xa.x,Xa.y,g),V.upVector(g,Xa.x,Xa.y))}J&&(Ve===0||et)&&(ya.length!==0&&Ye(ya,ya[0])&&ya.pop(),this.groundEffect.addData(ya,gt,D))}const Ft=this.wallMode?fe.indices:NA(Ot,jt);for(let $t=0;$t<Ft.length;$t+=3)this.footprintIndices.emplaceBack(Mt.vertexOffset+Ft[$t+0],Mt.vertexOffset+Ft[$t+1],Mt.vertexOffset+Ft[$t+2]),this.indexArray.emplaceBack(tt+Ft[$t],tt+Ft[$t+2],tt+Ft[$t+1]),xt.primitiveLength++;Mt.indexCount+=Ft.length,Mt.vertexCount+=this.footprintVertices.length-Mt.vertexOffset}for(let Ot=0;Ot<Xe.length;Ot++){const jt=Xe[Ot];M.startRing(j,jt[0]);let Ft=jt.length>4&&$C(jt[jt.length-2],jt[0],jt[1]),$t=Ve?_0(jt[jt.length-2],jt[0],jt[1],Ve):0;const _a=[];let ya,Qa,Na;Qa=jt[1].sub(jt[0])._perp()._unit();let Ma=!0;for(let Ra=1,Sr=0;Ra<jt.length;Ra++){let Xa=jt[Ra-1],hr=jt[Ra];const Ur=jt[Ra===jt.length-1?1:Ra+1];if(M.appendEdge(j,hr,Xa),ew(hr,Xa,gt)){Ve&&(Qa=Ur.sub(hr)._perp()._unit(),Ma=!Ma);continue}const ln=hr.sub(Xa)._perp(),$r=ln.x/(Math.abs(ln.x)+Math.abs(ln.y)),_n=ln.y>0?1:0,on=Xa.dist(hr);if(Sr+on>32768&&(Sr=0),Ve){Na=Ur.sub(hr)._perp()._unit();let Gr=w0(Xa,hr,Ur,UA(Qa,Na),Ve);isNaN(Gr)&&(Gr=0);const In=hr.sub(Xa)._unit();Xa=Xa.add(In.mult($t))._round(),hr=hr.add(In.mult(-Gr))._round(),$t=Gr,Qa=Na,J&&this.zoom>=17&&(Ye(_a,Xa)||_a.push(Xa),Ye(_a,hr)||_a.push(hr))}const En=xt.vertexLength,Jn=jt.length>4&&$C(Xa,hr,Ur);let Fi=tw(Sr,Ft,Ma);if(Rm(this.layoutVertexArray,Xa.x,Xa.y,$r,_n,0,0,Fi),Rm(this.layoutVertexArray,Xa.x,Xa.y,$r,_n,0,1,Fi),this.wallMode){const Gr=he(Ra-1,jt),In=fe.joinNormals[Ra-1];gg(this.wallVertexArray,In,Gr),gg(this.wallVertexArray,In,Gr)}if(Sr+=on,Fi=tw(Sr,Jn,!Ma),Ft=Jn,Rm(this.layoutVertexArray,hr.x,hr.y,$r,_n,0,0,Fi),Rm(this.layoutVertexArray,hr.x,hr.y,$r,_n,0,1,Fi),this.wallMode){const Gr=he(Ra,jt),In=fe.joinNormals[Ra];gg(this.wallVertexArray,In,Gr),gg(this.wallVertexArray,In,Gr)}if(xt.vertexLength+=4,this.indexArray.emplaceBack(En+0,En+1,En+2),this.indexArray.emplaceBack(En+1,En+3,En+2),xt.primitiveLength+=2,Ve){const Gr=tt+(Ra===1?jt.length-2:Ra-2),In=Ra===1?tt:Gr+1;if(this.indexArray.emplaceBack(En+1,Gr,En+3),this.indexArray.emplaceBack(Gr,In,En+3),xt.primitiveLength+=2,ya===void 0&&(ya=En),!ew(Ur,jt[Ra],gt)){const is=Ra===jt.length-1?ya:xt.vertexLength;this.indexArray.emplaceBack(En+2,En+3,is),this.indexArray.emplaceBack(En+3,is+1,is),this.indexArray.emplaceBack(En+3,In,is+1),xt.primitiveLength+=3}Ma=!Ma}if(L){const Gr=this.layoutVertexExtArray,In=V.projectTilePoint(Xa.x,Xa.y,g),is=V.projectTilePoint(hr.x,hr.y,g),ms=V.upVector(g,Xa.x,Xa.y),bs=V.upVector(g,hr.x,hr.y);Tm(Gr,In,ms),Tm(Gr,In,ms),Tm(Gr,is,bs),Tm(Gr,is,bs)}}z&&(tt+=jt.length-1),J&&Ve&&this.zoom>=17&&(_a.length!==0&&Ye(_a,_a[0])&&_a.pop(),this.groundEffect.addData(_a,gt,D,Ve>0))}this.footprintSegments.push(Mt),Ct.triangleCount=this.indexArray.length-Ct.triangleArrayOffset,this.polygonSegments.push(Ct),++j.footprintSegLen,++j.polygonSegLen}if(j.vertexCount=this.layoutVertexArray.length-j.vertexArrayOffset,j.groundVertexCount=this.groundEffect.vertexArray.length-j.groundVertexArrayOffset,j.vertexCount!==0){if(j.centroidXY=M.borders?hy:this.encodeCentroid(M,j),this.centroidData.push(j),M.borders){this.featuresOnBorder.push(M);const Xe=this.featuresOnBorder.length-1;for(let gt=0;gt<M.borders.length;gt++)M.borders[gt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[gt].push(Xe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,m,_,g,O),this.groundEffect.addPaintPropertiesData(s,f,m,_,g,O),this.maxHeight=Math.max(this.maxHeight,te)}}sortBorders(){for(let s=0;s<this.borderFeatureIndices.length;s++)this.borderFeatureIndices[s].sort((u,f)=>this.featuresOnBorder[u].borders[s][0]-this.featuresOnBorder[f].borders[s][0])}splitToSubtiles(){const s=[];for(let b=0;b<this.centroidData.length;b++){const O=this.centroidData[b],D=+(O.min.y+O.max.y>Da),C=2*D+(+(O.min.x+O.max.x>Da)^D);for(let V=0;V<O.polygonSegLen;V++){const L=O.polygonSegIdx+V;s.push({centroidIdx:b,subtile:C,polygonSegmentIdx:L,triangleSegmentIdx:this.polygonSegments[L].triangleSegIdx})}}const u=new Ls;s.sort((b,O)=>b.triangleSegmentIdx===O.triangleSegmentIdx?b.subtile-O.subtile:b.triangleSegmentIdx-O.triangleSegmentIdx);let f=0,g=0,m=0;for(const b of s){if(b.triangleSegmentIdx!==f)break;m++}const _=s.length;for(;g!==s.length;){f=s[g].triangleSegmentIdx;let b=0,O=g,D=g;for(let C=O;C<m&&s[C].subtile===b;C++)D++;for(;O!==m;){const C=s[O];b=C.subtile;const V=this.centroidData[C.centroidIdx].min.clone(),L=this.centroidData[C.centroidIdx].max.clone(),z={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let M=O;M<D;M++){const j=s[M],J=this.polygonSegments[j.polygonSegmentIdx],te=this.centroidData[j.centroidIdx].min,fe=this.centroidData[j.centroidIdx].max,he=this.indexArray.uint16;for(let se=J.triangleArrayOffset;se<J.triangleArrayOffset+J.triangleCount;se++)u.emplaceBack(he[3*se],he[3*se+1],he[3*se+2]);z.primitiveLength+=J.triangleCount,V.x=Math.min(V.x,te.x),V.y=Math.min(V.y,te.y),L.x=Math.max(L.x,fe.x),L.y=Math.max(L.y,fe.y)}z.primitiveLength>0&&this.triangleSubSegments.push({segment:z,min:V,max:L}),O=D;for(let M=O;M<m&&s[M].subtile===s[O].subtile;M++)D++}g=m;for(let C=g;C<_&&s[C].triangleSegmentIdx===s[g].triangleSegmentIdx;C++)m++}u._trim(),this.indexArray=u}getVisibleSegments(s,u,f){const g=new Gi;if(this.wallMode){for(const j of this.triangleSubSegments)g.segments.push(j.segment);return g}let m=0,_=0;const b=1<<s.canonical.z;if(u){const j=u.getMinMaxForTile(s);j&&(m=j.min,_=j.max)}_+=this.maxHeight;const O=s.toUnwrapped();let D;const C=[O.canonical.x/b+O.wrap,O.canonical.y/b],V=[(O.canonical.x+1)/b+O.wrap,(O.canonical.y+1)/b],L=(j,J,te)=>[j[0]*(1-te[0])+J[0]*te[0],j[1]*(1-te[1])+J[1]*te[1]],z=[],M=[];for(const j of this.triangleSubSegments){z[0]=j.min.x/Da,z[1]=j.min.y/Da,M[0]=j.max.x/Da,M[1]=j.max.y/Da;const J=L(C,V,z),te=L(C,V,M);if(new rr([J[0],J[1],m],[te[0],te[1],_]).intersectsPrecise(f)===0){D&&(g.segments.push(D),D=void 0);continue}const fe=j.segment;D&&D.vertexOffset!==fe.vertexOffset&&(g.segments.push(D),D=void 0),D?(D.vertexLength+=fe.vertexLength,D.primitiveLength+=fe.primitiveLength):D={vertexOffset:fe.vertexOffset,primitiveLength:fe.primitiveLength,vertexLength:fe.vertexLength,primitiveOffset:fe.primitiveOffset,sortKey:void 0,vaos:{}}}return D&&g.segments.push(D),g}encodeCentroid(s,u){const f=s.centroid(),g=u.span(),m=Math.min(7,Math.round(g.x*this.tileToMeter/10)),_=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new Nt(Ia(f.x,1,Da-1)<<3|m,Ia(f.y,1,Da-1)<<3|_)}encodeBorderCentroid(s){if(!s.borders)return new Nt(0,0);const u=s.borders,f=Number.MAX_VALUE;if(u[0][0]!==f||u[1][0]!==f){const g=u[0][0]!==f?0:1;return new Nt(6|(u[0][0]!==f?0:65528),(u[g][0]+u[g][1])/2<<3|6)}{const g=u[2][0]!==f?2:3;return new Nt((u[g][0]+u[g][1])/2<<3|6,6|(u[2][0]!==f?0:65528))}}showCentroid(s){const u=this.centroidData[s.centroidDataIndex];u.flags&=Pp,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(s){this.groundEffect.updateHiddenByLandmark(s);const u=s.vertexArrayOffset,f=s.vertexCount+s.vertexArrayOffset,g=s.flags&Pp?hy:s.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==g.y||m!==g.x){for(let _=u;_<f;++_)this.centroidVertexArray.emplace(_,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const s of this.centroidData)this.writeCentroidToBuffer(s)}updateReplacement(s,u,f){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const g=u.getReplacementRegionsForTile(s.toUnwrapped());if(A0(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const m=[];for(const _ of this.activeReplacements){if(_.order<f)continue;const b=Math.max(1,Math.pow(2,_.footprintTileId.canonical.z-s.canonical.z));for(const O of this.centroidData)if(!(O.flags&Pp||_.min.x>O.max.x||O.min.x>_.max.x||_.min.y>O.max.y||O.min.y>_.max.y))for(let D=0;D<O.footprintSegLen;D++){const C=this.footprintSegments[O.footprintSegIdx+D];if(m.length=0,KC(this.footprintVertices,C.vertexOffset,C.vertexCount,_.footprintTileId.canonical,s.canonical,m),UC(_.footprint,m,this.footprintIndices.uint16,C.indexOffset,C.indexCount,-C.vertexOffset,-b)){O.flags|=Pp;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(s,u,f){let g=!1;for(let m=0;m<f.footprintSegLen;m++){const _=this.footprintSegments[f.footprintSegIdx+m];let b=0;for(const O of _.ringIndices){for(let D=b,C=O+b-1;D<O+b;C=D++){const V=this.footprintVertices.int16[2*(D+_.vertexOffset)+0],L=this.footprintVertices.int16[2*(D+_.vertexOffset)+1],z=this.footprintVertices.int16[2*(C+_.vertexOffset)+1];L>u!=z>u&&s<(this.footprintVertices.int16[2*(C+_.vertexOffset)+0]-V)*(u-L)/(z-L)+V&&(g=!g)}b=O}}return g}getHeightAtTileCoord(s,u){let f=Number.NEGATIVE_INFINITY,g=!0;const m=4*(s+Da)*Da+(u+Da);if(this.partLookup.hasOwnProperty(m)){const _=this.partLookup[m];return _?{height:_.height,hidden:!!(_.flags&Pp)}:void 0}for(const _ of this.centroidData)s>_.max.x||_.min.x>s||u>_.max.y||_.min.y>u||this.footprintContainsPoint(s,u,_)&&_&&_.height>f&&(f=_.height,this.partLookup[m]=_,g=!!(_.flags&Pp));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:g};this.partLookup[m]=void 0}}function UA(h,s){const u=h.add(s)._unit();return h.x*u.x+h.y*u.y}function _0(h,s,u,f){const g=s.sub(h)._perp()._unit(),m=u.sub(s)._perp()._unit();return w0(h,s,u,UA(g,m),f)}function w0(h,s,u,f,g){const m=Math.sqrt(1-f*f);return Math.min(h.dist(s)/3,s.dist(u)/3,g*m/f)}function ew(h,s,u){return h.x<u[0].x&&s.x<u[0].x||h.x>u[1].x&&s.x>u[1].x||h.y<u[0].y&&s.y<u[0].y||h.y>u[1].y&&s.y>u[1].y}function py(h,s){return h.x<s[0].x||h.x>s[1].x||h.y<s[0].y||h.y>s[1].y}function $C(h,s,u){if(h.x<0||h.x>=Da||s.x<0||s.x>=Da||u.x<0||u.x>=Da)return!1;const f=u.sub(s),g=f.perp(),m=h.sub(s);return(f.x*m.x+f.y*m.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(m.x*m.x+m.y*m.y))>-.866&&g.x*m.x+g.y*m.y<0}function tw(h,s,u){const f=s?2|h:-3&h;return u?1|f:-2&f}function aw(){const h=Math.PI/32,s=Math.tan(h),u=pl;return u*Math.sqrt(1+2*s*s)-u}function rw(h,s,u){const f=1<<u.z,g=Uu(u.x/f),m=Uu((u.x+1)/f),_=Ei(u.y/f),b=Ei((u.y+1)/f);return function(O,D,C,V,L=0,z){const M=[];if(!O.length||!C||!V)return M;const j=(Ce,Ve)=>{for(const et of Ce)M.push({polygon:et,bounds:Ve})},J=Math.ceil(Math.log2(C)),te=Math.ceil(Math.log2(V)),fe=J-te,he=[];for(let Ce=0;Ce<Math.abs(fe);Ce++)he.push(fe>0?0:1);for(let Ce=0;Ce<Math.min(J,te);Ce++)he.push(0),he.push(1);let se=O;if(se=LA(se,D[0].y-L,D[1].y+L,1),se=LA(se,D[0].x-L,D[1].x+L,0),!se.length)return M;const ve=[];for(he.length?ve.push({polygons:se,bounds:D,depth:0}):j(se,D);ve.length;){const Ce=ve.pop(),Ve=Ce.depth,et=he[Ve],Ye=Ce.bounds[0],Xe=Ce.bounds[1],gt=et===0?Ye.x:Ye.y,tt=et===0?Xe.x:Xe.y,_t=z?z(et,gt,tt):.5*(gt+tt),xt=LA(Ce.polygons,gt-L,_t+L,et),Ct=LA(Ce.polygons,_t-L,tt+L,et);if(xt.length){const Mt=[Ye,new Nt(et===0?_t:Xe.x,et===1?_t:Xe.y)];he.length>Ve+1?ve.push({polygons:xt,bounds:Mt,depth:Ve+1}):j(xt,Mt)}if(Ct.length){const Mt=[new Nt(et===0?_t:Ye.x,et===1?_t:Ye.y),Xe];he.length>Ve+1?ve.push({polygons:Ct,bounds:Mt,depth:Ve+1}):j(Ct,Mt)}}return M}(h,s,Math.ceil((m-g)/11.25),Math.ceil((_-b)/11.25),1,(O,D,C)=>{if(O===0)return .5*(D+C);{const V=Ei((u.y+D/Da)/f);return(Li(.5*(Ei((u.y+C/Da)/f)+V))*f-u.y)*Da}})}function KC(h,s,u,f,g,m){const _=Math.pow(2,f.z-g.z);for(let b=0;b<u;b++){let O=h.int16[2*(b+s)+0],D=h.int16[2*(b+s)+1];O=(O+g.x*Da)*_-f.x*Da,D=(D+g.y*Da)*_-f.y*Da,m.push(new Nt(O,D))}}let R0,nw;function Cm(h,s){return h.x*s.x+h.y*s.y}function WC(h,s){if(h.length===1){let u=0;const f=s[u++];let g;for(;!g||f.equals(g);)if(g=s[u++],!g)return 1/0;for(;u<s.length;u++){const m=s[u],_=h[0],b=g.sub(f),O=m.sub(f),D=_.sub(f),C=Cm(b,b),V=Cm(b,O),L=Cm(O,O),z=Cm(D,b),M=Cm(D,O),j=C*L-V*V,J=(L*z-V*M)/j,te=(C*M-V*z)/j,fe=f.z*(1-J-te)+g.z*J+m.z*te;if(isFinite(fe))return fe}return 1/0}{let u=1/0;for(const f of s)u=Math.min(u,f.z);return u}}function YC(h,s,u,f,g,m,_,b){const O=_*g.getElevationAt(h,s,!0,!0),D=m[0]!==0,C=D?m[1]===0?_*(m[0]/7-450):_*function(V,L,z){const M=Math.floor(L[0]/8),j=Math.floor(L[1]/8),J=10*(L[0]-8*M),te=10*(L[1]-8*j),fe=V.getElevationAt(M,j,!0,!0),he=V.getMeterToDEM(z),se=Math.floor(.5*(J*he-1)),ve=Math.floor(.5*(te*he-1)),Ce=V.tileCoordToPixel(M,j),Ve=2*se+1,et=2*ve+1,Ye=function(Ct,Mt,Ot,jt,Ft){return[Ct.getElevationAtPixel(Mt,Ot,!0),Ct.getElevationAtPixel(Mt+Ft,Ot,!0),Ct.getElevationAtPixel(Mt,Ot+Ft,!0),Ct.getElevationAtPixel(Mt+jt,Ot+Ft,!0)]}(V,Ce.x-se,Ce.y-ve,Ve,et),Xe=Math.abs(Ye[0]-Ye[1]),gt=Math.abs(Ye[2]-Ye[3]),tt=Math.abs(Ye[0]-Ye[2])+Math.abs(Ye[1]-Ye[3]),_t=Math.min(.25,.5*he*(Xe+gt)/Ve),xt=Math.min(.25,.5*he*tt/et);return fe+Math.max(_t*J,xt*te)}(g,m,b):O;return{base:O+(u===0?-1:u),top:D?Math.max(C+f,O+u+2):O+f}}Pt(v0,"FillExtrusionBucket",{omit:["layers","features"]}),Pt(J1,"PartData"),Pt(X1,"FootprintSegment"),Pt(qC,"BorderCentroidData"),Pt(HC,"GroundEffect");const iw=Dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),sw=Dn([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:T0}=iw,ow=Dn([{name:"a_packed",components:3,type:"Float32"}]),{members:XC}=ow,lw=Dn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Sm}=lw;class Ep{constructor(s,u){this.width=s,this.height=u,this.nextRow=0,this.image=new ym({width:s,height:u}),this.positions={},this.uploaded=!1}getDash(s,u){const f=this.getKey(s,u);return this.positions[f]}trim(){const s=this.width,u=this.height=ra(this.nextRow);this.image.resize({width:s,height:u})}getKey(s,u){return s.join(",")+u}getDashRanges(s,u,f){const g=[];let m=s.length%2==1?-s[s.length-1]*f:0,_=s[0]*f,b=!0;g.push({left:m,right:_,isDash:b,zeroLength:s[0]===0});let O=s[0];for(let D=1;D<s.length;D++){b=!b;const C=s[D];m=O*f,O+=C,_=O*f,g.push({left:m,right:_,isDash:b,zeroLength:C===0})}return g}addRoundDash(s,u,f){const g=u/2;for(let m=-f;m<=f;m++){const _=this.width*(this.nextRow+f+m);let b=0,O=s[b];for(let D=0;D<this.width;D++){D/O.right>1&&(O=s[++b]);const C=Math.abs(D-O.left),V=Math.abs(D-O.right),L=Math.min(C,V);let z;const M=m/f*(g+1);if(O.isDash){const j=g-Math.abs(M);z=Math.sqrt(L*L+j*j)}else z=g-Math.sqrt(L*L+M*M);this.image.data[_+D]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(s,u){for(let O=s.length-1;O>=0;--O){const D=s[O],C=s[O+1];D.zeroLength?s.splice(O,1):C&&C.isDash===D.isDash&&(C.left=D.left,s.splice(O,1))}const f=s[0],g=s[s.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const m=this.width*this.nextRow;let _=0,b=s[_];for(let O=0;O<this.width;O++){O/b.right>1&&(b=s[++_]);const D=Math.abs(O-b.left),C=Math.abs(O-b.right),V=Math.min(D,C);this.image.data[m+O]=Math.max(0,Math.min(255,(b.isDash?V:-V)+u+128))}}addDash(s,u){const f=this.getKey(s,u);if(this.positions[f])return this.positions[f];const g=u==="round",m=g?7:0,_=2*m+1;if(this.nextRow+_>this.height)return Yr("LineAtlas out of space"),null;s.length===0&&s.push(1);let b=0;for(let C=0;C<s.length;C++)s[C]<0&&(Yr("Negative value is found in line dasharray, replacing values with 0"),s[C]=0),b+=s[C];if(b!==0){const C=this.width/b,V=this.getDashRanges(s,this.width,C);g?this.addRoundDash(V,C,m):this.addRegularDash(V,u==="square"?.5*C:0)}const O=this.nextRow+m;this.nextRow+=_;const D={tl:[O,m],br:[b,0]};return this.positions[f]=D,D}}Pt(Ep,"LineAtlas");const bm=Lh.VectorTileFeature.types,BA=Math.cos(Math.PI/180*37.5),jA=Math.cos(Math.PI/180*5);class Hf{constructor(s){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=s.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=s.overscaling,this.pixelRatio=s.pixelRatio,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Mf,this.layoutVertexArray2=new Vo,this.patternVertexArray=new Vo,this.indexArray=new Ls,this.programConfigurations=new zh(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new Gi,this.maxLineLength=0,this.zOffsetVertexArray=new Vo,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=s.tessellationStep?s.tessellationStep:Da/64}updateFootprints(s,u){}populate(s,u,f,g){this.hasPattern=DA("line",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=y(f);const _=this.layers[0].layout.get("line-z-offset"),b=_.isConstant()&&!_.constantOr(0),O=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=O==="sea"||O==="ground"||!b&&O==="none",this.hasZOffset&&O==="none"&&Yr(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const D=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&D!==void 0;const C=[];for(const{feature:M,id:j,index:J,sourceLayerIndex:te}of s){const fe=this.layers[0]._featureFilter.needGeometry,he=Y(M,fe);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),he,f))continue;const se=m?m.evaluate(he,{},f):void 0,ve={id:j,properties:M.properties,type:M.type,sourceLayerIndex:te,index:J,geometry:fe?he.geometry:K(M,f,g),patterns:{},sortKey:se};C.push(ve)}m&&C.sort((M,j)=>M.sortKey-j.sortKey);const{lineAtlas:V,featureIndex:L}=u,z=this.addConstantDashes(V);for(const M of C){const{geometry:j,index:J,sourceLayerIndex:te}=M;if(z&&this.addFeatureDashes(M,V),this.hasPattern){const fe=MA("line",this.layers,M,this.zoom,this.pixelRatio,u);this.patternFeatures.push(fe)}else this.addFeature(M,j,J,f,V.positions,u.availableImages,u.brightness);L.insert(s[J].feature,j,J,te,this.index)}}addConstantDashes(s){let u=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,m=f.layout.get("line-cap").value;if(g.kind!=="constant"||m.kind!=="constant")u=!0;else{const _=m.value,b=g.value;if(!b)continue;s.addDash(b,_)}}return u}addFeatureDashes(s,u){const f=this.zoom;for(const g of this.layers){const m=g.paint.get("line-dasharray").value,_=g.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let b,O;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:f},s);O=_.kind==="constant"?_.value:_.evaluate({zoom:f},s),u.addDash(b,O),s.patterns[g.id]=u.getKey(b,O)}}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}addFeatures(s,u,f,g,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,g,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,XC)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=s.createVertexBuffer(this.patternVertexArray,Sm)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,sw.members,!0)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,T0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,f,g,m,_,b){const O=this.layers[0].layout,D=O.get("line-join").evaluate(s,{}),C=O.get("line-cap").evaluate(s,{}),V=O.get("line-miter-limit"),L=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(s),this.lineFeature=s,this.zOffsetValue=O.get("line-z-offset").value;const z=this.layers[0].paint.get("line-width").value;z.kind!=="constant"&&z.isLineProgressConstant===!1&&(this.variableWidthValue=z);for(const M of u)this.addLine(M,s,g,D,C,V,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,m,_,g,b)}addLine(s,u,f,g,m,_,b){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const O=g==="none";if(this.patternJoinNone=this.hasPattern&&O,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<s.length-1;he++)this.totalDistance+=s[he].dist(s[he+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=bm[u.type]==="Polygon";let C=s.length;for(;C>=2&&s[C-1].equals(s[C-2]);)C--;let V=0;for(;V<C-1&&s[V].equals(s[V+1]);)V++;if(C<(D?3:2))return;g==="bevel"&&(_=1.05);const L=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let z,M,j,J,te,fe;this.e1=this.e2=-1,D&&(z=s[C-2],te=s[V].sub(z)._unit()._perp());for(let he=V;he<C;he++){if(j=he===C-1?D?s[V+1]:void 0:s[he+1],j&&s[he].equals(j))continue;te&&(J=te),z&&(M=z),z=s[he],fe=this.evaluateLineProgressFeatures(M?M.dist(z):0),te=j?j.sub(z)._unit()._perp():J,J=J||te;const se=M&&j;let ve=se?g:D||O?"butt":m;const Ce=J.x*te.x+J.y*te.y;if(O){const xt=function(Ct){if(Ct.patternJoinNone){const Mt=Ct.segmentPoints.length/2,Ot=Ct.lineSoFar-Ct.segmentStart;for(let jt=0;jt<Mt;++jt){const Ft=Ct.segmentPoints[2*jt+1],$t=Math.round(Ct.segmentPoints[2*jt])+.5+.25*Ft;Ct.patternVertexArray.emplaceBack($t,Ot,Ct.segmentStart),Ct.patternVertexArray.emplaceBack($t,Ot,Ct.segmentStart)}Ct.segmentPoints.length=0}Ct.e1=Ct.e2=-1};if(se&&Ce<jA){this.updateDistance(M,z),this.addCurrentVertex(z,J,1,1,L,fe),xt(this),this.addCurrentVertex(z,te,-1,-1,L,fe);continue}if(M){if(!j){this.updateDistance(M,z),this.addCurrentVertex(z,J,1,1,L,fe),xt(this);continue}ve="miter"}}let Ve=J.add(te);Ve.x===0&&Ve.y===0||Ve._unit();const et=Ve.x*te.x+Ve.y*te.y,Ye=et!==0?1/et:1/0,Xe=2*Math.sqrt(2-2*et),gt=et<BA&&M&&j,tt=J.x*te.y-J.y*te.x>0,_t=this.overscaling<=16?15*Da/(512*this.overscaling):0;if(se&&ve==="round"){if(Ye<b)ve="miter";else if(Ye<=2){const xt=uw(z,-10,Da+10);ve=this.hasZOffset&&(xt||this.hasCrossSlope)?"miter":"fakeround"}}if(ve==="miter"&&Ye>_&&(ve="bevel"),ve==="bevel"&&(Ye>2&&(ve="flipbevel"),Ye<_&&(ve="miter")),M&&!(ve==="miter"&&gt)&&this.updateDistance(M,z),ve==="miter")if(gt){const xt=z.dist(M);if(xt>2*_t){const Mt=z.sub(z.sub(M)._mult(_t/xt)._round());this.updateDistance(M,Mt),this.addCurrentVertex(Mt,J,0,0,L,fe),M=Mt}this.updateDistance(M,z),Ve._mult(Ye),this.addCurrentVertex(z,Ve,0,0,L,fe);const Ct=z.dist(j);if(Ct>2*_t){const Mt=z.add(j.sub(z)._mult(_t/Ct)._round());this.updateDistance(z,Mt),this.addCurrentVertex(Mt,te,0,0,L,fe),z=Mt}}else Ve._mult(Ye),this.addCurrentVertex(z,Ve,0,0,L,fe);else if(ve==="flipbevel"){if(Ye>100)Ve=te.mult(-1);else{const xt=Ye*J.add(te).mag()/J.sub(te).mag();Ve._perp()._mult(xt*(tt?-1:1))}this.addCurrentVertex(z,Ve,0,0,L,fe),this.addCurrentVertex(z,Ve.mult(-1),0,0,L,fe)}else if(ve==="bevel"||ve==="fakeround"){fe!=null&&M&&this.addCurrentVertex(z,J,-1,-1,L,fe);const xt=z.dist(M)<=2*_t&&ve!=="bevel",Ct=Ve.mult(tt?1:-1);Ct._mult(Ye);const Mt=te.mult(tt?-1:1),Ot=J.mult(tt?-1:1),jt=this.evaluateLineProgressFeatures(this.distance);if(fe==null&&(this.addHalfVertex(z,Ct.x,Ct.y,!1,!tt,0,L,jt),xt||this.addHalfVertex(z,Ct.x+2*Ot.x,Ct.y+2*Ot.y,!1,tt,0,L,jt)),ve==="fakeround"){const Ft=Math.round(180*Xe/Math.PI/20);this.addHalfVertex(z,Ot.x,Ot.y,!1,tt,0,L,jt);for(let $t=0;$t<Ft;$t++){let _a=$t/Ft;if(_a!==.5){const Qa=_a-.5;_a+=_a*Qa*(_a-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*Qa*Qa+(.848013+Ce*(.215638*Ce-1.06021)))}const ya=Mt.sub(Ot)._mult(_a)._add(Ot)._unit();this.addHalfVertex(z,ya.x,ya.y,!1,tt,0,L,jt)}this.addHalfVertex(z,Mt.x,Mt.y,!1,tt,0,L,jt)}xt||fe!=null||this.addHalfVertex(z,Ct.x+2*Mt.x,Ct.y+2*Mt.y,!1,tt,0,L,jt),fe!=null&&j&&this.addCurrentVertex(z,te,1,1,L,fe)}else ve==="butt"?this.addCurrentVertex(z,Ve,0,0,L,fe):ve==="square"?(M||this.addCurrentVertex(z,Ve,-1,-1,L,fe),this.addCurrentVertex(z,Ve,0,0,L,fe),M&&this.addCurrentVertex(z,Ve,1,1,L,fe)):ve==="round"&&(M&&(this.addCurrentVertex(z,J,0,0,L,fe),this.addCurrentVertex(z,J,1,1,L,fe,!0)),j&&(this.addCurrentVertex(z,te,-1,-1,L,fe,!0),this.addCurrentVertex(z,te,0,0,L,fe)))}}addVerticesTo(s,u,f,g,m,_,b,O,D,C){const V=(u.w-s.w)/this.tessellationStep|0;let L=0;const z=this.scaledDistance;if(V>1){this.lineSoFar=s.w;const j=(u.x-s.x)/V,J=(u.y-s.y)/V,te=(u.z-s.z)/V,fe=(u.w-s.w)/V;for(let he=1;he<V;++he){s.x+=j,s.y+=J,s.z+=te,this.lineSoFar+=fe,L+=fe;const se=this.evaluateLineProgressFeatures(this.prevDistance+L);this.scaledDistance=(this.prevDistance+L)/this.totalDistance,this.addHalfVertex(s,f,g,C,!1,b,D,se),this.addHalfVertex(s,m,_,C,!0,-O,D,se)}}this.lineSoFar=u.w,this.scaledDistance=z;const M=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,f,g,C,!1,b,D,M),this.addHalfVertex(u,m,_,C,!0,-O,D,M)}evaluateLineProgressFeatures(s){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+s)/this.totalFeatureLength):Yr(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(s,u,f,g,m,_,b=!1){const O=u.x+u.y*f,D=u.y-u.x*f,C=u.y*g-u.x,V=-u.y-u.x*g;if(_!=null){const L=this.hasZOffset,z=-10,M=Da+10,j=_.zOffset,J=new $1(s.x,s.y,j,this.lineSoFar),te=!!L&&uw(s,z,M),fe=this.lineSoFar,he=this.distance;if(this.currentVertex)if(te){const se=this.currentVertexIsOutside,ve=this.currentVertex,Ce=new $1(s.x,s.y,j,this.lineSoFar);if(K1(ve,Ce,z,M),!uw(Ce,z,M)){if(se){this.e1=this.e2=-1,this.distance-=ve.dist(J),this.lineSoFar=ve.w;const Ve=this.evaluateLineProgressFeatures(ve.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ve,O,D,b,!1,f,m,Ve),this.addHalfVertex(ve,C,V,b,!0,-g,m,Ve),this.prevDistance=this.distance}this.distance=this.prevDistance+ve.dist(Ce),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(ve,Ce,O,D,C,V,f,g,m,b),this.distance=he,this.scaledDistance=this.distance/this.totalDistance}}else{const se=this.currentVertex;if(this.currentVertexIsOutside){K1(se,J,z,M),this.e1=this.e2=-1,this.distance-=se.dist(J),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=se.w;const ve=this.evaluateLineProgressFeatures(se.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(se,O,D,b,!1,f,m,ve),this.addHalfVertex(se,C,V,b,!0,-g,m,ve),this.prevDistance=this.distance,this.distance=he,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(se,J,O,D,C,V,f,g,m,b)}else te||(this.addHalfVertex(s,O,D,b,!1,f,m,_),this.addHalfVertex(s,C,V,b,!0,-g,m,_));this.currentVertex=J,this.currentVertexIsOutside=te,this.lineSoFar=fe}else this.addHalfVertex(s,O,D,b,!1,f,m,_),this.addHalfVertex(s,C,V,b,!0,-g,m,_)}addHalfVertex({x:s,y:u},f,g,m,_,b,O,D){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,b)),this.layoutVertexArray.emplaceBack((s<<1)+(m?1:0),(u<<1)+(_?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const V=vr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,V)}const C=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),O.primitiveLength++),_?this.e2=C:this.e1=C,D!=null&&this.zOffsetVertexArray.emplaceBack(D.zOffset,D.variableWidth,D.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(s,u){this.prevDistance=this.distance,this.distance+=s.dist(u),this.updateScaledDistance()}}function uw(h,s,u){return h.x<s||h.x>u||h.y<s||h.y>u}let cw,my;function JC(h,s,u){return s*(Da/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}Pt(Hf,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const dw=(h,s,u)=>(1-u)*h+u*s;function GA(h,s){return 1/JC(h,1,s.tileZoom)}function hw(h,s,u,f){return h.translatePosMatrix(f||s.tileID.projMatrix,s,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const QC=h=>{const s=[];ZA(h)&&s.push("RENDER_LINE_DASH"),h.paint.get("line-gradient")&&s.push("RENDER_LINE_GRADIENT");const u=h.paint.get("line-trim-offset");u[0]===0&&u[1]===0||s.push("RENDER_LINE_TRIM_OFFSET"),h.paint.get("line-border-width").constantOr(1)!==0&&s.push("RENDER_LINE_BORDER");const f=h.layout.get("line-join").constantOr("miter")==="none",g=!!h.paint.get("line-pattern").constantOr(1);return f&&g&&s.push("LINE_JOIN_NONE"),s};function ZA(h){const s=h.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}let gy;const fw=()=>gy||(gy={layout:cw||(cw=new ji({"line-cap":new Ga(qt.layout_line["line-cap"]),"line-join":new Ga(qt.layout_line["line-join"]),"line-miter-limit":new Pa(qt.layout_line["line-miter-limit"]),"line-round-limit":new Pa(qt.layout_line["line-round-limit"]),"line-sort-key":new Ga(qt.layout_line["line-sort-key"]),"line-z-offset":new Ga(qt.layout_line["line-z-offset"]),"line-elevation-reference":new Pa(qt.layout_line["line-elevation-reference"]),"line-cross-slope":new Pa(qt.layout_line["line-cross-slope"]),visibility:new Pa(qt.layout_line.visibility),"line-width-unit":new Pa(qt.layout_line["line-width-unit"])})),paint:my||(my=new ji({"line-opacity":new Ga(qt.paint_line["line-opacity"]),"line-color":new Ga(qt.paint_line["line-color"]),"line-translate":new Pa(qt.paint_line["line-translate"]),"line-translate-anchor":new Pa(qt.paint_line["line-translate-anchor"]),"line-width":new Ga(qt.paint_line["line-width"]),"line-gap-width":new Ga(qt.paint_line["line-gap-width"]),"line-offset":new Ga(qt.paint_line["line-offset"]),"line-blur":new Ga(qt.paint_line["line-blur"]),"line-dasharray":new Ga(qt.paint_line["line-dasharray"]),"line-pattern":new Ga(qt.paint_line["line-pattern"]),"line-gradient":new rs(qt.paint_line["line-gradient"]),"line-trim-offset":new Pa(qt.paint_line["line-trim-offset"]),"line-trim-fade-range":new Pa(qt.paint_line["line-trim-fade-range"]),"line-trim-color":new Pa(qt.paint_line["line-trim-color"]),"line-emissive-strength":new Pa(qt.paint_line["line-emissive-strength"]),"line-border-width":new Ga(qt.paint_line["line-border-width"]),"line-border-color":new Ga(qt.paint_line["line-border-color"]),"line-occlusion-opacity":new Pa(qt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},gy);class qA extends Ga{possiblyEvaluate(s,u){return u=new Pn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(s,u)}evaluate(s,u,f,g){return u=wr({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,f,g)}}let yg;function HA(h,s){return s>0?s+2*h:h}const eS=Dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wE=Dn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),C0=Dn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const p=Dn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),w=Dn([{name:"a_texb",components:2,type:"Uint16"}]),P=Dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),U=Dn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const X=Dn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ce=Dn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Dn([{name:"triangle",components:3,type:"Uint16"}]),Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Dn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),Dn([{type:"Float32",name:"offsetX"}]),Dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ge=24;const ft=128;function Bt(h,s,u,f,g){if(h.kind==="camera")return h.maxSize;if(h.kind==="composite"){const m=s.possiblyEvaluate(new Pn(h.maxZoom),u).evaluate(g,{},u),_=s.possiblyEvaluate(new Pn(h.minZoom),u).evaluate(g,{},u);return Math.max(m,_)}return s.possiblyEvaluate(new Pn(f)).evaluate(g,{},u)}function ca(h,s){const{expression:u}=s;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Pn(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=u;let m=0;for(;m<f.length&&f[m]<=h;)m++;m=Math.max(0,m-1);let _=m;for(;_<f.length&&f[_]<h+1;)_++;_=Math.min(f.length-1,_);const b=f[m],O=f[_];return u.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:O,interpolationType:g}:{kind:"camera",minZoom:b,maxZoom:O,minSize:u.evaluate(new Pn(b)),maxSize:u.evaluate(new Pn(O)),interpolationType:g}}}function $a(h,{uSize:s,uSizeT:u},{lowerSize:f,upperSize:g}){return h.kind==="source"?f/ft:h.kind==="composite"?vr(f/ft,g/ft,u):s}function sr(h,s,u=1){let f=0,g=0;if(h.kind==="constant")g=h.layoutSize*u;else if(h.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:b}=h,O=m?Ia(ts.interpolationFactor(m,s,_,b),0,1):0;h.kind==="camera"?g=vr(h.minSize,h.maxSize,O)*u:f=O*u}return{uSizeT:f,uSize:g}}var Ea=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ft,evaluateSizeForFeature:$a,evaluateSizeForZoom:sr,getRasterizedIconSize:Bt,getSizeData:ca});function Ka(h,s,u){return h.sections.forEach(f=>{f.text=function(g,m,_){const b=m.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?g=g.toLocaleUpperCase():b==="lowercase"&&(g=g.toLocaleLowerCase()),fs.applyArabicShaping&&(g=fs.applyArabicShaping(g)),g}(f.text,s,u)}),h}const sn={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function ni(h){return h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""}function Qo(h){return h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""}var va,oa,ba,tr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function rn(){return va||(va=1,tr.read=function(h,s,u,f,g){var m,_,b=8*g-f-1,O=(1<<b)-1,D=O>>1,C=-7,V=u?g-1:0,L=u?-1:1,z=h[s+V];for(V+=L,m=z&(1<<-C)-1,z>>=-C,C+=b;C>0;m=256*m+h[s+V],V+=L,C-=8);for(_=m&(1<<-C)-1,m>>=-C,C+=f;C>0;_=256*_+h[s+V],V+=L,C-=8);if(m===0)m=1-D;else{if(m===O)return _?NaN:1/0*(z?-1:1);_+=Math.pow(2,f),m-=D}return(z?-1:1)*_*Math.pow(2,m-f)},tr.write=function(h,s,u,f,g,m){var _,b,O,D=8*m-g-1,C=(1<<D)-1,V=C>>1,L=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,z=f?0:m-1,M=f?1:-1,j=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(b=isNaN(s)?1:0,_=C):(_=Math.floor(Math.log(s)/Math.LN2),s*(O=Math.pow(2,-_))<1&&(_--,O*=2),(s+=_+V>=1?L/O:L*Math.pow(2,1-V))*O>=2&&(_++,O/=2),_+V>=C?(b=0,_=C):_+V>=1?(b=(s*O-1)*Math.pow(2,g),_+=V):(b=s*Math.pow(2,V-1)*Math.pow(2,g),_=0));g>=8;h[u+z]=255&b,z+=M,b/=256,g-=8);for(_=_<<g|b,D+=g;D>0;h[u+z]=255&_,z+=M,_/=256,D-=8);h[u+z-M]|=128*j}),tr}function Ri(){if(ba)return oa;ba=1,oa=s;var h=rn();function s(se){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(se)?se:new Uint8Array(se||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var u=4294967296,f=1/u,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(se){return se.type===s.Bytes?se.readVarint()+se.pos:se.pos+1}function _(se,ve,Ce){return Ce?4294967296*ve+(se>>>0):4294967296*(ve>>>0)+(se>>>0)}function b(se,ve,Ce){var Ve=ve<=16383?1:ve<=2097151?2:ve<=268435455?3:Math.floor(Math.log(ve)/(7*Math.LN2));Ce.realloc(Ve);for(var et=Ce.pos-1;et>=se;et--)Ce.buf[et+Ve]=Ce.buf[et]}function O(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeVarint(se[Ce])}function D(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeSVarint(se[Ce])}function C(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeFloat(se[Ce])}function V(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeDouble(se[Ce])}function L(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeBoolean(se[Ce])}function z(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeFixed32(se[Ce])}function M(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeSFixed32(se[Ce])}function j(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeFixed64(se[Ce])}function J(se,ve){for(var Ce=0;Ce<se.length;Ce++)ve.writeSFixed64(se[Ce])}function te(se,ve){return(se[ve]|se[ve+1]<<8|se[ve+2]<<16)+16777216*se[ve+3]}function fe(se,ve,Ce){se[Ce]=ve,se[Ce+1]=ve>>>8,se[Ce+2]=ve>>>16,se[Ce+3]=ve>>>24}function he(se,ve){return(se[ve]|se[ve+1]<<8|se[ve+2]<<16)+(se[ve+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(se,ve,Ce){for(Ce=Ce||this.length;this.pos<Ce;){var Ve=this.readVarint(),et=Ve>>3,Ye=this.pos;this.type=7&Ve,se(et,ve,this),this.pos===Ye&&this.skip(Ve)}return ve},readMessage:function(se,ve){return this.readFields(se,ve,this.readVarint()+this.pos)},readFixed32:function(){var se=te(this.buf,this.pos);return this.pos+=4,se},readSFixed32:function(){var se=he(this.buf,this.pos);return this.pos+=4,se},readFixed64:function(){var se=te(this.buf,this.pos)+te(this.buf,this.pos+4)*u;return this.pos+=8,se},readSFixed64:function(){var se=te(this.buf,this.pos)+he(this.buf,this.pos+4)*u;return this.pos+=8,se},readFloat:function(){var se=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,se},readDouble:function(){var se=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,se},readVarint:function(se){var ve,Ce,Ve=this.buf;return ve=127&(Ce=Ve[this.pos++]),Ce<128?ve:(ve|=(127&(Ce=Ve[this.pos++]))<<7,Ce<128?ve:(ve|=(127&(Ce=Ve[this.pos++]))<<14,Ce<128?ve:(ve|=(127&(Ce=Ve[this.pos++]))<<21,Ce<128?ve:function(et,Ye,Xe){var gt,tt,_t=Xe.buf;if(gt=(112&(tt=_t[Xe.pos++]))>>4,tt<128||(gt|=(127&(tt=_t[Xe.pos++]))<<3,tt<128)||(gt|=(127&(tt=_t[Xe.pos++]))<<10,tt<128)||(gt|=(127&(tt=_t[Xe.pos++]))<<17,tt<128)||(gt|=(127&(tt=_t[Xe.pos++]))<<24,tt<128)||(gt|=(1&(tt=_t[Xe.pos++]))<<31,tt<128))return _(et,gt,Ye);throw new Error("Expected varint not more than 10 bytes")}(ve|=(15&(Ce=Ve[this.pos]))<<28,se,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var se=this.readVarint();return se%2==1?(se+1)/-2:se/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var se=this.readVarint()+this.pos,ve=this.pos;return this.pos=se,se-ve>=12&&g?function(Ce,Ve,et){return g.decode(Ce.subarray(Ve,et))}(this.buf,ve,se):function(Ce,Ve,et){for(var Ye="",Xe=Ve;Xe<et;){var gt,tt,_t,xt=Ce[Xe],Ct=null,Mt=xt>239?4:xt>223?3:xt>191?2:1;if(Xe+Mt>et)break;Mt===1?xt<128&&(Ct=xt):Mt===2?(192&(gt=Ce[Xe+1]))==128&&(Ct=(31&xt)<<6|63&gt)<=127&&(Ct=null):Mt===3?(tt=Ce[Xe+2],(192&(gt=Ce[Xe+1]))==128&&(192&tt)==128&&((Ct=(15&xt)<<12|(63&gt)<<6|63&tt)<=2047||Ct>=55296&&Ct<=57343)&&(Ct=null)):Mt===4&&(tt=Ce[Xe+2],_t=Ce[Xe+3],(192&(gt=Ce[Xe+1]))==128&&(192&tt)==128&&(192&_t)==128&&((Ct=(15&xt)<<18|(63&gt)<<12|(63&tt)<<6|63&_t)<=65535||Ct>=1114112)&&(Ct=null)),Ct===null?(Ct=65533,Mt=1):Ct>65535&&(Ct-=65536,Ye+=String.fromCharCode(Ct>>>10&1023|55296),Ct=56320|1023&Ct),Ye+=String.fromCharCode(Ct),Xe+=Mt}return Ye}(this.buf,ve,se)},readBytes:function(){var se=this.readVarint()+this.pos,ve=this.buf.subarray(this.pos,se);return this.pos=se,ve},readPackedVarint:function(se,ve){if(this.type!==s.Bytes)return se.push(this.readVarint(ve));var Ce=m(this);for(se=se||[];this.pos<Ce;)se.push(this.readVarint(ve));return se},readPackedSVarint:function(se){if(this.type!==s.Bytes)return se.push(this.readSVarint());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readSVarint());return se},readPackedBoolean:function(se){if(this.type!==s.Bytes)return se.push(this.readBoolean());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readBoolean());return se},readPackedFloat:function(se){if(this.type!==s.Bytes)return se.push(this.readFloat());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readFloat());return se},readPackedDouble:function(se){if(this.type!==s.Bytes)return se.push(this.readDouble());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readDouble());return se},readPackedFixed32:function(se){if(this.type!==s.Bytes)return se.push(this.readFixed32());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readFixed32());return se},readPackedSFixed32:function(se){if(this.type!==s.Bytes)return se.push(this.readSFixed32());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readSFixed32());return se},readPackedFixed64:function(se){if(this.type!==s.Bytes)return se.push(this.readFixed64());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readFixed64());return se},readPackedSFixed64:function(se){if(this.type!==s.Bytes)return se.push(this.readSFixed64());var ve=m(this);for(se=se||[];this.pos<ve;)se.push(this.readSFixed64());return se},skip:function(se){var ve=7&se;if(ve===s.Varint)for(;this.buf[this.pos++]>127;);else if(ve===s.Bytes)this.pos=this.readVarint()+this.pos;else if(ve===s.Fixed32)this.pos+=4;else{if(ve!==s.Fixed64)throw new Error("Unimplemented type: "+ve);this.pos+=8}},writeTag:function(se,ve){this.writeVarint(se<<3|ve)},realloc:function(se){for(var ve=this.length||16;ve<this.pos+se;)ve*=2;if(ve!==this.length){var Ce=new Uint8Array(ve);Ce.set(this.buf),this.buf=Ce,this.length=ve}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(se){this.realloc(4),fe(this.buf,se,this.pos),this.pos+=4},writeSFixed32:function(se){this.realloc(4),fe(this.buf,se,this.pos),this.pos+=4},writeFixed64:function(se){this.realloc(8),fe(this.buf,-1&se,this.pos),fe(this.buf,Math.floor(se*f),this.pos+4),this.pos+=8},writeSFixed64:function(se){this.realloc(8),fe(this.buf,-1&se,this.pos),fe(this.buf,Math.floor(se*f),this.pos+4),this.pos+=8},writeVarint:function(se){(se=+se||0)>268435455||se<0?function(ve,Ce){var Ve,et;if(ve>=0?(Ve=ve%4294967296|0,et=ve/4294967296|0):(et=~(-ve/4294967296),4294967295^(Ve=~(-ve%4294967296))?Ve=Ve+1|0:(Ve=0,et=et+1|0)),ve>=18446744073709552e3||ve<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ce.realloc(10),function(Ye,Xe,gt){gt.buf[gt.pos++]=127&Ye|128,Ye>>>=7,gt.buf[gt.pos++]=127&Ye|128,Ye>>>=7,gt.buf[gt.pos++]=127&Ye|128,Ye>>>=7,gt.buf[gt.pos++]=127&Ye|128,gt.buf[gt.pos]=127&(Ye>>>=7)}(Ve,0,Ce),function(Ye,Xe){var gt=(7&Ye)<<4;Xe.buf[Xe.pos++]|=gt|((Ye>>>=3)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye)))))}(et,Ce)}(se,this):(this.realloc(4),this.buf[this.pos++]=127&se|(se>127?128:0),se<=127||(this.buf[this.pos++]=127&(se>>>=7)|(se>127?128:0),se<=127||(this.buf[this.pos++]=127&(se>>>=7)|(se>127?128:0),se<=127||(this.buf[this.pos++]=se>>>7&127))))},writeSVarint:function(se){this.writeVarint(se<0?2*-se-1:2*se)},writeBoolean:function(se){this.writeVarint(!!se)},writeString:function(se){se=String(se),this.realloc(4*se.length),this.pos++;var ve=this.pos;this.pos=function(Ve,et,Ye){for(var Xe,gt,tt=0;tt<et.length;tt++){if((Xe=et.charCodeAt(tt))>55295&&Xe<57344){if(!gt){Xe>56319||tt+1===et.length?(Ve[Ye++]=239,Ve[Ye++]=191,Ve[Ye++]=189):gt=Xe;continue}if(Xe<56320){Ve[Ye++]=239,Ve[Ye++]=191,Ve[Ye++]=189,gt=Xe;continue}Xe=gt-55296<<10|Xe-56320|65536,gt=null}else gt&&(Ve[Ye++]=239,Ve[Ye++]=191,Ve[Ye++]=189,gt=null);Xe<128?Ve[Ye++]=Xe:(Xe<2048?Ve[Ye++]=Xe>>6|192:(Xe<65536?Ve[Ye++]=Xe>>12|224:(Ve[Ye++]=Xe>>18|240,Ve[Ye++]=Xe>>12&63|128),Ve[Ye++]=Xe>>6&63|128),Ve[Ye++]=63&Xe|128)}return Ye}(this.buf,se,this.pos);var Ce=this.pos-ve;Ce>=128&&b(ve,Ce,this),this.pos=ve-1,this.writeVarint(Ce),this.pos+=Ce},writeFloat:function(se){this.realloc(4),h.write(this.buf,se,this.pos,!0,23,4),this.pos+=4},writeDouble:function(se){this.realloc(8),h.write(this.buf,se,this.pos,!0,52,8),this.pos+=8},writeBytes:function(se){var ve=se.length;this.writeVarint(ve),this.realloc(ve);for(var Ce=0;Ce<ve;Ce++)this.buf[this.pos++]=se[Ce]},writeRawMessage:function(se,ve){this.pos++;var Ce=this.pos;se(ve,this);var Ve=this.pos-Ce;Ve>=128&&b(Ce,Ve,this),this.pos=Ce-1,this.writeVarint(Ve),this.pos+=Ve},writeMessage:function(se,ve,Ce){this.writeTag(se,s.Bytes),this.writeRawMessage(ve,Ce)},writePackedVarint:function(se,ve){ve.length&&this.writeMessage(se,O,ve)},writePackedSVarint:function(se,ve){ve.length&&this.writeMessage(se,D,ve)},writePackedBoolean:function(se,ve){ve.length&&this.writeMessage(se,L,ve)},writePackedFloat:function(se,ve){ve.length&&this.writeMessage(se,C,ve)},writePackedDouble:function(se,ve){ve.length&&this.writeMessage(se,V,ve)},writePackedFixed32:function(se,ve){ve.length&&this.writeMessage(se,z,ve)},writePackedSFixed32:function(se,ve){ve.length&&this.writeMessage(se,M,ve)},writePackedFixed64:function(se,ve){ve.length&&this.writeMessage(se,j,ve)},writePackedSFixed64:function(se,ve){ve.length&&this.writeMessage(se,J,ve)},writeBytesField:function(se,ve){this.writeTag(se,s.Bytes),this.writeBytes(ve)},writeFixed32Field:function(se,ve){this.writeTag(se,s.Fixed32),this.writeFixed32(ve)},writeSFixed32Field:function(se,ve){this.writeTag(se,s.Fixed32),this.writeSFixed32(ve)},writeFixed64Field:function(se,ve){this.writeTag(se,s.Fixed64),this.writeFixed64(ve)},writeSFixed64Field:function(se,ve){this.writeTag(se,s.Fixed64),this.writeSFixed64(ve)},writeVarintField:function(se,ve){this.writeTag(se,s.Varint),this.writeVarint(ve)},writeSVarintField:function(se,ve){this.writeTag(se,s.Varint),this.writeSVarint(ve)},writeStringField:function(se,ve){this.writeTag(se,s.Bytes),this.writeString(ve)},writeFloatField:function(se,ve){this.writeTag(se,s.Fixed32),this.writeFloat(ve)},writeDoubleField:function(se,ve){this.writeTag(se,s.Fixed64),this.writeDouble(ve)},writeBooleanField:function(se,ve){this.writeVarintField(se,!!ve)}},oa}var gn=v(Ri());const Mn=3;function fu(h,s,u){s.glyphs=[],h===1&&u.readMessage(us,s)}function us(h,s,u){if(h===3){const{id:f,bitmap:g,width:m,height:_,left:b,top:O,advance:D}=u.readMessage(xm,{});s.glyphs.push({id:f,bitmap:new ym({width:m+2*Mn,height:_+2*Mn},g),metrics:{width:m,height:_,left:b,top:O,advance:D}})}else h===4?s.ascender=u.readSVarint():h===5&&(s.descender=u.readSVarint())}function xm(h,s,u){h===1?s.id=u.readVarint():h===2?s.bitmap=u.readBytes():h===3?s.width=u.readVarint():h===4?s.height=u.readVarint():h===5?s.left=u.readSVarint():h===6?s.top=u.readSVarint():h===7&&(s.advance=u.readVarint())}const RE=Mn,ah={horizontal:1,vertical:2,horizontalOnly:3};class pw{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(s,u){const f=new pw;return f.scale=s||1,f.fontStack=u,f}static forImage(s){const u=new pw;return u.image=s,u}}class S0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u,f){const g=new S0;for(let m=0;m<s.sections.length;m++){const _=s.sections[m];_.image?g.addImageSection(_,f):g.addTextSection(_,u)}return g}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCodePoint(s){return this.text.codePointAt(s)}verticalizePunctuation(s){this.text=function(u,f){let g="";for(let m=0;m<u.length;m++){const _=u.charCodeAt(m+1)||null,b=u.charCodeAt(m-1)||null;g+=!f&&(_&&Vr(_)&&!sn[u[m+1]]||b&&Vr(b)&&!sn[u[m-1]])||!sn[u[m]]?u[m]:sn[u[m]]}return g}(this.text,s)}trim(){let s=0;for(let f=0;f<this.text.length&&tS[this.text.charCodeAt(f)];f++)s++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=s&&tS[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){const f=new S0;return f.text=this.text.substring(s,u),f.sectionIndex=this.sectionIndex.slice(s,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}addTextSection(s,u){this.text+=s.text,this.sections.push(pw.forText(s.scale,s.fontStack||u));const f=this.sections.length-1;for(let g=0;g<s.text.length;++g)this.sectionIndex.push(f)}addImageSection(s,u){const f=s.image?s.image.getPrimary():null;if(!f)return void Yr("Can't add FormattedSection with an empty image.");f.scaleSelf(u);const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCodePoint(g),this.sections.push(pw.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Yr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function TE(h,s,u,f,g,m,_,b,O,D,C,V,L,z,M,j=1){const J=S0.fromFeature(h,g,j);V===ah.vertical&&J.verticalizePunctuation(L);let te=[];const fe=function(Ve,et,Ye,Xe,gt,tt){if(!Ve)return[];const _t=[],xt=function(jt,Ft,$t,_a,ya,Qa){let Na=0;for(let Ma=0;Ma<jt.length();Ma++){const Ra=jt.getSection(Ma);Na+=rF(jt.getCodePoint(Ma),Ra,_a,ya,Ft,Qa)}return Na/Math.max(1,Math.ceil(Na/$t))}(Ve,et,Ye,Xe,gt,tt),Ct=Ve.text.indexOf("")>=0;let Mt=0;for(let jt=0;jt<Ve.length();jt++){const Ft=Ve.getSection(jt),$t=Ve.getCodePoint(jt);if(tS[$t]||(Mt+=rF($t,Ft,Xe,gt,et,tt)),jt<Ve.length()-1){const _a=!((Ot=$t)<11904||!(Rt["Bopomofo Extended"](Ot)||Rt.Bopomofo(Ot)||Rt["CJK Compatibility Forms"](Ot)||Rt["CJK Compatibility Ideographs"](Ot)||Rt["CJK Compatibility"](Ot)||Rt["CJK Radicals Supplement"](Ot)||Rt["CJK Strokes"](Ot)||Rt["CJK Symbols and Punctuation"](Ot)||Rt["CJK Unified Ideographs Extension A"](Ot)||Rt["CJK Unified Ideographs"](Ot)||Rt["Enclosed CJK Letters and Months"](Ot)||Rt["Halfwidth and Fullwidth Forms"](Ot)||Rt.Hiragana(Ot)||Rt["Ideographic Description Characters"](Ot)||Rt["Kangxi Radicals"](Ot)||Rt["Katakana Phonetic Extensions"](Ot)||Rt.Katakana(Ot)||Rt["Vertical Forms"](Ot)||Rt["Yi Radicals"](Ot)||Rt["Yi Syllables"](Ot)));(xae[$t]||_a||Ft.image)&&_t.push(iF(jt+1,Mt,xt,_t,Pae($t,Ve.getCodePoint(jt+1),_a&&Ct),!1))}}var Ot;return sF(iF(Ve.length(),Mt,xt,_t,0,!0))}(J,D,m,s,f,z),{processBidirectionalText:he,processStyledBidirectionalText:se}=fs;if(he&&J.sections.length===1){const Ve=he(J.toString(),fe);for(const et of Ve){const Ye=new S0;Ye.text=et,Ye.sections=J.sections;for(let Xe=0;Xe<et.length;Xe++)Ye.sectionIndex.push(0);te.push(Ye)}}else if(se){const Ve=se(J.text,J.sectionIndex,fe);for(const et of Ve){const Ye=new S0;Ye.text=et[0],Ye.sectionIndex=et[1],Ye.sections=J.sections,te.push(Ye)}}else te=function(Ve,et){const Ye=[],Xe=Ve.text;let gt=0;for(const tt of et)Ye.push(Ve.substring(gt,tt)),gt=tt;return gt<Xe.length&&Ye.push(Ve.substring(gt,Xe.length)),Ye}(J,fe);const ve=[],Ce={positionedLines:ve,text:J.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:V,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Ve,et,Ye,Xe,gt,tt,_t,xt,Ct,Mt,Ot,jt){let Ft=0,$t=0,_a=0;const ya=xt==="right"?1:xt==="left"?0:.5;let Qa=!1;for(const hr of gt){const Ur=hr.getSections();for(const ln of Ur){if(ln.image)continue;const $r=et[ln.fontStack];if($r&&(Qa=$r.ascender!==void 0&&$r.descender!==void 0,!Qa))break}if(!Qa)break}let Na=0;for(const hr of gt){hr.trim();const Ur=hr.getMaxScale(),ln=(Ur-1)*Ge,$r={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[Na]=$r;const _n=$r.positionedGlyphs;let on=0;if(!hr.length()){$t+=tt,++Na;continue}let En=0,Jn=0;for(let Gr=0;Gr<hr.length();Gr++){const In=hr.getSection(Gr),is=hr.getSectionIndex(Gr),ms=hr.getCodePoint(Gr);let bs=In.scale,ks=null,Oi=null,ml=null,Dc=Ge,So=0;Ct===ah.vertical&&((Ma=ms)===12312||Ma===12313||Ma===12316||Ma===12540||Ma===12448)&&(Ct=ah.horizontal);const Mo=!(Ct===ah.horizontal||!Ot&&!Wa(ms)||Ot&&(tS[ms]||_r(ms)));if(In.image){const Gu=Xe.get(In.image.toString());if(!Gu)continue;ml=In.image,Ve.iconsInText=Ve.iconsInText||!0,Oi=Gu.paddedRect;const ql=Gu.displaySize;bs=bs*Ge/jt,ks={width:ql[0],height:ql[1],left:0,top:-3,advance:Mo?ql[1]:ql[0],localGlyph:!1},So=Qa?-ks.height*bs:Ur*Ge-17-ql[1]*bs,Dc=ks.advance;const cf=(Mo?ql[0]:ql[1])*bs-Ge*Ur;cf>0&&cf>on&&(on=cf)}else{const Gu=Ye[In.fontStack];if(!Gu)continue;Gu[ms]&&(Oi=Gu[ms]);const ql=et[In.fontStack];if(!ql)continue;const cf=ql.glyphs[ms];if(!cf)continue;if(ks=cf.metrics,Dc=ms!==8203?Ge:0,Qa){const wy=ql.ascender!==void 0?Math.abs(ql.ascender):0,Kf=ql.descender!==void 0?Math.abs(ql.descender):0,Dp=(wy+Kf)*bs;En<Dp&&(En=Dp,Jn=(wy-Kf)/2*bs),So=-wy*bs}else So=(Ur-bs)*Ge-17}Mo?(Ve.verticalizable=!0,_n.push({glyph:ms,image:ml,x:Ft,y:$t+So,vertical:Mo,scale:bs,localGlyph:ks.localGlyph,fontStack:In.fontStack,sectionIndex:is,metrics:ks,rect:Oi}),Ft+=Dc*bs+Mt):(_n.push({glyph:ms,image:ml,x:Ft,y:$t+So,vertical:Mo,scale:bs,localGlyph:ks.localGlyph,fontStack:In.fontStack,sectionIndex:is,metrics:ks,rect:Oi}),Ft+=ks.advance*bs+Mt)}_n.length!==0&&(_a=Math.max(Ft-Mt,_a),Qa?oF(_n,ya,on,Jn,tt*Ur/2):oF(_n,ya,on,0,tt/2)),Ft=0;const Fi=tt*Ur+on;$r.lineOffset=Math.max(on,ln),$t+=Fi,++Na}var Ma;const Ra=$t,{horizontalAlign:Sr,verticalAlign:Xa}=CE(_t);(function(hr,Ur,ln,$r,_n,on){const En=(Ur-ln)*_n,Jn=-on*$r;for(const Fi of hr)for(const Gr of Fi.positionedGlyphs)Gr.x+=En,Gr.y+=Jn})(Ve.positionedLines,ya,Sr,Xa,_a,Ra),Ve.top+=-Xa*Ra,Ve.bottom=Ve.top+Ra,Ve.left+=-Sr*_a,Ve.right=Ve.left+_a,Ve.hasBaseline=Qa}(Ce,s,u,f,te,_,b,O,V,D,L,M),!function(Ve){for(const et of Ve)if(et.positionedGlyphs.length!==0)return!1;return!0}(ve))return Ce}const tS={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xae={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function rF(h,s,u,f,g,m){if(s.image){const _=f.get(s.image.toString());return _?_.displaySize[0]*s.scale*Ge/m+g:0}{const _=u[s.fontStack],b=_&&_.glyphs[h];return b?b.metrics.advance*s.scale+g:0}}function nF(h,s,u,f){const g=Math.pow(h-s,2);return f?h<s?g/2:2*g:g+Math.abs(u)*u}function Pae(h,s,u){let f=0;return h===10&&(f-=1e4),u&&(f+=150),h!==40&&h!==65288||(f+=50),s!==41&&s!==65289||(f+=50),f}function iF(h,s,u,f,g,m){let _=null,b=nF(s,u,g,m);for(const O of f){const D=nF(s-O.x,u,g,m)+O.badness;D<=b&&(_=O,b=D)}return{index:h,x:s,priorBreak:_,badness:b}}function sF(h){return h?sF(h.priorBreak).concat(h.index):[]}function CE(h){let s=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function oF(h,s,u,f,g){if(!(s||u||f||g))return;const m=h.length-1,_=h[m],b=(_.x+_.metrics.advance*_.scale)*s;for(let O=0;O<=m;O++)h[O].x-=b,h[O].y+=u+f+g}function Eae(h,s,u,f){const{horizontalAlign:g,verticalAlign:m}=CE(f),_=u[0]-h.displaySize[0]*g,b=u[1]-h.displaySize[1]*m;return{imagePrimary:h,imageSecondary:s,top:b,bottom:b+h.displaySize[1],left:_,right:_+h.displaySize[0]}}function lF(h,s,u,f,g,m){const _=h.imagePrimary;let b;if(_.content){const J=_.content,te=_.pixelRatio||1;b=[J[0]/te,J[1]/te,_.displaySize[0]-J[2]/te,_.displaySize[1]-J[3]/te]}const O=s.left*m,D=s.right*m;let C,V,L,z;u==="width"||u==="both"?(z=g[0]+O-f[3],V=g[0]+D+f[1]):(z=g[0]+(O+D-_.displaySize[0])/2,V=z+_.displaySize[0]);const M=s.top*m,j=s.bottom*m;return u==="height"||u==="both"?(C=g[1]+M-f[0],L=g[1]+j+f[2]):(C=g[1]+(M+j-_.displaySize[1])/2,L=C+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:C,right:V,bottom:L,left:z,collisionPadding:b}}class Ag extends Nt{constructor(s,u,f,g,m){super(s,u),this.angle=g,this.z=f,m!==void 0&&(this.segment=m)}clone(){return new Ag(this.x,this.y,this.z,this.angle,this.segment)}}function uF(h,s,u,f,g){if(s.segment===void 0)return!0;let m=s,_=s.segment+1,b=0;for(;b>-u/2;){if(_--,_<0)return!1;b-=h[_].dist(m),m=h[_]}b+=h[_].dist(h[_+1]),_++;const O=[];let D=0;for(;b<u/2;){const C=h[_],V=h[_+1];if(!V)return!1;let L=h[_-1].angleTo(C)-C.angleTo(V);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:b,angleDelta:L}),D+=L;b-O[0].distance>f;)D-=O.shift().angleDelta;if(D>g)return!1;_++,b+=C.dist(V)}return!0}function cF(h){let s=0;for(let u=0;u<h.length-1;u++)s+=h[u].dist(h[u+1]);return s}function dF(h,s,u){return h?.6*s*u:0}function hF(h,s){return Math.max(h?h.right-h.left:0,s?s.right-s.left:0)}function Nae(h,s,u,f,g,m){const _=dF(u,g,m),b=hF(u,f)*m;let O=0;const D=cF(h)/2;for(let C=0;C<h.length-1;C++){const V=h[C],L=h[C+1],z=V.dist(L);if(O+z>D){const M=(D-O)/z,j=vr(V.x,L.x,M),J=vr(V.y,L.y,M),te=new Ag(j,J,0,L.angleTo(V),C);return!_||uF(h,te,b,_,s)?te:void 0}O+=z}}function Oae(h,s,u,f,g,m,_,b,O){const D=dF(f,m,_),C=hF(f,g),V=C*_,L=h[0].x===0||h[0].x===O||h[0].y===0||h[0].y===O;return s-V<s/4&&(s=V+s/4),fF(h,L?s/2*b%s:(C/2+2*m)*_*b%s,s,D,u,V,L,!1,O)}function fF(h,s,u,f,g,m,_,b,O){const D=m/2,C=cF(h);let V=0,L=s-u,z=[];for(let M=0;M<h.length-1;M++){const j=h[M],J=h[M+1],te=j.dist(J),fe=J.angleTo(j);for(;L+u<V+te;){L+=u;const he=(L-V)/te,se=vr(j.x,J.x,he),ve=vr(j.y,J.y,he);if(se>=0&&se<O&&ve>=0&&ve<O&&L-D>=0&&L+D<=C){const Ce=new Ag(se,ve,0,fe,M);f&&!uF(h,Ce,m,f,g)||z.push(Ce)}}V+=te}return b||z.length||_||(z=fF(h,V/2,u,f,g,m,_,!0,O)),z}function pF(h,s,u,f,g){const m=[];for(let _=0;_<h.length;_++){const b=h[_];let O;for(let D=0;D<b.length-1;D++){let C=b[D],V=b[D+1];C.x<s&&V.x<s||(C.x<s?C=new Nt(s,C.y+(s-C.x)/(V.x-C.x)*(V.y-C.y))._round():V.x<s&&(V=new Nt(s,C.y+(s-C.x)/(V.x-C.x)*(V.y-C.y))._round()),C.y<u&&V.y<u||(C.y<u?C=new Nt(C.x+(u-C.y)/(V.y-C.y)*(V.x-C.x),u)._round():V.y<u&&(V=new Nt(C.x+(u-C.y)/(V.y-C.y)*(V.x-C.x),u)._round()),C.x>=f&&V.x>=f||(C.x>=f?C=new Nt(f,C.y+(f-C.x)/(V.x-C.x)*(V.y-C.y))._round():V.x>=f&&(V=new Nt(f,C.y+(f-C.x)/(V.x-C.x)*(V.y-C.y))._round()),C.y>=g&&V.y>=g||(C.y>=g?C=new Nt(C.x+(g-C.y)/(V.y-C.y)*(V.x-C.x),g)._round():V.y>=g&&(V=new Nt(C.x+(g-C.y)/(V.y-C.y)*(V.x-C.x),g)._round()),O&&C.equals(O[O.length-1])||(O=[C],m.push(O)),O.push(V)))))}}return m}function mF(h){let s=0,u=0;for(const _ of h)s+=_.w*_.h,u=Math.max(u,_.w);h.sort((_,b)=>b.h-_.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}];let g=0,m=0;for(const _ of h)for(let b=f.length-1;b>=0;b--){const O=f[b];if(!(_.w>O.w||_.h>O.h)){if(_.x=O.x,_.y=O.y,m=Math.max(m,_.y+_.h),g=Math.max(g,_.x+_.w),_.w===O.w&&_.h===O.h){const D=f.pop();b<f.length&&(f[b]=D)}else _.h===O.h?(O.x+=_.w,O.w-=_.w):_.w===O.w?(O.y+=_.h,O.h-=_.h):(f.push({x:O.x+_.w,y:O.y,w:O.w-_.w,h:_.h}),O.y+=_.h,O.h-=_.h);break}}return{w:g,h:m,fill:s/(g*m)||0}}Pt(Ag,"Anchor");const b0=1;class mw{static getImagePositionScale(s,u,f){if(u&&s&&s.options&&s.options.transform){const g=s.options.transform;return{x:g.a,y:g.d}}return{x:f,y:f}}constructor(s,u,f,g){this.paddedRect=s;const{pixelRatio:m,version:_,stretchX:b,stretchY:O,content:D,sdf:C,usvg:V}=u;this.pixelRatio=m,this.stretchX=b,this.stretchY=O,this.content=D,this.version=_,this.padding=f,this.sdf=C,this.scale=mw.getImagePositionScale(g,V,m)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function gF(h,s,u){const f=Yu.parse(h),g=function(m,_,b=[1,1]){return{x:0,y:0,w:(m.data?m.data.width:m.width*b[0])+2*_,h:(m.data?m.data.height:m.height*b[1])+2*_}}(s,u,[f.options.transform.a,f.options.transform.d]);return{bin:g,imagePosition:new mw(g,s,u,f),imageVariant:f}}class yF{constructor(s,u,f){const g=new Map,m=new Map;this.haveRenderCallbacks=[];const _=[];this.addImages(s,g,b0,_),this.addImages(u,m,2,_);const{w:b,h:O}=mF(_),D=new xl({width:b||1,height:O||1});for(const[C,V]of s.entries()){const L=g.get(C).paddedRect;xl.copy(V.data,D,{x:0,y:0},{x:L.x+b0,y:L.y+b0},V.data,f,V.sdf)}for(const[C,V]of u.entries()){const L=m.get(C),z=L.paddedRect;let M=L.padding;const j=z.x+M,J=z.y+M,te=V.data.width,fe=V.data.height;M=M>1?M-1:M,xl.copy(V.data,D,{x:0,y:0},{x:j,y:J},V.data,f),xl.copy(V.data,D,{x:0,y:fe-M},{x:j,y:J-M},{width:te,height:M},f),xl.copy(V.data,D,{x:0,y:0},{x:j,y:J+fe},{width:te,height:M},f),xl.copy(V.data,D,{x:te-M,y:0},{x:j-M,y:J},{width:M,height:fe},f),xl.copy(V.data,D,{x:0,y:0},{x:j+te,y:J},{width:M,height:fe},f),xl.copy(V.data,D,{x:te-M,y:fe-M},{x:j-M,y:J-M},{width:M,height:M},f),xl.copy(V.data,D,{x:0,y:fe-M},{x:j+te,y:J-M},{width:M,height:M},f),xl.copy(V.data,D,{x:0,y:0},{x:j+te,y:J+fe},{width:M,height:M},f),xl.copy(V.data,D,{x:te-M,y:0},{x:j-M,y:J+fe},{width:M,height:M},f)}this.lut=f,this.image=D,this.iconPositions=g,this.patternPositions=m}addImages(s,u,f,g){for(const[m,_]of s.entries()){const{bin:b,imagePosition:O,imageVariant:D}=gF(m,_,f);u.set(m,O),g.push(b),_.hasRenderCallback&&this.haveRenderCallbacks.push(D.id)}}patchUpdatedImages(s,u,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>s.hasImage(g,f)),s.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const g of s.getUpdatedImages(f)){for(const m of this.iconPositions.keys()){const _=Yu.parse(m);if(qo.isEqual(_.id,g)){const b=s.getImage(g,f);this.patchUpdatedImage(this.iconPositions.get(m),b,u)}}for(const m of this.patternPositions.keys()){const _=Yu.parse(m);if(qo.isEqual(_.id,g)){const b=s.getImage(g,f);this.patchUpdatedImage(this.patternPositions.get(m),b,u)}}}}patchUpdatedImage(s,u,f){if(!s||!u||s.version===u.version)return;s.version=u.version;const[g,m]=s.tl,_=s.sdf;if(this.lut||_){const b={width:u.data.width,height:u.data.height},O=new xl(b);xl.copy(u.data,O,{x:0,y:0},{x:0,y:0},b,this.lut,_),f.update(O,{position:{x:g,y:m}})}else f.update(u.data,{position:{x:g,y:m}})}}Pt(mw,"ImagePosition"),Pt(yF,"ImageAtlas");const aS=1e20;function AF(h,s,u,f,g,m,_,b,O){for(let D=s;D<s+f;D++)vF(h,u*m+D,m,g,_,b,O);for(let D=u;D<u+g;D++)vF(h,D*m+s,1,f,_,b,O)}function vF(h,s,u,f,g,m,_){m[0]=0,_[0]=-1e20,_[1]=aS,g[0]=h[s];for(let b=1,O=0,D=0;b<f;b++){g[b]=h[s+b*u];const C=b*b;do{const V=m[O];D=(g[b]-g[V]+C-V*V)/(b-V)/2}while(D<=_[O]&&--O>-1);O++,m[O]=b,_[O]=D,_[O+1]=aS}for(let b=0,O=0;b<f;b++){for(;_[O+1]<b;)O++;const D=m[O],C=b-D;h[s+b*u]=g[D]+C*C}}const Np=2,SE={none:0,ideographs:1,all:2};class x0{constructor(s,u,f){this.requestManager=s,this.localGlyphMode=u,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s,u){this.urls[u]=s}getGlyphs(s,u,f){const g=[],m=this.urls[u]||xe.GLYPHS_URL;for(const _ in s)for(const b of s[_])g.push({stack:_,id:b});lr(g,({stack:_,id:b},O)=>{let D=this.entries[_];D||(D=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let C=D.glyphs[b];if(C!==void 0)return void O(null,{stack:_,id:b,glyph:C});if(C=this._tinySDF(D,_,b),C)return D.glyphs[b]=C,void O(null,{stack:_,id:b,glyph:C});const V=Math.floor(b/256);if(256*V>65535)return Yr("glyphs > 65535 not supported"),void O(null,{stack:_,id:b,glyph:C});if(D.ranges[V])return void O(null,{stack:_,id:b,glyph:C});let L=D.requests[V];L||(L=D.requests[V]=[],x0.loadGlyphRange(_,V,m,this.requestManager,(z,M)=>{if(M){D.ascender=M.ascender,D.descender=M.descender;for(const j in M.glyphs)this._doesCharSupportLocalGlyph(+j)||(D.glyphs[+j]=M.glyphs[+j]);D.ranges[V]=!0}for(const j of L)j(z,M);delete D.requests[V]})),L.push((z,M)=>{z?O(z):M&&O(null,{stack:_,id:b,glyph:M.glyphs[b]||null})})},(_,b)=>{if(_)f(_);else if(b){const O={};for(const{stack:D,id:C,glyph:V}of b)O[D]===void 0&&(O[D]={}),O[D].glyphs===void 0&&(O[D].glyphs={}),O[D].glyphs[C]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics},O[D].ascender=this.entries[D].ascender,O[D].descender=this.entries[D].descender;f(null,O)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==SE.none&&(this.localGlyphMode===SE.all?!!this.localFontFamily:!!this.localFontFamily&&(Rt["CJK Unified Ideographs"](s)||Rt["Hangul Syllables"](s)||Rt.Hiragana(s)||Rt.Katakana(s)||Rt["CJK Symbols and Punctuation"](s)||Rt["CJK Unified Ideographs Extension A"](s)||Rt["CJK Unified Ideographs Extension B"](s)||Rt.Osage(s)))}_tinySDF(s,u,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let m=s.tinySDF;if(!m){let j="400";/bold/i.test(u)?j="900":/medium/i.test(u)?j="500":/light/i.test(u)&&(j="200"),m=s.tinySDF=new x0.TinySDF({fontFamily:g,fontWeight:j,fontSize:24*Np,buffer:3*Np,radius:8*Np}),m.fontWeight=j}if(this.localGlyphs[m.fontWeight][f])return this.localGlyphs[m.fontWeight][f];const _=String.fromCodePoint(f),{data:b,width:O,height:D,glyphWidth:C,glyphHeight:V,glyphLeft:L,glyphTop:z,glyphAdvance:M}=m.draw(_);return this.localGlyphs[m.fontWeight][f]={id:f,bitmap:new ym({width:O,height:D},b),metrics:{width:C/Np,height:V/Np,left:L/Np,top:z/Np-27,advance:M/Np,localGlyph:!0}}}}x0.loadGlyphRange=function(h,s,u,f,g){const m=256*s,_=m+255,b=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",h).replace("{range}",`${m}-${_}`),Ns.Glyphs);Bi(b,(O,D)=>{if(O)g(O);else if(D){const C={},V=function(L){return new gn(L).readFields(fu,{})}(D);for(const L of V.glyphs)C[L.id]=L;g(null,{glyphs:C,ascender:V.ascender,descender:V.descender})}})},x0.TinySDF=class{constructor({fontSize:h=24,buffer:s=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=s,this.cutoff=f,this.radius=u;const b=this.size=h+4*s,O=this._createCanvas(b),D=this.ctx=O.getContext("2d",{willReadFrequently:!0});D.font=`${_} ${m} ${h}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(h){const s=document.createElement("canvas");return s.width=s.height=h,s}draw(h){const{width:s,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:m}=this.ctx.measureText(h),_=Math.ceil(u),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-g))),O=Math.min(this.size-this.buffer,_+Math.ceil(f)),D=b+2*this.buffer,C=O+2*this.buffer,V=Math.max(D*C,0),L=new Uint8ClampedArray(V),z={data:L,width:D,height:C,glyphWidth:b,glyphHeight:O,glyphTop:_,glyphLeft:0,glyphAdvance:s};if(b===0||O===0)return z;const{ctx:M,buffer:j,gridInner:J,gridOuter:te}=this;M.clearRect(j,j,b,O),M.fillText(h,j,j+_);const fe=M.getImageData(j,j,b,O);te.fill(aS,0,V),J.fill(0,0,V);for(let he=0;he<O;he++)for(let se=0;se<b;se++){const ve=fe.data[4*(he*b+se)+3]/255;if(ve===0)continue;const Ce=(he+j)*D+se+j;if(ve===1)te[Ce]=0,J[Ce]=aS;else{const Ve=.5-ve;te[Ce]=Ve>0?Ve*Ve:0,J[Ce]=Ve<0?Ve*Ve:0}}AF(te,0,0,D,C,D,this.f,this.v,this.z),AF(J,j,j,b,O,D,this.f,this.v,this.z);for(let he=0;he<V;he++){const se=Math.sqrt(te[he])-Math.sqrt(J[he]);L[he]=Math.round(255-255*(se/this.radius+this.cutoff))}return z}};const $A=b0;function _F(h,s){return h+s[1]-s[0]}function wF(h,s,u,f,g=1){const m=[],_=h.imagePrimary,b=_.pixelRatio,O=_.paddedRect.w-2*$A,D=_.paddedRect.h-2*$A,C=(h.right-h.left)*g,V=(h.bottom-h.top)*g,L=_.stretchX||[[0,O]],z=_.stretchY||[[0,D]],M=L.reduce(_F,0),j=z.reduce(_F,0),J=O-M,te=D-j;let fe=0,he=M,se=0,ve=j,Ce=0,Ve=J,et=0,Ye=te;if(_.content&&f){const gt=_.content;fe=rS(L,0,gt[0]),se=rS(z,0,gt[1]),he=rS(L,gt[0],gt[2]),ve=rS(z,gt[1],gt[3]),Ce=gt[0]-fe,et=gt[1]-se,Ve=gt[2]-gt[0]-he,Ye=gt[3]-gt[1]-ve}const Xe=(gt,tt,_t,xt)=>{const Ct=nS(gt.stretch-fe,he,C,h.left*g),Mt=iS(gt.fixed-Ce,Ve,gt.stretch,M),Ot=nS(tt.stretch-se,ve,V,h.top*g),jt=iS(tt.fixed-et,Ye,tt.stretch,j),Ft=nS(_t.stretch-fe,he,C,h.left*g),$t=iS(_t.fixed-Ce,Ve,_t.stretch,M),_a=nS(xt.stretch-se,ve,V,h.top*g),ya=iS(xt.fixed-et,Ye,xt.stretch,j),Qa=new Nt(Ct,Ot),Na=new Nt(Ft,Ot),Ma=new Nt(Ft,_a),Ra=new Nt(Ct,_a),Sr=new Nt(Mt/b,jt/b),Xa=new Nt($t/b,ya/b),hr=s*Math.PI/180;if(hr){const En=Math.sin(hr),Jn=Math.cos(hr),Fi=[Jn,-En,En,Jn];Qa._matMult(Fi),Na._matMult(Fi),Ra._matMult(Fi),Ma._matMult(Fi)}const Ur=gt.stretch+gt.fixed,ln=_t.stretch+_t.fixed,$r=tt.stretch+tt.fixed,_n=xt.stretch+xt.fixed,on=h.imageSecondary;return{tl:Qa,tr:Na,bl:Ra,br:Ma,texPrimary:{x:_.paddedRect.x+$A+Ur,y:_.paddedRect.y+$A+$r,w:ln-Ur,h:_n-$r},texSecondary:on?{x:on.paddedRect.x+$A+Ur,y:on.paddedRect.y+$A+$r,w:ln-Ur,h:_n-$r}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Sr,pixelOffsetBR:Xa,minFontScaleX:Ve/b/C,minFontScaleY:Ye/b/V,isSDF:u}};if(f&&(_.stretchX||_.stretchY)){const gt=RF(L,J,M),tt=RF(z,te,j);for(let _t=0;_t<gt.length-1;_t++){const xt=gt[_t],Ct=gt[_t+1];for(let Mt=0;Mt<tt.length-1;Mt++)m.push(Xe(xt,tt[Mt],Ct,tt[Mt+1]))}}else m.push(Xe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:D+1}));return m}function rS(h,s,u){let f=0;for(const g of h)f+=Math.max(s,Math.min(u,g[1]))-Math.max(s,Math.min(u,g[0]));return f}function RF(h,s,u){const f=[{fixed:-1,stretch:0}];for(const[g,m]of h){const _=f[f.length-1];f.push({fixed:g-_.stretch,stretch:_.stretch}),f.push({fixed:g-_.stretch,stretch:_.stretch+(m-g)})}return f.push({fixed:s+$A,stretch:u}),f}function nS(h,s,u,f){return h/s*u+f}function iS(h,s,u,f){return h-s*u/f}function Vae(h,s,u,f){const g=s+h.positionedLines[f].lineOffset;return f===0?u+g/2:u+(g+(s+h.positionedLines[f-1].lineOffset))/2}function zae(h,s=1,u=!1){let f=1/0,g=1/0,m=-1/0,_=-1/0;const b=h[0];for(let z=0;z<b.length;z++){const M=b[z];(!z||M.x<f)&&(f=M.x),(!z||M.y<g)&&(g=M.y),(!z||M.x>m)&&(m=M.x),(!z||M.y>_)&&(_=M.y)}const O=Math.min(m-f,_-g);let D=O/2;const C=new _c([],Dae);if(O===0)return new Nt(f,g);for(let z=f;z<m;z+=O)for(let M=g;M<_;M+=O)C.push(new P0(z+D,M+D,D,h));let V=function(z){let M=0,j=0,J=0;const te=z[0];for(let fe=0,he=te.length,se=he-1;fe<he;se=fe++){const ve=te[fe],Ce=te[se],Ve=ve.x*Ce.y-Ce.x*ve.y;j+=(ve.x+Ce.x)*Ve,J+=(ve.y+Ce.y)*Ve,M+=3*Ve}return new P0(j/M,J/M,0,z)}(h),L=C.length;for(;C.length;){const z=C.pop();(z.d>V.d||!V.d)&&(V=z,u&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,L)),z.max-V.d<=s||(D=z.h/2,C.push(new P0(z.p.x-D,z.p.y-D,D,h)),C.push(new P0(z.p.x+D,z.p.y-D,D,h)),C.push(new P0(z.p.x-D,z.p.y+D,D,h)),C.push(new P0(z.p.x+D,z.p.y+D,D,h)),L+=4)}return u&&(console.log(`num probes: ${L}`),console.log(`best distance: ${V.d}`)),V.p}function Dae(h,s){return s.max-h.max}class P0{constructor(s,u,f,g){this.p=new Nt(s,u),this.h=f,this.d=function(m,_){let b=!1,O=1/0;for(let D=0;D<_.length;D++){const C=_[D];for(let V=0,L=C.length,z=L-1;V<L;z=V++){const M=C[V],j=C[z];M.y>m.y!=j.y>m.y&&m.x<(j.x-M.x)*(m.y-M.y)/(j.y-M.y)+M.x&&(b=!b),O=Math.min(O,pt(m,M,j))}}return(b?1:-1)*Math.sqrt(O)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const bE=Number.POSITIVE_INFINITY,Mae=Math.sqrt(2);function TF(h,[s,u]){let f=0,g=0;if(u===bE){s<0&&(s=0);const m=s/Mae;switch(h){case"top-right":case"top-left":g=m-7;break;case"bottom-right":case"bottom-left":g=7-m;break;case"bottom":g=7-s;break;case"top":g=s-7}switch(h){case"top-right":case"bottom-right":f=-m;break;case"top-left":case"bottom-left":f=m;break;case"left":f=s;break;case"right":f=-s}}else{switch(s=Math.abs(s),u=Math.abs(u),h){case"top-right":case"top-left":case"top":g=u-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-u}switch(h){case"top-right":case"bottom-right":case"right":f=-s;break;case"top-left":case"bottom-left":case"left":f=s}}return[f,g]}function CF(h,s,u,f,g,m,_,b){if(!h)return;const O=Bt(s,u,f,g,m);return h.scaleSelf(O*b*_)}function SF(h,s,u,f,g,m,_,b){return{iconPrimary:CF(h.getPrimary(),s,u,f,g,m,_,b),iconSecondary:CF(h.getSecondary(),s,u,f,g,m,_,b)}}function bF(h,s,u,f){if(!h)return;const g=s.get(u.toString());if(h.imagePrimary=g,f){const m=s.get(f.toString());h.imageSecondary=m}}function Iae(h,s){for(const u in h.horizontal)xF(h.horizontal[u],s);xF(h.vertical,s)}function xF(h,s){if(h){for(const u of h.positionedLines)for(const f of u.positionedGlyphs)if(f.image!==null){const g=f.image.toString();f.rect=s.get(g).paddedRect}}}function xE(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lae(h,s,u,f,g,m,_,b,O){const D=PE(m.horizontal)||m.vertical,C=u.get("icon-text-fit-padding").evaluate(f,{},g);let V,L=s;return s&&O!=="none"&&(h.allowVerticalPlacement&&m.vertical&&(V=lF(s,m.vertical,O,C,b,_)),D&&(L=lF(s,D,O,C,b,_))),{defaultShapedIcon:L,verticallyShapedIcon:V}}function Fae(h,s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te,fe,he){let se=_.textMaxSize.evaluate(s,{},L);se===void 0?se=b*_.textScaleFactor:se*=_.textScaleFactor;const ve=h.layers[0].layout,Ce=PE(u.horizontal)||u.vertical,Ve=z.name==="globe",et=Ge,Ye=h.tilePixelRatio*se/et,Xe=(Mt=h.overscaling,h.zoom>18&&Mt>2&&(Mt>>=1),Math.max(Da/(512*Mt),1)*ve.get("symbol-spacing")),gt=ve.get("text-padding")*h.tilePixelRatio,tt=ve.get("icon-padding")*h.tilePixelRatio,_t=Ca(ve.get("text-max-angle")),xt=ve.get("icon-rotation-alignment")==="map"&&he!=="point",Ct=Xe/2;var Mt;h.hasAnyIconTextFit===!1&&J!=="none"&&(h.hasAnyIconTextFit=!0);const Ot=s.properties?+s.properties[Gf]:null,jt=Ot&&h.elevationFeatureIdToIndex?h.elevationFeatureIdToIndex.get(Ot):65535,Ft=($t,_a,ya)=>{if(_a.x<0||_a.x>=Da||_a.y<0||_a.y>=Da)return;let Qa=null;if(Ve){const{x:Na,y:Ma,z:Ra}=z.projectTilePoint(_a.x,_a.y,ya);Qa={anchor:new Ag(Na,Ma,Ra,0,void 0),up:z.upVector(ya,_a.x,_a.y)}}(function(Na,Ma,Ra,Sr,Xa,hr,Ur,ln,$r,_n,on,En,Jn,Fi,Gr,In,is,ms,bs,ks,Oi,ml,Dc,So,Mo,Gu,ql,cf,wy){const Kf=Na.addToLineVertexArray(Ma,Sr);let Dp,Ry,Ty,JA,u6,c6,d6,h6=0,f6=0,p6=0,m6=0,oN=-1,lN=-1;const Pm={};let g6=mo("");const QA=Ra?Ra.anchor:Ma,uN=cf!=="none";let cN=0,dN=0;if($r._unevaluatedLayout.getValue("text-radial-offset")===void 0?[cN,dN]=$r.layout.get("text-offset").evaluate(Oi,{},Mo).map(df=>df*Ge):(cN=$r.layout.get("text-radial-offset").evaluate(Oi,{},Mo)*Ge,dN=bE),Na.allowVerticalPlacement&&Xa.vertical){const df=Xa.vertical;if(Gr)c6=EE(df),ln&&(d6=EE(ln));else{const rh=$r.layout.get("text-rotate").evaluate(Oi,{},Mo)+90;Ty=sS(_n,QA,Ma,on,En,Jn,df,Fi,rh,In),ln&&(JA=sS(_n,QA,Ma,on,En,Jn,ln,ms,rh))}}if(hr){const df=Na.iconSizeData,rh=$r.layout.get("icon-rotate").evaluate(Oi,{},Mo),Dw=wF(hr,rh,Dc,uN,ml.iconScaleFactor),fN=ln?wF(ln,rh,Dc,uN,ml.iconScaleFactor):void 0;Ry=sS(_n,QA,Ma,on,En,Jn,hr,ms,rh,null),h6=4*Dw.length;let ev=null;df.kind==="source"?(ev=[ft*$r.layout.get("icon-size").evaluate(Oi,{},Mo)*ml.iconScaleFactor],ev[0]>yy&&Yr(`${Na.layerIds[0]}: Value for "icon-size" is >= ${gw}. Reduce your "icon-size".`)):df.kind==="composite"&&(ev=[ft*ml.compositeIconSizes[0].evaluate(Oi,{},Mo)*ml.iconScaleFactor,ft*ml.compositeIconSizes[1].evaluate(Oi,{},Mo)*ml.iconScaleFactor],(ev[0]>yy||ev[1]>yy)&&Yr(`${Na.layerIds[0]}: Value for "icon-size" is >= ${gw}. Reduce your "icon-size".`)),Na.addSymbols(Na.icon,Dw,ev,ks,bs,Oi,!1,Ra,Ma,Kf.lineStartIndex,Kf.lineLength,-1,So,Mo,Gu,ql),oN=Na.icon.placedSymbolArray.length-1,fN&&(f6=4*fN.length,Na.addSymbols(Na.icon,fN,ev,ks,bs,Oi,ah.vertical,Ra,Ma,Kf.lineStartIndex,Kf.lineLength,-1,So,Mo,Gu,ql),lN=Na.icon.placedSymbolArray.length-1)}for(const df in Xa.horizontal){const rh=Xa.horizontal[df];Dp||(g6=mo(rh.text),Gr?u6=EE(rh):Dp=sS(_n,QA,Ma,on,En,Jn,rh,Fi,$r.layout.get("text-rotate").evaluate(Oi,{},Mo),In));const Dw=rh.positionedLines.length===1;if(p6+=PF(Na,Ra,Ma,rh,Ur,$r,Gr,Oi,In,Kf,Xa.vertical?ah.horizontal:ah.horizontalOnly,Dw?Object.keys(Xa.horizontal):[df],Pm,oN,ml,So,Mo,Gu),Dw)break}Xa.vertical&&(m6+=PF(Na,Ra,Ma,Xa.vertical,Ur,$r,Gr,Oi,In,Kf,ah.vertical,["vertical"],Pm,lN,ml,So,Mo,Gu));let Cy=-1;const hN=(df,rh)=>df?Math.max(df,rh):rh;Cy=hN(u6,Cy),Cy=hN(c6,Cy),Cy=hN(d6,Cy);const gne=Cy>-1?1:0;Na.glyphOffsetArray.length>=65535&&Yr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Oi.sortKey!==void 0&&Na.addToSortKeyRanges(Na.symbolInstances.length,Oi.sortKey),Na.symbolInstances.emplaceBack(Ma.x,Ma.y,QA.x,QA.y,QA.z,Pm.right>=0?Pm.right:-1,Pm.center>=0?Pm.center:-1,Pm.left>=0?Pm.left:-1,Pm.vertical>=0?Pm.vertical:-1,oN,lN,g6,Dp!==void 0?Dp:Na.collisionBoxArray.length,Dp!==void 0?Dp+1:Na.collisionBoxArray.length,Ty!==void 0?Ty:Na.collisionBoxArray.length,Ty!==void 0?Ty+1:Na.collisionBoxArray.length,Ry!==void 0?Ry:Na.collisionBoxArray.length,Ry!==void 0?Ry+1:Na.collisionBoxArray.length,JA||Na.collisionBoxArray.length,JA?JA+1:Na.collisionBoxArray.length,on,p6,m6,h6,f6,gne,0,cN,dN,Cy,0,uN?1:0,wy)})(h,_a,Qa,$t,u,f,m,g,h.layers[0],h.collisionBoxArray,s.index,s.sourceLayerIndex,h.index,gt,fe,D,0,tt,xt,te,s,_,C,V,L,M,j,J,jt)};if(he==="line")for(const $t of pF(s.geometry,0,0,Da,Da)){const _a=Oae($t,Xe,_t,u.vertical||Ce,f,et,Ye,h.overscaling,Da);for(const ya of _a)Ce&&kae(h,Ce.text,Ct,ya)||Ft($t,ya,L)}else if(he==="line-center"){for(const $t of s.geometry)if($t.length>1){const _a=Nae($t,_t,u.vertical||Ce,f,et,Ye);_a&&Ft($t,_a,L)}}else if(s.type==="Polygon")for(const $t of zA(s.geometry,0)){const _a=zae($t,16);Ft($t[0],new Ag(_a.x,_a.y,0,0,void 0),L)}else if(s.type==="LineString")for(const $t of s.geometry)Ft($t,new Ag($t[0].x,$t[0].y,0,0,void 0),L);else if(s.type==="Point")for(const $t of s.geometry)for(const _a of $t)Ft([_a],new Ag(_a.x,_a.y,0,0,void 0),L)}const gw=255,yy=gw*ft;function PF(h,s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J,te){const fe=function(ve,Ce,Ve,et,Ye,Xe,gt,tt){const _t=[];if(Ce.positionedLines.length===0)return _t;const xt=et.layout.get("text-rotate").evaluate(Xe,{})*Math.PI/180,Ct=function($t){const _a=$t[0],ya=$t[1],Qa=_a*ya;return Qa>0?[_a,-ya]:Qa<0?[-_a,ya]:_a===0?[ya,_a]:[ya,-_a]}(Ve);let Mt=Math.abs(Ce.top-Ce.bottom);for(const $t of Ce.positionedLines)Mt-=$t.lineOffset;const Ot=Ce.positionedLines.length,jt=Mt/Ot;let Ft=Ce.top-Ve[1];for(let $t=0;$t<Ot;++$t){const _a=Ce.positionedLines[$t];Ft=Vae(Ce,jt,Ft,$t);for(const ya of _a.positionedGlyphs){if(!ya.rect)continue;const Qa=ya.rect||{};let Na=RE+1,Ma=!0,Ra=1,Sr=0;if(ya.image){const Oi=gt.get(ya.image.toString());if(!Oi)continue;if(Oi.sdf){Yr("SDF images are not supported in formatted text and will be ignored.");continue}Ma=!1,Ra=Oi.pixelRatio,Na=b0/Ra}const Xa=(Ye||tt)&&ya.vertical,hr=ya.metrics.advance*ya.scale/2,Ur=ya.metrics,ln=ya.rect;if(ln===null)continue;tt&&Ce.verticalizable&&(Sr=ya.image?hr-ya.metrics.width*ya.scale/2:0);const $r=Ye?[ya.x+hr,ya.y]:[0,0];let _n=[0,0],on=[0,0],En=!1;Ye||(Xa?(on=[ya.x+hr+Ct[0],ya.y+Ct[1]-Sr],En=!0):_n=[ya.x+hr+Ve[0],ya.y+Ve[1]-Sr]);const Jn=ln.w*ya.scale/(Ra*(ya.localGlyph?Np:1)),Fi=ln.h*ya.scale/(Ra*(ya.localGlyph?Np:1));let Gr,In,is,ms;if(Xa){const Oi=ya.y-Ft,ml=new Nt(-hr,hr-Oi),Dc=-Math.PI/2,So=new Nt(...on);Gr=new Nt(-hr+_n[0],_n[1]),Gr._rotateAround(Dc,ml)._add(So),Gr.x+=-Oi+hr,Gr.y-=(Ur.left-Na)*ya.scale;const Mo=ya.image?Ur.advance*ya.scale:Ge*ya.scale,Gu=String.fromCodePoint(ya.glyph);ni(Gu)?Gr.x+=(1-Na)*ya.scale:Qo(Gu)?Gr.x+=Mo-Ur.height*ya.scale+(-Na-1)*ya.scale:Gr.x+=ya.image||Ur.width+2*Na===ln.w&&Ur.height+2*Na===ln.h?(Mo-Fi)/2:(Mo-(Ur.height+2*Na)*ya.scale)/2,In=new Nt(Gr.x,Gr.y-Jn),is=new Nt(Gr.x+Fi,Gr.y),ms=new Nt(Gr.x+Fi,Gr.y-Jn)}else{const Oi=(Ur.left-Na)*ya.scale-hr+_n[0],ml=(-Ur.top-Na)*ya.scale+_n[1],Dc=Oi+Jn,So=ml+Fi;Gr=new Nt(Oi,ml),In=new Nt(Dc,ml),is=new Nt(Oi,So),ms=new Nt(Dc,So)}if(xt){let Oi;Oi=Ye?new Nt(0,0):En?new Nt(Ct[0],Ct[1]):new Nt(Ve[0],Ve[1]),Gr._rotateAround(xt,Oi),In._rotateAround(xt,Oi),is._rotateAround(xt,Oi),ms._rotateAround(xt,Oi)}const bs=new Nt(0,0),ks=new Nt(0,0);_t.push({tl:Gr,tr:In,bl:is,br:ms,texPrimary:Qa,texSecondary:void 0,writingMode:Ce.writingMode,glyphOffset:$r,sectionIndex:ya.sectionIndex,isSDF:Ma,pixelOffsetTL:bs,pixelOffsetBR:ks,minFontScaleX:0,minFontScaleY:0})}}return _t}(0,f,O,m,_,b,g,h.allowVerticalPlacement),he=h.textSizeData;let se=null;he.kind==="source"?(se=[ft*m.layout.get("text-size").evaluate(b,{},J)*M.textScaleFactor],se[0]>yy&&Yr(`${h.layerIds[0]}: Value for "text-size" is >= ${gw}. Reduce your "text-size".`)):he.kind==="composite"&&(se=[ft*M.compositeTextSizes[0].evaluate(b,{},J)*M.textScaleFactor,ft*M.compositeTextSizes[1].evaluate(b,{},J)*M.textScaleFactor],(se[0]>yy||se[1]>yy)&&Yr(`${h.layerIds[0]}: Value for "text-size" is >= ${gw}. Reduce your "text-size".`)),h.addSymbols(h.text,fe,se,O,_,b,C,s,u,D.lineStartIndex,D.lineLength,z,j,J,te,!1);for(const ve of V)L[ve]=h.text.placedSymbolArray.length-1;return 4*fe.length}function PE(h){for(const s in h)return h[s];return null}function sS(h,s,u,f,g,m,_,b,O,D){let C=_.top,V=_.bottom,L=_.left,z=_.right;const M=_.collisionPadding;if(M&&(L-=M[0],C-=M[1],z+=M[2],V+=M[3]),O){const j=new Nt(L,C),J=new Nt(z,C),te=new Nt(L,V),fe=new Nt(z,V),he=Ca(O);let se=new Nt(0,0);D&&(se=new Nt(D[0],D[1])),j._rotateAround(he,se),J._rotateAround(he,se),te._rotateAround(he,se),fe._rotateAround(he,se),L=Math.min(j.x,J.x,te.x,fe.x),z=Math.max(j.x,J.x,te.x,fe.x),C=Math.min(j.y,J.y,te.y,fe.y),V=Math.max(j.y,J.y,te.y,fe.y)}return h.emplaceBack(s.x,s.y,s.z,u.x,u.y,L,C,z,V,b,f,g,m),h.length-1}function EE(h){h.collisionPadding&&(h.top-=h.collisionPadding[1],h.bottom+=h.collisionPadding[3]);const s=h.bottom-h.top;return s>0?Math.max(10,s):null}function kae(h,s,u,f){const g=h.compareText;if(s in g){const m=g[s];for(let _=m.length-1;_>=0;_--)if(f.dist(m[_])<u)return!0}else g[s]=[];return g[s].push(f),!1}function EF(h,s){const u=h.fovAboveCenter,f=h.elevation?h.elevation.getMinElevationBelowMSL()*s:0,g=(h._camera.position[2]*h.worldSize-f)/Math.cos(h._pitch),m=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-h._pitch-u,.01));let _=Math.sin(h._pitch)*m+g;const b=g*(1/h._horizonShift);if(!h.elevation||h.elevation.exaggeration()===0){let O=Math.max(h.zoom-17,0);h.isOrthographic&&(O/=10),_*=1+O}return Math.min(1.01*_,b)}function yw(h,s){if(!s.isReprojectedInTileSpace)return{scale:1<<h.z,x:h.x,y:h.y,x2:h.x+1,y2:h.y+1,projection:s};const u=Math.pow(2,-h.z),f=h.x*u,g=(h.x+1)*u,m=h.y*u,_=(h.y+1)*u,b=Uu(f),O=Uu(g),D=Ei(m),C=Ei(_),V=s.project(b,D),L=s.project(O,D),z=s.project(O,C),M=s.project(b,C);let j=Math.min(V.x,L.x,z.x,M.x),J=Math.min(V.y,L.y,z.y,M.y),te=Math.max(V.x,L.x,z.x,M.x),fe=Math.max(V.y,L.y,z.y,M.y);const he=u/16;function se(Ce,Ve,et,Ye,Xe,gt){const tt=(et+Xe)/2,_t=(Ye+gt)/2,xt=s.project(Uu(tt),Ei(_t)),Ct=Math.max(0,j-xt.x,J-xt.y,xt.x-te,xt.y-fe);j=Math.min(j,xt.x),te=Math.max(te,xt.x),J=Math.min(J,xt.y),fe=Math.max(fe,xt.y),Ct>he&&(se(Ce,xt,et,Ye,tt,_t),se(xt,Ve,tt,_t,Xe,gt))}se(V,L,f,m,g,m),se(L,z,g,m,g,_),se(z,M,g,_,f,_),se(M,V,f,_,f,m),j-=he,J-=he,te+=he,fe+=he;const ve=1/Math.max(te-j,fe-J);return{scale:ve,x:j*ve,y:J*ve,x2:te*ve,y2:fe*ve,projection:s}}function NF(h,{x:s,y:u},f=0){return new Nt(((s-f)*h.scale-h.x)*Da,(u*h.scale-h.y)*Da)}const Uae=Ae.mat4.identity(new Float32Array(16));class Ay{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,u){return{x:0,y:0,z:0}}unproject(s,u){return new Gn(0,0)}projectTilePoint(s,u,f){return{x:s,y:u,z:0}}locationPoint(s,u,f,g=!0){return s._coordinatePoint(s.locationCoordinate(u,f),g)}pixelsPerMeter(s,u){return Yo(1,s)*u}pixelSpaceConversion(s,u,f){return 1}farthestPixelDistance(s){return EF(s,s.pixelsPerMeter)}pointCoordinate(s,u,f,g){const m=s.horizonLineFromTop(!1),_=new Nt(u,Math.max(m,f));return s.rayIntersectionCoordinate(s.pointRayIntersection(_,g))}pointCoordinate3D(s,u,f){const g=new Nt(u,f);if(s.elevation)return s.elevation.pointCoordinate(g);{const m=this.pointCoordinate(s,g.x,g.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(s,u){if(s.elevation&&s.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(s,u.x,u.y);const f=s.horizonLineFromTop();return u.y<f}createInversionMatrix(s,u){return Uae}createTileMatrix(s,u,f){let g,m,_;const b=f.canonical,O=Ae.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=yw(b,this);g=1,m=D.x+f.wrap*D.scale,_=D.y,Ae.mat4.scale(O,O,[g/D.scale,g/D.scale,s.pixelsPerMeter/u])}else g=u/s.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*f.wrap)*g,_=b.y*g;return Ae.mat4.translate(O,O,[m,_,0]),Ae.mat4.scale(O,O,[g/Da,g/Da,1]),O}upVector(s,u,f){return[0,0,1]}upVectorScale(s,u,f){return{metersToTile:1}}}class Bae extends Ay{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[u,f]=this.parallels=s.parallels||[29.5,45.5],g=Math.sin(Ca(u));this.n=(g+Math.sin(Ca(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(s,u){const{n:f,c:g,r0:m}=this,_=Ca(s-this.center[0]),b=Ca(u),O=Math.sqrt(g-2*f*Math.sin(b))/f;return{x:O*Math.sin(_*f),y:O*Math.cos(_*f)-m,z:0}}unproject(s,u){const{n:f,c:g,r0:m}=this,_=m+u;let b=Math.atan2(s,Math.abs(_))*Math.sign(_);_*f<0&&(b-=Math.PI*Math.sign(s)*Math.sign(_));const O=Ca(this.center[0])*f;b=tn(b,-Math.PI-O,Math.PI-O);const D=Ia(za(b/f)+this.center[0],-180,180),C=Math.asin(Ia((g-(s*s+_*_)*f*f)/(2*f),-1,1)),V=Ia(za(C),-85.051129,Bu);return new Gn(D,V)}}const Aw=1.340264,vw=-.081106,_w=893e-6,ww=.003796,oS=Math.sqrt(3)/2;class jae extends Ay{project(s,u){u=u/180*Math.PI,s=s/180*Math.PI;const f=Math.asin(oS*Math.sin(u)),g=f*f,m=g*g*g;return{x:.5*(s*Math.cos(f)/(oS*(Aw+3*vw*g+m*(7*_w+9*ww*g)))/Math.PI+.5),y:1-.5*(f*(Aw+vw*g+m*(_w+ww*g))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=f*f,m=g*g*g;for(let C,V,L,z=0;z<12&&(V=f*(Aw+vw*g+m*(_w+ww*g))-u,L=Aw+3*vw*g+m*(7*_w+9*ww*g),C=V/L,f=Ia(f-C,-Math.PI/3,Math.PI/3),g=f*f,m=g*g*g,!(Math.abs(C)<1e-12));++z);const _=oS*s*(Aw+3*vw*g+m*(7*_w+9*ww*g))/Math.cos(f),b=Math.asin(Math.sin(f)/oS),O=Ia(180*_/Math.PI,-180,180),D=Ia(180*b/Math.PI,-85.051129,Bu);return new Gn(O,D)}}class Gae extends Ay{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){return{x:.5+s/360,y:.5-u/360,z:0}}unproject(s,u){const f=360*(s-.5),g=Ia(360*(.5-u),-85.051129,Bu);return new Gn(f,g)}}const E0=Math.PI/2;function lS(h){return Math.tan((E0+h)/2)}class Zae extends Ay{constructor(s){super(s),this.center=s.center||[0,30];const[u,f]=this.parallels=s.parallels||[30,30];let g=Ca(u),m=Ca(f);this.southernCenter=g+m<0,this.southernCenter&&(g=-g,m=-m);const _=Math.cos(g),b=lS(g);this.n=g===m?Math.sin(g):Math.log(_/Math.cos(m))/Math.log(lS(m)/b),this.f=_*Math.pow(lS(g),this.n)/this.n}project(s,u){u=Ca(u),this.southernCenter&&(u=-u),s=Ca(s-this.center[0]);const f=1e-6,{n:g,f:m}=this;m>0?u<-E0+f&&(u=-E0+f):u>E0-f&&(u=E0-f);const _=m/Math.pow(lS(u),g);let b=_*Math.sin(g*s),O=m-_*Math.cos(g*s);return b=.5*(b/Math.PI+.5),O=.5*(O/Math.PI+.5),{x:b,y:this.southernCenter?O:1-O,z:0}}unproject(s,u){s=(2*s-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:g}=this,m=g-u,_=Math.sign(m),b=Math.sign(f)*Math.sqrt(s*s+m*m);let O=Math.atan2(s,Math.abs(m))*_;m*f<0&&(O-=Math.PI*Math.sign(s)*_);const D=Ia(za(O/f)+this.center[0],-180,180),C=Ia(za(2*Math.atan(Math.pow(g/b,1/f))-E0),-85.051129,Bu);return new Gn(D,this.southernCenter?-C:C)}}class OF extends Ay{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,u){return{x:Sl(s),y:Li(u),z:0}}unproject(s,u){const f=Uu(s),g=Ei(u);return new Gn(f,g)}}const VF=Ca(Bu);class qae extends Ay{project(s,u){const f=(u=Ca(u))*u,g=f*f;return{x:.5*((s=Ca(s))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=25,m=0,_=f*f;do{_=f*f;const D=_*_;m=(f*(1.007226+_*(.015085+D*(.028874*_-.044475-.005916*D)))-u)/(1.007226+_*(.045255+D*(.259866*_-.311325-.005916*11*D))),f=Ia(f-m,-VF,VF)}while(Math.abs(m)>1e-6&&--g>0);_=f*f;const b=Ia(za(s/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),O=za(f);return new Gn(b,O)}}const zF=Ca(Bu);class Hae extends Ay{project(s,u){u=Ca(u),s=Ca(s);const f=Math.cos(u),g=2/Math.PI,m=Math.acos(f*Math.cos(s/2)),_=Math.sin(m)/m,b=.5*(s*g+2*f*Math.sin(s/2)/_)||0,O=.5*(u+Math.sin(u)/_)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(O/Math.PI+1),z:0}}unproject(s,u){let f=s=(2*s-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,m=25;const _=1e-6;let b=0,O=0;do{const D=Math.cos(g),C=Math.sin(g),V=2*C*D,L=C*C,z=D*D,M=Math.cos(f/2),j=Math.sin(f/2),J=2*M*j,te=j*j,fe=1-z*M*M,he=fe?1/fe:0,se=fe?Math.acos(D*M)*Math.sqrt(1/fe):0,ve=.5*(2*se*D*j+2*f/Math.PI)-s,Ce=.5*(se*C+g)-u,Ve=.5*he*(z*te+se*D*M*L)+1/Math.PI,et=he*(J*V/4-se*C*j),Ye=.125*he*(V*j-se*C*z*J),Xe=.5*he*(L*M+se*te*D)+.5,gt=et*Ye-Xe*Ve;b=(Ce*et-ve*Xe)/gt,O=(ve*Ye-Ce*Ve)/gt,f=Ia(f-b,-Math.PI,Math.PI),g=Ia(g-O,-zF,zF)}while((Math.abs(b)>_||Math.abs(O)>_)&&--m>0);return new Gn(za(f),za(g))}}class DF extends Ay{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ca(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){const{scale:f,cosPhi:g}=this;return{x:Ca(s)*g*f+.5,y:-Math.sin(Ca(u))/g*f+.5,z:0}}unproject(s,u){const{scale:f,cosPhi:g}=this,m=-(u-.5)/f,_=Ia(za((s-.5)/f)/g,-180,180),b=Math.asin(Ia(m*g,-1,1)),O=Ia(za(b),-85.051129,Bu);return new Gn(_,O)}}class $ae extends OF{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,u,f){const g=Bn(s,u,f),m=Ni(_s(f));return Ae.vec3.transformMat4(g,g,m),{x:g[0],y:g[1],z:g[2]}}locationPoint(s,u,f){const g=Vc(u.lat,u.lng),m=Ae.vec3.normalize([],g),_=f?s._centerAltitude+f:s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(u),s._centerAltitude):s._centerAltitude,b=Yo(1,0)*Da*_;Ae.vec3.scaleAndAdd(g,g,m,b);const O=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.multiply(O,s.pixelMatrix,s.globeMatrix),Ae.vec3.transformMat4(g,g,O),new Nt(g[0],g[1])}pixelsPerMeter(s,u){return Yo(1,0)*u}pixelSpaceConversion(s,u,f){const g=Yo(1,s)*u,m=vr(Yo(1,45)*u,g,f);return this.pixelsPerMeter(s,u)/m}createTileMatrix(s,u,f){const g=ps(_s(f.canonical));return Ae.mat4.multiply(new Float64Array(16),s.globeMatrix,g)}createInversionMatrix(s,u){const{center:f}=s,g=Ni(_s(u));return Ae.mat4.rotateY(g,g,Ca(f.lng)),Ae.mat4.rotateX(g,g,Ca(f.lat)),Ae.mat4.scale(g,g,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(s,u,f,g){return vn(s,u,f,!0)||new o(0,0)}pointCoordinate3D(s,u,f){const g=this.pointCoordinate(s,u,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(s,u){return!vn(s,u.x,u.y,!1)}farthestPixelDistance(s){const u=function(g,m){const _=g.cameraToCenterDistance,b=g._centerAltitude*m,O=g._camera,D=g._camera.forward(),C=Ae.vec3.add([],Ae.vec3.scale([],D,-_),[0,0,b]),V=g.worldSize/(2*Math.PI),L=[0,0,-V],z=g.width/g.height,M=Math.tan(g.fovAboveCenter),j=Ae.vec3.scale([],O.up(),M),J=Ae.vec3.scale([],O.right(),M*z),te=Ae.vec3.normalize([],Ae.vec3.add([],Ae.vec3.add([],D,j),J)),fe=[];let he;if(new zr(C,te).closestPointOnSphere(L,V,fe)){const se=Ae.vec3.add([],fe,L),ve=Ae.vec3.sub([],se,C);he=Math.cos(g.fovAboveCenter)*Ae.vec3.length(ve)}else{const se=Ae.vec3.sub([],C,L),ve=Ae.vec3.sub([],L,C);Ae.vec3.normalize(ve,ve);const Ce=Ae.vec3.length(se)-V;he=Math.sqrt(Ce*(Ce+2*V));const Ve=Math.acos(he/(V+Ce))-Math.acos(Ae.vec3.dot(D,ve));he*=Math.cos(Ve)}return 1.01*he}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),f=Gl(s.zoom);if(f>0){const g=EF(s,Yo(1,s.center.lat)*s.worldSize),m=s.worldSize/(2*Math.PI),_=Math.max(s.width,s.height)/s.worldSize*Math.PI;return vr(u,g+m*(1-Math.cos(_)),Math.pow(f,10))}return u}upVector(s,u,f){return Bn(u,f,s,1)}upVectorScale(s){return{metersToTile:mn(fi(_s(s)))}}}function MF(h){const s=h.parallels,u=!!s&&Math.abs(s[0]+s[1])<.01;switch(h.name){case"mercator":return new OF(h);case"equirectangular":return new Gae(h);case"naturalEarth":return new qae(h);case"equalEarth":return new jae(h);case"winkelTripel":return new Hae(h);case"albers":return u?new DF(h):new Bae(h);case"lambertConformalConic":return u?new DF(h):new Zae(h);case"globe":return new $ae(h)}throw new Error(`Invalid projection name: ${h.name}`)}const Kae=Lh.VectorTileFeature.types,Wae=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function uS(h,s,u,f,g,m,_,b,O,D,C,V,L){const z=b?Math.min(yy,Math.round(b[0])):0,M=b?Math.min(yy,Math.round(b[1])):0;h.emplaceBack(s,u,Math.round(32*f),Math.round(32*g),m,_,(z<<1)+(O?1:0),M,16*D,16*C,256*V,256*L)}function cS(h,s,u){h.emplaceBack(s,u)}function dS(h,s,u,f,g,m,_){h.emplaceBack(s,u,f,g,m,_)}function hS(h,s,u,f,g){h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g)}function Yae(h){for(const s of h.sections)if(xi(s.text))return!0;return!1}class NE{constructor(s){this.layoutVertexArray=new Eh,this.indexArray=new Ls,this.programConfigurations=s,this.segments=new Gi,this.dynamicLayoutVertexArray=new sd,this.opacityVertexArray=new gp,this.placedSymbolArray=new Rl,this.iconTransitioningVertexArray=new Wd,this.globeExtVertexArray=new id,this.zOffsetVertexArray=new nd}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(s,u,f,g,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,eS.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,C0.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Wae,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=s.createVertexBuffer(this.iconTransitioningVertexArray,w.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,wE.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,p.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Pt(NE,"SymbolBuffers");class OE{constructor(s,u,f){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Gi,this.collisionVertexArray=new Ec,this.collisionVertexArrayExt=new sd}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,P.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,U.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pt(OE,"CollisionBuffers");class fS{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.lut=s.lut,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ae.mat4.identity([]),this.placementViewportMatrix=Ae.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ca(this.zoom,u["text-size"]),this.iconSizeData=ca(this.zoom,u["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),m=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(_=>ah[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=s.sourceID,this.projection=s.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new NE(new zh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("text")||s.startsWith("symbol"))),this.icon=new NE(new zh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("icon")||s.startsWith("symbol"))),this.glyphOffsetArray=new vA,this.lineVertexArray=new dm,this.symbolInstances=new AA}calculateGlyphDependencies(s,u,f,g,m){for(const _ of s){const b=_.codePointAt(0);if(b===void 0)break;if(u[b]=!0,g&&m&&b<=65535){const O=sn[_];O&&(u[O.charCodeAt(0)]=!0)}}}updateFootprints(s,u){}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);return!A0(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(s,u,f,g){const m=this.layers[0],_=m.layout,b=this.projection.name==="globe",O=_.get("text-font"),D=_.get("text-field"),C=_.get("icon-image"),[V,L]=_.get("icon-size-scale-range"),z=Ia(u.scaleFactor||1,V,L),M=(D.value.kind!=="constant"||D.value.value instanceof ys&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),j=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,J=_.get("symbol-sort-key");if(this.features=[],!M&&!j)return;const te=u.iconDependencies,fe=u.glyphDependencies,he=u.availableImages,se=new Pn(this.zoom);for(const{feature:ve,id:Ce,index:Ve,sourceLayerIndex:et}of s){const Ye=m._featureFilter.needGeometry,Xe=Y(ve,Ye);if(!m._featureFilter.filter(se,Xe,f))continue;if(Ye||(Xe.geometry=K(ve,f,g)),b&&ve.type!==1&&f.z<=5){const Ct=Xe.geometry,Mt=.98078528056,Ot=(jt,Ft)=>{const $t=Bn(jt.x,jt.y,f,1),_a=Bn(Ft.x,Ft.y,f,1);return Ae.vec3.dot($t,_a)<Mt};for(let jt=0;jt<Ct.length;jt++)Ct[jt]=S(Ct[jt],Ot)}let gt,tt;if(M){const Ct=m.getValueAndResolveTokens("text-field",Xe,f,he),Mt=ys.factory(Ct);Yae(Mt)&&(this.hasRTLText=!0),(!this.hasRTLText||wo()==="unavailable"||this.hasRTLText&&fs.isParsed())&&(gt=Ka(Mt,m,Xe))}if(j){const Ct=m.getValueAndResolveTokens("icon-image",Xe,f,he);tt=Ct instanceof Vs?Ct:Vs.build(Ct)}if(!gt&&!tt)continue;const _t=this.sortFeaturesByKey?J.evaluate(Xe,{},f):void 0,xt={id:Ce,text:gt,icon:tt,index:Ve,sourceLayerIndex:et,geometry:Xe.geometry,properties:ve.properties,type:Kae[ve.type],sortKey:_t};if(this.features.push(xt),tt){const Ct=this.layers[0]._unevaluatedLayout._values,{iconPrimary:Mt,iconSecondary:Ot}=SF(tt,this.iconSizeData,Ct["icon-size"],f,this.zoom,xt,this.pixelRatio,z),jt=Mt.id.toString();if(te.has(jt)?te.get(jt).push(Mt):te.set(jt,[Mt]),Ot){const Ft=Ot.id.toString();te.has(Ft)?te.get(Ft).push(Ot):te.set(Ft,[Ot])}}if(gt){const Ct=O.evaluate(Xe,{},f).join(","),Mt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ah.vertical)>=0;for(const Ot of gt.sections)if(Ot.image){const jt=Ot.image.getPrimary().scaleSelf(this.pixelRatio),Ft=jt.id.toString(),$t=te.get(Ft)||[];$t.push(jt),te.set(Ft,$t)}else{const jt=aa(gt.toString()),Ft=Ot.fontStack||Ct,$t=fe[Ft]=fe[Ft]||{};this.calculateGlyphDependencies(Ot.text,$t,Mt,this.allowVerticalPlacement,jt)}}}if(_.get("symbol-placement")==="line"&&(this.features=function(ve){const Ce={},Ve={},et=[];let Ye=0;function Xe(xt){et.push(ve[xt]),Ye++}function gt(xt,Ct,Mt){const Ot=Ve[xt];return delete Ve[xt],Ve[Ct]=Ot,et[Ot].geometry[0].pop(),et[Ot].geometry[0]=et[Ot].geometry[0].concat(Mt[0]),Ot}function tt(xt,Ct,Mt){const Ot=Ce[Ct];return delete Ce[Ct],Ce[xt]=Ot,et[Ot].geometry[0].shift(),et[Ot].geometry[0]=Mt[0].concat(et[Ot].geometry[0]),Ot}function _t(xt,Ct,Mt){const Ot=Mt?Ct[0][Ct[0].length-1]:Ct[0][0];return`${xt}:${Ot.x}:${Ot.y}`}for(let xt=0;xt<ve.length;xt++){const Ct=ve[xt],Mt=Ct.geometry,Ot=Ct.text?Ct.text.toString():null;if(!Ot){Xe(xt);continue}const jt=_t(Ot,Mt),Ft=_t(Ot,Mt,!0);if(jt in Ve&&Ft in Ce&&Ve[jt]!==Ce[Ft]){const $t=tt(jt,Ft,Mt),_a=gt(jt,Ft,et[$t].geometry);delete Ce[jt],delete Ve[Ft],Ve[_t(Ot,et[_a].geometry,!0)]=_a,et[$t].geometry=null}else jt in Ve?gt(jt,Ft,Mt):Ft in Ce?tt(jt,Ft,Mt):(Xe(xt),Ce[jt]=Ye-1,Ve[Ft]=Ye-1)}return et.filter(xt=>xt.geometry)}(this.features)),_.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const ve of u.elevationFeatures)this.elevationFeatureIdToIndex.set(ve.id,this.elevationFeatures.length),this.elevationFeatures.push(ve)}}else _.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((ve,Ce)=>ve.sortKey-Ce.sortKey)}update(s,u,f,g,m,_,b){this.text.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b),this.icon.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let s=!1;for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);if(f.elevationFeatureIndex===65535)continue;const g=this.elevationFeatures[f.elevationFeatureIndex];if(g){const m=.05+g.pointElevation(new Nt(f.tileAnchorX,f.tileAnchorY));f.zOffset!==m&&(s=!0,f.zOffset=m)}}s&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const s=(m,_,b)=>{f+=_,f>m.length&&m.resize(f);for(let O=-_;O<0;O++)m.emplace(O+f,b)},u=(m,_,b)=>{g+=_,g>m.length&&m.resize(g);for(let O=-_;O<0;O++)m.emplace(O+g,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,g=0;for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:O,numIconVertices:D}=_,C=_.zOffset,V=D>0;if((b>0||O>0)&&(s(this.text.zOffsetVertexArray,b,C),s(this.text.zOffsetVertexArray,O,C)),V){const{placedIconSymbolIndex:L,verticalPlacedIconSymbolIndex:z}=_;L>=0&&u(this.icon.zOffsetVertexArray,D,C),z>=0&&u(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,C)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=MF(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){const f=this.lineVertexArray.length;if(s.segment!==void 0)for(const{x:g,y:m}of u)this.lineVertexArray.emplaceBack(g,m);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(s,u,f,g,m,_,b,O,D,C,V,L,z,M,j,J){const te=s.indexArray,fe=s.layoutVertexArray,he=s.globeExtVertexArray,se=s.segments.prepareSegment(4*u.length,fe,te,this.canOverlap?_.sortKey:void 0),ve=this.glyphOffsetArray.length,Ce=se.vertexLength,Ve=this.allowVerticalPlacement&&b===ah.vertical?Math.PI/2:0,et=_.text&&_.text.sections;for(let Xe=0;Xe<u.length;Xe++){const{tl:gt,tr:tt,bl:_t,br:xt,texPrimary:Ct,texSecondary:Mt,pixelOffsetTL:Ot,pixelOffsetBR:jt,minFontScaleX:Ft,minFontScaleY:$t,glyphOffset:_a,isSDF:ya,sectionIndex:Qa}=u[Xe],Na=se.vertexLength,Ma=_a[1];if(uS(fe,D.x,D.y,gt.x,Ma+gt.y,Ct.x,Ct.y,f,ya,Ot.x,Ot.y,Ft,$t),uS(fe,D.x,D.y,tt.x,Ma+tt.y,Ct.x+Ct.w,Ct.y,f,ya,jt.x,Ot.y,Ft,$t),uS(fe,D.x,D.y,_t.x,Ma+_t.y,Ct.x,Ct.y+Ct.h,f,ya,Ot.x,jt.y,Ft,$t),uS(fe,D.x,D.y,xt.x,Ma+xt.y,Ct.x+Ct.w,Ct.y+Ct.h,f,ya,jt.x,jt.y,Ft,$t),O){const{x:Ra,y:Sr,z:Xa}=O.anchor,[hr,Ur,ln]=O.up;dS(he,Ra,Sr,Xa,hr,Ur,ln),dS(he,Ra,Sr,Xa,hr,Ur,ln),dS(he,Ra,Sr,Xa,hr,Ur,ln),dS(he,Ra,Sr,Xa,hr,Ur,ln),hS(s.dynamicLayoutVertexArray,Ra,Sr,Xa,Ve)}else hS(s.dynamicLayoutVertexArray,D.x,D.y,D.z,Ve);if(J){const Ra=Mt||Ct;cS(s.iconTransitioningVertexArray,Ra.x,Ra.y),cS(s.iconTransitioningVertexArray,Ra.x+Ra.w,Ra.y),cS(s.iconTransitioningVertexArray,Ra.x,Ra.y+Ra.h),cS(s.iconTransitioningVertexArray,Ra.x+Ra.w,Ra.y+Ra.h)}te.emplaceBack(Na,Na+1,Na+2),te.emplaceBack(Na+1,Na+2,Na+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_a[0]),Xe!==u.length-1&&Qa===u[Xe+1].sectionIndex||s.programConfigurations.populatePaintArrays(fe.length,_,_.index,{},z,M,j,et&&et[Qa])}const Ye=O?O.anchor:D;s.placedSymbolArray.emplaceBack(Ye.x,Ye.y,Ye.z,D.x,D.y,ve,this.glyphOffsetArray.length-ve,Ce,C,V,D.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],b,0,!1,0,L,0)}_commitLayoutVertex(s,u,f,g,m,_,b){s.emplaceBack(u,f,g,m,_,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(s,u,f,g,m,_,b){const O=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=O.vertexLength,C=b.tileAnchorX,V=b.tileAnchorY;for(let z=0;z<4;z++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,u,s.padding,b.zOffset),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new Nt(s.x1,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new Nt(s.x2,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new Nt(s.x2,s.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new Nt(s.x1,s.y2)),O.vertexLength+=4;const L=f.indexArray;L.emplaceBack(D,D+1),L.emplaceBack(D+1,D+2),L.emplaceBack(D+2,D+3),L.emplaceBack(D+3,D),O.primitiveLength+=4}_addTextDebugCollisionBoxes(s,u,f,g,m,_){for(let b=g;b<m;b++){const O=f.get(b),D=this.getSymbolInstanceTextSize(s,_,u,b);this._addCollisionDebugVertices(O,D,this.textCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(s,u,f,g,m,_){for(let b=g;b<m;b++){const O=f.get(b),D=this.getSymbolInstanceIconSize(s,u,_.placedIconSymbolIndex);this._addCollisionDebugVertices(O,D,this.iconCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,_)}}generateCollisionDebugBuffers(s,u,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new OE(Pc,X.members,Wd),this.iconCollisionBox=new OE(Pc,X.members,Wd);const g=sr(this.iconSizeData,s),m=sr(this.textSizeData,s,f);for(let _=0;_<this.symbolInstances.length;_++){const b=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(m,s,u,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(m,s,u,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(g,s,u,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(g,s,u,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(s,u,f,g){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),_=$a(this.textSizeData,s,m)/Ge;return this.tilePixelRatio*_}getSymbolInstanceIconSize(s,u,f){const g=this.icon.placedSymbolArray.get(f),m=$a(this.iconSizeData,s,g);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(s,u,f,g){s.emplaceBack(u,-f,-f,g),s.emplaceBack(u,f,-f,g),s.emplaceBack(u,f,f,g),s.emplaceBack(u,-f,f,g)}_updateTextDebugCollisionBoxes(s,u,f,g,m,_,b){for(let O=g;O<m;O++){const D=f.get(O),C=this.getSymbolInstanceTextSize(s,_,u,O);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,D.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(s,u,f,g,m,_,b){for(let O=g;O<m;O++){const D=f.get(O),C=this.getSymbolInstanceIconSize(s,u,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,D.padding,_.zOffset)}}updateCollisionDebugBuffers(s,u,f,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=sr(this.iconSizeData,s,g),_=sr(this.textSizeData,s,f);for(let b=0;b<this.symbolInstances.length;b++){const O=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(_,s,u,O.textBoxStartIndex,O.textBoxEndIndex,O,f),this._updateTextDebugCollisionBoxes(_,s,u,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,f),this._updateIconDebugCollisionBoxes(m,s,u,O.iconBoxStartIndex,O.iconBoxEndIndex,O,g),this._updateIconDebugCollisionBoxes(m,s,u,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,u,f,g,m,_,b,O,D){const C={};if(u<f){const{x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se,featureIndex:ve}=s.get(u);C.textBox={x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se},C.textFeatureIndex=ve}if(g<m){const{x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se,featureIndex:ve}=s.get(g);C.verticalTextBox={x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se},C.verticalTextFeatureIndex=ve}if(_<b){const{x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se,featureIndex:ve}=s.get(_);C.iconBox={x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se},C.iconFeatureIndex=ve}if(O<D){const{x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se,featureIndex:ve}=s.get(O);C.verticalIconBox={x1:V,y1:L,x2:z,y2:M,padding:j,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:fe,tileAnchorX:he,tileAnchorY:se},C.verticalIconFeatureIndex=ve}return C}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(s,u){const f=s.placedSymbolArray.get(u),g=f.vertexStartIndex+4*f.numGlyphs;for(let m=f.vertexStartIndex;m<g;m+=4)s.indexArray.emplaceBack(m,m+1,m+2),s.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(s),f=Math.cos(s),g=[],m=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const O=this.symbolInstances.get(b);g.push(0|Math.round(u*O.tileAnchorX+f*O.tileAnchorY)),m.push(O.featureIndex)}return _.sort((b,O)=>g[b]-g[O]||m[O]-m[b]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let s=0;s<this.symbolInstances.length;++s)this.symbolInstanceIndexesSortedZOffset.push(s)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((s,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(s).zOffset)}addToSortKeyRanges(s,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:D}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),m>=0&&m!==g&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==g&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let IF,LF,VE;Pt(fS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),fS.addDynamicAttributes=hS;class FF{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:gc,this.defaultValue=s}evaluate(s){if(s.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt(FF,"FormatSectionOverride",{omit:["defaultValue"]});const zE=()=>VE||(VE={layout:IF||(IF=new ji({"symbol-placement":new Pa(qt.layout_symbol["symbol-placement"]),"symbol-spacing":new Pa(qt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pa(qt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ga(qt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pa(qt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Pa(qt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Pa(qt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Pa(qt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pa(qt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pa(qt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pa(qt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ga(qt.layout_symbol["icon-size"]),"icon-size-scale-range":new Pa(qt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ga(qt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ga(qt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ga(qt.layout_symbol["icon-image"]),"icon-rotate":new Ga(qt.layout_symbol["icon-rotate"]),"icon-padding":new Pa(qt.layout_symbol["icon-padding"]),"icon-keep-upright":new Pa(qt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ga(qt.layout_symbol["icon-offset"]),"icon-anchor":new Ga(qt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pa(qt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pa(qt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pa(qt.layout_symbol["text-rotation-alignment"]),"text-field":new Ga(qt.layout_symbol["text-field"]),"text-font":new Ga(qt.layout_symbol["text-font"]),"text-size":new Ga(qt.layout_symbol["text-size"]),"text-size-scale-range":new Pa(qt.layout_symbol["text-size-scale-range"]),"text-max-width":new Ga(qt.layout_symbol["text-max-width"]),"text-line-height":new Ga(qt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ga(qt.layout_symbol["text-letter-spacing"]),"text-justify":new Ga(qt.layout_symbol["text-justify"]),"text-radial-offset":new Ga(qt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pa(qt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ga(qt.layout_symbol["text-anchor"]),"text-max-angle":new Pa(qt.layout_symbol["text-max-angle"]),"text-writing-mode":new Pa(qt.layout_symbol["text-writing-mode"]),"text-rotate":new Ga(qt.layout_symbol["text-rotate"]),"text-padding":new Pa(qt.layout_symbol["text-padding"]),"text-keep-upright":new Pa(qt.layout_symbol["text-keep-upright"]),"text-transform":new Ga(qt.layout_symbol["text-transform"]),"text-offset":new Ga(qt.layout_symbol["text-offset"]),"text-allow-overlap":new Pa(qt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pa(qt.layout_symbol["text-ignore-placement"]),"text-optional":new Pa(qt.layout_symbol["text-optional"]),visibility:new Pa(qt.layout_symbol.visibility)})),paint:LF||(LF=new ji({"icon-opacity":new Ga(qt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ga(qt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ga(qt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ga(qt.paint_symbol["text-emissive-strength"]),"icon-color":new Ga(qt.paint_symbol["icon-color"]),"icon-halo-color":new Ga(qt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ga(qt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ga(qt.paint_symbol["icon-halo-blur"]),"icon-translate":new Pa(qt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pa(qt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ga(qt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ga(qt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ga(qt.paint_symbol["text-occlusion-opacity"]),"text-color":new Ga(qt.paint_symbol["text-color"],{runtimeType:Ws,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Ga(qt.paint_symbol["text-halo-color"]),"text-halo-width":new Ga(qt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ga(qt.paint_symbol["text-halo-blur"]),"text-translate":new Pa(qt.paint_symbol["text-translate"]),"text-translate-anchor":new Pa(qt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Pa(qt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Pa(qt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Pa(qt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Pa(qt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ga(qt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},VE);class pS extends uo{constructor(s,u,f,g){super(s,zE(),u,f,g),this._colorAdjustmentMatrix=Ae.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=s.paint!==void 0&&("icon-occlusion-opacity"in s.paint||"text-occlusion-opacity"in s.paint)}recalculate(s,u){super.recalculate(s,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const m of f)g.indexOf(m)<0&&g.push(m);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(s,u,f,g){return this._saturation===s&&this._contrast===u&&this._brightnessMin===f&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(m,_,b,O){m=Zt(m),_=Rn(_);const D=Ae.mat4.create(),C=m/3,V=1-2*C,L=[V,C,C,0,C,V,C,0,C,C,V,0,0,0,0,1],z=.5-.5*_,M=O-b;return Ae.mat4.multiply(D,[M,0,0,0,0,M,0,0,0,0,M,0,b,b,b,1],[_,0,0,0,0,_,0,0,0,0,_,0,z,z,z,1]),Ae.mat4.multiply(D,D,L),D}(s,u,f,g),this._saturation=s,this._contrast=u,this._brightnessMin=f,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(s,u,f,g){const m=this.layout.get(s).evaluate(u,{},f,g),_=this._unevaluatedLayout._values[s];return _.isDataDriven()||Qh(_.value)||!m?m:function(b,O){return O.replace(/{([^{}]+)}/g,(D,C)=>C in b?String(b[C]):"")}(u.properties,m)}createBucket(s){return new fS(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of zE().paint.overridableProperties){if(!pS.hasPaintOverride(this.layout,s))continue;const u=this.paint.get(s),f=new FF(u),g=new lo(f,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new Q("source",g):new ye("composite",g,u.value.zoomStops,u.value._interpolationType),this.paint._values[s]=new Ul(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&pS.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){const f=s.get("text-field"),g=zE().paint.properties[u];let m=!1;const _=b=>{for(const O of b)if(g.overrides&&g.overrides.hasOverride(O))return void(m=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ys)_(f.value.value.sections);else if(f.value.kind==="source"){const b=D=>{m||(D instanceof tu&&Ji(D.value)===Tu?_(D.value.sections):D instanceof zd?_(D.sections):D.eachChild(b))},O=f.value;O._styleExpression&&b(O._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(s,u,f){return{config:new nc(this,{zoom:u,lut:f}),overrideFog:!1}}}let kF,UF,BF,jF;var DE=Dn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function ME(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function IE(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class LE{constructor(s,u,f,g){this.context=s,this.format=f,this.useMipmap=g&&g.useMipmap,this.texture=s.gl.createTexture(),this.update(u,{premultiply:g&&g.premultiply})}update(s,u){const f=s&&s instanceof HTMLVideoElement&&s.width===0?s.videoWidth:s.width,g=s&&s instanceof HTMLVideoElement&&s.height===0?s.videoHeight:s.height,{context:m}=this,{gl:_}=m,{x:b,y:O}=u&&u.position?u.position:{x:0,y:0},D=b+f,C=O+g;!this.size||this.size[0]===D&&this.size[1]===C||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!u||u.premultiply!==!1));const V=s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ImageBitmap&&s instanceof ImageBitmap;if(!this.size&&D>0&&C>0){const L=this.useMipmap?Math.floor(Math.log2(Math.max(D,C)))+1:1;_.texStorage2D(_.TEXTURE_2D,L,this.format,D,C),this.size=[D,C]}if(this.size)if(V)_.texSubImage2D(_.TEXTURE_2D,0,b,O,ME(this.format),IE(this.format),s);else{const L=s.data;L&&_.texSubImage2D(_.TEXTURE_2D,0,b,O,f,g,ME(this.format),IE(this.format),L)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(s,u,f=!1){const{context:g}=this,{gl:m}=g;m.bindTexture(m.TEXTURE_2D,this.texture),s!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!f?s===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(s,u,f,g){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),u!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,u),this.magFilter=u),s!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?s===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),f!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,f),this.wrapS=f),g!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class mS{constructor(s,u){this.context=s,this.texture=u}bind(s,u){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),s!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,s),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,s),this.minFilter=s),u!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrapS=u)}}function gS(h,s,u,f,g,m,_,b){const O=[h,s,1,u,f,1,g,m,1],D=[_,b,1],C=Ae.mat3.adjoint([],O),[V,L,z]=Ae.vec3.transformMat3(D,D,C);return Ae.mat3.multiply(O,O,[V,0,0,0,L,0,0,0,z])}function GF(h,s,u,f,g,m,_,b){const O=function(D,C,V,L,z,M,j,J){const te=gS(0,0,1,0,1,1,0,1),fe=gS(D,C,V,L,z,M,j,J),he=Ae.mat3.adjoint([],te);return Ae.mat3.multiply(fe,fe,he)}(h,s,u,f,g,m,_,b);return[O[2]/O[8]/Da,O[5]/O[8]/Da]}function yS(h){return[h[0],Math.min(Math.max(h[1],-85.051129),Bu)]}class ZF extends eu{constructor(s,u,f,g){super(),this.id=s,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=u,this._dirty=!1}load(s,u){if(this._loaded=u||!1,this.fire(new Zo("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return s&&(this.coordinates=s),this._loaded=!0,void this._finishLoading();this._imageRequest=gh(this.map._requestManager.transformRequest(this.url,Ns.Image),(f,g)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new Nd(f)):g&&(this.image=g instanceof HTMLImageElement?Kt.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}setTexture(s){if(!(s.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new mS(this.map.painter.context,s.handle),this.width=s.dimensions[0],this.height=s.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Zo("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(s){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof mS||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(s){if(this.coordinates=s,this._boundsArray=void 0,this._unsupportedCoords=!1,!s.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=s[0][1],f=s[0][1];for(const m of s)m[1]>f&&(f=m[1]),m[1]<u&&(u=m[1]);const g=(f+u)/2;if(g>Bu?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=s.map(o.fromLngLat);this.tileID=function(_){let b=1/0,O=1/0,D=-1/0,C=-1/0;for(const j of _)b=Math.min(b,j.x),O=Math.min(O,j.y),D=Math.max(D,j.x),C=Math.max(C,j.y);const V=Math.max(D-b,C-O),L=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),z=Math.pow(2,L);let M=Math.floor((b+D)/2*z);return M>1&&(M-=1),new ha(L,M,Math.floor((O+C)/2*z))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Zo("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(s){for(const te in this.tiles){const fe=this.tiles[te];fe.state!=="loaded"&&(fe.state="loaded",fe.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=yw(new ha(0,0,0),this.map.transform.projection),f=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(te){const fe=te[1].x-te[0].x,he=te[1].y-te[0].y,se=te[2].x-te[1].x,ve=te[2].y-te[1].y,Ce=te[3].x-te[2].x,Ve=te[3].y-te[2].y,et=te[0].x-te[3].x,Ye=te[0].y-te[3].y,Xe=fe*ve-se*he,gt=se*Ve-Ce*ve,tt=Ce*Ye-et*Ve,_t=et*he-fe*Ye;return Xe>0&&gt>0&&tt>0&&_t>0||Xe<0&&gt<0&&tt<0&&_t<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=yw(this.tileID,this.map.transform.projection),[m,_,b,O]=this.coordinates.map(te=>{const fe=g.projection.project(te[0],te[1]);return NF(g,fe)._round()});this.perspectiveTransform=GF(m.x,m.y,_.x,_.y,b.x,b.y,O.x,O.y);const D=this._boundsArray=new Lu;D.emplaceBack(m.x,m.y,0,0),D.emplaceBack(_.x,_.y,Da,0),D.emplaceBack(O.x,O.y,0,Da),D.emplaceBack(b.x,b.y,Da,Da),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=s.createVertexBuffer(D,DE.members),this.boundsSegments=Gi.simpleSegment(0,0,4,2);const C=[],V=[yS((L=this.coordinates)[0]),yS(L[1]),yS(L[2]),yS(L[3])];var L;const[z,M,j,J]=function(te){let fe=te[0][0],he=fe,se=te[0][1],ve=se;for(let Ce=1;Ce<te.length;Ce++)te[Ce][0]<fe?fe=te[Ce][0]:te[Ce][0]>he&&(he=te[Ce][0]),te[Ce][1]<se?se=te[Ce][1]:te[Ce][1]>ve&&(ve=te[Ce][1]);return[fe,se,he-fe,ve-se]}(V);{const te=new Lu,[fe,he,se,ve]=function(Ot){let jt=Ot[0].x,Ft=jt,$t=Ot[0].y,_a=$t;for(let ya=1;ya<Ot.length;ya++)Ot[ya].x<jt?jt=Ot[ya].x:Ot[ya].x>Ft&&(Ft=Ot[ya].x),Ot[ya].y<$t?$t=Ot[ya].y:Ot[ya].y>_a&&(_a=Ot[ya].y);return[jt,$t,Ft-jt,_a-$t]}(f),Ce=Ot=>[(Ot.x-fe)/se,(Ot.y-he)/ve],[Ve,et,Ye,Xe]=f.map(Ce),gt=function(Ot,jt,Ft,$t,_a,ya,Qa,Na){const Ma=gS(0,0,1,0,1,1,0,1),Ra=gS(Ot,jt,Ft,$t,_a,ya,Qa,Na),Sr=Ae.mat3.adjoint([],Ra);return Ae.mat3.multiply(Ma,Ma,Sr)}(Ve[0],Ve[1],et[0],et[1],Ye[0],Ye[1],Xe[0],Xe[1]);this.elevatedGlobePerspectiveTransform=GF(Ve[0],Ve[1],et[0],et[1],Ye[0],Ye[1],Xe[0],Xe[1]);const tt=(Ot,jt)=>{C.push(Ot.lng);const Ft=Math.round((Ot.lng-z)/j*Da),$t=Math.round((Ot.lat-M)/J*Da),_a=Ce(jt),ya=Ae.vec3.transformMat3([],[_a[0],_a[1],1],gt),Qa=Math.round(ya[0]/ya[2]*Da),Na=Math.round(ya[1]/ya[2]*Da);te.emplaceBack(Ft,$t,Qa,Na)},_t=f[3].x-f[0].x,xt=f[3].y-f[0].y,Ct=f[2].x-f[1].x,Mt=f[2].y-f[1].y;for(let Ot=0;Ot<65;Ot++){const jt=Ot/64,Ft=[f[0].x+jt*_t,f[0].y+jt*xt],$t=[f[1].x+jt*Ct,f[1].y+jt*Mt],_a=$t[0]-Ft[0],ya=$t[1]-Ft[1];for(let Qa=0;Qa<65;Qa++){const Na=Qa/64,Ma={x:Ft[0]+_a*Na,y:Ft[1]+ya*Na};tt(u.projection.unproject(Ma.x,Ma.y),Ma)}}this.elevatedGlobeVertexBuffer=s.createVertexBuffer(te,DE.members)}{this.maxLongitudeTriangleSize=0;let te=[],fe=new Ls;const he=(se,ve,Ce)=>{fe.emplaceBack(se,ve,Ce);const Ve=C[se],et=C[ve],Ye=C[Ce],Xe=Math.min(Math.min(Ve,et),Ye),gt=Math.max(Math.max(Ve,et),Ye)-Xe;gt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=gt),te.push(Xe+gt/2)};for(let se=0;se<64;se++)for(let ve=0;ve<64;ve++){const Ce=65*se+ve,Ve=Ce+1,et=Ce+65,Ye=et+1;he(Ce,et,Ve),he(Ve,et,Ye)}[te,fe]=function(se,ve){const Ce=Array.from({length:se.length},(Ye,Xe)=>Xe);Ce.sort((Ye,Xe)=>se[Ye]-se[Xe]);const Ve=[],et=new Ls;for(let Ye=0;Ye<Ce.length;Ye++){const Xe=Ce[Ye];Ve.push(se[Xe]);const gt=3*Xe,tt=gt+1;et.emplaceBack(ve.uint16[gt],ve.uint16[tt],ve.uint16[tt+1])}return[Ve,et]}(te,fe),this.elevatedGlobeTrianglesCenterLongitudes=te,this.elevatedGlobeIndexBuffer=s.createIndexBuffer(fe)}this.elevatedGlobeSegments=Gi.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,j/Da,0,J/Da,0,0,M,z,0])}prepare(){const s=Object.keys(this.tiles).length!==0;if(this.tileID&&!s)return;const u=this.map.painter.context,f=u.gl;!this._dirty||this.texture instanceof mS||(this.texture?this.texture.update(this.image):(this.texture=new LE(u,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),s&&this._prepareData(u)}loadTile(s,u){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},u(null)):(s.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(s){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let g=(m=s+180)+360*Math.round((f[0]-m)/360);var m;const _=new Gi,b=(V,L)=>{_.segments.push({vertexOffset:0,primitiveOffset:V,vertexLength:u.segments[0].vertexLength,primitiveLength:L,sortKey:void 0,vaos:{}})},O=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-g)<=O){const V=ti(f,0,f.length,g+O);return V===f.length||b(V,Zr(f,V+1,f.length,g+360-O)-V),_}g<f[0]&&(g+=360);const D=Zr(f,0,f.length,g-O);if(D===f.length)return b(0,f.length),_;b(0,D-0);const C=ti(f,D+1,f.length,g+O);return C!==f.length&&b(C,f.length-C),_}}const Xae=(Math.pow(256,2)-1)/16907520;class qF extends uo{constructor(s,u,f,g){super(s,{layout:BF||(BF=new ji({visibility:new Pa(qt.layout_raster.visibility)})),paint:jF||(jF=new ji({"raster-opacity":new Pa(qt.paint_raster["raster-opacity"]),"raster-color":new rs(qt.paint_raster["raster-color"]),"raster-color-mix":new Pa(qt.paint_raster["raster-color-mix"]),"raster-color-range":new Pa(qt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Pa(qt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pa(qt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pa(qt.paint_raster["raster-brightness-max"]),"raster-saturation":new Pa(qt.paint_raster["raster-saturation"]),"raster-contrast":new Pa(qt.paint_raster["raster-contrast"]),"raster-resampling":new Pa(qt.paint_raster["raster-resampling"]),"raster-fade-duration":new Pa(qt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Pa(qt.paint_raster["raster-emissive-strength"]),"raster-array-band":new Pa(qt.paint_raster["raster-array-band"]),"raster-elevation":new Pa(qt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},u,f,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(s){return!(s&&s._source instanceof ZF&&(s._source.onNorthPole||s._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(s){s!=="raster-color"&&s!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(s){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[f,g]=s||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(g)||f===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=ry({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,g])}}let HF,$F,KF,WF,YF;class XF extends uo{constructor(s,u,f,g){super(s,{layout:HF||(HF=new ji({visibility:new Pa(qt["layout_raster-particle"].visibility)})),paint:$F||($F=new ji({"raster-particle-array-band":new Pa(qt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Pa(qt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new rs(qt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Pa(qt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Pa(qt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Pa(qt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Pa(qt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Pa(qt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},u,f,g),this._updateColorRamp(),this.lastInvalidatedAt=Kt.now()}onRemove(s){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(s){return!1}_handleSpecialPaintPropertyUpdate(s){s!=="raster-particle-color"&&s!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),s==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const s=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=ry({expression:s,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Kt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Jae extends uo{constructor(s,u){super(s,{},u,null),this.implementation=s,s.slot&&(this.slot=s.slot)}is3D(s){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(s){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}function FE(h,s,u){const f=[0,0,1],g=Ae.quat.identity([]);return Ae.quat.rotateY(g,g,u?-Ca(h)+Math.PI:Ca(h)),Ae.quat.rotateX(g,g,-Ca(s)),Ae.vec3.transformQuat(f,f,g),Ae.vec3.normalize(f,f)}function JF(h,s){const u=AS(h.projection,h.zoom,h.width,h.height),f=function(m,_,b,O,D){const C=new Gn(b.lng-180*vy,b.lat),V=new Gn(b.lng+180*vy,b.lat),L=m.project(C.lng,C.lat),z=m.project(V.lng,V.lat),M=-Math.atan2(z.y-L.y,z.x-L.x),j=o.fromLngLat(b);j.y=Ia(j.y,-1+vy,1-vy);const J=j.toLngLat(),te=m.project(J.lng,J.lat),fe=o.fromLngLat(J);fe.x+=vy;const he=fe.toLngLat(),se=m.project(he.lng,he.lat),ve=ek(se.x-te.x,se.y-te.y,M),Ce=o.fromLngLat(J);Ce.y+=vy;const Ve=Ce.toLngLat(),et=m.project(Ve.lng,Ve.lat),Ye=ek(et.x-te.x,et.y-te.y,M),Xe=Math.abs(ve.x)/Math.abs(Ye.y),gt=Ae.mat4.identity([]);Ae.mat4.rotateZ(gt,gt,-M*(1-(D?0:O)));const tt=Ae.mat4.identity([]);return Ae.mat4.scale(tt,tt,[1,1-(1-Xe)*O,1]),tt[4]=-Ye.x/Ye.y*O,Ae.mat4.rotateZ(tt,tt,M),Ae.mat4.multiply(tt,gt,tt),tt}(h.projection,0,h.center,u,s),g=QF(h);return Ae.mat4.scale(f,f,[g,g,1]),f}function QF(h){const s=h.projection,u=AS(h.projection,h.zoom,h.width,h.height),f=kE(s,h.center),g=kE(s,Gn.convert(s.center));return Math.pow(2,f*u+(1-u)*g)}function AS(h,s,u,f,g=1/0){const m=h.range;if(!m)return 0;const _=Math.min(g,Math.max(u,f)),b=Math.log(_/1024)/Math.LN2;return Fr(m[0]+b,m[1]+b,s)}const vy=1/4e4;function kE(h,s){const u=Ia(s.lat,-85.051129,Bu),f=new Gn(s.lng-180*vy,u),g=new Gn(s.lng+180*vy,u),m=h.project(f.lng,u),_=h.project(g.lng,u),b=o.fromLngLat(f),O=o.fromLngLat(g),D=_.x-m.x,C=_.y-m.y,V=O.x-b.x,L=O.y-b.y,z=Math.sqrt((V*V+L*L)/(D*D+C*C));return Math.log(z)/Math.LN2}function ek(h,s,u){const f=Math.cos(u),g=Math.sin(u);return{x:h*f-s*g,y:h*g+s*f}}function tk(h,s,u){Ae.mat4.identity(h),Ae.mat4.rotateZ(h,h,Ca(s[2])),Ae.mat4.rotateX(h,h,Ca(s[0])),Ae.mat4.rotateY(h,h,Ca(s[1])),Ae.mat4.scale(h,h,u),Ae.mat4.multiply(h,h,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function vS(h,s,u,f,g,m,_,b){const O=[u[0]-s[0],u[1]-s[1],0],D=[f[0]-s[0],f[1]-s[1],0];if(Ae.vec3.length(O)<1e-12||Ae.vec3.length(D)<1e-12)return Ae.quat.identity(h);const C=Ae.vec3.cross([],O,D);Ae.vec3.normalize(C,C),Ae.vec3.subtract(D,f,s),O[2]=(m-g)*b,D[2]=(_-g)*b;const V=O;return Ae.vec3.cross(V,O,D),Ae.vec3.normalize(V,V),Ae.quat.rotationTo(h,C,V)}function UE(h,s,u=!1){const f=Gl(s.zoom),g=function(m,_,b){const O=_.worldSize,D=[m[12],m[13],m[14]],C=Ei(D[1]/O),V=Uu(D[0]/O),L=Ae.mat4.identity([]),z=Yo(1,C)*O,M=Yo(1,0)*O*sf(C,_.zoom),j=1/zc(O);let J=M*j;if(b){const se=AS(_.projection,_.zoom,_.width,_.height,1024);J=j*_.projection.pixelSpaceConversion(_.center.lat,O,se)}const te=Vc(C,V);Ae.vec3.add(te,te,Ae.vec3.scale([],Ae.vec3.normalize([],te),z*J*D[2]));const fe=function(se){const ve=[se[0],se[1],se[2]];let Ce=[0,1,0];const Ve=Ae.vec3.cross([],Ce,ve);return Ae.vec3.cross(Ce,ve,Ve),Ae.vec3.squaredLength(Ce)===0&&(Ce=[0,1,0],Ae.vec3.cross(Ve,ve,Ce)),Ae.vec3.normalize(Ve,Ve),Ae.vec3.normalize(Ce,Ce),Ae.vec3.normalize(ve,ve),[Ve[0],Ve[1],Ve[2],0,Ce[0],Ce[1],Ce[2],0,ve[0],ve[1],ve[2],0,se[0],se[1],se[2],1]}(te);Ae.mat4.scale(L,L,[J,J,J*z]),Ae.mat4.translate(L,L,[-D[0],-D[1],-D[2]]);const he=Ae.mat4.multiply([],_.globeMatrix,fe);return Ae.mat4.multiply(he,he,L),Ae.mat4.multiply(he,he,m),he}(h,s,u);if(f>0){const m=function(_,b){const O=b.worldSize,D=Yo(1,0)*O*sf(b.center.lat,b.zoom)/zc(O),C=Yo(1,b.center.lat)*O,V=Ae.mat4.identity([]);return Ae.mat4.rotateY(V,V,Ca(b.center.lng)),Ae.mat4.rotateX(V,V,Ca(b.center.lat)),Ae.mat4.translate(V,V,[0,0,Cl]),Ae.mat4.scale(V,V,[D,D,D*C]),Ae.mat4.translate(V,V,[b.point.x-.5*O,b.point.y-.5*O,0]),Ae.mat4.multiply(V,V,_),Ae.mat4.multiply(V,b.globeMatrix,V)}(h,s);return function(_,b,O){const D=(M,j,J)=>{const te=Ae.vec3.length(M),fe=Ae.vec3.length(j),he=co(M,j,J);return Ae.vec3.scale(he,he,1/Ae.vec3.length(he)*vr(te,fe,J))},C=D([_[0],_[1],_[2]],[b[0],b[1],b[2]],O),V=D([_[4],_[5],_[6]],[b[4],b[5],b[6]],O),L=D([_[8],_[9],_[10]],[b[8],b[9],b[10]],O),z=co([_[12],_[13],_[14]],[b[12],b[13],b[14]],O);return[C[0],C[1],C[2],0,V[0],V[1],V[2],0,L[0],L[1],L[2],0,z[0],z[1],z[2],1]}(g,m,f)}return g}function ak(h,s,u,f){const g=rr.projectAabbCorners(f,u);let m=Number.MAX_VALUE,_=-1;for(let D=0;D<g.length;++D){const C=g[D];C[0]=(.5*C[0]+.5)*s.width,C[1]=(.5-.5*C[1])*s.height,C[2]<m&&(_=D,m=C[2])}const b=D=>new Nt(g[D][0],g[D][1]);let O;switch(_){case 0:case 6:O=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:O=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:O=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:O=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(be(h,O))return m}const Qae=Dn([{name:"a_pos_3f",components:3,type:"Float32"}]),ere=Dn([{name:"a_color_3f",components:3,type:"Float32"}]),tre=Dn([{name:"a_color_4f",components:4,type:"Float32"}]),are=Dn([{name:"a_uv_2f",components:2,type:"Float32"}]),rre=Dn([{name:"a_normal_3f",components:3,type:"Float32"}]),nre=Dn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),ire=Dn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),rk={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class _S{constructor(s,u,f,g){this.message=(s?`${s}: `:"")+f,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function nk(h,s){const u=h.indexOf("://")===-1;try{return new URL(h,u&&s?"http://example.com":void 0),!0}catch{return!1}}class ik{constructor(s,u){this.feature=s,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class sk{constructor(){this.instancedDataArray=new og,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class BE{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=s.projection,this.index=s.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(s,u){}populate(s,u,f,g){this.tileToMeter=y(f);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:b,index:O,sourceLayerIndex:D}of s){const C=b??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),V=Y(_,m);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),V,f))continue;const L={id:C,sourceLayerIndex:D,index:O,geometry:m?V.geometry:K(_,f,g),properties:_.properties,type:_.type,patterns:{}},z=this.addFeature(L,L.geometry,V);z&&u.featureIndex.insert(_,L.geometry,O,D,this.index,this.instancesPerModel[z].instancedDataArray.length,Da/32)}this.lookup=null}update(s,u,f,g){for(const m in this.instancesPerModel){const _=this.instancesPerModel[m];for(const b in s)_.idToFeaturesIndex.hasOwnProperty(b)&&(this.evaluate(_.features[_.idToFeaturesIndex[b]],s[b],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let s=!1;for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];for(const g of f.features){const m=this.layers[0],_=g.feature,b=this.canonical,O=m.paint.get("model-rotation").evaluate(_,{},b),D=m.paint.get("model-scale").evaluate(_,{},b),C=m.paint.get("model-translation").evaluate(_,{},b);Ae.vec3.exactEquals(g.rotation,O)&&Ae.vec3.exactEquals(g.scale,D)&&Ae.vec3.exactEquals(g.translation,C)||(this.evaluate(g,g.featureStates,f,!0),s=!0)}}return s}updateReplacement(s,u,f,g){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);if(A0(this.activeReplacements,m))return!1;this.activeReplacements=m;let _=!1;for(const b in this.instancesPerModel){const O=this.instancesPerModel[b],D=O.instancedDataArray;for(const C of O.features){const V=C.instancedDataOffset,L=C.instancedDataCount;for(let z=0;z<L;z++){const M=16*(z+V);let j=D.float32[M+0];const J=j>Da;j=J?j-Da:j;const te=Math.floor(j),fe=D.float32[M+1];let he=!1;for(const se of this.activeReplacements)if(!qf(se,f,rk.Model,g)&&!(se.min.x>te||te>se.max.x||se.min.y>fe||fe>se.max.y)&&(he=GC(jC(te,fe,s.canonical,se.footprintTileId.canonical),se.footprint),he))break;D.float32[M]=he?j+Da:j,_=_||he!==J}}}return _}isEmpty(){for(const s in this.instancesPerModel)if(this.instancesPerModel[s].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(s){if(!this.uploaded)for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=s.createVertexBuffer(f.instancedDataArray,nre.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const s=this.layers[0].modelManager;if(s&&this.modelUris)for(const u of this.modelUris)s.removeModel(u,"")}addFeature(s,u,f){const g=this.layers[0],m=g.layout.get("model-id").evaluate(f,{},this.canonical);if(!m)return Yr(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),m;nk(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new sk);const _=this.instancesPerModel[m],b=_.instancedDataArray,O=new ik(f,b.length);for(const D of u)for(const C of D){if(C.x<0||C.x>=Da||C.y<0||C.y>=Da)continue;const V=(this.lookupDim-1)/Da,L=this.lookupDim*(C.y*V|0)+C.x*V|0;if(this.lookup){if(this.lookup[L]!==0)continue;this.lookup[L]=1}this.instanceCount++;const z=b.length;b.resize(z+1),_.instancesEvaluatedElevation.push(0),b.float32[16*z]=C.x,b.float32[16*z+1]=C.y}return O.instancedDataCount=_.instancedDataArray.length-O.instancedDataOffset,O.instancedDataCount>0&&(s.id&&(_.idToFeaturesIndex[s.id]=_.features.length),_.features.push(O),this.evaluate(O,{},_,!1)),m}getModelUris(){return this.modelUris}evaluate(s,u,f,g){const m=this.layers[0],_=s.feature,b=this.canonical,O=s.rotation=m.paint.get("model-rotation").evaluate(_,u,b),D=s.scale=m.paint.get("model-scale").evaluate(_,u,b),C=s.translation=m.paint.get("model-translation").evaluate(_,u,b),V=m.paint.get("model-color").evaluate(_,u,b);V.a=m.paint.get("model-color-mix-intensity").evaluate(_,u,b);const L=[];this.maxVerticalOffset<C[2]&&(this.maxVerticalOffset=C[2]),this.maxScale=Math.max(Math.max(this.maxScale,D[0]),Math.max(D[1],D[2])),tk(L,O,D);const z=Math.round(100*V.a)+V.b/1.05;for(let M=0;M<s.instancedDataCount;++M){const j=s.instancedDataOffset+M,J=16*j,te=f.instancedDataArray.float32;let fe=0;g&&(fe=te[J+6]-f.instancesEvaluatedElevation[j]);const he=0|te[J+1];te[J]=(0|te[J])+V.r/1.05,te[J+1]=he+V.g/1.05,te[J+2]=z,te[J+3]=1/(b.z>10?this.tileToMeter:y(b,he)),te[J+4]=C[0],te[J+5]=C[1],te[J+6]=C[2]+fe,te[J+7]=L[0],te[J+8]=L[1],te[J+9]=L[2],te[J+10]=L[4],te[J+11]=L[5],te[J+12]=L[6],te[J+13]=L[8],te[J+14]=L[9],te[J+15]=L[10],f.instancesEvaluatedElevation[j]=C[2]}}}let ok,lk;Pt(BE,"ModelBucket",{omit:["layers"]}),Pt(sk,"PerModelAttributes"),Pt(ik,"ModelFeature");const KA=64,N0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function uk(h,s,u,f,g,m,_,b,O,D=!1){const C=u.zoom,V=u.project(f),L=sf(f.lat,C),z=1/L;Ae.mat4.identity(h),Ae.mat4.translate(h,h,[V.x+_[0]*z,V.y+_[1]*z,_[2]]);let M=1,j=1;const J=u.worldSize;if(D){if(u.projection.name==="mercator"){let se=0;u.elevation&&(se=u.elevation.getAtPointOrZero(new o(V.x/J,V.y/J),0));const ve=Ae.vec4.transformMat4([],[V.x,V.y,se,1],u.projMatrix)[3]/u.cameraToCenterDistance;M=ve,j=ve*sf(u.center.lat,C)}else if(u.projection.name==="globe"){const se=UE(h,u),ve=Ae.mat4.multiply([],u.projMatrix,se),Ce=[0,0,0,1];Ae.vec4.transformMat4(Ce,Ce,ve);const Ve=Ce[3]/u.cameraToCenterDistance,et=Gl(C),Ye=u.projection.pixelsPerMeter(f.lat,J)*sf(f.lat,C),Xe=u.projection.pixelsPerMeter(u.center.lat,J)*sf(u.center.lat,C);M=Ve/vr(Ye,EA(u.center.lat),et),j=Ve*L/Ye,M*=Xe,j*=Xe}}else M=z;Ae.mat4.scale(h,h,[M,M,j]);const te=[...h],fe=s.orientation,he=[];if(tk(he,[fe[0]+g[0],fe[1]+g[1],fe[2]+g[2]],m),Ae.mat4.multiply(h,te,he),b&&u.elevation){let se=0;const ve=[];if(O&&u.elevation){se=function(et,Ye,Xe,gt,tt){const _t=Ye.elevation;if(!_t)return 0;const xt=rr.projectAabbCorners(Xe,gt),Ct=Yo(1,tt.lat)*Ye.worldSize,Mt=function(Sr,Xa){const hr=[0,0,1],Ur=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const ln of Ur){const $r=Sr[ln.corners[0]],_n=Sr[ln.corners[1]],on=Sr[ln.corners[2]],En=[_n[0]-$r[0],_n[1]-$r[1],Xa*(_n[2]-$r[2])],Jn=Ae.vec3.cross(En,En,[on[0]-$r[0],on[1]-$r[1],Xa*(on[2]-$r[2])]);Ae.vec3.normalize(Jn,Jn),ln.dotProductWithUp=Ae.vec3.dot(Jn,hr)}return Ur.sort((ln,$r)=>ln.dotProductWithUp-$r.dotProductWithUp),Ur[0].corners}(xt,Ct),Ot=xt[Mt[0]],jt=xt[Mt[1]],Ft=xt[Mt[2]],$t=xt[Mt[3]],_a=_t.getAtPointOrZero(new o(Ot[0]/Ye.worldSize,Ot[1]/Ye.worldSize),0),ya=_t.getAtPointOrZero(new o(jt[0]/Ye.worldSize,jt[1]/Ye.worldSize),0),Qa=_t.getAtPointOrZero(new o(Ft[0]/Ye.worldSize,Ft[1]/Ye.worldSize),0),Na=_t.getAtPointOrZero(new o($t[0]/Ye.worldSize,$t[1]/Ye.worldSize),0),Ma=(_a+Na)/2,Ra=(ya+Qa)/2;return Ma>Ra?ya<Qa?vS(et,jt,$t,Ot,ya,Na,_a,Ct):vS(et,Ft,Ot,$t,Qa,_a,Na,Ct):_a<Na?vS(et,Ot,jt,Ft,_a,ya,Qa,Ct):vS(et,$t,Ft,jt,Na,Qa,ya,Ct),Math.max(Ma,Ra)}(ve,u,s.aabb,h,f);const Ce=Ae.mat4.fromQuat([],ve),Ve=Ae.mat4.multiply([],Ce,he);Ae.mat4.multiply(h,te,Ve)}else se=u.elevation.getAtPointOrZero(new o(V.x/J,V.y/J),0);se!==0&&(h[14]+=se)}}function Rw(h,s,u=!1){h.uploaded||(h.gfxTexture=new LE(s,h.image,u?s.gl.R8:s.gl.RGBA8,{useMipmap:h.sampler.minFilter>=s.gl.NEAREST_MIPMAP_NEAREST}),h.uploaded=!0,h.image=null)}function sre(h,s,u){h.indexBuffer=s.createIndexBuffer(h.indexArray,!1,!0),h.vertexBuffer=s.createVertexBuffer(h.vertexArray,Qae.members,!1,!0),h.normalArray&&(h.normalBuffer=s.createVertexBuffer(h.normalArray,rre.members,!1,!0)),h.texcoordArray&&(h.texcoordBuffer=s.createVertexBuffer(h.texcoordArray,are.members,!1,!0)),h.colorArray&&(h.colorBuffer=s.createVertexBuffer(h.colorArray,(h.colorArray.bytesPerElement===12?ere:tre).members,!1,!0)),h.featureArray&&(h.pbrBuffer=s.createVertexBuffer(h.featureArray,ire.members,!0)),h.segments=Gi.simpleSegment(0,0,h.vertexArray.length,h.indexArray.length);const f=h.material;f.pbrMetallicRoughness.baseColorTexture&&Rw(f.pbrMetallicRoughness.baseColorTexture,s),f.pbrMetallicRoughness.metallicRoughnessTexture&&Rw(f.pbrMetallicRoughness.metallicRoughnessTexture,s),f.normalTexture&&Rw(f.normalTexture,s),f.occlusionTexture&&Rw(f.occlusionTexture,s,u),f.emissionTexture&&Rw(f.emissionTexture,s)}function jE(h,s,u){if(h.meshes)for(const f of h.meshes)sre(f,s,u);if(h.children)for(const f of h.children)jE(f,s,u)}function wS(h){if(h.meshes)for(const s of h.meshes)s.indexArray.destroy(),s.vertexArray.destroy(),s.colorArray&&s.colorArray.destroy(),s.normalArray&&s.normalArray.destroy(),s.texcoordArray&&s.texcoordArray.destroy(),s.featureArray&&s.featureArray.destroy();if(h.children)for(const s of h.children)wS(s)}function GE(h){if(h.meshes)for(const u of h.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((s=u.material).pbrMetallicRoughness.baseColorTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),s.pbrMetallicRoughness.metallicRoughnessTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),s.normalTexture&&s.normalTexture.gfxTexture&&s.normalTexture.gfxTexture.destroy(),s.emissionTexture&&s.emissionTexture.gfxTexture&&s.emissionTexture.gfxTexture.destroy(),s.occlusionTexture&&s.occlusionTexture.gfxTexture&&s.occlusionTexture.gfxTexture.destroy()));var s;if(h.children)for(const u of h.children)GE(u)}class O0{constructor(s,u,f){this._demTile=s,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(s,u,f){const g=f||s.findDEMTileFor(u);if(!g||!g.dem)return;const m=g.dem,_=g.tileID,b=1<<u.canonical.z-_.canonical.z;return new O0(g,m.dim/Da/b,[(u.canonical.x/b-_.canonical.x)*m.dim,(u.canonical.y/b-_.canonical.y)*m.dim])}tileCoordToPixel(s,u){const f=u*this._scale+this._offset[1],g=Math.floor(s*this._scale+this._offset[0]),m=Math.floor(f);return new Nt(g,m)}getElevationAt(s,u,f,g){const m=s*this._scale+this._offset[0],_=u*this._scale+this._offset[1],b=Math.floor(m),O=Math.floor(_),D=this._dem;return g=!!g,f?vr(vr(D.get(b,O,g),D.get(b,O+1,g),_-O),vr(D.get(b+1,O,g),D.get(b+1,O+1,g),_-O),m-b):D.get(b,O,g)}getElevationAtPixel(s,u,f){return this._dem.get(s,u,!!f)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Yo(1,s)*this._dem.stride}}const ZE=new Float32Array(262144),WA=new Uint8Array(262144);function ck(h){let s=0;if(h.meshes)for(const u of h.meshes)s=Math.max(s,u.aabb.max[2]);if(h.children)for(const u of h.children)s=Math.max(s,ck(u));return s}function dk(h,s,u){if(h.meshes)for(const f of h.meshes){if(f.aabb.min[0]===1/0)continue;const g=rr.applyTransform(f.aabb,h.matrix);u.insert(s,g.min[0],g.min[1],g.max[0],g.max[1])}if(h.children)for(const f of h.children)dk(f,s,u)}const hk=["","wall","door","roof","window","lamp","logo"];class fk{constructor(s){this.node=s,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:s.id,geometry:[],properties:{height:ck(s)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let s=0;const u=new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==s&&(f.transformedAabb=rr.applyTransformFast(f.aabb,this.node.matrix),u.encapsulate(f.transformedAabb)),s++;this.aabb=u}return this.aabb}}class RS{constructor(s,u,f,g,m,_,b){this.id=f,this.layers=s,this.layerIds=this.layers.map(O=>O.fqid),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.modelTraits|=N0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=N0.HasMapboxMeshFeatures),m&&(this.modelTraits|=N0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=_,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const O of u)this.nodesInfo.push(new fk(O)),dk(O,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(s,u){for(const f of this.getNodesInfo()){const g=f.node;g.footprint&&u.push({footprint:g.footprint,id:s})}}update(s){const u=Object.keys(s).length!==0;if(u&&!this.stateDependentLayers.length)return;const f=u?this.stateDependentLayers:this.layers;if(!Ht(s,this.states))for(const g of f)this.evaluate(g,s);this.states=structuredClone(s)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(s){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const f of u){const g=f.node;this.uploaded?this.updatePbrBuffer(g):jE(g,s,!0)}for(const f of u)wS(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(s){let u=!1;if(!s.meshes)return u;for(const f of s.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),u=!0);return u}needsReEvaluation(s,u,f){const g=s.transform.projectionOptions,m=s.style.getBrightness(),_=this.brightness!==m;if(!this.uploaded||this.dirty||g.name!==this.projection.name||Tw(f.paint.get("model-color").value,_)||Tw(f.paint.get("model-color-mix-intensity").value,_)||Tw(f.paint.get("model-roughness").value,_)||Tw(f.paint.get("model-emissive-strength").value,_)||Tw(f.paint.get("model-height-based-emissive-strength-multiplier").value,_)){this.projection=g,this.brightness=m;const b=this.getNodesInfo();for(const O of b)O.state=null;return!0}return!1}evaluateScale(s,u){if(s.transform.zoom===this.zoom)return;this.zoom=s.transform.zoom;const f=this.getNodesInfo(),g=this.id.canonical;for(const m of f){const _=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(_,{},g)}}evaluate(s,u){const f=this.getNodesInfo();for(const g of f){if(!g.node.meshes)continue;const m=g.feature,_=u&&u[m.id];if(Ht(_,g.state))continue;g.state=structuredClone(_);const b=g.node.meshes&&g.node.meshes[0].featureData,O=g.evaluatedColor[2],D=g.evaluatedRMEA[2],C=this.id.canonical;if(g.hasTranslucentParts=!1,b){for(let V=0;V<hk.length;V++){const L=hk[V];L.length&&(m.properties.part=L);const z=s.paint.get("model-color").evaluate(m,_,C).toRenderColor(null),M=s.paint.get("model-color-mix-intensity").evaluate(m,_,C);g.evaluatedColor[V]=[z.r,z.g,z.b,M],g.evaluatedRMEA[V][0]=s.paint.get("model-roughness").evaluate(m,_,C),g.evaluatedRMEA[V][2]=s.paint.get("model-emissive-strength").evaluate(m,_,C),g.evaluatedRMEA[V][3]=z.a,g.emissionHeightBasedParams[V]=s.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,_,C),!g.hasTranslucentParts&&z.a<1&&(g.hasTranslucentParts=!0)}delete m.properties.part,lre(g,O!==g.evaluatedColor[2]||D!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=s.paint.get("model-emissive-strength").evaluate(m,_,C);g.evaluatedScale=s.paint.get("model-scale").evaluate(m,_,C),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(s,u,f,g){const m=s.findDEMTileFor(f);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const _=O0.create(s,f,m);if(!_)return;this.modelTraits&N0.HasMapboxMeshFeatures&&this.updateDEM(s,_,f,g);for(const b of this.getNodesInfo()){const O=b.node;if(!O.footprint||!O.footprint.vertices||!O.footprint.vertices.length)continue;const D=O.footprint.vertices;let C=_.getElevationAt(D[0].x,D[0].y,!0,!0);for(let V=1;V<D.length;V++)C=Math.min(C,_.getElevationAt(D[V].x,D[V].y,!0,!0));O.elevation=C}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(s,u,f,g){let m=u._dem._modifiedForSources[g];if(m===void 0&&(u._dem._modifiedForSources[g]=[],m=u._dem._modifiedForSources[g]),m.includes(f.canonical))return;const _=u._dem.dim;m.push(f.canonical);let b=!1;for(const O of this.getNodesInfo()){const D=O.node;if(!D.footprint||!D.footprint.grid)continue;const C=D.footprint.grid,V=u.tileCoordToPixel(C.min.x,C.min.y),L=u.tileCoordToPixel(C.max.x,C.max.y),z=Math.min(Math.min(_-L.y,V.x),Math.min(V.y,_-L.x));if(z<0)continue;const M=Ia(z,2,5);let j=Math.max(0,V.x-M),J=Math.max(0,V.y-M),te=Math.min(L.x+M,_-1),fe=Math.min(L.y+M,_-1);for(let Ce=J;Ce<=fe;++Ce)for(let Ve=j;Ve<=te;++Ve)WA[Ce*_+Ve]=255;let he=0,se=0;for(let Ce=0;Ce<C.cellsY;++Ce)for(let Ve=0;Ve<C.cellsX;++Ve){if(!C.cells[Ce*C.cellsX+Ve])continue;const et=u.tileCoordToPixel(C.min.x+Ve/C.xScale,C.min.y+Ce/C.yScale),Ye=u.tileCoordToPixel(C.min.x+(Ve+1)/C.xScale,C.min.y+(Ce+1)/C.yScale);for(let Xe=et.y;Xe<=Math.min(Ye.y+1,_-1);++Xe)for(let gt=et.x;gt<=Math.min(Ye.x+1,_-1);++gt)WA[Xe*_+gt]===255&&(WA[Xe*_+gt]=0,he+=u.getElevationAtPixel(gt,Xe),se++)}const ve=he/se;j=Math.max(1,V.x-M),J=Math.max(1,V.y-M),te=Math.min(L.x+M,_-2),fe=Math.min(L.y+M,_-2),b=!0;for(let Ce=J;Ce<=fe;++Ce)for(let Ve=j;Ve<=te;++Ve)WA[Ce*_+Ve]===0&&(ZE[Ce*_+Ve]=u._dem.set(Ve,Ce,ve));for(let Ce=1;Ce<M;++Ce){j=Math.max(1,V.x-Ce),J=Math.max(1,V.y-Ce),te=Math.min(L.x+Ce,_-2),fe=Math.min(L.y+Ce,_-2);for(let Ve=J;Ve<=fe;++Ve)for(let et=j;et<=te;++et){const Ye=Ve*_+et;if(WA[Ye]===255){let Xe=0,gt=0,tt=-1,_t=-1;for(let xt=-1;xt<=1;++xt)for(let Ct=-1;Ct<=1;++Ct){const Mt=(Ve+xt)*_+et+Ct;if(WA[Mt]>=Ce)continue;const Ot=ZE[Mt],jt=Math.abs(Ot);jt>gt&&(Xe=Ot,gt=jt,tt=Ct,_t=xt)}if(gt>.1){const xt=1-(Ce+.5*Math.abs(tt*_t))/M;let Ct=u._dem.get(et,Ve)+Xe*xt;const Mt=u._dem.get(et+tt,Ve+_t),Ot=u._dem.get(et-tt,Ve-_t,!0);(Ct-Mt)*(Ct-Ot)>0&&(Ct=(Mt+Ot)/2),ZE[Ye]=u._dem.set(et,Ve,Ct),WA[Ye]=Ce}}}}}b&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=Kt.now())}setFilter(s){this.filter=s?Sh(s):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(s=>this.filter.filter(new Pn(this.id.overscaledZ),s.feature,this.id.canonical)):this.nodesInfo}destroy(){const s=this.getNodesInfo();for(const u of s)wS(u.node),GE(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(s.toUnwrapped()),g=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const _=g[m].node;g[m].hiddenByReplacement=!!_.footprint&&!f.find(b=>b.footprint===_.footprint)}}getHeightAtTileCoord(s,u){const f=this.getNodesInfo(),g=[],m=[0,0,0],_=Ae.mat4.identity([]);for(let b=0;b<this.nodesInfo.length;b++){const O=f[b],D=O.node.meshes[0],C=D.transformedAabb;if(s<C.min[0]||u<C.min[1]||s>C.max[0]||u>C.max[1])continue;if(O.node.hidden===!0)return{height:1/0,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};Ae.mat4.invert(_,O.node.matrix),m[0]=s,m[1]=u,Ae.vec3.transformMat4(m,m,_);const V=(m[0]-D.aabb.min[0])/(D.aabb.max[0]-D.aabb.min[0])*KA|0,L=Math.min(63,(m[1]-D.aabb.min[1])/(D.aabb.max[1]-D.aabb.min[1])*KA|0)*KA+Math.min(63,V),z=D.heightmap[L];if(!(z<0&&O.node.footprint))return O.hiddenByReplacement?void 0:{height:z,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};if(O.node.footprint.grid.query(new Nt(s,u),new Nt(s,u),g),g.length>0)return{height:void 0,maxHeight:O.feature.properties.height,hidden:O.hiddenByReplacement,verticalScale:O.evaluatedScale[2]}}}}function Tw(h,s){return!h.isLightConstant&&s}function ore(h,s,u,f,g,m,_,b){let O=(61440&s|(61440&s)>>4)>>8,D=(3840&s|(3840&s)>>4)>>4,C=240&s|(240&s)>>4;u[3]>0&&(O=vr(O,255*u[0],u[3]),D=vr(D,255*u[1],u[3]),C=vr(C,255*u[2],u[3]));const V=O<<8|D,L=C<<8|Math.floor(255*f[3]),z=function(Ce){const Ve=Ia(Ce,0,2);return Math.min(Math.round(.5*Ve*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],M=Ia(g[0],0,1),j=Ia(g[1],0,1),J=Ia(g[2],0,1),te=Ia(g[3],0,1);let fe,he,se,ve;if(M!==j&&_!==m&&j!==M){const Ce=_-m;he=1/(Ce*(j-M)),se=-(m+Ce*M)/(Ce*(j-M));const Ve=Ia(g[4],-1,1);ve=Math.pow(10,Ve),fe=255*J<<8|255*te}else fe=65535,he=0,se=1,ve=1;if(h.emplaceBack(V,L,z,fe,he,se,ve),b){const Ce=b.length;b.clear();for(let Ve=0;Ve<Ce;Ve++)b.emplaceBack(V,L,z,fe,he,se,ve)}}function lre(h,s,u){const f=h.node;let g=0;const m=u&N0.HasMeshoptCompression;for(const _ of f.meshes){if(f.lights&&f.lightMeshIndex===g||!_.featureData)continue;_.featureArray=new um,_.featureArray.reserve(_.featureData.length);let b=s;for(const O of _.featureData){const D=m?65535&O:O>>16&65535,C=m?O>>16&65535:65535&O,V=(15&C)<8?15&C:0,L=h.evaluatedRMEA[V],z=h.evaluatedColor[V],M=h.emissionHeightBasedParams[V];let j;if(b&&V===2&&f.lights&&(j=new um,j.resize(10*f.lights.length)),ore(_.featureArray,D,z,L,M,_.aabb.min[2],_.aabb.max[2],j),j&&b){b=!1;const J=f.meshes[f.lightMeshIndex];J.featureArray=j,J.featureArray._trim()}}_.featureArray._trim(),g++}}function pk(h,s,u,f){const g=1<<h.z;s.lat=Ei((f/Da+h.y)/g),s.lng=Uu((u/Da+h.x)/g)}Pt(RS,"Tiled3dModelBucket",{omit:["layers"]}),Pt(fk,"Tiled3dModelFeature");const ure={circle:class extends uo{constructor(h,s,u,f){super(h,{layout:kt||(kt=new ji({"circle-sort-key":new Ga(qt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Pa(qt.layout_circle["circle-elevation-reference"]),visibility:new Pa(qt.layout_circle.visibility)})),paint:la||(la=new ji({"circle-radius":new Ga(qt.paint_circle["circle-radius"]),"circle-color":new Ga(qt.paint_circle["circle-color"]),"circle-blur":new Ga(qt.paint_circle["circle-blur"]),"circle-opacity":new Ga(qt.paint_circle["circle-opacity"]),"circle-translate":new Pa(qt.paint_circle["circle-translate"]),"circle-translate-anchor":new Pa(qt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pa(qt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pa(qt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ga(qt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ga(qt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ga(qt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Pa(qt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}createBucket(h){return new me(h)}queryRadius(h){const s=h;return Ut("circle-radius",this,s)+Ut("circle-stroke-width",this,s)+ia(this.paint.get("circle-translate"))}queryIntersectsFeature(h,s,u,f,g,m,_,b){const O=xa(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(s,u)+this.paint.get("circle-stroke-width").evaluate(s,u);return gm(h,f,m,_,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",O,D)}getProgramIds(){return["circle"]}getDefaultProgramParams(h,s,u){const f=bp(this);return{config:new nc(this,{zoom:s,lut:u}),defines:f,overrideFog:!1}}},heatmap:class extends uo{createBucket(h){return new n0(h)}constructor(h,s,u,f){super(h,{layout:dg||(dg=new ji({visibility:new Pa(qt.layout_heatmap.visibility)})),paint:O1||(O1=new ji({"heatmap-radius":new Ga(qt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ga(qt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pa(qt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rs(qt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pa(qt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ry({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(h){return Ut("heatmap-radius",this,h)}queryIntersectsFeature(h,s,u,f,g,m,_,b){const O=this.paint.get("heatmap-radius").evaluate(s,u);return gm(h,f,m,_,b,!0,!0,new Nt(0,0),O)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(h,s,u){return h==="heatmap"?{config:new nc(this,{zoom:s,lut:u}),overrideFog:!1}:{}}},hillshade:class extends uo{constructor(h,s,u,f){super(h,{layout:V1||(V1=new ji({visibility:new Pa(qt.layout_hillshade.visibility)})),paint:z1||(z1=new ji({"hillshade-illumination-direction":new Pa(qt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pa(qt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pa(qt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pa(qt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pa(qt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pa(qt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Pa(qt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(h,s,u){return{overrideFog:!1}}},fill:class extends uo{constructor(h,s,u,f){super(h,{layout:j1||(j1=new ji({"fill-sort-key":new Ga(qt.layout_fill["fill-sort-key"]),visibility:new Pa(qt.layout_fill.visibility),"fill-elevation-reference":new Pa(qt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ga(qt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:G1||(G1=new ji({"fill-antialias":new Pa(qt.paint_fill["fill-antialias"]),"fill-opacity":new Ga(qt.paint_fill["fill-opacity"]),"fill-color":new Ga(qt.paint_fill["fill-color"]),"fill-outline-color":new Ga(qt.paint_fill["fill-outline-color"]),"fill-translate":new Pa(qt.paint_fill["fill-translate"]),"fill-translate-anchor":new Pa(qt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ga(qt.paint_fill["fill-pattern"]),"fill-emissive-strength":new Pa(qt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ga(qt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ga(qt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ga(qt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}getProgramIds(){const h=this.paint.get("fill-pattern"),s=h&&h.constantOr(1),u=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(h,s,u){return{config:new nc(this,{zoom:s,lut:u}),overrideFog:!1}}recalculate(h,s){super.recalculate(h,s);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(h){return new cy(h)}queryRadius(){return ia(this.paint.get("fill-translate"))}queryIntersectsFeature(h,s,u,f,g,m){return!h.queryGeometry.isAboveHorizon&&ze(da(h.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(h){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const s=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return h!=null?s&&!h:s}},"fill-extrusion":class extends uo{constructor(h,s,u,f){super(h,{layout:R0||(R0=new ji({visibility:new Pa(qt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Pa(qt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:nw||(nw=new ji({"fill-extrusion-opacity":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ga(qt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Pa(qt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new v0(h)}queryRadius(){return ia(this.paint.get("fill-extrusion-translate"))}is3D(h){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(h,s,u,f,g,m,_,b,O){const D=xa(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),C=this.paint.get("fill-extrusion-height").evaluate(s,u),V=this.paint.get("fill-extrusion-base").evaluate(s,u),L=[0,0],z=b&&m.elevation,M=m.elevation?m.elevation.exaggeration():1,j=h.tile.getBucket(this);if(z&&j instanceof v0){const se=j.centroidVertexArray,ve=O+1;ve<se.length&&(L[0]=se.geta_centroid_pos0(ve),L[1]=se.geta_centroid_pos1(ve))}if(L[0]===0&&L[1]===1)return!1;m.projection.name==="globe"&&(f=rw([f],[new Nt(0,0),new Nt(Da,Da)],h.tileID.canonical).map(se=>se.polygon).flat());const J=z?b:null,[te,fe]=function(se,ve,Ce,Ve,et,Ye,Xe,gt,tt,_t,xt){return se.projection.name==="globe"?function(Ct,Mt,Ot,jt,Ft,$t,_a,ya,Qa,Na,Ma){const Ra=[],Sr=[],Xa=Ct.projection.upVectorScale(Ma,Ct.center.lat,Ct.worldSize).metersToTile,hr=[0,0,0,1],Ur=[0,0,0,1],ln=(_n,on,En,Jn)=>{_n[0]=on,_n[1]=En,_n[2]=Jn,_n[3]=1},$r=aw();Ot>0&&(Ot+=$r),jt+=$r;for(const _n of Mt){const on=[],En=[];for(const Jn of _n){const Fi=Jn.x+Ft.x,Gr=Jn.y+Ft.y,In=Ct.projection.projectTilePoint(Fi,Gr,Ma),is=Ct.projection.upVector(Ma,Jn.x,Jn.y);let ms=Ot,bs=jt;if(_a){const ks=YC(Fi,Gr,Ot,jt,_a,ya,Qa,Na);ms+=ks.base,bs+=ks.top}Ot!==0?ln(hr,In.x+is[0]*Xa*ms,In.y+is[1]*Xa*ms,In.z+is[2]*Xa*ms):ln(hr,In.x,In.y,In.z),ln(Ur,In.x+is[0]*Xa*bs,In.y+is[1]*Xa*bs,In.z+is[2]*Xa*bs),Ae.vec3.transformMat4(hr,hr,$t),Ae.vec3.transformMat4(Ur,Ur,$t),on.push(new ju(hr[0],hr[1],hr[2])),En.push(new ju(Ur[0],Ur[1],Ur[2]))}Ra.push(on),Sr.push(En)}return[Ra,Sr]}(se,ve,Ce,Ve,et,Ye,Xe,gt,tt,_t,xt):Xe?function(Ct,Mt,Ot,jt,Ft,$t,_a,ya,Qa){const Na=[],Ma=[],Ra=[0,0,0,1];for(const Sr of Ct){const Xa=[],hr=[];for(const Ur of Sr){const ln=Ur.x+jt.x,$r=Ur.y+jt.y,_n=YC(ln,$r,Mt,Ot,$t,_a,ya,Qa);Ra[0]=ln,Ra[1]=$r,Ra[2]=_n.base,Ra[3]=1,Ae.vec4.transformMat4(Ra,Ra,Ft),Ra[3]=Math.max(Ra[3],1e-5);const on=new ju(Ra[0]/Ra[3],Ra[1]/Ra[3],Ra[2]/Ra[3]);Ra[0]=ln,Ra[1]=$r,Ra[2]=_n.top,Ra[3]=1,Ae.vec4.transformMat4(Ra,Ra,Ft),Ra[3]=Math.max(Ra[3],1e-5);const En=new ju(Ra[0]/Ra[3],Ra[1]/Ra[3],Ra[2]/Ra[3]);Xa.push(on),hr.push(En)}Na.push(Xa),Ma.push(hr)}return[Na,Ma]}(ve,Ce,Ve,et,Ye,Xe,gt,tt,_t):function(Ct,Mt,Ot,jt,Ft){const $t=[],_a=[],ya=Ft[8]*Mt,Qa=Ft[9]*Mt,Na=Ft[10]*Mt,Ma=Ft[11]*Mt,Ra=Ft[8]*Ot,Sr=Ft[9]*Ot,Xa=Ft[10]*Ot,hr=Ft[11]*Ot;for(const Ur of Ct){const ln=[],$r=[];for(const _n of Ur){const on=_n.x+jt.x,En=_n.y+jt.y,Jn=Ft[0]*on+Ft[4]*En+Ft[12],Fi=Ft[1]*on+Ft[5]*En+Ft[13],Gr=Ft[2]*on+Ft[6]*En+Ft[14],In=Ft[3]*on+Ft[7]*En+Ft[15],is=Jn+ya,ms=Fi+Qa,bs=Gr+Na,ks=Math.max(In+Ma,1e-5),Oi=Jn+Ra,ml=Fi+Sr,Dc=Gr+Xa,So=Math.max(In+hr,1e-5);ln.push(new ju(is/ks,ms/ks,bs/ks)),$r.push(new ju(Oi/So,ml/So,Dc/So))}$t.push(ln),_a.push($r)}return[$t,_a]}(ve,Ce,Ve,et,Ye)}(m,f,V,C,D,_,J,L,M,m.center.lat,h.tileID.canonical),he=h.queryGeometry;return function(se,ve,Ce){let Ve=1/0;ze(Ce,ve)&&(Ve=WC(Ce,ve[0]));for(let et=0;et<ve.length;et++){const Ye=ve[et],Xe=se[et];for(let gt=0;gt<Ye.length-1;gt++){const tt=Ye[gt],_t=[tt,Ye[gt+1],Xe[gt+1],Xe[gt],tt];be(Ce,_t)&&(Ve=Math.min(Ve,WC(Ce,_t)))}}return Ve!==1/0&&Ve}(te,fe,he.isPointQuery()?he.screenBounds:he.screenGeometry)}},line:class extends uo{constructor(h,s,u,f){const g=fw();super(h,g,s,u,f),g.layout&&(this.layout=new Du(g.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(h){if(h==="line-gradient"){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof lu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(h,s){super.recalculate(h,s),this.paint._values["line-floorwidth"]=(()=>{if(yg)return yg;const u=fw();return yg=new qA(u.paint.properties["line-width"].specification),yg.useIntegerZoom=!0,yg})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)}createBucket(h){return new Hf(h)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(h,s,u){const f=QC(this);return{config:new nc(this,{zoom:s,lut:u}),defines:f,overrideFog:!1}}queryRadius(h){const s=h,u=HA(Ut("line-width",this,s),Ut("line-gap-width",this,s)),f=Ut("line-offset",this,s);return u/2+Math.abs(f)+ia(this.paint.get("line-translate"))}queryIntersectsFeature(h,s,u,f,g,m){if(h.queryGeometry.isAboveHorizon)return!1;const _=da(h.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),b=h.pixelToTileUnitsFactor/2*HA(this.paint.get("line-width").evaluate(s,u),this.paint.get("line-gap-width").evaluate(s,u)),O=this.paint.get("line-offset").evaluate(s,u);return O&&(f=function(D,C){const V=[],L=new Nt(0,0);for(let z=0;z<D.length;z++){const M=D[z],j=[];for(let J=0;J<M.length;J++){const te=M[J],fe=M[J+1],he=J===0?L:te.sub(M[J-1])._unit()._perp(),se=J===M.length-1?L:fe.sub(te)._unit()._perp(),ve=he._add(se)._unit();ve._mult(1/(ve.x*se.x+ve.y*se.y)),j.push(ve._mult(C)._add(te))}V.push(j)}return V}(f,O*h.pixelToTileUnitsFactor)),function(D,C,V){for(let L=0;L<C.length;L++){const z=C[L];if(D.length>=3){for(let M=0;M<z.length;M++)if(ot(D,z[M]))return!0}if(Fe(D,z,V))return!0}return!1}(_,f,b)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(h){return!this.hasElevatedBuckets}},symbol:pS,background:class extends uo{constructor(h,s,u,f){super(h,{layout:kF||(kF=new ji({visibility:new Pa(qt.layout_background.visibility)})),paint:UF||(UF=new ji({"background-pitch-alignment":new Pa(qt.paint_background["background-pitch-alignment"]),"background-color":new Pa(qt.paint_background["background-color"]),"background-pattern":new Pa(qt.paint_background["background-pattern"]),"background-opacity":new Pa(qt.paint_background["background-opacity"]),"background-emissive-strength":new Pa(qt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(h,s,u){return{overrideFog:!1}}is3D(h){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:qF,"raster-particle":XF,sky:class extends uo{constructor(h,s,u,f){super(h,{layout:KF||(KF=new ji({visibility:new Pa(qt.layout_sky.visibility)})),paint:WF||(WF=new ji({"sky-type":new Pa(qt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Pa(qt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Pa(qt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Pa(qt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Pa(qt.paint_sky["sky-gradient-radius"]),"sky-gradient":new rs(qt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Pa(qt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Pa(qt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Pa(qt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="sky-gradient"?this._updateColorRamp():h!=="sky-atmosphere-sun"&&h!=="sky-atmosphere-halo-color"&&h!=="sky-atmosphere-color"&&h!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ry({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(h){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=h.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(h,s){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,m=h.style.light,_=m.properties.get("position");return g&&m.properties.get("anchor")==="viewport"&&Yr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?FE(_.azimuthal,90-_.polar,s):FE(f[0],90-f[1],s)}const u=this.paint.get("sky-gradient-center");return FE(u[0],90-u[1],s)}isSky(){return!0}markSkyboxValid(h){this._skyboxInvalidated=!1,this._lightPosition=h.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const h=this.paint.get("sky-type");return h==="atmosphere"?["skyboxCapture","skybox"]:h==="gradient"?["skyboxGradient"]:null}},slot:class extends uo{constructor(h,s,u,f){super(h,{paint:YF||(YF=new ji({}))},s,null)}},model:class extends uo{constructor(h,s,u,f){super(h,{layout:ok||(ok=new ji({visibility:new Pa(qt.layout_model.visibility),"model-id":new Ga(qt.layout_model["model-id"])})),paint:lk||(lk=new ji({"model-opacity":new Ga(qt.paint_model["model-opacity"]),"model-rotation":new Ga(qt.paint_model["model-rotation"]),"model-scale":new Ga(qt.paint_model["model-scale"]),"model-translation":new Ga(qt.paint_model["model-translation"]),"model-color":new Ga(qt.paint_model["model-color"]),"model-color-mix-intensity":new Ga(qt.paint_model["model-color-mix-intensity"]),"model-type":new Pa(qt.paint_model["model-type"]),"model-cast-shadows":new Pa(qt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Pa(qt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Pa(qt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ga(qt.paint_model["model-emissive-strength"]),"model-roughness":new Ga(qt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ga(qt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Pa(qt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Pa(qt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ga({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new BE(h)}getProgramIds(){return["model"]}is3D(h){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(h){return h instanceof RS?Da-1:0}queryIntersectsFeature(h,s,u,f,g,m){if(!this.modelManager)return!1;const _=this.modelManager,b=h.tile.getBucket(this);if(!(b&&b instanceof BE))return!1;for(const O in b.instancesPerModel){const D=b.instancesPerModel[O],C=s.id!==void 0?s.id:s.properties&&s.properties.hasOwnProperty("id")?s.properties.id:void 0;if(D.idToFeaturesIndex.hasOwnProperty(C)){const V=D.features[D.idToFeaturesIndex[C]],L=_.getModel(O,this.scope);if(!L)return!1;let z=Ae.mat4.create();const M=new Gn(0,0),j=b.canonical;let J=Number.MAX_VALUE;for(let te=0;te<V.instancedDataCount;++te){const fe=16*(V.instancedDataOffset+te),he=D.instancedDataArray.float32,se=[he[fe+4],he[fe+5],he[fe+6]];pk(j,M,he[fe],0|he[fe+1]),uk(z,L,m,M,V.rotation,V.scale,se,!1,!1,!1),m.projection.name==="globe"&&(z=UE(z,m));const ve=Ae.mat4.multiply([],m.projMatrix,z),Ce=h.queryGeometry,Ve=ak(Ce.isPointQuery()?Ce.screenBounds:Ce.screenGeometry,m,ve,L.aabb);Ve!=null&&(J=Math.min(Ve,J))}return J!==Number.MAX_VALUE&&J}}return!1}_handleOverridablePaintPropertyUpdate(h,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven()||h!=="model-color"&&h!=="model-color-mix-intensity"&&h!=="model-rotation"&&h!=="model-scale"&&h!=="model-translation"&&h!=="model-emissive-strength")}_isPropertyZoomDependent(h){const s=this._transitionablePaint._values[h];return s!=null&&s.value!=null&&s.value.expression!=null&&s.value.expression instanceof ye}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends uo{constructor(h,s,u,f){super(h,{layout:m0||(m0=new ji({"clip-layer-types":new Pa(qt.layout_clip["clip-layer-types"]),"clip-layer-scope":new Pa(qt.layout_clip["clip-layer-scope"])})),paint:g0||(g0=new ji({}))},s,u,f)}recalculate(h,s){super.recalculate(h,s)}createBucket(h){return new IC(h)}is3D(h){return!0}}};class cre{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class dre{constructor(){this.tasks={},this.taskQueue=[],ja(["process"],this),this.invoker=new cre(this.process),this.nextId=0}add(s,u){const f=this.nextId++,g=function({type:m,isSymbolTile:_,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-b:m==="maybePrepare"&&_?400-b:500:200-b:100-b}(u);if(g===0){try{s()}finally{}return null}return this.tasks[f]={fn:s,metadata:u,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const s=this.pick();if(s===null)return;const u=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let s=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const m=this.tasks[this.taskQueue[g]];m.priority<u&&(u=m.priority,s=g)}if(s===null)return null;const f=this.taskQueue[s];return this.taskQueue.splice(s,1),f}remove(){this.invoker.remove()}}class mk{constructor(s,u,f){this.target=s,this.parent=u,this.mapId=f,this.callbacks={},this.cancelCallbacks={},ja(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new dre}send(s,u,f,g,m=!1,_){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=_,this.callbacks[b]=f);const O=new Set;return this.target.postMessage({id:b,type:s,hasCallback:!!f,targetMapId:g,mustQueue:m,sourceMapId:this.mapId,data:Ta(u,O)},O),{cancel:()=>{f&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(s){const u=s.data;if(!u)return;const f=u.id;if(f&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const g=this.cancelCallbacks[f];delete this.cancelCallbacks[f],g&&g.cancel()}else if(u.mustQueue||oi()){const g=this.callbacks[f],m=this.scheduler.add(()=>this.processTask(f,u),g&&g.metadata||{type:"message"});m&&(this.cancelCallbacks[f]=m)}else this.processTask(f,u)}processTask(s,u){if(delete this.cancelCallbacks[s],u.type==="<response>"){const f=this.callbacks[s];delete this.callbacks[s],f&&(u.error?f(ma(u.error)):f(null,ma(u.data)))}else{const f=new Set,g=u.hasCallback?(_,b)=>{this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:_?Ta(_):null,data:Ta(b,f)},f)}:()=>{},m=ma(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,g);else if(this.parent.getWorkerSource){const _=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,_[0],m.source,m.scope)[_[1]](m,g)}else g(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Cw={workerUrl:"",workerClass:null,workerParams:void 0};const qE="mapboxgl_preloaded_worker_pool";class YA{constructor(){this.active={}}acquire(s,u=YA.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(Cw.workerClass!=null?new Cw.workerClass:new self.Worker(Cw.workerUrl,Cw.workerParams));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qE]}numActive(){return Object.keys(this.active).length}}YA.workerCount=2;class V0{constructor(s,u,f="Worker",g=YA.workerCount){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=Oa();const m=this.workerPool.acquire(this.id,g);for(let _=0;_<m.length;_++){const b=new V0.Actor(m[_],u,this.id);b.name=`${f} ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,u,f){lr(this.actors,(g,m)=>{g.send(s,u,m)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}let Sw,HE;function TS(){return Sw||(Sw=new YA),Sw}V0.Actor=mk;const $E=new zn(0,0,0);var KE=(h=>(h[h.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",h[h.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",h[h.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",h))(KE||{}),CS=(h=>(h[h.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",h[h.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",h[h.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",h[h.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",h))(CS||{}),bw=(h=>(h[h.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",h[h.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",h[h.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",h[h.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",h[h.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",h))(bw||{}),gk=(h=>(h[h.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",h[h.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",h[h.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",h))(gk||{}),z0=(h=>(h[h.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",h[h.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",h[h.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",h[h.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",h[h.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",h[h.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",h))(z0||{}),yk=(h=>(h[h.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",h[h.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",h[h.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",h))(yk||{});function hre(h,s,u){h===1&&s.icons.push(function(f,g){return function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:_}=m;if(_.content_area){const{content_area:b}=_;b.top==null&&(b.top=b.left),b.width==null&&(b.width=m.usvg_tree.width),b.height==null&&(b.height=b.width)}return _.stretch_x&&_.stretch_x.length&&Ak(_,"x"),_.stretch_y&&_.stretch_y.length&&Ak(_,"y"),m}(f.readFields(fre,{name:void 0},g))}(u,u.readVarint()+u.pos))}function Ak(h,s){const u=[],f=h[`stretch_${s}`];let g=null;for(let m=0;m<f.length;m++)g===null?g=u.length===0?f[0]:u[u.length-1][1]+f[m]:(u.push([g,g+f[m]]),g=null);h[`stretch_${s}_areas`]=u}function fre(h,s,u){h===1?s.name=u.readString():h===2?s.metadata=function(f,g){return f.readFields(pre,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)}(u,u.readVarint()+u.pos):h===3&&(s.usvg_tree=function(f,g){return f.readFields(yre,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)}(u,u.readVarint()+u.pos),s.data="usvg_tree")}function pre(h,s,u){h===1?s.stretch_x=u.readPackedVarint():h===2?s.stretch_y=u.readPackedVarint():h===3?s.content_area=function(f,g){return f.readFields(mre,{left:0},g)}(u,u.readVarint()+u.pos):h===4&&s.variables.push(function(f,g){return f.readFields(gre,{name:void 0},g)}(u,u.readVarint()+u.pos))}function mre(h,s,u){h===1?s.left=u.readVarint():h===2?s.width=u.readVarint():h===3?s.top=u.readVarint():h===4&&(s.height=u.readVarint())}function gre(h,s,u){h===1?s.name=u.readString():h===2&&(s.rgb_color=xS(u.readVarint()),s.value="rgb_color")}function yre(h,s,u){h===1?s.width=s.height=u.readVarint():h===2?s.height=u.readVarint():h===3?s.children.push(SS(u,u.readVarint()+u.pos)):h===4?s.linear_gradients.push(function(f,g){return f.readFields(Cre,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)}(u,u.readVarint()+u.pos)):h===5?s.radial_gradients.push(function(f,g){return f.readFields(bre,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)}(u,u.readVarint()+u.pos)):h===7?s.clip_paths.push(function(f,g){return f.readFields(xre,{children:[]},g)}(u,u.readVarint()+u.pos)):h===8&&s.masks.push(function(f,g){const m=f.readFields(Pre,{left:0,width:20,mask_type:1,children:[]},g);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m}(u,u.readVarint()+u.pos))}function SS(h,s){return h.readFields(Are,{},s)}function Are(h,s,u){h===1?(s.group=function(f,g){return f.readFields(vre,{opacity:255,children:[]},g)}(u,u.readVarint()+u.pos),s.node="group"):h===2&&(s.path=function(f,g){return f.readFields(wre,{paint_order:1,commands:[],step:1,diffs:[],rule:1},g)}(u,u.readVarint()+u.pos),s.node="path")}function vre(h,s,u){h===1?s.transform=bS(u,u.readVarint()+u.pos):h===2?s.opacity=u.readVarint():h===5?s.clip_path_idx=u.readVarint():h===6?s.mask_idx=u.readVarint():h===7&&s.children.push(SS(u,u.readVarint()+u.pos))}function bS(h,s){return h.readFields(_re,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},s)}function _re(h,s,u){h===1?s.sx=u.readFloat():h===2?s.ky=u.readFloat():h===3?s.kx=u.readFloat():h===4?s.sy=u.readFloat():h===5?s.tx=u.readFloat():h===6&&(s.ty=u.readFloat())}function wre(h,s,u){h===1?s.fill=function(f,g){return f.readFields(Rre,{rgb_color:$E,paint:"rgb_color",opacity:255},g)}(u,u.readVarint()+u.pos):h===2?s.stroke=function(f,g){return f.readFields(Tre,{rgb_color:$E,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)}(u,u.readVarint()+u.pos):h===3?s.paint_order=u.readVarint():h===5?u.readPackedVarint(s.commands):h===6?s.step=u.readFloat():h===7?u.readPackedSVarint(s.diffs):h===8&&(s.rule=u.readVarint())}function Rre(h,s,u){h===1?(s.rgb_color=xS(u.readVarint()),s.paint="rgb_color"):h===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):h===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):h===5&&(s.opacity=u.readVarint())}function xS(h){return new zn((h>>16&255)/255,(h>>8&255)/255,(255&h)/255,1)}function Tre(h,s,u){h===1?(s.rgb_color=xS(u.readVarint()),s.paint="rgb_color"):h===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):h===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):h===5?u.readPackedFloat(s.dasharray):h===6?s.dashoffset=u.readFloat():h===7?s.miterlimit=u.readFloat():h===8?s.opacity=u.readVarint():h===9?s.width=u.readFloat():h===10?s.linecap=u.readVarint():h===11&&(s.linejoin=u.readVarint())}function Cre(h,s,u){h===1?s.transform=bS(u,u.readVarint()+u.pos):h===2?s.spread_method=u.readVarint():h===3?s.stops.push(vk(u,u.readVarint()+u.pos)):h===4?s.x1=u.readFloat():h===5?s.y1=u.readFloat():h===6?s.x2=u.readFloat():h===7&&(s.y2=u.readFloat())}function vk(h,s){return h.readFields(Sre,{offset:0,opacity:255,rgb_color:$E},s)}function Sre(h,s,u){h===1?s.offset=u.readFloat():h===2?s.opacity=u.readVarint():h===3&&(s.rgb_color=xS(u.readVarint()))}function bre(h,s,u){h===1?s.transform=bS(u,u.readVarint()+u.pos):h===2?s.spread_method=u.readVarint():h===3?s.stops.push(vk(u,u.readVarint()+u.pos)):h===4?s.cx=u.readFloat():h===5?s.cy=u.readFloat():h===6?s.r=u.readFloat():h===7?s.fx=u.readFloat():h===8?s.fy=u.readFloat():h===9&&(s.fr=u.readFloat())}function xre(h,s,u){h===1?s.transform=bS(u,u.readVarint()+u.pos):h===2?s.clip_path_idx=u.readVarint():h===3&&s.children.push(SS(u,u.readVarint()+u.pos))}function Pre(h,s,u){h===1?s.left=s.top=u.readFloat():h===2?s.width=s.height=u.readFloat():h===3?s.top=u.readFloat():h===4?s.height=u.readFloat():h===5?s.mask_type=u.readVarint():h===6?s.mask_idx=u.readVarint():h===7&&s.children.push(SS(u,u.readVarint()+u.pos))}class Ere{static calculate(s={},u=[]){const f=new Map,g=new Map;if(Object.keys(s).length===0)return f;u.forEach(m=>{g.set(m.name,m.rgb_color||new zn(0,0,0))});for(const[m,_]of Object.entries(s))g.has(m)?f.set(g.get(m).toStringPremultipliedAlpha(),_):console.warn(`Ignoring unknown image variable "${m}"`);return f}}function D0(h,s=255,u){const f=s/255,g=h.toStringPremultipliedAlpha(),m=u.has(g)?u.get(g).clone():h.clone();return m.a*=f,m.toString()}function xw(h,s){if(!Yt()){const u=document.createElement("canvas");return u.width=h,u.height=s,u}return new OffscreenCanvas(h,s)}function Nre(h,s){const u=Ere.calculate(s.params,h.metadata?h.metadata.variables:[]),f=h.usvg_tree,g=f.width,m=f.height,_=s.transform?s.transform:new DOMMatrix,b=Math.max(1,Math.round(g*_.a)),O=Math.max(1,Math.round(m*_.d)),D=new DOMMatrix([b/g,0,0,O/m,0,0]),C=xw(b,O).getContext("2d");return WE(C,D,f,f,u),C.getImageData(0,0,b,O)}function WE(h,s,u,f,g){for(const m of f.children)_k(h,s,u,m,g)}function _k(h,s,u,f,g){f.group?(h.save(),function(m,_,b,O,D){const C=O.mask_idx!=null?b.masks[O.mask_idx]:null,V=O.clip_path_idx!=null?b.clip_paths[O.clip_path_idx]:null;if(O.transform&&(_=PS(O.transform).preMultiplySelf(_)),!function(M,j,J){return M.opacity!==255||j||J}(O,V!=null,C!=null))return void WE(m,_,b,O,D);const L=xw(m.canvas.width,m.canvas.height),z=L.getContext("2d");WE(z,_,b,O,D),V&&xk(z,_,b,V),C&&Pk(z,_,b,C,D),m.globalAlpha=O.opacity/255,m.drawImage(L,0,0)}(h,s,u,f.group,g),h.restore()):f.path&&(h.save(),function(m,_,b,O,D){const C=Ek(O);m.setTransform(_),O.paint_order===gk.PAINT_ORDER_FILL_AND_STROKE?(wk(m,b,O,C,D),Tk(m,b,O,C,D)):(Tk(m,b,O,C,D),wk(m,b,O,C,D))}(h,s,u,f.path,g),h.restore())}function wk(h,s,u,f,g){const m=u.fill;if(!m)return;const _=m.opacity/255;switch(m.paint){case"rgb_color":h.fillStyle=D0(m.rgb_color,m.opacity,g);break;case"linear_gradient_idx":h.fillStyle=Ck(h,s.linear_gradients[m.linear_gradient_idx],_,g);break;case"radial_gradient_idx":h.fillStyle=Sk(h,s.radial_gradients[m.radial_gradient_idx],_,g)}h.fill(f,Rk(u))}function Rk(h){return h.rule===KE.PATH_RULE_NON_ZERO?"nonzero":h.rule===KE.PATH_RULE_EVEN_ODD?"evenodd":void 0}function Tk(h,s,u,f,g){const m=u.stroke;if(!m)return;h.lineWidth=m.width,h.miterLimit=m.miterlimit,h.setLineDash(m.dasharray),h.lineDashOffset=m.dashoffset;const _=m.opacity/255;switch(m.paint){case"rgb_color":h.strokeStyle=D0(m.rgb_color,m.opacity,g);break;case"linear_gradient_idx":h.strokeStyle=Ck(h,s.linear_gradients[m.linear_gradient_idx],_,g);break;case"radial_gradient_idx":h.strokeStyle=Sk(h,s.radial_gradients[m.radial_gradient_idx],_,g)}switch(m.linejoin){case bw.LINE_JOIN_MITER_CLIP:case bw.LINE_JOIN_MITER:h.lineJoin="miter";break;case bw.LINE_JOIN_ROUND:h.lineJoin="round";break;case bw.LINE_JOIN_BEVEL:h.lineJoin="bevel"}switch(m.linecap){case CS.LINE_CAP_BUTT:h.lineCap="butt";break;case CS.LINE_CAP_ROUND:h.lineCap="round";break;case CS.LINE_CAP_SQUARE:h.lineCap="square"}h.stroke(f)}function Ck(h,s,u,f){if(s.stops.length===1){const L=s.stops[0];return D0(L.rgb_color,L.opacity*u,f)}const g=PS(s.transform),{x1:m,y1:_,x2:b,y2:O}=s,D=g.transformPoint(new DOMPoint(m,_)),C=g.transformPoint(new DOMPoint(b,O)),V=h.createLinearGradient(D.x,D.y,C.x,C.y);for(const L of s.stops)V.addColorStop(L.offset,D0(L.rgb_color,L.opacity*u,f));return V}function Sk(h,s,u,f){if(s.stops.length===1){const L=s.stops[0];return D0(L.rgb_color,L.opacity*u,f)}const g=PS(s.transform),{fx:m,fy:_,cx:b,cy:O}=s,D=g.transformPoint(new DOMPoint(m,_)),C=g.transformPoint(new DOMPoint(b,O)),V=h.createRadialGradient(D.x,D.y,0,C.x,C.y,s.r*((g.a+g.d)/2));for(const L of s.stops)V.addColorStop(L.offset,D0(L.rgb_color,L.opacity*u,f));return V}function bk(h,s,u,f){const g=f.transform?PS(f.transform).preMultiplySelf(s):s,m=xw(h.canvas.width,h.canvas.height),_=m.getContext("2d");for(const O of f.children)if(O.group)bk(_,g,u,O.group);else if(O.path){const D=O.path,C=new Path2D;C.addPath(Ek(D),g),_.fill(C,Rk(D))}const b=f.clip_path_idx!=null?u.clip_paths[f.clip_path_idx]:null;b&&xk(_,g,u,b),h.globalCompositeOperation="source-over",h.drawImage(m,0,0)}function xk(h,s,u,f){const g=xw(h.canvas.width,h.canvas.height);bk(g.getContext("2d"),s,u,f),h.globalCompositeOperation="destination-in",h.drawImage(g,0,0)}function Pk(h,s,u,f,g){if(f.children.length===0)return;const m=f.mask_idx!=null?u.masks[f.mask_idx]:null;m&&Pk(h,s,u,m,g);const _=h.canvas.width,b=h.canvas.height,O=xw(_,b),D=O.getContext("2d"),C=f.width,V=f.height,L=f.left,z=f.top,M=new Path2D,j=new Path2D;j.rect(L,z,C,V),M.addPath(j,s),D.clip(M);for(const fe of f.children)_k(D,s,u,fe,g);const J=D.getImageData(0,0,_,b),te=J.data;if(f.mask_type===yk.MASK_TYPE_LUMINANCE)for(let fe=0;fe<te.length;fe+=4)te[fe+3]=te[fe+3]/255*(.2126*te[fe]+.7152*te[fe+1]+.0722*te[fe+2]);D.putImageData(J,0,0),h.globalCompositeOperation="destination-in",h.drawImage(O,0,0)}function PS(h){return h?new DOMMatrix([h.sx,h.ky,h.kx,h.sy,h.tx,h.ty]):new DOMMatrix}function Ek(h){const s=new Path2D,u=h.step;let f=h.diffs[0]*u,g=h.diffs[1]*u;s.moveTo(f,g);for(let m=0,_=2;m<h.commands.length;m++)switch(h.commands[m]){case z0.PATH_COMMAND_MOVE:f+=h.diffs[_++]*u,g+=h.diffs[_++]*u,s.moveTo(f,g);break;case z0.PATH_COMMAND_LINE:f+=h.diffs[_++]*u,g+=h.diffs[_++]*u,s.lineTo(f,g);break;case z0.PATH_COMMAND_QUAD:{const b=f+h.diffs[_++]*u,O=g+h.diffs[_++]*u;f=b+h.diffs[_++]*u,g=O+h.diffs[_++]*u,s.quadraticCurveTo(b,O,f,g);break}case z0.PATH_COMMAND_CUBIC:{const b=f+h.diffs[_++]*u,O=g+h.diffs[_++]*u,D=b+h.diffs[_++]*u,C=O+h.diffs[_++]*u;f=D+h.diffs[_++]*u,g=C+h.diffs[_++]*u,s.bezierCurveTo(b,O,D,C,f,g);break}case z0.PATH_COMMAND_CLOSE:s.closePath()}return s}class ES{constructor(s){this.capacity=s,this.cache=new Map}get(s){if(!this.cache.has(s))return;const u=this.cache.get(s);return this.cache.delete(s),this.cache.set(s,u),u}put(s,u){this.cache.has(s)?this.cache.delete(s):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(s,u)}delete(s){this.cache.delete(s)}}Pt(ES,"LRUCache");class YE{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(s){return new xl(s,s.data)}getFromCache(s,u,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new ES(150)),this.cacheMap.get(f).get(rd(s.toString(),u))}setInCache(s,u,f,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new ES(150));const m=this.cacheDependenciesMap.get(g),_=rd(s.id.toString(),f);m.get(_)||m.set(_,new Set);const b=this.cacheMap.get(g),O=s.toString();m.get(_).add(O),b.put(rd(s.toString(),f),u)}removeImagesFromCacheByIds(s,u,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const g=this.cacheMap.get(f),m=this.cacheDependenciesMap.get(f);for(const _ of s){const b=rd(_.toString(),u);if(m.has(b)){for(const O of m.get(b))g.delete(O);m.delete(b)}}}rasterize(s,u,f,g,m=Nre){const _=this.getFromCache(s,f,g);if(_)return _.clone();const b=m(u.icon,s.options),O=YE._getImage(b);return this.setInCache(s,O,f,g),O.clone()}}class Nk{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,u){const f=this.toIdx(s,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(s,u){return this.leaves[this.toIdx(s,u)]}toIdx(s,u){return u*this.size+s}}function Ok(h,s,u,f){let g=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(f[_])<1e-15){if(u[_]<h[_]||u[_]>s[_])return null}else{const b=1/f[_];let O=(h[_]-u[_])*b,D=(s[_]-u[_])*b;if(O>D){const C=O;O=D,D=C}if(O>g&&(g=O),D<m&&(m=D),g>m)return null}return g}function Vk(h,s,u,f,g,m,_,b,O,D,C){const V=f-h,L=g-s,z=m-u,M=_-h,j=b-s,J=O-u,te=C[1]*J-C[2]*j,fe=C[2]*M-C[0]*J,he=C[0]*j-C[1]*M,se=V*te+L*fe+z*he;if(Math.abs(se)<1e-15)return null;const ve=1/se,Ce=D[0]-h,Ve=D[1]-s,et=D[2]-u,Ye=(Ce*te+Ve*fe+et*he)*ve;if(Ye<0||Ye>1)return null;const Xe=Ve*z-et*L,gt=et*V-Ce*z,tt=Ce*L-Ve*V,_t=(C[0]*Xe+C[1]*gt+C[2]*tt)*ve;return _t<0||Ye+_t>1?null:(M*Xe+j*gt+J*tt)*ve}function zk(h,s,u){return(h-s)/(u-s)}function Dk(h,s,u,f,g,m,_,b,O){const D=1<<u,C=m-f,V=_-g,L=(h+1)/D*C+f,z=(s+0)/D*V+g,M=(s+1)/D*V+g;b[0]=(h+0)/D*C+f,b[1]=z,O[0]=L,O[1]=M}class Mk{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(m){const _=Math.ceil(Math.log2(m.dim/8)),b=[];let O=Math.ceil(Math.pow(2,_));const D=1/O,C=(z,M,j,J,te)=>{const fe=J?1:0,he=(z+1)*j-fe,se=M*j,ve=(M+1)*j-fe;te[0]=z*j,te[1]=se,te[2]=he,te[3]=ve};let V=new Nk(O);const L=[];for(let z=0;z<O*O;z++){C(z%O,Math.floor(z/O),D,!1,L);const M=_y(L[0],L[1],m),j=_y(L[2],L[1],m),J=_y(L[2],L[3],m),te=_y(L[0],L[3],m);V.minimums.push(Math.min(M,j,J,te)),V.maximums.push(Math.max(M,j,J,te)),V.leaves.push(1)}for(b.push(V),O/=2;O>=1;O/=2){const z=b[b.length-1];V=new Nk(O);for(let M=0;M<O*O;M++){C(M%O,Math.floor(M/O),2,!0,L);const j=z.getElevation(L[0],L[1]),J=z.getElevation(L[2],L[1]),te=z.getElevation(L[2],L[3]),fe=z.getElevation(L[0],L[3]),he=z.isLeaf(L[0],L[1]),se=z.isLeaf(L[2],L[1]),ve=z.isLeaf(L[2],L[3]),Ce=z.isLeaf(L[0],L[3]),Ve=Math.min(j.min,J.min,te.min,fe.min),et=Math.max(j.max,J.max,te.max,fe.max),Ye=he&&se&&ve&&Ce;V.maximums.push(et),V.minimums.push(Ve),V.leaves.push(et-Ve<=5&&Ye?1:0)}b.push(V)}return b}(this.dem),f=u.length-1,g=u[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(s,u,f,g,m,_,b=1){return Ok([s,u,-100],[f,g,this.maximums[0]*b],m,_)}raycast(s,u,f,g,m,_,b=1){if(!this.nodeCount)return null;const O=this.raycastRoot(s,u,f,g,m,_,b);if(O==null)return null;const D=[],C=[],V=[],L=[],z=[{idx:0,t:O,nodex:0,nodey:0,depth:0}];for(;z.length>0;){const{idx:M,t:j,nodex:J,nodey:te,depth:fe}=z.pop();if(this.leaves[M]){Dk(J,te,fe,s,u,f,g,V,L);const se=1<<fe,ve=(J+0)/se,Ce=(J+1)/se,Ve=(te+0)/se,et=(te+1)/se,Ye=_y(ve,Ve,this.dem)*b,Xe=_y(Ce,Ve,this.dem)*b,gt=_y(Ce,et,this.dem)*b,tt=_y(ve,et,this.dem)*b,_t=Vk(V[0],V[1],Ye,L[0],V[1],Xe,L[0],L[1],gt,m,_),xt=Vk(L[0],L[1],gt,V[0],L[1],tt,V[0],V[1],Ye,m,_),Ct=Math.min(_t!==null?_t:Number.MAX_VALUE,xt!==null?xt:Number.MAX_VALUE);if(Ct!==Number.MAX_VALUE)return Ct;{const Mt=Ae.vec3.scaleAndAdd([],m,_,j);if(Ik(Ye,Xe,tt,gt,zk(Mt[0],V[0],L[0]),zk(Mt[1],V[1],L[1]))>=Mt[2])return j}continue}let he=0;for(let se=0;se<this._siblingOffset.length;se++){Dk((J<<1)+this._siblingOffset[se][0],(te<<1)+this._siblingOffset[se][1],fe+1,s,u,f,g,V,L),V[2]=-100,L[2]=this.maximums[this.childOffsets[M]+se]*b;const ve=Ok(V,L,m,_);if(ve!=null){const Ce=ve;D[se]=Ce;let Ve=!1;for(let et=0;et<he&&!Ve;et++)Ce>=D[C[et]]&&(C.splice(et,0,se),Ve=!0);Ve||(C[he]=se),he++}}for(let se=0;se<he;se++){const ve=C[se];z.push({idx:this.childOffsets[M]+ve,t:D[ve],nodex:(J<<1)+this._siblingOffset[ve][0],nodey:(te<<1)+this._siblingOffset[ve][1],depth:fe+1})}}return null}_addNode(s,u,f){return this.minimums.push(s),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(s,u,f,g,m){if(s[g].isLeaf(u,f)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=g-1,b=s[_];let O=0,D=0;for(let C=0;C<this._siblingOffset.length;C++){const V=2*u+this._siblingOffset[C][0],L=2*f+this._siblingOffset[C][1],z=b.getElevation(V,L),M=b.isLeaf(V,L),j=this._addNode(z.min,z.max,M);M&&(O|=1<<C),D||(D=j)}for(let C=0;C<this._siblingOffset.length;C++)O&1<<C||this._construct(s,2*u+this._siblingOffset[C][0],2*f+this._siblingOffset[C][1],_,D+C)}}function Ik(h,s,u,f,g,m){return vr(vr(h,u,m),vr(s,f,m),g)}function _y(h,s,u){const f=u.dim,g=Ia(h*f-.5,0,f-1),m=Ia(s*f-.5,0,f-1),_=Math.floor(g),b=Math.floor(m),O=Math.min(_+1,f-1),D=Math.min(b+1,f-1);return Ik(u.get(_,b),u.get(O,b),u.get(_,D),u.get(O,D),g-_,m-b)}const Ore={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Vre(h,s,u){return(256*h*256+256*s+u)/10-1e4}function zre(h,s,u){return 256*h+s+u/256-32768}class NS{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,u,f,g=!1){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void Yr(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,_=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let O=0;O<m;O++)_[this._idx(-1,O)]=_[this._idx(0,O)],_[this._idx(m,O)]=_[this._idx(m-1,O)],_[this._idx(O,-1)]=_[this._idx(O,0)],_[this._idx(O,m)]=_[this._idx(O,m-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(m,-1)]=_[this._idx(m-1,0)],_[this._idx(-1,m)]=_[this._idx(0,m-1)],_[this._idx(m,m)]=_[this._idx(m-1,m-1)]}const b=f==="terrarium"?zre:Vre;for(let O=0;O<_.length;++O){const D=4*O;this.floatView[O]=b(this.pixels[D],this.pixels[D+1],this.pixels[D+2])}this._timestamp=Kt.now()}_buildQuadTree(){this._tree=new Mk(this)}get(s,u,f=!1){f&&(s=Ia(s,-1,this.dim),u=Ia(u,-1,this.dim));const g=this._idx(s,u);return this.floatView[g]}set(s,u,f){const g=this._idx(s,u),m=this.floatView[g];return this.floatView[g]=f,f-m}static getUnpackVector(s){return Ore[s]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}static pack(s,u){const f=[0,0,0,0],g=NS.getUnpackVector(u);let m=Math.floor((s+g[3])/g[2]);return f[2]=m%256,m=Math.floor(m/256),f[1]=m%256,m=Math.floor(m/256),f[0]=m,f}getPixels(){return new M1({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,u,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,m=u*this.dim+this.dim,_=f*this.dim,b=f*this.dim+this.dim;switch(u){case-1:g=m-1;break;case 1:m=g+1}switch(f){case-1:_=b-1;break;case 1:b=_+1}const O=-u*this.dim,D=-f*this.dim;for(let C=_;C<b;C++)for(let V=g;V<m;V++){const L=4*this._idx(V,C),z=4*this._idx(V+O,C+D);this.pixels[L+0]=s.pixels[z+0],this.pixels[L+1]=s.pixels[z+1],this.pixels[L+2]=s.pixels[z+2],this.pixels[L+3]=s.pixels[z+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Dre(h,s,u){h===1?s.headerLength=u.readFixed32():h===2?s.x=u.readVarint():h===3?s.y=u.readVarint():h===4?s.z=u.readVarint():h===5&&s.layers.push(function(f,g){return f.readFields(kre,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)}(u,u.readVarint()+u.pos))}function Mre(h,s,u){h===1?(s.delta_filter=function(f,g){return f.readFields(Ire,{blockSize:0},g)}(u,u.readVarint()+u.pos),s.filter="delta_filter"):h===2?(u.readVarint(),s.filter="zigzag_filter"):h===3?(u.readVarint(),s.filter="bitshuffle_filter"):h===4&&(u.readVarint(),s.filter="byteshuffle_filter")}function Ire(h,s,u){h===1&&(s.blockSize=u.readVarint())}function Lre(h,s,u){h===1?(u.readVarint(),s.codec="gzip_data"):h===2?(u.readVarint(),s.codec="jpeg_image"):h===3?(u.readVarint(),s.codec="webp_image"):h===4&&(u.readVarint(),s.codec="png_image")}function Fre(h,s,u){let f=0,g=0;h===1?s.firstByte=u.readFixed64():h===2?s.lastByte=u.readFixed64():h===3?s.filters.push(function(m,_){return m.readFields(Mre,{},_)}(u,u.readVarint()+u.pos)):h===4?s.codec=function(m,_){return m.readFields(Lre,{},_)}(u,u.readVarint()+u.pos):h===5?g=u.readFloat():h===6?f=u.readFloat():h===7?s.bands.push(u.readString()):h===8?s.offset=u.readDouble():h===9&&(s.scale=u.readDouble()),s.offset===0&&(s.offset=g),s.scale===0&&(s.scale=f)}function kre(h,s,u){h===1?s.version=u.readVarint():h===2?s.name=u.readString():h===3?s.units=u.readString():h===4?s.tileSize=u.readVarint():h===5?s.buffer=u.readVarint():h===6?s.pixelFormat=u.readVarint():h===7&&s.dataIndex.push(function(f,g){return f.readFields(Fre,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)}(u,u.readVarint()+u.pos))}function Ure(h,s,u){if(h===2)(function(f,g,m){f.readFields(Bre,m,g)})(u,u.readVarint()+u.pos,s);else if(h===3)throw new Error("Not implemented")}function Bre(h,s,u){if(h===1){let f=0;const g=u.readVarint()+u.pos;for(;u.pos<g;)s[f++]=u.readVarint()}}function jre(h,s){if(s.length!==4)throw new Error(`Expected data of dimension 4 but got ${s.length}.`);let u=s[3];for(let f=2;f>=1;f--){const g=f===1?1:0,m=f===2?1:0;for(let _=0;_<s[0];_++){const b=s[1]*_;for(let O=g;O<s[1];O++){const D=s[2]*(O+b);for(let C=m;C<s[2];C++){const V=s[3]*(C+D);for(let L=0;L<s[3];L++){const z=V+L;h[z]+=h[z-u]}}}}u*=s[f]}return h}function Gre(h){for(let s=0,u=h.length;s<u;s++)h[s]=h[s]>>>1^-(1&h[s]);return h}function Zre(h,s){switch(s){case"uint32":return h;case"uint16":for(let u=0;u<h.length;u+=2){const f=h[u],g=h[u+1];h[u]=(240&f)>>4|(61440&f)>>8|(240&g)<<4|61440&g,h[u+1]=15&f|(3840&f)>>4|(15&g)<<8|(3840&g)<<4}return h;case"uint8":for(let u=0;u<h.length;u+=4){const f=h[u],g=h[u+1],m=h[u+2],_=h[u+3];h[u+0]=(192&f)>>6|(192&g)>>4|(192&m)>>2|192&_,h[u+1]=(48&f)>>4|(48&g)>>2|48&m|(48&_)<<2,h[u+2]=(12&f)>>2|12&g|(12&m)<<2|(12&_)<<4,h[u+3]=3&f|(3&g)<<2|(3&m)<<4|(3&_)<<6}return h;default:throw new Error(`Invalid pixel format, "${s}"`)}}Pt(NS,"DEMData"),Pt(Mk,"DemMinMaxQuadTree",{omit:["dem"]});var uf=Uint8Array,Pw=Uint16Array,qre=Int32Array,Lk=new uf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fk=new uf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hre=new uf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kk=function(h,s){for(var u=new Pw(31),f=0;f<31;++f)u[f]=s+=1<<h[f-1];var g=new qre(u[30]);for(f=1;f<30;++f)for(var m=u[f];m<u[f+1];++m)g[m]=m-u[f]<<5|f;return{b:u,r:g}},Uk=kk(Lk,2),Bk=Uk.b,$re=Uk.r;Bk[28]=258,$re[258]=28;for(var Kre=kk(Fk,0).b,jk=new Pw(32768),Do=0;Do<32768;++Do){var M0=(43690&Do)>>1|(21845&Do)<<1;jk[Do]=((65280&(M0=(61680&(M0=(52428&M0)>>2|(13107&M0)<<2))>>4|(3855&M0)<<4))>>8|(255&M0)<<8)>>1}var Ew=function(h,s,u){for(var f=h.length,g=0,m=new Pw(s);g<f;++g)h[g]&&++m[h[g]-1];var _,b=new Pw(s);for(g=1;g<s;++g)b[g]=b[g-1]+m[g-1]<<1;_=new Pw(1<<s);var O=15-s;for(g=0;g<f;++g)if(h[g])for(var D=g<<4|h[g],C=s-h[g],V=b[h[g]-1]++<<C,L=V|(1<<C)-1;V<=L;++V)_[jk[V]>>O]=D;return _},Nw=new uf(288);for(Do=0;Do<144;++Do)Nw[Do]=8;for(Do=144;Do<256;++Do)Nw[Do]=9;for(Do=256;Do<280;++Do)Nw[Do]=7;for(Do=280;Do<288;++Do)Nw[Do]=8;var Gk=new uf(32);for(Do=0;Do<32;++Do)Gk[Do]=5;var Wre=Ew(Nw,9),Yre=Ew(Gk,5),XE=function(h){for(var s=h[0],u=1;u<h.length;++u)h[u]>s&&(s=h[u]);return s},Op=function(h,s,u){var f=s/8|0;return(h[f]|h[f+1]<<8)>>(7&s)&u},JE=function(h,s){var u=s/8|0;return(h[u]|h[u+1]<<8|h[u+2]<<16)>>(7&s)},Xre=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vp=function(h,s,u){var f=new Error(s||Xre[h]);if(f.code=h,Error.captureStackTrace&&Error.captureStackTrace(f,Vp),!u)throw f;return f},Jre=new uf(0),Qre=typeof TextDecoder<"u"&&new TextDecoder;try{Qre.decode(Jre,{stream:!0})}catch{}const ene={gzip_data:"gzip"};class $f extends Error{constructor(s){super(s),this.name="MRTError"}}const tne={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},Zk={uint32:1,uint16:2,uint8:4},ane={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let QE;class OS{constructor(s=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=s}getLayer(s){const u=this.layers[s];if(!u)throw new $f(`Layer '${s}' not found`);return u}getHeaderLength(s){const u=new Uint8Array(s),f=new DataView(s);if(u[0]!==13)throw new $f("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(s){const u=new Uint8Array(s),f=this.getHeaderLength(s);if(u.length<f)throw new $f(`Expected header with length >= ${f} but got buffer of length ${u.length}`);const g=function(m,_){return m.readFields(Dre,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new QE(u.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new $f(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const m of g.layers)this.layers[m.name]=new qk(m,{cacheSize:this._cacheSize});return this}createDecodingTask(s){const u=[],f=this.getLayer(s.layerName);for(let g of s.blockIndices){const m=f.dataIndex[g],_=m.firstByte-s.firstByte,b=m.lastByte-s.firstByte;if(f._blocksInProgress.has(g))continue;const O={layerName:f.name,firstByte:_,lastByte:b,pixelFormat:f.pixelFormat,blockIndex:g,blockShape:[m.bands.length].concat(f.bandShape),buffer:f.buffer,codec:m.codec.codec,filters:m.filters.map(D=>D.filter)};f._blocksInProgress.add(g),u.push(O)}return new Hk(u,()=>{u.forEach(g=>f._blocksInProgress.delete(g.blockIndex))},(g,m)=>{if(u.forEach(_=>f._blocksInProgress.delete(_.blockIndex)),g)throw g;m.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class qk{constructor({version:s,name:u,units:f,tileSize:g,pixelFormat:m,buffer:_,dataIndex:b},O){if(this.version=s,this.version!==1)throw new $f(`Cannot parse raster layer encoded with MRT version ${s}`);this.name=u,this.units=f,this.tileSize=g,this.buffer=_,this.pixelFormat=tne[m],this.dataIndex=b,this.bandShape=[g+2*_,g+2*_,Zk[this.pixelFormat]],this._decodedBlocks=new ES(O?O.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return Zk[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:s})=>s).flat()}processDecodedData(s){const u=s.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,s.data)}getBlockForBand(s){let u=0;switch(typeof s){case"string":for(const[f,g]of this.dataIndex.entries()){for(const[m,_]of g.bands.entries())if(_===s)return{bandIndex:u+m,blockIndex:f,blockBandIndex:m};u+=g.bands.length}break;case"number":for(const[f,g]of this.dataIndex.entries()){if(s>=u&&s<u+g.bands.length)return{bandIndex:s,blockIndex:f,blockBandIndex:s-u};u+=g.bands.length}break;default:throw new $f(`Invalid band \`${JSON.stringify(s)}\`. Expected string or integer.`)}throw new $f(`Band not found: ${JSON.stringify(s)}`)}getDataRange(s){let u=1/0,f=-1/0;const g=[],m=new Set;for(const _ of s){const{blockIndex:b}=this.getBlockForBand(_);if(b<0)throw new $f(`Invalid band: ${JSON.stringify(_)}`);const O=this.dataIndex[b];g.includes(b)||g.push(b),m.add(b),u=Math.min(u,O.firstByte),f=Math.max(f,O.lastByte)}if(m.size>this.cacheSize)throw new $f(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:f,blockIndices:g}}hasBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0}hasDataForBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(s){const{blockIndex:u,blockBandIndex:f}=this.getBlockForBand(s),g=this._decodedBlocks.get(u.toString());if(!g)throw new $f(`Data for band ${JSON.stringify(s)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],_=this.bandShape.reduce((D,C)=>D*C,1),b=f*_,O=g.subarray(b,b+_);return{data:O,bytes:new Uint8Array(O.buffer).subarray(O.byteOffset,O.byteOffset+O.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}OS.setPbf=function(h){QE=h};class Hk{constructor(s,u,f){this.tasks=s,this._onCancel=u,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(s,u){this._finalized||(this._onComplete(s,u),this._finalized=!0)}}OS.performDecoding=function(h,s){const u=new Uint8Array(h);return Promise.all(s.tasks.map(f=>{const{layerName:g,firstByte:m,lastByte:_,pixelFormat:b,blockShape:O,blockIndex:D,filters:C,codec:V}=f,L=u.subarray(m,_+1),z=new Uint32Array(O[0]*O[1]*O[2]);let M;if(V!=="gzip_data")throw new $f(`Unhandled codec: ${V}`);return M=function(j,J){if(!globalThis.DecompressionStream&&J==="gzip_data")return Promise.resolve(((se=function(Ve){Ve[0]==31&&Ve[1]==139&&Ve[2]==8||Vp(6,"invalid gzip data");var et=Ve[3],Ye=10;4&et&&(Ye+=2+(Ve[10]|Ve[11]<<8));for(var Xe=(et>>3&1)+(et>>4&1);Xe>0;Xe-=!Ve[Ye++]);return Ye+(2&et)}(he=j))+8>he.length&&Vp(6,"invalid gzip data"),function(Ve,et,Ye,Xe){var gt=Ve.length;if(!gt||et.f&&!et.l)return Ye||new uf(0);var tt=!Ye,_t=tt||et.i!=2,xt=et.i;tt&&(Ye=new uf(3*gt));var Ct,Mt,Ot=function(Ry){var Ty=Ye.length;if(Ry>Ty){var JA=new uf(Math.max(2*Ty,Ry));JA.set(Ye),Ye=JA}},jt=et.f||0,Ft=et.p||0,$t=et.b||0,_a=et.l,ya=et.d,Qa=et.m,Na=et.n,Ma=8*gt;do{if(!_a){jt=Op(Ve,Ft,1);var Ra=Op(Ve,Ft+1,3);if(Ft+=3,!Ra){var Sr=Ve[(Gr=4+((Ft+7)/8|0))-4]|Ve[Gr-3]<<8,Xa=Gr+Sr;if(Xa>gt){xt&&Vp(0);break}_t&&Ot($t+Sr),Ye.set(Ve.subarray(Gr,Xa),$t),et.b=$t+=Sr,et.p=Ft=8*Xa,et.f=jt;continue}if(Ra==1)_a=Wre,ya=Yre,Qa=9,Na=5;else if(Ra==2){var hr=Op(Ve,Ft,31)+257,Ur=Op(Ve,Ft+10,15)+4,ln=hr+Op(Ve,Ft+5,31)+1;Ft+=14;for(var $r=new uf(ln),_n=new uf(19),on=0;on<Ur;++on)_n[Hre[on]]=Op(Ve,Ft+3*on,7);Ft+=3*Ur;var En=XE(_n),Jn=(1<<En)-1,Fi=Ew(_n,En);for(on=0;on<ln;){var Gr,In=Fi[Op(Ve,Ft,Jn)];if(Ft+=15&In,(Gr=In>>4)<16)$r[on++]=Gr;else{var is=0,ms=0;for(Gr==16?(ms=3+Op(Ve,Ft,3),Ft+=2,is=$r[on-1]):Gr==17?(ms=3+Op(Ve,Ft,7),Ft+=3):Gr==18&&(ms=11+Op(Ve,Ft,127),Ft+=7);ms--;)$r[on++]=is}}var bs=$r.subarray(0,hr),ks=$r.subarray(hr);Qa=XE(bs),Na=XE(ks),_a=Ew(bs,Qa),ya=Ew(ks,Na)}else Vp(1);if(Ft>Ma){xt&&Vp(0);break}}_t&&Ot($t+131072);for(var Oi=(1<<Qa)-1,ml=(1<<Na)-1,Dc=Ft;;Dc=Ft){var So=(is=_a[JE(Ve,Ft)&Oi])>>4;if((Ft+=15&is)>Ma){xt&&Vp(0);break}if(is||Vp(2),So<256)Ye[$t++]=So;else{if(So==256){Dc=Ft,_a=null;break}var Mo=So-254;So>264&&(Mo=Op(Ve,Ft,(1<<(cf=Lk[on=So-257]))-1)+Bk[on],Ft+=cf);var Gu=ya[JE(Ve,Ft)&ml],ql=Gu>>4;if(Gu||Vp(3),Ft+=15&Gu,ks=Kre[ql],ql>3){var cf=Fk[ql];ks+=JE(Ve,Ft)&(1<<cf)-1,Ft+=cf}if(Ft>Ma){xt&&Vp(0);break}_t&&Ot($t+131072);var wy=$t+Mo;if($t<ks){var Kf=0-ks,Dp=Math.min(ks,wy);for(Kf+$t<0&&Vp(3);$t<Dp;++$t)Ye[$t]=(void 0)[Kf+$t]}for(;$t<wy;++$t)Ye[$t]=Ye[$t-ks]}}et.l=_a,et.p=Dc,et.b=$t,et.f=jt,_a&&(jt=1,et.m=Qa,et.d=ya,et.n=Na)}while(!jt);return $t!=Ye.length&&tt?(Ct=Ye,((Mt=$t)==null||Mt>Ct.length)&&(Mt=Ct.length),new uf(Ct.subarray(0,Mt))):Ye.subarray(0,$t)}(he.subarray(se,-8),{i:2},new uf(((te=he)[(fe=te.length)-4]|te[fe-3]<<8|te[fe-2]<<16|te[fe-1]<<24)>>>0))));var te,fe,he,se;const ve=ene[J];if(!ve)throw new Error(`Unhandled codec: ${J}`);const Ce=new globalThis.DecompressionStream(ve);return new Response(new Blob([j]).stream().pipeThrough(Ce)).arrayBuffer().then(Ve=>new Uint8Array(Ve))}(L,V).then(j=>(function(J,te){J.readFields(Ure,te)}(new QE(j),z),new ane[b](z.buffer))),M.then(j=>{for(let J=C.length-1;J>=0;J--)switch(C[J]){case"delta_filter":jre(j,O);break;case"zigzag_filter":Gre(j);break;case"bitshuffle_filter":Zre(j,b);break;default:throw new $f(`Unhandled filter "${C[J]}"`)}return{layerName:g,blockIndex:D,data:j}}).catch(j=>{throw j})}))},Pt(Hk,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Pt(OS,"MapboxRasterTile"),Pt(qk,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let Ow,eN,zp,I0,tN,L0=null;function $k(){return oi()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:eN||xe.DRACO_URL}function Kk(){if(oi()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(I0)return I0;const h=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return I0=WebAssembly.validate(h)?xe.MESHOPT_SIMD_URL:xe.MESHOPT_URL,I0}const VS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},rne={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Vw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function Wk(h,s,u){const f=u.json.bufferViews.length,g=u.buffers.length;s.bufferView=f,u.json.bufferViews[f]={buffer:g,byteLength:h.byteLength},u.buffers[g]=h}const aN="KHR_draco_mesh_compression";function nne(h,s){const u=h.extensions&&h.extensions[aN];if(!u)return;const f=new zp.Decoder,g=Qk(s,u.bufferView),m=new zp.Mesh;if(!f.DecodeArrayToMesh(g,g.byteLength,m))throw new Error("Failed to decode Draco mesh");const _=s.json.accessors[h.indices],b=VS[_.componentType],O=_.count*b.BYTES_PER_ELEMENT,D=zp._malloc(O);b===Uint16Array?f.GetTrianglesUInt16Array(m,O,D):f.GetTrianglesUInt32Array(m,O,D),Wk(zp.memory.buffer.slice(D,D+O),_,s),zp._free(D);for(const C of Object.keys(u.attributes)){const V=f.GetAttributeByUniqueId(m,u.attributes[C]),L=s.json.accessors[h.attributes[C]],z=rne[L.componentType],M=L.count*Vw[L.type]*VS[L.componentType].BYTES_PER_ELEMENT,j=zp._malloc(M);f.GetAttributeDataArrayForAllPoints(m,V,zp[z],M,j),Wk(zp.memory.buffer.slice(j,j+M),L,s),zp._free(j)}f.destroy(),m.destroy(),delete h.extensions[aN]}const zS="EXT_meshopt_compression";function ine(h,s){if(!h.extensions||!h.extensions[zS])return;const u=h.extensions[zS],f=new Uint8Array(s.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),g=new Uint8Array(u.count*u.byteStride);tN.decodeGltfBuffer(g,u.count,u.byteStride,f,u.mode,u.filter),h.buffer=s.buffers.length,h.byteOffset=0,s.buffers[h.buffer]=g.buffer,delete h.extensions[zS]}const Yk=1179937895,Xk=new TextDecoder("utf8");function Jk(h,s){return new URL(h,s).href}function sne(h,s,u,f){return fetch(Jk(h.uri,f)).then(g=>g.arrayBuffer()).then(g=>{s.buffers[u]=g})}function Qk(h,s){const u=h.json.bufferViews[s];return new Uint8Array(h.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function one(h,s,u,f){if(h.uri){const g=Jk(h.uri,f);return fetch(g).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{s.images[u]=m})}if(h.bufferView!==void 0){const g=Qk(s,h.bufferView),m=new Blob([g],{type:h.mimeType});return createImageBitmap(m).then(_=>{s.images[u]=_})}}function e6(h,s=0,u){const f={json:null,images:[],buffers:[]};if(new Uint32Array(h,s,1)[0]===Yk){const C=new Uint32Array(h,s);let V=2;const L=(C[V++]>>2)-3,z=C[V++]>>2;if(V++,f.json=JSON.parse(Xk.decode(C.subarray(V,V+z))),V+=z,V<L){const M=C[V++];V++;const j=s+(V<<2);f.buffers[0]=h.slice(j,j+M)}}else f.json=JSON.parse(Xk.decode(new Uint8Array(h,s)));const{buffers:g,images:m,meshes:_,extensionsUsed:b,bufferViews:O}=f.json;let D=Promise.resolve();if(g){const C=[];for(let V=0;V<g.length;V++){const L=g[V];L.uri?C.push(sne(L,f,V,u)):f.buffers[V]||(f.buffers[V]=null)}D=Promise.all(C)}return D.then(()=>{const C=[],V=b&&b.includes(aN),L=b&&b.includes(zS);if(V&&C.push(function(){if(!zp)return Ow??(Ow=function(z){let M,j=null;function J(){M=new Uint8Array(j.buffer)}function te(){throw new Error("Unexpected Draco error.")}const fe={a:{a:te,d:function(he,se,ve){return M.copyWithin(he,se,se+ve)},c:function(he){const se=M.length,ve=Math.max(he>>>0,Math.ceil(1.2*se)),Ce=Math.ceil((ve-se)/65536);try{return j.grow(Ce),J(),!0}catch{return!1}},b:te}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(z,fe):z.then(he=>he.arrayBuffer()).then(he=>WebAssembly.instantiate(he,fe))).then(he=>{const{Rb:se,Qb:ve,P:Ce,T:Ve,X:et,Ja:Ye,La:Xe,Qa:gt,Va:tt,Wa:_t,eb:xt,jb:Ct,f:Mt,e:Ot,yb:jt,zb:Ft,Ab:$t,Bb:_a,Db:ya,Gb:Qa}=he.instance.exports;j=Ot;const Na=(()=>{let Ma=0,Ra=0,Sr=0,Xa=0;return hr=>{Sr&&(se(Xa),se(Ma),Ra+=Sr,Sr=Ma=0),Ma||(Ra+=128,Ma=ve(Ra));const Ur=hr.length+7&-8;let ln=Ma;Ur>=Ra&&(Sr=Ur,ln=Xa=ve(Ur));for(let $r=0;$r<hr.length;$r++)M[ln+$r]=hr[$r];return ln}})();return J(),Mt(),{memory:Ot,_free:se,_malloc:ve,Mesh:class{constructor(){this.ptr=Ce()}destroy(){Ve(this.ptr)}},Decoder:class{constructor(){this.ptr=Ye()}destroy(){Ct(this.ptr)}DecodeArrayToMesh(Ma,Ra,Sr){const Xa=Na(Ma),hr=Xe(this.ptr,Xa,Ra,Sr.ptr);return!!et(hr)}GetAttributeByUniqueId(Ma,Ra){return{ptr:gt(this.ptr,Ma.ptr,Ra)}}GetTrianglesUInt16Array(Ma,Ra,Sr){tt(this.ptr,Ma.ptr,Ra,Sr)}GetTrianglesUInt32Array(Ma,Ra,Sr){_t(this.ptr,Ma.ptr,Ra,Sr)}GetAttributeDataArrayForAllPoints(Ma,Ra,Sr,Xa,hr){xt(this.ptr,Ma.ptr,Ra.ptr,Sr,Xa,hr)}},DT_INT8:jt(),DT_UINT8:Ft(),DT_INT16:$t(),DT_UINT16:_a(),DT_UINT32:ya(),DT_FLOAT32:Qa()}})}(fetch($k())),Ow.then(z=>{zp=z,Ow=void 0}))}()),L&&C.push(function(){if(tN)return;const z=function(M){let j;const J=WebAssembly.instantiateStreaming(M,{}).then(he=>{j=he.instance,j.exports.__wasm_call_ctors()}),te={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},fe={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:J,supported:!0,decodeGltfBuffer(he,se,ve,Ce,Ve,et){(function(Ye,Xe,gt,tt,_t,xt,Ct){const Mt=Ye.exports.sbrk,Ot=tt+3&-4,jt=Mt(Ot*_t),Ft=Mt(xt.length),$t=new Uint8Array(Ye.exports.memory.buffer);$t.set(xt,Ft);const _a=Xe(jt,tt,_t,Ft,xt.length);if(_a===0&&Ct&&Ct(jt,Ot,_t),gt.set($t.subarray(jt,jt+tt*_t)),Mt(jt-Mt(0)),_a!==0)throw new Error(`Malformed buffer data: ${_a}`)})(j,j.exports[fe[Ve]],he,se,ve,Ce,j.exports[te[et]])}}}(fetch(Kk()));return z.ready.then(()=>{tN=z})}()),m)for(let z=0;z<m.length;z++)C.push(one(m[z],f,z,u));return(C.length?Promise.all(C):Promise.resolve()).then(()=>{if(V&&_)for(const{primitives:z}of _)for(const M of z)nne(M,f);if(L&&_&&O)for(const z of O)ine(z,f);return f})})}function XA(h,s){const u=h.json.bufferViews[s.bufferView],f=VS[s.componentType];return new f(h.buffers[u.buffer],(s.byteOffset||0)+(u.byteOffset||0),s.count*(u.byteStride&&u.byteStride!==Vw[s.type]*f.BYTES_PER_ELEMENT?u.byteStride/f.BYTES_PER_ELEMENT:Vw[s.type]))}function rN(h,s,u,f){const g=VS[s.componentType],m=function(C){switch(C){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),_=h.json.bufferViews[s.bufferView],b=_.byteStride?_.byteStride/g.BYTES_PER_ELEMENT:Vw[s.type],O=u.float32,D=O.length/u.capacity;for(let C=0,V=0;C<s.count*b;C+=b,V+=D)for(let L=0;L<D;L++)O[V+L]=f[C+L]*m;u._trim()}function lne(h,s,u){const f=h.indices,g=h.attributes,m={};m.indexArray=new Ls;const _=s.json.accessors[f],b=_.count/3;m.indexArray.reserve(b);const O=XA(s,_);for(let L=0;L<b;L++)m.indexArray.emplaceBack(O[3*L],O[3*L+1],O[3*L+2]);m.indexArray._trim(),m.vertexArray=new Vo;const D=s.json.accessors[g.POSITION];m.vertexArray.reserve(D.count);const C=XA(s,D);for(let L=0;L<D.count;L++)m.vertexArray.emplaceBack(C[3*L],C[3*L+1],C[3*L+2]);if(m.vertexArray._trim(),m.aabb=new rr(D.min,D.max),m.centroid=function(L,z){const M=[0,0,0],j=L.length;if(j>0){for(let J=0;J<j;J++){const te=3*L[J];M[0]+=z[te],M[1]+=z[te+1],M[2]+=z[te+2]}M[0]/=j,M[1]/=j,M[2]/=j}return M}(O,C),g.COLOR_0!==void 0){const L=s.json.accessors[g.COLOR_0],z=Vw[L.type],M=XA(s,L);m.colorArray=z===3?new Vo:new sd,m.colorArray.resize(L.count),rN(s,L,m.colorArray,M)}if(g.NORMAL!==void 0){m.normalArray=new Vo;const L=s.json.accessors[g.NORMAL];m.normalArray.resize(L.count);const z=XA(s,L);rN(s,L,m.normalArray,z)}if(g.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new af;const L=s.json.accessors[g.TEXCOORD_0];m.texcoordArray.resize(L.count);const z=XA(s,L);rN(s,L,m.texcoordArray,z)}if(g._FEATURE_ID_RGBA4444!==void 0){const L=s.json.accessors[g._FEATURE_ID_RGBA4444];s.json.extensionsUsed&&s.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=XA(s,L))}g._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(XA(s,s.json.accessors[g._FEATURE_RGBA4444]).buffer));const V=h.material;return m.material=function(L,z){const{emissiveFactor:M=[0,0,0],alphaMode:j="OPAQUE",alphaCutoff:J=.5,normalTexture:te,occlusionTexture:fe,emissiveTexture:he,doubleSided:se}=L,{baseColorFactor:ve=[1,1,1,1],metallicFactor:Ce=1,roughnessFactor:Ve=1,baseColorTexture:et,metallicRoughnessTexture:Ye}=L.pbrMetallicRoughness||{},Xe=fe?z[fe.index]:void 0;if(fe&&fe.extensions&&fe.extensions.KHR_texture_transform&&Xe){const gt=fe.extensions.KHR_texture_transform;Xe.offsetScale=[gt.offset[0],gt.offset[1],gt.scale[0],gt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new zn(...ve),metallicFactor:Ce,roughnessFactor:Ve,baseColorTexture:et?z[et.index]:void 0,metallicRoughnessTexture:Ye?z[Ye.index]:void 0},doubleSided:se,emissiveFactor:M,alphaMode:j,alphaCutoff:J,normalTexture:te?z[te.index]:void 0,occlusionTexture:Xe,emissionTexture:he?z[he.index]:void 0,defined:L.defined===void 0}}(V!==void 0?s.json.materials[V]:{defined:!1},u),m}function t6(h,s,u){const{matrix:f,rotation:g,translation:m,scale:_,mesh:b,extras:O,children:D}=h,C={};if(C.matrix=f||Ae.mat4.fromRotationTranslationScale([],g||[0,0,0,1],m||[0,0,0],_||[1,1,1]),b!==void 0){C.meshes=u[b];const V=C.anchor=[0,0];for(const L of C.meshes){const{min:z,max:M}=L.aabb;V[0]+=z[0]+M[0],V[1]+=z[1]+M[1]}V[0]=Math.floor(V[0]/C.meshes.length/2),V[1]=Math.floor(V[1]/C.meshes.length/2)}if(O&&(O.id&&(C.id=O.id),O.lights&&(C.lights=function(V){if(!V.length)return[];const L=function(te){const fe=atob(te),he=new Uint8Array(fe.length);for(let se=0;se<fe.length;se++)he[se]=fe.codePointAt(se);return he}(V),z=[],M=L.length/24,j=new Uint16Array(L.buffer),J=new Float32Array(L.buffer);for(let te=0;te<M;te++){const fe=j[2*te*6]/30,he=j[2*te*6+1]/30,se=j[2*te*6+10]/100,ve=J[6*te+1],Ce=J[6*te+2],Ve=J[6*te+3],et=J[6*te+4],Ye=Ve-ve,Xe=et-Ce,gt=Math.hypot(Ye,Xe);z.push({pos:[ve+.5*Ye,Ce+.5*Xe,he],normal:[Xe/gt,-Ye/gt,0],width:gt,height:fe,depth:se,points:[ve,Ce,Ve,et]})}return z}(O.lights))),D){const V=[];for(const L of D)V.push(t6(s.json.nodes[L],s,u));C.children=V}return C}function une(h){if(h.vertices.length===0||h.indices.length===0)return null;const s=new Z1(h.vertices,h.indices,8,256),[u,f]=[s.min.clone(),s.max.clone()];return{vertices:h.vertices,indices:h.indices,grid:s,min:u,max:f}}function cne(h){if(!h.extras||!h.extras.ground)return null;const s=h.extras.ground;if(!s||!Array.isArray(s)||s.length===0)return null;const u=s[0];if(!u||!Array.isArray(u)||u.length===0)return null;const f=[];for(const _ of u){if(!Array.isArray(_)||_.length!==2)continue;const b=_[0],O=_[1];typeof b=="number"&&typeof O=="number"&&f.push(new Nt(b,O))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let g=0;for(let _=0;_<f.length;_++){const b=f[_],O=f[(_+1)%f.length],D=f[(_+2)%f.length];g+=(b.x-O.x)*(D.y-O.y)-(D.x-O.x)*(b.y-O.y)}g>0&&f.reverse();const m=NA(f.flatMap(_=>[_.x,_.y]),[]);return m.length===0?null:{vertices:f,indices:m}}function dne(h,s){const u=[],f=[];let g=0;const m=[];for(const _ of h){g=u.length;const b=_.vertexArray.float32,O=_.indexArray.uint16;for(let D=0;D<_.vertexArray.length;D++)m[0]=b[3*D+0],m[1]=b[3*D+1],m[2]=b[3*D+2],Ae.vec3.transformMat4(m,m,s),u.push(new Nt(m[0],m[1]));for(let D=0;D<3*_.indexArray.length;D++)f.push(O[D]+g)}if(f.length%3!=0)return null;for(let _=0;_<f.length;_+=3){const b=u[f[_+0]],O=u[f[_+1]],D=u[f[_+2]];(b.x-O.x)*(D.y-O.y)-(D.x-O.x)*(b.y-O.y)>0&&([f[_+1],f[_+2]]=[f[_+2],f[_+1]])}return{vertices:u,indices:f}}function a6(h){const s=function(O,D){const C=[],V=WebGL2RenderingContext;if(O.json.textures)for(const L of O.json.textures){const z={magFilter:V.LINEAR,minFilter:V.NEAREST,wrapS:V.REPEAT,wrapT:V.REPEAT};L.sampler!==void 0&&Object.assign(z,O.json.samplers[L.sampler]),C.push({image:D[L.source],sampler:z,uploaded:!1})}return C}(h,h.images),u=function(O,D){const C=[];for(const V of O.json.meshes){const L=[];for(const z of V.primitives)L.push(lne(z,O,D));C.push(L)}return C}(h,s),{scenes:f,scene:g,nodes:m}=h.json,_=f?f[g||0].nodes:m,b=[];for(const O of _)b.push(t6(m[O],h,u));return function(O,D,C){const V={},L=new Set;for(let z=0;z<O.length;z++){const M=C[D[z]];if(!M.extras)continue;const j=M.extras["mapbox:footprint:version"],J=M.extras["mapbox:footprint:id"];(j||J)&&L.add(z),j==="1.0.0"&&J&&(V[J]=z)}for(let z=0;z<O.length;z++){if(L.has(z))continue;const M=O[z],j=C[D[z]];if(!j.extras)continue;let J=null;M.id in V&&(J=dne(O[V[M.id]].meshes,M.matrix)),J||(J=cne(j)),J&&(M.footprint=une(J))}if(L.size>0){const z=Array.from(L.values()).sort((M,j)=>M-j);for(let M=z.length-1;M>=0;M--)O.splice(z[M],1)}}(b,_,h.json.nodes),b}function hne(h){h.heightmap=new Float32Array(4096),h.heightmap.fill(-1);const s=h.vertexArray.float32,u=h.aabb.min[0]-1,f=h.aabb.min[1]-1,g=KA/(h.aabb.max[0]-u+2),m=KA/(h.aabb.max[1]-f+2);for(let _=0;_<s.length;_+=3){const b=s[_+2],O=(s[_+0]-u)*g|0,D=(s[_+1]-f)*m|0;b>h.heightmap[D*KA+O]&&(h.heightmap[D*KA+O]=b)}}function fne(h,s){const u={};u.indexArray=new Ls,u.indexArray.reserve(4*h.length),u.vertexArray=new Vo,u.vertexArray.reserve(10*h.length),u.colorArray=new sd,u.vertexArray.reserve(10*h.length);let f=0;for(const _ of h){const b=Math.min(10,Math.max(4,1.3*_.height))*s,O=[-_.normal[1],_.normal[0],0],D=Math.min(.29,.1*_.width/_.depth),C=_.width-2*_.depth*s*(D+.01),V=Ae.vec3.scaleAndAdd([],_.pos,O,C/2),L=Ae.vec3.scaleAndAdd([],_.pos,O,-C/2),z=[V[0],V[1],V[2]+_.height],M=[L[0],L[1],L[2]+_.height],j=Ae.vec3.scaleAndAdd([],_.normal,O,D);Ae.vec3.scale(j,j,b);const J=Ae.vec3.scaleAndAdd([],_.normal,O,-D);Ae.vec3.scale(J,J,b),Ae.vec3.add(j,V,j),Ae.vec3.add(J,L,J),V[2]+=.1,L[2]+=.1,u.vertexArray.emplaceBack(j[0],j[1],j[2]),u.vertexArray.emplaceBack(J[0],J[1],J[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(L[0],L[1],L[2]),u.vertexArray.emplaceBack(z[0],z[1],z[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(L[0],L[1],L[2]),u.vertexArray.emplaceBack(j[0],j[1],j[2]),u.vertexArray.emplaceBack(J[0],J[1],J[2]);const te=C/b/2;u.colorArray.emplaceBack(-te-D,-1,te,.8),u.colorArray.emplaceBack(te+D,-1,te,.8),u.colorArray.emplaceBack(-te,0,te,1.3),u.colorArray.emplaceBack(te,0,te,1.3),u.colorArray.emplaceBack(te+D,-.8,te,.7),u.colorArray.emplaceBack(te+D,-.8,te,.7),u.colorArray.emplaceBack(0,0,te,1.3),u.colorArray.emplaceBack(0,0,te,1.3),u.colorArray.emplaceBack(te+D,-1.2,te,.8),u.colorArray.emplaceBack(te+D,-1.2,te,.8),u.indexArray.emplaceBack(6+f,4+f,8+f),u.indexArray.emplaceBack(7+f,9+f,5+f),u.indexArray.emplaceBack(0+f,1+f,2+f),u.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const g={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=zn.white,g.pbrMetallicRoughness=m,u.material=g,u.aabb=new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class r6{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){const f=s[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const pne=["id","tile","layer","source","sourceLayer","state"];class F0{constructor(s,u,f,g,m){this.type="Feature",this._vectorTileFeature=s,this._z=u,this._x=f,this._y=g,this.properties=s.properties,this.id=m}clone(){const s=new F0(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(s.state=Object.assign({},this.state)),this.layer&&(s.layer=Object.assign({},this.layer)),this.source&&(s.source=this.source),this.sourceLayer&&(s.sourceLayer=this.sourceLayer),s}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of pne)this[u]!==void 0&&(s[u]=this[u]);return s}}class n6{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new St(Da,16,0),this.featureIndexArray=new Tl,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(s,u,f,g,m,_=0,b=0){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,m,_);const D=this.grid;for(let C=0;C<u.length;C++){const V=u[C],L=[1/0,1/0,-1/0,-1/0];for(let z=0;z<V.length;z++){const M=V[z];L[0]=Math.min(L[0],M.x),L[1]=Math.min(L[1],M.y),L[2]=Math.max(L[2],M.x),L[3]=Math.max(L[3],M.y)}b!==0&&(L[0]-=b,L[1]-=b,L[2]+=b,L[3]+=b),L[0]<Da&&L[1]<Da&&L[2]>=0&&L[3]>=0&&D.insert(O,L[0],L[1],L[2],L[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Lh.VectorTile(new gn(this.rawTileData)).layers,this.sourceLayerCoder=new r6(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,u){const{tilespaceGeometry:f,transform:g,tileTransform:m,pixelPosMatrix:_,availableImages:b}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const O=f.bufferedTilespaceBounds,D=this.grid.query(O.min.x,O.min.y,O.max.x,O.max.y,(z,M,j,J)=>lt(f.bufferedTilespaceGeometry,z,M,j,J));D.sort(mne);let C=null;g.elevation&&D.length>0&&(C=O0.create(g.elevation,this.tileID));const V={};let L;for(let z=0;z<D.length;z++){const M=D[z];if(M===L)continue;L=M;const j=this.featureIndexArray.get(M);let J=null;this.is3DTile?this.loadMatchingModelFeature(V,j,s,f,g):this.loadMatchingFeature(V,j,s,b,(te,fe,he,se=0)=>(J||(J=K(te,this.tileID.canonical,m)),fe.queryIntersectsFeature(f,te,he,J,this.z,g,_,C,se)))}return V}loadMatchingFeature(s,u,f,g,m){const{featureIndex:_,bucketIndex:b,sourceLayerIndex:O,layoutVertexArrayOffset:D}=u,C=this.bucketLayerIDs[b],V=f.layers,L=Object.keys(V);if(L.length&&!function(te,fe){for(let he=0;he<te.length;he++)if(fe.indexOf(te[he])>=0)return!0;return!1}(L,C))return;const z=f.sourceCache,M=this.sourceLayerCoder.decode(O),j=this.vtLayers[M].feature(_),J=this.getId(j,M);for(let te=0;te<C.length;te++){const fe=C[te];if(!V[fe])continue;const{styleLayer:he,targets:se}=V[fe];let ve={};J!==void 0&&(ve=z.getFeatureState(he.sourceLayer,J));const Ce=!m||m(j,he,ve,D);if(!Ce)continue;const Ve=new F0(j,this.z,this.x,this.y,J);Ve.tile=this.tileID.canonical,Ve.state=ve;let et=this.serializedLayersCache.get(fe);et||(et=he.serialize(),et.id=fe,this.serializedLayersCache.set(fe,et)),Ve.source=et.source,Ve.sourceLayer=et["source-layer"],Ve.layer=wr({},et),Ve.layer.paint=i6(et.paint,he.paint,j,ve,g),Ve.layer.layout=i6(et.layout,he.layout,j,ve,g);let Ye=!1;for(const Xe of se){this.updateFeatureProperties(Ve,Xe);const{filter:gt}=Xe;if(gt){if(j.properties=Ve.properties,gt.needGeometry){const tt=Y(j,!0);if(!gt.filter(new Pn(this.tileID.overscaledZ),tt,this.tileID.canonical))continue}else if(!gt.filter(new Pn(this.tileID.overscaledZ),j))continue}Ye=!0,Xe.targetId&&this.addFeatureVariant(Ve,Xe)}Ye&&this.appendToResult(s,fe,_,Ve,Ce)}}loadMatchingModelFeature(s,u,f,g,m){const _=this.bucketLayerIDs[0][0],b=f.layers;if(!b[_])return;const{styleLayer:O,targets:D}=b[_];if(O.type!=="model")return;const C=g.tile,V=u.featureIndex,L=C.getBucket(O);if(!(L&&L instanceof RS))return;const z=function(et,Ye,Xe,gt){const tt=et.getNodesInfo()[Ye];if(tt.hiddenByReplacement||!tt.node.meshes)return;let _t=Number.MAX_VALUE;const xt=tt.node,Ct=Xe.tile,Mt=gt.calculatePosMatrix(Ct.tileID.toUnwrapped(),gt.worldSize),Ot=tt.evaluatedScale;let jt=0;gt.elevation&&xt.elevation&&(jt=xt.elevation*gt.elevation.exaggeration()),Ae.mat4.translate(Mt,Mt,[(xt.anchor?xt.anchor[0]:0)*(Ot[0]-1),(xt.anchor?xt.anchor[1]:0)*(Ot[1]-1),jt]),Ae.mat4.scale(Mt,Mt,Ot);const Ft=Xe.queryGeometry,$t=Ft.isPointQuery()?Ft.screenBounds:Ft.screenGeometry,_a=function(Qa){const Na=Ae.mat4.multiply([],Mt,Qa.matrix);Ae.mat4.multiply(Na,gt.expandedFarZProjMatrix,Na);for(let Ma=0;Ma<Qa.meshes.length;++Ma){const Ra=Qa.meshes[Ma];if(Ma===Qa.lightMeshIndex)continue;const Sr=ak($t,gt,Na,Ra.aabb);Sr!=null&&(_t=Math.min(Sr,_t))}if(Qa.children)for(const Ma of Qa.children)_a(Ma)};if(_a(xt),_t===Number.MAX_VALUE)return;const ya=new Gn(0,0);return pk(Ct.tileID.canonical,ya,tt.node.anchor[0],tt.node.anchor[1]),{intersectionZ:_t,position:ya,feature:tt.feature}}(L,V,g,m);if(!z)return;const{z:M,x:j,y:J}=C.tileID.canonical,{feature:te,intersectionZ:fe,position:he}=z;let se={};te.id!==void 0&&(se=f.sourceCache.getFeatureState(O.sourceLayer,te.id));const ve=new F0({},M,j,J,te.id);ve.tile=this.tileID.canonical,ve.state=se,ve.properties=te.properties,ve.geometry={type:"Point",coordinates:[he.lng,he.lat]};let Ce=this.serializedLayersCache.get(_);Ce||(Ce=O.serialize(),Ce.id=_,this.serializedLayersCache.set(_,Ce)),ve.source=Ce.source,ve.sourceLayer=Ce["source-layer"],ve.layer=wr({},Ce);let Ve=!1;for(const et of D){this.updateFeatureProperties(ve,et);const{filter:Ye}=et;if(Ye){if(te.properties=ve.properties,Ye.needGeometry){if(!Ye.filter(new Pn(this.tileID.overscaledZ),te,this.tileID.canonical))continue}else if(!Ye.filter(new Pn(this.tileID.overscaledZ),te))continue}Ve=!0,et.targetId&&this.addFeatureVariant(ve,et)}Ve&&this.appendToResult(s,_,V,ve,fe)}updateFeatureProperties(s,u,f){if(u.properties){const g={};for(const m in u.properties){const _=u.properties[m].evaluate({zoom:this.z},s._vectorTileFeature,s.state,s.tile,f);_!=null&&(g[m]=_)}s.properties=g}}addFeatureVariant(s,u,f){const g={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(g.properties=s.properties),s.variants=s.variants||{},s.variants[u.targetId]=s.variants[u.targetId]||[],s.variants[u.targetId].push(g)}appendToResult(s,u,f,g,m){let _=s[u];_===void 0&&(_=s[u]=[]),_.push({featureIndex:f,feature:g,intersectionZ:m})}lookupSymbolFeatures(s,u,f,g,m){const _={};this.loadVTLayers();for(const b of s)this.loadMatchingFeature(_,{bucketIndex:u,sourceLayerIndex:f,featureIndex:b,layoutVertexArrayOffset:0},g,m);return _}loadFeature(s){const{featureIndex:u,sourceLayerIndex:f}=s;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),m=this.vtFeatures[g];if(m[u])return m[u];const _=this.vtLayers[g].feature(u);return m[u]=_,_}hasLayer(s){for(const u of this.bucketLayerIDs)for(const f of u)if(s===f)return!0;return!1}getId(s,u){let f=s.id;if(this.promoteId){const g=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(g!=null)if(Array.isArray(g)){if(!this.promoteIdExpression){const m=G(g);if(m.result!=="success"){const _=m.value.map(b=>`${b.key}: ${b.message}`).join(", ");return void Yr(`Failed to create expression for promoteId: ${_}`)}this.promoteIdExpression=m.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new Dd),f=this.promoteIdExpression.evaluate({zoom:0},s)}else f=s.properties[g];typeof f=="boolean"&&(f=Number(f))}return f}}function i6(h,s,u,f,g){return gr(h,(m,_)=>{const b=s instanceof Du?s.get(_):null;return b&&b.evaluate?b.evaluate(u,f,g):b})}function mne(h,s){return s-h}Pt(n6,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const s6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class nN{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(s,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const m=s6[15&f];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(s,2,1),[b]=new Uint32Array(s,4,1);return new nN(b,_,m,s)}constructor(s,u=64,f=Float64Array,g){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const m=s6.indexOf(this.ArrayType),_=2*s*this.ArrayType.BYTES_PER_ELEMENT,b=s*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+b+O,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+O),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+b+O,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=s,this.coords[this._pos++]=u,f}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return iN(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:b}=this,O=[0,m.length-1,0],D=[];for(;O.length;){const C=O.pop()||0,V=O.pop()||0,L=O.pop()||0;if(V-L<=b){for(let J=L;J<=V;J++){const te=_[2*J],fe=_[2*J+1];te>=s&&te<=f&&fe>=u&&fe<=g&&D.push(m[J])}continue}const z=L+V>>1,M=_[2*z],j=_[2*z+1];M>=s&&M<=f&&j>=u&&j<=g&&D.push(m[z]),(C===0?s<=M:u<=j)&&(O.push(L),O.push(z-1),O.push(1-C)),(C===0?f>=M:g>=j)&&(O.push(z+1),O.push(V),O.push(1-C))}return D}within(s,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:m,nodeSize:_}=this,b=[0,g.length-1,0],O=[],D=f*f;for(;b.length;){const C=b.pop()||0,V=b.pop()||0,L=b.pop()||0;if(V-L<=_){for(let J=L;J<=V;J++)l6(m[2*J],m[2*J+1],s,u)<=D&&O.push(g[J]);continue}const z=L+V>>1,M=m[2*z],j=m[2*z+1];l6(M,j,s,u)<=D&&O.push(g[z]),(C===0?s-f<=M:u-f<=j)&&(b.push(L),b.push(z-1),b.push(1-C)),(C===0?s+f>=M:u+f>=j)&&(b.push(z+1),b.push(V),b.push(1-C))}return O}}function iN(h,s,u,f,g,m){if(g-f<=u)return;const _=f+g>>1;o6(h,s,_,f,g,m),iN(h,s,u,f,_-1,1-m),iN(h,s,u,_+1,g,1-m)}function o6(h,s,u,f,g,m){for(;g>f;){if(g-f>600){const D=g-f+1,C=u-f+1,V=Math.log(D),L=.5*Math.exp(2*V/3),z=.5*Math.sqrt(V*L*(D-L)/D)*(C-D/2<0?-1:1);o6(h,s,u,Math.max(f,Math.floor(u-C*L/D+z)),Math.min(g,Math.floor(u+(D-C)*L/D+z)),m)}const _=s[2*u+m];let b=f,O=g;for(zw(h,s,f,u),s[2*g+m]>_&&zw(h,s,f,g);b<O;){for(zw(h,s,b,O),b++,O--;s[2*b+m]<_;)b++;for(;s[2*O+m]>_;)O--}s[2*f+m]===_?zw(h,s,f,O):(O++,zw(h,s,O,g)),O<=u&&(f=O+1),u<=O&&(g=O-1)}}function zw(h,s,u,f){sN(h,u,f),sN(s,2*u,2*f),sN(s,2*u+1,2*f+1)}function sN(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}function l6(h,s,u,f){const g=h-u,m=s-f;return g*g+m*m}n.$=Xs,n.A=Zo,n.B=Yu,n.C=rd,n.D=V0,n.E=eu,n.F=2,n.G=mw,n.H=mF,n.I=qo,n.J=class extends _S{},n.K=Su,n.L=Nn,n.M=lm,n.N=Qc,n.O=Jc,n.P=Nt,n.Q=ec,n.R=Ns,n.S=Qh,n.T=LE,n.U=Th,n.V=_S,n.W=Me,n.X=G,n.Y=As,n.Z=li,n._=Ko,n.a=function(h){return xe.API_CDN_URL_REGEX.test(h)},n.a$=Y,n.a0=rl,n.a1=Ch,n.a2=cp,n.a3=Fl,n.a4=function(h){const s=h.value;let u=[];if(!s)return u;const f=Su(s);return f!=="string"?(u=u.concat([new _S(h.key,s,`string expected, "${f}" found`)]),u):(nk(s,!0)||(u=u.concat([new _S(h.key,s,`invalid url "${s}"`)])),u)},n.a5=qt,n.a6=Oo,n.a7=ji,n.a8=Pa,n.a9=class{constructor(h){this.specification=h}possiblyEvaluate(h,s){return gi(h.expression.evaluate(s))}interpolate(h,s,u){return{x:vr(h.x,s.x,u),y:vr(h.y,s.y,u),z:vr(h.z,s.z,u),azimuthal:vr(h.azimuthal,s.azimuthal,u),polar:vr(h.polar,s.polar,u)}}},n.aA=function(h,s){const u={};for(let f=0;f<s.length;f++){const g=s[f];g in h&&(u[g]=h[g])}return u},n.aB=nf,n.aC=Li,n.aD=class{constructor(h){this.entries={},this.scheduler=h}request(h,s,u,f){const g=this.entries[h]=this.entries[h]||{callbacks:[]};if(g.result){const[m,_]=g.result;return this.scheduler?this.scheduler.add(()=>{f(m,_)},s):f(m,_),()=>{}}return g.callbacks.push(f),g.cancel||(g.cancel=u((m,_)=>{g.result=[m,_];for(const b of g.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,_)},s):b(m,_);setTimeout(()=>delete this.entries[h],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(m=>m!==f),g.callbacks.length||(g.cancel(),delete this.entries[h]))}}},n.aE=function(h,s,u){const f=JSON.stringify(h.request);return h.data&&(this.deduped.entries[f]={result:[null,h.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:h.isSymbolTile,zoom:h.tileZoom},g=>{const m=Bi(h.request,(_,b,O,D)=>{_?g(_):b&&g(null,{vectorTile:u?void 0:new Lh.VectorTile(new gn(b)),rawData:b,cacheControl:O,expires:D})});return()=>{m.cancel(),g()}},s)},n.aF=function(h){Cn++,Cn>Ir&&(h.getActor().send("enforceCacheSizeLimit",br),Cn=0)},n.aG=function(h){return h<=1?1:Math.pow(2,Math.floor(Math.log(h)/Math.LN2))},n.aH=ga,n.aI=qF,n.aJ=XF,n.aK=ZF,n.aL=function(h,s){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){s(null,u)};for(let f=0;f<h.length;f++){const g=document.createElement("source");Jl(h[f])||(u.crossOrigin="Anonymous"),g.src=h[f],u.appendChild(g)}return{cancel:()=>{}}},n.aM=mS,n.aN=function(h){return fetch(h).then(s=>s.arrayBuffer()).then(s=>e6(s,0,h))},n.aO=a6,n.aP=class{constructor(h,s,u,f){this.id=h,this.position=s!=null?new Gn(s[0],s[1]):new Gn(0,0),this.orientation=u??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(h,s){if(Ae.mat4.multiply(h.matrix,s,h.matrix),h.meshes)for(const u of h.meshes){const f=rr.applyTransformFast(u.aabb,h.matrix);this.aabb.encapsulate(f)}if(h.children)for(const u of h.children)this._applyTransformations(u,h.matrix)}computeBoundsAndApplyParent(){const h=Ae.mat4.identity([]);for(const s of this.nodes)this._applyTransformations(s,h)}computeModelMatrix(h,s,u,f,g,m,_=!1){uk(this.matrix,this,h.transform,this.position,s,u,f,g,m,_)}upload(h){if(!this.uploaded){for(const s of this.nodes)jE(s,h);for(const s of this.nodes)wS(s);this.uploaded=!0}}destroy(){for(const h of this.nodes)GE(h)}},n.aQ=ja,n.aR=yw,n.aS=Uu,n.aT=Ei,n.aU=Lu,n.aV=Ls,n.aW=Oa,n.aX=cm,n.aY=fS,n.aZ=function(){fs.isLoading()||fs.isLoaded()||wo()!=="deferred"||Pi()},n.a_=Sh,n.aa=Pn,n.ab=ye,n.ac=o,n.ad=Ae,n.ae=Fr,n.af=Du,n.ag=Gl,n.ah=vr,n.ai=Da,n.aj=jc,n.ak=Ca,n.al=zn,n.am=class{constructor(h){this.specification=h}possiblyEvaluate(h,s){return function([u,f]){const g=gi([1,u,f]);return{x:g.x,y:g.y,z:g.z}}(h.expression.evaluate(s))}interpolate(h,s,u){return{x:vr(h.x,s.x,u),y:vr(h.y,s.y,u),z:vr(h.z,s.z,u)}}},n.an=function(h,s,u=0,f=!0){const g=new Nt(u,u),m=h.sub(g),_=s.add(g),b=[m,new Nt(_.x,m.y),_,new Nt(m.x,_.y)];return f&&b.push(m.clone()),b},n.ao=function(h,s){const u=[];for(let f=0;f<h.length;f++){const g=tn(f-1,-1,h.length-1),m=tn(f+1,-1,h.length-1),_=h[f],b=h[m],O=h[g].sub(_).unit(),D=b.sub(_).unit(),C=D.angleWithSep(O.x,O.y),V=O.add(D).unit().mult(-1*s/Math.sin(C/2));u.push(_.add(V))}return u},n.ap=NF,n.aq=lt,n.ar=function(h,s,u=0){return Ae.vec3.fromValues(((s.x-u)*h.scale-h.x)*Da,(s.y*h.scale-h.y)*Da,ty(s.z,s.y))},n.as=zr,n.at=JC,n.au=function(h){let s=1/0,u=1/0,f=-1/0,g=-1/0;for(const m of h)s=Math.min(s,m.x),u=Math.min(u,m.y),f=Math.max(f,m.x),g=Math.max(g,m.y);return{min:new Nt(s,u),max:new Nt(f,g)}},n.av=Sl,n.aw=ot,n.ax=A,n.ay=Ia,n.az=Cl,n.b=function(h){return xe.API_FONTS_REGEX.test(h)},n.b$=AS,n.b0=F0,n.b1=Cs,n.b2=Hf,n.b3=cy,n.b4=K,n.b5=Iu,n.b6=Yd,n.b7=Rr,n.b8=Gi,n.b9=NA,n.bA=GC,n.bB=xE,n.bC=TF,n.bD=CE,n.bE=nN,n.bF=tn,n.bG=mr,n.bH=Yo,n.bI=function(h,s,u){h[4*s+0]=u[0],h[4*s+1]=u[1],h[4*s+2]=u[2],h[4*s+3]=u[3]},n.bJ=ld,n.bK=od,n.bL=_p,n.bM=Ss,n.bN=Nc,n.bO=Gn,n.bP=MF,n.bQ=Xt,n.bR=Or,n.bS=QF,n.bT=ha,n.bU=Ro,n.bV=function(h,s,u,f,g,m,_,b,O){if(O.name==="globe")return Ro(h,s,new ha(u,f,g),!1);const D=yw({z:u,x:f,y:g},O);return new rr([(m+D.x/D.scale)*s,s*(D.y/D.scale),_],[(m+D.x2/D.scale)*s,s*(D.y2/D.scale),b])},n.bW=function(h,s,u){let f=0;for(let g=0;g<2;++g)h[g]>0&&(f+=(h[g]-0)*(h[g]-0)),s[g]<0&&(f+=(0-s[g])*(0-s[g]));return f},n.bX=Bu,n.bY=mm,n.bZ=function(h){const s=Ae.mat4.identity(new Float64Array(16));Ae.mat4.multiply(s,h.pixelMatrix,h.globeMatrix);const u=[0,Wo,0],f=[0,ic,0];return Ae.vec3.transformMat4(u,u,s),Ae.vec3.transformMat4(f,f,s),[u[0]>0&&u[0]<=h.width&&u[1]>0&&u[1]<=h.height&&!bl(h,new Gn(h.center.lat,90)),f[0]>0&&f[0]<=h.width&&f[1]>0&&f[1]<=h.height&&!bl(h,new Gn(h.center.lat,-90))]},n.b_=function(h,s){const{scale:u}=h.tileTransform,f=u*Da/(h.tileSize*Math.pow(2,s.zoom-h.tileID.overscaledZ+h.tileID.canonical.z));return Ae.mat2.scale(new Float32Array(4),s.inverseAdjustmentMatrix,[f,f])},n.ba=DE,n.bb=function(h,s){const u=Gl(s.zoom);if(u===0)return _s(h);const f=Vn(h),g=di(f),m=Sl(f.getWest())*s.worldSize,_=Sl(f.getEast())*s.worldSize,b=Li(f.getNorth())*s.worldSize,O=Li(f.getSouth())*s.worldSize,D=[m,b,0],C=[_,b,0],V=[m,O,0],L=[_,O,0],z=Ae.mat4.invert([],s.globeMatrix);return Ae.vec3.transformMat4(D,D,z),Ae.vec3.transformMat4(C,C,z),Ae.vec3.transformMat4(V,V,z),Ae.vec3.transformMat4(L,L,z),g[0]=co(g[0],V,u),g[1]=co(g[1],L,u),g[2]=co(g[2],C,u),g[3]=co(g[3],D,u),rr.fromPoints(g)},n.bc=Ni,n.bd=Bn,n.be=co,n.bf=$d,n.bg=qr,n.bh=OS,n.bi=gn,n.bj=Bi,n.bk=function(h,s){const u=[];for(const f in h)f in s||u.push(f);return u},n.bl=lr,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=Ht,n.bo=function(h,s){const{x:u,y:f}=h.point,g=hu(u,f,h.worldSize/h._pixelsPerMercatorPixel,0,0);return Ae.mat4.multiply(g,g,ps(_s(s)))},n.bp=sr,n.bq=ah,n.br=$a,n.bs=function(h,s,u,f,g){const m=5*s+2;h.float32[m+0]=u,h.float32[m+1]=f,h.float32[m+2]=g},n.bt=hS,n.bu=pF,n.bv=be,n.bw=Ge,n.bx=qf,n.by=rk,n.bz=jC,n.c=$e,n.c$=QC,n.c0=JF,n.c1=function(h){const s=JF(h,!0);return Ae.mat2.invert([],[s[0],s[1],s[4],s[5]])},n.c2=Mr,n.c3=function(h){const{x:s,y:u}=h.point,{lng:f,lat:g}=h._center;return hu(s,u,h.worldSize,f,g)},n.c4=za,n.c5=ka,n.c6=Dh,n.c7=function(h){const s=Math.round((h+45+360)%360/90)%4;return ar[s]},n.c8=45,n.c9=Sn,n.cA=If,n.cB=class extends Xd{constructor(h){super(h),this.current=Jd}set(h,s,u){if(this.fetchUniformLocation(h,s)){for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},n.cC=ur,n.cD=function(h,s,u){const f=Gl(u.zoom),g=h.style.map._antialias,m=h.terrain&&h.terrain.exaggeration()>0;return f===0&&!g&&!m},n.cE=function(h){const s=h.pixelsPerMeter,u=s/Yo(1,h.center.lat),f=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.translate(f,f,[h.point.x,h.point.y,0]),Ae.mat4.scale(f,f,[u,u,s]),Float32Array.from(f)},n.cF=Vn,n.cG=function(h){const s=Bu-5;h=Ia(h,-80.051129,s)/s*90;const u=Math.pow(Math.abs(Math.sin(Ca(h))),3);return Math.round(u*(Bf.length-1))},n.cH=function(h,s,u,f){const g=s.getNorth(),m=s.getSouth(),_=s.getWest(),b=s.getEast(),O=1<<h.z,D=b-_,C=g-m,V=D/Tp,L=-C/Bf[u],z=[0,V,0,L,0,0,g,_,0];if(h.z>0){const M=180/f;Ae.mat3.multiply(z,z,[M/D+1,0,0,0,M/C+1,0,-.5*M/V,.5*M/L,1])}return z[2]=O,z[5]=h.x,z[8]=h.y,z},n.cI=_s,n.cJ=function(h,s,u){const f=Ae.mat4.identity(new Float64Array(16)),g=(s/(1<<h)-.5)*Math.PI*2;return Ae.mat4.rotateY(f,u.globeMatrix,g),Float32Array.from(f)},n.cK=class{isDataAvailableAtPoint(h){const s=this._source();if(this.isUsingMockSource()||!s||h.y<0||h.y>1)return!1;const u=s.getSource().maxzoom,f=1<<u,g=Math.floor(h.x),m=Math.floor((h.x-g)*f),_=Math.floor(h.y*f),b=this.findDEMTileFor(new ga(u,g,u,m,_));return!(!b||!b.dem)}getAtPointOrZero(h,s=0){return this.getAtPoint(h,s)||0}getAtPoint(h,s,u=!0){if(this.isUsingMockSource())return null;s==null&&(s=null);const f=this._source();if(!f||h.y<0||h.y>1)return s;const g=f.getSource().maxzoom,m=1<<g,_=Math.floor(h.x),b=h.x-_,O=new ga(g,_,g,Math.floor(b*m),Math.floor(h.y*m)),D=this.findDEMTileFor(O);if(!D||!D.dem)return s;const C=D.dem,V=1<<D.tileID.canonical.z,L=(b*V-D.tileID.canonical.x)*C.dim,z=(h.y*V-D.tileID.canonical.y)*C.dim,M=Math.floor(L),j=Math.floor(z);return(u?this.exaggeration():1)*vr(vr(C.get(M,j),C.get(M,j+1),z-j),vr(C.get(M+1,j),C.get(M+1,j+1),z-j),L-M)}getAtTileOffset(h,s,u){const f=1<<h.canonical.z;return this.getAtPointOrZero(new o(h.wrap+(h.canonical.x+s/Da)/f,(h.canonical.y+u/Da)/f))}getAtTileOffsetFunc(h,s,u,f){return g=>{const m=this.getAtTileOffset(h,g.x,g.y),_=f.upVector(h.canonical,g.x,g.y),b=f.upVectorScale(h.canonical,s,u).metersToTile;return Ae.vec3.scale(_,_,m*b),_}}getForTilePoints(h,s,u,f){if(this.isUsingMockSource())return!1;const g=O0.create(this,h,f);return!!g&&(s.forEach(m=>{m[2]=this.exaggeration()*g.getElevationAt(m[0],m[1],u)}),!0)}getMinMaxForTile(h){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(h);if(!s||!s.dem)return null;const u=s.dem.tree,f=s.tileID,g=1<<h.canonical.z-f.canonical.z;let m=h.canonical.x/g-f.canonical.x,_=h.canonical.y/g-f.canonical.y,b=0;for(let O=0;O<h.canonical.z-f.canonical.z&&!u.leaves[b];O++){m*=2,_*=2;const D=2*Math.floor(_)+Math.floor(m);b=u.childOffsets[b]+D,m%=1,_%=1}return{min:this.exaggeration()*u.minimums[b],max:this.exaggeration()*u.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(h,s,u){throw new Error("Pure virtual method called.")}pointCoordinate(h){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(h){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const h=this.visibleDemTiles;if(h.length===0)return null;let s=!1,u=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const g of h){const m=this.getMinMaxForTile(g.tileID);m&&(u=Math.min(u,m.min),f=Math.max(f,m.max),s=!0)}return s?{min:u,max:f}:null}},n.cL=M1,n.cM=mn,n.cN=function(h,s){return[Math.pow(h[0],2.2)*s,Math.pow(h[1],2.2)*s,Math.pow(h[2],2.2)*s]},n.cO=Jo,n.cP=Zt,n.cQ=Rn,n.cR=256,n.cS=function(h,s){const u=[0,0,0],f=Ni(_s(s.canonical));return Ae.vec3.transformMat4(u,u,f),Ae.vec3.transformMat4(u,u,h),u},n.cT=h=>({u_camera_to_center_distance:new Ss(h),u_extrude_scale:new cg(h),u_device_pixel_ratio:new Ss(h),u_matrix:new ld(h),u_inv_rot_matrix:new ld(h),u_merc_center:new od(h),u_tile_id:new _p(h),u_zoom_transition:new Ss(h),u_up_dir:new _p(h),u_emissive_strength:new Ss(h)}),n.cU=h=>({u_matrix:new ld(h),u_pixels_to_tile_units:new cg(h),u_device_pixel_ratio:new Ss(h),u_width_scale:new Ss(h),u_floor_width_scale:new Ss(h),u_units_to_pixels:new od(h),u_dash_image:new Nc(h),u_gradient_image:new Nc(h),u_image_height:new Ss(h),u_texsize:new od(h),u_tile_units_to_pixels:new Ss(h),u_alpha_discard_threshold:new Ss(h),u_trim_offset:new od(h),u_trim_fade_range:new od(h),u_trim_color:new wp(h),u_emissive_strength:new Ss(h),u_zbias_factor:new Ss(h),u_tile_to_meter:new Ss(h)}),n.cV=h=>({u_matrix:new ld(h),u_texsize:new od(h),u_pixels_to_tile_units:new cg(h),u_device_pixel_ratio:new Ss(h),u_width_scale:new Ss(h),u_floor_width_scale:new Ss(h),u_image:new Nc(h),u_units_to_pixels:new od(h),u_tile_units_to_pixels:new Ss(h),u_alpha_discard_threshold:new Ss(h),u_trim_offset:new od(h),u_trim_fade_range:new od(h),u_trim_color:new wp(h),u_emissive_strength:new Ss(h),u_zbias_factor:new Ss(h),u_tile_to_meter:new Ss(h)}),n.cW=cu,n.cX=ce,n.cY=Ea,n.cZ=bp,n.c_=(h,s,u,f,g,m)=>{const _=h.transform,b=_.projection.name==="globe";let O;if(m.paint.get("circle-pitch-alignment")==="map")if(b){const C=Jo(_.zoom,s.canonical)*_._pixelsPerMercatorPixel;O=Float32Array.from([C,0,0,C])}else O=_.calculatePixelsToTileUnitsMatrix(u);else O=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const D={u_camera_to_center_distance:h.transform.getCameraToCenterDistance(_.projection),u_matrix:h.translatePosMatrix(s.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Kt.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:Zl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(b){D.u_inv_rot_matrix=f,D.u_merc_center=g,D.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],D.u_zoom_transition=Gl(_.zoom);const C=g[0]*Da,V=g[1]*Da;D.u_up_dir=_.projection.upVector(new ha(0,0,0),C,V)}return D},n.ca=Sp,n.cb=wp,n.cc=function(h,s,u){const f=Math.sqrt(h*h+s*s+u*u),g=f>0?Math.acos(u/f)*fr:0;let m=h!==0||s!==0?Math.atan2(-s,-h)*fr+90:0;return m<0&&(m+=360),[f,m,g]},n.cd=y,n.ce=rr,n.cf=gi,n.cg=function(h){return[Math.pow(h[0],1/2.2),Math.pow(h[1],1/2.2),Math.pow(h[2],1/2.2)]},n.ch=function(h,s){return h.readFields(hre,{icons:[]},s)},n.ci=function(h){return h({pluginStatus:Hn,pluginURL:xn}),$n.on("pluginStateChange",h),h},n.cj=TS,n.ck=x0,n.cl=SE,n.cm=pc,n.cn=vs,n.co=Fa,n.cp=mo,n.cq=an,n.cr=function(h){const s=h.indexOf(hp);return s>=0?h.slice(0,s):h},n.cs=function(h){return h.indexOf(hp)>=0},n.ct=function(h){const s=h.indexOf(hp);return s>=0?h.slice(s+1):""},n.cu=function(h){const s=[],u=h.id;return u===void 0&&s.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&s.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},n.cv=function(h,s,u,f){return h.type==="custom"?new Jae(h,s):new ure[h.type](h,s,u,f)},n.cw=Tn,n.cx=class extends F0{constructor(h,s){super(h._vectorTileFeature,h._z,h._x,h._y,h.id),h.state&&(this.state=Object.assign({},h.state)),this.target=s.target,this.namespace=s.namespace,s.properties&&(this.properties=s.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=h.source,this.sourceLayer=h.sourceLayer,this.layer=h.layer)}toJSON(){const h=super.toJSON();return h.target=this.target,h.namespace=this.namespace,h}},n.cy=$n,n.cz=al,n.d=function(h){return xe.API_TILEJSON_REGEX.test(h)},n.d$=r6,n.d0=Vs,n.d1=(h,s,u,f,g,m,_,b)=>{const O=h.transform,D=O.pitch<15?dw(.07,.7,Ia((14-O.zoom)/5,0,1)):.07,C=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:hw(h,s,u,f),u_texsize:s.imageAtlasTexture?s.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:O.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:g,u_width_scale:m,u_floor_width_scale:_,u_image:0,u_tile_units_to_pixels:GA(s,O),u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(C?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:D,u_tile_to_meter:y(s.tileID.canonical,0)}},n.d2=(h,s,u,f,g,m,_,b,O)=>{const D=h.transform,C=D.calculatePixelsToTileUnitsMatrix(s),V=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",L=D.pitch<15?dw(.07,.7,Ia((14-D.zoom)/5,0,1)):.07;return{u_matrix:hw(h,s,u,f),u_pixels_to_tile_units:C,u_device_pixel_ratio:m,u_width_scale:_,u_floor_width_scale:b,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:ZA(u)&&s.lineAtlasTexture?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:GA(s,h.transform),u_alpha_discard_threshold:0,u_trim_offset:O,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(V?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:L,u_tile_to_meter:y(s.tileID.canonical,0)}},n.d3=ra,n.d4=ry,n.d5=ty,n.d6=aw,n.d7=Ua,n.d8=v0,n.d9=Pp,n.dA=mg,n.dB=or,n.dC=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.dD=Cr,n.dE=Xo,n.dF=Vc,n.dG=function([h,s,u]){const f=Math.hypot(h,s,u),g=Math.atan2(h,u),m=.5*Math.PI-Math.acos(-s/f);return new Gn(za(g),za(m))},n.dH=kE,n.dI=function(h){const s=h.navigator?h.navigator.userAgent:null;return!!function(u){if(Aa==null){const f=u.navigator?u.navigator.userAgent:null;Aa=!!u.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Aa}(h)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dJ=function(h,s){br=h,Ir=s},n.dK=bl,n.dL=sc,n.dM=function(h){const s=[0,0,0],u=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.multiply(u,h.pixelMatrix,h.globeMatrix),Ae.vec3.transformMat4(s,s,u),new Nt(s[0],s[1])},n.dN=function(h,s,u=!1){if(Hn===Ii||Hn===Yn||Hn===ui)throw new Error("setRTLTextPlugin cannot be called multiple times.");xn=Kt.resolveURL(h),Hn=Ii,as=s,Wi(),u||Pi()},n.dO=wo,n.dP=function(){TS().acquire(qE)},n.dQ=function(){const h=Sw;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(qE),Sw=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dR=YA,n.dS=function(h){const s=ri();if(!s)return;const u=s.delete(qa);h&&u.catch(h).then(()=>h())},n.dT=Cw,n.dU=$k,n.dV=function(h){eN=Kt.resolveURL(h),L0||(L0=new V0(TS(),new eu)),L0.broadcast("setDracoUrl",eN)},n.dW=Kk,n.dX=function(h){I0=Kt.resolveURL(h),L0||(L0=new V0(TS(),new eu)),L0.broadcast("setMeshoptUrl",I0)},n.dY=Pt,n.dZ=ym,n.d_=Np,n.da=450,n.db=7,n.dc=Xae,n.dd=Dn,n.de=lg,n.df=256,n.dg=ps,n.dh=Vo,n.di=eo,n.dj=ku,n.dk=function(h,s,u,f,g){return Ia((h-s)/(u-s)*(g-f)+f,f,g)},n.dl=Jh,n.dm=sf,n.dn=class{constructor(h,s,u,f){this.context=h,this.format=f,this.size=u,this.texture=h.gl.createTexture();const[g,m,_]=this.size,{gl:b}=h;b.bindTexture(b.TEXTURE_3D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(!1),b.texImage3D(b.TEXTURE_3D,0,this.format,g,m,_,0,ME(this.format),IE(this.format),s.data)}bind(h,s){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_3D,this.texture),h!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,h),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,h),this.minFilter=h),s!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,s),this.wrapS=s)}destroy(){const{gl:h}=this.context;h.deleteTexture(this.texture),this.texture=null}},n.dp=UE,n.dq=[1,1,1],n.dr=O0,n.ds=N0,n.dt=Wd,n.du=af,n.dv=pl,n.dw=yp,n.dx=Nh,n.dy=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Nt(1/0,1/0),max:new Nt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(h,s=!1){const u=kC(new Nt(0,0),new Nt(Da,Da),h),f=[];if(s&&!_m(u,this._globalClipBounds))return f;for(const g of this._activeRegions){if(g.hiddenByOverlap||!_m(u,g))continue;const m=AE(g.min,g.max,h);f.push({min:m.min,max:m.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return f}setSources(h){this._setSources(h.map(s=>({getSourceId:()=>s.cache.id,getFootprints:()=>{const u=[];for(const f of s.cache.getVisibleCoordinates()){const g=s.cache.getTile(f).buckets[s.layer];g&&g.updateFootprints(f.toUnwrapped(),u)}return u},getOrder:()=>s.order,getClipMask:()=>s.clipMask,getClipScope:()=>s.clipScope})))}_addSource(h){const s=h.getFootprints();if(s.length===0)return;const u=h.getOrder(),f=h.getClipMask(),g=h.getClipScope();for(const m of s){if(!m.footprint)continue;const _=kC(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:f,clipScope:g})}this._sourceIds.push(h.getSourceId())}_computeReplacement(){this._activeRegions.sort((s,u)=>s.priority-u.priority||y0(s.min,u.min)||y0(s.max,u.max)||s.order-u.order||s.clipMask-u.clipMask||function(f,g){const m=(_,b)=>_+b;return f.length-g.length||f.reduce(m,"").localeCompare(g.reduce(m,""))}(s.clipScope,u.clipScope));let h=this._activeRegions.length!==this._prevRegions.length;if(!h){let s=0;for(;!h&&s!==this._activeRegions.length;){const u=this._activeRegions[s],f=this._prevRegions[s];h=u.priority!==f.priority||!FC(u,f)||u.order!==f.order||u.clipMask!==f.clipMask||!Ht(u.clipScope,f.clipScope),++s}}if(h){++this._updateTime;for(const u of this._activeRegions)u.order!==mg&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const s=u=>{const f=this._activeRegions;if(u>=f.length)return u;const g=f[u].priority;for(;u<f.length&&f[u].priority===g;)++u;return u};if(this._sourceIds.length>1){let u=0,f=s(u);for(;u!==f;){let g=u;const m=u;for(;g!==f;){const _=this._activeRegions[g];_.hiddenByOverlap=!1;for(let b=0;b<m;b++){const O=this._activeRegions[b];if(!O.hiddenByOverlap&&_.order===mg&&_m(_,O)&&(_.hiddenByOverlap=BC(_.footprint,_.tileId,O.footprint,O.tileId),_.hiddenByOverlap))break}++g}u=f,f=s(u)}}}}_setSources(h){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let s=h.length-1;s>=0;s--)this._addSource(h[s]);this._computeReplacement()}},n.dz=class{constructor(h){this._createGrid(h),this._createPoles(h)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const h of this._poleSegments)h.destroy();for(const h of this._gridSegments)h.withSkirts.destroy(),h.withoutSkirts.destroy()}_fillGridMeshWithLods(h,s){const u=new Iu,f=new Ls,g=[],m=h+1+2,_=s[0]+1,b=s[0]+1+(1+s.length),O=(D,C,V)=>{let L=D===m-1?D-2:D===0?D:D-1;return L+=V?24575:0,[L,C]};for(let D=0;D<m;++D)u.emplaceBack(...O(D,0,!0));for(let D=0;D<_;++D)for(let C=0;C<m;++C)u.emplaceBack(...O(C,D,(C===0||C===m-1)&&!0));for(let D=0;D<s.length;++D){const C=s[D];for(let V=0;V<m;++V)u.emplaceBack(...O(V,C,!0))}for(let D=0;D<s.length;++D){const C=f.length,V=s[D]+1+2,L=new Ls;for(let j=0;j<V-1;j++){const J=j===V-2,te=J?m*(b-s.length+D-j):m;for(let fe=0;fe<m-1;fe++){const he=j*m+fe;j===0||J||fe===0||fe===m-2?(L.emplaceBack(he+1,he,he+te),L.emplaceBack(he+te,he+te+1,he+1)):(f.emplaceBack(he+1,he,he+te),f.emplaceBack(he+te,he+te+1,he+1))}}const z=Gi.simpleSegment(0,C,u.length,f.length-C);for(let j=0;j<L.uint16.length;j+=3)f.emplaceBack(L.uint16[j],L.uint16[j+1],L.uint16[j+2]);const M=Gi.simpleSegment(0,C,u.length,f.length-C);g.push({withoutSkirts:z,withSkirts:M})}return{vertices:u,indices:f,segments:g}}_createGrid(h){const s=this._fillGridMeshWithLods(Tp,Bf);this._gridSegments=s.segments,this._gridBuffer=h.createVertexBuffer(s.vertices,Rr.members),this._gridIndexBuffer=h.createIndexBuffer(s.indices,!0)}_createPoles(h){const s=new Ls;for(let _=0;_<=Tp;_++)s.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=h.createIndexBuffer(s,!0);const u=new eo,f=new eo,g=new eo,m=new eo;this._poleSegments=[];for(let _=0,b=0;_<Dh;_++){const O=360/(1<<_);u.emplaceBack(0,-Cl,0,.5,0),f.emplaceBack(0,-Cl,0,.5,1),g.emplaceBack(0,-Cl,0,.5,.5),m.emplaceBack(0,-Cl,0,.5,.5);for(let D=0;D<=Tp;D++){let C=D/Tp,V=0;const L=vr(0,O,C),[z,M,j]=Cp(Co,Mh,L,Cl);u.emplaceBack(z,M,j,C,V),f.emplaceBack(z,M,j,C,1-V);const J=Ca(L);C=.5+.5*Math.sin(J),V=.5+.5*Math.cos(J),g.emplaceBack(z,M,j,C,V),m.emplaceBack(z,M,j,C,1-V)}this._poleSegments.push(Gi.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=h.createVertexBuffer(u,dr,!1),this._poleSouthVertexBuffer=h.createVertexBuffer(f,dr,!1),this._texturedPoleNorthVertexBuffer=h.createVertexBuffer(g,dr,!1),this._texturedPoleSouthVertexBuffer=h.createVertexBuffer(m,dr,!1)}getGridBuffers(h,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[h].withSkirts:this._gridSegments[h].withoutSkirts]}getPoleBuffers(h,s){return[s?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,s?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[h]]}},n.e=xe,n.e0=n6,n.e1=Ep,n.e2=Gf,n.e3="hd_road_elevation",n.e4=class{static parseFrom(h,s){const u=Zf.parse(h);if(!u)return[];let{vertices:f,features:g}=u;const m=1/y(s);g.sort((D,C)=>D.id-C.id),f.sort((D,C)=>D.id-C.id||D.idx-C.idx),f=f.filter((D,C,V)=>C===V.findIndex(L=>L.id===D.id&&L.idx===D.idx));const _=new Array;let b=0;const O=f.length;for(const D of g){if(D.constantHeight){_.push(new uy(D.id,D.bounds,D.constantHeight));continue}for(;b!==O&&f[b].id<D.id;)b++;if(b===O||f[b].id!==D.id)continue;const C=new Array,V=new Array,L=b;for(;b!==O&&f[b].id===D.id;){const z=f[b];if(C.push({position:z.position,height:z.height,extent:z.extent}),b!==L&&f[b-1].idx===z.idx-1){const M=b-L;V.push({a:M-1,b:M})}b++}_.push(new uy(D.id,D.bounds,void 0,C,V,m))}return _}},n.e5=gr,n.e6=zo,n.e7=gF,n.e8=b0,n.e9=function(h,s,u,f,g,m,_,b=1,O){h.createArrays(),h.tilePixelRatio=Da/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;const D=h.layers[0].layout,C=h.layers[0]._unevaluatedLayout._values,V={};V.scaleFactor=b,V.textSizeScaleRange=D.get("text-size-scale-range"),V.iconSizeScaleRange=D.get("icon-size-scale-range");const[L,z]=V.textSizeScaleRange,[M,j]=V.iconSizeScaleRange;V.textScaleFactor=Ia(V.scaleFactor,L,z),V.iconScaleFactor=Ia(V.scaleFactor,M,j);const J=C["text-size"],te=C["icon-size"];if(h.textSizeData.kind==="composite"){const{minZoom:Ve,maxZoom:et}=h.textSizeData;V.compositeTextSizes=[J.possiblyEvaluate(new Pn(Ve),m),J.possiblyEvaluate(new Pn(et),m)]}if(h.iconSizeData.kind==="composite"){const{minZoom:Ve,maxZoom:et}=h.iconSizeData;V.compositeIconSizes=[te.possiblyEvaluate(new Pn(Ve),m),te.possiblyEvaluate(new Pn(et),m)]}V.layoutTextSize=J.possiblyEvaluate(new Pn(_+1),m),V.layoutIconSize=te.possiblyEvaluate(new Pn(_+1),m),V.textMaxSize=J.possiblyEvaluate(new Pn(18),m);const fe=D.get("symbol-placement"),he=D.get("text-rotation-alignment")==="map"&&fe!=="point",se=D.get("text-size");let ve=!1;const Ce=[];for(const Ve of h.features){const et=D.get("text-font").evaluate(Ve,{},m).join(","),Ye=se.evaluate(Ve,{},m)*V.textScaleFactor,Xe=V.layoutTextSize.evaluate(Ve,{},m)*V.textScaleFactor,gt=V.layoutIconSize.evaluate(Ve,{},m)*V.iconScaleFactor,tt={horizontal:{},vertical:void 0},_t=Ve.text;let xt,Ct=[0,0];if(_t){const Ra=_t.toString(),Sr=D.get("text-letter-spacing").evaluate(Ve,{},m)*Ge,Xa=D.get("text-line-height").evaluate(Ve,{},m)*Ge,hr=Ha(Ra)?Sr:0,Ur=D.get("text-anchor").evaluate(Ve,{},m),ln=D.get("text-variable-anchor");if(!ln){const Jn=D.get("text-radial-offset").evaluate(Ve,{},m);Ct=Jn?TF(Ur,[Jn*Ge,bE]):D.get("text-offset").evaluate(Ve,{},m).map(Fi=>Fi*Ge)}let $r=he?"center":D.get("text-justify").evaluate(Ve,{},m);const _n=fe==="point",on=_n?D.get("text-max-width").evaluate(Ve,{},m)*Ge:1/0,En=Jn=>{h.allowVerticalPlacement&&aa(Ra)&&(tt.vertical=TE(_t,s,u,g,et,on,Xa,Ur,Jn,hr,Ct,ah.vertical,!0,Xe,Ye,O))};if(!he&&ln){const Jn=$r==="auto"?ln.map(Gr=>xE(Gr)):[$r];let Fi=!1;for(let Gr=0;Gr<Jn.length;Gr++){const In=Jn[Gr];if(!tt.horizontal[In])if(Fi)tt.horizontal[In]=tt.horizontal[0];else{const is=TE(_t,s,u,g,et,on,Xa,"center",In,hr,Ct,ah.horizontal,!1,Xe,Ye,O);is&&(tt.horizontal[In]=is,Fi=is.positionedLines.length===1)}}En("left")}else{if($r==="auto"&&($r=xE(Ur)),_n||D.get("text-writing-mode").indexOf("horizontal")>=0||!aa(Ra)){const Jn=TE(_t,s,u,g,et,on,Xa,Ur,$r,hr,Ct,ah.horizontal,!1,Xe,Ye,O);Jn&&(tt.horizontal[$r]=Jn)}En(_n?"left":$r)}}let Mt,Ot,jt,Ft,$t,_a=!1;if(Ve.icon&&Ve.icon.hasPrimary()){const Ra=SF(Ve.icon,h.iconSizeData,C["icon-size"],m,h.zoom,Ve,O,V.iconScaleFactor);Mt=Ra.iconPrimary,Ot=Ra.iconSecondary;const Sr=Mt.toString(),Xa=f.get(Sr);Xa&&(jt=D.get("icon-offset").evaluate(Ve,{},m),Ft=D.get("icon-anchor").evaluate(Ve,{},m),$t=D.get("icon-text-fit").evaluate(Ve,{},m),xt=Eae(g.get(Sr),Ot?g.get(Ot.toString()):void 0,jt,Ft),_a=Xa.sdf,h.sdfIcons===void 0?h.sdfIcons=Xa.sdf:h.sdfIcons!==Xa.sdf&&Yr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xa.pixelRatio!==h.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}ve=ve||!(!Ve.icon||!Ve.icon.hasSecondary());const ya=PE(tt.horizontal)||tt.vertical;h.iconsInText||(h.iconsInText=!!ya&&ya.iconsInText);const Qa=Xe*V.textScaleFactor/Ge,{defaultShapedIcon:Na,verticallyShapedIcon:Ma}=Lae(h,xt,D,Ve,m,tt,Qa,jt,$t);xt=Na,Ce.push({feature:Ve,shapedTextOrientations:tt,shapedText:ya,shapedIcon:xt,iconPrimary:Mt,iconSecondary:Ot,iconOffset:jt,iconAnchor:Ft,verticallyShapedIcon:Ma,layoutTextSize:Xe,layoutIconSize:gt,textOffset:Ct,isSDFIcon:_a,iconTextFit:$t})}return{featureData:Ce,sizes:V,hasAnySecondaryIcon:ve,textAlongLine:he,symbolPlacement:fe}},n.ea=yF,n.eb=function(h,s,u,f,g,m,_,b,O,D){const{featureData:C,hasAnySecondaryIcon:V,sizes:L,textAlongLine:z,symbolPlacement:M}=s;for(const j of C){const{shapedIcon:J,verticallyShapedIcon:te,feature:fe,shapedTextOrientations:he,shapedText:se,layoutTextSize:ve,textOffset:Ce,isSDFIcon:Ve,iconPrimary:et,iconSecondary:Ye,iconTextFit:Xe,iconOffset:gt}=j;bF(J,D.iconPositions,et,Ye),bF(te,D.iconPositions,et,Ye),Iae(he,D.iconPositions),(se||J)&&Fae(h,fe,he,J,te,O,L,ve,0,Ce,Ve,f,g,_,b,V,Xe,gt,z,M)}u&&h.generateCollisionDebugBuffers(m,h.collisionBoxArray,L.textScaleFactor)},n.ec=Lh,n.ed=NS,n.ee=fa,n.ef=f0,n.eg=Ri,n.eh=v,n.ei=function(h){let s=0;if(new Uint32Array(h,0,1)[0]!==Yk){const u=new Uint32Array(h,0,7),[,,f,g,m,_]=u;s=u.byteLength+g+m+_+m,(f!==h.byteLength||s>=h.byteLength)&&Yr("Invalid b3dm header information.")}return e6(h,s)},n.ej=function(h,s){const u=a6(h);for(const f of u){for(const g of f.meshes)hne(g);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(fne(f.lights,s)))}return u},n.ek=RS,n.el=mk,n.em=fs,n.en=function(h){Jr(),Wr!=null&&Wr.then(s=>{s.keys().then(u=>{for(let f=0;f<u.length-h;f++)s.delete(u[f])})})},n.f=function(h){return h.indexOf("mapbox:")===0},n.g=function(h,s){return al(wr(h,{method:"GET"}),s)},n.h=Le,n.i=function(h){return xe.API_STYLE_REGEX.test(h)&&!$e(h)},n.j=function(h){return decodeURIComponent(atob(h).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(h){return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,(s,u)=>String.fromCharCode(+("0x"+u))))},n.l=wr,n.m=Qr,n.n=function(h,s){return al(wr(h,{type:"json"}),s)},n.o=gh,n.p=function(h,s){return al(wr(h,{method:"POST"}),s)},n.q=Kt,n.r=xl,n.s=function(h){try{const s=self[h];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=Yt,n.u=function(){return function h(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()},n.v=function(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)},n.w=Yr,n.x=function(){return HE||(HE=new YA),HE},n.y=YE,n.z=Nd}),l(["./shared"],function(n){function v(Zt){const xe=Zt?Zt.url.toString():void 0;return xe?performance.getEntriesByName(xe):[]}function R(Zt){if(typeof Zt=="number"||typeof Zt=="boolean"||typeof Zt=="string"||Zt==null)return JSON.stringify(Zt);if(Array.isArray(Zt)){let Le="[";for(const $e of Zt)Le+=`${R($e)},`;return`${Le}]`}let xe="{";for(const Le of Object.keys(Zt).sort())xe+=`${Le}:${R(Zt[Le])},`;return`${xe}}`}function x(Zt){let xe="";for(const Le of n.bm)(Zt.type!=="model"||Le!=="minzoom"&&Le!=="maxzoom")&&(xe+=`/${R(Zt[Le])}`);return xe}class N{constructor(xe){this.keyCache={},this._layers={},this._layerConfigs={},xe&&this.replace(xe)}replace(xe,Le){this._layerConfigs={},this._layers={},this.update(xe,[],Le)}update(xe,Le,$e){this._options=$e;for(const At of xe)this._layerConfigs[At.id]=At,(this._layers[At.id]=n.cv(At,this.scope,null,this._options)).compileFilter($e),this.keyCache[At.id]&&delete this.keyCache[At.id];for(const At of Le)delete this.keyCache[At],delete this._layerConfigs[At],delete this._layers[At];this.familiesBySource={};const yt=function(At,bt){const Gt={};for(let Wt=0;Wt<At.length;Wt++){const Yt=At[Wt];let Kt=bt&&bt[Yt.id];!Kt&&(Kt=x(Yt),Yt.type==="line"&&Yt.paint)&&function Fa(qa){return typeof qa=="string"&&qa==="line-progress"||(Array.isArray(qa)?qa.some(Fa):!(!qa||typeof qa!="object")&&Object.values(qa).some(Fa))}(Yt.paint["line-width"])&&(Kt+=`/${R(Yt.paint["line-width"])}`),bt&&(bt[Yt.id]=Kt);let Sa=Gt[Kt];Sa||(Sa=Gt[Kt]=[]),Sa.push(Yt)}const Et=[];for(const Wt in Gt)Et.push(Gt[Wt]);return Et}(Object.values(this._layerConfigs),this.keyCache);for(const At of yt){const bt=At.map(Sa=>this._layers[Sa.id]),Gt=bt[0];if(Gt.visibility==="none")continue;const Et=Gt.source||"";let Wt=this.familiesBySource[Et];Wt||(Wt=this.familiesBySource[Et]={});const Yt=Gt.sourceLayer||"_geojsonTileLayer";let Kt=Wt[Yt];Kt||(Kt=Wt[Yt]=[]),Kt.push(bt)}}}const I=1*n.d_;class k{constructor(xe){const Le={},$e=[];for(const Gt in xe){const Et=xe[Gt],Wt=Le[Gt]={};for(const Yt in Et.glyphs){const Kt=Et.glyphs[+Yt];if(!Kt||Kt.bitmap.width===0||Kt.bitmap.height===0)continue;const Sa=Kt.metrics.localGlyph?I:1,Fa={x:0,y:0,w:Kt.bitmap.width+2*Sa,h:Kt.bitmap.height+2*Sa};$e.push(Fa),Wt[Yt]=Fa}}const{w:yt,h:At}=n.H($e),bt=new n.dZ({width:yt||1,height:At||1});for(const Gt in xe){const Et=xe[Gt];for(const Wt in Et.glyphs){const Yt=Et.glyphs[+Wt];if(!Yt||Yt.bitmap.width===0||Yt.bitmap.height===0)continue;const Kt=Le[Gt][Wt],Sa=Yt.metrics.localGlyph?I:1;n.dZ.copy(Yt.bitmap,bt,{x:0,y:0},{x:Kt.x+Sa,y:Kt.y+Sa},Yt.bitmap)}}this.image=bt,this.positions=Le}}n.dY(k,"GlyphAtlas");class Z{constructor(xe){this.tileID=new n.aH(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.tileZoom=xe.tileZoom,this.uid=xe.uid,this.zoom=xe.zoom,this.lut=xe.lut,this.canonical=xe.tileID.canonical,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.scope=xe.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=xe.showCollisionBoxes,this.collectResourceTiming=!!xe.request&&xe.request.collectResourceTiming,this.promoteId=xe.promoteId,this.isSymbolTile=xe.isSymbolTile,this.tileTransform=n.aR(xe.tileID.canonical,xe.projection),this.projection=xe.projection,this.worldview=xe.worldview,this.localizableLayerIds=xe.localizableLayerIds,this.brightness=xe.brightness,this.extraShadowCaster=!!xe.extraShadowCaster,this.tessellationStep=xe.tessellationStep,this.scaleFactor=xe.scaleFactor}parse(xe,Le,$e,yt,At){this.status="parsing",this.data=xe,this.collisionBoxArray=new n.aX;const bt=new n.d$(Object.keys(xe.layers).sort()),Gt=new n.e0(this.tileID,this.promoteId);Gt.bucketLayerIDs=[];const Et={},Wt=new n.e1(256,256),Yt={featureIndex:Gt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Wt,availableImages:$e,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Kt=Le.familiesBySource[this.source];for(const Jr in Kt){const Cn=xe.layers[Jr];if(!Cn)continue;let Qr=!1,jn=!1,Ui=!1;for(const Bo of Kt[Jr])Bo[0].type==="symbol"?Qr=!0:jn=!0,Bo[0].is3D()&&Bo[0].type!=="model"&&(Ui=!0);if(this.extraShadowCaster&&!Ui||this.isSymbolTile===!0&&!Qr||this.isSymbolTile===!1&&!jn)continue;Cn.version===1&&n.w(`Vector tile source "${this.source}" layer "${Jr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Xi=bt.encode(Jr),Ps=[];let Es=!1;for(let Bo=0,Ns=0;Bo<Cn.length;Bo++){const $s=Cn.feature(Bo),pc=Gt.getId($s,Jr);if(this.localizableLayerIds&&this.localizableLayerIds.has(Jr)){const al=$s.properties?$s.properties.worldview:null;if(this.worldview&&typeof al=="string")if(al==="all")$s.properties.$localized=!0;else{if(!al.split(",").includes(this.worldview))continue;$s.properties.$localized=!0,$s.properties.worldview=this.worldview}}!Es&&$s.properties&&$s.properties.hasOwnProperty(n.e2)&&(Es=!0),Ps.push({feature:$s,id:pc,index:Ns,sourceLayerIndex:Xi}),Ns++}Es&&!Yt.elevationFeatures&&xe.layers.hasOwnProperty(n.e3)&&(Yt.elevationFeatures=n.e4.parseFrom(xe.layers[n.e3],this.canonical));for(const Bo of Kt[Jr]){const Ns=Bo[0];(!this.extraShadowCaster||Ns.is3D()&&Ns.type!=="model")&&(this.isSymbolTile!==void 0&&Ns.type==="symbol"!==this.isSymbolTile||Ns.minzoom&&this.zoom<Math.floor(Ns.minzoom)||Ns.maxzoom&&this.zoom>=Ns.maxzoom||Ns.visibility!=="none"&&($(Bo,this.zoom,Yt.brightness,$e),(Et[Ns.id]=Ns.createBucket({index:Gt.bucketLayerIDs.length,layers:Bo,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xi,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(Ps,Yt,this.tileID.canonical,this.tileTransform),Gt.bucketLayerIDs.push(Bo.map($s=>n.C($s.id,$s.scope)))))}}let Sa,Fa,qa,br,Ir,Lr;Wt.trim();const Wr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Un=()=>{if(Sa)return this.status="done",At(Sa);if(this.extraShadowCaster)this.status="done",At(null,{buckets:Object.values(Et).filter(Jr=>!Jr.isEmpty()),featureIndex:Gt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Yt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Fa&&qa&&br){const Jr=new k(Fa),Cn=new Map;for(const[Ui,Xi]of qa.entries()){const{imagePosition:Ps}=n.e7(Ui,Xi,n.e8);Cn.set(Ui,Ps)}const Qr={};for(const Ui in Et){const Xi=Et[Ui];Xi instanceof n.aY&&($(Xi.layers,this.zoom,Yt.brightness,$e),Qr[Ui]=n.e9(Xi,Fa,Jr.positions,qa,Cn,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio))}const jn={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(yt,qa,Ir,()=>{jn.iconsPending=!1,ri(Qr,Jr,jn)}),this.rasterizeIfNeeded(yt,br,Lr,()=>{jn.patternsPending=!1,ri(Qr,Jr,jn)})}},ri=(Jr,Cn,Qr,jn)=>{if(Qr.iconsPending||Qr.patternsPending)return;const Ui=new n.ea(qa,br,this.lut);for(const Xi in Et){const Ps=Et[Xi];if(Xi in Jr)n.eb(Ps,Jr[Xi],this.showCollisionBoxes,$e,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,qa,Ui);else if(Ps.hasPattern&&(Ps instanceof n.b2||Ps instanceof n.b3||Ps instanceof n.d8)){$(Ps.layers,this.zoom,Yt.brightness,$e);const Es=Object.fromEntries(Ui.patternPositions);Ps.addFeatures(Yt,this.tileID.canonical,Es,$e,this.tileTransform,this.brightness)}}this.status="done",At(null,{buckets:Object.values(Et).filter(Xi=>!Xi.isEmpty()),featureIndex:Gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cn.image,lineAtlas:Wt,imageAtlas:Ui,brightness:Yt.brightness})};if(!this.extraShadowCaster){const Jr=n.e5(Yt.glyphDependencies,jn=>Object.keys(jn).map(Number));Object.keys(Jr).length?yt.send("getGlyphs",{uid:this.uid,stacks:Jr,scope:this.scope},(jn,Ui)=>{Sa||(Sa=jn,Fa=Ui,Un())},void 0,!1,Wr):Fa={};const Cn=Array.from(Yt.iconDependencies.keys()).map(jn=>n.I.parse(jn));Cn.length?yt.send("getImages",{images:Cn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(jn,Ui)=>{Sa||(Sa=jn,qa=new Map,Ir=this.updateImageMapAndGetImageTaskQueue(qa,Ui,Yt.iconDependencies),Un())},void 0,!1,Wr):(qa=new Map,Ir=new Map);const Qr=Array.from(Yt.patternDependencies.keys()).map(jn=>n.I.parse(jn));Qr.length?yt.send("getImages",{images:Qr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(jn,Ui)=>{Sa||(Sa=jn,br=new Map,Lr=this.updateImageMapAndGetImageTaskQueue(br,Ui,Yt.patternDependencies),Un())},void 0,!1,Wr):(br=new Map,Lr=new Map)}if(Yt.elevationFeatures&&Yt.elevationFeatures.length>0){const Jr=[];for(const Qr of Object.values(Et))if(Qr instanceof n.b3){const jn=Qr.getUnevaluatedPortalGraph();jn&&Jr.push(jn)}const Cn=n.e6.evaluate(Jr);for(const Qr of Object.values(Et))Qr instanceof n.b3&&Qr.setEvaluatedPortalGraph(Cn)}Un()}rasterizeIfNeeded(xe,Le,$e,yt){Array.from(Le.values()).some(At=>At.usvg)?this.rasterize(xe,Le,$e,yt):yt()}updateImageMapAndGetImageTaskQueue(xe,Le,$e){const yt=new Map;for(const At of Le.keys()){const bt=$e.get(At)||[];for(const Gt of bt){const Et=Gt.toString(),Wt=Le.get(Gt.id.toString());Wt.usvg?yt.has(Et)||(yt.set(Et,Gt),xe.set(Et,Object.assign({},Wt))):xe.set(Et,Wt)}}return yt}rasterize(xe,Le,$e,yt){this.rasterizeTask=xe.send("rasterizeImages",{scope:this.scope,tasks:$e},(At,bt)=>{if(!At)for(const[Gt,Et]of bt.entries()){const Wt=Object.assign(Le.get(Gt),{data:Et});Le.set(Gt,Wt)}yt()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function $(Zt,xe,Le,$e){const yt=new n.aa(xe,{brightness:Le});for(const At of Zt)At.recalculate(yt,$e)}class H extends n.E{constructor(xe,Le,$e,yt,At,bt){super(),this.actor=xe,this.layerIndex=Le,this.availableImages=$e,this.loadVectorData=At||n.aE,this.loading={},this.loaded={},this.deduped=new n.aD(xe.scheduler),this.isSpriteLoaded=yt,this.scheduler=xe.scheduler,this.brightness=bt}loadTile(xe,Le){const $e=xe.uid,yt=xe&&xe.request,At=yt&&yt.collectResourceTiming,bt=this.loading[$e]=new Z(xe);bt.abort=this.loadVectorData(xe,(Gt,Et)=>{const Wt=!this.loading[$e];if(delete this.loading[$e],bt.cancelRasterize(),Wt||Gt||!Et)return bt.status="done",Wt||(this.loaded[$e]=bt),Le(Gt);const Yt=Et.rawData,Kt={};Et.expires&&(Kt.expires=Et.expires),Et.cacheControl&&(Kt.cacheControl=Et.cacheControl),bt.vectorTile=Et.vectorTile||new n.ec.VectorTile(new n.bi(Yt));const Sa=()=>{bt.parse(bt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Fa,qa)=>{if(Fa||!qa)return Le(Fa);const br={};if(At){const Ir=v(yt);Ir.length>0&&(br.resourceTiming=JSON.parse(JSON.stringify(Ir)))}Le(null,n.l({rawTileData:Yt.slice(0)},qa,Kt,br))})};this.isSpriteLoaded?Sa():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Sa,{type:"parseTile",isSymbolTile:xe.isSymbolTile,zoom:xe.tileZoom}):Sa()}),this.loaded=this.loaded||{},this.loaded[$e]=bt})}reloadTile(xe,Le){const $e=this.loaded,yt=xe.uid;if($e&&$e[yt]){const At=$e[yt];At.scaleFactor=xe.scaleFactor,At.showCollisionBoxes=xe.showCollisionBoxes,At.projection=xe.projection,At.brightness=xe.brightness,At.tileTransform=n.aR(xe.tileID.canonical,xe.projection),At.extraShadowCaster=xe.extraShadowCaster,At.lut=xe.lut;const bt=(Gt,Et)=>{const Wt=At.reloadCallback;Wt&&(delete At.reloadCallback,At.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor,Wt)),Le(Gt,Et)};At.status==="parsing"?At.reloadCallback=bt:At.status==="done"&&(At.vectorTile?At.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor,bt):bt())}else Le(null,void 0)}abortTile(xe,Le){const $e=xe.uid,yt=this.loading[$e];yt&&(yt.abort&&yt.abort(),delete this.loading[$e]),Le()}removeTile(xe,Le){const $e=this.loaded,yt=xe.uid;$e&&$e[yt]&&delete $e[yt],Le()}}class W{loadTile(xe,Le){const{uid:$e,encoding:yt,rawImageData:At,padding:bt}=xe,Gt=ImageBitmap&&At instanceof ImageBitmap?this.getImageData(At,bt):At;Le(null,new n.ed($e,Gt,yt,bt<1))}reloadTile(xe,Le){Le(null,null)}abortTile(xe,Le){Le()}removeTile(xe,Le){Le()}getImageData(xe,Le){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(xe.width,xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=xe.width,this.offscreenCanvas.height=xe.height,this.offscreenCanvasContext.drawImage(xe,0,0,xe.width,xe.height);const $e=this.offscreenCanvasContext.getImageData(-Le,-Le,xe.width+2*Le,xe.height+2*Le);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),$e}}n.bh.setPbf(n.bi);class ee{constructor(xe){this._mrt=new n.bh(xe.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=xe.uid,this.tileID=xe.tileID,this.source=xe.source}parse(xe,Le){const $e=this._mrt;this.status="parsing",this._entireBuffer=xe;try{$e.parseHeader(xe),this._isHeaderLoaded=!0;const yt=[];for(const At in $e.layers){const bt=$e.getLayer(At),Gt=bt.getDataRange(bt.getBandList()),Et=$e.createDecodingTask(Gt),Wt=xe.slice(Gt.firstByte,Gt.lastByte+1),Yt=n.bh.performDecoding(Wt,Et).then(Kt=>Et.complete(null,Kt)).catch(Kt=>Et.complete(Kt,null));yt.push(Yt)}Promise.allSettled(yt).then(()=>Le(null,$e))}catch(yt){Le(yt)}}}class oe{constructor(xe){this.actor=xe,this.loading={},this.loaded={}}loadTile(xe,Le){const $e=xe.uid,yt=xe.request,At=this.loading[$e]=new ee(xe),{cancel:bt}=n.bj(yt,(Gt,Et,Wt,Yt)=>{const Kt=!this.loading[$e];if(delete this.loading[$e],Kt||Gt||!Et)return At.status="done",Kt||(this.loaded[$e]=At),Le(Gt);At.parse(Et,(Sa,Fa)=>{if(Sa||!Fa)return Le(Sa);Le(null,Fa,Wt,Yt)}),this.loaded[$e]=At});At.abort=bt}reloadTile(xe,Le){Le(null,void 0)}abortTile(xe,Le){const $e=xe.uid,yt=this.loading[$e];yt&&(yt.abort&&yt.abort(),delete this.loading[$e]),Le()}removeTile(xe,Le){const $e=xe.uid;this.loaded[$e]&&delete this.loaded[$e],Le()}decodeRasterArray({task:xe,buffer:Le},$e){n.bh.performDecoding(Le,xe).then(yt=>$e(null,yt)).catch(yt=>$e(yt))}}const pe=n.ec.VectorTileFeature.prototype.toGeoJSON;class le{constructor(xe){this._feature=xe,this.extent=n.ai,this.type=xe.type,this.properties=xe.tags,"id"in xe&&!isNaN(xe.id)&&(this.id=parseInt(xe.id,10))}loadGeometry(){if(this._feature.type===1){const xe=[];for(const Le of this._feature.geometry)xe.push([new n.P(Le[0],Le[1])]);return xe}{const xe=[];for(const Le of this._feature.geometry){const $e=[];for(const yt of Le)$e.push(new n.P(yt[0],yt[1]));xe.push($e)}return xe}}toGeoJSON(xe,Le,$e){return pe.call(this,xe,Le,$e)}}class ge{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ai,this.length=xe.length,this._features=xe}feature(xe){return new le(this._features[xe])}}const ue=64/4096,Re=128;class we{constructor(){this.features=new Map}clear(){this.features.clear()}load(xe=[],Le){for(const $e of xe){const yt=$e.id;if(yt==null)continue;let At=this.features.get(yt);At&&this.updateCache(At,Le),$e.geometry?(At=ne($e),this.updateCache(At,Le),this.features.set(yt,At)):this.features.delete(yt),this.updateCache(At,Le)}}updateCache(xe,Le){for(const{canonical:$e,uid:yt}of Object.values(Le)){const{z:At,x:bt,y:Gt}=$e;Ne(xe,Math.pow(2,At),bt,Gt)&&delete Le[yt]}}getTile(xe,Le,$e){const yt=Math.pow(2,xe),At=[];for(const bt of this.features.values())Ne(bt,yt,Le,$e)&&At.push(Ee(bt,yt,Le,$e));return{features:At}}getFeatures(){return[...this.features.values()]}}function Ne({minX:Zt,minY:xe,maxX:Le,maxY:$e},yt,At,bt){return Zt<(At+1+ue)/yt&&xe<(bt+1+ue)/yt&&Le>(At-ue)/yt&&$e>(bt-ue)/yt}function ne(Zt){const{id:xe,geometry:Le,properties:$e}=Zt;if(!Le)return;if(Le.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:yt,coordinates:At}=Le,bt={id:xe,type:1,geometry:[],tags:$e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Gt=bt.geometry;if(yt==="Point")_e(At,Gt,bt);else if(yt==="MultiPoint")for(const Et of At)_e(Et,Gt,bt);else if(yt==="LineString")bt.type=2,ke(At,Gt,bt);else if(yt==="MultiLineString")bt.type=2,Pe(At,Gt,bt);else if(yt==="Polygon")bt.type=3,Pe(At,Gt,bt,!0);else{if(yt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");bt.type=3;for(const Et of At)Pe(Et,Gt,bt,!0)}return bt}function _e([Zt,xe],Le,$e){const yt=n.av(Zt);let At=n.aC(xe);At=At<0?0:At>1?1:At,Le.push(yt,At),$e.minX=Math.min($e.minX,yt),$e.minY=Math.min($e.minY,At),$e.maxX=Math.max($e.maxX,yt),$e.maxY=Math.max($e.maxY,At)}function ke(Zt,xe,Le,$e=!1,yt=!1){const At=[];for(const bt of Zt)_e(bt,At,Le);xe.push(At),$e&&function(bt,Gt){let Et=0;for(let Wt=0,Yt=bt.length,Kt=Yt-2;Wt<Yt;Kt=Wt,Wt+=2)Et+=(bt[Wt]-bt[Kt])*(bt[Wt+1]+bt[Kt+1]);if(Et>0===Gt)for(let Wt=0,Yt=bt.length;Wt<Yt/2;Wt+=2){const Kt=bt[Wt],Sa=bt[Wt+1];bt[Wt]=bt[Yt-2-Wt],bt[Wt+1]=bt[Yt-1-Wt],bt[Yt-2-Wt]=Kt,bt[Yt-1-Wt]=Sa}}(At,yt)}function Pe(Zt,xe,Le,$e=!1){for(let yt=0;yt<Zt.length;yt++)ke(Zt[yt],xe,Le,$e,yt===0)}function Ee(Zt,xe,Le,$e){const{id:yt,type:At,geometry:bt,tags:Gt}=Zt,Et=[];if(At===1)(function(Wt,Yt,Kt,Sa,Fa){for(let qa=0;qa<Wt.length;qa+=2){const br=Math.round(n.ai*(Wt[qa+0]*Yt-Kt)),Ir=Math.round(n.ai*(Wt[qa+1]*Yt-Sa));Fa.push([br,Ir])}})(bt,xe,Le,$e,Et);else for(const Wt of bt)De(Wt,xe,Le,$e,Et);return{id:yt,type:At,geometry:Et,tags:Gt}}function De(Zt,xe,Le,$e,yt){const bt=n.ai+Re;let Gt;for(let Et=0;Et<Zt.length-2;Et+=2){let Wt=Math.round(n.ai*(Zt[Et+0]*xe-Le)),Yt=Math.round(n.ai*(Zt[Et+1]*xe-$e)),Kt=Math.round(n.ai*(Zt[Et+2]*xe-Le)),Sa=Math.round(n.ai*(Zt[Et+3]*xe-$e));const Fa=Kt-Wt,qa=Sa-Yt;Wt<-128&&Kt<-128||(Wt<-128?(Yt+=Math.round(qa*((-128-Wt)/Fa)),Wt=-128):Kt<-128&&(Sa=Yt+Math.round(qa*((-128-Wt)/Fa)),Kt=-128),Yt<-128&&Sa<-128||(Yt<-128?(Wt+=Math.round(Fa*((-128-Yt)/qa)),Yt=-128):Sa<-128&&(Kt=Wt+Math.round(Fa*((-128-Yt)/qa)),Sa=-128),Wt>=bt&&Kt>=bt||(Wt>=bt?(Yt+=Math.round(qa*((bt-Wt)/Fa)),Wt=bt):Kt>=bt&&(Sa=Yt+Math.round(qa*((bt-Wt)/Fa)),Kt=bt),Yt>=bt&&Sa>=bt||(Yt>=bt?(Wt+=Math.round(Fa*((bt-Yt)/qa)),Yt=bt):Sa>=bt&&(Kt=Wt+Math.round(Fa*((bt-Yt)/qa)),Sa=bt),Gt&&Wt===Gt[Gt.length-1][0]&&Yt===Gt[Gt.length-1][1]||(Gt=[[Wt,Yt]],yt.push(Gt)),Gt.push([Kt,Sa])))))}}var qe,Oe,He,Ue={exports:{}},ct=function(){if(He)return Ue.exports;He=1;var Zt=n.eg(),xe=function(){if(Oe)return qe;Oe=1;var Yt=n.ee(),Kt=n.ef().VectorTileFeature;function Sa(qa,br){this.options=br||{},this.features=qa,this.length=qa.length}function Fa(qa,br){this.id=typeof qa.id=="number"?qa.id:void 0,this.type=qa.type,this.rawGeometry=qa.type===1?[qa.geometry]:qa.geometry,this.properties=qa.tags,this.extent=br||4096}return qe=Sa,Sa.prototype.feature=function(qa){return new Fa(this.features[qa],this.options.extent)},Fa.prototype.loadGeometry=function(){var qa=this.rawGeometry;this.geometry=[];for(var br=0;br<qa.length;br++){for(var Ir=qa[br],Lr=[],Wr=0;Wr<Ir.length;Wr++)Lr.push(new Yt(Ir[Wr][0],Ir[Wr][1]));this.geometry.push(Lr)}return this.geometry},Fa.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var qa=this.geometry,br=1/0,Ir=-1/0,Lr=1/0,Wr=-1/0,Un=0;Un<qa.length;Un++)for(var ri=qa[Un],Jr=0;Jr<ri.length;Jr++){var Cn=ri[Jr];br=Math.min(br,Cn.x),Ir=Math.max(Ir,Cn.x),Lr=Math.min(Lr,Cn.y),Wr=Math.max(Wr,Cn.y)}return[br,Lr,Ir,Wr]},Fa.prototype.toGeoJSON=Kt.prototype.toGeoJSON,qe}();function Le(Yt){var Kt=new Zt;return function(Sa,Fa){for(var qa in Sa.layers)Fa.writeMessage(3,$e,Sa.layers[qa])}(Yt,Kt),Kt.finish()}function $e(Yt,Kt){var Sa;Kt.writeVarintField(15,Yt.version||1),Kt.writeStringField(1,Yt.name||""),Kt.writeVarintField(5,Yt.extent||4096);var Fa={keys:[],values:[],keycache:{},valuecache:{}};for(Sa=0;Sa<Yt.length;Sa++)Fa.feature=Yt.feature(Sa),Kt.writeMessage(2,yt,Fa);var qa=Fa.keys;for(Sa=0;Sa<qa.length;Sa++)Kt.writeStringField(3,qa[Sa]);var br=Fa.values;for(Sa=0;Sa<br.length;Sa++)Kt.writeMessage(4,Wt,br[Sa])}function yt(Yt,Kt){var Sa=Yt.feature;Sa.id!==void 0&&Kt.writeVarintField(1,Sa.id),Kt.writeMessage(2,At,Yt),Kt.writeVarintField(3,Sa.type),Kt.writeMessage(4,Et,Sa)}function At(Yt,Kt){var Sa=Yt.feature,Fa=Yt.keys,qa=Yt.values,br=Yt.keycache,Ir=Yt.valuecache;for(var Lr in Sa.properties){var Wr=Sa.properties[Lr],Un=br[Lr];if(Wr!==null){Un===void 0&&(Fa.push(Lr),br[Lr]=Un=Fa.length-1),Kt.writeVarint(Un);var ri=typeof Wr;ri!=="string"&&ri!=="boolean"&&ri!=="number"&&(Wr=JSON.stringify(Wr));var Jr=ri+":"+Wr,Cn=Ir[Jr];Cn===void 0&&(qa.push(Wr),Ir[Jr]=Cn=qa.length-1),Kt.writeVarint(Cn)}}}function bt(Yt,Kt){return(Kt<<3)+(7&Yt)}function Gt(Yt){return Yt<<1^Yt>>31}function Et(Yt,Kt){for(var Sa=Yt.loadGeometry(),Fa=Yt.type,qa=0,br=0,Ir=Sa.length,Lr=0;Lr<Ir;Lr++){var Wr=Sa[Lr],Un=1;Fa===1&&(Un=Wr.length),Kt.writeVarint(bt(1,Un));for(var ri=Fa===3?Wr.length-1:Wr.length,Jr=0;Jr<ri;Jr++){Jr===1&&Fa!==1&&Kt.writeVarint(bt(2,ri-1));var Cn=Wr[Jr].x-qa,Qr=Wr[Jr].y-br;Kt.writeVarint(Gt(Cn)),Kt.writeVarint(Gt(Qr)),qa+=Cn,br+=Qr}Fa===3&&Kt.writeVarint(bt(7,1))}}function Wt(Yt,Kt){var Sa=typeof Yt;Sa==="string"?Kt.writeStringField(1,Yt):Sa==="boolean"?Kt.writeBooleanField(7,Yt):Sa==="number"&&(Yt%1!=0?Kt.writeDoubleField(3,Yt):Yt<0?Kt.writeSVarintField(6,Yt):Kt.writeVarintField(5,Yt))}return Ue.exports=Le,Ue.exports.fromVectorTileJs=Le,Ue.exports.fromGeojsonVt=function(Yt,Kt){Kt=Kt||{};var Sa={};for(var Fa in Yt)Sa[Fa]=new xe(Yt[Fa].features,Kt),Sa[Fa].name=Fa,Sa[Fa].version=Kt.version,Sa[Fa].extent=Kt.extent;return Le({layers:Sa})},Ue.exports.GeoJSONWrapper=xe,Ue.exports}(),Se=n.eh(ct);const Ie={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Zt=>Zt},je=Math.fround||(Ze=new Float32Array(1),Zt=>(Ze[0]=+Zt,Ze[0]));var Ze;const Be=3,Je=5,dt=6;class ut{constructor(xe){this.options=Object.assign(Object.create(Ie),xe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(xe){const{log:Le,minZoom:$e,maxZoom:yt}=this.options;Le&&console.time("total time");const At=`prepare ${xe.length} points`;Le&&console.time(At),this.points=xe;const bt=[];for(let Et=0;Et<xe.length;Et++){const Wt=xe[Et];if(!Wt.geometry)continue;const[Yt,Kt]=Wt.geometry.coordinates,Sa=je(Lt(Yt)),Fa=je(fa(Kt));bt.push(Sa,Fa,1/0,Et,-1,1),this.options.reduce&&bt.push(0)}let Gt=this.trees[yt+1]=this._createTree(bt);Le&&console.timeEnd(At);for(let Et=yt;Et>=$e;Et--){const Wt=+Date.now();Gt=this.trees[Et]=this._createTree(this._cluster(Gt,Et)),Le&&console.log("z%d: %d clusters in %dms",Et,Gt.numItems,+Date.now()-Wt)}return Le&&console.timeEnd("total time"),this}getClusters(xe,Le){let $e=((xe[0]+180)%360+360)%360-180;const yt=Math.max(-90,Math.min(90,xe[1]));let At=xe[2]===180?180:((xe[2]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,xe[3]));if(xe[2]-xe[0]>=360)$e=-180,At=180;else if($e>At){const Kt=this.getClusters([$e,yt,180,bt],Le),Sa=this.getClusters([-180,yt,At,bt],Le);return Kt.concat(Sa)}const Gt=this.trees[this._limitZoom(Le)],Et=Gt.range(Lt($e),fa(bt),Lt(At),fa(yt)),Wt=Gt.data,Yt=[];for(const Kt of Et){const Sa=this.stride*Kt;Yt.push(Wt[Sa+Je]>1?Ae(Wt,Sa,this.clusterProps):this.points[Wt[Sa+Be]])}return Yt}getChildren(xe){const Le=this._getOriginId(xe),$e=this._getOriginZoom(xe),yt="No cluster with the specified id.",At=this.trees[$e];if(!At)throw new Error(yt);const bt=At.data;if(Le*this.stride>=bt.length)throw new Error(yt);const Gt=this.options.radius/(this.options.extent*Math.pow(2,$e-1)),Et=At.within(bt[Le*this.stride],bt[Le*this.stride+1],Gt),Wt=[];for(const Yt of Et){const Kt=Yt*this.stride;bt[Kt+4]===xe&&Wt.push(bt[Kt+Je]>1?Ae(bt,Kt,this.clusterProps):this.points[bt[Kt+Be]])}if(Wt.length===0)throw new Error(yt);return Wt}getLeaves(xe,Le,$e){const yt=[];return this._appendLeaves(yt,xe,Le=Le||10,$e=$e||0,0),yt}getTile(xe,Le,$e){const yt=this.trees[this._limitZoom(xe)],At=Math.pow(2,xe),{extent:bt,radius:Gt}=this.options,Et=Gt/bt,Wt=($e-Et)/At,Yt=($e+1+Et)/At,Kt={features:[]};return this._addTileFeatures(yt.range((Le-Et)/At,Wt,(Le+1+Et)/At,Yt),yt.data,Le,$e,At,Kt),Le===0&&this._addTileFeatures(yt.range(1-Et/At,Wt,1,Yt),yt.data,At,$e,At,Kt),Le===At-1&&this._addTileFeatures(yt.range(0,Wt,Et/At,Yt),yt.data,-1,$e,At,Kt),Kt.features.length?Kt:null}getClusterExpansionZoom(xe){let Le=this._getOriginZoom(xe)-1;for(;Le<=this.options.maxZoom;){const $e=this.getChildren(xe);if(Le++,$e.length!==1)break;xe=$e[0].properties.cluster_id}return Le}_appendLeaves(xe,Le,$e,yt,At){const bt=this.getChildren(Le);for(const Gt of bt){const Et=Gt.properties;if(Et&&Et.cluster?At+Et.point_count<=yt?At+=Et.point_count:At=this._appendLeaves(xe,Et.cluster_id,$e,yt,At):At<yt?At++:xe.push(Gt),xe.length===$e)break}return At}_createTree(xe){const Le=new n.bE(xe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let $e=0;$e<xe.length;$e+=this.stride)Le.add(xe[$e],xe[$e+1]);return Le.finish(),Le.data=xe,Le}_addTileFeatures(xe,Le,$e,yt,At,bt){for(const Gt of xe){const Et=Gt*this.stride,Wt=Le[Et+Je]>1;let Yt,Kt,Sa;if(Wt)Yt=Dt(Le,Et,this.clusterProps),Kt=Le[Et],Sa=Le[Et+1];else{const br=this.points[Le[Et+Be]];Yt=br.properties;const[Ir,Lr]=br.geometry.coordinates;Kt=Lt(Ir),Sa=fa(Lr)}const Fa={type:1,geometry:[[Math.round(this.options.extent*(Kt*At-$e)),Math.round(this.options.extent*(Sa*At-yt))]],tags:Yt};let qa;qa=Wt||this.options.generateId?Le[Et+Be]:this.points[Le[Et+Be]].id,qa!==void 0&&(Fa.id=qa),bt.features.push(Fa)}}_limitZoom(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))}_cluster(xe,Le){const{radius:$e,extent:yt,reduce:At,minPoints:bt}=this.options,Gt=$e/(yt*Math.pow(2,Le)),Et=xe.data,Wt=[],Yt=this.stride;for(let Kt=0;Kt<Et.length;Kt+=Yt){if(Et[Kt+2]<=Le)continue;Et[Kt+2]=Le;const Sa=Et[Kt],Fa=Et[Kt+1],qa=xe.within(Et[Kt],Et[Kt+1],Gt),br=Et[Kt+Je];let Ir=br;for(const Lr of qa){const Wr=Lr*Yt;Et[Wr+2]>Le&&(Ir+=Et[Wr+Je])}if(Ir>br&&Ir>=bt){let Lr,Wr=Sa*br,Un=Fa*br,ri=-1;const Jr=(Kt/Yt<<5)+(Le+1)+this.points.length;for(const Cn of qa){const Qr=Cn*Yt;if(Et[Qr+2]<=Le)continue;Et[Qr+2]=Le;const jn=Et[Qr+Je];Wr+=Et[Qr]*jn,Un+=Et[Qr+1]*jn,Et[Qr+4]=Jr,At&&(Lr||(Lr=this._map(Et,Kt,!0),ri=this.clusterProps.length,this.clusterProps.push(Lr)),At(Lr,this._map(Et,Qr)))}Et[Kt+4]=Jr,Wt.push(Wr/Ir,Un/Ir,1/0,Jr,-1,Ir),At&&Wt.push(ri)}else{for(let Lr=0;Lr<Yt;Lr++)Wt.push(Et[Kt+Lr]);if(Ir>1)for(const Lr of qa){const Wr=Lr*Yt;if(!(Et[Wr+2]<=Le)){Et[Wr+2]=Le;for(let Un=0;Un<Yt;Un++)Wt.push(Et[Wr+Un])}}}}return Wt}_getOriginId(xe){return xe-this.points.length>>5}_getOriginZoom(xe){return(xe-this.points.length)%32}_map(xe,Le,$e){if(xe[Le+Je]>1){const bt=this.clusterProps[xe[Le+dt]];return $e?Object.assign({},bt):bt}const yt=this.points[xe[Le+Be]].properties,At=this.options.map(yt);return $e&&At===yt?Object.assign({},At):At}}function Ae(Zt,xe,Le){return{type:"Feature",id:Zt[xe+Be],properties:Dt(Zt,xe,Le),geometry:{type:"Point",coordinates:[($e=Zt[xe],360*($e-.5)),Nt(Zt[xe+1])]}};var $e}function Dt(Zt,xe,Le){const $e=Zt[xe+Je],yt=$e>=1e4?`${Math.round($e/1e3)}k`:$e>=1e3?Math.round($e/100)/10+"k":$e,At=Zt[xe+dt],bt=At===-1?{}:Object.assign({},Le[At]);return Object.assign(bt,{cluster:!0,cluster_id:Zt[xe+Be],point_count:$e,point_count_abbreviated:yt})}function Lt(Zt){return Zt/360+.5}function fa(Zt){const xe=Math.sin(Zt*Math.PI/180),Le=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Le<0?0:Le>1?1:Le}function Nt(Zt){const xe=(180-360*Zt)*Math.PI/180;return 360*Math.atan(Math.exp(xe))/Math.PI-90}function Ht(Zt,xe,Le,$e){let yt=$e;const At=xe+(Le-xe>>1);let bt,Gt=Le-xe;const Et=Zt[xe],Wt=Zt[xe+1],Yt=Zt[Le],Kt=Zt[Le+1];for(let Sa=xe+3;Sa<Le;Sa+=3){const Fa=wt(Zt[Sa],Zt[Sa+1],Et,Wt,Yt,Kt);if(Fa>yt)bt=Sa,yt=Fa;else if(Fa===yt){const qa=Math.abs(Sa-At);qa<Gt&&(bt=Sa,Gt=qa)}}yt>$e&&(bt-xe>3&&Ht(Zt,xe,bt,$e),Zt[bt+2]=yt,Le-bt>3&&Ht(Zt,bt,Le,$e))}function wt(Zt,xe,Le,$e,yt,At){let bt=yt-Le,Gt=At-$e;if(bt!==0||Gt!==0){const Et=((Zt-Le)*bt+(xe-$e)*Gt)/(bt*bt+Gt*Gt);Et>1?(Le=yt,$e=At):Et>0&&(Le+=bt*Et,$e+=Gt*Et)}return bt=Zt-Le,Gt=xe-$e,bt*bt+Gt*Gt}function fr(Zt,xe,Le,$e){const yt={id:Zt??null,type:xe,geometry:Le,tags:$e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Ca(yt,Le);else if(xe==="Polygon")Ca(yt,Le[0]);else if(xe==="MultiLineString")for(const At of Le)Ca(yt,At);else if(xe==="MultiPolygon")for(const At of Le)Ca(yt,At[0]);return yt}function Ca(Zt,xe){for(let Le=0;Le<xe.length;Le+=3)Zt.minX=Math.min(Zt.minX,xe[Le]),Zt.minY=Math.min(Zt.minY,xe[Le+1]),Zt.maxX=Math.max(Zt.maxX,xe[Le]),Zt.maxY=Math.max(Zt.maxY,xe[Le+1])}function za(Zt,xe,Le,$e){if(!xe.geometry)return;const yt=xe.geometry.coordinates;if(yt&&yt.length===0)return;const At=xe.geometry.type,bt=Math.pow(Le.tolerance/((1<<Le.maxZoom)*Le.extent),2);let Gt=[],Et=xe.id;if(Le.promoteId?Et=xe.properties[Le.promoteId]:Le.generateId&&(Et=$e||0),At==="Point")ar(yt,Gt);else if(At==="MultiPoint")for(const Wt of yt)ar(Wt,Gt);else if(At==="LineString")ur(yt,Gt,bt,!1);else if(At==="MultiLineString"){if(Le.lineMetrics){for(const Wt of yt)Gt=[],ur(Wt,Gt,bt,!1),Zt.push(fr(Et,"LineString",Gt,xe.properties));return}or(yt,Gt,bt,!1)}else if(At==="Polygon")or(yt,Gt,bt,!0);else{if(At!=="MultiPolygon"){if(At==="GeometryCollection"){for(const Wt of xe.geometry.geometries)za(Zt,{id:Et,geometry:Wt,properties:xe.properties},Le,$e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Wt of yt){const Yt=[];or(Wt,Yt,bt,!0),Gt.push(Yt)}}Zt.push(fr(Et,At,Gt,xe.properties))}function ar(Zt,xe){xe.push(Cr(Zt[0]),Ia(Zt[1]),0)}function ur(Zt,xe,Le,$e){let yt,At,bt=0;for(let Et=0;Et<Zt.length;Et++){const Wt=Cr(Zt[Et][0]),Yt=Ia(Zt[Et][1]);xe.push(Wt,Yt,0),Et>0&&(bt+=$e?(yt*Yt-Wt*At)/2:Math.sqrt(Math.pow(Wt-yt,2)+Math.pow(Yt-At,2))),yt=Wt,At=Yt}const Gt=xe.length-3;xe[2]=1,Ht(xe,0,Gt,Le),xe[Gt+2]=1,xe.size=Math.abs(bt),xe.start=0,xe.end=xe.size}function or(Zt,xe,Le,$e){for(let yt=0;yt<Zt.length;yt++){const At=[];ur(Zt[yt],At,Le,$e),xe.push(At)}}function Cr(Zt){return Zt/360+.5}function Ia(Zt){const xe=Math.sin(Zt*Math.PI/180),Le=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Le<0?0:Le>1?1:Le}function Fr(Zt,xe,Le,$e,yt,At,bt,Gt){if($e/=xe,At>=(Le/=xe)&&bt<$e)return Zt;if(bt<Le||At>=$e)return null;const Et=[];for(const Wt of Zt){const Yt=Wt.geometry;let Kt=Wt.type;const Sa=yt===0?Wt.minX:Wt.minY,Fa=yt===0?Wt.maxX:Wt.maxY;if(Sa>=Le&&Fa<$e){Et.push(Wt);continue}if(Fa<Le||Sa>=$e)continue;let qa=[];if(Kt==="Point"||Kt==="MultiPoint")tn(Yt,qa,Le,$e,yt);else if(Kt==="LineString")lr(Yt,qa,Le,$e,yt,!1,Gt.lineMetrics);else if(Kt==="MultiLineString")na(Yt,qa,Le,$e,yt,!1);else if(Kt==="Polygon")na(Yt,qa,Le,$e,yt,!0);else if(Kt==="MultiPolygon")for(const br of Yt){const Ir=[];na(br,Ir,Le,$e,yt,!0),Ir.length&&qa.push(Ir)}if(qa.length){if(Gt.lineMetrics&&Kt==="LineString"){for(const br of qa)Et.push(fr(Wt.id,Kt,br,Wt.tags));continue}Kt!=="LineString"&&Kt!=="MultiLineString"||(qa.length===1?(Kt="LineString",qa=qa[0]):Kt="MultiLineString"),Kt!=="Point"&&Kt!=="MultiPoint"||(Kt=qa.length===3?"Point":"MultiPoint"),Et.push(fr(Wt.id,Kt,qa,Wt.tags))}}return Et.length?Et:null}function tn(Zt,xe,Le,$e,yt){for(let At=0;At<Zt.length;At+=3){const bt=Zt[At+yt];bt>=Le&&bt<=$e&&Oa(xe,Zt[At],Zt[At+1],Zt[At+2])}}function lr(Zt,xe,Le,$e,yt,At,bt){let Gt=wr(Zt);const Et=yt===0?ra:ja;let Wt,Yt,Kt=Zt.start;for(let Ir=0;Ir<Zt.length-3;Ir+=3){const Lr=Zt[Ir],Wr=Zt[Ir+1],Un=Zt[Ir+2],ri=Zt[Ir+3],Jr=Zt[Ir+4],Cn=yt===0?Lr:Wr,Qr=yt===0?ri:Jr;let jn=!1;bt&&(Wt=Math.sqrt(Math.pow(Lr-ri,2)+Math.pow(Wr-Jr,2))),Cn<Le?Qr>Le&&(Yt=Et(Gt,Lr,Wr,ri,Jr,Le),bt&&(Gt.start=Kt+Wt*Yt)):Cn>$e?Qr<$e&&(Yt=Et(Gt,Lr,Wr,ri,Jr,$e),bt&&(Gt.start=Kt+Wt*Yt)):Oa(Gt,Lr,Wr,Un),Qr<Le&&Cn>=Le&&(Yt=Et(Gt,Lr,Wr,ri,Jr,Le),jn=!0),Qr>$e&&Cn<=$e&&(Yt=Et(Gt,Lr,Wr,ri,Jr,$e),jn=!0),!At&&jn&&(bt&&(Gt.end=Kt+Wt*Yt),xe.push(Gt),Gt=wr(Zt)),bt&&(Kt+=Wt)}let Sa=Zt.length-3;const Fa=Zt[Sa],qa=Zt[Sa+1],br=yt===0?Fa:qa;br>=Le&&br<=$e&&Oa(Gt,Fa,qa,Zt[Sa+2]),Sa=Gt.length-3,At&&Sa>=3&&(Gt[Sa]!==Gt[0]||Gt[Sa+1]!==Gt[1])&&Oa(Gt,Gt[0],Gt[1],Gt[2]),Gt.length&&xe.push(Gt)}function wr(Zt){const xe=[];return xe.size=Zt.size,xe.start=Zt.start,xe.end=Zt.end,xe}function na(Zt,xe,Le,$e,yt,At){for(const bt of Zt)lr(bt,xe,Le,$e,yt,At,!1)}function Oa(Zt,xe,Le,$e){Zt.push(xe,Le,$e)}function ra(Zt,xe,Le,$e,yt,At){const bt=(At-xe)/($e-xe);return Oa(Zt,At,Le+(yt-Le)*bt,1),bt}function ja(Zt,xe,Le,$e,yt,At){const bt=(At-Le)/(yt-Le);return Oa(Zt,xe+($e-xe)*bt,At,1),bt}function gr(Zt,xe){const Le=[];for(let $e=0;$e<Zt.length;$e++){const yt=Zt[$e],At=yt.type;let bt;if(At==="Point"||At==="MultiPoint"||At==="LineString")bt=Tn(yt.geometry,xe);else if(At==="MultiLineString"||At==="Polygon"){bt=[];for(const Gt of yt.geometry)bt.push(Tn(Gt,xe))}else if(At==="MultiPolygon"){bt=[];for(const Gt of yt.geometry){const Et=[];for(const Wt of Gt)Et.push(Tn(Wt,xe));bt.push(Et)}}Le.push(fr(yt.id,At,bt,yt.tags))}return Le}function Tn(Zt,xe){const Le=[];Le.size=Zt.size,Zt.start!==void 0&&(Le.start=Zt.start,Le.end=Zt.end);for(let $e=0;$e<Zt.length;$e+=3)Le.push(Zt[$e]+xe,Zt[$e+1],Zt[$e+2]);return Le}function an(Zt,xe){if(Zt.transformed)return Zt;const Le=1<<Zt.z,$e=Zt.x,yt=Zt.y;for(const At of Zt.features){const bt=At.geometry,Gt=At.type;if(At.geometry=[],Gt===1)for(let Et=0;Et<bt.length;Et+=2)At.geometry.push(dn(bt[Et],bt[Et+1],xe,Le,$e,yt));else for(let Et=0;Et<bt.length;Et++){const Wt=[];for(let Yt=0;Yt<bt[Et].length;Yt+=2)Wt.push(dn(bt[Et][Yt],bt[Et][Yt+1],xe,Le,$e,yt));At.geometry.push(Wt)}}return Zt.transformed=!0,Zt}function dn(Zt,xe,Le,$e,yt,At){return[Math.round(Le*(Zt*$e-yt)),Math.round(Le*(xe*$e-At))]}function Yr(Zt,xe,Le,$e,yt){const At=xe===yt.maxZoom?0:yt.tolerance/((1<<xe)*yt.extent),bt={features:[],numPoints:0,numSimplified:0,numFeatures:Zt.length,source:null,x:Le,y:$e,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Gt of Zt)Pr(bt,Gt,At,yt);return bt}function Pr(Zt,xe,Le,$e){const yt=xe.geometry,At=xe.type,bt=[];if(Zt.minX=Math.min(Zt.minX,xe.minX),Zt.minY=Math.min(Zt.minY,xe.minY),Zt.maxX=Math.max(Zt.maxX,xe.maxX),Zt.maxY=Math.max(Zt.maxY,xe.maxY),At==="Point"||At==="MultiPoint")for(let Gt=0;Gt<yt.length;Gt+=3)bt.push(yt[Gt],yt[Gt+1]),Zt.numPoints++,Zt.numSimplified++;else if(At==="LineString")ki(bt,yt,Zt,Le,!1,!1);else if(At==="MultiLineString"||At==="Polygon")for(let Gt=0;Gt<yt.length;Gt++)ki(bt,yt[Gt],Zt,Le,At==="Polygon",Gt===0);else if(At==="MultiPolygon")for(let Gt=0;Gt<yt.length;Gt++){const Et=yt[Gt];for(let Wt=0;Wt<Et.length;Wt++)ki(bt,Et[Wt],Zt,Le,!0,Wt===0)}if(bt.length){let Gt=xe.tags||null;if(At==="LineString"&&$e.lineMetrics){Gt={};for(const Wt in xe.tags)Gt[Wt]=xe.tags[Wt];Gt.mapbox_clip_start=yt.start/yt.size,Gt.mapbox_clip_end=yt.end/yt.size}const Et={geometry:bt,type:At==="Polygon"||At==="MultiPolygon"?3:At==="LineString"||At==="MultiLineString"?2:1,tags:Gt};xe.id!==null&&(Et.id=xe.id),Zt.features.push(Et)}}function ki(Zt,xe,Le,$e,yt,At){const bt=$e*$e;if($e>0&&xe.size<(yt?bt:$e))return void(Le.numPoints+=xe.length/3);const Gt=[];for(let Et=0;Et<xe.length;Et+=3)($e===0||xe[Et+2]>bt)&&(Le.numSimplified++,Gt.push(xe[Et],xe[Et+1])),Le.numPoints++;yt&&function(Et,Wt){let Yt=0;for(let Kt=0,Sa=Et.length,Fa=Sa-2;Kt<Sa;Fa=Kt,Kt+=2)Yt+=(Et[Kt]-Et[Fa])*(Et[Kt+1]+Et[Fa+1]);if(Yt>0===Wt)for(let Kt=0,Sa=Et.length;Kt<Sa/2;Kt+=2){const Fa=Et[Kt],qa=Et[Kt+1];Et[Kt]=Et[Sa-2-Kt],Et[Kt+1]=Et[Sa-1-Kt],Et[Sa-2-Kt]=Fa,Et[Sa-1-Kt]=qa}}(Gt,At),Zt.push(Gt)}const gi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class oi{constructor(xe,Le){const $e=(Le=this.options=function(At,bt){for(const Gt in bt)At[Gt]=bt[Gt];return At}(Object.create(gi),Le)).debug;if($e&&console.time("preprocess data"),Le.maxZoom<0||Le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Le.promoteId&&Le.generateId)throw new Error("promoteId and generateId cannot be used together.");let yt=function(At,bt){const Gt=[];if(At.type==="FeatureCollection")for(let Et=0;Et<At.features.length;Et++)za(Gt,At.features[Et],bt,Et);else za(Gt,At.type==="Feature"?At:{geometry:At},bt);return Gt}(xe,Le);this.tiles={},this.tileCoords=[],$e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Le.indexMaxZoom,Le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),yt=function(At,bt){const Gt=bt.buffer/bt.extent;let Et=At;const Wt=Fr(At,1,-1-Gt,Gt,0,-1,2,bt),Yt=Fr(At,1,1-Gt,2+Gt,0,-1,2,bt);return(Wt||Yt)&&(Et=Fr(At,1,-Gt,1+Gt,0,-1,2,bt)||[],Wt&&(Et=gr(Wt,1).concat(Et)),Yt&&(Et=Et.concat(gr(Yt,-1)))),Et}(yt,Le),yt.length&&this.splitTile(yt,0,0,0),$e&&(yt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(xe,Le,$e,yt,At,bt,Gt){const Et=[xe,Le,$e,yt],Wt=this.options,Yt=Wt.debug;for(;Et.length;){yt=Et.pop(),$e=Et.pop(),Le=Et.pop(),xe=Et.pop();const Kt=1<<Le,Sa=Cs(Le,$e,yt);let Fa=this.tiles[Sa];if(!Fa&&(Yt>1&&console.time("creation"),Fa=this.tiles[Sa]=Yr(xe,Le,$e,yt,Wt),this.tileCoords.push({z:Le,x:$e,y:yt}),Yt)){Yt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Le,$e,yt,Fa.numFeatures,Fa.numPoints,Fa.numSimplified),console.timeEnd("creation"));const jn=`z${Le}`;this.stats[jn]=(this.stats[jn]||0)+1,this.total++}if(Fa.source=xe,At==null){if(Le===Wt.indexMaxZoom||Fa.numPoints<=Wt.indexMaxPoints)continue}else{if(Le===Wt.maxZoom||Le===At)continue;if(At!=null){const jn=At-Le;if($e!==bt>>jn||yt!==Gt>>jn)continue}}if(Fa.source=null,xe.length===0)continue;Yt>1&&console.time("clipping");const qa=.5*Wt.buffer/Wt.extent,br=.5-qa,Ir=.5+qa,Lr=1+qa;let Wr=null,Un=null,ri=null,Jr=null,Cn=Fr(xe,Kt,$e-qa,$e+Ir,0,Fa.minX,Fa.maxX,Wt),Qr=Fr(xe,Kt,$e+br,$e+Lr,0,Fa.minX,Fa.maxX,Wt);xe=null,Cn&&(Wr=Fr(Cn,Kt,yt-qa,yt+Ir,1,Fa.minY,Fa.maxY,Wt),Un=Fr(Cn,Kt,yt+br,yt+Lr,1,Fa.minY,Fa.maxY,Wt),Cn=null),Qr&&(ri=Fr(Qr,Kt,yt-qa,yt+Ir,1,Fa.minY,Fa.maxY,Wt),Jr=Fr(Qr,Kt,yt+br,yt+Lr,1,Fa.minY,Fa.maxY,Wt),Qr=null),Yt>1&&console.timeEnd("clipping"),Et.push(Wr||[],Le+1,2*$e,2*yt),Et.push(Un||[],Le+1,2*$e,2*yt+1),Et.push(ri||[],Le+1,2*$e+1,2*yt),Et.push(Jr||[],Le+1,2*$e+1,2*yt+1)}}getTile(xe,Le,$e){xe=+xe,Le=+Le,$e=+$e;const yt=this.options,{extent:At,debug:bt}=yt;if(xe<0||xe>24)return null;const Gt=1<<xe,Et=Cs(xe,Le=Le+Gt&Gt-1,$e);if(this.tiles[Et])return an(this.tiles[Et],At);bt>1&&console.log("drilling down to z%d-%d-%d",xe,Le,$e);let Wt,Yt=xe,Kt=Le,Sa=$e;for(;!Wt&&Yt>0;)Yt--,Kt>>=1,Sa>>=1,Wt=this.tiles[Cs(Yt,Kt,Sa)];return Wt&&Wt.source?(bt>1&&(console.log("found parent tile z%d-%d-%d",Yt,Kt,Sa),console.time("drilling down")),this.splitTile(Wt.source,Yt,Kt,Sa,xe,Le,$e),bt>1&&console.timeEnd("drilling down"),this.tiles[Et]?an(this.tiles[Et],At):null):null}}function Cs(Zt,xe,Le){return 32*((1<<Zt)*Le+xe)+Zt}function Aa(Zt,xe){const Le=Zt.tileID.canonical;if(!this._geoJSONIndex)return void xe(null,null);const $e=this._geoJSONIndex.getTile(Le.z,Le.x,Le.y);if(!$e)return void xe(null,null);const yt=new ge($e.features);let At=Se(yt);At.byteOffset===0&&At.byteLength===At.buffer.byteLength||(At=new Uint8Array(At)),xe(null,{vectorTile:yt,rawData:At.buffer})}class mr extends H{constructor(xe,Le,$e,yt,At,bt){super(xe,Le,$e,yt,Aa,bt),At&&(this.loadGeoJSON=At),this._dynamicIndex=new we}loadData(xe,Le){const $e=xe&&xe.request,yt=$e&&$e.collectResourceTiming;this.loadGeoJSON(xe,(At,bt)=>{if(At||!bt)return Le(At);if(typeof bt!="object")return Le(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));{try{if(xe.filter){const Et=n.X(xe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Et.result==="error")throw new Error(Et.value.map(Wt=>`${Wt.key}: ${Wt.message}`).join(", "));bt.features=bt.features.filter(Wt=>Et.value.evaluate({zoom:0},Wt))}xe.dynamic?(bt.type==="Feature"&&(bt={type:"FeatureCollection",features:[bt]}),xe.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(bt.features,this.loaded),xe.cluster&&(bt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=xe.cluster?new ut(function({superclusterOptions:Et,clusterProperties:Wt}){if(!Wt||!Et)return Et;const Yt={},Kt={},Sa={accumulated:null,zoom:0},Fa={properties:null},qa=Object.keys(Wt);for(const br of qa){const[Ir,Lr]=Wt[br],Wr=n.X(Lr),Un=n.X(typeof Ir=="string"?[Ir,["accumulated"],["get",br]]:Ir);Yt[br]=Wr.value,Kt[br]=Un.value}return Et.map=br=>{Fa.properties=br;const Ir={};for(const Lr of qa)Ir[Lr]=Yt[Lr].evaluate(Sa,Fa);return Ir},Et.reduce=(br,Ir)=>{Fa.properties=Ir;for(const Lr of qa)Sa.accumulated=br[Lr],br[Lr]=Kt[Lr].evaluate(Sa,Fa)},Et}(xe)).load(bt.features):xe.dynamic?this._dynamicIndex:function(Et,Wt){return new oi(Et,Wt)}(bt,xe.geojsonVtOptions)}catch(Et){return Le(Et)}const Gt={};if(yt){const Et=v($e);Et&&(Gt.resourceTiming={},Gt.resourceTiming[xe.source]=JSON.parse(JSON.stringify(Et)))}Le(null,Gt)}})}reloadTile(xe,Le){const $e=this.loaded;return $e&&$e[xe.uid]?xe.partial?Le(null,void 0):super.reloadTile(xe,Le):this.loadTile(xe,Le)}loadGeoJSON(xe,Le){if(xe.request)n.n(xe.request,Le);else{if(typeof xe.data!="string")return Le(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));try{return Le(null,JSON.parse(xe.data))}catch{return Le(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(xe,Le){try{Le(null,this._geoJSONIndex.getClusterExpansionZoom(xe.clusterId))}catch($e){Le($e)}}getClusterChildren(xe,Le){try{Le(null,this._geoJSONIndex.getChildren(xe.clusterId))}catch($e){Le($e)}}getClusterLeaves(xe,Le){try{Le(null,this._geoJSONIndex.getLeaves(xe.clusterId,xe.limit,xe.offset))}catch($e){Le($e)}}}class Zr{constructor(xe,Le){this.tileID=new n.aH(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.tileZoom=xe.tileZoom,this.uid=xe.uid,this.zoom=xe.zoom,this.canonical=xe.tileID.canonical,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=xe.projection,this.brightness=Le}parse(xe,Le,$e,yt){this.status="parsing";const At=new n.aH($e.tileID.overscaledZ,$e.tileID.wrap,$e.tileID.canonical.z,$e.tileID.canonical.x,$e.tileID.canonical.y),bt=[],Gt=Le.familiesBySource[$e.source],Et=new n.e0(At,$e.promoteId);return Et.bucketLayerIDs=[],Et.is3DTile=!0,n.ei(xe).then(Wt=>{if(!Wt)return yt(new Error("Could not parse tile"));const Yt=n.ej(Wt,1/n.cd($e.tileID.canonical)),Kt=Wt.json.extensionsUsed&&Wt.json.extensionsUsed.includes("MAPBOX_mesh_features")||Wt.json.asset.extras&&Wt.json.asset.extras.MAPBOX_mesh_features,Sa=Wt.json.extensionsUsed&&Wt.json.extensionsUsed.includes("EXT_meshopt_compression"),Fa=new n.aa(this.zoom,{brightness:this.brightness});for(const qa in Gt)for(const br of Gt[qa]){const Ir=br[0];Et.bucketLayerIDs.push(br.map(Wr=>n.C(Wr.id,Wr.scope))),Ir.recalculate(Fa,[]);const Lr=new n.ek(br,Yt,At,Kt,Sa,this.brightness,Et);Kt||(Lr.needsUpload=!0),bt.push(Lr),Lr.evaluate(Ir)}this.status="done",yt(null,{buckets:bt,featureIndex:Et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(Wt=>yt(new Error(Wt.message)))}}class ti{constructor(xe,Le,$e,yt,At,bt){this.actor=xe,this.layerIndex=Le,this.availableImages=$e,this.brightness=bt,this.loading={},this.loaded={}}loadTile(xe,Le){const $e=xe.uid,yt=this.loading[$e]=new Zr(xe,this.brightness);n.bj(xe.request,(At,bt)=>{const Gt=!this.loading[$e];return delete this.loading[$e],Gt||At?(yt.status="done",Gt||(this.loaded[$e]=yt),Le(At)):bt&&bt.byteLength!==0?void yt.parse(bt,this.layerIndex,xe,(Et,Wt)=>{yt.status="done",this.loaded=this.loaded||{},this.loaded[$e]=yt,Et||!Wt?Le(Et):Le(null,Wt)}):(yt.status="done",this.loaded[$e]=yt,Le())})}reloadTile(xe,Le){const $e=this.loaded,yt=xe.uid;if($e&&$e[yt]){const At=$e[yt];At.projection=xe.projection,At.brightness=xe.brightness;const bt=(Gt,Et)=>{At.reloadCallback&&(delete At.reloadCallback,this.loadTile(xe,Le)),Le(Gt,Et)};At.status==="parsing"?At.reloadCallback=bt:At.status==="done"&&this.loadTile(xe,Le)}}abortTile(xe,Le){const $e=xe.uid;this.loading[$e]&&delete this.loading[$e],Le()}removeTile(xe,Le){const $e=this.loaded,yt=xe.uid;$e&&$e[yt]&&delete $e[yt],Le()}}class Rn{constructor(xe){this.self=xe,this.actor=new n.el(xe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.y,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:H,geojson:mr,"raster-dem":W,"raster-array":oe,"batched-model":ti},this.workerSources={},this.self.registerWorkerSource=(Le,$e)=>{if(this.workerSourceTypes[Le])throw new Error(`Worker source with name "${Le}" already registered.`);this.workerSourceTypes[Le]=$e},this.self.registerRTLTextPlugin=Le=>{if(n.em.isParsed())throw new Error("RTL text plugin already registered.");n.em.applyArabicShaping=Le.applyArabicShaping,n.em.processBidirectionalText=Le.processBidirectionalText,n.em.processStyledBidirectionalText=Le.processStyledBidirectionalText}}clearCaches(xe,Le,$e){delete this.layerIndexes[xe],delete this.availableImages[xe],delete this.workerSources[xe],$e()}checkIfReady(xe,Le,$e){$e()}setReferrer(xe,Le){this.referrer=Le}spriteLoaded(xe,{scope:Le,isLoaded:$e}){if(this.isSpriteLoaded[xe]||(this.isSpriteLoaded[xe]={}),this.isSpriteLoaded[xe][Le]=$e,this.workerSources[xe]&&this.workerSources[xe][Le])for(const yt in this.workerSources[xe][Le]){const At=this.workerSources[xe][Le][yt];for(const bt in At){const Gt=At[bt];Gt instanceof H&&(Gt.isSpriteLoaded=$e,Gt.fire(new n.A("isSpriteLoaded")))}}}setImages(xe,{scope:Le,images:$e},yt){if(this.availableImages[xe]||(this.availableImages[xe]={}),this.availableImages[xe][Le]=$e,this.workerSources[xe]&&this.workerSources[xe][Le]){for(const At in this.workerSources[xe][Le]){const bt=this.workerSources[xe][Le][At];for(const Gt in bt)bt[Gt].availableImages=$e}yt()}else yt()}setProjection(xe,Le){this.projections[xe]=n.bP(Le)}setBrightness(xe,Le,$e){this.brightness=Le,$e()}setLayers(xe,Le,$e){this.getLayerIndex(xe,Le.scope).replace(Le.layers,Le.options),$e()}updateLayers(xe,Le,$e){this.getLayerIndex(xe,Le.scope).update(Le.layers,Le.removedIds,Le.options),$e()}loadTile(xe,Le,$e){Le.projection=this.projections[xe]||this.defaultProjection,this.getWorkerSource(xe,Le.type,Le.source,Le.scope).loadTile(Le,$e)}decodeRasterArray(xe,Le,$e){this.getWorkerSource(xe,Le.type,Le.source,Le.scope).decodeRasterArray(Le,$e)}reloadTile(xe,Le,$e){Le.projection=this.projections[xe]||this.defaultProjection,this.getWorkerSource(xe,Le.type,Le.source,Le.scope).reloadTile(Le,$e)}abortTile(xe,Le,$e){this.getWorkerSource(xe,Le.type,Le.source,Le.scope).abortTile(Le,$e)}removeTile(xe,Le,$e){this.getWorkerSource(xe,Le.type,Le.source,Le.scope).removeTile(Le,$e)}removeSource(xe,Le,$e){if(!(this.workerSources[xe]&&this.workerSources[xe][Le.scope]&&this.workerSources[xe][Le.scope][Le.type]&&this.workerSources[xe][Le.scope][Le.type][Le.source]))return;const yt=this.workerSources[xe][Le.scope][Le.type][Le.source];delete this.workerSources[xe][Le.scope][Le.type][Le.source],yt.removeSource!==void 0?yt.removeSource(Le,$e):$e()}loadWorkerSource(xe,Le,$e){try{this.self.importScripts(Le.url),$e()}catch(yt){$e(yt.toString())}}syncRTLPluginState(xe,Le,$e){try{n.em.setState(Le);const yt=n.em.getPluginURL();if(n.em.isLoaded()&&!n.em.isParsed()&&yt!=null){this.self.importScripts(yt);const At=n.em.isParsed();$e(At?void 0:new Error(`RTL Text Plugin failed to import scripts from ${yt}`),At)}}catch(yt){$e(yt.toString())}}setDracoUrl(xe,Le){this.dracoUrl=Le}getAvailableImages(xe,Le){this.availableImages[xe]||(this.availableImages[xe]={});let $e=this.availableImages[xe][Le];return $e||($e=[]),$e}getLayerIndex(xe,Le){this.layerIndexes[xe]||(this.layerIndexes[xe]={});let $e=this.layerIndexes[xe][Le];return $e||($e=this.layerIndexes[xe][Le]=new N,$e.scope=Le),$e}getWorkerSource(xe,Le,$e,yt){const At=this.workerSources;return At[xe]||(At[xe]={}),At[xe][yt]||(At[xe][yt]={}),At[xe][yt][Le]||(At[xe][yt][Le]={}),this.isSpriteLoaded[xe]||(this.isSpriteLoaded[xe]={}),At[xe][yt][Le][$e]||(At[xe][yt][Le][$e]=new this.workerSourceTypes[Le]({send:(bt,Gt,Et,Wt,Yt,Kt)=>{this.actor.send(bt,Gt,Et,xe,Yt,Kt)},scheduler:this.actor.scheduler},this.getLayerIndex(xe,yt),this.getAvailableImages(xe,yt),this.isSpriteLoaded[xe][yt],void 0,this.brightness)),At[xe][yt][Le][$e]}rasterizeImages(xe,Le,$e){const yt=new Map;for(const[At,{image:bt,imageVariant:Gt}]of Le.tasks.entries()){const Et=this.imageRasterizer.rasterize(Gt,bt,Le.scope,xe);yt.set(At,Et)}$e(void 0,yt)}removeRasterizedImages(xe,Le,$e){this.imageRasterizer.removeImagesFromCacheByIds(Le.imageIds,Le.scope,xe),$e()}enforceCacheSizeLimit(xe,Le){n.en(Le)}getWorkerPerformanceMetrics(xe,Le,$e){$e(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Rn(self)),Rn}),l(["./shared"],function(n){var v="3.11.0";const R={create:"create",load:"load",fullLoad:"fullLoad"},x={mark(y){performance.mark(y)},measure(y,o,d){performance.measure(y,o,d)}};function N(y){const o=y.name.split("?")[0];return n.a(o)&&o.includes("mapbox-gl.js")?"javascript":n.a(o)&&o.includes("mapbox-gl.css")?"css":n.b(o)?"fontRange":n.c(o)?"sprite":n.i(o)?"style":n.d(o)?"tilejson":"other"}var I,k={},Z=function(){if(I)return k;function y(A){return!o(A)}function o(A){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,E,F=new Blob([""],{type:"text/javascript"}),q=URL.createObjectURL(F);try{E=new Worker(q),S=!0}catch{S=!1}return E&&E.terminate(),URL.revokeObjectURL(q),S}()?function(){var S=document.createElement("canvas");S.width=S.height=1;var E=S.getContext("2d");if(!E)return!1;var F=E.getImageData(0,0,1,1);return F&&F.width===S.width}()?(d[T=A&&A.failIfMajorPerformanceCaveat]===void 0&&(d[T]=function(S){var E,F=function(q){var K=document.createElement("canvas"),Y=Object.create(y.webGLContextAttributes);return Y.failIfMajorPerformanceCaveat=q,K.getContext("webgl2",Y)}(S);if(!F)return!1;try{E=F.createShader(F.VERTEX_SHADER)}catch{return!1}return!(!E||F.isContextLost())&&(F.shaderSource(E,"void main() {}"),F.compileShader(E),F.getShaderParameter(E,F.COMPILE_STATUS)===!0)}(T)),d[T]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var T}I=1,k.supported=y,k.notSupportedReason=o;var d={};return y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},k}();function $(y,o,d){const A=document.createElement(y);return o!=null&&(A.className=o),d&&d.appendChild(A),A}function H(y,o,d){const A=document.createElementNS("http://www.w3.org/2000/svg",y);for(const T of Object.keys(o))A.setAttributeNS(null,T,String(o[T]));return d&&d.appendChild(A),A}const W=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ee=W&&W.userSelect!==void 0?"userSelect":"WebkitUserSelect";let oe;function pe(){W&&ee&&(oe=W[ee],W[ee]="none")}function le(){W&&ee&&(W[ee]=oe)}function ge(y){y.preventDefault(),y.stopPropagation(),window.removeEventListener("click",ge,!0)}function ue(){window.addEventListener("click",ge,!0),window.setTimeout(()=>{window.removeEventListener("click",ge,!0)},0)}function Re(y,o){const d=y.getBoundingClientRect();return ne(y,d,o)}function we(y,o){const d=y.getBoundingClientRect(),A=[];for(let T=0;T<o.length;T++)A.push(ne(y,d,o[T]));return A}function Ne(y){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&y.button===2&&y.ctrlKey?0:y.button}function ne(y,o,d){const A=y.offsetWidth===o.width?1:y.offsetWidth/o.width;return new n.P((d.clientX-o.left)*A,(d.clientY-o.top)*A)}const _e="01",ke="NO_ACCESS_TOKEN";class Pe{constructor(o,d,A){this._transformRequestFn=o,this._customAccessToken=d,this._silenceAuthErrors=!!A,this._createSkuToken()}_createSkuToken(){const o=function(){let d="";for(let A=0;A<10;A++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",_e,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,d){return this._transformRequestFn&&this._transformRequestFn(o,d)||{url:o}}normalizeStyleURL(o,d){if(!n.f(o))return o;const A=De(o);return A.params.push(`sdk=js-${v}`),A.path=`/styles/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeGlyphsURL(o,d){if(!n.f(o))return o;const A=De(o);return A.path=`/fonts/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeModelURL(o,d){if(!n.f(o))return o;const A=De(o);return A.path=`/models/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeSourceURL(o,d,A,T){if(!n.f(o))return o;const S=De(o);return S.path=`/v4/${S.authority}.json`,S.params.push("secure"),A&&S.params.push(`language=${A}`),T&&S.params.push(`worldview=${T}`),this._makeAPIURL(S,this._customAccessToken||d)}normalizeIconsetURL(o,d){const A=De(o);return n.f(o)?(A.path=`/styles/v1${A.path}/iconset.pbf`,this._makeAPIURL(A,this._customAccessToken||d)):qe(A)}normalizeSpriteURL(o,d,A,T){const S=De(o);return n.f(o)?(S.path=`/styles/v1${S.path}/sprite${d}${A}`,this._makeAPIURL(S,this._customAccessToken||T)):(S.path+=`${d}${A}`,qe(S))}normalizeTileURL(o,d,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!n.f(o))return o;const T=De(o);T.path=T.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||A&&T.authority!=="raster"&&A===512?"@2x":""}${n.m.supported?".webp":"$1"}`),T.authority==="raster"?T.path=`/${n.e.RASTER_URL_PREFIX}${T.path}`:T.authority==="rasterarrays"?T.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${T.path}`:T.authority==="3dtiles"?T.path=`/${n.e.TILES3D_URL_PREFIX}${T.path}`:(T.path=T.path.replace(/^.+\/v4\//,"/"),T.path=`/${n.e.TILE_URL_VERSION}${T.path}`);const S=this._customAccessToken||function(E){for(const F of E){const q=F.match(/^access_token=(.*)$/);if(q)return q[1]}return null}(T.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&S&&this._skuToken&&T.params.push(`sku=${this._skuToken}`),this._makeAPIURL(T,S)}canonicalizeTileURL(o,d){const A=De(o);if(!A.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!A.path.match(/\.[\w]+$/))return o;let T="mapbox://";A.path.match(/^\/raster\/v1\//)?T+=`raster/${A.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:A.path.match(/^\/rasterarrays\/v1\//)?T+=`rasterarrays/${A.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:T+=`tiles/${A.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let S=A.params;return d&&(S=S.filter(E=>!E.match(/^access_token=/))),S.length&&(T+=`?${S.join("&")}`),T}canonicalizeTileset(o,d){const A=!!d&&n.f(d),T=[];for(const S of o.tiles||[])n.h(S)?T.push(this.canonicalizeTileURL(S,A)):T.push(S);return T}_makeAPIURL(o,d){const A="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",T=De(n.e.API_URL);if(o.protocol=T.protocol,o.authority=T.authority,o.protocol==="http"){const S=o.params.indexOf("secure");S>=0&&o.params.splice(S,1)}if(T.path!=="/"&&(o.path=`${T.path}${o.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return qe(o);if(d=d||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${A}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${A}`)}return o.params=o.params.filter(S=>S.indexOf("access_token")===-1),o.params.push(`access_token=${d||""}`),qe(o)}}const Ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function De(y){const o=y.match(Ee);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function qe(y){const o=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${o}`}const Oe="mapbox.eventData";function He(y){if(!y)return null;const o=y.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(n.j(o[1]))}catch{return null}}class Ue{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const d=He(n.e.ACCESS_TOKEN);let A="";return A=d&&d.u?n.k(d.u):n.e.ACCESS_TOKEN||"",o?`${Oe}.${o}:${A}`:`${Oe}:${A}`}fetchEventData(){const o=n.s("localStorage"),d=this.getStorageKey(),A=this.getStorageKey("uuid");if(o)try{const T=localStorage.getItem(d);T&&(this.eventData=JSON.parse(T));const S=localStorage.getItem(A);S&&(this.anonId=S)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const o=n.s("localStorage"),d=this.getStorageKey(),A=this.getStorageKey("uuid"),T=this.anonId;if(o&&T)try{localStorage.setItem(A,T),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,d,A,T){if(!n.e.EVENTS_URL)return;const S=De(n.e.EVENTS_URL);S.params.push(`access_token=${T||n.e.ACCESS_TOKEN||""}`);const E={event:this.type,created:new Date(o).toISOString()},F=d?n.l(E,d):E,q={url:qe(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([F])};this.pendingRequest=n.p(q,K=>{this.pendingRequest=null,A(K),this.saveEventData(),this.processRequests(T)})}queueRequest(o,d){this.queue.push(o),this.processRequests(d)}}const ct=new class extends Ue{constructor(y){super("appUserTurnstile"),this._customAccessToken=y}postTurnstileEvent(y,o){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(y)&&y.some(d=>n.f(d)||n.h(d))&&this.queueRequest(Date.now(),o)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=He(n.e.ACCESS_TOKEN),d=o?o.u:n.e.ACCESS_TOKEN;let A=d!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),A=!0);const T=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),E=new Date(T),F=(T-this.eventData.lastSuccess)/864e5;A=A||F>=1||F<-1||S.getDate()!==E.getDate()}else A=!0;A?this.postEvent(T,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:_e,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=T,this.eventData.tokenU=d)},y):this.processRequests()}},Se=ct.postTurnstileEvent.bind(ct),Ie=new class extends Ue{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(y,o,d,A){this.skuToken=o,this.errorCb=A,n.e.EVENTS_URL&&(d||n.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(ke)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:_e,skuToken:this.skuToken,userId:this.anonId},A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},y))}remove(){this.errorCb=null}},je=Ie.postMapLoadEvent.bind(Ie),Ze=new class extends Ue{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(y){let o=this.mapInstanceIdMap.get(y);return o||(o=n.u(),this.mapInstanceIdMap.set(y,o)),o}getEventId(y){const o=this.eventIdPerMapInstanceMap.get(y)||0;return this.eventIdPerMapInstanceMap.set(y,o+1),o}postStyleLoadEvent(y,o){const{map:d,style:A,importedStyles:T}=o;if(!n.e.EVENTS_URL||!y&&!n.e.ACCESS_TOKEN)return;const S=this.getMapInstanceId(d),E={mapInstanceId:S,eventId:this.getEventId(S),style:A};T.length&&(E.importedStyles=T),this.queueRequest({timestamp:Date.now(),payload:E},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:d}=this.queue.shift();this.postEvent(o,d,()=>{},y)}},Be=Ze.postStyleLoadEvent.bind(Ze),Je=new class extends Ue{constructor(){super("gljs.performance")}postPerformanceEvent(y,o){n.e.EVENTS_URL&&(y||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:d}=this.queue.shift(),A=function(T){const S=performance.getEntriesByType("resource"),E=performance.getEntriesByType("mark"),F=function(me){const be={};if(me){for(const Te in me)if(Te!=="other")for(const ze of me[Te]){const Fe=`${Te}ResolveRangeMin`,Ke=`${Te}ResolveRangeMax`,nt=`${Te}RequestCount`,at=`${Te}RequestCachedCount`;be[Fe]=Math.min(be[Fe]||1/0,ze.startTime),be[Ke]=Math.max(be[Ke]||-1/0,ze.responseEnd);const pt=st=>{be[st]===void 0&&(be[st]=0),++be[st]};ze.transferSize!==void 0&&ze.transferSize===0&&pt(at),pt(nt)}}return be}(function(me,be){const Te={};if(me)for(const ze of me){const Fe=be(ze);Te[Fe]===void 0&&(Te[Fe]=[]),Te[Fe].push(ze)}return Te}(S,N)),q=window.devicePixelRatio,K=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Y=K?K.effectiveType:void 0,ae={counters:[],metadata:[],attributes:[]},re=(me,be,Te)=>{Te!=null&&me.push({name:be,value:Te.toString()})};for(const me in F)re(ae.counters,me,F[me]);if(T.interactionRange[0]!==1/0&&T.interactionRange[1]!==-1/0&&(re(ae.counters,"interactionRangeMin",T.interactionRange[0]),re(ae.counters,"interactionRangeMax",T.interactionRange[1])),E)for(const me of Object.keys(R)){const be=R[me],Te=E.find(ze=>ze.name===be);Te&&re(ae.counters,be,Te.startTime)}return re(ae.counters,"visibilityHidden",T.visibilityHidden),re(ae.attributes,"style",function(me){if(me)for(const be of me){const Te=be.name.split("?")[0];if(n.i(Te)){const ze=Te.split("/").slice(-2);if(ze.length===2)return`mapbox://styles/${ze[0]}/${ze[1]}`}}}(S)),re(ae.attributes,"terrainEnabled",T.terrainEnabled?"true":"false"),re(ae.attributes,"fogEnabled",T.fogEnabled?"true":"false"),re(ae.attributes,"projection",T.projection),re(ae.attributes,"zoom",T.zoom),re(ae.metadata,"devicePixelRatio",q),re(ae.metadata,"connectionEffectiveType",Y),re(ae.metadata,"navigatorUserAgent",navigator.userAgent),re(ae.metadata,"screenWidth",window.screen.width),re(ae.metadata,"screenHeight",window.screen.height),re(ae.metadata,"windowWidth",window.innerWidth),re(ae.metadata,"windowHeight",window.innerHeight),re(ae.metadata,"mapWidth",T.width/q),re(ae.metadata,"mapHeight",T.height/q),re(ae.metadata,"webglRenderer",T.renderer),re(ae.metadata,"webglVendor",T.vendor),re(ae.metadata,"sdkVersion",v),re(ae.metadata,"sdkIdentifier","mapbox-gl-js"),ae}(d);for(const T of A.metadata);for(const T of A.counters);for(const T of A.attributes);this.postEvent(o,A,()=>{},y)}},dt=Je.postPerformanceEvent.bind(Je),ut=new class extends Ue{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(y,o,d,A){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const T=De(n.e.API_URL+n.e.SESSION_PATH);T.params.push(`sku=${o||""}`),T.params.push(`access_token=${A||n.e.ACCESS_TOKEN||""}`);const S={url:qe(T),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(S,E=>{this.pendingRequest=null,d(E),this.saveEventData(),this.processRequests(A)})}getSessionAPI(y,o,d,A){this.skuToken=o,this.errorCb=A,n.e.SESSION_PATH&&n.e.API_URL&&(d||n.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(ke)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||this.getSession(d,this.skuToken,A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},y)}remove(){this.errorCb=null}},Ae=ut.getSessionAPI.bind(ut),Dt=new Set;function Lt(y,o){o?Dt.add(y):Dt.delete(y)}class fa{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,d){this._updatedSourceCaches[o]=d,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const d=o.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(o.id),this.setDirty()}removeLayer(o){const d=o.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][o.id]=o,this._updatedLayers[d].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const d in this._updatedLayers)o[d]=o[d]||{},o[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)o[d]=o[d]||{},o[d].removedIds=Object.keys(this._removedLayers[d]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(o){this._updatedImages.add(n.I.toString(o)),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Nt(y){const{userImage:o}=y;return!!(o&&o.render&&o.render())&&(y.data.replace(new Uint8Array(o.data.buffer)),!0)}class Ht extends n.E{constructor(o){super(),this._images={},this._iconsets={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.patternsInFlight=new Set,this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=o,o!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.y),this._imageRasterizer}createScope(o){this._images[o]={},this._iconsets[o]={},this.loaded[o]=!1,this.updatedImages[o]=new Set,this.patterns[o]={},this.callbackDispatchedThisFrame[o]=new Set,this.atlasImage[o]=new n.r({width:1,height:1})}createIconset(o,d){this._iconsets[o][d]={}}isLoaded(){for(const o in this.loaded)if(!this.loaded[o])return!1;return!0}setLoaded(o,d){if(this.loaded[d]!==o&&(this.loaded[d]=o,o)){for(const{ids:A,callback:T}of this.requestors)this._notify(A,d,T);this.requestors=[]}}hasImage(o,d){return!!this.getImage(o,d)}getImage(o,d){return(o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d])[o.name]}addImage(o,d,A){const T=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d];this._validate(o,A)&&(T[o.name]=A)}_validate(o,d){let A=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchX" value`))),A=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchY" value`))),A=!1),this._validateContent(d.content,d)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "content" value`))),A=!1),A}_validateStretch(o,d){if(!o)return!0;let A=0;for(const T of o){if(T[0]<A||T[1]<T[0]||d<T[1])return!1;A=T[1]}return!0}_validateContent(o,d){return o?o.length!==4||!d.usvg&&(o[0]<0||d.data.width<o[0]||o[1]<0||d.data.height<o[1]||o[2]<0||d.data.width<o[2]||o[3]<0||d.data.height<o[3])?!1:!(o[2]<o[0]||o[3]<o[1]):!0}updateImage(o,d,A){const T=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d];A.version=T[o.name].version+1,T[o.name]=A,this.updatedImages[d].add(o),this.removeFromImageRasterizerCache(o,d)}clearUpdatedImages(o){this.updatedImages[o].clear()}removeFromImageRasterizerCache(o,d){if(this.spriteFormat!=="raster")if(n.t()){const A={imageIds:[o],scope:d};this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",A)}else this.imageRasterizer.removeImagesFromCacheByIds([o],d)}removeImage(o,d){const A=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d],T=A[o.name];delete A[o.name],delete this.patterns[d][o.name],this.removeFromImageRasterizerCache(o,d),T.userImage&&T.userImage.onRemove&&T.userImage.onRemove()}listImages(o){const d=[];for(const A of Object.keys(this._images[o]))d.push(new n.I(A));for(const A in this._iconsets[o])for(const T of Object.keys(this._iconsets[o][A]))d.push(new n.I({name:T,iconsetId:A}));return d}getImages(o,d,A){let T=!0;const S=!!this.loaded[d];if(!S)for(const E of o)(E.iconsetId?this._iconsets[d][E.iconsetId]:this._images[d])[E.name]||(T=!1);S||T?this._notify(o,d,A):this.requestors.push({ids:o,scope:d,callback:A})}rasterizeImages({scope:o,tasks:d},A){const T=new Map;for(const[S,E]of d.entries()){const F=this.getImage(E.id,o);F&&T.set(S,{image:F,imageVariant:E})}this._rasterizeImages(o,T,A)}_rasterizeImages(o,d,A){if(n.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{tasks:d,scope:o},A);else{const T=new Map;for(const[S,{image:E,imageVariant:F}]of d.entries())T.set(S,this.imageRasterizer.rasterize(F,E,o,0));A(void 0,T)}}getUpdatedImages(o){return this.updatedImages[o]||new Set}_notify(o,d,A){const T=new Map;for(const S of o){S.iconsetId&&(this._iconsets[d][S.iconsetId]=this._iconsets[d][S.iconsetId]||{});const E=(S.iconsetId?this._iconsets[d][S.iconsetId]:this._images[d])[S.name];if(!E){if(S.iconsetId)continue;n.w(`Image "${S.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`),this.fire(new n.A("styleimagemissing",{id:S.name}));continue}const F={data:E.usvg?null:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,usvg:E.usvg,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)};E.usvg&&Object.assign(F,{width:E.icon.usvg_tree.width,height:E.icon.usvg_tree.height}),T.set(n.I.toString(S),F)}A(null,T)}getPixelSize(o){const{width:d,height:A}=this.atlasImage[o];return{width:d,height:A}}getPattern(o,d,A){const T=this.patterns[d][o.name],S=this.getImage(o,d);if(!S)return null;if(T){if(T.position.version===S.version)return T.position;T.position.version=S.version}else{if(S.usvg&&!S.data){const E=this.getPatternInFlightId(o.toString(),d);if(this.patternsInFlight.has(E))return null;this.patternsInFlight.add(E);const F=new n.B(o).scaleSelf(n.q.devicePixelRatio),q=new Map([[F.toString(),{image:S,imageVariant:F}]]);return this._rasterizeImages(d,q,(K,Y)=>this.storePatternImage(F,d,S,A,Y)),null}this.storePattern(o,d,S)}return this._updatePatternAtlas(d,A),this.patterns[d][o.name].position}getPatternInFlightId(o,d){return n.C(o,d)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(o,d,A,T,S){const E=o.toString(),F=S?S.get(E):void 0;F&&(A.data=F,this.storePattern(o.id,d,A),this._updatePatternAtlas(d,T),this.patternsInFlight.delete(this.getPatternInFlightId(o.id.toString(),d)))}storePattern(o,d,A){const T={w:A.data.width+2*n.F,h:A.data.height+2*n.F,x:0,y:0},S=new n.G(T,A,n.F);this.patterns[d][o.name]={bin:T,position:S}}bind(o,d){const A=o.gl;let T=this.atlasTexture[d];T?this.dirty&&(T.update(this.atlasImage[d]),this.dirty=!1):(T=new n.T(o,this.atlasImage[d],A.RGBA8),this.atlasTexture[d]=T),T.bind(A.LINEAR,A.CLAMP_TO_EDGE)}_updatePatternAtlas(o,d){const A=[];for(const F in this.patterns[o])A.push(this.patterns[o][F].bin);const{w:T,h:S}=n.H(A),E=this.atlasImage[o];E.resize({width:T||1,height:S||1});for(const F in this.patterns[o]){const{bin:q,position:K}=this.patterns[o][F];let Y=K.padding;const ae=q.x+Y,re=q.y+Y,me=this._images[o][F].data,be=me.width,Te=me.height;Y=Y>1?Y-1:Y,n.r.copy(me,E,{x:0,y:0},{x:ae,y:re},{width:be,height:Te},d),n.r.copy(me,E,{x:0,y:Te-Y},{x:ae,y:re-Y},{width:be,height:Y},d),n.r.copy(me,E,{x:0,y:0},{x:ae,y:re+Te},{width:be,height:Y},d),n.r.copy(me,E,{x:be-Y,y:0},{x:ae-Y,y:re},{width:Y,height:Te},d),n.r.copy(me,E,{x:0,y:0},{x:ae+be,y:re},{width:Y,height:Te},d),n.r.copy(me,E,{x:be-Y,y:Te-Y},{x:ae-Y,y:re-Y},{width:Y,height:Y},d),n.r.copy(me,E,{x:0,y:Te-Y},{x:ae+be,y:re-Y},{width:Y,height:Y},d),n.r.copy(me,E,{x:0,y:0},{x:ae+be,y:re+Te},{width:Y,height:Y},d),n.r.copy(me,E,{x:be-Y,y:0},{x:ae-Y,y:re+Te},{width:Y,height:Y},d)}this.dirty=!0}beginFrame(){for(const o in this._images)this.callbackDispatchedThisFrame[o]=new Set}dispatchRenderCallbacks(o,d){for(const A of o){if(this.callbackDispatchedThisFrame[d].has(A.toString()))continue;this.callbackDispatchedThisFrame[d].add(A.toString());const T=(A.iconsetId?this._iconsets[d][A.iconsetId]:this._images[d])[A.name];Nt(T)&&this.updateImage(A,d,T)}}}function wt(y){const o=y.key,d=y.value,A=y.valueSpec||{},T=y.objectElementValidators||{},S=y.style,E=y.styleSpec;let F=[];const q=n.K(d);if(q!=="object")return[new n.V(o,d,`object expected, ${q} found`)];for(const K in d){const Y=K.split(".")[0];let ae;T[Y]?ae=T[Y]:A[Y]?ae=Pr:T["*"]?ae=T["*"]:A["*"]&&(ae=Pr),ae?F=F.concat(ae({key:(o&&`${o}.`)+K,value:d[K],valueSpec:A[Y]||A["*"],style:S,styleSpec:E,object:d,objectKey:K},d)):F.push(new n.J(o,d[K],`unknown property "${K}"`))}for(const K in A)T[K]||A[K].required&&A[K].default===void 0&&d[K]===void 0&&F.push(new n.V(o,d,`missing required property "${K}"`));return F}function fr(y){const o=y.value,d=y.valueSpec,A=y.style,T=y.styleSpec,S=y.key,E=y.arrayElementValidator||Pr;if(n.K(o)!=="array")return[new n.V(S,o,`array expected, ${n.K(o)} found`)];if(d.length&&o.length!==d.length)return[new n.V(S,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new n.V(S,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let F={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};T.$version<7&&(F.function=d.function),n.K(d.value)==="object"&&(F=d.value);let q=[];for(let K=0;K<o.length;K++)q=q.concat(E({array:o,arrayIndex:K,value:o[K],valueSpec:F,style:A,styleSpec:T,key:`${S}[${K}]`},!0));return q}function Ca(y){const o=y.key,d=y.value,A=y.valueSpec;let T=n.K(d);if(T==="number"&&d!=d&&(T="NaN"),T!=="number")return[new n.V(o,d,`number expected, ${T} found`)];if("minimum"in A){let S=A.minimum;if(n.K(A.minimum)==="array"&&(S=A.minimum[y.arrayIndex]),d<S)return[new n.V(o,d,`${d} is less than the minimum value ${S}`)]}if("maximum"in A){let S=A.maximum;if(n.K(A.maximum)==="array"&&(S=A.maximum[y.arrayIndex]),d>S)return[new n.V(o,d,`${d} is greater than the maximum value ${S}`)]}return[]}function za(y){const o=y.valueSpec,d=n.M(y.value.type);let A,T,S,E={};const F=d!=="categorical"&&y.value.property===void 0,q=!F,K=n.K(y.value.stops)==="array"&&n.K(y.value.stops[0])==="array"&&n.K(y.value.stops[0][0])==="object",Y=wt({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(me){if(d==="identity")return[new n.V(me.key,me.value,'identity function may not have a "stops" property')];let be=[];const Te=me.value;return be=be.concat(fr({key:me.key,value:Te,valueSpec:me.valueSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:ae})),n.K(Te)==="array"&&Te.length===0&&be.push(new n.V(me.key,Te,"array must have at least one stop")),be},default:function(me){return Pr({key:me.key,value:me.value,valueSpec:o,style:me.style,styleSpec:me.styleSpec})}}});return d==="identity"&&F&&Y.push(new n.V(y.key,y.value,'missing required property "property"')),d==="identity"||y.value.stops||Y.push(new n.V(y.key,y.value,'missing required property "stops"')),d==="exponential"&&y.valueSpec.expression&&!n.N(y.valueSpec)&&Y.push(new n.V(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(q&&!n.O(y.valueSpec)?Y.push(new n.V(y.key,y.value,"property functions not supported")):F&&!n.Q(y.valueSpec)&&Y.push(new n.V(y.key,y.value,"zoom functions not supported"))),d!=="categorical"&&!K||y.value.property!==void 0||Y.push(new n.V(y.key,y.value,'"property" property is required')),Y;function ae(me){let be=[];const Te=me.value,ze=me.key;if(n.K(Te)!=="array")return[new n.V(ze,Te,`array expected, ${n.K(Te)} found`)];if(Te.length!==2)return[new n.V(ze,Te,`array length 2 expected, length ${Te.length} found`)];if(K){if(n.K(Te[0])!=="object")return[new n.V(ze,Te,`object expected, ${n.K(Te[0])} found`)];if(Te[0].zoom===void 0)return[new n.V(ze,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new n.V(ze,Te,"object stop key must have value")];const Fe=n.M(Te[0].zoom);if(typeof Fe!="number")return[new n.V(ze,Te[0].zoom,"stop zoom values must be numbers")];if(S&&S>Fe)return[new n.V(ze,Te[0].zoom,"stop zoom values must appear in ascending order")];Fe!==S&&(S=Fe,T=void 0,E={}),be=be.concat(wt({key:`${ze}[0]`,value:Te[0],valueSpec:{zoom:{}},style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:Ca,value:re}}))}else be=be.concat(re({key:`${ze}[0]`,value:Te[0],style:me.style,styleSpec:me.styleSpec},Te));return n.S(n.U(Te[1]))?be.concat([new n.V(`${ze}[1]`,Te[1],"expressions are not allowed in function stops.")]):be.concat(Pr({key:`${ze}[1]`,value:Te[1],valueSpec:o,style:me.style,styleSpec:me.styleSpec}))}function re(me,be){const Te=n.K(me.value),ze=n.M(me.value),Fe=me.value!==null?me.value:be;if(A){if(Te!==A)return[new n.V(me.key,Fe,`${Te} stop domain type must match previous stop domain type ${A}`)]}else A=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean"&&typeof ze!="number"&&typeof ze!="string"&&typeof ze!="boolean")return[new n.V(me.key,Fe,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&d!=="categorical"){let Ke=`number expected, ${Te} found`;return n.O(o)&&d===void 0&&(Ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(me.key,Fe,Ke)]}return d!=="categorical"||Te!=="number"||typeof ze=="number"&&isFinite(ze)&&Math.floor(ze)===ze?d!=="categorical"&&Te==="number"&&typeof ze=="number"&&typeof T=="number"&&T!==void 0&&ze<T?[new n.V(me.key,Fe,"stop domain values must appear in ascending order")]:(T=ze,d==="categorical"&&ze in E?[new n.V(me.key,Fe,"stop domain values must be unique")]:(E[ze]=!0,[])):[new n.V(me.key,Fe,`integer expected, found ${String(ze)}`)]}}function ar(y){const o=(y.expressionContext==="property"?n.W:n.X)(n.U(y.value),y.valueSpec);if(o.result==="error")return o.value.map(A=>new n.V(`${y.key}${A.key}`,y.value,A.message));const d=o.value.expression||o.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!d.outputDefined())return[new n.V(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!n.Y(d))return[new n.V(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter")return ur(d,y);if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!n.Z(d,["zoom","feature-state"]))return[new n.V(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!n._(d))return[new n.V(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ur(y,o){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const T of o.valueSpec.expression.parameters)d.delete(T);if(d.size===0)return[];const A=[];return y instanceof n.$&&d.has(y.name)?[new n.V(o.key,o.value,`["${y.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(y.eachChild(T=>{A.push(...ur(T,o))}),A)}function or(y){const o=y.key,d=y.value,A=y.valueSpec,T=[];return Array.isArray(A.values)?A.values.indexOf(n.M(d))===-1&&T.push(new n.V(o,d,`expected one of [${A.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(A.values).indexOf(n.M(d))===-1&&T.push(new n.V(o,d,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function Cr(y){return n.a1(n.U(y.value))?ar(n.L({},y,{expressionContext:"filter",valueSpec:y.styleSpec[`filter_${y.layerType||"fill"}`]})):Ia(y)}function Ia(y){const o=y.value,d=y.key;if(n.K(o)!=="array")return[new n.V(d,o,`array expected, ${n.K(o)} found`)];const A=y.styleSpec;let T,S=[];if(o.length<1)return[new n.V(d,o,"filter array must have at least 1 element")];switch(S=S.concat(or({key:`${d}[0]`,value:o[0],valueSpec:A.filter_operator,style:y.style,styleSpec:y.styleSpec})),n.M(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&n.M(o[1])==="$type"&&S.push(new n.V(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&S.push(new n.V(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(T=n.K(o[1]),T!=="string"&&S.push(new n.V(`${d}[1]`,o[1],`string expected, ${T} found`)));for(let E=2;E<o.length;E++)T=n.K(o[E]),n.M(o[1])==="$type"?S=S.concat(or({key:`${d}[${E}]`,value:o[E],valueSpec:A.geometry_type,style:y.style,styleSpec:y.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&S.push(new n.V(`${d}[${E}]`,o[E],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let E=1;E<o.length;E++)S=S.concat(Ia({key:`${d}[${E}]`,value:o[E],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":T=n.K(o[1]),o.length!==2?S.push(new n.V(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):T!=="string"&&S.push(new n.V(`${d}[1]`,o[1],`string expected, ${T} found`))}return S}function Fr(y,o){const d=y.key,A=y.style,T=y.layer,S=y.styleSpec,E=y.value,F=y.objectKey,q=S[`${o}_${y.layerType}`];if(!q)return[];const K=F.match(/^(.*)-use-theme$/);if(o==="paint"&&K&&q[K[1]])return n.S(E)?[].concat(Pr({key:y.key,value:E,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:A,styleSpec:S,expressionContext:"property",propertyType:o,propertyKey:F})):Pr({key:d,value:E,valueSpec:{type:"string"},style:A,styleSpec:S});const Y=F.match(/^(.*)-transition$/);if(o==="paint"&&Y&&q[Y[1]]&&q[Y[1]].transition)return Pr({key:d,value:E,valueSpec:S.transition,style:A,styleSpec:S});const ae=y.valueSpec||q[F];if(!ae)return[new n.J(d,E,`unknown property "${F}"`)];let re;if(n.K(E)==="string"&&n.O(ae)&&!ae.tokens&&(re=/^{([^}]+)}$/.exec(E))){const be=`\`{ "type": "identity", "property": ${re?JSON.stringify(re[1]):'"_"'} }\``;return[new n.V(d,E,`"${F}" does not support interpolation syntax
Use an identity property function instead: ${be}.`)]}const me=[];if(y.layerType==="symbol")F!=="text-field"||!A||A.glyphs||A.imports||me.push(new n.V(d,E,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&n.a2(n.U(E))&&n.M(E.type)==="identity"&&me.push(new n.V(d,E,'"text-font" does not support identity functions'));else if(y.layerType==="model"&&o==="paint"&&T&&T.layout&&T.layout.hasOwnProperty("model-id")&&n.O(ae)&&(n.a3(ae)||n.Q(ae))){const be=n.W(n.U(E),ae),Te=be.value.expression||be.value._styleExpression.expression;Te&&!n.Z(Te,["measure-light"])&&(F==="model-emissive-strength"&&n._(Te)&&n.Y(Te)||me.push(new n.V(d,E,`${F} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return me.concat(Pr({key:y.key,value:E,valueSpec:ae,style:A,styleSpec:S,expressionContext:"property",propertyType:o,propertyKey:F}))}function tn(y){return Fr(y,"paint")}function lr(y){return Fr(y,"layout")}function wr(y){let o=[];const d=y.value,A=y.key,T=y.style,S=y.styleSpec;d.type||d.ref||o.push(new n.V(A,d,'either "type" or "ref" is required'));let E=n.M(d.type);const F=n.M(d.ref);if(d.id){const q=n.M(d.id);for(let K=0;K<y.arrayIndex;K++){const Y=T.layers[K];n.M(Y.id)===q&&o.push(new n.V(A,d.id,`duplicate layer id "${d.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in d){let q;["type","source","source-layer","filter","layout"].forEach(K=>{K in d&&o.push(new n.V(A,d[K],`"${K}" is prohibited for ref layers`))}),T.layers.forEach(K=>{n.M(K.id)===F&&(q=K)}),q?q.ref?o.push(new n.V(A,d.ref,"ref cannot reference another ref layer")):E=n.M(q.type):typeof F=="string"&&o.push(new n.V(A,d.ref,`ref layer "${F}" not found`))}else if(E!=="background"&&E!=="sky"&&E!=="slot")if(d.source){const q=T.sources&&T.sources[d.source],K=q&&n.M(q.type);q?K==="vector"&&E==="raster"?o.push(new n.V(A,d.source,`layer "${d.id}" requires a raster source`)):K==="raster"&&E!=="raster"?o.push(new n.V(A,d.source,`layer "${d.id}" requires a vector source`)):K!=="vector"||d["source-layer"]?K==="raster-dem"&&E!=="hillshade"?o.push(new n.V(A,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):K!=="raster-array"||["raster","raster-particle"].includes(E)?E!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||K==="geojson"&&q.lineMetrics?E==="raster-particle"&&K!=="raster-array"&&o.push(new n.V(A,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):o.push(new n.V(A,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new n.V(A,d.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new n.V(A,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new n.V(A,d.source,`source "${d.source}" not found`))}else o.push(new n.V(A,d,'missing required property "source"'));return o=o.concat(wt({key:A,value:d,valueSpec:S.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Pr({key:`${A}.type`,value:d.type,valueSpec:S.layer.type,style:y.style,styleSpec:y.styleSpec,object:d,objectKey:"type"}),filter:q=>Cr(n.L({layerType:E},q)),layout:q=>wt({layer:d,key:q.key,value:q.value,valueSpec:{},style:q.style,styleSpec:q.styleSpec,objectElementValidators:{"*":K=>lr(n.L({layerType:E},K))}}),paint:q=>wt({layer:d,key:q.key,value:q.value,valueSpec:{},style:q.style,styleSpec:q.styleSpec,objectElementValidators:{"*":K=>tn(n.L({layerType:E,layer:d},K))}})}})),o}function na(y){const o=y.value,d=y.key,A=n.K(o);return A!=="string"?[new n.V(d,o,`string expected, ${A} found`)]:[]}const Oa={promoteId:function y({key:o,value:d}){if(n.K(d)==="string")return na({key:o,value:d});if(Array.isArray(d)){const A=[],T=n.U(d),S=n.X(T);return S.result==="error"&&S.value.forEach(E=>{A.push(new n.V(`${o}${E.key}`,null,`${E.message}`))}),n.Z(S.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||A.push(new n.V(`${o}`,null,"promoteId expression should be only feature dependent")),A}{const A=[];for(const T in d)A.push(...y({key:`${o}.${T}`,value:d[T]}));return A}}};function ra(y){const o=y.value,d=y.key,A=y.styleSpec,T=y.style;if(!o.type)return[new n.V(d,o,'"type" is required')];const S=n.M(o.type);let E=[];switch(["vector","raster","raster-dem","raster-array"].includes(S)&&(o.url||o.tiles||E.push(new n.J(d,o,'Either "url" or "tiles" is required.'))),S){case"vector":case"raster":case"raster-dem":case"raster-array":return E=E.concat(wt({key:d,value:o,valueSpec:A[`source_${S.replace("-","_")}`],style:y.style,styleSpec:A,objectElementValidators:Oa})),E;case"geojson":if(E=wt({key:d,value:o,valueSpec:A.source_geojson,style:T,styleSpec:A,objectElementValidators:Oa}),o.cluster)for(const F in o.clusterProperties){const[q,K]=o.clusterProperties[F],Y=typeof q=="string"?[q,["accumulated"],["get",F]]:q;E.push(...ar({key:`${d}.${F}.map`,value:K,expressionContext:"cluster-map"})),E.push(...ar({key:`${d}.${F}.reduce`,value:Y,expressionContext:"cluster-reduce"}))}return E;case"video":return wt({key:d,value:o,valueSpec:A.source_video,style:T,styleSpec:A});case"image":return wt({key:d,value:o,valueSpec:A.source_image,style:T,styleSpec:A});case"canvas":return[new n.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return or({key:`${d}.type`,value:o.type,valueSpec:{values:ja(A)}})}}function ja(y){return y.source.reduce((o,d)=>{const A=y[d];return A.type.type==="enum"&&(o=o.concat(Object.keys(A.type.values))),o},[])}function gr(y){const o=y.value,d=y.styleSpec,A=d.light,T=y.style;let S=[];const E=n.K(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new n.V("light",o,`object expected, ${E} found`)]),S;for(const F in o){const q=F.match(/^(.*)-transition$/),K=F.match(/^(.*)-use-theme$/);S=S.concat(K&&A[K[1]]?Pr({key:F,value:o[F],valueSpec:{type:"string"},style:T,styleSpec:d}):q&&A[q[1]]&&A[q[1]].transition?Pr({key:F,value:o[F],valueSpec:d.transition,style:T,styleSpec:d}):A[F]?Pr({key:F,value:o[F],valueSpec:A[F],style:T,styleSpec:d}):[new n.V(F,o[F],`unknown property "${F}"`)])}return S}function Tn(y){const o=y.value;let d=[];if(!o)return d;const A=n.K(o);if(A!=="object")return d=d.concat([new n.V("light-3d",o,`object expected, ${A} found`)]),d;const T=y.styleSpec,S=T["light-3d"],E=y.key,F=y.style,q=y.style.lights;for(const ae of["type","id"])if(!(ae in o))return d=d.concat([new n.V("light-3d",o,`missing property ${ae} on light`)]),d;if(o.type&&q)for(let ae=0;ae<y.arrayIndex;ae++){const re=n.M(o.type),me=q[ae];n.M(me.type)===re&&d.push(new n.V(E,o.id,`duplicate light type "${o.type}", previously defined at line ${me.id.__line__}`))}const K=`properties_light_${o.type}`;if(!(K in T))return d=d.concat([new n.V("light-3d",o,`Invalid light type ${o.type}`)]),d;const Y=T[K];for(const ae in o)if(ae==="properties"){const re=o[ae],me=n.K(re);if(me!=="object")return d=d.concat([new n.V("properties",re,`object expected, ${me} found`)]),d;for(const be in re)d=d.concat(Y[be]?Pr({key:be,value:re[be],valueSpec:Y[be],style:F,styleSpec:T}):[new n.J(y.key,re[be],`unknown property "${be}"`)])}else{const re=ae.match(/^(.*)-transition$/),me=ae.match(/^(.*)-use-theme$/);d=d.concat(me&&S[me[1]]?Pr({key:ae,value:o[ae],valueSpec:{type:"string"},style:F,styleSpec:T}):re&&S[re[1]]&&S[re[1]].transition?Pr({key:ae,value:o[ae],valueSpec:T.transition,style:F,styleSpec:T}):S[ae]?Pr({key:ae,value:o[ae],valueSpec:S[ae],style:F,styleSpec:T}):[new n.J(ae,o[ae],`unknown property "${ae}"`)])}return d}function an(y){const o=y.value,d=y.key,A=y.style,T=y.styleSpec,S=T.terrain;let E=[];const F=n.K(o);if(o===void 0||F==="null")return E;if(F!=="object")return E=E.concat([new n.V("terrain",o,`object expected, ${F} found`)]),E;for(const q in o){const K=q.match(/^(.*)-transition$/),Y=q.match(/^(.*)-use-theme$/);E=E.concat(Y&&S[Y[1]]?Pr({key:q,value:o[q],valueSpec:{type:"string"},style:A,styleSpec:T}):K&&S[K[1]]&&S[K[1]].transition?Pr({key:q,value:o[q],valueSpec:T.transition,style:A,styleSpec:T}):S[q]?Pr({key:q,value:o[q],valueSpec:S[q],style:A,styleSpec:T}):[new n.J(q,o[q],`unknown property "${q}"`)])}if(o.source){const q=A.sources&&A.sources[o.source],K=q&&n.M(q.type);q?K!=="raster-dem"&&E.push(new n.V(d,o.source,`terrain cannot be used with a source of type ${String(K)}, it only be used with a "raster-dem" source type`)):E.push(new n.V(d,o.source,`source "${o.source}" not found`))}else E.push(new n.V(d,o,'terrain is missing required property "source"'));return E}function dn(y){const o=y.value,d=y.style,A=y.styleSpec,T=A.fog;let S=[];const E=n.K(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new n.V("fog",o,`object expected, ${E} found`)]),S;for(const F in o){const q=F.match(/^(.*)-transition$/),K=F.match(/^(.*)-use-theme$/);S=S.concat(K&&T[K[1]]?Pr({key:F,value:o[F],valueSpec:{type:"string"},style:d,styleSpec:A}):q&&T[q[1]]&&T[q[1]].transition?Pr({key:F,value:o[F],valueSpec:A.transition,style:d,styleSpec:A}):T[F]?Pr({key:F,value:o[F],valueSpec:T[F],style:d,styleSpec:A}):[new n.J(F,o[F],`unknown property "${F}"`)])}return S}const Yr={"*":()=>[],array:fr,boolean:function(y){const o=y.value,d=y.key,A=n.K(o);return A!=="boolean"?[new n.V(d,o,`boolean expected, ${A} found`)]:[]},number:Ca,color:function(y){const o=y.key,d=y.value,A=n.K(d);return A!=="string"?[new n.V(o,d,`color expected, ${A} found`)]:n.a0.parseCSSColor(d)===null?[new n.V(o,d,`color expected, "${d}" found`)]:[]},enum:or,filter:Cr,function:za,layer:wr,object:wt,source:ra,model:n.a4,light:gr,"light-3d":Tn,terrain:an,fog:dn,string:na,formatted:function(y){return na(y).length===0?[]:ar(y)},resolvedImage:function(y){return na(y).length===0?[]:ar(y)},projection:function(y){const o=y.value,d=y.styleSpec,A=d.projection,T=y.style;let S=[];const E=n.K(o);if(E==="object")for(const F in o)S=S.concat(Pr({key:F,value:o[F],valueSpec:A[F],style:T,styleSpec:d}));else E!=="string"&&(S=S.concat([new n.V("projection",o,`object or string expected, ${E} found`)]));return S},import:function(y){const{value:o,styleSpec:d}=y,{data:A,...T}=o;Object.defineProperty(T,"__line__",{value:o.__line__,enumerable:!1});let S=wt(n.L({},y,{value:T,valueSpec:d.import}));return n.M(T.id)===""&&S.push(new n.V(`${y.key}.id`,T,"import id can't be an empty string")),A&&(S=S.concat(gi(A,d,{key:`${y.key}.data`}))),S},iconset:function(y){const o=y.value,d=y.key,A=y.styleSpec,T=y.style;if(!o.type)return[new n.V(d,o,'"type" is required')];const S=n.M(o.type);let E=[];if(E=E.concat(wt({key:d,value:o,valueSpec:A[`iconset_${S}`],style:T,styleSpec:A})),S==="source"&&o.source){const F=T.sources&&T.sources[o.source],q=F&&n.M(F.type);F?q!=="raster-array"&&E.push(new n.V(d,o.source,`iconset cannot be used with a source of type ${String(q)}, it only be used with a "raster-array" source type`)):E.push(new n.V(d,o.source,`source "${o.source}" not found`))}return E}};function Pr(y,o=!1){const d=y.value,A=y.valueSpec,T=y.styleSpec;if(A.expression&&n.a2(n.M(d)))return za(y);if(A.expression&&n.S(n.U(d)))return ar(y);if(A.type&&Yr[A.type]){const S=Yr[A.type](y);return o===!0&&S.length>0&&n.K(y.value)==="array"?ar(y):S}return wt(n.L({},y,{valueSpec:A.type?T[A.type]:A}))}function ki(y){const o=y.value,d=y.key,A=na(y);return A.length||(o.indexOf("{fontstack}")===-1&&A.push(new n.V(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&A.push(new n.V(d,o,'"glyphs" url must include a "{range}" token'))),A}function gi(y,o=n.a5,d={}){return Pr({key:d.key||"",value:y,valueSpec:o.$root,styleSpec:o,style:y,objectElementValidators:{glyphs:ki,"*":()=>[]}})}function oi(y,o=n.a5){return bt(gi(y,o))}const Cs=y=>bt(ra(y)),Aa=y=>bt(gr(y)),mr=y=>bt(Tn(y)),Zr=y=>bt(an(y)),ti=y=>bt(dn(y)),Rn=y=>bt(function(o){const d=o.value,A=o.style,T=o.styleSpec,S=T.snow;let E=[];const F=n.K(d);if(d===void 0)return E;if(F!=="object")return E=E.concat([new n.V("snow",d,`object expected, ${F} found`)]),E;for(const q in d){const K=q.match(/^(.*)-transition$/);E=E.concat(K&&S[K[1]]&&S[K[1]].transition?Pr({key:q,value:d[q],valueSpec:T.transition,style:A,styleSpec:T}):S[q]?Pr({key:q,value:d[q],valueSpec:S[q],style:A,styleSpec:T}):[new n.J(q,d[q],`unknown property "${q}"`)])}return E}(y)),Zt=y=>bt(function(o){const d=o.value,A=o.style,T=o.styleSpec,S=T.rain;let E=[];const F=n.K(d);if(d===void 0)return E;if(F!=="object")return E=E.concat([new n.V("rain",d,`object expected, ${F} found`)]),E;for(const q in d){const K=q.match(/^(.*)-transition$/);E=E.concat(K&&S[K[1]]&&S[K[1]].transition?Pr({key:q,value:d[q],valueSpec:T.transition,style:A,styleSpec:T}):S[q]?Pr({key:q,value:d[q],valueSpec:S[q],style:A,styleSpec:T}):[new n.J(q,d[q],`unknown property "${q}"`)])}return E}(y)),xe=y=>bt(wr(y)),Le=y=>bt(Cr(y)),$e=y=>bt(tn(y)),yt=y=>bt(lr(y)),At=y=>bt(n.a4(y));function bt(y){return y.slice().sort((o,d)=>o.line&&d.line?o.line-d.line:0)}function Gt(y,o){let d=!1;if(o&&o.length)for(const A of o)A instanceof n.J?n.w(A.message):(y.fire(new n.z(new Error(A.message))),d=!0);return d}let Et;class Wt extends n.E{constructor(o,d="flat"){super(),this._transitionable=new n.a6(Et||(Et=new n.a7({anchor:new n.a8(n.a5.light.anchor),position:new n.a9(n.a5.light.position),color:new n.a8(n.a5.light.color),intensity:new n.a8(n.a5.light.intensity)}))),this.setLight(o,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,d,A={}){this._validate(Aa,o,A)||(this._transitionable.setTransitionOrValue(o),this.id=d)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,A){return(!A||A.validate!==!1)&&Gt(this,o.call(oi,n.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let Yt=class extends n.E{constructor(y,o,d,A){super(),this.scope=d,this._transitionable=new n.a6(new n.a7({source:new n.a8(n.a5.terrain.source),exaggeration:new n.a8(n.a5.terrain.exaggeration)}),d,A),this._transitionable.setTransitionOrValue(y,A),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(y,o){this._transitionable.setTransitionOrValue(y,o)}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}getExaggeration(y){return this._transitioning.possiblyEvaluate(new n.aa(y)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const y=this._transitionable._values.exaggeration;if(!y)return null;const o=y.value.expression;if(!o)return null;let d=-1,A=-1,T=1;for(const S of o.zoomStops)T=o.evaluate(new n.aa(S)),T>.01?(d=S,A=-1):A=S;return T<.01&&d>0&&A>d?[d,A]:null}isZoomDependent(){const y=this._transitionable._values.exaggeration;return y!=null&&y.value!=null&&y.value.expression!=null&&y.value.expression instanceof n.ab}};const Kt=45,Sa=65,Fa=.05;function qa(y,o,d,A){const T=n.ae(Kt,Sa,d),[S,E]=br(y,A);let F=1-Math.min(1,Math.exp((o-S)/(E-S)*-6));return F*=F*F,F=Math.min(1,1.00747*F),F*T*y.alpha}function br(y,o){const d=.5/Math.tan(.5*o);return[y.range[0]+d,y.range[1]+d]}function Ir(y,o,d,A,T){const S=n.ad.vec3.transformMat4([],[o,d,A],T.mercatorFogMatrix);return qa(y,n.ad.vec3.length(S),T.pitch,T._fov)}function Lr(y,o,d,A,T,S,E){const F=[[d,A,0],[T,A,0],[T,S,0],[d,S,0]];let q=Number.MAX_VALUE,K=-Number.MAX_VALUE;for(const Y of F){const ae=n.ad.vec3.transformMat4([],Y,o),re=n.ad.vec3.length(ae);q=Math.min(q,re),K=Math.max(K,re)}return[qa(y,q,E.pitch,E._fov),qa(y,K,E.pitch,E._fov)]}class Wr extends n.E{constructor(o,d,A,T){super();const S=new n.a7({range:new n.a8(n.a5.fog.range),color:new n.a8(n.a5.fog.color),"color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a8(n.a5.fog["high-color"]),"high-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a8(n.a5.fog["space-color"]),"space-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a8(n.a5.fog["horizon-blend"]),"star-intensity":new n.a8(n.a5.fog["star-intensity"]),"vertical-range":new n.a8(n.a5.fog["vertical-range"])});this._transitionable=new n.a6(S,A,new Map(T)),this.set(o,T),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new n.af(S),this.scope=A}get state(){const o=this._transform,d=o.projection.name==="globe",A=n.ag(o.zoom),T=this.properties.get("range"),S=[.5,3];return{range:d?[n.ah(S[0],T[0],A),n.ah(S[1],T[1],A)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,d,A={}){if(this._validate(ti,o,A))return;const T=n.l({},o);for(const S of Object.keys(n.a5.fog))T[S]===void 0&&(T[S]=n.a5.fog[S].default);this._options=T,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ae(Kt,Sa,o))*d.a}getOpacityAtLatLng(o,d){return this._transform.projection.supportsFog?function(A,T,S){const E=n.ac.fromLngLat(T),F=S.elevation?S.elevation.getAtPointOrZero(E):0;return Ir(A,E.x,E.y,F,S)}(this.state,o,d):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(o.toUnwrapped());return Lr(this.state,d,0,0,n.ai,n.ai,this._transform)}getOpacityForBounds(o,d,A,T,S){return this._transform.projection.supportsFog?Lr(this.state,o,d,A,T,S,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?br(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const A of d){const T=o.points[A];let S;if(T[2]>=0)S=T;else{const E=o.points[A-4];S=n.aj(E,T,E[2]/(E[2]-T[2]))}if(Ir(this.state,S[0],S[1],0,this._transform)>=Fa)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,A){return(!A||A.validate!==!1)&&Gt(this,o.call(oi,n.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let Un,ri,Jr,Cn,Qr=class extends n.E{constructor(y,o,d,A){super();const T=Un||(Un=new n.a7({density:new n.a8(n.a5.snow.density),intensity:new n.a8(n.a5.snow.intensity),color:new n.a8(n.a5.snow.color),opacity:new n.a8(n.a5.snow.opacity),vignette:new n.a8(n.a5.snow.vignette),"vignette-color":new n.a8(n.a5.snow["vignette-color"]),"center-thinning":new n.a8(n.a5.snow["center-thinning"]),direction:new n.a8(n.a5.snow.direction),"flake-size":new n.a8(n.a5.snow["flake-size"])}));this._transitionable=new n.a6(T,d,new Map(A)),this.set(y,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(T),this.scope=d}get state(){const y=this.properties.get("opacity"),o=this.properties.get("color"),d=this.properties.get("direction"),A=n.ak(d[0]),T=-Math.max(n.ak(d[1]),.01),S=[Math.cos(A)*Math.cos(T),Math.sin(A)*Math.cos(T),Math.sin(T)],E=this.properties.get("vignette"),F=this.properties.get("vignette-color");return F.a=E,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*y),direction:S,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:F}}get(){return this._transitionable.serialize()}set(y,o,d={}){if(this._validate(Rn,y,d))return;const A=n.l({},y);for(const T of Object.keys(n.a5.snow))A[T]===void 0&&(A[T]=n.a5.snow[T].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,o,d){return(!d||d.validate!==!1)&&Gt(this,y.call(oi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}},jn=class extends n.E{constructor(y,o,d,A){super();const T=ri||(ri=new n.a7({density:new n.a8(n.a5.rain.density),intensity:new n.a8(n.a5.rain.intensity),color:new n.a8(n.a5.rain.color),opacity:new n.a8(n.a5.rain.opacity),vignette:new n.a8(n.a5.rain.vignette),"vignette-color":new n.a8(n.a5.rain["vignette-color"]),"center-thinning":new n.a8(n.a5.rain["center-thinning"]),direction:new n.a8(n.a5.rain.direction),"droplet-size":new n.a8(n.a5.rain["droplet-size"]),"distortion-strength":new n.a8(n.a5.rain["distortion-strength"])}));this._transitionable=new n.a6(T,d,new Map(A)),this.set(y,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(T),this.scope=d}get state(){const y=this.properties.get("opacity"),o=this.properties.get("color"),d=this.properties.get("direction"),A=n.ak(d[0]),T=-Math.max(n.ak(d[1]),.01),S=[Math.cos(A)*Math.cos(T),Math.sin(A)*Math.cos(T),Math.sin(T)],E=this.properties.get("vignette-color");return E.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*y),direction:S,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:E}}get(){return this._transitionable.serialize()}set(y,o,d={}){if(this._validate(Zt,y,d))return;const A=n.l({},y);for(const T of Object.keys(n.a5.rain))A[T]===void 0&&(A[T]=n.a5.rain[T].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,o,d){return(!d||d.validate!==!1)&&Gt(this,y.call(oi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}};class Ui extends n.E{constructor(o,d,A,T){super(),this.scope=A,this._options=o,this.properties=new n.af(d),this._transitionable=new n.a6(d,A,new Map(T)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,d){this._options=o,this._transitionable.setTransitionOrValue(o.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Xi{constructor(o,d,A,T){this.screenBounds=o,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,T)}static createFromScreenPoints(o,d){let A,T;if(o instanceof n.P||typeof o[0]=="number"){const S=n.P.convert(o);A=[S],T=d.isPointAboveHorizon(S)}else{const S=n.P.convert(o[0]),E=n.P.convert(o[1]);A=[S,E],T=n.an(S,E).every(F=>d.isPointAboveHorizon(F))}return new Xi(A,d.getCameraPoint(),T,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return n.an(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const d=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],T=n.an(d,A,0,!1);return this.cameraPoint.y>A.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<A.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=A.x?T[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(T[3]=this.cameraPoint)),n.ao(T,o)}bufferedCameraGeometryGlobe(o){const d=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],T=n.an(d,A,o),S=this.cameraPoint.clone();switch(3*((S.y>d.y)+(S.y>A.y))+((S.x>d.x)+(S.x>A.x))){case 0:T[0]=S,T[4]=S.clone();break;case 1:T.splice(1,0,S);break;case 2:T[1]=S;break;case 3:T.splice(4,0,S);break;case 5:T.splice(2,0,S);break;case 6:T[3]=S;break;case 7:T.splice(3,0,S);break;case 8:T[2]=S}return T}containsTile(o,d,A,T=0){const S=o.queryPadding/d._pixelsPerMercatorPixel+1,E=A?this._bufferedCameraMercator(S,d):this._bufferedScreenMercator(S,d);let F=o.tileID.wrap+(E.unwrapped?T:0);const q=E.polygon.map(ze=>n.ap(o.tileTransform,ze,F));if(!n.aq(q,0,0,n.ai,n.ai))return;F=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const K=this.screenGeometryMercator.polygon.map(ze=>n.ar(o.tileTransform,ze,F)),Y=K.map(ze=>new n.P(ze[0],ze[1])),ae=d.getFreeCameraOptions().position||new n.ac(0,0,0),re=n.ar(o.tileTransform,ae,F),me=K.map(ze=>{const Fe=n.ad.vec3.sub(ze,ze,re);return n.ad.vec3.normalize(Fe,Fe),new n.as(re,Fe)}),be=n.at(o,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Y,tilespaceRays:me,bufferedTilespaceGeometry:q,bufferedTilespaceBounds:(Te=n.au(q),Te.min.x=n.ay(Te.min.x,0,n.ai),Te.min.y=n.ay(Te.min.y,0,n.ai),Te.max.x=n.ay(Te.max.x,0,n.ai),Te.max.y=n.ay(Te.max.y,0,n.ai),Te),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:be};var Te}_bufferedScreenMercator(o,d){const A=Bo(o);if(this._screenRaycastCache[A])return this._screenRaycastCache[A];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),d):{polygon:this.bufferedScreenGeometry(o).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[A]=T,T}}_bufferedCameraMercator(o,d){const A=Bo(o);if(this._cameraRaycastCache[A])return this._cameraRaycastCache[A];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),d):{polygon:this.bufferedCameraGeometry(o).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[A]=T,T}}_projectAndResample(o,d){const A=function(S,E){const F=n.ad.mat4.multiply([],E.pixelMatrix,E.globeMatrix),q=[0,-n.az,0,1],K=[0,n.az,0,1],Y=[0,0,0,1];n.ad.vec4.transformMat4(q,q,F),n.ad.vec4.transformMat4(K,K,F),n.ad.vec4.transformMat4(Y,Y,F);const ae=new n.P(q[0]/q[3],q[1]/q[3]),re=new n.P(K[0]/K[3],K[1]/K[3]),me=n.aw(S,ae)&&q[3]<Y[3],be=n.aw(S,re)&&K[3]<Y[3];if(!me&&!be)return null;const Te=function(ot,lt,vt){for(let Tt=1;Tt<ot.length;Tt++){const Qt=Es(lt.pointCoordinate3D(ot[Tt-1]).x),Ut=Es(lt.pointCoordinate3D(ot[Tt]).x);if(vt<0){if(Qt<Ut)return{idx:Tt,t:-Qt/(Ut-1-Qt)}}else if(Ut<Qt)return{idx:Tt,t:(1-Qt)/(Ut+1-Qt)}}return null}(S,E,me?-1:1);if(!Te)return null;const{idx:ze,t:Fe}=Te;let Ke=ze>1?Ps(S.slice(0,ze),E):[],nt=ze<S.length?Ps(S.slice(ze),E):[];Ke=Ke.map(ot=>new n.P(Es(ot.x),ot.y)),nt=nt.map(ot=>new n.P(Es(ot.x),ot.y));const at=[...Ke];at.length===0&&at.push(nt[nt.length-1]);const pt=n.ah(at[at.length-1].y,(nt.length===0?Ke[0]:nt[0]).y,Fe);let st;return st=me?[new n.P(0,pt),new n.P(0,0),new n.P(1,0),new n.P(1,pt)]:[new n.P(1,pt),new n.P(1,1),new n.P(0,1),new n.P(0,pt)],at.push(...st),nt.length===0?at.push(Ke[0]):at.push(...nt),{polygon:at.map(ot=>new n.ac(ot.x,ot.y)),unwrapped:!1}}(o,d);if(A)return A;const T=function(S,E){let F=!1,q=-1/0,K=0;for(let ae=0;ae<S.length-1;ae++)S[ae].x>q&&(q=S[ae].x,K=ae);for(let ae=0;ae<S.length-1;ae++){const re=(K+ae)%(S.length-1),me=S[re],be=S[re+1];Math.abs(me.x-be.x)>.5&&(me.x<be.x?(me.x+=1,re===0&&(S[S.length-1].x+=1)):(be.x+=1,re+1===S.length-1&&(S[0].x+=1)),F=!0)}const Y=n.av(E.center.lng);return F&&Y<Math.abs(Y-1)&&S.forEach(ae=>{ae.x-=1}),{polygon:S,unwrapped:F}}(Ps(o,d).map(S=>new n.P(Es(S.x),S.y)),d);return{polygon:T.polygon.map(S=>new n.ac(S.x,S.y)),unwrapped:T.unwrapped}}}function Ps(y,o){return n.ax(y,d=>{const A=o.pointCoordinate3D(d);d.x=A.x,d.y=A.y},1/256)}function Es(y){return y<0?1+y%1:y%1}function Bo(y){return 100*y|0}function Ns(y,o,d,A,T){const S=function(F,q){if(F)return T(F);if(q){if(y.url&&q.tiles&&y.tiles&&delete y.tiles,q.variants){if(!Array.isArray(q.variants))return T(new Error("variants must be an array"));for(const Y of q.variants){if(Y==null||typeof Y!="object"||Y.constructor!==Object)return T(new Error("variant must be an object"));if(!Array.isArray(Y.capabilities))return T(new Error("capabilities must be an array"));if(Y.capabilities.length===1&&Y.capabilities[0]==="meshopt"){q=n.l(q,Y);break}}}const K=n.aA(n.l({},q,y),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);K.tiles=o.canonicalizeTileset(K,y.url),T(null,K)}},E=function(F,q,K){if(!F)return null;if(!q&&!K)return F;K=K||F.worldview_default;const Y=Object.values(F.language||{});if(Y.length===0)return null;const ae=Object.values(F.worldview||{});if(ae.length===0)return null;const re=Y.every(be=>be===q),me=ae.every(be=>be===K);return re&&me?F:q in(F.language_options||{})||K in(F.worldview_options||{})?null:F.language_options&&F.worldview_options?F:null}(y.data,d,A);return E?n.q.frame(()=>S(null,E)):y.url?n.n(o.transformRequest(o.normalizeSourceURL(y.url,null,d,A),n.R.Source),S):n.q.frame(()=>{const{data:F,...q}=y;S(null,q)})}class $s{constructor(o,d,A){this.bounds=n.aB.convert(this.validateBounds(o)),this.minzoom=d||0,this.maxzoom=A||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const d=Math.pow(2,o.z),A=Math.floor(n.av(this.bounds.getWest())*d),T=Math.floor(n.aC(this.bounds.getNorth())*d),S=Math.ceil(n.av(this.bounds.getEast())*d),E=Math.ceil(n.aC(this.bounds.getSouth())*d);return o.x>=A&&o.x<S&&o.y>=T&&o.y<E}}class pc extends n.E{constructor(o,d,A,T){if(super(),this.id=o,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.aA(d,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T),this._tileWorkers={},this._deduped=new n.aD}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map.getWorldview();this._tileJSONRequest=Ns(this._options,this.map._requestManager,d,A,(T,S)=>{if(this._tileJSONRequest=null,this._loaded=!0,T)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),A&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new n.z(T));else if(S){if(n.l(this,S),this.hasWorldviews=!!S.worldview_options,S.worldview_default&&(this.worldviewDefault=S.worldview_default),S.vector_layers){this.vectorLayers=S.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const E of S.vector_layers)this.vectorLayerIds.push(E.id),S.worldview&&S.worldview[E.source]&&this.localizableLayerIds.add(E.id)}S.bounds&&(this.tileBounds=new $s(S.bounds,this.minzoom,this.maxzoom)),Se(S.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}o&&o(T)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(o,d){const A=o.tileID.canonical.url(this.tiles,this.scheme),T=this.map._requestManager.normalizeTileURL(A),S=this.map._requestManager.transformRequest(T,n.R.Tile),E=this.map.style?this.map.style.getLut(this.scope):null,F=E?{image:E.image.clone()}:null,q={request:S,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:F,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(A)&&(q.worldview=this.map.getWorldview()||this.worldviewDefault,q.localizableLayerIds=this.localizableLayerIds),q.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=d:o.request=o.actor.send("reloadTile",q,K.bind(this));else if(o.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",q,K.bind(this),void 0,!0);else{const Y=n.aE.call({deduped:this._deduped},q,(ae,re)=>{ae||!re?K.call(this,ae):(q.data={cacheControl:re.cacheControl,expires:re.expires,rawData:re.rawData.slice(0)},o.actor&&o.actor.send("loadTile",q,K.bind(this),void 0,!0))},!0);o.request={cancel:Y}}function K(Y,ae){return delete o.request,o.aborted?d(null):Y&&Y.status!==404?d(Y):(ae&&ae.resourceTiming&&(o.resourceTiming=ae.resourceTiming),this.map._refreshExpiredTiles&&ae&&o.setExpiryData(ae),o.loadVectorData(ae,this.map.painter),n.aF(this.dispatcher),d(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,d){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class al extends n.E{constructor(o,d,A,T){super(),this.id=o,this.dispatcher=A,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},d),n.l(this,n.aA(d,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._tileJSONRequest=Ns(this._options,this.map._requestManager,null,null,(d,A)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new n.z(d)):A&&(n.l(this,A),A.raster_layers&&(this.rasterLayers=A.raster_layers,this.rasterLayerIds=this.rasterLayers.map(T=>T.id)),A.bounds&&(this.tileBounds=new $s(A.bounds,this.minzoom,this.maxzoom)),Se(A.tiles),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),o&&o(d)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,d){const A=n.q.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),A,this.tileSize);o.request=n.o(this.map._requestManager.transformRequest(T,n.R.Tile),(S,E,F,q)=>(delete o.request,o.aborted?(o.state="unloaded",d(null)):S?(o.state="errored",d(S)):E?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:F,expires:q}),o.setTexture(E,this.map.painter),o.state="loaded",n.aF(this.dispatcher),void d(null)):d(null)))}abortTile(o,d){o.request&&(o.request.cancel(),delete o.request),d&&d()}unloadTile(o,d){o.texture&&o.texture instanceof n.T?(o.destroy(!0),o.texture&&o.texture instanceof n.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Bi extends al{constructor(o,d,A,T){super(o,d,A,T),this.type="raster-array",this.maxzoom=22,this.partial=!0,this.iconsets={},this._options=n.l({type:"raster-array"},d)}triggerRepaint(o){const d=this.map.painter._terrain,A=this.map.style.getSourceCache(this.id);d&&d.enabled&&A&&d._clearRenderCacheForTile(A.id,o.tileID),this.map.triggerRepaint()}loadTile(o,d){const A=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),T=this.map._requestManager.transformRequest(A,n.R.Tile),S={request:T,uid:o.uid,tileID:o.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};o.source=this.id,o.scope=this.scope,o.requestParams=T,o.actor||(o.actor=this.dispatcher.getActor());const E=(F,q,K,Y)=>{if(delete o.request,o.aborted)return o.state="unloaded",d(null);if(F)return F.name==="AbortError"?void 0:(o.state="errored",d(F));if(this.map._refreshExpiredTiles&&q&&o.setExpiryData({cacheControl:K,expires:Y}),this.partial)o.state="empty";else{if(!q)return d(null);o.state="loaded",o._isHeaderLoaded=!0,o._mrt=q;const ae=new Map;for(const re in o._mrt.layers){const me=o.getLayer(re);if(me)for(const be of me.getBandList()){const{bytes:Te,tileSize:ze,buffer:Fe}=me.getBandView(be),Ke=ze+2*Fe,nt={data:new n.r({width:Ke,height:Ke},Te),pixelRatio:2,sdf:!1,usvg:!1,version:0};ae.set(`${re}/${be}`,nt)}}for(const re in this.iconsets)this.iconsets[re].addIcons(ae)}d(null)};o.request=this.partial?o.fetchHeader(void 0,E.bind(this)):o.actor.send("loadTile",S,E.bind(this),void 0,!0)}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,d){const A=o.texture;A&&A instanceof n.T?(o.destroy(!0),this.map.painter.saveTileTexture(A)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,d,A){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(d,A,(T,S)=>{if(T)return o.state="errored",this.fire(new n.z(T)),void this.triggerRepaint(o);S&&(o._isHeaderLoaded=!0,o.setTexture(S,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:S})=>S===o),A=d&&d.fields,T=A&&A.bands&&A.bands;return T?T[0]:0}getTextureDescriptor(o,d,A){if(!o)return;const T=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!T)return;let S=null;d instanceof n.aI?S=d.paint.get("raster-array-band"):d instanceof n.aJ&&(S=d.paint.get("raster-particle-array-band"));const E=S||this.getInitialBand(T);if(E!=null)if(o.textureDescriptor){if(!o.updateNeeded(T,E)||A)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,T,E)}addIconset(o,d){this.iconsets[o]=d,this.partial=!1}}const Jl={vector:pc,raster:al,"raster-dem":class extends al{constructor(y,o,d,A){super(y,o,d,A),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(y,o){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function A(T,S){T&&(y.state="errored",o(T)),S&&(y.dem=S,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",o(null))}y.request=n.o(this.map._requestManager.transformRequest(d,n.R.Tile),(function(T,S,E,F){if(delete y.request,y.aborted)y.state="unloaded",o(null);else if(T)y.state="errored",o(T);else if(S){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:E,expires:F});const q=ImageBitmap&&S instanceof ImageBitmap&&n.t(),K=1-(S.width-n.aG(S.width))/2;K<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const Y=q?S:n.q.getImageData(S,K),ae={uid:y.uid,tileID:y.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:Y,encoding:this.encoding,padding:K};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadTile",ae,A.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(y){const o=y.canonical,d=Math.pow(2,o.z),A=(o.x-1+d)%d,T=o.x===0?y.wrap-1:y.wrap,S=(o.x+1+d)%d,E=o.x+1===d?y.wrap+1:y.wrap,F={};return F[new n.aH(y.overscaledZ,T,o.z,A,o.y).key]={backfilled:!1},F[new n.aH(y.overscaledZ,E,o.z,S,o.y).key]={backfilled:!1},o.y>0&&(F[new n.aH(y.overscaledZ,T,o.z,A,o.y-1).key]={backfilled:!1},F[new n.aH(y.overscaledZ,y.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},F[new n.aH(y.overscaledZ,E,o.z,S,o.y-1).key]={backfilled:!1}),o.y+1<d&&(F[new n.aH(y.overscaledZ,T,o.z,A,o.y+1).key]={backfilled:!1},F[new n.aH(y.overscaledZ,y.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},F[new n.aH(y.overscaledZ,E,o.z,S,o.y+1).key]={backfilled:!1}),F}},"raster-array":Bi,geojson:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(A),this._data=o.data,this._options=n.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const T=n.ai/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*T,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*T,extent:n.ai,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:n.ai,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*T,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}updateData(y){if(!this._options.dynamic)return this.fire(new n.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof y!="string"&&(y.type==="Feature"&&(y={type:"FeatureCollection",features:[y]}),y.type!=="FeatureCollection"))return this.fire(new n.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof y!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const d of this._data.features)o.set(d.id,d);for(const d of y.features)o.set(d.id,d);this._data.features=[...o.values()]}else this._data=y;return this._updateWorkerData(!0),this}getClusterExpansionZoom(y,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id,scope:this.scope},o),this}getClusterChildren(y,o){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id,scope:this.scope},o),this}getClusterLeaves(y,o,d,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:y,limit:o,offset:d},A),this}_updateWorkerData(y=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.A("dataloading",{dataType:"source"})),this._loaded=!1;const o=n.l({append:y},this.workerOptions);o.scope=this.scope;const d=this._data;typeof d=="string"?(o.request=this.map._requestManager.transformRequest(n.q.resolveURL(d),n.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(A,T)=>{if(this._loaded=!0,this._pendingLoad=null,A)this.fire(new n.z(A));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(S.resourceTiming=T.resourceTiming[this.id]),y&&(this._partialReload=!0),this.fire(new n.A("data",S)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(y),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const y=n.C(this.id,this.scope);this.map.style.clearSource(y),this._updateWorkerData()}loadTile(y,o){const d=y.actor?"reloadTile":"loadTile";y.actor=this.actor;const A=this.map.style?this.map.style.getLut(this.scope):null,T=A?{image:A.image.clone()}:null,S=this._partialReload,E={type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:T,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:S};y.request=this.actor.send(d,E,(F,q)=>S&&!q?(y.state="loaded",o(null)):(delete y.request,y.destroy(),y.aborted?o(null):F?o(F):(y.loadVectorData(q,this.map.painter,d==="reloadTile"),o(null))),void 0,d==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y,o){this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id,scope:this.scope}),y.destroy()}onRemove(y){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aK{constructor(y,o,d,A){super(y,o,d,A),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const o of y.urls)this.urls.push(this.map._requestManager.transformRequest(o,n.R.Source).url);n.aL(this.urls,(o,d)=>{this._loaded=!0,o?this.fire(new n.z(o)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const o=this.video.seekable;y<o.start(0)||y>o.end(0)?this.fire(new n.z(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,o=y.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(y,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aK,model:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const y=[];for(const o in this._options.models){const d=this._options.models[o],A=n.aN(this.map._requestManager.transformRequest(d.uri,n.R.Model).url).then(T=>{if(!T)return;const S=n.aO(T),E=new n.aP(o,d.position,d.orientation,S);E.computeBoundsAndApplyParent(),this.models.push(E)}).catch(T=>{this.fire(new n.z(new Error(`Could not load model ${o} from ${d.uri}: ${T.message}`)))});y.push(A)}return Promise.allSettled(y).then(()=>{this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this.fire(new n.z(new Error(`Could not load models: ${o.message}`)))})}onAdd(y){this.map=y,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(y,o){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(y,o,d,A){super(),this.type="batched-model",this.id=y,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(A)}onAdd(y){this.map=y,this.load()}reload(){this.cancelTileJSONRequest();const y=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(y))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(y){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=Ns(this._options,this.map._requestManager,o,d,(A,T)=>{this._tileJSONRequest=null,this._loaded=!0,A?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new n.z(A))):T&&(n.l(this,T),T.bounds&&(this.tileBounds=new $s(T.bounds,this.minzoom,this.maxzoom)),Se(T.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),y&&y(A)})}hasTransition(){return!1}hasTile(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)}loaded(){return this._loaded}loadTile(y,o){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme)),A={request:this.map._requestManager.transformRequest(d,n.R.Tile),data:void 0,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,tileSize:this.tileSize*y.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:y.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:n.q.devicePixelRatio,promoteId:this.promoteId};if(y.actor&&y.state!=="expired")if(y.state==="loading")y.reloadCallback=o;else{if(y.buckets){const S=Object.values(y.buckets);for(const E of S)E.dirty=!0;return void(y.state="loaded")}y.request=y.actor.send("reloadTile",A,T.bind(this))}else y.actor=this.dispatcher.getActor(),y.request=y.actor.send("loadTile",A,T.bind(this),void 0,!0);function T(S,E){return y.aborted?o(null):S&&S.status!==404?o(S):(this.map._refreshExpiredTiles&&E&&y.setExpiryData(E),y.loadModelData(E,this.map.painter),y.state="loaded",void o(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aK{constructor(y,o,d,A){super(y,o,d,A),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(S=>typeof S!="number"))||this.fire(new n.z(new n.V(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.z(new n.V(`sources.${y}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new n.z(new n.V(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new n.z(new n.V(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.z(new n.V(`sources.${y}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(y){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!y&&!this._playing||this.texture instanceof n.aM||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=o,this.setEventedParent(A),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new $s(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.aA(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.aA(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this.map=y,this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:o,y:d,z:A}=y.canonical;return this._implementation.hasTile({x:o,y:d,z:A})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,o){const{x:d,y:A,z:T}=y.tileID.canonical,S=new AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:d,y:A,z:T},{signal:S.signal})).then((function(E){return delete y.request,y.aborted?(y.state="unloaded",o(null)):E===void 0?(y.state="errored",o(null)):E===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",o(null)):function(F){return F instanceof ImageData||F instanceof HTMLCanvasElement||F instanceof ImageBitmap||F instanceof HTMLImageElement}(E)?(this.loadTileData(y,E),y.state="loaded",void o(null)):(y.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(E=>{E.name!=="AbortError"&&(y.state="errored",o(E))}),y.request.cancel=()=>S.abort()}loadTileData(y,o){y.setTexture(o,this.map.painter)}unloadTile(y,o){if(y.texture&&y.texture instanceof n.T?(y.destroy(!0),y.texture&&y.texture instanceof n.T&&this.map.painter.saveTileTexture(y.texture)):y.destroy(),this._implementation.unloadTile){const{x:d,y:A,z:T}=y.tileID.canonical;this._implementation.unloadTile({x:d,y:A,z:T})}o&&o()}abortTile(y,o){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){const y=n.C(this.id,this.scope);this.map.style.clearSource(y)}_update(){this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}}},jo=function(y,o,d,A){const T=new Jl[o.type](y,o,d,A);if(T.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${T.id}`);return n.aQ(["load","abort","unload","serialize","prepare"],T),T};function Ed(y,o,d=""){return`${d}:${o.id||""}:${o.layer.id}:${function(A){if("layerId"in A)return`layer:${A.layerId}`;{const{featuresetId:T,importId:S}=A;return`featureset:${T}${S?`:import:${S}`:""}`}}(y.target)}`}function Uc(y,o,d,A=""){if(y.uniqueFeatureID){const T=Ed(y,o,A);if(d.has(T))return!0;d.add(T)}return!1}function gh(y,o,d,A,T=!1){const S=o.sourceCache.transform,E=o.sourceCache.tilesIn(y,o.has3DLayers,T);E.sort(Al);const F=[];for(const q of E){const K=q.tile.queryRenderedFeatures(o,q,d,A,S,T);Object.keys(K).length&&F.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:K})}return F.length===0?{}:function(q){const K={},Y={};for(const ae of q){const re=ae.queryResults,me=ae.wrappedTileID,be=Y[me]=Y[me]||{};for(const Te in re){const ze=re[Te],Fe=be[Te]=be[Te]||{},Ke=K[Te]=K[Te]||[];for(const nt of ze)Fe[nt.featureIndex]||(Fe[nt.featureIndex]=!0,Ke.push(nt))}}return K}(F)}function wu(y,o,d,A,T){const S={},E=A.queryRenderedSymbols(y),F=[];for(const q of Object.keys(E).map(Number))F.push(T[q]);F.sort(Al);for(const q of F){const K=q.featureIndex.lookupSymbolFeatures(E[q.bucketInstanceId],q.bucketIndex,q.sourceLayerIndex,o,d);for(const Y in K){const ae=S[Y]=S[Y]||[],re=K[Y];re.sort((me,be)=>{const Te=q.featureSortOrder;if(Te){const ze=Te.indexOf(me.featureIndex);return Te.indexOf(be.featureIndex)-ze}return be.featureIndex-me.featureIndex});for(const me of re)ae.push(me)}}return S}function Bc(y,o){const d=y.getRenderableIds().map(S=>y.getTileByID(S)),A=[],T={};for(let S=0;S<d.length;S++){const E=d[S],F=E.tileID.canonical.key;T[F]||(T[F]=!0,E.querySourceFeatures(A,o))}return A}function Al(y,o){const d=y.tileID,A=o.tileID;return d.overscaledZ-A.overscaledZ||d.canonical.y-A.canonical.y||d.wrap-A.wrap||d.canonical.x-A.canonical.x}function no(y,o){const d={};if(!o)return d;for(const A of y){const T=A.layerIds.map(S=>o.getLayer(S)).filter(Boolean);if(T.length!==0){A.layers=T,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(S=>T.filter(E=>E.id===S)[0]));for(const S of T)d[S.fqid]=A}}return d}const Go=32,Ql=33,Ru=new Uint16Array(8184);for(let y=0;y<2046;y++){let o=y+2,d=0,A=0,T=0,S=0,E=0,F=0;for(1&o?T=S=E=Go:d=A=F=Go;(o>>=1)>1;){const K=d+T>>1,Y=A+S>>1;1&o?(T=d,S=A,d=E,A=F):(d=T,A=S,T=E,S=F),E=K,F=Y}const q=4*y;Ru[q+0]=d,Ru[q+1]=A,Ru[q+2]=T,Ru[q+3]=S}const mo=new Uint16Array(2178),Zo=new Uint8Array(1089),Nd=new Uint16Array(1089);function Ku(y){return y===0?-.03125:y===32?.03125:0}const Sf={type:2,extent:n.ai,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ai+1,0),new n.P(n.ai+1,n.ai+1),new n.P(0,n.ai+1),new n.P(0,0)]]};class eu{constructor(o,d,A,T,S){this.tileID=o,this.uid=n.aW(),this.uses=0,this.tileSize=d,this.tileZoom=A,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,T&&T.style&&(this._lastUpdatedBrightness=T.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",T&&T.transform&&(this.projection=T.transform.projection)}registerFadeDuration(o){const d=o+this.timeAdded;d<n.q.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aR(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,d,A){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=no(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const T in this.buckets){const S=this.buckets[T];if(S instanceof n.aY){if(this.hasSymbolBuckets=!0,!A)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const T in this.buckets){const S=this.buckets[T];if(S instanceof n.aY&&S.hasRTLText){this.hasRTLText=!0,n.aZ();break}}this.queryPadding=0;for(const T in this.buckets){const S=this.buckets[T],E=d.style.getOwnLayer(T);if(!E)continue;const F=E.queryRadius(S);this.queryPadding=Math.max(this.queryPadding,F)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new n.aX}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,d,A){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets=Object.assign({},this.buckets,no(o.buckets,d.style)),o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const T in this.buckets){const S=this.buckets[T];S.uploadPending()&&S.upload(o)}const d=o.gl,A=this.imageAtlas;A&&!A.uploaded&&(this.imageAtlasTexture=new n.T(o,A.image,d.RGBA8,{useMipmap:!!A.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(o,this.glyphAtlasImage,d.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(o,this.lineAtlas.image,d.R8),this.lineAtlas.uploaded=!0)}prepare(o,d,A){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,A),!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const T=d.style.getBrightness();(this._lastUpdatedBrightness||T)&&(this._lastUpdatedBrightness&&T&&Math.abs(this._lastUpdatedBrightness-T)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==T),this._lastUpdatedBrightness=T))}queryRenderedFeatures(o,d,A,T,S,E){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const F=function(q,K){const Y=n.ad.mat4.fromScaling([],[.5*q.width,.5*-q.height,1]);return n.ad.mat4.translate(Y,Y,[1,-1,0]),n.ad.mat4.multiply(Y,Y,q.calculateProjMatrix(K.toUnwrapped())),Float32Array.from(Y)}(S,this.tileID);return this.latestFeatureIndex.query(o,{tilespaceGeometry:d,pixelPosMatrix:F,transform:T,availableImages:A,tileTransform:this.tileTransform})}querySourceFeatures(o,d){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const T=A.loadVTLayers(),S=d?d.sourceLayer:"",E=T._geojsonTileLayer||T[S];if(!E)return;const F=n.a_(d&&d.filter),{z:q,x:K,y:Y}=this.tileID.canonical,ae={z:q,x:K,y:Y};for(let re=0;re<E.length;re++){const me=E.feature(re);if(F.needGeometry){const ze=n.a$(me,!0);if(!F.filter(new n.aa(this.tileID.overscaledZ),ze,this.tileID.canonical))continue}else if(!F.filter(new n.aa(this.tileID.overscaledZ),me))continue;const be=A.getId(me,S),Te=new n.b0(me,q,K,Y,be);Te.tile=ae,o.push(Te)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const A=n.b1(o.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const A=Date.now();let T=!1;if(this.expirationTime>A)T=!1;else if(d)if(this.expirationTime<d)T=!0;else{const S=this.expirationTime-d;S?this.expirationTime=A+Math.max(S,3e4):T=!0}else T=!0;T?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o,d){if(!this.latestFeatureIndex||!o.style)return;const A=this.latestFeatureIndex.loadVTLayers(),T=o.style.listImages(),S=o.style.getBrightness();for(const E in this.buckets){if(!o.style.hasLayer(E))continue;const F=this.buckets[E],q=F.layers[0],K=q.sourceLayer||"_geojsonTileLayer",Y=A[K],ae=o.style.getLayerSourceCache(q);let re={};ae&&(re=ae._state.getState(K,void 0));const me=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},be=Object.keys(re).length>0&&!d;be&&!F.stateDependentLayers.length&&!d||F.update(re,Y,T,me,be?F.stateDependentLayers:F.layers,d,S),(F instanceof n.b2||F instanceof n.b3)&&o._terrain&&o._terrain.enabled&&ae&&F.uploadPending()&&o._terrain._clearRenderCacheForTile(ae.id,this.tileID);const Te=o&&o.style&&o.style.getOwnLayer(E);Te&&(this.queryPadding=Math.max(this.queryPadding,Te.queryRadius(F)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.q.now()+o}setTexture(o,d){const A=d.context,T=A.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o):(this.texture=new n.T(A,o,T.RGBA8,{useMipmap:!0}),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE))}setDependencies(o,d){const A={};for(const T of d)A[T]=!0;this.dependencies[o]=A}hasDependency(o,d){for(const A of o){const T=this.dependencies[A];if(T){for(const S of d)if(T[S])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const A=n.b4(Sf,this.tileID.canonical,this.tileTransform)[0],T=new n.b5,S=new n.b6;for(let E=0;E<A.length;E++){const{x:F,y:q}=A[E];T.emplaceBack(F,q),S.emplaceBack(E)}S.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(S),this._tileDebugBuffer=o.createVertexBuffer(T,n.b7.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,T.length,S.length)}_makeTileBoundsBuffers(o,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const A=n.b4(Sf,this.tileID.canonical,this.tileTransform)[0];let T,S;if(this.isRaster){const E=function(F,q){const K=n.aR(F,q),Y=Math.pow(2,F.z);for(let ze=0;ze<Ql;ze++)for(let Fe=0;Fe<Ql;Fe++){const Ke=n.aS((F.x+(Fe+Ku(Fe))/Go)/Y),nt=n.aT((F.y+(ze+Ku(ze))/Go)/Y),at=q.project(Ke,nt),pt=ze*Ql+Fe;mo[2*pt+0]=Math.round((at.x*K.scale-K.x)*n.ai),mo[2*pt+1]=Math.round((at.y*K.scale-K.y)*n.ai)}Zo.fill(0),Nd.fill(0);for(let ze=2045;ze>=0;ze--){const Fe=4*ze,Ke=Ru[Fe+0],nt=Ru[Fe+1],at=Ru[Fe+2],pt=Ru[Fe+3],st=Ke+at>>1,ot=nt+pt>>1,lt=st+ot-nt,vt=ot+Ke-st,Tt=nt*Ql+Ke,Qt=pt*Ql+at,Ut=ot*Ql+st,ia=Math.hypot((mo[2*Tt+0]+mo[2*Qt+0])/2-mo[2*Ut+0],(mo[2*Tt+1]+mo[2*Qt+1])/2-mo[2*Ut+1])>=16;Zo[Ut]=Zo[Ut]||(ia?1:0),ze<1022&&(Zo[Ut]=Zo[Ut]||Zo[(nt+vt>>1)*Ql+(Ke+lt>>1)]||Zo[(pt+vt>>1)*Ql+(at+lt>>1)])}const ae=new n.aU,re=new n.aV;let me=0;function be(ze,Fe){const Ke=Fe*Ql+ze;return Nd[Ke]===0&&(ae.emplaceBack(mo[2*Ke+0],mo[2*Ke+1],ze*n.ai/Go,Fe*n.ai/Go),Nd[Ke]=++me),Nd[Ke]-1}function Te(ze,Fe,Ke,nt,at,pt){const st=ze+Ke>>1,ot=Fe+nt>>1;if(Math.abs(ze-at)+Math.abs(Fe-pt)>1&&Zo[ot*Ql+st])Te(at,pt,ze,Fe,st,ot),Te(Ke,nt,at,pt,st,ot);else{const lt=be(ze,Fe),vt=be(Ke,nt),Tt=be(at,pt);re.emplaceBack(lt,vt,Tt)}}return Te(0,0,Go,Go,Go,0),Te(Go,Go,0,0,0,Go),{vertices:ae,indices:re}}(this.tileID.canonical,d);T=E.vertices,S=E.indices}else{T=new n.aU,S=new n.aV;for(const{x:F,y:q}of A)T.emplaceBack(F,q,0,0);const E=n.b9(T.int16,void 0,4);for(let F=0;F<E.length;F+=3)S.emplaceBack(E[F],E[F+1],E[F+2])}this._tileBoundsBuffer=o.createVertexBuffer(T,n.ba.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(S),this._tileBoundsSegments=n.b8.simpleSegment(0,0,T.length,S.length)}_makeGlobeTileDebugBuffers(o,d){const A=d.projection;if(!A||A.name!=="globe"||d.freezeTileCoverage)return;const T=this.tileID.canonical,S=n.bb(T,d),E=n.bc(S),F=n.ag(d.zoom);let q;F>0&&(q=n.ad.mat4.invert(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,T,d,E,q,F),this._makeGlobeTileDebugTextBuffer(o,T,d,E,q,F)}_globePoint(o,d,A,T,S,E,F){let q=n.bd(o,d,A);if(E){const K=1<<A.z,Y=n.av(T.center.lng),ae=n.aC(T.center.lat),re=(A.x+.5)/K-Y;let me=0;re>.5?me=-1:re<-.5&&(me=1);let be=(o/n.ai+A.x)/K+me,Te=(d/n.ai+A.y)/K;be=(be-Y)*T._pixelsPerMercatorPixel+Y,Te=(Te-ae)*T._pixelsPerMercatorPixel+ae;const ze=[be*T.worldSize,Te*T.worldSize,0];n.ad.vec3.transformMat4(ze,ze,E),q=n.be(q,ze,F)}return n.ad.vec3.transformMat4(q,q,S)}_makeGlobeTileDebugBorderBuffer(o,d,A,T,S,E){const F=new n.b5,q=new n.b6,K=new n.bf,Y=(re,me,be,Te,ze)=>{const Fe=(be-re)/(ze-1),Ke=(Te-me)/(ze-1),nt=F.length;for(let at=0;at<ze;at++){const pt=re+at*Fe,st=me+at*Ke;F.emplaceBack(pt,st);const ot=this._globePoint(pt,st,d,A,T,S,E);K.emplaceBack(ot[0],ot[1],ot[2]),q.emplaceBack(nt+at)}},ae=n.ai;Y(0,0,ae,0,16),Y(ae,0,ae,ae,16),Y(ae,ae,0,ae,16),Y(0,ae,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(q),this._tileDebugBuffer=o.createVertexBuffer(F,n.b7.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(K,n.bg.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,F.length,q.length)}_makeGlobeTileDebugTextBuffer(o,d,A,T,S,E){const F=n.ai/4,q=new n.b5,K=new n.aV,Y=new n.bf,ae=25;K.reserve(32),q.reserve(ae),Y.reserve(ae);const re=(me,be)=>ae*me+be;for(let me=0;me<ae;me++){const be=me*F;for(let Te=0;Te<ae;Te++){const ze=Te*F;q.emplaceBack(ze,be);const Fe=this._globePoint(ze,be,d,A,T,S,E);Y.emplaceBack(Fe[0],Fe[1],Fe[2])}}for(let me=0;me<4;me++)for(let be=0;be<4;be++){const Te=re(me,be),ze=re(me,be+1),Fe=re(me+1,be),Ke=re(me+1,be+1);K.emplaceBack(Te,ze,Fe),K.emplaceBack(Fe,ze,Ke)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(K),this._tileDebugTextBuffer=o.createVertexBuffer(q,n.b7.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(Y,n.bg.members),this._tileDebugTextSegments=n.b8.simpleSegment(0,0,ae,32)}destroy(o=!1){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bh.setPbf(n.bi);class qo extends eu{constructor(o,d,A,T,S){super(o,d,A,T,S),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(o){return this._mrt&&this._mrt.getLayer(o)}setTexture(o,d){const A=d.context,T=A.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o,{premultiply:!1}):this.texture=new n.T(A,o,T.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,d){const A=this._mrt=new n.bh(30),T=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=n.bj(T,(S,E,F,q)=>{if(S)d(S);else try{const K=A.getHeaderLength(E);if(K>o)return void(this.request=this.fetchHeader(K,d));A.parseHeader(E),this._isHeaderLoaded=!0;let Y=0;for(const ae of Object.values(A.layers))Y=Math.max(Y,ae.dataIndex[ae.dataIndex.length-1].lastByte);E.byteLength>=Y&&(this.entireBuffer=E),d(null,this.entireBuffer||E,F,q)}catch(K){d(K)}}),this.request}fetchBand(o,d,A){const T=this._mrt;if(!this._isHeaderLoaded||!T)return void A(new Error("Tile header is not ready"));const S=this.actor;if(!S)return void A(new Error("Can't fetch tile band without an actor"));let E;const F=(ae,re)=>{E.complete(ae,re),ae?A(ae):(this.updateTextureDescriptor(o,d),A(null,this.textureDescriptor&&this.textureDescriptor.img))},q=(ae,re)=>{if(ae)return A(ae);const me=S.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:re,task:E},F,void 0,!0);this._workQueue.push(()=>{me&&me.cancel(),E.cancel()})},K=T.getLayer(o);if(!K)return void A(new Error(`Unknown sourceLayer "${o}"`));if(K.hasDataForBand(d))return this.updateTextureDescriptor(o,d),void A(null,this.textureDescriptor?this.textureDescriptor.img:null);const Y=K.getDataRange([d]);if(E=T.createDecodingTask(Y),!E||E.tasks.length)if(this.flushQueues(),this.entireBuffer)q(null,this.entireBuffer.slice(Y.firstByte,Y.lastByte+1));else{const ae=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Y.firstByte}-${Y.lastByte}`}}),re=n.bj(ae,q);this._fetchQueue.push(()=>{re.cancel(),E.cancel()})}else A(null)}updateNeeded(o,d){return(!this.textureDescriptor||this.textureDescriptor.band!==d||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,d){if(!this._mrt)return;const A=this._mrt.getLayer(o);if(!A||!A.hasBand(d)||!A.hasDataForBand(d))return;const{bytes:T,tileSize:S,buffer:E,offset:F,scale:q}=A.getBandView(d),K=S+2*E,Y=new n.r({width:K,height:K},T),ae=this.texture;ae&&ae instanceof n.T&&ae.update(Y,{premultiply:!1}),this.textureDescriptor={layer:o,band:d,img:Y,buffer:E,offset:F,tileSize:S,format:A.pixelFormat,mix:[q,256*q,65536*q,16777216*q]}}}class Wu{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,A){const T=o.wrapped().key;this.data[T]===void 0&&(this.data[T]=[]);const S={value:d,timeout:void 0};if(A!==void 0&&(S.timeout=setTimeout(()=>{this.remove(o,S)},A)),this.data[T].push(S),this.order.push(T),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const A=o.wrapped().key,T=d===void 0?0:this.data[A].indexOf(d),S=this.data[A][T];return this.data[A].splice(T,1),S.timeout&&clearTimeout(S.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(S.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const A in this.data)for(const T of this.data[A])o(T.value)||d.push(T);for(const A of d)this.remove(A.value.tileID,A)}}class yh{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,A){const T=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][T]=this.stateChanges[o][T]||{},n.l(this.stateChanges[o][T],A),this.deletedStates[o]===null){this.deletedStates[o]={};for(const S in this.state[o])S!==T&&(this.deletedStates[o][S]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][T]===null){this.deletedStates[o][T]={};for(const S in this.state[o][T])A[S]||(this.deletedStates[o][T][S]=null)}else for(const S in A)this.deletedStates[o]&&this.deletedStates[o][T]&&this.deletedStates[o][T][S]===null&&delete this.deletedStates[o][T][S]}removeFeatureState(o,d,A){if(this.deletedStates[o]===null)return;const T=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},A&&d!==void 0)this.deletedStates[o][T]!==null&&(this.deletedStates[o][T]=this.deletedStates[o][T]||{},this.deletedStates[o][T][A]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][T])for(A in this.deletedStates[o][T]={},this.stateChanges[o][T])this.deletedStates[o][T][A]=null;else this.deletedStates[o][T]=null;else this.deletedStates[o]=null}getState(o,d){const A=this.state[o]||{},T=this.stateChanges[o]||{},S=this.deletedStates[o];if(S===null)return{};if(d!==void 0){const F=String(d),q=n.l({},A[F],T[F]);if(S){const K=S[d];if(K===null)return{};for(const Y in K)delete q[Y]}return q}const E=n.l({},A,T);if(S)for(const F in S)delete E[F];return E}initializeTileState(o,d){o.refreshFeatureState(d)}coalesceChanges(o,d){const A={};for(const T in this.stateChanges){this.state[T]=this.state[T]||{};const S={};for(const E in this.stateChanges[T])this.state[T][E]||(this.state[T][E]={}),n.l(this.state[T][E],this.stateChanges[T][E]),S[E]=this.state[T][E];A[T]=S}for(const T in this.deletedStates){this.state[T]=this.state[T]||{};const S={};if(this.deletedStates[T]===null)for(const E in this.state[T])S[E]={},this.state[T][E]={};else for(const E in this.deletedStates[T]){if(this.deletedStates[T][E]===null)this.state[T][E]={};else if(this.state[T][E])for(const F of Object.keys(this.deletedStates[T][E]))delete this.state[T][E][F];S[E]=this.state[T][E]}A[T]=A[T]||{},n.l(A[T],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const T in o)o[T].refreshFeatureState(d)}}class rl extends n.E{constructor(o,d,A){super(),this.id=o,this._onlySymbols=A,d.on("data",T=>{T.dataType==="source"&&T.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&T.dataType==="source"&&T.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new Wu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new yh,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles)if(!this._tiles[o].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,d){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const A=this._tiles[d];A.upload(o),A.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(zn).map(o=>o.key)}getRenderableIds(o,d){const A=[];for(const T in this._tiles)this._isIdRenderable(+T,o,d)&&A.push(this._tiles[T]);return o?A.sort((T,S)=>{const E=T.tileID,F=S.tileID,q=new n.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),K=new n.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-F.overscaledZ||K.y-q.y||K.x-q.x}).map(T=>T.tileID.key):A.map(T=>T.tileID).sort(zn).map(T=>T.key)}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d,A){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())&&(A||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,d){const A=this._tiles[o];A&&(A.state!=="loading"&&(A.state=d),this._loadTile(A,this._tileLoaded.bind(this,A,o,d)))}_tileLoaded(o,d,A,T){if(T)if(o.state="errored",T.status!==404)this._source.fire(new n.z(T,{tile:o}));else{if(this._source.fire(new n.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=n.q.now(),A==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new n.A("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const d=this.getRenderableIds();for(let T=0;T<d.length;T++){const S=d[T];if(o.neighboringTiles&&o.neighboringTiles[S]){const E=this.getTileByID(S);A(o,E),A(E,o)}}function A(T,S){if(!T.dem||T.dem.borderReady)return;T.needsHillshadePrepare=!0,T.needsDEMTextureUpload=!0;let E=S.tileID.canonical.x-T.tileID.canonical.x;const F=S.tileID.canonical.y-T.tileID.canonical.y,q=Math.pow(2,T.tileID.canonical.z),K=S.tileID.key;E===0&&F===0||Math.abs(F)>1||(Math.abs(E)>1&&(Math.abs(E+q)===1?E+=q:Math.abs(E-q)===1&&(E-=q)),S.dem&&T.dem&&(T.dem.backfillBorder(S.dem,E,F),T.neighboringTiles&&T.neighboringTiles[K]&&(T.neighboringTiles[K].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,A,T){for(const S in this._tiles){let E=this._tiles[S];if(T[S]||!E.hasData()||E.tileID.overscaledZ<=d||E.tileID.overscaledZ>A)continue;let F=E.tileID;for(;E&&E.tileID.overscaledZ>d+1;){const K=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[K.key],E&&E.hasData()&&(F=K)}let q=F;for(;q.overscaledZ>d;)if(q=q.scaledTo(q.overscaledZ-1),o[q.key]){T[F.key]=F;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const A=this._loadedParentTiles[o.key];return A&&A.tileID.overscaledZ>=d?A:null}for(let A=o.overscaledZ-1;A>=d;A--){const T=o.scaledTo(A),S=this._getLoadedTile(T);if(S)return S}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,d){d=d||this._source.tileSize;const A=Math.ceil(o.width/d)+1,T=Math.ceil(o.height/d)+1,S=Math.floor(A*T*5),E=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,S):S,F=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(F)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const A={};for(const T in this._tiles){const S=this._tiles[T];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+d),A[S.tileID.key]=S}this._tiles=A;for(const T in this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(const T in this._tiles)this._setTileReloadTimer(+T,this._tiles[T])}}update(o,d,A,T){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!A)return;this.updateCacheSize(o,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const S=this._source.type==="batched-model";let E,F=this._source.maxzoom;const q=this.map&&this.map.painter?this.map.painter._terrain:null;if(q&&q.sourceCache===this&&q.attenuationRange()){const ae=q.attenuationRange()[0],re=Math.floor(ae)-Math.log2(q.getDemUpscale());F>re&&(F=re)}if(this.used||this.usedForTerrain){if(this._source.tileID)E=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(ae=>new n.aH(ae.canonical.z,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y));else if(this.tileCoverLift!==0){const ae=o.clone();ae.tileCoverLift=this.tileCoverLift,E=ae.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:F,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.minzoom<=1&&o.projection.name==="globe"&&(E.push(new n.aH(1,0,1,0,0)),E.push(new n.aH(1,0,1,1,0)),E.push(new n.aH(1,0,1,0,1)),E.push(new n.aH(1,0,1,1,1)))}else if(E=o.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:F,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.hasTile){const ae=this._source.hasTile.bind(this._source);E=E.filter(re=>ae(re))}}else E=[];if(E.length>0&&this.castsShadows&&T&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!go(this._source.type)){const ae=o.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!A}),re=Math.min(ae,this._source.maxzoom);if(S){const me=o.extendTileCover(E,re);for(const be of me)E.push(be)}else{const me=o.extendTileCover(E,re,T);for(const be of me)this._shadowCasterTiles[be.key]=!0,E.push(be)}}const K=this._updateRetainedTiles(E);if(go(this._source.type)&&E.length!==0){const ae={},re={},me=Object.keys(K);for(const Te of me){const ze=K[Te],Fe=this._tiles[Te];if(!Fe||Fe.fadeEndTime&&Fe.fadeEndTime<=n.q.now())continue;const Ke=this.findLoadedParent(ze,Math.max(ze.overscaledZ-rl.maxOverzooming,this._source.minzoom));Ke&&(this._addTile(Ke.tileID),ae[Ke.tileID.key]=Ke.tileID),re[Te]=ze}const be=E[E.length-1].overscaledZ;for(const Te in this._tiles){const ze=this._tiles[Te];if(K[Te]||!ze.hasData())continue;let Fe=ze.tileID;for(;Fe.overscaledZ>be;){Fe=Fe.scaledTo(Fe.overscaledZ-1);const Ke=this._tiles[Fe.key];if(Ke&&Ke.hasData()&&re[Fe.key]){K[Te]=ze.tileID;break}}}for(const Te in ae)K[Te]||(this._coveredTiles[Te]=!0,K[Te]=ae[Te])}for(const ae in K)this._tiles[ae].clearFadeHold();const Y=n.bk(this._tiles,K);for(const ae of Y){const re=this._tiles[ae];re.hasSymbolBuckets&&!re.holdingForFade()?re.setHoldDuration(this.map._fadeDuration):re.hasSymbolBuckets&&!re.symbolFadeFinished()||this._removeTile(+ae)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const d={};if(o.length===0)return d;const A={},T=o.reduce((K,Y)=>Math.min(K,Y.overscaledZ),1/0),S=o[0].overscaledZ,E=Math.max(S-rl.maxOverzooming,this._source.minzoom),F=Math.max(S+rl.maxUnderzooming,this._source.minzoom),q={};for(const K of o){const Y=this._addTile(K);d[K.key]=K,Y.hasData()||T<this._source.maxzoom&&(q[K.key]=K)}this._retainLoadedChildren(q,T,F,d);for(const K of o){let Y=this._tiles[K.key];if(Y.hasData())continue;if(K.canonical.z>=this._source.maxzoom){const re=K.children(this._source.maxzoom)[0],me=this.getTile(re);if(me&&me.hasData()){d[re.key]=re;continue}}else{const re=K.children(this._source.maxzoom);if(d[re[0].key]&&d[re[1].key]&&d[re[2].key]&&d[re[3].key])continue}let ae=Y.wasRequested();for(let re=K.overscaledZ-1;re>=E;--re){const me=K.scaledTo(re);if(A[me.key]||(A[me.key]=!0,Y=this.getTile(me),!Y&&ae&&(Y=this._addTile(me)),Y&&(d[me.key]=me,ae=Y.wasRequested(),Y.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let A,T=this._tiles[o].tileID;for(;T.overscaledZ>0;){if(T.key in this._loadedParentTiles){A=this._loadedParentTiles[T.key];break}d.push(T.key);const S=T.scaledTo(T.overscaledZ-1);if(A=this._getLoadedTile(S),A)break;T=S}for(const S of d)this._loadedParentTiles[S]=A}}_addTile(o){let d=this._tiles[o.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const A=!!d;if(!A){const T=this.map?this.map.painter:null,S=this._source.tileSize*o.overscaleFactor();d=this._source.type==="raster-array"?new qo(o,S,this.transform.tileZoom,T,this._isRaster):new eu(o,S,this.transform.tileZoom,T,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))}return d?(d.uses++,this._tiles[o.key]=d,A||this._source.fire(new n.A("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const A=d.getExpiryTimeout();A&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},A))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,d,A){const T=[],S=this.transform;if(!S)return T;const E=S.projection.name==="globe",F=n.av(S.center.lng);for(const q in this._tiles){const K=this._tiles[q];if(A&&K.clearQueryDebugViz(),K.holdingForFade())continue;let Y;if(E){const ae=K.tileID.canonical;if(ae.z===0){const re=[Math.abs(n.ay(F,...vr(ae,-1))-F),Math.abs(n.ay(F,...vr(ae,1))-F)];Y=[0,2*re.indexOf(Math.min(...re))-1]}else{const re=[Math.abs(n.ay(F,...vr(ae,-1))-F),Math.abs(n.ay(F,...vr(ae,0))-F),Math.abs(n.ay(F,...vr(ae,1))-F)];Y=[re.indexOf(Math.min(...re))-1]}}else Y=[0];for(const ae of Y){const re=o.containsTile(K,S,d,ae);re&&T.push(re)}}return T}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,d){const A=this.getRenderableIds(o,d).map(S=>this._tiles[S].tileID),T=this.transform.projection.name==="globe";for(const S of A)S.projMatrix=this.transform.calculateProjMatrix(S.toUnwrapped()),S.expandedProjMatrix=T?this.transform.calculateProjMatrix(S.toUnwrapped(),!1,!0):S.projMatrix;return A}sortCoordinatesByDistance(o){const d=o.slice(),A=this.transform._camera.position,T=this.transform._camera.forward(),S={};for(const E of d){const F=1/(1<<E.canonical.z);S[E.key]=((E.canonical.x+.5)*F+E.wrap-A[0])*T[0]+((E.canonical.y+.5)*F-A[1])*T[1]-A[2]*T[2]}return d.sort((E,F)=>S[E.key]-S[F.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(go(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(o,d,A){this._state.updateState(o=o||"_geojsonTileLayer",d,A)}removeFeatureState(o,d,A){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,A)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,A){const T=this._tiles[o];T&&T.setDependencies(d,A)}reloadTilesForDependencies(o,d){for(const A in this._tiles)this._tiles[A].hasDependency(o,d)&&this._reloadTile(+A,"reloading");this._cache.filter(A=>!A.hasDependency(o,d))}_preloadTiles(o,d){if(!this._sourceLoaded){const q=()=>{this._sourceLoaded&&(this._source.off("data",q),this._preloadTiles(o,d))};return void this._source.on("data",q)}const A=new Map,T=Array.isArray(o)?o:[o],S=this.map.painter.terrain,E=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const q of T){const K=q.coveringTiles({tileSize:E,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Y of K)A.set(Y.key,Y);this.usedForTerrain&&q.updateElevation(!1)}const F=Array.from(A.values());n.bl(F,(q,K)=>{const Y=new eu(q,this._source.tileSize*q.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Y,ae=>{this._source.type==="raster-dem"&&Y.dem&&this._backfillDEM(Y),K(ae,Y)})},d)}}function zn(y,o){const d=Math.abs(2*y.wrap)-+(y.wrap<0),A=Math.abs(2*o.wrap)-+(o.wrap<0);return y.overscaledZ-o.overscaledZ||A-d||o.canonical.y-y.canonical.y||o.canonical.x-y.canonical.x}function go(y){return y==="raster"||y==="image"||y==="video"||y==="custom"}function vr(y,o){const d=1<<y.z;return[y.x/d+o,(y.x+1)/d+o]}rl.maxOverzooming=10,rl.maxUnderzooming=3;class jc{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,d=!1;for(const A in this.style._mergedLayers){const T=this.style._mergedLayers[A];if(T.type==="fill-extrusion")this.layers.push({layer:T,visible:o,visibilityChanged:d});else if(T.type==="model"){const S=this.style.getLayerSource(T);S&&S.type==="batched-model"&&this.layers.push({layer:T,visible:o,visibilityChanged:d})}}}onNewFrame(o){this.layersGotHidden=!1;for(const d of this.layers){const A=d.layer;let T=!1;A.type==="fill-extrusion"?T=!A.isHidden(o)&&A.paint.get("fill-extrusion-opacity")>0:A.type==="model"&&(T=!A.isHidden(o)&&A.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!T&&d.visible,d.visible=T}}updateZOffset(o,d){this.currentBuildingBuckets=[];for(const T of this.layers){const S=T.layer,E=this.style.getLayerSourceCache(S);let F=1;S.type==="fill-extrusion"&&(F=T.visible?S.paint.get("fill-extrusion-vertical-scale"):0);let q=E?E.getTile(d):null;if(!q&&E&&d.canonical.z>E.getSource().minzoom){let K=d.scaledTo(Math.min(E.getSource().maxzoom,d.overscaledZ-1));for(;K.overscaledZ>=E.getSource().minzoom&&(q=E.getTile(K),!q&&K.overscaledZ!==0);)K=K.scaledTo(K.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:q?q.getBucket(S):null,tileID:q?q.tileID:d,verticalScale:F})}o.hasAnyZOffset=!1;let A=!1;for(let T=0;T<o.symbolInstances.length;T++){const S=o.symbolInstances.get(T),E=S.zOffset,F=this._getHeightAtTileOffset(d,S.tileAnchorX,S.tileAnchorY);S.zOffset=F!==Number.NEGATIVE_INFINITY?F:E,A||E===S.zOffset||(A=!0),o.hasAnyZOffset||S.zOffset===0||(o.hasAnyZOffset=!0)}A&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,d,A,T){let S=d,E=A;if(o.canonical.z!==T.canonical.z){const F=T.canonical,q=1/(1<<o.canonical.z-F.z);S=(d+o.canonical.x*n.ai)*q-F.x*n.ai|0,E=(A+o.canonical.y*n.ai)*q-F.y*n.ai|0}return{tileX:S,tileY:E}}_getHeightAtTileOffset(o,d,A){let T,S;for(let E=0;E<this.layers.length;++E){if(this.layers[E].layer.type!=="fill-extrusion")continue;const{bucket:F,tileID:q,verticalScale:K}=this.currentBuildingBuckets[E];if(!F)continue;const{tileX:Y,tileY:ae}=this._mapCoordToOverlappingTile(o,d,A,q),re=F.getHeightAtTileCoord(Y,ae);re&&re.height!==void 0&&(re.hidden?T=re.height:S=Math.max(re.height*K,S||0))}if(S!==void 0)return S;for(let E=0;E<this.layers.length;++E){const F=this.layers[E];if(F.layer.type!=="model"||!F.visible)continue;const{bucket:q,tileID:K}=this.currentBuildingBuckets[E];if(!q)continue;const{tileX:Y,tileY:ae}=this._mapCoordToOverlappingTile(o,d,A,K),re=q.getHeightAtTileCoord(Y,ae);if(re&&!re.hidden)return re.height===void 0&&T!==void 0?Math.min(re.maxHeight,T)*re.verticalScale:re.height?re.height*re.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Sn(y,o){const d={};for(const A in y)A!=="ref"&&(d[A]=y[A]);return n.bm.forEach(A=>{A in o&&(d[A]=o[A])}),d}function Ah(y){y=y.slice();const o=Object.create(null);for(let d=0;d<y.length;d++)o[y[d].id]=y[d];for(let d=0;d<y.length;d++)"ref"in y[d]&&(y[d]=Sn(y[d],o[y[d].ref]));return y}const Nn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Ks(y,o,d){d.push({command:Nn.addSource,args:[y,o[y]]})}function mc(y,o,d){o.push({command:Nn.removeSource,args:[y]}),d[y]=!0}function gc(y,o,d,A){mc(y,d,A),Ks(y,o,d)}function er(y,o,d){let A;for(A in y[d])if(y[d].hasOwnProperty(A)&&A!=="data"&&!n.bn(y[d][A],o[d][A]))return!1;for(A in o[d])if(o[d].hasOwnProperty(A)&&A!=="data"&&!n.bn(y[d][A],o[d][A]))return!1;return!0}function hn(y,o,d,A,T,S){let E;for(E in o=o||{},y=y||{})y.hasOwnProperty(E)&&(n.bn(y[E],o[E])||d.push({command:S,args:[A,E,o[E],T]}));for(E in o)o.hasOwnProperty(E)&&!y.hasOwnProperty(E)&&(n.bn(y[E],o[E])||d.push({command:S,args:[A,E,o[E],T]}))}function bn(y){return y.id}function Ws(y,o){return y[o.id]=o,y}class Od{constructor(o,d){this.reset(o,d)}reset(o,d){this.points=o||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.ay(o,0,1);let d=1,A=this._distances[d];const T=o*this.paddedLength+this.padding;for(;A<T&&d<this._distances.length;)A=this._distances[++d];const S=d-1,E=this._distances[S],F=A-E,q=F>0?(T-E)/F:0;return this.points[S].mult(1-q).add(this.points[d].mult(q))}}class An{constructor(o,d,A){const T=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(o/A),this.yCellCount=Math.ceil(d/A);for(let E=0;E<this.xCellCount*this.yCellCount;E++)T.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=d,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,d,A,T,S){this._forEachCell(d,A,T,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(d),this.bboxes.push(A),this.bboxes.push(T),this.bboxes.push(S)}insertCircle(o,d,A,T){this._forEachCell(d-T,A-T,d+T,A+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(d),this.circles.push(A),this.circles.push(T)}_insertBoxCell(o,d,A,T,S,E){this.boxCells[S].push(E)}_insertCircleCell(o,d,A,T,S,E){this.circleCells[S].push(E)}_query(o,d,A,T,S,E){if(A<0||o>this.width||T<0||d>this.height)return!S&&[];const F=[];if(o<=0&&d<=0&&this.width<=A&&this.height<=T){if(S)return!0;for(let q=0;q<this.boxKeys.length;q++)F.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const K=this.circles[3*q],Y=this.circles[3*q+1],ae=this.circles[3*q+2];F.push({key:this.circleKeys[q],x1:K-ae,y1:Y-ae,x2:K+ae,y2:Y+ae})}return E?F.filter(E):F}return this._forEachCell(o,d,A,T,this._queryCell,F,{hitTest:S,seenUids:{box:{},circle:{}}},E),S?F.length>0:F}_queryCircle(o,d,A,T,S){const E=o-A,F=o+A,q=d-A,K=d+A;if(F<0||E>this.width||K<0||q>this.height)return!T&&[];const Y=[];return this._forEachCell(E,q,F,K,this._queryCellCircle,Y,{hitTest:T,circle:{x:o,y:d,radius:A},seenUids:{box:{},circle:{}}},S),T?Y.length>0:Y}query(o,d,A,T,S){return this._query(o,d,A,T,!1,S)}hitTest(o,d,A,T,S){return this._query(o,d,A,T,!0,S)}hitTestCircle(o,d,A,T){return this._queryCircle(o,d,A,!0,T)}_queryCell(o,d,A,T,S,E,F,q){const K=F.seenUids,Y=this.boxCells[S];if(Y!==null){const re=this.bboxes;for(const me of Y)if(!K.box[me]){K.box[me]=!0;const be=4*me;if(o<=re[be+2]&&d<=re[be+3]&&A>=re[be+0]&&T>=re[be+1]&&(!q||q(this.boxKeys[me]))){if(F.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[me],x1:re[be],y1:re[be+1],x2:re[be+2],y2:re[be+3]})}}}const ae=this.circleCells[S];if(ae!==null){const re=this.circles;for(const me of ae)if(!K.circle[me]){K.circle[me]=!0;const be=3*me;if(this._circleAndRectCollide(re[be],re[be+1],re[be+2],o,d,A,T)&&(!q||q(this.circleKeys[me]))){if(F.hitTest)return E.push(!0),!0;{const Te=re[be],ze=re[be+1],Fe=re[be+2];E.push({key:this.circleKeys[me],x1:Te-Fe,y1:ze-Fe,x2:Te+Fe,y2:ze+Fe})}}}}}_queryCellCircle(o,d,A,T,S,E,F,q){const K=F.circle,Y=F.seenUids,ae=this.boxCells[S];if(ae!==null){const me=this.bboxes;for(const be of ae)if(!Y.box[be]){Y.box[be]=!0;const Te=4*be;if(this._circleAndRectCollide(K.x,K.y,K.radius,me[Te+0],me[Te+1],me[Te+2],me[Te+3])&&(!q||q(this.boxKeys[be])))return E.push(!0),!0}}const re=this.circleCells[S];if(re!==null){const me=this.circles;for(const be of re)if(!Y.circle[be]){Y.circle[be]=!0;const Te=3*be;if(this._circlesCollide(me[Te],me[Te+1],me[Te+2],K.x,K.y,K.radius)&&(!q||q(this.circleKeys[be])))return E.push(!0),!0}}}_forEachCell(o,d,A,T,S,E,F,q){const K=this._convertToXCellCoord(o),Y=this._convertToYCellCoord(d),ae=this._convertToXCellCoord(A),re=this._convertToYCellCoord(T);for(let me=K;me<=ae;me++)for(let be=Y;be<=re;be++)if(S.call(this,o,d,A,T,this.xCellCount*be+me,E,F,q))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,d,A,T,S,E){const F=T-o,q=S-d,K=A+E;return K*K>F*F+q*q}_circleAndRectCollide(o,d,A,T,S,E,F){const q=(E-T)/2,K=Math.abs(o-(T+q));if(K>q+A)return!1;const Y=(F-S)/2,ae=Math.abs(d-(S+Y));if(ae>Y+A)return!1;if(K<=q||ae<=Y)return!0;const re=K-q,me=ae-Y;return re*re+me*me<=A*A}}const Ho={unknown:0,flipRequired:1,flipNotRequired:2},Tu=Math.tan(85*Math.PI/180);function Os(y,o,d,A,T,S,E){const F=n.ad.mat4.create();if(d)if(S.name==="globe"){const q=n.bo(T,o);n.ad.mat4.multiply(F,F,q)}else{const q=n.ad.mat2.invert([],E);F[0]=q[0],F[1]=q[1],F[4]=q[2],F[5]=q[3],A||n.ad.mat4.rotateZ(F,F,T.angle)}else n.ad.mat4.multiply(F,T.labelPlaneMatrix,y);return F}function Ki(y,o,d,A,T,S,E){const F=Os(y,o,d,A,T,S,E);return S.name==="globe"&&d||(F[2]=F[6]=F[10]=F[14]=0),F}function Mi(y,o,d,A,T,S,E){if(d){if(S.name==="globe"){const F=Os(y,o,d,A,T,S,E);return n.ad.mat4.invert(F,F),n.ad.mat4.multiply(F,y,F),F}{const F=n.ad.mat4.clone(y),q=n.ad.mat4.identity([]);return q[0]=E[0],q[1]=E[1],q[4]=E[2],q[5]=E[3],n.ad.mat4.multiply(F,F,q),A||n.ad.mat4.rotateZ(F,F,-T.angle),F}}return T.glCoordMatrix}function yo(y,o,d,A){const T=[y,o,d,1];d?n.ad.vec4.transformMat4(T,T,A):Ji(T,T,A);const S=T[3];return T[0]/=S,T[1]/=S,T[2]/=S,T}function Vd(y,o){return Math.min(.5+y/o*.5,1.5)}function vh(y,o){const d=y[0]/y[3],A=y[1]/y[3];return d>=-o[0]&&d<=o[0]&&A>=-o[1]&&A<=o[1]}function yc(y,o,d,A,T,S,E,F,q,K){const Y=d.transform,ae=A?y.textSizeData:y.iconSizeData,re=n.bp(ae,d.transform.zoom),me=Y.projection.name==="globe",be=[256/d.width*2+1,256/d.height*2+1],Te=A?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Te.clear();let ze=null;me&&(ze=A?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const Fe=y.lineVertexArray,Ke=A?y.text.placedSymbolArray:y.icon.placedSymbolArray,nt=d.transform.width/d.transform.height;let at,pt=!1;for(let st=0;st<Ke.length;st++){const ot=Ke.get(st),{numGlyphs:lt,writingMode:vt}=ot;if(vt!==n.bq.vertical||pt||at===n.bq.horizontal||(pt=!0),at=vt,(ot.hidden||vt===n.bq.vertical)&&!pt){il(lt,Te);continue}pt=!1;const Tt=new n.P(ot.tileAnchorX,ot.tileAnchorY);let{x:Qt,y:Ut,z:ia}=Y.projection.projectTilePoint(Tt.x,Tt.y,K.canonical);if(q){const[Ua,Va,dr]=q(Tt);Qt+=Ua,Ut+=Va,ia+=dr}const da=[Qt,Ut,ia,1];if(n.ad.vec4.transformMat4(da,da,o),!vh(da,be)){il(lt,Te);continue}const xa=da[3],kt=Vd(d.transform.getCameraToCenterDistance(Y.projection),xa),la=n.br(ae,re,ot),zt=E?la/kt:la*kt,ua=yo(Qt,Ut,ia,T);if(ua[3]<=0){il(lt,Te);continue}let ta={};const ha=n.ak(y.layers[0].layout.get("text-max-angle")),Xt=Math.cos(ha),ga=E?null:q,ka=ys(ot,zt,!1,F,o,T,S,y.glyphOffsetArray,Fe,Te,ze,ua,Tt,ta,nt,ga,Y.projection,K,E,Xt);pt=ka.useVertical,ga&&ka.needsFlipping&&(ta={}),(ka.notEnoughRoom||pt||ka.needsFlipping&&ys(ot,zt,!0,F,o,T,S,y.glyphOffsetArray,Fe,Te,ze,ua,Tt,ta,nt,ga,Y.projection,K,E,Xt).notEnoughRoom)&&il(lt,Te)}A?(y.text.dynamicLayoutVertexBuffer.updateData(Te),ze&&y.text.globeExtVertexBuffer&&y.text.globeExtVertexBuffer.updateData(ze)):(y.icon.dynamicLayoutVertexBuffer.updateData(Te),ze&&y.icon.globeExtVertexBuffer&&y.icon.globeExtVertexBuffer.updateData(ze))}function Ac(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze){const{lineStartIndex:Fe,glyphStartIndex:Ke,segment:nt}=F,at=Ke+F.numGlyphs,pt=Fe+F.lineLength,st=o.getoffsetX(Ke),ot=o.getoffsetX(at-1),lt=zl(y*st,d,A,T,S,E,nt,Fe,pt,q,K,Y,ae,re,!0,me,be,Te,ze);if(!lt)return null;const vt=zl(y*ot,d,A,T,S,E,nt,Fe,pt,q,K,Y,ae,re,!0,me,be,Te,ze);return vt?{first:lt,last:vt}:null}function nl(y,o,d,A){return y===n.bq.horizontal&&Math.abs(A)>Math.abs(d)?{useVertical:!0}:y===n.bq.vertical?A>0?{needsFlipping:!0}:null:o!==Ho.unknown&&function(T,S){return T===0||Math.abs(S/T)>Tu}(d,A)?o===Ho.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function ys(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze,Fe,Ke,nt){const at=o/24,pt=y.lineOffsetX*at,st=y.lineOffsetY*at,{lineStartIndex:ot,glyphStartIndex:lt,numGlyphs:vt,segment:Tt,writingMode:Qt,flipState:Ut}=y,ia=ot+y.lineLength,da=xa=>{if(Y){const[ua,ta,ha]=xa.up,Xt=K.length;n.bs(Y,Xt+0,ua,ta,ha),n.bs(Y,Xt+1,ua,ta,ha),n.bs(Y,Xt+2,ua,ta,ha),n.bs(Y,Xt+3,ua,ta,ha)}const[kt,la,zt]=xa.point;n.bt(K,kt,la,zt,xa.angle)};if(vt>1){const xa=Ac(at,F,pt,st,d,ae,re,y,q,S,me,Te,!1,ze,Fe,Ke,nt);if(!xa)return{notEnoughRoom:!0};if(A&&!d){let[kt,la,zt]=xa.first.point,[ua,ta,ha]=xa.last.point;[kt,la]=yo(kt,la,zt,E),[ua,ta]=yo(ua,ta,ha,E);const Xt=nl(Qt,Ut,(ua-kt)*be,ta-la);if(y.flipState=Xt&&Xt.needsFlipping?Ho.flipRequired:Ho.flipNotRequired,Xt)return Xt}da(xa.first);for(let kt=lt+1;kt<lt+vt-1;kt++){const la=zl(at*F.getoffsetX(kt),pt,st,d,ae,re,Tt,ot,ia,q,S,me,Te,!1,!1,ze,Fe,Ke,nt);if(!la)return K.length-=4*(kt-lt),{notEnoughRoom:!0};da(la)}da(xa.last)}else{if(A&&!d){const kt=yo(re.x,re.y,0,T),la=ot+Tt+1,zt=new n.P(q.getx(la),q.gety(la)),ua=yo(zt.x,zt.y,0,T),ta=ua[3]>0?ua:Vs(re,zt,kt,1,T,void 0,ze,Fe.canonical),ha=nl(Qt,Ut,(ta[0]-kt[0])*be,ta[1]-kt[1]);if(y.flipState=ha&&ha.needsFlipping?Ho.flipRequired:Ho.flipNotRequired,ha)return ha}const xa=zl(at*F.getoffsetX(lt),pt,st,d,ae,re,Tt,ot,ia,q,S,me,Te,!1,!1,ze,Fe,Ke,nt);if(!xa)return{notEnoughRoom:!0};da(xa)}return{}}function Yu(y,o,d,A,T){const{x:S,y:E,z:F}=A.projectTilePoint(y.x,y.y,o);if(!T)return yo(S,E,F,d);const[q,K,Y]=T(y);return yo(S+q,E+K,F+Y,d)}function Vs(y,o,d,A,T,S,E,F){const q=Yu(y.sub(o)._unit()._add(y),F,T,E,S);return n.ad.vec3.sub(q,d,q),n.ad.vec3.normalize(q,q),n.ad.vec3.scaleAndAdd(q,d,q,A)}function zl(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze,Fe,Ke){const nt=A?y-o:y+o;let at=nt>0?1:-1,pt=0;A&&(at*=-1,pt=Math.PI),at<0&&(pt+=Math.PI);let st=F+E+(at>0?0:1)|0,ot=T,lt=T,vt=0,Tt=0;const Qt=Math.abs(nt),Ut=[],ia=[];let da=S,xa=da,kt=n.ad.vec3.zero([]);const la=()=>Vs(xa,da,lt,Qt-vt+1,Y,re,Te,ze.canonical);for(;vt+Tt<=Qt;){if(st+=at,st<F||st>=q)return null;if(lt=ot,xa=da,Ut.push(lt),me&&ia.push(xa),da=new n.P(K.getx(st),K.gety(st)),ot=ae[st],!ot){const dr=Yu(da,ze.canonical,Y,Te,re);ot=dr[3]>0?ae[st]=dr:la()}vt+=Tt;const Ua=n.ad.vec3.sub([],ot,lt),Va=n.ad.vec3.distance(lt,ot);if(d&&Va>0&&Tt>0&&n.ad.vec3.dot(kt,Ua)/(Tt*Va)<Ke)return null;Tt=Va,kt=Ua}be&&re&&(ae[st]&&(ot=la(),Tt=n.ad.vec3.distance(lt,ot),kt=n.ad.vec3.sub([],ot,lt)),ae[st]=ot);const zt=(Qt-vt)/Tt,ua=da.sub(xa)._mult(zt)._add(xa),ta=n.ad.vec3.scaleAndAdd([],lt,kt,zt);let ha=[0,0,1],Xt=kt[0],ga=kt[1];if(Fe&&(ha=Te.upVector(ze.canonical,ua.x,ua.y),ha[0]!==0||ha[1]!==0||ha[2]!==1)){const Ua=[ha[2],0,-ha[0]],Va=n.ad.vec3.cross([],ha,Ua);n.ad.vec3.normalize(Ua,Ua),n.ad.vec3.normalize(Va,Va),Xt=n.ad.vec3.dot(kt,Ua),ga=n.ad.vec3.dot(kt,Va)}if(d){const Ua=n.ad.vec3.cross([],ha,kt);n.ad.vec3.normalize(Ua,Ua),n.ad.vec3.scaleAndAdd(ta,ta,Ua,d*at)}const ka=pt+Math.atan2(ga,Xt);return Ut.push(ta),me&&ia.push(ua),{point:ta,angle:ka,path:Ut,tilePath:ia,up:ha}}function il(y,o){const d=o.length,A=d+4*y;o.resize(A),o.float32.fill(-1/0,4*d,4*A)}function Ji(y,o,d){const A=o[0],T=o[1];return y[0]=d[0]*A+d[4]*T+d[12],y[1]=d[1]*A+d[5]*T+d[13],y[3]=d[3]*A+d[7]*T+d[15],y}const Ys=100;class tu{constructor(o,d,A=new An(o.width+200,o.height+200,25),T=new An(o.width+200,o.height+200,25)){this.transform=o,this.grid=A,this.ignoredGrid=T,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ys,this.screenBottomBoundary=o.height+Ys,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=d}placeCollisionBox(o,d,A,T,S,E,F,q){let K=A.projectedAnchorX,Y=A.projectedAnchorY,ae=A.projectedAnchorZ;const re=A.elevation,me=A.tileID,be=o.getProjection();if(re&&me){const[st,ot,lt]=be.upVector(me.canonical,A.tileAnchorX,A.tileAnchorY),vt=be.upVectorScale(me.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=st*re*vt,Y+=ot*re*vt,ae+=lt*re*vt}const Te=this.projectAndGetPerspectiveRatio(F,K,Y,ae,A.tileID,be.name==="globe"||!!re||this.transform.pitch>0,be),ze=E*Te.perspectiveRatio,Fe=(A.x1*d+T.x-A.padding)*ze+Te.point.x,Ke=(A.y1*d+T.y-A.padding)*ze+Te.point.y,nt=(A.x2*d+T.x+A.padding)*ze+Te.point.x,at=(A.y2*d+T.y+A.padding)*ze+Te.point.y,pt=Te.perspectiveRatio<=.55||Te.occluded;return!this.isInsideGrid(Fe,Ke,nt,at)||!S&&this.grid.hitTest(Fe,Ke,nt,at,q)||pt?{box:[],offscreen:!1,occluded:Te.occluded}:{box:[Fe,Ke,nt,at],offscreen:this.isOffscreen(Fe,Ke,nt,at),occluded:!1}}placeCollisionCircles(o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te){const ze=[],Fe=this.transform.elevation,Ke=o.getProjection(),nt=Fe?Fe.getAtTileOffsetFunc(Te,this.transform.center.lat,this.transform.worldSize,Ke):null,at=new n.P(A.tileAnchorX,A.tileAnchorY);let{x:pt,y:st,z:ot}=Ke.projectTilePoint(at.x,at.y,Te.canonical);if(nt){const[ha,Xt,ga]=nt(at);pt+=ha,st+=Xt,ot+=ga}const lt=Ke.name==="globe",vt=this.projectAndGetPerspectiveRatio(F,pt,st,ot,Te,lt||!!Fe||this.transform.pitch>0,Ke),{perspectiveRatio:Tt}=vt,Qt=(ae?E/Tt:E*Tt)/n.bw,Ut=yo(pt,st,ot,q),ia=A.lineOffsetX*Qt,da=A.lineOffsetY*Qt,xa=n.ak(o.layers[0].layout.get("text-max-angle")),kt=Math.cos(xa),la=vt.signedDistanceFromCamera>0?Ac(Qt,S,ia,da,!1,Ut,at,A,T,q,{},Fe&&!ae?nt:null,ae&&!!Fe,Ke,Te,ae,kt):null;let zt=!1,ua=!1,ta=!0;if(la&&!vt.occluded){const ha=.5*me*Tt+be,Xt=new n.P(-100,-100),ga=new n.P(this.screenRightBoundary,this.screenBottomBoundary),ka=new Od,{first:Ua,last:Va}=la,dr=Ua.path.length;let qr=[];for(let zr=dr-1;zr>=1;zr--)qr.push(Ua.path[zr]);for(let zr=1;zr<Va.path.length;zr++)qr.push(Va.path[zr]);const Rr=2.5*ha;K&&(qr=qr.map(([zr,Mr,Hr],jr)=>(nt&&!lt&&(Hr=nt(jr<dr-1?Ua.tilePath[dr-1-jr]:Va.tilePath[jr-dr+2])[2]),yo(zr,Mr,Hr,K))),qr.some(zr=>zr[3]<=0)&&(qr=[]));let kr=[];if(qr.length>0){let zr=1/0,Mr=-1/0,Hr=1/0,jr=-1/0;for(const yr of qr)zr=Math.min(zr,yr[0]),Hr=Math.min(Hr,yr[1]),Mr=Math.max(Mr,yr[0]),jr=Math.max(jr,yr[1]);Mr>=Xt.x&&zr<=ga.x&&jr>=Xt.y&&Hr<=ga.y&&(kr=[qr.map(yr=>new n.P(yr[0],yr[1]))],(zr<Xt.x||Mr>ga.x||Hr<Xt.y||jr>ga.y)&&(kr=n.bu(kr,Xt.x,Xt.y,ga.x,ga.y)))}for(const zr of kr){ka.reset(zr,.25*ha);let Mr=0;Mr=ka.length<=.5*ha?1:Math.ceil(ka.paddedLength/Rr)+1;for(let Hr=0;Hr<Mr;Hr++){const jr=Hr/Math.max(Mr-1,1),yr=ka.lerp(jr),pn=yr.x+Ys,Or=yr.y+Ys;ze.push(pn,Or,ha,0);const rr=pn-ha,mn=Or-ha,Xn=pn+ha,vn=Or+ha;if(ta=ta&&this.isOffscreen(rr,mn,Xn,vn),ua=ua||this.isInsideGrid(rr,mn,Xn,vn),!d&&this.grid.hitTestCircle(pn,Or,ha,re)&&(zt=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:zt,occluded:!1}}}}return{circles:!Y&&zt||!ua?[]:ze,offscreen:ta,collisionDetected:zt,occluded:vt.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let A=1/0,T=1/0,S=-1/0,E=-1/0;for(const Y of o){const ae=new n.P(Y.x+Ys,Y.y+Ys);A=Math.min(A,ae.x),T=Math.min(T,ae.y),S=Math.max(S,ae.x),E=Math.max(E,ae.y),d.push(ae)}const F=this.grid.query(A,T,S,E).concat(this.ignoredGrid.query(A,T,S,E)),q={},K={};for(const Y of F){const ae=Y.key;if(q[ae.bucketInstanceId]===void 0&&(q[ae.bucketInstanceId]={}),q[ae.bucketInstanceId][ae.featureIndex])continue;const re=[new n.P(Y.x1,Y.y1),new n.P(Y.x2,Y.y1),new n.P(Y.x2,Y.y2),new n.P(Y.x1,Y.y2)];n.bv(d,re)&&(q[ae.bucketInstanceId][ae.featureIndex]=!0,K[ae.bucketInstanceId]===void 0&&(K[ae.bucketInstanceId]=[]),K[ae.bucketInstanceId].push(ae.featureIndex))}return K}insertCollisionBox(o,d,A,T,S){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:T,collisionGroupID:S},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,d,A,T,S){const E=d?this.ignoredGrid:this.grid,F={bucketInstanceId:A,featureIndex:T,collisionGroupID:S};for(let q=0;q<o.length;q+=4)E.insertCircle(F,o[q],o[q+1],o[q+2])}projectAndGetPerspectiveRatio(o,d,A,T,S,E,F){const q=[d,A,T,1];let K=!1;T||this.transform.pitch>0?(n.ad.vec4.transformMat4(q,q,o),this.fogState&&S&&F.name!=="globe"&&(K=function(re,me,be,Te,ze,Fe){const Ke=Fe.calculateFogTileMatrix(ze),nt=[me,be,Te];return n.ad.vec3.transformMat4(nt,nt,Ke),qa(re,n.ad.vec3.length(nt),Fe.pitch,Fe._fov)}(this.fogState,d,A,T,S.toUnwrapped(),this.transform)>.9)):Ji(q,q,o);const Y=q[3];return{point:new n.P((q[0]/Y+1)/2*this.transform.width+Ys,(-q[1]/Y+1)/2*this.transform.height+Ys),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(F)/Y*.5,1.5),signedDistanceFromCamera:Y,occluded:E&&q[2]>Y||K}}isOffscreen(o,d,A,T){return A<Ys||o>=this.screenRightBoundary||T<Ys||d>this.screenBottomBoundary}isInsideGrid(o,d,A,T){return A>=0&&o<this.gridRightBoundary&&T>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const o=n.ad.mat4.identity([]);return n.ad.mat4.translate(o,o,[-100,-100,0]),o}}function ds(y,o,d){const A=o.createTileMatrix(y,y.worldSize,d.toUnwrapped());return n.ad.mat4.multiply(new Float32Array(16),y.projMatrix,A)}function Zh(y,o,d){if(o.projection.name===d.projection.name)return y.projMatrix;const A=d.clone();return A.setProjection(o.projection),ds(A,o.getProjection(),y)}function $o(y,o,d){return o.name===d.projection.name?y.projMatrix:ds(d,o,y)}class zd{constructor(o,d,A,T){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?d:-d))):T&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class Cu{constructor(o,d,A,T,S,E=!1){this.text=new zd(o?o.text:null,d,A,S),this.icon=new zd(o?o.icon:null,d,T,S),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Su{constructor(o,d,A,T=!1){this.text=o,this.icon=d,this.skipFade=A,this.clipped=T}}class lp{constructor(){this.invProjMatrix=n.ad.mat4.create(),this.viewportMatrix=n.ad.mat4.create(),this.circles=[]}}class au{constructor(o,d,A,T,S){this.bucketInstanceId=o,this.featureIndex=d,this.sourceLayerIndex=A,this.bucketIndex=T,this.tileID=S}}class tg{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const d=++this.maxGroupID;this.collisionGroups[o]={ID:d,predicate:A=>A.collisionGroupID===d}}return this.collisionGroups[o]}}function Dd(y,o,d,A,T){const{horizontalAlign:S,verticalAlign:E}=n.bD(y),F=-(S-.5)*o,q=-(E-.5)*d,K=n.bC(y,A);return new n.P(F+K[0]*T,q+K[1]*T)}function Xs(y,o,d,A,T){const S=new n.P(y,o);return d&&S._rotate(A?T:-T),S}class bf{constructor(o,d,A,T,S,E){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new tu(this.transform,S),this.buildingIndex=E,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new tg(A),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,d,A,T,S=1){const E=A.getBucket(d),F=A.latestFeatureIndex;if(!E||!F||d.fqid!==E.layerIds[0])return;const q=E.layers[0].layout,K=E.layers[0].paint,Y=A.collisionBoxArray,ae=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),re=A.tileSize/n.ai,me=A.tileID.toUnwrapped();this.transform.setProjection(E.projection);const be=(Te=A.tileID,ze=E.getProjection(),Fe=this.transform,ze.name===this.projection?Fe.calculateProjMatrix(Te.toUnwrapped()):ds(Fe,ze,Te));var Te,ze,Fe;const Ke=q.get("text-pitch-alignment")==="map",nt=q.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const at=d.dynamicFilter(),pt=d.dynamicFilterNeedsFeature(),st=this.transform.calculatePixelsToTileUnitsMatrix(A),ot=Ki(be,A.tileID.canonical,Ke,nt,this.transform,E.getProjection(),st);let lt=null;if(Ke){const la=Mi(be,A.tileID.canonical,Ke,nt,this.transform,E.getProjection(),st);lt=n.ad.mat4.multiply([],this.transform.labelPlaneMatrix,la)}let vt=null;at&&A.latestFeatureIndex&&(vt={unwrappedTileID:me,dynamicFilter:at,dynamicFilterNeedsFeature:pt}),this.retainedQueryData[E.bucketInstanceId]=new au(E.bucketInstanceId,F,E.sourceLayerIndex,E.index,A.tileID);const[Tt,Qt]=E.layers[0].layout.get("text-size-scale-range"),Ut=n.ay(S,Tt,Qt),[ia,da]=q.get("icon-size-scale-range"),xa=n.ay(S,ia,da),kt={bucket:E,layout:q,paint:K,posMatrix:be,textLabelPlaneMatrix:ot,labelToScreenMatrix:lt,clippingData:vt,scale:ae,textPixelRatio:re,holdingForFade:A.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:n.bp(E.textSizeData,this.transform.zoom,Ut),partiallyEvaluatedIconSize:n.bp(E.iconSizeData,this.transform.zoom,xa),collisionGroup:this.collisionGroups.get(E.sourceID),latestFeatureIndex:A.latestFeatureIndex};if(T)for(const la of E.sortKeyRanges){const{sortKey:zt,symbolInstanceStart:ua,symbolInstanceEnd:ta}=la;o.push({sortKey:zt,symbolInstanceStart:ua,symbolInstanceEnd:ta,parameters:kt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:kt})}attemptAnchorPlacement(o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze,Fe,Ke){const{textOffset0:nt,textOffset1:at,crossTileID:pt}=re,st=[nt,at],ot=Dd(o,A,T,st,S),lt=this.collisionIndex.placeCollisionBox(be,S,d,Xs(ot.x,ot.y,E,F,this.transform.angle),ae,q,K,Y.predicate);if(ze){const vt=be.getSymbolInstanceIconSize(Ke,this.transform.zoom,re.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(be,vt,ze,Xs(ot.x,ot.y,E,F,this.transform.angle),ae,q,K,Y.predicate).box.length===0)return}if(lt.box.length>0){let vt;return this.prevPlacement&&this.prevPlacement.variableOffsets[pt]&&this.prevPlacement.placements[pt]&&this.prevPlacement.placements[pt].text&&(vt=this.prevPlacement.variableOffsets[pt].anchor),this.variableOffsets[pt]={textOffset:st,width:A,height:T,anchor:o,textScale:S,prevAnchor:vt},this.markUsedJustification(be,o,re,Te),be.allowVerticalPlacement&&(this.markUsedOrientation(be,Te,re),this.placedOrientations[pt]=Te),{shift:ot,placedGlyphBoxes:lt}}}placeLayerBucketPart(o,d,A,T,S=1){const{bucket:E,layout:F,paint:q,posMatrix:K,textLabelPlaneMatrix:Y,labelToScreenMatrix:ae,clippingData:re,textPixelRatio:me,holdingForFade:be,collisionBoxArray:Te,partiallyEvaluatedTextSize:ze,partiallyEvaluatedIconSize:Fe,collisionGroup:Ke,latestFeatureIndex:nt}=o.parameters,at=F.get("text-optional"),pt=F.get("icon-optional"),st=F.get("text-allow-overlap"),ot=F.get("icon-allow-overlap"),lt=F.get("text-rotation-alignment")==="map",vt=F.get("text-pitch-alignment")==="map",Tt=q.get("symbol-z-offset"),Qt=F.get("symbol-elevation-reference")==="sea",[Ut,ia]=F.get("text-size-scale-range"),[da,xa]=F.get("icon-size-scale-range"),kt=n.ay(S,Ut,ia),la=n.ay(S,da,xa);this.transform.setProjection(E.projection);let zt=st&&(ot||!E.hasIconData()||pt),ua=ot&&(st||!E.hasTextData()||at);const ta=!Tt.isConstant();!E.collisionArrays&&Te&&E.deserializeCollisionBoxes(Te),A&&T&&E.updateCollisionDebugBuffers(this.transform.zoom,Te,kt,la);const ha=(Xt,ga,ka)=>{const{crossTileID:Ua,numVerticalGlyphVertices:Va}=Xt;let dr=null;if(re&&re.dynamicFilterNeedsFeature||ta){const Vn=this.retainedQueryData[E.bucketInstanceId];dr=nt.loadFeature({featureIndex:Xt.featureIndex,bucketIndex:Vn.bucketIndex,sourceLayerIndex:Vn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(re&&!(0,re.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},dr,this.retainedQueryData[E.bucketInstanceId].tileID.canonical,new n.P(Xt.tileAnchorX,Xt.tileAnchorY),this.transform.calculateDistanceTileData(re.unwrappedTileID)))return this.placements[Ua]=new Su(!1,!1,!1,!0),void d.add(Ua);const qr=Tt.evaluate(dr,{});if(d.has(Ua))return;if(be)return void(this.placements[Ua]=new Su(!1,!1,!1));let Rr=!1,kr=!1,zr=!0,Mr=!1,Hr=!1,jr=null,yr={box:null,offscreen:null,occluded:null},pn={box:null},Or=null,rr=null,mn=null,Xn=0,vn=0,kn=0;ka.textFeatureIndex?Xn=ka.textFeatureIndex:Xt.useRuntimeCollisionCircles&&(Xn=Xt.featureIndex),ka.verticalTextFeatureIndex&&(vn=ka.verticalTextFeatureIndex);const ns=Vn=>{Vn.tileID=this.retainedQueryData[E.bucketInstanceId].tileID;const di=this.transform.elevation;Vn.elevation=Qt?qr:qr+(di?di.getAtTileOffset(Vn.tileID,Vn.tileAnchorX,Vn.tileAnchorY):0),Vn.elevation+=Xt.zOffset},_s=ka.textBox;if(_s){ns(_s);const Vn=Bn=>{let fi=n.bq.horizontal;if(E.allowVerticalPlacement&&!Bn&&this.prevPlacement){const To=this.prevPlacement.placedOrientations[Ua];To&&(this.placedOrientations[Ua]=To,fi=To,this.markUsedOrientation(E,fi,Xt))}return fi},di=(Bn,fi)=>{if(E.allowVerticalPlacement&&Va>0&&ka.verticalTextBox){for(const To of E.writingModes)if(To===n.bq.vertical?(yr=fi(),pn=yr):yr=Bn(),yr&&yr.box&&yr.box.length)break}else yr=Bn()};if(F.get("text-variable-anchor")){let Bn=F.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ua]){const Ni=this.prevPlacement.variableOffsets[Ua];Bn.indexOf(Ni.anchor)>0&&(Bn=Bn.filter(ps=>ps!==Ni.anchor),Bn.unshift(Ni.anchor))}const fi=(Ni,ps,zc)=>{const Jo=E.getSymbolInstanceTextSize(ze,Xt,this.transform.zoom,ga),hu=(Ni.x2-Ni.x1)*Jo+2*Ni.padding,Gl=(Ni.y2-Ni.y1)*Jo+2*Ni.padding,sc=Xt.hasIconTextFit&&!ot?ps:null;sc&&ns(sc);let bl={box:[],offscreen:!1,occluded:!1};const Qd=st?2*Bn.length:Bn.length;for(let Co=0;Co<Qd;++Co){const Mh=this.attemptAnchorPlacement(Bn[Co%Bn.length],Ni,hu,Gl,Jo,lt,vt,me,K,Ke,Co>=Bn.length,Xt,ga,E,zc,sc,ze,Fe);if(Mh&&(bl=Mh.placedGlyphBoxes,bl&&bl.box&&bl.box.length)){Rr=!0,jr=Mh.shift;break}}return bl};di(()=>fi(_s,ka.iconBox,n.bq.horizontal),()=>{const Ni=ka.verticalTextBox;return Ni&&ns(Ni),E.allowVerticalPlacement&&!(yr&&yr.box&&yr.box.length)&&Va>0&&Ni?fi(Ni,ka.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),yr&&(Rr=yr.box,zr=yr.offscreen,Mr=yr.occluded);const To=Vn(!(!yr||!yr.box));if(!Rr&&this.prevPlacement){const Ni=this.prevPlacement.variableOffsets[Ua];Ni&&(this.variableOffsets[Ua]=Ni,this.markUsedJustification(E,Ni.anchor,Xt,To))}}else{const Bn=(fi,To)=>{const Ni=E.getSymbolInstanceTextSize(ze,Xt,this.transform.zoom,ga,S),ps=this.collisionIndex.placeCollisionBox(E,Ni,fi,new n.P(0,0),st,me,K,Ke.predicate);return ps&&ps.box&&ps.box.length&&(this.markUsedOrientation(E,To,Xt),this.placedOrientations[Ua]=To),ps};di(()=>Bn(_s,n.bq.horizontal),()=>{const fi=ka.verticalTextBox;return E.allowVerticalPlacement&&Va>0&&fi?(ns(fi),Bn(fi,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Vn(!!(yr&&yr.box&&yr.box.length))}}if(Or=yr,Rr=Or&&Or.box&&Or.box.length>0,zr=Or&&Or.offscreen,Mr=Or&&Or.occluded,Xt.useRuntimeCollisionCircles){const Vn=E.text.placedSymbolArray.get(Xt.centerJustifiedTextSymbolIndex>=0?Xt.centerJustifiedTextSymbolIndex:Xt.verticalPlacedTextSymbolIndex),di=n.br(E.textSizeData,ze,Vn),Bn=F.get("text-padding");rr=this.collisionIndex.placeCollisionCircles(E,st,Vn,E.lineVertexArray,E.glyphOffsetArray,di,K,Y,ae,A,vt,Ke.predicate,Xt.collisionCircleDiameter*di/n.bw,Bn,this.retainedQueryData[E.bucketInstanceId].tileID),Rr=st||rr.circles.length>0&&!rr.collisionDetected,zr=zr&&rr.offscreen,Mr=rr.occluded}if(ka.iconFeatureIndex&&(kn=ka.iconFeatureIndex),ka.iconBox){const Vn=di=>{ns(di);const Bn=Xt.hasIconTextFit&&jr?Xs(jr.x,jr.y,lt,vt,this.transform.angle):new n.P(0,0),fi=E.getSymbolInstanceIconSize(Fe,this.transform.zoom,Xt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(E,fi,di,Bn,ot,me,K,Ke.predicate)};pn&&pn.box&&pn.box.length&&ka.verticalIconBox?(mn=Vn(ka.verticalIconBox),kr=mn.box.length>0):(mn=Vn(ka.iconBox),kr=mn.box.length>0),zr=zr&&mn.offscreen,Hr=mn.occluded}const co=at||Xt.numHorizontalGlyphVertices===0&&Va===0,ao=pt||Xt.numIconVertices===0;if(co||ao?ao?co||(kr=kr&&Rr):Rr=kr&&Rr:kr=Rr=kr&&Rr,Rr&&Or&&Or.box&&this.collisionIndex.insertCollisionBox(Or.box,F.get("text-ignore-placement"),E.bucketInstanceId,pn&&pn.box&&vn?vn:Xn,Ke.ID),kr&&mn&&this.collisionIndex.insertCollisionBox(mn.box,F.get("icon-ignore-placement"),E.bucketInstanceId,kn,Ke.ID),rr&&(Rr&&this.collisionIndex.insertCollisionCircles(rr.circles,F.get("text-ignore-placement"),E.bucketInstanceId,Xn,Ke.ID),A)){const Vn=E.bucketInstanceId;let di=this.collisionCircleArrays[Vn];di===void 0&&(di=this.collisionCircleArrays[Vn]=new lp);for(let Bn=0;Bn<rr.circles.length;Bn+=4)di.circles.push(rr.circles[Bn+0]),di.circles.push(rr.circles[Bn+1]),di.circles.push(rr.circles[Bn+2]),di.circles.push(rr.collisionDetected?1:0)}const Ro=E.projection.name!=="globe";zt=zt&&(Ro||!Mr),ua=ua&&(Ro||!Hr),this.placements[Ua]=new Su(Rr||zt,kr||ua,zr||E.justReloaded),d.add(Ua)};if(E.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(E,this.retainedQueryData[E.bucketInstanceId].tileID),E.elevationType==="road"&&E.updateRoadElevation(),E.updateZOffset(),E.sortFeaturesByY){const Xt=E.getSortedSymbolIndexes(this.transform.angle);for(let ga=Xt.length-1;ga>=0;--ga){const ka=Xt[ga];ha(E.symbolInstances.get(ka),ka,E.collisionArrays[ka])}E.hasAnyZOffset&&n.w(`${E.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(E.hasAnyZOffset){const Xt=E.getSortedIndexesByZOffset();for(let ga=0;ga<Xt.length;++ga){const ka=Xt[ga];ha(E.symbolInstances.get(ka),ka,E.collisionArrays[ka])}}else for(let Xt=o.symbolInstanceStart;Xt<o.symbolInstanceEnd;Xt++)ha(E.symbolInstances.get(Xt),Xt,E.collisionArrays[Xt]);if(A&&E.bucketInstanceId in this.collisionCircleArrays){const Xt=this.collisionCircleArrays[E.bucketInstanceId];n.ad.mat4.invert(Xt.invProjMatrix,K),Xt.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1}markUsedJustification(o,d,A,T){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:F,verticalPlacedTextSymbolIndex:q,crossTileID:K}=A,Y=n.bB(d),ae=T===n.bq.vertical?q:Y==="left"?S:Y==="center"?E:Y==="right"?F:-1;S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=ae>=0&&S!==ae?0:K),E>=0&&(o.text.placedSymbolArray.get(E).crossTileID=ae>=0&&E!==ae?0:K),F>=0&&(o.text.placedSymbolArray.get(F).crossTileID=ae>=0&&F!==ae?0:K),q>=0&&(o.text.placedSymbolArray.get(q).crossTileID=ae>=0&&q!==ae?0:K)}markUsedOrientation(o,d,A){const T=d===n.bq.horizontal||d===n.bq.horizontalOnly?d:0,S=d===n.bq.vertical?d:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:F,rightJustifiedTextSymbolIndex:q,verticalPlacedTextSymbolIndex:K}=A,Y=o.text.placedSymbolArray;E>=0&&(Y.get(E).placedOrientation=T),F>=0&&(Y.get(F).placedOrientation=T),q>=0&&(Y.get(q).placedOrientation=T),K>=0&&(Y.get(K).placedOrientation=S)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let A=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const T=d?d.symbolFadeChange(o):1,S=d?d.opacities:{},E=d?d.variableOffsets:{},F=d?d.placedOrientations:{};for(const q in this.placements){const K=this.placements[q],Y=S[q];Y?(this.opacities[q]=new Cu(Y,T,K.text,K.icon,null,K.clipped),A=A||K.text!==Y.text.placed||K.icon!==Y.icon.placed):(this.opacities[q]=new Cu(null,T,K.text,K.icon,K.skipFade,K.clipped),A=A||K.text||K.icon)}for(const q in S){const K=S[q];if(!this.opacities[q]){const Y=new Cu(K,T,!1,!1);Y.isHidden()||(this.opacities[q]=Y,A=A||K.text.placed||K.icon.placed)}}for(const q in E)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=E[q]);for(const q in F)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=F[q]);A?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:o)}updateLayerOpacities(o,d,A,T){const S=new Set;for(const E of d){const F=E.getBucket(o);F&&E.latestFeatureIndex&&o.fqid===F.layerIds[0]&&(this.updateBucketOpacities(F,S,E,E.collisionBoxArray,A,T,E.tileID,o.scope),F.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(F,E.tileID),F.elevationType==="road"&&F.updateRoadElevation(),F.updateZOffset())}}updateBucketOpacities(o,d,A,T,S,E,F,q){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const K=o.layers[0].layout,Y=o.layers[0].paint,ae=!!o.layers[0].dynamicFilter(),re=new Cu(null,0,!1,!1,!0),me=K.get("text-allow-overlap"),be=K.get("icon-allow-overlap"),Te=K.get("text-variable-anchor"),ze=K.get("text-rotation-alignment")==="map",Fe=K.get("text-pitch-alignment")==="map",Ke=Y.get("symbol-z-offset"),nt=K.get("symbol-elevation-reference")==="sea",at=!Ke.isConstant(),pt=new Cu(null,0,me&&(be||!o.hasIconData()||K.get("icon-optional")),be&&(me||!o.hasTextData()||K.get("text-optional")),!0);!o.collisionArrays&&T&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(T);const st=(lt,vt,Tt)=>{for(let Qt=0;Qt<vt/4;Qt++)lt.opacityVertexArray.emplaceBack(Tt)};let ot=0;E&&o.updateReplacement(F,E);for(let lt=0;lt<o.symbolInstances.length;lt++){const vt=o.symbolInstances.get(lt),{numHorizontalGlyphVertices:Tt,numVerticalGlyphVertices:Qt,crossTileID:Ut,numIconVertices:ia,tileAnchorX:da,tileAnchorY:xa}=vt;let kt=null;const la=this.retainedQueryData[o.bucketInstanceId];at&&vt&&la&&(kt=A.latestFeatureIndex.loadFeature({featureIndex:vt.featureIndex,bucketIndex:la.bucketIndex,sourceLayerIndex:la.sourceLayerIndex,layoutVertexArrayOffset:0}));const zt=Ke.evaluate(kt,{}),ua=d.has(Ut);let ta=this.opacities[Ut];ua?ta=re:ta||(ta=pt,this.opacities[Ut]=ta),d.add(Ut);const ha=Tt>0||Qt>0,Xt=ia>0,ga=this.placedOrientations[Ut],ka=ga===n.bq.vertical,Ua=ga===n.bq.horizontal||ga===n.bq.horizontalOnly;!ha&&!Xt||ta.isHidden()||ot++;let Va=!1;if((ha||Xt)&&E)for(const dr of o.activeReplacements){if(n.bx(dr,S,n.by.Symbol,q)||dr.min.x>da||da>dr.max.x||dr.min.y>xa||xa>dr.max.y)continue;const qr=n.bz(da,xa,F.canonical,dr.footprintTileId.canonical);if(Va=n.bA(qr,dr.footprint),Va)break}if(ha){const dr=Va?Er:ir(ta.text);st(o.text,Tt,ka?Er:dr),st(o.text,Qt,Ua?Er:dr);const qr=ta.text.isHidden(),{leftJustifiedTextSymbolIndex:Rr,centerJustifiedTextSymbolIndex:kr,rightJustifiedTextSymbolIndex:zr,verticalPlacedTextSymbolIndex:Mr}=vt,Hr=o.text.placedSymbolArray,jr=qr||ka?1:0;Rr>=0&&(Hr.get(Rr).hidden=jr),kr>=0&&(Hr.get(kr).hidden=jr),zr>=0&&(Hr.get(zr).hidden=jr),Mr>=0&&(Hr.get(Mr).hidden=qr||Ua?1:0);const yr=this.variableOffsets[Ut];yr&&this.markUsedJustification(o,yr.anchor,vt,ga);const pn=this.placedOrientations[Ut];pn&&(this.markUsedJustification(o,"left",vt,pn),this.markUsedOrientation(o,pn,vt))}if(Xt){const dr=Va?Er:ir(ta.icon),{placedIconSymbolIndex:qr,verticalPlacedIconSymbolIndex:Rr}=vt,kr=o.icon.placedSymbolArray,zr=ta.icon.isHidden()?1:0;qr>=0&&(st(o.icon,ia,ka?Er:dr),kr.get(qr).hidden=zr),Rr>=0&&(st(o.icon,vt.numVerticalIconVertices,Ua?Er:dr),kr.get(Rr).hidden=zr)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const dr=o.collisionArrays[lt];if(dr){let qr=new n.P(0,0),Rr=!0;if(dr.textBox||dr.verticalTextBox){if(Te){const zr=this.variableOffsets[Ut];zr?(qr=Dd(zr.anchor,zr.width,zr.height,zr.textOffset,zr.textScale),ze&&qr._rotate(Fe?this.transform.angle:-this.transform.angle)):Rr=!1}ae&&(Rr=!ta.clipped),dr.textBox&&ru(o.textCollisionBox.collisionVertexArray,ta.text.placed,!Rr||ka,zt,nt,qr.x,qr.y),dr.verticalTextBox&&ru(o.textCollisionBox.collisionVertexArray,ta.text.placed,!Rr||Ua,zt,nt,qr.x,qr.y)}const kr=Rr&&!!(!Ua&&dr.verticalIconBox);dr.iconBox&&ru(o.iconCollisionBox.collisionVertexArray,ta.icon.placed,kr,zt,nt,vt.hasIconTextFit?qr.x:0,vt.hasIconTextFit?qr.y:0),dr.verticalIconBox&&ru(o.iconCollisionBox.collisionVertexArray,ta.icon.placed,!kr,zt,nt,vt.hasIconTextFit?qr.x:0,vt.hasIconTextFit?qr.y:0)}}}if(o.fullyClipped=ot===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const lt=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=lt.invProjMatrix,o.placementViewportMatrix=lt.viewportMatrix,o.collisionCircleArray=lt.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,d){const A=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*A>o}setStale(){this.stale=!0}}function ru(y,o,d,A,T,S,E){y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0)}const xf=Math.pow(2,25),de=Math.pow(2,24),Qe=Math.pow(2,17),It=Math.pow(2,16),Jt=Math.pow(2,9),pa=Math.pow(2,8),La=Math.pow(2,1);function ir(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const o=y.placed?1:0,d=Math.floor(127*y.opacity);return d*xf+o*de+d*Qe+o*It+d*Jt+o*pa+d*La+o}const Er=0;class en{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,d,A,T,S,E){const F=this._bucketParts;for(;this._currentTileIndex<o.length;)if(d.getBucketParts(F,T,o[this._currentTileIndex],this._sortAcrossTiles,E),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((q,K)=>q.sortKey-K.sortKey));this._currentPartIndex<F.length;){const q=F[this._currentPartIndex];if(d.placeLayerBucketPart(q,this._seenCrossTileIDs,A,q.symbolInstanceStart===0,E),this._currentPartIndex++,S())return!0}return!1}}class On{constructor(o,d,A,T,S,E,F,q,K){this.placement=new bf(o,S,E,F,q,K),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,d,A,T,S){const E=n.q.now(),F=()=>{const q=n.q.now()-E;return!this._forceFullPlacement&&q>2};for(;this._currentPlacementIndex>=0;){const q=d[o[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=K)&&(!q.maxzoom||q.maxzoom>K)){const Y=q,ae=Y.layout.get("symbol-z-elevate"),re=Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,me=Y.layout.get("symbol-z-order"),be=me==="viewport-y"||me==="auto"&&!(me!=="viewport-y"&&re),Te=Y.layout.get("text-allow-overlap")||Y.layout.get("icon-allow-overlap")||Y.layout.get("text-ignore-placement")||Y.layout.get("icon-ignore-placement"),ze=be&&Te,Fe=this._inProgressLayer=this._inProgressLayer||new en(Y),Ke=n.C(q.source,q.scope);if(Fe.continuePlacement(ae||ze?T[Ke]:A[Ke],this.placement,this._showCollisionBoxes,q,F,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Fn=512/n.ai/2;class wi{constructor(o,d,A){this.tileID=o,this.bucketInstanceId=A,this.index=new n.bE(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const T=o.canonical.x*n.ai,S=o.canonical.y*n.ai;for(let E=0;E<d.length;E++){const{key:F,crossTileID:q,tileAnchorX:K,tileAnchorY:Y}=d.get(E),ae=Math.floor((T+K)*Fn),re=Math.floor((S+Y)*Fn);this.index.add(ae,re),this.keys.push(F),this.crossTileIDs.push(q)}this.index.finish()}findMatches(o,d,A){const T=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),S=Fn/Math.pow(2,d.canonical.z-this.tileID.canonical.z),E=d.canonical.x*n.ai,F=d.canonical.y*n.ai;for(let q=0;q<o.length;q++){const K=o.get(q);if(K.crossTileID)continue;const{key:Y,tileAnchorX:ae,tileAnchorY:re}=K,me=Math.floor((E+ae)*S),be=Math.floor((F+re)*S),Te=this.index.range(me-T,be-T,me+T,be+T);for(const ze of Te){const Fe=this.crossTileIDs[ze];if(this.keys[ze]===Y&&!A.has(Fe)){A.add(Fe),K.crossTileID=Fe;break}}}}}class zs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ds{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const d=Math.round((o-this.lng)/360);if(d!==0)for(const A in this.indexes){const T=this.indexes[A],S={};for(const E in T){const F=T[E];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+d),S[F.tileID.key]=F}this.indexes[A]=S}this.lng=o}addBucket(o,d,A){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let S=0;S<d.symbolInstances.length;S++)d.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const T=this.usedCrossTileIDs[o.overscaledZ];for(const S in this.indexes){const E=this.indexes[S];if(Number(S)>o.overscaledZ)for(const F in E){const q=E[F];q.tileID.isChildOf(o)&&q.findMatches(d.symbolInstances,o,T)}else{const F=E[o.scaledTo(Number(S)).key];F&&F.findMatches(d.symbolInstances,o,T)}}for(let S=0;S<d.symbolInstances.length;S++){const E=d.symbolInstances.get(S);E.crossTileID||(E.crossTileID=A.generate(),T.add(E.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new wi(o,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(o,d){for(const A of d.crossTileIDs)this.usedCrossTileIDs[o].delete(A)}removeStaleBuckets(o){let d=!1;for(const A in this.indexes){const T=this.indexes[A];for(const S in T)o[T[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,T[S]),delete T[S],d=!0)}return d}}class io{constructor(){this.layerIndexes={},this.crossTileIDs=new zs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,d,A,T){let S=this.layerIndexes[o.fqid];S===void 0&&(S=this.layerIndexes[o.fqid]=new Ds);let E=!1;const F={};T.name!=="globe"&&S.handleWrapJump(A);for(const q of d){const K=q.getBucket(o);K&&o.fqid===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(q.tileID,K,this.crossTileIDs)&&(E=!0),F[K.bucketInstanceId]=!0)}return S.removeStaleBuckets(F)&&(E=!0),E}pruneUnusedLayers(o){const d={};o.forEach(A=>{d[A]=!0});for(const A in this.layerIndexes)d[A]||delete this.layerIndexes[A]}}const os=771;class Dr{constructor(o,d,A,T){this.blendFunction=o,this.blendColor=d,this.mask=A,this.blendEquation=T}}Dr.Replace=[1,0,1,0],Dr.disabled=new Dr(Dr.Replace,n.al.transparent,[!1,!1,!1,!1]),Dr.unblended=new Dr(Dr.Replace,n.al.transparent,[!0,!0,!0,!0]),Dr.alphaBlended=new Dr([1,os,1,os],n.al.transparent,[!0,!0,!0,!0]),Dr.alphaBlendedNonPremultiplied=new Dr([770,os,770,os],n.al.transparent,[!0,!0,!0,!0]),Dr.multiply=new Dr([774,0,774,0],n.al.transparent,[!0,!0,!0,!0]);class cr{constructor(o,d,A){this.func=o,this.mask=d,this.range=A}}cr.ReadOnly=!1,cr.ReadWrite=!0,cr.disabled=new cr(519,cr.ReadOnly,[0,1]);const vl=7680;class Nr{constructor(o,d,A,T,S,E){this.test=o,this.ref=d,this.mask=A,this.fail=T,this.depthFail=S,this.pass=E}}Nr.disabled=new Nr({func:519,mask:0},0,0,vl,vl,vl);const bu=1029,nu=2305;class xr{constructor(o,d,A){this.enable=o,this.mode=d,this.frontFace=A}}function _h(y,o){const d=n.bG(y,3);n.ad.mat4.fromQuat(y,o),n.bI(y,3,d)}function iu(y,o){const d=n.ad.quat.identity([]);return n.ad.quat.rotateZ(d,d,-o),n.ad.quat.rotateX(d,d,-y),d}function vc(y,o){const d=[y[0],y[1],0],A=[o[0],o[1],0];if(n.ad.vec3.length(d)>=1e-15){const E=n.ad.vec3.normalize([],d);n.ad.vec3.scale(A,E,n.ad.vec3.dot(A,E)),o[0]=A[0],o[1]=A[1]}const T=n.ad.vec3.cross([],o,y);if(n.ad.vec3.len(T)<1e-15)return null;const S=Math.atan2(-T[1],T[0]);return iu(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),S)}xr.disabled=new xr(!1,bu,nu),xr.backCCW=new xr(!0,bu,nu),xr.backCW=new xr(!0,bu,2304),xr.frontCW=new xr(!0,1028,2304),xr.frontCCW=new xr(!0,1028,nu);class Md{constructor(o,d){this.position=o,this.orientation=d}get position(){return this._position}set position(o){if(o){const d=o instanceof n.ac?o:new n.ac(o[0],o[1],o[2]);this._renderWorldCopies&&(d.x=n.bF(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(o,d){if(this.orientation=null,!this.position)return;const A=this.position,T=this._elevation?this._elevation.getAtPointOrZero(n.ac.fromLngLat(o)):0,S=n.ac.fromLngLat(o,T),E=[S.x-A.x,S.y-A.y,S.z-A.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=vc(E,d)}setPitchBearing(o,d){this.orientation=iu(n.ak(o),n.ak(-d))}}class Ms{constructor(o,d){this._transform=n.ad.mat4.identity([]),this.orientation=d,this.position=o}get mercatorPosition(){const o=this.position;return new n.ac(o[0],o[1],o[2])}get position(){const o=n.bG(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var d;o&&n.bI(this._transform,3,[(d=o)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||n.ad.quat.identity([]),o&&_h(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,d){this._orientation=iu(o,d),_h(this._transform,this._orientation)}forward(){const o=n.bG(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=n.bG(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=n.bG(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,d){const A=new Float64Array(16);return n.ad.mat4.invert(A,this.getWorldToCamera(o,d)),A}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,d,A){const T=this.position;n.ad.vec3.scale(T,T,-o);const S=new Float64Array(16);return n.ad.mat4.fromScaling(S,[A,A,A]),n.ad.mat4.translate(S,S,T),S[10]*=d,S}getWorldToCamera(o,d){const A=new Float64Array(16),T=new Float64Array(4),S=this.position;return n.ad.quat.conjugate(T,this._orientation),n.ad.vec3.scale(S,S,-o),n.ad.mat4.fromQuat(A,T),n.ad.mat4.translate(A,A,S),A[1]*=-1,A[5]*=-1,A[9]*=-1,A[13]*=-1,A[8]*=d,A[9]*=d,A[10]*=d,A[11]*=d,A}getCameraToClipPerspective(o,d,A,T){const S=new Float64Array(16);return n.ad.mat4.perspective(S,o,d,A,T),S}getCameraToClipOrthographic(o,d,A,T,S,E){const F=new Float64Array(16);return n.ad.mat4.ortho(F,o,d,A,T,S,E),F}getDistanceToElevation(o,d=!1){const A=o===0?0:n.bH(o,d?n.aT(this.position[1]):this.position[1]),T=this.forward();return(A-this.position[2])/T[2]}clone(){return new Ms([...this.position],[...this.orientation])}}const Si={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class _c{constructor(o=0,d=0,A=0,T=0){if(isNaN(o)||o<0||isNaN(d)||d<0||isNaN(A)||A<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=d,this.left=A,this.right=T}interpolate(o,d,A){return d.top!=null&&o.top!=null&&(this.top=n.ah(o.top,d.top,A)),d.bottom!=null&&o.bottom!=null&&(this.bottom=n.ah(o.bottom,d.bottom,A)),d.left!=null&&o.left!=null&&(this.left=n.ah(o.left,d.left,A)),d.right!=null&&o.right!=null&&(this.right=n.ah(o.right,d.right,A)),this}getCenter(o,d){const A=n.ay((this.left+o-this.right)/2,0,o),T=n.ay((this.top+d-this.bottom)/2,0,d);return new n.P(A,T)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new _c(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Da=15;class Id{constructor(o,d,A,T,S,E,F){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=o||0,this._maxZoom=d||22,this._minPitch=A??0,this._maxPitch=T??60,this.setProjection(E),this.setMaxBounds(F),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new _c,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Ms,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const o=new Id(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o._allowWorldUnderZoom=this._allowWorldUnderZoom,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Da}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,d=!1){const A=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||A)&&this._updateCameraOnTerrain(),(o||A)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return n.aA(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const A=this.getProjection(),T=!n.bn(d,A);return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const d=o!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const d=-o*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=n.ad.mat2.create(),n.ad.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const d=n.ay(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=n.ak(o),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const d=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const A=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&A.exaggeration()&&this._centerAltitudeValidForExaggeration!==A.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*A.exaggeration(),this._centerAltitudeValidForExaggeration=A.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=A.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],A=this.horizonLineFromTop();let T=0,S=0;for(let E=0;E<d.length;E++){const F=new n.P(d[E][0]*this.width,A+d[E][1]*(this.height-A)),q=o.pointCoordinate(F);if(!q)continue;const K=1/Math.hypot(q[0]-this._camera.position[0],q[1]-this._camera.position[1]);T+=q[3]*K,S+=K}return S===0?NaN:T/S}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),A=this.pixelsPerMeter/this.worldSize*d,T=this._mercatorZfromZoom(o),S=this._mercatorZfromZoom(this._maxZoom),E=Math.max(T-A,S);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let A;A=o.z<this._camera.position[2]?[d.x,d.y,d.z]:[o.x,o.y,o.z];const T=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,A));return n.ay(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let d=!1;if(o.orientation&&!n.ad.quat.exactEquals(o.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(o.orientation)),o.position){const A=[o.position.x,o.position.y,o.position.z];n.ad.vec3.exactEquals(A,this._camera.position)||(this._setCameraPosition(A),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,d=new Md;return d.position=new n.ac(o[0],o[1],o[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(o){if(!n.ad.quat.length(o))return!1;n.ad.quat.normalize(o,o);const d=n.ad.vec3.transformQuat([],[0,0,-1],o),A=n.ad.vec3.transformQuat([],[0,-1,0],o);if(A[2]<0)return!1;const T=vc(d,A);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(o){const d=this.zoomScale(this.minZoom)*this.tileSize,A=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;o[2]=n.ay(o[2],T/A,T/d),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,d,A){this._unmodified=!1,this._edgeInsets.interpolate(o,d,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const d=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(o){const d=[new n.bQ(0,o)];if(this.renderWorldCopies){const A=this.pointCoordinate(new n.P(0,0)),T=this.pointCoordinate(new n.P(this.width,0)),S=this.pointCoordinate(new n.P(this.width,this.height)),E=this.pointCoordinate(new n.P(0,this.height)),F=Math.floor(Math.min(A.x,T.x,S.x,E.x)),q=Math.floor(Math.max(A.x,T.x,S.x,E.x)),K=1;for(let Y=F-K;Y<=q+K;Y++)Y!==0&&d.push(new n.bQ(Y,o))}return d}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,d,A){let T=[];const S=A!==void 0,E=!S;if(E&&this.zoom<d||S&&A[0]===0&&A[1]===0)return T;const F=new Set,q=(Y,ae,re,me,be)=>{const Te=n.c5(ae,Y,re,me,be);F.has(Te)||(T.push(new n.aH(Y,ae,re,me,be)),F.add(Te))};for(let Y=0;Y<o.length;Y++){const ae=o[Y];if(E&&ae.canonical.z!==d)continue;const re=ae.canonical,me=ae.overscaledZ,be=ae.wrap,Te=1<<re.z,ze=re.x+1<Te,Fe=re.x>0,Ke=re.y+1<Te,nt=re.y>0,at=ae.wrap-(Fe?0:1),pt=ae.wrap+(ze?0:1),st=Fe?re.x-1:Te-1,ot=ze?re.x+1:0;if(S)A[0]<0?(q(me,pt,re.z,ot,re.y),A[1]<0&&Ke&&(q(me,be,re.z,re.x,re.y+1),q(me,pt,re.z,ot,re.y+1)),A[1]>0&&nt&&(q(me,be,re.z,re.x,re.y-1),q(me,pt,re.z,ot,re.y-1))):A[0]>0?(q(me,at,re.z,st,re.y),A[1]<0&&Ke&&(q(me,be,re.z,re.x,re.y+1),q(me,at,re.z,st,re.y+1)),A[1]>0&&nt&&(q(me,be,re.z,re.x,re.y-1),q(me,at,re.z,st,re.y-1))):A[1]<0&&Ke?q(me,be,re.z,re.x,re.y+1):nt&&q(me,be,re.z,re.x,re.y-1);else{const lt=ae.visibleQuadrants;1&lt&&(q(me,at,re.z,st,re.y),nt&&(q(me,be,re.z,re.x,re.y-1),q(me,at,re.z,st,re.y-1))),2&lt&&(q(me,pt,re.z,ot,re.y),nt&&(q(me,be,re.z,re.x,re.y-1),q(me,pt,re.z,ot,re.y-1))),4&lt&&(q(me,at,re.z,st,re.y),Ke&&(q(me,be,re.z,re.x,re.y+1),q(me,at,re.z,st,re.y+1))),8&lt&&(q(me,pt,re.z,ot,re.y),Ke&&(q(me,be,re.z,re.x,re.y+1),q(me,pt,re.z,ot,re.y+1)))}}const K=[];for(const Y of T)T.some(ae=>Y.isChildOf(ae))||K.push(Y);if(T=K.filter(Y=>!o.some(ae=>!!(Y.overscaledZ<d&&ae.isChildOf(Y))||Y.equals(ae)||Y.isChildOf(ae))),E){const Y=1<<d,ae=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),re=[Y*ae.x,Y*ae.y],me=4,be=me*me;T=T.filter(Te=>{const ze=Te.canonical.x+.5-re[0],Fe=Te.canonical.y+.5-re[1];return ze*ze+Fe*Fe<be})}return T}coveringTiles(o){let d=this.coveringZoomLevel(o);const A=d,T=this.elevation&&this.elevation.exaggeration(),S=T&&!o.isTerrainDEM,E=this.projection.name==="mercator";if(o.minzoom!==void 0&&d<o.minzoom)return[];o.maxzoom!==void 0&&d>o.maxzoom&&(d=o.maxzoom);const F=this.locationCoordinate(this.center),q=this.center.lat,K=1<<d,Y=[K*F.x,K*F.y,0],ae=this.projection.name==="globe",re=!ae,me=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,re),be=ae?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Te=K*n.bH(1,this.center.lat),ze=this._camera.position[2]/n.bH(1,this.center.lat),Fe=[K*be.x,K*be.y,ze*(re?1:Te)],Ke=ae||T,nt=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),at=this.isLODDisabled(!0)?d:0;let pt;if(this._elevation&&o.isTerrainDEM)pt=1e4*this._elevation.exaggeration();else if(this._elevation){const zt=this._elevation.getMinMaxForVisibleTiles();pt=zt?zt.max:this._centerAltitude}else pt=this._centerAltitude;const st=o.isTerrainDEM?-pt:this._elevation?this._elevation.getMinElevationBelowMSL():0,ot=this.projection.isReprojectedInTileSpace?n.bS(this):1,lt=zt=>{const ta=new n.ac(zt.x+25e-6,zt.y,zt.z),ha=new n.ac(zt.x,zt.y+25e-6,zt.z),Xt=zt.toLngLat(),ga=ta.toLngLat(),ka=ha.toLngLat(),Ua=this.locationCoordinate(Xt),Va=this.locationCoordinate(ga),dr=this.locationCoordinate(ka),qr=Math.hypot(Va.x-Ua.x,Va.y-Ua.y),Rr=Math.hypot(dr.x-Ua.x,dr.y-Ua.y);return Math.sqrt(qr*Rr)*ot/25e-6},vt=zt=>{const ua=pt,ta=st;return{aabb:n.bV(this,K,0,0,0,zt,ta,ua,this.projection),zoom:0,x:0,y:0,minZ:ta,maxZ:ua,wrap:zt,fullyVisible:!1}},Tt=[];let Qt=[];const Ut=d,ia=o.reparseOverscaled?A:d,da=(ze-this._centerAltitude)*Te,xa=zt=>{if(!this._elevation||!zt.tileID||!E)return;const ua=this._elevation.getMinMaxForTile(zt.tileID),ta=zt.aabb;ua?(ta.min[2]=ua.min,ta.max[2]=ua.max,ta.center[2]=(ta.min[2]+ta.max[2])/2):(zt.shouldSplit=la(zt),zt.shouldSplit||(ta.min[2]=ta.max[2]=ta.center[2]=this._centerAltitude))},kt=(zt,ua)=>{if(.707*ua<zt)return 1;const ta=ua/zt;return ta/(1.4144271570014144+(Math.pow(1.1,ta-1.4144271570014144+1)-1)/(1.1-1)-1)},la=zt=>{if(zt.zoom<at)return!0;if(zt.zoom===Ut)return!1;if(zt.shouldSplit!=null)return zt.shouldSplit;const ua=zt.aabb.distanceX(Fe),ta=zt.aabb.distanceY(Fe);let ha=da,Xt=1;if(ae){ha=zt.aabb.distanceZ(Fe);const Rr=Math.pow(2,zt.zoom),kr=n.aT((zt.y+1)/Rr),zr=n.aT(zt.y/Rr),Mr=Math.min(Math.max(q,kr),zr),Hr=n.ca(Mr)/n.ca(q);if(Xt=Mr===q?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Hr/this._mercatorScaleRatio),this.zoom<=n.c6&&zt.zoom===Ut-1&&Hr>=.9)return!0}else if(S&&(ha=zt.aabb.distanceZ(Fe)*Te),this.projection.isReprojectedInTileSpace&&A<=5){const Rr=Math.pow(2,zt.zoom),kr=lt(new n.ac((zt.x+.5)/Rr,(zt.y+.5)/Rr));Xt=kr>.85?1:kr}if(!E){const Rr=Math.sqrt(ua*ua+ta*ta+ha*ha);let kr=(1<<Ut-zt.zoom)*nt*Xt;return kr*=kt(Math.max(ha,da),Rr),Rr<kr}let ga=Number.MAX_VALUE,ka=0;const Ua=zt.aabb.getCorners(),Va=[];for(const Rr of Ua){n.ad.vec3.sub(Va,Rr,Fe),ae||(S?Va[2]*=Te:Va[2]=da);const kr=n.ad.vec3.dot(Va,this._camera.forward());kr<ga&&(ga=kr,ka=Math.abs(Va[2]))}let dr=(1<<Ut-zt.zoom)*nt*Xt;if(dr*=kt(Math.max(ka,da),ga),ga<dr)return!0;const qr=zt.aabb.closestPoint(Y);return qr[0]===Y[0]&&qr[1]===Y[1]};if(this.renderWorldCopies)for(let zt=1;zt<=3;zt++)Tt.push(vt(-zt)),Tt.push(vt(zt));for(Tt.push(vt(0));Tt.length>0;){const zt=Tt.pop(),ua=zt.x,ta=zt.y;let ha=zt.fullyVisible;const Xt=()=>this.projection.name==="globe"&&(zt.y===0||zt.y===(1<<zt.zoom)-1);if(!ha){let ga=Ke?zt.aabb.intersects(me):zt.aabb.intersectsFlat(me);if(ga===0&&Xt()){const ka=new n.bT(zt.zoom,ua,ta);ga=n.bU(this,K,ka,!0).intersects(me)}if(ga===0)continue;ha=ga===2}if(zt.zoom!==Ut&&la(zt))for(let ga=0;ga<4;ga++){const ka=(ua<<1)+ga%2,Ua=(ta<<1)+(ga>>1),Va={aabb:E?zt.aabb.quadrant(ga):n.bV(this,K,zt.zoom+1,ka,Ua,zt.wrap,zt.minZ,zt.maxZ,this.projection),zoom:zt.zoom+1,x:ka,y:Ua,wrap:zt.wrap,fullyVisible:ha,tileID:void 0,shouldSplit:void 0,minZ:zt.minZ,maxZ:zt.maxZ};S&&!ae&&(Va.tileID=new n.aH(zt.zoom+1===Ut?ia:zt.zoom+1,zt.wrap,zt.zoom+1,ka,Ua),xa(Va)),Tt.push(Va)}else{const ga=zt.zoom===Ut?ia:zt.zoom;if(o.minzoom&&o.minzoom>ga)continue;let ka=0;if(!ha){let qr=Ke?zt.aabb.intersectsPrecise(me):zt.aabb.intersectsPreciseFlat(me);if(qr===0&&Xt()){const Rr=new n.bT(zt.zoom,ua,ta);qr=n.bU(this,K,Rr,!0).intersectsPrecise(me)}if(qr===0)continue;if(o.calculateQuadrantVisibility)if(me.containsPoint(zt.aabb.center))ka=15;else for(let Rr=0;Rr<4;Rr++)zt.aabb.quadrant(Rr).intersects(me)!==0&&(ka|=1<<Rr)}const Ua=Y[0]-(.5+ua+(zt.wrap<<zt.zoom))*(1<<d-zt.zoom),Va=Y[1]-.5-ta,dr=zt.tileID?zt.tileID:new n.aH(ga,zt.wrap,zt.zoom,ua,ta);o.calculateQuadrantVisibility&&(dr.visibleQuadrants=ka),Qt.push({tileID:dr,distanceSq:Ua*Ua+Va*Va})}}if(this.fogCullDistSq){const zt=this.fogCullDistSq,ua=this.horizonLineFromTop();Qt=Qt.filter(ta=>{const ha=[0,0,0,1],Xt=[n.ai,n.ai,0,1],ga=this.calculateFogTileMatrix(ta.tileID.toUnwrapped());n.ad.vec4.transformMat4(ha,ha,ga),n.ad.vec4.transformMat4(Xt,Xt,ga);const ka=n.ad.vec4.min([],ha,Xt),Ua=n.ad.vec4.max([],ha,Xt),Va=n.bW(ka,Ua);if(Va===0)return!0;let dr=!1;const qr=this._elevation;if(qr&&Va>zt&&ua!==0){const Rr=this.calculateProjMatrix(ta.tileID.toUnwrapped());let kr;o.isTerrainDEM||(kr=qr.getMinMaxForTile(ta.tileID)),kr||(kr={min:st,max:pt});const zr=n.c7(this.rotation),Mr=[zr[0]*n.ai,zr[1]*n.ai,kr.max];n.ad.vec3.transformMat4(Mr,Mr,Rr),dr=(1-Mr[1])*this.height*.5<ua}return Va<zt||dr})}return Qt.sort((zt,ua)=>zt.distanceSq-ua.distanceSq).map(zt=>zt.tileID)}resize(o,d){this.width=o,this.height=d,this.pixelsToGLUnits=[2/o,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const d=n.ay(o.lat,-n.bX,n.bX),A=this.projection.project(o.lng,d);return new n.P(A.x*this.worldSize,A.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,d){let A,T;const S=this.centerPoint;if(this.projection.name==="globe"){const F=this.worldSize;A=(d.x-S.x)/F,T=(d.y-S.y)/F}else{const F=this.pointCoordinate(d),q=this.pointCoordinate(S);A=F.x-q.x,T=F.y-q.y}const E=this.locationCoordinate(o);this.setLocation(new n.ac(E.x-A,E.y-T))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o,d){return this.projection.locationPoint(this,o,d)}locationPoint3D(o,d){return this.projection.locationPoint(this,o,d,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o,d){return this.coordinateLocation(this.pointCoordinate3D(o,d))}locationCoordinate(o,d){const A=d?n.bH(d,o.lat):void 0,T=this.projection.project(o.lng,o.lat);return new n.ac(T.x,T.y,A)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,d){const A=d??this._centerAltitude,T=[o.x,o.y,0,1],S=[o.x,o.y,1,1];n.ad.vec4.transformMat4(T,T,this.pixelMatrixInverse),n.ad.vec4.transformMat4(S,S,this.pixelMatrixInverse);const E=S[3];n.ad.vec4.scale(T,T,1/T[3]),n.ad.vec4.scale(S,S,1/E);const F=T[2],q=S[2];return{p0:T,p1:S,t:F===q?0:(A-F)/(q-F)}}screenPointToMercatorRay(o){const d=[o.x,o.y,0,1],A=[o.x,o.y,1,1];return n.ad.vec4.transformMat4(d,d,this.pixelMatrixInverse),n.ad.vec4.transformMat4(A,A,this.pixelMatrixInverse),n.ad.vec4.scale(d,d,1/d[3]),n.ad.vec4.scale(A,A,1/A[3]),d[2]=n.bH(d[2],this._center.lat)*this.worldSize,A[2]=n.bH(A[2],this._center.lat)*this.worldSize,n.ad.vec4.scale(d,d,1/this.worldSize),n.ad.vec4.scale(A,A,1/this.worldSize),new n.as([d[0],d[1],d[2]],n.ad.vec3.normalize([],n.ad.vec3.sub([],A,d)))}rayIntersectionCoordinate(o){const{p0:d,p1:A,t:T}=o,S=n.bH(d[2],this._center.lat),E=n.bH(A[2],this._center.lat);return new n.ac(n.ah(d[0],A[0],T)/this.worldSize,n.ah(d[1],A[1],T)/this.worldSize,n.ah(S,E,T))}pointCoordinate(o,d=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,d)}pointCoordinate3D(o,d){if(!this.elevation)return this.pointCoordinate(o,d);let A=this.projection.pointCoordinate3D(this,o.x,o.y);if(A)return new n.ac(A[0],A[1],A[2]);let T=0,S=this.horizonLineFromTop();if(o.y>S)return this.pointCoordinate(o,d);const E=.02*S,F=o.clone();for(let q=0;q<10&&S-T>E;q++){F.y=n.ah(T,S,.66);const K=this.projection.pointCoordinate3D(this,F.x,F.y);K?(S=F.y,A=K):T=F.y}return A?new n.ac(A[0],A[1],A[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(o);const d=this.pointCoordinate(o);return d.y>=0&&d.y<=1}_coordinatePoint(o,d){const A=d&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,T=[o.x*this.worldSize,o.y*this.worldSize,A+o.toAltitude(),1];return n.ad.vec4.transformMat4(T,T,this.pixelMatrix),T[3]>0?new n.P(T[0]/T[3],T[1]/T[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:d}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,S=this.pointLocation3D(new n.P(d,o)),E=this.pointLocation3D(new n.P(T,o)),F=this.pointLocation3D(new n.P(T,A)),q=this.pointLocation3D(new n.P(d,A));let K=Math.min(S.lng,E.lng,F.lng,q.lng),Y=Math.max(S.lng,E.lng,F.lng,q.lng),ae=Math.min(S.lat,E.lat,F.lat,q.lat),re=Math.max(S.lat,E.lat,F.lat,q.lat);const me=Math.pow(2,-this.zoom)/16*270,be=this.projection.name==="globe"?1:4,Te=(ze,Fe,Ke,nt,at)=>{const pt=(ze+Ke)/2,st=(Fe+nt)/2,ot=new n.P(pt,st),{lng:lt,lat:vt}=this.pointLocation3D(ot),Tt=Math.max(0,K-lt,ae-vt,lt-Y,vt-re);K=Math.min(K,lt),Y=Math.max(Y,lt),ae=Math.min(ae,vt),re=Math.max(re,vt),(at<be||Tt>me)&&(Te(ze,Fe,pt,st,at+1),Te(pt,st,Ke,nt,at+1))};if(Te(d,o,T,o,1),Te(T,o,T,A,1),Te(T,A,d,A,1),Te(d,A,d,o,1),this.projection.name==="globe"){const[ze,Fe]=n.bZ(this);ze?(re=90,Y=180,K=-180):Fe&&(ae=-90,Y=180,K=-180)}return new n.aB(new n.bO(K,ae),new n.bO(Y,re))}_getBoundsRectangular(o,d){const{top:A,left:T}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,F=new n.P(T,A),q=new n.P(E,A),K=new n.P(E,S),Y=new n.P(T,S);let ae=this.pointCoordinate(F,o),re=this.pointCoordinate(q,o);const me=this.pointCoordinate(K,d),be=this.pointCoordinate(Y,d),Te=(ze,Fe)=>(Fe.y-ze.y)/(Fe.x-ze.x);return ae.y>1&&re.y>=0?ae=new n.ac((1-be.y)/Te(be,ae)+be.x,1):ae.y<0&&re.y<=1&&(ae=new n.ac(-be.y/Te(be,ae)+be.x,0)),re.y>1&&ae.y>=0?re=new n.ac((1-me.y)/Te(me,re)+me.x,1):re.y<0&&ae.y<=1&&(re=new n.ac(-me.y/Te(me,re)+me.x,0)),new n.aB().extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(re)).extend(this.coordinateLocation(be)).extend(this.coordinateLocation(me))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=o.visibleDemTiles.reduce((A,T)=>{if(T.dem){const S=T.dem.tree;A.min=Math.min(A.min,S.minimums[0]),A.max=Math.max(A.max,S.maximums[0])}return A},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*o.exaggeration(),d.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,A=this.height/2-d*(1-this._horizonShift);return o?Math.max(0,A):A}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.av(this.minLng)*this.tileSize,this.worldMaxX=n.av(this.maxLng)*this.tileSize,this.worldMinY=n.aC(this.maxLat)*this.tileSize,this.worldMaxY=n.aC(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,d){return this.projection.createTileMatrix(this,d,o)}calculateDistanceTileData(o){const d=o.key,A=this._distanceTileDataCache;if(A[d])return A[d];const T=o.canonical,S=1/this.height,E=this.cameraWorldSize,F=E/this.zoomScale(T.z),q=(T.x+Math.pow(2,T.z)*o.wrap)*F,K=T.y*F,Y=this.point;Y.x*=E/this.worldSize,Y.y*=E/this.worldSize;const ae=this.angle,re=Math.sin(-ae),me=-Math.cos(-ae);return A[d]={bearing:[re,me],center:[(Y.x-q)*S,(Y.y-K)*S],scale:F/n.ai*S},A[d]}calculateFogTileMatrix(o){const d=o.key,A=this._fogTileMatrixCache;if(A[d])return A[d];const T=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return n.ad.mat4.multiply(T,this.worldToFogMatrix,T),A[d]=new Float32Array(T),A[d]}calculateProjMatrix(o,d=!1,A=!1){const T=o.key;let S;if(S=A?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,S[T])return S[T];const E=this.calculatePosMatrix(o,this.worldSize);let F;return F=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:A?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,n.ad.mat4.multiply(E,F,E),S[T]=new Float32Array(E),S[T]}calculatePixelsToTileUnitsMatrix(o){const d=o.tileID.key,A=this._pixelsToTileUnitsCache;if(A[d])return A[d];const T=n.b_(o,this);return A[d]=T,A[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,d=n.ad.mat4.fromScaling([],[o,o,o]);return n.ad.mat4.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const d=n.bH(1,this._center.lat)*this.worldSize,A=this._computeCameraPosition(d),T=this._camera.forward(),S=n.bH(1,this._center.lat);A[2]/=S,T[2]/=S,n.ad.vec3.normalize(T,T);const E=o.raycast(A,T,o.exaggeration());if(E){const F=n.ad.vec3.scaleAndAdd([],A,T,E),q=new n.ac(F[0],F[1],n.bH(F[2],n.aT(F[1]))),K=(q.z+n.ad.vec3.length([q.x-A[0],q.y-A[1],q.z-A[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=q.toAltitude(),this._center=this.coordinateLocation(q),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const d=this._elevation,A=n.bH(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(A),S=d.getAtPointOrZero(new n.ac(...T)),E=this.pixelsPerMeter/this.worldSize*S,F=this._minimumHeightOverTerrain(),q=T[2]-E;if(q<=F)if(q<0||o){const K=this.locationCoordinate(this._center,this._centerAltitude),Y=[T[0],T[1],K.z-T[2]],ae=n.ad.vec3.length(Y);Y[2]-=(F-q)/this._pixelsPerMercatorPixel;const re=n.ad.vec3.length(Y);if(re===0)return;n.ad.vec3.scale(Y,Y,ae/re*this._pixelsPerMercatorPixel),this._camera.position=[T[0],T[1],K.z*this._pixelsPerMercatorPixel-Y[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const re=this.center;return re.lat=n.ay(re.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(re.lng=n.ay(re.lng,this.minLng,this.maxLng)),this.center=re,void(this._constraining=!1)}const d=this._unmodified,{x:A,y:T}=this.point;let S=0,E=A,F=T;const q=this.width/2,K=this.height/2,Y=this.worldMinY*this.scale,ae=this.worldMaxY*this.scale;if(T-K<Y&&(F=Y+K),T+K>ae&&(F=ae-K),ae-Y<this.height&&(S=Math.max(S,this.height/(ae-Y)),F=(ae+Y)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const re=this.worldMinX*this.scale,me=this.worldMaxX*this.scale,be=this.worldSize/2-(re+me)/2;E=(A+be+this.worldSize)%this.worldSize-be,E-q<re&&(E=re+q),E+q>me&&(E=me-q),me-re<this.width&&(S=Math.max(S,this.width/(me-re)),E=(me+re)/2)}E===A&&F===T||this._allowWorldUnderZoom||(this.center=this.unproject(new n.P(E,F))),S&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,d=this.projection.name==="globe",A=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const T=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?A:1,E=this._camera.getWorldToCamera(this.worldSize,S);let F;const q=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(q[8]=2*-o.x/this.width,q[9]=2*o.y/this.height,this.isOrthographic){let vt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Tt=vt*this.aspect,Qt=-Tt,Ut=-vt;Tt-=o.x,Qt-=o.x,vt+=o.y,Ut+=o.y,F=this._camera.getCameraToClipOrthographic(Qt,Tt,Ut,vt,this._nearZ,this._farZ),((ia,da,xa,kt)=>{for(let la=0;la<16;la++)ia[la]=n.ah(da[la],xa[la],kt)})(F,F,q,n.c9(this.pitch>=Da?1:this.pitch/Da))}else F=q;const K=n.ad.mat4.mul([],q,E);let Y=n.ad.mat4.mul([],F,E);if(this.projection.isReprojectedInTileSpace){const vt=this.locationCoordinate(this.center),Tt=n.ad.mat4.identity([]);n.ad.mat4.translate(Tt,Tt,[vt.x*this.worldSize,vt.y*this.worldSize,0]),n.ad.mat4.multiply(Tt,Tt,n.c0(this)),n.ad.mat4.translate(Tt,Tt,[-vt.x*this.worldSize,-vt.y*this.worldSize,0]),n.ad.mat4.multiply(Y,Y,Tt),n.ad.mat4.multiply(K,K,Tt),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ad.mat4.scale([],Y,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=Y,this.invProjMatrix=n.ad.mat4.invert(new Float64Array(16),this.projMatrix),d){const vt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);vt[8]=2*-o.x/this.width,vt[9]=2*o.y/this.height,this.expandedFarZProjMatrix=n.ad.mat4.mul([],vt,E)}else this.expandedFarZProjMatrix=this.projMatrix;const ae=n.ad.mat4.invert([],F);this.frustumCorners=n.c2.fromInvProjectionMatrix(ae,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const re=new Float32Array(16);n.ad.mat4.identity(re),n.ad.mat4.scale(re,re,[1,-1,1]),n.ad.mat4.rotateX(re,re,this._pitch),n.ad.mat4.rotateZ(re,re,this.angle);const me=n.ad.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ad.mat4.clone(me);const be=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;me[8]=2*-o.x/this.width,me[9]=2*(o.y+be)/this.height,this.skyboxMatrix=n.ad.mat4.multiply(re,me,re);const Te=this.point,ze=Te.x,Fe=Te.y,Ke=this.width%2/2,nt=this.height%2/2,at=Math.cos(this.angle),pt=Math.sin(this.angle),st=ze-Math.round(ze)+at*Ke+pt*nt,ot=Fe-Math.round(Fe)+at*nt+pt*Ke,lt=new Float64Array(Y);if(n.ad.mat4.translate(lt,lt,[st>.5?st-1:st,ot>.5?ot-1:ot,0]),this.alignedProjMatrix=lt,Y=n.ad.mat4.create(),n.ad.mat4.scale(Y,Y,[this.width/2,-this.height/2,1]),n.ad.mat4.translate(Y,Y,[1,-1,0]),this.labelPlaneMatrix=Y,Y=n.ad.mat4.create(),n.ad.mat4.scale(Y,Y,[1,-1,1]),n.ad.mat4.translate(Y,Y,[-1,-1,0]),n.ad.mat4.scale(Y,Y,[2/this.width,2/this.height,1]),this.glCoordMatrix=Y,this.pixelMatrix=n.ad.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,K),this._calcFogMatrices(),this._distanceTileDataCache={},Y=n.ad.mat4.invert(new Float64Array(16),this.pixelMatrix),!Y)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Y,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const vt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ad.vec3.transformMat4(vt,vt,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Y;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,A=this._camera.position,T=1/this.height/this._pixelsPerMercatorPixel,S=[o,o,d];n.ad.vec3.scale(S,S,T),n.ad.vec3.scale(A,A,-1),n.ad.vec3.multiply(A,A,S);const E=n.ad.mat4.create();n.ad.mat4.translate(E,E,A),n.ad.mat4.scale(E,E,S),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,d,T)}_computeCameraPosition(o){const d=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,A=this._camera.forward(),T=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-o/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-A[0]*S,T.y/this.worldSize-A[1]*S,o/this.worldSize*this._centerAltitude-A[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),A=this._camera.position[2],T=o[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),T>0&&(S=Math.min((d-A)/T,1)),this._camera.position=n.ad.vec3.scaleAndAdd([],this._camera.position,o,S),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,d=this._camera.forward(),{pitch:A,bearing:T}=this._camera.getPitchBearing(),S=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ak(this._maxPitch)),F=Math.max((o[2]-S)/Math.cos(A),E),q=this._zoomFromMercatorZ(F);n.ad.vec3.scaleAndAdd(o,o,d,F),this._pitch=n.ay(A,n.ak(this.minPitch),n.ak(this.maxPitch)),this.angle=n.bF(T,-Math.PI,Math.PI),this._setZoom(n.ay(q,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.ac(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let d=0,A=n.bY,T=0,S=1/0;for(;A-d>1e-6&&A>d;){const E=d+.5*(A-d),F=this.tileSize*Math.pow(2,E),q=this.getCameraToCenterDistance(this.projection,E,F),K=this.scaleZoom(q/(o*this.tileSize)),Y=Math.abs(E-K);Y<S&&(S=Y,T=E),E<K?d=E:A=E}return T}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,d){const A=Math.min(o.x,d.x),T=Math.max(o.x,d.x),S=Math.min(o.y,d.y),E=Math.max(o.y,d.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const F=[new n.P(A,S),new n.P(T,E),new n.P(A,E),new n.P(T,S)],q=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const Y of F){const ae=this.pointRayIntersection(Y);if(ae.t<0)return!0;const re=this.rayIntersectionCoordinate(ae);if(re.x<q||re.y<0||re.x>K||re.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(o,d){const A=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,o)),T=this._zoomFromMercatorZ(A)+d;return A-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([d,A,T],S){const E=[d,A,T,1];n.ad.vec4.transformMat4(E,E,S);const F=E[3]=Math.max(E[3],1e-6);return E[0]/=F,E[1]/=F,E[2]/=F,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,o))}}getCameraToCenterDistance(o,d=this.zoom,A=this.worldSize){const T=n.b$(o,d,this.width,this.height,1024),S=o.pixelSpaceConversion(this.center.lat,A,T);let E=.5/Math.tan(.5*this._fov)*this.height*S;return this.isOrthographic&&(E=n.ah(1,E,n.c9(this.pitch>=Da?1:this.pitch/Da))),E}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ad.mat4.multiply(o,o,this.globeMatrix),o}getFrustum(o){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const Js=(y,o)=>{if(o>0&&y.terrain&&n.w("Cutoff is currently disabled on terrain"),o<=0||y.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=y.transform,A=Math.max(Math.abs(d._zoom-(y.minCutoffZoom-1)),1),T=d.isLODDisabled(!1)?n.ae(60,45,d.pitch):n.ae(30,15,d.pitch),S=d._farZ-d._nearZ,E=o*d.height,F=((1-(q=T))*d.cameraToCenterDistance+q*(d._farZ+E))*A;var q;return{shouldRenderCutoff:T<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(F-d._nearZ)/S,(F-E-d._nearZ)/S]}}},Ao={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Pf{constructor(o,d){this.aabb=o,this.lastCascade=d}}class qh{add(o,d){const A=this.receivers[o.key];A!==void 0?(A.aabb.min[0]=Math.min(A.aabb.min[0],d.min[0]),A.aabb.min[1]=Math.min(A.aabb.min[1],d.min[1]),A.aabb.min[2]=Math.min(A.aabb.min[2],d.min[2]),A.aabb.max[0]=Math.max(A.aabb.max[0],d.max[0]),A.aabb.max[1]=Math.max(A.aabb.max[1],d.max[1]),A.aabb.max[2]=Math.max(A.aabb.max[2],d.max[2])):this.receivers[o.key]=new Pf(d,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,d,A){const T=n.ce.fromPoints(o.points);let S=0;for(const E in this.receivers){const F=this.receivers[E];if(!F||!T.intersectsAabb(F.aabb))continue;F.aabb.min=T.closestPoint(F.aabb.min),F.aabb.max=T.closestPoint(F.aabb.max);const q=F.aabb.getCorners();for(let K=0;K<A.length;K++){let Y=!0;for(const ae of q){const re=[ae[0]*d,ae[1]*d,ae[2]];if(n.ad.vec3.transformMat4(re,re,A[K].matrix),re[0]<-1||re[0]>1||re[1]<-1||re[1]>1){Y=!1;break}}if(F.lastCascade=K,S=Math.max(S,K),Y)break}}return S+1}}class vo{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new qh,this._depthMode=new cr(o.context.gl.LEQUAL,cr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(Ao,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(Ao,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(Ao,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,d){const A=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const T=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||T<=0||(this._shadowLayerCount=A.style.order.reduce((be,Te)=>{const ze=A.style._mergedLayers[Te];return be+(ze.hasShadowPass()&&!ze.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const S=A.context,E=Ao.shadowMapResolution,F=Ao.shadowMapResolution;if(this._cascades.length===0||Ao.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let be=0;be<Ao.cascadeCount;++be){const Te=A._shadowMapDebug,ze=S.gl,Fe=S.createFramebuffer(E,F,Te,"texture"),Ke=new n.T(S,{width:E,height:F,data:null},ze.DEPTH_COMPONENT16);if(Fe.depthAttachment.set(Ke.texture),Te){const nt=new n.T(S,{width:E,height:F,data:null},ze.RGBA8);Fe.colorAttachment.set(nt.texture)}this._cascades.push({framebuffer:Fe,texture:Ke,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=Dl(d);let q=0;if(o.elevation){const be=o.elevation,Te=[1e4,-1e4];be.visibleDemTiles.filter(ze=>ze.dem).forEach(ze=>{const Fe=ze.dem.tree;Te[0]=Math.min(Te[0],Fe.minimums[0]),Te[1]=Math.max(Te[1],Fe.maximums[0])}),Te[0]!==1e4&&(q=(Te[1]-Te[0])*be.exaggeration())}const K=1.5*o.cameraToCenterDistance,Y=3*K,ae=new Float64Array(16);for(let be=0;be<this._cascades.length;++be){const Te=this._cascades[be];let ze=o.height/50,Fe=1;Ao.cascadeCount===1?Fe=Y:be===0?Fe=K:(ze=K,Fe=Y);const[Ke,nt]=su(o,this.shadowDirection,ze,Fe,Ao.shadowMapResolution,q);Te.scale=o.scale,Te.matrix=Ke,Te.boundingSphereRadius=nt,n.ad.mat4.invert(ae,Te.matrix),Te.frustum=n.bR.fromInvProjectionMatrix(ae,1,0,!0),Te.far=Fe}const re=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[re].far,this._cascades[re].far],this._uniformValues.u_shadow_intensity=T,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Ao.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Ao.shadowMapResolution,this._uniformValues.u_shadowmap_0=Si.ShadowMap0,this._uniformValues.u_shadowmap_1=Si.ShadowMap0+1,this._groundShadowTiles=A.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const me=A.transform.elevation;for(const be of this._groundShadowTiles){let Te={min:0,max:0};if(me){const ze=me.getMinMaxForTile(be);ze&&(Te=ze)}this.addShadowReceiver(be.toUnwrapped(),Te.min,Te.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,d){if(!this.enabled)return;const A=this.painter,T=A.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(A.transform.getFrustum(0),A.transform.worldSize,this._cascades),T.viewport.set([0,0,Ao.shadowMapResolution,Ao.shadowMapResolution]);for(let S=0;S<this._numCascadesToRender;++S){A.currentShadowCascade=S,T.bindFramebuffer.set(this._cascades[S].framebuffer.framebuffer),T.clear({color:n.al.white,depth:1});for(const E of o.order){const F=o._mergedLayers[E];if(!F.hasShadowPass()||F.isHidden(A.transform.zoom))continue;const q=o.getLayerSourceCache(F),K=q?d[q.id]:void 0;(F.type==="model"||K&&K.length)&&A.renderLayer(A,q,F,K)}}A.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,d=o.style,A=o.context,T=d.directionalLight,S=d.ambientLight;if(!T||!S)return;const E=[],F=Js(o,o.longestCutoffRange);F.shouldRenderCutoff&&E.push("RENDER_CUTOFF"),E.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&E.push("NORMAL_OFFSET");const q=Gc(d,T,S),K=new cr(A.gl.LEQUAL,cr.ReadOnly,o.depthRangeFor3D);for(const Y of this._groundShadowTiles){const ae=Y.toUnwrapped(),re=o.isTileAffectedByFog(Y),me=o.getOrCreateProgram("groundShadow",{defines:E,overrideFog:re});this.setupShadows(ae,me),o.uploadCommonUniforms(A,me,ae,null,F);const be={u_matrix:o.transform.calculateProjMatrix(ae),u_ground_shadow_factor:q};me.draw(o,A.gl.TRIANGLES,K,Nr.disabled,Dr.multiply,xr.disabled,be,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,null,o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Dr.unblended:Dr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const d=this.painter.transform,A=d.calculatePosMatrix(o,d.worldSize);return n.ad.mat4.multiply(A,this._cascades[this.painter.currentShadowCascade].matrix,A),Float32Array.from(A)}calculateShadowPassMatrixFromMatrix(o){return n.ad.mat4.multiply(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,d,A,T=0){if(!this.enabled)return;const S=this.painter.transform,E=this.painter.context,F=E.gl,q=this._uniformValues,K=new Float64Array(16),Y=S.calculatePosMatrix(o,S.worldSize);for(let ae=0;ae<this._cascades.length;ae++)n.ad.mat4.multiply(K,this._cascades[ae].matrix,Y),q[ae===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(K),E.activeTexture.set(F.TEXTURE0+Si.ShadowMap0+ae),this._cascades[ae].texture.bind(F.NEAREST,F.CLAMP_TO_EDGE);if(this.useNormalOffset=!!A,this.useNormalOffset){const ae=n.cd(o.canonical),re=2/S.tileSize*n.ai/Ao.shadowMapResolution,me=re*this._cascades[0].boundingSphereRadius,be=re*this._cascades[this._cascades.length-1].boundingSphereRadius,Te=(A==="vector-tile"?1:3)/Math.pow(2,T-o.canonical.z-(1-S.zoom+Math.floor(S.zoom)));q.u_shadow_normal_offset=[ae,me*Te,be*Te],q.u_shadow_bias=[6e-5,.0012,.012]}else q.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(E,q)}setupShadowsFromMatrix(o,d,A=!1){if(!this.enabled)return;const T=this.painter.context,S=T.gl,E=this._uniformValues,F=new Float64Array(16);for(let q=0;q<Ao.cascadeCount;q++)n.ad.mat4.multiply(F,this._cascades[q].matrix,o),E[q===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(F),T.activeTexture.set(S.TEXTURE0+Si.ShadowMap0+q),this._cascades[q].texture.bind(S.NEAREST,S.CLAMP_TO_EDGE);if(this.useNormalOffset=A,A){const q=Ao.normalOffset;E.u_shadow_normal_offset=[1,q,q],E.u_shadow_bias=[6e-5,.0012,.012]}else E.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(T,E)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,d,A,T){if(T[2]>=0)return{};const S=function(q,K,Y){const ae=Y/(1<<q.canonical.z);return new n.ce([q.canonical.x*ae+q.wrap*Y,q.canonical.y*ae+q.wrap*Y,0],[(q.canonical.x+1)*ae+q.wrap*Y,(q.canonical.y+1)*ae+q.wrap*Y,K])}(o,d,A).getCorners(),E=d/-T[2];T[0]<0?(n.ad.vec3.add(S[0],S[0],[T[0]*E,0,0]),n.ad.vec3.add(S[3],S[3],[T[0]*E,0,0])):T[0]>0&&(n.ad.vec3.add(S[1],S[1],[T[0]*E,0,0]),n.ad.vec3.add(S[2],S[2],[T[0]*E,0,0])),T[1]<0?(n.ad.vec3.add(S[0],S[0],[0,T[1]*E,0]),n.ad.vec3.add(S[1],S[1],[0,T[1]*E,0])):T[1]>0&&(n.ad.vec3.add(S[2],S[2],[0,T[1]*E,0]),n.ad.vec3.add(S[3],S[3],[0,T[1]*E,0]));const F={};return F.vertices=S,F.planes=[js(S[1],S[0],S[4]),js(S[2],S[1],S[5]),js(S[3],S[2],S[6]),js(S[0],S[3],S[7])],F}addShadowReceiver(o,d,A){this._receivers.add(o,n.ce.fromTileIdAndHeight(o,d,A))}getMaxCascadeForTile(o){const d=this._receivers.get(o);return d&&d.lastCascade?d.lastCascade:0}}function js(y,o,d){const A=n.ad.vec3.sub([],d,o),T=n.ad.vec3.sub([],y,o),S=n.ad.vec3.cross([],A,T),E=n.ad.vec3.length(S);return E===0?[0,0,1,0]:(n.ad.vec3.scale(S,S,1/E),[S[0],S[1],S[2],-n.ad.vec3.dot(S,o)])}function Dl(y){const o=y.properties.get("direction"),d=n.cc(o.x,o.y,o.z);d[2]=n.ay(d[2],0,75);const A=n.cf([d[0],d[1],d[2]]);return n.ad.vec3.fromValues(A.x,A.y,A.z)}function Gc(y,o,d){const A=o.properties.get("color-use-theme")==="none",T=o.properties.get("color"),S=o.properties.get("intensity"),E=o.properties.get("direction"),F=[E.x,E.y,E.z],q=d.properties.get("color-use-theme")==="none",K=d.properties.get("color"),Y=d.properties.get("intensity"),ae=Math.max(n.ad.vec3.dot([0,0,1],F),0),re=[0,0,0];n.ad.vec3.scale(re,K.toRenderColor(q?null:y.getLut(o.scope)).toArray01Linear().slice(0,3),Y);const me=[0,0,0];return n.ad.vec3.scale(me,T.toRenderColor(A?null:y.getLut(d.scope)).toArray01Linear().slice(0,3),ae*S),n.cg([re[0]>0?re[0]/(re[0]+me[0]):0,re[1]>0?re[1]/(re[1]+me[1]):0,re[2]>0?re[2]/(re[2]+me[2]):0])}function su(y,o,d,A,T,S){const E=y.zoom,F=y.scale,q=y.worldSize,K=1/q,Y=y.aspect,ae=Math.sqrt(1+Y*Y)*Math.tan(.5*y.fovX),re=ae*ae,me=A-d,be=A+d;let Te,ze;re>me/be?(Te=A,ze=A*ae):(Te=.5*be*(1+re),ze=.5*Math.sqrt(me*me+2*(A*A+d*d)*re+be*be*re*re));const Fe=y.projection.pixelsPerMeter(y.center.lat,q),Ke=y._camera.getCameraToWorldMercator(),nt=[0,0,-Te*K];n.ad.vec3.transformMat4(nt,nt,Ke);let at=ze*K;const pt=y._edgeInsets;if(!(pt.left===0&&pt.top===0&&pt.right===0&&pt.bottom===0||pt.left===pt.right&&pt.top===pt.bottom)){const ha=y._camera.getWorldToCamera(y.worldSize,y.projection.zAxisUnit==="meters"?Fe:1),Xt=y._camera.getCameraToClipPerspective(y._fov,y.width/y.height,d,A);Xt[8]=2*-y.centerOffset.x/y.width,Xt[9]=2*y.centerOffset.y/y.height;const ga=new Float64Array(16);n.ad.mat4.mul(ga,Xt,ha);const ka=new Float64Array(16);n.ad.mat4.invert(ka,ga);const Ua=n.bR.fromInvProjectionMatrix(ka,q,E,!0);for(const Va of Ua.points){const dr=((st=Va)[0]/=F,st[1]/=F,st[2]=n.bH(st[2],y._center.lat),st);at=Math.max(at,n.ad.vec3.len(n.ad.vec3.subtract([],nt,dr)))}}var st;at*=T/(T-1);const ot=Math.acos(o[2]),lt=Math.atan2(-o[0],-o[1]),vt=new Ms;vt.position=nt,vt.setPitchBearing(ot,lt);const Tt=vt.getWorldToCamera(q,Fe),Qt=at*q,Ut=Math.min(y._mercatorZfromZoom(17)*q*-2,-2*Qt),ia=vt.getCameraToClipOrthographic(-Qt,Qt,-Qt,Qt,Ut,(Qt+S*Fe)/o[2]),da=new Float64Array(16);n.ad.mat4.multiply(da,ia,Tt);const xa=n.ad.vec3.fromValues(Math.floor(1e6*nt[0])/1e6*q,Math.floor(1e6*nt[1])/1e6*q,0),kt=.5*T,la=[0,0,0];n.ad.vec3.transformMat4(la,xa,da),n.ad.vec3.scale(la,la,kt);const zt=[Math.floor(la[0]),Math.floor(la[1]),Math.floor(la[2])],ua=[0,0,0];n.ad.vec3.sub(ua,la,zt),n.ad.vec3.scale(ua,ua,-1/kt);const ta=new Float64Array(16);return n.ad.mat4.identity(ta),n.ad.mat4.translate(ta,ta,ua),n.ad.mat4.multiply(da,ta,da),[da,Qt]}class wh extends n.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(o,d){return n.aN(this.requestManager.transformRequest(d,n.R.Model).url).then(A=>{if(!A)return;const T=n.aO(A),S=new n.aP(o,void 0,void 0,T);return S.computeBoundsAndApplyParent(),S}).catch(A=>{if(A&&A.status===404)return null;this.fire(new n.z(new Error(`Could not load model ${o} from ${d}: ${A.message}`)))})}load(o,d,A={keepNumReferences:!1}){this.models[d]||(this.models[d]={});const T=Object.keys(o);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+T.length;const S=[];for(const E of T)S.push(this.loadModel(E,o[E]));Promise.allSettled(S).then(E=>{for(let F=0;F<E.length;F++){const{status:q,value:K}=E[F];if(q==="fulfilled"&&K){const Y=this.models[d][T[F]];this.models[d][T[F]]={model:K,numReferences:A.keepNumReferences&&Y?Y.numReferences:1}}}this.numModelsLoading[d]-=T.length,this.fire(new n.A("data",{dataType:"style"}))}).catch(E=>{this.fire(new n.z(new Error(`Could not load models: ${E.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,d){return!!this.getModel(o,d)}getModel(o,d){return this.models[d]||(this.models[d]={}),this.models[d][o]?this.models[d][o].model:void 0}addModel(o,d,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={}),this.hasModel(o,A)&&this.models[A][o].numReferences++,this.modelUris[A][o]=this.requestManager.normalizeModelURL(d),this.load({[o]:this.modelUris[A][o]},A)}addModels(o,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const A=this.modelUris[d];for(const T in o)this.models[d][T]={},A[T]=this.requestManager.normalizeModelURL(o[T]);this.load(A,d,{keepNumReferences:!0})}reloadModels(o){this.load(this.modelUris[o],o)}addModelsFromBucket(o,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const A={};for(const T of o)this.hasModel(T,d)?this.models[d][T].numReferences++:(this.modelUris[d][T]=this.requestManager.normalizeModelURL(T),A[T]=this.modelUris[d][T]);this.load(A,d)}removeModel(o,d){if(this.models[d]&&this.models[d][o]&&(this.models[d][o].numReferences--,this.models[d][o].numReferences===0)){const A=this.models[d][o].model;delete this.models[d][o],delete this.modelUris[d][o],A.destroy()}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,d){this.models[d]||(this.models[d]={});for(const A in this.models[d])this.models[d][A].model&&this.models[d][A].model.upload(o.context)}}const Ml=new n.a7({data:new n.a8(n.a5.colorTheme.data)}),No={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Ld(y){return y=y||{},Object.assign(y,No)}class Zc extends n.E{constructor(o){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aQ(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=o,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(o=>{o.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=o.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=o.stylesheet.indoor.buildingFeaturesetId,this._scope=o.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:o=>(o.feature&&o.feature.properties.floorplan&&this.selectFloorplan(o.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(o){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(E,F){const[q,K]=E,{center:Y,radius:ae}=F,[re,me]=Y,be=Math.abs(q-re);return Math.sqrt((be>180?360-be:be)**2+(K-me)**2)<=ae}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.A("floorplangone")));const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=new n.P(this._map.transform.width/2,this._map.transform.height/2),T=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(o?T:A,d);S.length>0&&(this._selectedFloorplan&&S[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=S[0],this._floorplanSelected(!1)))}_floorplanSelected(o){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(S){const[[E,F],[q,K]]=S,Y=(q-E+360)%360,ae=Y>180?360-Y:Y;return{center:[(E+ae/2+360)%360,(F+K)/2],radius:Math.sqrt(ae**2+(K-F)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const d=this._floorplanStates[this._indoorData.id].selectedBuilding,A=this._floorplanStates[this._indoorData.id].selectedLevel;let T;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const S of this._indoorData.levels)S.id===this._selectedLevel.id&&(T=S.id);if(this.fire(new n.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:T})),d){const S=this._indoorData.buildings.find(E=>E.id===d);this._buildingSelected(S,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(A){const S=this._indoorData.levels.find(E=>E.id===A);this._updateLevels(S,o)}else o&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(o,d){d&&o&&o.extent&&this._map.fitBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=o?o.id:void 0;const A=this._indoorData.levels.filter(T=>o.levels.includes(T.id));this.fire(new n.A("buildingselected",{buildingId:o.id,levels:A}))}_levelSelected(o){if(o==="overview")this._updateLevels(void 0,!0);else{const d=this._indoorData.levels.find(A=>A.id===o);this._updateLevels(d,!0)}this.fire(new n.A("levelselected",{levelId:o==="overview"?void 0:o}))}_updateLevels(o,d){if(!o)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(d&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function A(K){const Y=K.indexOf("/floor/");if(Y===-1)return K;const ae=Y+7,re=K.indexOf("/",ae);return re===-1?K.slice(ae):K.slice(ae,re)}this._selectedLevel=o,this._floorplanStates[this._indoorData.id].selectedLevel=o?o.id:void 0;const T=[],S={},E={},F={},q={};for(const K of this._indoorData.levels)if(T.push(K.id),S[K.id]=K.height,E[K.id]=K.base,o){if(this.mergeFloors){const Y=A(o.id),ae=A(K.id);F[K.id]=ae===Y?"true":"false"}else F[K.id]=K.id===o.id?"true":"false";q[K.id]=K.base<o.base?"true":"false"}else q[K.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",T]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",E]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",F]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",q]),o&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!o.isUnderground),d&&o.extent)){const K=this._map.cameraForBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),Y=this._map.getZoom(),ae=K.zoom?Math.abs(Y-K.zoom):0;this._map.fitBounds(o.extent,ae>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:Y})}}selectFloorplan(o){const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],T=this._map.queryRenderedFeatures(A,d);if(T.length>0){for(const S of T)if(JSON.parse(S.properties["indoor-data"]).floorplanIDs.includes(o)){this._selectedFloorplan=S,this._floorplanSelected(!0);break}}}selectBuilding(o){const d=this._indoorData.buildings.find(A=>A.id===o);this._buildingSelected(d,!0)}selectLevel(o){this._levelSelected(o)}}function Il(y){if(!y.metadata||!y.metadata.content_area)return;const o=n.q.devicePixelRatio,{left:d,top:A,width:T,height:S}=y.metadata.content_area,E=d*o,F=A*o;return[E,F,E+T*o,F+S*o]}function wc(y){if(y)return y.map(([o,d])=>[o*n.q.devicePixelRatio,d*n.q.devicePixelRatio])}class xu{constructor(o,d){this.id=o,this.style=d}addIcons(o){const d=new Map;for(const[A,T]of o.entries()){const S=n.I.from({name:A,iconsetId:this.id});d.set(S,T)}this.style.addImages(d)}}const Qi=(y,o)=>Gt(y,o&&o.filter(d=>d.identifier!=="source.canvas")),Ef=n.aA(Nn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),so=n.aA(Nn,["setCenter","setZoom","setBearing","setPitch"]),_o=new Set(["background","sky","slot","custom"]),Fd={version:8,layers:[],sources:{}},kd={duration:300,delay:0};class oo extends n.E{constructor(o,d={}){super(),this.map=o,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=n.l({},kd),this._buildingIndex=new jc(this),this.crossTileSymbolIndex=new io,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new fa,this.dispatcher=d.dispatcher?d.dispatcher:new n.D(n.cj(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new Ht(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new n.ck(o._requestManager,d.localFontFamily?n.cl.all:d.localIdeographFontFamily?n.cl.ideographs:n.cl.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new wh(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",n.cm());const A=this;this._rtlTextPluginCallback=oo.registerForPluginStateChange(T=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},(S,E)=>{if(n.cn(S),E&&E.every(F=>F))for(const F in A._sourceCaches){const q=A._sourceCaches[F],K=q.getSource().type;K!=="vector"&&K!=="geojson"||q.reload()}})}),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const S=this.getOwnSource(T.sourceId);if(S&&S.vectorLayerIds)for(const E in this._layers){const F=this._layers[E];F.source===S.id&&this._validateLayer(F)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(n.f(o))return o;const d=n.co(o);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${n.cp(JSON.stringify(o))}`}_diffStyle(o,d,A){this.globalId=this._getGlobalId(o);const T=(S,E)=>{try{E(null,this.setState(S,A))}catch(F){E(F,!1)}};if(typeof o=="string"){const S=this.map._requestManager.normalizeStyleURL(o),E=this.map._requestManager.transformRequest(S,n.R.Style);n.n(E,(F,q)=>{F?this.fire(new n.z(F)):q&&T(q,d)})}else typeof o=="object"&&T(o,d)}loadURL(o,d={}){this.fire(new n.A("dataloading",{dataType:"style"}));const A=typeof d.validate=="boolean"?d.validate:!n.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,d.accessToken),this.resolvedImports.add(o);const T=this.importsCache.get(o);if(T)return this._load(T,A);const S=this.map._requestManager.transformRequest(o,n.R.Style);this._request=n.n(S,(E,F)=>{if(this._request=null,E)this.fire(new n.z(E));else if(F)return this.importsCache.set(o,F),this._load(F,A)})}loadJSON(o,d={}){this.fire(new n.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=n.q.frame(()=>{this._request=null,this._load(o,d.validate!==!1)})}loadEmpty(){this.fire(new n.A("dataloading",{dataType:"style"})),this._load(Fd,!1)}_loadImports(o,d,A){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const T=[];for(const S of o){const E=this._createFragmentStyle(S),F=new Promise(Y=>{E.once("style.import.load",Y),E.once("error",Y)}).then(()=>this.mergeAll());if(T.push(F),this.resolvedImports.has(S.url)){E.loadEmpty();continue}const q=S.data||this.importsCache.get(S.url);q?(E.loadJSON(q,{validate:d}),this._isInternalStyle(q)&&(E.globalId=null)):S.url?E.loadURL(S.url,{validate:d}):E.loadEmpty();const K={style:E,id:S.id,config:S.config};if(A){const Y=this.fragments.findIndex(({id:ae})=>ae===A);this.fragments=this.fragments.slice(0,Y).concat(K).concat(this.fragments.slice(Y))}else this.fragments.push(K)}return Promise.allSettled(T)}getImportGlobalIds(o=this,d=new Set){for(const A of o.fragments)A.style.globalId&&d.add(A.style.globalId),this.getImportGlobalIds(A.style,d);return[...d.values()]}_createFragmentStyle(o){const d=this.scope?n.C(o.id,this.scope):o.id;let A;const T=this._initialConfig&&this._initialConfig[d];(o.config||T)&&(A=n.l({},o.config,T));const S=new oo(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:A,configOptions:this.options,colorThemeOverride:o["color-theme"],configDependentLayers:this._configDependentLayers});return S.setEventedParent(this.map,{style:S}),S}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,d){const A=o.indoor?Ld(o.schema):o.schema;if(this._isInternalStyle(o)){const E=n.l({},Fd,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(E,d)}if(this.updateConfig(this._config,A),d&&Qi(this,oi(o)))return;this._loaded=!0,this.stylesheet=n.cq(o);const T=()=>{for(const K in o.sources)this.addSource(K,o.sources[K],{validate:!1,isInitialLoad:!0});if(o.iconsets)for(const K in o.iconsets)this.addIconset(K,o.iconsets[K]);o.sprite?this._loadIconset(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(o.glyphs);const E=Ah(this.stylesheet.layers);if(this._order=E.map(K=>K.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const K=this.stylesheet.lights[0];this.light=new Wt(K.properties,K.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Wt(this.stylesheet.light)),this._layers={};for(const K of E){const Y=n.cv(K,this.scope,this._styleColorTheme.lut,this.options);Y.configDependencies.size!==0&&this._configDependentLayers.add(Y.fqid),Y.setEventedParent(this,{layer:{id:Y.id}}),this._layers[Y.id]=Y;const ae=this.getOwnLayerSourceCache(Y),re=!!this.directionalLight&&this.directionalLight.shadowsEnabled();ae&&Y.canCastShadows()&&re&&(ae.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const F=this.stylesheet.terrain;F&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(F,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.A("data",{dataType:"style"}));const q=this.isRootStyle();o.imports?this._loadImports(o.imports,d).then(()=>{this._reloadImports(),this.fire(new n.A(q?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.A(q?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const S=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(S){const E=this._evaluateColorThemeData(S);this._loadColorTheme(E).then(()=>{T()}).catch(F=>{n.w(`Couldn't load color theme from the stylesheet: ${F}`),T()})}else this._styleColorTheme.lut=null,T()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,d,A,T,S,E,F,q,K,Y;const ae={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(re=>{if(re.stylesheet){if(re.light!=null&&(o=re.light),re.stylesheet.lights)for(const me of re.stylesheet.lights)me.type==="ambient"&&re.ambientLight!=null&&(d=re.ambientLight),me.type==="directional"&&re.directionalLight!=null&&(A=re.directionalLight);T=this._prioritizeTerrain(T,re.terrain,re.stylesheet.terrain),re.stylesheet.fog&&re.fog!=null&&(S=re.fog),re.stylesheet.snow&&re.snow!=null&&(E=re.snow),re.stylesheet.rain&&re.rain!=null&&(F=re.rain),re.stylesheet.camera!=null&&(Y=re.stylesheet.camera),re.stylesheet.projection!=null&&(q=re.stylesheet.projection),re.stylesheet.transition!=null&&(K=re.stylesheet.transition),ae[re.scope]=re._styleColorTheme}}),this.light=o,this.ambientLight=d,this.directionalLight=A,this.fog=S,this.snow=E,this.rain=F,this._styleColorThemeForScope=ae,T===null?delete this.terrain:this.terrain=T,this.camera=Y||{"camera-projection":"perspective"},this.projection=q||{name:"mercator"},this.transition=n.l({},kd,K),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const d=A=>{for(const T of A.fragments)d(T.style);o(A)};d(this)}_prioritizeTerrain(o,d,A){const T=o&&o.drapeRenderMode===0;return A===null?d&&d.drapeRenderMode===0?d:T?o:null:d!=null&&(!o||T||d&&d.drapeRenderMode===1)?d:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{o=this._prioritizeTerrain(o,d.terrain,d.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(o=d.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},d={},A={};this.forEachFragmentStyle(T=>{for(const S in T._sourceCaches){const E=n.C(S,T.scope);o[E]=T._sourceCaches[S]}for(const S in T._otherSourceCaches){const E=n.C(S,T.scope);d[E]=T._otherSourceCaches[S]}for(const S in T._symbolSourceCaches){const E=n.C(S,T.scope);A[E]=T._symbolSourceCaches[S]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=A}mergeLayers(){const o={},d=[],A={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(S=>{for(const E of S._order){const F=S._layers[E];if(F.type==="slot"){const q=n.cr(E);if(o[q])continue;o[q]=[]}F.slot&&o[F.slot]?o[F.slot].push(F):d.push(F)}}),this._mergedOrder=[];const T=(S=[])=>{for(const E of S)if(E.type==="slot"){const F=n.cr(E.id);o[F]&&T(o[F]),this._mergedSlots.push(F)}else{const F=n.C(E.id,E.scope);this._mergedOrder.push(F),A[F]=E,E.is3D(!!this.terrain)&&(this._has3DLayers=!0),E.type==="circle"&&(this._hasCircleLayers=!0),E.type==="symbol"&&(this._hasSymbolLayers=!0),E.type==="clip"&&(this._clipLayerPresent=!0)}};T(d),this._mergedOrder.sort((S,E)=>{const F=A[S],q=A[E];return F.hasInitialOcclusionOpacityProperties?q.is3D(!!this.terrain)?1:0:F.is3D(!!this.terrain)&&q.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=A,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=n.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(d,A,T){const S=n.l({},A);for(const F of Object.keys(n.a5.colorTheme))S[F]===void 0&&(S[F]=n.a5.colorTheme[F].default);const E=new n.a6(Ml,d,new Map(T));return E.setTransitionOrValue(S,T),E.untransitioned().possiblyEvaluate(new n.aa(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((A,T)=>{const S="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void A();let E=o;E.startsWith(S)||(E=S+E);const F=n.I.from("mapbox-reserved-lut"),q=new Image;q.src=E,q.onerror=()=>{this._styleColorTheme.lutLoading=!1,T(new Error("Failed to load image data"))},q.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void A();this._styleColorTheme.lutLoading=!1;const{width:K,height:Y,data:ae}=n.q.getImageData(q);if(Y>32)return void T(new Error("The height of the image must be less than or equal to 32 pixels."));if(K!==Y*Y)return void T(new Error("The width of the image must be equal to the height squared."));this.getImage(F)&&this.removeImage(F),this.addImage(F,{data:new n.r({width:K,height:Y},ae),pixelRatio:1,sdf:!1,usvg:!1,version:0});const re=this.imageManager.getImage(F,this.scope);re?(this._styleColorTheme.lut={image:re.data,data:o},A()):T(new Error("Missing LUT image."))}})}getLut(o){const d=this._styleColorThemeForScope[o];return d?d.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(d,A,T){let S,E,F;const q=n.q.devicePixelRatio>1?"@2x":"";let K=n.n(A.transformRequest(A.normalizeSpriteURL(d,q,".json"),n.R.SpriteJSON),(re,me)=>{K=null,F||(F=re,S=me,ae())}),Y=n.o(A.transformRequest(A.normalizeSpriteURL(d,q,".png"),n.R.SpriteImage),(re,me)=>{Y=null,F||(F=re,E=me,ae())});function ae(){if(F)T(F);else if(S&&E){const re=n.q.getImageData(E),me={};for(const be in S){const{width:Te,height:ze,x:Fe,y:Ke,sdf:nt,pixelRatio:at,stretchX:pt,stretchY:st,content:ot}=S[be],lt=new n.r({width:Te,height:ze});n.r.copy(re,lt,{x:Fe,y:Ke},{x:0,y:0},{width:Te,height:ze},null),me[be]={data:lt,pixelRatio:at,sdf:nt,stretchX:pt,stretchY:st,content:ot,usvg:!1}}T(null,me)}}return{cancel(){K&&(K.cancel(),K=null),Y&&(Y.cancel(),Y=null)}}}(o,this.map._requestManager,(d,A)=>{if(this._spriteRequest=null,d)this.fire(new n.z(d));else if(A){const T=new Map;for(const S in A)T.set(n.I.from(S),A[S]);this.addImages(T)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))})}addIconset(o,d){if(d.type==="sprite")return void this._loadSprite(d.url);const A=this.getOwnSource(d.source);if(!A)return void this.fire(new n.z(new Error(`Source "${d.source}" as specified by iconset "${o}" does not exist and cannot be used as an iconset source`)));if(A.type!=="raster-array")return void this.fire(new n.z(new Error(`Source "${d.source}" as specified by iconset "${o}" is not a "raster-array" source and cannot be used as an iconset source`)));this.imageManager.createIconset(this.scope,o);const T=new xu(o,this);A.addIconset(o,T)}_loadIconset(o){if(!n.f(o)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(o);const d=this.map._spriteFormat==="auto";var A,T;this._spriteRequest=(T=(S,E)=>{if(this._spriteRequest=null,S)d?this._loadSprite(o):this.fire(new n.z(S));else if(E){const F=new Map;for(const q in E)F.set(n.I.from(q),E[q]);this.addImages(F)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))},n.bj((A=this.map._requestManager).transformRequest(A.normalizeIconsetURL(o),n.R.Iconset),(S,E)=>{if(S)return void T(S);const F={},q=n.ch(new n.bi(E));for(const K of q.icons){const Y={version:1,pixelRatio:n.q.devicePixelRatio,content:Il(K),stretchX:K.metadata?wc(K.metadata.stretch_x_areas):void 0,stretchY:K.metadata?wc(K.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:K};F[K.name]=Y}T(null,F)}))}_validateLayer(o){const d=this.getOwnSource(o.source);if(!d)return;const A=o.sourceLayer;A&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(A)===-1)&&this.fire(new n.z(new Error(`Source layer "${A}" does not exist on source "${d.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,d)=>{const A=this.fragments[d];return A&&A.style&&(o.data=A.style.serialize()),o})}_serializeSources(){const o={};for(const d in this._sourceCaches){const A=this._sourceCaches[d].getSource();o[A.id]||(o[A.id]=A.serialize())}return o}_serializeLayers(o){const d=[];for(const A of o){const T=this._layers[A];T&&T.type!=="custom"&&d.push(T.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const d=this.getOwnLayer(o);if(d)return d;this.fire(new n.z(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const d=this.getOwnSource(o);if(d)return d;this.fire(new n.z(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,d){const A=this.map.painter;if(A)for(let T=o.minzoom||0;T<(o.maxzoom||25.5);T++){const S=o.getProgramIds();if(S)for(const E of S){const F=o.getDefaultProgramParams(E,d.zoom,this._styleColorTheme.lut);F&&(A.style=this,this.fog&&(A._fogVisible=!0,F.overrideFog=!0,A.getOrCreateProgram(E,F)),A._fogVisible=!1,F.overrideFog=!1,A.getOrCreateProgram(E,F),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(F.overrideRtt=!0,A.getOrCreateProgram(E,F)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const d=this.calculateLightsBrightness();o.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const A=this._changes.isDirty();let T=!1;if(this._changes.isDirty()){const E=this._changes.getLayerUpdatesByScope();for(const F in E){const{updatedIds:q,removedIds:K}=E[F];(q||K)&&(this._updateWorkerLayers(F,q,K),T=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this.snow&&this.snow.updateTransitions(o),this.rain&&this.rain.updateTransitions(o),this._changes.reset()}const S={};for(const E in this._mergedSourceCaches){const F=this._mergedSourceCaches[E];S[E]=F.used,F.used=!1,F.tileCoverLift=0}for(const E of this._mergedOrder){const F=this._mergedLayers[E];if(F.recalculate(o,this._availableImages),!F.isHidden(o.zoom)){const q=this.getLayerSourceCache(F);q&&(q.used=!0,q.tileCoverLift=Math.max(q.tileCoverLift,F.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(F,o)}):this.precompilePrograms(F,o))}for(const E in this._mergedSourceCaches){const F=this._mergedSourceCaches[E];if(!F)continue;const q=F._source;q.type==="raster-array"&&q.iconsets&&(F.used=!0)}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&T&&this.mergeLayers();for(const E in S){const F=this._mergedSourceCaches[E];S[E]!==F.used&&F.getSource().fire(new n.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:F.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.snow&&this.snow.recalculate(o),this.rain&&this.rain.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),A&&this.fire(new n.A("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=this._changes.getUpdatedImages();if(o.length){for(const d in this._mergedSourceCaches)this._mergedSourceCaches[d].reloadTilesForDependencies(["icons","patterns"],o);this._changes.resetUpdatedImages()}}_updateWorkerLayers(o,d,A){const T=this.getFragmentStyle(o);T&&this.dispatcher.broadcast("updateLayers",{layers:d?T._serializeLayers(d):[],scope:o,removedIds:A||[],options:T.options})}setState(o,d){if(this._checkLoaded(),Qi(this,oi(o)))return!1;(o=n.cq(o)).layers=Ah(o.layers);const A=function(E,F){if(!E)return[{command:Nn.setStyle,args:[F]}];let q=[];try{if(!n.bn(E.version,F.version))return[{command:Nn.setStyle,args:[F]}];if(n.bn(E.center,F.center)||q.push({command:Nn.setCenter,args:[F.center]}),n.bn(E.zoom,F.zoom)||q.push({command:Nn.setZoom,args:[F.zoom]}),n.bn(E.bearing,F.bearing)||q.push({command:Nn.setBearing,args:[F.bearing]}),n.bn(E.pitch,F.pitch)||q.push({command:Nn.setPitch,args:[F.pitch]}),n.bn(E.sprite,F.sprite)||q.push({command:Nn.setSprite,args:[F.sprite]}),n.bn(E.glyphs,F.glyphs)||q.push({command:Nn.setGlyphs,args:[F.glyphs]}),n.bn(E.imports,F.imports)||function(me=[],be=[],Te){be=be||[];const ze=(me=me||[]).map(bn),Fe=be.map(bn),Ke=me.reduce(Ws,{}),nt=be.reduce(Ws,{}),at=ze.slice();let pt,st,ot,lt;for(pt=0,st=0;pt<ze.length;pt++)ot=ze[pt],nt.hasOwnProperty(ot)?st++:(Te.push({command:Nn.removeImport,args:[ot]}),at.splice(at.indexOf(ot,st),1));for(pt=0,st=0;pt<Fe.length;pt++)ot=Fe[Fe.length-1-pt],at[at.length-1-pt]!==ot&&(Ke.hasOwnProperty(ot)?(Te.push({command:Nn.removeImport,args:[ot]}),at.splice(at.lastIndexOf(ot,at.length-st),1)):st++,lt=at[at.length-pt],Te.push({command:Nn.addImport,args:[nt[ot],lt]}),at.splice(at.length-pt,0,ot));for(const vt of be){const Tt=Ke[vt.id];Tt&&!n.bn(Tt,vt)&&Te.push({command:Nn.updateImport,args:[vt.id,vt]})}}(E.imports,F.imports,q),n.bn(E.transition,F.transition)||q.push({command:Nn.setTransition,args:[F.transition]}),n.bn(E.light,F.light)||q.push({command:Nn.setLight,args:[F.light]}),n.bn(E.fog,F.fog)||q.push({command:Nn.setFog,args:[F.fog]}),n.bn(E.snow,F.snow)||q.push({command:Nn.setSnow,args:[F.snow]}),n.bn(E.rain,F.rain)||q.push({command:Nn.setRain,args:[F.rain]}),n.bn(E.projection,F.projection)||q.push({command:Nn.setProjection,args:[F.projection]}),n.bn(E.lights,F.lights)||q.push({command:Nn.setLights,args:[F.lights]}),n.bn(E.camera,F.camera)||q.push({command:Nn.setCamera,args:[F.camera]}),!n.bn(E["color-theme"],F["color-theme"]))return[{command:Nn.setStyle,args:[F]}];const K={},Y=[];(function(me,be,Te,ze){let Fe;for(Fe in be=be||{},me=me||{})me.hasOwnProperty(Fe)&&(be.hasOwnProperty(Fe)||mc(Fe,Te,ze));for(Fe in be){if(!be.hasOwnProperty(Fe))continue;const Ke=be[Fe];me.hasOwnProperty(Fe)?n.bn(me[Fe],Ke)||(me[Fe].type==="geojson"&&Ke.type==="geojson"&&er(me,be,Fe)?Te.push({command:Nn.setGeoJSONSourceData,args:[Fe,Ke.data]}):gc(Fe,be,Te,ze)):Ks(Fe,be,Te)}})(E.sources,F.sources,Y,K);const ae=[];E.layers&&E.layers.forEach(me=>{me.source&&K[me.source]?q.push({command:Nn.removeLayer,args:[me.id]}):ae.push(me)});let re=E.terrain;re&&K[re.source]&&(q.push({command:Nn.setTerrain,args:[void 0]}),re=void 0),q=q.concat(Y),n.bn(re,F.terrain)||q.push({command:Nn.setTerrain,args:[F.terrain]}),function(me,be,Te){be=be||[];const ze=(me=me||[]).map(bn),Fe=be.map(bn),Ke=me.reduce(Ws,{}),nt=be.reduce(Ws,{}),at=ze.slice(),pt=Object.create(null);let st,ot,lt,vt,Tt,Qt,Ut;for(st=0,ot=0;st<ze.length;st++)lt=ze[st],nt.hasOwnProperty(lt)?ot++:(Te.push({command:Nn.removeLayer,args:[lt]}),at.splice(at.indexOf(lt,ot),1));for(st=0,ot=0;st<Fe.length;st++)lt=Fe[Fe.length-1-st],at[at.length-1-st]!==lt&&(Ke.hasOwnProperty(lt)?(Te.push({command:Nn.removeLayer,args:[lt]}),at.splice(at.lastIndexOf(lt,at.length-ot),1)):ot++,Qt=at[at.length-st],Te.push({command:Nn.addLayer,args:[nt[lt],Qt]}),at.splice(at.length-st,0,lt),pt[lt]=!0);for(st=0;st<Fe.length;st++)if(lt=Fe[st],vt=Ke[lt],Tt=nt[lt],!pt[lt]&&!n.bn(vt,Tt))if(n.bn(vt.source,Tt.source)&&n.bn(vt["source-layer"],Tt["source-layer"])&&n.bn(vt.type,Tt.type)){for(Ut in hn(vt.layout,Tt.layout,Te,lt,null,Nn.setLayoutProperty),hn(vt.paint,Tt.paint,Te,lt,null,Nn.setPaintProperty),n.bn(vt.slot,Tt.slot)||Te.push({command:Nn.setSlot,args:[lt,Tt.slot]}),n.bn(vt.filter,Tt.filter)||Te.push({command:Nn.setFilter,args:[lt,Tt.filter]}),n.bn(vt.minzoom,Tt.minzoom)&&n.bn(vt.maxzoom,Tt.maxzoom)||Te.push({command:Nn.setLayerZoomRange,args:[lt,Tt.minzoom,Tt.maxzoom]}),vt)vt.hasOwnProperty(Ut)&&Ut!=="layout"&&Ut!=="paint"&&Ut!=="filter"&&Ut!=="metadata"&&Ut!=="minzoom"&&Ut!=="maxzoom"&&Ut!=="slot"&&(Ut.indexOf("paint.")===0?hn(vt[Ut],Tt[Ut],Te,lt,Ut.slice(6),Nn.setPaintProperty):n.bn(vt[Ut],Tt[Ut])||Te.push({command:Nn.setLayerProperty,args:[lt,Ut,Tt[Ut]]}));for(Ut in Tt)Tt.hasOwnProperty(Ut)&&!vt.hasOwnProperty(Ut)&&Ut!=="layout"&&Ut!=="paint"&&Ut!=="filter"&&Ut!=="metadata"&&Ut!=="minzoom"&&Ut!=="maxzoom"&&Ut!=="slot"&&(Ut.indexOf("paint.")===0?hn(vt[Ut],Tt[Ut],Te,lt,Ut.slice(6),Nn.setPaintProperty):n.bn(vt[Ut],Tt[Ut])||Te.push({command:Nn.setLayerProperty,args:[lt,Ut,Tt[Ut]]}))}else Te.push({command:Nn.removeLayer,args:[lt]}),Qt=at[at.lastIndexOf(lt)+1],Te.push({command:Nn.addLayer,args:[Tt,Qt]})}(ae,F.layers,q)}catch(K){console.warn("Unable to compute style diff:",K),q=[{command:Nn.setStyle,args:[F]}]}return q}(this.serialize(),o).filter(E=>!(E.command in so));if(A.length===0)return!1;const T=A.filter(E=>!(E.command in Ef));if(T.length>0)throw new Error(`Unimplemented: ${T.map(E=>E.command).join(", ")}.`);const S=[];return A.forEach(E=>{S.push(this[E.command].apply(this,E.args))}),d&&Promise.all(S).then(d),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}addImages(o){for(const[d,A]of o.entries()){if(this.getImage(d)&&!d.iconsetId)return this.fire(new n.z(new Error(`An image with the name "${d.name}" already exists.`)));this.imageManager.addImage(d,this.scope,A),this._changes.updateImage(d)}return this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this}addImage(o,d){return this.getImage(o)&&!o.iconsetId?this.fire(new n.z(new Error(`An image with the name "${o.name}" already exists.`))):(this.imageManager.addImage(o,this.scope,d),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this)}updateImage(o,d,A=!1){this.imageManager.updateImage(o,this.scope,d),A&&(this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})))}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this):this.fire(new n.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(o,d,A={}){return this._checkLoaded(),this._validate(At,`models.${o}`,d,null,A)||(this.modelManager.addModel(o,d,this.scope),this._changes.setDirty()),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this):this.fire(new n.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,d,A={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(Cs,`sources.${o}`,d,null,A))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const T=jo(o,d,this.dispatcher,this);T.scope=this.scope,T.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(T.id),source:T.serialize(),sourceId:T.id}));const S=E=>{const F=(E?"symbol:":"other:")+T.id,q=n.C(F,this.scope),K=this._sourceCaches[F]=new rl(q,T,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[T.id]=K,K.onAdd(this.map)};S(!1),d.type!=="vector"&&d.type!=="geojson"||S(!0),T.onAdd&&T.onAdd(this.map),A.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const d=this.getOwnSource(o);if(!d)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const A=this.getOwnSourceCaches(o);for(const T of A){const S=n.cr(T.id);delete this._sourceCaches[S],this._changes.discardSourceCacheUpdate(T.id),T.fire(new n.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,d){this._checkLoaded(),this.getOwnSource(o).setData(d),this._changes.setDirty()}getOwnSource(o){const d=this.getOwnSourceCache(o);return d&&d.getSource()}getOwnSources(){const o=[];for(const d in this._otherSourceCaches){const A=this.getOwnSourceCache(d);A&&o.push(A.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const d in o){const A=o[d]._tiles;for(const T in A){const S=A[T];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const T of o){if(this._validate(mr,"lights",T))return;switch(T.type){case"ambient":if(this.ambientLight){const S=this.ambientLight;S.set(T),S.updateTransitions(d)}else this.ambientLight=new Ui(T,Jr||(Jr=new n.a7({color:new n.a8(n.a5.properties_light_ambient.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const S=this.directionalLight;S.set(T),S.updateTransitions(d)}else this.directionalLight=new Ui(T,Cn||(Cn=new n.a7({direction:new n.am(n.a5.properties_light_directional.direction),color:new n.a8(n.a5.properties_light_directional.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_directional.intensity),"cast-shadows":new n.a8(n.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a8(n.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a8(n.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const A=new n.aa(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(A),this.directionalLight&&this.directionalLight.recalculate(A),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,d=this.ambientLight;if(!o||!d)return;const A=re=>.2126*(re[0]<=.03928?re[0]/12.92:Math.pow((re[0]+.055)/1.055,2.4))+.7152*(re[1]<=.03928?re[1]/12.92:Math.pow((re[1]+.055)/1.055,2.4))+.0722*(re[2]<=.03928?re[2]/12.92:Math.pow((re[2]+.055)/1.055,2.4)),T=o.properties.get("color").toRenderColor(null).toArray01(),S=o.properties.get("intensity"),E=o.properties.get("direction"),F=1-n.cc(E.x,E.y,E.z)[2]/90,q=A(T)*S*F,K=d.properties.get("color").toRenderColor(null).toArray01(),Y=d.properties.get("intensity"),ae=A(K)*Y;return Number(((q+ae)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(!o)return this;if(n.cs(o)){const d=n.ct(o),A=this.fragments.find(({id:S})=>S===d);if(!A)throw new Error(`Style import '${o}' not found`);const T=n.cr(o);return A.style.getFragmentStyle(T)}{const d=this.fragments.find(({id:A})=>A===o);return d?d.style:void 0}}setFeaturesetSelectors(o){if(!o)return;const d={},A=(T,S="")=>`${T}::${S}`;this._featuresetSelectors={};for(const T in o){const S=this._featuresetSelectors[T]=[];for(const E of o[T].selectors){if(E.featureNamespace){const q=this.getOwnLayer(E.layer);if(!q){n.w(`Layer is undefined for selector: ${E.layer}`);continue}const K=A(q.source,q.sourceLayer);if(K in d&&d[K]!==E.featureNamespace){n.w(`"featureNamespace ${E.featureNamespace} of featureset ${T}'s selector is not associated to the same source, skip this selector`);continue}d[K]=E.featureNamespace}let F;if(E.properties)for(const q in E.properties){const K=n.X(E.properties[q]);K.result==="success"&&(F=F||{},F[q]=K.value)}S.push({layerId:E.layer,namespace:E.featureNamespace,properties:F,uniqueFeatureID:E._uniqueFeatureID})}}}getFeaturesetDescriptors(o){const d=this.getFragmentStyle(o);if(!d||!d.stylesheet.featuresets)return[];const A=[];for(const T in d.stylesheet.featuresets)A.push({featuresetId:T,importId:d.scope?d.scope:void 0});return A}getFeaturesetLayers(o,d){const A=this.getFragmentStyle(d),T=A.stylesheet.featuresets;if(!T||!T[o])return this.fire(new n.z(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const S=[];for(const E of T[o].selectors){const F=A.getOwnLayer(E.layer);F&&S.push(F)}return S}getConfigProperty(o,d){const A=this.getFragmentStyle(o);if(!A)return null;const T=n.C(d,A.scope),S=A.options.get(T),E=S?S.value||S.default:null;return E?E.serialize():null}setConfigProperty(o,d,A){const T=this.getFragmentStyle(o);if(!T)return;const S=T.stylesheet.indoor?Ld(T.stylesheet.schema):T.stylesheet.schema;if(!S||!S[d])return;const E=n.X(A);if(E.result!=="success")return void Qi(this,E.value);const F=E.value.expression,q=n.C(d,T.scope),K=T.options.get(q);if(!K)return;let Y;const{minValue:ae,maxValue:re,stepValue:me,type:be,values:Te}=S[d],ze=n.X(S[d].default);ze.result==="success"&&(Y=ze.value.expression),Y?(this.options.set(q,Object.assign({},K,{value:F,default:Y,minValue:ae,maxValue:re,stepValue:me,type:be,values:Te})),this.updateConfigDependencies(d)):this.fire(new n.z(new Error(`No schema defined for the config option "${d}" in the "${o}" fragment.`)))}getConfig(o){const d=this.getFragmentStyle(o);if(!d)return null;const A=d.stylesheet.schema;if(!A)return null;const T={};for(const S in A){const E=n.C(S,d.scope),F=d.options.get(E),q=F?F.value||F.default:null;T[S]=q?q.serialize():null}return T}setConfig(o,d){const A=this.getFragmentStyle(o);A&&(A.updateConfig(d,A.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const d=this.getFragmentStyle(o);return d?d.stylesheet.schema:null}setSchema(o,d){const A=this.getFragmentStyle(o);A&&(A.stylesheet.schema=d,A.updateConfig(A._config,d),this.updateConfigDependencies())}updateConfig(o,d){if(this._config=o,o||d)if(d)for(const A in d){let T,S;const E=n.X(d[A].default);if(E.result==="success"&&(T=E.value.expression),o&&o[A]!==void 0){const re=n.X(o[A]);re.result==="success"&&(S=re.value.expression)}const{minValue:F,maxValue:q,stepValue:K,type:Y,values:ae}=d[A];if(T){const re=n.C(A,this.scope);this.options.set(re,{default:T,value:S,minValue:F,maxValue:q,stepValue:K,type:Y,values:ae})}else this.fire(new n.z(new Error(`No schema defined for config option "${A}".`)))}else this.fire(new n.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const d of this._configDependentLayers){const A=this.getLayer(d);if(A){if(o&&!A.configDependencies.has(o))continue;A.possiblyEvaluateVisibility(),this._updateLayer(A)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(d=>{const A=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(A){const T=d._evaluateColorThemeData(A);(!d._styleColorTheme.lut&&T!==""||d._styleColorTheme.lut&&T!==d._styleColorTheme.lut.data)&&d.setColorTheme(A)}}),this._changes.setDirty()}addLayer(o,d,A={}){this._checkLoaded();const T=o.id;if(this._layers[T])return void this.fire(new n.z(new Error(`Layer with id "${T}" already exists on this map`)));let S;if(o.type==="custom"){if(Qi(this,n.cu(o)))return;S=n.cv(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(T,o.source),o=n.cq(o),o=n.l(o,{source:T})),this._validate(xe,`layers.${T}`,o,{arrayIndex:-1},A))return;S=n.cv(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(S),S.setEventedParent(this,{layer:{id:T}})}S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid);let E=this._order.length;if(d){const Y=this._order.indexOf(d);if(Y===-1)return void this.fire(new n.z(new Error(`Layer with id "${d}" does not exist on this map.`)));S.slot===this._layers[d].slot?E=Y:n.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,T),this._layerOrderChanged=!0,this._layers[T]=S;const F=this.getOwnLayerSourceCache(S),q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();F&&S.canCastShadows()&&q&&(F.castsShadows=!0);const K=this._changes.getRemovedLayer(S);if(K&&S.source&&F&&S.type!=="custom"){this._changes.discardLayerRemoval(S);const Y=n.C(S.source,S.scope);K.type!==S.type?this._changes.updateSourceCache(Y,"clear"):(this._changes.updateSourceCache(Y,"reload"),F.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),S.scope=this.scope,this.mergeLayers()}moveLayer(o,d){this._checkLoaded();const A=this._checkLayer(o);if(!A||o===d)return;const T=this._order.indexOf(o);this._order.splice(T,1);let S=this._order.length;if(d){const E=this._order.indexOf(d);if(E===-1)return void this.fire(new n.z(new Error(`Layer with id "${d}" does not exist on this map.`)));A.slot===this._layers[d].slot?S=E:n.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const d=this._checkLayer(o);if(!d)return;d.setEventedParent(null);const A=this._order.indexOf(o);this._order.splice(A,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const T=this.getOwnLayerSourceCache(d);if(T&&T.castsShadows){let S=!1;for(const E in this._layers)if(this._layers[E].source===d.source&&this._layers[E].canCastShadows()){S=!0;break}T.castsShadows=S}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const d in this._layers)if(this._layers[d].type===o)return!0;return!1}setLayerZoomRange(o,d,A){this._checkLoaded();const T=this._checkLayer(o);T&&(T.minzoom===d&&T.maxzoom===A||(d!=null&&(T.minzoom=d),A!=null&&(T.maxzoom=A),this._updateLayer(T)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,d){this._checkLoaded();const A=this._checkLayer(o);A&&A.slot!==d&&(A.slot=d,this._updateLayer(A))}setFilter(o,d,A={}){this._checkLoaded();const T=this._checkLayer(o);if(T&&!n.bn(T.filter,d))return d==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(Le,`layers.${T.id}.filter`,d,{layerType:T.type},A)||(T.filter=n.cq(d),this._updateLayer(T)))}getFilter(o){const d=this._checkLayer(o);if(d)return n.cq(d.filter)}setLayoutProperty(o,d,A,T={}){this._checkLoaded();const S=this._checkLayer(o);if(S&&!n.bn(S.getLayoutProperty(d),A)){if(A!=null&&(!T||T.validate!==!1)&&Qi(S,yt.call(oi,{key:`layers.${o}.layout.${d}`,layerType:S.type,objectKey:d,value:A,styleSpec:n.a5,style:{glyphs:!0,sprite:!0}})))return;S.setLayoutProperty(d,A),S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),this._updateLayer(S)}}getLayoutProperty(o,d){const A=this._checkLayer(o);if(A)return A.getLayoutProperty(d)}setPaintProperty(o,d,A,T={}){this._checkLoaded();const S=this._checkLayer(o);if(!S||n.bn(S.getPaintProperty(d),A)||A!=null&&(!T||T.validate!==!1)&&Qi(S,$e.call(oi,{key:`layers.${o}.paint.${d}`,layerType:S.type,objectKey:d,value:A,styleSpec:n.a5})))return;const E=S.setPaintProperty(d,A);S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),E&&this._updateLayer(S),this._changes.updatePaintProperties(S)}getPaintProperty(o,d){const A=this._checkLayer(o);if(A)return A.getPaintProperty(d)}setFeatureState(o,d){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:q,importId:K}=o.target,Y=this.getFragmentStyle(K),ae=Y.getFeaturesetLayers(q);for(const{source:re,sourceLayer:me}of ae)Y.setFeatureState({id:o.id,source:re,sourceLayer:me},d)}else if("layerId"in o.target){const{layerId:q}=o.target,K=this.getLayer(q);this.setFeatureState({id:o.id,source:K.source,sourceLayer:K.sourceLayer},d)}return}const A=o.source,T=o.sourceLayer,S=this._checkSource(A);if(!S)return;const E=S.type;if(E==="geojson"&&T)return void this.fire(new n.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!T)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided.")));const F=this.getOwnSourceCaches(A);for(const q of F)q.setFeatureState(T,o.id,d)}removeFeatureState(o,d){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:q,importId:K}=o.target,Y=this.getFragmentStyle(K),ae=Y.getFeaturesetLayers(q);for(const{source:re,sourceLayer:me}of ae)Y.removeFeatureState({id:o.id,source:re,sourceLayer:me},d)}else if("layerId"in o.target){const{layerId:q}=o.target,K=this.getLayer(q);this.removeFeatureState({id:o.id,source:K.source,sourceLayer:K.sourceLayer},d)}return}const A=o.source,T=this._checkSource(A);if(!T)return;const S=T.type,E=S==="vector"?o.sourceLayer:void 0;if(S==="vector"&&!E)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new n.z(new Error("A feature id is required to remove its specific state property.")));const F=this.getOwnSourceCaches(A);for(const q of F)q.removeFeatureState(E,o.id,d)}getFeatureState(o){if(this._checkLoaded(),"target"in o){let S;if("featuresetId"in o.target){const{featuresetId:E,importId:F}=o.target,q=this.getFragmentStyle(F),K=q.getFeaturesetLayers(E);for(const{source:Y,sourceLayer:ae}of K){const re=q.getFeatureState({id:o.id,source:Y,sourceLayer:ae});if(re&&!S)S=re;else if(!n.bn(S,re))return void this.fire(new n.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o.target){const{layerId:E}=o.target,F=this.getLayer(E);S=this.getFeatureState({id:o.id,source:F.source,sourceLayer:F.sourceLayer})}return S}const d=o.source,A=o.sourceLayer,T=this._checkSource(d);if(T){if(T.type!=="vector"||A)return o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(A,o.id);this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=n.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),d=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return n.cw({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateFilteredLayers(o){for(const d of Object.values(this._mergedLayers))o(d)&&this._updateLayer(d)}_updateLayer(o){this._changes.updateLayer(o);const d=this.getLayerSourceCache(o),A=n.C(o.source,o.scope),T=this._changes.getUpdatedSourceCaches();o.source&&!T[A]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(A,"reload"),d.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const d=F=>this._mergedLayers[F].is3D(!!this.terrain),A=this.order,T={},S=[];for(let F=A.length-1;F>=0;F--){const q=A[F];if(d(q)){T[q]=F;for(const K of o){const Y=K[q];if(Y)for(const ae of Y)S.push(ae)}}}S.sort((F,q)=>q.intersectionZ-F.intersectionZ);const E=[];for(let F=A.length-1;F>=0;F--){const q=A[F];if(d(q))for(let K=S.length-1;K>=0;K--){const Y=S[K].feature;if(Y.layer&&T[Y.layer.id]<F)break;E.push(Y),S.pop()}else for(const K of o){const Y=K[q];if(Y)for(const ae of Y)E.push(ae.feature)}}return E}queryRenderedFeatures(o,d,A){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(Le,"queryRenderedFeatures.filter",d.filter,null,d),T=n.a_(d.filter));const S={},E=Y=>{if(_o.has(Y.type))return;const ae=this.getOwnLayerSourceCache(Y),re=S[ae.id]=S[ae.id]||{sourceCache:ae,layers:{},has3DLayers:!1};Y.is3D(!!this.terrain)&&(re.has3DLayers=!0),re.layers[Y.fqid]=re.layers[Y.fqid]||{styleLayer:Y,targets:[]},re.layers[Y.fqid].targets.push({filter:T})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new n.z(new Error("parameters.layers must be an Array."))),[];for(const Y of d.layers){const ae=this._layers[Y];if(!ae)return this.fire(new n.z(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];E(ae)}}else for(const Y in this._layers)E(this._layers[Y]);const F=this._queryRenderedFeatures(o,S,A),q=this._flattenAndSortRenderedFeatures(F),K=[];for(const Y of q)n.ct(Y.layer.id)===this.scope&&K.push(Y);return K}queryRenderedFeatureset(o,d,A){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(Le,"queryRenderedFeatures.filter",d.filter,null,d),T=n.a_(d.filter));const S="mock",E=[];if(d&&d.target)E.push(Object.assign({},d,{targetId:S,filter:T}));else{const Y=this.getFeaturesetDescriptors();for(const ae of Y)E.push({targetId:S,filter:T,target:ae});for(const{style:ae}of this.fragments){const re=ae.getFeaturesetDescriptors();for(const me of re)E.push({targetId:S,filter:T,target:me})}}const F=this.queryRenderedTargets(o,E,A),q=[],K=new Set;for(const Y of F)for(const ae of Y.variants[S])Uc(ae,Y,K)||q.push(new n.cx(Y,ae));return q}queryRenderedTargets(o,d,A){const T={},S=(F,q,K,Y)=>{const ae=T[q.id]=T[q.id]||{sourceCache:q,layers:{},has3DLayers:!1};if(ae.layers[F.fqid]=ae.layers[F.fqid]||{styleLayer:F,targets:[]},F.is3D(!!this.terrain)&&(ae.has3DLayers=!0),!Y)return K.uniqueFeatureID=!1,void ae.layers[F.fqid].targets.push(K);ae.layers[F.fqid].targets.push(Object.assign({},K,{namespace:Y.namespace,properties:Y.properties,uniqueFeatureID:Y.uniqueFeatureID}))};for(const F of d)if("featuresetId"in F.target){const{featuresetId:q,importId:K}=F.target,Y=this.getFragmentStyle(K);if(!Y||!Y._featuresetSelectors)continue;const ae=Y._featuresetSelectors[q];if(!ae){this.fire(new n.z(new Error(`The featureset '${q}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const re of ae){const me=Y.getOwnLayer(re.layerId);me&&!_o.has(me.type)&&S(me,Y.getOwnLayerSourceCache(me),F,re)}}else if("layerId"in F.target){const{layerId:q}=F.target,K=this.getLayer(q);if(!K||_o.has(K.type))continue;S(K,this.getLayerSourceCache(K),F)}const E=this._queryRenderedFeatures(o,T,A);return this._flattenAndSortRenderedFeatures(E)}_queryRenderedFeatures(o,d,A){const T=[],S=!!this.map._showQueryGeometry,E=Xi.createFromScreenPoints(o,A);for(const F in d){const q=gh(E,d[F],this._availableImages,A,S);Object.keys(q).length&&T.push(q)}if(this.placement)for(const F in d){if(!d[F].sourceCache._onlySymbols)continue;const q=wu(E.screenGeometry,d[F],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(q).length&&T.push(q)}return T}querySourceFeatures(o,d){const A=d&&d.filter;A&&this._validate(Le,"querySourceFeatures.filter",A,null,d);let T=[];const S=this.getOwnSourceCaches(o);for(const E of S)T=T.concat(Bc(E,d));return T}addSourceType(o,d,A){return oo.getSourceType(o)?A(new Error(`A source type called "${o}" already exists.`)):(oo.setSourceType(o,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:d.workerSourceURL},A):A(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,d,A={}){this._checkLoaded();const T=this.light.getLight();let S=!1;for(const F in o)if(!n.bn(o[F],T[F])){S=!0;break}if(!S)return;const E=this._getTransitionParameters();this.light.setLight(o,d,A),this.light.updateTransitions(E)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,d=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let A=o;const T=o.source==null;if(d===1){if(this.disableElevatedTerrain)return;if(typeof A.source=="object"){const F="terrain-dem-src";this.addSource(F,A.source),A=n.cq(A),A=n.l(A,{source:F})}const S=n.l({},A),E={};if(this.terrain&&T){S.source=this.terrain.get().source;const F=this.terrain?this.getFragmentStyle(this.terrain.scope):null;F&&(E.style=F.serialize())}if(this._validate(Zr,"terrain",S,E))return}if(!this.terrain||this.terrain.scope!==this.scope&&!T||this.terrain&&d!==this.terrain.drapeRenderMode){if(!A)return;this._createTerrain(A,d),this.fire(new n.A("data",{dataType:"style"}))}else{const S=this.terrain,E=S.get();for(const F of Object.keys(n.a5.terrain))!A.hasOwnProperty(F)&&n.a5.terrain[F].default&&(A[F]=n.a5.terrain[F].default);for(const F in o)if(!n.bn(o[F],E[F])){S.set(o,this.options),this.stylesheet.terrain=o;const q=this._getTransitionParameters({duration:0});S.updateTransitions(q),this.fire(new n.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const d=this.fog=new Wr(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_createSnow(o){const d=this.snow=new Qr(o,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_createRain(o){const d=this.rain=new jn(o,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.fog=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createFog(o);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(o){if(this._checkLoaded(),!o)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.snow=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createSnow(o);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(o){if(this._checkLoaded(),!o)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.rain=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createRain(o);this._markersNeedUpdate=!0}_reloadColorTheme(){const o=()=>{for(const T in this._layers)this._layers[T].lut=this._styleColorTheme.lut;for(const T in this._sourceCaches)this._sourceCaches[T].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void o();const A=this._evaluateColorThemeData(d);this._loadColorTheme(A).then(()=>{this.fire(new n.A("colorthemeset")),o()}).catch(T=>{n.w(`Couldn't set color theme: ${T}`)})}setColorTheme(o){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=o,this._reloadColorTheme()}setImportColorTheme(o,d){const A=this.getFragmentStyle(o);A&&(A._styleColorTheme.colorThemeOverride=d,A._reloadColorTheme())}_getTransitionParameters(o){return{now:n.q.now(),transition:n.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],d=[];for(const A of this._mergedOrder)this.isLayerDraped(this._mergedLayers[A])?o.push(A):d.push(A);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...d)}_createTerrain(o,d){const A=this.terrain=new Yt(o,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const T=this._getTransitionParameters({duration:0});A.updateTransitions(T)}_force3DLayerUpdate(){for(const o in this._layers){const d=this._layers[o];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const d=this._layers[o];d.type==="symbol"&&this._updateLayer(d)}}_validate(o,d,A,T,S={}){if(S&&S.validate===!1)return!1;const E=n.l({},this.serialize());return Qi(this,o.call(oi,n.l({key:d,style:E,value:A,styleSpec:n.a5},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cy.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(o){const d=this.getSourceCaches(o);for(const A of d)A.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const d=this.getSourceCaches(o);for(const A of d)A.resume(),A.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(o=>{o.modelManager.reloadModels(o.scope)})}updateSources(o){let d;this.directionalLight&&(d=Dl(this.directionalLight));for(const A in this._mergedSourceCaches)this._mergedSourceCaches[A].update(o,void 0,void 0,d)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const d=this._sourceCaches[o];d.resume(),d.reload()}}_updatePlacement(o,d,A,T,S,E,F=!1){let q=!1,K=!1;const Y={},ae={};for(const re of this._mergedOrder){const me=this._mergedLayers[re];if(me.type!=="symbol")continue;const be=n.C(me.source,me.scope);let Te=Y[be];if(!Te){const Fe=this.getLayerSourceCache(me);if(!Fe)continue;const Ke=Fe.getRenderableIds(!0).map(nt=>Fe.getTileByID(nt));ae[be]=Ke.slice(),Te=Y[be]=Ke.sort((nt,at)=>at.tileID.overscaledZ-nt.tileID.overscaledZ||(nt.tileID.isLessThan(at.tileID)?-1:1))}const ze=this.crossTileSymbolIndex.addLayer(me,Te,d.center.lng,d.projection);q=q||ze}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),F=F||this._layerOrderChanged||T===0,this._layerOrderChanged&&this.fire(new n.A("neworder")),(F||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),d.zoom))&&(this.pauseablePlacement=new On(d,this._mergedOrder,F,A,T,S,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,Y,ae,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),K=!0),q&&this.pauseablePlacement.placement.setStale()),K||q){this._buildingIndex.onNewFrame(d.zoom);for(let re=0;re<this._mergedOrder.length;re++){const me=this._mergedLayers[this._mergedOrder[re]];if(me.type!=="symbol")continue;const be=this.isLayerClipped(me);this.placement.updateLayerOpacities(me,Y[n.C(me.source,me.scope)],re,be?E:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,d){this._checkLoaded();const A=this.stylesheet.imports=this.stylesheet.imports||[];if(A.findIndex(({id:S})=>S===o.id)!==-1)return void this.fire(new n.z(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!d)return A.push(o),this._loadImports([o],!0);const T=A.findIndex(({id:S})=>S===d);return T===-1&&this.fire(new n.z(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=A.slice(0,T).concat(o).concat(A.slice(T)),this._loadImports([o],!0,d)}updateImport(o,d){this._checkLoaded();const A=this.stylesheet.imports||[],T=this.getImportIndex(o);return T===-1?this:typeof d=="string"?(this.setImportUrl(o,d),this):(d.url&&d.url!==A[T].url&&this.setImportUrl(o,d.url),n.bn(d.config,A[T].config)||this.setImportConfig(o,d.config,d.data.schema),n.bn(d.data,A[T].data)||this.setImportData(o,d.data),this)}moveImport(o,d){this._checkLoaded();let A=this.stylesheet.imports||[];const T=this.getImportIndex(o);if(T===-1)return this;const S=this.getImportIndex(d);if(S===-1)return this;const E=A[T],F=this.fragments[T];return A=A.filter(({id:q})=>q!==o),this.fragments=this.fragments.filter(({id:q})=>q!==o),this.stylesheet.imports=A.slice(0,S).concat(E).concat(A.slice(S)),this.fragments=this.fragments.slice(0,S).concat(F).concat(this.fragments.slice(S)),this.mergeLayers(),this}setImportUrl(o,d){this._checkLoaded();const A=this.stylesheet.imports||[],T=this.getImportIndex(o);if(T===-1)return this;A[T].url=d;const S=this.fragments[T];return S.style=this._createFragmentStyle(A[T]),S.style.on("style.import.load",()=>this.mergeAll()),S.style.loadURL(d),this}setImportData(o,d){this._checkLoaded();const A=this.getImportIndex(o),T=this.stylesheet.imports||[];return A===-1?this:d?(this.fragments[A].style.setState(d),this._reloadImports(),this):(delete T[A].data,this.setImportUrl(o,T[A].url))}setImportConfig(o,d,A){this._checkLoaded();const T=this.getImportIndex(o),S=this.stylesheet.imports||[];if(T===-1)return this;d?S[T].config=d:delete S[T].config;const E=this.fragments[T];A&&E.style.stylesheet&&(E.style.stylesheet.schema=A);const F=E.style.stylesheet&&E.style.stylesheet.schema;return E.config=d,E.style.updateConfig(d,F),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const d=this.stylesheet.imports||[],A=this.getImportIndex(o);A!==-1&&(d.splice(A,1),this.fragments[A].style._remove(),this.fragments.splice(A,1),this._reloadImports())}getImportIndex(o){const d=(this.stylesheet.imports||[]).findIndex(A=>A.id===o);return d===-1&&this.fire(new n.z(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),d}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const d in this._mergedOtherSourceCaches){const A=this._mergedOtherSourceCaches[d];A&&o.push(A.getSource())}return o}getSource(o,d){const A=this.getSourceCache(o,d);return A&&A.getSource()}getLayerSource(o){const d=this.getLayerSourceCache(o);return d&&d.getSource()}getSourceCache(o,d){const A=n.C(o,d);return this._mergedOtherSourceCaches[A]}getLayerSourceCache(o){const d=n.C(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[o]&&d.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&d.push(this._mergedSymbolSourceCaches[o]),d}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const d in o){const A=o[d];A==="reload"?this.reloadSource(d):A==="clear"&&this.clearSource(d)}}updateLayers(o){const d=this._changes.getUpdatedPaintProperties();for(const A of d){const T=this.getLayer(A);T&&T.updateTransitions(o)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(o){this.stylesheet.glyphs=o,this.glyphManager.setURL(o,this.scope)}getImages(o,d,A){this.imageManager.getImages(d.images,d.scope,A),this._updateTilesForChangedImages();const T=E=>{if(E){const F=d.images.map(q=>n.I.toString(q));E.setDependencies(d.tileID.key,d.type,F)}},S=n.C(d.source,d.scope);T(this._mergedOtherSourceCaches[S]),T(this._mergedSymbolSourceCaches[S])}rasterizeImages(o,d,A){this.imageManager.rasterizeImages(d,A)}getGlyphs(o,d,A){this.glyphManager.getGlyphs(d.stacks,d.scope,A)}getResource(o,d,A){return n.cz(d,A)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const d=[];return this._otherSourceCaches[o]&&d.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&d.push(this._symbolSourceCaches[o]),d}_isSourceCacheLoaded(o){const d=this.getOwnSourceCaches(o);return d.length===0?(this.fire(new n.z(new Error(`There is no source with ID '${o}'`))),!1):d.every(A=>A.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,d){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const A=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D(!!this.terrain)){if(A||d&&d.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}oo.getSourceType=function(y){return Jl[y]},oo.setSourceType=function(y,o){Jl[y]=o},oo.registerForPluginStateChange=n.ci;var qc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Rc=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Pu=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Hc="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Eu=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,$c=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Tc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Xu=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Ko=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,As=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,ai=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const li=[];lu(qc,li),lu(Pu,li),lu(Rc,li);const es={"_prelude_fog.vertex.glsl":$c,"_prelude_terrain.vertex.glsl":Eu,"_prelude_shadow.vertex.glsl":As,"_prelude_fog.fragment.glsl":Tc,"_prelude_shadow.fragment.glsl":ai,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Xu,"_prelude_raster_particle.glsl":Ko},hs={};cn("",Eu),cn(Tc,$c),cn(ai,As),cn(Xu,""),cn(Ko,"");const ou=cn(Rc,Pu),Kc=qc;var sl={background:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:cn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:cn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:cn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:cn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:cn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:cn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:cn(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:cn(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:cn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:cn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:cn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:cn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),0.001);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:cn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:cn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:cn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:cn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:cn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:cn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Hc),skyboxGradient:cn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Hc),skyboxCapture:cn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:cn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:cn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:cn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:cn("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:cn("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:cn("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:cn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function lu(y,o){const d=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let A of d)if(A=A.trim(),A[0]==="#"&&A.includes("if")&&!A.includes("endif")){A=A.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const T=A.split(" ");for(const S of T)o.includes(S)||o.push(S)}}function cn(y,o){const d=/#include\s+"([^"]+)"/g,A=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let T=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);T&&(T=T.map(K=>{const Y=K.split(" ");return Y[Y.length-1]}),T=[...new Set(T)]);const S={},E=[],F=[];if(y=y.replace(d,(K,Y)=>(F.push(Y),"")),(o=o.replace(d,(K,Y)=>(E.push(Y),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let q=[...li];lu(y,q),lu(o,q);for(const K of[...E,...F])es[K]||console.error(`Undefined include: ${K}`),hs[K]||(hs[K]=[],lu(es[K],hs[K])),q=[...q,...hs[K]];return{fragmentSource:y=y.replace(A,(K,Y,ae,re,me)=>(S[me]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${me}
in ${ae} ${re} ${me};
#else
uniform ${ae} ${re} u_${me};
#endif
`:Y==="initialize"?`
#ifdef HAS_UNIFORM_u_${me}
    ${ae} ${re} ${me} = u_${me};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${me}
    in ${ae} ${re} ${me};
#endif
`:Y==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(A,(K,Y,ae,re,me)=>{const be=re==="float"?"vec2":re,Te=me.match(/color/)?"color":be;return Y==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${me}
in ${ae} ${re} a_${me};
#endif
`:S[me]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
in ${ae} ${be} a_${me};
out ${ae} ${re} ${me};
#else
uniform ${ae} ${re} u_${me};
#endif
`:Y==="initialize"?Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = a_${me};
#else
    ${ae} ${re} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = unpack_mix_${Te}(a_${me}, u_${me}_t);
#else
    ${ae} ${re} ${me} = u_${me};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${me}
    in ${ae} ${re} a_${me};
    out ${ae} ${re} ${me};
#endif
`:Y==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${me}
    ${me} = a_${me};
#endif
`:void 0:Y==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
in ${ae} ${be} a_${me};
#else
uniform ${ae} ${re} u_${me};
#endif
`:Y==="define-instanced"?Te==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${me}0;
in vec4 a_${me}1;
in vec4 a_${me}2;
in vec4 a_${me}3;
#else
uniform ${ae} ${re} u_${me};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${ae} ${be} a_${me};
#else
uniform ${ae} ${re} u_${me};
#endif
`:Y==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${me}
    ${ae} ${re} ${me} = a_${me};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${ae} ${re} ${me} = a_${me};
#else
    ${ae} ${re} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${ae} ${re} ${me} = unpack_mix_${Te}(a_${me}, u_${me}_t);
#else
    ${ae} ${re} ${me} = u_${me};
#endif
`}),staticAttributes:T,usedDefines:q,vertexIncludes:E,fragmentIncludes:F}}class Wc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,d,A,T,S,E,F,q){this.context=o;let K=this.boundPaintVertexBuffers.length!==T.length;for(let ae=0;!K&&ae<T.length;ae++)this.boundPaintVertexBuffers[ae]!==T[ae]&&(K=!0);let Y=this.boundDynamicVertexBuffers.length!==F.length;for(let ae=0;!Y&&ae<F.length;ae++)this.boundDynamicVertexBuffers[ae]!==F[ae]&&(Y=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==A||K||Y||this.boundIndexBuffer!==S||this.boundVertexOffset!==E)this.freshBind(d,A,T,S,E,F,q);else{o.bindVertexArrayOES.set(this.vao);for(const ae of F)ae&&(ae.bind(),q&&ae.instanceCount&&ae.setVertexAttribDivisor(o.gl,d,q));S&&S.dynamicDraw&&S.bind()}}freshBind(o,d,A,T,S,E,F){const q=o.numAttributes,K=this.context,Y=K.gl;this.vao&&this.destroy(),this.vao=K.gl.createVertexArray(),K.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=T,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=E,d.enableAttributes(Y,o),d.bind(),d.setVertexAttribPointers(Y,o,S);for(const ae of A)ae.enableAttributes(Y,o),ae.bind(),ae.setVertexAttribPointers(Y,o,S);for(const ae of E)ae&&(ae.enableAttributes(Y,o),ae.bind(),ae.setVertexAttribPointers(Y,o,S),F&&ae.instanceCount&&ae.setVertexAttribDivisor(Y,o,F));T&&T.bind(),K.currentNumAttributes=q}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Ll(y,o){const d=Math.pow(2,o.canonical.z),A=o.canonical.y;return[new n.ac(0,A/d).toLngLat().lat,new n.ac(0,(A+1)/d).toLngLat().lat]}function ls(y,o,d,A,T,S,E){const F=y.context,q=F.gl,K=d.hillshadeFBO;if(!K)return;y.prepareDrawTile();const Y=y.isTileAffectedByFog(o),ae=y.getOrCreateProgram("hillshade",{overrideFog:Y});F.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,K.colorAttachment.get());const re=((ze,Fe,Ke,nt)=>{const at=Ke.paint.get("hillshade-shadow-color"),pt=Ke.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",st=Ke.paint.get("hillshade-highlight-color"),ot=Ke.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",lt=Ke.paint.get("hillshade-accent-color"),vt=Ke.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",Tt=Ke.paint.get("hillshade-emissive-strength");let Qt=n.ak(Ke.paint.get("hillshade-illumination-direction"));if(Ke.paint.get("hillshade-illumination-anchor")==="viewport")Qt-=ze.transform.angle;else if(ze.style&&ze.style.enable3dLights()&&ze.style.directionalLight){const ia=ze.style.directionalLight.properties.get("direction"),da=n.cc(ia.x,ia.y,ia.z);Qt=n.ak(da[1])}const Ut=!ze.options.moving;return{u_matrix:nt||ze.transform.calculateProjMatrix(Fe.tileID.toUnwrapped(),Ut),u_image:0,u_latrange:Ll(0,Fe.tileID),u_light:[Ke.paint.get("hillshade-exaggeration"),Qt],u_shadow:at.toRenderColor(pt?null:Ke.lut),u_highlight:st.toRenderColor(ot?null:Ke.lut),u_emissive_strength:Tt,u_accent:lt.toRenderColor(vt?null:Ke.lut)}})(y,d,A,y.terrain?o.projMatrix:null);y.uploadCommonUniforms(F,ae,o.toUnwrapped());const{tileBoundsBuffer:me,tileBoundsIndexBuffer:be,tileBoundsSegments:Te}=y.getTileBoundsBuffers(d);ae.draw(y,q.TRIANGLES,T,S,E,xr.disabled,re,A.id,me,be,Te)}function Cc(y,o,d){if(!o.needsDEMTextureUpload)return;const A=y.context,T=A.gl;A.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||y.getTileTexture(d.stride);const S=d.getPixels();o.demTexture?o.demTexture.update(S,{premultiply:!1}):o.demTexture=new n.T(A,S,T.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function Ud(y,o,d){const A=y.context,T=A.gl;if(!o.dem)return;const S=o.dem;if(A.activeTexture.set(T.TEXTURE1),Cc(y,o,S),!o.demTexture)return;o.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);const E=S.dim;A.activeTexture.set(T.TEXTURE0);let F=o.hillshadeFBO;if(!F){const re=new n.T(A,{width:E,height:E,data:null},T.RGBA8);re.bind(T.LINEAR,T.CLAMP_TO_EDGE),F=o.hillshadeFBO=A.createFramebuffer(E,E,!0,"renderbuffer"),F.colorAttachment.set(re.texture)}A.bindFramebuffer.set(F.framebuffer),A.viewport.set([0,0,E,E]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:K,tileBoundsSegments:Y}=y.getMercatorTileBoundsBuffers(),ae=[];y.linearFloatFilteringSupported()&&ae.push("TERRAIN_DEM_FLOAT_FORMAT"),y.getOrCreateProgram("hillshadePrepare",{defines:ae}).draw(y,T.TRIANGLES,cr.disabled,Nr.disabled,Dr.unblended,xr.disabled,((re,me)=>{const be=me.stride,Te=n.ad.mat4.create();return n.ad.mat4.ortho(Te,0,n.ai,-n.ai,0,0,1),n.ad.mat4.translate(Te,Te,[0,-n.ai,0]),{u_matrix:Te,u_image:1,u_dimension:[be,be],u_zoom:re.overscaledZ}})(o.tileID,S),d.id,q,K,Y),o.needsHillshadePrepare=!1}class yi{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Hh extends yi{getDefault(){return n.al.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class ol extends yi{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class _l extends yi{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Yc extends yi{getDefault(){return[!0,!0,!0,!0]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Nu extends yi{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Ju extends yi{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Sc extends yi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const d=this.current;(o.func!==d.func||o.ref!==d.ref||o.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class rm extends yi{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class $h extends yi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=o,this.dirty=!1}}class Kh extends yi{getDefault(){return[0,1]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class ll extends yi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=o,this.dirty=!1}}class ts extends yi{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class bi extends yi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.BLEND):d.disable(d.BLEND),this.current=o,this.dirty=!1}}class uu extends yi{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ou extends yi{getDefault(){return n.al.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class up extends yi{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class bc extends yi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=o,this.dirty=!1}}class Nf extends yi{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Bd extends yi{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let Wh=class extends yi{getDefault(){return null}set(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)}};class Yh extends yi{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class jd extends yi{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Of extends yi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class ag extends yi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Rh extends yi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class $g extends yi{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class xc extends yi{getDefault(){return null}set(o){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Qu extends yi{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Vu extends yi{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Kg extends yi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Xh extends yi{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class wl extends yi{constructor(o,d){super(o),this.context=o,this.parent=d}getDefault(){return null}}class ul extends wl{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Jh extends wl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Gd extends wl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class nm extends Jh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const im=(y,o,d)=>({u_matrix:y,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:d}),Xc=(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(A),u_merc_matrix:d,u_zoom_transition:T,u_merc_center:S,u_image0:0,u_frustum_tl:E,u_frustum_tr:F,u_frustum_br:q,u_frustum_bl:K,u_globe_pos:Y,u_globe_radius:ae,u_viewport:re,u_grid_matrix:Te?Float32Array.from(Te):new Float32Array(9),u_skirt_height:me,u_far_z_cutoff:be});function Vf(y,o){return y!=null&&o!=null&&!(!y.hasData()||!o.hasData())&&y.demTexture!=null&&o.demTexture!=null&&y.tileID.key!==o.tileID.key}const cl=new class{constructor(){this.operations={}}newMorphing(y,o,d,A,T){if(y in this.operations){const S=this.operations[y];S.to.tileID.key!==d.tileID.key&&(S.queued=d)}else this.operations[y]={startTime:A,phase:0,duration:T,from:o,to:d,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const o=this.operations[y];return{from:o.from,to:o.to,phase:o.phase}}update(y){for(const o in this.operations){const d=this.operations[o];for(d.phase=(y-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,y)){delete this.operations[o];break}}}_nextOp(y,o){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=o,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},Zd={0:null,1:"TERRAIN_VERTEX_MORPHING"};function zu(y,o,d){if(o===0)return 0;const A=o<1&&d===514?.25/o:1;return 6*Math.pow(1.5,22-y)*Math.max(o,1)*A}function qd(y,o){const d=1<<y.z;return!o&&(y.x===0||y.x===d-1)||y.y===0||y.y===d-1}const Jc=y=>({u_matrix:y});function Fl(y,o,d,A,T){if(T>0){const S=n.q.now(),E=(S-y.timeAdded)/T,F=o?(S-o.timeAdded)/T:-1,q=d.getSource(),K=A.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),Y=!o||Math.abs(o.tileID.overscaledZ-K)>Math.abs(y.tileID.overscaledZ-K),ae=Y&&y.refreshedUponExpiration?1:n.ay(Y?E:1-F,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),o?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}class ec extends rl{constructor(o){const d={type:"raster-dem",maxzoom:o.transform.maxZoom},A=new n.D(n.cj(),null),T=jo("mock-dem",d,A,o.style);super("mock-dem",T,!1),T.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,d){o.state="loaded",d(null)}}class Qc extends rl{constructor(o){const d=jo("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new n.D(n.cj(),null),o.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,d,A){if(o.freezeTileCoverage)return;this.transform=o;const T=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,E)=>{if(S[E.key]="",!this._tiles[E.key]){const F=new eu(E,this._source.tileSize*E.overscaleFactor(),o.tileZoom);F.state="loaded",this._tiles[E.key]=F}return S},{});for(const S in this._tiles)S in T||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(o){const d=this.proxyCachedFBO[o];if(d!==void 0){const A=Object.values(d);this.renderCachePool.push(...A),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class cp extends n.aH{constructor(o,d,A){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=d,this.projMatrix=A}}class Hd extends n.cK{constructor(o,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[A,T,S]=function(q){const K=new n.b5,Y=new n.aV,ae=131;K.reserve(17161),Y.reserve(33800);const re=n.ai/128,me=n.ai+re/2,be=me+re;for(let ze=-re;ze<be;ze+=re)for(let Fe=-re;Fe<be;Fe+=re){const Ke=Fe<0||Fe>me||ze<0||ze>me?24575:0,nt=n.ay(Math.round(Fe),0,n.ai),at=n.ay(Math.round(ze),0,n.ai);K.emplaceBack(nt+Ke,at)}const Te=(ze,Fe)=>{const Ke=Fe*ae+ze;Y.emplaceBack(Ke+1,Ke,Ke+ae),Y.emplaceBack(Ke+ae,Ke+ae+1,Ke+1)};for(let ze=1;ze<129;ze++)for(let Fe=1;Fe<129;Fe++)Te(Fe,ze);return[0,129].forEach(ze=>{for(let Fe=0;Fe<130;Fe++)Te(Fe,ze),Te(ze,Fe)}),[K,Y,32768]}(),E=o.context;this.gridBuffer=E.createVertexBuffer(A,n.b7.members),this.gridIndexBuffer=E.createIndexBuffer(T),this.gridSegments=n.b8.simpleSegment(0,0,A.length,T.length),this.gridNoSkirtSegments=n.b8.simpleSegment(0,0,A.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Qc(d.map),this.orthoMatrix=n.ad.mat4.create(),n.ad.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ai,0,n.ai,0,1);const F=E.gl;this._overlapStencilMode=new Nr({func:F.GEQUAL,mask:255},0,255,F.KEEP,F.KEEP,F.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ec(d.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,d,A){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const T=o.terrain.properties,S=o.terrain.drapeRenderMode===0,E=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const F=o.terrain&&o.terrain.scope,q=T.get("source"),K=S?this._mockSourceCache:o.getSourceCache(q,F);if(!K)return void n.w(`Couldn't find terrain source "${q}".`);if(this.sourceCache=K,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=E?this.calculateExaggeration(d):T.get("exaggeration"),!d.projection.requiresDraping&&E&&this._exaggeration===0)return void this._disable();this.enabled=!0;const Y=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ae=this.getScaledDemTileSize();this.sourceCache.update(d,ae,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Y(),this._initializing=!0),Y(),d.updateElevation(!0,A),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const d=this._previousCameraAltitude,A=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=A;const T=d!=null?A-d:Number.MAX_VALUE;if(Math.abs(T)<2)return this._exaggeration;const S=o.zoom,E=this._style.terrain;if(!this._previousUpdateTimestamp)return E.getExaggeration(S);let F=S-this._previousZoom;const q=this._previousUpdateTimestamp;let K=S;this._evaluationZoom!=null&&(K=this._evaluationZoom,Math.abs(S-K)>.5&&(F=.5*(S-K+F)),F*T<0&&(K+=F)),this._evaluationZoom=K;const Y=E.getExaggeration(K),ae=Y===E.getExaggeration(Math.max(0,K-.1));if(ae&&Math.abs(Y-this._exaggeration)<.01)return Y;let re=Math.min(.1,.00375*(this._updateTimestamp-q));return(ae||Y<.1||Math.abs(F)<1e-4)&&(re=Math.min(.2,4*re)),n.ah(this._exaggeration,Y,re)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,A=this.painter.transform;this._initializing&&(this._initializing=A._centerAltitude===0&&this.getAtPointOrZero(n.ac.fromLngLat(A.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=d.getIds().map(q=>{const K=d.getTileByID(q).tileID;return K.projMatrix=A.calculateProjMatrix(K.toUnwrapped()),K});(function(q,K){const Y=K.transform.pointCoordinate(K.transform.getCameraPoint()),ae=new n.P(Y.x,Y.y);q.sort((re,me)=>{if(me.overscaledZ-re.overscaledZ)return me.overscaledZ-re.overscaledZ;const be=new n.P(re.canonical.x+(1<<re.canonical.z)*re.wrap,re.canonical.y),Te=new n.P(me.canonical.x+(1<<me.canonical.z)*me.wrap,me.canonical.y),ze=ae.mult(1<<re.canonical.z);return ze.x-=.5,ze.y-=.5,ze.distSqr(be)-ze.distSqr(Te)})})(T,this.painter);const S=this.proxyToSource||{};this.proxyToSource={},T.forEach(q=>{this.proxyToSource[q.key]={}}),this.terrainTileForTile={};const E=this._style._mergedSourceCaches;for(const q in E){const K=E[q];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,o[q],S),K.usedForTerrain))continue;const Y=o[q];K.getSource().reparseOverscaled&&this._assignTerrainTiles(Y)}this.proxiedCoords[d.id]=T.map(q=>new cp(q,q.key,this.orthoMatrix)),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1;const F={};this._visibleDemTiles=[];for(const q of this.proxyCoords){const K=this.terrainTileForTile[q.key];if(!K)continue;const Y=K.tileID.key;Y in F||(this._visibleDemTiles.push(K),F[Y]=Y)}}_assignTerrainTiles(o){this._initializing||o.forEach(d=>{if(this.terrainTileForTile[d.key])return;const A=this._findTileCoveringTileID(d,this.sourceCache);A&&(this.terrainTileForTile[d.key]=A)})}_prepareDEMTextures(){const o=this.painter.context,d=o.gl;for(const A in this.terrainTileForTile){const T=this.terrainTileForTile[A],S=T.dem;!S||T.demTexture&&!T.needsDEMTextureUpload||(o.activeTexture.set(d.TEXTURE1),Cc(this.painter,T,S))}}_prepareDemTileUniforms(o,d,A,T){if(!d||d.demTexture==null)return!1;const S=o.tileID.canonical,E=Math.pow(2,d.tileID.canonical.z-S.z),F=T||"";return A[`u_dem_tl${F}`]=[S.x*E%1,S.y*E%1],A[`u_dem_scale${F}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const d=this._visibleDemTiles.reduce((A,T)=>{if(!T.dem)return A;const S=T.dem.tree.minimums[0];return S>0&&o++,A+S},0);return o?d/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,d=o.gl;o.activeTexture.set(d.TEXTURE2);const A=this._getLoadedAreaMinimum(),T=new n.cL({width:1,height:1},new Float32Array([A]));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(T,{premultiply:!1}):S=this._emptyDEMTexture=new n.T(o,T,d.R32F,{premultiply:!1}),S}setupElevationDraw(o,d,A){const T=this.painter.context,S=T.gl,E={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};E.u_exaggeration=this.exaggeration();let F=null,q=null,K=1;if(A&&A.morphing&&this._useVertexMorphing){const me=A.morphing.srcDemTile,be=A.morphing.dstDemTile;K=A.morphing.phase,me&&be&&(this._prepareDemTileUniforms(o,me,E,"_prev")&&(q=me),this._prepareDemTileUniforms(o,be,E)&&(F=be))}const Y=me=>me&&me.demTexture&&this.painter.linearFloatFilteringSupported()?S.LINEAR:S.NEAREST;let ae=null;var re;if(this.enabled?q&&F?(ae=F.demTexture,T.activeTexture.set(S.TEXTURE4),q.demTexture.bind(Y(q),S.CLAMP_TO_EDGE),E.u_dem_lerp=K):(F=this.terrainTileForTile[o.tileID.key],ae=this._prepareDemTileUniforms(o,F,E)?F.demTexture:this.emptyDEMTexture):ae=this.emptyDEMTexture,T.activeTexture.set(S.TEXTURE2),ae&&(E.u_dem_size=(re=ae).size[0]===1?1:re.size[0]-2,ae.bind(Y(F),S.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(A&&A.useDepthForOcclusion,d,E),A&&A.useMeterToDem&&F){const me=(1<<F.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=me}if(A&&A.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=A.labelPlaneMatrixInv),d.setTerrainUniformValues(T,E),this.painter.transform.projection.name==="globe"){const me=this.globeUniformValues(this.painter.transform,o.tileID.canonical,A&&A.useDenormalizedUpVectorScale);d.setGlobeUniformValues(T,me)}}globeUniformValues(o,d,A){const T=o.projection;return{u_tile_tl_up:T.upVector(d,0,0),u_tile_tr_up:T.upVector(d,n.ai,0),u_tile_br_up:T.upVector(d,n.ai,n.ai),u_tile_bl_up:T.upVector(d,0,n.ai),u_tile_up_scale:A?n.cM(1):T.upVectorScale(d,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const d=this.painter,A=this.painter.context;o.length!==0&&(A.bindFramebuffer.set(null),A.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(T,S,E,F,q){if(T.transform.projection.name==="globe")(function(K,Y,ae,re,me){const be=K.context,Te=be.gl;let ze,Fe;const Ke=K.transform,nt=n.cD(K,be,Ke),at=(ia,da)=>{if(Fe===da)return;const xa=[Zd[da],"PROJECTION_GLOBE_VIEW"];nt&&xa.push("CUSTOM_ANTIALIASING");const kt=K.isTileAffectedByFog(ia);ze=K.getOrCreateProgram("globeRaster",{defines:xa,overrideFog:kt}),Fe=da},pt=K.colorModeForRenderPass(),st=new cr(Te.LEQUAL,cr.ReadWrite,K.depthRangeFor3D);cl.update(me);const ot=n.cE(Ke),lt=[n.av(Ke.center.lng),n.aC(Ke.center.lat)],vt=K.globeSharedBuffers,Tt=[Ke.width*n.q.devicePixelRatio,Ke.height*n.q.devicePixelRatio],Qt=Float32Array.from(Ke.globeMatrix),Ut={useDenormalizedUpVectorScale:!0};{const ia=K.transform,da=zu(ia.zoom,Y.exaggeration(),Y.sourceCache._source.tileSize);Fe=-1;const xa=Te.TRIANGLES;for(const kt of re){const la=ae.getTile(kt),zt=Nr.disabled,ua=Y.prevTerrainTileForTile[kt.key],ta=Y.terrainTileForTile[kt.key];Vf(ua,ta)&&cl.newMorphing(kt.key,ua,ta,me,250),be.activeTexture.set(Te.TEXTURE0),la.texture&&la.texture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);const ha=cl.getMorphValuesForProxy(kt.key),Xt=ha?1:0;ha&&n.L(Ut,{morphing:{srcDemTile:ha.from,dstDemTile:ha.to,phase:n.cC(ha.phase)}});const ga=n.cF(kt.canonical),ka=n.cG(ga.getCenter().lat),Ua=n.cH(kt.canonical,ga,ka,ia.worldSize/ia._pixelsPerMercatorPixel),Va=n.bc(n.cI(kt.canonical)),dr=Xc(ia.expandedFarZProjMatrix,Qt,ot,Va,n.ag(ia.zoom),lt,ia.frustumCorners.TL,ia.frustumCorners.TR,ia.frustumCorners.BR,ia.frustumCorners.BL,ia.globeCenterInViewSpace,ia.globeRadius,Tt,da,ia._farZ,Ua);if(at(kt,Xt),ze&&(Y.setupElevationDraw(la,ze,Ut),K.uploadCommonUniforms(be,ze,kt.toUnwrapped()),vt)){const[qr,Rr,kr]=vt.getGridBuffers(ka,da!==0);ze.draw(K,xa,st,zt,pt,xr.backCCW,dr,"globe_raster",qr,Rr,kr)}}}if(vt&&(K.renderDefaultNorthPole||K.renderDefaultSouthPole)){const ia=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];nt&&ia.push("CUSTOM_ANTIALIASING"),ze=K.getOrCreateProgram("globeRaster",{defines:ia});for(const da of re){const{x:xa,y:kt,z:la}=da.canonical,zt=kt===0,ua=kt===(1<<la)-1,[ta,ha,Xt,ga]=vt.getPoleBuffers(la,!1);if(ga&&(zt||ua)){const ka=ae.getTile(da);be.activeTexture.set(Te.TEXTURE0),ka.texture&&ka.texture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);let Ua=n.cJ(la,xa,Ke);const Va=n.bc(n.cI(da.canonical)),dr=(qr,Rr)=>qr.draw(K,Te.TRIANGLES,st,Nr.disabled,pt,xr.disabled,Xc(Ke.expandedFarZProjMatrix,Ua,Ua,Va,0,lt,Ke.frustumCorners.TL,Ke.frustumCorners.TR,Ke.frustumCorners.BR,Ke.frustumCorners.BL,Ke.globeCenterInViewSpace,Ke.globeRadius,Tt,0,Ke._farZ),"globe_pole_raster",Rr,Xt,ga);Y.setupElevationDraw(ka,ze,Ut),K.uploadCommonUniforms(be,ze,da.toUnwrapped()),zt&&K.renderDefaultNorthPole&&dr(ze,ta),ua&&K.renderDefaultSouthPole&&(Ua=n.ad.mat4.scale(n.ad.mat4.create(),Ua,[1,-1,1]),dr(ze,ha))}}}})(T,S,E,F,q);else{const K=T.context,Y=K.gl;let ae,re;const me=T.shadowRenderer,be=Js(T,T.longestCutoffRange),Te=pt=>{if(re===pt)return;const st=[];st.push(Zd[pt]),be.shouldRenderCutoff&&st.push("RENDER_CUTOFF"),me&&(st.push("RENDER_SHADOWS","DEPTH_TEXTURE"),me.useNormalOffset&&st.push("NORMAL_OFFSET")),ae=T.getOrCreateProgram("terrainRaster",{defines:st}),re=pt},ze=T.colorModeForRenderPass(),Fe=new cr(Y.LEQUAL,cr.ReadWrite,T.depthRangeFor3D);cl.update(q);const Ke=T.transform,nt=zu(Ke.zoom,S.exaggeration(),S.sourceCache._source.tileSize);let at=[0,0,0];if(me){const pt=T.style.directionalLight,st=T.style.ambientLight;pt&&st&&(at=Gc(T.style,pt,st))}{re=-1;const pt=Y.TRIANGLES,[st,ot]=[S.gridIndexBuffer,S.gridSegments];for(const lt of F){const vt=E.getTile(lt),Tt=Nr.disabled,Qt=S.prevTerrainTileForTile[lt.key],Ut=S.terrainTileForTile[lt.key];Vf(Qt,Ut)&&cl.newMorphing(lt.key,Qt,Ut,q,250),K.activeTexture.set(Y.TEXTURE0),vt.texture&&vt.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const ia=cl.getMorphValuesForProxy(lt.key),da=ia?1:0;let xa;ia&&(xa={morphing:{srcDemTile:ia.from,dstDemTile:ia.to,phase:n.cC(ia.phase)}});const kt=im(lt.projMatrix,qd(lt.canonical,Ke.renderWorldCopies)?nt/10:nt,at);if(Te(da),!ae)continue;S.setupElevationDraw(vt,ae,xa);const la=lt.toUnwrapped();me&&me.setupShadows(la,ae),T.uploadCommonUniforms(K,ae,la,null,be),ae.draw(T,pt,Fe,Tt,ze,xr.backCCW,kt,"terrain_raster",S.gridBuffer,st,ot)}}}}(d,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const d=this.painter,A=this.painter.context,T=this.proxySourceCache,S=this.proxiedCoords[T.id],E=this._drapedRenderBatches.shift(),F=d.style.order,q=[];let K=0;for(const Y of S){const ae=T.getTileByID(Y.proxyTileKey),re=T.proxyCachedFBO[Y.key]?T.proxyCachedFBO[Y.key][o]:void 0,me=re!==void 0?T.renderCache[re]:this.pool[K++],be=re!==void 0;if(ae.texture=me.tex,be&&!me.dirty){q.push(ae.tileID);continue}let Te;A.bindFramebuffer.set(me.fb.framebuffer),this.renderedToTile=!1,me.dirty&&(A.clear({color:n.al.transparent,stencil:0}),me.dirty=!1);for(let ze=E.start;ze<=E.end;++ze){const Fe=d.style._mergedLayers[F[ze]];if(Fe.isHidden(d.transform.zoom))continue;const Ke=d.style.getLayerSourceCache(Fe),nt=Ke?this.proxyToSource[Y.key][Ke.id]:[Y];if(!nt)continue;const at=nt;A.viewport.set([0,0,me.fb.width,me.fb.height]),Te!==(Ke?Ke.id:null)&&(this._setupStencil(me,nt,Fe,Ke),Te=Ke?Ke.id:null),d.renderLayer(d,Ke,Fe,at)}if(this._drapedRenderBatches.length===0)for(const ze of this._pendingGroundEffectLayers){const Fe=d.style._mergedLayers[F[ze]];if(Fe.isHidden(d.transform.zoom))continue;const Ke=d.style.getLayerSourceCache(Fe),nt=Ke?this.proxyToSource[Y.key][Ke.id]:[Y];if(!nt)continue;const at=nt;A.viewport.set([0,0,me.fb.width,me.fb.height]),Te!==(Ke?Ke.id:null)&&(this._setupStencil(me,nt,Fe,Ke),Te=Ke?Ke.id:null),d.renderLayer(d,Ke,Fe,at)}this.renderedToTile?(me.dirty=!0,q.push(ae.tileID)):be||--K,K===5&&(K=0,this.renderToBackBuffer(q))}return this.renderToBackBuffer(q),this.renderingToTexture=!1,A.bindFramebuffer.set(null),A.viewport.set([0,0,d.width,d.height]),E.end+1}postRender(){}isLayerOrderingCorrect(o){const d=o.order.length;let A=-1,T=d;for(let S=0;S<d;++S)this._style.isLayerDraped(o._mergedLayers[o.order[S]])?A=Math.max(A,S):T=Math.min(T,S);return T>A}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{o=Math.min(o,d.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,d,A){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const E=S.tileID,F=1<<E.overscaledZ,{x:q,y:K}=E.canonical,Y=q/F,ae=(q+1)/F,re=K/F,me=(K+1)/F;return{minx:Y,miny:re,maxx:ae,maxy:me,t:S.dem.tree.raycastRoot(Y,re,ae,me,o,d,A),tile:S}});T.sort((S,E)=>(S.t!==null?S.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const S of T){if(S.t==null)return null;const E=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,o,d,A);if(E!=null)return E}return null}_createFBO(){const o=this.painter.context,d=o.gl,A=this.drapeBufferSize;o.activeTexture.set(d.TEXTURE0);const T=new n.T(o,{width:A[0],height:A[1],data:null},d.RGBA8);T.bind(d.LINEAR,d.CLAMP_TO_EDGE);const S=o.createFramebuffer(A[0],A[1],!0,null);return S.colorAttachment.set(T.texture),S.depthAttachment=new nm(o,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,A[0],A[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:S,tex:T,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const d=this._style._mergedLayers[o],A=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!A&&d.shouldRedrape():!A&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const A of this._style.getSources())if(A instanceof pc){o=!0;break}if(!o)return;const d={};for(let A=0;A<this._style.order.length;++A){const T=this._style._mergedLayers[this._style.order[A]],S=this._style.getLayerSourceCache(T);if(S&&!d[S.id]&&!T.isHidden(this.painter.transform.zoom)&&T.type==="line"&&T.widthExpression()instanceof n.ab){d[S.id]=!0;for(const E of this.proxyCoords){const F=this.proxyToSource[E.key][S.id];if(F)for(const q of F)this._clearRenderCacheForTile(S.id,q)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const A in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[A]._source instanceof al){o=!0;break}if(!o)return;const d={};for(let A=0;A<this._style.order.length;++A){const T=this._style._mergedLayers[this._style.order[A]],S=this._style.getLayerSourceCache(T);if(!S||d[S.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="raster")continue;const E=T.paint.get("raster-fade-duration");for(const F of this.proxyCoords){const q=this.proxyToSource[F.key][S.id];if(q)for(const K of q){const Y=Fl(S.getTile(K),S.findLoadedParent(K,0),S,this.painter.transform,E);(Y.opacity!==1||Y.mix!==0)&&this._clearRenderCacheForTile(S.id,K)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const o=this._style.order,d=o.length;if(d===0)return;const A=[];this._pendingGroundEffectLayers=[];let T,S=0,E=this._style._mergedLayers[o[S]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++S<d;)E=this._style._mergedLayers[o[S]];for(;S<d;++S){const F=this._style._mergedLayers[o[S]];F.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(F)?T===void 0&&(T=S):(F.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(S),T!==void 0&&(A.push({start:T,end:S-1}),T=void 0)))}if(T!==void 0&&A.push({start:T,end:S-1}),A.length!==0){const F=A[A.length-1];this._pendingGroundEffectLayers.every(q=>q>F.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=A}_setupRenderCache(o){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const E=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let F=0;F<E.length;++F){const q=Object.values(E[F]);d.renderCachePool.push(...q)}}return}this._clearRasterLayersFromRenderCache();const A=this.proxyCoords,T=this._tilesDirty;for(let E=A.length-1;E>=0;E--){const F=A[E];if(d.getTileByID(F.key),d.proxyCachedFBO[F.key]!==void 0){const q=o[F.key],K=this.proxyToSource[F.key];let Y=0;for(const ae in K){const re=K[ae],me=q[ae];if(!me||me.length!==re.length||re.some((be,Te)=>be!==me[Te]||T[ae]&&T[ae].hasOwnProperty(be.key))){Y=-1;break}++Y}for(const ae in d.proxyCachedFBO[F.key])d.renderCache[d.proxyCachedFBO[F.key][ae]].dirty=Y<0||Y!==Object.values(q).length}}const S=[...this._drapedRenderBatches];S.sort((E,F)=>F.end-F.start-(E.end-E.start));for(const E of S)for(const F of A){if(d.proxyCachedFBO[F.key])continue;let q=d.renderCachePool.pop();q===void 0&&d.renderCache.length<50&&(q=d.renderCache.length,d.renderCache.push(this._createFBO())),q!==void 0&&(d.proxyCachedFBO[F.key]={},d.proxyCachedFBO[F.key][E.start]=q,d.renderCache[q].dirty=!0)}this._tilesDirty={}}_setupStencil(o,d,A,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,E=S.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let F;if(A.isTileClipped())F=d.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);F=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+F>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=F,this._overlapStencilMode.ref=this._stencilRef,A.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Nr.disabled}_renderTileClippingMasks(o,d){const A=this.painter,T=this.painter.context,S=T.gl;A._tileClippingMaskIDs={},T.setColorMode(Dr.disabled),T.setDepthMode(cr.disabled);const E=A.getOrCreateProgram("clippingMask");for(const F of o){const q=A._tileClippingMaskIDs[F.key]=--d;E.draw(A,S.TRIANGLES,cr.disabled,new Nr({func:S.ALWAYS,mask:0},q,255,S.KEEP,S.KEEP,S.REPLACE),Dr.disabled,xr.disabled,Jc(F.projMatrix),"$clipping",A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}}pointCoordinate(o){const d=this.painter.transform;if(o.x<0||o.x>d.width||o.y<0||o.y>d.height)return null;const A=[o.x,o.y,1,1];n.ad.vec4.transformMat4(A,A,d.pixelMatrixInverse),n.ad.vec4.scale(A,A,1/A[3]),A[0]/=d.worldSize,A[1]/=d.worldSize;const T=d._camera.position,S=n.bH(1,d.center.lat),E=[T[0],T[1],T[2]/S,0],F=n.ad.vec3.subtract([],A.slice(0,3),E);n.ad.vec3.normalize(F,F);const q=this.raycast(E,F,this._exaggeration);return q!==null&&q?(n.ad.vec3.scaleAndAdd(E,E,F,q),E[3]=E[2],E[2]*=S,E):null}_setupProxiedCoordsForOrtho(o,d,A){if(o.getSource()instanceof n.aK)return this._setupProxiedCoordsForImageSource(o,d,A);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const T=this.proxiedCoords[o.id]=[],S=this.proxyCoords;for(let q=0;q<S.length;q++){const K=S[q],Y=this._findTileCoveringTileID(K,o);if(Y){const ae=this._createProxiedId(K,Y,A[K.key]&&A[K.key][o.id]);T.push(ae),this.proxyToSource[K.key][o.id]=[ae]}}let E=!1;const F=new Set;for(let q=0;q<d.length;q++){const K=o.getTile(d[q]);if(!K||!K.hasData())continue;const Y=this._findTileCoveringTileID(K.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==K.tileID.canonical.z){const ae=this.proxyToSource[Y.tileID.key][o.id],re=this._createProxiedId(Y.tileID,K,A[Y.tileID.key]&&A[Y.tileID.key][o.id]);ae?ae.splice(ae.length-1,0,re):this.proxyToSource[Y.tileID.key][o.id]=[re];const me=this.proxyToSource[Y.tileID.key][o.id];F.has(me)||F.add(me),T.push(re),E=!0}}if(this._sourceTilesOverlap[o.id]=E,E&&this._debugParams.sortTilesHiZFirst)for(const q of F)q.sort((K,Y)=>Y.overscaledZ-K.overscaledZ)}_setupProxiedCoordsForImageSource(o,d,A){if(!o.getSource().loaded())return;const T=this.proxiedCoords[o.id]=[],S=this.proxyCoords,E=o.getSource(),F=E.tileID;if(!F)return;const q=new n.P(F.x,F.y)._div(1<<F.z),K=E.coordinates.map(n.ac.fromLngLat).reduce((ae,re)=>(ae.min.x=Math.min(ae.min.x,re.x-q.x),ae.min.y=Math.min(ae.min.y,re.y-q.y),ae.max.x=Math.max(ae.max.x,re.x-q.x),ae.max.y=Math.max(ae.max.y,re.y-q.y),ae),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(ae,re)=>{const me=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),be=ae.canonical.y/(1<<ae.canonical.z),Te=n.ai/(1<<ae.canonical.z),ze=re.wrap+re.canonical.x/(1<<re.canonical.z),Fe=re.canonical.y/(1<<re.canonical.z);return me+Te<ze+K.min.x||me>ze+K.max.x||be+Te<Fe+K.min.y||be>Fe+K.max.y};for(let ae=0;ae<S.length;ae++){const re=S[ae];for(let me=0;me<d.length;me++){const be=o.getTile(d[me]);if(!be||!be.hasData()||Y(re,be.tileID))continue;const Te=this._createProxiedId(re,be,A[re.key]&&A[re.key][o.id]),ze=this.proxyToSource[re.key][o.id];ze?ze.push(Te):this.proxyToSource[re.key][o.id]=[Te],T.push(Te)}}}_createProxiedId(o,d,A){let T=this.orthoMatrix;if(A){const S=A.find(E=>E.key===d.tileID.key);if(S)return S}if(d.tileID.key!==o.key){const S=o.canonical.z-d.tileID.canonical.z;let E,F,q;T=n.ad.mat4.create();const K=d.tileID.wrap-o.wrap<<o.overscaledZ;S>0?(E=n.ai>>S,F=E*((d.tileID.canonical.x<<S)-o.canonical.x+K),q=E*((d.tileID.canonical.y<<S)-o.canonical.y)):(E=n.ai<<-S,F=n.ai*(d.tileID.canonical.x-(o.canonical.x+K<<-S)),q=n.ai*(d.tileID.canonical.y-(o.canonical.y<<-S))),n.ad.mat4.ortho(T,0,E,0,E,0,1),n.ad.mat4.translate(T,T,[F,q,0])}return new cp(d.tileID,o.key,T)}_findTileCoveringTileID(o,d){let A=d.getTile(o);if(A&&A.hasData())return A;const T=this._findCoveringTileCache[d.id],S=T[o.key];if(A=S?d.getTileByID(S):null,A&&A.hasData()||S===null)return A;let E=A?A.tileID:o,F=E.overscaledZ;const q=d.getSource().minzoom,K=[];if(!S){const ae=d.getSource().maxzoom;if(o.canonical.z>=ae){const re=o.canonical.z-ae;d.getSource().reparseOverscaled?(F=Math.max(o.canonical.z+2,d.transform.tileZoom),E=new n.aH(F,o.wrap,ae,o.canonical.x>>re,o.canonical.y>>re)):re!==0&&(F=ae,E=new n.aH(F,o.wrap,ae,o.canonical.x>>re,o.canonical.y>>re))}E.key!==o.key&&(K.push(E.key),A=d.getTile(E))}const Y=ae=>{K.forEach(re=>{T[re]=ae}),K.length=0};for(F-=1;F>=q&&(!A||!A.hasData());F--){A&&Y(A.tileID.key);const ae=E.calculateScaledKey(F);if(A=d.getTileByID(ae),A&&A.hasData())break;const re=T[ae];if(re===null)break;re===void 0?K.push(ae):A=d.getTileByID(re)}return Y(A?A.tileID.key:null),A&&A.hasData()?A:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,d){let A=this._tilesDirty[o];A||(A=this._tilesDirty[o]={}),A[d.key]=!0}}function ed(y,o,d){const A=function(F,q,K){const Y=n.ad.vec3.dot(q,F),ae=n.ad.vec3.dot(K,[.2126,.7152,.0722]),re=(be,Te,ze)=>(1-ze)*be+ze*Te,me=re(1-.3*Math.min(ae,1),1,Math.min(Y+1,1));return re(.92,1,Math.asin(n.ay(q[2],-1,1))/Math.PI+.5)*me}(y,[0,0,1],o),T=[0,0,0];n.ad.vec3.scale(T,d.slice(0,3),A);const S=[0,0,0];n.ad.vec3.scale(S,o.slice(0,3),y[2]);const E=[0,0,0];return n.ad.vec3.add(E,T,S),n.cg(E)}const Gs=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],sm=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class rg{static cacheKey(o,d,A,T){let S=`${d}${T?T.cacheKey:""}`;for(const E of A)o.usedDefines.includes(E)&&(S+=`/${E}`);return S}constructor(o,d,A,T,S,E){const F=o.gl;this.program=F.createProgram(),this.configuration=T,this.name=d,this.fixedDefines=[...E];const q=T?T.getBinderAttributes():[],K=(A.staticAttributes||[]).concat(q);let Y=T?T.defines():[];Y=Y.concat(E.map(ze=>`#define ${ze}`));const ae=`#version 300 es
`;let re=ae+Y.concat("precision mediump float;",Kc,ou.fragmentSource).join(`
`);for(const ze of A.fragmentIncludes)re+=`
${es[ze]}`;re+=`
${A.fragmentSource}`;let me=ae+Y.concat("precision highp float;",Kc,ou.vertexSource).join(`
`);for(const ze of A.vertexIncludes)me+=`
${es[ze]}`;this.forceManualRenderingForInstanceIDShaders=o.forceManualRenderingForInstanceIDShaders&&A.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(me+=`
uniform int u_instanceID;
`),me+=`
${A.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(me=me.replaceAll("gl_InstanceID","u_instanceID"));const be=F.createShader(F.FRAGMENT_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);F.shaderSource(be,re),F.compileShader(be),F.attachShader(this.program,be);const Te=F.createShader(F.VERTEX_SHADER);if(F.isContextLost())this.failedToCreate=!0;else{F.shaderSource(Te,me),F.compileShader(Te),F.attachShader(this.program,Te),this.attributes={},this.numAttributes=K.length;for(let ze=0;ze<this.numAttributes;ze++)if(K[ze]){const Fe=K[ze].startsWith("a_")?K[ze]:`a_${K[ze]}`;F.bindAttribLocation(this.program,ze,Fe),this.attributes[Fe]=ze}F.linkProgram(this.program),F.deleteShader(Te),F.deleteShader(be),this.fixedUniforms=S(o),this.binderUniforms=T?T.getUniforms(o):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(ze=>({u_instanceID:new n.bN(ze)}))(o)),(E.includes("TERRAIN")||d.indexOf("symbol")!==-1||d.indexOf("circle")!==-1)&&(this.terrainUniforms=(ze=>({u_dem:new n.bN(ze),u_dem_prev:new n.bN(ze),u_dem_tl:new n.bK(ze),u_dem_scale:new n.bM(ze),u_dem_tl_prev:new n.bK(ze),u_dem_scale_prev:new n.bM(ze),u_dem_size:new n.bM(ze),u_dem_lerp:new n.bM(ze),u_exaggeration:new n.bM(ze),u_depth:new n.bN(ze),u_depth_size_inv:new n.bK(ze),u_depth_range_unpack:new n.bK(ze),u_occluder_half_size:new n.bM(ze),u_occlusion_depth_offset:new n.bM(ze),u_meter_to_dem:new n.bM(ze),u_label_plane_matrix_inv:new n.bJ(ze)}))(o)),E.includes("GLOBE")&&(this.globeUniforms=(ze=>({u_tile_tl_up:new n.bL(ze),u_tile_tr_up:new n.bL(ze),u_tile_br_up:new n.bL(ze),u_tile_bl_up:new n.bL(ze),u_tile_up_scale:new n.bM(ze)}))(o)),E.includes("FOG")&&(this.fogUniforms=(ze=>({u_fog_matrix:new n.bJ(ze),u_fog_range:new n.bK(ze),u_fog_color:new n.cb(ze),u_fog_horizon_blend:new n.bM(ze),u_fog_vertical_limit:new n.bK(ze),u_fog_temporal_offset:new n.bM(ze),u_frustum_tl:new n.bL(ze),u_frustum_tr:new n.bL(ze),u_frustum_br:new n.bL(ze),u_frustum_bl:new n.bL(ze),u_globe_pos:new n.bL(ze),u_globe_radius:new n.bM(ze),u_globe_transition:new n.bM(ze),u_is_globe:new n.bN(ze),u_viewport:new n.bK(ze)}))(o)),E.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ze=>({u_cutoff_params:new n.cb(ze)}))(o)),E.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ze=>({u_lighting_ambient_color:new n.bL(ze),u_lighting_directional_dir:new n.bL(ze),u_lighting_directional_color:new n.bL(ze),u_ground_radiance:new n.bL(ze)}))(o)),E.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ze=>({u_light_matrix_0:new n.bJ(ze),u_light_matrix_1:new n.bJ(ze),u_fade_range:new n.bK(ze),u_shadow_normal_offset:new n.bL(ze),u_shadow_intensity:new n.bM(ze),u_shadow_texel_size:new n.bM(ze),u_shadow_map_resolution:new n.bM(ze),u_shadow_direction:new n.bL(ze),u_shadow_bias:new n.bL(ze),u_shadowmap_0:new n.bN(ze),u_shadowmap_1:new n.bN(ze)}))(o))}}setTerrainUniformValues(o,d){if(!this.terrainUniforms)return;const A=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T]&&A[T].set(this.program,T,d[T])}}setGlobeUniformValues(o,d){if(!this.globeUniforms)return;const A=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T]&&A[T].set(this.program,T,d[T])}}setFogUniformValues(o,d){if(!this.fogUniforms)return;const A=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setCutoffUniformValues(o,d){if(!this.cutoffUniforms)return;const A=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setLightsUniformValues(o,d){if(!this.lightsUniforms)return;const A=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setShadowUniformValues(o,d){if(this.failedToCreate||!this.shadowUniforms)return;const A=this.shadowUniforms;o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}_drawDebugWireframe(o,d,A,T,S,E,F,q,K,Y){const ae=o.options.wireframe;if(ae.terrain===!1&&ae.layers2D===!1&&ae.layers3D===!1)return;const re=o.context;if(!(!(!ae.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!ae.layers2D||o._terrain&&o._terrain.renderingToTexture||!Gs.includes(this.name))||!(!ae.layers3D||!sm.includes(this.name))))return;const me=re.gl,be=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,S,re);if(!be)return;const Te=[...this.fixedDefines];Te.push("DEBUG_WIREFRAME");const ze=o.getOrCreateProgram(this.name,{config:this.configuration,defines:Te});re.program.set(ze.program);const Fe=(at,pt,st)=>{if(pt[at]&&st[at])for(const ot in pt[at])st[at][ot]&&st[at][ot].set(st.program,ot,pt[at][ot].current)};K&&K.setUniforms(ze.program,re,ze.binderUniforms,F,{zoom:q}),Fe("fixedUniforms",this,ze),Fe("terrainUniforms",this,ze),Fe("globeUniforms",this,ze),Fe("fogUniforms",this,ze),Fe("lightsUniforms",this,ze),Fe("shadowUniforms",this,ze),be.bind(),re.setColorMode(new Dr([me.ONE,me.ONE_MINUS_SRC_ALPHA,me.ZERO,me.ONE],n.al.transparent,[!0,!0,!0,!1])),re.setDepthMode(new cr(d.func===me.LESS?me.LEQUAL:d.func,cr.ReadOnly,d.range)),re.setStencilMode(Nr.disabled);const Ke=3*E.primitiveLength*2,nt=3*E.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const at=Y||1;for(let pt=0;pt<at;++pt)ze.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",pt),me.drawElements(me.LINES,Ke,me.UNSIGNED_SHORT,nt)}else Y&&Y>1?me.drawElementsInstanced(me.LINES,Ke,me.UNSIGNED_SHORT,nt,Y):me.drawElements(me.LINES,Ke,me.UNSIGNED_SHORT,nt);S.bind(),re.program.set(this.program),re.setDepthMode(d),re.setStencilMode(A),re.setColorMode(T)}checkUniforms(o,d,A){if(this.fixedDefines.includes(d)){for(const T of Object.keys(A))if(!A[T].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${T} not set but required by ${d} being defined`)}}draw(o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze){const Fe=o.context,Ke=Fe.gl;if(this.failedToCreate)return;Fe.program.set(this.program),Fe.setDepthMode(A),Fe.setStencilMode(T),Fe.setColorMode(S),Fe.setCullFace(E);for(const pt of Object.keys(this.fixedUniforms))this.fixedUniforms[pt].set(this.program,pt,F[pt]);be&&be.setUniforms(this.program,Fe,this.binderUniforms,re,{zoom:me});const nt={[Ke.POINTS]:1,[Ke.LINES]:2,[Ke.TRIANGLES]:3,[Ke.LINE_STRIP]:1}[d];this.checkUniforms(q,"RENDER_SHADOWS",this.shadowUniforms);const at=ze&&ze>0?1:void 0;for(const pt of ae.get()){const st=pt.vaos||(pt.vaos={});if((st[q]||(st[q]=new Wc)).bind(Fe,this,K,be?be.getPaintVertexBuffers():[],Y,pt.vertexOffset,Te||[],at),this.forceManualRenderingForInstanceIDShaders){const ot=ze||1;for(let lt=0;lt<ot;++lt)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",lt),Y?Ke.drawElements(d,pt.primitiveLength*nt,Ke.UNSIGNED_SHORT,pt.primitiveOffset*nt*2):Ke.drawArrays(d,pt.vertexOffset,pt.vertexLength)}else ze&&ze>1?Ke.drawElementsInstanced(d,pt.primitiveLength*nt,Ke.UNSIGNED_SHORT,pt.primitiveOffset*nt*2,ze):Y?Ke.drawElements(d,pt.primitiveLength*nt,Ke.UNSIGNED_SHORT,pt.primitiveOffset*nt*2):Ke.drawArrays(d,pt.vertexOffset,pt.vertexLength);d===Ke.TRIANGLES&&Y&&this._drawDebugWireframe(o,A,T,S,Y,pt,re,me,be,ze)}}}function zf(y,o){const d=Math.pow(2,o.tileID.overscaledZ),A=o.tileSize*Math.pow(2,y.transform.tileZoom)/d,T=A*(o.tileID.canonical.x+o.tileID.wrap*d),S=A*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.at(o,1,y.transform.tileZoom),u_pixel_coord_upper:[T>>16,S>>16],u_pixel_coord_lower:[65535&T,65535&S]}}const om={terrain:0,flat:1},lo=n.ad.mat4.create(),Qh=(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze,Fe)=>{const Ke=o.style.light,nt=Ke.properties.get("position"),at=[nt.x,nt.y,nt.z],pt=n.ad.mat3.create();Ke.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(pt,-o.transform.angle),n.ad.vec3.transformMat3(at,at,pt));const st=Ke.properties.get("color"),ot=o.transform,lt={u_matrix:y,u_lightpos:at,u_lightintensity:Ke.properties.get("intensity"),u_lightcolor:[st.r,st.g,st.b],u_vertical_gradient:+d,u_opacity:A,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:lo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:om[K],u_base_type:om[Y],u_ao:T,u_edge_radius:S,u_width_scale:E,u_flood_light_color:be,u_vertical_scale:Te,u_flood_light_intensity:ze,u_ground_shadow_factor:Fe};return ot.projection.name==="globe"&&(lt.u_tile_id=[F.canonical.x,F.canonical.y,1<<F.canonical.z],lt.u_zoom_transition=ae,lt.u_inv_rot_matrix=me,lt.u_merc_center=re,lt.u_up_dir=ot.projection.upVector(new n.bT(0,0,0),re[0]*n.ai,re[1]*n.ai),lt.u_height_lift=q),lt},G=(y,o,d,A,T,S)=>({u_matrix:y,u_edge_radius:o,u_width_scale:d,u_vertical_scale:A,u_height_type:om[T],u_base_type:om[S]}),Q=(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze)=>{const Fe=Qh(y,o,d,A,T,S,E,F,K,Y,ae,re,me,be,Te,ze,1,[0,0,0]),Ke={u_height_factor:-Math.pow(2,F.overscaledZ)/q.tileSize/8};return n.l(Fe,zf(o,q),Ke)},ye=(y,o)=>({u_matrix:y,u_emissive_strength:o}),Me=(y,o,d,A)=>n.l(ye(y,o),zf(d,A)),We=(y,o,d)=>({u_matrix:y,u_world:d,u_emissive_strength:o}),rt=(y,o,d,A,T)=>n.l(Me(y,o,d,A),{u_world:T}),it=(y,o,d,A,T)=>({u_matrix:y,u_camera_pos:[o[0],o[1],o[2]],u_depth_bias:d,u_height_scale:A,u_reset_depth:T}),ht=(y,o,d,A)=>{const T=n.ai/d.tileSize;return{u_matrix:y,u_camera_to_center_distance:o.getCameraToCenterDistance(A),u_extrude_scale:[o.pixelsToGLUnits[0]/T,o.pixelsToGLUnits[1]/T]}},mt=(y,o,d=1)=>({u_matrix:y,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),St=n.ad.mat4.create(),ea=(y,o,d,A,T,S,E)=>{const F=y.transform,q=F.projection.name==="globe",K=q?n.cO(F.zoom,o.canonical)*F._pixelsPerMercatorPixel:n.at(d,1,S),Y={u_matrix:o.projMatrix,u_extrude_scale:K,u_intensity:E,u_inv_rot_matrix:St,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(q){Y.u_inv_rot_matrix=A,Y.u_merc_center=T,Y.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],Y.u_zoom_transition=n.ag(F.zoom);const ae=T[0]*n.ai,re=T[1]*n.ai;Y.u_up_dir=F.projection.upVector(new n.bT(0,0,0),ae,re)}return Y};function Pt(y,[o,d,A,T],[S,E]){if(S===E)return[0,0,0,0];const F=255*(y-1)/(y*(E-S));return[o*F,d*F,A*F,T*F]}function wa(y,o,[d,A]){return d===A?0:.5/y+(o-d)*(y-1)/(y*(A-d))}const sa=(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze,Fe,Ke,nt,at)=>({u_matrix:y,u_normalize_matrix:o,u_globe_matrix:d,u_merc_matrix:A,u_grid_matrix:T,u_tl_parent:S,u_scale_parent:K,u_fade_t:Y.mix,u_opacity:Y.opacity*ae.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ae.paint.get("raster-brightness-min"),u_brightness_high:ae.paint.get("raster-brightness-max"),u_saturation_factor:n.cP(ae.paint.get("raster-saturation")),u_contrast_factor:n.cQ(ae.paint.get("raster-contrast")),u_spin_weights:Ta(ae.paint.get("raster-hue-rotate")),u_perspective_transform:re,u_raster_elevation:me,u_zoom_transition:E,u_merc_center:F,u_cutoff_params:q,u_colorization_mix:Pt(n.cR,Te,Fe),u_colorization_offset:wa(n.cR,ze,Fe),u_color_ramp:be,u_texture_offset:[nt/(Ke+2*nt),Ke/(Ke+2*nt)],u_texture_res:[Ke+2*nt,Ke+2*nt],u_emissive_strength:at});function Ta(y){y*=Math.PI/180;const o=Math.sin(y),d=Math.cos(y);return[(2*d+1)/3,(-Math.sqrt(3)*o-d+1)/3,(Math.sqrt(3)*o-d+1)/3]}const ma=.05,Rt=(y,o,d,A,T,S,E,F,q,K,Y,ae)=>({u_matrix:y,u_normalize_matrix:o,u_globe_matrix:d,u_merc_matrix:A,u_grid_matrix:T,u_tl_parent:S,u_scale_parent:K,u_fade_t:Y.mix,u_opacity:Y.opacity,u_image0:0,u_image1:1,u_raster_elevation:ae,u_zoom_transition:E,u_merc_center:F,u_cutoff_params:q}),aa=(y,o,d,A,T,S,E,F,q,K)=>({u_particle_texture:y,u_particle_texture_side_len:o,u_tile_offset:d,u_velocity:A,u_color_ramp:S,u_velocity_res:T,u_max_speed:E,u_uv_offset:F,u_data_scale:[255*q[0],255*q[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[ma,ma]}),Ha=(y,o,d,A,T,S,E,F,q,K)=>({u_particle_texture:y,u_particle_texture_side_len:o,u_velocity:d,u_velocity_res:A,u_max_speed:T,u_speed_factor:S,u_reset_rate:E,u_rand_seed:Math.random(),u_uv_offset:F,u_data_scale:[255*q[0],255*q[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[ma,ma]}),Ja=n.ad.mat4.create(),Wa=(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze,Fe,Ke,nt,at,pt)=>{const st=T.transform,ot={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:st.getCameraToCenterDistance(Ke),u_rotate_symbol:+d,u_aspect_ratio:st.width/st.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:E,u_coord_matrix:F,u_is_text:+K,u_elevation_from_sea:q?1:0,u_pitch_with_map:+A,u_texsize:Y,u_texsize_icon:ae,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ja,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ja,u_up_vector:[0,-1,0],u_color_adj_mat:nt,u_icon_transition:at||0,u_gamma_scale:A?T.transform.getCameraToCenterDistance(Ke)*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:1,u_scale_factor:pt||1};return Ke.name==="globe"&&(ot.u_tile_id=[me.canonical.x,me.canonical.y,1<<me.canonical.z],ot.u_zoom_transition=be,ot.u_inv_rot_matrix=ze,ot.u_merc_center=Te,ot.u_camera_forward=st._camera.forward(),ot.u_ecef_origin=n.cS(st.globeMatrix,me.toUnwrapped()),ot.u_tile_matrix=Float32Array.from(st.globeMatrix),ot.u_up_vector=Fe),ot},Vr=(y,o,d,A)=>({u_matrix:y,u_emissive_strength:o,u_opacity:d,u_color:A}),_r=(y,o,d,A,T,S,E,F,q)=>n.l(function(K,Y,ae,re,me,be){const{width:Te,height:ze}=re.imageManager.getPixelSize(Y),Fe=Math.pow(2,be.tileID.overscaledZ),Ke=be.tileSize*Math.pow(2,re.transform.tileZoom)/Fe,nt=Ke*(be.tileID.canonical.x+be.tileID.wrap*Fe),at=Ke*be.tileID.canonical.y;return{u_image:0,u_pattern_tl:ae.tl,u_pattern_br:ae.br,u_texsize:[Te,ze],u_pattern_size:ae.displaySize,u_pattern_units_to_pixels:me?[re.transform.width,-1*re.transform.height]:[1/n.at(be,1,re.transform.tileZoom),1/n.at(be,1,re.transform.tileZoom)],u_pixel_coord_upper:[nt>>16,at>>16],u_pixel_coord_lower:[65535&nt,65535&at]}}(0,S,E,A,F,q),{u_matrix:y,u_emissive_strength:o,u_opacity:d}),fn=new Float32Array(n.ad.mat4.identity([])),pr=(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me=[0,0,0],be)=>{const Te=T.style.light,ze=Te.properties.get("position"),Fe=[-ze.x,-ze.y,ze.z],Ke=n.ad.mat3.create();Te.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(Ke,-T.transform.angle),n.ad.vec3.transformMat3(Fe,Fe,Ke));const nt=Y.alphaMode==="MASK",at=Te.properties.get("color").toRenderColor(null),pt=re.paint.get("model-ambient-occlusion-intensity"),st=re.paint.get("model-color").constantOr(n.al.white).toRenderColor(null),ot=re.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:y,u_lighting_matrix:o,u_normal_matrix:d,u_node_matrix:A||fn,u_lightpos:Fe,u_lightintensity:Te.properties.get("intensity"),u_lightcolor:[at.r,at.g,at.b],u_camera_pos:me,u_opacity:S,u_baseTextureIsAlpha:0,u_alphaMask:+nt,u_alphaCutoff:Y.alphaCutoff,u_baseColorFactor:[E.r,E.g,E.b,E.a],u_emissiveFactor:[F[0],F[1],F[2],1],u_metallicFactor:q,u_roughnessFactor:K,u_baseColorTexture:Si.BaseColor,u_metallicRoughnessTexture:Si.MetallicRoughness,u_normalTexture:Si.Normal,u_occlusionTexture:Si.Occlusion,u_emissionTexture:Si.Emission,u_lutTexture:Si.LUT,u_color_mix:[st.r,st.g,st.b,ot],u_aoIntensity:pt,u_emissive_strength:ae,u_occlusionTextureTransform:be||[0,0,0,0]}},xi=(y,o=fn,d=fn)=>({u_matrix:y,u_instance:o,u_node_matrix:d}),Ii={fillExtrusion:y=>({u_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_vertical_gradient:new n.bM(y),u_opacity:new n.bM(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_ao:new n.bK(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_up_dir:new n.bL(y),u_height_lift:new n.bM(y),u_flood_light_color:new n.bL(y),u_vertical_scale:new n.bM(y),u_flood_light_intensity:new n.bM(y),u_ground_shadow_factor:new n.bL(y)}),fillExtrusionDepth:y=>({u_matrix:new n.bJ(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_vertical_scale:new n.bM(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y)}),fillExtrusionPattern:y=>({u_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_vertical_gradient:new n.bM(y),u_height_factor:new n.bM(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_ao:new n.bK(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_up_dir:new n.bL(y),u_height_lift:new n.bM(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y),u_opacity:new n.bM(y)}),fillExtrusionGroundEffect:y=>({u_matrix:new n.bJ(y),u_opacity:new n.bM(y),u_ao_pass:new n.bM(y),u_meter_to_tile:new n.bM(y),u_ao:new n.bK(y),u_flood_light_intensity:new n.bM(y),u_flood_light_color:new n.bL(y),u_attenuation:new n.bM(y),u_edge_radius:new n.bM(y),u_fb:new n.bN(y),u_fb_size:new n.bM(y),u_dynamic_offset:new n.bM(y)}),fill:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y)}),fillPattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y)}),fillOutline:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_world:new n.bK(y)}),fillOutlinePattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_world:new n.bK(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y)}),elevatedStructures:y=>({u_matrix:new n.bJ(y)}),elevatedStructuresDepthReconstruct:y=>({u_matrix:new n.bJ(y),u_camera_pos:new n.bL(y),u_depth_bias:new n.bM(y),u_height_scale:new n.bM(y),u_reset_depth:new n.bM(y)}),circle:n.cT,collisionBox:y=>({u_matrix:new n.bJ(y),u_camera_to_center_distance:new n.bM(y),u_extrude_scale:new n.bK(y)}),collisionCircle:y=>({u_matrix:new n.bJ(y),u_inv_matrix:new n.bJ(y),u_camera_to_center_distance:new n.bM(y),u_viewport_size:new n.bK(y)}),debug:y=>({u_color:new n.cA(y),u_matrix:new n.bJ(y),u_overlay:new n.bN(y),u_overlay_scale:new n.bM(y)}),clippingMask:y=>({u_matrix:new n.bJ(y)}),heatmap:y=>({u_extrude_scale:new n.bM(y),u_intensity:new n.bM(y),u_matrix:new n.bJ(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_up_dir:new n.bL(y)}),heatmapTexture:y=>({u_image:new n.bN(y),u_color_ramp:new n.bN(y),u_opacity:new n.bM(y)}),hillshade:y=>({u_matrix:new n.bJ(y),u_image:new n.bN(y),u_latrange:new n.bK(y),u_light:new n.bK(y),u_shadow:new n.cA(y),u_highlight:new n.cA(y),u_emissive_strength:new n.bM(y),u_accent:new n.cA(y)}),hillshadePrepare:y=>({u_matrix:new n.bJ(y),u_image:new n.bN(y),u_dimension:new n.bK(y),u_zoom:new n.bM(y)}),line:n.cU,linePattern:n.cV,raster:y=>({u_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_grid_matrix:new n.cB(y),u_tl_parent:new n.bK(y),u_scale_parent:new n.bM(y),u_fade_t:new n.bM(y),u_opacity:new n.bM(y),u_image0:new n.bN(y),u_image1:new n.bN(y),u_brightness_low:new n.bM(y),u_brightness_high:new n.bM(y),u_saturation_factor:new n.bM(y),u_contrast_factor:new n.bM(y),u_spin_weights:new n.bL(y),u_perspective_transform:new n.bK(y),u_raster_elevation:new n.bM(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_cutoff_params:new n.cb(y),u_colorization_mix:new n.cb(y),u_colorization_offset:new n.bM(y),u_color_ramp:new n.bN(y),u_texture_offset:new n.bK(y),u_texture_res:new n.bK(y),u_emissive_strength:new n.bM(y)}),rasterParticle:y=>({u_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_grid_matrix:new n.cB(y),u_tl_parent:new n.bK(y),u_scale_parent:new n.bM(y),u_fade_t:new n.bM(y),u_opacity:new n.bM(y),u_image0:new n.bN(y),u_image1:new n.bN(y),u_raster_elevation:new n.bM(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_cutoff_params:new n.cb(y)}),rasterParticleTexture:y=>({u_texture:new n.bN(y),u_opacity:new n.bM(y)}),rasterParticleDraw:y=>({u_particle_texture:new n.bN(y),u_particle_texture_side_len:new n.bM(y),u_tile_offset:new n.bK(y),u_velocity:new n.bN(y),u_color_ramp:new n.bN(y),u_velocity_res:new n.bK(y),u_max_speed:new n.bM(y),u_uv_offset:new n.bK(y),u_data_scale:new n.bK(y),u_data_offset:new n.bM(y),u_particle_pos_scale:new n.bM(y),u_particle_pos_offset:new n.bK(y)}),rasterParticleUpdate:y=>({u_particle_texture:new n.bN(y),u_particle_texture_side_len:new n.bM(y),u_velocity:new n.bN(y),u_velocity_res:new n.bK(y),u_max_speed:new n.bM(y),u_speed_factor:new n.bM(y),u_reset_rate:new n.bM(y),u_rand_seed:new n.bM(y),u_uv_offset:new n.bK(y),u_data_scale:new n.bK(y),u_data_offset:new n.bM(y),u_particle_pos_scale:new n.bM(y),u_particle_pos_offset:new n.bK(y)}),symbol:y=>({u_is_size_zoom_constant:new n.bN(y),u_is_size_feature_constant:new n.bN(y),u_size_t:new n.bM(y),u_size:new n.bM(y),u_camera_to_center_distance:new n.bM(y),u_rotate_symbol:new n.bN(y),u_aspect_ratio:new n.bM(y),u_fade_change:new n.bM(y),u_matrix:new n.bJ(y),u_label_plane_matrix:new n.bJ(y),u_coord_matrix:new n.bJ(y),u_is_text:new n.bN(y),u_elevation_from_sea:new n.bN(y),u_pitch_with_map:new n.bN(y),u_texsize:new n.bK(y),u_texsize_icon:new n.bK(y),u_texture:new n.bN(y),u_texture_icon:new n.bN(y),u_gamma_scale:new n.bM(y),u_device_pixel_ratio:new n.bM(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_camera_forward:new n.bL(y),u_tile_matrix:new n.bJ(y),u_up_vector:new n.bL(y),u_ecef_origin:new n.bL(y),u_is_halo:new n.bN(y),u_icon_transition:new n.bM(y),u_color_adj_mat:new n.bJ(y),u_scale_factor:new n.bM(y)}),background:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_opacity:new n.bM(y),u_color:new n.cA(y)}),backgroundPattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_opacity:new n.bM(y),u_image:new n.bN(y),u_pattern_tl:new n.bK(y),u_pattern_br:new n.bK(y),u_texsize:new n.bK(y),u_pattern_size:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_pattern_units_to_pixels:new n.bK(y)}),terrainRaster:y=>({u_matrix:new n.bJ(y),u_image0:new n.bN(y),u_skirt_height:new n.bM(y),u_ground_shadow_factor:new n.bL(y)}),skybox:y=>({u_matrix:new n.bJ(y),u_sun_direction:new n.bL(y),u_cubemap:new n.bN(y),u_opacity:new n.bM(y),u_temporal_offset:new n.bM(y)}),skyboxGradient:y=>({u_matrix:new n.bJ(y),u_color_ramp:new n.bN(y),u_center_direction:new n.bL(y),u_radius:new n.bM(y),u_opacity:new n.bM(y),u_temporal_offset:new n.bM(y)}),skyboxCapture:y=>({u_matrix_3f:new n.cB(y),u_sun_direction:new n.bL(y),u_sun_intensity:new n.bM(y),u_color_tint_r:new n.cb(y),u_color_tint_m:new n.cb(y),u_luminance:new n.bM(y)}),globeRaster:y=>({u_proj_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_image0:new n.bN(y),u_grid_matrix:new n.cB(y),u_skirt_height:new n.bM(y),u_far_z_cutoff:new n.bM(y),u_frustum_tl:new n.bL(y),u_frustum_tr:new n.bL(y),u_frustum_br:new n.bL(y),u_frustum_bl:new n.bL(y),u_globe_pos:new n.bL(y),u_globe_radius:new n.bM(y),u_viewport:new n.bK(y)}),globeAtmosphere:y=>({u_frustum_tl:new n.bL(y),u_frustum_tr:new n.bL(y),u_frustum_br:new n.bL(y),u_frustum_bl:new n.bL(y),u_horizon:new n.bM(y),u_transition:new n.bM(y),u_fadeout_range:new n.bM(y),u_color:new n.cb(y),u_high_color:new n.cb(y),u_space_color:new n.cb(y),u_temporal_offset:new n.bM(y),u_horizon_angle:new n.bM(y)}),model:y=>({u_matrix:new n.bJ(y),u_lighting_matrix:new n.bJ(y),u_normal_matrix:new n.bJ(y),u_node_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_camera_pos:new n.bL(y),u_opacity:new n.bM(y),u_baseColorFactor:new n.cb(y),u_emissiveFactor:new n.cb(y),u_metallicFactor:new n.bM(y),u_roughnessFactor:new n.bM(y),u_baseTextureIsAlpha:new n.bN(y),u_alphaMask:new n.bN(y),u_alphaCutoff:new n.bM(y),u_baseColorTexture:new n.bN(y),u_metallicRoughnessTexture:new n.bN(y),u_normalTexture:new n.bN(y),u_occlusionTexture:new n.bN(y),u_emissionTexture:new n.bN(y),u_lutTexture:new n.bN(y),u_color_mix:new n.cb(y),u_aoIntensity:new n.bM(y),u_emissive_strength:new n.bM(y),u_occlusionTextureTransform:new n.cb(y)}),modelDepth:y=>({u_matrix:new n.bJ(y),u_instance:new n.bJ(y),u_node_matrix:new n.bJ(y)}),groundShadow:y=>({u_matrix:new n.bJ(y),u_ground_shadow_factor:new n.bL(y)}),stars:y=>({u_matrix:new n.bJ(y),u_up:new n.bL(y),u_right:new n.bL(y),u_intensity_multiplier:new n.bM(y)}),snowParticle:y=>({u_modelview:new n.bJ(y),u_projection:new n.bJ(y),u_time:new n.bM(y),u_cam_pos:new n.bL(y),u_velocityConeAperture:new n.bM(y),u_velocity:new n.bM(y),u_horizontalOscillationRadius:new n.bM(y),u_horizontalOscillationRate:new n.bM(y),u_boxSize:new n.bM(y),u_billboardSize:new n.bM(y),u_simpleShapeParameters:new n.bK(y),u_screenSize:new n.bK(y),u_thinningCenterPos:new n.bK(y),u_thinningShape:new n.bL(y),u_thinningAffectedRatio:new n.bM(y),u_thinningParticleOffset:new n.bM(y),u_particleColor:new n.cb(y),u_direction:new n.bL(y)}),rainParticle:y=>({u_modelview:new n.bJ(y),u_projection:new n.bJ(y),u_time:new n.bM(y),u_cam_pos:new n.bL(y),u_texScreen:new n.bN(y),u_velocityConeAperture:new n.bM(y),u_velocity:new n.bM(y),u_boxSize:new n.bM(y),u_rainDropletSize:new n.bK(y),u_distortionStrength:new n.bM(y),u_rainDirection:new n.bL(y),u_color:new n.cb(y),u_screenSize:new n.bK(y),u_thinningCenterPos:new n.bK(y),u_thinningShape:new n.bL(y),u_thinningAffectedRatio:new n.bM(y),u_thinningParticleOffset:new n.bM(y),u_shapeDirectionalPower:new n.bM(y),u_shapeNormalPower:new n.bM(y),u_mode:new n.bM(y)}),vignette:y=>({u_vignetteShape:new n.bL(y),u_vignetteColor:new n.cb(y)}),occlusion:y=>({u_matrix:new n.bJ(y),u_anchorPos:new n.bL(y),u_screenSizePx:new n.bK(y),u_occluderSizePx:new n.bK(y),u_color:new n.cb(y)})};class Yn{constructor(o,d,A,T){this.id=Yn.uniqueIdxCounter,Yn.uniqueIdxCounter++,this.context=o;const S=o.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||T||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=Yn.uniqueIdxCounter,Yn.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Yn.uniqueIdxCounter=0;const ui={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class as{constructor(o,d,A,T,S,E){this.length=d.length,this.attributes=A,this.itemSize=d.bytesPerElement,this.dynamicDraw=T,this.instanceCount=E,this.context=o;const F=o.gl;this.buffer=F.createBuffer(),o.bindVertexBuffer.set(this.buffer),F.bufferData(F.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?F.DYNAMIC_DRAW:F.STATIC_DRAW),this.dynamicDraw||S||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,d){for(let A=0;A<this.attributes.length;A++){const T=d.attributes[this.attributes[A].name];T!==void 0&&o.enableVertexAttribArray(T)}}setVertexAttribPointers(o,d,A){for(let T=0;T<this.attributes.length;T++){const S=this.attributes[T],E=d.attributes[S.name];E!==void 0&&o.vertexAttribPointer(E,S.components,o[ui[S.type]],!1,this.itemSize,S.offset+this.itemSize*(A||0))}}setVertexAttribDivisor(o,d,A){for(let T=0;T<this.attributes.length;T++){const S=d.attributes[this.attributes[T].name];S!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(S,A)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Hn{constructor(o,d,A,T,S){this.context=o,this.width=d,this.height=A;const E=this.framebuffer=o.gl.createFramebuffer();T&&(this.colorAttachment=new ul(o,E)),S&&(this.depthAttachmentType=S,this.depthAttachment=S==="renderbuffer"?new Jh(o,E):new Gd(o,E))}destroy(){const o=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&o.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&o.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&o.deleteTexture(d)}o.deleteFramebuffer(this.framebuffer)}}class xn{constructor(o,d){this.gl=o,this.clearColor=new Hh(this),this.clearDepth=new ol(this),this.clearStencil=new _l(this),this.colorMask=new Yc(this),this.depthMask=new Nu(this),this.stencilMask=new Ju(this),this.stencilFunc=new Sc(this),this.stencilOp=new rm(this),this.stencilTest=new $h(this),this.depthRange=new Kh(this),this.depthTest=new ll(this),this.depthFunc=new ts(this),this.blend=new bi(this),this.blendFunc=new uu(this),this.blendColor=new Ou(this),this.blendEquation=new up(this),this.cullFace=new bc(this),this.cullFaceSide=new Nf(this),this.frontFace=new Bd(this),this.program=new Wh(this),this.activeTexture=new Yh(this),this.viewport=new jd(this),this.bindFramebuffer=new Of(this),this.bindRenderbuffer=new ag(this),this.bindTexture=new Rh(this),this.bindVertexBuffer=new $g(this),this.bindElementBuffer=new xc(this),this.bindVertexArrayOES=new Qu(this),this.pixelStoreUnpack=new Vu(this),this.pixelStoreUnpackPremultiplyAlpha=new Kg(this),this.pixelStoreUnpackFlipY=new Xh(this),this.options=d?Object.assign({},d):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,d,A){return new Yn(this,o,d,A)}createVertexBuffer(o,d,A,T,S){return new as(this,o,d,A,T,S)}createRenderbuffer(o,d,A){const T=this.gl,S=T.createRenderbuffer();return this.bindRenderbuffer.set(S),T.renderbufferStorage(T.RENDERBUFFER,o,d,A),this.bindRenderbuffer.set(null),S}createFramebuffer(o,d,A,T){return new Hn(this,o,d,A,T)}clear({color:o,depth:d,stencil:A,colorMask:T}){const S=this.gl;let E=0;o&&(E|=S.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(T||[!0,!0,!0,!0])),d!==void 0&&(E|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),A!==void 0&&(E|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),S.clear(E)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){n.bn(o.blendFunction,Dr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let vs;function Wi(y,o,d,A,T,S,E){const F=y.context,q=F.gl,K=y.transform,Y=y.getOrCreateProgram("collisionBox"),ae=[];let re=0,me=0;for(let at=0;at<A.length;at++){const pt=A[at],st=o.getTile(pt),ot=st.getBucket(d);if(!ot)continue;const lt=Zh(pt,ot,K);let vt=lt;T[0]===0&&T[1]===0||(vt=y.translatePosMatrix(lt,st,T,S));const Tt=E?ot.textCollisionBox:ot.iconCollisionBox,Qt=ot.collisionCircleArray;if(Qt.length>0){const Ut=n.ad.mat4.create(),ia=vt;n.ad.mat4.mul(Ut,ot.placementInvProjMatrix,K.glCoordMatrix),n.ad.mat4.mul(Ut,Ut,ot.placementViewportMatrix),ae.push({circleArray:Qt,circleOffset:me,transform:ia,invTransform:Ut,projection:ot.getProjection()}),re+=Qt.length/4,me=re}Tt&&(y.terrain&&y.terrain.setupElevationDraw(st,Y),Y.draw(y,q.LINES,cr.disabled,Nr.disabled,y.colorModeForRenderPass(),xr.disabled,ht(vt,K,st,ot.getProjection()),d.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,K.zoom,null,[Tt.collisionVertexBuffer,Tt.collisionVertexBufferExt]))}if(!E||!ae.length)return;const be=y.getOrCreateProgram("collisionCircle"),Te=new n.cW;Te.resize(4*re),Te._trim();let ze=0;for(const at of ae)for(let pt=0;pt<at.circleArray.length/4;pt++){const st=4*pt,ot=at.circleArray[st+0],lt=at.circleArray[st+1],vt=at.circleArray[st+2],Tt=at.circleArray[st+3];Te.emplace(ze++,ot,lt,vt,Tt,0),Te.emplace(ze++,ot,lt,vt,Tt,1),Te.emplace(ze++,ot,lt,vt,Tt,2),Te.emplace(ze++,ot,lt,vt,Tt,3)}(!vs||vs.length<2*re)&&(vs=function(at){const pt=2*at,st=new n.aV;st.resize(pt),st._trim();for(let ot=0;ot<pt;ot++){const lt=6*ot;st.uint16[lt+0]=4*ot+0,st.uint16[lt+1]=4*ot+1,st.uint16[lt+2]=4*ot+2,st.uint16[lt+3]=4*ot+2,st.uint16[lt+4]=4*ot+3,st.uint16[lt+5]=4*ot+0}return st}(re));const Fe=F.createIndexBuffer(vs,!0),Ke=F.createVertexBuffer(Te,n.cX.members,!0);for(const at of ae){const pt={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(nt=K).getCameraToCenterDistance(at.projection),u_viewport_size:[nt.width,nt.height]};be.draw(y,q.TRIANGLES,cr.disabled,Nr.disabled,y.colorModeForRenderPass(),xr.disabled,pt,d.id,Ke,Fe,n.b8.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,K.zoom)}var nt;Ke.destroy(),Fe.destroy()}const $n=n.ad.mat4.create();function wo(y){const o=y._camera.getWorldToCamera(y.worldSize,1),d=n.ad.mat4.multiply([],o,y.globeMatrix);n.ad.mat4.invert(d,d);const A=[0,0,0],T=[0,1,0,0];return n.ad.vec4.transformMat4(T,T,d),A[0]=T[0],A[1]=T[1],A[2]=T[2],n.ad.vec3.normalize(A,A),A}function Pi({width:y,height:o,anchor:d,textOffset:A,textScale:T},S){const{horizontalAlign:E,verticalAlign:F}=n.bD(d),q=-(E-.5)*y,K=-(F-.5)*o,Y=n.bC(d,A);return new n.P((q/T+Y[0])*S,(K/T+Y[1])*S)}function fs(y,o,d,A,T,S,E,F,q,K,Y){const ae=y.text.placedSymbolArray,re=y.text.dynamicLayoutVertexArray,me=y.icon.dynamicLayoutVertexArray,be={},Te=y.getProjection(),ze=$o(F,Te,S),Fe=S.elevation,Ke=Te.upVectorScale(F.canonical,S.center.lat,S.worldSize).metersToTile;re.clear();for(let nt=0;nt<ae.length;nt++){const at=ae.get(nt),{tileAnchorX:pt,tileAnchorY:st,numGlyphs:ot}=at,lt=at.hidden||!at.crossTileID||y.allowVerticalPlacement&&!at.placedOrientation?null:A[at.crossTileID];if(lt){let vt=0,Tt=0,Qt=0;if(Fe){const ta=Fe?Fe.getAtTileOffset(F,pt,st):0,[ha,Xt,ga]=Te.upVector(F.canonical,pt,st);vt=ta*ha*Ke,Tt=ta*Xt*Ke,Qt=ta*ga*Ke}let[Ut,ia,da,xa]=yo(at.projectedAnchorX+vt,at.projectedAnchorY+Tt,at.projectedAnchorZ+Qt,d?ze:E);const kt=Vd(S.getCameraToCenterDistance(Te),xa);let la=T.evaluateSizeForFeature(y.textSizeData,K,at)*kt/n.bw;d&&(la*=y.tilePixelRatio/q);const zt=Pi(lt,la);d?({x:Ut,y:ia,z:da}=Te.projectTilePoint(pt+zt.x,st+zt.y,F.canonical),[Ut,ia,da]=yo(Ut+vt,ia+Tt,da+Qt,E)):(o&&zt._rotate(-S.angle),Ut+=zt.x,ia+=zt.y,da=0);const ua=y.allowVerticalPlacement&&at.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let ta=0;ta<ot;ta++)n.bt(re,Ut,ia,da,ua);Y&&at.associatedIconIndex>=0&&(be[at.associatedIconIndex]={x:Ut,y:ia,z:da,angle:ua})}else il(ot,re)}if(Y){me.clear();const nt=y.icon.placedSymbolArray;for(let at=0;at<nt.length;at++){const pt=nt.get(at),{numGlyphs:st}=pt,ot=be[at];if(pt.hidden||!ot)il(st,me);else{const{x:lt,y:vt,z:Tt,angle:Qt}=ot;for(let Ut=0;Ut<st;Ut++)n.bt(me,lt,vt,Tt,Qt)}}y.icon.dynamicLayoutVertexBuffer.updateData(me)}y.text.dynamicLayoutVertexBuffer.updateData(re)}function Pn(y,o,d,A,T,S,E={}){const F=d.paint.get("icon-translate"),q=d.paint.get("text-translate"),K=d.paint.get("icon-translate-anchor"),Y=d.paint.get("text-translate-anchor"),ae=d.layout.get("icon-rotation-alignment"),re=d.layout.get("text-rotation-alignment"),me=d.layout.get("icon-pitch-alignment"),be=d.layout.get("text-pitch-alignment"),Te=d.layout.get("icon-keep-upright"),ze=d.layout.get("text-keep-upright"),Fe=d.paint.get("icon-color-saturation"),Ke=d.paint.get("icon-color-contrast"),nt=d.paint.get("icon-color-brightness-min"),at=d.paint.get("icon-color-brightness-max"),pt=d.layout.get("symbol-elevation-reference")==="sea",st=y.context,ot=st.gl,lt=y.transform,vt=ae==="map",Tt=re==="map",Qt=me==="map",Ut=be==="map",ia=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let da=!1;const xa=y.depthModeForSublayer(0,cr.ReadOnly),kt=[n.av(lt.center.lng),n.aC(lt.center.lat)],la=d.layout.get("text-variable-anchor"),zt=lt.projection.name==="globe",ua=[],ta=[0,-1,0];for(const ha of A){const Xt=o.getTile(ha),ga=Xt.getBucket(d);if(!ga||ga.projection.name==="mercator"&&zt||ga.fullyClipped)continue;const ka=ga.projection.name==="globe",Ua=ka?n.ag(lt.zoom):0,Va=$o(ha,ga.getProjection(),lt),dr=lt.calculatePixelsToTileUnitsMatrix(Xt),qr=la&&ga.hasTextData(),Rr=ga.hasIconTextFit()&&qr&&ga.hasIconData(),kr=ga.getProjection().createInversionMatrix(lt,ha.canonical),zr=Xn=>{lt.depthOcclusionForSymbolsAndCircles&&(d.hasInitialOcclusionOpacityProperties||y.terrain)&&(Xn.push("DEPTH_D24"),Xn.push("DEPTH_OCCLUSION"))},Mr=()=>{const Xn=vt&&d.layout.get("symbol-placement")!=="point",vn=[];zr(vn);const kn=Xn||Rr,ns=d.paint.get("icon-image-cross-fade").constantOr(0);y.terrainRenderModeElevated()&&Qt&&vn.push("PITCH_WITH_MAP_TERRAIN"),ka&&(vn.push("PROJECTION_GLOBE_VIEW"),kn&&vn.push("PROJECTED_POS_ON_VIEWPORT")),ns>0&&vn.push("ICON_TRANSITION"),ga.icon.zOffsetVertexBuffer&&vn.push("Z_OFFSET"),Fe===0&&Ke===0&&nt===0&&at===1||vn.push("COLOR_ADJUSTMENT"),ga.sdfIcons&&vn.push("RENDER_SDF");const _s=ga.icon.programConfigurations.get(d.id),co=y.getOrCreateProgram("symbol",{config:_s,defines:vn}),ao=Xt.imageAtlasTexture?Xt.imageAtlasTexture.size:[0,0],Ro=ga.iconSizeData,Vn=n.bp(Ro,lt.zoom),di=Qt||lt.pitch!==0,Bn=Os(Va,Xt.tileID.canonical,Qt,vt,lt,ga.getProjection(),dr),fi=Mi(Va,Xt.tileID.canonical,Qt,vt,lt,ga.getProjection(),dr),To=y.translatePosMatrix(fi,Xt,F,K,!0),Ni=y.translatePosMatrix(Va,Xt,F,K),ps=kn?$n:Bn,zc=vt&&!Qt&&!Xn;let Jo=ta;!zt&&!lt.mercatorFromTransition||vt||(Jo=wo(lt));const hu=ka?Jo:ta,Gl=d.getColorAdjustmentMatrix(Fe,Ke,nt,at),sc=Wa(Ro.kind,Vn,zc,Qt,y,Ni,ps,To,pt,!1,ao,[0,0],!0,ha,Ua,kt,kr,hu,ga.getProjection(),Gl,ns),bl=Xt.imageAtlasTexture?Xt.imageAtlasTexture:null,Qd=d.layout.get("icon-size").constantOr(0)!==1||ga.iconsNeedLinear,Co=ga.sdfIcons||y.options.rotating||y.options.zooming||Qd||di?ot.LINEAR:ot.NEAREST,Mh=ga.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,Zl=y.terrain&&Qt&&Xn?n.ad.mat4.invert(n.ad.mat4.create(),Bn):$n;if(Xn&&ga.icon){const bp=lt.elevation,gm=bp?bp.getAtTileOffsetFunc(ha,lt.center.lat,lt.worldSize,ga.getProjection()):null,ay=Ki(Va,Xt.tileID.canonical,Qt,vt,lt,ga.getProjection(),dr);yc(ga,Va,y,!1,ay,fi,Qt,Te,gm,ha)}return{program:co,buffers:ga.icon,uniformValues:sc,atlasTexture:bl,atlasTextureIcon:null,atlasInterpolation:Co,atlasInterpolationIcon:null,isSDF:ga.sdfIcons,hasHalo:Mh,tile:Xt,labelPlaneMatrixInv:Zl}},Hr=()=>{const Xn=Tt&&d.layout.get("symbol-placement")!=="point",vn=[],kn=Xn||la||Rr;y.terrainRenderModeElevated()&&Ut&&vn.push("PITCH_WITH_MAP_TERRAIN"),ka&&(vn.push("PROJECTION_GLOBE_VIEW"),kn&&vn.push("PROJECTED_POS_ON_VIEWPORT")),ga.text.zOffsetVertexBuffer&&vn.push("Z_OFFSET"),ga.iconsInText&&vn.push("RENDER_TEXT_AND_SYMBOL"),vn.push("RENDER_SDF"),zr(vn);const ns=ga.text.programConfigurations.get(d.id),_s=y.getOrCreateProgram("symbol",{config:ns,defines:vn});let co,ao=[0,0],Ro=null;const Vn=ga.textSizeData;ga.iconsInText&&(ao=Xt.imageAtlasTexture?Xt.imageAtlasTexture.size:[0,0],Ro=Xt.imageAtlasTexture?Xt.imageAtlasTexture:null,co=Ut||lt.pitch!==0||y.options.rotating||y.options.zooming||Vn.kind==="composite"||Vn.kind==="camera"?ot.LINEAR:ot.NEAREST);const di=Xt.glyphAtlasTexture?Xt.glyphAtlasTexture.size:[0,0],Bn=d.layout.get("text-size-scale-range"),fi=n.ay(y.scaleFactor,Bn[0],Bn[1]),To=n.bp(Vn,lt.zoom,fi),Ni=Os(Va,Xt.tileID.canonical,Ut,Tt,lt,ga.getProjection(),dr),ps=Mi(Va,Xt.tileID.canonical,Ut,Tt,lt,ga.getProjection(),dr),zc=y.translatePosMatrix(ps,Xt,q,Y,!0),Jo=y.translatePosMatrix(Va,Xt,q,Y),hu=kn?$n:Ni,Gl=Tt&&!Ut&&!Xn;let sc=ta;!zt&&!lt.mercatorFromTransition||Tt||(sc=wo(lt));const bl=Wa(Vn.kind,To,Gl,Ut,y,Jo,hu,zc,pt,!0,di,ao,!0,ha,Ua,kt,kr,ka?sc:ta,ga.getProjection(),null,null,fi),Qd=Xt.glyphAtlasTexture?Xt.glyphAtlasTexture:null,Co=ot.LINEAR,Mh=d.paint.get("text-halo-width").constantOr(1)!==0,Zl=y.terrain&&Ut&&Xn?n.ad.mat4.invert(n.ad.mat4.create(),Ni):$n;if(Xn&&ga.text){const bp=lt.elevation,gm=bp?bp.getAtTileOffsetFunc(ha,lt.center.lat,lt.worldSize,ga.getProjection()):null,ay=Ki(Va,Xt.tileID.canonical,Ut,Tt,lt,ga.getProjection(),dr);yc(ga,Va,y,!0,ay,ps,Ut,ze,gm,ha)}return{program:_s,buffers:ga.text,uniformValues:bl,atlasTexture:Qd,atlasTextureIcon:Ro,atlasInterpolation:Co,atlasInterpolationIcon:co,isSDF:!0,hasHalo:Mh,tile:Xt,labelPlaneMatrixInv:Zl}},jr=ga.icon.segments.get().length,yr=ga.text.segments.get().length,pn=jr&&!E.onlyText?Mr():null,Or=yr&&!E.onlyIcons?Hr():null,rr=d.paint.get("icon-opacity").constantOr(1),mn=d.paint.get("text-opacity").constantOr(1);if(ia&&ga.canOverlap){da=!0;const Xn=rr&&!E.onlyText?ga.icon.segments.get():[],vn=mn&&!E.onlyIcons?ga.text.segments.get():[];for(const kn of Xn)ua.push({segments:new n.b8([kn]),sortKey:kn.sortKey,state:pn});for(const kn of vn)ua.push({segments:new n.b8([kn]),sortKey:kn.sortKey,state:Or})}else E.onlyText||ua.push({segments:rr?ga.icon.segments:new n.b8([]),sortKey:0,state:pn}),E.onlyIcons||ua.push({segments:mn?ga.text.segments:new n.b8([]),sortKey:0,state:Or})}da&&ua.sort((ha,Xt)=>ha.sortKey-Xt.sortKey);for(const ha of ua){const Xt=ha.state;if(Xt)if(y.terrain?y.terrain.setupElevationDraw(Xt.tile,Xt.program,{useDepthForOcclusion:lt.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Xt.labelPlaneMatrixInv}):y.setupDepthForOcclusion(lt.depthOcclusionForSymbolsAndCircles,Xt.program),st.activeTexture.set(ot.TEXTURE0),Xt.atlasTexture&&Xt.atlasTexture.bind(Xt.atlasInterpolation,ot.CLAMP_TO_EDGE,!0),Xt.atlasTextureIcon&&(st.activeTexture.set(ot.TEXTURE1),Xt.atlasTextureIcon&&Xt.atlasTextureIcon.bind(Xt.atlasInterpolationIcon,ot.CLAMP_TO_EDGE,!0)),y.uploadCommonLightUniforms(y.context,Xt.program),Xt.hasHalo){const ga=Xt.uniformValues;ga.u_is_halo=1,Hi(Xt.buffers,ha.segments,d,y,Xt.program,xa,T,S,ga,2),ga.u_is_halo=0}else{if(Xt.isSDF){const ga=Xt.uniformValues;Xt.hasHalo&&(ga.u_is_halo=1,Hi(Xt.buffers,ha.segments,d,y,Xt.program,xa,T,S,ga,1)),ga.u_is_halo=0}Hi(Xt.buffers,ha.segments,d,y,Xt.program,xa,T,S,Xt.uniformValues,1)}}}function Hi(y,o,d,A,T,S,E,F,q,K){const Y=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.iconTransitioningVertexBuffer,y.globeExtVertexBuffer,y.zOffsetVertexBuffer];T.draw(A,A.context.gl.TRIANGLES,S,E,F,xr.disabled,q,d.id,y.layoutVertexBuffer,y.indexBuffer,o,d.paint,A.transform.zoom,y.programConfigurations.get(d.id),Y,K)}function Qs(y,o){const d=1<<y.canonical.z,A=(o.x*d-y.canonical.x-y.wrap*d)*n.ai,T=(o.y*d-y.canonical.y)*n.ai,S=n.d5(o.z,o.y);return n.ad.vec3.fromValues(A,T,S)}function Oo(y,o,d,A,T){if(!d.layout||d.layout.get("fill-elevation-reference")==="none")return;const S=y.context.gl,E=new cr(y.context.gl.LEQUAL,cr.ReadWrite,y.depthRangeFor3D),F=new cr(y.context.gl.GREATER,cr.ReadWrite,y.depthRangeFor3D),q=function(me){const be=n.c4(me.pitch);let Te=.01;return me.isOrthographic&&(Te=n.ah(1e-4,Te,n.c9(be>=Da?1:be/Da))),2*Te}(y.transform),K=y.transform.getFreeCameraOptions().position,Y="elevatedStructuresDepthReconstruct",ae=y.getOrCreateProgram(Y,{defines:["DEPTH_RECONSTRUCTION"]}),re=y.getOrCreateProgram(Y);for(const me of A){const be=o.getTile(me),Te=be.getBucket(d);if(!Te)continue;const ze=Te.elevatedStructures;if(!ze)continue;const Fe=Te.elevationBufferData.heightRange,Ke=Qs(me.toUnwrapped(),K),nt=y.translatePosMatrix(me.projMatrix,be,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));let at,pt,st,ot;if(T==="initialize"){if(!Fe||Fe.min>=1||ze.depthSegments.segments[0].primitiveLength===0)continue;at=it(nt,Ke,q,1,0),pt=E,st=ze.depthSegments,ot=ae}else if(T==="reset"){if(!Fe||Fe.min>=0||ze.maskSegments.segments[0].primitiveLength===0)continue;at=it(nt,Ke,0,0,1),pt=F,st=ze.maskSegments,ot=ae}else if(T==="geometry"){if(ze.depthSegments.segments[0].primitiveLength===0)continue;at=it(nt,Ke,q,1,0),pt=E,st=ze.depthSegments,ot=re}ot.draw(y,S.TRIANGLES,pt,Nr.disabled,Dr.disabled,xr.disabled,at,d.id,ze.vertexBuffer,ze.indexBuffer,st,d.paint,y.transform.zoom)}}function dl(y,o,d){const{painter:A,sourceCache:T,layer:S,coords:E,colorMode:F,elevationType:q,terrainEnabled:K,pass:Y}=y,ae=A.context.gl,re=S.paint.get("fill-pattern");let me=q;q!=="road"||o&&!K||(me="none");const be=me==="road",Te=new cr(A.context.gl.LEQUAL,cr.ReadWrite,A.depthRangeFor3D),ze=re&&re.constantOr(1),Fe=(Ke,nt)=>{let at,pt,st,ot,lt;nt?(pt=ze&&!S.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",at=ae.LINES):(pt=ze?"fillPattern":"fill",at=ae.TRIANGLES);for(const vt of E){const Tt=T.getTile(vt);if(ze&&!Tt.patternsLoaded())continue;const Qt=Tt.getBucket(S);if(!Qt)continue;const Ut=o?Qt.elevationBufferData:Qt.bufferData;if(Ut.isEmpty())continue;A.prepareDrawTile();const ia=Ut.programConfigurations.get(S.id),da=A.isTileAffectedByFog(vt),xa=[],kt=[];be&&(xa.push("ELEVATED_ROADS"),kt.push(Ut.elevatedLayoutVertexBuffer));const la=A.getOrCreateProgram(pt,{config:ia,overrideFog:da,defines:xa});ze&&(A.context.activeTexture.set(ae.TEXTURE0),Tt.imageAtlasTexture&&Tt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),ia.updatePaintBuffers());const zt=re.constantOr(null);if(zt&&Tt.imageAtlas){const ha=Tt.imageAtlas,Xt=n.d0.from(zt).getPrimary().scaleSelf(n.q.devicePixelRatio).toString(),ga=ha.patternPositions.get(Xt);ga&&ia.setConstantPatternPositions(ga)}const ua=A.translatePosMatrix(vt.projMatrix,Tt,S.paint.get("fill-translate"),S.paint.get("fill-translate-anchor")),ta=S.paint.get("fill-emissive-strength");if(nt){ot=Ut.lineIndexBuffer,lt=Ut.lineSegments;const ha=A.terrain&&A.terrain.renderingToTexture?A.terrain.drapeBufferSize:[ae.drawingBufferWidth,ae.drawingBufferHeight];st=pt==="fillOutlinePattern"&&ze?rt(ua,ta,A,Tt,ha):We(ua,ta,ha)}else ot=Ut.indexBuffer,lt=Ut.triangleSegments,st=ze?Me(ua,ta,A,Tt):ye(ua,ta);A.uploadCommonUniforms(A.context,la,vt.toUnwrapped()),la.draw(A,at,me!=="none"?Te:Ke,d||A.stencilModeForClipping(vt),F,xr.disabled,st,S.id,Ut.layoutVertexBuffer,ot,lt,S.paint,A.transform.zoom,ia,kt)}};A.renderPass===Y&&Fe(A.depthModeForSublayer(1,A.renderPass==="opaque"?cr.ReadWrite:cr.ReadOnly),!1),me==="none"&&A.renderPass==="translucent"&&S.paint.get("fill-antialias")&&Fe(A.depthModeForSublayer(S.getPaintProperty("fill-outline-color")?2:0,cr.ReadOnly),!0)}function kl(y,o,d,A,T,S,E,F){d.resetLayerRenderingStats(y);const q=y.context,K=q.gl,Y=y.transform,ae=d.paint.get("fill-extrusion-pattern"),re=ae.constantOr(1),me=d.paint.get("fill-extrusion-opacity"),be=y.style.enable3dLights(),Te=d.paint.get(be&&!re?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ze=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Te],Fe=d.layout.get("fill-extrusion-edge-radius"),Ke=Fe>0&&!d.paint.get("fill-extrusion-rounded-roof"),nt=Ke?0:Fe,at=Y.projection.name==="globe"?n.d6():0,pt=Y.projection.name==="globe",st=pt?n.ag(Y.zoom):0,ot=[n.av(Y.center.lng),n.aC(Y.center.lat)],lt=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",vt=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(lt?null:d.lut).toArray01().slice(0,3),Tt=d.paint.get("fill-extrusion-flood-light-intensity"),Qt=d.paint.get("fill-extrusion-vertical-scale"),Ut=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,ia=d.paint.get("fill-extrusion-height-alignment"),da=d.paint.get("fill-extrusion-base-alignment"),xa=Js(y,d.paint.get("fill-extrusion-cutoff-fade-range")),kt=[];let la;pt&&kt.push("PROJECTION_GLOBE_VIEW"),ze[0]>0&&kt.push("FAUX_AO"),Ke&&kt.push("ZERO_ROOF_RADIUS"),F&&kt.push("HAS_CENTROID"),Tt>0&&kt.push("FLOOD_LIGHT"),xa.shouldRenderCutoff&&kt.push("RENDER_CUTOFF"),Ut&&kt.push("RENDER_WALL_MODE");const zt=y.renderPass==="shadow",ua=y.shadowRenderer,ta=zt&&!!ua;y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!0);let ha=[0,0,0];if(ua){const ka=y.style.directionalLight,Ua=y.style.ambientLight;ka&&Ua&&(ha=Gc(y.style,ka,Ua)),zt||(kt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ua.useNormalOffset&&kt.push("NORMAL_OFFSET")),la=kt.concat(["SHADOWS_SINGLE_CASCADE"])}const Xt=ta?"fillExtrusionDepth":re?"fillExtrusionPattern":"fillExtrusion",ga=d.getLayerRenderingStats();for(const ka of A){const Ua=o.getTile(ka),Va=Ua.getBucket(d);if(!Va||Va.projection.name!==Y.projection.name)continue;let dr=!1;ua&&(dr=ua.getMaxCascadeForTile(ka.toUnwrapped())===0);const qr=y.isTileAffectedByFog(ka),Rr=Va.programConfigurations.get(d.id),kr=y.getOrCreateProgram(Xt,{config:Rr,defines:dr?la:kt,overrideFog:qr});if(y.terrain&&y.terrain.setupElevationDraw(Ua,kr,{useMeterToDem:!0}),!Va.centroidVertexBuffer){const Or=kr.attributes.a_centroid_pos;Or!==void 0&&K.vertexAttrib2f(Or,0,0)}!zt&&ua&&ua.setupShadows(Ua.tileID.toUnwrapped(),kr,"vector-tile",Ua.tileID.overscaledZ),re&&(y.context.activeTexture.set(K.TEXTURE0),Ua.imageAtlasTexture&&Ua.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Rr.updatePaintBuffers());const zr=ae.constantOr(null);if(zr&&Ua.imageAtlas){const Or=Ua.imageAtlas,rr=n.d0.from(zr).getPrimary().scaleSelf(n.q.devicePixelRatio),mn=Or.patternPositions.get(rr.toString());mn&&Rr.setConstantPatternPositions(mn)}const Mr=d.paint.get("fill-extrusion-vertical-gradient"),Hr=1/Va.tileToMeter;let jr;if(zt&&ua){if(rs(Ua.tileID,Va,y))continue;const Or=ua.calculateShadowPassMatrixFromTile(Ua.tileID.toUnwrapped());jr=G(Or,nt,Hr,Qt,ia,da)}else{const Or=y.translatePosMatrix(ka.expandedProjMatrix,Ua,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),rr=Y.projection.createInversionMatrix(Y,ka.canonical);jr=re?Q(Or,y,Mr,me,ze,nt,Hr,ka,Ua,at,ia,da,st,ot,rr,vt,Qt):Qh(Or,y,Mr,me,ze,nt,Hr,ka,at,ia,da,st,ot,rr,vt,Qt,Tt,ha)}y.uploadCommonUniforms(q,kr,ka.toUnwrapped(),null,xa);let yr=Va.segments;if(Y.projection.name==="mercator"&&!zt&&(yr=Va.getVisibleSegments(Ua.tileID,y.terrain,y.transform.getFrustum(0)),!yr.get().length))continue;if(ga)if(zt)for(const Or of yr.get())ga.numRenderedVerticesInShadowPass+=Or.primitiveLength;else for(const Or of yr.get())ga.numRenderedVerticesInTransparentPass+=Or.primitiveLength;const pn=[];(y.terrain||F)&&pn.push(Va.centroidVertexBuffer),pt&&pn.push(Va.layoutVertexExtBuffer),Ut&&pn.push(Va.wallVertexBuffer),kr.draw(y,q.gl.TRIANGLES,T,S,E,xr.backCCW,jr,d.id,Va.layoutVertexBuffer,Va.indexBuffer,yr,d.paint,y.transform.zoom,Rr,pn)}y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!1)}function Is(y,o,d,A,T,S,E,F,q,K,Y,ae,re,me,be,Te,ze,Fe,Ke){const nt=y.context,at=nt.gl,pt=y.transform,st=y.transform.zoom,ot=[],lt=Js(y,d.paint.get("fill-extrusion-cutoff-fade-range"));K==="clear"?(ot.push("CLEAR_SUBPASS"),Ke&&(ot.push("CLEAR_FROM_TEXTURE"),nt.activeTexture.set(at.TEXTURE0),Ke.bind(at.LINEAR,at.CLAMP_TO_EDGE))):K==="sdf"&&ot.push("SDF_SUBPASS"),ze&&ot.push("HAS_CENTROID"),lt.shouldRenderCutoff&&ot.push("RENDER_CUTOFF");const vt=d.layout.get("fill-extrusion-edge-radius"),Tt=(Qt,Ut,ia,da,xa)=>{const kt=Ut.programConfigurations.get(d.id),la=y.isTileAffectedByFog(Qt),zt=y.getOrCreateProgram("fillExtrusionGroundEffect",{config:kt,defines:ot,overrideFog:la}),ua=((ha,Xt,ga,ka,Ua,Va,dr,qr,Rr,kr,zr)=>({u_matrix:Xt,u_opacity:ga,u_ao_pass:ka?1:0,u_meter_to_tile:Ua,u_ao:Va,u_flood_light_intensity:dr,u_flood_light_color:qr,u_attenuation:Rr,u_edge_radius:kr,u_fb:0,u_fb_size:zr,u_dynamic_offset:1}))(0,da,Y,q,xa,[ae,re*xa],me,be,Te,st>=17?0:vt*xa,Ke?Ke.size[0]:0),ta=[];ze&&ta.push(Ut.hiddenByLandmarkVertexBuffer),y.uploadCommonUniforms(nt,zt,Qt.toUnwrapped(),null,lt),zt.draw(y,nt.gl.TRIANGLES,T,S,E,F,ua,d.id,Ut.vertexBuffer,Ut.indexBuffer,ia,d.paint,st,kt,ta)};for(const Qt of A){const Ut=o.getTile(Qt),ia=Ut.getBucket(d);if(!ia||ia.projection.name!==pt.projection.name||!ia.groundEffect||ia.groundEffect&&!ia.groundEffect.hasData())continue;const da=ia.groundEffect,xa=1/ia.tileToMeter;{const kt=y.translatePosMatrix(Qt.projMatrix,Ut,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),la=da.getDefaultSegment();Tt(Qt,da,la,kt,xa)}if(Fe)for(let kt=0;kt<4;kt++){const la=n.d7[kt](Qt),zt=o.getTile(la);if(!zt)continue;const ua=zt.getBucket(d);if(!ua||ua.projection.name!==pt.projection.name||!ua.groundEffect||ua.groundEffect&&!ua.groundEffect.hasData())continue;const ta=ua.groundEffect;let ha,Xt;kt===0?(ha=[-n.ai,0,0],Xt=1):kt===1?(ha=[n.ai,0,0],Xt=0):kt===2?(ha=[0,-n.ai,0],Xt=3):(ha=[0,n.ai,0],Xt=2);const ga=ta.regionSegments[Xt];if(!ga)continue;const ka=new Float32Array(16);n.ad.mat4.translate(ka,Qt.projMatrix,ha),Tt(Qt,ta,ga,y.translatePosMatrix(ka,Ut,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),xa)}}}function Ul(y,o,d,A,T,S,E){A.centroidVertexArray.length===0&&A.createCentroidsBuffer();const F=S?S.findDEMTileFor(d):null;if(!(F&&F.dem||E))return;S&&F&&F.dem&&A.selfDEMTileTimestamp!==F.dem._timestamp&&(A.borderDoneWithNeighborZ=[-1,-1,-1,-1],A.selfDEMTileTimestamp=F.dem._timestamp);const q=Fe=>new n.P(Math.ceil((Fe+n.da)*n.db),0),K=Fe=>{const Ke=o.getSource().minzoom,nt=pt=>{const st=o.getTileByID(pt);if(st&&st.hasData())return st.getBucket(T)},at=[0,-1,1];for(const pt of at){if(Fe.overscaledZ+pt<Ke)continue;const st=nt(Fe.calculateScaledKey(Fe.overscaledZ+pt));if(st)return st}},Y=[0,0,0],ae=(Fe,Ke)=>(Y[0]=Math.min(Fe.min.y,Ke.min.y),Y[1]=Math.max(Fe.max.y,Ke.max.y),Y[2]=n.ai-Ke.min.x>Fe.max.x?Ke.min.x-n.ai:Fe.max.x,Y),re=(Fe,Ke)=>(Y[0]=Math.min(Fe.min.x,Ke.min.x),Y[1]=Math.max(Fe.max.x,Ke.max.x),Y[2]=n.ai-Ke.min.y>Fe.max.y?Ke.min.y-n.ai:Fe.max.y,Y),me=[(Fe,Ke)=>ae(Fe,Ke),(Fe,Ke)=>ae(Ke,Fe),(Fe,Ke)=>re(Fe,Ke),(Fe,Ke)=>re(Ke,Fe)],be=(Fe,Ke,nt,at,pt,st,ot)=>{if(!S)return 0;const lt=[[st?nt:Fe,st?Fe:nt,0],[st?nt:Ke,st?Ke:nt,0]],vt=ot<0?n.ai+ot:ot,Tt=[st?vt:(Fe+Ke)/2,st?(Fe+Ke)/2:vt,0];return nt===0&&ot<0||nt!==0&&ot>0?S.getForTilePoints(pt,[Tt],!0,at):lt.push(Tt),S.getForTilePoints(d,lt,!0,F),Math.max(lt[0][2],lt[1][2],Tt[2])/S.exaggeration()};for(let Fe=0;Fe<4;Fe++){const Ke=A.borderFeatureIndices[Fe];if(Ke.length===0)continue;const nt=n.d7[Fe](d),at=K(nt);if(!(at&&at instanceof n.d8))continue;const pt=S?S.findDEMTileFor(nt):null;if(!(pt&&pt.dem||E)||(S&&pt&&pt.dem&&A.borderDEMTileTimestamp[Fe]!==pt.dem._timestamp&&(A.borderDoneWithNeighborZ[Fe]=-1,A.borderDEMTileTimestamp[Fe]=pt.dem._timestamp),A.borderDoneWithNeighborZ[Fe]===at.canonical.z))continue;at.centroidVertexArray.length===0&&at.createCentroidsBuffer();const st=(Fe<2?1:5)-Fe,ot=at.borderDoneWithNeighborZ[st]!==A.canonical.z,lt=at.borderFeatureIndices[st];let vt=0;if(A.canonical.z!==at.canonical.z){for(const Tt of Ke)A.showCentroid(A.featuresOnBorder[Tt]);if(ot)for(const Tt of lt)at.showCentroid(at.featuresOnBorder[Tt]);A.borderDoneWithNeighborZ[Fe]=at.canonical.z,at.borderDoneWithNeighborZ[st]=A.canonical.z}for(const Tt of Ke){const Qt=A.featuresOnBorder[Tt],Ut=A.centroidData[Qt.centroidDataIndex],ia=Qt.borders[Fe];let da;for(;vt<lt.length;){da=at.featuresOnBorder[lt[vt]];const xa=da.borders[st];if(xa[1]>ia[0]+3||xa[0]>ia[0]-3)break;at.showCentroid(da),vt++}if(da&&vt<lt.length){const xa=vt;let kt=0;for(;!(da.borders[st][0]>ia[1]-3)&&(kt++,++vt!==lt.length);)da=at.featuresOnBorder[lt[vt]];da=at.featuresOnBorder[lt[xa]];let la=!1;if(kt>=1){const ta=da.borders[st];Math.abs(ia[0]-ta[0])<3&&Math.abs(ia[1]-ta[1])<3&&(kt=1,la=!0,vt=xa+1)}else if(kt===0){A.showCentroid(Qt);continue}const zt=at.centroidData[da.centroidDataIndex];E&&la&&(((Te=Ut).flags|(ze=zt).flags)&n.d9?(Te.flags|=n.d9,ze.flags|=n.d9):(Te.flags&=~n.d9,ze.flags&=~n.d9));const ua=Qt.intersectsCount()>1||da.intersectsCount()>1;if(kt>1)vt=xa,Ut.centroidXY=zt.centroidXY=new n.P(0,0);else if(pt&&pt.dem&&!ua){const ta=me[Fe](Ut,zt),ha=Fe%2?n.ai-1:0,Xt=be(ta[0],Math.min(n.ai-1,ta[1]),ha,pt,nt,Fe<2,ta[2]);Ut.centroidXY=zt.centroidXY=q(Xt)}else ua?Ut.centroidXY=zt.centroidXY=new n.P(0,0):(Ut.centroidXY=A.encodeBorderCentroid(Qt),zt.centroidXY=at.encodeBorderCentroid(da));A.writeCentroidToBuffer(Ut),at.writeCentroidToBuffer(zt)}else A.showCentroid(Qt)}A.borderDoneWithNeighborZ[Fe]=at.canonical.z,at.borderDoneWithNeighborZ[st]=A.canonical.z}var Te,ze;(A.needsCentroidUpdate||!A.centroidVertexBuffer&&A.centroidVertexArray.length!==0)&&A.uploadCentroid(y)}const Du=[1,0,0],Pa=[0,1,0],Ga=[0,0,1];function rs(y,o,d){const A=d.transform,T=d.shadowRenderer;if(!T)return!0;const S=y.toUnwrapped(),E=A.tileSize*T._cascades[d.currentShadowCascade].scale;let F=o.maxHeight;if(A.elevation){const Te=A.elevation.getMinMaxForTile(y);Te&&(F+=Te.max)}const q=[...T.shadowDirection];q[2]=-q[2];const K=T.computeSimplifiedTileShadowVolume(S,F,E,q);if(!K)return!1;const Y=[Du,Pa,Ga,q,[q[0],0,q[2]],[0,q[1],q[2]]],ae=A.projection.name==="globe",re=A.scaleZoom(E),me=n.bR.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,re,!ae),be=T.getCurrentCascadeFrustum();return me.intersectsPrecise(K.vertices,K.planes,Y)===0||be.intersectsPrecise(K.vertices,K.planes,Y)===0}function ji(y){return[y[0]*n.dc,y[1]*n.dc,y[2]*n.dc,0]}function qt(y,o,d,A,T,S,E,F,q){const K=A.getSource(),Y=d.globeSharedBuffers;if(!Y)return;let ae,re,me;if(o&&(ae=A.getTile(o)),K instanceof n.aK?(re=K.texture,me=n.cJ(0,0,d.transform)):ae&&o&&(re=ae.texture,me=n.cJ(o.canonical.z,o.canonical.x,d.transform)),!re||!me)return;y||(me=n.ad.mat4.scale(n.ad.mat4.create(),me,[1,-1,1]));const be=d.context,Te=be.gl,ze=T.paint.get("raster-resampling")==="nearest"?Te.NEAREST:Te.LINEAR,Fe=d.colorModeForDrapableLayerRenderPass(S),Ke=E.defines;Ke.push("GLOBE_POLES");const nt=new cr(Te.LEQUAL,cr.ReadWrite,d.depthRangeFor3D),at=Float32Array.from(d.transform.expandedFarZProjMatrix),pt=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),be.activeTexture.set(Te.TEXTURE0),re.bind(ze,Te.CLAMP_TO_EDGE),be.activeTexture.set(Te.TEXTURE1),re.bind(ze,Te.CLAMP_TO_EDGE),"useMipmap"in re&&be.extTextureFilterAnisotropic&&d.transform.pitch>20&&Te.texParameterf(Te.TEXTURE_2D,be.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,be.extTextureFilterAnisotropicMax);const[st,ot,lt,vt]=o?Y.getPoleBuffers(o.canonical.z,!1):Y.getPoleBuffers(0,!0),Tt=T.paint.get("raster-elevation");let Qt;y?(Qt=st,d.renderDefaultNorthPole=Tt!==0):(Qt=ot,d.renderDefaultSouthPole=Tt!==0);const Ut=ji(E.mix),ia=((xa,kt,la,zt,ua,ta,ha,Xt,ga,ka,Ua,Va,dr)=>sa(xa,kt,la,new Float32Array(16),new Float32Array(9),[0,0],zt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ta,[0,0],Xt,2,ka,Ua,Va,1,0,dr))(at,pt,me,n.ag(d.transform.zoom),0,T,0,Tt,0,Ut,E.offset,E.range,S),da=d.getOrCreateProgram("raster",{defines:Ke});d.uploadCommonUniforms(be,da,null),da.draw(d,Te.TRIANGLES,nt,q,Fe,F,ia,T.id,Qt,lt,vt)}function lm(y){const o=y._nearZ,d=y.projection.farthestPixelDistance(y),A=d-o,T=.2*y.height,S=o+T;return[o,d,(S-T-o)/A,(S-o)/A]}function Th(y,o,d,A){if(y)return o instanceof Bi&&y instanceof qo?o.getTextureDescriptor(y,d,!0):{texture:y.texture,mix:ji(A.mix),offset:A.offset,buffer:0,tileSize:1}}var Ch=n.dd([{name:"a_index",type:"Int16",components:1}]);class Sh{constructor(o,d,A,T){const S={width:A[0],height:A[1],data:null},E=o.gl;this.targetColorTexture=new n.T(o,S,E.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(o,S,E.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(d,T),this.lastInvalidatedAt=0}updateParticleTexture(o,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const A=this.context.gl,T=d.width*d.height;this.particleTexture0=new n.T(this.context,d,A.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,d,A.RGBA8,{premultiply:!1,useMipmap:!1});const S=new n.de;S.reserve(T);for(let E=0;E<T;E++)S.emplaceBack(E);this.particleIndexBuffer=this.context.createVertexBuffer(S,Ch.members,!0),this.particleSegment=n.b8.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Mu(y,o,d){if(!y)return null;const A=o.getTextureDescriptor(y,d,!0);if(!A)return null;let{texture:T,mix:S,offset:E,tileSize:F,buffer:q,format:K}=A;if(!T||!K)return null;let Y=!1;return K==="uint32"&&(Y=!0,S[3]=0,S=Pt(n.df,S,[0,d.paint.get("raster-particle-max-speed")]),E=wa(n.df,E,[0,d.paint.get("raster-particle-max-speed")])),{texture:T,textureOffset:[q/(F+2*q),F/(F+2*q)],tileSize:F,scalarData:Y,scale:S,offset:E,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[K]]}}function bh(y){const o=y._nearZ,d=y.projection.farthestPixelDistance(y),A=d-o,T=.2*y.height,S=o+T;return[o,d,(S-T-o)/A,(S-o)/A]}const tc=new n.al(1,0,0,1),ng=new n.al(0,1,0,1),dp=new n.al(0,0,1,1),ig=new n.al(1,0,1,1),xh=new n.al(0,1,1,1);function Bl(y,o,d,A,T,S,E){const F=y.context,q=y.transform,K=F.gl,Y=q.projection.name==="globe",ae=Y?["PROJECTION_GLOBE_VIEW"]:[];let re=n.ad.mat4.clone(d.projMatrix);if(Y&&n.ag(q.zoom)>0){const Ut=n.bb(d.canonical,q),ia=n.dg(Ut);re=n.ad.mat4.multiply(new Float32Array(16),q.globeMatrix,ia),n.ad.mat4.multiply(re,q.projMatrix,re)}const me=n.ad.mat4.create();me[12]+=2*T/(n.q.devicePixelRatio*q.width),me[13]+=2*S/(n.q.devicePixelRatio*q.height),n.ad.mat4.multiply(re,me,re);const be=y.getOrCreateProgram("debug",{defines:ae}),Te=o.getTileByID(d.key);y.terrain&&y.terrain.setupElevationDraw(Te,be);const ze=cr.disabled,Fe=Nr.disabled,Ke=y.colorModeForRenderPass(),nt="$debug";F.activeTexture.set(K.TEXTURE0),y.emptyTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Y?Te._makeGlobeTileDebugBuffers(y.context,q):Te._makeDebugTileBoundsBuffers(y.context,q.projection);const at=Te._tileDebugBuffer||y.debugBuffer,pt=Te._tileDebugIndexBuffer||y.debugIndexBuffer,st=Te._tileDebugSegments||y.debugSegments;if(be.draw(y,K.LINE_STRIP,ze,Fe,Ke,xr.disabled,mt(re,A),nt,at,pt,st,null,null,null,[Te._globeTileDebugBorderBuffer]),E){const Ut=Te.latestRawTileData,ia=Math.floor((Ut&&Ut.byteLength||0)/1024);let da=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(da+=` => ${d.overscaledZ}`),da+=` ${Te.state}`,da+=` ${ia}kb`,function(xa,kt){xa.initDebugOverlayCanvas();const la=xa.debugOverlayCanvas,zt=xa.context.gl,ua=xa.debugOverlayCanvas.getContext("2d");ua.clearRect(0,0,la.width,la.height),ua.shadowColor="white",ua.shadowBlur=2,ua.lineWidth=1.5,ua.strokeStyle="white",ua.textBaseline="top",ua.font="bold 36px Open Sans, sans-serif",ua.fillText(kt,5,5),ua.strokeText(kt,5,5),xa.debugOverlayTexture.update(la),xa.debugOverlayTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE)}(y,da)}const ot=o.getTile(d).tileSize,lt=512/Math.min(ot,512)*(d.overscaledZ/q.zoom)*.5,vt=Te._tileDebugTextBuffer||y.debugBuffer,Tt=Te._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,Qt=Te._tileDebugTextSegments||y.debugSegments;be.draw(y,K.TRIANGLES,ze,Fe,Dr.alphaBlended,xr.disabled,mt(re,n.al.transparent,lt),nt,vt,Tt,Qt,null,null,null,[Te._globeTileDebugTextBuffer])}function ef(y,o,d,A){ad(y,0,o+d/2,y.transform.width,d,A)}function td(y,o,d,A){ad(y,o-d/2,0,d,y.transform.height,A)}function ad(y,o,d,A,T,S){const E=y.context,F=E.gl;F.enable(F.SCISSOR_TEST),F.scissor(o*n.q.devicePixelRatio,d*n.q.devicePixelRatio,A*n.q.devicePixelRatio,T*n.q.devicePixelRatio),E.clear({color:S}),F.disable(F.SCISSOR_TEST)}const hp=n.dd([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:rd}=hp;function hl(y,o,d,A){y.emplaceBack(o,d,A)}class sg{constructor(o){this.vertexArray=new n.dh,this.indices=new n.aV,hl(this.vertexArray,-1,-1,1),hl(this.vertexArray,1,-1,1),hl(this.vertexArray,-1,1,1),hl(this.vertexArray,1,1,1),hl(this.vertexArray,-1,-1,-1),hl(this.vertexArray,1,-1,-1),hl(this.vertexArray,-1,1,-1),hl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,rd),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=n.b8.simpleSegment(0,0,36,12)}}function uo(y,o,d,A,T,S){const E=y.context.gl,F=o.paint.get("sky-atmosphere-color"),q=o.paint.get("sky-atmosphere-halo-color"),K=o.paint.get("sky-atmosphere-sun-intensity"),Y=((ae,re,me,be,Te)=>({u_matrix_3f:ae,u_sun_direction:re,u_sun_intensity:me,u_color_tint_r:[be.r,be.g,be.b,be.a],u_color_tint_m:[Te.r,Te.g,Te.b,Te.a],u_luminance:5e-5}))(n.ad.mat3.fromMat4(n.ad.mat3.create(),A),T,K,F,q);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+S,o.skyboxTexture,0),d.draw(y,E.TRIANGLES,cr.disabled,Nr.disabled,Dr.unblended,xr.frontCW,Y,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Wg=n.dd([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ph{constructor(o){const d=new n.di;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const A=new n.aV;A.emplaceBack(0,1,2),A.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(d,Wg.members),this.indexBuffer=o.createIndexBuffer(A),this.segments=n.b8.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ci=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Dn{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class fp{constructor(o){this.colorModeAlphaBlendedWriteRGB=new Dr([1,os,1,os],n.al.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Dr([1,0,1,0],n.al.transparent,[!1,!1,!1,!0]),this.params=new Dn,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const d=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Ph(d);const A=this.params.sizeRange,T=this.params.intensityRange,S=function(Y){const ae=n.dl(30),re=[];for(let me=0;me<Y;++me){const be=2*Math.PI*ae(),Te=Math.acos(1-2*ae())-.5*Math.PI;re.push(n.ad.vec3.fromValues(Math.cos(Te)*Math.cos(be),Math.cos(Te)*Math.sin(be),Math.sin(Te)))}return re}(this.params.starsCount),E=n.dl(300),F=new n.dj,q=new n.aV;let K=0;for(let Y=0;Y<S.length;++Y){const ae=n.ad.vec3.scale([],S[Y],200),re=Math.max(0,1+.01*A*(1*E()-.5)),me=Math.max(0,1+.01*T*(1*E()-.5));F.emplaceBack(ae[0],ae[1],ae[2],-1,-1,re,me),F.emplaceBack(ae[0],ae[1],ae[2],1,-1,re,me),F.emplaceBack(ae[0],ae[1],ae[2],1,1,re,me),F.emplaceBack(ae[0],ae[1],ae[2],-1,1,re,me),q.emplaceBack(K+0,K+1,K+2),q.emplaceBack(K+0,K+2,K+3),K+=4}this.starsVx=d.createVertexBuffer(F,ci.members),this.starsIdx=d.createIndexBuffer(q),this.starsSegments=n.b8.simpleSegment(0,0,F.length,q.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,d){const A=o.context,T=A.gl,S=o.transform,E=new cr(T.LEQUAL,cr.ReadOnly,[0,1]),F=n.ag(S.zoom),q=o.style.getLut(d.scope),K=d.properties.get("color-use-theme")==="none",Y=d.properties.get("color").toRenderColor(K?null:q).toArray01(),ae=d.properties.get("high-color-use-theme")==="none",re=d.properties.get("high-color").toRenderColor(ae?null:q).toArray01(),me=d.properties.get("space-color-use-theme")==="none",be=d.properties.get("space-color").toRenderColor(me?null:q).toArray01PremultipliedAlpha(),Te=5e-4,ze=n.dk(d.properties.get("horizon-blend"),0,1,Te,.25),Fe=n.cD(o,A,S)&&ze===Te?S.worldSize/(2*Math.PI*1.025)-1:S.globeRadius,Ke=o.frameCounter/1e3%1,nt=n.ad.vec3.length(S.globeCenterInViewSpace),at=Math.sqrt(Math.pow(nt,2)-Math.pow(Fe,2)),pt=Math.acos(at/nt),st=ot=>{const lt=S.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ot&&lt.push("ALPHA_PASS");const vt=o.getOrCreateProgram("globeAtmosphere",{defines:lt}),Tt=((Ut,ia,da,xa,kt,la,zt,ua,ta,ha,Xt,ga)=>({u_frustum_tl:Ut,u_frustum_tr:ia,u_frustum_br:da,u_frustum_bl:xa,u_horizon:kt,u_transition:la,u_fadeout_range:zt,u_color:ua,u_high_color:ta,u_space_color:ha,u_temporal_offset:Xt,u_horizon_angle:ga}))(S.frustumCorners.TL,S.frustumCorners.TR,S.frustumCorners.BR,S.frustumCorners.BL,S.frustumCorners.horizon,F,ze,Y,re,be,Ke,pt);o.uploadCommonUniforms(A,vt);const Qt=this.atmosphereBuffer;Qt&&vt.draw(o,T.TRIANGLES,E,Nr.disabled,ot?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,xr.backCW,Tt,ot?"atmosphere_glow_alpha":"atmosphere_glow",Qt.vertexBuffer,Qt.indexBuffer,Qt.segments)};st(!1),st(!0)}drawStars(o,d){const A=n.ay(d.properties.get("star-intensity"),0,1);if(A===0)return;const T=o.context,S=T.gl,E=o.transform,F=o.getOrCreateProgram("stars"),q=n.ad.quat.identity([]);n.ad.quat.rotateX(q,q,-E._pitch),n.ad.quat.rotateZ(q,q,-E.angle),n.ad.quat.rotateX(q,q,n.ak(E._center.lat)),n.ad.quat.rotateY(q,q,-n.ak(E._center.lng));const K=n.ad.mat4.fromQuat(new Float32Array(16),q),Y=n.ad.mat4.multiply([],E.starsProjMatrix,K),ae=n.ad.mat3.fromMat4([],K),re=n.ad.mat3.invert([],ae),me=[0,1,0];n.ad.vec3.transformMat3(me,me,re),n.ad.vec3.scale(me,me,this.params.sizeMultiplier);const be=[1,0,0];n.ad.vec3.transformMat3(be,be,re),n.ad.vec3.scale(be,be,this.params.sizeMultiplier);const Te=(ze=me,Fe=be,Ke=A,{u_matrix:Float32Array.from(Y),u_up:ze,u_right:Fe,u_intensity_multiplier:Ke});var ze,Fe,Ke;o.uploadCommonUniforms(T,F),this.starsVx&&this.starsIdx&&F.draw(o,S.TRIANGLES,cr.disabled,Nr.disabled,this.colorModeAlphaBlendedWriteRGB,xr.disabled,Te,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Iu(y,o){const d=[...y],A=o.cameraWorldSizeForFog/o.worldSize,T=n.ad.mat4.identity([]);return n.ad.mat4.scale(T,T,[A,A,1]),n.ad.mat4.multiply(d,T,d),n.ad.mat4.multiply(d,o.worldToFogMatrix,d),d}function $d(y,o,d,A,T){const S=d.material,E=A.context,{baseColorTexture:F,metallicRoughnessTexture:q}=S.pbrMetallicRoughness,{normalTexture:K,occlusionTexture:Y,emissionTexture:ae}=S;function re(be,Te,ze){if(be&&(y.push(Te),E.activeTexture.set(E.gl.TEXTURE0+ze),be.gfxTexture)){const{minFilter:Fe,magFilter:Ke,wrapS:nt,wrapT:at}=be.sampler;be.gfxTexture.bindExtraParam(Fe,Ke,nt,at)}}re(F,"HAS_TEXTURE_u_baseColorTexture",Si.BaseColor),re(q,"HAS_TEXTURE_u_metallicRoughnessTexture",Si.MetallicRoughness),re(K,"HAS_TEXTURE_u_normalTexture",Si.Normal),re(Y,"HAS_TEXTURE_u_occlusionTexture",Si.Occlusion),re(ae,"HAS_TEXTURE_u_emissionTexture",Si.Emission),T&&(T.texture||(T.texture=new n.dn(A.context,T.image,[T.image.height,T.image.height,T.image.height],E.gl.RGBA8)),E.activeTexture.set(E.gl.TEXTURE0+Si.LUT),T.texture&&T.texture.bind(E.gl.LINEAR,E.gl.CLAMP_TO_EDGE),y.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(y.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(d.texcoordBuffer)),d.colorBuffer&&(y.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(d.colorBuffer)),d.normalBuffer&&(y.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(d.normalBuffer)),d.pbrBuffer&&(y.push("HAS_ATTRIBUTE_a_pbr"),y.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(d.pbrBuffer)),S.alphaMode!=="OPAQUE"&&S.alphaMode!=="MASK"||y.push("UNPREMULT_TEXTURE_IN_SHADER"),S.defined||y.push("DIFFUSE_SHADED");const me=A.shadowRenderer;me&&(y.push("RENDER_SHADOWS","DEPTH_TEXTURE"),me.useNormalOffset&&y.push("NORMAL_OFFSET"))}function Lu(y,o,d,A,T,S){const E=d.paint.get("model-opacity").constantOr(1),F=o.context,q=new cr(o.context.gl.LEQUAL,cr.ReadWrite,o.depthRangeFor3D),K=o.transform,Y=y.mesh,ae=Y.material,re=ae.pbrMetallicRoughness,me=o.style.fog;let be;be=o.transform.projection.zAxisUnit==="pixels"?[...y.nodeModelMatrix]:n.ad.mat4.multiply([],A.zScaleMatrix,y.nodeModelMatrix),n.ad.mat4.multiply(be,A.negCameraPosMatrix,be);const Te=n.ad.mat4.invert([],be);n.ad.mat4.transpose(Te,Te);const ze=d.paint.get("model-color-use-theme").constantOr("default")==="none",Fe=d.paint.get("model-emissive-strength").constantOr(0),Ke=pr(new Float32Array(y.worldViewProjection),new Float32Array(be),new Float32Array(Te),null,o,E,re.baseColorFactor.toRenderColor(null),ae.emissiveFactor,re.metallicFactor,re.roughnessFactor,ae,Fe,d),nt={defines:[]},at=[],pt=o.shadowRenderer;pt&&(pt.useNormalOffset=!1),$d(nt.defines,at,Y,o,ze?null:d.lut);let st=null;if(me){const vt=Iu(y.nodeModelMatrix,o.transform);if(st=new Float32Array(vt),K.projection.name!=="globe"){const Tt=Y.aabb.min,Qt=Y.aabb.max,[Ut,ia]=me.getOpacityForBounds(vt,Tt[0],Tt[1],Qt[0],Qt[1]);nt.overrideFog=Ut>=Fa||ia>=Fa}}const ot=Js(o,d.paint.get("model-cutoff-fade-range"));ot.shouldRenderCutoff&&nt.defines.push("RENDER_CUTOFF");const lt=o.getOrCreateProgram("model",nt);o.uploadCommonUniforms(F,lt,null,st,ot),o.renderPass!=="shadow"&&pt&&pt.setupShadowsFromMatrix(y.nodeModelMatrix,lt),lt.draw(o,F.gl.TRIANGLES,q,T,S,Y.material.doubleSided?xr.disabled:xr.backCCW,Ke,d.id,Y.vertexBuffer,Y.indexBuffer,Y.segments,d.paint,o.transform.zoom,void 0,at)}function nd(y,o,d,A,T,S,E){let F;F=y.projection.name==="globe"?n.dp(d,y):[...d],n.ad.mat4.multiply(F,F,o.matrix);const q=n.ad.mat4.multiply([],A,F);if(o.meshes)for(const K of o.meshes){if(K.material.alphaMode!=="BLEND"){E.push({mesh:K,depth:0,modelIndex:T,worldViewProjection:q,nodeModelMatrix:F});continue}const Y=n.ad.vec3.transformMat4([],K.centroid,q);!y.isOrthographic&&Y[2]<=0||S.push({mesh:K,depth:Y[2],modelIndex:T,worldViewProjection:q,nodeModelMatrix:F})}if(o.children)for(const K of o.children)nd(y,K,d,A,T,S,E)}function Df(y,o,d,A){const T=d.shadowRenderer;if(!T)return;const S=T.getShadowPassDepthMode(),E=T.getShadowPassColorMode(),F=T.calculateShadowPassMatrixFromMatrix(o),q=xi(F);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,S,Nr.disabled,E,xr.backCCW,q,A.id,y.vertexBuffer,y.indexBuffer,y.segments,A.paint,d.transform.zoom,void 0,void 0)}function tf(y,o,d){const A=o.updateZoomBasedPaintProperties(),T=function(S,E,F){let q,K,Y,ae=S.terrain?S.terrain.exaggeration():0;if(S.terrain&&ae>0){const re=S.terrain,me=re.findDEMTileFor(F);me&&me.dem?q=n.dr.create(re,F,me):ae=0}if(ae===0&&(E.terrainElevationMin=0,E.terrainElevationMax=0),ae===E.validForExaggeration&&(ae===0||q&&q._demTile&&q._demTile.tileID===E.validForDEMTile.id&&q._dem._timestamp===E.validForDEMTile.timestamp))return!1;for(const re in E.instancesPerModel){const me=E.instancesPerModel[re];for(let be=0;be<me.instancedDataArray.length;++be){const Te=(q?ae*q.getElevationAt(0|me.instancedDataArray.float32[16*be],0|me.instancedDataArray.float32[16*be+1],!0,!0):0)+me.instancesEvaluatedElevation[be];me.instancedDataArray.float32[16*be+6]=Te,K=K?Math.min(E.terrainElevationMin,Te):Te,Y=Y?Math.max(E.terrainElevationMax,Te):Te}}return E.terrainElevationMin=K||0,E.terrainElevationMax=Y||0,E.validForExaggeration=ae,E.validForDEMTile=q&&q._demTile?{id:q._demTile.tileID,timestamp:q._dem._timestamp}:{id:void 0,timestamp:0},!0}(y,o,d);(A||T)&&(o.uploaded=!1,o.upload(y.context))}const jl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.ce([0,0,0],[n.ai,n.ai,0])};function Mf(y,o){const d=1<<y.canonical.z,A=o.getFreeCameraOptions().position,T=o.elevation,S=y.canonical.x/d,E=(y.canonical.x+1)/d,F=y.canonical.y/d,q=(y.canonical.y+1)/d;let K=o._centerAltitude;if(T){const me=T.getMinMaxForTile(y);me&&me.max>K&&(K=me.max)}const Y=n.ay(A.x,S,E)-A.x,ae=n.ay(A.y,F,q)-A.y,re=n.bH(K,o.center.lat)-A.z;return o._zoomFromMercatorZ(Math.sqrt(Y*Y+ae*ae+re*re))}function Vo(y,o,d,A,T,S,E){const F=y.context,q=y.renderPass==="shadow",K=y.shadowRenderer,Y=q&&K?K.getShadowPassDepthMode():new cr(F.gl.LEQUAL,cr.ReadWrite,y.depthRangeFor3D),ae=y.isTileAffectedByFog(S);if(d.meshes)for(const re of d.meshes){const me=["MODEL_POSITION_ON_GPU"],be=[];let Te,ze,Fe;A.instancedDataArray.length>20&&me.push("INSTANCED_ARRAYS");const Ke=Js(y,o.paint.get("model-cutoff-fade-range"));if(Ke.shouldRenderCutoff&&me.push("RENDER_CUTOFF"),q&&K)Te=y.getOrCreateProgram("modelDepth",{defines:me}),ze=xi(E.shadowTileMatrix,E.shadowTileMatrix,Float32Array.from(d.matrix)),Fe=K.getShadowPassColorMode();else{$d(me,be,re,y,o.paint.get("model-color-use-theme").constantOr("default")==="none"?null:o.lut),Te=y.getOrCreateProgram("model",{defines:me,overrideFog:ae});const at=re.material,pt=at.pbrMetallicRoughness,st=o.paint.get("model-opacity").constantOr(1),ot=o.paint.get("model-emissive-strength").constantOr(0);ze=pr(S.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,y,st,pt.baseColorFactor.toRenderColor(null),at.emissiveFactor,pt.metallicFactor,pt.roughnessFactor,at,ot,o,T),K&&(E.shadowUniformsInitialized?Te.setShadowUniformValues(F,K.getShadowUniformValues()):(K.setupShadows(S.toUnwrapped(),Te,"model-tile",S.overscaledZ),E.shadowUniformsInitialized=!0)),Fe=Ke.shouldRenderCutoff||st<1||at.alphaMode!=="OPAQUE"?Dr.alphaBlended:Dr.unblended}y.uploadCommonUniforms(F,Te,S.toUnwrapped(),null,Ke);const nt=re.material.doubleSided?xr.disabled:xr.backCCW;if(A.instancedDataArray.length>20)be.push(A.instancedDataBuffer),Te.draw(y,F.gl.TRIANGLES,Y,Nr.disabled,Fe,nt,ze,o.id,re.vertexBuffer,re.indexBuffer,re.segments,o.paint,y.transform.zoom,void 0,be,A.instancedDataArray.length);else{const at=q?"u_instance":"u_normal_matrix";for(let pt=0;pt<A.instancedDataArray.length;++pt)ze[at]=new Float32Array(A.instancedDataArray.arrayBuffer,64*pt,16),Te.draw(y,F.gl.TRIANGLES,Y,Nr.disabled,Fe,nt,ze,o.id,re.vertexBuffer,re.indexBuffer,re.segments,o.paint,y.transform.zoom,void 0,be)}}if(d.children)for(const re of d.children)Vo(y,o,re,A,T,S,E)}const Kd=[1,-1,1];function pp(y,o,d,A){if(!d.modelManager)return!0;const T=d.modelManager;if(!d.shadowRenderer)return!0;const S=d.shadowRenderer,E=o.aabb;let F=!0,q=y.maxHeight;if(q===0){let Y=0;for(const ae in y.instancesPerModel){const re=T.getModel(ae,A);re?Y=Math.max(Y,Math.max(Math.max(re.aabb.max[0],re.aabb.max[1]),re.aabb.max[2])):F=!1}q=y.maxScale*Y*1.41+y.maxVerticalOffset,F&&(y.maxHeight=q)}E.max[2]=q,E.min[2]+=y.terrainElevationMin,E.max[2]+=y.terrainElevationMax,n.ad.vec3.transformMat4(E.min,E.min,o.tileMatrix),n.ad.vec3.transformMat4(E.max,E.max,o.tileMatrix);const K=E.intersects(S.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(y.isInsideFirstShadowMapFrustum=K===2),K===0}function mp(y,o){const d=y.uniformValues.u_cutoff_params[0],A=y.uniformValues.u_cutoff_params[1],T=y.uniformValues.u_cutoff_params[2],S=y.uniformValues.u_cutoff_params[3];return A===d||S===T?1:n.ay(((o-d)/(A-d)-T)/(S-T),0,1)}function Eh(y,o,d,A){if(o.pitch<20)return 1;const T=o.getWorldToCameraMatrix();n.ad.mat4.multiply(T,T,y);const S=n.ad.vec4.fromValues(d.min[0],d.min[1],d.min[2],1);let E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),F=E,q=E;S[1]=d.max[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),F=E[1]<F[1]?E:F,q=E[1]>q[1]?E:q,S[0]=d.max[0],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),F=E[1]<F[1]?E:F,q=E[1]>q[1]?E:q,S[1]=d.min[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),F=E[1]<F[1]?E:F,q=E[1]>q[1]?E:q;const K=n.ay(A[0],0,1),Y=100*o.pixelsPerMeter*n.ay(A[1],0,1),ae=n.ay(A[2],0,1),re=n.ad.vec4.lerp(n.ad.vec4.create(),F,q,K),me=Math.tan(.5*o.fovX),be=-re[2]*me;if(Y===0)return re[1]<-Math.abs(be)?ae:1;const Te=(-Math.abs(be)-re[1])/Y,ze=(Ke,nt,at)=>(1-at)*Ke+at*nt,Fe=n.ay(ze(1,ae,Te),ae,1);return ze(1,Fe,n.ay((o.pitch-20)/20,0,1))}class id{}class sd{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,d,A){{const ae=this._storage.get(d.id);if(ae)return ae.lastUsedFrameIdx=o,ae.buf}const T=A.gl,S=T.getBufferParameter(T.ELEMENT_ARRAY_BUFFER,T.BUFFER_SIZE),E=new ArrayBuffer(S),F=new Int16Array(E);T.getBufferSubData(T.ELEMENT_ARRAY_BUFFER,0,new Int16Array(E));const q=new n.dt;for(let ae=0;ae<S/2;ae+=3){const re=F[ae],me=F[ae+1],be=F[ae+2];q.emplaceBack(re,me),q.emplaceBack(me,be),q.emplaceBack(be,re)}const K=A.bindVertexArrayOES.current,Y=new id;return Y.buf=new Yn(A,q),Y.lastUsedFrameIdx=o,this._storage.set(d.id,Y),A.bindVertexArrayOES.set(K),Y.buf}update(o){for(const[d,A]of this._storage)o-A.lastUsedFrameIdx>30&&(A.buf.destroy(),this._storage.delete(d))}destroy(){for(const[o,d]of this._storage)d.buf.destroy(),this._storage.delete(o)}}class gp{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Wd=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Fu{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Pc{constructor(o,d){this.revealStart=11,this.revealRange=2,o.registerParameter(this,[...d,"Reveal"],"revealStart",{min:0,max:17,step:.05}),o.registerParameter(this,[...d,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const cu=n.dd([{type:"Float32",name:"a_pos_2f",components:2}]);class Ec{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(o,d){const A=o.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const E=new n.du,F=new n.aV;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(1,1),E.emplaceBack(-1,1),F.emplaceBack(0,1,2),F.emplaceBack(0,2,3),this.vignetteVx=o.context.createVertexBuffer(E,cu.members),this.vignetteIdx=o.context.createIndexBuffer(F)}const T=n.b8.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){o.uploadCommonUniforms(o.context,A);const E={u_vignetteShape:(S={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:S.vignetteColor};A.draw(o,o.context.gl.TRIANGLES,cr.disabled,Nr.disabled,Dr.alphaBlended,xr.disabled,E,"vignette",this.vignetteVx,this.vignetteIdx,T)}var S}}class Ls{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(o,d){const A=o.getFreeCameraOptions().position,T=A.toAltitude(),S=A.toLngLat(),E=n.ak(S.lng),F=n.ak(S.lat),q=o.pixelsPerMeter/d,K=E*n.dv,Y=n.dv*Math.log(Math.tan(Math.PI/4+F/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const ae=-this._offsetYPrev+Y,re=-this._elevationPrev+T;this._accumulatedOffsetX+=(-this._offsetXPrev+K)*q,this._accumulatedOffsetY+=ae*q,this._accumulatedElevation+=re*q,this._offsetXPrev=K,this._offsetYPrev=Y,this._elevationPrev=T}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function du(y,o){return[-(y[0]-Math.floor(y[0]/o)*o),-(y[1]-Math.floor(y[1]/o)*o),-(y[2]-Math.floor(y[2]/o)*o)]}function ac(y){const o=n.dl(1323123451230),d=[];for(let A=0;A<y;++A){const T=2*o()-1,S=2*o()-1,E=2*o()-1;d.push(n.ad.vec3.fromValues(T,S,E))}return d}function eo(y,o,d,A,T){const S=n.ay((T-d)/(A-d),0,1);return(1-S)*y+S*o}class ku{constructor(o){this._movement=new Ls,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Ec,this._ppmScaleFactor=o}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(o,d){const A=o.transform;this._movement.update(A,this._ppmScaleFactor);const T=A.starsProjMatrix,S=n.ad.quat.identity([]);n.ad.quat.rotateX(S,S,n.ak(90)-A._pitch),n.ad.quat.rotateZ(S,S,-A.angle);const E=n.ad.mat4.fromQuat(new Float32Array(16),S),F=n.ad.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),q=n.ad.mat4.transpose([],F),K=n.ad.mat4.multiply([],q,E),Y=Date.now()/1e3;return this._accumulatedTimeFromStart+=(Y-this._prevTime)*d,this._prevTime=Y,{projectionMatrix:T,modelviewMatrix:K}}}class Nh extends ku{constructor(o){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Pc(o.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(o){const d=o.context;if(!this.particlesVx){const A=ac(this.particlesCount),T=new n.dw,S=new n.aV;let E=0;const F=n.dl(1323123451230);for(let q=0;q<A.length;++q){const K=A[q],Y=[2*F()-1,F(),F(),F()];T.emplaceBack(K[0],K[1],K[2],-1,-1,...Y),T.emplaceBack(K[0],K[1],K[2],1,-1,...Y),T.emplaceBack(K[0],K[1],K[2],1,1,...Y),T.emplaceBack(K[0],K[1],K[2],-1,1,...Y),S.emplaceBack(E+0,E+1,E+2),S.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=d.createVertexBuffer(T,Wd.members),this.particlesIdx=d.createIndexBuffer(S)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},A=o.transform.zoom;if(d.revealStart>A)return;const T=eo(0,1,d.revealStart,d.revealStart+d.revealRange,A);if(!this.particlesVx||!this.particlesIdx)return;const S=structuredClone(this._params);let E=[-S.direction.x,S.direction.y,-100];n.ad.vec3.normalize(E,E);const F=structuredClone(this._vignetteParams);F.strength*=T,S.overrideStyleParameters||(S.intensity=o.style.rain.state.density,S.timeFactor=o.style.rain.state.intensity,S.color=structuredClone(o.style.rain.state.color),E=structuredClone(o.style.rain.state.direction),S.screenThinning.intensity=o.style.rain.state.centerThinning,S.dropletSizeX=o.style.rain.state.dropletSize[0],S.dropletSizeYScale=o.style.rain.state.dropletSize[1]/o.style.rain.state.dropletSize[0],S.distortionStrength=100*o.style.rain.state.distortionStrength,F.strength=1,F.color=structuredClone(o.style.rain.state.vignetteColor));const q=this.updateOnRender(o,S.timeFactor),K=o.context,Y=K.gl,ae=o.transform;this.screenTexture&&this.screenTexture.size[0]===o.width&&this.screenTexture.size[1]===o.height||(this.screenTexture=new n.T(K,{width:o.width,height:o.height,data:null},Y.RGBA8)),S.distortionStrength>0&&(K.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Y.copyTexSubImage2D(Y.TEXTURE_2D,0,0,0,0,0,o.width,o.height));const re=o.getOrCreateProgram("rainParticle");o.uploadCommonUniforms(K,re),K.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const me=[S.color.r,S.color.g,S.color.b,S.color.a],be=(Te,ze)=>{const Fe=du(this._movement.getPosition(),Te),Ke=S.dropletSizeX,nt=S.dropletSizeX*S.dropletSizeYScale,at=o.width/2,pt=o.height/2,st=eo(0,S.screenThinning.start,0,1,S.screenThinning.intensity),ot=eo(.001,S.screenThinning.range,0,1,S.screenThinning.intensity),lt=eo(0,S.screenThinning.particleOffset,0,1,S.screenThinning.intensity),vt=(Tt={modelview:q.modelviewMatrix,projection:q.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Fe,velocityConeAperture:S.velocityConeAperture,velocity:S.velocity,boxSize:Te,rainDropletSize:[Ke,nt],distortionStrength:S.distortionStrength,rainDirection:E,color:me,screenSize:[ae.width,ae.height],thinningCenterPos:[at,pt],thinningShape:[st,ot,Math.pow(10,S.screenThinning.fadePower)],thinningAffectedRatio:S.screenThinning.affectedRatio,thinningParticleOffset:lt,shapeDirectionalPower:S.shapeDirPower,shapeNormalPower:S.shapeNormalPower,mode:ze?0:1},{u_modelview:Float32Array.from(Tt.modelview),u_projection:Float32Array.from(Tt.projection),u_time:Tt.time,u_cam_pos:Tt.camPos,u_texScreen:0,u_velocityConeAperture:Tt.velocityConeAperture,u_velocity:Tt.velocity,u_boxSize:Tt.boxSize,u_rainDropletSize:Tt.rainDropletSize,u_distortionStrength:Tt.distortionStrength,u_rainDirection:Tt.rainDirection,u_color:Tt.color,u_screenSize:Tt.screenSize,u_thinningCenterPos:Tt.thinningCenterPos,u_thinningShape:Tt.thinningShape,u_thinningAffectedRatio:Tt.thinningAffectedRatio,u_thinningParticleOffset:Tt.thinningParticleOffset,u_shapeDirectionalPower:Tt.shapeDirectionalPower,u_shapeNormalPower:Tt.shapeNormalPower,u_mode:Tt.mode});var Tt;const Qt=Math.round(S.intensity*this.particlesCount),Ut=n.b8.simpleSegment(0,0,4*Qt,2*Qt);re.draw(o,Y.TRIANGLES,cr.disabled,Nr.disabled,Dr.alphaBlended,xr.disabled,vt,"rain_particles",this.particlesVx,this.particlesIdx,Ut)};S.distortionStrength>0&&be(S.boxSize,!0),be(S.boxSize,!1),this._vignette.draw(o,F)}}const yp=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class af extends ku{constructor(o){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Pc(o.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(o){const d=o.context;if(!this.particlesVx){const A=ac(this.particlesCount),T=new n.dx,S=new n.aV;let E=0;const F=n.dl(1323123451230);for(let q=0;q<A.length;++q){const K=A[q],Y=F(),ae=F(),re=F(),me=[q/A.length,Y,ae,re],be=[F(),F()];T.emplaceBack(K[0],K[1],K[2],-1,-1,...me,...be),T.emplaceBack(K[0],K[1],K[2],1,-1,...me,...be),T.emplaceBack(K[0],K[1],K[2],1,1,...me,...be),T.emplaceBack(K[0],K[1],K[2],-1,1,...me,...be),S.emplaceBack(E+0,E+1,E+2),S.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=d.createVertexBuffer(T,yp.members),this.particlesIdx=d.createIndexBuffer(S)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.snow)return;const d=structuredClone(this._params);let A=[-d.direction.x,d.direction.y,-100];n.ad.vec3.normalize(A,A);const T=structuredClone(this._vignetteParams),S=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},E=o.transform.zoom;if(S.revealStart>E)return;const F=eo(0,1,S.revealStart,S.revealStart+S.revealRange,E);T.strength*=F,d.overrideStyleParameters||(d.intensity=o.style.snow.state.density,d.timeFactor=o.style.snow.state.intensity,d.color=structuredClone(o.style.snow.state.color),A=structuredClone(o.style.snow.state.direction),d.screenThinning.intensity=o.style.snow.state.centerThinning,d.billboardSize=2.79*o.style.snow.state.flakeSize,T.strength=1,T.color=structuredClone(o.style.snow.state.vignetteColor));const q=this.updateOnRender(o,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const K=o.context,Y=K.gl,ae=o.transform,re=o.getOrCreateProgram("snowParticle");o.uploadCommonUniforms(K,re),((me,be,Te)=>{const ze=du(this._movement.getPosition(),me),Fe=ae.width/2,Ke=ae.height/2,nt=eo(0,Te.screenThinning.start,0,1,Te.screenThinning.intensity),at=eo(.001,Te.screenThinning.range,0,1,Te.screenThinning.intensity),pt=eo(0,Te.screenThinning.particleOffset,0,1,Te.screenThinning.intensity),st=(ot={modelview:q.modelviewMatrix,projection:q.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:ze,velocityConeAperture:Te.velocityConeAperture,velocity:Te.velocity,horizontalOscillationRadius:Te.horizontalOscillationRadius,horizontalOscillationRate:Te.horizontalOscillationRate,boxSize:me,billboardSize:1*Te.billboardSize,simpleShapeParameters:[Te.shapeFadeStart,Te.shapeFadePower],screenSize:[ae.width,ae.height],thinningCenterPos:[Fe,Ke],thinningShape:[nt,at,Math.pow(10,Te.screenThinning.fadePower)],thinningAffectedRatio:Te.screenThinning.affectedRatio,thinningParticleOffset:pt,color:[Te.color.r,Te.color.g,Te.color.b,Te.color.a],direction:A},{u_modelview:Float32Array.from(ot.modelview),u_projection:Float32Array.from(ot.projection),u_time:ot.time,u_cam_pos:ot.camPos,u_velocityConeAperture:ot.velocityConeAperture,u_velocity:ot.velocity,u_horizontalOscillationRadius:ot.horizontalOscillationRadius,u_horizontalOscillationRate:ot.horizontalOscillationRate,u_boxSize:ot.boxSize,u_billboardSize:ot.billboardSize,u_simpleShapeParameters:ot.simpleShapeParameters,u_screenSize:ot.screenSize,u_thinningCenterPos:ot.thinningCenterPos,u_thinningShape:ot.thinningShape,u_thinningAffectedRatio:ot.thinningAffectedRatio,u_thinningParticleOffset:ot.thinningParticleOffset,u_particleColor:ot.color,u_direction:ot.direction});var ot;const lt=Math.round(Te.intensity*this.particlesCount),vt=n.b8.simpleSegment(0,0,4*lt,2*lt);this.particlesVx&&this.particlesIdx&&re.draw(o,Y.TRIANGLES,cr.disabled,Nr.disabled,Dr.alphaBlended,xr.disabled,st,"snow_particles",this.particlesVx,this.particlesIdx,vt)})(d.boxSize,0,d),this._vignette.draw(o,T)}}const Oh={symbol:function(y,o,d,A,T){if(y.renderPass!=="translucent")return;const S=Nr.disabled,E=y.colorModeForRenderPass(),F=d.layout.get("text-variable-anchor"),q=d.layout.get("text-size-scale-range"),K=n.ay(y.scaleFactor,q[0],q[1]);F&&function(re,me,be,Te,ze,Fe,Ke,nt){const at=me.transform,pt=ze==="map",st=Fe==="map";for(const ot of re){const lt=Te.getTile(ot),vt=lt.getBucket(be);if(!vt||!vt.text||!vt.text.segments.get().length)continue;const Tt=n.bp(vt.textSizeData,at.zoom,nt),Qt=$o(ot,vt.getProjection(),at),Ut=at.calculatePixelsToTileUnitsMatrix(lt),ia=Os(Qt,lt.tileID.canonical,st,pt,at,vt.getProjection(),Ut),da=vt.hasIconTextFit()&&vt.hasIconData();if(Tt){const xa=Math.pow(2,at.zoom-lt.tileID.overscaledZ);fs(vt,pt,st,Ke,n.cY,at,ia,ot,xa,Tt,da)}}}(A,y,d,o,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),T,K);const Y=d.paint.get("icon-opacity").constantOr(1)!==0,ae=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(Y||ae)?Pn(y,o,d,A,S,E):(Y&&Pn(y,o,d,A,S,E,{onlyIcons:!0}),ae&&Pn(y,o,d,A,S,E,{onlyText:!0})),o.map.showCollisionBoxes&&(Wi(y,o,d,A,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Wi(y,o,d,A,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(y,o,d,A){if(y.renderPass!=="translucent")return;const T=d.paint.get("circle-opacity"),S=d.paint.get("circle-stroke-width"),E=d.paint.get("circle-stroke-opacity"),F=d.layout.get("circle-sort-key").constantOr(1)!==void 0,q=d.paint.get("circle-emissive-strength");if(T.constantOr(1)===0&&(S.constantOr(1)===0||E.constantOr(1)===0))return;const K=y.context,Y=K.gl,ae=y.transform,re=y.depthModeForSublayer(0,cr.ReadOnly),me=Nr.disabled,be=y.colorModeForDrapableLayerRenderPass(q),Te=ae.projection.name==="globe",ze=[n.av(ae.center.lng),n.aC(ae.center.lat)],Fe=[];for(let nt=0;nt<A.length;nt++){const at=A[nt],pt=o.getTile(at),st=pt.getBucket(d);if(!st||st.projection.name!==ae.projection.name)continue;const ot=st.programConfigurations.get(d.id),lt=n.cZ(d),vt=y.isTileAffectedByFog(at);Te&&lt.push("PROJECTION_GLOBE_VIEW"),lt.push("DEPTH_D24"),y.terrain&&ae.depthOcclusionForSymbolsAndCircles&&lt.push("DEPTH_OCCLUSION");const Tt=y.getOrCreateProgram("circle",{config:ot,defines:lt,overrideFog:vt}),Qt=st.layoutVertexBuffer,Ut=st.globeExtVertexBuffer,ia=st.indexBuffer,da=ae.projection.createInversionMatrix(ae,at.canonical),xa={programConfiguration:ot,program:Tt,layoutVertexBuffer:Qt,globeExtVertexBuffer:Ut,indexBuffer:ia,uniformValues:n.c_(y,at,pt,da,ze,d),tile:pt};if(F){const kt=st.segments.get();for(const la of kt)Fe.push({segments:new n.b8([la]),sortKey:la.sortKey,state:xa})}else Fe.push({segments:st.segments,sortKey:0,state:xa})}F&&Fe.sort((nt,at)=>nt.sortKey-at.sortKey);const Ke={useDepthForOcclusion:ae.depthOcclusionForSymbolsAndCircles};for(const nt of Fe){const{programConfiguration:at,program:pt,layoutVertexBuffer:st,globeExtVertexBuffer:ot,indexBuffer:lt,uniformValues:vt,tile:Tt}=nt.state,Qt=nt.segments;y.terrain&&y.terrain.setupElevationDraw(Tt,pt,Ke),y.uploadCommonUniforms(K,pt,Tt.tileID.toUnwrapped()),pt.draw(y,Y.TRIANGLES,re,me,be,xr.disabled,vt,d.id,st,lt,Qt,d.paint,ae.zoom,at,[ot])}},heatmap:function(y,o,d,A){if(d.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const T=y.context,S=T.gl,E=Nr.disabled,F=new Dr([S.ONE,S.ONE,S.ONE,S.ONE],n.al.transparent,[!0,!0,!0,!0]);(function(me,be,Te,ze){const Fe=me.gl,Ke=be.width*ze,nt=be.height*ze;me.activeTexture.set(Fe.TEXTURE1),me.viewport.set([0,0,Ke,nt]);let at=Te.heatmapFbo;if(!at||at&&(at.width!==Ke||at.height!==nt)){at&&at.destroy();const pt=Fe.createTexture();Fe.bindTexture(Fe.TEXTURE_2D,pt),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_WRAP_S,Fe.CLAMP_TO_EDGE),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_WRAP_T,Fe.CLAMP_TO_EDGE),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_MIN_FILTER,Fe.LINEAR),Fe.texParameteri(Fe.TEXTURE_2D,Fe.TEXTURE_MAG_FILTER,Fe.LINEAR),at=Te.heatmapFbo=me.createFramebuffer(Ke,nt,!0,null),function(st,ot,lt,vt,Tt,Qt){const Ut=st.gl;Ut.texImage2D(Ut.TEXTURE_2D,0,st.extRenderToTextureHalfFloat?Ut.RGBA16F:Ut.RGBA,Tt,Qt,0,Ut.RGBA,st.extRenderToTextureHalfFloat?Ut.HALF_FLOAT:Ut.UNSIGNED_BYTE,null),vt.colorAttachment.set(lt)}(me,0,pt,at,Ke,nt)}else Fe.bindTexture(Fe.TEXTURE_2D,at.colorAttachment.get()),me.bindFramebuffer.set(at.framebuffer)})(T,y,d,y.transform.projection.name==="globe"?.5:.25),T.clear({color:n.al.transparent});const q=y.transform,K=q.projection.name==="globe",Y=K?["PROJECTION_GLOBE_VIEW"]:[],ae=K?xr.frontCCW:xr.disabled,re=[n.av(q.center.lng),n.aC(q.center.lat)];for(let me=0;me<A.length;me++){const be=A[me];if(o.hasRenderableParent(be))continue;const Te=o.getTile(be),ze=Te.getBucket(d);if(!ze||ze.projection.name!==q.projection.name)continue;const Fe=y.isTileAffectedByFog(be),Ke=ze.programConfigurations.get(d.id),nt=y.getOrCreateProgram("heatmap",{config:Ke,defines:Y,overrideFog:Fe}),{zoom:at}=y.transform;y.terrain&&y.terrain.setupElevationDraw(Te,nt),y.uploadCommonUniforms(T,nt,be.toUnwrapped());const pt=q.projection.createInversionMatrix(q,be.canonical);nt.draw(y,S.TRIANGLES,cr.disabled,E,F,ae,ea(y,be,Te,pt,re,at,d.paint.get("heatmap-intensity")),d.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,d.paint,y.transform.zoom,Ke,K?[ze.globeExtVertexBuffer]:null)}T.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(T,S){const E=T.context,F=E.gl,q=S.heatmapFbo;if(!q)return;E.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,q.colorAttachment.get()),E.activeTexture.set(F.TEXTURE1);let K=S.colorRampTexture;K||(K=S.colorRampTexture=new n.T(E,S.colorRamp,F.RGBA8)),K.bind(F.LINEAR,F.CLAMP_TO_EDGE),T.getOrCreateProgram("heatmapTexture").draw(T,F.TRIANGLES,cr.disabled,Nr.disabled,T.colorModeForRenderPass(),xr.disabled,((Y,ae,re,me)=>({u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}))(0,S),S.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,S.paint,T.transform.zoom)}(y,d))},line:function(y,o,d,A){if(y.renderPass!=="translucent")return;const T=d.paint.get("line-opacity"),S=d.paint.get("line-width");if(T.constantOr(1)===0||S.constantOr(1)===0)return;const E=d.paint.get("line-emissive-strength"),F=d.paint.get("line-occlusion-opacity"),q=d.layout.get("line-elevation-reference"),K=d.layout.get("line-width-unit")==="meters",Y=q==="sea",ae=y.context,re=ae.gl;if(d.hasElevatedBuckets&&y.transform.projection.name==="globe")return;const me=d.layout.get("line-cross-slope"),be=me!==void 0,Te=me<1,ze=y.colorModeForDrapableLayerRenderPass(E),Fe=y.terrain&&y.terrain.renderingToTexture,Ke=Fe?1:n.q.devicePixelRatio,nt=d.paint.get("line-dasharray"),at=nt.constantOr(1),pt=d.layout.get("line-cap"),st=nt.constantOr(null),ot=pt.constantOr(null),lt=d.paint.get("line-pattern"),vt=lt.constantOr(1),Tt=lt.constantOr(null),Qt=d.paint.get("line-opacity").constantOr(1);let Ut=!vt&&Qt!==1||y.depthOcclusion&&F>0&&F<1;const ia=d.paint.get("line-gradient"),da=vt?"linePattern":"line",xa=n.c$(d);let kt;if(Fe&&y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(Ut=!1),F!==0&&y.depthOcclusion){const zt=d.paint._values["line-opacity"];zt&&zt.value&&zt.value.kind==="constant"?kt=zt.value:n.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}S.value.kind!=="constant"&&S.value.isLineProgressConstant===!1&&xa.push("VARIABLE_LINE_WIDTH");const la=(zt,ua,ta,ha,Xt,ga)=>{for(const ka of zt){const Ua=o.getTile(ka);if(vt&&!Ua.patternsLoaded())continue;const Va=Ua.getBucket(d);if(!Va||Va.hasZOffset&&!Xt||!Va.hasZOffset&&Xt)continue;y.prepareDrawTile();const dr=Va.programConfigurations.get(d.id),qr=y.isTileAffectedByFog(ka),Rr=y.getOrCreateProgram(da,{config:dr,defines:ua,overrideFog:qr,overrideRtt:!Xt&&void 0});if(Tt&&Ua.imageAtlas){const Or=n.d0.from(Tt).getPrimary().scaleSelf(Ke).toString(),rr=Ua.imageAtlas.patternPositions.get(Or);rr&&dr.setConstantPatternPositions(rr)}if(!vt&&st&&ot&&Ua.lineAtlas){const Or=Ua.lineAtlas.getDash(st,ot);Or&&dr.setConstantPatternPositions(Or)}let[kr,zr]=d.paint.get("line-trim-offset");(ot==="round"||ot==="square")&&kr!==zr&&(kr===0&&(kr-=1),zr===1&&(zr+=1));const Mr=Fe?ka.projMatrix:null,Hr=K?1/Va.tileToMeter/n.at(Ua,1,y.transform.zoom):1,jr=K?1/Va.tileToMeter/n.at(Ua,1,Math.floor(y.transform.zoom)):1,yr=vt?n.d1(y,Ua,d,Mr,Ke,Hr,jr,[kr,zr]):n.d2(y,Ua,d,Mr,Va.lineClipsArray.length,Ke,Hr,jr,[kr,zr]);if(ia){const Or=Va.gradients[d.id];let rr=Or.texture;if(d.gradientVersion!==Or.version){let mn=256;if(d.stepInterpolant){const Xn=o.getSource().maxzoom,vn=ka.canonical.z===Xn?Math.ceil(1<<y.transform.maxZoom-ka.canonical.z):1;mn=n.ay(n.d3(Va.maxLineLength/n.ai*1024*vn),256,ae.maxTextureSize)}Or.gradient=n.d4({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:mn,image:Or.gradient||void 0,clips:Va.lineClipsArray}),Or.texture?Or.texture.update(Or.gradient):Or.texture=new n.T(ae,Or.gradient,re.RGBA8),Or.version=d.gradientVersion,rr=Or.texture}ae.activeTexture.set(re.TEXTURE1),rr.bind(d.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}at&&(ae.activeTexture.set(re.TEXTURE0),Ua.lineAtlasTexture&&Ua.lineAtlasTexture.bind(re.LINEAR,re.REPEAT),dr.updatePaintBuffers()),vt&&(ae.activeTexture.set(re.TEXTURE0),Ua.imageAtlasTexture&&Ua.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),dr.updatePaintBuffers()),Xt&&!Y&&y.terrain.setupElevationDraw(Ua,Rr),y.uploadCommonUniforms(ae,Rr,ka.toUnwrapped());const pn=Or=>{kt!=null&&(kt.value=Qt*F),Rr.draw(y,re.TRIANGLES,ta,Or,ze,xr.disabled,yr,d.id,Va.layoutVertexBuffer,Va.indexBuffer,Va.segments,d.paint,y.transform.zoom,dr,[Va.layoutVertexBuffer2,Va.patternVertexBuffer,Va.zOffsetVertexBuffer]),kt!=null&&(kt.value=Qt)};if(Ut&&!Xt){const Or=y.stencilModeForClipping(ka).ref;Or===0&&Fe&&ae.clear({stencil:0});const rr={func:re.EQUAL,mask:255};yr.u_alpha_discard_threshold=.8,pn(new Nr(rr,Or,255,re.KEEP,re.KEEP,re.INVERT)),yr.u_alpha_discard_threshold=0,pn(new Nr(rr,Or,255,re.KEEP,re.KEEP,re.KEEP))}else yr.u_alpha_discard_threshold=Ut&&Xt&&ga?.8:0,pn(Xt?ha:y.stencilModeForClipping(ka))}};if(d.hasNonElevatedBuckets){const zt=!Fe&&y.terrain;F!==0&&zt?n.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`):zt?n.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${d.id}.`):la(A,xa,y.depthModeForSublayer(0,cr.ReadOnly),Nr.disabled,!1,!0)}if(d.hasElevatedBuckets){xa.push("ELEVATED"),be&&xa.push(Te?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),Y&&xa.push("ELEVATION_REFERENCE_SEA");const zt=Ut?y.stencilModeFor3D():Nr.disabled,ua=new cr(y.depthOcclusion?re.GREATER:re.LEQUAL,cr.ReadOnly,y.depthRangeFor3D);y.forceTerrainMode=!0,la(A,xa,ua,zt,!0,!0),Ut&&la(A,xa,ua,zt,!0,!1),y.forceTerrainMode=!1}Ut&&(y.resetStencilClippingMasks(),Fe&&ae.clear({stencil:0})),F===0||y.depthOcclusion||Fe||y.layersWithOcclusionOpacity.push(y.currentLayer)},fill:function(y,o,d,A){const T=d.paint.get("fill-color"),S=d.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const E=d.paint.get("fill-emissive-strength"),F=y.colorModeForDrapableLayerRenderPass(E),q=d.paint.get("fill-pattern"),K=y.opaquePassEnabledForLayer()&&!q.constantOr(1)&&T.constantOr(n.al.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";let Y="none";d.layout.get("fill-elevation-reference")!=="none"?Y="road":d.paint.get("fill-z-offset").constantOr(1)!==0&&(Y="offset");const ae=!(!y.terrain||!y.terrain.enabled),re={painter:y,sourceCache:o,layer:d,coords:A,colorMode:F,elevationType:Y,terrainEnabled:ae,pass:K};if(Y!=="offset"){if(dl(re,!1),Y==="road"){const me=!ae&&y.renderPass==="translucent";me&&Oo(y,o,d,A,"geometry"),dl(re,!0,Nr.disabled),me&&function(be){const{painter:Te,sourceCache:ze,layer:Fe,coords:Ke,colorMode:nt}=be,at=Te.context.gl,pt=new cr(Te.context.gl.LEQUAL,cr.ReadOnly,Te.depthRangeFor3D);for(const st of Ke){const ot=ze.getTile(st),lt=ot.getBucket(Fe);if(!lt)continue;const vt=lt.elevatedStructures;if(!vt||!vt.renderableSegments||vt.renderableSegments.segments[0].primitiveLength===0)continue;Te.prepareDrawTile();const Tt=lt.bufferData.programConfigurations.get(Fe.id),Qt=Te.isTileAffectedByFog(st),Ut=Te.getOrCreateProgram("elevatedStructures",{config:Tt,overrideFog:Qt,defines:["NORMAL_OFFSET"]}),ia={u_matrix:Te.translatePosMatrix(st.projMatrix,ot,Fe.paint.get("fill-translate"),Fe.paint.get("fill-translate-anchor"))};Te.uploadCommonUniforms(Te.context,Ut,st.toUnwrapped()),Ut.draw(Te,at.TRIANGLES,pt,Nr.disabled,nt,xr.backCCW,ia,Fe.id,vt.vertexBuffer,vt.indexBuffer,vt.renderableSegments,Fe.paint,Te.transform.zoom,Tt,[vt.vertexBufferNormal])}}(re)}}else dl(re,!1,y.stencilModeFor3D())},"fill-extrusion":function(y,o,d,A){const T=d.paint.get("fill-extrusion-opacity"),S=y.context,E=S.gl,F=y.terrain,q=F&&F.renderingToTexture;if(T===0)return;const K=y.conflationActive&&y.style.isLayerClipped(d,o.getSource()),Y=y.style.order.indexOf(d.fqid);if(K&&function(ae,re,me,be,Te){for(const ze of be){const Fe=re.getTile(ze).getBucket(me);Fe&&(Fe.updateReplacement(ze,ae.replacementSource,Te),Fe.uploadCentroid(ae.context))}}(y,o,d,A,Y),F||K)for(const ae of A){const re=o.getTile(ae).getBucket(d);re&&Ul(y.context,o,ae,re,d,F,K)}if(y.renderPass==="shadow"&&y.shadowRenderer){const ae=y.shadowRenderer;if(F&&T<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.ab)return;const re=ae.getShadowPassDepthMode(),me=ae.getShadowPassColorMode();kl(y,o,d,A,re,Nr.disabled,me,K)}else if(y.renderPass==="translucent"){const ae=!d.paint.get("fill-extrusion-pattern").constantOr(1),re=d.paint.get("fill-extrusion-color").constantOr(n.al.white);if(!q&&re.a!==0){const me=new cr(y.context.gl.LEQUAL,cr.ReadWrite,y.depthRangeFor3D);T===1&&ae?kl(y,o,d,A,me,Nr.disabled,Dr.unblended,K):(kl(y,o,d,A,me,Nr.disabled,Dr.disabled,K),kl(y,o,d,A,me,y.stencilModeFor3D(),y.colorModeForRenderPass(),K),y.resetStencilClippingMasks())}if(y.style.enable3dLights()&&ae&&(!F&&y.transform.projection.name!=="globe"||q)){const me=d.paint.get("fill-extrusion-opacity"),be=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Te=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ze=d.paint.get("fill-extrusion-flood-light-intensity"),Fe=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ke=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(Fe?null:d.lut).toArray01().slice(0,3),nt=be>0&&Te>0,at=ze>0,pt=(ot,lt,vt)=>(1-vt)*ot+vt*lt,st=ot=>{const lt=y.depthModeForSublayer(1,cr.ReadOnly,E.LEQUAL,!0),vt=d.paint.get(ot?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Tt=pt(.1,3,vt),Qt=y._showOverdrawInspector;if(!Qt){const Ut=new Nr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),ia=new Dr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);Is(y,o,d,A,lt,Ut,ia,xr.disabled,ot,"sdf",me,be,Te,ze,Ke,Tt,K,!1)}{const Ut=Qt?Nr.disabled:new Nr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),ia=Qt?y.colorModeForRenderPass():new Dr([E.ONE_MINUS_DST_ALPHA,E.DST_ALPHA,E.ONE,E.ONE],n.al.transparent,[!0,!0,!0,!0]);Is(y,o,d,A,lt,Ut,ia,xr.disabled,ot,"color",me,be,Te,ze,Ke,Tt,K,!1)}};if(q){const ot=(lt,vt,Tt)=>{const Qt=y.depthModeForSublayer(1,cr.ReadOnly,E.LEQUAL,!1),Ut=d.paint.get(lt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),ia=pt(.1,3,Ut);{const da=new Dr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0]);Is(y,o,d,A,Qt,Nr.disabled,da,xr.disabled,lt,"clear",me,be,Te,ze,Ke,ia,K,vt)}{const da=new Nr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),xa=new Dr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);Is(y,o,d,A,Qt,da,xa,xr.disabled,lt,"sdf",me,be,Te,ze,Ke,ia,K,vt)}{const da=lt?E.ZERO:E.ONE_MINUS_DST_ALPHA,xa=new Nr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),kt=new Dr([da,E.DST_ALPHA,E.ONE_MINUS_DST_ALPHA,E.ZERO],n.al.transparent,[!0,!0,!0,!0]);Is(y,o,d,A,Qt,xa,kt,xr.disabled,lt,"color",me,be,Te,ze,Ke,ia,K,vt)}{const da=new Dr([E.ONE,E.ONE,E.ONE,lt?E.ZERO:E.ONE],n.al.transparent,[!1,!1,!1,!0],lt?E.FUNC_ADD:E.MAX);Is(y,o,d,A,Qt,Nr.disabled,da,xr.disabled,lt,"clear",me,be,Te,ze,Ke,ia,K,vt,Tt)}};if(nt||at){let lt;if(y.prepareDrawTile(),F){const vt=F.drapeBufferSize[0],Tt=F.drapeBufferSize[1];lt=F.framebufferCopyTexture,lt&&(!lt||lt.size[0]===vt&&lt.size[1]===Tt)||(lt&&lt.destroy(),lt=F.framebufferCopyTexture=new n.T(S,new n.r({width:vt,height:Tt}),E.RGBA8)),lt.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,0,0,vt,Tt)}nt&&ot(!0,!1,lt),at&&ot(!1,!0,lt)}}else nt&&st(!0),at&&st(!1),(nt||at)&&y.resetStencilClippingMasks()}}},hillshade:function(y,o,d,A){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent"||y.style.disableElevatedTerrain)return;const T=y.context,S=y.terrain&&y.terrain.renderingToTexture,[E,F]=y.renderPass!=="translucent"||S?[{},A]:y.stencilConfigForOverlap(A);for(const q of F){const K=o.getTile(q);if(K.needsHillshadePrepare&&y.renderPass==="offscreen")Ud(y,K,d);else if(y.renderPass==="translucent"){const Y=y.depthModeForSublayer(0,cr.ReadOnly),ae=d.paint.get("hillshade-emissive-strength"),re=y.colorModeForDrapableLayerRenderPass(ae),me=S&&y.terrain?y.terrain.stencilModeForRTTOverlap(q):E[q.overscaledZ];ls(y,q,K,d,Y,me,re)}}T.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,o,d,A,T,S){if(y.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const E=y.transform.projection.name==="globe",F=d.paint.get("raster-elevation")!==0,q=F&&E;if(y.renderElevatedRasterBackface&&!q)return;const K=y.context,Y=K.gl,ae=o.getSource(),re=function(st,ot,lt,vt){const Tt=ot.paint.get("raster-color"),Qt=st.type==="raster-array",Ut=[],ia=ot.paint.get("raster-resampling"),da=ot.paint.get("raster-color-mix");let xa=ot.paint.get("raster-color-range");const kt=[da[0],da[1],da[2],0],la=da[3];let zt=ia==="nearest"?vt.NEAREST:vt.LINEAR;if(Qt&&(Ut.push("RASTER_ARRAY"),Tt||Ut.push("RASTER_COLOR"),ia==="linear"&&Ut.push("RASTER_ARRAY_LINEAR"),zt=vt.NEAREST,!xa&&st.rasterLayers)){const ua=st.rasterLayers.find(({id:ta})=>ta===ot.sourceLayer);ua&&ua.fields&&ua.fields.range&&(xa=ua.fields.range)}if(xa=xa||[0,1],Tt){Ut.push("RASTER_COLOR"),lt.activeTexture.set(vt.TEXTURE2),ot.updateColorRamp(xa);let ua=ot.colorRampTexture;ua||(ua=ot.colorRampTexture=new n.T(lt,ot.colorRamp,vt.RGBA8)),ua.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}return{mix:kt,range:xa,offset:la,defines:Ut,resampling:zt}}(ae,d,K,Y);if(ae instanceof n.aK&&!A.length&&!E)return;const me=d.paint.get("raster-emissive-strength"),be=y.colorModeForDrapableLayerRenderPass(me),Te=y.terrain&&y.terrain.renderingToTexture,ze=!y.options.moving,Fe=d.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;if(ae instanceof n.aK&&!A.length&&(ae.onNorthPole||ae.onSouthPole)){const st=F?y.stencilModeFor3D():Nr.disabled;return void qt(!!ae.onNorthPole,null,y,o,d,me,re,xr.disabled,st)}if(!A.length)return;const[Ke,nt]=ae instanceof n.aK||Te?[{},A]:y.stencilConfigForOverlap(A),at=nt[nt.length-1].overscaledZ;q&&re.defines.push("PROJECTION_GLOBE_VIEW"),F&&re.defines.push("RENDER_CUTOFF");const pt=(st,ot,lt)=>{for(const vt of st){const Tt=vt.toUnwrapped(),Qt=o.getTile(vt);if(Te&&(!Qt||!Qt.hasData()))continue;K.activeTexture.set(Y.TEXTURE0);const Ut=Th(Qt,ae,d,re);if(!Ut||!Ut.texture)continue;const{texture:ia,mix:da,offset:xa,tileSize:kt,buffer:la}=Ut;let zt,ua;Te?(zt=cr.disabled,ua=vt.projMatrix):F?(zt=new cr(Y.LEQUAL,cr.ReadWrite,y.depthRangeFor3D),ua=E?Float32Array.from(y.transform.expandedFarZProjMatrix):y.transform.calculateProjMatrix(Tt,ze)):(zt=y.depthModeForSublayer(vt.overscaledZ-at,d.paint.get("raster-opacity")===1?cr.ReadWrite:cr.ReadOnly,Y.LESS),ua=y.transform.calculateProjMatrix(Tt,ze));const ta=y.terrain&&Te?y.terrain.stencilModeForRTTOverlap(vt):Ke[vt.overscaledZ],ha=S?0:d.paint.get("raster-fade-duration");Qt.registerFadeDuration(ha);const Xt=o.findLoadedParent(vt,0),ga=Fl(Qt,Xt,o,y.transform,ha);let ka,Ua;y.terrain&&y.terrain.prepareDrawTile(),K.activeTexture.set(Y.TEXTURE0),ia.bind(Fe,Y.CLAMP_TO_EDGE),K.activeTexture.set(Y.TEXTURE1),Xt?(Xt.texture&&Xt.texture.bind(Fe,Y.CLAMP_TO_EDGE),ka=Math.pow(2,Xt.tileID.overscaledZ-Qt.tileID.overscaledZ),Ua=[Qt.tileID.canonical.x*ka%1,Qt.tileID.canonical.y*ka%1]):ia.bind(Fe,Y.CLAMP_TO_EDGE),"useMipmap"in ia&&K.extTextureFilterAnisotropic&&y.transform.pitch>20&&Y.texParameterf(Y.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Va=y.transform;let dr;const qr=F?lm(Va):[0,0,0,0];let Rr,kr,zr,Mr,Hr,jr=0;if(q&&ae instanceof n.aK&&ae.coordinates.length>3)Rr=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0)))),kr=Float32Array.from(Va.globeMatrix),zr=Float32Array.from(n.cE(Va)),Mr=[n.av(Va.center.lng),n.aC(Va.center.lat)],dr=ae.elevatedGlobePerspectiveTransform,Hr=ae.elevatedGlobeGridMatrix||new Float32Array(9);else if(q){const rr=n.cF(vt.canonical);jr=n.cG(rr.getCenter().lat),Rr=Float32Array.from(n.bc(n.cI(vt.canonical))),kr=Float32Array.from(Va.globeMatrix),zr=Float32Array.from(n.cE(Va)),Mr=[n.av(Va.center.lng),n.aC(Va.center.lat)],dr=[0,0],Hr=Float32Array.from(n.cH(vt.canonical,rr,jr,Va.worldSize/Va._pixelsPerMercatorPixel))}else dr=ae instanceof n.aK?ae.perspectiveTransform:[0,0],Rr=new Float32Array(16),kr=new Float32Array(9),zr=new Float32Array(16),Mr=[0,0],Hr=new Float32Array(9);const yr=sa(ua,Rr,kr,zr,Hr,Ua||[0,0],n.ag(y.transform.zoom),Mr,qr,ka||1,ga,d,dr,F?d.paint.get("raster-elevation"):0,2,da,xa,re.range,kt,la,me),pn=y.isTileAffectedByFog(vt),Or=y.getOrCreateProgram("raster",{defines:re.defines,overrideFog:pn});if(y.uploadCommonUniforms(K,Or,Tt),ae instanceof n.aK){const rr=ae.elevatedGlobeVertexBuffer,mn=ae.elevatedGlobeIndexBuffer;if(Te||!E)ae.boundsBuffer&&ae.boundsSegments&&Or.draw(y,Y.TRIANGLES,zt,Nr.disabled,be,xr.disabled,yr,d.id,ae.boundsBuffer,y.quadTriangleIndexBuffer,ae.boundsSegments);else if(rr&&mn){const Xn=Va.zoom<=n.c6?ae.elevatedGlobeSegments:ae.getSegmentsForLongitude(Va.center.lng);Xn&&Or.draw(y,Y.TRIANGLES,zt,Nr.disabled,be,ot,yr,d.id,rr,mn,Xn)}}else if(q){zt=new cr(Y.LEQUAL,cr.ReadOnly,y.depthRangeFor3D);const rr=y.globeSharedBuffers;if(rr){const[mn,Xn,vn]=rr.getGridBuffers(jr,!1);Or.draw(y,Y.TRIANGLES,zt,lt||ta,y.colorModeForRenderPass(),ot,yr,d.id,mn,Xn,vn)}}else{const{tileBoundsBuffer:rr,tileBoundsIndexBuffer:mn,tileBoundsSegments:Xn}=y.getTileBoundsBuffers(Qt);Or.draw(y,Y.TRIANGLES,zt,ta,be,xr.disabled,yr,d.id,rr,mn,Xn)}}if(!(ae instanceof n.aK)&&q)for(const vt of st){const Tt=vt.canonical.y===(1<<vt.canonical.z)-1;vt.canonical.y===0&&qt(!0,vt,y,o,d,me,re,ot,lt||Nr.disabled),Tt&&qt(!1,vt,y,o,d,me,re,ot===xr.frontCW?xr.backCW:xr.frontCW,lt||Nr.disabled)}};q?pt(nt,y.renderElevatedRasterBackface?xr.backCW:xr.frontCW,y.stencilModeFor3D()):pt(nt,xr.disabled,void 0),y.resetStencilClippingMasks()},"raster-particle":function(y,o,d,A,T,S){y.renderPass==="offscreen"&&function(E,F,q,K){if(!K.length)return;const Y=E.context,ae=Y.gl,re=F.getSource();if(!(re instanceof Bi))return;const me=Math.ceil(Math.sqrt(q.paint.get("raster-particle-count")));let be=q.particlePositionRGBAImage;if(!be||be.width!==me){const nt=function(at){const pt=at*at,st=new Uint8Array(4*pt),ot=function(vt){return vt|=0,vt=Math.imul(2747636419^vt,2654435769),vt=Math.imul(vt^vt>>>16,2654435769),((vt=Math.imul(vt^vt>>>16,2654435769))>>>0)/4294967296},lt=1/1.1;for(let vt=0;vt<pt;vt++){const Tt=lt*(ot(2*vt+0)+ma),Qt=lt*(ot(2*vt+1)+ma),Ut=255*Tt%1,ia=255*Qt%1,da=Ut,xa=Qt-ia/255,kt=ia;st[4*vt+0]=255*(Tt-Ut/255),st[4*vt+1]=255*da,st[4*vt+2]=255*xa,st[4*vt+3]=255*kt}return st}(me);be=q.particlePositionRGBAImage=new n.r({width:me,height:me},nt)}let Te=q.particleFramebuffer;Te?Te.width!==me&&(Te.destroy(),Te=q.particleFramebuffer=Y.createFramebuffer(me,me,!0,null)):Te=q.particleFramebuffer=Y.createFramebuffer(me,me,!0,null);const ze=[];for(const nt of K){const at=F.getTile(nt);if(!(at instanceof qo))continue;const pt=Mu(at,re,q);if(!pt)continue;const st=[at.tileSize,at.tileSize];let ot=q.tileFramebuffer;ot||(ot=q.tileFramebuffer=Y.createFramebuffer(st[0],st[1],!0,null));let lt=at.rasterParticleState;lt||(lt=at.rasterParticleState=new Sh(Y,nt,st,be));const vt=lt.update(q.lastInvalidatedAt);lt.particleTextureDimension!==me&&lt.updateParticleTexture(nt,be);const Tt=lt.targetColorTexture;lt.targetColorTexture=lt.backgroundColorTexture,lt.backgroundColorTexture=Tt;const Qt=lt.particleTexture0;lt.particleTexture0=lt.particleTexture1,lt.particleTexture1=Qt,ze.push([nt,pt,lt,vt])}if(ze.length===0)return;const Fe=n.q.now(),Ke=q.previousDrawTimestamp?.001*(Fe-q.previousDrawTimestamp):.0167;if(q.previousDrawTimestamp=Fe,q.hasColorMap()){Y.activeTexture.set(ae.TEXTURE0+2);let nt=q.colorRampTexture;nt||(nt=q.colorRampTexture=new n.T(Y,q.colorRamp,ae.RGBA8)),nt.bind(ae.LINEAR,ae.CLAMP_TO_EDGE)}Y.bindFramebuffer.set(q.tileFramebuffer.framebuffer),function(nt,at,pt){const st=nt.context,ot=st.gl,lt=at.tileFramebuffer;st.activeTexture.set(ot.TEXTURE0);const vt={u_texture:0,u_opacity:1.05*(Qt=at.paint.get("raster-particle-fade-opacity-factor"))/(Qt+.05)},Tt=nt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Qt;for(const Ut of pt){const[,,ia,da]=Ut;lt.colorAttachment.set(ia.targetColorTexture.texture),st.viewport.set([0,0,lt.width,lt.height]),st.clear({color:n.al.transparent}),da&&(ia.backgroundColorTexture.bind(ot.NEAREST,ot.CLAMP_TO_EDGE),Tt.draw(nt,ot.TRIANGLES,cr.disabled,Nr.disabled,Dr.alphaBlended,xr.disabled,vt,at.id,nt.viewportBuffer,nt.quadTriangleIndexBuffer,nt.viewportSegments))}}(E,q,ze),function(nt,at,pt,st){const ot=nt.context,lt=ot.gl,vt=pt.tileFramebuffer,Tt=nt.transform.projection.name==="globe",Qt=pt.paint.get("raster-particle-max-speed");for(const Ut of st){const[ia,da,xa]=Ut;ot.activeTexture.set(lt.TEXTURE0+0),da.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),vt.colorAttachment.set(xa.targetColorTexture.texture);const kt=nt.getOrCreateProgram("rasterParticleDraw",{defines:da.defines,overrideFog:!1});ot.activeTexture.set(lt.TEXTURE0+1);const la=da.scalarData?[]:[0,1,2,3].map(ta=>n.d7[ta](ia));la.push(ia);const zt=ia.canonical.x,ua=ia.canonical.y;for(const ta of la){const ha=at.getTile(Tt?ta.wrapped():ta);if(!ha)continue;const Xt=ha.rasterParticleState;if(!Xt)continue;const ga=ta.canonical.x+(1<<ta.canonical.z)*(ta.wrap-ia.wrap),ka=ta.canonical.y;Xt.particleTexture0.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);const Ua=aa(1,Xt.particleTexture0.size[0],[ga-zt,ka-ua],0,da.texture.size,2,Qt,da.textureOffset,da.scale,da.offset);kt.draw(nt,lt.POINTS,cr.disabled,Nr.disabled,Dr.alphaBlended,xr.disabled,Ua,pt.id,Xt.particleIndexBuffer,void 0,Xt.particleSegment)}}}(E,F,q,ze),Y.bindFramebuffer.set(q.particleFramebuffer.framebuffer),function(nt,at,pt,st){const ot=nt.context,lt=ot.gl,vt=at.paint.get("raster-particle-max-speed"),Tt=st*at.paint.get("raster-particle-speed-factor")*.15,Qt=function(ia){return Math.pow(ia,6)}(.01+1*at.paint.get("raster-particle-reset-rate-factor")),Ut=at.particleFramebuffer;ot.viewport.set([0,0,Ut.width,Ut.height]);for(const ia of pt){const[,da,xa]=ia;ot.activeTexture.set(lt.TEXTURE0+0),da.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),ot.activeTexture.set(lt.TEXTURE0+1);const kt=xa.particleTexture0;kt.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);const la=Ha(1,kt.size[0],0,da.texture.size,vt,Tt,Qt,da.textureOffset,da.scale,da.offset);Ut.colorAttachment.set(xa.particleTexture1.texture),ot.clear({color:n.al.transparent}),nt.getOrCreateProgram("rasterParticleUpdate",{defines:da.defines}).draw(nt,lt.TRIANGLES,cr.disabled,Nr.disabled,Dr.unblended,xr.disabled,la,at.id,nt.viewportBuffer,nt.quadTriangleIndexBuffer,nt.viewportSegments)}}(E,q,ze,Ke)}(y,o,d,A),y.renderPass==="translucent"&&(function(E,F,q,K,Y){const ae=E.context,re=ae.gl,me=F.getSource().tileSize,be=5*(1-n.ae(n.bY,n.bY+1,E.transform.zoom))*me+q.paint.get("raster-particle-elevation"),Te=!E.options.moving,ze=E.transform.projection.name==="globe";if(!K.length)return;const[Fe,Ke]=E.stencilConfigForOverlap(K),nt=[];ze&&nt.push("PROJECTION_GLOBE_VIEW");const at=E.stencilModeFor3D();for(const pt of Ke){const st=pt.toUnwrapped(),ot=F.getTile(pt);if(!ot.rasterParticleState)continue;const lt=ot.rasterParticleState,vt=100;ot.registerFadeDuration(vt);const Tt=F.findLoadedParent(pt,0),Qt=Fl(ot,Tt,F,E.transform,vt);let Ut,ia;E.terrain&&E.terrain.prepareDrawTile(),ae.activeTexture.set(re.TEXTURE0),lt.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),ae.activeTexture.set(re.TEXTURE1),Tt&&Tt.rasterParticleState?(Tt.rasterParticleState.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),Ut=Math.pow(2,Tt.tileID.overscaledZ-ot.tileID.overscaledZ),ia=[ot.tileID.canonical.x*Ut%1,ot.tileID.canonical.y*Ut%1]):lt.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const da=ze?Float32Array.from(E.transform.expandedFarZProjMatrix):E.transform.calculateProjMatrix(st,Te),xa=E.transform,kt=bh(xa),la=n.cF(pt.canonical),zt=n.cG(la.getCenter().lat);let ua,ta,ha,Xt,ga;ze?(ua=Float32Array.from(n.bc(n.cI(pt.canonical))),ta=Float32Array.from(xa.globeMatrix),ha=Float32Array.from(n.cE(xa)),Xt=[n.av(xa.center.lng),n.aC(xa.center.lat)],ga=Float32Array.from(n.cH(pt.canonical,la,zt,xa.worldSize/xa._pixelsPerMercatorPixel))):(ua=new Float32Array(16),ta=new Float32Array(9),ha=new Float32Array(16),Xt=[0,0],ga=new Float32Array(9));const ka=Rt(da,ua,ta,ha,ga,ia||[0,0],n.ag(E.transform.zoom),Xt,kt,Ut||1,Qt,be),Ua=E.isTileAffectedByFog(pt),Va=E.getOrCreateProgram("rasterParticle",{defines:nt,overrideFog:Ua});if(E.uploadCommonUniforms(ae,Va,st),ze){const dr=new cr(re.LEQUAL,cr.ReadOnly,E.depthRangeFor3D),qr=0,Rr=E.globeSharedBuffers;if(Rr){const[kr,zr,Mr]=Rr.getGridBuffers(zt,qr!==0);Va.draw(E,re.TRIANGLES,dr,at,Dr.alphaBlended,E.renderElevatedRasterBackface?xr.frontCCW:xr.backCCW,ka,q.id,kr,zr,Mr)}}else{const dr=E.depthModeForSublayer(0,cr.ReadOnly),qr=Fe[pt.overscaledZ],{tileBoundsBuffer:Rr,tileBoundsIndexBuffer:kr,tileBoundsSegments:zr}=E.getTileBoundsBuffers(ot);Va.draw(E,re.TRIANGLES,dr,qr,Dr.alphaBlended,xr.disabled,ka,q.id,Rr,kr,zr)}}E.resetStencilClippingMasks()}(y,o,d,A),y.style.map.triggerRepaint())},background:function(y,o,d,A){const T=d.paint.get("background-color"),S=d.paint.get("background-color-use-theme").constantOr("default")==="none",E=d.paint.get("background-opacity"),F=d.paint.get("background-emissive-strength"),q=d.paint.get("background-pitch-alignment")==="viewport";if(E===0)return;const K=y.context,Y=K.gl,ae=y.transform,re=ae.tileSize,me=d.paint.get("background-pattern");let be;if(me!==void 0&&(me===null||(be=y.imageManager.getPattern(n.I.from(me.toString()),d.scope,y.style.getLut(d.scope)),!be)))return;const Te=!me&&T.a===1&&E===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==Te)return;const ze=Nr.disabled,Fe=y.depthModeForSublayer(0,Te==="opaque"?cr.ReadWrite:cr.ReadOnly),Ke=y.colorModeForDrapableLayerRenderPass(F),nt=me?"backgroundPattern":"background";let at,pt=A;if(pt||(at=y.getBackgroundTiles(),pt=Object.values(at).map(st=>st.tileID)),me&&(K.activeTexture.set(Y.TEXTURE0),y.imageManager.bind(y.context,d.scope)),q){const st=y.getOrCreateProgram(nt,{overrideFog:!1,overrideRtt:!0}),ot=new Float32Array(n.ad.mat4.identity([])),lt=new n.aH(0,0,0,0,0),vt=me?_r(ot,F,E,y,0,d.scope,be,q,{tileID:lt,tileSize:re}):Vr(ot,F,E,T.toRenderColor(S?null:d.lut));st.draw(y,Y.TRIANGLES,Fe,ze,Ke,xr.disabled,vt,d.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments)}else for(const st of pt){const ot=y.isTileAffectedByFog(st),lt=y.getOrCreateProgram(nt,{overrideFog:ot}),vt=st.toUnwrapped(),Tt=A?st.projMatrix:y.transform.calculateProjMatrix(vt);y.prepareDrawTile();const Qt=o?o.getTile(st):at?at[st.key]:new eu(st,re,ae.zoom,y),Ut=me?_r(Tt,F,E,y,0,d.scope,be,q,{tileID:st,tileSize:re}):Vr(Tt,F,E,T.toRenderColor(S?null:d.lut));y.uploadCommonUniforms(K,lt,vt);const{tileBoundsBuffer:ia,tileBoundsIndexBuffer:da,tileBoundsSegments:xa}=y.getTileBoundsBuffers(Qt);lt.draw(y,Y.TRIANGLES,Fe,ze,Ke,xr.disabled,Ut,d.id,ia,da,xa)}},sky:function(y,o,d){const A=y._atmosphere?n.ag(y.transform.zoom):1,T=d.paint.get("sky-opacity")*A;if(T===0)return;const S=y.context,E=d.paint.get("sky-type"),F=new cr(S.gl.LEQUAL,cr.ReadOnly,[0,1]),q=y.frameCounter/1e3%1;E==="atmosphere"?y.renderPass==="offscreen"?d.needsSkyboxCapture(y)&&(function(K,Y,ae,re){const me=K.context,be=me.gl;let Te=Y.skyboxFbo;if(!Te){Te=Y.skyboxFbo=me.createFramebuffer(32,32,!0,null),Y.skyboxGeometry=new sg(me),Y.skyboxTexture=me.gl.createTexture(),be.bindTexture(be.TEXTURE_CUBE_MAP,Y.skyboxTexture),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_S,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_T,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MIN_FILTER,be.LINEAR),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MAG_FILTER,be.LINEAR);for(let nt=0;nt<6;++nt)be.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0,be.RGBA,32,32,0,be.RGBA,be.UNSIGNED_BYTE,null)}me.bindFramebuffer.set(Te.framebuffer),me.viewport.set([0,0,32,32]);const ze=Y.getCenter(K,!0),Fe=K.getOrCreateProgram("skyboxCapture"),Ke=new Float64Array(16);n.ad.mat4.identity(Ke),n.ad.mat4.rotateY(Ke,Ke,.5*-Math.PI),uo(K,Y,Fe,Ke,ze,0),n.ad.mat4.identity(Ke),n.ad.mat4.rotateY(Ke,Ke,.5*Math.PI),uo(K,Y,Fe,Ke,ze,1),n.ad.mat4.identity(Ke),n.ad.mat4.rotateX(Ke,Ke,.5*-Math.PI),uo(K,Y,Fe,Ke,ze,2),n.ad.mat4.identity(Ke),n.ad.mat4.rotateX(Ke,Ke,.5*Math.PI),uo(K,Y,Fe,Ke,ze,3),n.ad.mat4.identity(Ke),uo(K,Y,Fe,Ke,ze,4),n.ad.mat4.identity(Ke),n.ad.mat4.rotateY(Ke,Ke,Math.PI),uo(K,Y,Fe,Ke,ze,5),me.viewport.set([0,0,K.width,K.height])}(y,d),d.markSkyboxValid(y)):y.renderPass==="sky"&&function(K,Y,ae,re,me){const be=K.context,Te=be.gl,ze=K.transform,Fe=K.getOrCreateProgram("skybox");be.activeTexture.set(Te.TEXTURE0),Te.bindTexture(Te.TEXTURE_CUBE_MAP,Y.skyboxTexture);const Ke=((nt,at,pt,st,ot)=>({u_matrix:nt,u_sun_direction:at,u_cubemap:0,u_opacity:st,u_temporal_offset:ot}))(ze.skyboxMatrix,Y.getCenter(K,!1),0,re,me);K.uploadCommonUniforms(be,Fe),Fe.draw(K,Te.TRIANGLES,ae,Nr.disabled,K.colorModeForRenderPass(),xr.backCW,Ke,"skybox",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,F,T,q):E==="gradient"&&y.renderPass==="sky"&&function(K,Y,ae,re,me){const be=K.context,Te=be.gl,ze=K.transform,Fe=K.getOrCreateProgram("skyboxGradient");Y.skyboxGeometry||(Y.skyboxGeometry=new sg(be)),be.activeTexture.set(Te.TEXTURE0);let Ke=Y.colorRampTexture;Ke||(Ke=Y.colorRampTexture=new n.T(be,Y.colorRamp,Te.RGBA8)),Ke.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);const nt=((at,pt,st,ot,lt)=>({u_matrix:at,u_color_ramp:0,u_center_direction:pt,u_radius:n.ak(st),u_opacity:ot,u_temporal_offset:lt}))(ze.skyboxMatrix,Y.getCenter(K,!1),Y.paint.get("sky-gradient-radius"),re,me);K.uploadCommonUniforms(be,Fe),Fe.draw(K,Te.TRIANGLES,ae,Nr.disabled,K.colorModeForRenderPass(),xr.backCW,nt,"skyboxGradient",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,F,T,q)},debug:function(y,o,d,A,T,S){for(let E=0;E<d.length;E++)if(T){const K=new n.al(A.r*.8,A.g*.8,A.b*.8,1);Bl(y,o,d[E],A,-1,-1,S),Bl(y,o,d[E],A,-1,1,S),Bl(y,o,d[E],A,1,1,S),Bl(y,o,d[E],A,1,-1,S),Bl(y,o,d[E],K,0,0,S)}else Bl(y,o,d[E],A,0,0,S)},custom:function(y,o,d,A){const T=y.context,S=d.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&d.isDraped(o)){if(y.renderPass==="offscreen"){const E=S.prerender;if(E){if(y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const F=y.transform.pointMerc;E.call(S,T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),n.ag(y.transform.zoom),[F.x,F.y],y.transform.pixelsPerMeterRatio)}else E.call(S,T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const F=S.renderToTile;if(F){const q=A[0].canonical,K=new n.ac(q.x+A[0].wrap*(1<<q.z),q.y,q.z);T.setDepthMode(cr.disabled),T.setStencilMode(Nr.disabled),T.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),F.call(S,T.gl,K),T.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),T.setStencilMode(Nr.disabled);const E=S.renderingMode==="3d"?new cr(y.context.gl.LEQUAL,cr.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,cr.ReadOnly);if(T.setDepthMode(E),y.transform.projection.name==="globe"){const F=y.transform.pointMerc;S.render(T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),n.ag(y.transform.zoom),[F.x,F.y],y.transform.pixelsPerMeterRatio)}else S.render(T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState(),T.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(y,o,d,A){if(y.renderPass==="opaque")return;const T=d.paint.get("model-opacity").constantOr(1);if(T===0)return;const S=d.paint.get("model-cast-shadows");if(y.renderPass==="shadow"&&(!S||y.terrain&&T<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof n.ab))return;const E=y.shadowRenderer,F=d.paint.get("model-receive-shadows");E&&(E.useNormalOffset=!0,F||(E.enabled=!1));const q=()=>{E&&(E.useNormalOffset=!0,F||(E.enabled=!0))},K=o.getSource();if(y.renderPass==="light-beam"&&K.type!=="batched-model")return;if(K.type==="vector"||K.type==="geojson")return function(Fe,Ke,nt,at,pt){const st=Fe.transform;if(st.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${st.projection.name} projection is not yet implemented`);const ot=st.getFreeCameraOptions().position;if(!Fe.modelManager)return;const lt=Fe.modelManager;nt.modelManager=lt;const vt=Fe.shadowRenderer;if(!nt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Tt=nt._unevaluatedLayout._values["model-id"],Qt=Object.assign({},nt.layout.get("model-id").parameters),Ut=Fe.style.order.indexOf(nt.fqid);for(const ia of at){const da=Ke.getTile(ia).getBucket(nt);if(!da||da.projection.name!==st.projection.name)continue;const xa=da.getModelUris();xa&&!da.modelsRequested&&(lt.addModelsFromBucket(xa,pt),da.modelsRequested=!0);const kt=Mf(ia,st);Qt.zoom=kt;const la=Tt.possiblyEvaluate(Qt);if(tf(Fe,da,ia),jl.shadowUniformsInitialized=!1,jl.useSingleShadowCascade=!!vt&&vt.getMaxCascadeForTile(ia.toUnwrapped())===0,Fe.renderPass==="shadow"&&vt){if(Fe.currentShadowCascade===1&&da.isInsideFirstShadowMapFrustum)continue;const ta=st.calculatePosMatrix(ia.toUnwrapped(),st.worldSize);if(jl.tileMatrix.set(ta),jl.shadowTileMatrix=Float32Array.from(vt.calculateShadowPassMatrixFromMatrix(ta)),jl.aabb.min.fill(0),jl.aabb.max[0]=jl.aabb.max[1]=n.ai,jl.aabb.max[2]=0,pp(da,jl,Fe,nt.scope))continue}const zt=1<<ia.canonical.z,ua=[((ot.x-ia.wrap)*zt-ia.canonical.x)*n.ai,(ot.y*zt-ia.canonical.y)*n.ai,ot.z*zt*n.ai];Fe.conflationActive&&Object.keys(da.instancesPerModel).length>0&&Fe.style.isLayerClipped(nt,Ke.getSource())&&da.updateReplacement(ia,Fe.replacementSource,Ut,pt)&&(da.uploaded=!1,da.upload(Fe.context));for(let ta in da.instancesPerModel){const ha=da.instancesPerModel[ta];ha.features.length>0&&(ta=la.evaluate(ha.features[0].feature,{}));const Xt=lt.getModel(ta,pt);if(Xt&&Xt.uploaded)for(const ga of Xt.nodes)Vo(Fe,nt,ga,ha,ua,ia,jl)}}}(y,o,d,A,K.type==="vector"?d.scope:""),void q();if(!K.loaded())return;if(K.type==="batched-model")return function(Fe,Ke,nt,at){nt.resetLayerRenderingStats(Fe);const pt=Fe.context,st=Fe.transform,ot=Fe.style.fog,lt=Fe.shadowRenderer;if(st.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${st.projection.name} projection is not yet implemented`);const vt=Fe.transform.getFreeCameraOptions().position,Tt=n.ad.vec3.scale([],[vt.x,vt.y,vt.z],Fe.transform.worldSize),Qt=n.ad.vec3.negate([],Tt),Ut=n.ad.mat4.identity([]),ia=n.dm(st.center.lat,st.zoom),da=n.ad.mat4.fromScaling([],[1,1,1/ia]);n.ad.mat4.translate(Ut,Ut,Qt);const xa=nt.paint.get("model-opacity").constantOr(1),kt=new cr(pt.gl.LEQUAL,cr.ReadWrite,Fe.depthRangeFor3D),la=new cr(pt.gl.LEQUAL,cr.ReadOnly,Fe.depthRangeFor3D),zt=new n.ce([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),ua=Fe.renderPass==="shadow",ta=ua&&lt?lt.getCurrentCascadeFrustum():st.getFrustum(st.scaleZoom(st.worldSize)),ha=nt.paint.get("model-front-cutoff"),Xt=ha[2]<1,ga=Js(Fe,nt.paint.get("model-cutoff-fade-range")),ka=nt.getLayerRenderingStats();(function(Ua,Va,dr,qr){const Rr=Ua.terrain?Ua.terrain.exaggeration():0,kr=Ua.transform.zoom;for(const zr of qr){const Mr=Va.getTile(zr).getBucket(dr);Mr&&(Mr.setFilter(dr.filter),Ua.conflationActive&&Mr.updateReplacement(zr,Ua.replacementSource),Mr.evaluateScale(Ua,dr),Ua.terrain&&Rr>0&&Mr.elevationUpdate(Ua.terrain,Rr,zr,dr.source),Mr.needsReEvaluation(Ua,kr,dr)&&Mr.evaluate(dr))}})(Fe,Ke,nt,at),function(){let Ua,Va,dr;Xt?(Ua=at.length-1,Va=-1,dr=-1):(Ua=0,Va=at.length,dr=1);const qr=new Float64Array(16),Rr=n.ad.vec3.create(),kr=new n.P(0,0);for(let zr=Ua;zr!==Va;zr+=dr){const Mr=at[zr],Hr=Ke.getTile(Mr).getBucket(nt);if(!Hr||!Hr.uploaded)continue;let jr=!1;lt&&(jr=lt.getMaxCascadeForTile(Mr.toUnwrapped())===0);const yr=st.calculatePosMatrix(Mr.toUnwrapped(),st.worldSize),pn=Hr.modelTraits;!ua&&Xt&&(n.ad.mat4.invert(qr,yr),n.ad.vec3.transformMat4(Rr,Tt,qr),kr.x=Rr[0],kr.y=Rr[1]);const Or=[];Hr.setFilter(nt.filter);for(const rr of Hr.getNodesInfo()){if(rr.hiddenByReplacement||!rr.node.meshes)continue;const mn=rr.node;let Xn=0;Fe.terrain&&mn.elevation&&(Xn=mn.elevation*Fe.terrain.exaggeration());const vn=(()=>{const fi=rr.aabb;return zt.min=[...fi.min],zt.max=[...fi.max],zt.min[2]+=Xn,zt.max[2]+=Xn,n.ad.vec3.transformMat4(zt.min,zt.min,yr),n.ad.vec3.transformMat4(zt.max,zt.max,yr),zt})(),kn=rr.evaluatedScale;if(kn[0]<=1&&kn[1]<=1&&kn[2]<=1&&vn.intersects(ta)===0)continue;if(!ua&&Xt){const fi=.16666666666666666;rr.cameraCollisionOpacity=Tt[0]>vn.min[0]&&Tt[0]<vn.max[0]&&Tt[1]>vn.min[1]&&Tt[1]<vn.max[1]&&Tt[2]*ia<vn.max[2]&&mn.footprint&&n.bA(kr,mn.footprint)?Math.max(rr.cameraCollisionOpacity-fi,0):Math.min(1,rr.cameraCollisionOpacity+fi)}const ns=[...yr],_s=mn.anchor?mn.anchor[0]:0,co=mn.anchor?mn.anchor[1]:0;n.ad.mat4.translate(ns,ns,[_s*(kn[0]-1),co*(kn[1]-1),Xn]),n.ad.vec3.exactEquals(kn,n.dq)||n.ad.mat4.scale(ns,ns,kn);const ao=n.ad.mat4.multiply([],ns,mn.matrix),Ro=n.ad.mat4.multiply([],st.expandedFarZProjMatrix,ao),Vn=n.ad.mat4.multiply([],st.expandedFarZProjMatrix,ns),di=n.ad.vec4.transformMat4([],[_s,co,Xn,1],Ro)[2];mn.hidden=!1;let Bn=xa;ua||(Xt&&(Bn*=rr.cameraCollisionOpacity,Bn*=Eh(ns,st,rr.aabb,ha)),Bn*=mp(ga,di)),Bn!==0?Or.push({nodeInfo:rr,depth:di,opacity:Bn,wvpForNode:Ro,wvpForTile:Vn,nodeModelMatrix:ao,tileModelMatrix:ns}):mn.hidden=!0}ua||Or.sort((rr,mn)=>!Xt||rr.opacity===1&&mn.opacity===1?rr.depth<mn.depth?-1:1:rr.opacity===1?-1:mn.opacity===1?1:rr.depth>mn.depth?-1:1);for(const rr of Or){const mn=rr.nodeInfo,Xn=mn.node;let vn=n.ad.mat4.multiply([],da,rr.tileModelMatrix);n.ad.mat4.multiply(vn,Ut,vn);const kn=n.ad.mat4.invert([],vn);n.ad.mat4.transpose(kn,kn),n.ad.mat4.scale(kn,kn,Kd),vn=n.ad.mat4.multiply(vn,vn,Xn.matrix);const ns=Fe.renderPass==="light-beam",_s=nt.paint.get("model-color-use-theme").constantOr("default")==="none",co=pn&n.ds.HasMapboxMeshFeatures,ao=co?0:mn.evaluatedRMEA[0][2];for(let Ro=0;Ro<Xn.meshes.length;++Ro){const Vn=Xn.meshes[Ro],di=Ro===Xn.lightMeshIndex;let Bn=rr.wvpForNode;if(di){if(!ns&&!Fe.terrain&&Fe.shadowRenderer){Fe.currentLayer<Fe.firstLightBeamLayer&&(Fe.firstLightBeamLayer=Fe.currentLayer);continue}Bn=rr.wvpForTile}else if(ns)continue;const fi={defines:[]},To=[];if(!ua&&lt&&(lt.useNormalOffset=!!Vn.normalBuffer),$d(fi.defines,To,Vn,Fe,_s?null:nt.lut),co||fi.defines.push("DIFFUSE_SHADED"),jr&&fi.defines.push("SHADOWS_SINGLE_CASCADE"),ka&&(ua?ka.numRenderedVerticesInShadowPass+=Vn.vertexArray.length:ka.numRenderedVerticesInTransparentPass+=Vn.vertexArray.length),ua){Df(Vn,rr.nodeModelMatrix,Fe,nt);continue}let Ni=null;if(ot){const sc=Iu(rr.nodeModelMatrix,Fe.transform);if(Ni=new Float32Array(sc),st.projection.name!=="globe"){const bl=Vn.aabb.min,Qd=Vn.aabb.max,[Co,Mh]=ot.getOpacityForBounds(sc,bl[0],bl[1],Qd[0],Qd[1]);fi.overrideFog=Co>=Fa||Mh>=Fa}}const ps=Vn.material;let zc;ps.occlusionTexture&&ps.occlusionTexture.offsetScale&&(zc=ps.occlusionTexture.offsetScale,fi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Jo=Fe.getOrCreateProgram("model",fi);!ua&&lt&&lt.setupShadowsFromMatrix(rr.tileModelMatrix,Jo,lt.useNormalOffset),Fe.uploadCommonUniforms(pt,Jo,null,Ni);const hu=ps.pbrMetallicRoughness;hu.metallicFactor=.9,hu.roughnessFactor=.5;const Gl=pr(new Float32Array(Bn),new Float32Array(vn),new Float32Array(kn),new Float32Array(Xn.matrix),Fe,rr.opacity,hu.baseColorFactor.toRenderColor(null),ps.emissiveFactor,hu.metallicFactor,hu.roughnessFactor,ps,ao,nt,[0,0,0],zc);!di&&(mn.hasTranslucentParts||rr.opacity<1)&&Jo.draw(Fe,pt.gl.TRIANGLES,kt,Nr.disabled,Dr.disabled,xr.backCCW,Gl,nt.id,Vn.vertexBuffer,Vn.indexBuffer,Vn.segments,nt.paint,Fe.transform.zoom,void 0,To),Jo.draw(Fe,pt.gl.TRIANGLES,di?la:kt,Nr.disabled,di||rr.opacity<1||mn.hasTranslucentParts?Dr.alphaBlended:Dr.unblended,xr.backCCW,Gl,nt.id,Vn.vertexBuffer,Vn.indexBuffer,Vn.segments,nt.paint,Fe.transform.zoom,void 0,To)}}}}()}(y,o,d,A),void q();if(K.type!=="model")return;const Y=K.getModels(),ae=[],re=y.transform.getFreeCameraOptions().position,me=n.ad.vec3.scale([],[re.x,re.y,re.z],y.transform.worldSize);n.ad.vec3.negate(me,me);const be=[],Te=[];let ze=0;for(const Fe of Y){const Ke=d.paint.get("model-rotation").constantOr(null),nt=d.paint.get("model-scale").constantOr(null),at=d.paint.get("model-translation").constantOr(null);Fe.computeModelMatrix(y,Ke,nt,at,!0,!0,!1);const pt=n.ad.mat4.identity([]),st=n.dm(Fe.position.lat,y.transform.zoom),ot=n.ad.mat4.fromScaling([],[1,1,1/st]);n.ad.mat4.translate(pt,pt,me),ae.push({zScaleMatrix:ot,negCameraPosMatrix:pt});for(const lt of Fe.nodes)nd(y.transform,lt,Fe.matrix,y.transform.expandedFarZProjMatrix,ze,be,Te);ze++}if(be.sort((Fe,Ke)=>Ke.depth-Fe.depth),y.renderPass!=="shadow"){if(T===1)for(const Fe of Te)Lu(Fe,y,d,ae[Fe.modelIndex],Nr.disabled,y.colorModeForRenderPass());else{for(const Fe of Te)Lu(Fe,y,d,ae[Fe.modelIndex],Nr.disabled,Dr.disabled);for(const Fe of Te)Lu(Fe,y,d,ae[Fe.modelIndex],y.stencilModeFor3D(),y.colorModeForRenderPass());y.resetStencilClippingMasks()}for(const Fe of be)Lu(Fe,y,d,ae[Fe.modelIndex],Nr.disabled,y.colorModeForRenderPass());q()}else{for(const Fe of Te)Df(Fe.mesh,Fe.nodeModelMatrix,y,d);for(const Fe of be)Df(Fe.mesh,Fe.nodeModelMatrix,y,d);q()}}},Yd={line:function(y,o,d){if(y.hasElevatedBuckets=!1,y.hasNonElevatedBuckets=!1,y._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||y._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(o){const A=o.getVisibleCoordinates();for(const T of A){const S=o.getTile(T).getBucket(y);if(S&&(S.hasZOffset?y.hasElevatedBuckets=!0:y.hasNonElevatedBuckets=!0,y.hasElevatedBuckets&&y.hasNonElevatedBuckets))break}}}else y.hasNonElevatedBuckets=!0},model:function(y,o,d){const A=o.getSource();if(!A.loaded())return;if(A.type==="vector"||A.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,A.type==="vector"?y.scope:""));if(A.type==="batched-model"||A.type!=="model")return;const T=A.getModels();for(const S of T)S.upload(d.context)},raster:function(y,o,d){const A=o.getSource();if(!(A instanceof Bi&&A.loaded()))return;const T=y.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!T)return;const S=y.paint.get("raster-array-band")||A.getInitialBand(T);if(S==null)return;const E=o.getIds().map(F=>o.getTileByID(F));for(const F of E)F.updateNeeded(T,S)&&A.prepareTile(F,T,S)},"raster-particle":function(y,o,d){const A=o.getSource();if(!(A instanceof Bi&&A.loaded()))return;const T=y.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!T)return;const S=y.paint.get("raster-particle-array-band")||A.getInitialBand(T);if(S==null)return;const E=o.getIds().map(F=>o.getTileByID(F));for(const F of E)F.updateNeeded(T,S)&&A.prepareTile(F,T,S)}},og={fill:Oo};class um{constructor(o,d,A,T,S){this.context=new xn(o,d),this.transform=A,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=S,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const E=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const q of E)this._debugParams.enabledLayers[q]=!0;S.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),S.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),S.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),S.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const q of E)S.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],q);this.occlusionParams=new gp(S),this.setup(),this.numSublayers=rl.maxUnderzooming+rl.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dy,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new vo(this),this._wireframeDebugCache=new sd,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const F=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,F,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=T}updateTerrain(o,d){const A=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(A||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Hd(this,o));const T=this._terrain;this.transform.elevation=A?T:null,T.update(o,this.transform,d),this.transform.elevation&&!T.enabled&&(this.transform.elevation=null)}_updateFog(o){const d=o.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[A,T]=d.getFovAdjustedRange(this.transform._fov);if(A>T)return void(this.transform.fogCullDistSq=null);const S=A+.78*(T-A);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new Hd(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,d){if(this.width=o*n.q.devicePixelRatio,this.height=d*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style.order)this.style._mergedLayers[A].resize()}setup(){const o=this.context,d=new n.b5;d.emplaceBack(0,0),d.emplaceBack(n.ai,0),d.emplaceBack(0,n.ai),d.emplaceBack(n.ai,n.ai),this.tileExtentBuffer=o.createVertexBuffer(d,n.b7.members),this.tileExtentSegments=n.b8.simpleSegment(0,0,4,2);const A=new n.b5;A.emplaceBack(0,0),A.emplaceBack(n.ai,0),A.emplaceBack(0,n.ai),A.emplaceBack(n.ai,n.ai),this.debugBuffer=o.createVertexBuffer(A,n.b7.members),this.debugSegments=n.b8.simpleSegment(0,0,4,5);const T=new n.b5;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(T,n.b7.members),this.viewportSegments=n.b8.simpleSegment(0,0,4,2);const S=new n.aU;S.emplaceBack(0,0,0,0),S.emplaceBack(n.ai,0,n.ai,0),S.emplaceBack(0,n.ai,0,n.ai),S.emplaceBack(n.ai,n.ai,n.ai,n.ai),this.mercatorBoundsBuffer=o.createVertexBuffer(S,n.ba.members),this.mercatorBoundsSegments=n.b8.simpleSegment(0,0,4,2);const E=new n.aV;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(E);const F=new n.b6;for(const K of[0,1,3,2,0])F.emplaceBack(K);this.debugIndexBuffer=o.createIndexBuffer(F),this.emptyTexture=new n.T(o,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=n.ad.mat4.create();const q=this.context.gl;this.stencilClearMode=new Nr({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,cr.disabled,this.stencilClearMode,Dr.disabled,xr.disabled,Jc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,d,A){if(!d||this.currentStencilSource===d.id||!o.isTileClipped()||!A||A.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let F=!1;for(const q of A)if(this._tileClippingMaskIDs[q.key]===void 0){F=!0;break}if(!F)return}this.currentStencilSource=d.id;const T=this.context,S=T.gl;this.nextStencilID+A.length>256&&this.clearStencil(),T.setColorMode(Dr.disabled),T.setDepthMode(cr.disabled);const E=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of A){const q=d.getTile(F),K=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,{tileBoundsBuffer:Y,tileBoundsIndexBuffer:ae,tileBoundsSegments:re}=this.getTileBoundsBuffers(q);E.draw(this,S.TRIANGLES,cr.disabled,new Nr({func:S.ALWAYS,mask:0},K,255,S.KEEP,S.KEEP,S.REPLACE),Dr.disabled,xr.disabled,Jc(F.projMatrix),"$clipping",Y,ae,re)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,d=this.context.gl;return new Nr({func:d.NOTEQUAL,mask:255},o,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const d=this.context.gl;return new Nr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(o){const d=this.context.gl,A=o.sort((E,F)=>F.overscaledZ-E.overscaledZ),T=A[A.length-1].overscaledZ,S=A[0].overscaledZ-T+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const E={};for(let F=0;F<S;F++)E[F+T]=new Nr({func:d.GEQUAL,mask:255},F+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=S,[E,A]}return[{[T]:Nr.disabled},A]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Dr([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new n.al(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Dr.unblended:Dr.alphaBlended}colorModeForDrapableLayerRenderPass(o){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Dr([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new n.al(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,d,A,T=!1){if(this.depthOcclusion)return new cr(this.context.gl.GREATER,cr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!T)return cr.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new cr(A||this.context.gl.LEQUAL,d,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,d=Math.ceil(this.width),A=Math.ceil(this.height),T=this.context.bindFramebuffer.get(),S=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===A||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&A!==0&&(this.depthFBO=new Hn(this.context,d,A,!1,"texture"),this.depthTexture=new n.T(this.context,{width:d,height:A,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(T),o.bindTexture(o.TEXTURE_2D,S),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,d,A,0,0,d,A,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,d)=>o+d/this._fpsHistory.length,0))}render(o,d){const A=n.q.now();this._dt=A-this._timeStamp,this._timeStamp=A,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=d;const T=this.style._mergedLayers,S=!(!this.terrain||!this.terrain.enabled),E=()=>this.style._getOrder(S).filter(kt=>{const la=T[kt];return!(la.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[la.type]});let F=E(),q=!1,K=!1;for(const kt of F){const la=T[kt];la.type==="circle"&&(q=!0),la.type==="symbol"&&(la.hasInitialOcclusionOpacityProperties?K=!0:q=!0)}let Y=F.map(kt=>T[kt]);const ae=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let re=0,me=!1;for(const kt in ae){const la=ae[kt];la.used&&(la.prepare(this.context),la.getSource().usedInConflation&&++re)}let be=!1;for(const kt of Y)kt.isHidden(this.transform.zoom)||(kt.type==="clip"&&(be=!0),this.prepareLayer(kt));const Te={},ze={},Fe={},Ke={},nt={};for(const kt in ae){const la=ae[kt];Te[kt]=la.getVisibleCoordinates(),ze[kt]=Te[kt].slice().reverse(),Fe[kt]=la.getVisibleCoordinates(!0).reverse(),Ke[kt]=la.getShadowCasterCoordinates(),nt[kt]=la.sortCoordinatesByDistance(Te[kt])}const at=kt=>{const la=this.style.getLayerSourceCache(kt);return la&&la.used?la.getSource():null};if(re||be||this._clippingActiveLastFrame){const kt=[],la=[];let zt=0;for(const ua of Y)this.isSourceForClippingOrConflation(ua,at(ua))&&(kt.push(ua),la.push(zt)),zt++;if(kt&&(be||kt.length>1)||this._clippingActiveLastFrame){be=!1;const ua=[];for(let ta=0;ta<kt.length;ta++){const ha=kt[ta],Xt=la[ta],ga=this.style.getLayerSourceCache(ha);if(!ga||!ga.used||!ga.getSource().usedInConflation&&ha.type!=="clip")continue;let ka=n.dA,Ua=n.by.None;const Va=[];let dr=!0;if(ha.type==="clip"){ka=Xt;for(const qr of ha.layout.get("clip-layer-types"))Ua|=qr==="model"?n.by.Model:qr==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const qr of ha.layout.get("clip-layer-scope"))Va.push(qr);ha.isHidden(this.transform.zoom)?dr=!1:be=!0}dr&&ua.push({layer:ha.fqid,cache:ga,order:ka,clipMask:Ua,clipScope:Va})}this.replacementSource.setSources(ua),me=!0}}this._clippingActiveLastFrame=be,me||this.replacementSource.clear(),this.conflationActive=me,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let kt=0;kt<Y.length;kt++){const la=Y[kt],zt=la.cutoffRange();if(this.longestCutoffRange=Math.max(zt,this.longestCutoffRange),zt>0){const ua=at(la);ua&&(this.minCutoffZoom=Math.max(ua.minzoom,this.minCutoffZoom)),la.minzoom&&(this.minCutoffZoom=Math.max(la.minzoom,this.minCutoffZoom))}la.is3D(S)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=kt),this._lastOcclusionLayer=kt)}const pt=this.style&&this.style.fog;pt?(this._fogVisible=pt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=pt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Fe),this.opaquePassCutoff=0,F=E(),Y=F.map(kt=>T[kt]));const st=this._shadowRenderer;if(st){st.updateShadowParameters(this.transform,this.style.directionalLight);for(const kt in ae)for(const la of Te[kt]){let zt={min:0,max:0};this.terrain&&(zt=this.terrain.getMinMaxForTile(la)||zt),st.addShadowReceiver(la.toUnwrapped(),zt.min,zt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dz(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new fp(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const ot=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),lt=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(ot&&!this._snow&&(this._snow=new af(this)),!ot&&this._snow&&(this._snow.destroy(),delete this._snow),lt&&!this._rain&&(this._rain=new Nh(this)),!lt&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!Dt.has(this.context.gl))return;this.renderPass="offscreen";for(const kt of Y){const la=o.getLayerSourceCache(kt);if(!kt.hasOffscreenPass()||kt.isHidden(this.transform.zoom))continue;const zt=la?ze[la.id]:void 0;(kt.type==="custom"||kt.type==="raster"||kt.type==="raster-particle"||kt.isSky()||zt&&zt.length)&&this.renderLayer(this,la,kt,zt)}this.depthRangeFor3D=[0,1-(Y.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ke)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const vt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Tt=(()=>{if(d.showOverdrawInspector)return n.al.black;const kt=this.style.fog;if(kt&&this.transform.projection.supportsFog){const la=this.style.getLut(kt.scope);if(!vt){const zt=kt.properties.get("color-use-theme")==="none",ua=kt.properties.get("color").toRenderColor(zt?null:la).toArray01();return new n.al(...ua)}if(vt){const zt=kt.properties.get("space-color-use-theme")==="none",ua=kt.properties.get("space-color").toRenderColor(zt?null:la).toArray01();return new n.al(...ua)}}return n.al.transparent})();if(this.context.clear({color:Tt,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&vt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=F.length-1;this.currentLayer>=0;this.currentLayer--){const kt=Y[this.currentLayer],la=o.getLayerSourceCache(kt);if(kt.isSky())continue;const zt=la?(kt.is3D(S)?nt:ze)[la.id]:void 0;this._renderTileClippingMasks(kt,la,zt),this.renderLayer(this,la,kt,zt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&vt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ag(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<F.length;this.currentLayer++){const kt=Y[this.currentLayer],la=o.getLayerSourceCache(kt);kt.isSky()&&this.renderLayer(this,la,kt,la?ze[la.id]:void 0)}function Qt(kt,la){let zt;return la&&(zt=(kt.type==="symbol"?Fe:kt.is3D(S)?nt:ze)[la.id]),zt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<F.length;){const kt=Y[this.currentLayer];if(kt.type==="raster"||kt.type==="raster-particle"){const la=o.getLayerSourceCache(kt);this.renderLayer(this,la,kt,Qt(kt,la))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ut=0;st&&(Ut=st.getShadowCastingLayerCount());let ia=!1,da=-1;for(let kt=0;kt<F.length;++kt){const la=Y[kt];la.isHidden(this.transform.zoom)||la.is3D(S)&&(da=kt)}K&&da===-1&&(q=!0);let xa=!1;for(;this.currentLayer<F.length;){const kt=Y[this.currentLayer],la=o.getLayerSourceCache(kt);if(kt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(kt)){if(kt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!xa&&kt.is3D(S)&&!S){const zt=this.currentLayer,ua=ta=>{for(this.currentLayer=0;this.currentLayer<Y.length;this.currentLayer++){const ha=Y[this.currentLayer];if(og[ha.type]){const Xt=this.style.getLayerSourceCache(ha);og[ha.type](this,Xt,ha,Qt(ha,Xt),ta)}}};ua("initialize"),ua("reset"),this.currentLayer=zt,xa=!0}if(q&&!ia&&this.terrain&&!this.transform.isOrthographic&&(ia=!0,this.blitDepth()),K&&da!==-1&&this.currentLayer===da+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(kt,la,la?Te[la.id]:void 0),this.renderLayer(this,la,kt,Qt(kt,la)),!this.terrain&&st&&Ut>0&&kt.hasShadowPass()&&--Ut==0&&(st.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const zt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=zt;this.currentLayer++){const ua=Y[this.currentLayer];if(!ua.hasLightBeamPass())continue;const ta=o.getLayerSourceCache(ua);this.renderLayer(this,ta,ua,ta?ze[ta.id]:void 0)}this.currentLayer=zt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const zt=this.currentLayer;this.depthOcclusion=!0;for(const ua of this.layersWithOcclusionOpacity){this.currentLayer=ua;const ta=Y[this.currentLayer],ha=o.getLayerSourceCache(ta),Xt=ha?ze[ha.id]:void 0;this.terrain||this._renderTileClippingMasks(ta,ha,ha?Te[ha.id]:void 0),this.renderLayer(this,ha,ta,Xt)}this.depthOcclusion=!1,this.currentLayer=zt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let kt=null;Y.forEach(la=>{const zt=o.getLayerSourceCache(la);zt&&!la.isHidden(this.transform.zoom)&&zt.getVisibleCoordinates().length&&(!kt||kt.getSource().maxzoom<zt.getSource().maxzoom)&&(kt=zt)}),kt&&this.options.showTileBoundaries&&Oh.debug(this,kt,kt.getVisibleCoordinates(),n.al.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Oh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.al(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(kt){const la=kt.transform.padding;ef(kt,kt.transform.height-(la.top||0),3,tc),ef(kt,la.bottom||0,3,ng),td(kt,la.left||0,3,dp),td(kt,kt.transform.width-(la.right||0),3,ig);const zt=kt.transform.centerPoint;(function(ua,ta,ha,Xt){ad(ua,ta-1,ha-10,2,20,Xt),ad(ua,ta-10,ha-1,20,2,Xt)})(kt,zt.x,kt.transform.height-zt.y,xh)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),me||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:d}=this.transform.projection,A=!d||!d.includes(o.type);if(Yd[o.type]&&(A||this.terrain&&o.type==="custom")){const T=this.style.getLayerSourceCache(o);Yd[o.type](o,T,this)}this.gpuTimingEnd()}renderLayer(o,d,A,T){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="sky"||A.type==="custom"||A.type==="model"||A.type==="raster"||A.type==="raster-particle"||T&&T.length)&&(this.id=A.id,this.gpuTimingStart(A),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(A.type)&&(!o.terrain||A.type!=="custom")||A.type==="clip"||Oh[A.type](o,d,A,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,A=this.context.gl;let T=this.gpuTimers[o.id];T||(T=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:A.createQuery()}),T.calls++,A.beginQuery(d.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,d=this.context.gl,A=d.createQuery();this.deferredRenderGpuTimeQueries.push(A),d.beginQuery(o.TIME_ELAPSED_EXT,A)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const d={};for(const A in o){const T=o[A],S=this.context.extTimerQuery,E=S.getQueryParameter(T.query,this.context.gl.QUERY_RESULT)/1e6;S.deleteQueryEXT(T.query),d[A]=E}return d}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let A=0;for(const T of o)A+=d.getQueryParameter(T,d.QUERY_RESULT)/1e6,d.deleteQuery(T);return A}translatePosMatrix(o,d,A,T,S){if(!A[0]&&!A[1])return o;const E=S?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(E){const K=Math.sin(E),Y=Math.cos(E);A=[A[0]*Y-A[1]*K,A[0]*K+A[1]*Y]}const F=[S?A[0]:n.at(d,A[0],this.transform.zoom),S?A[1]:n.at(d,A[1],this.transform.zoom),0],q=new Float32Array(16);return n.ad.mat4.translate(q,o,F),q}saveTileTexture(o){const d=o.size[0],A=this._tileTextures[d];A?A.push(o):this._tileTextures[d]=[o]}getTileTexture(o){const d=this._tileTextures[o];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,d,A){const T=A===void 0?this.terrain&&this.terrain.renderingToTexture:A,S=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(S.push("LIGHTING_3D_MODE"),S.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):T||S.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||S.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(S.push("TERRAIN"),this.linearFloatFilteringSupported()&&S.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&S.push("GLOBE"),!this._fogVisible||T||d!==void 0&&!d||S.push("FOG","FOG_DITHERING"),T&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}getOrCreateProgram(o,d){this.cache=this.cache||{};const A=d&&d.defines||[],T=d&&d.config,S=this.currentGlobalDefines(o,d&&d.overrideFog,d&&d.overrideRtt).concat(A),E=rg.cacheKey(sl[o],o,S,T);return this.cache[E]||(this.cache[E]=new rg(this.context,o,sl[o],T,Ii[o],S)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,d){if(this.style.enable3dLights()){const A=this.style.directionalLight,T=this.style.ambientLight;if(A&&T){const S=((E,F,q)=>{const K=E.properties.get("direction"),Y=E.properties.get("color-use-theme")==="none",ae=E.properties.get("color").toRenderColor(Y?null:q.getLut(E.scope)).toArray01(),re=E.properties.get("intensity"),me=F.properties.get("color-use-theme")==="none",be=F.properties.get("color").toRenderColor(me?null:q.getLut(F.scope)).toArray01(),Te=F.properties.get("intensity"),ze=[K.x,K.y,K.z],Fe=n.cN(be,Te),Ke=n.cN(ae,re);return{u_lighting_ambient_color:Fe,u_lighting_directional_dir:ze,u_lighting_directional_color:Ke,u_ground_radiance:ed(ze,Ke,Fe)}})(A,T,this.style);d.setLightsUniformValues(o,S)}}}uploadCommonUniforms(o,d,A,T,S){if(this.uploadCommonLightUniforms(o,d),this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const F=E.getOpacity(this.transform.pitch),q=((K,Y,ae,re,me,be,Te,ze,Fe,Ke,nt,at)=>{const pt=K.transform,st=Y.properties.get("color-use-theme")==="none",ot=Y.properties.get("color").toRenderColor(st?null:K.style.getLut(Y.scope)).toArray01();ot[3]=re;const lt=K.frameCounter/1e3%1,[vt,Tt]=Y.properties.get("vertical-range");return{u_fog_matrix:ae?pt.calculateFogTileMatrix(ae):at||K.identityMat,u_fog_range:Y.getFovAdjustedRange(pt._fov),u_fog_color:ot,u_fog_horizon_blend:Y.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(vt,Tt),Tt],u_fog_temporal_offset:lt,u_frustum_tl:me,u_frustum_tr:be,u_frustum_br:Te,u_frustum_bl:ze,u_globe_pos:Fe,u_globe_radius:Ke,u_viewport:nt,u_globe_transition:n.ag(pt.zoom),u_is_globe:+(pt.projection.name==="globe")}})(this,E,A,F,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],T);d.setFogUniformValues(o,q)}S&&d.setCutoffUniformValues(o,S.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,d=o.createTexture();return o.bindTexture(o.TEXTURE_2D,d),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,d=this._backgroundTiles={},A=this.transform.coveringTiles({tileSize:512});for(const T of A)d[T.key]=o[T.key]||new eu(T,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,d){return!(!o.is3D(!(!this.terrain||!this.terrain.enabled))||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[o.key];return d||(this._cachedTileFogOpacities[o.key]=d=this.style.fog.getOpacityForTile(o)),d[0]>=Fa||d[1]>=Fa}setupDepthForOcclusion(o,d,A){const T=this.context,S=T.gl,E=!!A;var F;A||(A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),T.activeTexture.set(S.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),A.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],A.u_depth_range_unpack=[2/((F=this.depthRangeFor3D)[1]-F[0]),-1-2*F[0]/(F[1]-F[0])],A.u_occluder_half_size=.5*this.occlusionParams.occluderSize,A.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),T.activeTexture.set(S.TEXTURE0),E||d.setTerrainUniformValues(T,A)}}function lg(y,o){let d=!1,A=null;const T=()=>{A=null,d&&(y(),A=setTimeout(T,o),d=!1)};return()=>(d=!0,A||T(),A)}class Yg{constructor(o){this._hashName=o&&encodeURIComponent(o),n.aQ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=lg(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const d=gA(o);if(this._hashName){const A=this._hashName;let T=!1;const S=location.hash.slice(1).split("&").map(E=>{const F=E.split("=")[0];return F===A?(T=!0,`${F}=${d}`):E}).filter(E=>E);return T||S.push(`${A}=${d}`),`#${S.join("&")}`}return`#${d}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let d;return o.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(d=A)}),(d&&d[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(A=>isNaN(A))){const A=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(d[3]||0):o.getBearing();return o.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:A,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function gA(y,o){const d=y.getCenter(),A=Math.round(100*y.getZoom())/100,T=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,T),E=Math.round(d.lng*S)/S,F=Math.round(d.lat*S)/S,q=y.getBearing(),K=y.getPitch();let Y=o?`/${E}/${F}/${A}`:`${A}/${F}/${E}`;return(q||K)&&(Y+="/"+Math.round(10*q)/10),K&&(Y+=`/${Math.round(K)}`),Y}const cm={linearity:.3,easing:n.dB(0,0,.3,1)},fl=n.l({deceleration:2500,maxSpeed:1400},cm),Rl=n.l({deceleration:20,maxSpeed:1400},cm),yA=n.l({deceleration:1e3,maxSpeed:360},cm),AA=n.l({deceleration:1e3,maxSpeed:90},cm);class vA{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,d=n.q.now();for(;o.length>0&&d-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)d.zoom+=S.zoomDelta||0,d.bearing+=S.bearingDelta||0,d.pitch+=S.pitchDelta||0,S.panDelta&&d.pan._add(S.panDelta),S.around&&(d.around=S.around),S.pinchAround&&(d.pinchAround=S.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(d.pan.mag()){const S=hm(d.pan.mag(),A,n.l({},fl,o||{}));T.offset=d.pan.mult(S.amount/d.pan.mag()),T.center=this._map.transform.center,dm(T,S)}if(d.zoom){const S=hm(d.zoom,A,Rl);T.zoom=this._map.transform.zoom+S.amount,dm(T,S)}if(d.bearing){const S=hm(d.bearing,A,yA);T.bearing=this._map.transform.bearing+n.ay(S.amount,-179,179),dm(T,S)}if(d.pitch){const S=hm(d.pitch,A,AA);T.pitch=this._map.transform.pitch+S.amount,dm(T,S)}if(T.zoom||T.bearing){const S=d.pinchAround===void 0?d.around:d.pinchAround;T.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function dm(y,o){(!y.duration||y.duration<o.duration)&&(y.duration=o.duration,y.easing=o.easing)}function hm(y,o,d){const{maxSpeed:A,linearity:T,deceleration:S}=d,E=n.ay(y*T/(o/1e3),-A,A),F=Math.abs(E)/(S*T);return{easing:d.easing,duration:1e3*F,amount:E*(F/2)}}class Tl extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,A,T={}){const S=Re(d.getCanvasContainer(),A),E=d.unproject(S);super(o,n.l({point:S,lngLat:E,originalEvent:A},T)),this._defaultPrevented=!1,this.target=d}}class Ap extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,A){const T=o==="touchend"?A.changedTouches:A.touches,S=we(d.getCanvasContainer(),T),E=S.map(q=>d.unproject(q)),F=S.reduce((q,K,Y,ae)=>q.add(K.div(ae.length)),new n.P(0,0));super(o,{points:S,point:F,lngLats:E,lngLat:d.unproject(F),originalEvent:A}),this._defaultPrevented=!1}}class _A extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class wA{constructor(o,d){this._map=o,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new _A(this._map,o))}mousedown(o,d){return this._mousedownPos=d,this._firePreventable(new Tl(o.type,this._map,o))}mouseup(o){this._map.fire(new Tl(o.type,this._map,o))}preclick(o){const d=n.l({},o);d.type="preclick",this._map.fire(new Tl(d.type,this._map,d))}click(o,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(o),this._map.fire(new Tl(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new Tl(o.type,this._map,o))}mouseover(o){this._map.fire(new Tl(o.type,this._map,o))}mouseout(o){this._map.fire(new Tl(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Ap(o.type,this._map,o))}touchmove(o){this._map.fire(new Ap(o.type,this._map,o))}touchend(o){this._map.fire(new Ap(o.type,this._map,o))}touchcancel(o){this._map.fire(new Ap(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class a0{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new Tl(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Tl(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class RA{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,d){this.isEnabled()&&o.shiftKey&&o.button===0&&(pe(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(o,d){if(!this._active)return;const A=d,T=this._startPos,S=this._lastPos;if(!T||!S||S.equals(A)||!this._box&&A.dist(T)<this._clickTolerance)return;this._lastPos=A,this._box||(this._box=$("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const E=Math.min(T.x,A.x),F=Math.max(T.x,A.x),q=Math.min(T.y,A.y),K=Math.max(T.y,A.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${q}px)`,this._box.style.width=F-E+"px",this._box.style.height=K-q+"px")})}mouseupWindow(o,d){if(!this._active)return;const A=this._startPos,T=d;if(A&&o.button===0){if(this.reset(),ue(),A.x!==T.x||A.y!==T.y)return this._map.fire(new n.A("boxzoomend",{originalEvent:o})),{cameraAnimation:S=>S.fitScreenCoordinates(A,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),le(),delete this._startPos,delete this._lastPos}_fireEvent(o,d){return this._map.fire(new n.A(o,{originalEvent:d}))}}function Gi(y,o){const d={};for(let A=0;A<y.length;A++)d[y[A].identifier]=o[A];return d}class Xg{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,d,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),A.length===this.numTouches&&(this.centroid=function(T){const S=new n.P(0,0);for(const E of T)S._add(E);return S.div(T.length)}(d),this.touches=Gi(A,d)))}touchmove(o,d,A){if(this.aborted||!this.centroid)return;const T=Gi(A,d);for(const S in this.touches){const E=T[S];(!E||E.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(o,d,A){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class Jg{constructor(o){this.singleTap=new Xg(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,d,A){this.singleTap.touchstart(o,d,A)}touchmove(o,d,A){this.singleTap.touchmove(o,d,A)}touchend(o,d,A){const T=this.singleTap.touchend(o,d,A);if(T){const S=o.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(T)<30;if(S&&E||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class TA{constructor(){this._zoomIn=new Jg({numTouches:1,numTaps:2}),this._zoomOut=new Jg({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,d,A){this._zoomIn.touchstart(o,d,A),this._zoomOut.touchstart(o,d,A)}touchmove(o,d,A){this._zoomIn.touchmove(o,d,A),this._zoomOut.touchmove(o,d,A)}touchend(o,d,A){const T=this._zoomIn.touchend(o,d,A),S=this._zoomOut.touchend(o,d,A);return T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(T)},{originalEvent:o})}):S?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(S)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vp={0:1,2:2},ug={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class fm{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,d){return!1}_move(o,d){return{}}mousedown(o,d){if(this._lastPoint)return;const A=Ne(o);this._correctButton(o,A)&&(this._lastPoint=d,this._eventButton=A)}mousemoveWindow(o,d){const A=this._lastPoint;if(A){if(o.preventDefault(),this._eventButton!=null&&function(T,S){const E=vp[S];return T.buttons===void 0||(T.buttons&E)!==E}(o,this._eventButton))this.reset();else if(this._moved||!(d.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(A,d)}}mouseupWindow(o){this._lastPoint&&Ne(o)===this._eventButton&&(this._moved&&ue(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pm extends fm{mousedown(o,d){super.mousedown(o,d),this._lastPoint&&(this._active=!0)}_correctButton(o,d){return d===0&&!o.ctrlKey}_move(o,d){return{around:d,panDelta:d.sub(o)}}}class Xd extends fm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?ug[o.pitchRotateKey]:void 0}_correctButton(o,d){return this._pitchRotateKey?d===0&&o[this._pitchRotateKey]:d===0&&o.ctrlKey||d===2}_move(o,d){const A=.8*(d.x-o.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Nc extends fm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?ug[o.pitchRotateKey]:void 0}_correctButton(o,d){return this._pitchRotateKey?d===0&&o[this._pitchRotateKey]:d===0&&o.ctrlKey||d===2}_move(o,d){const A=-.5*(d.y-o.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Ss{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),n.aQ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(o,d,A){return this._calculateTransform(o,d,A)}touchmove(o,d,A){if(this._active&&!(A.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(A.length===1&&!n.dC())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,d,A)}}touchend(o,d,A){this._calculateTransform(o,d,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,d,A){A.length>0&&(this._active=!0);const T=Gi(A,d),S=new n.P(0,0),E=new n.P(0,0);let F=0;for(const K in T){const Y=T[K],ae=this._touches[K];ae&&(S._add(Y),E._add(Y.sub(ae)),F++,T[K]=Y)}if(this._touches=T,F<this._minTouches||!E.mag())return;const q=E.div(F);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(F),panDelta:q}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class od{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,d,A){return{}}touchstart(o,d,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([d[0],d[1]]))}touchmove(o,d,A){const T=this._firstTwoTouches;if(!T)return;o.preventDefault();const[S,E]=T,F=_p(A,d,S),q=_p(A,d,E);if(!F||!q)return;const K=this._aroundCenter?null:F.add(q).div(2);return this._move([F,q],K,o)}touchend(o,d,A){if(!this._firstTwoTouches)return;const[T,S]=this._firstTwoTouches,E=_p(A,d,T),F=_p(A,d,S);E&&F||(this._active&&ue(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function _p(y,o,d){for(let A=0;A<y.length;A++)if(y[A].identifier===d)return o[A]}function wp(y,o){return Math.log(y/o)/Math.LN2}class If extends od{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,d){const A=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(wp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wp(this._distance,A),pinchAround:d}}}function Vh(y,o){return 180*y.angleWith(o)/Math.PI}class ld extends od{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,d){const A=this._vector;if(this._vector=o[0].sub(o[1]),A&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Vh(this._vector,A),pinchAround:d}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const d=25/(Math.PI*this._minDiameter)*360,A=this._startVector;if(!A)return!1;const T=Vh(o,A);return Math.abs(T)<d}}function Jd(y){return Math.abs(y.y)>Math.abs(y.x)}class CA extends od{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Jd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,d,A){const T=this._lastPoints;if(!T)return;const S=o[0].sub(T[0]),E=o[1].sub(T[1]);return this._map._cooperativeGestures&&!n.dC()&&A.touches.length<3||(this._valid=this.gestureBeginsVertically(S,E,A.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(S.y+E.y)/2*-.5})}gestureBeginsVertically(o,d,A){if(this._valid!==void 0)return this._valid;const T=o.mag()>=2,S=d.mag()>=2;if(!T&&!S)return;if(!T||!S)return this._firstMove==null&&(this._firstMove=A),A-this._firstMove<100&&void 0;const E=o.y>0==d.y>0;return Jd(o)&&Jd(d)&&E}}const cg={panStep:100,bearingStep:15,pitchStep:10};class Rp{constructor(){const o=cg;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let d=0,A=0,T=0,S=0,E=0;switch(o.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:o.shiftKey?A=-1:(o.preventDefault(),S=-1);break;case 39:o.shiftKey?A=1:(o.preventDefault(),S=1);break;case 38:o.shiftKey?T=1:(o.preventDefault(),E=-1);break;case 40:o.shiftKey?T=-1:(o.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(A=0,T=0),{cameraAnimation:F=>{const q=F.getZoom();F.easeTo({duration:300,easeId:"keyboardHandler",easing:Lf,zoom:d?Math.round(q)+d*(o.shiftKey?2:1):q,bearing:F.getBearing()+A*this._bearingStep,pitch:F.getPitch()+T*this._pitchStep,offset:[-S*this._panStep,-E*this._panStep],center:F.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Lf(y){return y*(2-y)}const Oc=4.000244140625,to=1/450;class rc{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=to,n.aQ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||n.dC()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const A=n.q.now(),T=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,d!==0&&d%Oc==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(T*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),o.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=o,this._delta-=d,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=Re(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const K=this._type==="wheel"&&Math.abs(this._delta)>Oc?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&Y!==0&&(Y=1/Y);const ae=d(),re=Math.pow(2,ae),me=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):re;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(me*Y))),this._type==="wheel"&&(this._startZoom=ae,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const A=typeof this._targetZoom=="number"?this._targetZoom:d(),T=this._startZoom,S=this._easing;let E,F=!1;if(this._type==="wheel"&&T&&S){const K=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),Y=S(K);E=n.ah(T,A,Y),K<1?this._frameId||(this._frameId=!0):F=!0}else E=A,F=!0;this._active=!0,F&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let q=E-d();return q*this._lastDelta<0&&(q=0),{noInertia:!0,needsRenderFrame:!F,zoomDelta:q,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let d=n.dD;if(this._prevEase){const A=this._prevEase,T=(n.q.now()-A.start)/A.duration,S=A.easing(T+.01)-A.easing(T),E=.27/Math.sqrt(S*S+1e-4)*.01,F=Math.sqrt(.0729-E*E);d=n.dB(E,F,.25,1)}return this._prevEase={start:n.q.now(),duration:o,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class rf{constructor(o,d){this._clickZoom=o,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class nc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,d){return o.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(o.shiftKey?-1:1),around:A.unproject(d)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zh{constructor(){this._tap=new Jg({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,d,A){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=d[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(o,d,A))}touchmove(o,d,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const T=d[0],S=T.y-this._swipePoint.y;return this._swipePoint=T,o.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(o,d,A)}touchend(o,d,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(o,d,A)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class SA{constructor(o,d,A){this._el=o,this._mousePan=d,this._touchPan=A}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ff{constructor(o,d,A){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=d,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class kf{constructor(o,d,A,T){this._el=o,this._touchZoom=d,this._touchRotate=A,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Uf=y=>y.zoom||y.drag||y.pitch||y.rotate;class Qg extends n.A{}class Cl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,d){const A=n.ad.vec3.sub([],d,o);this.radius=n.ad.vec3.length(A[2]<0?n.ad.vec3.div([],A,this.constants):[A[0],A[1],0])}projectRay(o){n.ad.vec3.div(o,o,this.constants),n.ad.vec3.normalize(o,o),n.ad.vec3.mul(o,o,this.constants);const d=n.ad.vec3.scale([],o,this.radius);if(d[2]>0){const A=n.ad.vec3.scale([],[0,0,1],n.ad.vec3.dot(d,[0,0,1])),T=n.ad.vec3.scale([],n.ad.vec3.normalize([],[d[0],d[1],0]),this.radius),S=n.ad.vec3.add([],d,n.ad.vec3.scale([],n.ad.vec3.sub([],n.ad.vec3.add([],T,A),d),2));d[0]=S[0],d[1]=S[1]}return d}}function Dh(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class mm{constructor(o,d){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vA(o),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Cl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),n.aQ(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[T,S,E]of this._listeners){const F=T===document?this.handleWindowEvent:this.handleEvent;T.addEventListener(S,F,E)}}destroy(){for(const[o,d,A]of this._listeners){const T=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(d,T,A)}}_addDefaultHandlers(o){const d=this._map,A=d.getCanvasContainer();this._add("mapEvent",new wA(d,o));const T=d.boxZoom=new RA(d,o);this._add("boxZoom",T);const S=new TA,E=new nc;d.doubleClickZoom=new rf(E,S),this._add("tapZoom",S),this._add("clickZoom",E);const F=new zh;this._add("tapDragZoom",F);const q=d.touchPitch=new CA(d);this._add("touchPitch",q);const K=new Xd(o),Y=new Nc(o);d.dragRotate=new Ff(o,K,Y),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]);const ae=new pm(o),re=new Ss(d,o);d.dragPan=new SA(A,ae,re),this._add("mousePan",ae),this._add("touchPan",re,["touchZoom","touchRotate"]);const me=new ld,be=new If;d.touchZoomRotate=new kf(A,be,me,F),this._add("touchRotate",me,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),this._add("blockableMapEvent",new a0(d));const Te=d.scrollZoom=new rc(d,this);this._add("scrollZoom",Te,["mousePan"]);const ze=d.keyboard=new Rp;this._add("keyboard",ze);for(const Fe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Fe]&&d[Fe].enable(o[Fe])}_add(o,d,A){this._handlers.push({handlerName:o,handler:d,allowed:A}),this._handlersById[o]=d}stop(o){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Uf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,d,A){for(const T in o)if(T!==A&&(!d||d.indexOf(T)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const d=[];for(const A of o)this._el.contains(A.target)&&d.push(A);return d}handleEvent(o,d){this._updatingCamera=!0;const A=o.type==="renderFrame",T=A?void 0:o,S={needsRenderFrame:!1},E={},F={},q=o.touches?this._getMapTouches(o.touches):void 0,K=q?we(this._el,q):A?void 0:Re(this._el,o);for(const{handlerName:re,handler:me,allowed:be}of this._handlers){if(!me.isEnabled())continue;let Te;this._blockedByActive(F,be,re)?me.reset():me[d||o.type]&&(Te=me[d||o.type](o,K,q),this.mergeHandlerResult(S,E,Te,re,T),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()),(Te||me.isActive())&&(F[re]=me)}const Y={};for(const re in this._previousActiveHandlers)F[re]||(Y[re]=T);this._previousActiveHandlers=F,(Object.keys(Y).length||Dh(S))&&(this._changes.push([S,E,Y]),this._triggerRenderFrame()),(Object.keys(F).length||Dh(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=S;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(o,d,A,T,S){if(!A)return;n.l(o,A);const E={handlerName:T,originalEvent:A.originalEvent||S};A.zoomDelta!==void 0&&(d.zoom=E),A.panDelta!==void 0&&(d.drag=E),A.pitchDelta!==void 0&&(d.pitch=E),A.bearingDelta!==void 0&&(d.rotate=E)}_applyChanges(){const o={},d={},A={};for(const[T,S,E]of this._changes)T.panDelta&&(o.panDelta=(o.panDelta||new n.P(0,0))._add(T.panDelta)),T.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(o.around=T.around),T.aroundCoord!==void 0&&(o.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(o.pinchAround=T.pinchAround),T.noInertia&&(o.noInertia=T.noInertia),n.l(d,S),n.l(A,E);this._updateMapTransform(o,d,A),this._changes=[]}_updateMapTransform(o,d,A){const T=this._map,S=T.transform,E=Ke=>[Ke.x,Ke.y,Ke.z];if((Ke=>{const nt=this._eventsInProgress.drag;return nt&&!this._handlersById[nt.handlerName].isActive()})()&&!Dh(o)){const Ke=S.zoom;S.cameraElevationReference="sea",this._originalZoom!=null&&S._orthographicProjectionAtLowPitch&&S.projection.name!=="globe"&&S.pitch===0?(S.cameraElevationReference="ground",S.zoom=this._originalZoom):(S.recenterOnTerrain(),S.cameraElevationReference="ground"),Ke!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&T._stop(!0),!Dh(o))return void this._fireEvents(d,A,!0);let{panDelta:F,zoomDelta:q,bearingDelta:K,pitchDelta:Y,around:ae,aroundCoord:re,pinchAround:me}=o;S._isCameraConstrained&&(q>0&&(q=0),S._isCameraConstrained=!1),me!==void 0&&(ae=me),(q||(Ke=>d[Ke]&&!this._eventsInProgress[Ke])("drag"))&&ae&&(this._dragOrigin=E(S.pointCoordinate3D(ae)),this._originalZoom=S.zoom,this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",T._stop(!0),ae=ae||T.transform.centerPoint,K&&(S.bearing+=K),Y&&(S.pitch+=Y),S._updateCameraState();const be=[0,0,0];if(F)if(S.projection.name==="mercator"){const Ke=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(ae).dir),nt=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(ae.sub(F)).dir);be[0]=nt[0]-Ke[0],be[1]=nt[1]-Ke[1]}else{const Ke=S.pointCoordinate(ae);if(S.projection.name==="globe"){F=F.rotate(-S.angle);const nt=S._pixelsPerMercatorPixel/S.worldSize;be[0]=-F.x*n.dE(n.aT(Ke.y))*nt,be[1]=-F.y*n.dE(S.center.lat)*nt}else{const nt=S.pointCoordinate(ae.sub(F));Ke&&nt&&(be[0]=nt.x-Ke.x,be[1]=nt.y-Ke.y)}}const Te=S.zoom,ze=[0,0,0];if(q){const Ke=E(re||S.pointCoordinate3D(ae)),nt={dir:n.ad.vec3.normalize([],n.ad.vec3.sub([],Ke,S._camera.position))};if(nt.dir[2]<0){const at=S.zoomDeltaToMovement(Ke,q);n.ad.vec3.scale(ze,nt.dir,at)}}const Fe=n.ad.vec3.add(be,be,ze);S._translateCameraConstrained(Fe),q&&Math.abs(S.zoom-Te)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(d,A,!0)}_fireEvents(o,d,A){const T=Uf(this._eventsInProgress),S=Uf(o),E={};for(const Y in o){const{originalEvent:ae}=o[Y];this._eventsInProgress[Y]||(E[`${Y}start`]=ae),this._eventsInProgress[Y]=o[Y]}!T&&S&&this._fireEvent("movestart",S.originalEvent);for(const Y in E)this._fireEvent(Y,E[Y]);S&&this._fireEvent("move",S.originalEvent);for(const Y in o){const{originalEvent:ae}=o[Y];this._fireEvent(Y,ae)}const F={};let q;for(const Y in this._eventsInProgress){const{handlerName:ae,originalEvent:re}=this._eventsInProgress[Y];this._handlersById[ae].isActive()||(delete this._eventsInProgress[Y],q=d[ae]||re,F[`${Y}end`]=q)}for(const Y in F)this._fireEvent(Y,F[Y]);const K=Uf(this._eventsInProgress);if(A&&(T||S)&&!K){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;Y?(ae(Y.bearing||this._map.getBearing())&&(Y.bearing=0),this._map.easeTo(Y,{originalEvent:q})):(this._map.fire(new n.A("moveend",{originalEvent:q})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,d){this._map.fire(new n.A(o,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new Qg("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const bA="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Tp extends n.E{constructor(o,d){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,n.aQ(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(o,d){return this.jumpTo({center:o},d)}panBy(o,d,A){return o=n.P.convert(o).mult(-1),this.panTo(this.transform.center,n.l({offset:o},d),A)}panTo(o,d,A){return this.easeTo(n.l({center:o},d),A)}getZoom(){return this.transform.zoom}setZoom(o,d){return this.jumpTo({zoom:o},d),this}zoomTo(o,d,A){return this.easeTo(n.l({zoom:o},d),A)}zoomIn(o,d){return this.zoomTo(this.getZoom()+1,o,d),this}zoomOut(o,d){return this.zoomTo(this.getZoom()-1,o,d),this}getBearing(){return this.transform.bearing}setBearing(o,d){return this.jumpTo({bearing:o},d),this}getPadding(){return this.transform.padding}setPadding(o,d){return this.jumpTo({padding:o},d),this}rotateTo(o,d,A){return this.easeTo(n.l({bearing:o},d),A)}resetNorth(o,d){return this.rotateTo(0,n.l({duration:1e3},o),d),this}resetNorthPitch(o,d){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},o),d),this}snapToNorth(o,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,d):this}getPitch(){return this.transform.pitch}setPitch(o,d){return this.jumpTo({pitch:o},d),this}cameraForBounds(o,d){o=n.aB.convert(o);const A=d&&d.bearing||0,T=d&&d.pitch||0,S=o.getNorthWest(),E=o.getSouthEast();return this._cameraForBounds(this.transform,S,E,A,T,d)}_extendPadding(o){const d={top:0,right:0,bottom:0,left:0};return o==null?n.l({},d,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:n.l({},d,o)}_extendCameraOptions(o){return(o=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,d){const A=d.max[0]-d.min[0],T=d.max[1]-d.min[1];return A/T>o.aspect?A/(2*Math.tan(.5*o.fovX)*o.aspect):T/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,d,A,T,S,E){const F=o.clone(),q=this._extendCameraOptions(E);F.bearing=T,F.pitch=S;const K=n.bO.convert(d),Y=n.bO.convert(A),ae=.5*(K.lat+Y.lat),re=.5*(K.lng+Y.lng),me=n.dF(ae,re),be=n.ad.vec3.normalize([],me),Te=n.ad.vec3.normalize([],n.ad.vec3.cross([],be,[0,1,0])),ze=n.ad.vec3.cross([],Te,be),Fe=[Te[0],Te[1],Te[2],0,ze[0],ze[1],ze[2],0,be[0],be[1],be[2],0,0,0,0,1],Ke=[me,n.dF(K.lat,K.lng),n.dF(Y.lat,K.lng),n.dF(Y.lat,Y.lng),n.dF(K.lat,Y.lng),n.dF(ae,K.lng),n.dF(ae,Y.lng),n.dF(K.lat,re),n.dF(Y.lat,re)];let nt=n.ce.fromPoints(Ke.map(ta=>[n.ad.vec3.dot(Te,ta),n.ad.vec3.dot(ze,ta),n.ad.vec3.dot(be,ta)]));const at=n.ad.vec3.transformMat4([],nt.center,Fe);n.ad.vec3.squaredLength(at)===0&&n.ad.vec3.set(at,0,0,1),n.ad.vec3.normalize(at,at),n.ad.vec3.scale(at,at,n.az),F.center=n.dG(at);const pt=F.getWorldToCameraMatrix(),st=n.ad.mat4.invert(new Float64Array(16),pt);nt=n.ce.applyTransform(nt,n.ad.mat4.multiply([],pt,Fe));const ot=this._extendAABB(nt,F,q,T);if(!ot)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");nt=ot,n.ad.vec3.transformMat4(at,at,pt);const lt=.5*(nt.max[2]-nt.min[2]),vt=this._minimumAABBFrustumDistance(F,nt),Tt=n.ad.vec3.scale([],[0,0,1],lt),Qt=n.ad.vec3.add(Tt,at,Tt),Ut=vt+(F.pitch===0?0:n.ad.vec3.distance(at,Qt)),ia=F.globeCenterInViewSpace,da=n.ad.vec3.sub([],at,[ia[0],ia[1],ia[2]]);n.ad.vec3.normalize(da,da),n.ad.vec3.scale(da,da,Ut);const xa=n.ad.vec3.add([],at,da);n.ad.vec3.transformMat4(xa,xa,st);const kt=n.dv/n.az,la=n.ad.vec3.length(xa),zt=n.bH(Math.max(la*kt-n.dv,Number.EPSILON),0),ua=Math.min(F.zoomFromMercatorZAdjusted(zt),q.maxZoom);return ua>.5*(n.c6+n.bY)?(F.setProjection({name:"mercator"}),F.zoom=ua,this._cameraForBounds(F,d,A,T,S,E)):{center:F.center,zoom:ua,bearing:T,pitch:S}}_extendAABB(o,d,A,T){const S=.5*((A.padding.left||0)+(A.padding.right||0)),E=.5*((A.padding.top||0)+(A.padding.bottom||0)),F=E,q=S,K=S,Y=E,ae=d.width-(q+K),re=d.height-(F+Y),me=n.ad.vec3.sub([],o.max,o.min),be=Math.min(ae/me[0],re/me[1]),Te=Math.min(d.scaleZoom(d.scale*be),A.maxZoom);if(isNaN(Te))return null;const ze=d.scale/d.zoomScale(Te),Fe=new n.ce([o.min[0]-q*ze,o.min[1]-Y*ze,o.min[2]],[o.max[0]+K*ze,o.max[1]+F*ze,o.max[2]]),Ke=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new n.P(A.offset.x,A.offset.y):n.P.convert(A.offset)).rotate(-n.ak(T));return Fe.center[0]-=Ke.x*ze,Fe.center[1]+=Ke.y*ze,Fe}queryTerrainElevation(o,d){const A=this.transform.elevation;return A?(d=n.l({},{exaggerated:!0},d),A.getAtPoint(n.ac.fromLngLat(o),null,d.exaggerated)):null}_cameraForBounds(o,d,A,T,S,E){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,d,A,T,S,E);const F=o.clone(),q=this._extendCameraOptions(E);F.bearing=T,F.pitch=S;const K=n.bO.convert(d),Y=n.bO.convert(A),ae=new n.bO(K.lng,Y.lat),re=new n.bO(Y.lng,K.lat),me=F.project(K),be=F.project(Y),Te=this.queryTerrainElevation(K),ze=this.queryTerrainElevation(Y),Fe=this.queryTerrainElevation(ae),Ke=this.queryTerrainElevation(re),nt=[[me.x,me.y,Math.min(Te||0,ze||0,Fe||0,Ke||0)],[be.x,be.y,Math.max(Te||0,ze||0,Fe||0,Ke||0)]];let at=n.ce.fromPoints(nt);const pt=F.getWorldToCameraMatrix(),st=n.ad.mat4.invert(new Float64Array(16),pt);at=n.ce.applyTransform(at,pt);const ot=this._extendAABB(at,F,q,T);if(!ot)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");at=ot;const lt=.5*n.ad.vec3.sub([],at.max,at.min)[2],vt=this._minimumAABBFrustumDistance(F,at),Tt=[0,0,1,0];n.ad.vec4.transformMat4(Tt,Tt,pt),n.ad.vec4.normalize(Tt,Tt);const Qt=n.ad.vec3.scale([],Tt,vt+lt),Ut=n.ad.vec3.add([],at.center,Qt);n.ad.vec3.transformMat4(at.center,at.center,st),n.ad.vec3.transformMat4(Ut,Ut,st);const ia=F.unproject(new n.P(at.center[0],at.center[1])),da=n.dH(F.projection,ia),xa=Math.pow(2,da),kt=Math.min(F._zoomFromMercatorZ(Ut[2]*F.pixelsPerMeter*xa/F.worldSize),q.maxZoom);return F.mercatorFromTransition&&kt<.5*(n.c6+n.bY)?(F.setProjection({name:"globe"}),F.zoom=kt,this._cameraForBounds(F,d,A,T,S,E)):{center:ia,zoom:kt,bearing:T,pitch:S}}fitBounds(o,d,A){const T=this.cameraForBounds(o,d);return this._fitInternal(T,d,A)}fitScreenCoordinates(o,d,A,T,S){const E=n.P.convert(o),F=n.P.convert(d),q=new n.P(Math.min(E.x,F.x),Math.min(E.y,F.y)),K=new n.P(Math.max(E.x,F.x),Math.max(E.y,F.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,F))return this;const Y=this.transform.pointLocation3D(q),ae=this.transform.pointLocation3D(K),re=this.transform.pointLocation3D(new n.P(q.x,K.y)),me=this.transform.pointLocation3D(new n.P(K.x,q.y)),be=[Math.min(Y.lng,ae.lng,re.lng,me.lng),Math.min(Y.lat,ae.lat,re.lat,me.lat)],Te=[Math.max(Y.lng,ae.lng,re.lng,me.lng),Math.max(Y.lat,ae.lat,re.lat,me.lat)],ze=T&&T.pitch?T.pitch:this.getPitch(),Fe=this._cameraForBounds(this.transform,be,Te,A,ze,T);return this._fitInternal(Fe,T,S)}_fitInternal(o,d,A){return o?(d=n.l(o,d)).linear?this.easeTo(d,A):this.flyTo(d,A):this}jumpTo(o,d){this.stop();const A=o.preloadOnly?this.transform.clone():this.transform;let T=!1,S=!1,E=!1;"zoom"in o&&A.zoom!==+o.zoom&&(T=!0,A.zoom=+o.zoom),o.center!==void 0&&(A.center=n.bO.convert(o.center)),"bearing"in o&&A.bearing!==+o.bearing&&(S=!0,A.bearing=+o.bearing),"pitch"in o&&A.pitch!==+o.pitch&&(E=!0,A.pitch=+o.pitch);const F=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!A.isPaddingEqual(F))if(o.retainPadding===!1){const q=A.clone();q.padding=F,A.setLocationAtPoint(A.center,q.centerPoint)}else A.padding=F;return o.preloadOnly?(this._preloadTiles(A),this):(this.fire(new n.A("movestart",d)).fire(new n.A("move",d)),T&&this.fire(new n.A("zoomstart",d)).fire(new n.A("zoom",d)).fire(new n.A("zoomend",d)),S&&this.fire(new n.A("rotatestart",d)).fire(new n.A("rotate",d)).fire(new n.A("rotateend",d)),E&&this.fire(new n.A("pitchstart",d)).fire(new n.A("pitch",d)).fire(new n.A("pitchend",d)),this.fire(new n.A("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(bA),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,d){const A=this.transform;if(!A.projection.supportsFreeCamera)return n.w(bA),this;this.stop();const T=A.zoom,S=A.pitch,E=A.bearing;A.setFreeCameraOptions(o);const F=T!==A.zoom,q=S!==A.pitch,K=E!==A.bearing;return this.fire(new n.A("movestart",d)).fire(new n.A("move",d)),F&&this.fire(new n.A("zoomstart",d)).fire(new n.A("zoom",d)).fire(new n.A("zoomend",d)),K&&this.fire(new n.A("rotatestart",d)).fire(new n.A("rotate",d)).fire(new n.A("rotateend",d)),q&&this.fire(new n.A("pitchstart",d)).fire(new n.A("pitch",d)).fire(new n.A("pitchend",d)),this.fire(new n.A("moveend",d)),this}easeTo(o,d){this._stop(!1,o.easeId),((o=n.l({offset:[0,0],duration:500,easing:n.dD},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const A=this.transform,T=this.getZoom(),S=this.getBearing(),E=this.getPitch(),F=this.getPadding(),q="zoom"in o?+o.zoom:T,K="bearing"in o?this._normalizeBearing(o.bearing,S):S,Y="pitch"in o?+o.pitch:E,ae=this._extendPadding(o.padding),re=n.P.convert(o.offset);let me,be,Te;if(A.projection.name==="globe"){const Tt=n.ac.fromLngLat(A.center),Qt=re.rotate(-A.angle);Tt.x+=Qt.x/A.worldSize,Tt.y+=Qt.y/A.worldSize;const Ut=Tt.toLngLat(),ia=n.bO.convert(o.center||Ut);this._normalizeCenter(ia),me=A.centerPoint.add(Qt),be=new n.P(Tt.x,Tt.y).mult(A.worldSize),Te=new n.P(n.av(ia.lng),n.aC(ia.lat)).mult(A.worldSize).sub(be)}else{me=A.centerPoint.add(re);const Tt=A.pointLocation(me),Qt=n.bO.convert(o.center||Tt);this._normalizeCenter(Qt),be=A.project(Tt),Te=A.project(Qt).sub(be)}const ze=A.zoomScale(q-T);let Fe,Ke;o.around&&(Fe=n.bO.convert(o.around),Ke=A.locationPoint(Fe));const nt=this._zooming||q!==T,at=this._rotating||S!==K,pt=this._pitching||Y!==E,st=!A.isPaddingEqual(ae),ot=o.retainPadding===!1?A.clone():A,lt=Tt=>Qt=>{if(nt&&(Tt.zoom=n.ah(T,q,Qt)),at&&(Tt.bearing=n.ah(S,K,Qt)),pt&&(Tt.pitch=n.ah(E,Y,Qt)),st&&(ot.interpolatePadding(F,ae,Qt),me=ot.centerPoint.add(re)),Fe)Tt.setLocationAtPoint(Fe,Ke);else{const Ut=Tt.zoomScale(Tt.zoom-T),ia=q>T?Math.min(2,ze):Math.max(.5,ze),da=Math.pow(ia,1-Qt),xa=Tt.unproject(be.add(Te.mult(Qt*da)).mult(Ut));Tt.setLocationAtPoint(Tt.renderWorldCopies?xa.wrap():xa,me)}return o.preloadOnly||this._fireMoveEvents(d),Tt};if(o.preloadOnly){const Tt=this._emulate(lt,o.duration,A);return this._preloadTiles(Tt),this}const vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=nt,this._rotating=at,this._pitching=pt,this._padding=st,this._easeId=o.easeId,this._prepareEase(d,o.noMoveStart,vt),this._ease(lt(A),Tt=>{A.cameraElevationReference==="sea"&&A.recenterOnTerrain(),this._afterEase(d,Tt)},o),this}_prepareEase(o,d,A={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||A.moving||this.fire(new n.A("movestart",o)),this._zooming&&!A.zooming&&this.fire(new n.A("zoomstart",o)),this._rotating&&!A.rotating&&this.fire(new n.A("rotatestart",o)),this._pitching&&!A.pitching&&this.fire(new n.A("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.A("move",o)),this._zooming&&this.fire(new n.A("zoom",o)),this._rotating&&this.fire(new n.A("rotate",o)),this._pitching&&this.fire(new n.A("pitch",o))}_afterEase(o,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const A=this._zooming,T=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new n.A("zoomend",o)),T&&this.fire(new n.A("rotateend",o)),S&&this.fire(new n.A("pitchend",o)),this.fire(new n.A("moveend",o))}flyTo(o,d){if(this._prefersReducedMotion(o)){const ta=n.aA(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(ta,d)}this.stop(),o=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dD},o);const A=this.transform,T=this.getZoom(),S=this.getBearing(),E=this.getPitch(),F=this.getPadding(),q="zoom"in o?n.ay(+o.zoom,A.minZoom,A.maxZoom):T,K="bearing"in o?this._normalizeBearing(o.bearing,S):S,Y="pitch"in o?+o.pitch:E,ae=this._extendPadding(o.padding),re=A.zoomScale(q-T),me=n.P.convert(o.offset);let be=A.centerPoint.add(me);const Te=A.pointLocation(be),ze=n.bO.convert(o.center||Te);this._normalizeCenter(ze);const Fe=A.project(Te),Ke=A.project(ze).sub(Fe);let nt=o.curve;const at=Math.max(A.width,A.height),pt=at/re,st=Ke.mag();if("minZoom"in o){const ta=n.ay(Math.min(o.minZoom,T,q),A.minZoom,A.maxZoom),ha=at/A.zoomScale(ta-T);nt=Math.sqrt(ha/st*2)}const ot=nt*nt;function lt(ta){const ha=(pt*pt-at*at+(ta?-1:1)*ot*ot*st*st)/(2*(ta?pt:at)*ot*st);return Math.log(Math.sqrt(ha*ha+1)-ha)}function vt(ta){return(Math.exp(ta)-Math.exp(-ta))/2}function Tt(ta){return(Math.exp(ta)+Math.exp(-ta))/2}const Qt=lt(0);let Ut=function(ta){return Tt(Qt)/Tt(Qt+nt*ta)},ia=function(ta){return at*((Tt(Qt)*(vt(ha=Qt+nt*ta)/Tt(ha))-vt(Qt))/ot)/st;var ha},da=(lt(1)-Qt)/nt;if(Math.abs(st)<1e-6||!isFinite(da)){if(Math.abs(at-pt)<1e-6)return this.easeTo(o,d);const ta=pt<at?-1:1;da=Math.abs(Math.log(pt/at))/nt,ia=function(){return 0},Ut=function(ha){return Math.exp(ta*nt*ha)}}o.duration="duration"in o?+o.duration:1e3*da/("screenSpeed"in o?+o.screenSpeed/nt:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const xa=S!==K,kt=Y!==E,la=!A.isPaddingEqual(ae),zt=o.retainPadding===!1?A.clone():A,ua=ta=>ha=>{const Xt=ha*da,ga=1/Ut(Xt);ta.zoom=ha===1?q:T+ta.scaleZoom(ga),xa&&(ta.bearing=n.ah(S,K,ha)),kt&&(ta.pitch=n.ah(E,Y,ha)),la&&(zt.interpolatePadding(F,ae,ha),be=zt.centerPoint.add(me));const ka=ha===1?ze:ta.unproject(Fe.add(Ke.mult(ia(Xt))).mult(ga));return ta.setLocationAtPoint(ta.renderWorldCopies?ka.wrap():ka,be),ta._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(d),ta};if(o.preloadOnly){const ta=this._emulate(ua,o.duration,A);return this._preloadTiles(ta),this}return this._zooming=!0,this._rotating=xa,this._pitching=kt,this._padding=la,this._prepareEase(d,!1),this._ease(ua(A),()=>this._afterEase(d),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const A=this._onEaseEnd;this._onEaseEnd=void 0,A.call(this,d)}if(!o){const A=this.handlers;A&&A.stop(!1)}return this}_ease(o,d,A){A.animate===!1||A.duration===0?(o(1),d()):(this._easeStart=n.q.now(),this._easeOptions=A,this._onEaseFrame=o,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,d){o=n.bF(o,-180,180);const A=Math.abs(o-d);return Math.abs(o-360-d)<A&&(o-=360),Math.abs(o+360-d)<A&&(o+=360),o}_normalizeCenter(o){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const A=o.lng-d.center.lng;o.lng+=A>180?-360:A<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,d,A){const T=Math.ceil(15*d/1e3),S=[],E=o(A.clone());for(let F=0;F<=T;F++){const q=E(F/T);S.push(q.clone())}return S}_preloadTiles(o,d){}}class Bf{constructor(o={}){this.options=o,n.aQ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const d=this.options&&this.options.compact,A=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=$("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",A);const T=$("span","mapboxgl-ctrl-icon",this._compactButton);return T.setAttribute("aria-hidden","true"),T.setAttribute("title",A),this._innerContainer=$("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(o){const A=d.reduce((T,S,E)=>(S.value&&(T+=`${S.key}=${S.value}${E<d.length-1?"&":""}`),T),"?");o.href=`${n.e.FEEDBACK_URL}/${A}#${gA(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const d=this._map.style._mergedSourceCaches;for(const T in d){const S=d[T];if(S.used){const E=S.getSource();E.attribution&&o.indexOf(E.attribution)<0&&o.push(E.attribution)}}o.sort((T,S)=>T.length-S.length),o=o.filter((T,S)=>{for(let E=S+1;E<o.length;E++)if(o[E].indexOf(T)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const A=o.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,o.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Wo{constructor(){n.aQ(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=$("div","mapboxgl-ctrl");const d=$("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const d in o){const A=o[d].getSource();if(A.hasOwnProperty("mapbox_logo")&&!A.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const d=o[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class ic{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const d=++this._id;return this._queue.push({callback:o,id:d,cancelled:!1}),d}remove(o){const d=this._currentlyRunning,A=d?this._queue.concat(d):this._queue;for(const T of A)if(T.id===o)return void(T.cancelled=!0)}run(o=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const A of d)if(!A.cancelled&&(A.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Cp{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const d=n.cC((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,d,A){this._start=this.getValue(d),this._end=o,this._startTime=d,this._endTime=d+A}}const Vc={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class pl extends n.A{constructor(o,d,A,T){const{point:S,lngLat:E,originalEvent:F,target:q}=o;super(o.type,{point:S,lngLat:E,originalEvent:F,target:q}),this.preventDefault=()=>{o.preventDefault()},this.id=d,this.interaction=A,this.feature=T}}class ey{constructor(o){this.map=o,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(o,d){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const A=d.filter;let T=d.type;A&&this.filters.set(o,n.a_(A)),T==="mouseover"&&(T="mouseenter"),T==="mouseout"&&(T="mouseleave");const S=this.interactionsByType.get(T)||new Map;T==="mouseenter"||T==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(o,d)):S.size===0&&this.map.on(T,this.handleType),S.size===0&&this.interactionsByType.set(T,S),S.set(o,d),this.typeById.set(o,T)}get(o){const d=this.typeById.get(o);if(!d)return;const A=this.interactionsByType.get(d);return A?A.get(o):void 0}remove(o){const d=this.typeById.get(o);if(!d)return;this.typeById.delete(o),this.filters.delete(o);const A=this.interactionsByType.get(d);A&&(A.delete(o),d==="mouseenter"||d==="mouseleave"?(this.delegatedInteractions.delete(o),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):A.size===0&&this.map.off(d,this.handleType))}queryTargets(o,d){const A=[];for(const[T,S]of d)S.target&&A.push({targetId:T,target:S.target,filter:this.filters.get(T)});return this.map.style.queryRenderedTargets(o,A,this.map.transform)}handleMove(o){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const d=this.queryTargets(o.point,Array.from(this.delegatedInteractions).reverse());d.length&&(o.type="mouseenter",this.handleType(o,d));const A=new Map;for(const[T,{feature:S}]of this.prevHoveredFeatures)this.hoveredFeatures.has(T)||A.set(S.id,S);A.size&&(o.type="mouseleave",this.handleType(o,Array.from(A.values())))}handleOut(o){const d=Array.from(this.hoveredFeatures.values()).map(({feature:A})=>A);d.length&&(o.type="mouseleave",this.handleType(o,d)),this.hoveredFeatures.clear()}handleType(o,d){const A=Array.from(this.interactionsByType.get(o.type)).reverse(),T=!!d;d=d||this.queryTargets(o.point,A);const S=o.type==="mouseenter";let E=!1;const F=new Set;for(const q of d){for(const[K,Y]of A){if(!Y.target)continue;const ae=q.variants?q.variants[K]:null;if(ae){for(const re of ae){if(Uc(re,q,F,K))continue;const me=new n.cx(q,re),be=Ed(re,q,K);T&&(me.state=this.map.getFeatureState(me));const Te=S?this.prevHoveredFeatures.get(be):null,ze=new pl(o,K,Y,me),Fe=Te?Te.stop:Y.handler(ze);if(S&&this.hoveredFeatures.set(be,{feature:q,stop:Fe}),Fe!==!1){E=!0;break}}if(E)break}}if(E)break}if(!E)for(const[q,K]of A){const{handler:Y,target:ae}=K;if(!ae&&Y(new pl(o,q,K,null))!==!1)break}}}function Gn(y,o){if(Array.isArray(y)&&Array.isArray(o)){const d=new Set(y),A=new Set(o);return d.size===A.size&&y.every(T=>A.has(T))}return n.bn(y,o)}const nf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},xA={showCompass:!0,showZoom:!0,visualizePitch:!1};class PA{constructor(o,d,A=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Xd({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,A&&(this.mousePitch=new Nc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.aQ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(o,d){this.mouseRotate.mousedown(o,d),this.mousePitch&&this.mousePitch.mousedown(o,d),pe()}move(o,d){const A=this.map,T=this.mouseRotate.mousemoveWindow(o,d),S=T&&T.bearingDelta;if(S&&A.setBearing(A.getBearing()+S),this.mousePitch){const E=this.mousePitch.mousemoveWindow(o,d),F=E&&E.pitchDelta;F&&A.setPitch(A.getPitch()+F)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){le(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(n.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Re(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Re(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=we(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=we(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Sp(y,o,d){if(y=new n.bO(y.lng,y.lat),o){const A=new n.bO(y.lng-360,y.lat),T=new n.bO(y.lng+360,y.lat),S=360*Math.ceil(Math.abs(y.lng-d.center.lng)/360),E=d.locationPoint3D(y).distSqr(o),F=o.x<0||o.y<0||o.x>d.width||o.y>d.height;d.locationPoint3D(A).distSqr(o)<E&&(F||Math.abs(A.lng-d.center.lng)<S)?y=A:d.locationPoint3D(T).distSqr(o)<E&&(F||Math.abs(T.lng-d.center.lng)<S)&&(y=T)}for(;Math.abs(y.lng-d.center.lng)>180;){const A=d.locationPoint3D(y);if(A.x>=0&&A.y>=0&&A.x<=d.width&&A.y<=d.height)break;y.lng>d.center.lng?y.lng-=360:y.lng+=360}return y}const Sl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Li={anchor:"center",color:"#3FB1CE",scale:1,draggable:!1,clickTolerance:0,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Yo extends n.E{constructor(o,d){super(),(o instanceof HTMLElement||d)&&(o=n.l({element:o},d)),n.aQ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),o=n.l({},Li,o),this._anchor=o.anchor,this._color=o.color,this._scale=o.scale,this._draggable=o.draggable,this._clickTolerance=o.clickTolerance,this._rotation=o.rotation,this._rotationAlignment=o.rotationAlignment,this._pitchAlignment=o.pitchAlignment,this._occludedOpacity=o.occludedOpacity,this._altitude=o.altitude,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),o&&o.element?(this._element=o.element,this._offset=n.P.convert(o&&o.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=n.P.convert(o&&o.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",S=>{S.preventDefault()}),this._element.addEventListener("mousedown",S=>{S.preventDefault()});const A=this._element.classList;for(const S in Sl)A.remove(`mapboxgl-marker-anchor-${S}`);A.add(`mapboxgl-marker-anchor-${this._anchor}`);const T=o&&o.className?o.className.trim().split(/\s+/):[];A.add(...T),this._popup=null}_createDefaultMarker(){const o=$("div"),d=H("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},o);if(this._altitude===0){const A=H("radialGradient",{id:"shadowGradient"},H("defs",{},d));H("stop",{offset:"10%","stop-opacity":.4},A),H("stop",{offset:"100%","stop-opacity":.05},A),H("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},d)}return H("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},d),H("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},d),H("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},d),o}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.bO.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(o){return o===this._altitude||(this._defaultMarker&&(this._altitude===0&&o!==0||this._altitude!==0&&o===0)&&(this._element=this._createDefaultMarker()),this._altitude=o||Li.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,o._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const d=o.code,A=o.charCode||o.keyCode;d!=="Space"&&d!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(o){const d=o.originalEvent.target,A=this._element;this._popup&&(d===A||A.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,d=this._pos;if(!o||!d)return!1;const A=o.unproject(d,this._altitude),T=o.getFreeCameraOptions();if(!T.position)return!1;const S=T.position.toLngLat();return S.distanceTo(A)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const d=this._pos;if(!d||d.x<0||d.x>o.transform.width||d.y<0||d.y>o.transform.height)return void this._clearFadeTimer();const A=o.unproject(d,this._altitude);let T;o._showingGlobe()&&n.dK(o.transform,this._lngLat)?T=0:(T=1-o._queryFogOpacity(A),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(T*=this._occludedOpacity)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${Sl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const o=this._pos,d=this._map,A=this.getPitchAlignment();if(!d||!o||A!=="map")return"";if(!d._showingGlobe()){const q=d.getPitch();return q?`rotateX(${q}deg)`:""}const T=n.c4(n.dL(d.transform,this._lngLat)),S=o.sub(n.dM(d.transform)),E=Math.abs(S.x)+Math.abs(S.y);if(E===0)return"";const F=T/E;return`rotateX(${-S.y*F}deg) rotateY(${S.x*F}deg)`}_calculateZTransform(){const o=this._pos,d=this._map;if(!d||!o)return"";let A=0;const T=this.getRotationAlignment();if(T==="map")if(d._showingGlobe()){const S=d.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),E=d.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(S);A=n.c4(Math.atan2(E.y,E.x))-90}else A=-d.getBearing();else if(T==="horizon"){const S=n.ae(4,6,d.getZoom()),E=n.dM(d.transform);E.y+=S*d.transform.height;const F=o.sub(E),q=n.c4(Math.atan2(F.y,F.x));A=(q>90?q-270:q+90)*(1-S)}return A+=this._rotation,A?`rotateZ(${A}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Sp(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat,this._altitude),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=n.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const d=this._map;if(!d)return;const A=this._pointerdownPos,T=this._positionDelta;if(A&&T){if(!this._isDragging){const S=this._clickTolerance||d._clickTolerance;if(o.point.dist(A)<S)return;this._isDragging=!0}this._pos=o.point.sub(T),this._lngLat=d.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.A("dragstart"))),this.fire(new n.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.A("dragend")),this._state="inactive"}_addDragHandler(o){const d=this._map,A=this._pos;d&&A&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(A),this._pointerdownPos=o.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const d=this._map;return d&&(o?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||Li.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||Li.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||Li.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||Li.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Uu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ei={maxWidth:100,unit:"metric"},ty={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Bu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},EA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function sf(y=new n.P(0,0),o="bottom"){if(typeof y=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(o){case"top":return new n.P(0,y);case"top-left":return new n.P(d,d);case"top-right":return new n.P(-d,d);case"bottom":return new n.P(0,-y);case"bottom-left":return new n.P(d,-d);case"bottom-right":return new n.P(-d,-d);case"left":return new n.P(y,0);case"right":return new n.P(-y,0)}return new n.P(0,0)}return y instanceof n.P||Array.isArray(y)?n.P.convert(y):n.P.convert(y[o]||[0,0])}return{version:v,supported:Z.supported,setRTLTextPlugin:n.dN,getRTLTextPluginStatus:n.dO,Map:class extends Tp{constructor(y){x.mark(R.create);const o=y;if((y=n.l({},nf,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&n.dI(window)&&(y.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Id(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies,null,null),y),this._repaint=!!y.repaint,this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new ic,this._domRenderTaskQueue=new ic,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aW(),this._locale=n.l({},Vc,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._tessellationStep=y.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=y.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Cp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=y.scaleFactor,this._requestManager=new Pe(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,this._contextCreateOptions=y.contextCreateOptions?Object.assign({},y.contextCreateOptions):{},typeof y.container=="string"){const d=document.getElementById(y.container);if(!d)throw new Error(`Container '${y.container.toString()}' not found.`);this._container=d}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),this._spriteFormat=y.spriteFormat,n.aQ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Fu),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new mm(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,(y.style||!y.testMode)&&this.setStyle(y.style||n.e.DEFAULT_STYLE,{config:y.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this.indoor=new Zc(this),y.hash&&(this._hash=new Yg(typeof y.hash=="string"&&y.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch});const d=y.bounds;d&&(this.resize(),this.fitBounds(d,n.l({},y.fitBoundsOptions,{duration:0})))}this.resize(),y.attributionControl&&this.addControl(new Bf({customAttribution:y.customAttribution})),this._logoControl=new Wo,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new n.A(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new n.A(`${d.dataType}dataloading`,d))}),this._interactions=new ey(this)}_getMapId(){return this._mapId}addControl(y,o){if(o===void 0&&(o=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new n.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=y.onAdd(this);this._controls.push(y);const A=this._controlPositions[o];return o.indexOf("bottom")!==-1?A.insertBefore(d,A.firstChild):A.appendChild(d),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new n.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(y);return o>-1&&this._controls.splice(o,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new n.A("movestart",y)).fire(new n.A("move",y)),this.fire(new n.A("resize",y)),o&&this.fire(new n.A("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(n.aB.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(y){return this._scaleFactor=y,this.painter.scaleFactor=y,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(o=>o==="auto"?navigator.language:o):y}setLanguage(y){const o=this._parseLanguage(y);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,o=y.projection.name;let d;o==="globe"&&y.zoom>=n.bY?(y.setMercatorFromTransition(),d=!0):o==="mercator"&&y.zoom<n.bY&&(y.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,o){return this._updateProjection(y||o||{name:"mercator"})}_updateProjection(y){let o;return o=y.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(y,o){return this.transform.locationPoint3D(n.bO.convert(y),o)}unproject(y,o){return this.transform.pointLocation3D(n.P.convert(y),o)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,o,d){const A=T=>{let S=[];if(Array.isArray(o)){const E=o.filter(F=>this.getLayer(F));S=E.length?this.queryRenderedFeatures(T,{layers:E}):[]}else S=this.queryRenderedFeatures(T,{target:o});return S};if(y==="mouseenter"||y==="mouseover"){let T=!1;return{listener:d,targets:o,delegates:{mousemove:E=>{const F=A(E.point);F.length?T||(T=!0,d.call(this,new Tl(y,this,E.originalEvent,{features:F}))):T=!1},mouseout:()=>{T=!1}}}}if(y==="mouseleave"||y==="mouseout"){let T=!1;return{listener:d,targets:o,delegates:{mousemove:F=>{A(F.point).length?T=!0:T&&(T=!1,d.call(this,new Tl(y,this,F.originalEvent)))},mouseout:F=>{T&&(T=!1,d.call(this,new Tl(y,this,F.originalEvent)))}}}}{const T=S=>{const E=A(S.point);E.length&&(S.features=E,d.call(this,S),delete S.features)};return{listener:d,targets:o,delegates:{[y]:T}}}}on(y,o,d){if(typeof o=="function"||d===void 0)return super.on(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(y,o,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(A);for(const T in A.delegates)this.on(T,A.delegates[T]);return this}once(y,o,d){if(typeof o=="function"||d===void 0)return super.once(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(y,o,d);for(const T in A.delegates)this.once(T,A.delegates[T]);return this}off(y,o,d){if(typeof o=="function"||d===void 0)return super.off(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._delegatedListeners?this._delegatedListeners[y]:void 0;return A&&(T=>{for(let S=0;S<T.length;S++){const E=T[S];if(E.listener===d&&Gn(E.targets,o)){for(const F in E.delegates)this.off(F,E.delegates[F]);return T.splice(S,1),this}}})(A),this}queryRenderedFeatures(y,o){if(!this.style)return[];if(y===void 0||y instanceof n.P||Array.isArray(y)||o!==void 0||(o=y,y=void 0),y=y||[[0,0],[this.transform.width,this.transform.height]],!o){const S=this.style.queryRenderedFeatures(y,void 0,this.transform),E=this.style.queryRenderedFeatureset(y,void 0,this.transform);return S.concat(E)}let d=!0;if(o.target&&(d=this._isTargetValid(o.target),d&&!o.layers))return this.style.queryRenderedFeatureset(y,o,this.transform);let A=!0;if(o.layers&&Array.isArray(o.layers)){for(const S of o.layers)if(!this._isValidId(S)){A=!1;break}if(A&&!o.target)return this.style.queryRenderedFeatures(y,o,this.transform)}let T=[];return A&&(T=T.concat(this.style.queryRenderedFeatures(y,o,this.transform))),d&&(T=T.concat(this.style.queryRenderedFeatureset(y,o,this.transform))),T}querySourceFeatures(y,o){return!y||typeof y=="string"&&!this._isValidId(y)?[]:this.style.querySourceFeatures(y,o)}isPointOnSurface(y){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&n.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(y))}addInteraction(y,o){return this._interactions.add(y,o),this}removeInteraction(y){return this._interactions.remove(y),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this}setStyle(y,o){return o=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&y&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(y,(d,A)=>{d?(n.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(y,o)):A&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(y,o))}_getUIString(y){const o=this._locale[y];if(o==null)throw new Error(`Missing UI string '${y}'`);return o}_updateStyle(y,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y){const d=n.l({},o);o&&o.config&&(d.initialConfig=o.config,delete d.config),this.style=new oo(this,d).load(y),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new oo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(y){return y==null?(this.fire(new n.z(new Error("IDs can't be empty."))),!1):!n.cs(y)||(this.fire(new n.z(new Error(`IDs can't contain special symbols: "${y}".`))),!1)}_isTargetValid(y){return"featuresetId"in y?this._isValidId("importId"in y?y.importId:y.featuresetId):"layerId"in y&&this._isValidId(y.layerId)}_areTargetsValid(y){if(Array.isArray(y)){for(const o of y)if(!this._isValidId(o))return!1;return!0}return this._isTargetValid(y)}addSource(y,o){return this._isValidId(y)?(this._lazyInitEmptyStyle(),this.style.addSource(y,o),this._update(!0)):this}isSourceLoaded(y){return!!this._isValidId(y)&&!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(y,o,d){this._lazyInitEmptyStyle(),this.style.addSourceType(y,o,d)}removeSource(y){return this._isValidId(y)?(this.style.removeSource(y),this._updateTerrain(),this._update(!0)):this}getSource(y){return this._isValidId(y)?this.style.getOwnSource(y):null}addImage(y,o,{pixelRatio:d=1,sdf:A=!1,stretchX:T,stretchY:S,content:E}={}){this._lazyInitEmptyStyle();const F=n.I.from(y);if(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:q,height:K,data:Y}=n.q.getImageData(o);this.style.addImage(F,{data:new n.r({width:q,height:K},Y),pixelRatio:d,stretchX:T,stretchY:S,content:E,sdf:A,version:0,usvg:!1})}else if(o.width===void 0||o.height===void 0)this.fire(new n.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:q,height:K}=o,Y=o;this.style.addImage(F,{data:new n.r({width:q,height:K},new Uint8Array(Y.data)),pixelRatio:d,stretchX:T,stretchY:S,content:E,sdf:A,usvg:!1,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,y)}}updateImage(y,o){this._lazyInitEmptyStyle();const d=n.I.from(y),A=this.style.getImage(d);if(!A)return void this.fire(new n.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?n.q.getImageData(o):o,{width:S,height:E,data:F}=T;if(S===void 0||E===void 0)return void this.fire(new n.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==(A.usvg?A.icon.usvg_tree.width:A.data.width)||E!==(A.usvg?A.icon.usvg_tree.height:A.data.height))return void this.fire(new n.z(new Error(`The width and height of the updated image (${S}, ${E})
                must be that same as the previous version of the image
                (${A.data.width}, ${A.data.height})`)));const q=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);let K=!1;A.usvg?(A.data=new n.r({width:S,height:E},new Uint8Array(F)),A.usvg=!1,A.icon=void 0,K=!0):A.data.replace(F,q),this.style.updateImage(d,A,K)}hasImage(y){return y?!!this.style&&!!this.style.getImage(n.I.from(y)):(this.fire(new n.z(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(n.I.from(y))}loadImage(y,o){n.o(this._requestManager.transformRequest(y,n.R.Image),(d,A)=>{o(d,A instanceof HTMLImageElement?n.q.getImageData(A):A)})}listImages(){return this.style.listImages().map(y=>y.name)}addModel(y,o){this._lazyInitEmptyStyle(),this.style.addModel(y,o)}hasModel(y){return y?this.style.hasModel(y):(this.fire(new n.z(new Error("Missing required model id"))),!1)}removeModel(y){this.style.removeModel(y)}listModels(){return this.style.listModels()}addLayer(y,o){return this._isValidId(y.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(y,o),this._update(!0)):this}getSlot(y){const o=this.getLayer(y);return o&&o.slot||null}setSlot(y,o){return this.style.setSlot(y,o),this.style.mergeLayers(),this._update(!0)}addImport(y,o){return this.style.addImport(y,o),this}updateImport(y,o){return typeof o!="string"&&o.id!==y?(this.removeImport(y),this.addImport(o)):(this.style.updateImport(y,o),this._update(!0))}removeImport(y){return this.style.removeImport(y),this}moveImport(y,o){return this.style.moveImport(y,o),this._update(!0)}moveLayer(y,o){return this._isValidId(y)?(this.style.moveLayer(y,o),this._update(!0)):this}removeLayer(y){return this._isValidId(y)?(this.style.removeLayer(y),this._update(!0)):this}getLayer(y){if(!this._isValidId(y))return null;const o=this.style.getOwnLayer(y);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(y,o,d){return this._isValidId(y)?(this.style.setLayerZoomRange(y,o,d),this._update(!0)):this}setFilter(y,o,d={}){return this._isValidId(y)?(this.style.setFilter(y,o,d),this._update(!0)):this}getFilter(y){return this._isValidId(y)?this.style.getFilter(y):null}setPaintProperty(y,o,d,A={}){return this._isValidId(y)?(this.style.setPaintProperty(y,o,d,A),this._update(!0)):this}getPaintProperty(y,o){return this._isValidId(y)?this.style.getPaintProperty(y,o):null}setLayoutProperty(y,o,d,A={}){return this._isValidId(y)?(this.style.setLayoutProperty(y,o,d,A),this._update(!0)):this}getLayoutProperty(y,o){return this._isValidId(y)?this.style.getLayoutProperty(y,o):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(y){return this.style.setGlyphsUrl(y),this._update(!0)}getSchema(y){return this.style.getSchema(y)}setSchema(y,o){return this.style.setSchema(y,o),this._update(!0)}getConfig(y){return this.style.getConfig(y)}setConfig(y,o){return this.style.setConfig(y,o),this._update(!0)}getConfigProperty(y,o){return this.style.getConfigProperty(y,o)}setConfigProperty(y,o,d){return this.style.setConfigProperty(y,o,d),this._update(!0)}getFeaturesetDescriptors(y){return this.style.getFeaturesetDescriptors(y)}setLights(y){if(this._lazyInitEmptyStyle(),y&&y.length===1&&y[0].type==="flat"){const o=y[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(y),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const y=this.style.getLights()||[];return y.length===0&&y.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),y}setLight(y,o={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:y}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(y){return this._lazyInitEmptyStyle(),this.style.setSnow(y),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(y){return this._lazyInitEmptyStyle(),this.style.setRain(y),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(y){return this._lazyInitEmptyStyle(),this.style.setColorTheme(y),this._update(!0)}setImportColorTheme(y,o){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(y,o),this._update(!0)}setCamera(y){return this.style.setCamera(y),this._triggerCameraUpdate(y)}_triggerCameraUpdate(y){return this._update(this.transform.setOrthographicProjectionAtLowPitch(y["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(y),this.transform):0}setFeatureState(y,o){return y.source&&!this._isValidId(y.source)?this:(this.style.setFeatureState(y,o),this._update())}removeFeatureState(y,o){return y.source&&!this._isValidId(y.source)?this:(this.style.removeFeatureState(y,o),this._update())}getFeatureState(y){return y.source&&!this._isValidId(y.source)?null:this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let d,A,T,S=this._container;for(;S&&(!A||!T);){const E=window.getComputedStyle(S).transform;E&&E!=="none"&&(d=E.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(A=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(T=d[3])),S=S.parentElement}this._containerWidth=A?Math.abs(y/A):y,this._containerHeight=T?Math.abs(o/T):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=$("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=$("div","mapboxgl-canvas-container",y);this._canvas=$("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=$("div","mapboxgl-control-container",y),A=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(T=>{A[T]=$("div",`mapboxgl-ctrl-${T}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,o){const d=n.q.devicePixelRatio||1;this._canvas.width=d*Math.ceil(y),this._canvas.height=d*Math.ceil(o),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${o}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const o=this._markers.indexOf(y);o!==-1&&this._markers.splice(o,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const o=this._popups.indexOf(y);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const y=n.l({},Z.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",y);o?(Lt(o,!0),this.painter=new um(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(o)):this.fire(new n.z(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.A("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new n.A("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let o;this.fire(new n.A("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,A=n.q.now(),T=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=T.createQuery(),T.beginQuery(d.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,Y=this.transform.pitch,ae=n.q.now(),re=new n.aa(K,{now:ae,fadeDuration:S,pitch:Y,transition:this.style.transition});this.style.update(re)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(A),this.style.updateSources(this.transform),this.isMoving()||this._forceMarkerAndPopupUpdate()):E=this._updateAverageElevation(A);const F=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),F&&(this._placementDirty=F.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,x.mark(R.load),this.fire(new n.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const K=n.q.now()-A;T.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const Y=T.getQueryParameter(o,T.QUERY_RESULT)/1e6;T.deleteQuery(o),this.fire(new n.A("gpu-timing-frame",{cpuTime:K,gpuTime:Y}))},50)}if(this.listens("gpu-timing-layer")){const K=this.painter.collectGpuTimers();setTimeout(()=>{const Y=this.painter.queryGpuTimers(K);this.fire(new n.A("gpu-timing-layer",{layerTimes:Y}))},50)}if(this.listens("gpu-timing-deferred-render")){const K=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Y=this.painter.queryGpuTimeDeferredRender(K);this.fire(new n.A("gpu-timing-deferred-render",{gpuTime:Y}))},50)}const q=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(q||this._repaint)this.triggerRepaint();else{const K=this.idle();if(K&&(E=this._updateAverageElevation(A,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),K&&(this.fire(new n.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Y=this._calculateSpeedIndex();this.fire(new n.A("speedindexcompleted",{speedIndex:Y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,x.mark(R.fullLoad),this._performanceMetricsCollection&&dt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const o of this._markers)y&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!y||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(y,o=!1){const d=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const A=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(A||(o||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const T=this.transform.averageElevation;let S=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=y;const E=Math.abs(T-S);if(E>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(S),d(S);this._averageElevation.easeTo(S,y,300)}else if(E>1e-4)return this._averageElevation.jumpTo(S),d(S)}return!!this._averageElevation.isEasing(y)&&d(this._averageElevation.getValue(y))}_authenticate(){Ae(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===ke||y.status===401)){const o=this.painter.context.gl;Lt(o,!1),this._logoControl instanceof Wo&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),je(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Be(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const d=this.painter.context.gl,A=d.createFramebuffer();function T(S){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,S,0);const E=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,E),E}return d.bindFramebuffer(d.FRAMEBUFFER,A),this._canvasPixelComparison(T(y),o.canvasCopies.map(T),o.timeStamps)}_canvasPixelComparison(y,o,d){let A=d[1]-d[0];const T=y.length/4;for(let S=0;S<o.length;S++){const E=o[S];let F=0;for(let q=0;q<E.length;q+=4)E[q]===y[q]&&E[q+1]===y[q+1]&&E[q+2]===y[q+2]&&E[q+3]===y[q+3]&&(F+=1);A+=(d[S+2]-d[S+1])*(1-F/T)}return A}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Dt.delete(this.painter.context.gl),ut.remove(),Ie.remove(),this._removed=!0,this.fire(new n.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=n.q.frame(o=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(o)}))}_preloadTiles(y){const o=this.style?this.style.getSourceCaches():[];return n.bl(o,(d,A)=>d._preloadTiles(y,A),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(y){this._showParseStatus!==y&&(this._showParseStatus=y,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(y){this._showLayers2DWireframe!==y&&(this._showLayers2DWireframe=y,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(y){this._showLayers3DWireframe!==y&&(this._showLayers3DWireframe=y,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,this._tp.refreshUI(),y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,this._tp.refreshUI(),y&&this._update())}_setCacheLimits(y,o){n.dJ(y,o)}get version(){return v}},NavigationControl:class{constructor(y={}){this.options=n.l({},xA,y),this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.aQ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),$("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),$("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aQ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:o}):d.resetNorth({},{originalEvent:o}))}),this._compassIcon=$("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const o=y.getZoom(),d=o===y.getMaxZoom(),A=o===y.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new PA(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,o){const d=$("button",y,this._container);return d.type="button",d.addEventListener("click",o),d}_setButtonTitle(y,o){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${o}`);y.setAttribute("aria-label",d),y.firstElementChild&&y.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends n.E{constructor(y={}){super();const o=navigator.geolocation;this.options=n.l({geolocation:o},Uu,y),n.aQ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=lg(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const o=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,y(d)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>o(d.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(y){const o=this._map.getMaxBounds(),d=y.coords;return!!o&&(d.longitude<o.getWest()||d.longitude>o.getEast()||d.latitude<o.getSouth()||d.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new n.A("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("geolocate",y)),this._finish()}}_updateCamera(y){const o=new n.bO(y.coords.longitude,y.coords.latitude),d=y.coords.accuracy,A=this._map.getBearing(),T=n.l({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(d),T,{geolocateSource:!0})}_updateMarker(y){if(y){const o=new n.bO(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,o=n.bH(1,y._center.lat)*y.worldSize,d=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=$("button","mapboxgl-ctrl-geolocate",this._container),$("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$("div","mapboxgl-user-location"),this._dotElement.appendChild($("div","mapboxgl-user-location-dot")),this._dotElement.appendChild($("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Yo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=$("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.A("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Bf,ScaleControl:class{constructor(y={}){this.options=n.l({},Ei,y),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aQ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,o=this._map,d=o._containerHeight/2,A=o._containerWidth/2-y/2,T=o.unproject([A,d]),S=o.unproject([A+y,d]),E=T.distanceTo(S);if(this.options.unit==="imperial"){const F=3.2808*E;F>5280?this._setScale(y,F/5280,"mile"):this._setScale(y,F,"foot")}else this.options.unit==="nautical"?this._setScale(y,E/1852,"nautical-mile"):E>=1e3?this._setScale(y,E/1e3,"kilometer"):this._setScale(y,E,"meter")}_setScale(y,o,d){this._map._requestDomTask(()=>{const A=function(S){const E=Math.pow(10,`${Math.floor(S)}`.length-1);let F=S/E;return F=F>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:function(q){const K=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*K)/K}(F),E*F}(o),T=A/o;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(A):`${A}&nbsp;${ty[d]}`,this._container.style.width=y*T+"px"})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y={}){this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:n.w("Full screen control 'container' must be a DOM element.")),n.aQ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=$("button","mapboxgl-ctrl-fullscreen",this._controlContainer);$("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(y){super(),this.options=n.l(Object.create(Bu),y),this._altitude=this.options.altitude,n.aQ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new n.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new n.A("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=n.bO.convert(y),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(y){return this._altitude=y,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const o=document.createDocumentFragment(),d=document.createElement("body");let A;for(d.innerHTML=y;A=d.firstChild,A;)o.appendChild(A);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=$("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(y),this.options.closeButton){const d=this._closeButton=$("button","mapboxgl-popup-close-button",o);d.type="button",d.setAttribute("aria-label","Close popup"),d.innerHTML='<span aria-hidden="true">&#215;</span>',d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let o;return this._classList.delete(y)?o=!1:(this._classList.add(y),o=!0),this._updateClassList(),o}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const o=this._map,d=this._container,A=this._pos;if(!o||!d||!A)return"bottom";const T=d.offsetWidth,S=d.offsetHeight,E=A.x<T/2,F=A.x>o.transform.width-T/2;if(A.y+y<S)return E?"top-left":F?"top-right":"top";if(A.y>o.transform.height-S){if(E)return"bottom-left";if(F)return"bottom-right"}return E?"left":F?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),y.className=o.join(" ")}_update(y){const o=this._map,d=this._content;if(!o||!this._lngLat&&!this._trackPointer||!d)return;let A=this._container;if(A||(A=this._container=$("div","mapboxgl-popup",o.getContainer()),this._tip=$("div","mapboxgl-popup-tip",A),A.appendChild(d)),this.options.maxWidth&&A.style.maxWidth!==this.options.maxWidth&&(A.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sp(this._lngLat,this._pos,o.transform)),!this._trackPointer||y){const T=this._pos=this._trackPointer&&y instanceof n.P?y:o.project(this._lngLat,this._altitude),S=sf(this.options.offset),E=this._anchor=this._getAnchor(S.y),F=sf(this.options.offset,E),q=T.add(F).round();o._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Sl[E]} translate(${q.x}px,${q.y}px)`)})}if(!this._marker&&o._showingGlobe()){const T=n.dK(o.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(EA);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:Yo,Style:oo,LngLat:n.bO,LngLatBounds:n.aB,Point:n.P,MercatorCoordinate:n.ac,FreeCameraOptions:Md,Evented:n.E,config:n.e,prewarm:n.dP,clearPrewarmedResources:n.dQ,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(y){n.e.ACCESS_TOKEN=y},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(y){n.e.API_URL=y},get workerCount(){return n.dR.workerCount},set workerCount(y){n.dR.workerCount=y},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){n.e.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){n.dS(y)},get workerUrl(){return n.dT.workerUrl},set workerUrl(y){n.dT.workerUrl=y},get workerClass(){return n.dT.workerClass},set workerClass(y){n.dT.workerClass=y},get workerParams(){return n.dT.workerParams},set workerParams(y){n.dT.workerParams=y},get dracoUrl(){return n.dU()},set dracoUrl(y){n.dV(y)},get meshoptUrl(){return n.dW()},set meshoptUrl(y){n.dX(y)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var c=i;return c})}(xb)),xb.exports}var hme=dme();const ap=ss(hme);function UX(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(a=UX(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function mi(){for(var t,e,a=0,r="",i=arguments.length;a<i;a++)(t=arguments[a])&&(e=UX(t))&&(r&&(r+=" "),r+=e);return r}var qN,pB;function jh(){if(pB)return qN;pB=1;var t=Array.isArray;return qN=t,qN}var HN,mB;function BX(){if(mB)return HN;mB=1;var t=typeof DS=="object"&&DS&&DS.Object===Object&&DS;return HN=t,HN}var $N,gB;function Jm(){if(gB)return $N;gB=1;var t=BX(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return $N=a,$N}var KN,yB;function pC(){if(yB)return KN;yB=1;var t=Jm(),e=t.Symbol;return KN=e,KN}var WN,AB;function fme(){if(AB)return WN;AB=1;var t=pC(),e=Object.prototype,a=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function l(c){var n=a.call(c,i),v=c[i];try{c[i]=void 0;var R=!0}catch{}var x=r.call(c);return R&&(n?c[i]=v:delete c[i]),x}return WN=l,WN}var YN,vB;function pme(){if(vB)return YN;vB=1;var t=Object.prototype,e=t.toString;function a(r){return e.call(r)}return YN=a,YN}var XN,_B;function jg(){if(_B)return XN;_B=1;var t=pC(),e=fme(),a=pme(),r="[object Null]",i="[object Undefined]",l=t?t.toStringTag:void 0;function c(n){return n==null?n===void 0?i:r:l&&l in Object(n)?e(n):a(n)}return XN=c,XN}var JN,wB;function Gg(){if(wB)return JN;wB=1;function t(e){return e!=null&&typeof e=="object"}return JN=t,JN}var QN,RB;function v1(){if(RB)return QN;RB=1;var t=jg(),e=Gg(),a="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==a}return QN=r,QN}var eO,TB;function ZL(){if(TB)return eO;TB=1;var t=jh(),e=v1(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(l,c){if(t(l))return!1;var n=typeof l;return n=="number"||n=="symbol"||n=="boolean"||l==null||e(l)?!0:r.test(l)||!a.test(l)||c!=null&&l in Object(c)}return eO=i,eO}var tO,CB;function dA(){if(CB)return tO;CB=1;function t(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}return tO=t,tO}var aO,SB;function qL(){if(SB)return aO;SB=1;var t=jg(),e=dA(),a="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",l="[object Proxy]";function c(n){if(!e(n))return!1;var v=t(n);return v==r||v==i||v==a||v==l}return aO=c,aO}var rO,bB;function mme(){if(bB)return rO;bB=1;var t=Jm(),e=t["__core-js_shared__"];return rO=e,rO}var nO,xB;function gme(){if(xB)return nO;xB=1;var t=mme(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function a(r){return!!e&&e in r}return nO=a,nO}var iO,PB;function jX(){if(PB)return iO;PB=1;var t=Function.prototype,e=t.toString;function a(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return iO=a,iO}var sO,EB;function yme(){if(EB)return sO;EB=1;var t=qL(),e=gme(),a=dA(),r=jX(),i=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,n=Object.prototype,v=c.toString,R=n.hasOwnProperty,x=RegExp("^"+v.call(R).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N(I){if(!a(I)||e(I))return!1;var k=t(I)?x:l;return k.test(r(I))}return sO=N,sO}var oO,NB;function Ame(){if(NB)return oO;NB=1;function t(e,a){return e==null?void 0:e[a]}return oO=t,oO}var lO,OB;function $v(){if(OB)return lO;OB=1;var t=yme(),e=Ame();function a(r,i){var l=e(r,i);return t(l)?l:void 0}return lO=a,lO}var uO,VB;function mP(){if(VB)return uO;VB=1;var t=$v(),e=t(Object,"create");return uO=e,uO}var cO,zB;function vme(){if(zB)return cO;zB=1;var t=mP();function e(){this.__data__=t?t(null):{},this.size=0}return cO=e,cO}var dO,DB;function _me(){if(DB)return dO;DB=1;function t(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}return dO=t,dO}var hO,MB;function wme(){if(MB)return hO;MB=1;var t=mP(),e="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function i(l){var c=this.__data__;if(t){var n=c[l];return n===e?void 0:n}return r.call(c,l)?c[l]:void 0}return hO=i,hO}var fO,IB;function Rme(){if(IB)return fO;IB=1;var t=mP(),e=Object.prototype,a=e.hasOwnProperty;function r(i){var l=this.__data__;return t?l[i]!==void 0:a.call(l,i)}return fO=r,fO}var pO,LB;function Tme(){if(LB)return pO;LB=1;var t=mP(),e="__lodash_hash_undefined__";function a(r,i){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=t&&i===void 0?e:i,this}return pO=a,pO}var mO,FB;function Cme(){if(FB)return mO;FB=1;var t=vme(),e=_me(),a=wme(),r=Rme(),i=Tme();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,mO=l,mO}var gO,kB;function Sme(){if(kB)return gO;kB=1;function t(){this.__data__=[],this.size=0}return gO=t,gO}var yO,UB;function HL(){if(UB)return yO;UB=1;function t(e,a){return e===a||e!==e&&a!==a}return yO=t,yO}var AO,BB;function gP(){if(BB)return AO;BB=1;var t=HL();function e(a,r){for(var i=a.length;i--;)if(t(a[i][0],r))return i;return-1}return AO=e,AO}var vO,jB;function bme(){if(jB)return vO;jB=1;var t=gP(),e=Array.prototype,a=e.splice;function r(i){var l=this.__data__,c=t(l,i);if(c<0)return!1;var n=l.length-1;return c==n?l.pop():a.call(l,c,1),--this.size,!0}return vO=r,vO}var _O,GB;function xme(){if(GB)return _O;GB=1;var t=gP();function e(a){var r=this.__data__,i=t(r,a);return i<0?void 0:r[i][1]}return _O=e,_O}var wO,ZB;function Pme(){if(ZB)return wO;ZB=1;var t=gP();function e(a){return t(this.__data__,a)>-1}return wO=e,wO}var RO,qB;function Eme(){if(qB)return RO;qB=1;var t=gP();function e(a,r){var i=this.__data__,l=t(i,a);return l<0?(++this.size,i.push([a,r])):i[l][1]=r,this}return RO=e,RO}var TO,HB;function yP(){if(HB)return TO;HB=1;var t=Sme(),e=bme(),a=xme(),r=Pme(),i=Eme();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,TO=l,TO}var CO,$B;function $L(){if($B)return CO;$B=1;var t=$v(),e=Jm(),a=t(e,"Map");return CO=a,CO}var SO,KB;function Nme(){if(KB)return SO;KB=1;var t=Cme(),e=yP(),a=$L();function r(){this.size=0,this.__data__={hash:new t,map:new(a||e),string:new t}}return SO=r,SO}var bO,WB;function Ome(){if(WB)return bO;WB=1;function t(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}return bO=t,bO}var xO,YB;function AP(){if(YB)return xO;YB=1;var t=Ome();function e(a,r){var i=a.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return xO=e,xO}var PO,XB;function Vme(){if(XB)return PO;XB=1;var t=AP();function e(a){var r=t(this,a).delete(a);return this.size-=r?1:0,r}return PO=e,PO}var EO,JB;function zme(){if(JB)return EO;JB=1;var t=AP();function e(a){return t(this,a).get(a)}return EO=e,EO}var NO,QB;function Dme(){if(QB)return NO;QB=1;var t=AP();function e(a){return t(this,a).has(a)}return NO=e,NO}var OO,e8;function Mme(){if(e8)return OO;e8=1;var t=AP();function e(a,r){var i=t(this,a),l=i.size;return i.set(a,r),this.size+=i.size==l?0:1,this}return OO=e,OO}var VO,t8;function KL(){if(t8)return VO;t8=1;var t=Nme(),e=Vme(),a=zme(),r=Dme(),i=Mme();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,VO=l,VO}var zO,a8;function GX(){if(a8)return zO;a8=1;var t=KL(),e="Expected a function";function a(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var l=function(){var c=arguments,n=i?i.apply(this,c):c[0],v=l.cache;if(v.has(n))return v.get(n);var R=r.apply(this,c);return l.cache=v.set(n,R)||v,R};return l.cache=new(a.Cache||t),l}return a.Cache=t,zO=a,zO}var DO,r8;function Ime(){if(r8)return DO;r8=1;var t=GX(),e=500;function a(r){var i=t(r,function(c){return l.size===e&&l.clear(),c}),l=i.cache;return i}return DO=a,DO}var MO,n8;function Lme(){if(n8)return MO;n8=1;var t=Ime(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=t(function(i){var l=[];return i.charCodeAt(0)===46&&l.push(""),i.replace(e,function(c,n,v,R){l.push(v?R.replace(a,"$1"):n||c)}),l});return MO=r,MO}var IO,i8;function WL(){if(i8)return IO;i8=1;function t(e,a){for(var r=-1,i=e==null?0:e.length,l=Array(i);++r<i;)l[r]=a(e[r],r,e);return l}return IO=t,IO}var LO,s8;function Fme(){if(s8)return LO;s8=1;var t=pC(),e=WL(),a=jh(),r=v1(),i=t?t.prototype:void 0,l=i?i.toString:void 0;function c(n){if(typeof n=="string")return n;if(a(n))return e(n,c)+"";if(r(n))return l?l.call(n):"";var v=n+"";return v=="0"&&1/n==-1/0?"-0":v}return LO=c,LO}var FO,o8;function ZX(){if(o8)return FO;o8=1;var t=Fme();function e(a){return a==null?"":t(a)}return FO=e,FO}var kO,l8;function qX(){if(l8)return kO;l8=1;var t=jh(),e=ZL(),a=Lme(),r=ZX();function i(l,c){return t(l)?l:e(l,c)?[l]:a(r(l))}return kO=i,kO}var UO,u8;function vP(){if(u8)return UO;u8=1;var t=v1();function e(a){if(typeof a=="string"||t(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return UO=e,UO}var BO,c8;function YL(){if(c8)return BO;c8=1;var t=qX(),e=vP();function a(r,i){i=t(i,r);for(var l=0,c=i.length;r!=null&&l<c;)r=r[e(i[l++])];return l&&l==c?r:void 0}return BO=a,BO}var jO,d8;function HX(){if(d8)return jO;d8=1;var t=YL();function e(a,r,i){var l=a==null?void 0:t(a,r);return l===void 0?i:l}return jO=e,jO}var kme=HX();const Rf=ss(kme);var GO,h8;function Ume(){if(h8)return GO;h8=1;function t(e){return e==null}return GO=t,GO}var Bme=Ume();const qn=ss(Bme);var ZO,f8;function jme(){if(f8)return ZO;f8=1;var t=jg(),e=jh(),a=Gg(),r="[object String]";function i(l){return typeof l=="string"||!e(l)&&a(l)&&t(l)==r}return ZO=i,ZO}var Gme=jme();const mC=ss(Gme);var Zme=qL();const Zn=ss(Zme);var qme=dA();const _1=ss(qme);var qO={exports:{}},Us={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p8;function Hme(){if(p8)return Us;p8=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),n=Symbol.for("react.server_context"),v=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),Z;Z=Symbol.for("react.module.reference");function $(H){if(typeof H=="object"&&H!==null){var W=H.$$typeof;switch(W){case t:switch(H=H.type,H){case a:case i:case r:case R:case x:return H;default:switch(H=H&&H.$$typeof,H){case n:case c:case v:case I:case N:case l:return H;default:return W}}case e:return W}}}return Us.ContextConsumer=c,Us.ContextProvider=l,Us.Element=t,Us.ForwardRef=v,Us.Fragment=a,Us.Lazy=I,Us.Memo=N,Us.Portal=e,Us.Profiler=i,Us.StrictMode=r,Us.Suspense=R,Us.SuspenseList=x,Us.isAsyncMode=function(){return!1},Us.isConcurrentMode=function(){return!1},Us.isContextConsumer=function(H){return $(H)===c},Us.isContextProvider=function(H){return $(H)===l},Us.isElement=function(H){return typeof H=="object"&&H!==null&&H.$$typeof===t},Us.isForwardRef=function(H){return $(H)===v},Us.isFragment=function(H){return $(H)===a},Us.isLazy=function(H){return $(H)===I},Us.isMemo=function(H){return $(H)===N},Us.isPortal=function(H){return $(H)===e},Us.isProfiler=function(H){return $(H)===i},Us.isStrictMode=function(H){return $(H)===r},Us.isSuspense=function(H){return $(H)===R},Us.isSuspenseList=function(H){return $(H)===x},Us.isValidElementType=function(H){return typeof H=="string"||typeof H=="function"||H===a||H===i||H===r||H===R||H===x||H===k||typeof H=="object"&&H!==null&&(H.$$typeof===I||H.$$typeof===N||H.$$typeof===l||H.$$typeof===c||H.$$typeof===v||H.$$typeof===Z||H.getModuleId!==void 0)},Us.typeOf=$,Us}var m8;function $me(){return m8||(m8=1,qO.exports=Hme()),qO.exports}var Kme=$me(),HO,g8;function $X(){if(g8)return HO;g8=1;var t=jg(),e=Gg(),a="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==a}return HO=r,HO}var $O,y8;function Wme(){if(y8)return $O;y8=1;var t=$X();function e(a){return t(a)&&a!=+a}return $O=e,$O}var Yme=Wme();const w1=ss(Yme);var Xme=$X();const Jme=ss(Xme);var lh=function(e){return e===0?0:e>0?1:-1},mv=function(e){return mC(e)&&e.indexOf("%")===e.length-1},Tr=function(e){return Jme(e)&&!w1(e)},qu=function(e){return Tr(e)||mC(e)},Qme=0,hA=function(e){var a=++Qme;return"".concat(e||"").concat(a)},uh=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Tr(e)&&!mC(e))return r;var l;if(mv(e)){var c=e.indexOf("%");l=a*parseFloat(e.slice(0,c))/100}else l=+e;return w1(l)&&(l=r),i&&l>a&&(l=a),l},ky=function(e){if(!e)return null;var a=Object.keys(e);return a&&a.length?e[a[0]]:null},ege=function(e){if(!Array.isArray(e))return!1;for(var a=e.length,r={},i=0;i<a;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},gl=function(e,a){return Tr(e)&&Tr(a)?function(r){return e+r*(a-e)}:function(){return a}};function fx(t,e,a){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Rf(r,e))===a})}var tge=function(e){if(!e||!e.length)return null;for(var a=e.length,r=0,i=0,l=0,c=0,n=1/0,v=-1/0,R=0,x=0,N=0;N<a;N++)R=e[N].cx||0,x=e[N].cy||0,r+=R,i+=x,l+=R*x,c+=R*R,n=Math.min(n,R),v=Math.max(v,R);var I=a*c!==r*r?(a*l-r*i)/(a*c-r*r):0;return{xmin:n,xmax:v,a:I,b:(i-I*r)/a}};function m_(t,e){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(e,a)||t[a]!==e[a]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function TM(t){"@babel/helpers - typeof";return TM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TM(t)}var age=["viewBox","children"],rge=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],A8=["points","pathLength"],KO={svg:age,polygon:A8,polyline:A8},XL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],px=function(e,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(ie.isValidElement(e)&&(r=e.props),!_1(r))return null;var i={};return Object.keys(r).forEach(function(l){XL.includes(l)&&(i[l]=a||function(c){return r[l](r,c)})}),i},nge=function(e,a,r){return function(i){return e(a,r,i),null}},tA=function(e,a,r){if(!_1(e)||TM(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(l){var c=e[l];XL.includes(l)&&typeof c=="function"&&(i||(i={}),i[l]=nge(c,a,r))}),i},ige=["children"],sge=["children"];function v8(t,e){if(t==null)return{};var a=oge(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function oge(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function CM(t){"@babel/helpers - typeof";return CM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CM(t)}var _8={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ng=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},w8=null,WO=null,JL=function t(e){if(e===w8&&Array.isArray(WO))return WO;var a=[];return ie.Children.forEach(e,function(r){qn(r)||(Kme.isFragment(r)?a=a.concat(t(r.props.children)):a.push(r))}),WO=a,w8=e,a};function mh(t,e){var a=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Ng(i)}):r=[Ng(e)],JL(t).forEach(function(i){var l=Rf(i,"type.displayName")||Rf(i,"type.name");r.indexOf(l)!==-1&&a.push(i)}),a}function pf(t,e){var a=mh(t,e);return a&&a[0]}var R8=function(e){if(!e||!e.props)return!1;var a=e.props,r=a.width,i=a.height;return!(!Tr(r)||r<=0||!Tr(i)||i<=0)},lge=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],uge=function(e){return e&&e.type&&mC(e.type)&&lge.indexOf(e.type)>=0},KX=function(e){return e&&CM(e)==="object"&&"clipDot"in e},cge=function(e,a,r,i){var l,c=(l=KO==null?void 0:KO[i])!==null&&l!==void 0?l:[];return!Zn(e)&&(i&&c.includes(a)||rge.includes(a))||r&&XL.includes(a)},yn=function(e,a,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(ie.isValidElement(e)&&(i=e.props),!_1(i))return null;var l={};return Object.keys(i).forEach(function(c){var n;cge((n=i)===null||n===void 0?void 0:n[c],c,a,r)&&(l[c]=i[c])}),l},SM=function t(e,a){if(e===a)return!0;var r=ie.Children.count(e);if(r!==ie.Children.count(a))return!1;if(r===0)return!0;if(r===1)return T8(Array.isArray(e)?e[0]:e,Array.isArray(a)?a[0]:a);for(var i=0;i<r;i++){var l=e[i],c=a[i];if(Array.isArray(l)||Array.isArray(c)){if(!t(l,c))return!1}else if(!T8(l,c))return!1}return!0},T8=function(e,a){if(qn(e)&&qn(a))return!0;if(!qn(e)&&!qn(a)){var r=e.props||{},i=r.children,l=v8(r,ige),c=a.props||{},n=c.children,v=v8(c,sge);return i&&n?m_(l,v)&&SM(i,n):!i&&!n?m_(l,v):!1}return!1},C8=function(e,a){var r=[],i={};return JL(e).forEach(function(l,c){if(uge(l))r.push(l);else if(l){var n=Ng(l.type),v=a[n]||{},R=v.handler,x=v.once;if(R&&(!x||!i[n])){var N=R(l,n,c);r.push(N),i[n]=!0}}}),r},dge=function(e){var a=e&&e.type;return a&&_8[a]?_8[a]:null},hge=function(e,a){return JL(a).indexOf(e)},fge=["children","width","height","viewBox","className","style","title","desc"];function bM(){return bM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},bM.apply(this,arguments)}function pge(t,e){if(t==null)return{};var a=mge(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mge(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function xM(t){var e=t.children,a=t.width,r=t.height,i=t.viewBox,l=t.className,c=t.style,n=t.title,v=t.desc,R=pge(t,fge),x=i||{width:a,height:r,x:0,y:0},N=mi("recharts-surface",l);return Vt.createElement("svg",bM({},yn(R,!0,"svg"),{className:N,width:a,height:r,style:c,viewBox:"".concat(x.x," ").concat(x.y," ").concat(x.width," ").concat(x.height)}),Vt.createElement("title",null,n),Vt.createElement("desc",null,v),e)}var gge=["children","className"];function PM(){return PM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},PM.apply(this,arguments)}function yge(t,e){if(t==null)return{};var a=Age(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Age(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var vi=Vt.forwardRef(function(t,e){var a=t.children,r=t.className,i=yge(t,gge),l=mi("recharts-layer",r);return Vt.createElement("g",PM({className:l},yn(i,!0),{ref:e}),a)}),$p=function(e,a){for(var r=arguments.length,i=new Array(r>2?r-2:0),l=2;l<r;l++)i[l-2]=arguments[l]},YO,S8;function vge(){if(S8)return YO;S8=1;function t(e,a,r){var i=-1,l=e.length;a<0&&(a=-a>l?0:l+a),r=r>l?l:r,r<0&&(r+=l),l=a>r?0:r-a>>>0,a>>>=0;for(var c=Array(l);++i<l;)c[i]=e[i+a];return c}return YO=t,YO}var XO,b8;function _ge(){if(b8)return XO;b8=1;var t=vge();function e(a,r,i){var l=a.length;return i=i===void 0?l:i,!r&&i>=l?a:t(a,r,i)}return XO=e,XO}var JO,x8;function WX(){if(x8)return JO;x8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+a+r,l="\\ufe0e\\ufe0f",c="\\u200d",n=RegExp("["+c+t+i+l+"]");function v(R){return n.test(R)}return JO=v,JO}var QO,P8;function wge(){if(P8)return QO;P8=1;function t(e){return e.split("")}return QO=t,QO}var eV,E8;function Rge(){if(E8)return eV;E8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+a+r,l="\\ufe0e\\ufe0f",c="["+t+"]",n="["+i+"]",v="\\ud83c[\\udffb-\\udfff]",R="(?:"+n+"|"+v+")",x="[^"+t+"]",N="(?:\\ud83c[\\udde6-\\uddff]){2}",I="[\\ud800-\\udbff][\\udc00-\\udfff]",k="\\u200d",Z=R+"?",$="["+l+"]?",H="(?:"+k+"(?:"+[x,N,I].join("|")+")"+$+Z+")*",W=$+Z+H,ee="(?:"+[x+n+"?",n,N,I,c].join("|")+")",oe=RegExp(v+"(?="+v+")|"+ee+W,"g");function pe(le){return le.match(oe)||[]}return eV=pe,eV}var tV,N8;function Tge(){if(N8)return tV;N8=1;var t=wge(),e=WX(),a=Rge();function r(i){return e(i)?a(i):t(i)}return tV=r,tV}var aV,O8;function Cge(){if(O8)return aV;O8=1;var t=_ge(),e=WX(),a=Tge(),r=ZX();function i(l){return function(c){c=r(c);var n=e(c)?a(c):void 0,v=n?n[0]:c.charAt(0),R=n?t(n,1).join(""):c.slice(1);return v[l]()+R}}return aV=i,aV}var rV,V8;function Sge(){if(V8)return rV;V8=1;var t=Cge(),e=t("toUpperCase");return rV=e,rV}var bge=Sge();const _P=ss(bge);function xo(t){return function(){return t}}const YX=Math.cos,mx=Math.sin,Qp=Math.sqrt,gx=Math.PI,wP=2*gx,EM=Math.PI,NM=2*EM,sv=1e-6,xge=NM-sv;function XX(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}function Pge(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return XX;const a=10**e;return function(r){this._+=r[0];for(let i=1,l=r.length;i<l;++i)this._+=Math.round(arguments[i]*a)/a+r[i]}}class Ege{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?XX:Pge(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,r,i){this._append`Q${+e},${+a},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,a,r,i,l,c){this._append`C${+e},${+a},${+r},${+i},${this._x1=+l},${this._y1=+c}`}arcTo(e,a,r,i,l){if(e=+e,a=+a,r=+r,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,n=this._y1,v=r-e,R=i-a,x=c-e,N=n-a,I=x*x+N*N;if(this._x1===null)this._append`M${this._x1=e},${this._y1=a}`;else if(I>sv)if(!(Math.abs(N*v-R*x)>sv)||!l)this._append`L${this._x1=e},${this._y1=a}`;else{let k=r-c,Z=i-n,$=v*v+R*R,H=k*k+Z*Z,W=Math.sqrt($),ee=Math.sqrt(I),oe=l*Math.tan((EM-Math.acos(($+I-H)/(2*W*ee)))/2),pe=oe/ee,le=oe/W;Math.abs(pe-1)>sv&&this._append`L${e+pe*x},${a+pe*N}`,this._append`A${l},${l},0,0,${+(N*k>x*Z)},${this._x1=e+le*v},${this._y1=a+le*R}`}}arc(e,a,r,i,l,c){if(e=+e,a=+a,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let n=r*Math.cos(i),v=r*Math.sin(i),R=e+n,x=a+v,N=1^c,I=c?i-l:l-i;this._x1===null?this._append`M${R},${x}`:(Math.abs(this._x1-R)>sv||Math.abs(this._y1-x)>sv)&&this._append`L${R},${x}`,r&&(I<0&&(I=I%NM+NM),I>xge?this._append`A${r},${r},0,1,${N},${e-n},${a-v}A${r},${r},0,1,${N},${this._x1=R},${this._y1=x}`:I>sv&&this._append`A${r},${r},0,${+(I>=EM)},${N},${this._x1=e+r*Math.cos(l)},${this._y1=a+r*Math.sin(l)}`)}rect(e,a,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function QL(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);e=r}return t},()=>new Ege(e)}function e4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function JX(t){this._context=t}JX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function RP(t){return new JX(t)}function QX(t){return t[0]}function eJ(t){return t[1]}function tJ(t,e){var a=xo(!0),r=null,i=RP,l=null,c=QL(n);t=typeof t=="function"?t:t===void 0?QX:xo(t),e=typeof e=="function"?e:e===void 0?eJ:xo(e);function n(v){var R,x=(v=e4(v)).length,N,I=!1,k;for(r==null&&(l=i(k=c())),R=0;R<=x;++R)!(R<x&&a(N=v[R],R,v))===I&&((I=!I)?l.lineStart():l.lineEnd()),I&&l.point(+t(N,R,v),+e(N,R,v));if(k)return l=null,k+""||null}return n.x=function(v){return arguments.length?(t=typeof v=="function"?v:xo(+v),n):t},n.y=function(v){return arguments.length?(e=typeof v=="function"?v:xo(+v),n):e},n.defined=function(v){return arguments.length?(a=typeof v=="function"?v:xo(!!v),n):a},n.curve=function(v){return arguments.length?(i=v,r!=null&&(l=i(r)),n):i},n.context=function(v){return arguments.length?(v==null?r=l=null:l=i(r=v),n):r},n}function KS(t,e,a){var r=null,i=xo(!0),l=null,c=RP,n=null,v=QL(R);t=typeof t=="function"?t:t===void 0?QX:xo(+t),e=typeof e=="function"?e:xo(e===void 0?0:+e),a=typeof a=="function"?a:a===void 0?eJ:xo(+a);function R(N){var I,k,Z,$=(N=e4(N)).length,H,W=!1,ee,oe=new Array($),pe=new Array($);for(l==null&&(n=c(ee=v())),I=0;I<=$;++I){if(!(I<$&&i(H=N[I],I,N))===W)if(W=!W)k=I,n.areaStart(),n.lineStart();else{for(n.lineEnd(),n.lineStart(),Z=I-1;Z>=k;--Z)n.point(oe[Z],pe[Z]);n.lineEnd(),n.areaEnd()}W&&(oe[I]=+t(H,I,N),pe[I]=+e(H,I,N),n.point(r?+r(H,I,N):oe[I],a?+a(H,I,N):pe[I]))}if(ee)return n=null,ee+""||null}function x(){return tJ().defined(i).curve(c).context(l)}return R.x=function(N){return arguments.length?(t=typeof N=="function"?N:xo(+N),r=null,R):t},R.x0=function(N){return arguments.length?(t=typeof N=="function"?N:xo(+N),R):t},R.x1=function(N){return arguments.length?(r=N==null?null:typeof N=="function"?N:xo(+N),R):r},R.y=function(N){return arguments.length?(e=typeof N=="function"?N:xo(+N),a=null,R):e},R.y0=function(N){return arguments.length?(e=typeof N=="function"?N:xo(+N),R):e},R.y1=function(N){return arguments.length?(a=N==null?null:typeof N=="function"?N:xo(+N),R):a},R.lineX0=R.lineY0=function(){return x().x(t).y(e)},R.lineY1=function(){return x().x(t).y(a)},R.lineX1=function(){return x().x(r).y(e)},R.defined=function(N){return arguments.length?(i=typeof N=="function"?N:xo(!!N),R):i},R.curve=function(N){return arguments.length?(c=N,l!=null&&(n=c(l)),R):c},R.context=function(N){return arguments.length?(N==null?l=n=null:n=c(l=N),R):l},R}class aJ{constructor(e,a){this._context=e,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,a){switch(e=+e,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,a,e,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,e,this._y0,e,a);break}}this._x0=e,this._y0=a}}function Nge(t){return new aJ(t,!0)}function Oge(t){return new aJ(t,!1)}const t4={draw(t,e){const a=Qp(e/gx);t.moveTo(a,0),t.arc(0,0,a,0,wP)}},Vge={draw(t,e){const a=Qp(e/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},rJ=Qp(1/3),zge=rJ*2,Dge={draw(t,e){const a=Qp(e/zge),r=a*rJ;t.moveTo(0,-a),t.lineTo(r,0),t.lineTo(0,a),t.lineTo(-r,0),t.closePath()}},Mge={draw(t,e){const a=Qp(e),r=-a/2;t.rect(r,r,a,a)}},Ige=.8908130915292852,nJ=mx(gx/10)/mx(7*gx/10),Lge=mx(wP/10)*nJ,Fge=-YX(wP/10)*nJ,kge={draw(t,e){const a=Qp(e*Ige),r=Lge*a,i=Fge*a;t.moveTo(0,-a),t.lineTo(r,i);for(let l=1;l<5;++l){const c=wP*l/5,n=YX(c),v=mx(c);t.lineTo(v*a,-n*a),t.lineTo(n*r-v*i,v*r+n*i)}t.closePath()}},nV=Qp(3),Uge={draw(t,e){const a=-Qp(e/(nV*3));t.moveTo(0,a*2),t.lineTo(-nV*a,-a),t.lineTo(nV*a,-a),t.closePath()}},Wf=-.5,Yf=Qp(3)/2,OM=1/Qp(12),Bge=(OM/2+1)*3,jge={draw(t,e){const a=Qp(e/Bge),r=a/2,i=a*OM,l=r,c=a*OM+a,n=-l,v=c;t.moveTo(r,i),t.lineTo(l,c),t.lineTo(n,v),t.lineTo(Wf*r-Yf*i,Yf*r+Wf*i),t.lineTo(Wf*l-Yf*c,Yf*l+Wf*c),t.lineTo(Wf*n-Yf*v,Yf*n+Wf*v),t.lineTo(Wf*r+Yf*i,Wf*i-Yf*r),t.lineTo(Wf*l+Yf*c,Wf*c-Yf*l),t.lineTo(Wf*n+Yf*v,Wf*v-Yf*n),t.closePath()}};function Gge(t,e){let a=null,r=QL(i);t=typeof t=="function"?t:xo(t||t4),e=typeof e=="function"?e:xo(e===void 0?64:+e);function i(){let l;if(a||(a=l=r()),t.apply(this,arguments).draw(a,+e.apply(this,arguments)),l)return a=null,l+""||null}return i.type=function(l){return arguments.length?(t=typeof l=="function"?l:xo(l),i):t},i.size=function(l){return arguments.length?(e=typeof l=="function"?l:xo(+l),i):e},i.context=function(l){return arguments.length?(a=l??null,i):a},i}function yx(){}function Ax(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function iJ(t){this._context=t}iJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ax(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ax(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Zge(t){return new iJ(t)}function sJ(t){this._context=t}sJ.prototype={areaStart:yx,areaEnd:yx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ax(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qge(t){return new sJ(t)}function oJ(t){this._context=t}oJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:Ax(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hge(t){return new oJ(t)}function lJ(t){this._context=t}lJ.prototype={areaStart:yx,areaEnd:yx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function $ge(t){return new lJ(t)}function z8(t){return t<0?-1:1}function D8(t,e,a){var r=t._x1-t._x0,i=e-t._x1,l=(t._y1-t._y0)/(r||i<0&&-0),c=(a-t._y1)/(i||r<0&&-0),n=(l*i+c*r)/(r+i);return(z8(l)+z8(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(n))||0}function M8(t,e){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-e)/2:e}function iV(t,e,a){var r=t._x0,i=t._y0,l=t._x1,c=t._y1,n=(l-r)/3;t._context.bezierCurveTo(r+n,i+n*e,l-n,c-n*a,l,c)}function vx(t){this._context=t}vx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iV(this,this._t0,M8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var a=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,iV(this,M8(this,a=D8(this,t,e)),a);break;default:iV(this,this._t0,a=D8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=a}}};function uJ(t){this._context=new cJ(t)}(uJ.prototype=Object.create(vx.prototype)).point=function(t,e){vx.prototype.point.call(this,e,t)};function cJ(t){this._context=t}cJ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,a,r,i,l){this._context.bezierCurveTo(e,t,r,a,l,i)}};function Kge(t){return new vx(t)}function Wge(t){return new uJ(t)}function dJ(t){this._context=t}dJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),a===2)this._context.lineTo(t[1],e[1]);else for(var r=I8(t),i=I8(e),l=0,c=1;c<a;++l,++c)this._context.bezierCurveTo(r[0][l],i[0][l],r[1][l],i[1][l],t[c],e[c]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function I8(t){var e,a=t.length-1,r,i=new Array(a),l=new Array(a),c=new Array(a);for(i[0]=0,l[0]=2,c[0]=t[0]+2*t[1],e=1;e<a-1;++e)i[e]=1,l[e]=4,c[e]=4*t[e]+2*t[e+1];for(i[a-1]=2,l[a-1]=7,c[a-1]=8*t[a-1]+t[a],e=1;e<a;++e)r=i[e]/l[e-1],l[e]-=r,c[e]-=r*c[e-1];for(i[a-1]=c[a-1]/l[a-1],e=a-2;e>=0;--e)i[e]=(c[e]-i[e+1])/l[e];for(l[a-1]=(t[a]+i[a-1])/2,e=0;e<a-1;++e)l[e]=2*t[e+1]-i[e+1];return[i,l]}function Yge(t){return new dJ(t)}function TP(t,e){this._context=t,this._t=e}TP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,e)}break}}this._x=t,this._y=e}};function Xge(t){return new TP(t,.5)}function Jge(t){return new TP(t,0)}function Qge(t){return new TP(t,1)}function O_(t,e){if((c=t.length)>1)for(var a=1,r,i,l=t[e[0]],c,n=l.length;a<c;++a)for(i=l,l=t[e[a]],r=0;r<n;++r)l[r][1]+=l[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function VM(t){for(var e=t.length,a=new Array(e);--e>=0;)a[e]=e;return a}function eye(t,e){return t[e]}function tye(t){const e=[];return e.key=t,e}function aye(){var t=xo([]),e=VM,a=O_,r=eye;function i(l){var c=Array.from(t.apply(this,arguments),tye),n,v=c.length,R=-1,x;for(const N of l)for(n=0,++R;n<v;++n)(c[n][R]=[0,+r(N,c[n].key,R,l)]).data=N;for(n=0,x=e4(e(c));n<v;++n)c[x[n]].index=n;return a(c,x),c}return i.keys=function(l){return arguments.length?(t=typeof l=="function"?l:xo(Array.from(l)),i):t},i.value=function(l){return arguments.length?(r=typeof l=="function"?l:xo(+l),i):r},i.order=function(l){return arguments.length?(e=l==null?VM:typeof l=="function"?l:xo(Array.from(l)),i):e},i.offset=function(l){return arguments.length?(a=l??O_,i):a},i}function rye(t,e){if((r=t.length)>0){for(var a,r,i=0,l=t[0].length,c;i<l;++i){for(c=a=0;a<r;++a)c+=t[a][i][1]||0;if(c)for(a=0;a<r;++a)t[a][i][1]/=c}O_(t,e)}}function nye(t,e){if((i=t.length)>0){for(var a=0,r=t[e[0]],i,l=r.length;a<l;++a){for(var c=0,n=0;c<i;++c)n+=t[c][a][1]||0;r[a][1]+=r[a][0]=-n/2}O_(t,e)}}function iye(t,e){if(!(!((c=t.length)>0)||!((l=(i=t[e[0]]).length)>0))){for(var a=0,r=1,i,l,c;r<l;++r){for(var n=0,v=0,R=0;n<c;++n){for(var x=t[e[n]],N=x[r][1]||0,I=x[r-1][1]||0,k=(N-I)/2,Z=0;Z<n;++Z){var $=t[e[Z]],H=$[r][1]||0,W=$[r-1][1]||0;k+=H-W}v+=N,R+=k*N}i[r-1][1]+=i[r-1][0]=a,v&&(a-=R/v)}i[r-1][1]+=i[r-1][0]=a,O_(t,e)}}function tT(t){"@babel/helpers - typeof";return tT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tT(t)}var sye=["type","size","sizeType"];function zM(){return zM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},zM.apply(this,arguments)}function L8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function F8(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?L8(Object(a),!0).forEach(function(r){oye(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function oye(t,e,a){return e=lye(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lye(t){var e=uye(t,"string");return tT(e)=="symbol"?e:e+""}function uye(t,e){if(tT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(tT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cye(t,e){if(t==null)return{};var a=dye(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dye(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var hJ={symbolCircle:t4,symbolCross:Vge,symbolDiamond:Dge,symbolSquare:Mge,symbolStar:kge,symbolTriangle:Uge,symbolWye:jge},hye=Math.PI/180,fye=function(e){var a="symbol".concat(_P(e));return hJ[a]||t4},pye=function(e,a,r){if(a==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*hye;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},mye=function(e,a){hJ["symbol".concat(_P(e))]=a},CP=function(e){var a=e.type,r=a===void 0?"circle":a,i=e.size,l=i===void 0?64:i,c=e.sizeType,n=c===void 0?"area":c,v=cye(e,sye),R=F8(F8({},v),{},{type:r,size:l,sizeType:n}),x=function(){var H=fye(r),W=Gge().type(H).size(pye(l,n,r));return W()},N=R.className,I=R.cx,k=R.cy,Z=yn(R,!0);return I===+I&&k===+k&&l===+l?Vt.createElement("path",zM({},Z,{className:mi("recharts-symbols",N),transform:"translate(".concat(I,", ").concat(k,")"),d:x()})):null};CP.registerSymbol=mye;function V_(t){"@babel/helpers - typeof";return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V_(t)}function DM(){return DM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},DM.apply(this,arguments)}function k8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function gye(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(a),!0).forEach(function(r){aT(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function yye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aye(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pJ(r.key),r)}}function vye(t,e,a){return e&&Aye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _ye(t,e,a){return e=_x(e),wye(t,fJ()?Reflect.construct(e,a||[],_x(t).constructor):e.apply(t,a))}function wye(t,e){if(e&&(V_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rye(t)}function Rye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fJ=function(){return!!t})()}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_x(t)}function Tye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MM(t,e)}function MM(t,e){return MM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MM(t,e)}function aT(t,e,a){return e=pJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pJ(t){var e=Cye(t,"string");return V_(e)=="symbol"?e:e+""}function Cye(t,e){if(V_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(V_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mp=32,a4=function(t){function e(){return yye(this,e),_ye(this,e,arguments)}return Tye(e,t),vye(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,l=Mp/2,c=Mp/6,n=Mp/3,v=r.inactive?i:r.color;if(r.type==="plainline")return Vt.createElement("line",{strokeWidth:4,fill:"none",stroke:v,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:l,x2:Mp,y2:l,className:"recharts-legend-icon"});if(r.type==="line")return Vt.createElement("path",{strokeWidth:4,fill:"none",stroke:v,d:"M0,".concat(l,"h").concat(n,`
            A`).concat(c,",").concat(c,",0,1,1,").concat(2*n,",").concat(l,`
            H`).concat(Mp,"M").concat(2*n,",").concat(l,`
            A`).concat(c,",").concat(c,",0,1,1,").concat(n,",").concat(l),className:"recharts-legend-icon"});if(r.type==="rect")return Vt.createElement("path",{stroke:"none",fill:v,d:"M0,".concat(Mp/8,"h").concat(Mp,"v").concat(Mp*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Vt.isValidElement(r.legendIcon)){var R=gye({},r);return delete R.legendIcon,Vt.cloneElement(r.legendIcon,R)}return Vt.createElement(CP,{fill:v,cx:l,cy:l,size:Mp,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,l=i.payload,c=i.iconSize,n=i.layout,v=i.formatter,R=i.inactiveColor,x={x:0,y:0,width:Mp,height:Mp},N={display:n==="horizontal"?"inline-block":"block",marginRight:10},I={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(k,Z){var $=k.formatter||v,H=mi(aT(aT({"recharts-legend-item":!0},"legend-item-".concat(Z),!0),"inactive",k.inactive));if(k.type==="none")return null;var W=Zn(k.value)?null:k.value;$p(!Zn(k.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var ee=k.inactive?R:k.color;return Vt.createElement("li",DM({className:H,style:N,key:"legend-item-".concat(Z)},tA(r.props,k,Z)),Vt.createElement(xM,{width:c,height:c,viewBox:x,style:I},r.renderIcon(k)),Vt.createElement("span",{className:"recharts-legend-item-text",style:{color:ee}},$?$(W,k,Z):W))})}},{key:"render",value:function(){var r=this.props,i=r.payload,l=r.layout,c=r.align;if(!i||!i.length)return null;var n={padding:0,margin:0,textAlign:l==="horizontal"?c:"left"};return Vt.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}])}(ie.PureComponent);aT(a4,"displayName","Legend");aT(a4,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sV,U8;function Sye(){if(U8)return sV;U8=1;var t=yP();function e(){this.__data__=new t,this.size=0}return sV=e,sV}var oV,B8;function bye(){if(B8)return oV;B8=1;function t(e){var a=this.__data__,r=a.delete(e);return this.size=a.size,r}return oV=t,oV}var lV,j8;function xye(){if(j8)return lV;j8=1;function t(e){return this.__data__.get(e)}return lV=t,lV}var uV,G8;function Pye(){if(G8)return uV;G8=1;function t(e){return this.__data__.has(e)}return uV=t,uV}var cV,Z8;function Eye(){if(Z8)return cV;Z8=1;var t=yP(),e=$L(),a=KL(),r=200;function i(l,c){var n=this.__data__;if(n instanceof t){var v=n.__data__;if(!e||v.length<r-1)return v.push([l,c]),this.size=++n.size,this;n=this.__data__=new a(v)}return n.set(l,c),this.size=n.size,this}return cV=i,cV}var dV,q8;function mJ(){if(q8)return dV;q8=1;var t=yP(),e=Sye(),a=bye(),r=xye(),i=Pye(),l=Eye();function c(n){var v=this.__data__=new t(n);this.size=v.size}return c.prototype.clear=e,c.prototype.delete=a,c.prototype.get=r,c.prototype.has=i,c.prototype.set=l,dV=c,dV}var hV,H8;function Nye(){if(H8)return hV;H8=1;var t="__lodash_hash_undefined__";function e(a){return this.__data__.set(a,t),this}return hV=e,hV}var fV,$8;function Oye(){if($8)return fV;$8=1;function t(e){return this.__data__.has(e)}return fV=t,fV}var pV,K8;function gJ(){if(K8)return pV;K8=1;var t=KL(),e=Nye(),a=Oye();function r(i){var l=-1,c=i==null?0:i.length;for(this.__data__=new t;++l<c;)this.add(i[l])}return r.prototype.add=r.prototype.push=e,r.prototype.has=a,pV=r,pV}var mV,W8;function yJ(){if(W8)return mV;W8=1;function t(e,a){for(var r=-1,i=e==null?0:e.length;++r<i;)if(a(e[r],r,e))return!0;return!1}return mV=t,mV}var gV,Y8;function AJ(){if(Y8)return gV;Y8=1;function t(e,a){return e.has(a)}return gV=t,gV}var yV,X8;function vJ(){if(X8)return yV;X8=1;var t=gJ(),e=yJ(),a=AJ(),r=1,i=2;function l(c,n,v,R,x,N){var I=v&r,k=c.length,Z=n.length;if(k!=Z&&!(I&&Z>k))return!1;var $=N.get(c),H=N.get(n);if($&&H)return $==n&&H==c;var W=-1,ee=!0,oe=v&i?new t:void 0;for(N.set(c,n),N.set(n,c);++W<k;){var pe=c[W],le=n[W];if(R)var ge=I?R(le,pe,W,n,c,N):R(pe,le,W,c,n,N);if(ge!==void 0){if(ge)continue;ee=!1;break}if(oe){if(!e(n,function(ue,Re){if(!a(oe,Re)&&(pe===ue||x(pe,ue,v,R,N)))return oe.push(Re)})){ee=!1;break}}else if(!(pe===le||x(pe,le,v,R,N))){ee=!1;break}}return N.delete(c),N.delete(n),ee}return yV=l,yV}var AV,J8;function Vye(){if(J8)return AV;J8=1;var t=Jm(),e=t.Uint8Array;return AV=e,AV}var vV,Q8;function zye(){if(Q8)return vV;Q8=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(i,l){r[++a]=[l,i]}),r}return vV=t,vV}var _V,ej;function r4(){if(ej)return _V;ej=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(i){r[++a]=i}),r}return _V=t,_V}var wV,tj;function Dye(){if(tj)return wV;tj=1;var t=pC(),e=Vye(),a=HL(),r=vJ(),i=zye(),l=r4(),c=1,n=2,v="[object Boolean]",R="[object Date]",x="[object Error]",N="[object Map]",I="[object Number]",k="[object RegExp]",Z="[object Set]",$="[object String]",H="[object Symbol]",W="[object ArrayBuffer]",ee="[object DataView]",oe=t?t.prototype:void 0,pe=oe?oe.valueOf:void 0;function le(ge,ue,Re,we,Ne,ne,_e){switch(Re){case ee:if(ge.byteLength!=ue.byteLength||ge.byteOffset!=ue.byteOffset)return!1;ge=ge.buffer,ue=ue.buffer;case W:return!(ge.byteLength!=ue.byteLength||!ne(new e(ge),new e(ue)));case v:case R:case I:return a(+ge,+ue);case x:return ge.name==ue.name&&ge.message==ue.message;case k:case $:return ge==ue+"";case N:var ke=i;case Z:var Pe=we&c;if(ke||(ke=l),ge.size!=ue.size&&!Pe)return!1;var Ee=_e.get(ge);if(Ee)return Ee==ue;we|=n,_e.set(ge,ue);var De=r(ke(ge),ke(ue),we,Ne,ne,_e);return _e.delete(ge),De;case H:if(pe)return pe.call(ge)==pe.call(ue)}return!1}return wV=le,wV}var RV,aj;function _J(){if(aj)return RV;aj=1;function t(e,a){for(var r=-1,i=a.length,l=e.length;++r<i;)e[l+r]=a[r];return e}return RV=t,RV}var TV,rj;function Mye(){if(rj)return TV;rj=1;var t=_J(),e=jh();function a(r,i,l){var c=i(r);return e(r)?c:t(c,l(r))}return TV=a,TV}var CV,nj;function Iye(){if(nj)return CV;nj=1;function t(e,a){for(var r=-1,i=e==null?0:e.length,l=0,c=[];++r<i;){var n=e[r];a(n,r,e)&&(c[l++]=n)}return c}return CV=t,CV}var SV,ij;function Lye(){if(ij)return SV;ij=1;function t(){return[]}return SV=t,SV}var bV,sj;function Fye(){if(sj)return bV;sj=1;var t=Iye(),e=Lye(),a=Object.prototype,r=a.propertyIsEnumerable,i=Object.getOwnPropertySymbols,l=i?function(c){return c==null?[]:(c=Object(c),t(i(c),function(n){return r.call(c,n)}))}:e;return bV=l,bV}var xV,oj;function kye(){if(oj)return xV;oj=1;function t(e,a){for(var r=-1,i=Array(e);++r<e;)i[r]=a(r);return i}return xV=t,xV}var PV,lj;function Uye(){if(lj)return PV;lj=1;var t=jg(),e=Gg(),a="[object Arguments]";function r(i){return e(i)&&t(i)==a}return PV=r,PV}var EV,uj;function n4(){if(uj)return EV;uj=1;var t=Uye(),e=Gg(),a=Object.prototype,r=a.hasOwnProperty,i=a.propertyIsEnumerable,l=t(function(){return arguments}())?t:function(c){return e(c)&&r.call(c,"callee")&&!i.call(c,"callee")};return EV=l,EV}var fR={exports:{}},NV,cj;function Bye(){if(cj)return NV;cj=1;function t(){return!1}return NV=t,NV}fR.exports;var dj;function wJ(){return dj||(dj=1,function(t,e){var a=Jm(),r=Bye(),i=e&&!e.nodeType&&e,l=i&&!0&&t&&!t.nodeType&&t,c=l&&l.exports===i,n=c?a.Buffer:void 0,v=n?n.isBuffer:void 0,R=v||r;t.exports=R}(fR,fR.exports)),fR.exports}var OV,hj;function i4(){if(hj)return OV;hj=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function a(r,i){var l=typeof r;return i=i??t,!!i&&(l=="number"||l!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return OV=a,OV}var VV,fj;function s4(){if(fj)return VV;fj=1;var t=9007199254740991;function e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return VV=e,VV}var zV,pj;function jye(){if(pj)return zV;pj=1;var t=jg(),e=s4(),a=Gg(),r="[object Arguments]",i="[object Array]",l="[object Boolean]",c="[object Date]",n="[object Error]",v="[object Function]",R="[object Map]",x="[object Number]",N="[object Object]",I="[object RegExp]",k="[object Set]",Z="[object String]",$="[object WeakMap]",H="[object ArrayBuffer]",W="[object DataView]",ee="[object Float32Array]",oe="[object Float64Array]",pe="[object Int8Array]",le="[object Int16Array]",ge="[object Int32Array]",ue="[object Uint8Array]",Re="[object Uint8ClampedArray]",we="[object Uint16Array]",Ne="[object Uint32Array]",ne={};ne[ee]=ne[oe]=ne[pe]=ne[le]=ne[ge]=ne[ue]=ne[Re]=ne[we]=ne[Ne]=!0,ne[r]=ne[i]=ne[H]=ne[l]=ne[W]=ne[c]=ne[n]=ne[v]=ne[R]=ne[x]=ne[N]=ne[I]=ne[k]=ne[Z]=ne[$]=!1;function _e(ke){return a(ke)&&e(ke.length)&&!!ne[t(ke)]}return zV=_e,zV}var DV,mj;function RJ(){if(mj)return DV;mj=1;function t(e){return function(a){return e(a)}}return DV=t,DV}var pR={exports:{}};pR.exports;var gj;function Gye(){return gj||(gj=1,function(t,e){var a=BX(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===r,c=l&&a.process,n=function(){try{var v=i&&i.require&&i.require("util").types;return v||c&&c.binding&&c.binding("util")}catch{}}();t.exports=n}(pR,pR.exports)),pR.exports}var MV,yj;function TJ(){if(yj)return MV;yj=1;var t=jye(),e=RJ(),a=Gye(),r=a&&a.isTypedArray,i=r?e(r):t;return MV=i,MV}var IV,Aj;function Zye(){if(Aj)return IV;Aj=1;var t=kye(),e=n4(),a=jh(),r=wJ(),i=i4(),l=TJ(),c=Object.prototype,n=c.hasOwnProperty;function v(R,x){var N=a(R),I=!N&&e(R),k=!N&&!I&&r(R),Z=!N&&!I&&!k&&l(R),$=N||I||k||Z,H=$?t(R.length,String):[],W=H.length;for(var ee in R)(x||n.call(R,ee))&&!($&&(ee=="length"||k&&(ee=="offset"||ee=="parent")||Z&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||i(ee,W)))&&H.push(ee);return H}return IV=v,IV}var LV,vj;function qye(){if(vj)return LV;vj=1;var t=Object.prototype;function e(a){var r=a&&a.constructor,i=typeof r=="function"&&r.prototype||t;return a===i}return LV=e,LV}var FV,_j;function CJ(){if(_j)return FV;_j=1;function t(e,a){return function(r){return e(a(r))}}return FV=t,FV}var kV,wj;function Hye(){if(wj)return kV;wj=1;var t=CJ(),e=t(Object.keys,Object);return kV=e,kV}var UV,Rj;function $ye(){if(Rj)return UV;Rj=1;var t=qye(),e=Hye(),a=Object.prototype,r=a.hasOwnProperty;function i(l){if(!t(l))return e(l);var c=[];for(var n in Object(l))r.call(l,n)&&n!="constructor"&&c.push(n);return c}return UV=i,UV}var BV,Tj;function gC(){if(Tj)return BV;Tj=1;var t=qL(),e=s4();function a(r){return r!=null&&e(r.length)&&!t(r)}return BV=a,BV}var jV,Cj;function SP(){if(Cj)return jV;Cj=1;var t=Zye(),e=$ye(),a=gC();function r(i){return a(i)?t(i):e(i)}return jV=r,jV}var GV,Sj;function Kye(){if(Sj)return GV;Sj=1;var t=Mye(),e=Fye(),a=SP();function r(i){return t(i,a,e)}return GV=r,GV}var ZV,bj;function Wye(){if(bj)return ZV;bj=1;var t=Kye(),e=1,a=Object.prototype,r=a.hasOwnProperty;function i(l,c,n,v,R,x){var N=n&e,I=t(l),k=I.length,Z=t(c),$=Z.length;if(k!=$&&!N)return!1;for(var H=k;H--;){var W=I[H];if(!(N?W in c:r.call(c,W)))return!1}var ee=x.get(l),oe=x.get(c);if(ee&&oe)return ee==c&&oe==l;var pe=!0;x.set(l,c),x.set(c,l);for(var le=N;++H<k;){W=I[H];var ge=l[W],ue=c[W];if(v)var Re=N?v(ue,ge,W,c,l,x):v(ge,ue,W,l,c,x);if(!(Re===void 0?ge===ue||R(ge,ue,n,v,x):Re)){pe=!1;break}le||(le=W=="constructor")}if(pe&&!le){var we=l.constructor,Ne=c.constructor;we!=Ne&&"constructor"in l&&"constructor"in c&&!(typeof we=="function"&&we instanceof we&&typeof Ne=="function"&&Ne instanceof Ne)&&(pe=!1)}return x.delete(l),x.delete(c),pe}return ZV=i,ZV}var qV,xj;function Yye(){if(xj)return qV;xj=1;var t=$v(),e=Jm(),a=t(e,"DataView");return qV=a,qV}var HV,Pj;function Xye(){if(Pj)return HV;Pj=1;var t=$v(),e=Jm(),a=t(e,"Promise");return HV=a,HV}var $V,Ej;function SJ(){if(Ej)return $V;Ej=1;var t=$v(),e=Jm(),a=t(e,"Set");return $V=a,$V}var KV,Nj;function Jye(){if(Nj)return KV;Nj=1;var t=$v(),e=Jm(),a=t(e,"WeakMap");return KV=a,KV}var WV,Oj;function Qye(){if(Oj)return WV;Oj=1;var t=Yye(),e=$L(),a=Xye(),r=SJ(),i=Jye(),l=jg(),c=jX(),n="[object Map]",v="[object Object]",R="[object Promise]",x="[object Set]",N="[object WeakMap]",I="[object DataView]",k=c(t),Z=c(e),$=c(a),H=c(r),W=c(i),ee=l;return(t&&ee(new t(new ArrayBuffer(1)))!=I||e&&ee(new e)!=n||a&&ee(a.resolve())!=R||r&&ee(new r)!=x||i&&ee(new i)!=N)&&(ee=function(oe){var pe=l(oe),le=pe==v?oe.constructor:void 0,ge=le?c(le):"";if(ge)switch(ge){case k:return I;case Z:return n;case $:return R;case H:return x;case W:return N}return pe}),WV=ee,WV}var YV,Vj;function eAe(){if(Vj)return YV;Vj=1;var t=mJ(),e=vJ(),a=Dye(),r=Wye(),i=Qye(),l=jh(),c=wJ(),n=TJ(),v=1,R="[object Arguments]",x="[object Array]",N="[object Object]",I=Object.prototype,k=I.hasOwnProperty;function Z($,H,W,ee,oe,pe){var le=l($),ge=l(H),ue=le?x:i($),Re=ge?x:i(H);ue=ue==R?N:ue,Re=Re==R?N:Re;var we=ue==N,Ne=Re==N,ne=ue==Re;if(ne&&c($)){if(!c(H))return!1;le=!0,we=!1}if(ne&&!we)return pe||(pe=new t),le||n($)?e($,H,W,ee,oe,pe):a($,H,ue,W,ee,oe,pe);if(!(W&v)){var _e=we&&k.call($,"__wrapped__"),ke=Ne&&k.call(H,"__wrapped__");if(_e||ke){var Pe=_e?$.value():$,Ee=ke?H.value():H;return pe||(pe=new t),oe(Pe,Ee,W,ee,pe)}}return ne?(pe||(pe=new t),r($,H,W,ee,oe,pe)):!1}return YV=Z,YV}var XV,zj;function o4(){if(zj)return XV;zj=1;var t=eAe(),e=Gg();function a(r,i,l,c,n){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,l,c,a,n)}return XV=a,XV}var JV,Dj;function tAe(){if(Dj)return JV;Dj=1;var t=mJ(),e=o4(),a=1,r=2;function i(l,c,n,v){var R=n.length,x=R,N=!v;if(l==null)return!x;for(l=Object(l);R--;){var I=n[R];if(N&&I[2]?I[1]!==l[I[0]]:!(I[0]in l))return!1}for(;++R<x;){I=n[R];var k=I[0],Z=l[k],$=I[1];if(N&&I[2]){if(Z===void 0&&!(k in l))return!1}else{var H=new t;if(v)var W=v(Z,$,k,l,c,H);if(!(W===void 0?e($,Z,a|r,v,H):W))return!1}}return!0}return JV=i,JV}var QV,Mj;function bJ(){if(Mj)return QV;Mj=1;var t=dA();function e(a){return a===a&&!t(a)}return QV=e,QV}var ez,Ij;function aAe(){if(Ij)return ez;Ij=1;var t=bJ(),e=SP();function a(r){for(var i=e(r),l=i.length;l--;){var c=i[l],n=r[c];i[l]=[c,n,t(n)]}return i}return ez=a,ez}var tz,Lj;function xJ(){if(Lj)return tz;Lj=1;function t(e,a){return function(r){return r==null?!1:r[e]===a&&(a!==void 0||e in Object(r))}}return tz=t,tz}var az,Fj;function rAe(){if(Fj)return az;Fj=1;var t=tAe(),e=aAe(),a=xJ();function r(i){var l=e(i);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(c){return c===i||t(c,i,l)}}return az=r,az}var rz,kj;function nAe(){if(kj)return rz;kj=1;function t(e,a){return e!=null&&a in Object(e)}return rz=t,rz}var nz,Uj;function iAe(){if(Uj)return nz;Uj=1;var t=qX(),e=n4(),a=jh(),r=i4(),i=s4(),l=vP();function c(n,v,R){v=t(v,n);for(var x=-1,N=v.length,I=!1;++x<N;){var k=l(v[x]);if(!(I=n!=null&&R(n,k)))break;n=n[k]}return I||++x!=N?I:(N=n==null?0:n.length,!!N&&i(N)&&r(k,N)&&(a(n)||e(n)))}return nz=c,nz}var iz,Bj;function sAe(){if(Bj)return iz;Bj=1;var t=nAe(),e=iAe();function a(r,i){return r!=null&&e(r,i,t)}return iz=a,iz}var sz,jj;function oAe(){if(jj)return sz;jj=1;var t=o4(),e=HX(),a=sAe(),r=ZL(),i=bJ(),l=xJ(),c=vP(),n=1,v=2;function R(x,N){return r(x)&&i(N)?l(c(x),N):function(I){var k=e(I,x);return k===void 0&&k===N?a(I,x):t(N,k,n|v)}}return sz=R,sz}var oz,Gj;function R1(){if(Gj)return oz;Gj=1;function t(e){return e}return oz=t,oz}var lz,Zj;function lAe(){if(Zj)return lz;Zj=1;function t(e){return function(a){return a==null?void 0:a[e]}}return lz=t,lz}var uz,qj;function uAe(){if(qj)return uz;qj=1;var t=YL();function e(a){return function(r){return t(r,a)}}return uz=e,uz}var cz,Hj;function cAe(){if(Hj)return cz;Hj=1;var t=lAe(),e=uAe(),a=ZL(),r=vP();function i(l){return a(l)?t(r(l)):e(l)}return cz=i,cz}var dz,$j;function Qm(){if($j)return dz;$j=1;var t=rAe(),e=oAe(),a=R1(),r=jh(),i=cAe();function l(c){return typeof c=="function"?c:c==null?a:typeof c=="object"?r(c)?e(c[0],c[1]):t(c):i(c)}return dz=l,dz}var hz,Kj;function PJ(){if(Kj)return hz;Kj=1;function t(e,a,r,i){for(var l=e.length,c=r+(i?1:-1);i?c--:++c<l;)if(a(e[c],c,e))return c;return-1}return hz=t,hz}var fz,Wj;function dAe(){if(Wj)return fz;Wj=1;function t(e){return e!==e}return fz=t,fz}var pz,Yj;function hAe(){if(Yj)return pz;Yj=1;function t(e,a,r){for(var i=r-1,l=e.length;++i<l;)if(e[i]===a)return i;return-1}return pz=t,pz}var mz,Xj;function fAe(){if(Xj)return mz;Xj=1;var t=PJ(),e=dAe(),a=hAe();function r(i,l,c){return l===l?a(i,l,c):t(i,e,c)}return mz=r,mz}var gz,Jj;function pAe(){if(Jj)return gz;Jj=1;var t=fAe();function e(a,r){var i=a==null?0:a.length;return!!i&&t(a,r,0)>-1}return gz=e,gz}var yz,Qj;function mAe(){if(Qj)return yz;Qj=1;function t(e,a,r){for(var i=-1,l=e==null?0:e.length;++i<l;)if(r(a,e[i]))return!0;return!1}return yz=t,yz}var Az,eG;function gAe(){if(eG)return Az;eG=1;function t(){}return Az=t,Az}var vz,tG;function yAe(){if(tG)return vz;tG=1;var t=SJ(),e=gAe(),a=r4(),r=1/0,i=t&&1/a(new t([,-0]))[1]==r?function(l){return new t(l)}:e;return vz=i,vz}var _z,aG;function AAe(){if(aG)return _z;aG=1;var t=gJ(),e=pAe(),a=mAe(),r=AJ(),i=yAe(),l=r4(),c=200;function n(v,R,x){var N=-1,I=e,k=v.length,Z=!0,$=[],H=$;if(x)Z=!1,I=a;else if(k>=c){var W=R?null:i(v);if(W)return l(W);Z=!1,I=r,H=new t}else H=R?[]:$;e:for(;++N<k;){var ee=v[N],oe=R?R(ee):ee;if(ee=x||ee!==0?ee:0,Z&&oe===oe){for(var pe=H.length;pe--;)if(H[pe]===oe)continue e;R&&H.push(oe),$.push(ee)}else I(H,oe,x)||(H!==$&&H.push(oe),$.push(ee))}return $}return _z=n,_z}var wz,rG;function vAe(){if(rG)return wz;rG=1;var t=Qm(),e=AAe();function a(r,i){return r&&r.length?e(r,t(i,2)):[]}return wz=a,wz}var _Ae=vAe();const nG=ss(_Ae);function EJ(t,e,a){return e===!0?nG(t,a):Zn(e)?nG(t,e):t}function z_(t){"@babel/helpers - typeof";return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z_(t)}var wAe=["ref"];function iG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function vg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?iG(Object(a),!0).forEach(function(r){bP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):iG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function RAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sG(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OJ(r.key),r)}}function TAe(t,e,a){return e&&sG(t.prototype,e),a&&sG(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function CAe(t,e,a){return e=wx(e),SAe(t,NJ()?Reflect.construct(e,a||[],wx(t).constructor):e.apply(t,a))}function SAe(t,e){if(e&&(z_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bAe(t)}function bAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NJ=function(){return!!t})()}function wx(t){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},wx(t)}function xAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IM(t,e)}function IM(t,e){return IM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IM(t,e)}function bP(t,e,a){return e=OJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function OJ(t){var e=PAe(t,"string");return z_(e)=="symbol"?e:e+""}function PAe(t,e){if(z_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(z_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function EAe(t,e){if(t==null)return{};var a=NAe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function NAe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function OAe(t){return t.value}function VAe(t,e){if(Vt.isValidElement(t))return Vt.cloneElement(t,e);if(typeof t=="function")return Vt.createElement(t,e);e.ref;var a=EAe(e,wAe);return Vt.createElement(a4,a)}var oG=1,mf=function(t){function e(){var a;RAe(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=CAe(this,e,[].concat(i)),bP(a,"lastBoundingBox",{width:-1,height:-1}),a}return xAe(e,t),TAe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>oG||Math.abs(i.height-this.lastBoundingBox.height)>oG)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?vg({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,l=i.layout,c=i.align,n=i.verticalAlign,v=i.margin,R=i.chartWidth,x=i.chartHeight,N,I;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(c==="center"&&l==="vertical"){var k=this.getBBoxSnapshot();N={left:((R||0)-k.width)/2}}else N=c==="right"?{right:v&&v.right||0}:{left:v&&v.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(n==="middle"){var Z=this.getBBoxSnapshot();I={top:((x||0)-Z.height)/2}}else I=n==="bottom"?{bottom:v&&v.bottom||0}:{top:v&&v.top||0};return vg(vg({},N),I)}},{key:"render",value:function(){var r=this,i=this.props,l=i.content,c=i.width,n=i.height,v=i.wrapperStyle,R=i.payloadUniqBy,x=i.payload,N=vg(vg({position:"absolute",width:c||"auto",height:n||"auto"},this.getDefaultPosition(v)),v);return Vt.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:function(k){r.wrapperNode=k}},VAe(l,vg(vg({},this.props),{},{payload:EJ(x,R,OAe)})))}}],[{key:"getWithHeight",value:function(r,i){var l=vg(vg({},this.defaultProps),r.props),c=l.layout;return c==="vertical"&&Tr(r.props.height)?{height:r.props.height}:c==="horizontal"?{width:r.props.width||i}:null}}])}(ie.PureComponent);bP(mf,"displayName","Legend");bP(mf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Rz,lG;function zAe(){if(lG)return Rz;lG=1;var t=pC(),e=n4(),a=jh(),r=t?t.isConcatSpreadable:void 0;function i(l){return a(l)||e(l)||!!(r&&l&&l[r])}return Rz=i,Rz}var Tz,uG;function VJ(){if(uG)return Tz;uG=1;var t=_J(),e=zAe();function a(r,i,l,c,n){var v=-1,R=r.length;for(l||(l=e),n||(n=[]);++v<R;){var x=r[v];i>0&&l(x)?i>1?a(x,i-1,l,c,n):t(n,x):c||(n[n.length]=x)}return n}return Tz=a,Tz}var Cz,cG;function DAe(){if(cG)return Cz;cG=1;function t(e){return function(a,r,i){for(var l=-1,c=Object(a),n=i(a),v=n.length;v--;){var R=n[e?v:++l];if(r(c[R],R,c)===!1)break}return a}}return Cz=t,Cz}var Sz,dG;function MAe(){if(dG)return Sz;dG=1;var t=DAe(),e=t();return Sz=e,Sz}var bz,hG;function zJ(){if(hG)return bz;hG=1;var t=MAe(),e=SP();function a(r,i){return r&&t(r,i,e)}return bz=a,bz}var xz,fG;function IAe(){if(fG)return xz;fG=1;var t=gC();function e(a,r){return function(i,l){if(i==null)return i;if(!t(i))return a(i,l);for(var c=i.length,n=r?c:-1,v=Object(i);(r?n--:++n<c)&&l(v[n],n,v)!==!1;);return i}}return xz=e,xz}var Pz,pG;function l4(){if(pG)return Pz;pG=1;var t=zJ(),e=IAe(),a=e(t);return Pz=a,Pz}var Ez,mG;function DJ(){if(mG)return Ez;mG=1;var t=l4(),e=gC();function a(r,i){var l=-1,c=e(r)?Array(r.length):[];return t(r,function(n,v,R){c[++l]=i(n,v,R)}),c}return Ez=a,Ez}var Nz,gG;function LAe(){if(gG)return Nz;gG=1;function t(e,a){var r=e.length;for(e.sort(a);r--;)e[r]=e[r].value;return e}return Nz=t,Nz}var Oz,yG;function FAe(){if(yG)return Oz;yG=1;var t=v1();function e(a,r){if(a!==r){var i=a!==void 0,l=a===null,c=a===a,n=t(a),v=r!==void 0,R=r===null,x=r===r,N=t(r);if(!R&&!N&&!n&&a>r||n&&v&&x&&!R&&!N||l&&v&&x||!i&&x||!c)return 1;if(!l&&!n&&!N&&a<r||N&&i&&c&&!l&&!n||R&&i&&c||!v&&c||!x)return-1}return 0}return Oz=e,Oz}var Vz,AG;function kAe(){if(AG)return Vz;AG=1;var t=FAe();function e(a,r,i){for(var l=-1,c=a.criteria,n=r.criteria,v=c.length,R=i.length;++l<v;){var x=t(c[l],n[l]);if(x){if(l>=R)return x;var N=i[l];return x*(N=="desc"?-1:1)}}return a.index-r.index}return Vz=e,Vz}var zz,vG;function UAe(){if(vG)return zz;vG=1;var t=WL(),e=YL(),a=Qm(),r=DJ(),i=LAe(),l=RJ(),c=kAe(),n=R1(),v=jh();function R(x,N,I){N.length?N=t(N,function($){return v($)?function(H){return e(H,$.length===1?$[0]:$)}:$}):N=[n];var k=-1;N=t(N,l(a));var Z=r(x,function($,H,W){var ee=t(N,function(oe){return oe($)});return{criteria:ee,index:++k,value:$}});return i(Z,function($,H){return c($,H,I)})}return zz=R,zz}var Dz,_G;function BAe(){if(_G)return Dz;_G=1;function t(e,a,r){switch(r.length){case 0:return e.call(a);case 1:return e.call(a,r[0]);case 2:return e.call(a,r[0],r[1]);case 3:return e.call(a,r[0],r[1],r[2])}return e.apply(a,r)}return Dz=t,Dz}var Mz,wG;function jAe(){if(wG)return Mz;wG=1;var t=BAe(),e=Math.max;function a(r,i,l){return i=e(i===void 0?r.length-1:i,0),function(){for(var c=arguments,n=-1,v=e(c.length-i,0),R=Array(v);++n<v;)R[n]=c[i+n];n=-1;for(var x=Array(i+1);++n<i;)x[n]=c[n];return x[i]=l(R),t(r,this,x)}}return Mz=a,Mz}var Iz,RG;function GAe(){if(RG)return Iz;RG=1;function t(e){return function(){return e}}return Iz=t,Iz}var Lz,TG;function MJ(){if(TG)return Lz;TG=1;var t=$v(),e=function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}}();return Lz=e,Lz}var Fz,CG;function ZAe(){if(CG)return Fz;CG=1;var t=GAe(),e=MJ(),a=R1(),r=e?function(i,l){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(l),writable:!0})}:a;return Fz=r,Fz}var kz,SG;function qAe(){if(SG)return kz;SG=1;var t=800,e=16,a=Date.now;function r(i){var l=0,c=0;return function(){var n=a(),v=e-(n-c);if(c=n,v>0){if(++l>=t)return arguments[0]}else l=0;return i.apply(void 0,arguments)}}return kz=r,kz}var Uz,bG;function HAe(){if(bG)return Uz;bG=1;var t=ZAe(),e=qAe(),a=e(t);return Uz=a,Uz}var Bz,xG;function $Ae(){if(xG)return Bz;xG=1;var t=R1(),e=jAe(),a=HAe();function r(i,l){return a(e(i,l,t),i+"")}return Bz=r,Bz}var jz,PG;function xP(){if(PG)return jz;PG=1;var t=HL(),e=gC(),a=i4(),r=dA();function i(l,c,n){if(!r(n))return!1;var v=typeof c;return(v=="number"?e(n)&&a(c,n.length):v=="string"&&c in n)?t(n[c],l):!1}return jz=i,jz}var Gz,EG;function KAe(){if(EG)return Gz;EG=1;var t=VJ(),e=UAe(),a=$Ae(),r=xP(),i=a(function(l,c){if(l==null)return[];var n=c.length;return n>1&&r(l,c[0],c[1])?c=[]:n>2&&r(c[0],c[1],c[2])&&(c=[c[0]]),e(l,t(c,1),[])});return Gz=i,Gz}var WAe=KAe();const u4=ss(WAe);function rT(t){"@babel/helpers - typeof";return rT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rT(t)}function LM(){return LM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},LM.apply(this,arguments)}function YAe(t,e){return eve(t)||QAe(t,e)||JAe(t,e)||XAe()}function XAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JAe(t,e){if(t){if(typeof t=="string")return NG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return NG(t,e)}}function NG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function QAe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function eve(t){if(Array.isArray(t))return t}function OG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Zz(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?OG(Object(a),!0).forEach(function(r){tve(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):OG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function tve(t,e,a){return e=ave(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ave(t){var e=rve(t,"string");return rT(e)=="symbol"?e:e+""}function rve(t,e){if(rT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(rT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nve(t){return Array.isArray(t)&&qu(t[0])&&qu(t[1])?t.join(" ~ "):t}var ive=function(e){var a=e.separator,r=a===void 0?" : ":a,i=e.contentStyle,l=i===void 0?{}:i,c=e.itemStyle,n=c===void 0?{}:c,v=e.labelStyle,R=v===void 0?{}:v,x=e.payload,N=e.formatter,I=e.itemSorter,k=e.wrapperClassName,Z=e.labelClassName,$=e.label,H=e.labelFormatter,W=e.accessibilityLayer,ee=W===void 0?!1:W,oe=function(){if(x&&x.length){var _e={padding:0,margin:0},ke=(I?u4(x,I):x).map(function(Pe,Ee){if(Pe.type==="none")return null;var De=Zz({display:"block",paddingTop:4,paddingBottom:4,color:Pe.color||"#000"},n),qe=Pe.formatter||N||nve,Oe=Pe.value,He=Pe.name,Ue=Oe,ct=He;if(qe&&Ue!=null&&ct!=null){var Se=qe(Oe,He,Pe,Ee,x);if(Array.isArray(Se)){var Ie=YAe(Se,2);Ue=Ie[0],ct=Ie[1]}else Ue=Se}return Vt.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Ee),style:De},qu(ct)?Vt.createElement("span",{className:"recharts-tooltip-item-name"},ct):null,qu(ct)?Vt.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Vt.createElement("span",{className:"recharts-tooltip-item-value"},Ue),Vt.createElement("span",{className:"recharts-tooltip-item-unit"},Pe.unit||""))});return Vt.createElement("ul",{className:"recharts-tooltip-item-list",style:_e},ke)}return null},pe=Zz({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),le=Zz({margin:0},R),ge=!qn($),ue=ge?$:"",Re=mi("recharts-default-tooltip",k),we=mi("recharts-tooltip-label",Z);ge&&H&&x!==void 0&&x!==null&&(ue=H($,x));var Ne=ee?{role:"status","aria-live":"assertive"}:{};return Vt.createElement("div",LM({className:Re,style:pe},Ne),Vt.createElement("p",{className:we,style:le},Vt.isValidElement(ue)?ue:"".concat(ue)),oe())};function nT(t){"@babel/helpers - typeof";return nT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nT(t)}function WS(t,e,a){return e=sve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function sve(t){var e=ove(t,"string");return nT(e)=="symbol"?e:e+""}function ove(t,e){if(nT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(nT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jw="recharts-tooltip-wrapper",lve={visibility:"hidden"};function uve(t){var e=t.coordinate,a=t.translateX,r=t.translateY;return mi(jw,WS(WS(WS(WS({},"".concat(jw,"-right"),Tr(a)&&e&&Tr(e.x)&&a>=e.x),"".concat(jw,"-left"),Tr(a)&&e&&Tr(e.x)&&a<e.x),"".concat(jw,"-bottom"),Tr(r)&&e&&Tr(e.y)&&r>=e.y),"".concat(jw,"-top"),Tr(r)&&e&&Tr(e.y)&&r<e.y))}function VG(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.key,i=t.offsetTopLeft,l=t.position,c=t.reverseDirection,n=t.tooltipDimension,v=t.viewBox,R=t.viewBoxDimension;if(l&&Tr(l[r]))return l[r];var x=a[r]-n-i,N=a[r]+i;if(e[r])return c[r]?x:N;if(c[r]){var I=x,k=v[r];return I<k?Math.max(N,v[r]):Math.max(x,v[r])}var Z=N+n,$=v[r]+R;return Z>$?Math.max(x,v[r]):Math.max(N,v[r])}function cve(t){var e=t.translateX,a=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(a,"px, 0)"):"translate(".concat(e,"px, ").concat(a,"px)")}}function dve(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.offsetTopLeft,i=t.position,l=t.reverseDirection,c=t.tooltipBox,n=t.useTranslate3d,v=t.viewBox,R,x,N;return c.height>0&&c.width>0&&a?(x=VG({allowEscapeViewBox:e,coordinate:a,key:"x",offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:c.width,viewBox:v,viewBoxDimension:v.width}),N=VG({allowEscapeViewBox:e,coordinate:a,key:"y",offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:c.height,viewBox:v,viewBoxDimension:v.height}),R=cve({translateX:x,translateY:N,useTranslate3d:n})):R=lve,{cssProperties:R,cssClasses:uve({translateX:x,translateY:N,coordinate:a})}}function D_(t){"@babel/helpers - typeof";return D_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D_(t)}function zG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function DG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(a),!0).forEach(function(r){kM(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function hve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fve(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LJ(r.key),r)}}function pve(t,e,a){return e&&fve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mve(t,e,a){return e=Rx(e),gve(t,IJ()?Reflect.construct(e,a||[],Rx(t).constructor):e.apply(t,a))}function gve(t,e){if(e&&(D_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yve(t)}function yve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IJ=function(){return!!t})()}function Rx(t){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rx(t)}function Ave(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FM(t,e)}function FM(t,e){return FM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FM(t,e)}function kM(t,e,a){return e=LJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function LJ(t){var e=vve(t,"string");return D_(e)=="symbol"?e:e+""}function vve(t,e){if(D_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(D_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MG=1,_ve=function(t){function e(){var a;hve(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=mve(this,e,[].concat(i)),kM(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),kM(a,"handleKeyDown",function(c){if(c.key==="Escape"){var n,v,R,x;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(v=a.props.coordinate)===null||v===void 0?void 0:v.x)!==null&&n!==void 0?n:0,y:(R=(x=a.props.coordinate)===null||x===void 0?void 0:x.y)!==null&&R!==void 0?R:0}})}}),a}return Ave(e,t),pve(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>MG||Math.abs(r.height-this.state.lastBoundingBox.height)>MG)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,l=i.active,c=i.allowEscapeViewBox,n=i.animationDuration,v=i.animationEasing,R=i.children,x=i.coordinate,N=i.hasPayload,I=i.isAnimationActive,k=i.offset,Z=i.position,$=i.reverseDirection,H=i.useTranslate3d,W=i.viewBox,ee=i.wrapperStyle,oe=dve({allowEscapeViewBox:c,coordinate:x,offsetTopLeft:k,position:Z,reverseDirection:$,tooltipBox:this.state.lastBoundingBox,useTranslate3d:H,viewBox:W}),pe=oe.cssClasses,le=oe.cssProperties,ge=DG(DG({transition:I&&l?"transform ".concat(n,"ms ").concat(v):void 0},le),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&N?"visible":"hidden",position:"absolute",top:0,left:0},ee);return Vt.createElement("div",{tabIndex:-1,className:pe,style:ge,ref:function(Re){r.wrapperNode=Re}},R)}}])}(ie.PureComponent),wve=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Zg={isSsr:wve()};function M_(t){"@babel/helpers - typeof";return M_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M_(t)}function IG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function LG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(a),!0).forEach(function(r){c4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Rve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tve(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kJ(r.key),r)}}function Cve(t,e,a){return e&&Tve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sve(t,e,a){return e=Tx(e),bve(t,FJ()?Reflect.construct(e,a||[],Tx(t).constructor):e.apply(t,a))}function bve(t,e){if(e&&(M_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xve(t)}function xve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FJ=function(){return!!t})()}function Tx(t){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Tx(t)}function Pve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UM(t,e)}function UM(t,e){return UM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UM(t,e)}function c4(t,e,a){return e=kJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kJ(t){var e=Eve(t,"string");return M_(e)=="symbol"?e:e+""}function Eve(t,e){if(M_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(M_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Nve(t){return t.dataKey}function Ove(t,e){return Vt.isValidElement(t)?Vt.cloneElement(t,e):typeof t=="function"?Vt.createElement(t,e):Vt.createElement(ive,e)}var yu=function(t){function e(){return Rve(this,e),Sve(this,e,arguments)}return Pve(e,t),Cve(e,[{key:"render",value:function(){var r=this,i=this.props,l=i.active,c=i.allowEscapeViewBox,n=i.animationDuration,v=i.animationEasing,R=i.content,x=i.coordinate,N=i.filterNull,I=i.isAnimationActive,k=i.offset,Z=i.payload,$=i.payloadUniqBy,H=i.position,W=i.reverseDirection,ee=i.useTranslate3d,oe=i.viewBox,pe=i.wrapperStyle,le=Z??[];N&&le.length&&(le=EJ(Z.filter(function(ue){return ue.value!=null&&(ue.hide!==!0||r.props.includeHidden)}),$,Nve));var ge=le.length>0;return Vt.createElement(_ve,{allowEscapeViewBox:c,animationDuration:n,animationEasing:v,isAnimationActive:I,active:l,coordinate:x,hasPayload:ge,offset:k,position:H,reverseDirection:W,useTranslate3d:ee,viewBox:oe,wrapperStyle:pe},Ove(R,LG(LG({},this.props),{},{payload:le})))}}])}(ie.PureComponent);c4(yu,"displayName","Tooltip");c4(yu,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Zg.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qz,FG;function Vve(){if(FG)return qz;FG=1;var t=Jm(),e=function(){return t.Date.now()};return qz=e,qz}var Hz,kG;function zve(){if(kG)return Hz;kG=1;var t=/\s/;function e(a){for(var r=a.length;r--&&t.test(a.charAt(r)););return r}return Hz=e,Hz}var $z,UG;function Dve(){if(UG)return $z;UG=1;var t=zve(),e=/^\s+/;function a(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return $z=a,$z}var Kz,BG;function UJ(){if(BG)return Kz;BG=1;var t=Dve(),e=dA(),a=v1(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,n=parseInt;function v(R){if(typeof R=="number")return R;if(a(R))return r;if(e(R)){var x=typeof R.valueOf=="function"?R.valueOf():R;R=e(x)?x+"":x}if(typeof R!="string")return R===0?R:+R;R=t(R);var N=l.test(R);return N||c.test(R)?n(R.slice(2),N?2:8):i.test(R)?r:+R}return Kz=v,Kz}var Wz,jG;function Mve(){if(jG)return Wz;jG=1;var t=dA(),e=Vve(),a=UJ(),r="Expected a function",i=Math.max,l=Math.min;function c(n,v,R){var x,N,I,k,Z,$,H=0,W=!1,ee=!1,oe=!0;if(typeof n!="function")throw new TypeError(r);v=a(v)||0,t(R)&&(W=!!R.leading,ee="maxWait"in R,I=ee?i(a(R.maxWait)||0,v):I,oe="trailing"in R?!!R.trailing:oe);function pe(ke){var Pe=x,Ee=N;return x=N=void 0,H=ke,k=n.apply(Ee,Pe),k}function le(ke){return H=ke,Z=setTimeout(Re,v),W?pe(ke):k}function ge(ke){var Pe=ke-$,Ee=ke-H,De=v-Pe;return ee?l(De,I-Ee):De}function ue(ke){var Pe=ke-$,Ee=ke-H;return $===void 0||Pe>=v||Pe<0||ee&&Ee>=I}function Re(){var ke=e();if(ue(ke))return we(ke);Z=setTimeout(Re,ge(ke))}function we(ke){return Z=void 0,oe&&x?pe(ke):(x=N=void 0,k)}function Ne(){Z!==void 0&&clearTimeout(Z),H=0,x=$=N=Z=void 0}function ne(){return Z===void 0?k:we(e())}function _e(){var ke=e(),Pe=ue(ke);if(x=arguments,N=this,$=ke,Pe){if(Z===void 0)return le($);if(ee)return clearTimeout(Z),Z=setTimeout(Re,v),pe($)}return Z===void 0&&(Z=setTimeout(Re,v)),k}return _e.cancel=Ne,_e.flush=ne,_e}return Wz=c,Wz}var Yz,GG;function Ive(){if(GG)return Yz;GG=1;var t=Mve(),e=dA(),a="Expected a function";function r(i,l,c){var n=!0,v=!0;if(typeof i!="function")throw new TypeError(a);return e(c)&&(n="leading"in c?!!c.leading:n,v="trailing"in c?!!c.trailing:v),t(i,l,{leading:n,maxWait:l,trailing:v})}return Yz=r,Yz}var Lve=Ive();const BJ=ss(Lve);function iT(t){"@babel/helpers - typeof";return iT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(t)}function ZG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function YS(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ZG(Object(a),!0).forEach(function(r){Fve(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ZG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Fve(t,e,a){return e=kve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kve(t){var e=Uve(t,"string");return iT(e)=="symbol"?e:e+""}function Uve(t,e){if(iT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(iT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bve(t,e){return qve(t)||Zve(t,e)||Gve(t,e)||jve()}function jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gve(t,e){if(t){if(typeof t=="string")return qG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qG(t,e)}}function qG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Zve(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function qve(t){if(Array.isArray(t))return t}var Up=ie.forwardRef(function(t,e){var a=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,l=t.width,c=l===void 0?"100%":l,n=t.height,v=n===void 0?"100%":n,R=t.minWidth,x=R===void 0?0:R,N=t.minHeight,I=t.maxHeight,k=t.children,Z=t.debounce,$=Z===void 0?0:Z,H=t.id,W=t.className,ee=t.onResize,oe=t.style,pe=oe===void 0?{}:oe,le=ie.useRef(null),ge=ie.useRef();ge.current=ee,ie.useImperativeHandle(e,function(){return Object.defineProperty(le.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),le.current},configurable:!0})});var ue=ie.useState({containerWidth:i.width,containerHeight:i.height}),Re=Bve(ue,2),we=Re[0],Ne=Re[1],ne=ie.useCallback(function(ke,Pe){Ne(function(Ee){var De=Math.round(ke),qe=Math.round(Pe);return Ee.containerWidth===De&&Ee.containerHeight===qe?Ee:{containerWidth:De,containerHeight:qe}})},[]);ie.useEffect(function(){var ke=function(He){var Ue,ct=He[0].contentRect,Se=ct.width,Ie=ct.height;ne(Se,Ie),(Ue=ge.current)===null||Ue===void 0||Ue.call(ge,Se,Ie)};$>0&&(ke=BJ(ke,$,{trailing:!0,leading:!1}));var Pe=new ResizeObserver(ke),Ee=le.current.getBoundingClientRect(),De=Ee.width,qe=Ee.height;return ne(De,qe),Pe.observe(le.current),function(){Pe.disconnect()}},[ne,$]);var _e=ie.useMemo(function(){var ke=we.containerWidth,Pe=we.containerHeight;if(ke<0||Pe<0)return null;$p(mv(c)||mv(v),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,c,v),$p(!a||a>0,"The aspect(%s) must be greater than zero.",a);var Ee=mv(c)?ke:c,De=mv(v)?Pe:v;a&&a>0&&(Ee?De=Ee/a:De&&(Ee=De*a),I&&De>I&&(De=I)),$p(Ee>0||De>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Ee,De,c,v,x,N,a);var qe=!Array.isArray(k)&&Ng(k.type).endsWith("Chart");return Vt.Children.map(k,function(Oe){return Vt.isValidElement(Oe)?ie.cloneElement(Oe,YS({width:Ee,height:De},qe?{style:YS({height:"100%",width:"100%",maxHeight:De,maxWidth:Ee},Oe.props.style)}:{})):Oe})},[a,k,v,I,N,x,we,c]);return Vt.createElement("div",{id:H?"".concat(H):void 0,className:mi("recharts-responsive-container",W),style:YS(YS({},pe),{},{width:c,height:v,minWidth:x,minHeight:N,maxHeight:I}),ref:le},_e)}),I_=function(e){return null};I_.displayName="Cell";function sT(t){"@babel/helpers - typeof";return sT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sT(t)}function HG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function BM(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?HG(Object(a),!0).forEach(function(r){Hve(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):HG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Hve(t,e,a){return e=$ve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function $ve(t){var e=Kve(t,"string");return sT(e)=="symbol"?e:e+""}function Kve(t,e){if(sT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(sT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U0={widthCache:{},cacheCount:0},Wve=2e3,Yve={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$G="recharts_measurement_span";function Xve(t){var e=BM({},t);return Object.keys(e).forEach(function(a){e[a]||delete e[a]}),e}var TR=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Zg.isSsr)return{width:0,height:0};var r=Xve(a),i=JSON.stringify({text:e,copyStyle:r});if(U0.widthCache[i])return U0.widthCache[i];try{var l=document.getElementById($G);l||(l=document.createElement("span"),l.setAttribute("id",$G),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var c=BM(BM({},Yve),r);Object.assign(l.style,c),l.textContent="".concat(e);var n=l.getBoundingClientRect(),v={width:n.width,height:n.height};return U0.widthCache[i]=v,++U0.cacheCount>Wve&&(U0.cacheCount=0,U0.widthCache={}),v}catch{return{width:0,height:0}}},Jve=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function oT(t){"@babel/helpers - typeof";return oT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oT(t)}function Cx(t,e){return a0e(t)||t0e(t,e)||e0e(t,e)||Qve()}function Qve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e0e(t,e){if(t){if(typeof t=="string")return KG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return KG(t,e)}}function KG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function t0e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;v=!1}else for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function a0e(t){if(Array.isArray(t))return t}function r0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WG(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i0e(r.key),r)}}function n0e(t,e,a){return e&&WG(t.prototype,e),a&&WG(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function i0e(t){var e=s0e(t,"string");return oT(e)=="symbol"?e:e+""}function s0e(t,e){if(oT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(oT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,XG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,o0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,l0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},u0e=Object.keys(jJ),t_="NaN";function c0e(t,e){return t*jJ[e]}var XS=function(){function t(e,a){r0e(this,t),this.num=e,this.unit=a,this.num=e,this.unit=a,Number.isNaN(e)&&(this.unit=""),a!==""&&!o0e.test(a)&&(this.num=NaN,this.unit=""),u0e.includes(a)&&(this.num=c0e(e,a),this.unit="px")}return n0e(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,i=(r=l0e.exec(a))!==null&&r!==void 0?r:[],l=Cx(i,3),c=l[1],n=l[2];return new t(parseFloat(c),n??"")}}])}();function GJ(t){if(t.includes(t_))return t_;for(var e=t;e.includes("*")||e.includes("/");){var a,r=(a=YG.exec(e))!==null&&a!==void 0?a:[],i=Cx(r,4),l=i[1],c=i[2],n=i[3],v=XS.parse(l??""),R=XS.parse(n??""),x=c==="*"?v.multiply(R):v.divide(R);if(x.isNaN())return t_;e=e.replace(YG,x.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var N,I=(N=XG.exec(e))!==null&&N!==void 0?N:[],k=Cx(I,4),Z=k[1],$=k[2],H=k[3],W=XS.parse(Z??""),ee=XS.parse(H??""),oe=$==="+"?W.add(ee):W.subtract(ee);if(oe.isNaN())return t_;e=e.replace(XG,oe.toString())}return e}var JG=/\(([^()]*)\)/;function d0e(t){for(var e=t;e.includes("(");){var a=JG.exec(e),r=Cx(a,2),i=r[1];e=e.replace(JG,GJ(i))}return e}function h0e(t){var e=t.replace(/\s+/g,"");return e=d0e(e),e=GJ(e),e}function f0e(t){try{return h0e(t)}catch{return t_}}function Xz(t){var e=f0e(t.slice(5,-1));return e===t_?"":e}var p0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],m0e=["dx","dy","angle","className","breakAll"];function jM(){return jM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},jM.apply(this,arguments)}function QG(t,e){if(t==null)return{};var a=g0e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function g0e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function e7(t,e){return _0e(t)||v0e(t,e)||A0e(t,e)||y0e()}function y0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A0e(t,e){if(t){if(typeof t=="string")return t7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t7(t,e)}}function t7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function v0e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;v=!1}else for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function _0e(t){if(Array.isArray(t))return t}var ZJ=/[ \f\n\r\t\v\u2028\u2029]+/,qJ=function(e){var a=e.children,r=e.breakAll,i=e.style;try{var l=[];qn(a)||(r?l=a.toString().split(""):l=a.toString().split(ZJ));var c=l.map(function(v){return{word:v,width:TR(v,i).width}}),n=r?0:TR("",i).width;return{wordsWithComputedWidth:c,spaceWidth:n}}catch{return null}},w0e=function(e,a,r,i,l){var c=e.maxLines,n=e.children,v=e.style,R=e.breakAll,x=Tr(c),N=n,I=function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ee.reduce(function(De,qe){var Oe=qe.word,He=qe.width,Ue=De[De.length-1];if(Ue&&(i==null||l||Ue.width+He+r<Number(i)))Ue.words.push(Oe),Ue.width+=He+r;else{var ct={words:[Oe],width:He};De.push(ct)}return De},[])},k=I(a),Z=function(Ee){return Ee.reduce(function(De,qe){return De.width>qe.width?De:qe})};if(!x)return k;for(var $="",H=function(Ee){var De=N.slice(0,Ee),qe=qJ({breakAll:R,style:v,children:De+$}).wordsWithComputedWidth,Oe=I(qe),He=Oe.length>c||Z(Oe).width>Number(i);return[He,Oe]},W=0,ee=N.length-1,oe=0,pe;W<=ee&&oe<=N.length-1;){var le=Math.floor((W+ee)/2),ge=le-1,ue=H(ge),Re=e7(ue,2),we=Re[0],Ne=Re[1],ne=H(le),_e=e7(ne,1),ke=_e[0];if(!we&&!ke&&(W=le+1),we&&ke&&(ee=le-1),!we&&ke){pe=Ne;break}oe++}return pe||k},a7=function(e){var a=qn(e)?[]:e.toString().split(ZJ);return[{words:a}]},R0e=function(e){var a=e.width,r=e.scaleToFit,i=e.children,l=e.style,c=e.breakAll,n=e.maxLines;if((a||r)&&!Zg.isSsr){var v,R,x=qJ({breakAll:c,children:i,style:l});if(x){var N=x.wordsWithComputedWidth,I=x.spaceWidth;v=N,R=I}else return a7(i);return w0e({breakAll:c,children:i,maxLines:n,style:l},v,R,a,r)}return a7(i)},r7="#808080",Lv=function(e){var a=e.x,r=a===void 0?0:a,i=e.y,l=i===void 0?0:i,c=e.lineHeight,n=c===void 0?"1em":c,v=e.capHeight,R=v===void 0?"0.71em":v,x=e.scaleToFit,N=x===void 0?!1:x,I=e.textAnchor,k=I===void 0?"start":I,Z=e.verticalAnchor,$=Z===void 0?"end":Z,H=e.fill,W=H===void 0?r7:H,ee=QG(e,p0e),oe=ie.useMemo(function(){return R0e({breakAll:ee.breakAll,children:ee.children,maxLines:ee.maxLines,scaleToFit:N,style:ee.style,width:ee.width})},[ee.breakAll,ee.children,ee.maxLines,N,ee.style,ee.width]),pe=ee.dx,le=ee.dy,ge=ee.angle,ue=ee.className,Re=ee.breakAll,we=QG(ee,m0e);if(!qu(r)||!qu(l))return null;var Ne=r+(Tr(pe)?pe:0),ne=l+(Tr(le)?le:0),_e;switch($){case"start":_e=Xz("calc(".concat(R,")"));break;case"middle":_e=Xz("calc(".concat((oe.length-1)/2," * -").concat(n," + (").concat(R," / 2))"));break;default:_e=Xz("calc(".concat(oe.length-1," * -").concat(n,")"));break}var ke=[];if(N){var Pe=oe[0].width,Ee=ee.width;ke.push("scale(".concat((Tr(Ee)?Ee/Pe:1)/Pe,")"))}return ge&&ke.push("rotate(".concat(ge,", ").concat(Ne,", ").concat(ne,")")),ke.length&&(we.transform=ke.join(" ")),Vt.createElement("text",jM({},yn(we,!0),{x:Ne,y:ne,className:mi("recharts-text",ue),textAnchor:k,fill:W.includes("url")?r7:W}),oe.map(function(De,qe){var Oe=De.words.join(Re?"":" ");return Vt.createElement("tspan",{x:Ne,dy:qe===0?_e:n,key:"".concat(Oe,"-").concat(qe)},Oe)}))};function Wy(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function T0e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function d4(t){let e,a,r;t.length!==2?(e=Wy,a=(n,v)=>Wy(t(n),v),r=(n,v)=>t(n)-v):(e=t===Wy||t===T0e?t:C0e,a=t,r=t);function i(n,v,R=0,x=n.length){if(R<x){if(e(v,v)!==0)return x;do{const N=R+x>>>1;a(n[N],v)<0?R=N+1:x=N}while(R<x)}return R}function l(n,v,R=0,x=n.length){if(R<x){if(e(v,v)!==0)return x;do{const N=R+x>>>1;a(n[N],v)<=0?R=N+1:x=N}while(R<x)}return R}function c(n,v,R=0,x=n.length){const N=i(n,v,R,x-1);return N>R&&r(n[N-1],v)>-r(n[N],v)?N-1:N}return{left:i,center:c,right:l}}function C0e(){return 0}function HJ(t){return t===null?NaN:+t}function*S0e(t,e){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const b0e=d4(Wy),yC=b0e.right;d4(HJ).center;class n7 extends Map{constructor(e,a=E0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(i7(this,e))}has(e){return super.has(i7(this,e))}set(e,a){return super.set(x0e(this,e),a)}delete(e){return super.delete(P0e(this,e))}}function i7({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):a}function x0e({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):(t.set(r,a),a)}function P0e({_intern:t,_key:e},a){const r=e(a);return t.has(r)&&(a=t.get(r),t.delete(r)),a}function E0e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function N0e(t=Wy){if(t===Wy)return $J;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function $J(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const O0e=Math.sqrt(50),V0e=Math.sqrt(10),z0e=Math.sqrt(2);function Sx(t,e,a){const r=(e-t)/Math.max(0,a),i=Math.floor(Math.log10(r)),l=r/Math.pow(10,i),c=l>=O0e?10:l>=V0e?5:l>=z0e?2:1;let n,v,R;return i<0?(R=Math.pow(10,-i)/c,n=Math.round(t*R),v=Math.round(e*R),n/R<t&&++n,v/R>e&&--v,R=-R):(R=Math.pow(10,i)*c,n=Math.round(t/R),v=Math.round(e/R),n*R<t&&++n,v*R>e&&--v),v<n&&.5<=a&&a<2?Sx(t,e,a*2):[n,v,R]}function GM(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const r=e<t,[i,l,c]=r?Sx(e,t,a):Sx(t,e,a);if(!(l>=i))return[];const n=l-i+1,v=new Array(n);if(r)if(c<0)for(let R=0;R<n;++R)v[R]=(l-R)/-c;else for(let R=0;R<n;++R)v[R]=(l-R)*c;else if(c<0)for(let R=0;R<n;++R)v[R]=(i+R)/-c;else for(let R=0;R<n;++R)v[R]=(i+R)*c;return v}function ZM(t,e,a){return e=+e,t=+t,a=+a,Sx(t,e,a)[2]}function qM(t,e,a){e=+e,t=+t,a=+a;const r=e<t,i=r?ZM(e,t,a):ZM(t,e,a);return(r?-1:1)*(i<0?1/-i:i)}function s7(t,e){let a;for(const r of t)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function o7(t,e){let a;for(const r of t)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function KJ(t,e,a=0,r=1/0,i){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(i=i===void 0?$J:N0e(i);r>a;){if(r-a>600){const v=r-a+1,R=e-a+1,x=Math.log(v),N=.5*Math.exp(2*x/3),I=.5*Math.sqrt(x*N*(v-N)/v)*(R-v/2<0?-1:1),k=Math.max(a,Math.floor(e-R*N/v+I)),Z=Math.min(r,Math.floor(e+(v-R)*N/v+I));KJ(t,e,k,Z,i)}const l=t[e];let c=a,n=r;for(Gw(t,a,e),i(t[r],l)>0&&Gw(t,a,r);c<n;){for(Gw(t,c,n),++c,--n;i(t[c],l)<0;)++c;for(;i(t[n],l)>0;)--n}i(t[a],l)===0?Gw(t,a,n):(++n,Gw(t,n,r)),n<=e&&(a=n+1),e<=n&&(r=n-1)}return t}function Gw(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function D0e(t,e,a){if(t=Float64Array.from(S0e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return o7(t);if(e>=1)return s7(t);var r,i=(r-1)*e,l=Math.floor(i),c=s7(KJ(t,l).subarray(0,l+1)),n=o7(t.subarray(l+1));return c+(n-c)*(i-l)}}function M0e(t,e,a=HJ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+a(t[0],0,t);if(e>=1)return+a(t[r-1],r-1,t);var r,i=(r-1)*e,l=Math.floor(i),c=+a(t[l],l,t),n=+a(t[l+1],l+1,t);return c+(n-c)*(i-l)}}function I0e(t,e,a){t=+t,e=+e,a=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+a;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/a))|0,l=new Array(i);++r<i;)l[r]=t+r*a;return l}function op(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function qg(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const HM=Symbol("implicit");function h4(){var t=new n7,e=[],a=[],r=HM;function i(l){let c=t.get(l);if(c===void 0){if(r!==HM)return r;t.set(l,c=e.push(l)-1)}return a[c%a.length]}return i.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new n7;for(const c of l)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(l){return arguments.length?(a=Array.from(l),i):a.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return h4(e,a).unknown(r)},op.apply(i,arguments),i}function lT(){var t=h4().unknown(void 0),e=t.domain,a=t.range,r=0,i=1,l,c,n=!1,v=0,R=0,x=.5;delete t.unknown;function N(){var I=e().length,k=i<r,Z=k?i:r,$=k?r:i;l=($-Z)/Math.max(1,I-v+R*2),n&&(l=Math.floor(l)),Z+=($-Z-l*(I-v))*x,c=l*(1-v),n&&(Z=Math.round(Z),c=Math.round(c));var H=I0e(I).map(function(W){return Z+l*W});return a(k?H.reverse():H)}return t.domain=function(I){return arguments.length?(e(I),N()):e()},t.range=function(I){return arguments.length?([r,i]=I,r=+r,i=+i,N()):[r,i]},t.rangeRound=function(I){return[r,i]=I,r=+r,i=+i,n=!0,N()},t.bandwidth=function(){return c},t.step=function(){return l},t.round=function(I){return arguments.length?(n=!!I,N()):n},t.padding=function(I){return arguments.length?(v=Math.min(1,R=+I),N()):v},t.paddingInner=function(I){return arguments.length?(v=Math.min(1,I),N()):v},t.paddingOuter=function(I){return arguments.length?(R=+I,N()):R},t.align=function(I){return arguments.length?(x=Math.max(0,Math.min(1,I)),N()):x},t.copy=function(){return lT(e(),[r,i]).round(n).paddingInner(v).paddingOuter(R).align(x)},op.apply(N(),arguments)}function WJ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return WJ(e())},t}function CR(){return WJ(lT.apply(null,arguments).paddingInner(1))}function f4(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function YJ(t,e){var a=Object.create(t.prototype);for(var r in e)a[r]=e[r];return a}function AC(){}var uT=.7,bx=1/uT,g_="\\s*([+-]?\\d+)\\s*",cT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",L0e=/^#([0-9a-f]{3,8})$/,F0e=new RegExp(`^rgb\\(${g_},${g_},${g_}\\)$`),k0e=new RegExp(`^rgb\\(${Gm},${Gm},${Gm}\\)$`),U0e=new RegExp(`^rgba\\(${g_},${g_},${g_},${cT}\\)$`),B0e=new RegExp(`^rgba\\(${Gm},${Gm},${Gm},${cT}\\)$`),j0e=new RegExp(`^hsl\\(${cT},${Gm},${Gm}\\)$`),G0e=new RegExp(`^hsla\\(${cT},${Gm},${Gm},${cT}\\)$`),l7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f4(AC,dT,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:u7,formatHex:u7,formatHex8:Z0e,formatHsl:q0e,formatRgb:c7,toString:c7});function u7(){return this.rgb().formatHex()}function Z0e(){return this.rgb().formatHex8()}function q0e(){return XJ(this).formatHsl()}function c7(){return this.rgb().formatRgb()}function dT(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=L0e.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?d7(e):a===3?new Uh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?JS(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?JS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=F0e.exec(t))?new Uh(e[1],e[2],e[3],1):(e=k0e.exec(t))?new Uh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=U0e.exec(t))?JS(e[1],e[2],e[3],e[4]):(e=B0e.exec(t))?JS(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=j0e.exec(t))?p7(e[1],e[2]/100,e[3]/100,1):(e=G0e.exec(t))?p7(e[1],e[2]/100,e[3]/100,e[4]):l7.hasOwnProperty(t)?d7(l7[t]):t==="transparent"?new Uh(NaN,NaN,NaN,0):null}function d7(t){return new Uh(t>>16&255,t>>8&255,t&255,1)}function JS(t,e,a,r){return r<=0&&(t=e=a=NaN),new Uh(t,e,a,r)}function H0e(t){return t instanceof AC||(t=dT(t)),t?(t=t.rgb(),new Uh(t.r,t.g,t.b,t.opacity)):new Uh}function $M(t,e,a,r){return arguments.length===1?H0e(t):new Uh(t,e,a,r??1)}function Uh(t,e,a,r){this.r=+t,this.g=+e,this.b=+a,this.opacity=+r}f4(Uh,$M,YJ(AC,{brighter(t){return t=t==null?bx:Math.pow(bx,t),new Uh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?uT:Math.pow(uT,t),new Uh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Uh(Cv(this.r),Cv(this.g),Cv(this.b),xx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h7,formatHex:h7,formatHex8:$0e,formatRgb:f7,toString:f7}));function h7(){return`#${gv(this.r)}${gv(this.g)}${gv(this.b)}`}function $0e(){return`#${gv(this.r)}${gv(this.g)}${gv(this.b)}${gv((isNaN(this.opacity)?1:this.opacity)*255)}`}function f7(){const t=xx(this.opacity);return`${t===1?"rgb(":"rgba("}${Cv(this.r)}, ${Cv(this.g)}, ${Cv(this.b)}${t===1?")":`, ${t})`}`}function xx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Cv(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gv(t){return t=Cv(t),(t<16?"0":"")+t.toString(16)}function p7(t,e,a,r){return r<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new qp(t,e,a,r)}function XJ(t){if(t instanceof qp)return new qp(t.h,t.s,t.l,t.opacity);if(t instanceof AC||(t=dT(t)),!t)return new qp;if(t instanceof qp)return t;t=t.rgb();var e=t.r/255,a=t.g/255,r=t.b/255,i=Math.min(e,a,r),l=Math.max(e,a,r),c=NaN,n=l-i,v=(l+i)/2;return n?(e===l?c=(a-r)/n+(a<r)*6:a===l?c=(r-e)/n+2:c=(e-a)/n+4,n/=v<.5?l+i:2-l-i,c*=60):n=v>0&&v<1?0:c,new qp(c,n,v,t.opacity)}function K0e(t,e,a,r){return arguments.length===1?XJ(t):new qp(t,e,a,r??1)}function qp(t,e,a,r){this.h=+t,this.s=+e,this.l=+a,this.opacity=+r}f4(qp,K0e,YJ(AC,{brighter(t){return t=t==null?bx:Math.pow(bx,t),new qp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?uT:Math.pow(uT,t),new qp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*e,i=2*a-r;return new Uh(Jz(t>=240?t-240:t+120,i,r),Jz(t,i,r),Jz(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new qp(m7(this.h),QS(this.s),QS(this.l),xx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xx(this.opacity);return`${t===1?"hsl(":"hsla("}${m7(this.h)}, ${QS(this.s)*100}%, ${QS(this.l)*100}%${t===1?")":`, ${t})`}`}}));function m7(t){return t=(t||0)%360,t<0?t+360:t}function QS(t){return Math.max(0,Math.min(1,t||0))}function Jz(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const p4=t=>()=>t;function W0e(t,e){return function(a){return t+a*e}}function Y0e(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(r){return Math.pow(t+r*e,a)}}function X0e(t){return(t=+t)==1?JJ:function(e,a){return a-e?Y0e(e,a,t):p4(isNaN(e)?a:e)}}function JJ(t,e){var a=e-t;return a?W0e(t,a):p4(isNaN(t)?e:t)}const g7=function t(e){var a=X0e(e);function r(i,l){var c=a((i=$M(i)).r,(l=$M(l)).r),n=a(i.g,l.g),v=a(i.b,l.b),R=JJ(i.opacity,l.opacity);return function(x){return i.r=c(x),i.g=n(x),i.b=v(x),i.opacity=R(x),i+""}}return r.gamma=t,r}(1);function J0e(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(l){for(i=0;i<a;++i)r[i]=t[i]*(1-l)+e[i]*l;return r}}function Q0e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function e_e(t,e){var a=e?e.length:0,r=t?Math.min(a,t.length):0,i=new Array(r),l=new Array(a),c;for(c=0;c<r;++c)i[c]=T1(t[c],e[c]);for(;c<a;++c)l[c]=e[c];return function(n){for(c=0;c<r;++c)l[c]=i[c](n);return l}}function t_e(t,e){var a=new Date;return t=+t,e=+e,function(r){return a.setTime(t*(1-r)+e*r),a}}function Px(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function a_e(t,e){var a={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?a[i]=T1(t[i],e[i]):r[i]=e[i];return function(l){for(i in a)r[i]=a[i](l);return r}}var KM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qz=new RegExp(KM.source,"g");function r_e(t){return function(){return t}}function n_e(t){return function(e){return t(e)+""}}function i_e(t,e){var a=KM.lastIndex=Qz.lastIndex=0,r,i,l,c=-1,n=[],v=[];for(t=t+"",e=e+"";(r=KM.exec(t))&&(i=Qz.exec(e));)(l=i.index)>a&&(l=e.slice(a,l),n[c]?n[c]+=l:n[++c]=l),(r=r[0])===(i=i[0])?n[c]?n[c]+=i:n[++c]=i:(n[++c]=null,v.push({i:c,x:Px(r,i)})),a=Qz.lastIndex;return a<e.length&&(l=e.slice(a),n[c]?n[c]+=l:n[++c]=l),n.length<2?v[0]?n_e(v[0].x):r_e(e):(e=v.length,function(R){for(var x=0,N;x<e;++x)n[(N=v[x]).i]=N.x(R);return n.join("")})}function T1(t,e){var a=typeof e,r;return e==null||a==="boolean"?p4(e):(a==="number"?Px:a==="string"?(r=dT(e))?(e=r,g7):i_e:e instanceof dT?g7:e instanceof Date?t_e:Q0e(e)?J0e:Array.isArray(e)?e_e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?a_e:Px)(t,e)}function m4(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function s_e(t,e){e===void 0&&(e=t,t=T1);for(var a=0,r=e.length-1,i=e[0],l=new Array(r<0?0:r);a<r;)l[a]=t(i,i=e[++a]);return function(c){var n=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return l[n](c-n)}}function o_e(t){return function(){return t}}function Ex(t){return+t}var y7=[0,1];function ch(t){return t}function WM(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:o_e(isNaN(e)?NaN:.5)}function l_e(t,e){var a;return t>e&&(a=t,t=e,e=a),function(r){return Math.max(t,Math.min(e,r))}}function u_e(t,e,a){var r=t[0],i=t[1],l=e[0],c=e[1];return i<r?(r=WM(i,r),l=a(c,l)):(r=WM(r,i),l=a(l,c)),function(n){return l(r(n))}}function c_e(t,e,a){var r=Math.min(t.length,e.length)-1,i=new Array(r),l=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=WM(t[c],t[c+1]),l[c]=a(e[c],e[c+1]);return function(n){var v=yC(t,n,1,r)-1;return l[v](i[v](n))}}function vC(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function PP(){var t=y7,e=y7,a=T1,r,i,l,c=ch,n,v,R;function x(){var I=Math.min(t.length,e.length);return c!==ch&&(c=l_e(t[0],t[I-1])),n=I>2?c_e:u_e,v=R=null,N}function N(I){return I==null||isNaN(I=+I)?l:(v||(v=n(t.map(r),e,a)))(r(c(I)))}return N.invert=function(I){return c(i((R||(R=n(e,t.map(r),Px)))(I)))},N.domain=function(I){return arguments.length?(t=Array.from(I,Ex),x()):t.slice()},N.range=function(I){return arguments.length?(e=Array.from(I),x()):e.slice()},N.rangeRound=function(I){return e=Array.from(I),a=m4,x()},N.clamp=function(I){return arguments.length?(c=I?!0:ch,x()):c!==ch},N.interpolate=function(I){return arguments.length?(a=I,x()):a},N.unknown=function(I){return arguments.length?(l=I,N):l},function(I,k){return r=I,i=k,x()}}function g4(){return PP()(ch,ch)}function d_e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Nx(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,r=t.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+t.slice(a+1)]}function L_(t){return t=Nx(Math.abs(t)),t?t[1]:NaN}function h_e(t,e){return function(a,r){for(var i=a.length,l=[],c=0,n=t[0],v=0;i>0&&n>0&&(v+n+1>r&&(n=Math.max(1,r-v)),l.push(a.substring(i-=n,i+n)),!((v+=n+1)>r));)n=t[c=(c+1)%t.length];return l.reverse().join(e)}}function f_e(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var p_e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hT(t){if(!(e=p_e.exec(t)))throw new Error("invalid format: "+t);var e;return new y4({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hT.prototype=y4.prototype;function y4(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}y4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function m_e(t){e:for(var e=t.length,a=1,r=-1,i;a<e;++a)switch(t[a]){case".":r=i=a;break;case"0":r===0&&(r=a),i=a;break;default:if(!+t[a])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var QJ;function g_e(t,e){var a=Nx(t,e);if(!a)return t+"";var r=a[0],i=a[1],l=i-(QJ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return l===c?r:l>c?r+new Array(l-c+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Nx(t,Math.max(0,e+l-1))[0]}function A7(t,e){var a=Nx(t,e);if(!a)return t+"";var r=a[0],i=a[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const v7={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:d_e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>A7(t*100,e),r:A7,s:g_e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _7(t){return t}var w7=Array.prototype.map,R7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function y_e(t){var e=t.grouping===void 0||t.thousands===void 0?_7:h_e(w7.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?_7:f_e(w7.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",n=t.minus===void 0?"":t.minus+"",v=t.nan===void 0?"NaN":t.nan+"";function R(N){N=hT(N);var I=N.fill,k=N.align,Z=N.sign,$=N.symbol,H=N.zero,W=N.width,ee=N.comma,oe=N.precision,pe=N.trim,le=N.type;le==="n"?(ee=!0,le="g"):v7[le]||(oe===void 0&&(oe=12),pe=!0,le="g"),(H||I==="0"&&k==="=")&&(H=!0,I="0",k="=");var ge=$==="$"?a:$==="#"&&/[boxX]/.test(le)?"0"+le.toLowerCase():"",ue=$==="$"?r:/[%p]/.test(le)?c:"",Re=v7[le],we=/[defgprs%]/.test(le);oe=oe===void 0?6:/[gprs]/.test(le)?Math.max(1,Math.min(21,oe)):Math.max(0,Math.min(20,oe));function Ne(ne){var _e=ge,ke=ue,Pe,Ee,De;if(le==="c")ke=Re(ne)+ke,ne="";else{ne=+ne;var qe=ne<0||1/ne<0;if(ne=isNaN(ne)?v:Re(Math.abs(ne),oe),pe&&(ne=m_e(ne)),qe&&+ne==0&&Z!=="+"&&(qe=!1),_e=(qe?Z==="("?Z:n:Z==="-"||Z==="("?"":Z)+_e,ke=(le==="s"?R7[8+QJ/3]:"")+ke+(qe&&Z==="("?")":""),we){for(Pe=-1,Ee=ne.length;++Pe<Ee;)if(De=ne.charCodeAt(Pe),48>De||De>57){ke=(De===46?i+ne.slice(Pe+1):ne.slice(Pe))+ke,ne=ne.slice(0,Pe);break}}}ee&&!H&&(ne=e(ne,1/0));var Oe=_e.length+ne.length+ke.length,He=Oe<W?new Array(W-Oe+1).join(I):"";switch(ee&&H&&(ne=e(He+ne,He.length?W-ke.length:1/0),He=""),k){case"<":ne=_e+ne+ke+He;break;case"=":ne=_e+He+ne+ke;break;case"^":ne=He.slice(0,Oe=He.length>>1)+_e+ne+ke+He.slice(Oe);break;default:ne=He+_e+ne+ke;break}return l(ne)}return Ne.toString=function(){return N+""},Ne}function x(N,I){var k=R((N=hT(N),N.type="f",N)),Z=Math.max(-8,Math.min(8,Math.floor(L_(I)/3)))*3,$=Math.pow(10,-Z),H=R7[8+Z/3];return function(W){return k($*W)+H}}return{format:R,formatPrefix:x}}var eb,A4,eQ;A_e({thousands:",",grouping:[3],currency:["$",""]});function A_e(t){return eb=y_e(t),A4=eb.format,eQ=eb.formatPrefix,eb}function v_e(t){return Math.max(0,-L_(Math.abs(t)))}function __e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(L_(e)/3)))*3-L_(Math.abs(t)))}function w_e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,L_(e)-L_(t))+1}function tQ(t,e,a,r){var i=qM(t,e,a),l;switch(r=hT(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(l=__e(i,c))&&(r.precision=l),eQ(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=w_e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=v_e(i))&&(r.precision=l-(r.type==="%")*2);break}}return A4(r)}function fA(t){var e=t.domain;return t.ticks=function(a){var r=e();return GM(r[0],r[r.length-1],a??10)},t.tickFormat=function(a,r){var i=e();return tQ(i[0],i[i.length-1],a??10,r)},t.nice=function(a){a==null&&(a=10);var r=e(),i=0,l=r.length-1,c=r[i],n=r[l],v,R,x=10;for(n<c&&(R=c,c=n,n=R,R=i,i=l,l=R);x-- >0;){if(R=ZM(c,n,a),R===v)return r[i]=c,r[l]=n,e(r);if(R>0)c=Math.floor(c/R)*R,n=Math.ceil(n/R)*R;else if(R<0)c=Math.ceil(c*R)/R,n=Math.floor(n*R)/R;else break;v=R}return t},t}function Ox(){var t=g4();return t.copy=function(){return vC(t,Ox())},op.apply(t,arguments),fA(t)}function aQ(t){var e;function a(r){return r==null||isNaN(r=+r)?e:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(t=Array.from(r,Ex),a):t.slice()},a.unknown=function(r){return arguments.length?(e=r,a):e},a.copy=function(){return aQ(t).unknown(e)},t=arguments.length?Array.from(t,Ex):[0,1],fA(a)}function rQ(t,e){t=t.slice();var a=0,r=t.length-1,i=t[a],l=t[r],c;return l<i&&(c=a,a=r,r=c,c=i,i=l,l=c),t[a]=e.floor(i),t[r]=e.ceil(l),t}function T7(t){return Math.log(t)}function C7(t){return Math.exp(t)}function R_e(t){return-Math.log(-t)}function T_e(t){return-Math.exp(-t)}function C_e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function S_e(t){return t===10?C_e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function b_e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function S7(t){return(e,a)=>-t(-e,a)}function v4(t){const e=t(T7,C7),a=e.domain;let r=10,i,l;function c(){return i=b_e(r),l=S_e(r),a()[0]<0?(i=S7(i),l=S7(l),t(R_e,T_e)):t(T7,C7),e}return e.base=function(n){return arguments.length?(r=+n,c()):r},e.domain=function(n){return arguments.length?(a(n),c()):a()},e.ticks=n=>{const v=a();let R=v[0],x=v[v.length-1];const N=x<R;N&&([R,x]=[x,R]);let I=i(R),k=i(x),Z,$;const H=n==null?10:+n;let W=[];if(!(r%1)&&k-I<H){if(I=Math.floor(I),k=Math.ceil(k),R>0){for(;I<=k;++I)for(Z=1;Z<r;++Z)if($=I<0?Z/l(-I):Z*l(I),!($<R)){if($>x)break;W.push($)}}else for(;I<=k;++I)for(Z=r-1;Z>=1;--Z)if($=I>0?Z/l(-I):Z*l(I),!($<R)){if($>x)break;W.push($)}W.length*2<H&&(W=GM(R,x,H))}else W=GM(I,k,Math.min(k-I,H)).map(l);return N?W.reverse():W},e.tickFormat=(n,v)=>{if(n==null&&(n=10),v==null&&(v=r===10?"s":","),typeof v!="function"&&(!(r%1)&&(v=hT(v)).precision==null&&(v.trim=!0),v=A4(v)),n===1/0)return v;const R=Math.max(1,r*n/e.ticks().length);return x=>{let N=x/l(Math.round(i(x)));return N*r<r-.5&&(N*=r),N<=R?v(x):""}},e.nice=()=>a(rQ(a(),{floor:n=>l(Math.floor(i(n))),ceil:n=>l(Math.ceil(i(n)))})),e}function nQ(){const t=v4(PP()).domain([1,10]);return t.copy=()=>vC(t,nQ()).base(t.base()),op.apply(t,arguments),t}function b7(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function x7(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function _4(t){var e=1,a=t(b7(e),x7(e));return a.constant=function(r){return arguments.length?t(b7(e=+r),x7(e)):e},fA(a)}function iQ(){var t=_4(PP());return t.copy=function(){return vC(t,iQ()).constant(t.constant())},op.apply(t,arguments)}function P7(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function x_e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function P_e(t){return t<0?-t*t:t*t}function w4(t){var e=t(ch,ch),a=1;function r(){return a===1?t(ch,ch):a===.5?t(x_e,P_e):t(P7(a),P7(1/a))}return e.exponent=function(i){return arguments.length?(a=+i,r()):a},fA(e)}function R4(){var t=w4(PP());return t.copy=function(){return vC(t,R4()).exponent(t.exponent())},op.apply(t,arguments),t}function E_e(){return R4.apply(null,arguments).exponent(.5)}function E7(t){return Math.sign(t)*t*t}function N_e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function sQ(){var t=g4(),e=[0,1],a=!1,r;function i(l){var c=N_e(t(l));return isNaN(c)?r:a?Math.round(c):c}return i.invert=function(l){return t.invert(E7(l))},i.domain=function(l){return arguments.length?(t.domain(l),i):t.domain()},i.range=function(l){return arguments.length?(t.range((e=Array.from(l,Ex)).map(E7)),i):e.slice()},i.rangeRound=function(l){return i.range(l).round(!0)},i.round=function(l){return arguments.length?(a=!!l,i):a},i.clamp=function(l){return arguments.length?(t.clamp(l),i):t.clamp()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return sQ(t.domain(),e).round(a).clamp(t.clamp()).unknown(r)},op.apply(i,arguments),fA(i)}function oQ(){var t=[],e=[],a=[],r;function i(){var c=0,n=Math.max(1,e.length);for(a=new Array(n-1);++c<n;)a[c-1]=M0e(t,c/n);return l}function l(c){return c==null||isNaN(c=+c)?r:e[yC(a,c)]}return l.invertExtent=function(c){var n=e.indexOf(c);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},l.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let n of c)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Wy),i()},l.range=function(c){return arguments.length?(e=Array.from(c),i()):e.slice()},l.unknown=function(c){return arguments.length?(r=c,l):r},l.quantiles=function(){return a.slice()},l.copy=function(){return oQ().domain(t).range(e).unknown(r)},op.apply(l,arguments)}function lQ(){var t=0,e=1,a=1,r=[.5],i=[0,1],l;function c(v){return v!=null&&v<=v?i[yC(r,v,0,a)]:l}function n(){var v=-1;for(r=new Array(a);++v<a;)r[v]=((v+1)*e-(v-a)*t)/(a+1);return c}return c.domain=function(v){return arguments.length?([t,e]=v,t=+t,e=+e,n()):[t,e]},c.range=function(v){return arguments.length?(a=(i=Array.from(v)).length-1,n()):i.slice()},c.invertExtent=function(v){var R=i.indexOf(v);return R<0?[NaN,NaN]:R<1?[t,r[0]]:R>=a?[r[a-1],e]:[r[R-1],r[R]]},c.unknown=function(v){return arguments.length&&(l=v),c},c.thresholds=function(){return r.slice()},c.copy=function(){return lQ().domain([t,e]).range(i).unknown(l)},op.apply(fA(c),arguments)}function uQ(){var t=[.5],e=[0,1],a,r=1;function i(l){return l!=null&&l<=l?e[yC(t,l,0,r)]:a}return i.domain=function(l){return arguments.length?(t=Array.from(l),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(l){return arguments.length?(e=Array.from(l),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(l){var c=e.indexOf(l);return[t[c-1],t[c]]},i.unknown=function(l){return arguments.length?(a=l,i):a},i.copy=function(){return uQ().domain(t).range(e).unknown(a)},op.apply(i,arguments)}const eD=new Date,tD=new Date;function $u(t,e,a,r){function i(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return i.floor=l=>(t(l=new Date(+l)),l),i.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),i.round=l=>{const c=i(l),n=i.ceil(l);return l-c<n-l?c:n},i.offset=(l,c)=>(e(l=new Date(+l),c==null?1:Math.floor(c)),l),i.range=(l,c,n)=>{const v=[];if(l=i.ceil(l),n=n==null?1:Math.floor(n),!(l<c)||!(n>0))return v;let R;do v.push(R=new Date(+l)),e(l,n),t(l);while(R<l&&l<c);return v},i.filter=l=>$u(c=>{if(c>=c)for(;t(c),!l(c);)c.setTime(c-1)},(c,n)=>{if(c>=c)if(n<0)for(;++n<=0;)for(;e(c,-1),!l(c););else for(;--n>=0;)for(;e(c,1),!l(c););}),a&&(i.count=(l,c)=>(eD.setTime(+l),tD.setTime(+c),t(eD),t(tD),Math.floor(a(eD,tD))),i.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?i.filter(r?c=>r(c)%l===0:c=>i.count(0,c)%l===0):i)),i}const Vx=$u(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Vx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?$u(e=>{e.setTime(Math.floor(e/t)*t)},(e,a)=>{e.setTime(+e+a*t)},(e,a)=>(a-e)/t):Vx);Vx.range;const Sg=1e3,rp=Sg*60,bg=rp*60,Fg=bg*24,T4=Fg*7,N7=Fg*30,aD=Fg*365,yv=$u(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sg)},(t,e)=>(e-t)/Sg,t=>t.getUTCSeconds());yv.range;const C4=$u(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sg)},(t,e)=>{t.setTime(+t+e*rp)},(t,e)=>(e-t)/rp,t=>t.getMinutes());C4.range;const S4=$u(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*rp)},(t,e)=>(e-t)/rp,t=>t.getUTCMinutes());S4.range;const b4=$u(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sg-t.getMinutes()*rp)},(t,e)=>{t.setTime(+t+e*bg)},(t,e)=>(e-t)/bg,t=>t.getHours());b4.range;const x4=$u(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*bg)},(t,e)=>(e-t)/bg,t=>t.getUTCHours());x4.range;const _C=$u(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*rp)/Fg,t=>t.getDate()-1);_C.range;const EP=$u(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fg,t=>t.getUTCDate()-1);EP.range;const cQ=$u(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fg,t=>Math.floor(t/Fg));cQ.range;function Kv(t){return $u(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,a)=>{e.setDate(e.getDate()+a*7)},(e,a)=>(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*rp)/T4)}const NP=Kv(0),zx=Kv(1),O_e=Kv(2),V_e=Kv(3),F_=Kv(4),z_e=Kv(5),D_e=Kv(6);NP.range;zx.range;O_e.range;V_e.range;F_.range;z_e.range;D_e.range;function Wv(t){return $u(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCDate(e.getUTCDate()+a*7)},(e,a)=>(a-e)/T4)}const OP=Wv(0),Dx=Wv(1),M_e=Wv(2),I_e=Wv(3),k_=Wv(4),L_e=Wv(5),F_e=Wv(6);OP.range;Dx.range;M_e.range;I_e.range;k_.range;L_e.range;F_e.range;const P4=$u(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());P4.range;const E4=$u(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());E4.range;const kg=$u(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());kg.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$u(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,a)=>{e.setFullYear(e.getFullYear()+a*t)});kg.range;const Ug=$u(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ug.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$u(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCFullYear(e.getUTCFullYear()+a*t)});Ug.range;function dQ(t,e,a,r,i,l){const c=[[yv,1,Sg],[yv,5,5*Sg],[yv,15,15*Sg],[yv,30,30*Sg],[l,1,rp],[l,5,5*rp],[l,15,15*rp],[l,30,30*rp],[i,1,bg],[i,3,3*bg],[i,6,6*bg],[i,12,12*bg],[r,1,Fg],[r,2,2*Fg],[a,1,T4],[e,1,N7],[e,3,3*N7],[t,1,aD]];function n(R,x,N){const I=x<R;I&&([R,x]=[x,R]);const k=N&&typeof N.range=="function"?N:v(R,x,N),Z=k?k.range(R,+x+1):[];return I?Z.reverse():Z}function v(R,x,N){const I=Math.abs(x-R)/N,k=d4(([,,H])=>H).right(c,I);if(k===c.length)return t.every(qM(R/aD,x/aD,N));if(k===0)return Vx.every(Math.max(qM(R,x,N),1));const[Z,$]=c[I/c[k-1][2]<c[k][2]/I?k-1:k];return Z.every($)}return[n,v]}const[k_e,U_e]=dQ(Ug,E4,OP,cQ,x4,S4),[B_e,j_e]=dQ(kg,P4,NP,_C,b4,C4);function rD(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nD(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Zw(t,e,a){return{y:t,m:e,d:a,H:0,M:0,S:0,L:0}}function G_e(t){var e=t.dateTime,a=t.date,r=t.time,i=t.periods,l=t.days,c=t.shortDays,n=t.months,v=t.shortMonths,R=qw(i),x=Hw(i),N=qw(l),I=Hw(l),k=qw(c),Z=Hw(c),$=qw(n),H=Hw(n),W=qw(v),ee=Hw(v),oe={a:qe,A:Oe,b:He,B:Ue,c:null,d:I7,e:I7,f:h1e,g:R1e,G:C1e,H:u1e,I:c1e,j:d1e,L:hQ,m:f1e,M:p1e,p:ct,q:Se,Q:k7,s:U7,S:m1e,u:g1e,U:y1e,V:A1e,w:v1e,W:_1e,x:null,X:null,y:w1e,Y:T1e,Z:S1e,"%":F7},pe={a:Ie,A:je,b:Ze,B:Be,c:null,d:L7,e:L7,f:E1e,g:k1e,G:B1e,H:b1e,I:x1e,j:P1e,L:pQ,m:N1e,M:O1e,p:Je,q:dt,Q:k7,s:U7,S:V1e,u:z1e,U:D1e,V:M1e,w:I1e,W:L1e,x:null,X:null,y:F1e,Y:U1e,Z:j1e,"%":F7},le={a:Ne,A:ne,b:_e,B:ke,c:Pe,d:D7,e:D7,f:i1e,g:z7,G:V7,H:M7,I:M7,j:t1e,L:n1e,m:e1e,M:a1e,p:we,q:Q_e,Q:o1e,s:l1e,S:r1e,u:K_e,U:W_e,V:Y_e,w:$_e,W:X_e,x:Ee,X:De,y:z7,Y:V7,Z:J_e,"%":s1e};oe.x=ge(a,oe),oe.X=ge(r,oe),oe.c=ge(e,oe),pe.x=ge(a,pe),pe.X=ge(r,pe),pe.c=ge(e,pe);function ge(ut,Ae){return function(Dt){var Lt=[],fa=-1,Nt=0,Ht=ut.length,wt,fr,Ca;for(Dt instanceof Date||(Dt=new Date(+Dt));++fa<Ht;)ut.charCodeAt(fa)===37&&(Lt.push(ut.slice(Nt,fa)),(fr=O7[wt=ut.charAt(++fa)])!=null?wt=ut.charAt(++fa):fr=wt==="e"?" ":"0",(Ca=Ae[wt])&&(wt=Ca(Dt,fr)),Lt.push(wt),Nt=fa+1);return Lt.push(ut.slice(Nt,fa)),Lt.join("")}}function ue(ut,Ae){return function(Dt){var Lt=Zw(1900,void 0,1),fa=Re(Lt,ut,Dt+="",0),Nt,Ht;if(fa!=Dt.length)return null;if("Q"in Lt)return new Date(Lt.Q);if("s"in Lt)return new Date(Lt.s*1e3+("L"in Lt?Lt.L:0));if(Ae&&!("Z"in Lt)&&(Lt.Z=0),"p"in Lt&&(Lt.H=Lt.H%12+Lt.p*12),Lt.m===void 0&&(Lt.m="q"in Lt?Lt.q:0),"V"in Lt){if(Lt.V<1||Lt.V>53)return null;"w"in Lt||(Lt.w=1),"Z"in Lt?(Nt=nD(Zw(Lt.y,0,1)),Ht=Nt.getUTCDay(),Nt=Ht>4||Ht===0?Dx.ceil(Nt):Dx(Nt),Nt=EP.offset(Nt,(Lt.V-1)*7),Lt.y=Nt.getUTCFullYear(),Lt.m=Nt.getUTCMonth(),Lt.d=Nt.getUTCDate()+(Lt.w+6)%7):(Nt=rD(Zw(Lt.y,0,1)),Ht=Nt.getDay(),Nt=Ht>4||Ht===0?zx.ceil(Nt):zx(Nt),Nt=_C.offset(Nt,(Lt.V-1)*7),Lt.y=Nt.getFullYear(),Lt.m=Nt.getMonth(),Lt.d=Nt.getDate()+(Lt.w+6)%7)}else("W"in Lt||"U"in Lt)&&("w"in Lt||(Lt.w="u"in Lt?Lt.u%7:"W"in Lt?1:0),Ht="Z"in Lt?nD(Zw(Lt.y,0,1)).getUTCDay():rD(Zw(Lt.y,0,1)).getDay(),Lt.m=0,Lt.d="W"in Lt?(Lt.w+6)%7+Lt.W*7-(Ht+5)%7:Lt.w+Lt.U*7-(Ht+6)%7);return"Z"in Lt?(Lt.H+=Lt.Z/100|0,Lt.M+=Lt.Z%100,nD(Lt)):rD(Lt)}}function Re(ut,Ae,Dt,Lt){for(var fa=0,Nt=Ae.length,Ht=Dt.length,wt,fr;fa<Nt;){if(Lt>=Ht)return-1;if(wt=Ae.charCodeAt(fa++),wt===37){if(wt=Ae.charAt(fa++),fr=le[wt in O7?Ae.charAt(fa++):wt],!fr||(Lt=fr(ut,Dt,Lt))<0)return-1}else if(wt!=Dt.charCodeAt(Lt++))return-1}return Lt}function we(ut,Ae,Dt){var Lt=R.exec(Ae.slice(Dt));return Lt?(ut.p=x.get(Lt[0].toLowerCase()),Dt+Lt[0].length):-1}function Ne(ut,Ae,Dt){var Lt=k.exec(Ae.slice(Dt));return Lt?(ut.w=Z.get(Lt[0].toLowerCase()),Dt+Lt[0].length):-1}function ne(ut,Ae,Dt){var Lt=N.exec(Ae.slice(Dt));return Lt?(ut.w=I.get(Lt[0].toLowerCase()),Dt+Lt[0].length):-1}function _e(ut,Ae,Dt){var Lt=W.exec(Ae.slice(Dt));return Lt?(ut.m=ee.get(Lt[0].toLowerCase()),Dt+Lt[0].length):-1}function ke(ut,Ae,Dt){var Lt=$.exec(Ae.slice(Dt));return Lt?(ut.m=H.get(Lt[0].toLowerCase()),Dt+Lt[0].length):-1}function Pe(ut,Ae,Dt){return Re(ut,e,Ae,Dt)}function Ee(ut,Ae,Dt){return Re(ut,a,Ae,Dt)}function De(ut,Ae,Dt){return Re(ut,r,Ae,Dt)}function qe(ut){return c[ut.getDay()]}function Oe(ut){return l[ut.getDay()]}function He(ut){return v[ut.getMonth()]}function Ue(ut){return n[ut.getMonth()]}function ct(ut){return i[+(ut.getHours()>=12)]}function Se(ut){return 1+~~(ut.getMonth()/3)}function Ie(ut){return c[ut.getUTCDay()]}function je(ut){return l[ut.getUTCDay()]}function Ze(ut){return v[ut.getUTCMonth()]}function Be(ut){return n[ut.getUTCMonth()]}function Je(ut){return i[+(ut.getUTCHours()>=12)]}function dt(ut){return 1+~~(ut.getUTCMonth()/3)}return{format:function(ut){var Ae=ge(ut+="",oe);return Ae.toString=function(){return ut},Ae},parse:function(ut){var Ae=ue(ut+="",!1);return Ae.toString=function(){return ut},Ae},utcFormat:function(ut){var Ae=ge(ut+="",pe);return Ae.toString=function(){return ut},Ae},utcParse:function(ut){var Ae=ue(ut+="",!0);return Ae.toString=function(){return ut},Ae}}}var O7={"-":"",_:" ",0:"0"},fc=/^\s*\d+/,Z_e=/^%/,q_e=/[\\^$*+?|[\]().{}]/g;function Ts(t,e,a){var r=t<0?"-":"",i=(r?-t:t)+"",l=i.length;return r+(l<a?new Array(a-l+1).join(e)+i:i)}function H_e(t){return t.replace(q_e,"\\$&")}function qw(t){return new RegExp("^(?:"+t.map(H_e).join("|")+")","i")}function Hw(t){return new Map(t.map((e,a)=>[e.toLowerCase(),a]))}function $_e(t,e,a){var r=fc.exec(e.slice(a,a+1));return r?(t.w=+r[0],a+r[0].length):-1}function K_e(t,e,a){var r=fc.exec(e.slice(a,a+1));return r?(t.u=+r[0],a+r[0].length):-1}function W_e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.U=+r[0],a+r[0].length):-1}function Y_e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.V=+r[0],a+r[0].length):-1}function X_e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.W=+r[0],a+r[0].length):-1}function V7(t,e,a){var r=fc.exec(e.slice(a,a+4));return r?(t.y=+r[0],a+r[0].length):-1}function z7(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function J_e(t,e,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(a,a+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function Q_e(t,e,a){var r=fc.exec(e.slice(a,a+1));return r?(t.q=r[0]*3-3,a+r[0].length):-1}function e1e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.m=r[0]-1,a+r[0].length):-1}function D7(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.d=+r[0],a+r[0].length):-1}function t1e(t,e,a){var r=fc.exec(e.slice(a,a+3));return r?(t.m=0,t.d=+r[0],a+r[0].length):-1}function M7(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.H=+r[0],a+r[0].length):-1}function a1e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.M=+r[0],a+r[0].length):-1}function r1e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.S=+r[0],a+r[0].length):-1}function n1e(t,e,a){var r=fc.exec(e.slice(a,a+3));return r?(t.L=+r[0],a+r[0].length):-1}function i1e(t,e,a){var r=fc.exec(e.slice(a,a+6));return r?(t.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function s1e(t,e,a){var r=Z_e.exec(e.slice(a,a+1));return r?a+r[0].length:-1}function o1e(t,e,a){var r=fc.exec(e.slice(a));return r?(t.Q=+r[0],a+r[0].length):-1}function l1e(t,e,a){var r=fc.exec(e.slice(a));return r?(t.s=+r[0],a+r[0].length):-1}function I7(t,e){return Ts(t.getDate(),e,2)}function u1e(t,e){return Ts(t.getHours(),e,2)}function c1e(t,e){return Ts(t.getHours()%12||12,e,2)}function d1e(t,e){return Ts(1+_C.count(kg(t),t),e,3)}function hQ(t,e){return Ts(t.getMilliseconds(),e,3)}function h1e(t,e){return hQ(t,e)+"000"}function f1e(t,e){return Ts(t.getMonth()+1,e,2)}function p1e(t,e){return Ts(t.getMinutes(),e,2)}function m1e(t,e){return Ts(t.getSeconds(),e,2)}function g1e(t){var e=t.getDay();return e===0?7:e}function y1e(t,e){return Ts(NP.count(kg(t)-1,t),e,2)}function fQ(t){var e=t.getDay();return e>=4||e===0?F_(t):F_.ceil(t)}function A1e(t,e){return t=fQ(t),Ts(F_.count(kg(t),t)+(kg(t).getDay()===4),e,2)}function v1e(t){return t.getDay()}function _1e(t,e){return Ts(zx.count(kg(t)-1,t),e,2)}function w1e(t,e){return Ts(t.getFullYear()%100,e,2)}function R1e(t,e){return t=fQ(t),Ts(t.getFullYear()%100,e,2)}function T1e(t,e){return Ts(t.getFullYear()%1e4,e,4)}function C1e(t,e){var a=t.getDay();return t=a>=4||a===0?F_(t):F_.ceil(t),Ts(t.getFullYear()%1e4,e,4)}function S1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ts(e/60|0,"0",2)+Ts(e%60,"0",2)}function L7(t,e){return Ts(t.getUTCDate(),e,2)}function b1e(t,e){return Ts(t.getUTCHours(),e,2)}function x1e(t,e){return Ts(t.getUTCHours()%12||12,e,2)}function P1e(t,e){return Ts(1+EP.count(Ug(t),t),e,3)}function pQ(t,e){return Ts(t.getUTCMilliseconds(),e,3)}function E1e(t,e){return pQ(t,e)+"000"}function N1e(t,e){return Ts(t.getUTCMonth()+1,e,2)}function O1e(t,e){return Ts(t.getUTCMinutes(),e,2)}function V1e(t,e){return Ts(t.getUTCSeconds(),e,2)}function z1e(t){var e=t.getUTCDay();return e===0?7:e}function D1e(t,e){return Ts(OP.count(Ug(t)-1,t),e,2)}function mQ(t){var e=t.getUTCDay();return e>=4||e===0?k_(t):k_.ceil(t)}function M1e(t,e){return t=mQ(t),Ts(k_.count(Ug(t),t)+(Ug(t).getUTCDay()===4),e,2)}function I1e(t){return t.getUTCDay()}function L1e(t,e){return Ts(Dx.count(Ug(t)-1,t),e,2)}function F1e(t,e){return Ts(t.getUTCFullYear()%100,e,2)}function k1e(t,e){return t=mQ(t),Ts(t.getUTCFullYear()%100,e,2)}function U1e(t,e){return Ts(t.getUTCFullYear()%1e4,e,4)}function B1e(t,e){var a=t.getUTCDay();return t=a>=4||a===0?k_(t):k_.ceil(t),Ts(t.getUTCFullYear()%1e4,e,4)}function j1e(){return"+0000"}function F7(){return"%"}function k7(t){return+t}function U7(t){return Math.floor(+t/1e3)}var B0,gQ,yQ;G1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G1e(t){return B0=G_e(t),gQ=B0.format,B0.parse,yQ=B0.utcFormat,B0.utcParse,B0}function Z1e(t){return new Date(t)}function q1e(t){return t instanceof Date?+t:+new Date(+t)}function N4(t,e,a,r,i,l,c,n,v,R){var x=g4(),N=x.invert,I=x.domain,k=R(".%L"),Z=R(":%S"),$=R("%I:%M"),H=R("%I %p"),W=R("%a %d"),ee=R("%b %d"),oe=R("%B"),pe=R("%Y");function le(ge){return(v(ge)<ge?k:n(ge)<ge?Z:c(ge)<ge?$:l(ge)<ge?H:r(ge)<ge?i(ge)<ge?W:ee:a(ge)<ge?oe:pe)(ge)}return x.invert=function(ge){return new Date(N(ge))},x.domain=function(ge){return arguments.length?I(Array.from(ge,q1e)):I().map(Z1e)},x.ticks=function(ge){var ue=I();return t(ue[0],ue[ue.length-1],ge??10)},x.tickFormat=function(ge,ue){return ue==null?le:R(ue)},x.nice=function(ge){var ue=I();return(!ge||typeof ge.range!="function")&&(ge=e(ue[0],ue[ue.length-1],ge??10)),ge?I(rQ(ue,ge)):x},x.copy=function(){return vC(x,N4(t,e,a,r,i,l,c,n,v,R))},x}function H1e(){return op.apply(N4(B_e,j_e,kg,P4,NP,_C,b4,C4,yv,gQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $1e(){return op.apply(N4(k_e,U_e,Ug,E4,OP,EP,x4,S4,yv,yQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function VP(){var t=0,e=1,a,r,i,l,c=ch,n=!1,v;function R(N){return N==null||isNaN(N=+N)?v:c(i===0?.5:(N=(l(N)-a)*i,n?Math.max(0,Math.min(1,N)):N))}R.domain=function(N){return arguments.length?([t,e]=N,a=l(t=+t),r=l(e=+e),i=a===r?0:1/(r-a),R):[t,e]},R.clamp=function(N){return arguments.length?(n=!!N,R):n},R.interpolator=function(N){return arguments.length?(c=N,R):c};function x(N){return function(I){var k,Z;return arguments.length?([k,Z]=I,c=N(k,Z),R):[c(0),c(1)]}}return R.range=x(T1),R.rangeRound=x(m4),R.unknown=function(N){return arguments.length?(v=N,R):v},function(N){return l=N,a=N(t),r=N(e),i=a===r?0:1/(r-a),R}}function pA(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function AQ(){var t=fA(VP()(ch));return t.copy=function(){return pA(t,AQ())},qg.apply(t,arguments)}function vQ(){var t=v4(VP()).domain([1,10]);return t.copy=function(){return pA(t,vQ()).base(t.base())},qg.apply(t,arguments)}function _Q(){var t=_4(VP());return t.copy=function(){return pA(t,_Q()).constant(t.constant())},qg.apply(t,arguments)}function O4(){var t=w4(VP());return t.copy=function(){return pA(t,O4()).exponent(t.exponent())},qg.apply(t,arguments)}function K1e(){return O4.apply(null,arguments).exponent(.5)}function wQ(){var t=[],e=ch;function a(r){if(r!=null&&!isNaN(r=+r))return e((yC(t,r,1)-1)/(t.length-1))}return a.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Wy),a},a.interpolator=function(r){return arguments.length?(e=r,a):e},a.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(i,l)=>D0e(t,l/r))},a.copy=function(){return wQ(e).domain(t)},qg.apply(a,arguments)}function zP(){var t=0,e=.5,a=1,r=1,i,l,c,n,v,R=ch,x,N=!1,I;function k($){return isNaN($=+$)?I:($=.5+(($=+x($))-l)*(r*$<r*l?n:v),R(N?Math.max(0,Math.min(1,$)):$))}k.domain=function($){return arguments.length?([t,e,a]=$,i=x(t=+t),l=x(e=+e),c=x(a=+a),n=i===l?0:.5/(l-i),v=l===c?0:.5/(c-l),r=l<i?-1:1,k):[t,e,a]},k.clamp=function($){return arguments.length?(N=!!$,k):N},k.interpolator=function($){return arguments.length?(R=$,k):R};function Z($){return function(H){var W,ee,oe;return arguments.length?([W,ee,oe]=H,R=s_e($,[W,ee,oe]),k):[R(0),R(.5),R(1)]}}return k.range=Z(T1),k.rangeRound=Z(m4),k.unknown=function($){return arguments.length?(I=$,k):I},function($){return x=$,i=$(t),l=$(e),c=$(a),n=i===l?0:.5/(l-i),v=l===c?0:.5/(c-l),r=l<i?-1:1,k}}function RQ(){var t=fA(zP()(ch));return t.copy=function(){return pA(t,RQ())},qg.apply(t,arguments)}function TQ(){var t=v4(zP()).domain([.1,1,10]);return t.copy=function(){return pA(t,TQ()).base(t.base())},qg.apply(t,arguments)}function CQ(){var t=_4(zP());return t.copy=function(){return pA(t,CQ()).constant(t.constant())},qg.apply(t,arguments)}function V4(){var t=w4(zP());return t.copy=function(){return pA(t,V4()).exponent(t.exponent())},qg.apply(t,arguments)}function W1e(){return V4.apply(null,arguments).exponent(.5)}const B7=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lT,scaleDiverging:RQ,scaleDivergingLog:TQ,scaleDivergingPow:V4,scaleDivergingSqrt:W1e,scaleDivergingSymlog:CQ,scaleIdentity:aQ,scaleImplicit:HM,scaleLinear:Ox,scaleLog:nQ,scaleOrdinal:h4,scalePoint:CR,scalePow:R4,scaleQuantile:oQ,scaleQuantize:lQ,scaleRadial:sQ,scaleSequential:AQ,scaleSequentialLog:vQ,scaleSequentialPow:O4,scaleSequentialQuantile:wQ,scaleSequentialSqrt:K1e,scaleSequentialSymlog:_Q,scaleSqrt:E_e,scaleSymlog:iQ,scaleThreshold:uQ,scaleTime:H1e,scaleUtc:$1e,tickFormat:tQ},Symbol.toStringTag,{value:"Module"}));var iD,j7;function DP(){if(j7)return iD;j7=1;var t=v1();function e(a,r,i){for(var l=-1,c=a.length;++l<c;){var n=a[l],v=r(n);if(v!=null&&(R===void 0?v===v&&!t(v):i(v,R)))var R=v,x=n}return x}return iD=e,iD}var sD,G7;function SQ(){if(G7)return sD;G7=1;function t(e,a){return e>a}return sD=t,sD}var oD,Z7;function Y1e(){if(Z7)return oD;Z7=1;var t=DP(),e=SQ(),a=R1();function r(i){return i&&i.length?t(i,a,e):void 0}return oD=r,oD}var X1e=Y1e();const By=ss(X1e);var lD,q7;function bQ(){if(q7)return lD;q7=1;function t(e,a){return e<a}return lD=t,lD}var uD,H7;function J1e(){if(H7)return uD;H7=1;var t=DP(),e=bQ(),a=R1();function r(i){return i&&i.length?t(i,a,e):void 0}return uD=r,uD}var Q1e=J1e();const MP=ss(Q1e);var cD,$7;function ewe(){if($7)return cD;$7=1;var t=WL(),e=Qm(),a=DJ(),r=jh();function i(l,c){var n=r(l)?t:a;return n(l,e(c,3))}return cD=i,cD}var dD,K7;function twe(){if(K7)return dD;K7=1;var t=VJ(),e=ewe();function a(r,i){return t(e(r,i),1)}return dD=a,dD}var awe=twe();const rwe=ss(awe);var hD,W7;function nwe(){if(W7)return hD;W7=1;var t=o4();function e(a,r){return t(a,r)}return hD=e,hD}var iwe=nwe();const aA=ss(iwe);var C1=1e9,swe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},D4,el=!0,ip="[DecimalError] ",Sv=ip+"Invalid argument: ",z4=ip+"Exponent out of range: ",S1=Math.floor,ov=Math.pow,owe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yf,lc=1e7,Io=7,xQ=9007199254740991,Mx=S1(xQ/Io),nn={};nn.absoluteValue=nn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};nn.comparedTo=nn.cmp=function(t){var e,a,r,i,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(r=l.d.length,i=t.d.length,e=0,a=r<i?r:i;e<a;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return r===i?0:r>i^l.s<0?1:-1};nn.decimalPlaces=nn.dp=function(){var t=this,e=t.d.length-1,a=(e-t.e)*Io;if(e=t.d[e],e)for(;e%10==0;e/=10)a--;return a<0?0:a};nn.dividedBy=nn.div=function(t){return Og(this,new this.constructor(t))};nn.dividedToIntegerBy=nn.idiv=function(t){var e=this,a=e.constructor;return po(Og(e,new a(t),0,1),a.precision)};nn.equals=nn.eq=function(t){return!this.cmp(t)};nn.exponent=function(){return vu(this)};nn.greaterThan=nn.gt=function(t){return this.cmp(t)>0};nn.greaterThanOrEqualTo=nn.gte=function(t){return this.cmp(t)>=0};nn.isInteger=nn.isint=function(){return this.e>this.d.length-2};nn.isNegative=nn.isneg=function(){return this.s<0};nn.isPositive=nn.ispos=function(){return this.s>0};nn.isZero=function(){return this.s===0};nn.lessThan=nn.lt=function(t){return this.cmp(t)<0};nn.lessThanOrEqualTo=nn.lte=function(t){return this.cmp(t)<1};nn.logarithm=nn.log=function(t){var e,a=this,r=a.constructor,i=r.precision,l=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(yf))throw Error(ip+"NaN");if(a.s<1)throw Error(ip+(a.s?"NaN":"-Infinity"));return a.eq(yf)?new r(0):(el=!1,e=Og(fT(a,l),fT(t,l),l),el=!0,po(e,i))};nn.minus=nn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?NQ(e,t):PQ(e,(t.s=-t.s,t))};nn.modulo=nn.mod=function(t){var e,a=this,r=a.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(ip+"NaN");return a.s?(el=!1,e=Og(a,t,0,1).times(t),el=!0,a.minus(e)):po(new r(a),i)};nn.naturalExponential=nn.exp=function(){return EQ(this)};nn.naturalLogarithm=nn.ln=function(){return fT(this)};nn.negated=nn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};nn.plus=nn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?PQ(e,t):NQ(e,(t.s=-t.s,t))};nn.precision=nn.sd=function(t){var e,a,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Sv+t);if(e=vu(i)+1,r=i.d.length-1,a=r*Io+1,r=i.d[r],r){for(;r%10==0;r/=10)a--;for(r=i.d[0];r>=10;r/=10)a++}return t&&e>a?e:a};nn.squareRoot=nn.sqrt=function(){var t,e,a,r,i,l,c,n=this,v=n.constructor;if(n.s<1){if(!n.s)return new v(0);throw Error(ip+"NaN")}for(t=vu(n),el=!1,i=Math.sqrt(+n),i==0||i==1/0?(e=Im(n.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=S1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new v(e)):r=new v(i.toString()),a=v.precision,i=c=a+3;;)if(l=r,r=l.plus(Og(n,l,c+2)).times(.5),Im(l.d).slice(0,c)===(e=Im(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),i==c&&e=="4999"){if(po(l,a+1,0),l.times(l).eq(n)){r=l;break}}else if(e!="9999")break;c+=4}return el=!0,po(r,a)};nn.times=nn.mul=function(t){var e,a,r,i,l,c,n,v,R,x=this,N=x.constructor,I=x.d,k=(t=new N(t)).d;if(!x.s||!t.s)return new N(0);for(t.s*=x.s,a=x.e+t.e,v=I.length,R=k.length,v<R&&(l=I,I=k,k=l,c=v,v=R,R=c),l=[],c=v+R,r=c;r--;)l.push(0);for(r=R;--r>=0;){for(e=0,i=v+r;i>r;)n=l[i]+k[r]*I[i-r-1]+e,l[i--]=n%lc|0,e=n/lc|0;l[i]=(l[i]+e)%lc|0}for(;!l[--c];)l.pop();return e?++a:l.shift(),t.d=l,t.e=a,el?po(t,N.precision):t};nn.toDecimalPlaces=nn.todp=function(t,e){var a=this,r=a.constructor;return a=new r(a),t===void 0?a:(Wm(t,0,C1),e===void 0?e=r.rounding:Wm(e,0,8),po(a,t+vu(a)+1,e))};nn.toExponential=function(t,e){var a,r=this,i=r.constructor;return t===void 0?a=Fv(r,!0):(Wm(t,0,C1),e===void 0?e=i.rounding:Wm(e,0,8),r=po(new i(r),t+1,e),a=Fv(r,!0,t+1)),a};nn.toFixed=function(t,e){var a,r,i=this,l=i.constructor;return t===void 0?Fv(i):(Wm(t,0,C1),e===void 0?e=l.rounding:Wm(e,0,8),r=po(new l(i),t+vu(i)+1,e),a=Fv(r.abs(),!1,t+vu(r)+1),i.isneg()&&!i.isZero()?"-"+a:a)};nn.toInteger=nn.toint=function(){var t=this,e=t.constructor;return po(new e(t),vu(t)+1,e.rounding)};nn.toNumber=function(){return+this};nn.toPower=nn.pow=function(t){var e,a,r,i,l,c,n=this,v=n.constructor,R=12,x=+(t=new v(t));if(!t.s)return new v(yf);if(n=new v(n),!n.s){if(t.s<1)throw Error(ip+"Infinity");return n}if(n.eq(yf))return n;if(r=v.precision,t.eq(yf))return po(n,r);if(e=t.e,a=t.d.length-1,c=e>=a,l=n.s,c){if((a=x<0?-x:x)<=xQ){for(i=new v(yf),e=Math.ceil(r/Io+4),el=!1;a%2&&(i=i.times(n),X7(i.d,e)),a=S1(a/2),a!==0;)n=n.times(n),X7(n.d,e);return el=!0,t.s<0?new v(yf).div(i):po(i,r)}}else if(l<0)throw Error(ip+"NaN");return l=l<0&&t.d[Math.max(e,a)]&1?-1:1,n.s=1,el=!1,i=t.times(fT(n,r+R)),el=!0,i=EQ(i),i.s=l,i};nn.toPrecision=function(t,e){var a,r,i=this,l=i.constructor;return t===void 0?(a=vu(i),r=Fv(i,a<=l.toExpNeg||a>=l.toExpPos)):(Wm(t,1,C1),e===void 0?e=l.rounding:Wm(e,0,8),i=po(new l(i),t,e),a=vu(i),r=Fv(i,t<=a||a<=l.toExpNeg,t)),r};nn.toSignificantDigits=nn.tosd=function(t,e){var a=this,r=a.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Wm(t,1,C1),e===void 0?e=r.rounding:Wm(e,0,8)),po(new r(a),t,e)};nn.toString=nn.valueOf=nn.val=nn.toJSON=nn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=vu(t),a=t.constructor;return Fv(t,e<=a.toExpNeg||e>=a.toExpPos)};function PQ(t,e){var a,r,i,l,c,n,v,R,x=t.constructor,N=x.precision;if(!t.s||!e.s)return e.s||(e=new x(t)),el?po(e,N):e;if(v=t.d,R=e.d,c=t.e,i=e.e,v=v.slice(),l=c-i,l){for(l<0?(r=v,l=-l,n=R.length):(r=R,i=c,n=v.length),c=Math.ceil(N/Io),n=c>n?c+1:n+1,l>n&&(l=n,r.length=1),r.reverse();l--;)r.push(0);r.reverse()}for(n=v.length,l=R.length,n-l<0&&(l=n,r=R,R=v,v=r),a=0;l;)a=(v[--l]=v[l]+R[l]+a)/lc|0,v[l]%=lc;for(a&&(v.unshift(a),++i),n=v.length;v[--n]==0;)v.pop();return e.d=v,e.e=i,el?po(e,N):e}function Wm(t,e,a){if(t!==~~t||t<e||t>a)throw Error(Sv+t)}function Im(t){var e,a,r,i=t.length-1,l="",c=t[0];if(i>0){for(l+=c,e=1;e<i;e++)r=t[e]+"",a=Io-r.length,a&&(l+=Vy(a)),l+=r;c=t[e],r=c+"",a=Io-r.length,a&&(l+=Vy(a))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}var Og=function(){function t(r,i){var l,c=0,n=r.length;for(r=r.slice();n--;)l=r[n]*i+c,r[n]=l%lc|0,c=l/lc|0;return c&&r.unshift(c),r}function e(r,i,l,c){var n,v;if(l!=c)v=l>c?1:-1;else for(n=v=0;n<l;n++)if(r[n]!=i[n]){v=r[n]>i[n]?1:-1;break}return v}function a(r,i,l){for(var c=0;l--;)r[l]-=c,c=r[l]<i[l]?1:0,r[l]=c*lc+r[l]-i[l];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,l,c){var n,v,R,x,N,I,k,Z,$,H,W,ee,oe,pe,le,ge,ue,Re,we=r.constructor,Ne=r.s==i.s?1:-1,ne=r.d,_e=i.d;if(!r.s)return new we(r);if(!i.s)throw Error(ip+"Division by zero");for(v=r.e-i.e,ue=_e.length,le=ne.length,k=new we(Ne),Z=k.d=[],R=0;_e[R]==(ne[R]||0);)++R;if(_e[R]>(ne[R]||0)&&--v,l==null?ee=l=we.precision:c?ee=l+(vu(r)-vu(i))+1:ee=l,ee<0)return new we(0);if(ee=ee/Io+2|0,R=0,ue==1)for(x=0,_e=_e[0],ee++;(R<le||x)&&ee--;R++)oe=x*lc+(ne[R]||0),Z[R]=oe/_e|0,x=oe%_e|0;else{for(x=lc/(_e[0]+1)|0,x>1&&(_e=t(_e,x),ne=t(ne,x),ue=_e.length,le=ne.length),pe=ue,$=ne.slice(0,ue),H=$.length;H<ue;)$[H++]=0;Re=_e.slice(),Re.unshift(0),ge=_e[0],_e[1]>=lc/2&&++ge;do x=0,n=e(_e,$,ue,H),n<0?(W=$[0],ue!=H&&(W=W*lc+($[1]||0)),x=W/ge|0,x>1?(x>=lc&&(x=lc-1),N=t(_e,x),I=N.length,H=$.length,n=e(N,$,I,H),n==1&&(x--,a(N,ue<I?Re:_e,I))):(x==0&&(n=x=1),N=_e.slice()),I=N.length,I<H&&N.unshift(0),a($,N,H),n==-1&&(H=$.length,n=e(_e,$,ue,H),n<1&&(x++,a($,ue<H?Re:_e,H))),H=$.length):n===0&&(x++,$=[0]),Z[R++]=x,n&&$[0]?$[H++]=ne[pe]||0:($=[ne[pe]],H=1);while((pe++<le||$[0]!==void 0)&&ee--)}return Z[0]||Z.shift(),k.e=v,po(k,c?l+vu(k)+1:l)}}();function EQ(t,e){var a,r,i,l,c,n,v=0,R=0,x=t.constructor,N=x.precision;if(vu(t)>16)throw Error(z4+vu(t));if(!t.s)return new x(yf);for(el=!1,n=N,c=new x(.03125);t.abs().gte(.1);)t=t.times(c),R+=5;for(r=Math.log(ov(2,R))/Math.LN10*2+5|0,n+=r,a=i=l=new x(yf),x.precision=n;;){if(i=po(i.times(t),n),a=a.times(++v),c=l.plus(Og(i,a,n)),Im(c.d).slice(0,n)===Im(l.d).slice(0,n)){for(;R--;)l=po(l.times(l),n);return x.precision=N,e==null?(el=!0,po(l,N)):l}l=c}}function vu(t){for(var e=t.e*Io,a=t.d[0];a>=10;a/=10)e++;return e}function fD(t,e,a){if(e>t.LN10.sd())throw el=!0,a&&(t.precision=a),Error(ip+"LN10 precision limit exceeded");return po(new t(t.LN10),e)}function Vy(t){for(var e="";t--;)e+="0";return e}function fT(t,e){var a,r,i,l,c,n,v,R,x,N=1,I=10,k=t,Z=k.d,$=k.constructor,H=$.precision;if(k.s<1)throw Error(ip+(k.s?"NaN":"-Infinity"));if(k.eq(yf))return new $(0);if(e==null?(el=!1,R=H):R=e,k.eq(10))return e==null&&(el=!0),fD($,R);if(R+=I,$.precision=R,a=Im(Z),r=a.charAt(0),l=vu(k),Math.abs(l)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)k=k.times(t),a=Im(k.d),r=a.charAt(0),N++;l=vu(k),r>1?(k=new $("0."+a),l++):k=new $(r+"."+a.slice(1))}else return v=fD($,R+2,H).times(l+""),k=fT(new $(r+"."+a.slice(1)),R-I).plus(v),$.precision=H,e==null?(el=!0,po(k,H)):k;for(n=c=k=Og(k.minus(yf),k.plus(yf),R),x=po(k.times(k),R),i=3;;){if(c=po(c.times(x),R),v=n.plus(Og(c,new $(i),R)),Im(v.d).slice(0,R)===Im(n.d).slice(0,R))return n=n.times(2),l!==0&&(n=n.plus(fD($,R+2,H).times(l+""))),n=Og(n,new $(N),R),$.precision=H,e==null?(el=!0,po(n,H)):n;n=v,i+=2}}function Y7(t,e){var a,r,i;for((a=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(a<0&&(a=r),a+=+e.slice(r+1),e=e.substring(0,r)):a<0&&(a=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,a=a-r-1,t.e=S1(a/Io),t.d=[],r=(a+1)%Io,a<0&&(r+=Io),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Io;r<i;)t.d.push(+e.slice(r,r+=Io));e=e.slice(r),r=Io-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),el&&(t.e>Mx||t.e<-Mx))throw Error(z4+a)}else t.s=0,t.e=0,t.d=[0];return t}function po(t,e,a){var r,i,l,c,n,v,R,x,N=t.d;for(c=1,l=N[0];l>=10;l/=10)c++;if(r=e-c,r<0)r+=Io,i=e,R=N[x=0];else{if(x=Math.ceil((r+1)/Io),l=N.length,x>=l)return t;for(R=l=N[x],c=1;l>=10;l/=10)c++;r%=Io,i=r-Io+c}if(a!==void 0&&(l=ov(10,c-i-1),n=R/l%10|0,v=e<0||N[x+1]!==void 0||R%l,v=a<4?(n||v)&&(a==0||a==(t.s<0?3:2)):n>5||n==5&&(a==4||v||a==6&&(r>0?i>0?R/ov(10,c-i):0:N[x-1])%10&1||a==(t.s<0?8:7))),e<1||!N[0])return v?(l=vu(t),N.length=1,e=e-l-1,N[0]=ov(10,(Io-e%Io)%Io),t.e=S1(-e/Io)||0):(N.length=1,N[0]=t.e=t.s=0),t;if(r==0?(N.length=x,l=1,x--):(N.length=x+1,l=ov(10,Io-r),N[x]=i>0?(R/ov(10,c-i)%ov(10,i)|0)*l:0),v)for(;;)if(x==0){(N[0]+=l)==lc&&(N[0]=1,++t.e);break}else{if(N[x]+=l,N[x]!=lc)break;N[x--]=0,l=1}for(r=N.length;N[--r]===0;)N.pop();if(el&&(t.e>Mx||t.e<-Mx))throw Error(z4+vu(t));return t}function NQ(t,e){var a,r,i,l,c,n,v,R,x,N,I=t.constructor,k=I.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new I(t),el?po(e,k):e;if(v=t.d,N=e.d,r=e.e,R=t.e,v=v.slice(),c=R-r,c){for(x=c<0,x?(a=v,c=-c,n=N.length):(a=N,r=R,n=v.length),i=Math.max(Math.ceil(k/Io),n)+2,c>i&&(c=i,a.length=1),a.reverse(),i=c;i--;)a.push(0);a.reverse()}else{for(i=v.length,n=N.length,x=i<n,x&&(n=i),i=0;i<n;i++)if(v[i]!=N[i]){x=v[i]<N[i];break}c=0}for(x&&(a=v,v=N,N=a,e.s=-e.s),n=v.length,i=N.length-n;i>0;--i)v[n++]=0;for(i=N.length;i>c;){if(v[--i]<N[i]){for(l=i;l&&v[--l]===0;)v[l]=lc-1;--v[l],v[i]+=lc}v[i]-=N[i]}for(;v[--n]===0;)v.pop();for(;v[0]===0;v.shift())--r;return v[0]?(e.d=v,e.e=r,el?po(e,k):e):new I(0)}function Fv(t,e,a){var r,i=vu(t),l=Im(t.d),c=l.length;return e?(a&&(r=a-c)>0?l=l.charAt(0)+"."+l.slice(1)+Vy(r):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(i<0?"e":"e+")+i):i<0?(l="0."+Vy(-i-1)+l,a&&(r=a-c)>0&&(l+=Vy(r))):i>=c?(l+=Vy(i+1-c),a&&(r=a-i-1)>0&&(l=l+"."+Vy(r))):((r=i+1)<c&&(l=l.slice(0,r)+"."+l.slice(r)),a&&(r=a-c)>0&&(i+1===c&&(l+="."),l+=Vy(r))),t.s<0?"-"+l:l}function X7(t,e){if(t.length>e)return t.length=e,!0}function OQ(t){var e,a,r;function i(l){var c=this;if(!(c instanceof i))return new i(l);if(c.constructor=i,l instanceof i){c.s=l.s,c.e=l.e,c.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(Sv+l);if(l>0)c.s=1;else if(l<0)l=-l,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(l===~~l&&l<1e7){c.e=0,c.d=[l];return}return Y7(c,l.toString())}else if(typeof l!="string")throw Error(Sv+l);if(l.charCodeAt(0)===45?(l=l.slice(1),c.s=-1):c.s=1,owe.test(l))Y7(c,l);else throw Error(Sv+l)}if(i.prototype=nn,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=OQ,i.config=i.set=lwe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(a=r[e++])||(t[a]=this[a]);return i.config(t),i}function lwe(t){if(!t||typeof t!="object")throw Error(ip+"Object expected");var e,a,r,i=["precision",1,C1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[a=i[e]])!==void 0)if(S1(r)===r&&r>=i[e+1]&&r<=i[e+2])this[a]=r;else throw Error(Sv+a+": "+r);if((r=t[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(Sv+a+": "+r);return this}var D4=OQ(swe);yf=new D4(1);const ro=D4;function uwe(t){return fwe(t)||hwe(t)||dwe(t)||cwe()}function cwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dwe(t,e){if(t){if(typeof t=="string")return YM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return YM(t,e)}}function hwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function fwe(t){if(Array.isArray(t))return YM(t)}function YM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var pwe=function(e){return e},VQ={},zQ=function(e){return e===VQ},J7=function(e){return function a(){return arguments.length===0||arguments.length===1&&zQ(arguments.length<=0?void 0:arguments[0])?a:e.apply(void 0,arguments)}},mwe=function t(e,a){return e===1?a:J7(function(){for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];var c=i.filter(function(n){return n!==VQ}).length;return c>=e?a.apply(void 0,i):t(e-c,J7(function(){for(var n=arguments.length,v=new Array(n),R=0;R<n;R++)v[R]=arguments[R];var x=i.map(function(N){return zQ(N)?v.shift():N});return a.apply(void 0,uwe(x).concat(v))}))})},IP=function(e){return mwe(e.length,e)},XM=function(e,a){for(var r=[],i=e;i<a;++i)r[i-e]=i;return r},gwe=IP(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(a){return e[a]}).map(t)}),ywe=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];if(!a.length)return pwe;var i=a.reverse(),l=i[0],c=i.slice(1);return function(){return c.reduce(function(n,v){return v(n)},l.apply(void 0,arguments))}},JM=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},DQ=function(e){var a=null,r=null;return function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return a&&l.every(function(n,v){return n===a[v]})||(a=l,r=e.apply(void 0,l)),r}};function Awe(t){var e;return t===0?e=1:e=Math.floor(new ro(t).abs().log(10).toNumber())+1,e}function vwe(t,e,a){for(var r=new ro(t),i=0,l=[];r.lt(e)&&i<1e5;)l.push(r.toNumber()),r=r.add(a),i++;return l}var _we=IP(function(t,e,a){var r=+t,i=+e;return r+a*(i-r)}),wwe=IP(function(t,e,a){var r=e-+t;return r=r||1/0,(a-t)/r}),Rwe=IP(function(t,e,a){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(a-t)/r))});const LP={rangeStep:vwe,getDigitCount:Awe,interpolateNumber:_we,uninterpolateNumber:wwe,uninterpolateTruncation:Rwe};function QM(t){return Swe(t)||Cwe(t)||MQ(t)||Twe()}function Twe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Swe(t){if(Array.isArray(t))return eI(t)}function pT(t,e){return Pwe(t)||xwe(t,e)||MQ(t,e)||bwe()}function bwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MQ(t,e){if(t){if(typeof t=="string")return eI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return eI(t,e)}}function eI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function xwe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],r=!0,i=!1,l=void 0;try{for(var c=t[Symbol.iterator](),n;!(r=(n=c.next()).done)&&(a.push(n.value),!(e&&a.length===e));r=!0);}catch(v){i=!0,l=v}finally{try{!r&&c.return!=null&&c.return()}finally{if(i)throw l}}return a}}function Pwe(t){if(Array.isArray(t))return t}function IQ(t){var e=pT(t,2),a=e[0],r=e[1],i=a,l=r;return a>r&&(i=r,l=a),[i,l]}function LQ(t,e,a){if(t.lte(0))return new ro(0);var r=LP.getDigitCount(t.toNumber()),i=new ro(10).pow(r),l=t.div(i),c=r!==1?.05:.1,n=new ro(Math.ceil(l.div(c).toNumber())).add(a).mul(c),v=n.mul(i);return e?v:new ro(Math.ceil(v))}function Ewe(t,e,a){var r=1,i=new ro(t);if(!i.isint()&&a){var l=Math.abs(t);l<1?(r=new ro(10).pow(LP.getDigitCount(t)-1),i=new ro(Math.floor(i.div(r).toNumber())).mul(r)):l>1&&(i=new ro(Math.floor(t)))}else t===0?i=new ro(Math.floor((e-1)/2)):a||(i=new ro(Math.floor(t)));var c=Math.floor((e-1)/2),n=ywe(gwe(function(v){return i.add(new ro(v-c).mul(r)).toNumber()}),XM);return n(0,e)}function FQ(t,e,a,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(a-1)))return{step:new ro(0),tickMin:new ro(0),tickMax:new ro(0)};var l=LQ(new ro(e).sub(t).div(a-1),r,i),c;t<=0&&e>=0?c=new ro(0):(c=new ro(t).add(e).div(2),c=c.sub(new ro(c).mod(l)));var n=Math.ceil(c.sub(t).div(l).toNumber()),v=Math.ceil(new ro(e).sub(c).div(l).toNumber()),R=n+v+1;return R>a?FQ(t,e,a,r,i+1):(R<a&&(v=e>0?v+(a-R):v,n=e>0?n:n+(a-R)),{step:l,tickMin:c.sub(new ro(n).mul(l)),tickMax:c.add(new ro(v).mul(l))})}function Nwe(t){var e=pT(t,2),a=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),n=IQ([a,r]),v=pT(n,2),R=v[0],x=v[1];if(R===-1/0||x===1/0){var N=x===1/0?[R].concat(QM(XM(0,i-1).map(function(){return 1/0}))):[].concat(QM(XM(0,i-1).map(function(){return-1/0})),[x]);return a>r?JM(N):N}if(R===x)return Ewe(R,i,l);var I=FQ(R,x,c,l),k=I.step,Z=I.tickMin,$=I.tickMax,H=LP.rangeStep(Z,$.add(new ro(.1).mul(k)),k);return a>r?JM(H):H}function Owe(t,e){var a=pT(t,2),r=a[0],i=a[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=IQ([r,i]),n=pT(c,2),v=n[0],R=n[1];if(v===-1/0||R===1/0)return[r,i];if(v===R)return[v];var x=Math.max(e,2),N=LQ(new ro(R).sub(v).div(x-1),l,0),I=[].concat(QM(LP.rangeStep(new ro(v),new ro(R).sub(new ro(.99).mul(N)),N)),[R]);return r>i?JM(I):I}var Vwe=DQ(Nwe),zwe=DQ(Owe),Dwe="Invariant failed";function kv(t,e){throw new Error(Dwe)}var Mwe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function U_(t){"@babel/helpers - typeof";return U_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U_(t)}function Ix(){return Ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ix.apply(this,arguments)}function Iwe(t,e){return Uwe(t)||kwe(t,e)||Fwe(t,e)||Lwe()}function Lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fwe(t,e){if(t){if(typeof t=="string")return Q7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q7(t,e)}}function Q7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function kwe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function Uwe(t){if(Array.isArray(t))return t}function Bwe(t,e){if(t==null)return{};var a=jwe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Gwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zwe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BQ(r.key),r)}}function qwe(t,e,a){return e&&Zwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hwe(t,e,a){return e=Lx(e),$we(t,kQ()?Reflect.construct(e,a||[],Lx(t).constructor):e.apply(t,a))}function $we(t,e){if(e&&(U_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kwe(t)}function Kwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kQ=function(){return!!t})()}function Lx(t){return Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Lx(t)}function Wwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tI(t,e)}function tI(t,e){return tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tI(t,e)}function UQ(t,e,a){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function BQ(t){var e=Ywe(t,"string");return U_(e)=="symbol"?e:e+""}function Ywe(t,e){if(U_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(U_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b1=function(t){function e(){return Gwe(this,e),Hwe(this,e,arguments)}return Wwe(e,t),qwe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,l=r.layout,c=r.width,n=r.dataKey,v=r.data,R=r.dataPointFormatter,x=r.xAxis,N=r.yAxis,I=Bwe(r,Mwe),k=yn(I,!1);this.props.direction==="x"&&x.type!=="number"&&kv();var Z=v.map(function($){var H=R($,n),W=H.x,ee=H.y,oe=H.value,pe=H.errorVal;if(!pe)return null;var le=[],ge,ue;if(Array.isArray(pe)){var Re=Iwe(pe,2);ge=Re[0],ue=Re[1]}else ge=ue=pe;if(l==="vertical"){var we=x.scale,Ne=ee+i,ne=Ne+c,_e=Ne-c,ke=we(oe-ge),Pe=we(oe+ue);le.push({x1:Pe,y1:ne,x2:Pe,y2:_e}),le.push({x1:ke,y1:Ne,x2:Pe,y2:Ne}),le.push({x1:ke,y1:ne,x2:ke,y2:_e})}else if(l==="horizontal"){var Ee=N.scale,De=W+i,qe=De-c,Oe=De+c,He=Ee(oe-ge),Ue=Ee(oe+ue);le.push({x1:qe,y1:Ue,x2:Oe,y2:Ue}),le.push({x1:De,y1:He,x2:De,y2:Ue}),le.push({x1:qe,y1:He,x2:Oe,y2:He})}return Vt.createElement(vi,Ix({className:"recharts-errorBar",key:"bar-".concat(le.map(function(ct){return"".concat(ct.x1,"-").concat(ct.x2,"-").concat(ct.y1,"-").concat(ct.y2)}))},k),le.map(function(ct){return Vt.createElement("line",Ix({},ct,{key:"line-".concat(ct.x1,"-").concat(ct.x2,"-").concat(ct.y1,"-").concat(ct.y2)}))}))});return Vt.createElement(vi,{className:"recharts-errorBars"},Z)}}])}(Vt.Component);UQ(b1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});UQ(b1,"displayName","ErrorBar");function mT(t){"@babel/helpers - typeof";return mT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mT(t)}function e9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function tv(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(a),!0).forEach(function(r){Xwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Xwe(t,e,a){return e=Jwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Jwe(t){var e=Qwe(t,"string");return mT(e)=="symbol"?e:e+""}function Qwe(t,e){if(mT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(mT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jQ=function(e){var a=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,l=e.legendContent,c=pf(a,mf);if(!c)return null;var n=mf.defaultProps,v=n!==void 0?tv(tv({},n),c.props):{},R;return c.props&&c.props.payload?R=c.props&&c.props.payload:l==="children"?R=(r||[]).reduce(function(x,N){var I=N.item,k=N.props,Z=k.sectors||k.data||[];return x.concat(Z.map(function($){return{type:c.props.iconType||I.props.legendType,value:$.name,color:$.fill,payload:$}}))},[]):R=(r||[]).map(function(x){var N=x.item,I=N.type.defaultProps,k=I!==void 0?tv(tv({},I),N.props):{},Z=k.dataKey,$=k.name,H=k.legendType,W=k.hide;return{inactive:W,dataKey:Z,type:v.iconType||H||"square",color:M4(N),value:$||Z,payload:k}}),tv(tv(tv({},v),mf.getWithHeight(c,i)),{},{payload:R,item:c})};function gT(t){"@babel/helpers - typeof";return gT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gT(t)}function t9(t){return rRe(t)||aRe(t)||tRe(t)||eRe()}function eRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tRe(t,e){if(t){if(typeof t=="string")return aI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return aI(t,e)}}function aRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rRe(t){if(Array.isArray(t))return aI(t)}function aI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function a9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function El(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?a9(Object(a),!0).forEach(function(r){y_(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):a9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function y_(t,e,a){return e=nRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nRe(t){var e=iRe(t,"string");return gT(e)=="symbol"?e:e+""}function iRe(t,e){if(gT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(gT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fo(t,e,a){return qn(t)||qn(e)?a:qu(e)?Rf(t,e,a):Zn(e)?e(t):a}function SR(t,e,a,r){var i=rwe(t,function(n){return Fo(n,e)});if(a==="number"){var l=i.filter(function(n){return Tr(n)||parseFloat(n)});return l.length?[MP(l),By(l)]:[1/0,-1/0]}var c=r?i.filter(function(n){return!qn(n)}):i;return c.map(function(n){return qu(n)||n instanceof Date?n:""})}var sRe=function(e){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,c=-1,n=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(n<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var v=l.range,R=0;R<n;R++){var x=R>0?i[R-1].coordinate:i[n-1].coordinate,N=i[R].coordinate,I=R>=n-1?i[0].coordinate:i[R+1].coordinate,k=void 0;if(lh(N-x)!==lh(I-N)){var Z=[];if(lh(I-N)===lh(v[1]-v[0])){k=I;var $=N+v[1]-v[0];Z[0]=Math.min($,($+x)/2),Z[1]=Math.max($,($+x)/2)}else{k=x;var H=I+v[1]-v[0];Z[0]=Math.min(N,(H+N)/2),Z[1]=Math.max(N,(H+N)/2)}var W=[Math.min(N,(k+N)/2),Math.max(N,(k+N)/2)];if(e>W[0]&&e<=W[1]||e>=Z[0]&&e<=Z[1]){c=i[R].index;break}}else{var ee=Math.min(x,I),oe=Math.max(x,I);if(e>(ee+N)/2&&e<=(oe+N)/2){c=i[R].index;break}}}else for(var pe=0;pe<n;pe++)if(pe===0&&e<=(r[pe].coordinate+r[pe+1].coordinate)/2||pe>0&&pe<n-1&&e>(r[pe].coordinate+r[pe-1].coordinate)/2&&e<=(r[pe].coordinate+r[pe+1].coordinate)/2||pe===n-1&&e>(r[pe].coordinate+r[pe-1].coordinate)/2){c=r[pe].index;break}return c},M4=function(e){var a,r=e,i=r.type.displayName,l=(a=e.type)!==null&&a!==void 0&&a.defaultProps?El(El({},e.type.defaultProps),e.props):e.props,c=l.stroke,n=l.fill,v;switch(i){case"Line":v=c;break;case"Area":case"Radar":v=c&&c!=="none"?c:n;break;default:v=n;break}return v},oRe=function(e){var a=e.barSize,r=e.totalSize,i=e.stackGroups,l=i===void 0?{}:i;if(!l)return{};for(var c={},n=Object.keys(l),v=0,R=n.length;v<R;v++)for(var x=l[n[v]].stackGroups,N=Object.keys(x),I=0,k=N.length;I<k;I++){var Z=x[N[I]],$=Z.items,H=Z.cateAxisId,W=$.filter(function(ue){return Ng(ue.type).indexOf("Bar")>=0});if(W&&W.length){var ee=W[0].type.defaultProps,oe=ee!==void 0?El(El({},ee),W[0].props):W[0].props,pe=oe.barSize,le=oe[H];c[le]||(c[le]=[]);var ge=qn(pe)?a:pe;c[le].push({item:W[0],stackList:W.slice(1),barSize:qn(ge)?void 0:uh(ge,r,0)})}}return c},lRe=function(e){var a=e.barGap,r=e.barCategoryGap,i=e.bandSize,l=e.sizeList,c=l===void 0?[]:l,n=e.maxBarSize,v=c.length;if(v<1)return null;var R=uh(a,i,0,!0),x,N=[];if(c[0].barSize===+c[0].barSize){var I=!1,k=i/v,Z=c.reduce(function(pe,le){return pe+le.barSize||0},0);Z+=(v-1)*R,Z>=i&&(Z-=(v-1)*R,R=0),Z>=i&&k>0&&(I=!0,k*=.9,Z=v*k);var $=(i-Z)/2>>0,H={offset:$-R,size:0};x=c.reduce(function(pe,le){var ge={item:le.item,position:{offset:H.offset+H.size+R,size:I?k:le.barSize}},ue=[].concat(t9(pe),[ge]);return H=ue[ue.length-1].position,le.stackList&&le.stackList.length&&le.stackList.forEach(function(Re){ue.push({item:Re,position:H})}),ue},N)}else{var W=uh(r,i,0,!0);i-2*W-(v-1)*R<=0&&(R=0);var ee=(i-2*W-(v-1)*R)/v;ee>1&&(ee>>=0);var oe=n===+n?Math.min(ee,n):ee;x=c.reduce(function(pe,le,ge){var ue=[].concat(t9(pe),[{item:le.item,position:{offset:W+(ee+R)*ge+(ee-oe)/2,size:oe}}]);return le.stackList&&le.stackList.length&&le.stackList.forEach(function(Re){ue.push({item:Re,position:ue[ue.length-1].position})}),ue},N)}return x},uRe=function(e,a,r,i){var l=r.children,c=r.width,n=r.margin,v=c-(n.left||0)-(n.right||0),R=jQ({children:l,legendWidth:v});if(R){var x=i||{},N=x.width,I=x.height,k=R.align,Z=R.verticalAlign,$=R.layout;if(($==="vertical"||$==="horizontal"&&Z==="middle")&&k!=="center"&&Tr(e[k]))return El(El({},e),{},y_({},k,e[k]+(N||0)));if(($==="horizontal"||$==="vertical"&&k==="center")&&Z!=="middle"&&Tr(e[Z]))return El(El({},e),{},y_({},Z,e[Z]+(I||0)))}return e},cRe=function(e,a,r){return qn(a)?!0:e==="horizontal"?a==="yAxis":e==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},GQ=function(e,a,r,i,l){var c=a.props.children,n=mh(c,b1).filter(function(R){return cRe(i,l,R.props.direction)});if(n&&n.length){var v=n.map(function(R){return R.props.dataKey});return e.reduce(function(R,x){var N=Fo(x,r);if(qn(N))return R;var I=Array.isArray(N)?[MP(N),By(N)]:[N,N],k=v.reduce(function(Z,$){var H=Fo(x,$,0),W=I[0]-Math.abs(Array.isArray(H)?H[0]:H),ee=I[1]+Math.abs(Array.isArray(H)?H[1]:H);return[Math.min(W,Z[0]),Math.max(ee,Z[1])]},[1/0,-1/0]);return[Math.min(k[0],R[0]),Math.max(k[1],R[1])]},[1/0,-1/0])}return null},dRe=function(e,a,r,i,l){var c=a.map(function(n){return GQ(e,n,r,l,i)}).filter(function(n){return!qn(n)});return c&&c.length?c.reduce(function(n,v){return[Math.min(n[0],v[0]),Math.max(n[1],v[1])]},[1/0,-1/0]):null},ZQ=function(e,a,r,i,l){var c=a.map(function(v){var R=v.props.dataKey;return r==="number"&&R&&GQ(e,v,R,i)||SR(e,R,r,l)});if(r==="number")return c.reduce(function(v,R){return[Math.min(v[0],R[0]),Math.max(v[1],R[1])]},[1/0,-1/0]);var n={};return c.reduce(function(v,R){for(var x=0,N=R.length;x<N;x++)n[R[x]]||(n[R[x]]=!0,v.push(R[x]));return v},[])},qQ=function(e,a){return e==="horizontal"&&a==="xAxis"||e==="vertical"&&a==="yAxis"||e==="centric"&&a==="angleAxis"||e==="radial"&&a==="radiusAxis"},HQ=function(e,a,r,i){if(i)return e.map(function(v){return v.coordinate});var l,c,n=e.map(function(v){return v.coordinate===a&&(l=!0),v.coordinate===r&&(c=!0),v.coordinate});return l||n.push(a),c||n.push(r),n},xg=function(e,a,r){if(!e)return null;var i=e.scale,l=e.duplicateDomain,c=e.type,n=e.range,v=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,R=(a||r)&&c==="category"&&i.bandwidth?i.bandwidth()/v:0;if(R=e.axisType==="angleAxis"&&(n==null?void 0:n.length)>=2?lh(n[0]-n[1])*2*R:R,a&&(e.ticks||e.niceTicks)){var x=(e.ticks||e.niceTicks).map(function(N){var I=l?l.indexOf(N):N;return{coordinate:i(I)+R,value:N,offset:R}});return x.filter(function(N){return!w1(N.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(N,I){return{coordinate:i(N)+R,value:N,index:I,offset:R}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(N){return{coordinate:i(N)+R,value:N,offset:R}}):i.domain().map(function(N,I){return{coordinate:i(N)+R,value:l?l[N]:N,index:I,offset:R}})},pD=new WeakMap,tb=function(e,a){if(typeof a!="function")return e;pD.has(e)||pD.set(e,new WeakMap);var r=pD.get(e);if(r.has(a))return r.get(a);var i=function(){e.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,i),i},$Q=function(e,a,r){var i=e.scale,l=e.type,c=e.layout,n=e.axisType;if(i==="auto")return c==="radial"&&n==="radiusAxis"?{scale:lT(),realScaleType:"band"}:c==="radial"&&n==="angleAxis"?{scale:Ox(),realScaleType:"linear"}:l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:CR(),realScaleType:"point"}:l==="category"?{scale:lT(),realScaleType:"band"}:{scale:Ox(),realScaleType:"linear"};if(mC(i)){var v="scale".concat(_P(i));return{scale:(B7[v]||CR)(),realScaleType:B7[v]?v:"point"}}return Zn(i)?{scale:i}:{scale:CR(),realScaleType:"point"}},r9=1e-4,KQ=function(e){var a=e.domain();if(!(!a||a.length<=2)){var r=a.length,i=e.range(),l=Math.min(i[0],i[1])-r9,c=Math.max(i[0],i[1])+r9,n=e(a[0]),v=e(a[r-1]);(n<l||n>c||v<l||v>c)&&e.domain([a[0],a[r-1]])}},hRe=function(e,a){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===a)return e[r].position;return null},fRe=function(e,a){if(!a||a.length!==2||!Tr(a[0])||!Tr(a[1]))return e;var r=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]),l=[e[0],e[1]];return(!Tr(e[0])||e[0]<r)&&(l[0]=r),(!Tr(e[1])||e[1]>i)&&(l[1]=i),l[0]>i&&(l[0]=i),l[1]<r&&(l[1]=r),l},pRe=function(e){var a=e.length;if(!(a<=0))for(var r=0,i=e[0].length;r<i;++r)for(var l=0,c=0,n=0;n<a;++n){var v=w1(e[n][r][1])?e[n][r][0]:e[n][r][1];v>=0?(e[n][r][0]=l,e[n][r][1]=l+v,l=e[n][r][1]):(e[n][r][0]=c,e[n][r][1]=c+v,c=e[n][r][1])}},mRe=function(e){var a=e.length;if(!(a<=0))for(var r=0,i=e[0].length;r<i;++r)for(var l=0,c=0;c<a;++c){var n=w1(e[c][r][1])?e[c][r][0]:e[c][r][1];n>=0?(e[c][r][0]=l,e[c][r][1]=l+n,l=e[c][r][1]):(e[c][r][0]=0,e[c][r][1]=0)}},gRe={sign:pRe,expand:rye,none:O_,silhouette:nye,wiggle:iye,positive:mRe},yRe=function(e,a,r){var i=a.map(function(n){return n.props.dataKey}),l=gRe[r],c=aye().keys(i).value(function(n,v){return+Fo(n,v,0)}).order(VM).offset(l);return c(e)},ARe=function(e,a,r,i,l,c){if(!e)return null;var n=c?a.reverse():a,v={},R=n.reduce(function(N,I){var k,Z=(k=I.type)!==null&&k!==void 0&&k.defaultProps?El(El({},I.type.defaultProps),I.props):I.props,$=Z.stackId,H=Z.hide;if(H)return N;var W=Z[r],ee=N[W]||{hasStack:!1,stackGroups:{}};if(qu($)){var oe=ee.stackGroups[$]||{numericAxisId:r,cateAxisId:i,items:[]};oe.items.push(I),ee.hasStack=!0,ee.stackGroups[$]=oe}else ee.stackGroups[hA("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[I]};return El(El({},N),{},y_({},W,ee))},v),x={};return Object.keys(R).reduce(function(N,I){var k=R[I];if(k.hasStack){var Z={};k.stackGroups=Object.keys(k.stackGroups).reduce(function($,H){var W=k.stackGroups[H];return El(El({},$),{},y_({},H,{numericAxisId:r,cateAxisId:i,items:W.items,stackedData:yRe(e,W.items,l)}))},Z)}return El(El({},N),{},y_({},I,k))},x)},WQ=function(e,a){var r=a.realScaleType,i=a.type,l=a.tickCount,c=a.originalDomain,n=a.allowDecimals,v=r||a.scale;if(v!=="auto"&&v!=="linear")return null;if(l&&i==="number"&&c&&(c[0]==="auto"||c[1]==="auto")){var R=e.domain();if(!R.length)return null;var x=Vwe(R,l,n);return e.domain([MP(x),By(x)]),{niceTicks:x}}if(l&&i==="number"){var N=e.domain(),I=zwe(N,l,n);return{niceTicks:I}}return null};function B_(t){var e=t.axis,a=t.ticks,r=t.bandSize,i=t.entry,l=t.index,c=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!qn(i[e.dataKey])){var n=fx(a,"value",i[e.dataKey]);if(n)return n.coordinate+r/2}return a[l]?a[l].coordinate+r/2:null}var v=Fo(i,qn(c)?e.dataKey:c);return qn(v)?null:e.scale(v)}var n9=function(e){var a=e.axis,r=e.ticks,i=e.offset,l=e.bandSize,c=e.entry,n=e.index;if(a.type==="category")return r[n]?r[n].coordinate+i:null;var v=Fo(c,a.dataKey,a.domain[n]);return qn(v)?null:a.scale(v)-l/2+i},vRe=function(e){var a=e.numericAxis,r=a.scale.domain();if(a.type==="number"){var i=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return i<=0&&l>=0?0:l<0?l:i}return r[0]},_Re=function(e,a){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?El(El({},e.type.defaultProps),e.props):e.props,l=i.stackId;if(qu(l)){var c=a[l];if(c){var n=c.items.indexOf(e);return n>=0?c.stackedData[n]:null}}return null},wRe=function(e){return e.reduce(function(a,r){return[MP(r.concat([a[0]]).filter(Tr)),By(r.concat([a[1]]).filter(Tr))]},[1/0,-1/0])},YQ=function(e,a,r){return Object.keys(e).reduce(function(i,l){var c=e[l],n=c.stackedData,v=n.reduce(function(R,x){var N=wRe(x.slice(a,r+1));return[Math.min(R[0],N[0]),Math.max(R[1],N[1])]},[1/0,-1/0]);return[Math.min(v[0],i[0]),Math.max(v[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},i9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,s9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rI=function(e,a,r){if(Zn(e))return e(a,r);if(!Array.isArray(e))return a;var i=[];if(Tr(e[0]))i[0]=r?e[0]:Math.min(e[0],a[0]);else if(i9.test(e[0])){var l=+i9.exec(e[0])[1];i[0]=a[0]-l}else Zn(e[0])?i[0]=e[0](a[0]):i[0]=a[0];if(Tr(e[1]))i[1]=r?e[1]:Math.max(e[1],a[1]);else if(s9.test(e[1])){var c=+s9.exec(e[1])[1];i[1]=a[1]+c}else Zn(e[1])?i[1]=e[1](a[1]):i[1]=a[1];return i},Fx=function(e,a,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&a&&a.length>=2){for(var l=u4(a,function(N){return N.coordinate}),c=1/0,n=1,v=l.length;n<v;n++){var R=l[n],x=l[n-1];c=Math.min((R.coordinate||0)-(x.coordinate||0),c)}return c===1/0?0:c}return r?void 0:0},o9=function(e,a,r){return!e||!e.length||aA(e,Rf(r,"type.defaultProps.domain"))?a:e},XQ=function(e,a){var r=e.type.defaultProps?El(El({},e.type.defaultProps),e.props):e.props,i=r.dataKey,l=r.name,c=r.unit,n=r.formatter,v=r.tooltipType,R=r.chartType,x=r.hide;return El(El({},yn(e,!1)),{},{dataKey:i,unit:c,formatter:n,name:l||i,color:M4(e),value:Fo(a,i),type:v,payload:a,chartType:R,hide:x})};function yT(t){"@babel/helpers - typeof";return yT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yT(t)}function l9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function wg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?l9(Object(a),!0).forEach(function(r){JQ(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function JQ(t,e,a){return e=RRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function RRe(t){var e=TRe(t,"string");return yT(e)=="symbol"?e:e+""}function TRe(t,e){if(yT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(yT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CRe(t,e){return PRe(t)||xRe(t,e)||bRe(t,e)||SRe()}function SRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bRe(t,e){if(t){if(typeof t=="string")return u9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u9(t,e)}}function u9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function xRe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function PRe(t){if(Array.isArray(t))return t}var kx=Math.PI/180,ERe=function(e){return e*180/Math.PI},Po=function(e,a,r,i){return{x:e+Math.cos(-kx*i)*r,y:a+Math.sin(-kx*i)*r}},QQ=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(a-(r.top||0)-(r.bottom||0)))/2},NRe=function(e,a,r,i,l){var c=e.width,n=e.height,v=e.startAngle,R=e.endAngle,x=uh(e.cx,c,c/2),N=uh(e.cy,n,n/2),I=QQ(c,n,r),k=uh(e.innerRadius,I,0),Z=uh(e.outerRadius,I,I*.8),$=Object.keys(a);return $.reduce(function(H,W){var ee=a[W],oe=ee.domain,pe=ee.reversed,le;if(qn(ee.range))i==="angleAxis"?le=[v,R]:i==="radiusAxis"&&(le=[k,Z]),pe&&(le=[le[1],le[0]]);else{le=ee.range;var ge=le,ue=CRe(ge,2);v=ue[0],R=ue[1]}var Re=$Q(ee,l),we=Re.realScaleType,Ne=Re.scale;Ne.domain(oe).range(le),KQ(Ne);var ne=WQ(Ne,wg(wg({},ee),{},{realScaleType:we})),_e=wg(wg(wg({},ee),ne),{},{range:le,radius:Z,realScaleType:we,scale:Ne,cx:x,cy:N,innerRadius:k,outerRadius:Z,startAngle:v,endAngle:R});return wg(wg({},H),{},JQ({},W,_e))},{})},ORe=function(e,a){var r=e.x,i=e.y,l=a.x,c=a.y;return Math.sqrt(Math.pow(r-l,2)+Math.pow(i-c,2))},VRe=function(e,a){var r=e.x,i=e.y,l=a.cx,c=a.cy,n=ORe({x:r,y:i},{x:l,y:c});if(n<=0)return{radius:n};var v=(r-l)/n,R=Math.acos(v);return i>c&&(R=2*Math.PI-R),{radius:n,angle:ERe(R),angleInRadian:R}},zRe=function(e){var a=e.startAngle,r=e.endAngle,i=Math.floor(a/360),l=Math.floor(r/360),c=Math.min(i,l);return{startAngle:a-c*360,endAngle:r-c*360}},DRe=function(e,a){var r=a.startAngle,i=a.endAngle,l=Math.floor(r/360),c=Math.floor(i/360),n=Math.min(l,c);return e+n*360},c9=function(e,a){var r=e.x,i=e.y,l=VRe({x:r,y:i},a),c=l.radius,n=l.angle,v=a.innerRadius,R=a.outerRadius;if(c<v||c>R)return!1;if(c===0)return!0;var x=zRe(a),N=x.startAngle,I=x.endAngle,k=n,Z;if(N<=I){for(;k>I;)k-=360;for(;k<N;)k+=360;Z=k>=N&&k<=I}else{for(;k>N;)k-=360;for(;k<I;)k+=360;Z=k>=I&&k<=N}return Z?wg(wg({},a),{},{radius:c,angle:DRe(k,a)}):null},eee=function(e){return!ie.isValidElement(e)&&!Zn(e)&&typeof e!="boolean"?e.className:""};function AT(t){"@babel/helpers - typeof";return AT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AT(t)}var MRe=["offset"];function IRe(t){return URe(t)||kRe(t)||FRe(t)||LRe()}function LRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FRe(t,e){if(t){if(typeof t=="string")return nI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nI(t,e)}}function kRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function URe(t){if(Array.isArray(t))return nI(t)}function nI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function BRe(t,e){if(t==null)return{};var a=jRe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jRe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function d9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Zu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?d9(Object(a),!0).forEach(function(r){GRe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function GRe(t,e,a){return e=ZRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ZRe(t){var e=qRe(t,"string");return AT(e)=="symbol"?e:e+""}function qRe(t,e){if(AT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(AT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vT(){return vT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vT.apply(this,arguments)}var HRe=function(e){var a=e.value,r=e.formatter,i=qn(e.children)?a:e.children;return Zn(r)?r(i):i},$Re=function(e,a){var r=lh(a-e),i=Math.min(Math.abs(a-e),360);return r*i},KRe=function(e,a,r){var i=e.position,l=e.viewBox,c=e.offset,n=e.className,v=l,R=v.cx,x=v.cy,N=v.innerRadius,I=v.outerRadius,k=v.startAngle,Z=v.endAngle,$=v.clockWise,H=(N+I)/2,W=$Re(k,Z),ee=W>=0?1:-1,oe,pe;i==="insideStart"?(oe=k+ee*c,pe=$):i==="insideEnd"?(oe=Z-ee*c,pe=!$):i==="end"&&(oe=Z+ee*c,pe=$),pe=W<=0?pe:!pe;var le=Po(R,x,H,oe),ge=Po(R,x,H,oe+(pe?1:-1)*359),ue="M".concat(le.x,",").concat(le.y,`
    A`).concat(H,",").concat(H,",0,1,").concat(pe?0:1,`,
    `).concat(ge.x,",").concat(ge.y),Re=qn(e.id)?hA("recharts-radial-line-"):e.id;return Vt.createElement("text",vT({},r,{dominantBaseline:"central",className:mi("recharts-radial-bar-label",n)}),Vt.createElement("defs",null,Vt.createElement("path",{id:Re,d:ue})),Vt.createElement("textPath",{xlinkHref:"#".concat(Re)},a))},WRe=function(e){var a=e.viewBox,r=e.offset,i=e.position,l=a,c=l.cx,n=l.cy,v=l.innerRadius,R=l.outerRadius,x=l.startAngle,N=l.endAngle,I=(x+N)/2;if(i==="outside"){var k=Po(c,n,R+r,I),Z=k.x,$=k.y;return{x:Z,y:$,textAnchor:Z>=c?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"end"};var H=(v+R)/2,W=Po(c,n,H,I),ee=W.x,oe=W.y;return{x:ee,y:oe,textAnchor:"middle",verticalAnchor:"middle"}},YRe=function(e){var a=e.viewBox,r=e.parentViewBox,i=e.offset,l=e.position,c=a,n=c.x,v=c.y,R=c.width,x=c.height,N=x>=0?1:-1,I=N*i,k=N>0?"end":"start",Z=N>0?"start":"end",$=R>=0?1:-1,H=$*i,W=$>0?"end":"start",ee=$>0?"start":"end";if(l==="top"){var oe={x:n+R/2,y:v-N*i,textAnchor:"middle",verticalAnchor:k};return Zu(Zu({},oe),r?{height:Math.max(v-r.y,0),width:R}:{})}if(l==="bottom"){var pe={x:n+R/2,y:v+x+I,textAnchor:"middle",verticalAnchor:Z};return Zu(Zu({},pe),r?{height:Math.max(r.y+r.height-(v+x),0),width:R}:{})}if(l==="left"){var le={x:n-H,y:v+x/2,textAnchor:W,verticalAnchor:"middle"};return Zu(Zu({},le),r?{width:Math.max(le.x-r.x,0),height:x}:{})}if(l==="right"){var ge={x:n+R+H,y:v+x/2,textAnchor:ee,verticalAnchor:"middle"};return Zu(Zu({},ge),r?{width:Math.max(r.x+r.width-ge.x,0),height:x}:{})}var ue=r?{width:R,height:x}:{};return l==="insideLeft"?Zu({x:n+H,y:v+x/2,textAnchor:ee,verticalAnchor:"middle"},ue):l==="insideRight"?Zu({x:n+R-H,y:v+x/2,textAnchor:W,verticalAnchor:"middle"},ue):l==="insideTop"?Zu({x:n+R/2,y:v+I,textAnchor:"middle",verticalAnchor:Z},ue):l==="insideBottom"?Zu({x:n+R/2,y:v+x-I,textAnchor:"middle",verticalAnchor:k},ue):l==="insideTopLeft"?Zu({x:n+H,y:v+I,textAnchor:ee,verticalAnchor:Z},ue):l==="insideTopRight"?Zu({x:n+R-H,y:v+I,textAnchor:W,verticalAnchor:Z},ue):l==="insideBottomLeft"?Zu({x:n+H,y:v+x-I,textAnchor:ee,verticalAnchor:k},ue):l==="insideBottomRight"?Zu({x:n+R-H,y:v+x-I,textAnchor:W,verticalAnchor:k},ue):_1(l)&&(Tr(l.x)||mv(l.x))&&(Tr(l.y)||mv(l.y))?Zu({x:n+uh(l.x,R),y:v+uh(l.y,x),textAnchor:"end",verticalAnchor:"end"},ue):Zu({x:n+R/2,y:v+x/2,textAnchor:"middle",verticalAnchor:"middle"},ue)},XRe=function(e){return"cx"in e&&Tr(e.cx)};function cc(t){var e=t.offset,a=e===void 0?5:e,r=BRe(t,MRe),i=Zu({offset:a},r),l=i.viewBox,c=i.position,n=i.value,v=i.children,R=i.content,x=i.className,N=x===void 0?"":x,I=i.textBreakAll;if(!l||qn(n)&&qn(v)&&!ie.isValidElement(R)&&!Zn(R))return null;if(ie.isValidElement(R))return ie.cloneElement(R,i);var k;if(Zn(R)){if(k=ie.createElement(R,i),ie.isValidElement(k))return k}else k=HRe(i);var Z=XRe(l),$=yn(i,!0);if(Z&&(c==="insideStart"||c==="insideEnd"||c==="end"))return KRe(i,k,$);var H=Z?WRe(i):YRe(i);return Vt.createElement(Lv,vT({className:mi("recharts-label",N)},$,H,{breakAll:I}),k)}cc.displayName="Label";var tee=function(e){var a=e.cx,r=e.cy,i=e.angle,l=e.startAngle,c=e.endAngle,n=e.r,v=e.radius,R=e.innerRadius,x=e.outerRadius,N=e.x,I=e.y,k=e.top,Z=e.left,$=e.width,H=e.height,W=e.clockWise,ee=e.labelViewBox;if(ee)return ee;if(Tr($)&&Tr(H)){if(Tr(N)&&Tr(I))return{x:N,y:I,width:$,height:H};if(Tr(k)&&Tr(Z))return{x:k,y:Z,width:$,height:H}}return Tr(N)&&Tr(I)?{x:N,y:I,width:0,height:0}:Tr(a)&&Tr(r)?{cx:a,cy:r,startAngle:l||i||0,endAngle:c||i||0,innerRadius:R||0,outerRadius:x||v||n||0,clockWise:W}:e.viewBox?e.viewBox:{}},JRe=function(e,a){return e?e===!0?Vt.createElement(cc,{key:"label-implicit",viewBox:a}):qu(e)?Vt.createElement(cc,{key:"label-implicit",viewBox:a,value:e}):ie.isValidElement(e)?e.type===cc?ie.cloneElement(e,{key:"label-implicit",viewBox:a}):Vt.createElement(cc,{key:"label-implicit",content:e,viewBox:a}):Zn(e)?Vt.createElement(cc,{key:"label-implicit",content:e,viewBox:a}):_1(e)?Vt.createElement(cc,vT({viewBox:a},e,{key:"label-implicit"})):null:null},QRe=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,l=tee(e),c=mh(i,cc).map(function(v,R){return ie.cloneElement(v,{viewBox:a||l,key:"label-".concat(R)})});if(!r)return c;var n=JRe(e.label,a||l);return[n].concat(IRe(c))};cc.parseViewBox=tee;cc.renderCallByParent=QRe;var mD,h9;function eTe(){if(h9)return mD;h9=1;function t(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}return mD=t,mD}var tTe=eTe();const aTe=ss(tTe);function _T(t){"@babel/helpers - typeof";return _T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_T(t)}var rTe=["valueAccessor"],nTe=["data","dataKey","clockWise","id","textBreakAll"];function iTe(t){return uTe(t)||lTe(t)||oTe(t)||sTe()}function sTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oTe(t,e){if(t){if(typeof t=="string")return iI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return iI(t,e)}}function lTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uTe(t){if(Array.isArray(t))return iI(t)}function iI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Ux(){return Ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ux.apply(this,arguments)}function f9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function p9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(a),!0).forEach(function(r){cTe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function cTe(t,e,a){return e=dTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function dTe(t){var e=hTe(t,"string");return _T(e)=="symbol"?e:e+""}function hTe(t,e){if(_T(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(_T(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m9(t,e){if(t==null)return{};var a=fTe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fTe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var pTe=function(e){return Array.isArray(e.value)?aTe(e.value):e.value};function np(t){var e=t.valueAccessor,a=e===void 0?pTe:e,r=m9(t,rTe),i=r.data,l=r.dataKey,c=r.clockWise,n=r.id,v=r.textBreakAll,R=m9(r,nTe);return!i||!i.length?null:Vt.createElement(vi,{className:"recharts-label-list"},i.map(function(x,N){var I=qn(l)?a(x,N):Fo(x&&x.payload,l),k=qn(n)?{}:{id:"".concat(n,"-").concat(N)};return Vt.createElement(cc,Ux({},yn(x,!0),R,k,{parentViewBox:x.parentViewBox,value:I,textBreakAll:v,viewBox:cc.parseViewBox(qn(c)?x:p9(p9({},x),{},{clockWise:c})),key:"label-".concat(N),index:N}))}))}np.displayName="LabelList";function mTe(t,e){return t?t===!0?Vt.createElement(np,{key:"labelList-implicit",data:e}):Vt.isValidElement(t)||Zn(t)?Vt.createElement(np,{key:"labelList-implicit",data:e,content:t}):_1(t)?Vt.createElement(np,Ux({data:e},t,{key:"labelList-implicit"})):null:null}function gTe(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var r=t.children,i=mh(r,np).map(function(c,n){return ie.cloneElement(c,{data:e,key:"labelList-".concat(n)})});if(!a)return i;var l=mTe(t.label,e);return[l].concat(iTe(i))}np.renderCallByParent=gTe;function wT(t){"@babel/helpers - typeof";return wT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wT(t)}function sI(){return sI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},sI.apply(this,arguments)}function g9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function y9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?g9(Object(a),!0).forEach(function(r){yTe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function yTe(t,e,a){return e=ATe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ATe(t){var e=vTe(t,"string");return wT(e)=="symbol"?e:e+""}function vTe(t,e){if(wT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(wT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Te=function(e,a){var r=lh(a-e),i=Math.min(Math.abs(a-e),359.999);return r*i},ab=function(e){var a=e.cx,r=e.cy,i=e.radius,l=e.angle,c=e.sign,n=e.isExternal,v=e.cornerRadius,R=e.cornerIsExternal,x=v*(n?1:-1)+i,N=Math.asin(v/x)/kx,I=R?l:l+c*N,k=Po(a,r,x,I),Z=Po(a,r,i,I),$=R?l-c*N:l,H=Po(a,r,x*Math.cos(N*kx),$);return{center:k,circleTangency:Z,lineTangency:H,theta:N}},aee=function(e){var a=e.cx,r=e.cy,i=e.innerRadius,l=e.outerRadius,c=e.startAngle,n=e.endAngle,v=_Te(c,n),R=c+v,x=Po(a,r,l,c),N=Po(a,r,l,R),I="M ".concat(x.x,",").concat(x.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(v)>180),",").concat(+(c>R),`,
    `).concat(N.x,",").concat(N.y,`
  `);if(i>0){var k=Po(a,r,i,c),Z=Po(a,r,i,R);I+="L ".concat(Z.x,",").concat(Z.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(v)>180),",").concat(+(c<=R),`,
            `).concat(k.x,",").concat(k.y," Z")}else I+="L ".concat(a,",").concat(r," Z");return I},wTe=function(e){var a=e.cx,r=e.cy,i=e.innerRadius,l=e.outerRadius,c=e.cornerRadius,n=e.forceCornerRadius,v=e.cornerIsExternal,R=e.startAngle,x=e.endAngle,N=lh(x-R),I=ab({cx:a,cy:r,radius:l,angle:R,sign:N,cornerRadius:c,cornerIsExternal:v}),k=I.circleTangency,Z=I.lineTangency,$=I.theta,H=ab({cx:a,cy:r,radius:l,angle:x,sign:-N,cornerRadius:c,cornerIsExternal:v}),W=H.circleTangency,ee=H.lineTangency,oe=H.theta,pe=v?Math.abs(R-x):Math.abs(R-x)-$-oe;if(pe<0)return n?"M ".concat(Z.x,",").concat(Z.y,`
        a`).concat(c,",").concat(c,",0,0,1,").concat(c*2,`,0
        a`).concat(c,",").concat(c,",0,0,1,").concat(-c*2,`,0
      `):aee({cx:a,cy:r,innerRadius:i,outerRadius:l,startAngle:R,endAngle:x});var le="M ".concat(Z.x,",").concat(Z.y,`
    A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(pe>180),",").concat(+(N<0),",").concat(W.x,",").concat(W.y,`
    A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(ee.x,",").concat(ee.y,`
  `);if(i>0){var ge=ab({cx:a,cy:r,radius:i,angle:R,sign:N,isExternal:!0,cornerRadius:c,cornerIsExternal:v}),ue=ge.circleTangency,Re=ge.lineTangency,we=ge.theta,Ne=ab({cx:a,cy:r,radius:i,angle:x,sign:-N,isExternal:!0,cornerRadius:c,cornerIsExternal:v}),ne=Ne.circleTangency,_e=Ne.lineTangency,ke=Ne.theta,Pe=v?Math.abs(R-x):Math.abs(R-x)-we-ke;if(Pe<0&&c===0)return"".concat(le,"L").concat(a,",").concat(r,"Z");le+="L".concat(_e.x,",").concat(_e.y,`
      A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(ne.x,",").concat(ne.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Pe>180),",").concat(+(N>0),",").concat(ue.x,",").concat(ue.y,`
      A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(Re.x,",").concat(Re.y,"Z")}else le+="L".concat(a,",").concat(r,"Z");return le},RTe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ree=function(e){var a=y9(y9({},RTe),e),r=a.cx,i=a.cy,l=a.innerRadius,c=a.outerRadius,n=a.cornerRadius,v=a.forceCornerRadius,R=a.cornerIsExternal,x=a.startAngle,N=a.endAngle,I=a.className;if(c<l||x===N)return null;var k=mi("recharts-sector",I),Z=c-l,$=uh(n,Z,0,!0),H;return $>0&&Math.abs(x-N)<360?H=wTe({cx:r,cy:i,innerRadius:l,outerRadius:c,cornerRadius:Math.min($,Z/2),forceCornerRadius:v,cornerIsExternal:R,startAngle:x,endAngle:N}):H=aee({cx:r,cy:i,innerRadius:l,outerRadius:c,startAngle:x,endAngle:N}),Vt.createElement("path",sI({},yn(a,!0),{className:k,d:H,role:"img"}))};function RT(t){"@babel/helpers - typeof";return RT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RT(t)}function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},oI.apply(this,arguments)}function A9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function v9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?A9(Object(a),!0).forEach(function(r){TTe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function TTe(t,e,a){return e=CTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function CTe(t){var e=STe(t,"string");return RT(e)=="symbol"?e:e+""}function STe(t,e){if(RT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(RT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _9={curveBasisClosed:qge,curveBasisOpen:Hge,curveBasis:Zge,curveBumpX:Nge,curveBumpY:Oge,curveLinearClosed:$ge,curveLinear:RP,curveMonotoneX:Kge,curveMonotoneY:Wge,curveNatural:Yge,curveStep:Xge,curveStepAfter:Qge,curveStepBefore:Jge},rb=function(e){return e.x===+e.x&&e.y===+e.y},$w=function(e){return e.x},Kw=function(e){return e.y},bTe=function(e,a){if(Zn(e))return e;var r="curve".concat(_P(e));return(r==="curveMonotone"||r==="curveBump")&&a?_9["".concat(r).concat(a==="vertical"?"Y":"X")]:_9[r]||RP},xTe=function(e){var a=e.type,r=a===void 0?"linear":a,i=e.points,l=i===void 0?[]:i,c=e.baseLine,n=e.layout,v=e.connectNulls,R=v===void 0?!1:v,x=bTe(r,n),N=R?l.filter(function($){return rb($)}):l,I;if(Array.isArray(c)){var k=R?c.filter(function($){return rb($)}):c,Z=N.map(function($,H){return v9(v9({},$),{},{base:k[H]})});return n==="vertical"?I=KS().y(Kw).x1($w).x0(function($){return $.base.x}):I=KS().x($w).y1(Kw).y0(function($){return $.base.y}),I.defined(rb).curve(x),I(Z)}return n==="vertical"&&Tr(c)?I=KS().y(Kw).x1($w).x0(c):Tr(c)?I=KS().x($w).y1(Kw).y0(c):I=tJ().x($w).y(Kw),I.defined(rb).curve(x),I(N)},Yy=function(e){var a=e.className,r=e.points,i=e.path,l=e.pathRef;if((!r||!r.length)&&!i)return null;var c=r&&r.length?xTe(e):i;return Vt.createElement("path",oI({},yn(e,!1),px(e),{className:mi("recharts-curve",a),d:c,ref:l}))},gD={exports:{}},yD,w9;function PTe(){if(w9)return yD;w9=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return yD=t,yD}var AD,R9;function ETe(){if(R9)return AD;R9=1;var t=PTe();function e(){}function a(){}return a.resetWarningCache=e,AD=function(){function r(c,n,v,R,x,N){if(N!==t){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}r.isRequired=r;function i(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:e};return l.PropTypes=l,l},AD}var T9;function NTe(){return T9||(T9=1,gD.exports=ETe()()),gD.exports}var OTe=NTe();const Bs=ss(OTe);var VTe=Object.getOwnPropertyNames,zTe=Object.getOwnPropertySymbols,DTe=Object.prototype.hasOwnProperty;function C9(t,e){return function(r,i,l){return t(r,i,l)&&e(r,i,l)}}function nb(t){return function(a,r,i){if(!a||!r||typeof a!="object"||typeof r!="object")return t(a,r,i);var l=i.cache,c=l.get(a),n=l.get(r);if(c&&n)return c===r&&n===a;l.set(a,r),l.set(r,a);var v=t(a,r,i);return l.delete(a),l.delete(r),v}}function S9(t){return VTe(t).concat(zTe(t))}var MTe=Object.hasOwn||function(t,e){return DTe.call(t,e)};function Yv(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var ITe="__v",LTe="__o",FTe="_owner",b9=Object.getOwnPropertyDescriptor,x9=Object.keys;function kTe(t,e,a){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!a.equals(t[r],e[r],r,r,t,e,a))return!1;return!0}function UTe(t,e){return Yv(t.getTime(),e.getTime())}function BTe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function jTe(t,e){return t===e}function P9(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),l=t.entries(),c,n,v=0;(c=l.next())&&!c.done;){for(var R=e.entries(),x=!1,N=0;(n=R.next())&&!n.done;){if(i[N]){N++;continue}var I=c.value,k=n.value;if(a.equals(I[0],k[0],v,N,t,e,a)&&a.equals(I[1],k[1],I[0],k[0],t,e,a)){x=i[N]=!0;break}N++}if(!x)return!1;v++}return!0}var GTe=Yv;function ZTe(t,e,a){var r=x9(t),i=r.length;if(x9(e).length!==i)return!1;for(;i-- >0;)if(!nee(t,e,a,r[i]))return!1;return!0}function Ww(t,e,a){var r=S9(t),i=r.length;if(S9(e).length!==i)return!1;for(var l,c,n;i-- >0;)if(l=r[i],!nee(t,e,a,l)||(c=b9(t,l),n=b9(e,l),(c||n)&&(!c||!n||c.configurable!==n.configurable||c.enumerable!==n.enumerable||c.writable!==n.writable)))return!1;return!0}function qTe(t,e){return Yv(t.valueOf(),e.valueOf())}function HTe(t,e){return t.source===e.source&&t.flags===e.flags}function E9(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),l=t.values(),c,n;(c=l.next())&&!c.done;){for(var v=e.values(),R=!1,x=0;(n=v.next())&&!n.done;){if(!i[x]&&a.equals(c.value,n.value,c.value,n.value,t,e,a)){R=i[x]=!0;break}x++}if(!R)return!1}return!0}function $Te(t,e){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(t[a]!==e[a])return!1;return!0}function KTe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function nee(t,e,a,r){return(r===FTe||r===LTe||r===ITe)&&(t.$$typeof||e.$$typeof)?!0:MTe(e,r)&&a.equals(t[r],e[r],r,r,t,e,a)}var WTe="[object Arguments]",YTe="[object Boolean]",XTe="[object Date]",JTe="[object Error]",QTe="[object Map]",eCe="[object Number]",tCe="[object Object]",aCe="[object RegExp]",rCe="[object Set]",nCe="[object String]",iCe="[object URL]",sCe=Array.isArray,N9=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,O9=Object.assign,oCe=Object.prototype.toString.call.bind(Object.prototype.toString);function lCe(t){var e=t.areArraysEqual,a=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,l=t.areMapsEqual,c=t.areNumbersEqual,n=t.areObjectsEqual,v=t.arePrimitiveWrappersEqual,R=t.areRegExpsEqual,x=t.areSetsEqual,N=t.areTypedArraysEqual,I=t.areUrlsEqual;return function(Z,$,H){if(Z===$)return!0;if(Z==null||$==null)return!1;var W=typeof Z;if(W!==typeof $)return!1;if(W!=="object")return W==="number"?c(Z,$,H):W==="function"?i(Z,$,H):!1;var ee=Z.constructor;if(ee!==$.constructor)return!1;if(ee===Object)return n(Z,$,H);if(sCe(Z))return e(Z,$,H);if(N9!=null&&N9(Z))return N(Z,$,H);if(ee===Date)return a(Z,$,H);if(ee===RegExp)return R(Z,$,H);if(ee===Map)return l(Z,$,H);if(ee===Set)return x(Z,$,H);var oe=oCe(Z);return oe===XTe?a(Z,$,H):oe===aCe?R(Z,$,H):oe===QTe?l(Z,$,H):oe===rCe?x(Z,$,H):oe===tCe?typeof Z.then!="function"&&typeof $.then!="function"&&n(Z,$,H):oe===iCe?I(Z,$,H):oe===JTe?r(Z,$,H):oe===WTe?n(Z,$,H):oe===YTe||oe===eCe||oe===nCe?v(Z,$,H):!1}}function uCe(t){var e=t.circular,a=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Ww:kTe,areDatesEqual:UTe,areErrorsEqual:BTe,areFunctionsEqual:jTe,areMapsEqual:r?C9(P9,Ww):P9,areNumbersEqual:GTe,areObjectsEqual:r?Ww:ZTe,arePrimitiveWrappersEqual:qTe,areRegExpsEqual:HTe,areSetsEqual:r?C9(E9,Ww):E9,areTypedArraysEqual:r?Ww:$Te,areUrlsEqual:KTe};if(a&&(i=O9({},i,a(i))),e){var l=nb(i.areArraysEqual),c=nb(i.areMapsEqual),n=nb(i.areObjectsEqual),v=nb(i.areSetsEqual);i=O9({},i,{areArraysEqual:l,areMapsEqual:c,areObjectsEqual:n,areSetsEqual:v})}return i}function cCe(t){return function(e,a,r,i,l,c,n){return t(e,a,n)}}function dCe(t){var e=t.circular,a=t.comparator,r=t.createState,i=t.equals,l=t.strict;if(r)return function(v,R){var x=r(),N=x.cache,I=N===void 0?e?new WeakMap:void 0:N,k=x.meta;return a(v,R,{cache:I,equals:i,meta:k,strict:l})};if(e)return function(v,R){return a(v,R,{cache:new WeakMap,equals:i,meta:void 0,strict:l})};var c={cache:void 0,equals:i,meta:void 0,strict:l};return function(v,R){return a(v,R,c)}}var hCe=mA();mA({strict:!0});mA({circular:!0});mA({circular:!0,strict:!0});mA({createInternalComparator:function(){return Yv}});mA({strict:!0,createInternalComparator:function(){return Yv}});mA({circular:!0,createInternalComparator:function(){return Yv}});mA({circular:!0,createInternalComparator:function(){return Yv},strict:!0});function mA(t){t===void 0&&(t={});var e=t.circular,a=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,l=t.strict,c=l===void 0?!1:l,n=uCe(t),v=lCe(n),R=r?r(v):cCe(v);return dCe({circular:a,comparator:v,createState:i,equals:R,strict:c})}function fCe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function V9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function i(l){a<0&&(a=l),l-a>e?(t(l),a=-1):fCe(i)};requestAnimationFrame(r)}function lI(t){"@babel/helpers - typeof";return lI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lI(t)}function pCe(t){return ACe(t)||yCe(t)||gCe(t)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gCe(t,e){if(t){if(typeof t=="string")return z9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return z9(t,e)}}function z9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function yCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ACe(t){if(Array.isArray(t))return t}function vCe(){var t={},e=function(){return null},a=!1,r=function i(l){if(!a){if(Array.isArray(l)){if(!l.length)return;var c=l,n=pCe(c),v=n[0],R=n.slice(1);if(typeof v=="number"){V9(i.bind(null,R),v);return}i(v),V9(i.bind(null,R));return}lI(l)==="object"&&(t=l,e(t)),typeof l=="function"&&l()}};return{stop:function(){a=!0},start:function(l){a=!1,r(l)},subscribe:function(l){return e=l,function(){e=function(){return null}}}}}function TT(t){"@babel/helpers - typeof";return TT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TT(t)}function D9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function M9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(a),!0).forEach(function(r){iee(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function iee(t,e,a){return e=_Ce(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _Ce(t){var e=wCe(t,"string");return TT(e)==="symbol"?e:String(e)}function wCe(t,e){if(TT(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(TT(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RCe=function(e,a){return[Object.keys(e),Object.keys(a)].reduce(function(r,i){return r.filter(function(l){return i.includes(l)})})},TCe=function(e){return e},CCe=function(e){return e.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},bR=function(e,a){return Object.keys(a).reduce(function(r,i){return M9(M9({},r),{},iee({},i,e(i,a[i])))},{})},I9=function(e,a,r){return e.map(function(i){return"".concat(CCe(i)," ").concat(a,"ms ").concat(r)}).join(",")};function SCe(t,e){return PCe(t)||xCe(t,e)||see(t,e)||bCe()}function bCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xCe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function PCe(t){if(Array.isArray(t))return t}function ECe(t){return VCe(t)||OCe(t)||see(t)||NCe()}function NCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function see(t,e){if(t){if(typeof t=="string")return uI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return uI(t,e)}}function OCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VCe(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var Bx=1e-4,oee=function(e,a){return[0,3*e,3*a-6*e,3*e-3*a+1]},lee=function(e,a){return e.map(function(r,i){return r*Math.pow(a,i)}).reduce(function(r,i){return r+i})},L9=function(e,a){return function(r){var i=oee(e,a);return lee(i,r)}},zCe=function(e,a){return function(r){var i=oee(e,a),l=[].concat(ECe(i.map(function(c,n){return c*n}).slice(1)),[0]);return lee(l,r)}},F9=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var i=a[0],l=a[1],c=a[2],n=a[3];if(a.length===1)switch(a[0]){case"linear":i=0,l=0,c=1,n=1;break;case"ease":i=.25,l=.1,c=.25,n=1;break;case"ease-in":i=.42,l=0,c=1,n=1;break;case"ease-out":i=.42,l=0,c=.58,n=1;break;case"ease-in-out":i=0,l=0,c=.58,n=1;break;default:{var v=a[0].split("(");if(v[0]==="cubic-bezier"&&v[1].split(")")[0].split(",").length===4){var R=v[1].split(")")[0].split(",").map(function(H){return parseFloat(H)}),x=SCe(R,4);i=x[0],l=x[1],c=x[2],n=x[3]}}}var N=L9(i,c),I=L9(l,n),k=zCe(i,c),Z=function(W){return W>1?1:W<0?0:W},$=function(W){for(var ee=W>1?1:W,oe=ee,pe=0;pe<8;++pe){var le=N(oe)-ee,ge=k(oe);if(Math.abs(le-ee)<Bx||ge<Bx)return I(oe);oe=Z(oe-le/ge)}return I(oe)};return $.isStepper=!1,$},DCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.stiff,r=a===void 0?100:a,i=e.damping,l=i===void 0?8:i,c=e.dt,n=c===void 0?17:c,v=function(x,N,I){var k=-(x-N)*r,Z=I*l,$=I+(k-Z)*n/1e3,H=I*n/1e3+x;return Math.abs(H-N)<Bx&&Math.abs($)<Bx?[N,0]:[H,$]};return v.isStepper=!0,v.dt=n,v},MCe=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var i=a[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return F9(i);case"spring":return DCe();default:if(i.split("(")[0]==="cubic-bezier")return F9(i)}return typeof i=="function"?i:null};function CT(t){"@babel/helpers - typeof";return CT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CT(t)}function k9(t){return FCe(t)||LCe(t)||uee(t)||ICe()}function ICe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FCe(t){if(Array.isArray(t))return dI(t)}function U9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Mc(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(a),!0).forEach(function(r){cI(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function cI(t,e,a){return e=kCe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kCe(t){var e=UCe(t,"string");return CT(e)==="symbol"?e:String(e)}function UCe(t,e){if(CT(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(CT(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BCe(t,e){return ZCe(t)||GCe(t,e)||uee(t,e)||jCe()}function jCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uee(t,e){if(t){if(typeof t=="string")return dI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return dI(t,e)}}function dI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function GCe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function ZCe(t){if(Array.isArray(t))return t}var jx=function(e,a,r){return e+(a-e)*r},hI=function(e){var a=e.from,r=e.to;return a!==r},qCe=function t(e,a,r){var i=bR(function(l,c){if(hI(c)){var n=e(c.from,c.to,c.velocity),v=BCe(n,2),R=v[0],x=v[1];return Mc(Mc({},c),{},{from:R,velocity:x})}return c},a);return r<1?bR(function(l,c){return hI(c)?Mc(Mc({},c),{},{velocity:jx(c.velocity,i[l].velocity,r),from:jx(c.from,i[l].from,r)}):c},a):t(e,i,r-1)};const HCe=function(t,e,a,r,i){var l=RCe(t,e),c=l.reduce(function(H,W){return Mc(Mc({},H),{},cI({},W,[t[W],e[W]]))},{}),n=l.reduce(function(H,W){return Mc(Mc({},H),{},cI({},W,{from:t[W],velocity:0,to:e[W]}))},{}),v=-1,R,x,N=function(){return null},I=function(){return bR(function(W,ee){return ee.from},n)},k=function(){return!Object.values(n).filter(hI).length},Z=function(W){R||(R=W);var ee=W-R,oe=ee/a.dt;n=qCe(a,n,oe),i(Mc(Mc(Mc({},t),e),I())),R=W,k()||(v=requestAnimationFrame(N))},$=function(W){x||(x=W);var ee=(W-x)/r,oe=bR(function(le,ge){return jx.apply(void 0,k9(ge).concat([a(ee)]))},c);if(i(Mc(Mc(Mc({},t),e),oe)),ee<1)v=requestAnimationFrame(N);else{var pe=bR(function(le,ge){return jx.apply(void 0,k9(ge).concat([a(1)]))},c);i(Mc(Mc(Mc({},t),e),pe))}};return N=a.isStepper?Z:$,function(){return requestAnimationFrame(N),function(){cancelAnimationFrame(v)}}};function j_(t){"@babel/helpers - typeof";return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j_(t)}var $Ce=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function KCe(t,e){if(t==null)return{};var a=WCe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function WCe(t,e){if(t==null)return{};var a={},r=Object.keys(t),i,l;for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&(a[i]=t[i]);return a}function vD(t){return QCe(t)||JCe(t)||XCe(t)||YCe()}function YCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XCe(t,e){if(t){if(typeof t=="string")return fI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return fI(t,e)}}function JCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QCe(t){if(Array.isArray(t))return fI(t)}function fI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function B9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Ip(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(a),!0).forEach(function(r){mR(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mR(t,e,a){return e=cee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function eSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tSe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cee(r.key),r)}}function aSe(t,e,a){return e&&tSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cee(t){var e=rSe(t,"string");return j_(e)==="symbol"?e:String(e)}function rSe(t,e){if(j_(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(j_(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pI(t,e)}function pI(t,e){return pI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pI(t,e)}function iSe(t){var e=sSe();return function(){var r=Gx(t),i;if(e){var l=Gx(this).constructor;i=Reflect.construct(r,arguments,l)}else i=r.apply(this,arguments);return mI(this,i)}}function mI(t,e){if(e&&(j_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gI(t)}function gI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gx(t){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Gx(t)}var sp=function(t){nSe(a,t);var e=iSe(a);function a(r,i){var l;eSe(this,a),l=e.call(this,r,i);var c=l.props,n=c.isActive,v=c.attributeName,R=c.from,x=c.to,N=c.steps,I=c.children,k=c.duration;if(l.handleStyleChange=l.handleStyleChange.bind(gI(l)),l.changeStyle=l.changeStyle.bind(gI(l)),!n||k<=0)return l.state={style:{}},typeof I=="function"&&(l.state={style:x}),mI(l);if(N&&N.length)l.state={style:N[0].style};else if(R){if(typeof I=="function")return l.state={style:R},mI(l);l.state={style:v?mR({},v,R):R}}else l.state={style:{}};return l}return aSe(a,[{key:"componentDidMount",value:function(){var i=this.props,l=i.isActive,c=i.canBegin;this.mounted=!0,!(!l||!c)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var l=this.props,c=l.isActive,n=l.canBegin,v=l.attributeName,R=l.shouldReAnimate,x=l.to,N=l.from,I=this.state.style;if(n){if(!c){var k={style:v?mR({},v,x):x};this.state&&I&&(v&&I[v]!==x||!v&&I!==x)&&this.setState(k);return}if(!(hCe(i.to,x)&&i.canBegin&&i.isActive)){var Z=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var $=Z||R?N:i.to;if(this.state&&I){var H={style:v?mR({},v,$):$};(v&&I[v]!==$||!v&&I!==$)&&this.setState(H)}this.runAnimation(Ip(Ip({},this.props),{},{from:$,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var l=this,c=i.from,n=i.to,v=i.duration,R=i.easing,x=i.begin,N=i.onAnimationEnd,I=i.onAnimationStart,k=HCe(c,n,MCe(R),v,this.changeStyle),Z=function(){l.stopJSAnimation=k()};this.manager.start([I,x,Z,v,N])}},{key:"runStepAnimation",value:function(i){var l=this,c=i.steps,n=i.begin,v=i.onAnimationStart,R=c[0],x=R.style,N=R.duration,I=N===void 0?0:N,k=function($,H,W){if(W===0)return $;var ee=H.duration,oe=H.easing,pe=oe===void 0?"ease":oe,le=H.style,ge=H.properties,ue=H.onAnimationEnd,Re=W>0?c[W-1]:H,we=ge||Object.keys(le);if(typeof pe=="function"||pe==="spring")return[].concat(vD($),[l.runJSAnimation.bind(l,{from:Re.style,to:le,duration:ee,easing:pe}),ee]);var Ne=I9(we,ee,pe),ne=Ip(Ip(Ip({},Re.style),le),{},{transition:Ne});return[].concat(vD($),[ne,ee,ue]).filter(TCe)};return this.manager.start([v].concat(vD(c.reduce(k,[x,Math.max(I,n)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=vCe());var l=i.begin,c=i.duration,n=i.attributeName,v=i.to,R=i.easing,x=i.onAnimationStart,N=i.onAnimationEnd,I=i.steps,k=i.children,Z=this.manager;if(this.unSubscribe=Z.subscribe(this.handleStyleChange),typeof R=="function"||typeof k=="function"||R==="spring"){this.runJSAnimation(i);return}if(I.length>1){this.runStepAnimation(i);return}var $=n?mR({},n,v):v,H=I9(Object.keys($),c,R);Z.start([x,l,Ip(Ip({},$),{},{transition:H}),c,N])}},{key:"render",value:function(){var i=this.props,l=i.children;i.begin;var c=i.duration;i.attributeName,i.easing;var n=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var v=KCe(i,$Ce),R=ie.Children.count(l),x=this.state.style;if(typeof l=="function")return l(x);if(!n||R===0||c<=0)return l;var N=function(k){var Z=k.props,$=Z.style,H=$===void 0?{}:$,W=Z.className,ee=ie.cloneElement(k,Ip(Ip({},v),{},{style:Ip(Ip({},H),x),className:W}));return ee};return R===1?N(ie.Children.only(l)):Vt.createElement("div",null,ie.Children.map(l,function(I){return N(I)}))}}]),a}(ie.PureComponent);sp.displayName="Animate";sp.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};sp.propTypes={from:Bs.oneOfType([Bs.object,Bs.string]),to:Bs.oneOfType([Bs.object,Bs.string]),attributeName:Bs.string,duration:Bs.number,begin:Bs.number,easing:Bs.oneOfType([Bs.string,Bs.func]),steps:Bs.arrayOf(Bs.shape({duration:Bs.number.isRequired,style:Bs.object.isRequired,easing:Bs.oneOfType([Bs.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Bs.func]),properties:Bs.arrayOf("string"),onAnimationEnd:Bs.func})),children:Bs.oneOfType([Bs.node,Bs.func]),isActive:Bs.bool,canBegin:Bs.bool,onAnimationEnd:Bs.func,shouldReAnimate:Bs.bool,onAnimationStart:Bs.func,onAnimationReStart:Bs.func};function ST(t){"@babel/helpers - typeof";return ST=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ST(t)}function Zx(){return Zx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Zx.apply(this,arguments)}function oSe(t,e){return dSe(t)||cSe(t,e)||uSe(t,e)||lSe()}function lSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uSe(t,e){if(t){if(typeof t=="string")return j9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j9(t,e)}}function j9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function cSe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function dSe(t){if(Array.isArray(t))return t}function G9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Z9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?G9(Object(a),!0).forEach(function(r){hSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function hSe(t,e,a){return e=fSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function fSe(t){var e=pSe(t,"string");return ST(e)=="symbol"?e:e+""}function pSe(t,e){if(ST(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ST(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q9=function(e,a,r,i,l){var c=Math.min(Math.abs(r)/2,Math.abs(i)/2),n=i>=0?1:-1,v=r>=0?1:-1,R=i>=0&&r>=0||i<0&&r<0?1:0,x;if(c>0&&l instanceof Array){for(var N=[0,0,0,0],I=0,k=4;I<k;I++)N[I]=l[I]>c?c:l[I];x="M".concat(e,",").concat(a+n*N[0]),N[0]>0&&(x+="A ".concat(N[0],",").concat(N[0],",0,0,").concat(R,",").concat(e+v*N[0],",").concat(a)),x+="L ".concat(e+r-v*N[1],",").concat(a),N[1]>0&&(x+="A ".concat(N[1],",").concat(N[1],",0,0,").concat(R,`,
        `).concat(e+r,",").concat(a+n*N[1])),x+="L ".concat(e+r,",").concat(a+i-n*N[2]),N[2]>0&&(x+="A ".concat(N[2],",").concat(N[2],",0,0,").concat(R,`,
        `).concat(e+r-v*N[2],",").concat(a+i)),x+="L ".concat(e+v*N[3],",").concat(a+i),N[3]>0&&(x+="A ".concat(N[3],",").concat(N[3],",0,0,").concat(R,`,
        `).concat(e,",").concat(a+i-n*N[3])),x+="Z"}else if(c>0&&l===+l&&l>0){var Z=Math.min(c,l);x="M ".concat(e,",").concat(a+n*Z,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(R,",").concat(e+v*Z,",").concat(a,`
            L `).concat(e+r-v*Z,",").concat(a,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(R,",").concat(e+r,",").concat(a+n*Z,`
            L `).concat(e+r,",").concat(a+i-n*Z,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(R,",").concat(e+r-v*Z,",").concat(a+i,`
            L `).concat(e+v*Z,",").concat(a+i,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(R,",").concat(e,",").concat(a+i-n*Z," Z")}else x="M ".concat(e,",").concat(a," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return x},mSe=function(e,a){if(!e||!a)return!1;var r=e.x,i=e.y,l=a.x,c=a.y,n=a.width,v=a.height;if(Math.abs(n)>0&&Math.abs(v)>0){var R=Math.min(l,l+n),x=Math.max(l,l+n),N=Math.min(c,c+v),I=Math.max(c,c+v);return r>=R&&r<=x&&i>=N&&i<=I}return!1},gSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},I4=function(e){var a=Z9(Z9({},gSe),e),r=ie.useRef(),i=ie.useState(-1),l=oSe(i,2),c=l[0],n=l[1];ie.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var pe=r.current.getTotalLength();pe&&n(pe)}catch{}},[]);var v=a.x,R=a.y,x=a.width,N=a.height,I=a.radius,k=a.className,Z=a.animationEasing,$=a.animationDuration,H=a.animationBegin,W=a.isAnimationActive,ee=a.isUpdateAnimationActive;if(v!==+v||R!==+R||x!==+x||N!==+N||x===0||N===0)return null;var oe=mi("recharts-rectangle",k);return ee?Vt.createElement(sp,{canBegin:c>0,from:{width:x,height:N,x:v,y:R},to:{width:x,height:N,x:v,y:R},duration:$,animationEasing:Z,isActive:ee},function(pe){var le=pe.width,ge=pe.height,ue=pe.x,Re=pe.y;return Vt.createElement(sp,{canBegin:c>0,from:"0px ".concat(c===-1?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:H,duration:$,isActive:W,easing:Z},Vt.createElement("path",Zx({},yn(a,!0),{className:oe,d:q9(ue,Re,le,ge,I),ref:r})))}):Vt.createElement("path",Zx({},yn(a,!0),{className:oe,d:q9(v,R,x,N,I)}))},ySe=["points","className","baseLinePoints","connectNulls"];function a_(){return a_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},a_.apply(this,arguments)}function ASe(t,e){if(t==null)return{};var a=vSe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function H9(t){return TSe(t)||RSe(t)||wSe(t)||_Se()}function _Se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wSe(t,e){if(t){if(typeof t=="string")return yI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return yI(t,e)}}function RSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TSe(t){if(Array.isArray(t))return yI(t)}function yI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var $9=function(e){return e&&e.x===+e.x&&e.y===+e.y},CSe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){$9(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),$9(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},xR=function(e,a){var r=CSe(e);a&&(r=[r.reduce(function(l,c){return[].concat(H9(l),H9(c))},[])]);var i=r.map(function(l){return l.reduce(function(c,n,v){return"".concat(c).concat(v===0?"M":"L").concat(n.x,",").concat(n.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},SSe=function(e,a,r){var i=xR(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(xR(a.reverse(),r).slice(1))},bSe=function(e){var a=e.points,r=e.className,i=e.baseLinePoints,l=e.connectNulls,c=ASe(e,ySe);if(!a||!a.length)return null;var n=mi("recharts-polygon",r);if(i&&i.length){var v=c.stroke&&c.stroke!=="none",R=SSe(a,i,l);return Vt.createElement("g",{className:n},Vt.createElement("path",a_({},yn(c,!0),{fill:R.slice(-1)==="Z"?c.fill:"none",stroke:"none",d:R})),v?Vt.createElement("path",a_({},yn(c,!0),{fill:"none",d:xR(a,l)})):null,v?Vt.createElement("path",a_({},yn(c,!0),{fill:"none",d:xR(i,l)})):null)}var x=xR(a,l);return Vt.createElement("path",a_({},yn(c,!0),{fill:x.slice(-1)==="Z"?c.fill:"none",className:n,d:x}))};function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},AI.apply(this,arguments)}var wC=function(e){var a=e.cx,r=e.cy,i=e.r,l=e.className,c=mi("recharts-dot",l);return a===+a&&r===+r&&i===+i?Vt.createElement("circle",AI({},yn(e,!1),px(e),{className:c,cx:a,cy:r,r:i})):null};function bT(t){"@babel/helpers - typeof";return bT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bT(t)}var xSe=["x","y","top","left","width","height","className"];function vI(){return vI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vI.apply(this,arguments)}function K9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function PSe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?K9(Object(a),!0).forEach(function(r){ESe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):K9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ESe(t,e,a){return e=NSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function NSe(t){var e=OSe(t,"string");return bT(e)=="symbol"?e:e+""}function OSe(t,e){if(bT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(bT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VSe(t,e){if(t==null)return{};var a=zSe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var DSe=function(e,a,r,i,l,c){return"M".concat(e,",").concat(l,"v").concat(i,"M").concat(c,",").concat(a,"h").concat(r)},MSe=function(e){var a=e.x,r=a===void 0?0:a,i=e.y,l=i===void 0?0:i,c=e.top,n=c===void 0?0:c,v=e.left,R=v===void 0?0:v,x=e.width,N=x===void 0?0:x,I=e.height,k=I===void 0?0:I,Z=e.className,$=VSe(e,xSe),H=PSe({x:r,y:l,top:n,left:R,width:N,height:k},$);return!Tr(r)||!Tr(l)||!Tr(N)||!Tr(k)||!Tr(n)||!Tr(R)?null:Vt.createElement("path",vI({},yn(H,!0),{className:mi("recharts-cross",Z),d:DSe(r,l,N,k,n,R)}))},_D,W9;function ISe(){if(W9)return _D;W9=1;var t=DP(),e=SQ(),a=Qm();function r(i,l){return i&&i.length?t(i,a(l,2),e):void 0}return _D=r,_D}var LSe=ISe();const FSe=ss(LSe);var wD,Y9;function kSe(){if(Y9)return wD;Y9=1;var t=DP(),e=Qm(),a=bQ();function r(i,l){return i&&i.length?t(i,e(l,2),a):void 0}return wD=r,wD}var USe=kSe();const BSe=ss(USe);var jSe=["cx","cy","angle","ticks","axisLine"],GSe=["ticks","tick","angle","tickFormatter","stroke"];function G_(t){"@babel/helpers - typeof";return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G_(t)}function PR(){return PR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},PR.apply(this,arguments)}function X9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function av(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X9(Object(a),!0).forEach(function(r){FP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function J9(t,e){if(t==null)return{};var a=ZSe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ZSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function qSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hee(r.key),r)}}function HSe(t,e,a){return e&&Q9(t.prototype,e),a&&Q9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Se(t,e,a){return e=qx(e),KSe(t,dee()?Reflect.construct(e,a||[],qx(t).constructor):e.apply(t,a))}function KSe(t,e){if(e&&(G_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WSe(t)}function WSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dee=function(){return!!t})()}function qx(t){return qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qx(t)}function YSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_I(t,e)}function _I(t,e){return _I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_I(t,e)}function FP(t,e,a){return e=hee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function hee(t){var e=XSe(t,"string");return G_(e)=="symbol"?e:e+""}function XSe(t,e){if(G_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(G_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kP=function(t){function e(){return qSe(this,e),$Se(this,e,arguments)}return YSe(e,t),HSe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,l=this.props,c=l.angle,n=l.cx,v=l.cy;return Po(n,v,i,c)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.angle,n=r.ticks,v=FSe(n,function(x){return x.coordinate||0}),R=BSe(n,function(x){return x.coordinate||0});return{cx:i,cy:l,startAngle:c,endAngle:c,innerRadius:R.coordinate||0,outerRadius:v.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.angle,n=r.ticks,v=r.axisLine,R=J9(r,jSe),x=n.reduce(function(Z,$){return[Math.min(Z[0],$.coordinate),Math.max(Z[1],$.coordinate)]},[1/0,-1/0]),N=Po(i,l,x[0],c),I=Po(i,l,x[1],c),k=av(av(av({},yn(R,!1)),{},{fill:"none"},yn(v,!1)),{},{x1:N.x,y1:N.y,x2:I.x,y2:I.y});return Vt.createElement("line",PR({className:"recharts-polar-radius-axis-line"},k))}},{key:"renderTicks",value:function(){var r=this,i=this.props,l=i.ticks,c=i.tick,n=i.angle,v=i.tickFormatter,R=i.stroke,x=J9(i,GSe),N=this.getTickTextAnchor(),I=yn(x,!1),k=yn(c,!1),Z=l.map(function($,H){var W=r.getTickValueCoord($),ee=av(av(av(av({textAnchor:N,transform:"rotate(".concat(90-n,", ").concat(W.x,", ").concat(W.y,")")},I),{},{stroke:"none",fill:R},k),{},{index:H},W),{},{payload:$});return Vt.createElement(vi,PR({className:mi("recharts-polar-radius-axis-tick",eee(c)),key:"tick-".concat($.coordinate)},tA(r.props,$,H)),e.renderTickItem(c,ee,v?v($.value,H):$.value))});return Vt.createElement(vi,{className:"recharts-polar-radius-axis-ticks"},Z)}},{key:"render",value:function(){var r=this.props,i=r.ticks,l=r.axisLine,c=r.tick;return!i||!i.length?null:Vt.createElement(vi,{className:mi("recharts-polar-radius-axis",this.props.className)},l&&this.renderAxisLine(),c&&this.renderTicks(),cc.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Vt.isValidElement(r)?c=Vt.cloneElement(r,i):Zn(r)?c=r(i):c=Vt.createElement(Lv,PR({},i,{className:"recharts-polar-radius-axis-tick-value"}),l),c}}])}(ie.PureComponent);FP(kP,"displayName","PolarRadiusAxis");FP(kP,"axisType","radiusAxis");FP(kP,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Z_(t){"@babel/helpers - typeof";return Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z_(t)}function uv(){return uv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},uv.apply(this,arguments)}function eZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function rv(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?eZ(Object(a),!0).forEach(function(r){UP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):eZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function JSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pee(r.key),r)}}function QSe(t,e,a){return e&&tZ(t.prototype,e),a&&tZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function ebe(t,e,a){return e=Hx(e),tbe(t,fee()?Reflect.construct(e,a||[],Hx(t).constructor):e.apply(t,a))}function tbe(t,e){if(e&&(Z_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return abe(t)}function abe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fee=function(){return!!t})()}function Hx(t){return Hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Hx(t)}function rbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wI(t,e)}function wI(t,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wI(t,e)}function UP(t,e,a){return e=pee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pee(t){var e=nbe(t,"string");return Z_(e)=="symbol"?e:e+""}function nbe(t,e){if(Z_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Z_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ibe=Math.PI/180,sbe=1e-5,BP=function(t){function e(){return JSe(this,e),ebe(this,e,arguments)}return rbe(e,t),QSe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,l=i.cx,c=i.cy,n=i.radius,v=i.orientation,R=i.tickSize,x=R||8,N=Po(l,c,n,r.coordinate),I=Po(l,c,n+(v==="inner"?-1:1)*x,r.coordinate);return{x1:N.x,y1:N.y,x2:I.x,y2:I.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,l=Math.cos(-r.coordinate*ibe),c;return l>sbe?c=i==="outer"?"start":"end":l<-1e-5?c=i==="outer"?"end":"start":c="middle",c}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.radius,n=r.axisLine,v=r.axisLineType,R=rv(rv({},yn(this.props,!1)),{},{fill:"none"},yn(n,!1));if(v==="circle")return Vt.createElement(wC,uv({className:"recharts-polar-angle-axis-line"},R,{cx:i,cy:l,r:c}));var x=this.props.ticks,N=x.map(function(I){return Po(i,l,c,I.coordinate)});return Vt.createElement(bSe,uv({className:"recharts-polar-angle-axis-line"},R,{points:N}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,l=i.ticks,c=i.tick,n=i.tickLine,v=i.tickFormatter,R=i.stroke,x=yn(this.props,!1),N=yn(c,!1),I=rv(rv({},x),{},{fill:"none"},yn(n,!1)),k=l.map(function(Z,$){var H=r.getTickLineCoord(Z),W=r.getTickTextAnchor(Z),ee=rv(rv(rv({textAnchor:W},x),{},{stroke:"none",fill:R},N),{},{index:$,payload:Z,x:H.x2,y:H.y2});return Vt.createElement(vi,uv({className:mi("recharts-polar-angle-axis-tick",eee(c)),key:"tick-".concat(Z.coordinate)},tA(r.props,Z,$)),n&&Vt.createElement("line",uv({className:"recharts-polar-angle-axis-tick-line"},I,H)),c&&e.renderTickItem(c,ee,v?v(Z.value,$):Z.value))});return Vt.createElement(vi,{className:"recharts-polar-angle-axis-ticks"},k)}},{key:"render",value:function(){var r=this.props,i=r.ticks,l=r.radius,c=r.axisLine;return l<=0||!i||!i.length?null:Vt.createElement(vi,{className:mi("recharts-polar-angle-axis",this.props.className)},c&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Vt.isValidElement(r)?c=Vt.cloneElement(r,i):Zn(r)?c=r(i):c=Vt.createElement(Lv,uv({},i,{className:"recharts-polar-angle-axis-tick-value"}),l),c}}])}(ie.PureComponent);UP(BP,"displayName","PolarAngleAxis");UP(BP,"axisType","angleAxis");UP(BP,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var RD,aZ;function obe(){if(aZ)return RD;aZ=1;var t=CJ(),e=t(Object.getPrototypeOf,Object);return RD=e,RD}var TD,rZ;function lbe(){if(rZ)return TD;rZ=1;var t=jg(),e=obe(),a=Gg(),r="[object Object]",i=Function.prototype,l=Object.prototype,c=i.toString,n=l.hasOwnProperty,v=c.call(Object);function R(x){if(!a(x)||t(x)!=r)return!1;var N=e(x);if(N===null)return!0;var I=n.call(N,"constructor")&&N.constructor;return typeof I=="function"&&I instanceof I&&c.call(I)==v}return TD=R,TD}var ube=lbe();const cbe=ss(ube);var CD,nZ;function dbe(){if(nZ)return CD;nZ=1;var t=jg(),e=Gg(),a="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==a}return CD=r,CD}var hbe=dbe();const fbe=ss(hbe);function xT(t){"@babel/helpers - typeof";return xT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xT(t)}function $x(){return $x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$x.apply(this,arguments)}function pbe(t,e){return Abe(t)||ybe(t,e)||gbe(t,e)||mbe()}function mbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gbe(t,e){if(t){if(typeof t=="string")return iZ(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return iZ(t,e)}}function iZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ybe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function Abe(t){if(Array.isArray(t))return t}function sZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function oZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?sZ(Object(a),!0).forEach(function(r){vbe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):sZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function vbe(t,e,a){return e=_be(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _be(t){var e=wbe(t,"string");return xT(e)=="symbol"?e:e+""}function wbe(t,e){if(xT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(xT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lZ=function(e,a,r,i,l){var c=r-i,n;return n="M ".concat(e,",").concat(a),n+="L ".concat(e+r,",").concat(a),n+="L ".concat(e+r-c/2,",").concat(a+l),n+="L ".concat(e+r-c/2-i,",").concat(a+l),n+="L ".concat(e,",").concat(a," Z"),n},Rbe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Tbe=function(e){var a=oZ(oZ({},Rbe),e),r=ie.useRef(),i=ie.useState(-1),l=pbe(i,2),c=l[0],n=l[1];ie.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var oe=r.current.getTotalLength();oe&&n(oe)}catch{}},[]);var v=a.x,R=a.y,x=a.upperWidth,N=a.lowerWidth,I=a.height,k=a.className,Z=a.animationEasing,$=a.animationDuration,H=a.animationBegin,W=a.isUpdateAnimationActive;if(v!==+v||R!==+R||x!==+x||N!==+N||I!==+I||x===0&&N===0||I===0)return null;var ee=mi("recharts-trapezoid",k);return W?Vt.createElement(sp,{canBegin:c>0,from:{upperWidth:0,lowerWidth:0,height:I,x:v,y:R},to:{upperWidth:x,lowerWidth:N,height:I,x:v,y:R},duration:$,animationEasing:Z,isActive:W},function(oe){var pe=oe.upperWidth,le=oe.lowerWidth,ge=oe.height,ue=oe.x,Re=oe.y;return Vt.createElement(sp,{canBegin:c>0,from:"0px ".concat(c===-1?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:H,duration:$,easing:Z},Vt.createElement("path",$x({},yn(a,!0),{className:ee,d:lZ(ue,Re,pe,le,ge),ref:r})))}):Vt.createElement("g",null,Vt.createElement("path",$x({},yn(a,!0),{className:ee,d:lZ(v,R,x,N,I)})))},Cbe=["option","shapeType","propTransformer","activeClassName","isActive"];function PT(t){"@babel/helpers - typeof";return PT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PT(t)}function Sbe(t,e){if(t==null)return{};var a=bbe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bbe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function uZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Kx(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?uZ(Object(a),!0).forEach(function(r){xbe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):uZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function xbe(t,e,a){return e=Pbe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Pbe(t){var e=Ebe(t,"string");return PT(e)=="symbol"?e:e+""}function Ebe(t,e){if(PT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(PT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nbe(t,e){return Kx(Kx({},e),t)}function Obe(t,e){return t==="symbols"}function cZ(t){var e=t.shapeType,a=t.elementProps;switch(e){case"rectangle":return Vt.createElement(I4,a);case"trapezoid":return Vt.createElement(Tbe,a);case"sector":return Vt.createElement(ree,a);case"symbols":if(Obe(e))return Vt.createElement(CP,a);break;default:return null}}function Vbe(t){return ie.isValidElement(t)?t.props:t}function Wx(t){var e=t.option,a=t.shapeType,r=t.propTransformer,i=r===void 0?Nbe:r,l=t.activeClassName,c=l===void 0?"recharts-active-shape":l,n=t.isActive,v=Sbe(t,Cbe),R;if(ie.isValidElement(e))R=ie.cloneElement(e,Kx(Kx({},v),Vbe(e)));else if(Zn(e))R=e(v);else if(cbe(e)&&!fbe(e)){var x=i(e,v);R=Vt.createElement(cZ,{shapeType:a,elementProps:x})}else{var N=v;R=Vt.createElement(cZ,{shapeType:a,elementProps:N})}return n?Vt.createElement(vi,{className:c},R):R}function jP(t,e){return e!=null&&"trapezoids"in t.props}function GP(t,e){return e!=null&&"sectors"in t.props}function ET(t,e){return e!=null&&"points"in t.props}function zbe(t,e){var a,r,i=t.x===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===e.x,l=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&l}function Dbe(t,e){var a=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return a&&r}function Mbe(t,e){var a=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return a&&r&&i}function Ibe(t,e){var a;return jP(t,e)?a=zbe:GP(t,e)?a=Dbe:ET(t,e)&&(a=Mbe),a}function Lbe(t,e){var a;return jP(t,e)?a="trapezoids":GP(t,e)?a="sectors":ET(t,e)&&(a="points"),a}function Fbe(t,e){if(jP(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(GP(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return ET(t,e)?e.payload:{}}function kbe(t){var e=t.activeTooltipItem,a=t.graphicalItem,r=t.itemData,i=Lbe(a,e),l=Fbe(a,e),c=r.filter(function(v,R){var x=aA(l,v),N=a.props[i].filter(function(Z){var $=Ibe(a,e);return $(Z,e)}),I=a.props[i].indexOf(N[N.length-1]),k=R===I;return x&&k}),n=r.indexOf(c[c.length-1]);return n}var Pb;function q_(t){"@babel/helpers - typeof";return q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q_(t)}function r_(){return r_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},r_.apply(this,arguments)}function dZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function bo(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?dZ(Object(a),!0).forEach(function(r){tp(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Ube(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gee(r.key),r)}}function Bbe(t,e,a){return e&&hZ(t.prototype,e),a&&hZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function jbe(t,e,a){return e=Yx(e),Gbe(t,mee()?Reflect.construct(e,a||[],Yx(t).constructor):e.apply(t,a))}function Gbe(t,e){if(e&&(q_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zbe(t)}function Zbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mee=function(){return!!t})()}function Yx(t){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Yx(t)}function qbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RI(t,e)}function tp(t,e,a){return e=gee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function gee(t){var e=Hbe(t,"string");return q_(e)=="symbol"?e:e+""}function Hbe(t,e){if(q_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(q_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hg=function(t){function e(a){var r;return Ube(this,e),r=jbe(this,e,[a]),tp(r,"pieRef",null),tp(r,"sectorRefs",[]),tp(r,"id",hA("recharts-pie-")),tp(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Zn(i)&&i()}),tp(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Zn(i)&&i()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return qbe(e,t),Bbe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.label,n=l.labelLine,v=l.dataKey,R=l.valueKey,x=yn(this.props,!1),N=yn(c,!1),I=yn(n,!1),k=c&&c.offsetRadius||20,Z=r.map(function($,H){var W=($.startAngle+$.endAngle)/2,ee=Po($.cx,$.cy,$.outerRadius+k,W),oe=bo(bo(bo(bo({},x),$),{},{stroke:"none"},N),{},{index:H,textAnchor:e.getTextAnchor(ee.x,$.cx)},ee),pe=bo(bo(bo(bo({},x),$),{},{fill:"none",stroke:$.fill},I),{},{index:H,points:[Po($.cx,$.cy,$.outerRadius,W),ee]}),le=v;return qn(v)&&qn(R)?le="value":qn(v)&&(le=R),Vt.createElement(vi,{key:"label-".concat($.startAngle,"-").concat($.endAngle,"-").concat($.midAngle,"-").concat(H)},n&&e.renderLabelLineItem(n,pe,"line"),e.renderLabelItem(c,oe,Fo($,le)))});return Vt.createElement(vi,{className:"recharts-pie-labels"},Z)}},{key:"renderSectorsStatically",value:function(r){var i=this,l=this.props,c=l.activeShape,n=l.blendStroke,v=l.inactiveShape;return r.map(function(R,x){if((R==null?void 0:R.startAngle)===0&&(R==null?void 0:R.endAngle)===0&&r.length!==1)return null;var N=i.isActiveIndex(x),I=v&&i.hasActiveIndex()?v:null,k=N?c:I,Z=bo(bo({},R),{},{stroke:n?R.fill:R.stroke,tabIndex:-1});return Vt.createElement(vi,r_({ref:function(H){H&&!i.sectorRefs.includes(H)&&i.sectorRefs.push(H)},tabIndex:-1,className:"recharts-pie-sector"},tA(i.props,R,x),{key:"sector-".concat(R==null?void 0:R.startAngle,"-").concat(R==null?void 0:R.endAngle,"-").concat(R.midAngle,"-").concat(x)}),Vt.createElement(Wx,r_({option:k,isActive:N,shapeType:"sector"},Z)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,l=i.sectors,c=i.isAnimationActive,n=i.animationBegin,v=i.animationDuration,R=i.animationEasing,x=i.animationId,N=this.state,I=N.prevSectors,k=N.prevIsAnimationActive;return Vt.createElement(sp,{begin:n,duration:v,isActive:c,easing:R,from:{t:0},to:{t:1},key:"pie-".concat(x,"-").concat(k),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(Z){var $=Z.t,H=[],W=l&&l[0],ee=W.startAngle;return l.forEach(function(oe,pe){var le=I&&I[pe],ge=pe>0?Rf(oe,"paddingAngle",0):0;if(le){var ue=gl(le.endAngle-le.startAngle,oe.endAngle-oe.startAngle),Re=bo(bo({},oe),{},{startAngle:ee+ge,endAngle:ee+ue($)+ge});H.push(Re),ee=Re.endAngle}else{var we=oe.endAngle,Ne=oe.startAngle,ne=gl(0,we-Ne),_e=ne($),ke=bo(bo({},oe),{},{startAngle:ee+ge,endAngle:ee+_e+ge});H.push(ke),ee=ke.endAngle}}),Vt.createElement(vi,null,r.renderSectorsStatically(H))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(l){if(!l.altKey)switch(l.key){case"ArrowLeft":{var c=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"ArrowRight":{var n=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[n].focus(),i.setState({sectorToFocus:n});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,l=r.isAnimationActive,c=this.state.prevSectors;return l&&i&&i.length&&(!c||!aA(c,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,l=i.hide,c=i.sectors,n=i.className,v=i.label,R=i.cx,x=i.cy,N=i.innerRadius,I=i.outerRadius,k=i.isAnimationActive,Z=this.state.isAnimationFinished;if(l||!c||!c.length||!Tr(R)||!Tr(x)||!Tr(N)||!Tr(I))return null;var $=mi("recharts-pie",n);return Vt.createElement(vi,{tabIndex:this.props.rootTabIndex,className:$,ref:function(W){r.pieRef=W}},this.renderSectors(),v&&this.renderLabels(c),cc.renderCallByParent(this.props,null,!1),(!k||Z)&&np.renderCallByParent(this.props,c,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,l){if(Vt.isValidElement(r))return Vt.cloneElement(r,i);if(Zn(r))return r(i);var c=mi("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return Vt.createElement(Yy,r_({},i,{key:l,type:"linear",className:c}))}},{key:"renderLabelItem",value:function(r,i,l){if(Vt.isValidElement(r))return Vt.cloneElement(r,i);var c=l;if(Zn(r)&&(c=r(i),Vt.isValidElement(c)))return c;var n=mi("recharts-pie-label-text",typeof r!="boolean"&&!Zn(r)?r.className:"");return Vt.createElement(Lv,r_({},i,{alignmentBaseline:"middle",className:n}),c)}}])}(ie.PureComponent);Pb=Hg;tp(Hg,"displayName","Pie");tp(Hg,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Zg.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});tp(Hg,"parseDeltaAngle",function(t,e){var a=lh(e-t),r=Math.min(Math.abs(e-t),360);return a*r});tp(Hg,"getRealPieData",function(t){var e=t.data,a=t.children,r=yn(t,!1),i=mh(a,I_);return e&&e.length?e.map(function(l,c){return bo(bo(bo({payload:l},r),l),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(l){return bo(bo({},r),l.props)}):[]});tp(Hg,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,i=e.width,l=e.height,c=QQ(i,l),n=r+uh(t.cx,i,i/2),v=a+uh(t.cy,l,l/2),R=uh(t.innerRadius,c,0),x=uh(t.outerRadius,c,c*.8),N=t.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:n,cy:v,innerRadius:R,outerRadius:x,maxRadius:N}});tp(Hg,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?bo(bo({},e.type.defaultProps),e.props):e.props,i=Pb.getRealPieData(r);if(!i||!i.length)return null;var l=r.cornerRadius,c=r.startAngle,n=r.endAngle,v=r.paddingAngle,R=r.dataKey,x=r.nameKey,N=r.valueKey,I=r.tooltipType,k=Math.abs(r.minAngle),Z=Pb.parseCoordinateOfPie(r,a),$=Pb.parseDeltaAngle(c,n),H=Math.abs($),W=R;qn(R)&&qn(N)?($p(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),W="value"):qn(R)&&($p(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),W=N);var ee=i.filter(function(Re){return Fo(Re,W,0)!==0}).length,oe=(H>=360?ee:ee-1)*v,pe=H-ee*k-oe,le=i.reduce(function(Re,we){var Ne=Fo(we,W,0);return Re+(Tr(Ne)?Ne:0)},0),ge;if(le>0){var ue;ge=i.map(function(Re,we){var Ne=Fo(Re,W,0),ne=Fo(Re,x,we),_e=(Tr(Ne)?Ne:0)/le,ke;we?ke=ue.endAngle+lh($)*v*(Ne!==0?1:0):ke=c;var Pe=ke+lh($)*((Ne!==0?k:0)+_e*pe),Ee=(ke+Pe)/2,De=(Z.innerRadius+Z.outerRadius)/2,qe=[{name:ne,value:Ne,payload:Re,dataKey:W,type:I}],Oe=Po(Z.cx,Z.cy,De,Ee);return ue=bo(bo(bo({percent:_e,cornerRadius:l,name:ne,tooltipPayload:qe,midAngle:Ee,middleRadius:De,tooltipPosition:Oe},Re),Z),{},{value:Fo(Re,W),startAngle:ke,endAngle:Pe,payload:Re,paddingAngle:lh($)*v}),ue})}return bo(bo({},Z),{},{sectors:ge,data:i})});var SD,fZ;function $be(){if(fZ)return SD;fZ=1;var t=Math.ceil,e=Math.max;function a(r,i,l,c){for(var n=-1,v=e(t((i-r)/(l||1)),0),R=Array(v);v--;)R[c?v:++n]=r,r+=l;return R}return SD=a,SD}var bD,pZ;function yee(){if(pZ)return bD;pZ=1;var t=UJ(),e=1/0,a=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var l=i<0?-1:1;return l*a}return i===i?i:0}return bD=r,bD}var xD,mZ;function Kbe(){if(mZ)return xD;mZ=1;var t=$be(),e=xP(),a=yee();function r(i){return function(l,c,n){return n&&typeof n!="number"&&e(l,c,n)&&(c=n=void 0),l=a(l),c===void 0?(c=l,l=0):c=a(c),n=n===void 0?l<c?1:-1:a(n),t(l,c,n,i)}}return xD=r,xD}var PD,gZ;function Wbe(){if(gZ)return PD;gZ=1;var t=Kbe(),e=t();return PD=e,PD}var Ybe=Wbe();const Xx=ss(Ybe);function NT(t){"@babel/helpers - typeof";return NT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NT(t)}function yZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function AZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?yZ(Object(a),!0).forEach(function(r){Aee(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Aee(t,e,a){return e=Xbe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Xbe(t){var e=Jbe(t,"string");return NT(e)=="symbol"?e:e+""}function Jbe(t,e){if(NT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(NT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qbe=["Webkit","Moz","O","ms"],exe=function(e,a){var r=e.replace(/(\w)/,function(l){return l.toUpperCase()}),i=Qbe.reduce(function(l,c){return AZ(AZ({},l),{},Aee({},c+r,a))},{});return i[e]=a,i};function H_(t){"@babel/helpers - typeof";return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H_(t)}function Jx(){return Jx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Jx.apply(this,arguments)}function vZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ED(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?vZ(Object(a),!0).forEach(function(r){ff(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function txe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Z(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_ee(r.key),r)}}function axe(t,e,a){return e&&_Z(t.prototype,e),a&&_Z(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function rxe(t,e,a){return e=Qx(e),nxe(t,vee()?Reflect.construct(e,a||[],Qx(t).constructor):e.apply(t,a))}function nxe(t,e){if(e&&(H_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ixe(t)}function ixe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vee=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Qx(t)}function sxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TI(t,e)}function TI(t,e){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TI(t,e)}function ff(t,e,a){return e=_ee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _ee(t){var e=oxe(t,"string");return H_(e)=="symbol"?e:e+""}function oxe(t,e){if(H_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(H_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lxe=function(e){var a=e.data,r=e.startIndex,i=e.endIndex,l=e.x,c=e.width,n=e.travellerWidth;if(!a||!a.length)return{};var v=a.length,R=CR().domain(Xx(0,v)).range([l,l+c-n]),x=R.domain().map(function(N){return R(N)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:R(r),endX:R(i),scale:R,scaleValues:x}},wZ=function(e){return e.changedTouches&&!!e.changedTouches.length},$_=function(t){function e(a){var r;return txe(this,e),r=rxe(this,e,[a]),ff(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ff(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ff(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,l=i.endIndex,c=i.onDragEnd,n=i.startIndex;c==null||c({endIndex:l,startIndex:n})}),r.detachDragEndListener()}),ff(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ff(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ff(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ff(r,"handleSlideDragStart",function(i){var l=wZ(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return sxe(e,t),axe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,l=r.endX,c=this.state.scaleValues,n=this.props,v=n.gap,R=n.data,x=R.length-1,N=Math.min(i,l),I=Math.max(i,l),k=e.getIndexInRange(c,N),Z=e.getIndexInRange(c,I);return{startIndex:k-k%v,endIndex:Z===x?x:Z-Z%v}}},{key:"getTextOfTick",value:function(r){var i=this.props,l=i.data,c=i.tickFormatter,n=i.dataKey,v=Fo(l[r],n,r);return Zn(c)?c(v,r):v}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,l=i.slideMoveStartX,c=i.startX,n=i.endX,v=this.props,R=v.x,x=v.width,N=v.travellerWidth,I=v.startIndex,k=v.endIndex,Z=v.onChange,$=r.pageX-l;$>0?$=Math.min($,R+x-N-n,R+x-N-c):$<0&&($=Math.max($,R-c,R-n));var H=this.getIndex({startX:c+$,endX:n+$});(H.startIndex!==I||H.endIndex!==k)&&Z&&Z(H),this.setState({startX:c+$,endX:n+$,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var l=wZ(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,l=i.brushMoveStartX,c=i.movingTravellerId,n=i.endX,v=i.startX,R=this.state[c],x=this.props,N=x.x,I=x.width,k=x.travellerWidth,Z=x.onChange,$=x.gap,H=x.data,W={startX:this.state.startX,endX:this.state.endX},ee=r.pageX-l;ee>0?ee=Math.min(ee,N+I-k-R):ee<0&&(ee=Math.max(ee,N-R)),W[c]=R+ee;var oe=this.getIndex(W),pe=oe.startIndex,le=oe.endIndex,ge=function(){var Re=H.length-1;return c==="startX"&&(n>v?pe%$===0:le%$===0)||n<v&&le===Re||c==="endX"&&(n>v?le%$===0:pe%$===0)||n>v&&le===Re};this.setState(ff(ff({},c,R+ee),"brushMoveStartX",r.pageX),function(){Z&&ge()&&Z(oe)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var l=this,c=this.state,n=c.scaleValues,v=c.startX,R=c.endX,x=this.state[i],N=n.indexOf(x);if(N!==-1){var I=N+r;if(!(I===-1||I>=n.length)){var k=n[I];i==="startX"&&k>=R||i==="endX"&&k<=v||this.setState(ff({},i,k),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.fill,R=r.stroke;return Vt.createElement("rect",{stroke:R,fill:v,x:i,y:l,width:c,height:n})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.data,R=r.children,x=r.padding,N=ie.Children.only(R);return N?Vt.cloneElement(N,{x:i,y:l,width:c,height:n,margin:x,compact:!0,data:v}):null}},{key:"renderTravellerLayer",value:function(r,i){var l,c,n=this,v=this.props,R=v.y,x=v.travellerWidth,N=v.height,I=v.traveller,k=v.ariaLabel,Z=v.data,$=v.startIndex,H=v.endIndex,W=Math.max(r,this.props.x),ee=ED(ED({},yn(this.props,!1)),{},{x:W,y:R,width:x,height:N}),oe=k||"Min value: ".concat((l=Z[$])===null||l===void 0?void 0:l.name,", Max value: ").concat((c=Z[H])===null||c===void 0?void 0:c.name);return Vt.createElement(vi,{tabIndex:0,role:"slider","aria-label":oe,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(le){["ArrowLeft","ArrowRight"].includes(le.key)&&(le.preventDefault(),le.stopPropagation(),n.handleTravellerMoveKeyboard(le.key==="ArrowRight"?1:-1,i))},onFocus:function(){n.setState({isTravellerFocused:!0})},onBlur:function(){n.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(I,ee))}},{key:"renderSlide",value:function(r,i){var l=this.props,c=l.y,n=l.height,v=l.stroke,R=l.travellerWidth,x=Math.min(r,i)+R,N=Math.max(Math.abs(i-r)-R,0);return Vt.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:v,fillOpacity:.2,x,y:c,width:N,height:n})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,l=r.endIndex,c=r.y,n=r.height,v=r.travellerWidth,R=r.stroke,x=this.state,N=x.startX,I=x.endX,k=5,Z={pointerEvents:"none",fill:R};return Vt.createElement(vi,{className:"recharts-brush-texts"},Vt.createElement(Lv,Jx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(N,I)-k,y:c+n/2},Z),this.getTextOfTick(i)),Vt.createElement(Lv,Jx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(N,I)+v+k,y:c+n/2},Z),this.getTextOfTick(l)))}},{key:"render",value:function(){var r=this.props,i=r.data,l=r.className,c=r.children,n=r.x,v=r.y,R=r.width,x=r.height,N=r.alwaysShowText,I=this.state,k=I.startX,Z=I.endX,$=I.isTextActive,H=I.isSlideMoving,W=I.isTravellerMoving,ee=I.isTravellerFocused;if(!i||!i.length||!Tr(n)||!Tr(v)||!Tr(R)||!Tr(x)||R<=0||x<=0)return null;var oe=mi("recharts-brush",l),pe=Vt.Children.count(c)===1,le=exe("userSelect","none");return Vt.createElement(vi,{className:oe,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:le},this.renderBackground(),pe&&this.renderPanorama(),this.renderSlide(k,Z),this.renderTravellerLayer(k,"startX"),this.renderTravellerLayer(Z,"endX"),($||H||W||ee||N)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,l=r.y,c=r.width,n=r.height,v=r.stroke,R=Math.floor(l+n/2)-1;return Vt.createElement(Vt.Fragment,null,Vt.createElement("rect",{x:i,y:l,width:c,height:n,fill:v,stroke:"none"}),Vt.createElement("line",{x1:i+1,y1:R,x2:i+c-1,y2:R,fill:"none",stroke:"#fff"}),Vt.createElement("line",{x1:i+1,y1:R+2,x2:i+c-1,y2:R+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var l;return Vt.isValidElement(r)?l=Vt.cloneElement(r,i):Zn(r)?l=r(i):l=e.renderDefaultTraveller(i),l}},{key:"getDerivedStateFromProps",value:function(r,i){var l=r.data,c=r.width,n=r.x,v=r.travellerWidth,R=r.updateId,x=r.startIndex,N=r.endIndex;if(l!==i.prevData||R!==i.prevUpdateId)return ED({prevData:l,prevTravellerWidth:v,prevUpdateId:R,prevX:n,prevWidth:c},l&&l.length?lxe({data:l,width:c,x:n,travellerWidth:v,startIndex:x,endIndex:N}):{scale:null,scaleValues:null});if(i.scale&&(c!==i.prevWidth||n!==i.prevX||v!==i.prevTravellerWidth)){i.scale.range([n,n+c-v]);var I=i.scale.domain().map(function(k){return i.scale(k)});return{prevData:l,prevTravellerWidth:v,prevUpdateId:R,prevX:n,prevWidth:c,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:I}}return null}},{key:"getIndexInRange",value:function(r,i){for(var l=r.length,c=0,n=l-1;n-c>1;){var v=Math.floor((c+n)/2);r[v]>i?n=v:c=v}return i>=r[n]?n:c}}])}(ie.PureComponent);ff($_,"displayName","Brush");ff($_,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ND,RZ;function uxe(){if(RZ)return ND;RZ=1;var t=l4();function e(a,r){var i;return t(a,function(l,c,n){return i=r(l,c,n),!i}),!!i}return ND=e,ND}var OD,TZ;function cxe(){if(TZ)return OD;TZ=1;var t=yJ(),e=Qm(),a=uxe(),r=jh(),i=xP();function l(c,n,v){var R=r(c)?t:a;return v&&i(c,n,v)&&(n=void 0),R(c,e(n,3))}return OD=l,OD}var dxe=cxe();const hxe=ss(dxe);var Zm=function(e,a){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===a},VD,CZ;function fxe(){if(CZ)return VD;CZ=1;var t=MJ();function e(a,r,i){r=="__proto__"&&t?t(a,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):a[r]=i}return VD=e,VD}var zD,SZ;function pxe(){if(SZ)return zD;SZ=1;var t=fxe(),e=zJ(),a=Qm();function r(i,l){var c={};return l=a(l,3),e(i,function(n,v,R){t(c,v,l(n,v,R))}),c}return zD=r,zD}var mxe=pxe();const gxe=ss(mxe);var DD,bZ;function yxe(){if(bZ)return DD;bZ=1;function t(e,a){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!a(e[r],r,e))return!1;return!0}return DD=t,DD}var MD,xZ;function Axe(){if(xZ)return MD;xZ=1;var t=l4();function e(a,r){var i=!0;return t(a,function(l,c,n){return i=!!r(l,c,n),i}),i}return MD=e,MD}var ID,PZ;function vxe(){if(PZ)return ID;PZ=1;var t=yxe(),e=Axe(),a=Qm(),r=jh(),i=xP();function l(c,n,v){var R=r(c)?t:e;return v&&i(c,n,v)&&(n=void 0),R(c,a(n,3))}return ID=l,ID}var _xe=vxe();const wee=ss(_xe);var wxe=["x","y"];function OT(t){"@babel/helpers - typeof";return OT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OT(t)}function CI(){return CI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},CI.apply(this,arguments)}function EZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Yw(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?EZ(Object(a),!0).forEach(function(r){Rxe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):EZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Rxe(t,e,a){return e=Txe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Txe(t){var e=Cxe(t,"string");return OT(e)=="symbol"?e:e+""}function Cxe(t,e){if(OT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(OT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sxe(t,e){if(t==null)return{};var a=bxe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bxe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function xxe(t,e){var a=t.x,r=t.y,i=Sxe(t,wxe),l="".concat(a),c=parseInt(l,10),n="".concat(r),v=parseInt(n,10),R="".concat(e.height||i.height),x=parseInt(R,10),N="".concat(e.width||i.width),I=parseInt(N,10);return Yw(Yw(Yw(Yw(Yw({},e),i),c?{x:c}:{}),v?{y:v}:{}),{},{height:x,width:I,name:e.name,radius:e.radius})}function NZ(t){return Vt.createElement(Wx,CI({shapeType:"rectangle",propTransformer:xxe,activeClassName:"recharts-active-bar"},t))}var Pxe=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var l=typeof r=="number";return l?e(r,i):(l||kv(),a)}},Exe=["value","background"],Ree;function K_(t){"@babel/helpers - typeof";return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K_(t)}function Nxe(t,e){if(t==null)return{};var a=Oxe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Oxe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function e2(){return e2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},e2.apply(this,arguments)}function OZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function mu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?OZ(Object(a),!0).forEach(function(r){jy(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):OZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Vxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cee(r.key),r)}}function zxe(t,e,a){return e&&VZ(t.prototype,e),a&&VZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dxe(t,e,a){return e=t2(e),Mxe(t,Tee()?Reflect.construct(e,a||[],t2(t).constructor):e.apply(t,a))}function Mxe(t,e){if(e&&(K_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ixe(t)}function Ixe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tee=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},t2(t)}function Lxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SI(t,e)}function SI(t,e){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SI(t,e)}function jy(t,e,a){return e=Cee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Cee(t){var e=Fxe(t,"string");return K_(e)=="symbol"?e:e+""}function Fxe(t,e){if(K_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(K_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jp=function(t){function e(){var a;Vxe(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=Dxe(this,e,[].concat(i)),jy(a,"state",{isAnimationFinished:!1}),jy(a,"id",hA("recharts-bar-")),jy(a,"handleAnimationEnd",function(){var c=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),c&&c()}),jy(a,"handleAnimationStart",function(){var c=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),c&&c()}),a}return Lxe(e,t),zxe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,l=this.props,c=l.shape,n=l.dataKey,v=l.activeIndex,R=l.activeBar,x=yn(this.props,!1);return r&&r.map(function(N,I){var k=I===v,Z=k?R:c,$=mu(mu(mu({},x),N),{},{isActive:k,option:Z,index:I,dataKey:n,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Vt.createElement(vi,e2({className:"recharts-bar-rectangle"},tA(i.props,N,I),{key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value)}),Vt.createElement(NZ,$))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,l=i.data,c=i.layout,n=i.isAnimationActive,v=i.animationBegin,R=i.animationDuration,x=i.animationEasing,N=i.animationId,I=this.state.prevData;return Vt.createElement(sp,{begin:v,duration:R,isActive:n,easing:x,from:{t:0},to:{t:1},key:"bar-".concat(N),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var Z=k.t,$=l.map(function(H,W){var ee=I&&I[W];if(ee){var oe=gl(ee.x,H.x),pe=gl(ee.y,H.y),le=gl(ee.width,H.width),ge=gl(ee.height,H.height);return mu(mu({},H),{},{x:oe(Z),y:pe(Z),width:le(Z),height:ge(Z)})}if(c==="horizontal"){var ue=gl(0,H.height),Re=ue(Z);return mu(mu({},H),{},{y:H.y+H.height-Re,height:Re})}var we=gl(0,H.width),Ne=we(Z);return mu(mu({},H),{},{width:Ne})});return Vt.createElement(vi,null,r.renderRectanglesStatically($))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,l=r.isAnimationActive,c=this.state.prevData;return l&&i&&i.length&&(!c||!aA(c,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,l=i.data,c=i.dataKey,n=i.activeIndex,v=yn(this.props.background,!1);return l.map(function(R,x){R.value;var N=R.background,I=Nxe(R,Exe);if(!N)return null;var k=mu(mu(mu(mu(mu({},I),{},{fill:"#eee"},N),v),tA(r.props,R,x)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:c,index:x,className:"recharts-bar-background-rectangle"});return Vt.createElement(NZ,e2({key:"background-bar-".concat(x),option:r.props.background,isActive:x===n},k))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.data,n=l.xAxis,v=l.yAxis,R=l.layout,x=l.children,N=mh(x,b1);if(!N)return null;var I=R==="vertical"?c[0].height/2:c[0].width/2,k=function(H,W){var ee=Array.isArray(H.value)?H.value[1]:H.value;return{x:H.x,y:H.y,value:ee,errorVal:Fo(H,W)}},Z={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Vt.createElement(vi,Z,N.map(function($){return Vt.cloneElement($,{key:"error-bar-".concat(i,"-").concat($.props.dataKey),data:c,xAxis:n,yAxis:v,layout:R,offset:I,dataPointFormatter:k})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,l=r.data,c=r.className,n=r.xAxis,v=r.yAxis,R=r.left,x=r.top,N=r.width,I=r.height,k=r.isAnimationActive,Z=r.background,$=r.id;if(i||!l||!l.length)return null;var H=this.state.isAnimationFinished,W=mi("recharts-bar",c),ee=n&&n.allowDataOverflow,oe=v&&v.allowDataOverflow,pe=ee||oe,le=qn($)?this.id:$;return Vt.createElement(vi,{className:W},ee||oe?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(le)},Vt.createElement("rect",{x:ee?R:R-N/2,y:oe?x:x-I/2,width:ee?N:N*2,height:oe?I:I*2}))):null,Vt.createElement(vi,{className:"recharts-bar-rectangles",clipPath:pe?"url(#clipPath-".concat(le,")"):null},Z?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(pe,le),(!k||H)&&np.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(ie.PureComponent);Ree=Jp;jy(Jp,"displayName","Bar");jy(Jp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Zg.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});jy(Jp,"getComposedData",function(t){var e=t.props,a=t.item,r=t.barPosition,i=t.bandSize,l=t.xAxis,c=t.yAxis,n=t.xAxisTicks,v=t.yAxisTicks,R=t.stackedData,x=t.dataStartIndex,N=t.displayedData,I=t.offset,k=hRe(r,a);if(!k)return null;var Z=e.layout,$=a.type.defaultProps,H=$!==void 0?mu(mu({},$),a.props):a.props,W=H.dataKey,ee=H.children,oe=H.minPointSize,pe=Z==="horizontal"?c:l,le=R?pe.scale.domain():null,ge=vRe({numericAxis:pe}),ue=mh(ee,I_),Re=N.map(function(we,Ne){var ne,_e,ke,Pe,Ee,De;R?ne=fRe(R[x+Ne],le):(ne=Fo(we,W),Array.isArray(ne)||(ne=[ge,ne]));var qe=Pxe(oe,Ree.defaultProps.minPointSize)(ne[1],Ne);if(Z==="horizontal"){var Oe,He=[c.scale(ne[0]),c.scale(ne[1])],Ue=He[0],ct=He[1];_e=n9({axis:l,ticks:n,bandSize:i,offset:k.offset,entry:we,index:Ne}),ke=(Oe=ct??Ue)!==null&&Oe!==void 0?Oe:void 0,Pe=k.size;var Se=Ue-ct;if(Ee=Number.isNaN(Se)?0:Se,De={x:_e,y:c.y,width:Pe,height:c.height},Math.abs(qe)>0&&Math.abs(Ee)<Math.abs(qe)){var Ie=lh(Ee||qe)*(Math.abs(qe)-Math.abs(Ee));ke-=Ie,Ee+=Ie}}else{var je=[l.scale(ne[0]),l.scale(ne[1])],Ze=je[0],Be=je[1];if(_e=Ze,ke=n9({axis:c,ticks:v,bandSize:i,offset:k.offset,entry:we,index:Ne}),Pe=Be-Ze,Ee=k.size,De={x:l.x,y:ke,width:l.width,height:Ee},Math.abs(qe)>0&&Math.abs(Pe)<Math.abs(qe)){var Je=lh(Pe||qe)*(Math.abs(qe)-Math.abs(Pe));Pe+=Je}}return mu(mu(mu({},we),{},{x:_e,y:ke,width:Pe,height:Ee,value:R?ne:ne[1],payload:we,background:De},ue&&ue[Ne]&&ue[Ne].props),{},{tooltipPayload:[XQ(a,we)],tooltipPosition:{x:_e+Pe/2,y:ke+Ee/2}})});return mu({data:Re,layout:Z},I)});function VT(t){"@babel/helpers - typeof";return VT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VT(t)}function kxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,See(r.key),r)}}function Uxe(t,e,a){return e&&zZ(t.prototype,e),a&&zZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function DZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function jp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?DZ(Object(a),!0).forEach(function(r){ZP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):DZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ZP(t,e,a){return e=See(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function See(t){var e=Bxe(t,"string");return VT(e)=="symbol"?e:e+""}function Bxe(t,e){if(VT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(VT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qP=function(e,a,r,i,l){var c=e.width,n=e.height,v=e.layout,R=e.children,x=Object.keys(a),N={left:r.left,leftMirror:r.left,right:c-r.right,rightMirror:c-r.right,top:r.top,topMirror:r.top,bottom:n-r.bottom,bottomMirror:n-r.bottom},I=!!pf(R,Jp);return x.reduce(function(k,Z){var $=a[Z],H=$.orientation,W=$.domain,ee=$.padding,oe=ee===void 0?{}:ee,pe=$.mirror,le=$.reversed,ge="".concat(H).concat(pe?"Mirror":""),ue,Re,we,Ne,ne;if($.type==="number"&&($.padding==="gap"||$.padding==="no-gap")){var _e=W[1]-W[0],ke=1/0,Pe=$.categoricalDomain.sort();if(Pe.forEach(function(je,Ze){Ze>0&&(ke=Math.min((je||0)-(Pe[Ze-1]||0),ke))}),Number.isFinite(ke)){var Ee=ke/_e,De=$.layout==="vertical"?r.height:r.width;if($.padding==="gap"&&(ue=Ee*De/2),$.padding==="no-gap"){var qe=uh(e.barCategoryGap,Ee*De),Oe=Ee*De/2;ue=Oe-qe-(Oe-qe)/De*qe}}}i==="xAxis"?Re=[r.left+(oe.left||0)+(ue||0),r.left+r.width-(oe.right||0)-(ue||0)]:i==="yAxis"?Re=v==="horizontal"?[r.top+r.height-(oe.bottom||0),r.top+(oe.top||0)]:[r.top+(oe.top||0)+(ue||0),r.top+r.height-(oe.bottom||0)-(ue||0)]:Re=$.range,le&&(Re=[Re[1],Re[0]]);var He=$Q($,l,I),Ue=He.scale,ct=He.realScaleType;Ue.domain(W).range(Re),KQ(Ue);var Se=WQ(Ue,jp(jp({},$),{},{realScaleType:ct}));i==="xAxis"?(ne=H==="top"&&!pe||H==="bottom"&&pe,we=r.left,Ne=N[ge]-ne*$.height):i==="yAxis"&&(ne=H==="left"&&!pe||H==="right"&&pe,we=N[ge]-ne*$.width,Ne=r.top);var Ie=jp(jp(jp({},$),Se),{},{realScaleType:ct,x:we,y:Ne,scale:Ue,width:i==="xAxis"?r.width:$.width,height:i==="yAxis"?r.height:$.height});return Ie.bandSize=Fx(Ie,Se),!$.hide&&i==="xAxis"?N[ge]+=(ne?-1:1)*Ie.height:$.hide||(N[ge]+=(ne?-1:1)*Ie.width),jp(jp({},k),{},ZP({},Z,Ie))},{})},bee=function(e,a){var r=e.x,i=e.y,l=a.x,c=a.y;return{x:Math.min(r,l),y:Math.min(i,c),width:Math.abs(l-r),height:Math.abs(c-i)}},jxe=function(e){var a=e.x1,r=e.y1,i=e.x2,l=e.y2;return bee({x:a,y:r},{x:i,y:l})},xee=function(){function t(e){kxe(this,t),this.scale=e}return Uxe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,l=r.position;if(a!==void 0){if(l)switch(l){case"start":return this.scale(a);case"middle":{var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+c}case"end":{var n=this.bandwidth?this.bandwidth():0;return this.scale(a)+n}default:return this.scale(a)}if(i){var v=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+v}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),i=r[0],l=r[r.length-1];return i<=l?a>=i&&a<=l:a>=l&&a<=i}}],[{key:"create",value:function(a){return new t(a)}}])}();ZP(xee,"EPS",1e-4);var L4=function(e){var a=Object.keys(e).reduce(function(r,i){return jp(jp({},r),{},ZP({},i,xee.create(e[i])))},{});return jp(jp({},a),{},{apply:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.bandAware,n=l.position;return gxe(i,function(v,R){return a[R].apply(v,{bandAware:c,position:n})})},isInRange:function(i){return wee(i,function(l,c){return a[c].isInRange(l)})}})};function Gxe(t){return(t%180+180)%180}var Zxe=function(e){var a=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=Gxe(i),c=l*Math.PI/180,n=Math.atan(r/a),v=c>n&&c<Math.PI-n?r/Math.sin(c):a/Math.cos(c);return Math.abs(v)},LD,MZ;function qxe(){if(MZ)return LD;MZ=1;var t=Qm(),e=gC(),a=SP();function r(i){return function(l,c,n){var v=Object(l);if(!e(l)){var R=t(c,3);l=a(l),c=function(N){return R(v[N],N,v)}}var x=i(l,c,n);return x>-1?v[R?l[x]:x]:void 0}}return LD=r,LD}var FD,IZ;function Hxe(){if(IZ)return FD;IZ=1;var t=yee();function e(a){var r=t(a),i=r%1;return r===r?i?r-i:r:0}return FD=e,FD}var kD,LZ;function $xe(){if(LZ)return kD;LZ=1;var t=PJ(),e=Qm(),a=Hxe(),r=Math.max;function i(l,c,n){var v=l==null?0:l.length;if(!v)return-1;var R=n==null?0:a(n);return R<0&&(R=r(v+R,0)),t(l,e(c,3),R)}return kD=i,kD}var UD,FZ;function Kxe(){if(FZ)return UD;FZ=1;var t=qxe(),e=$xe(),a=t(e);return UD=a,UD}var Wxe=Kxe();const Yxe=ss(Wxe);var Xxe=GX();const Jxe=ss(Xxe);var Qxe=Jxe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),F4=ie.createContext(void 0),k4=ie.createContext(void 0),Pee=ie.createContext(void 0),Eee=ie.createContext({}),Nee=ie.createContext(void 0),Oee=ie.createContext(0),Vee=ie.createContext(0),kZ=function(e){var a=e.state,r=a.xAxisMap,i=a.yAxisMap,l=a.offset,c=e.clipPathId,n=e.children,v=e.width,R=e.height,x=Qxe(l);return Vt.createElement(F4.Provider,{value:r},Vt.createElement(k4.Provider,{value:i},Vt.createElement(Eee.Provider,{value:l},Vt.createElement(Pee.Provider,{value:x},Vt.createElement(Nee.Provider,{value:c},Vt.createElement(Oee.Provider,{value:R},Vt.createElement(Vee.Provider,{value:v},n)))))))},e2e=function(){return ie.useContext(Nee)},zee=function(e){var a=ie.useContext(F4);a==null&&kv();var r=a[e];return r==null&&kv(),r},t2e=function(){var e=ie.useContext(F4);return ky(e)},a2e=function(){var e=ie.useContext(k4),a=Yxe(e,function(r){return wee(r.domain,Number.isFinite)});return a||ky(e)},Dee=function(e){var a=ie.useContext(k4);a==null&&kv();var r=a[e];return r==null&&kv(),r},r2e=function(){var e=ie.useContext(Pee);return e},n2e=function(){return ie.useContext(Eee)},U4=function(){return ie.useContext(Vee)},B4=function(){return ie.useContext(Oee)};function W_(t){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W_(t)}function i2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s2e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Iee(r.key),r)}}function o2e(t,e,a){return e&&s2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function l2e(t,e,a){return e=a2(e),u2e(t,Mee()?Reflect.construct(e,a||[],a2(t).constructor):e.apply(t,a))}function u2e(t,e){if(e&&(W_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c2e(t)}function c2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mee=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},a2(t)}function d2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bI(t,e)}function bI(t,e){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bI(t,e)}function UZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function BZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?UZ(Object(a),!0).forEach(function(r){j4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):UZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function j4(t,e,a){return e=Iee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Iee(t){var e=h2e(t,"string");return W_(e)=="symbol"?e:e+""}function h2e(t,e){if(W_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(W_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function f2e(t,e){return y2e(t)||g2e(t,e)||m2e(t,e)||p2e()}function p2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m2e(t,e){if(t){if(typeof t=="string")return jZ(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return jZ(t,e)}}function jZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function g2e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function y2e(t){if(Array.isArray(t))return t}function xI(){return xI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xI.apply(this,arguments)}var A2e=function(e,a){var r;return Vt.isValidElement(e)?r=Vt.cloneElement(e,a):Zn(e)?r=e(a):r=Vt.createElement("line",xI({},a,{className:"recharts-reference-line-line"})),r},v2e=function(e,a,r,i,l,c,n,v,R){var x=l.x,N=l.y,I=l.width,k=l.height;if(r){var Z=R.y,$=e.y.apply(Z,{position:c});if(Zm(R,"discard")&&!e.y.isInRange($))return null;var H=[{x:x+I,y:$},{x,y:$}];return v==="left"?H.reverse():H}if(a){var W=R.x,ee=e.x.apply(W,{position:c});if(Zm(R,"discard")&&!e.x.isInRange(ee))return null;var oe=[{x:ee,y:N+k},{x:ee,y:N}];return n==="top"?oe.reverse():oe}if(i){var pe=R.segment,le=pe.map(function(ge){return e.apply(ge,{position:c})});return Zm(R,"discard")&&hxe(le,function(ge){return!e.isInRange(ge)})?null:le}return null};function _2e(t){var e=t.x,a=t.y,r=t.segment,i=t.xAxisId,l=t.yAxisId,c=t.shape,n=t.className,v=t.alwaysShow,R=e2e(),x=zee(i),N=Dee(l),I=r2e();if(!R||!I)return null;$p(v===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var k=L4({x:x.scale,y:N.scale}),Z=qu(e),$=qu(a),H=r&&r.length===2,W=v2e(k,Z,$,H,I,t.position,x.orientation,N.orientation,t);if(!W)return null;var ee=f2e(W,2),oe=ee[0],pe=oe.x,le=oe.y,ge=ee[1],ue=ge.x,Re=ge.y,we=Zm(t,"hidden")?"url(#".concat(R,")"):void 0,Ne=BZ(BZ({clipPath:we},yn(t,!0)),{},{x1:pe,y1:le,x2:ue,y2:Re});return Vt.createElement(vi,{className:mi("recharts-reference-line",n)},A2e(c,Ne),cc.renderCallByParent(t,jxe({x1:pe,y1:le,x2:ue,y2:Re})))}var G4=function(t){function e(){return i2e(this,e),l2e(this,e,arguments)}return d2e(e,t),o2e(e,[{key:"render",value:function(){return Vt.createElement(_2e,this.props)}}])}(Vt.Component);j4(G4,"displayName","ReferenceLine");j4(G4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},PI.apply(this,arguments)}function Y_(t){"@babel/helpers - typeof";return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y_(t)}function GZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ZZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?GZ(Object(a),!0).forEach(function(r){HP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):GZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function w2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R2e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fee(r.key),r)}}function T2e(t,e,a){return e&&R2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function C2e(t,e,a){return e=r2(e),S2e(t,Lee()?Reflect.construct(e,a||[],r2(t).constructor):e.apply(t,a))}function S2e(t,e){if(e&&(Y_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b2e(t)}function b2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lee=function(){return!!t})()}function r2(t){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},r2(t)}function x2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EI(t,e)}function EI(t,e){return EI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EI(t,e)}function HP(t,e,a){return e=Fee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Fee(t){var e=P2e(t,"string");return Y_(e)=="symbol"?e:e+""}function P2e(t,e){if(Y_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Y_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var E2e=function(e){var a=e.x,r=e.y,i=e.xAxis,l=e.yAxis,c=L4({x:i.scale,y:l.scale}),n=c.apply({x:a,y:r},{bandAware:!0});return Zm(e,"discard")&&!c.isInRange(n)?null:n},$P=function(t){function e(){return w2e(this,e),C2e(this,e,arguments)}return x2e(e,t),T2e(e,[{key:"render",value:function(){var r=this.props,i=r.x,l=r.y,c=r.r,n=r.alwaysShow,v=r.clipPathId,R=qu(i),x=qu(l);if($p(n===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!R||!x)return null;var N=E2e(this.props);if(!N)return null;var I=N.x,k=N.y,Z=this.props,$=Z.shape,H=Z.className,W=Zm(this.props,"hidden")?"url(#".concat(v,")"):void 0,ee=ZZ(ZZ({clipPath:W},yn(this.props,!0)),{},{cx:I,cy:k});return Vt.createElement(vi,{className:mi("recharts-reference-dot",H)},e.renderDot($,ee),cc.renderCallByParent(this.props,{x:I-c,y:k-c,width:2*c,height:2*c}))}}])}(Vt.Component);HP($P,"displayName","ReferenceDot");HP($P,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});HP($P,"renderDot",function(t,e){var a;return Vt.isValidElement(t)?a=Vt.cloneElement(t,e):Zn(t)?a=t(e):a=Vt.createElement(wC,PI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),a});function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},NI.apply(this,arguments)}function X_(t){"@babel/helpers - typeof";return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X_(t)}function qZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function HZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?qZ(Object(a),!0).forEach(function(r){KP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function N2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O2e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uee(r.key),r)}}function V2e(t,e,a){return e&&O2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function z2e(t,e,a){return e=n2(e),D2e(t,kee()?Reflect.construct(e,a||[],n2(t).constructor):e.apply(t,a))}function D2e(t,e){if(e&&(X_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M2e(t)}function M2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kee=function(){return!!t})()}function n2(t){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},n2(t)}function I2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OI(t,e)}function KP(t,e,a){return e=Uee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Uee(t){var e=L2e(t,"string");return X_(e)=="symbol"?e:e+""}function L2e(t,e){if(X_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(X_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var F2e=function(e,a,r,i,l){var c=l.x1,n=l.x2,v=l.y1,R=l.y2,x=l.xAxis,N=l.yAxis;if(!x||!N)return null;var I=L4({x:x.scale,y:N.scale}),k={x:e?I.x.apply(c,{position:"start"}):I.x.rangeMin,y:r?I.y.apply(v,{position:"start"}):I.y.rangeMin},Z={x:a?I.x.apply(n,{position:"end"}):I.x.rangeMax,y:i?I.y.apply(R,{position:"end"}):I.y.rangeMax};return Zm(l,"discard")&&(!I.isInRange(k)||!I.isInRange(Z))?null:bee(k,Z)},WP=function(t){function e(){return N2e(this,e),z2e(this,e,arguments)}return I2e(e,t),V2e(e,[{key:"render",value:function(){var r=this.props,i=r.x1,l=r.x2,c=r.y1,n=r.y2,v=r.className,R=r.alwaysShow,x=r.clipPathId;$p(R===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var N=qu(i),I=qu(l),k=qu(c),Z=qu(n),$=this.props.shape;if(!N&&!I&&!k&&!Z&&!$)return null;var H=F2e(N,I,k,Z,this.props);if(!H&&!$)return null;var W=Zm(this.props,"hidden")?"url(#".concat(x,")"):void 0;return Vt.createElement(vi,{className:mi("recharts-reference-area",v)},e.renderRect($,HZ(HZ({clipPath:W},yn(this.props,!0)),H)),cc.renderCallByParent(this.props,H))}}])}(Vt.Component);KP(WP,"displayName","ReferenceArea");KP(WP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});KP(WP,"renderRect",function(t,e){var a;return Vt.isValidElement(t)?a=Vt.cloneElement(t,e):Zn(t)?a=t(e):a=Vt.createElement(I4,NI({},e,{className:"recharts-reference-area-rect"})),a});function Bee(t,e,a){if(e<1)return[];if(e===1&&a===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function k2e(t,e,a){var r={width:t.width+e.width,height:t.height+e.height};return Zxe(r,a)}function U2e(t,e,a){var r=a==="width",i=t.x,l=t.y,c=t.width,n=t.height;return e===1?{start:r?i:l,end:r?i+c:l+n}:{start:r?i+c:l+n,end:r?i:l}}function i2(t,e,a,r,i){if(t*e<t*r||t*e>t*i)return!1;var l=a();return t*(e-t*l/2-r)>=0&&t*(e+t*l/2-i)<=0}function B2e(t,e){return Bee(t,e+1)}function j2e(t,e,a,r,i){for(var l=(r||[]).slice(),c=e.start,n=e.end,v=0,R=1,x=c,N=function(){var Z=r==null?void 0:r[v];if(Z===void 0)return{v:Bee(r,R)};var $=v,H,W=function(){return H===void 0&&(H=a(Z,$)),H},ee=Z.coordinate,oe=v===0||i2(t,ee,W,x,n);oe||(v=0,x=c,R+=1),oe&&(x=ee+t*(W()/2+i),v+=R)},I;R<=l.length;)if(I=N(),I)return I.v;return[]}function zT(t){"@babel/helpers - typeof";return zT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zT(t)}function $Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function md(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?$Z(Object(a),!0).forEach(function(r){G2e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$Z(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function G2e(t,e,a){return e=Z2e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Z2e(t){var e=q2e(t,"string");return zT(e)=="symbol"?e:e+""}function q2e(t,e){if(zT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(zT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H2e(t,e,a,r,i){for(var l=(r||[]).slice(),c=l.length,n=e.start,v=e.end,R=function(I){var k=l[I],Z,$=function(){return Z===void 0&&(Z=a(k,I)),Z};if(I===c-1){var H=t*(k.coordinate+t*$()/2-v);l[I]=k=md(md({},k),{},{tickCoord:H>0?k.coordinate-H*t:k.coordinate})}else l[I]=k=md(md({},k),{},{tickCoord:k.coordinate});var W=i2(t,k.tickCoord,$,n,v);W&&(v=k.tickCoord-t*($()/2+i),l[I]=md(md({},k),{},{isShow:!0}))},x=c-1;x>=0;x--)R(x);return l}function $2e(t,e,a,r,i,l){var c=(r||[]).slice(),n=c.length,v=e.start,R=e.end;if(l){var x=r[n-1],N=a(x,n-1),I=t*(x.coordinate+t*N/2-R);c[n-1]=x=md(md({},x),{},{tickCoord:I>0?x.coordinate-I*t:x.coordinate});var k=i2(t,x.tickCoord,function(){return N},v,R);k&&(R=x.tickCoord-t*(N/2+i),c[n-1]=md(md({},x),{},{isShow:!0}))}for(var Z=l?n-1:n,$=function(ee){var oe=c[ee],pe,le=function(){return pe===void 0&&(pe=a(oe,ee)),pe};if(ee===0){var ge=t*(oe.coordinate-t*le()/2-v);c[ee]=oe=md(md({},oe),{},{tickCoord:ge<0?oe.coordinate-ge*t:oe.coordinate})}else c[ee]=oe=md(md({},oe),{},{tickCoord:oe.coordinate});var ue=i2(t,oe.tickCoord,le,v,R);ue&&(v=oe.tickCoord+t*(le()/2+i),c[ee]=md(md({},oe),{},{isShow:!0}))},H=0;H<Z;H++)$(H);return c}function Z4(t,e,a){var r=t.tick,i=t.ticks,l=t.viewBox,c=t.minTickGap,n=t.orientation,v=t.interval,R=t.tickFormatter,x=t.unit,N=t.angle;if(!i||!i.length||!r)return[];if(Tr(v)||Zg.isSsr)return B2e(i,typeof v=="number"&&Tr(v)?v:0);var I=[],k=n==="top"||n==="bottom"?"width":"height",Z=x&&k==="width"?TR(x,{fontSize:e,letterSpacing:a}):{width:0,height:0},$=function(oe,pe){var le=Zn(R)?R(oe.value,pe):oe.value;return k==="width"?k2e(TR(le,{fontSize:e,letterSpacing:a}),Z,N):TR(le,{fontSize:e,letterSpacing:a})[k]},H=i.length>=2?lh(i[1].coordinate-i[0].coordinate):1,W=U2e(l,H,k);return v==="equidistantPreserveStart"?j2e(H,W,$,i,c):(v==="preserveStart"||v==="preserveStartEnd"?I=$2e(H,W,$,i,c,v==="preserveStartEnd"):I=H2e(H,W,$,i,c),I.filter(function(ee){return ee.isShow}))}var K2e=["viewBox"],W2e=["viewBox"],Y2e=["ticks"];function J_(t){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J_(t)}function n_(){return n_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},n_.apply(this,arguments)}function KZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ih(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?KZ(Object(a),!0).forEach(function(r){q4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):KZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function BD(t,e){if(t==null)return{};var a=X2e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function X2e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function J2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gee(r.key),r)}}function Q2e(t,e,a){return e&&WZ(t.prototype,e),a&&WZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function ePe(t,e,a){return e=s2(e),tPe(t,jee()?Reflect.construct(e,a||[],s2(t).constructor):e.apply(t,a))}function tPe(t,e){if(e&&(J_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aPe(t)}function aPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jee=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},s2(t)}function rPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VI(t,e)}function VI(t,e){return VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VI(t,e)}function q4(t,e,a){return e=Gee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Gee(t){var e=nPe(t,"string");return J_(e)=="symbol"?e:e+""}function nPe(t,e){if(J_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(J_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var x1=function(t){function e(a){var r;return J2e(this,e),r=ePe(this,e,[a]),r.state={fontSize:"",letterSpacing:""},r}return rPe(e,t),Q2e(e,[{key:"shouldComponentUpdate",value:function(r,i){var l=r.viewBox,c=BD(r,K2e),n=this.props,v=n.viewBox,R=BD(n,W2e);return!m_(l,v)||!m_(c,R)||!m_(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,l=i.x,c=i.y,n=i.width,v=i.height,R=i.orientation,x=i.tickSize,N=i.mirror,I=i.tickMargin,k,Z,$,H,W,ee,oe=N?-1:1,pe=r.tickSize||x,le=Tr(r.tickCoord)?r.tickCoord:r.coordinate;switch(R){case"top":k=Z=r.coordinate,H=c+ +!N*v,$=H-oe*pe,ee=$-oe*I,W=le;break;case"left":$=H=r.coordinate,Z=l+ +!N*n,k=Z-oe*pe,W=k-oe*I,ee=le;break;case"right":$=H=r.coordinate,Z=l+ +N*n,k=Z+oe*pe,W=k+oe*I,ee=le;break;default:k=Z=r.coordinate,H=c+ +N*v,$=H+oe*pe,ee=$+oe*I,W=le;break}return{line:{x1:k,y1:$,x2:Z,y2:H},tick:{x:W,y:ee}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,l=r.mirror,c;switch(i){case"left":c=l?"start":"end";break;case"right":c=l?"end":"start";break;default:c="middle";break}return c}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,l=r.mirror,c="end";switch(i){case"left":case"right":c="middle";break;case"top":c=l?"start":"end";break;default:c=l?"end":"start";break}return c}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.orientation,R=r.mirror,x=r.axisLine,N=ih(ih(ih({},yn(this.props,!1)),yn(x,!1)),{},{fill:"none"});if(v==="top"||v==="bottom"){var I=+(v==="top"&&!R||v==="bottom"&&R);N=ih(ih({},N),{},{x1:i,y1:l+I*n,x2:i+c,y2:l+I*n})}else{var k=+(v==="left"&&!R||v==="right"&&R);N=ih(ih({},N),{},{x1:i+k*c,y1:l,x2:i+k*c,y2:l+n})}return Vt.createElement("line",n_({},N,{className:mi("recharts-cartesian-axis-line",Rf(x,"className"))}))}},{key:"renderTicks",value:function(r,i,l){var c=this,n=this.props,v=n.tickLine,R=n.stroke,x=n.tick,N=n.tickFormatter,I=n.unit,k=Z4(ih(ih({},this.props),{},{ticks:r}),i,l),Z=this.getTickTextAnchor(),$=this.getTickVerticalAnchor(),H=yn(this.props,!1),W=yn(x,!1),ee=ih(ih({},H),{},{fill:"none"},yn(v,!1)),oe=k.map(function(pe,le){var ge=c.getTickLineCoord(pe),ue=ge.line,Re=ge.tick,we=ih(ih(ih(ih({textAnchor:Z,verticalAnchor:$},H),{},{stroke:"none",fill:R},W),Re),{},{index:le,payload:pe,visibleTicksCount:k.length,tickFormatter:N});return Vt.createElement(vi,n_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(pe.value,"-").concat(pe.coordinate,"-").concat(pe.tickCoord)},tA(c.props,pe,le)),v&&Vt.createElement("line",n_({},ee,ue,{className:mi("recharts-cartesian-axis-tick-line",Rf(v,"className"))})),x&&e.renderTickItem(x,we,"".concat(Zn(N)?N(pe.value,le):pe.value).concat(I||"")))});return Vt.createElement("g",{className:"recharts-cartesian-axis-ticks"},oe)}},{key:"render",value:function(){var r=this,i=this.props,l=i.axisLine,c=i.width,n=i.height,v=i.ticksGenerator,R=i.className,x=i.hide;if(x)return null;var N=this.props,I=N.ticks,k=BD(N,Y2e),Z=I;return Zn(v)&&(Z=I&&I.length>0?v(this.props):v(k)),c<=0||n<=0||!Z||!Z.length?null:Vt.createElement(vi,{className:mi("recharts-cartesian-axis",R),ref:function(H){r.layerReference=H}},l&&this.renderAxisLine(),this.renderTicks(Z,this.state.fontSize,this.state.letterSpacing),cc.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Vt.isValidElement(r)?c=Vt.cloneElement(r,i):Zn(r)?c=r(i):c=Vt.createElement(Lv,n_({},i,{className:"recharts-cartesian-axis-tick-value"}),l),c}}])}(ie.Component);q4(x1,"displayName","CartesianAxis");q4(x1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var iPe=["x1","y1","x2","y2","key"],sPe=["offset"];function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function YZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function _d(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?YZ(Object(a),!0).forEach(function(r){oPe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):YZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function oPe(t,e,a){return e=lPe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lPe(t){var e=uPe(t,"string");return Uv(e)=="symbol"?e:e+""}function uPe(t,e){if(Uv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Av(){return Av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Av.apply(this,arguments)}function XZ(t,e){if(t==null)return{};var a=cPe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cPe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var dPe=function(e){var a=e.fill;if(!a||a==="none")return null;var r=e.fillOpacity,i=e.x,l=e.y,c=e.width,n=e.height,v=e.ry;return Vt.createElement("rect",{x:i,y:l,ry:v,width:c,height:n,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Zee(t,e){var a;if(Vt.isValidElement(t))a=Vt.cloneElement(t,e);else if(Zn(t))a=t(e);else{var r=e.x1,i=e.y1,l=e.x2,c=e.y2,n=e.key,v=XZ(e,iPe),R=yn(v,!1);R.offset;var x=XZ(R,sPe);a=Vt.createElement("line",Av({},x,{x1:r,y1:i,x2:l,y2:c,fill:"none",key:n}))}return a}function hPe(t){var e=t.x,a=t.width,r=t.horizontal,i=r===void 0?!0:r,l=t.horizontalPoints;if(!i||!l||!l.length)return null;var c=l.map(function(n,v){var R=_d(_d({},t),{},{x1:e,y1:n,x2:e+a,y2:n,key:"line-".concat(v),index:v});return Zee(i,R)});return Vt.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function fPe(t){var e=t.y,a=t.height,r=t.vertical,i=r===void 0?!0:r,l=t.verticalPoints;if(!i||!l||!l.length)return null;var c=l.map(function(n,v){var R=_d(_d({},t),{},{x1:n,y1:e,x2:n,y2:e+a,key:"line-".concat(v),index:v});return Zee(i,R)});return Vt.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function pPe(t){var e=t.horizontalFill,a=t.fillOpacity,r=t.x,i=t.y,l=t.width,c=t.height,n=t.horizontalPoints,v=t.horizontal,R=v===void 0?!0:v;if(!R||!e||!e.length)return null;var x=n.map(function(I){return Math.round(I+i-i)}).sort(function(I,k){return I-k});i!==x[0]&&x.unshift(0);var N=x.map(function(I,k){var Z=!x[k+1],$=Z?i+c-I:x[k+1]-I;if($<=0)return null;var H=k%e.length;return Vt.createElement("rect",{key:"react-".concat(k),y:I,x:r,height:$,width:l,stroke:"none",fill:e[H],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Vt.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},N)}function mPe(t){var e=t.vertical,a=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,l=t.x,c=t.y,n=t.width,v=t.height,R=t.verticalPoints;if(!a||!r||!r.length)return null;var x=R.map(function(I){return Math.round(I+l-l)}).sort(function(I,k){return I-k});l!==x[0]&&x.unshift(0);var N=x.map(function(I,k){var Z=!x[k+1],$=Z?l+n-I:x[k+1]-I;if($<=0)return null;var H=k%r.length;return Vt.createElement("rect",{key:"react-".concat(k),x:I,y:c,width:$,height:v,stroke:"none",fill:r[H],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Vt.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},N)}var gPe=function(e,a){var r=e.xAxis,i=e.width,l=e.height,c=e.offset;return HQ(Z4(_d(_d(_d({},x1.defaultProps),r),{},{ticks:xg(r,!0),viewBox:{x:0,y:0,width:i,height:l}})),c.left,c.left+c.width,a)},yPe=function(e,a){var r=e.yAxis,i=e.width,l=e.height,c=e.offset;return HQ(Z4(_d(_d(_d({},x1.defaultProps),r),{},{ticks:xg(r,!0),viewBox:{x:0,y:0,width:i,height:l}})),c.top,c.top+c.height,a)},j0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Gp(t){var e,a,r,i,l,c,n=U4(),v=B4(),R=n2e(),x=_d(_d({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:j0.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:j0.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:j0.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:j0.horizontalFill,vertical:(l=t.vertical)!==null&&l!==void 0?l:j0.vertical,verticalFill:(c=t.verticalFill)!==null&&c!==void 0?c:j0.verticalFill,x:Tr(t.x)?t.x:R.left,y:Tr(t.y)?t.y:R.top,width:Tr(t.width)?t.width:R.width,height:Tr(t.height)?t.height:R.height}),N=x.x,I=x.y,k=x.width,Z=x.height,$=x.syncWithTicks,H=x.horizontalValues,W=x.verticalValues,ee=t2e(),oe=a2e();if(!Tr(k)||k<=0||!Tr(Z)||Z<=0||!Tr(N)||N!==+N||!Tr(I)||I!==+I)return null;var pe=x.verticalCoordinatesGenerator||gPe,le=x.horizontalCoordinatesGenerator||yPe,ge=x.horizontalPoints,ue=x.verticalPoints;if((!ge||!ge.length)&&Zn(le)){var Re=H&&H.length,we=le({yAxis:oe?_d(_d({},oe),{},{ticks:Re?H:oe.ticks}):void 0,width:n,height:v,offset:R},Re?!0:$);$p(Array.isArray(we),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Uv(we),"]")),Array.isArray(we)&&(ge=we)}if((!ue||!ue.length)&&Zn(pe)){var Ne=W&&W.length,ne=pe({xAxis:ee?_d(_d({},ee),{},{ticks:Ne?W:ee.ticks}):void 0,width:n,height:v,offset:R},Ne?!0:$);$p(Array.isArray(ne),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Uv(ne),"]")),Array.isArray(ne)&&(ue=ne)}return Vt.createElement("g",{className:"recharts-cartesian-grid"},Vt.createElement(dPe,{fill:x.fill,fillOpacity:x.fillOpacity,x:x.x,y:x.y,width:x.width,height:x.height,ry:x.ry}),Vt.createElement(hPe,Av({},x,{offset:R,horizontalPoints:ge,xAxis:ee,yAxis:oe})),Vt.createElement(fPe,Av({},x,{offset:R,verticalPoints:ue,xAxis:ee,yAxis:oe})),Vt.createElement(pPe,Av({},x,{horizontalPoints:ge})),Vt.createElement(mPe,Av({},x,{verticalPoints:ue})))}Gp.displayName="CartesianGrid";var APe=["type","layout","connectNulls","ref"],vPe=["key"];function Q_(t){"@babel/helpers - typeof";return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q_(t)}function JZ(t,e){if(t==null)return{};var a=_Pe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _Pe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ER(){return ER=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ER.apply(this,arguments)}function QZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function hf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?QZ(Object(a),!0).forEach(function(r){Zp(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):QZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function G0(t){return CPe(t)||TPe(t)||RPe(t)||wPe()}function wPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RPe(t,e){if(t){if(typeof t=="string")return zI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zI(t,e)}}function TPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CPe(t){if(Array.isArray(t))return zI(t)}function zI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function SPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eq(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hee(r.key),r)}}function bPe(t,e,a){return e&&eq(t.prototype,e),a&&eq(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function xPe(t,e,a){return e=o2(e),PPe(t,qee()?Reflect.construct(e,a||[],o2(t).constructor):e.apply(t,a))}function PPe(t,e){if(e&&(Q_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EPe(t)}function EPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qee=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},o2(t)}function NPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DI(t,e)}function DI(t,e){return DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DI(t,e)}function Zp(t,e,a){return e=Hee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Hee(t){var e=OPe(t,"string");return Q_(e)=="symbol"?e:e+""}function OPe(t,e){if(Q_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Q_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xv=function(t){function e(){var a;SPe(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=xPe(this,e,[].concat(i)),Zp(a,"state",{isAnimationFinished:!0,totalLength:0}),Zp(a,"generateSimpleStrokeDasharray",function(c,n){return"".concat(n,"px ").concat(c-n,"px")}),Zp(a,"getStrokeDasharray",function(c,n,v){var R=v.reduce(function(W,ee){return W+ee});if(!R)return a.generateSimpleStrokeDasharray(n,c);for(var x=Math.floor(c/R),N=c%R,I=n-c,k=[],Z=0,$=0;Z<v.length;$+=v[Z],++Z)if($+v[Z]>N){k=[].concat(G0(v.slice(0,Z)),[N-$]);break}var H=k.length%2===0?[0,I]:[I];return[].concat(G0(e.repeat(v,x)),G0(k),H).map(function(W){return"".concat(W,"px")}).join(", ")}),Zp(a,"id",hA("recharts-line-")),Zp(a,"pathRef",function(c){a.mainCurve=c}),Zp(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),Zp(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return NPe(e,t),bPe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.points,n=l.xAxis,v=l.yAxis,R=l.layout,x=l.children,N=mh(x,b1);if(!N)return null;var I=function($,H){return{x:$.x,y:$.y,value:$.value,errorVal:Fo($.payload,H)}},k={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Vt.createElement(vi,k,N.map(function(Z){return Vt.cloneElement(Z,{key:"bar-".concat(Z.props.dataKey),data:c,xAxis:n,yAxis:v,layout:R,dataPointFormatter:I})}))}},{key:"renderDots",value:function(r,i,l){var c=this.props.isAnimationActive;if(c&&!this.state.isAnimationFinished)return null;var n=this.props,v=n.dot,R=n.points,x=n.dataKey,N=yn(this.props,!1),I=yn(v,!0),k=R.map(function($,H){var W=hf(hf(hf({key:"dot-".concat(H),r:3},N),I),{},{value:$.value,dataKey:x,cx:$.x,cy:$.y,index:H,payload:$.payload});return e.renderDotItem(v,W)}),Z={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return Vt.createElement(vi,ER({className:"recharts-line-dots",key:"dots"},Z),k)}},{key:"renderCurveStatically",value:function(r,i,l,c){var n=this.props,v=n.type,R=n.layout,x=n.connectNulls;n.ref;var N=JZ(n,APe),I=hf(hf(hf({},yn(N,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(l,")"):null,points:r},c),{},{type:v,layout:R,connectNulls:x});return Vt.createElement(Yy,ER({},I,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var l=this,c=this.props,n=c.points,v=c.strokeDasharray,R=c.isAnimationActive,x=c.animationBegin,N=c.animationDuration,I=c.animationEasing,k=c.animationId,Z=c.animateNewValues,$=c.width,H=c.height,W=this.state,ee=W.prevPoints,oe=W.totalLength;return Vt.createElement(sp,{begin:x,duration:N,isActive:R,easing:I,from:{t:0},to:{t:1},key:"line-".concat(k),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(pe){var le=pe.t;if(ee){var ge=ee.length/n.length,ue=n.map(function(_e,ke){var Pe=Math.floor(ke*ge);if(ee[Pe]){var Ee=ee[Pe],De=gl(Ee.x,_e.x),qe=gl(Ee.y,_e.y);return hf(hf({},_e),{},{x:De(le),y:qe(le)})}if(Z){var Oe=gl($*2,_e.x),He=gl(H/2,_e.y);return hf(hf({},_e),{},{x:Oe(le),y:He(le)})}return hf(hf({},_e),{},{x:_e.x,y:_e.y})});return l.renderCurveStatically(ue,r,i)}var Re=gl(0,oe),we=Re(le),Ne;if(v){var ne="".concat(v).split(/[,\s]+/gim).map(function(_e){return parseFloat(_e)});Ne=l.getStrokeDasharray(we,oe,ne)}else Ne=l.generateSimpleStrokeDasharray(oe,we);return l.renderCurveStatically(n,r,i,{strokeDasharray:Ne})})}},{key:"renderCurve",value:function(r,i){var l=this.props,c=l.points,n=l.isAnimationActive,v=this.state,R=v.prevPoints,x=v.totalLength;return n&&c&&c.length&&(!R&&x>0||!aA(R,c))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(c,r,i)}},{key:"render",value:function(){var r,i=this.props,l=i.hide,c=i.dot,n=i.points,v=i.className,R=i.xAxis,x=i.yAxis,N=i.top,I=i.left,k=i.width,Z=i.height,$=i.isAnimationActive,H=i.id;if(l||!n||!n.length)return null;var W=this.state.isAnimationFinished,ee=n.length===1,oe=mi("recharts-line",v),pe=R&&R.allowDataOverflow,le=x&&x.allowDataOverflow,ge=pe||le,ue=qn(H)?this.id:H,Re=(r=yn(c,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},we=Re.r,Ne=we===void 0?3:we,ne=Re.strokeWidth,_e=ne===void 0?2:ne,ke=KX(c)?c:{},Pe=ke.clipDot,Ee=Pe===void 0?!0:Pe,De=Ne*2+_e;return Vt.createElement(vi,{className:oe},pe||le?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(ue)},Vt.createElement("rect",{x:pe?I:I-k/2,y:le?N:N-Z/2,width:pe?k:k*2,height:le?Z:Z*2})),!Ee&&Vt.createElement("clipPath",{id:"clipPath-dots-".concat(ue)},Vt.createElement("rect",{x:I-De/2,y:N-De/2,width:k+De,height:Z+De}))):null,!ee&&this.renderCurve(ge,ue),this.renderErrorBar(ge,ue),(ee||c)&&this.renderDots(ge,Ee,ue),(!$||W)&&np.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var l=r.length%2!==0?[].concat(G0(r),[0]):r,c=[],n=0;n<i;++n)c=[].concat(G0(c),G0(l));return c}},{key:"renderDotItem",value:function(r,i){var l;if(Vt.isValidElement(r))l=Vt.cloneElement(r,i);else if(Zn(r))l=r(i);else{var c=i.key,n=JZ(i,vPe),v=mi("recharts-line-dot",typeof r!="boolean"?r.className:"");l=Vt.createElement(wC,ER({key:c},n,{className:v}))}return l}}])}(ie.PureComponent);Zp(Xv,"displayName","Line");Zp(Xv,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Zg.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Zp(Xv,"getComposedData",function(t){var e=t.props,a=t.xAxis,r=t.yAxis,i=t.xAxisTicks,l=t.yAxisTicks,c=t.dataKey,n=t.bandSize,v=t.displayedData,R=t.offset,x=e.layout,N=v.map(function(I,k){var Z=Fo(I,c);return x==="horizontal"?{x:B_({axis:a,ticks:i,bandSize:n,entry:I,index:k}),y:qn(Z)?null:r.scale(Z),value:Z,payload:I}:{x:qn(Z)?null:a.scale(Z),y:B_({axis:r,ticks:l,bandSize:n,entry:I,index:k}),value:Z,payload:I}});return hf({points:N,layout:x},R)});var VPe=["layout","type","stroke","connectNulls","isRange","ref"],zPe=["key"],$ee;function e1(t){"@babel/helpers - typeof";return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e1(t)}function Kee(t,e){if(t==null)return{};var a=DPe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function DPe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function vv(){return vv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vv.apply(this,arguments)}function tq(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Ny(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?tq(Object(a),!0).forEach(function(r){Lm(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tq(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function MPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aq(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yee(r.key),r)}}function IPe(t,e,a){return e&&aq(t.prototype,e),a&&aq(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function LPe(t,e,a){return e=l2(e),FPe(t,Wee()?Reflect.construct(e,a||[],l2(t).constructor):e.apply(t,a))}function FPe(t,e){if(e&&(e1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kPe(t)}function kPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wee=function(){return!!t})()}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},l2(t)}function UPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MI(t,e)}function MI(t,e){return MI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MI(t,e)}function Lm(t,e,a){return e=Yee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Yee(t){var e=BPe(t,"string");return e1(e)=="symbol"?e:e+""}function BPe(t,e){if(e1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(e1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Af=function(t){function e(){var a;MPe(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=LPe(this,e,[].concat(i)),Lm(a,"state",{isAnimationFinished:!0}),Lm(a,"id",hA("recharts-area-")),Lm(a,"handleAnimationEnd",function(){var c=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Zn(c)&&c()}),Lm(a,"handleAnimationStart",function(){var c=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Zn(c)&&c()}),a}return UPe(e,t),IPe(e,[{key:"renderDots",value:function(r,i,l){var c=this.props.isAnimationActive,n=this.state.isAnimationFinished;if(c&&!n)return null;var v=this.props,R=v.dot,x=v.points,N=v.dataKey,I=yn(this.props,!1),k=yn(R,!0),Z=x.map(function(H,W){var ee=Ny(Ny(Ny({key:"dot-".concat(W),r:3},I),k),{},{index:W,cx:H.x,cy:H.y,dataKey:N,value:H.value,payload:H.payload,points:x});return e.renderDotItem(R,ee)}),$={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return Vt.createElement(vi,vv({className:"recharts-area-dots"},$),Z)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,l=i.baseLine,c=i.points,n=i.strokeWidth,v=c[0].x,R=c[c.length-1].x,x=r*Math.abs(v-R),N=By(c.map(function(I){return I.y||0}));return Tr(l)&&typeof l=="number"?N=Math.max(l,N):l&&Array.isArray(l)&&l.length&&(N=Math.max(By(l.map(function(I){return I.y||0})),N)),Tr(N)?Vt.createElement("rect",{x:v<R?v:v-x,y:0,width:x,height:Math.floor(N+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,l=i.baseLine,c=i.points,n=i.strokeWidth,v=c[0].y,R=c[c.length-1].y,x=r*Math.abs(v-R),N=By(c.map(function(I){return I.x||0}));return Tr(l)&&typeof l=="number"?N=Math.max(l,N):l&&Array.isArray(l)&&l.length&&(N=Math.max(By(l.map(function(I){return I.x||0})),N)),Tr(N)?Vt.createElement("rect",{x:0,y:v<R?v:v-x,width:N+(n?parseInt("".concat(n),10):1),height:Math.floor(x)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,l,c){var n=this.props,v=n.layout,R=n.type,x=n.stroke,N=n.connectNulls,I=n.isRange;n.ref;var k=Kee(n,VPe);return Vt.createElement(vi,{clipPath:l?"url(#clipPath-".concat(c,")"):null},Vt.createElement(Yy,vv({},yn(k,!0),{points:r,connectNulls:N,type:R,baseLine:i,layout:v,stroke:"none",className:"recharts-area-area"})),x!=="none"&&Vt.createElement(Yy,vv({},yn(this.props,!1),{className:"recharts-area-curve",layout:v,type:R,connectNulls:N,fill:"none",points:r})),x!=="none"&&I&&Vt.createElement(Yy,vv({},yn(this.props,!1),{className:"recharts-area-curve",layout:v,type:R,connectNulls:N,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var l=this,c=this.props,n=c.points,v=c.baseLine,R=c.isAnimationActive,x=c.animationBegin,N=c.animationDuration,I=c.animationEasing,k=c.animationId,Z=this.state,$=Z.prevPoints,H=Z.prevBaseLine;return Vt.createElement(sp,{begin:x,duration:N,isActive:R,easing:I,from:{t:0},to:{t:1},key:"area-".concat(k),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(W){var ee=W.t;if($){var oe=$.length/n.length,pe=n.map(function(Re,we){var Ne=Math.floor(we*oe);if($[Ne]){var ne=$[Ne],_e=gl(ne.x,Re.x),ke=gl(ne.y,Re.y);return Ny(Ny({},Re),{},{x:_e(ee),y:ke(ee)})}return Re}),le;if(Tr(v)&&typeof v=="number"){var ge=gl(H,v);le=ge(ee)}else if(qn(v)||w1(v)){var ue=gl(H,0);le=ue(ee)}else le=v.map(function(Re,we){var Ne=Math.floor(we*oe);if(H[Ne]){var ne=H[Ne],_e=gl(ne.x,Re.x),ke=gl(ne.y,Re.y);return Ny(Ny({},Re),{},{x:_e(ee),y:ke(ee)})}return Re});return l.renderAreaStatically(pe,le,r,i)}return Vt.createElement(vi,null,Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"animationClipPath-".concat(i)},l.renderClipRect(ee))),Vt.createElement(vi,{clipPath:"url(#animationClipPath-".concat(i,")")},l.renderAreaStatically(n,v,r,i)))})}},{key:"renderArea",value:function(r,i){var l=this.props,c=l.points,n=l.baseLine,v=l.isAnimationActive,R=this.state,x=R.prevPoints,N=R.prevBaseLine,I=R.totalLength;return v&&c&&c.length&&(!x&&I>0||!aA(x,c)||!aA(N,n))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(c,n,r,i)}},{key:"render",value:function(){var r,i=this.props,l=i.hide,c=i.dot,n=i.points,v=i.className,R=i.top,x=i.left,N=i.xAxis,I=i.yAxis,k=i.width,Z=i.height,$=i.isAnimationActive,H=i.id;if(l||!n||!n.length)return null;var W=this.state.isAnimationFinished,ee=n.length===1,oe=mi("recharts-area",v),pe=N&&N.allowDataOverflow,le=I&&I.allowDataOverflow,ge=pe||le,ue=qn(H)?this.id:H,Re=(r=yn(c,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},we=Re.r,Ne=we===void 0?3:we,ne=Re.strokeWidth,_e=ne===void 0?2:ne,ke=KX(c)?c:{},Pe=ke.clipDot,Ee=Pe===void 0?!0:Pe,De=Ne*2+_e;return Vt.createElement(vi,{className:oe},pe||le?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(ue)},Vt.createElement("rect",{x:pe?x:x-k/2,y:le?R:R-Z/2,width:pe?k:k*2,height:le?Z:Z*2})),!Ee&&Vt.createElement("clipPath",{id:"clipPath-dots-".concat(ue)},Vt.createElement("rect",{x:x-De/2,y:R-De/2,width:k+De,height:Z+De}))):null,ee?null:this.renderArea(ge,ue),(c||ee)&&this.renderDots(ge,Ee,ue),(!$||W)&&np.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(ie.PureComponent);$ee=Af;Lm(Af,"displayName","Area");Lm(Af,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Zg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Lm(Af,"getBaseValue",function(t,e,a,r){var i=t.layout,l=t.baseValue,c=e.props.baseValue,n=c??l;if(Tr(n)&&typeof n=="number")return n;var v=i==="horizontal"?r:a,R=v.scale.domain();if(v.type==="number"){var x=Math.max(R[0],R[1]),N=Math.min(R[0],R[1]);return n==="dataMin"?N:n==="dataMax"||x<0?x:Math.max(Math.min(R[0],R[1]),0)}return n==="dataMin"?R[0]:n==="dataMax"?R[1]:R[0]});Lm(Af,"getComposedData",function(t){var e=t.props,a=t.item,r=t.xAxis,i=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,n=t.bandSize,v=t.dataKey,R=t.stackedData,x=t.dataStartIndex,N=t.displayedData,I=t.offset,k=e.layout,Z=R&&R.length,$=$ee.getBaseValue(e,a,r,i),H=k==="horizontal",W=!1,ee=N.map(function(pe,le){var ge;Z?ge=R[x+le]:(ge=Fo(pe,v),Array.isArray(ge)?W=!0:ge=[$,ge]);var ue=ge[1]==null||Z&&Fo(pe,v)==null;return H?{x:B_({axis:r,ticks:l,bandSize:n,entry:pe,index:le}),y:ue?null:i.scale(ge[1]),value:ge,payload:pe}:{x:ue?null:r.scale(ge[1]),y:B_({axis:i,ticks:c,bandSize:n,entry:pe,index:le}),value:ge,payload:pe}}),oe;return Z||W?oe=ee.map(function(pe){var le=Array.isArray(pe.value)?pe.value[0]:null;return H?{x:pe.x,y:le!=null&&pe.y!=null?i.scale(le):null}:{x:le!=null?r.scale(le):null,y:pe.y}}):oe=H?i.scale($):r.scale($),Ny({points:ee,baseLine:oe,layout:k,isRange:W},I)});Lm(Af,"renderDotItem",function(t,e){var a;if(Vt.isValidElement(t))a=Vt.cloneElement(t,e);else if(Zn(t))a=t(e);else{var r=mi("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,l=Kee(e,zPe);a=Vt.createElement(wC,vv({},l,{key:i,className:r}))}return a});function t1(t){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t1(t)}function jPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GPe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qee(r.key),r)}}function ZPe(t,e,a){return e&&GPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qPe(t,e,a){return e=u2(e),HPe(t,Xee()?Reflect.construct(e,a||[],u2(t).constructor):e.apply(t,a))}function HPe(t,e){if(e&&(t1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Pe(t)}function $Pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xee=function(){return!!t})()}function u2(t){return u2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},u2(t)}function KPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&II(t,e)}function II(t,e){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},II(t,e)}function Jee(t,e,a){return e=Qee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Qee(t){var e=WPe(t,"string");return t1(e)=="symbol"?e:e+""}function WPe(t,e){if(t1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(t1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YP=function(t){function e(){return jPe(this,e),qPe(this,e,arguments)}return KPe(e,t),ZPe(e,[{key:"render",value:function(){return null}}])}(Vt.Component);Jee(YP,"displayName","ZAxis");Jee(YP,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var YPe=["option","isActive"];function NR(){return NR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},NR.apply(this,arguments)}function XPe(t,e){if(t==null)return{};var a=JPe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function JPe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function QPe(t){var e=t.option,a=t.isActive,r=XPe(t,YPe);return typeof e=="string"?Vt.createElement(Wx,NR({option:Vt.createElement(CP,NR({type:e},r)),isActive:a,shapeType:"symbols"},r)):Vt.createElement(Wx,NR({option:e,isActive:a,shapeType:"symbols"},r))}function a1(t){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a1(t)}function OR(){return OR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},OR.apply(this,arguments)}function rq(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Qf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?rq(Object(a),!0).forEach(function(r){Gy(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rq(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function eEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nq(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tte(r.key),r)}}function tEe(t,e,a){return e&&nq(t.prototype,e),a&&nq(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function aEe(t,e,a){return e=c2(e),rEe(t,ete()?Reflect.construct(e,a||[],c2(t).constructor):e.apply(t,a))}function rEe(t,e){if(e&&(a1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nEe(t)}function nEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ete(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ete=function(){return!!t})()}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},c2(t)}function iEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LI(t,e)}function Gy(t,e,a){return e=tte(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function tte(t){var e=sEe(t,"string");return a1(e)=="symbol"?e:e+""}function sEe(t,e){if(a1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(a1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var XP=function(t){function e(){var a;eEe(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=aEe(this,e,[].concat(i)),Gy(a,"state",{isAnimationFinished:!1}),Gy(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0})}),Gy(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1})}),Gy(a,"id",hA("recharts-scatter-")),a}return iEe(e,t),tEe(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,l=this.props,c=l.shape,n=l.activeShape,v=l.activeIndex,R=yn(this.props,!1);return r.map(function(x,N){var I=v===N,k=I?n:c,Z=Qf(Qf({},R),x);return Vt.createElement(vi,OR({className:"recharts-scatter-symbol",key:"symbol-".concat(x==null?void 0:x.cx,"-").concat(x==null?void 0:x.cy,"-").concat(x==null?void 0:x.size,"-").concat(N)},tA(i.props,x,N),{role:"img"}),Vt.createElement(QPe,OR({option:k,isActive:I,key:"symbol-".concat(N)},Z)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,l=i.points,c=i.isAnimationActive,n=i.animationBegin,v=i.animationDuration,R=i.animationEasing,x=i.animationId,N=this.state.prevPoints;return Vt.createElement(sp,{begin:n,duration:v,isActive:c,easing:R,from:{t:0},to:{t:1},key:"pie-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(I){var k=I.t,Z=l.map(function($,H){var W=N&&N[H];if(W){var ee=gl(W.cx,$.cx),oe=gl(W.cy,$.cy),pe=gl(W.size,$.size);return Qf(Qf({},$),{},{cx:ee(k),cy:oe(k),size:pe(k)})}var le=gl(0,$.size);return Qf(Qf({},$),{},{size:le(k)})});return Vt.createElement(vi,null,r.renderSymbolsStatically(Z))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,l=r.isAnimationActive,c=this.state.prevPoints;return l&&i&&i.length&&(!c||!aA(c,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,c=i.xAxis,n=i.yAxis,v=i.children,R=mh(v,b1);return R?R.map(function(x,N){var I=x.props,k=I.direction,Z=I.dataKey;return Vt.cloneElement(x,{key:"".concat(k,"-").concat(Z,"-").concat(l[N]),data:l,xAxis:c,yAxis:n,layout:k==="x"?"vertical":"horizontal",dataPointFormatter:function(H,W){return{x:H.cx,y:H.cy,value:k==="x"?+H.node.x:+H.node.y,errorVal:Fo(H,W)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,l=r.line,c=r.lineType,n=r.lineJointType,v=yn(this.props,!1),R=yn(l,!1),x,N;if(c==="joint")x=i.map(function(oe){return{x:oe.cx,y:oe.cy}});else if(c==="fitting"){var I=tge(i),k=I.xmin,Z=I.xmax,$=I.a,H=I.b,W=function(pe){return $*pe+H};x=[{x:k,y:W(k)},{x:Z,y:W(Z)}]}var ee=Qf(Qf(Qf({},v),{},{fill:"none",stroke:v&&v.fill},R),{},{points:x});return Vt.isValidElement(l)?N=Vt.cloneElement(l,ee):Zn(l)?N=l(ee):N=Vt.createElement(Yy,OR({},ee,{type:n})),Vt.createElement(vi,{className:"recharts-scatter-line",key:"recharts-scatter-line"},N)}},{key:"render",value:function(){var r=this.props,i=r.hide,l=r.points,c=r.line,n=r.className,v=r.xAxis,R=r.yAxis,x=r.left,N=r.top,I=r.width,k=r.height,Z=r.id,$=r.isAnimationActive;if(i||!l||!l.length)return null;var H=this.state.isAnimationFinished,W=mi("recharts-scatter",n),ee=v&&v.allowDataOverflow,oe=R&&R.allowDataOverflow,pe=ee||oe,le=qn(Z)?this.id:Z;return Vt.createElement(vi,{className:W,clipPath:pe?"url(#clipPath-".concat(le,")"):null},ee||oe?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(le)},Vt.createElement("rect",{x:ee?x:x-I/2,y:oe?N:N-k/2,width:ee?I:I*2,height:oe?k:k*2}))):null,c&&this.renderLine(),this.renderErrorBar(),Vt.createElement(vi,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!$||H)&&np.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])}(ie.PureComponent);Gy(XP,"displayName","Scatter");Gy(XP,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Zg.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Gy(XP,"getComposedData",function(t){var e=t.xAxis,a=t.yAxis,r=t.zAxis,i=t.item,l=t.displayedData,c=t.xAxisTicks,n=t.yAxisTicks,v=t.offset,R=i.props.tooltipType,x=mh(i.props.children,I_),N=qn(e.dataKey)?i.props.dataKey:e.dataKey,I=qn(a.dataKey)?i.props.dataKey:a.dataKey,k=r&&r.dataKey,Z=r?r.range:YP.defaultProps.range,$=Z&&Z[0],H=e.scale.bandwidth?e.scale.bandwidth():0,W=a.scale.bandwidth?a.scale.bandwidth():0,ee=l.map(function(oe,pe){var le=Fo(oe,N),ge=Fo(oe,I),ue=!qn(k)&&Fo(oe,k)||"-",Re=[{name:qn(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:le,payload:oe,dataKey:N,type:R},{name:qn(a.dataKey)?i.props.name:a.name||a.dataKey,unit:a.unit||"",value:ge,payload:oe,dataKey:I,type:R}];ue!=="-"&&Re.push({name:r.name||r.dataKey,unit:r.unit||"",value:ue,payload:oe,dataKey:k,type:R});var we=B_({axis:e,ticks:c,bandSize:H,entry:oe,index:pe,dataKey:N}),Ne=B_({axis:a,ticks:n,bandSize:W,entry:oe,index:pe,dataKey:I}),ne=ue!=="-"?r.scale(ue):$,_e=Math.sqrt(Math.max(ne,0)/Math.PI);return Qf(Qf({},oe),{},{cx:we,cy:Ne,x:we-_e,y:Ne-_e,xAxis:e,yAxis:a,zAxis:r,width:2*_e,height:2*_e,size:ne,node:{x:le,y:ge,z:ue},tooltipPayload:Re,tooltipPosition:{x:we,y:Ne},payload:oe},x&&x[pe]&&x[pe].props)});return Qf({points:ee},v)});function r1(t){"@babel/helpers - typeof";return r1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r1(t)}function oEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lEe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nte(r.key),r)}}function uEe(t,e,a){return e&&lEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cEe(t,e,a){return e=d2(e),dEe(t,ate()?Reflect.construct(e,a||[],d2(t).constructor):e.apply(t,a))}function dEe(t,e){if(e&&(r1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hEe(t)}function hEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ate(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ate=function(){return!!t})()}function d2(t){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},d2(t)}function fEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FI(t,e)}function FI(t,e){return FI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FI(t,e)}function rte(t,e,a){return e=nte(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nte(t){var e=pEe(t,"string");return r1(e)=="symbol"?e:e+""}function pEe(t,e){if(r1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(r1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},kI.apply(this,arguments)}function mEe(t){var e=t.xAxisId,a=U4(),r=B4(),i=zee(e);return i==null?null:Vt.createElement(x1,kI({},i,{className:mi("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(c){return xg(c,!0)}}))}var yd=function(t){function e(){return oEe(this,e),cEe(this,e,arguments)}return fEe(e,t),uEe(e,[{key:"render",value:function(){return Vt.createElement(mEe,this.props)}}])}(Vt.Component);rte(yd,"displayName","XAxis");rte(yd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function n1(t){"@babel/helpers - typeof";return n1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n1(t)}function gEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yEe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ote(r.key),r)}}function AEe(t,e,a){return e&&yEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vEe(t,e,a){return e=h2(e),_Ee(t,ite()?Reflect.construct(e,a||[],h2(t).constructor):e.apply(t,a))}function _Ee(t,e){if(e&&(n1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wEe(t)}function wEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ite(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ite=function(){return!!t})()}function h2(t){return h2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},h2(t)}function REe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UI(t,e)}function UI(t,e){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UI(t,e)}function ste(t,e,a){return e=ote(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ote(t){var e=TEe(t,"string");return n1(e)=="symbol"?e:e+""}function TEe(t,e){if(n1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(n1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function BI(){return BI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},BI.apply(this,arguments)}var CEe=function(e){var a=e.yAxisId,r=U4(),i=B4(),l=Dee(a);return l==null?null:Vt.createElement(x1,BI({},l,{className:mi("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(n){return xg(n,!0)}}))},Ad=function(t){function e(){return gEe(this,e),vEe(this,e,arguments)}return REe(e,t),AEe(e,[{key:"render",value:function(){return Vt.createElement(CEe,this.props)}}])}(Vt.Component);ste(Ad,"displayName","YAxis");ste(Ad,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function iq(t){return PEe(t)||xEe(t)||bEe(t)||SEe()}function SEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bEe(t,e){if(t){if(typeof t=="string")return jI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return jI(t,e)}}function xEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PEe(t){if(Array.isArray(t))return jI(t)}function jI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var GI=function(e,a,r,i,l){var c=mh(e,G4),n=mh(e,$P),v=[].concat(iq(c),iq(n)),R=mh(e,WP),x="".concat(i,"Id"),N=i[0],I=a;if(v.length&&(I=v.reduce(function($,H){if(H.props[x]===r&&Zm(H.props,"extendDomain")&&Tr(H.props[N])){var W=H.props[N];return[Math.min($[0],W),Math.max($[1],W)]}return $},I)),R.length){var k="".concat(N,"1"),Z="".concat(N,"2");I=R.reduce(function($,H){if(H.props[x]===r&&Zm(H.props,"extendDomain")&&Tr(H.props[k])&&Tr(H.props[Z])){var W=H.props[k],ee=H.props[Z];return[Math.min($[0],W,ee),Math.max($[1],W,ee)]}return $},I)}return l&&l.length&&(I=l.reduce(function($,H){return Tr(H)?[Math.min($[0],H),Math.max($[1],H)]:$},I)),I},jD={exports:{}},sq;function EEe(){return sq||(sq=1,function(t){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function i(v,R,x){this.fn=v,this.context=R,this.once=x||!1}function l(v,R,x,N,I){if(typeof x!="function")throw new TypeError("The listener must be a function");var k=new i(x,N||v,I),Z=a?a+R:R;return v._events[Z]?v._events[Z].fn?v._events[Z]=[v._events[Z],k]:v._events[Z].push(k):(v._events[Z]=k,v._eventsCount++),v}function c(v,R){--v._eventsCount===0?v._events=new r:delete v._events[R]}function n(){this._events=new r,this._eventsCount=0}n.prototype.eventNames=function(){var R=[],x,N;if(this._eventsCount===0)return R;for(N in x=this._events)e.call(x,N)&&R.push(a?N.slice(1):N);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(x)):R},n.prototype.listeners=function(R){var x=a?a+R:R,N=this._events[x];if(!N)return[];if(N.fn)return[N.fn];for(var I=0,k=N.length,Z=new Array(k);I<k;I++)Z[I]=N[I].fn;return Z},n.prototype.listenerCount=function(R){var x=a?a+R:R,N=this._events[x];return N?N.fn?1:N.length:0},n.prototype.emit=function(R,x,N,I,k,Z){var $=a?a+R:R;if(!this._events[$])return!1;var H=this._events[$],W=arguments.length,ee,oe;if(H.fn){switch(H.once&&this.removeListener(R,H.fn,void 0,!0),W){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,x),!0;case 3:return H.fn.call(H.context,x,N),!0;case 4:return H.fn.call(H.context,x,N,I),!0;case 5:return H.fn.call(H.context,x,N,I,k),!0;case 6:return H.fn.call(H.context,x,N,I,k,Z),!0}for(oe=1,ee=new Array(W-1);oe<W;oe++)ee[oe-1]=arguments[oe];H.fn.apply(H.context,ee)}else{var pe=H.length,le;for(oe=0;oe<pe;oe++)switch(H[oe].once&&this.removeListener(R,H[oe].fn,void 0,!0),W){case 1:H[oe].fn.call(H[oe].context);break;case 2:H[oe].fn.call(H[oe].context,x);break;case 3:H[oe].fn.call(H[oe].context,x,N);break;case 4:H[oe].fn.call(H[oe].context,x,N,I);break;default:if(!ee)for(le=1,ee=new Array(W-1);le<W;le++)ee[le-1]=arguments[le];H[oe].fn.apply(H[oe].context,ee)}}return!0},n.prototype.on=function(R,x,N){return l(this,R,x,N,!1)},n.prototype.once=function(R,x,N){return l(this,R,x,N,!0)},n.prototype.removeListener=function(R,x,N,I){var k=a?a+R:R;if(!this._events[k])return this;if(!x)return c(this,k),this;var Z=this._events[k];if(Z.fn)Z.fn===x&&(!I||Z.once)&&(!N||Z.context===N)&&c(this,k);else{for(var $=0,H=[],W=Z.length;$<W;$++)(Z[$].fn!==x||I&&!Z[$].once||N&&Z[$].context!==N)&&H.push(Z[$]);H.length?this._events[k]=H.length===1?H[0]:H:c(this,k)}return this},n.prototype.removeAllListeners=function(R){var x;return R?(x=a?a+R:R,this._events[x]&&c(this,x)):(this._events=new r,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=a,n.EventEmitter=n,t.exports=n}(jD)),jD.exports}var NEe=EEe();const OEe=ss(NEe);var GD=new OEe,ZD="recharts.syncMouseEvents";function DT(t){"@babel/helpers - typeof";return DT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DT(t)}function VEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zEe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lte(r.key),r)}}function DEe(t,e,a){return e&&zEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qD(t,e,a){return e=lte(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lte(t){var e=MEe(t,"string");return DT(e)=="symbol"?e:e+""}function MEe(t,e){if(DT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(DT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var IEe=function(){function t(){VEe(this,t),qD(this,"activeIndex",0),qD(this,"coordinateList",[]),qD(this,"layout","horizontal")}return DEe(t,[{key:"setDetails",value:function(a){var r,i=a.coordinateList,l=i===void 0?null:i,c=a.container,n=c===void 0?null:c,v=a.layout,R=v===void 0?null:v,x=a.offset,N=x===void 0?null:x,I=a.mouseHandlerCallback,k=I===void 0?null:I;this.coordinateList=(r=l??this.coordinateList)!==null&&r!==void 0?r:[],this.container=n??this.container,this.layout=R??this.layout,this.offset=N??this.offset,this.mouseHandlerCallback=k??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),l=i.x,c=i.y,n=i.height,v=this.coordinateList[this.activeIndex].coordinate,R=((a=window)===null||a===void 0?void 0:a.scrollX)||0,x=((r=window)===null||r===void 0?void 0:r.scrollY)||0,N=l+v+R,I=c+this.offset.top+n/2+x;this.mouseHandlerCallback({pageX:N,pageY:I})}}}])}();function LEe(t,e,a){if(a==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Tr(r)&&Tr(i))return!0}return!1}function FEe(t,e,a,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:a.left+.5,y:t==="horizontal"?a.top+.5:e.y-i,width:t==="horizontal"?r:a.width-1,height:t==="horizontal"?a.height-1:r}}function ute(t){var e=t.cx,a=t.cy,r=t.radius,i=t.startAngle,l=t.endAngle,c=Po(e,a,r,i),n=Po(e,a,r,l);return{points:[c,n],cx:e,cy:a,radius:r,startAngle:i,endAngle:l}}function kEe(t,e,a){var r,i,l,c;if(t==="horizontal")r=e.x,l=r,i=a.top,c=a.top+a.height;else if(t==="vertical")i=e.y,c=i,r=a.left,l=a.left+a.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var n=e.cx,v=e.cy,R=e.innerRadius,x=e.outerRadius,N=e.angle,I=Po(n,v,R,N),k=Po(n,v,x,N);r=I.x,i=I.y,l=k.x,c=k.y}else return ute(e);return[{x:r,y:i},{x:l,y:c}]}function MT(t){"@babel/helpers - typeof";return MT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MT(t)}function oq(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ib(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?oq(Object(a),!0).forEach(function(r){UEe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):oq(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function UEe(t,e,a){return e=BEe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function BEe(t){var e=jEe(t,"string");return MT(e)=="symbol"?e:e+""}function jEe(t,e){if(MT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(MT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GEe(t){var e,a,r=t.element,i=t.tooltipEventType,l=t.isActive,c=t.activeCoordinate,n=t.activePayload,v=t.offset,R=t.activeTooltipIndex,x=t.tooltipAxisBandSize,N=t.layout,I=t.chartName,k=(e=r.props.cursor)!==null&&e!==void 0?e:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!k||!l||!c||I!=="ScatterChart"&&i!=="axis")return null;var Z,$=Yy;if(I==="ScatterChart")Z=c,$=MSe;else if(I==="BarChart")Z=FEe(N,c,v,x),$=I4;else if(N==="radial"){var H=ute(c),W=H.cx,ee=H.cy,oe=H.radius,pe=H.startAngle,le=H.endAngle;Z={cx:W,cy:ee,startAngle:pe,endAngle:le,innerRadius:oe,outerRadius:oe},$=ree}else Z={points:kEe(N,c,v)},$=Yy;var ge=ib(ib(ib(ib({stroke:"#ccc",pointerEvents:"none"},v),Z),yn(k,!1)),{},{payload:n,payloadIndex:R,className:mi("recharts-tooltip-cursor",k.className)});return ie.isValidElement(k)?ie.cloneElement(k,ge):ie.createElement($,ge)}var ZEe=["item"],qEe=["children","className","width","height","style","compact","title","desc"];function i1(t){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(t)}function i_(){return i_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},i_.apply(this,arguments)}function lq(t,e){return KEe(t)||$Ee(t,e)||dte(t,e)||HEe()}function HEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ee(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function KEe(t){if(Array.isArray(t))return t}function uq(t,e){if(t==null)return{};var a=WEe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function WEe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function YEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XEe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hte(r.key),r)}}function JEe(t,e,a){return e&&XEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QEe(t,e,a){return e=f2(e),eNe(t,cte()?Reflect.construct(e,a||[],f2(t).constructor):e.apply(t,a))}function eNe(t,e){if(e&&(i1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tNe(t)}function tNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cte=function(){return!!t})()}function f2(t){return f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},f2(t)}function aNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZI(t,e)}function ZI(t,e){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZI(t,e)}function s1(t){return iNe(t)||nNe(t)||dte(t)||rNe()}function rNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dte(t,e){if(t){if(typeof t=="string")return qI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qI(t,e)}}function nNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iNe(t){if(Array.isArray(t))return qI(t)}function qI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function cq(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Ya(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?cq(Object(a),!0).forEach(function(r){Kn(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cq(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Kn(t,e,a){return e=hte(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function hte(t){var e=sNe(t,"string");return i1(e)=="symbol"?e:e+""}function sNe(t,e){if(i1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(i1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oNe={xAxis:["bottom","top"],yAxis:["left","right"]},lNe={width:"100%",height:"100%"},fte={x:0,y:0};function sb(t){return t}var uNe=function(e,a){return a==="horizontal"?e.x:a==="vertical"?e.y:a==="centric"?e.angle:e.radius},cNe=function(e,a,r,i){var l=a.find(function(x){return x&&x.index===r});if(l){if(e==="horizontal")return{x:l.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:l.coordinate};if(e==="centric"){var c=l.coordinate,n=i.radius;return Ya(Ya(Ya({},i),Po(i.cx,i.cy,n,c)),{},{angle:c,radius:n})}var v=l.coordinate,R=i.angle;return Ya(Ya(Ya({},i),Po(i.cx,i.cy,v,R)),{},{angle:R,radius:v})}return fte},JP=function(e,a){var r=a.graphicalItems,i=a.dataStartIndex,l=a.dataEndIndex,c=(r??[]).reduce(function(n,v){var R=v.props.data;return R&&R.length?[].concat(s1(n),s1(R)):n},[]);return c.length>0?c:e&&e.length&&Tr(i)&&Tr(l)?e.slice(i,l+1):[]};function pte(t){return t==="number"?[0,"auto"]:void 0}var HI=function(e,a,r,i){var l=e.graphicalItems,c=e.tooltipAxis,n=JP(a,e);return r<0||!l||!l.length||r>=n.length?null:l.reduce(function(v,R){var x,N=(x=R.props.data)!==null&&x!==void 0?x:a;N&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(N=N.slice(e.dataStartIndex,e.dataEndIndex+1));var I;if(c.dataKey&&!c.allowDuplicatedCategory){var k=N===void 0?n:N;I=fx(k,c.dataKey,i)}else I=N&&N[r]||n[r];return I?[].concat(s1(v),[XQ(R,I)]):v},[])},dq=function(e,a,r,i){var l=i||{x:e.chartX,y:e.chartY},c=uNe(l,r),n=e.orderedTooltipTicks,v=e.tooltipAxis,R=e.tooltipTicks,x=sRe(c,n,R,v);if(x>=0&&R){var N=R[x]&&R[x].value,I=HI(e,a,x,N),k=cNe(r,n,x,l);return{activeTooltipIndex:x,activeLabel:N,activePayload:I,activeCoordinate:k}}return null},dNe=function(e,a){var r=a.axes,i=a.graphicalItems,l=a.axisType,c=a.axisIdKey,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.layout,N=e.children,I=e.stackOffset,k=qQ(x,l);return r.reduce(function(Z,$){var H,W=$.type.defaultProps!==void 0?Ya(Ya({},$.type.defaultProps),$.props):$.props,ee=W.type,oe=W.dataKey,pe=W.allowDataOverflow,le=W.allowDuplicatedCategory,ge=W.scale,ue=W.ticks,Re=W.includeHidden,we=W[c];if(Z[we])return Z;var Ne=JP(e.data,{graphicalItems:i.filter(function(Se){var Ie,je=c in Se.props?Se.props[c]:(Ie=Se.type.defaultProps)===null||Ie===void 0?void 0:Ie[c];return je===we}),dataStartIndex:v,dataEndIndex:R}),ne=Ne.length,_e,ke,Pe;LEe(W.domain,pe,ee)&&(_e=rI(W.domain,null,pe),k&&(ee==="number"||ge!=="auto")&&(Pe=SR(Ne,oe,"category")));var Ee=pte(ee);if(!_e||_e.length===0){var De,qe=(De=W.domain)!==null&&De!==void 0?De:Ee;if(oe){if(_e=SR(Ne,oe,ee),ee==="category"&&k){var Oe=ege(_e);le&&Oe?(ke=_e,_e=Xx(0,ne)):le||(_e=o9(qe,_e,$).reduce(function(Se,Ie){return Se.indexOf(Ie)>=0?Se:[].concat(s1(Se),[Ie])},[]))}else if(ee==="category")le?_e=_e.filter(function(Se){return Se!==""&&!qn(Se)}):_e=o9(qe,_e,$).reduce(function(Se,Ie){return Se.indexOf(Ie)>=0||Ie===""||qn(Ie)?Se:[].concat(s1(Se),[Ie])},[]);else if(ee==="number"){var He=dRe(Ne,i.filter(function(Se){var Ie,je,Ze=c in Se.props?Se.props[c]:(Ie=Se.type.defaultProps)===null||Ie===void 0?void 0:Ie[c],Be="hide"in Se.props?Se.props.hide:(je=Se.type.defaultProps)===null||je===void 0?void 0:je.hide;return Ze===we&&(Re||!Be)}),oe,l,x);He&&(_e=He)}k&&(ee==="number"||ge!=="auto")&&(Pe=SR(Ne,oe,"category"))}else k?_e=Xx(0,ne):n&&n[we]&&n[we].hasStack&&ee==="number"?_e=I==="expand"?[0,1]:YQ(n[we].stackGroups,v,R):_e=ZQ(Ne,i.filter(function(Se){var Ie=c in Se.props?Se.props[c]:Se.type.defaultProps[c],je="hide"in Se.props?Se.props.hide:Se.type.defaultProps.hide;return Ie===we&&(Re||!je)}),ee,x,!0);if(ee==="number")_e=GI(N,_e,we,l,ue),qe&&(_e=rI(qe,_e,pe));else if(ee==="category"&&qe){var Ue=qe,ct=_e.every(function(Se){return Ue.indexOf(Se)>=0});ct&&(_e=Ue)}}return Ya(Ya({},Z),{},Kn({},we,Ya(Ya({},W),{},{axisType:l,domain:_e,categoricalDomain:Pe,duplicateDomain:ke,originalDomain:(H=W.domain)!==null&&H!==void 0?H:Ee,isCategorical:k,layout:x})))},{})},hNe=function(e,a){var r=a.graphicalItems,i=a.Axis,l=a.axisType,c=a.axisIdKey,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.layout,N=e.children,I=JP(e.data,{graphicalItems:r,dataStartIndex:v,dataEndIndex:R}),k=I.length,Z=qQ(x,l),$=-1;return r.reduce(function(H,W){var ee=W.type.defaultProps!==void 0?Ya(Ya({},W.type.defaultProps),W.props):W.props,oe=ee[c],pe=pte("number");if(!H[oe]){$++;var le;return Z?le=Xx(0,k):n&&n[oe]&&n[oe].hasStack?(le=YQ(n[oe].stackGroups,v,R),le=GI(N,le,oe,l)):(le=rI(pe,ZQ(I,r.filter(function(ge){var ue,Re,we=c in ge.props?ge.props[c]:(ue=ge.type.defaultProps)===null||ue===void 0?void 0:ue[c],Ne="hide"in ge.props?ge.props.hide:(Re=ge.type.defaultProps)===null||Re===void 0?void 0:Re.hide;return we===oe&&!Ne}),"number",x),i.defaultProps.allowDataOverflow),le=GI(N,le,oe,l)),Ya(Ya({},H),{},Kn({},oe,Ya(Ya({axisType:l},i.defaultProps),{},{hide:!0,orientation:Rf(oNe,"".concat(l,".").concat($%2),null),domain:le,originalDomain:pe,isCategorical:Z,layout:x})))}return H},{})},fNe=function(e,a){var r=a.axisType,i=r===void 0?"xAxis":r,l=a.AxisComp,c=a.graphicalItems,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.children,N="".concat(i,"Id"),I=mh(x,l),k={};return I&&I.length?k=dNe(e,{axes:I,graphicalItems:c,axisType:i,axisIdKey:N,stackGroups:n,dataStartIndex:v,dataEndIndex:R}):c&&c.length&&(k=hNe(e,{Axis:l,graphicalItems:c,axisType:i,axisIdKey:N,stackGroups:n,dataStartIndex:v,dataEndIndex:R})),k},pNe=function(e){var a=ky(e),r=xg(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:u4(r,function(i){return i.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Fx(a,r)}},hq=function(e){var a=e.children,r=e.defaultShowTooltip,i=pf(a,$_),l=0,c=0;return e.data&&e.data.length!==0&&(c=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(l=i.props.startIndex),i.props.endIndex>=0&&(c=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:c,activeTooltipIndex:-1,isTooltipActive:!!r}},mNe=function(e){return!e||!e.length?!1:e.some(function(a){var r=Ng(a&&a.type);return r&&r.indexOf("Bar")>=0})},fq=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},gNe=function(e,a){var r=e.props,i=e.graphicalItems,l=e.xAxisMap,c=l===void 0?{}:l,n=e.yAxisMap,v=n===void 0?{}:n,R=r.width,x=r.height,N=r.children,I=r.margin||{},k=pf(N,$_),Z=pf(N,mf),$=Object.keys(v).reduce(function(le,ge){var ue=v[ge],Re=ue.orientation;return!ue.mirror&&!ue.hide?Ya(Ya({},le),{},Kn({},Re,le[Re]+ue.width)):le},{left:I.left||0,right:I.right||0}),H=Object.keys(c).reduce(function(le,ge){var ue=c[ge],Re=ue.orientation;return!ue.mirror&&!ue.hide?Ya(Ya({},le),{},Kn({},Re,Rf(le,"".concat(Re))+ue.height)):le},{top:I.top||0,bottom:I.bottom||0}),W=Ya(Ya({},H),$),ee=W.bottom;k&&(W.bottom+=k.props.height||$_.defaultProps.height),Z&&a&&(W=uRe(W,i,r,a));var oe=R-W.left-W.right,pe=x-W.top-W.bottom;return Ya(Ya({brushBottom:ee},W),{},{width:Math.max(oe,0),height:Math.max(pe,0)})},yNe=function(e,a){if(a==="xAxis")return e[a].width;if(a==="yAxis")return e[a].height},RC=function(e){var a=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,l=i===void 0?"axis":i,c=e.validateTooltipEventTypes,n=c===void 0?["axis"]:c,v=e.axisComponents,R=e.legendContent,x=e.formatAxisMap,N=e.defaultProps,I=function(W,ee){var oe=ee.graphicalItems,pe=ee.stackGroups,le=ee.offset,ge=ee.updateId,ue=ee.dataStartIndex,Re=ee.dataEndIndex,we=W.barSize,Ne=W.layout,ne=W.barGap,_e=W.barCategoryGap,ke=W.maxBarSize,Pe=fq(Ne),Ee=Pe.numericAxisName,De=Pe.cateAxisName,qe=mNe(oe),Oe=[];return oe.forEach(function(He,Ue){var ct=JP(W.data,{graphicalItems:[He],dataStartIndex:ue,dataEndIndex:Re}),Se=He.type.defaultProps!==void 0?Ya(Ya({},He.type.defaultProps),He.props):He.props,Ie=Se.dataKey,je=Se.maxBarSize,Ze=Se["".concat(Ee,"Id")],Be=Se["".concat(De,"Id")],Je={},dt=v.reduce(function(ur,or){var Cr=ee["".concat(or.axisType,"Map")],Ia=Se["".concat(or.axisType,"Id")];Cr&&Cr[Ia]||or.axisType==="zAxis"||kv();var Fr=Cr[Ia];return Ya(Ya({},ur),{},Kn(Kn({},or.axisType,Fr),"".concat(or.axisType,"Ticks"),xg(Fr)))},Je),ut=dt[De],Ae=dt["".concat(De,"Ticks")],Dt=pe&&pe[Ze]&&pe[Ze].hasStack&&_Re(He,pe[Ze].stackGroups),Lt=Ng(He.type).indexOf("Bar")>=0,fa=Fx(ut,Ae),Nt=[],Ht=qe&&oRe({barSize:we,stackGroups:pe,totalSize:yNe(dt,De)});if(Lt){var wt,fr,Ca=qn(je)?ke:je,za=(wt=(fr=Fx(ut,Ae,!0))!==null&&fr!==void 0?fr:Ca)!==null&&wt!==void 0?wt:0;Nt=lRe({barGap:ne,barCategoryGap:_e,bandSize:za!==fa?za:fa,sizeList:Ht[Be],maxBarSize:Ca}),za!==fa&&(Nt=Nt.map(function(ur){return Ya(Ya({},ur),{},{position:Ya(Ya({},ur.position),{},{offset:ur.position.offset-za/2})})}))}var ar=He&&He.type&&He.type.getComposedData;ar&&Oe.push({props:Ya(Ya({},ar(Ya(Ya({},dt),{},{displayedData:ct,props:W,dataKey:Ie,item:He,bandSize:fa,barPosition:Nt,offset:le,stackedData:Dt,layout:Ne,dataStartIndex:ue,dataEndIndex:Re}))),{},Kn(Kn(Kn({key:He.key||"item-".concat(Ue)},Ee,dt[Ee]),De,dt[De]),"animationId",ge)),childIndex:hge(He,W.children),item:He})}),Oe},k=function(W,ee){var oe=W.props,pe=W.dataStartIndex,le=W.dataEndIndex,ge=W.updateId;if(!R8({props:oe}))return null;var ue=oe.children,Re=oe.layout,we=oe.stackOffset,Ne=oe.data,ne=oe.reverseStackOrder,_e=fq(Re),ke=_e.numericAxisName,Pe=_e.cateAxisName,Ee=mh(ue,r),De=ARe(Ne,Ee,"".concat(ke,"Id"),"".concat(Pe,"Id"),we,ne),qe=v.reduce(function(Se,Ie){var je="".concat(Ie.axisType,"Map");return Ya(Ya({},Se),{},Kn({},je,fNe(oe,Ya(Ya({},Ie),{},{graphicalItems:Ee,stackGroups:Ie.axisType===ke&&De,dataStartIndex:pe,dataEndIndex:le}))))},{}),Oe=gNe(Ya(Ya({},qe),{},{props:oe,graphicalItems:Ee}),ee==null?void 0:ee.legendBBox);Object.keys(qe).forEach(function(Se){qe[Se]=x(oe,qe[Se],Oe,Se.replace("Map",""),a)});var He=qe["".concat(Pe,"Map")],Ue=pNe(He),ct=I(oe,Ya(Ya({},qe),{},{dataStartIndex:pe,dataEndIndex:le,updateId:ge,graphicalItems:Ee,stackGroups:De,offset:Oe}));return Ya(Ya({formattedGraphicalItems:ct,graphicalItems:Ee,offset:Oe,stackGroups:De},Ue),qe)},Z=function(H){function W(ee){var oe,pe,le;return YEe(this,W),le=QEe(this,W,[ee]),Kn(le,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kn(le,"accessibilityManager",new IEe),Kn(le,"handleLegendBBoxUpdate",function(ge){if(ge){var ue=le.state,Re=ue.dataStartIndex,we=ue.dataEndIndex,Ne=ue.updateId;le.setState(Ya({legendBBox:ge},k({props:le.props,dataStartIndex:Re,dataEndIndex:we,updateId:Ne},Ya(Ya({},le.state),{},{legendBBox:ge}))))}}),Kn(le,"handleReceiveSyncEvent",function(ge,ue,Re){if(le.props.syncId===ge){if(Re===le.eventEmitterSymbol&&typeof le.props.syncMethod!="function")return;le.applySyncEvent(ue)}}),Kn(le,"handleBrushChange",function(ge){var ue=ge.startIndex,Re=ge.endIndex;if(ue!==le.state.dataStartIndex||Re!==le.state.dataEndIndex){var we=le.state.updateId;le.setState(function(){return Ya({dataStartIndex:ue,dataEndIndex:Re},k({props:le.props,dataStartIndex:ue,dataEndIndex:Re,updateId:we},le.state))}),le.triggerSyncEvent({dataStartIndex:ue,dataEndIndex:Re})}}),Kn(le,"handleMouseEnter",function(ge){var ue=le.getMouseInfo(ge);if(ue){var Re=Ya(Ya({},ue),{},{isTooltipActive:!0});le.setState(Re),le.triggerSyncEvent(Re);var we=le.props.onMouseEnter;Zn(we)&&we(Re,ge)}}),Kn(le,"triggeredAfterMouseMove",function(ge){var ue=le.getMouseInfo(ge),Re=ue?Ya(Ya({},ue),{},{isTooltipActive:!0}):{isTooltipActive:!1};le.setState(Re),le.triggerSyncEvent(Re);var we=le.props.onMouseMove;Zn(we)&&we(Re,ge)}),Kn(le,"handleItemMouseEnter",function(ge){le.setState(function(){return{isTooltipActive:!0,activeItem:ge,activePayload:ge.tooltipPayload,activeCoordinate:ge.tooltipPosition||{x:ge.cx,y:ge.cy}}})}),Kn(le,"handleItemMouseLeave",function(){le.setState(function(){return{isTooltipActive:!1}})}),Kn(le,"handleMouseMove",function(ge){ge.persist(),le.throttleTriggeredAfterMouseMove(ge)}),Kn(le,"handleMouseLeave",function(ge){le.throttleTriggeredAfterMouseMove.cancel();var ue={isTooltipActive:!1};le.setState(ue),le.triggerSyncEvent(ue);var Re=le.props.onMouseLeave;Zn(Re)&&Re(ue,ge)}),Kn(le,"handleOuterEvent",function(ge){var ue=dge(ge),Re=Rf(le.props,"".concat(ue));if(ue&&Zn(Re)){var we,Ne;/.*touch.*/i.test(ue)?Ne=le.getMouseInfo(ge.changedTouches[0]):Ne=le.getMouseInfo(ge),Re((we=Ne)!==null&&we!==void 0?we:{},ge)}}),Kn(le,"handleClick",function(ge){var ue=le.getMouseInfo(ge);if(ue){var Re=Ya(Ya({},ue),{},{isTooltipActive:!0});le.setState(Re),le.triggerSyncEvent(Re);var we=le.props.onClick;Zn(we)&&we(Re,ge)}}),Kn(le,"handleMouseDown",function(ge){var ue=le.props.onMouseDown;if(Zn(ue)){var Re=le.getMouseInfo(ge);ue(Re,ge)}}),Kn(le,"handleMouseUp",function(ge){var ue=le.props.onMouseUp;if(Zn(ue)){var Re=le.getMouseInfo(ge);ue(Re,ge)}}),Kn(le,"handleTouchMove",function(ge){ge.changedTouches!=null&&ge.changedTouches.length>0&&le.throttleTriggeredAfterMouseMove(ge.changedTouches[0])}),Kn(le,"handleTouchStart",function(ge){ge.changedTouches!=null&&ge.changedTouches.length>0&&le.handleMouseDown(ge.changedTouches[0])}),Kn(le,"handleTouchEnd",function(ge){ge.changedTouches!=null&&ge.changedTouches.length>0&&le.handleMouseUp(ge.changedTouches[0])}),Kn(le,"handleDoubleClick",function(ge){var ue=le.props.onDoubleClick;if(Zn(ue)){var Re=le.getMouseInfo(ge);ue(Re,ge)}}),Kn(le,"handleContextMenu",function(ge){var ue=le.props.onContextMenu;if(Zn(ue)){var Re=le.getMouseInfo(ge);ue(Re,ge)}}),Kn(le,"triggerSyncEvent",function(ge){le.props.syncId!==void 0&&GD.emit(ZD,le.props.syncId,ge,le.eventEmitterSymbol)}),Kn(le,"applySyncEvent",function(ge){var ue=le.props,Re=ue.layout,we=ue.syncMethod,Ne=le.state.updateId,ne=ge.dataStartIndex,_e=ge.dataEndIndex;if(ge.dataStartIndex!==void 0||ge.dataEndIndex!==void 0)le.setState(Ya({dataStartIndex:ne,dataEndIndex:_e},k({props:le.props,dataStartIndex:ne,dataEndIndex:_e,updateId:Ne},le.state)));else if(ge.activeTooltipIndex!==void 0){var ke=ge.chartX,Pe=ge.chartY,Ee=ge.activeTooltipIndex,De=le.state,qe=De.offset,Oe=De.tooltipTicks;if(!qe)return;if(typeof we=="function")Ee=we(Oe,ge);else if(we==="value"){Ee=-1;for(var He=0;He<Oe.length;He++)if(Oe[He].value===ge.activeLabel){Ee=He;break}}var Ue=Ya(Ya({},qe),{},{x:qe.left,y:qe.top}),ct=Math.min(ke,Ue.x+Ue.width),Se=Math.min(Pe,Ue.y+Ue.height),Ie=Oe[Ee]&&Oe[Ee].value,je=HI(le.state,le.props.data,Ee),Ze=Oe[Ee]?{x:Re==="horizontal"?Oe[Ee].coordinate:ct,y:Re==="horizontal"?Se:Oe[Ee].coordinate}:fte;le.setState(Ya(Ya({},ge),{},{activeLabel:Ie,activeCoordinate:Ze,activePayload:je,activeTooltipIndex:Ee}))}else le.setState(ge)}),Kn(le,"renderCursor",function(ge){var ue,Re=le.state,we=Re.isTooltipActive,Ne=Re.activeCoordinate,ne=Re.activePayload,_e=Re.offset,ke=Re.activeTooltipIndex,Pe=Re.tooltipAxisBandSize,Ee=le.getTooltipEventType(),De=(ue=ge.props.active)!==null&&ue!==void 0?ue:we,qe=le.props.layout,Oe=ge.key||"_recharts-cursor";return Vt.createElement(GEe,{key:Oe,activeCoordinate:Ne,activePayload:ne,activeTooltipIndex:ke,chartName:a,element:ge,isActive:De,layout:qe,offset:_e,tooltipAxisBandSize:Pe,tooltipEventType:Ee})}),Kn(le,"renderPolarAxis",function(ge,ue,Re){var we=Rf(ge,"type.axisType"),Ne=Rf(le.state,"".concat(we,"Map")),ne=ge.type.defaultProps,_e=ne!==void 0?Ya(Ya({},ne),ge.props):ge.props,ke=Ne&&Ne[_e["".concat(we,"Id")]];return ie.cloneElement(ge,Ya(Ya({},ke),{},{className:mi(we,ke.className),key:ge.key||"".concat(ue,"-").concat(Re),ticks:xg(ke,!0)}))}),Kn(le,"renderPolarGrid",function(ge){var ue=ge.props,Re=ue.radialLines,we=ue.polarAngles,Ne=ue.polarRadius,ne=le.state,_e=ne.radiusAxisMap,ke=ne.angleAxisMap,Pe=ky(_e),Ee=ky(ke),De=Ee.cx,qe=Ee.cy,Oe=Ee.innerRadius,He=Ee.outerRadius;return ie.cloneElement(ge,{polarAngles:Array.isArray(we)?we:xg(Ee,!0).map(function(Ue){return Ue.coordinate}),polarRadius:Array.isArray(Ne)?Ne:xg(Pe,!0).map(function(Ue){return Ue.coordinate}),cx:De,cy:qe,innerRadius:Oe,outerRadius:He,key:ge.key||"polar-grid",radialLines:Re})}),Kn(le,"renderLegend",function(){var ge=le.state.formattedGraphicalItems,ue=le.props,Re=ue.children,we=ue.width,Ne=ue.height,ne=le.props.margin||{},_e=we-(ne.left||0)-(ne.right||0),ke=jQ({children:Re,formattedGraphicalItems:ge,legendWidth:_e,legendContent:R});if(!ke)return null;var Pe=ke.item,Ee=uq(ke,ZEe);return ie.cloneElement(Pe,Ya(Ya({},Ee),{},{chartWidth:we,chartHeight:Ne,margin:ne,onBBoxUpdate:le.handleLegendBBoxUpdate}))}),Kn(le,"renderTooltip",function(){var ge,ue=le.props,Re=ue.children,we=ue.accessibilityLayer,Ne=pf(Re,yu);if(!Ne)return null;var ne=le.state,_e=ne.isTooltipActive,ke=ne.activeCoordinate,Pe=ne.activePayload,Ee=ne.activeLabel,De=ne.offset,qe=(ge=Ne.props.active)!==null&&ge!==void 0?ge:_e;return ie.cloneElement(Ne,{viewBox:Ya(Ya({},De),{},{x:De.left,y:De.top}),active:qe,label:Ee,payload:qe?Pe:[],coordinate:ke,accessibilityLayer:we})}),Kn(le,"renderBrush",function(ge){var ue=le.props,Re=ue.margin,we=ue.data,Ne=le.state,ne=Ne.offset,_e=Ne.dataStartIndex,ke=Ne.dataEndIndex,Pe=Ne.updateId;return ie.cloneElement(ge,{key:ge.key||"_recharts-brush",onChange:tb(le.handleBrushChange,ge.props.onChange),data:we,x:Tr(ge.props.x)?ge.props.x:ne.left,y:Tr(ge.props.y)?ge.props.y:ne.top+ne.height+ne.brushBottom-(Re.bottom||0),width:Tr(ge.props.width)?ge.props.width:ne.width,startIndex:_e,endIndex:ke,updateId:"brush-".concat(Pe)})}),Kn(le,"renderReferenceElement",function(ge,ue,Re){if(!ge)return null;var we=le,Ne=we.clipPathId,ne=le.state,_e=ne.xAxisMap,ke=ne.yAxisMap,Pe=ne.offset,Ee=ge.type.defaultProps||{},De=ge.props,qe=De.xAxisId,Oe=qe===void 0?Ee.xAxisId:qe,He=De.yAxisId,Ue=He===void 0?Ee.yAxisId:He;return ie.cloneElement(ge,{key:ge.key||"".concat(ue,"-").concat(Re),xAxis:_e[Oe],yAxis:ke[Ue],viewBox:{x:Pe.left,y:Pe.top,width:Pe.width,height:Pe.height},clipPathId:Ne})}),Kn(le,"renderActivePoints",function(ge){var ue=ge.item,Re=ge.activePoint,we=ge.basePoint,Ne=ge.childIndex,ne=ge.isRange,_e=[],ke=ue.props.key,Pe=ue.item.type.defaultProps!==void 0?Ya(Ya({},ue.item.type.defaultProps),ue.item.props):ue.item.props,Ee=Pe.activeDot,De=Pe.dataKey,qe=Ya(Ya({index:Ne,dataKey:De,cx:Re.x,cy:Re.y,r:4,fill:M4(ue.item),strokeWidth:2,stroke:"#fff",payload:Re.payload,value:Re.value},yn(Ee,!1)),px(Ee));return _e.push(W.renderActiveDot(Ee,qe,"".concat(ke,"-activePoint-").concat(Ne))),we?_e.push(W.renderActiveDot(Ee,Ya(Ya({},qe),{},{cx:we.x,cy:we.y}),"".concat(ke,"-basePoint-").concat(Ne))):ne&&_e.push(null),_e}),Kn(le,"renderGraphicChild",function(ge,ue,Re){var we=le.filterFormatItem(ge,ue,Re);if(!we)return null;var Ne=le.getTooltipEventType(),ne=le.state,_e=ne.isTooltipActive,ke=ne.tooltipAxis,Pe=ne.activeTooltipIndex,Ee=ne.activeLabel,De=le.props.children,qe=pf(De,yu),Oe=we.props,He=Oe.points,Ue=Oe.isRange,ct=Oe.baseLine,Se=we.item.type.defaultProps!==void 0?Ya(Ya({},we.item.type.defaultProps),we.item.props):we.item.props,Ie=Se.activeDot,je=Se.hide,Ze=Se.activeBar,Be=Se.activeShape,Je=!!(!je&&_e&&qe&&(Ie||Ze||Be)),dt={};Ne!=="axis"&&qe&&qe.props.trigger==="click"?dt={onClick:tb(le.handleItemMouseEnter,ge.props.onClick)}:Ne!=="axis"&&(dt={onMouseLeave:tb(le.handleItemMouseLeave,ge.props.onMouseLeave),onMouseEnter:tb(le.handleItemMouseEnter,ge.props.onMouseEnter)});var ut=ie.cloneElement(ge,Ya(Ya({},we.props),dt));function Ae(or){return typeof ke.dataKey=="function"?ke.dataKey(or.payload):null}if(Je)if(Pe>=0){var Dt,Lt;if(ke.dataKey&&!ke.allowDuplicatedCategory){var fa=typeof ke.dataKey=="function"?Ae:"payload.".concat(ke.dataKey.toString());Dt=fx(He,fa,Ee),Lt=Ue&&ct&&fx(ct,fa,Ee)}else Dt=He==null?void 0:He[Pe],Lt=Ue&&ct&&ct[Pe];if(Be||Ze){var Nt=ge.props.activeIndex!==void 0?ge.props.activeIndex:Pe;return[ie.cloneElement(ge,Ya(Ya(Ya({},we.props),dt),{},{activeIndex:Nt})),null,null]}if(!qn(Dt))return[ut].concat(s1(le.renderActivePoints({item:we,activePoint:Dt,basePoint:Lt,childIndex:Pe,isRange:Ue})))}else{var Ht,wt=(Ht=le.getItemByXY(le.state.activeCoordinate))!==null&&Ht!==void 0?Ht:{graphicalItem:ut},fr=wt.graphicalItem,Ca=fr.item,za=Ca===void 0?ge:Ca,ar=fr.childIndex,ur=Ya(Ya(Ya({},we.props),dt),{},{activeIndex:ar});return[ie.cloneElement(za,ur),null,null]}return Ue?[ut,null,null]:[ut,null]}),Kn(le,"renderCustomized",function(ge,ue,Re){return ie.cloneElement(ge,Ya(Ya({key:"recharts-customized-".concat(Re)},le.props),le.state))}),Kn(le,"renderMap",{CartesianGrid:{handler:sb,once:!0},ReferenceArea:{handler:le.renderReferenceElement},ReferenceLine:{handler:sb},ReferenceDot:{handler:le.renderReferenceElement},XAxis:{handler:sb},YAxis:{handler:sb},Brush:{handler:le.renderBrush,once:!0},Bar:{handler:le.renderGraphicChild},Line:{handler:le.renderGraphicChild},Area:{handler:le.renderGraphicChild},Radar:{handler:le.renderGraphicChild},RadialBar:{handler:le.renderGraphicChild},Scatter:{handler:le.renderGraphicChild},Pie:{handler:le.renderGraphicChild},Funnel:{handler:le.renderGraphicChild},Tooltip:{handler:le.renderCursor,once:!0},PolarGrid:{handler:le.renderPolarGrid,once:!0},PolarAngleAxis:{handler:le.renderPolarAxis},PolarRadiusAxis:{handler:le.renderPolarAxis},Customized:{handler:le.renderCustomized}}),le.clipPathId="".concat((oe=ee.id)!==null&&oe!==void 0?oe:hA("recharts"),"-clip"),le.throttleTriggeredAfterMouseMove=BJ(le.triggeredAfterMouseMove,(pe=ee.throttleDelay)!==null&&pe!==void 0?pe:1e3/60),le.state={},le}return aNe(W,H),JEe(W,[{key:"componentDidMount",value:function(){var oe,pe;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(oe=this.props.margin.left)!==null&&oe!==void 0?oe:0,top:(pe=this.props.margin.top)!==null&&pe!==void 0?pe:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var oe=this.props,pe=oe.children,le=oe.data,ge=oe.height,ue=oe.layout,Re=pf(pe,yu);if(Re){var we=Re.props.defaultIndex;if(!(typeof we!="number"||we<0||we>this.state.tooltipTicks.length-1)){var Ne=this.state.tooltipTicks[we]&&this.state.tooltipTicks[we].value,ne=HI(this.state,le,we,Ne),_e=this.state.tooltipTicks[we].coordinate,ke=(this.state.offset.top+ge)/2,Pe=ue==="horizontal",Ee=Pe?{x:_e,y:ke}:{y:_e,x:ke},De=this.state.formattedGraphicalItems.find(function(Oe){var He=Oe.item;return He.type.name==="Scatter"});De&&(Ee=Ya(Ya({},Ee),De.props.points[we].tooltipPosition),ne=De.props.points[we].tooltipPayload);var qe={activeTooltipIndex:we,isTooltipActive:!0,activeLabel:Ne,activePayload:ne,activeCoordinate:Ee};this.setState(qe),this.renderCursor(Re),this.accessibilityManager.setIndex(we)}}}},{key:"getSnapshotBeforeUpdate",value:function(oe,pe){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==pe.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==oe.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==oe.margin){var le,ge;this.accessibilityManager.setDetails({offset:{left:(le=this.props.margin.left)!==null&&le!==void 0?le:0,top:(ge=this.props.margin.top)!==null&&ge!==void 0?ge:0}})}return null}},{key:"componentDidUpdate",value:function(oe){SM([pf(oe.children,yu)],[pf(this.props.children,yu)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var oe=pf(this.props.children,yu);if(oe&&typeof oe.props.shared=="boolean"){var pe=oe.props.shared?"axis":"item";return n.indexOf(pe)>=0?pe:l}return l}},{key:"getMouseInfo",value:function(oe){if(!this.container)return null;var pe=this.container,le=pe.getBoundingClientRect(),ge=Jve(le),ue={chartX:Math.round(oe.pageX-ge.left),chartY:Math.round(oe.pageY-ge.top)},Re=le.width/pe.offsetWidth||1,we=this.inRange(ue.chartX,ue.chartY,Re);if(!we)return null;var Ne=this.state,ne=Ne.xAxisMap,_e=Ne.yAxisMap,ke=this.getTooltipEventType();if(ke!=="axis"&&ne&&_e){var Pe=ky(ne).scale,Ee=ky(_e).scale,De=Pe&&Pe.invert?Pe.invert(ue.chartX):null,qe=Ee&&Ee.invert?Ee.invert(ue.chartY):null;return Ya(Ya({},ue),{},{xValue:De,yValue:qe})}var Oe=dq(this.state,this.props.data,this.props.layout,we);return Oe?Ya(Ya({},ue),Oe):null}},{key:"inRange",value:function(oe,pe){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ge=this.props.layout,ue=oe/le,Re=pe/le;if(ge==="horizontal"||ge==="vertical"){var we=this.state.offset,Ne=ue>=we.left&&ue<=we.left+we.width&&Re>=we.top&&Re<=we.top+we.height;return Ne?{x:ue,y:Re}:null}var ne=this.state,_e=ne.angleAxisMap,ke=ne.radiusAxisMap;if(_e&&ke){var Pe=ky(_e);return c9({x:ue,y:Re},Pe)}return null}},{key:"parseEventsOfWrapper",value:function(){var oe=this.props.children,pe=this.getTooltipEventType(),le=pf(oe,yu),ge={};le&&pe==="axis"&&(le.props.trigger==="click"?ge={onClick:this.handleClick}:ge={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var ue=px(this.props,this.handleOuterEvent);return Ya(Ya({},ue),ge)}},{key:"addListener",value:function(){GD.on(ZD,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){GD.removeListener(ZD,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(oe,pe,le){for(var ge=this.state.formattedGraphicalItems,ue=0,Re=ge.length;ue<Re;ue++){var we=ge[ue];if(we.item===oe||we.props.key===oe.key||pe===Ng(we.item.type)&&le===we.childIndex)return we}return null}},{key:"renderClipPath",value:function(){var oe=this.clipPathId,pe=this.state.offset,le=pe.left,ge=pe.top,ue=pe.height,Re=pe.width;return Vt.createElement("defs",null,Vt.createElement("clipPath",{id:oe},Vt.createElement("rect",{x:le,y:ge,height:ue,width:Re})))}},{key:"getXScales",value:function(){var oe=this.state.xAxisMap;return oe?Object.entries(oe).reduce(function(pe,le){var ge=lq(le,2),ue=ge[0],Re=ge[1];return Ya(Ya({},pe),{},Kn({},ue,Re.scale))},{}):null}},{key:"getYScales",value:function(){var oe=this.state.yAxisMap;return oe?Object.entries(oe).reduce(function(pe,le){var ge=lq(le,2),ue=ge[0],Re=ge[1];return Ya(Ya({},pe),{},Kn({},ue,Re.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(oe){var pe;return(pe=this.state.xAxisMap)===null||pe===void 0||(pe=pe[oe])===null||pe===void 0?void 0:pe.scale}},{key:"getYScaleByAxisId",value:function(oe){var pe;return(pe=this.state.yAxisMap)===null||pe===void 0||(pe=pe[oe])===null||pe===void 0?void 0:pe.scale}},{key:"getItemByXY",value:function(oe){var pe=this.state,le=pe.formattedGraphicalItems,ge=pe.activeItem;if(le&&le.length)for(var ue=0,Re=le.length;ue<Re;ue++){var we=le[ue],Ne=we.props,ne=we.item,_e=ne.type.defaultProps!==void 0?Ya(Ya({},ne.type.defaultProps),ne.props):ne.props,ke=Ng(ne.type);if(ke==="Bar"){var Pe=(Ne.data||[]).find(function(Oe){return mSe(oe,Oe)});if(Pe)return{graphicalItem:we,payload:Pe}}else if(ke==="RadialBar"){var Ee=(Ne.data||[]).find(function(Oe){return c9(oe,Oe)});if(Ee)return{graphicalItem:we,payload:Ee}}else if(jP(we,ge)||GP(we,ge)||ET(we,ge)){var De=kbe({graphicalItem:we,activeTooltipItem:ge,itemData:_e.data}),qe=_e.activeIndex===void 0?De:_e.activeIndex;return{graphicalItem:Ya(Ya({},we),{},{childIndex:qe}),payload:ET(we,ge)?_e.data[De]:we.props.data[De]}}}return null}},{key:"render",value:function(){var oe=this;if(!R8(this))return null;var pe=this.props,le=pe.children,ge=pe.className,ue=pe.width,Re=pe.height,we=pe.style,Ne=pe.compact,ne=pe.title,_e=pe.desc,ke=uq(pe,qEe),Pe=yn(ke,!1);if(Ne)return Vt.createElement(kZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Vt.createElement(xM,i_({},Pe,{width:ue,height:Re,title:ne,desc:_e}),this.renderClipPath(),C8(le,this.renderMap)));if(this.props.accessibilityLayer){var Ee,De;Pe.tabIndex=(Ee=this.props.tabIndex)!==null&&Ee!==void 0?Ee:0,Pe.role=(De=this.props.role)!==null&&De!==void 0?De:"application",Pe.onKeyDown=function(Oe){oe.accessibilityManager.keyboardEvent(Oe)},Pe.onFocus=function(){oe.accessibilityManager.focus()}}var qe=this.parseEventsOfWrapper();return Vt.createElement(kZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Vt.createElement("div",i_({className:mi("recharts-wrapper",ge),style:Ya({position:"relative",cursor:"default",width:ue,height:Re},we)},qe,{ref:function(He){oe.container=He}}),Vt.createElement(xM,i_({},Pe,{width:ue,height:Re,title:ne,desc:_e,style:lNe}),this.renderClipPath(),C8(le,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(ie.Component);Kn(Z,"displayName",a),Kn(Z,"defaultProps",Ya({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},N)),Kn(Z,"getDerivedStateFromProps",function(H,W){var ee=H.dataKey,oe=H.data,pe=H.children,le=H.width,ge=H.height,ue=H.layout,Re=H.stackOffset,we=H.margin,Ne=W.dataStartIndex,ne=W.dataEndIndex;if(W.updateId===void 0){var _e=hq(H);return Ya(Ya(Ya({},_e),{},{updateId:0},k(Ya(Ya({props:H},_e),{},{updateId:0}),W)),{},{prevDataKey:ee,prevData:oe,prevWidth:le,prevHeight:ge,prevLayout:ue,prevStackOffset:Re,prevMargin:we,prevChildren:pe})}if(ee!==W.prevDataKey||oe!==W.prevData||le!==W.prevWidth||ge!==W.prevHeight||ue!==W.prevLayout||Re!==W.prevStackOffset||!m_(we,W.prevMargin)){var ke=hq(H),Pe={chartX:W.chartX,chartY:W.chartY,isTooltipActive:W.isTooltipActive},Ee=Ya(Ya({},dq(W,oe,ue)),{},{updateId:W.updateId+1}),De=Ya(Ya(Ya({},ke),Pe),Ee);return Ya(Ya(Ya({},De),k(Ya({props:H},De),W)),{},{prevDataKey:ee,prevData:oe,prevWidth:le,prevHeight:ge,prevLayout:ue,prevStackOffset:Re,prevMargin:we,prevChildren:pe})}if(!SM(pe,W.prevChildren)){var qe,Oe,He,Ue,ct=pf(pe,$_),Se=ct&&(qe=(Oe=ct.props)===null||Oe===void 0?void 0:Oe.startIndex)!==null&&qe!==void 0?qe:Ne,Ie=ct&&(He=(Ue=ct.props)===null||Ue===void 0?void 0:Ue.endIndex)!==null&&He!==void 0?He:ne,je=Se!==Ne||Ie!==ne,Ze=!qn(oe),Be=Ze&&!je?W.updateId:W.updateId+1;return Ya(Ya({updateId:Be},k(Ya(Ya({props:H},W),{},{updateId:Be,dataStartIndex:Se,dataEndIndex:Ie}),W)),{},{prevChildren:pe,dataStartIndex:Se,dataEndIndex:Ie})}return null}),Kn(Z,"renderActiveDot",function(H,W,ee){var oe;return ie.isValidElement(H)?oe=ie.cloneElement(H,W):Zn(H)?oe=H(W):oe=Vt.createElement(wC,W),Vt.createElement(vi,{className:"recharts-active-dot",key:ee},oe)});var $=ie.forwardRef(function(W,ee){return Vt.createElement(Z,i_({},W,{ref:ee}))});return $.displayName=Z.displayName,$},ANe=RC({chartName:"LineChart",GraphicalChild:Xv,axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:Ad}],formatAxisMap:qP}),$I=RC({chartName:"BarChart",GraphicalChild:Jp,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:Ad}],formatAxisMap:qP}),vNe=RC({chartName:"PieChart",GraphicalChild:Hg,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:BP},{axisType:"radiusAxis",AxisComp:kP}],formatAxisMap:NRe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Xw=RC({chartName:"AreaChart",GraphicalChild:Af,axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:Ad}],formatAxisMap:qP}),_Ne=RC({chartName:"ComposedChart",GraphicalChild:[Xv,Af,Jp,XP],axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:Ad},{axisType:"zAxis",AxisComp:YP}],formatAxisMap:qP}),Eb={exports:{}},wNe=Eb.exports,pq;function RNe(){return pq||(pq=1,function(t,e){(function(a,r){t.exports=r()})(wNe,function(){var a=1e3,r=6e4,i=36e5,l="millisecond",c="second",n="minute",v="hour",R="day",x="week",N="month",I="quarter",k="year",Z="date",$="Invalid Date",H=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,W=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ee={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Pe){var Ee=["th","st","nd","rd"],De=Pe%100;return"["+Pe+(Ee[(De-20)%10]||Ee[De]||Ee[0])+"]"}},oe=function(Pe,Ee,De){var qe=String(Pe);return!qe||qe.length>=Ee?Pe:""+Array(Ee+1-qe.length).join(De)+Pe},pe={s:oe,z:function(Pe){var Ee=-Pe.utcOffset(),De=Math.abs(Ee),qe=Math.floor(De/60),Oe=De%60;return(Ee<=0?"+":"-")+oe(qe,2,"0")+":"+oe(Oe,2,"0")},m:function Pe(Ee,De){if(Ee.date()<De.date())return-Pe(De,Ee);var qe=12*(De.year()-Ee.year())+(De.month()-Ee.month()),Oe=Ee.clone().add(qe,N),He=De-Oe<0,Ue=Ee.clone().add(qe+(He?-1:1),N);return+(-(qe+(De-Oe)/(He?Oe-Ue:Ue-Oe))||0)},a:function(Pe){return Pe<0?Math.ceil(Pe)||0:Math.floor(Pe)},p:function(Pe){return{M:N,y:k,w:x,d:R,D:Z,h:v,m:n,s:c,ms:l,Q:I}[Pe]||String(Pe||"").toLowerCase().replace(/s$/,"")},u:function(Pe){return Pe===void 0}},le="en",ge={};ge[le]=ee;var ue="$isDayjsObject",Re=function(Pe){return Pe instanceof _e||!(!Pe||!Pe[ue])},we=function Pe(Ee,De,qe){var Oe;if(!Ee)return le;if(typeof Ee=="string"){var He=Ee.toLowerCase();ge[He]&&(Oe=He),De&&(ge[He]=De,Oe=He);var Ue=Ee.split("-");if(!Oe&&Ue.length>1)return Pe(Ue[0])}else{var ct=Ee.name;ge[ct]=Ee,Oe=ct}return!qe&&Oe&&(le=Oe),Oe||!qe&&le},Ne=function(Pe,Ee){if(Re(Pe))return Pe.clone();var De=typeof Ee=="object"?Ee:{};return De.date=Pe,De.args=arguments,new _e(De)},ne=pe;ne.l=we,ne.i=Re,ne.w=function(Pe,Ee){return Ne(Pe,{locale:Ee.$L,utc:Ee.$u,x:Ee.$x,$offset:Ee.$offset})};var _e=function(){function Pe(De){this.$L=we(De.locale,null,!0),this.parse(De),this.$x=this.$x||De.x||{},this[ue]=!0}var Ee=Pe.prototype;return Ee.parse=function(De){this.$d=function(qe){var Oe=qe.date,He=qe.utc;if(Oe===null)return new Date(NaN);if(ne.u(Oe))return new Date;if(Oe instanceof Date)return new Date(Oe);if(typeof Oe=="string"&&!/Z$/i.test(Oe)){var Ue=Oe.match(H);if(Ue){var ct=Ue[2]-1||0,Se=(Ue[7]||"0").substring(0,3);return He?new Date(Date.UTC(Ue[1],ct,Ue[3]||1,Ue[4]||0,Ue[5]||0,Ue[6]||0,Se)):new Date(Ue[1],ct,Ue[3]||1,Ue[4]||0,Ue[5]||0,Ue[6]||0,Se)}}return new Date(Oe)}(De),this.init()},Ee.init=function(){var De=this.$d;this.$y=De.getFullYear(),this.$M=De.getMonth(),this.$D=De.getDate(),this.$W=De.getDay(),this.$H=De.getHours(),this.$m=De.getMinutes(),this.$s=De.getSeconds(),this.$ms=De.getMilliseconds()},Ee.$utils=function(){return ne},Ee.isValid=function(){return this.$d.toString()!==$},Ee.isSame=function(De,qe){var Oe=Ne(De);return this.startOf(qe)<=Oe&&Oe<=this.endOf(qe)},Ee.isAfter=function(De,qe){return Ne(De)<this.startOf(qe)},Ee.isBefore=function(De,qe){return this.endOf(qe)<Ne(De)},Ee.$g=function(De,qe,Oe){return ne.u(De)?this[qe]:this.set(Oe,De)},Ee.unix=function(){return Math.floor(this.valueOf()/1e3)},Ee.valueOf=function(){return this.$d.getTime()},Ee.startOf=function(De,qe){var Oe=this,He=!!ne.u(qe)||qe,Ue=ne.p(De),ct=function(ut,Ae){var Dt=ne.w(Oe.$u?Date.UTC(Oe.$y,Ae,ut):new Date(Oe.$y,Ae,ut),Oe);return He?Dt:Dt.endOf(R)},Se=function(ut,Ae){return ne.w(Oe.toDate()[ut].apply(Oe.toDate("s"),(He?[0,0,0,0]:[23,59,59,999]).slice(Ae)),Oe)},Ie=this.$W,je=this.$M,Ze=this.$D,Be="set"+(this.$u?"UTC":"");switch(Ue){case k:return He?ct(1,0):ct(31,11);case N:return He?ct(1,je):ct(0,je+1);case x:var Je=this.$locale().weekStart||0,dt=(Ie<Je?Ie+7:Ie)-Je;return ct(He?Ze-dt:Ze+(6-dt),je);case R:case Z:return Se(Be+"Hours",0);case v:return Se(Be+"Minutes",1);case n:return Se(Be+"Seconds",2);case c:return Se(Be+"Milliseconds",3);default:return this.clone()}},Ee.endOf=function(De){return this.startOf(De,!1)},Ee.$set=function(De,qe){var Oe,He=ne.p(De),Ue="set"+(this.$u?"UTC":""),ct=(Oe={},Oe[R]=Ue+"Date",Oe[Z]=Ue+"Date",Oe[N]=Ue+"Month",Oe[k]=Ue+"FullYear",Oe[v]=Ue+"Hours",Oe[n]=Ue+"Minutes",Oe[c]=Ue+"Seconds",Oe[l]=Ue+"Milliseconds",Oe)[He],Se=He===R?this.$D+(qe-this.$W):qe;if(He===N||He===k){var Ie=this.clone().set(Z,1);Ie.$d[ct](Se),Ie.init(),this.$d=Ie.set(Z,Math.min(this.$D,Ie.daysInMonth())).$d}else ct&&this.$d[ct](Se);return this.init(),this},Ee.set=function(De,qe){return this.clone().$set(De,qe)},Ee.get=function(De){return this[ne.p(De)]()},Ee.add=function(De,qe){var Oe,He=this;De=Number(De);var Ue=ne.p(qe),ct=function(je){var Ze=Ne(He);return ne.w(Ze.date(Ze.date()+Math.round(je*De)),He)};if(Ue===N)return this.set(N,this.$M+De);if(Ue===k)return this.set(k,this.$y+De);if(Ue===R)return ct(1);if(Ue===x)return ct(7);var Se=(Oe={},Oe[n]=r,Oe[v]=i,Oe[c]=a,Oe)[Ue]||1,Ie=this.$d.getTime()+De*Se;return ne.w(Ie,this)},Ee.subtract=function(De,qe){return this.add(-1*De,qe)},Ee.format=function(De){var qe=this,Oe=this.$locale();if(!this.isValid())return Oe.invalidDate||$;var He=De||"YYYY-MM-DDTHH:mm:ssZ",Ue=ne.z(this),ct=this.$H,Se=this.$m,Ie=this.$M,je=Oe.weekdays,Ze=Oe.months,Be=Oe.meridiem,Je=function(Ae,Dt,Lt,fa){return Ae&&(Ae[Dt]||Ae(qe,He))||Lt[Dt].slice(0,fa)},dt=function(Ae){return ne.s(ct%12||12,Ae,"0")},ut=Be||function(Ae,Dt,Lt){var fa=Ae<12?"AM":"PM";return Lt?fa.toLowerCase():fa};return He.replace(W,function(Ae,Dt){return Dt||function(Lt){switch(Lt){case"YY":return String(qe.$y).slice(-2);case"YYYY":return ne.s(qe.$y,4,"0");case"M":return Ie+1;case"MM":return ne.s(Ie+1,2,"0");case"MMM":return Je(Oe.monthsShort,Ie,Ze,3);case"MMMM":return Je(Ze,Ie);case"D":return qe.$D;case"DD":return ne.s(qe.$D,2,"0");case"d":return String(qe.$W);case"dd":return Je(Oe.weekdaysMin,qe.$W,je,2);case"ddd":return Je(Oe.weekdaysShort,qe.$W,je,3);case"dddd":return je[qe.$W];case"H":return String(ct);case"HH":return ne.s(ct,2,"0");case"h":return dt(1);case"hh":return dt(2);case"a":return ut(ct,Se,!0);case"A":return ut(ct,Se,!1);case"m":return String(Se);case"mm":return ne.s(Se,2,"0");case"s":return String(qe.$s);case"ss":return ne.s(qe.$s,2,"0");case"SSS":return ne.s(qe.$ms,3,"0");case"Z":return Ue}return null}(Ae)||Ue.replace(":","")})},Ee.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ee.diff=function(De,qe,Oe){var He,Ue=this,ct=ne.p(qe),Se=Ne(De),Ie=(Se.utcOffset()-this.utcOffset())*r,je=this-Se,Ze=function(){return ne.m(Ue,Se)};switch(ct){case k:He=Ze()/12;break;case N:He=Ze();break;case I:He=Ze()/3;break;case x:He=(je-Ie)/6048e5;break;case R:He=(je-Ie)/864e5;break;case v:He=je/i;break;case n:He=je/r;break;case c:He=je/a;break;default:He=je}return Oe?He:ne.a(He)},Ee.daysInMonth=function(){return this.endOf(N).$D},Ee.$locale=function(){return ge[this.$L]},Ee.locale=function(De,qe){if(!De)return this.$L;var Oe=this.clone(),He=we(De,qe,!0);return He&&(Oe.$L=He),Oe},Ee.clone=function(){return ne.w(this.$d,this)},Ee.toDate=function(){return new Date(this.valueOf())},Ee.toJSON=function(){return this.isValid()?this.toISOString():null},Ee.toISOString=function(){return this.$d.toISOString()},Ee.toString=function(){return this.$d.toUTCString()},Pe}(),ke=_e.prototype;return Ne.prototype=ke,[["$ms",l],["$s",c],["$m",n],["$H",v],["$W",R],["$M",N],["$y",k],["$D",Z]].forEach(function(Pe){ke[Pe[1]]=function(Ee){return this.$g(Ee,Pe[0],Pe[1])}}),Ne.extend=function(Pe,Ee){return Pe.$i||(Pe(Ee,_e,Ne),Pe.$i=!0),Ne},Ne.locale=we,Ne.isDayjs=Re,Ne.unix=function(Pe){return Ne(1e3*Pe)},Ne.en=ge[le],Ne.Ls=ge,Ne.p={},Ne})}(Eb)),Eb.exports}var TNe=RNe();const Vi=ss(TNe);var Nb={exports:{}},CNe=Nb.exports,mq;function SNe(){return mq||(mq=1,function(t,e){(function(a,r){t.exports=r()})(CNe,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,l=/\d\d/,c=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,v={},R=function(H){return(H=+H)+(H>68?1900:2e3)},x=function(H){return function(W){this[H]=+W}},N=[/[+-]\d\d:?(\d\d)?|Z/,function(H){(this.zone||(this.zone={})).offset=function(W){if(!W||W==="Z")return 0;var ee=W.match(/([+-]|\d\d)/g),oe=60*ee[1]+(+ee[2]||0);return oe===0?0:ee[0]==="+"?-oe:oe}(H)}],I=function(H){var W=v[H];return W&&(W.indexOf?W:W.s.concat(W.f))},k=function(H,W){var ee,oe=v.meridiem;if(oe){for(var pe=1;pe<=24;pe+=1)if(H.indexOf(oe(pe,0,W))>-1){ee=pe>12;break}}else ee=H===(W?"pm":"PM");return ee},Z={A:[n,function(H){this.afternoon=k(H,!1)}],a:[n,function(H){this.afternoon=k(H,!0)}],Q:[i,function(H){this.month=3*(H-1)+1}],S:[i,function(H){this.milliseconds=100*+H}],SS:[l,function(H){this.milliseconds=10*+H}],SSS:[/\d{3}/,function(H){this.milliseconds=+H}],s:[c,x("seconds")],ss:[c,x("seconds")],m:[c,x("minutes")],mm:[c,x("minutes")],H:[c,x("hours")],h:[c,x("hours")],HH:[c,x("hours")],hh:[c,x("hours")],D:[c,x("day")],DD:[l,x("day")],Do:[n,function(H){var W=v.ordinal,ee=H.match(/\d+/);if(this.day=ee[0],W)for(var oe=1;oe<=31;oe+=1)W(oe).replace(/\[|\]/g,"")===H&&(this.day=oe)}],w:[c,x("week")],ww:[l,x("week")],M:[c,x("month")],MM:[l,x("month")],MMM:[n,function(H){var W=I("months"),ee=(I("monthsShort")||W.map(function(oe){return oe.slice(0,3)})).indexOf(H)+1;if(ee<1)throw new Error;this.month=ee%12||ee}],MMMM:[n,function(H){var W=I("months").indexOf(H)+1;if(W<1)throw new Error;this.month=W%12||W}],Y:[/[+-]?\d+/,x("year")],YY:[l,function(H){this.year=R(H)}],YYYY:[/\d{4}/,x("year")],Z:N,ZZ:N};function $(H){var W,ee;W=H,ee=v&&v.formats;for(var oe=(H=W.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Ne,ne,_e){var ke=_e&&_e.toUpperCase();return ne||ee[_e]||a[_e]||ee[ke].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Pe,Ee,De){return Ee||De.slice(1)})})).match(r),pe=oe.length,le=0;le<pe;le+=1){var ge=oe[le],ue=Z[ge],Re=ue&&ue[0],we=ue&&ue[1];oe[le]=we?{regex:Re,parser:we}:ge.replace(/^\[|\]$/g,"")}return function(Ne){for(var ne={},_e=0,ke=0;_e<pe;_e+=1){var Pe=oe[_e];if(typeof Pe=="string")ke+=Pe.length;else{var Ee=Pe.regex,De=Pe.parser,qe=Ne.slice(ke),Oe=Ee.exec(qe)[0];De.call(ne,Oe),Ne=Ne.replace(Oe,"")}}return function(He){var Ue=He.afternoon;if(Ue!==void 0){var ct=He.hours;Ue?ct<12&&(He.hours+=12):ct===12&&(He.hours=0),delete He.afternoon}}(ne),ne}}return function(H,W,ee){ee.p.customParseFormat=!0,H&&H.parseTwoDigitYear&&(R=H.parseTwoDigitYear);var oe=W.prototype,pe=oe.parse;oe.parse=function(le){var ge=le.date,ue=le.utc,Re=le.args;this.$u=ue;var we=Re[1];if(typeof we=="string"){var Ne=Re[2]===!0,ne=Re[3]===!0,_e=Ne||ne,ke=Re[2];ne&&(ke=Re[2]),v=this.$locale(),!Ne&&ke&&(v=ee.Ls[ke]),this.$d=function(qe,Oe,He,Ue){try{if(["x","X"].indexOf(Oe)>-1)return new Date((Oe==="X"?1e3:1)*qe);var ct=$(Oe)(qe),Se=ct.year,Ie=ct.month,je=ct.day,Ze=ct.hours,Be=ct.minutes,Je=ct.seconds,dt=ct.milliseconds,ut=ct.zone,Ae=ct.week,Dt=new Date,Lt=je||(Se||Ie?1:Dt.getDate()),fa=Se||Dt.getFullYear(),Nt=0;Se&&!Ie||(Nt=Ie>0?Ie-1:Dt.getMonth());var Ht,wt=Ze||0,fr=Be||0,Ca=Je||0,za=dt||0;return ut?new Date(Date.UTC(fa,Nt,Lt,wt,fr,Ca,za+60*ut.offset*1e3)):He?new Date(Date.UTC(fa,Nt,Lt,wt,fr,Ca,za)):(Ht=new Date(fa,Nt,Lt,wt,fr,Ca,za),Ae&&(Ht=Ue(Ht).week(Ae).toDate()),Ht)}catch{return new Date("")}}(ge,we,ue,ee),this.init(),ke&&ke!==!0&&(this.$L=this.locale(ke).$L),_e&&ge!=this.format(we)&&(this.$d=new Date("")),v={}}else if(we instanceof Array)for(var Pe=we.length,Ee=1;Ee<=Pe;Ee+=1){Re[1]=we[Ee-1];var De=ee.apply(this,Re);if(De.isValid()){this.$d=De.$d,this.$L=De.$L,this.init();break}Ee===Pe&&(this.$d=new Date(""))}else pe.call(this,le)}}})}(Nb)),Nb.exports}var bNe=SNe();const xNe=ss(bNe);Vi.extend(xNe);ap.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const PNe=()=>{const[t,e]=ie.useState(""),[a,r]=ie.useState(0),[i,l]=ie.useState(0),[c,n]=ie.useState(!1),[v,R]=ie.useState(null),[x,N]=ie.useState([]),[I,k]=ie.useState({}),[Z,$]=ie.useState(0),[H,W]=ie.useState({totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0}),[ee,oe]=ie.useState({today:0,weekly:0,monthly:0}),[pe,le]=ie.useState(Array(24).fill(0)),[ge,ue]=ie.useState(0),[Re,we]=ie.useState({}),Ne=ie.useRef(null),ne=ie.useRef(null);ie.useRef(null);const _e=ie.useRef({}),ke=Oe=>{let He=Oe.replace("UTC+","+").replace("UTC-","-");return He=He.replace(/([+\-]\d{1,2})$/,"$1:00"),Vi(He,"D MMMM YYYY [at] HH:mm:ss Z")},Pe=Oe=>typeof Oe=="string"?ke(Oe):Oe&&typeof Oe.toDate=="function"?Vi(Oe.toDate()):Vi(Oe),Ee=()=>{try{const Oe=Ln(Ar,"activeRides"),He=Hp(Oe,e_("rideStatus","==","started"));return sh(He,async ct=>{const Se=[];for(const Ie of ct.docs){const je=Ie.data();console.log("Ride data:",je);try{const Ze=Di(Ar,"approved_users",je.userId),Be=await Fc(Ze),Je=Be.exists()?Be.data():{};console.log("User data:",Je);const dt=Di(Ar,"bikes",je.bikeId),ut=await Fc(dt),Ae=ut.exists()?ut.data():{};console.log("Bike data:",Ae);let Dt="Unknown Station";if(je.startStation){console.log("Attempting to fetch station with ID:",je.startStation);const fa=Di(Ar,"stations",je.startStation),Nt=await Fc(fa);if(console.log("Station doc exists:",Nt.exists()),Nt.exists()){const Ht=Nt.data();console.log("Station data:",Ht),Dt=Ht.stationName||Ht.name||"Unknown Station"}}const Lt={rideId:Ie.id,userName:Je.name||`${Je.first_name||""} ${Je.surname||""}`.trim(),startTime:je.startTime,bikeName:Ae.bikeName||"Unknown Bike",stationName:Dt};console.log("Pushing ride info:",Lt),Se.push(Lt)}catch(Ze){console.error("Error fetching related documents:",Ze),console.error("Error details:",{rideId:Ie.id,userId:je.userId,bikeId:je.bikeId,startStation:je.startStation})}}console.log("Final active rides array:",Se),N(Se)})}catch(Oe){return console.error("Error in fetchActiveRides:",Oe),()=>{}}},De=()=>{try{const Oe=Ln(Ar,"admins");return sh(Oe,He=>{const Ue=He.docs.reduce((ct,Se)=>{const Ie=Se.data();return Ie.status==="Active"&&Ie.stationAssignedTo?ct+1:ct},0);ue(Ue)})}catch(Oe){return console.error("Error fetching active admins:",Oe),()=>{}}};ie.useEffect(()=>{const Oe=sh(Ln(Ar,"bikes"),je=>{const Ze=je.docs.filter(Be=>Be.data().bikeStatus==="Available");r(Ze.length)}),He=Vi().startOf("day"),Ue=Ln(Ar,"ride_history"),ct=sh(Ue,je=>{let Ze=0,Be={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0},Je=Array(24).fill(0);je.forEach(dt=>{const ut=dt.data();if(ut.rideEndedAt){const Ae=Pe(ut.rideEndedAt);if(Ae.isSame(He,"day")){Ze++,Be.totalDistance+=Number(ut.distance||0),Be.totalDuration+=Number(ut.duration||0),Be.totalCalories+=Number(ut.caloriesBurned||0),Be.totalCarbon+=Number(ut.carbonSaved||0),Be.totalRevenue+=Number(ut.amountPaid||0);const Dt=Ae.hour();Je[Dt]+=Number(ut.amountPaid||0)}}}),l(Ze),W(Be),le(Je)});let Se=null;const Ie=sh(Ln(Ar,"approved_users"),je=>{const Ze=je.docs.map(Lt=>Lt.id);let Be=0,Je=0,dt=0;const ut=Vi().startOf("week"),Ae=Vi().startOf("month");let Dt=Ze.length;Dt===0&&oe({today:0,weekly:0,monthly:0}),Ze.forEach(Lt=>{const fa=Ln(Ar,"approved_users",Lt,"rideHistory");Se=sh(fa,Nt=>{Nt.forEach(Ht=>{const wt=Ht.data(),fr=Pe(wt.rideStartedAt),Ca=wt.amountPaid||0;fr.isSame(He,"day")&&(Be+=Ca),fr.isAfter(ut)&&(Je+=Ca),fr.isAfter(Ae)&&(dt+=Ca)}),Dt--,Dt===0&&oe({today:Be,weekly:Je,monthly:dt})})})});return()=>{Oe(),ct(),Ie(),Se&&Se()}},[]),ie.useEffect(()=>(eA.onAuthStateChanged(async Oe=>{if(Oe)try{const He=Di(Ar,"users",Oe.uid),Ue=await Fc(He);if(Ue.exists()){const ct=Ue.data(),Se=(ct==null?void 0:ct.name)||"Super Admin";e(Se)}else e("Super Admin")}catch(He){console.error("Error fetching user data:",He),e("Super Admin")}else e("Unknown User")}),()=>{}),[]),ie.useEffect(()=>{if(!(ne.current||!Ne.current))try{ne.current=new ap.Map({container:Ne.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),ne.current.addControl(new ap.NavigationControl,"top-right");const Oe=Ln(Ar,"activeRides"),He=sh(Hp(Oe,e_("rideStatus","==","started")),Ue=>{ne.current});return()=>{He(),ne.current&&(ne.current.remove(),ne.current=null)}}catch(Oe){console.error("Error initializing map:",Oe)}},[Ne.current]),ie.useEffect(()=>{if(!ne.current)return;const Oe=Ln(Ar,"activeRides"),He=Hp(Oe,e_("rideStatus","==","started")),Ue=sh(He,async ct=>{try{ct.docChanges().forEach(async Se=>{const Ie=Se.doc.data(),je=Se.doc.id;if((Se.type==="added"||Se.type==="modified")&&Ie.locationData){const{latitude:Ze,longitude:Be}=Ie.locationData,Je=Di(Ar,"approved_users",Ie.userId),dt=await Fc(Je),ut=dt.exists()?dt.data():{},Ae=`${ut.first_name||""} ${ut.surname||""}`.trim(),Dt=Di(Ar,"bikes",Ie.bikeId),Lt=await Fc(Dt),Nt=(Lt.exists()?Lt.data():{}).bikeName||"Unknown Bike";if(_e.current[je])_e.current[je].setLngLat([Be,Ze]).getPopup().setHTML(`
                  <div class="simple-popup">
                    <p><strong>${Ae}</strong></p>
                    <p>Bike: ${Nt}</p>
                  </div>
                `);else{const Ht=document.createElement("div");Ht.className="user-location-marker";const wt=new ap.Popup({closeButton:!1,closeOnClick:!1,anchor:"top",offset:[0,-10]}).setHTML(`
                <div class="simple-popup">
                  <p><strong>${Ae}</strong></p>
                  <p>Bike: ${Nt}</p>
                </div>
              `);_e.current[je]=new ap.Marker({element:Ht,anchor:"center"}).setLngLat([Be,Ze]).setPopup(wt).addTo(ne.current)}}Se.type==="removed"&&_e.current[je]&&(_e.current[je].remove(),delete _e.current[je])})}catch(Se){console.error("Error updating markers:",Se)}});return()=>{Ue(),Object.values(_e.current).forEach(ct=>ct.remove()),_e.current={}}},[]),ie.useEffect(()=>{const Oe=Ln(Ar,"activeRides"),He=Hp(Oe,e_("rideStatus","==","started")),Ue=sh(He,ct=>{$(ct.size)});return()=>Ue()},[]),ie.useEffect(()=>{let Oe;try{Oe=Ee()}catch(He){console.error("Error setting up active rides listener:",He)}return()=>{typeof Oe=="function"&&Oe()}},[]),ie.useEffect(()=>{const Oe=De();return()=>{typeof Oe=="function"&&Oe()}},[]);const qe=[{name:"Bikes Available",value:a},{name:"Active Users",value:Z},{name:"Active Admins",value:ge},{name:"Today's Revenue",value:Number((H==null?void 0:H.totalRevenue)||0)},{name:"Rides Today",value:i}];return B.jsxs("div",{className:"content-container",children:[B.jsxs("div",{className:"content-header",children:[B.jsxs("h1",{className:"content-header__title",children:["Hello ",t,"!"]}),B.jsx("p",{className:"content-header__subtitle",children:"Keeping the wheels turning for a greener future."})]}),B.jsx("div",{className:"stats-section",children:qe.map((Oe,He)=>B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{className:"stat-card__title",children:Oe.name}),B.jsx("p",{className:"stat-card__value",children:Oe.name==="Today's Revenue"?Number(Oe.value).toFixed(2):typeof Oe.value>"u"?"0":Oe.value})]},He))}),B.jsxs("div",{className:"tracking-section",children:[B.jsxs("div",{className:"active-rides-table",children:[B.jsx("h3",{className:"section-title",children:"Active Rides"}),B.jsxs("table",{children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Rider Name"}),B.jsx("th",{children:"Start Time"}),B.jsx("th",{children:"Bike Name"}),B.jsx("th",{children:"Station"})]})}),B.jsxs("tbody",{children:[x.slice(0,5).map(Oe=>B.jsxs("tr",{children:[B.jsx("td",{children:Oe.userName}),B.jsx("td",{children:Pe(Oe.startTime).format("HH:mm:ss")}),B.jsx("td",{children:Oe.bikeName}),B.jsx("td",{children:Oe.stationName})]},Oe.rideId)),x.length===0&&B.jsx("tr",{children:B.jsx("td",{colSpan:"4",className:"no-rides",children:"No active rides at the moment"})})]})]})]}),B.jsxs("div",{className:"map-container",children:[B.jsxs("div",{className:"map-section-header",children:[B.jsxs("h2",{className:"map-title",children:[B.jsx(kfe,{})," Live User Activity Map"]}),B.jsx("p",{className:"map-subtitle",children:"Track real-time locations of active riders across the system"})]}),B.jsx("div",{ref:Ne,className:"ride-tracking-map"})]})]}),B.jsxs("div",{className:"charts-grid",children:[B.jsxs("div",{className:"charts-row",children:[B.jsxs("div",{className:"chart-container",children:[B.jsx("h3",{className:"chart-title",children:"Today's Ride Metrics"}),B.jsx(Up,{width:"100%",height:300,children:B.jsxs($I,{data:[{name:"Distance",value:parseFloat(H.totalDistance||0),unit:"km"},{name:"Duration",value:parseFloat((H.totalDuration||0)/60),unit:"min"},{name:"Calories",value:parseFloat(H.totalCalories||0),unit:"cal"},{name:"CO2 Saved",value:parseFloat(H.totalCarbon||0),unit:"kg"}],margin:{top:5,right:30,left:20,bottom:60},children:[B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),B.jsx(Ad,{tickFormatter:Oe=>Oe.toFixed(2),tick:{fontSize:12}}),B.jsx(yu,{formatter:(Oe,He,Ue)=>Ue&&Ue.payload?[`${Oe.toFixed(2)} ${Ue.payload.unit}`,He]:[Oe,He],contentStyle:{fontSize:12}}),B.jsx(Jp,{dataKey:"value",fill:"#009C8C",children:B.jsx(np,{dataKey:"value",position:"top",formatter:(Oe,He)=>He&&He.payload?`${Oe.toFixed(2)} ${He.payload.unit}`:Oe.toFixed(2),style:{fontSize:"11px"}})})]})})]}),B.jsxs("div",{className:"chart-container",children:[B.jsx("h3",{className:"chart-title",children:"System Overview"}),B.jsx(Up,{width:"100%",height:300,children:B.jsxs($I,{data:qe,margin:{top:5,right:30,left:20,bottom:60},children:[B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),B.jsx(Ad,{tick:{fontSize:12}}),B.jsx(yu,{contentStyle:{fontSize:12}}),B.jsx(Jp,{dataKey:"value",fill:"#009C8C"})]})})]})]}),B.jsxs("div",{className:"revenue-section",children:[B.jsx("h3",{className:"chart-title",children:"Today's Hourly Revenue"}),B.jsx(Up,{width:"100%",height:300,children:B.jsxs(ANe,{data:pe.map((Oe,He)=>({hour:`${String(He).padStart(2,"0")}:00`,value:Oe})),margin:{top:5,right:30,left:20,bottom:5},children:[B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"hour",tick:{fontSize:12},interval:2}),B.jsx(Ad,{tick:{fontSize:12},tickFormatter:Oe=>`${Oe.toFixed(2)}`}),B.jsx(yu,{formatter:Oe=>[`${Number(Oe).toFixed(2)}`,"Revenue"],contentStyle:{fontSize:12}}),B.jsx(Xv,{type:"monotone",dataKey:"value",stroke:"#4CAF50",strokeWidth:2,dot:{fill:"#4CAF50"}})]})})]})]})]})},HD=()=>B.jsxs("div",{className:"dashboard",children:[B.jsx(GL,{})," ",B.jsxs("div",{className:"dashboard-content",children:[B.jsx(cA,{})," ",B.jsx(PNe,{})," "]})]}),Lp=()=>{const t=m3(),[e,a]=ie.useState(""),[r,i]=ie.useState(""),[l,c]=ie.useState(""),[n,v]=ie.useState({open:!1,message:""}),R=I=>`/ecpcaps/assets/${I}`,x=I=>{v({open:!0,message:I}),setTimeout(()=>v({open:!1,message:""}),3e3)},N=async I=>{I.preventDefault();try{const Z=(await fle(eA,e,r)).user;if(!(await Fc(Di(Ar,"super_admins",Z.uid))).exists()){x("You are not authorized as a Super Admin."),await gle(eA);return}t("/dashboard")}catch(k){x(k.message)}};return B.jsxs("div",{className:"login-container",children:[B.jsx("div",{className:"login-logo-container",children:B.jsx("img",{src:R("ecoridelogo2.png"),alt:"Eco Ride Logo",className:"login-logo"})}),B.jsx("p",{className:"login-subtitle",children:"Drive Green, Ride Clean!"}),B.jsx("h2",{className:"login-title",children:"Super Admin Login"}),B.jsxs("form",{className:"login-form",onSubmit:N,children:[l&&B.jsx("p",{className:"error",children:l}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Email"}),B.jsx("input",{type:"email",value:e,onChange:I=>a(I.target.value),required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Password"}),B.jsx("input",{type:"password",required:!0,autoComplete:"current-password",value:r,onChange:I=>i(I.target.value)})]}),B.jsx("button",{type:"submit",className:"login-button",children:"LOG IN"})]}),n.open&&B.jsx("div",{className:"snackbar",children:n.message})]})},ENe=JSON.parse('[{"Raw Address":"168 SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"235 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"118-CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"21 EARTH STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ST.RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"188 M DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"9 E&E COMP. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"155 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"338 T.MANAG ST. PARADA Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"9R CABRAL STREET Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"195 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"250 S. DE GUZMAN ST BO Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FV4 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"98 7TH ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 19TH ST. Parada Valenzuela City"},{"Raw Address":"TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"0002 Parada Valenzuela City"},{"Raw Address":"T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"249 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"91 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"095 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"012 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"244 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"12 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"187 UNIT14 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"230 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA T. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT 101 CAPT CRUZ ST COR Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"140 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"441 P GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"234 Fortune Village 5 19T Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT1 Parada Valenzuela City"},{"Raw Address":"36-A PARADA RD. Parada Valenzuela City"},{"Raw Address":"93 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 LAGMDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST Parada Valenzuela City"},{"Raw Address":"74 PARADA ST. Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APRT. 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"178 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMPD. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1992 1ST. BENMARIE COMP FV5 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"166 SALAZAR Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"93 E. CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"21ST PARADA ROAD Parada Valenzuela City"},{"Raw Address":"339 BO. Parada Valenzuela City"},{"Raw Address":"295 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"276B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"04 Parada Valenzuela City"},{"Raw Address":"436 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"5 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"191 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B6 L7 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CPD. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS HOMES. PARADA Valenzuela City"},{"Raw Address":"39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"LOT 23 BLK 14 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"259 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA ST. Parada Valenzuela City"},{"Raw Address":"99 SATURN ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE VillageAG 5 Parada Valenzuela City"},{"Raw Address":"234 ALOHA COMP. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L13 B19 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"07 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"43 B. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"250 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"121 CONZUELO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPITAN CRUZ ST Parada Valenzuela City"},{"Raw Address":"19921 ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN ST. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"15 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"232 SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 LAGADAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"321 S. DEG GUZMAN Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 6TH ST. FORTUNE   Parada Valenzuela City"},{"Raw Address":"77 PARADA RD. EXT. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"264 25TH ST. FORTUNE VIL 5 Parada Valenzuela City"},{"Raw Address":"0090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"412 Fortune Village 7 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"UNIT 3 LOT 16 BLK 8 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"278 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"306-A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"114-E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"58 PARADA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"466 KA BERONG Parada Valenzuela City"},{"Raw Address":"321 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"190 B MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STEET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"386 IMPONG JUANA STREET Parada Valenzuela City"},{"Raw Address":"0419 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B5 L7GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. BO.PARADA Valenzuela City"},{"Raw Address":"388 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"71 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"20 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"032 Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BK3 LT12 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"302-B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"125 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"320 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 MOLAVE Parada Valenzuela City"},{"Raw Address":"0011 UNIT C MOLAVE ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Parada Valenzuela City"},{"Raw Address":"236 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FV 5 Parada Valenzuela City"},{"Raw Address":"AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"7 CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"414 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"184 RAMON ST FV4 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"19-B ZAMORA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"18 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"# 43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"083 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"391 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"90 G. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"297-D T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 PARADA RD. Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR STREET Parada Valenzuela City"},{"Raw Address":"114 YAKAL ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"452 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO Parada Valenzuela City"},{"Raw Address":"22 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6. PARADA Valenzuela City"},{"Raw Address":"276A S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"0094 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"101 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"301 T.MANANG Parada Valenzuela City"},{"Raw Address":"004 Parada Valenzuela City"},{"Raw Address":"246 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#93 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B5L3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"87 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"317 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"8-FIFTH ST. Parada Valenzuela City"},{"Raw Address":"157 ELAGDAMEO ST. FV4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"#12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"89 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"468-G KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"6 Parada Valenzuela City"},{"Raw Address":"333 A TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"242 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. COR. Parada Valenzuela City"},{"Raw Address":"043 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"339 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"031 PARADA RD Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"35 Parada Valenzuela City"},{"Raw Address":"184 Fortune Village 6 MOLAVE ST. PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR Parada Valenzuela City"},{"Raw Address":"20 EUGENIO Parada Valenzuela City"},{"Raw Address":"01 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B13L27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"253 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORUNE Village4 Parada Valenzuela City"},{"Raw Address":"B1 L9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"00002 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"187 UNIT 11 3RD FLOOR FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"181 FELIZA Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"200 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"214-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"# 86 C. CAPITAN CRUZ Parada Valenzuela City"},{"Raw Address":"# 95 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK3 LOT20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"241 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"268 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"5 PARADA Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"405-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE Parada Valenzuela City"},{"Raw Address":"339 T. MANANG Parada Valenzuela City"},{"Raw Address":"39 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"188 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"412-B P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"204B F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"162 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK. 2 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"L 9 B 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"231 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"FRANCISCO Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"21ST PARADA RD Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#39D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"3A LOT 13 BLK 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"9001 LOT 4 A CALLE ONCE Parada Valenzuela City"},{"Raw Address":"450 Parada Valenzuela City"},{"Raw Address":"283 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"043 6TH ST. CORNER NARRRA ST. Parada Valenzuela City"},{"Raw Address":"413-J P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L26 NARRA ST Parada Valenzuela City"},{"Raw Address":"065 BO.PARADA Valenzuela City"},{"Raw Address":"27 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"140 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"84 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"123 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#12 PARADA ST. Parada Valenzuela City"},{"Raw Address":"276-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"420 ZAMORA FV7 Parada Valenzuela City"},{"Raw Address":"18 A F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. MANALANG APT. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"UNIT1 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"413 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"20 EUGENIO ST. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"39 D RAMON ST. SANTIAGO COMPOUND F4 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"SERVE 1 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"220D 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"11 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"26 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"176 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"259 2ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 C P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"410-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"36-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"413 FV7 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. COR. M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0006 BLOCK 3 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RUMARAO COMPD Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"134 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"COR. PEARL & CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPUND Parada Valenzuela City"},{"Raw Address":"29 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"414 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"227 ABLERADO ST. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1F DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"119A KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"22 Parada Valenzuela City"},{"Raw Address":"10 5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ABELARDO Parada Valenzuela City"},{"Raw Address":"199 6TH Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"65 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"109 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"283 MARTA ST. Parada Valenzuela City"},{"Raw Address":"371 -A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT A 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L22 JADE ST Parada Valenzuela City"},{"Raw Address":"2 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"067 PARADA RD Parada Valenzuela City"},{"Raw Address":"165 G ACACIA ST Parada Valenzuela City"},{"Raw Address":"441 GOMEZ Parada Valenzuela City"},{"Raw Address":"18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"9 VENUS ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK1 LOT5 TMHOA T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"207 FELA BUKID Parada Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"RAMON ST. Parada Valenzuela City"},{"Raw Address":"93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"91B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 A CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 4 CALYE 7 Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"080 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"322 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"122 CALE ONCE ST. Parada Valenzuela City"},{"Raw Address":"193-C M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"62 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"201 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 26 MARS ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"4389 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 ST. Parada Valenzuela City"},{"Raw Address":"94A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0118A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"139 Fortune Village 5 DRIVE Village Parada Valenzuela City"},{"Raw Address":"ADOR ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"30B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"361 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST.PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"307 JIMENEZ ST.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. CORNER NARRA Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"123 C. CRUZ Parada Valenzuela City"},{"Raw Address":"414 PARADA ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMPOUND WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"1243 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"169 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FORUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"CALL ONSE Parada Valenzuela City"},{"Raw Address":"097 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"104 A CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"#330 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"B2L20 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"449 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO FV 4 Parada Valenzuela City"},{"Raw Address":"279-B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"35 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"28 PARADA RD Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"# 12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG STREET. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"365 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK9 LOT29-A KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"169 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONCE Parada Valenzuela City"},{"Raw Address":"464 KAINGIN Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 ROSILOS Parada Valenzuela City"},{"Raw Address":"470 CARACTA VillageE KAINGIN ST Parada Valenzuela City"},{"Raw Address":"457 F KAINGIN ST Parada Valenzuela City"},{"Raw Address":"0147E LOT 0147 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"105 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"283 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"348 CAPT.CRUZ ST. BO. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"8 M. LAUREL DRIVE Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"JORGE EMBUSCADO Parada Valenzuela City"},{"Raw Address":"#153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"3 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"332 T MANANG ST Parada Valenzuela City"},{"Raw Address":"514 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"412 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"224 2OTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 BELARDO ST. FV 4 Village Parada Valenzuela City"},{"Raw Address":"25 GUENIO Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"136 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"199 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 14 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"307 JIMENES ST. Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 6 TANDANG MANANG HOWA Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. Parada Valenzuela City"},{"Raw Address":"100 E. DE GULA COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#6 Fortune Village 5 5TH STREET Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR DOON COMPD. Parada Valenzuela City"},{"Raw Address":"301 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"172 23 ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Fortune Village 5 MOLAVE EXT. Parada Valenzuela City"},{"Raw Address":"111 Fortune Village 6 Village YAKAL ST. Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN BLK. 5 LOT 15 Parada Valenzuela City"},{"Raw Address":"458 KAINGIN Parada Valenzuela City"},{"Raw Address":"2 YAKAL ST. CORNER ACACIA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"471-A KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"205 FELISA ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO Parada Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"L10 B 2 PARADA EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"413H SANTOS TWNH P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L6 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"#70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"0281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"#91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L-10 B-4 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"363 APT E. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"222C ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"161 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. Parada Valenzuela City"},{"Raw Address":"456-C KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"333 APTC. KAMAGONG ST FV6 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST Parada Valenzuela City"},{"Raw Address":"BL 3 LT 5 GINTONG SILANGAN 349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"201 A. FELIZA Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"HIYAS HOME PARADA RD. Parada Valenzuela City"},{"Raw Address":"233 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"226 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLOCK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"470 PARADA ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"MACABALO APARTMENT PILAR ST. Parada Valenzuela City"},{"Raw Address":"118 E CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"21ST F5 MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"15 F AANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"046 Fortune Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"95P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E AND E COMPD. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"0222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"467-A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"410 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"0394L SAN ADNRES ST. Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"SAPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"352 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"121 E LAGDAME ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"171 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 5THV ST. FV 5 Parada Valenzuela City"},{"Raw Address":"468 KAINGI ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK. 11 FORTUNE DRIVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LOT 10 NIPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"DIZON COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"28 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"363 D. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"91-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 F. FRANCISCOST Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 7 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"171 A.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 5TH ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"272 DOOR 3 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0339 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B1 L2 24TH ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"444 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"121 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"02 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. Parada Valenzuela City"},{"Raw Address":"4365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"327 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"184 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"273 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"407 Parada Valenzuela City"},{"Raw Address":"188 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"3201 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"193 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1548 F PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST DOON COMPD Parada Valenzuela City"},{"Raw Address":"257 RIZALINA STREET Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"258 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"091 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"166 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"278 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"342 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"193 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"140 E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"PEARL CORNER SAPPHIRE ST. B.Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"013 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"# 10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"312 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO Parada Valenzuela City"},{"Raw Address":"2970 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"312 INT.JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"250 25TH ST. FORTUNE DRIVE Village 5 Parada Valenzuela City"},{"Raw Address":"13 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 STREET 21 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"187 Parada Valenzuela City"},{"Raw Address":"414 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"466 KABERONG KAINGIN Parada Valenzuela City"},{"Raw Address":"BLK 2 GINTONG SILANGAN SAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"392-B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PARADA ST. SALAZAR Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"443 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"161 FELISA SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ. PARADA Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"186 FELIZA Parada Valenzuela City"},{"Raw Address":"22 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"121 CAPITAN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"#185 FILIZA Parada Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 10 LOT 5 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. Parada Valenzuela City"},{"Raw Address":"4542 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN Parada Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"88 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT3A B9L30 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"174 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"140 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"1252 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"319 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"278 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG. PARADA Valenzuela City"},{"Raw Address":"LOT 29 A BLK. 9 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"111-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 6THST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"12 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39C PARADA RD Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"91A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"70 PARADA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"150 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"233 19 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"433 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"124 -B CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"9 M. LAUREL STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"88 I. SANTIAGO Parada Valenzuela City"},{"Raw Address":"31 U4&5 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L8 B2 TINDALO ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B2 L8 349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#136 NARRA ST. Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST.PARADA Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARI CPD. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD WEST Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"DAET CMPD.PARADA Valenzuela City"},{"Raw Address":"417 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"9 PARADA RD. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"150 AVELIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 BLK. B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"Q02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"338 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"40 PARADA RD Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"24TH STREET BEN MARIE COMPD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"094 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"417 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"45-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"333 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"60 Fortune Village 6 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST . PARADA Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 T.EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"333-A KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST. BENMARE COMP. Parada Valenzuela City"},{"Raw Address":"139 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"65 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"39 D SANTIAGO CPMD. FV4 Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"170 SLAZAR ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B 2 L19 SAPPHIRE ST.HIYAS HOME Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138-E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1114 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"14 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"220 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DOOR 4 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"4-D S.DE GUZMAN ST. EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"328 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"360-J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"INT. CAPT.CRUZ. ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204-B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 S. DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"225 A BELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"267 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"410P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"34 PARADA RD Parada Valenzuela City"},{"Raw Address":"365 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"351-C CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"DOOR B. MACABALO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"78-B PARADA EXTN. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"E. QUENIO ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP 21 ST FORTUNE Parada Valenzuela City"},{"Raw Address":"203 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 1 SALAZAR Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"067 E PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET Parada Valenzuela City"},{"Raw Address":"CABRAL ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA ST Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"310 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"FELISA ST Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"435 B. ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"67 FORTUNE VIILAGE 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"19921 ST. Parada Valenzuela City"},{"Raw Address":"410 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD Parada Valenzuela City"},{"Raw Address":"B5 L6 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"15 F. Parada Valenzuela City"},{"Raw Address":"MENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT10 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"B4L7 MHOAI TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L24 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"239 PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST FV4 Parada Valenzuela City"},{"Raw Address":"055 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"339TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"BLK.14 L3 M. DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"392-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN EXT. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"193 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"233 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"170 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FANCISCO ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"FORTUNE5 5 Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 3 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"465B KAINGIN ST Parada Valenzuela City"},{"Raw Address":"CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"185 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":". Parada Valenzuela City"},{"Raw Address":"WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 B DOON SALAZAR ST. COMPD. Parada Valenzuela City"},{"Raw Address":"230-S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"L 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"199 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"273 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"154 ALICICA ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village. 5 Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"COR. 6TH ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"365-A TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"351 D. CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"TOMASA Parada Valenzuela City"},{"Raw Address":"276 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"91-E CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"316 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"110 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FELIZA ABUKID Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. PARADA Valenzuela City"},{"Raw Address":"0177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLIHAN COMPD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STR Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"172 RAMON ST. Parada Valenzuela City"},{"Raw Address":"202-A FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"9-E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"05 118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST Parada Valenzuela City"},{"Raw Address":"324 TANGDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BLK.8 LOT31 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"327 T. MANANG Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMP Parada Valenzuela City"},{"Raw Address":"L14 B 5 GINTONG SILANGAN ST. Parada Valenzuela City"},{"Raw Address":"172 Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"85 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"LOT 17 BLK 2 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"28 PARADA Valenzuela City"},{"Raw Address":"LOT 4 BLK 21 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"33 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"249 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168-B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"052 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"363-D TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"236 7TH ST. PARADA Valenzuela City"},{"Raw Address":"5 Parada Valenzuela City"},{"Raw Address":"5 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"18 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"40 PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"255 TOMAS ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"119 PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 PILAR ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD Parada Valenzuela City"},{"Raw Address":"0349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"271 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD ST. Parada Valenzuela City"},{"Raw Address":"L6 B2 TINDALO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"01 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"FELIZA Parada Valenzuela City"},{"Raw Address":"146 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"09 BO. PARADA RD. Parada Valenzuela City"},{"Raw Address":"405 B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 M DEGULA Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"416 TATA ERO Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"422 GOMEZ ST. FORUNE Village 7 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"380 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"410 A- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR 12 118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"199 AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"384 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 ABELARDO FAVillageA Parada Valenzuela City"},{"Raw Address":"5JUPITER ST. Parada Valenzuela City"},{"Raw Address":"333-F KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"111 YAKAL STREET Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"352 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"235 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0260 1 TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"84 A CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"131-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"PARADA ROAD 28 Parada Valenzuela City"},{"Raw Address":"14 B PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SNTIAGO ST. Parada Valenzuela City"},{"Raw Address":"16 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"314 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"184 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"25 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"410 T. MANANG Parada Valenzuela City"},{"Raw Address":"313 MENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWAN HOUSE Parada Valenzuela City"},{"Raw Address":"202 FELIZA Parada Valenzuela City"},{"Raw Address":"278 PILAR STREET Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"131-CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 Parada Valenzuela City"},{"Raw Address":"055 PARADA RD. COR. IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"311 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG LOT 3 BLOCK 14 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"DELA CRUZ COMP. CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"026 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 GINTONG SILANGAN A . FRANCISCO Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"002 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"11-B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407-B P. DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"200 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"061 PARADA RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"D: Parada Valenzuela City"},{"Raw Address":"330 TIA. MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"407 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"#267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"007 PARADA RD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 ST.PARADA Valenzuela City"},{"Raw Address":"5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"150 NARRA STREET Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"146 DALAWAN Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"384 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE V FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"119 Fortune Village 5 6 ST. Parada Valenzuela City"},{"Raw Address":"161 B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"L2 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"192-3 6TH ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"0320 D S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"262 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"416 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 VENUS ST CMPD SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 19 HIYAS HOMES SAPHIRE ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"F.FRNCISCO ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"30 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"124B CUPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"37 PARADA RD Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"168 INT. SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"94- B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"419 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"222 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"0394 (G.) SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"8 VENANIO RD. P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F. SANT IAGOS T. Parada Valenzuela City"},{"Raw Address":"200C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"310 MENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"#255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"0306 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"168N SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"LT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT7 TANDANG MANANG TMHOA Parada Valenzuela City"},{"Raw Address":"287 BO. PARADA SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"457-F KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"320 A SANTIAGO DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT12 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"307 FELISA STREET Parada Valenzuela City"},{"Raw Address":"KALYE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"268 25TH Fortune Village 5. Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SALASAR ST. Parada Valenzuela City"},{"Raw Address":"2860 140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"357 FRANCISCO Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN PARADA Valenzuela City"},{"Raw Address":"FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"150 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"264 B 4TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILISA BUKID Parada Valenzuela City"},{"Raw Address":"095 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"39-K RAMON ST. Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"245 19TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE PARADA RD. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"284 P. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"149 A 6TH ST. KAMAGONG ROAD Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"207 STREET FILISA BUKID Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"233 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"366 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN COMP. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B4 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"50 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"1288 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 S.DEGUZMAN Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"2532 140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"274 Parada Valenzuela City"},{"Raw Address":"250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"207 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L1 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST Parada Valenzuela City"},{"Raw Address":"121 Parada Valenzuela City"},{"Raw Address":"169 DON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"158 NARRA ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 25TH. Parada Valenzuela City"},{"Raw Address":"424 BURGOS Parada Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"33 Parada Valenzuela City"},{"Raw Address":"466C KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"158 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET CORNER 6TH STREET Parada Valenzuela City"},{"Raw Address":"138 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"415 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"100 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"237 19TH Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Parada Valenzuela City"},{"Raw Address":"252 DEGUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"107 E.LAGDAMEO ST. FVF. 4 PARADA Valenzuela City"},{"Raw Address":"258 INT. S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"210 21TH STREET COR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CORNER 23 RD. ST. FOERTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. STREET Parada Valenzuela City"},{"Raw Address":"412-B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR ST Parada Valenzuela City"},{"Raw Address":"369 T.ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"028 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"67 B PARADA ROAD EXIT FORTUNE6 Parada Valenzuela City"},{"Raw Address":"407-B P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"122 CALLE II PARADA Valenzuela City"},{"Raw Address":"249 Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. COR. MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR Parada Valenzuela City"},{"Raw Address":"FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"175-B RAMON STREET Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"215 PARADA Valenzuela City"},{"Raw Address":"39-B RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"101 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD FVG Parada Valenzuela City"},{"Raw Address":"201 22ND ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BENMARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"231 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG ST.KAINGIN Parada Valenzuela City"},{"Raw Address":"34 PARADA ST. Parada Valenzuela City"},{"Raw Address":"406 Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"#92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"339 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"139 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"021 EUGENIO BARIO Parada Valenzuela City"},{"Raw Address":"175 FELISA ST. Parada Valenzuela City"},{"Raw Address":"F. Village 5 Parada Valenzuela City"},{"Raw Address":"422 BURGOZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"201 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"469-B KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"487 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"# 95 A. F. SNTIAGO Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"227 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"236 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"441 Parada Valenzuela City"},{"Raw Address":"41 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0506 UNIT 2 TINDALO ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"95 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"308 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"86 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"264 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. PARADA Valenzuela City"},{"Raw Address":"387 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"53 SALAZAR RD. BOPARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"136 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ADOR ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"B1 L3 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"180 23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST Parada Valenzuela City"},{"Raw Address":"224 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 22ND ST. Parada Valenzuela City"},{"Raw Address":"161 A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"378 A. TATA ANDRES Parada Valenzuela City"},{"Raw Address":"169 D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"249 ABELLARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"2531 M.DELOS REYES ST. PARADA Valenzuela City"},{"Raw Address":"456 KAINGIN Parada Valenzuela City"},{"Raw Address":"MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"B-7 L-7 BURGOS ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"458 P. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"009 CABRAL ST. Parada Valenzuela City"},{"Raw Address":"WEST CVR Parada Valenzuela City"},{"Raw Address":"9E PARADA RD. PARADA Valenzuela City"},{"Raw Address":"# 347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"07 HIYAS HOMES CORAL ST. Parada Valenzuela City"},{"Raw Address":"199 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"389 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"325 T MANANG ST Parada Valenzuela City"},{"Raw Address":"188 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"0002 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"415 B TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"223 A BELARDO ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"#15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 RAMON FORUNTE Village 4 Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK. 2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON Parada Valenzuela City"},{"Raw Address":"448 ROMARAO SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 S DU GUZMAN ST Parada Valenzuela City"},{"Raw Address":"254 25ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"B1L5 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. BO. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON CPND. Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 12 BURGOS ST. FV7 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"272 IMPONG JUANA ST. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD. Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FV5 Parada Valenzuela City"},{"Raw Address":"268 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"ure Name and Signature Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"297 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"366 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"87 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"183 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"185 D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4-3 GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND 21ST STREET Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"26 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"112 Parada Valenzuela City"},{"Raw Address":"019 PARADA Valenzuela City"},{"Raw Address":"33 EARTH F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALIN ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"mplete. Parada Valenzuela City"},{"Raw Address":"80 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"156 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"442 ST. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"412B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2345 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"98L KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAINGIN Parada Valenzuela City"},{"Raw Address":"244 7 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"153 PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. BRGY. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"311 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Parada Valenzuela City"},{"Raw Address":"199 BM COMP. 21 ST FV5 Parada Valenzuela City"},{"Raw Address":"ILOCTO ST. PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"B19 EARTH ST Parada Valenzuela City"},{"Raw Address":"261 25ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"220 SALVADOR ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 7 Parada Valenzuela City"},{"Raw Address":"99 VENUS Parada Valenzuela City"},{"Raw Address":"94 B. FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 12 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"2OO C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"LOT 31 EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST Parada Valenzuela City"},{"Raw Address":"B3L16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"192 A M . DEGULA ST. Parada Valenzuela City"},{"Raw Address":"B2L23 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"Village 5&6 Parada Valenzuela City"},{"Raw Address":"230 - 1 D. S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"368 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"091 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"77 CCAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 RAMON ST FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK 1 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"B4 L 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"BLK. 7 37 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1ST ST. BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"50 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"440 RUMARAO ST. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 20 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"440 RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"DOOR2 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"349 F FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO STREET Parada Valenzuela City"},{"Raw Address":"B6 L9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"302 B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"W77 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"12 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"314 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"252 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"497 Parada Valenzuela City"},{"Raw Address":"181 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 PARADA Valenzuela City"},{"Raw Address":"403-B TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"40 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"UNIT 2 #14 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"68 B PARADA RD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"193-A M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"349 F. FARNCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 6STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO Parada Valenzuela City"},{"Raw Address":"DOOR B PILAR ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"264 Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. BO. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"206 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"272- A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32B 258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"37 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"28 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"415 ZAMORA STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"216 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"391 SANTALON RD. Parada Valenzuela City"},{"Raw Address":"BET 6 AND 7 ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"12 - I CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"320 2nd Floor E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"440 ROMARAO COMPD. WESTSERVICE ROAD Parada Valenzuela City"},{"Raw Address":"96 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"JVC PARADA Valenzuela City"},{"Raw Address":"BEN MARIE CMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA Parada Valenzuela City"},{"Raw Address":"130 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#77 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"CORNER HIYAS STREET Parada Valenzuela City"},{"Raw Address":"16 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"VAL. M.M. Parada Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"17 D. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"6 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"283 S . MARTHA ST. Parada Valenzuela City"},{"Raw Address":"276 PILAR ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"468 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"309 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"45 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"083 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B5 L 2 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST. SILANGAN Parada Valenzuela City"},{"Raw Address":"117A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"064 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. FV5 Parada Valenzuela City"},{"Raw Address":"443-3 SERVICE RD Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"289 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"97A CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"COR. OLIVA ST. & RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"341 20TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"216 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"200 C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"9 PLUTO F .SANTIAGO Parada Valenzuela City"},{"Raw Address":"32 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"DE GULA APT. Parada Valenzuela City"},{"Raw Address":"344 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"355 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"2735 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0909 ADOR STREET Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST.PARADA Valenzuela City"},{"Raw Address":"203 B. VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"250 UNIT 9 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 E S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"064 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"442 18TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"LT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"015 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 3 ACACIA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"149 NARRA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"416 TATAERO Parada Valenzuela City"},{"Raw Address":"161 SALAZAR Parada Valenzuela City"},{"Raw Address":"306 CAPT.DAET COMP. Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON STREET Parada Valenzuela City"},{"Raw Address":"270 A.S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"ALICIA ST.Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 16 LOT 12 M DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B1 L 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1827 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"68 B PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L1 B2 A. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"111E LAGDAMEO STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"SANTOAGO ST. Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 ANTHONY Parada Valenzuela City"},{"Raw Address":"107 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"451 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 7 TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"193 FORTUNE DR. ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"299 B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"321-1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 B. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO ST. GINTOMG Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"277 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"362A TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"182 K MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"341 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0098 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"388 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"145 UNIT B NARRA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. CORNER IPIL FV6 Parada Valenzuela City"},{"Raw Address":"1-DEMBUSCADO APT. 230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN RD. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLACK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN Parada Valenzuela City"},{"Raw Address":"# 61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. E&E SUBD. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"39 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"169 F. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"348 CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0385 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"173 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"007 Parada Valenzuela City"},{"Raw Address":"14 B PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. IPIL Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"011 PARADA ST. Parada Valenzuela City"},{"Raw Address":"166 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"186-D 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"310 MENEZ STREET Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"354 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"453 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"194 19TH STREET Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 Parada Valenzuela City"},{"Raw Address":"24 ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141 Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"190 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village.. Parada Valenzuela City"},{"Raw Address":"362-B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"243 SOUTH DE GUZMAN Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"LOT 12 BLOCK 5 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"317 F Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"247 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 A. M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"29 PARADA RD Parada Valenzuela City"},{"Raw Address":"157-B PARADA Valenzuela City"},{"Raw Address":"61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"349 A FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0035 KAINGIN Parada Valenzuela City"},{"Raw Address":"04 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"073 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"182 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"173 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"270 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"249 ABELARDO Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"15 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA RD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"258-S.DE GUZMANST. PARADA Valenzuela City"},{"Raw Address":"22A EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"#131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID STREET Parada Valenzuela City"},{"Raw Address":"109 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"347 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"19 BLK. 4 FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 4 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Parada Valenzuela City"},{"Raw Address":"098 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR Parada Valenzuela City"},{"Raw Address":"349 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"#28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"172 23RD ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"100 LAGMADEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"21ST. FORTUNE DRIVE COFR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"111 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"259 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"132 C KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"317 A.TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"96 PARADA Valenzuela City"},{"Raw Address":"193 6TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"252 ABELARDO Parada Valenzuela City"},{"Raw Address":"285 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"015 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"203-18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Q5151 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"411 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ. PARADA Valenzuela City"},{"Raw Address":"199 ANTHONY ST. PARADA Valenzuela City"},{"Raw Address":"177 FELISA ST. Parada Valenzuela City"},{"Raw Address":"78 PARADA ROAD EXTN. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA Parada Valenzuela City"},{"Raw Address":"68 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"135 A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"KALYE ONSE Parada Valenzuela City"},{"Raw Address":"PARADA ST. Parada Valenzuela City"},{"Raw Address":"250-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q 551 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"130 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"2-B F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"2695 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"ADOR STREET Parada Valenzuela City"},{"Raw Address":"67 PARADA RD. Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 FORTUNE STREET Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 A. MOLAVE ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"424 A. BURGOS ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. ROMARAO COMP. Parada Valenzuela City"},{"Raw Address":"93 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"1010 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"44 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"11 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"230-1-D S. D GUZMAN ST EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"207 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"218 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"175 23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"85 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ADOR ST SISCAR APT. Parada Valenzuela City"},{"Raw Address":"19 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"8 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"LOT 12 BLK 1 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#3 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"247 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"278 TATA ENTONG ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"282 SANTALON RD. PARADA Valenzuela City"},{"Raw Address":"257 ADOR ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"330 T.AMANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"1223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"200 A. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"091-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"325 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"140 NARRA ST FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO BAGONG SILANG Parada Valenzuela City"},{"Raw Address":"32- F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. RIVERA CMPD. Parada Valenzuela City"},{"Raw Address":"165 ACACIA Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE 501 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"35 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"02 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 207 22ND ST. Parada Valenzuela City"},{"Raw Address":"97 KAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"12B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"257 20ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT 1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"204 6 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"003 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"242 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"306 - A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA RD. Parada Valenzuela City"},{"Raw Address":"287 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 A S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435-C ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"15 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"452 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"0024 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"24 JENUS Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILLAR ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"425-T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"Fortune Village 5 21ST. STREET Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. Parada Valenzuela City"},{"Raw Address":"18 ROAD Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST. Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE IV Parada Valenzuela City"},{"Raw Address":"0378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"243F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#73 B. PARADA RD. EXT. FV7 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Parada Valenzuela City"},{"Raw Address":"469 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"441 PARADA Valenzuela City"},{"Raw Address":"470 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"120 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"35 PARADA RD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"273 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#45 A. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDES ST. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"297 - D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"182-D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"385 Parada Valenzuela City"},{"Raw Address":"M.DEGULA Parada Valenzuela City"},{"Raw Address":"155 ALICIA Parada Valenzuela City"},{"Raw Address":"360 DE GUZMAN ST. J- FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"202 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"9 PLUTO ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0013 7TH UNIT C FV 5 Parada Valenzuela City"},{"Raw Address":"101 DE GULA PARADA Valenzuela City"},{"Raw Address":"185-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"15-F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"022 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 19TH ST. Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"135 CONSUELO ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"357 Parada Valenzuela City"},{"Raw Address":"242 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"09 PARADA RD. Parada Valenzuela City"},{"Raw Address":"377 APT. 4 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"189 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE FOUR Village Parada Valenzuela City"},{"Raw Address":"29 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"462 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B1 L12 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"011 PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"230-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"115 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"207 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"009 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"197 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"44B PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR STREET Parada Valenzuela City"},{"Raw Address":"258 S. D EGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"219 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"93 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"397 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"111 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. BUKID Parada Valenzuela City"},{"Raw Address":"05 FORTUNE Village 6TH ST. Parada Valenzuela City"},{"Raw Address":"111 A KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"193 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"062 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 PARADA Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO Parada Valenzuela City"},{"Raw Address":"25 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"#39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"255 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"1819 PEARLS ST. Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"446 F. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE ST. Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"28 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"1 MO DIZON COMP. TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ Parada Valenzuela City"},{"Raw Address":"031 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"168 A CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"96 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"470-A KAINGIN Parada Valenzuela City"},{"Raw Address":"135 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"FATIMA COMP. PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 20 GINTONG SILANGAN F. Parada Valenzuela City"},{"Raw Address":"215 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"409 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELEZA ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"546 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"246 C S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"012 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"141 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"340 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"MERCURY STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"351 P. FRNACISCO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"121 C CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"175 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"#9E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"158 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B3 L 3 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 14 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"289 D SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"32 B 258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"112 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B1 L13 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168- SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"071 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"207 FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"204 B ANTHONY STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"A CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"291 PARADA RD. Parada Valenzuela City"},{"Raw Address":"DR. 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"37 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"268 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"155 ALICIA FV 4 Parada Valenzuela City"},{"Raw Address":"43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"236 7TH STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG STREET Parada Valenzuela City"},{"Raw Address":"0104 AS8 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#94 A. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"002 YAKAL ST COR ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"405 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"176 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L22 EARTH F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTRUNE 4 Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"032 PARADA Valenzuela City"},{"Raw Address":"190 6TH ST. COR. MOLAVE PARADA Valenzuela City"},{"Raw Address":"181 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L11 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"329 T.MANANG Parada Valenzuela City"},{"Raw Address":"5TH ST. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"359 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO RD. PARADA Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"2645 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10E FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. Parada Valenzuela City"},{"Raw Address":"99 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"412 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"18 PARAD ROAD Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"L19 B3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"L-5 BLK-06 NARRA ST. Parada Valenzuela City"},{"Raw Address":"466-C KAINGIN KABERONG Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO 31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 CALLE ONSE BO.PARADA Valenzuela City"},{"Raw Address":"19 CARACTA VillageE KAINGIN Parada Valenzuela City"},{"Raw Address":"77 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"141 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"266 F 24TH STREET Parada Valenzuela City"},{"Raw Address":"45A EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"365 F TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"206-4 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"441 RUMARAO CPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"341 21ST FOTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"171 SALAZAL Parada Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"120 CORNER ST. 25TH ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"224H 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 - 21 ST. FV5 Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"212 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"096 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BL 3 LT 24 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21ST FORTUNE Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"391F P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"DULO Parada Valenzuela City"},{"Raw Address":"438-SERVILE ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA Parada Valenzuela City"},{"Raw Address":"219 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 22 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"JADE CORNER SAPPHIRE Parada Valenzuela City"},{"Raw Address":"413 H P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"# 9 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"411-B P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMA ST.N Parada Valenzuela City"},{"Raw Address":"452 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"230 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"ILOCTO C5 Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"8 IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 19TH ST. COR. 21ST. Fortune Village 5 BO. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"194 6TH STREET Parada Valenzuela City"},{"Raw Address":"# 94 A. FELEZA ST. Parada Valenzuela City"},{"Raw Address":"338 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"109 25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"220 C 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"#18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"412 TATAERO 6 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT10 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. FORTUNE Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"430 GOME ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"123 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"359 J. FRNACISCO ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"DR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"122 CONSUELO ST. FORTUNE 04 Parada Valenzuela City"},{"Raw Address":"290 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"44 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"114 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"B2L14 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"153 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"26. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"91-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"10 E.FRANCISCO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG ST. Parada Valenzuela City"},{"Raw Address":"185 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"330 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"099 PARADA Valenzuela City"},{"Raw Address":"507 23ST FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"24 A CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"251 25TH ST. Parada Valenzuela City"},{"Raw Address":"169 ACACIA STREET Parada Valenzuela City"},{"Raw Address":"F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"36 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"204 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"144 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"113 LAGDAMEO ST. FV. 4 PARADA Valenzuela City"},{"Raw Address":"199 21 ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"189-24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 15 A207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 LOT15 AREA-A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"168 MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"37 C PARADA RD. PARADA Valenzuela City"},{"Raw Address":"203B VENUS ST. Parada Valenzuela City"},{"Raw Address":"#41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"190-C 6TH ST. COR KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE 05 Village Parada Valenzuela City"},{"Raw Address":"316 JIMINEZ CMPD. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA BUKID Parada Valenzuela City"},{"Raw Address":"0192 E 6TH ST. FORTUNE Village PH 6 Parada Valenzuela City"},{"Raw Address":"229 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"100 A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"160 NARRA ST. COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"377 18ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"71 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"325 TADANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"23 EUGENIO Parada Valenzuela City"},{"Raw Address":"MM. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"486 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"351 Parada Valenzuela City"},{"Raw Address":"148 DALAWAN Parada Valenzuela City"},{"Raw Address":"0279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"34 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"464 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"502 FORTUNE DRIVE COR. 23RD ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"381 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"ACASIA ST. KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"34 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR2 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"20 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"203 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"396 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"B5 L8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"278 PILAR ST Parada Valenzuela City"},{"Raw Address":"7 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"341 BO.PARADA Valenzuela City"},{"Raw Address":"242 19TH ST. Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 03 LOT 12 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"107 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0258 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"3 200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"243 7 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"87 BO Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"81 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"467 Parada Valenzuela City"},{"Raw Address":"173 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"250B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"409A P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"450 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"283 S DE GUZMAN SR. Parada Valenzuela City"},{"Raw Address":"308 MENES Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B1L17 PARADA RD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"19 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"65 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"205 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 17 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B 4 L 10 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"18 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"85 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"162 MOLABE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL STREET FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"225 Fortune Village 4 ABILARDO ST. Parada Valenzuela City"},{"Raw Address":"F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2 PASO DE BLAS Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"249 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"200 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L10 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"471 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND FORTUNE Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"297 D T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 BF SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"052 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 6ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"18223 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"165 FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"456 -H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"COR. 23 STREET FV 5 Parada Valenzuela City"},{"Raw Address":"LAGDAMO ST. Parada Valenzuela City"},{"Raw Address":"374 Parada Valenzuela City"},{"Raw Address":"108 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"45 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"68 B PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 12 7TH STREET Parada Valenzuela City"},{"Raw Address":"248 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. FOERTUNE 4 Village Parada Valenzuela City"},{"Raw Address":"320 D S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"27 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 BLK 2 TINADALOST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"241 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"340 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"123 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"030 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. MANUKAN Parada Valenzuela City"},{"Raw Address":"444 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"163 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"293 A.ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#002 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"220 D 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"225 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST Parada Valenzuela City"},{"Raw Address":"297-C TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2675 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"442 ROSILLAS ST. Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"179 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"LOT 1 BLCK 7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"B1 L12 BUGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 5 21ST Parada Valenzuela City"},{"Raw Address":"438 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"1956 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 Parada Valenzuela City"},{"Raw Address":"210 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"68 PARADA RD. Parada Valenzuela City"},{"Raw Address":"CA[T.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"#2 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"321-1 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 07 Parada Valenzuela City"},{"Raw Address":"247 DE GUZM Parada Valenzuela City"},{"Raw Address":"UNIT 3 SALAZAR Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"234 19 Fortune Village 5 ST Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELISA BUKID Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"279 Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"162E SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"103 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"006 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"151DALAWAN ST Parada Valenzuela City"},{"Raw Address":"137 KAINGIN Parada Valenzuela City"},{"Raw Address":"301 7TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"525 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"F. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"56 PARADA ROAD CORNER IPIL ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"S-8104 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"447 GOMEZ Parada Valenzuela City"},{"Raw Address":"143 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"23 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"002 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN Parada Valenzuela City"},{"Raw Address":"39 K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"1314A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237-S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"FATIMA COMPOUND Parada Valenzuela City"},{"Raw Address":"L1 B2 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST.3 Parada Valenzuela City"},{"Raw Address":"BL 1 LT 12 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"39 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"14 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"192 M.DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"108-B RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"56 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Parada Valenzuela City"},{"Raw Address":"457 INT. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"09 BO PARADA RD Parada Valenzuela City"},{"Raw Address":"281-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 Parada Valenzuela City"},{"Raw Address":"93 C CAP. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"299 PARADA JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"268 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"31 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"141 Fortune Village 5&6 Village Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"LOT 8 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0260 I TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"201 SELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"INT. ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA ST S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"08 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"204 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 L7 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"SUBDIVISION Parada Valenzuela City"},{"Raw Address":"LOT 11 BLK 5 JADE ST. Parada Valenzuela City"},{"Raw Address":"118 DOOR 4 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0094B C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"456 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"320 T.MANANG PARADA Valenzuela City"},{"Raw Address":"B4L12 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"125 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"137 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"455 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"82 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"123A KAMAGONG ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"353 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"94-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"175 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CMPD ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"184 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"198 Parada Valenzuela City"},{"Raw Address":"310 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"411 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"8 C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"FORTUNE7 Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"177 ST. CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"195 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST. F.V 7 Parada Valenzuela City"},{"Raw Address":"028 PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"161 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VINUS ST. Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"110 LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"387 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"192E 6ST. FORTUNR Village 5 Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"467 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"213 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"262 Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"171 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0345 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"266 24TH STREET Parada Valenzuela City"},{"Raw Address":"3 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"244 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L7 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"391 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"443 B SERVICE RD. Parada Valenzuela City"},{"Raw Address":"26 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-D SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"417 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"194 6 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187-A FELISA ST. PARADA Valenzuela City"},{"Raw Address":"31F SANTIANGO VENUS ST Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0014 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"178 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"196 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. Parada Valenzuela City"},{"Raw Address":"411 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"260 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"INT. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"111 UNIT B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"194 COR. 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"389 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93-A CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"119B PEARL ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"93-A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"393 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG Parada Valenzuela City"},{"Raw Address":"411 C P.DE GUZMAN ST. TATA ERO Parada Valenzuela City"},{"Raw Address":"140-B E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. FORTUEN 7 Parada Valenzuela City"},{"Raw Address":"E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"148 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"101A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ST Parada Valenzuela City"},{"Raw Address":"367 FELISA Parada Valenzuela City"},{"Raw Address":"14 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FORT Village Parada Valenzuela City"},{"Raw Address":"169D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"460 GOMEZ STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"13 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297B TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 Parada Valenzuela City"},{"Raw Address":"259 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"356 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"174 FELISA Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"9 PLOTO ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"030 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"12 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"444 SERVICE RR. Parada Valenzuela City"},{"Raw Address":"123-2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"327 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"186 UNIT 3 FELIZA ST Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRESS STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"179 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"406 T. MANANG Parada Valenzuela City"},{"Raw Address":"184 FELISA ST. Parada Valenzuela City"},{"Raw Address":"271 Parada Valenzuela City"},{"Raw Address":"185 FELISA Parada Valenzuela City"},{"Raw Address":"384 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"268 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"241 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 6 LOT 4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"111 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"ADOR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"310 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"AURORA COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"14 B. PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 TMHOA Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"69 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 21ST AGLEHAM COMPD. Parada Valenzuela City"},{"Raw Address":"3498 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"476 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV 4 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"094 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"180 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"23 T EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"9001 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4792 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"227 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"38 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"468 KINGIN ST. Parada Valenzuela City"},{"Raw Address":"347-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"341 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"220 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"311 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"124 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"225 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"199 21ST FV5 Parada Valenzuela City"},{"Raw Address":"243 PACING Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 5 TMHOA Parada Valenzuela City"},{"Raw Address":"0250 UNIT 11 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"#283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"95 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"188 MOLAVE ST. CORNER 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"DE GULA APT. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"377 18 STREET Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"264 19TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 KALYE ONSE Parada Valenzuela City"},{"Raw Address":"26 NARRA ST. FV 5&6 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"75 GOMEZ STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. E-E COMP. Parada Valenzuela City"},{"Raw Address":"504 FORTNE DRIVE Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"286 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"317 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"349F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"004 BO. Parada Valenzuela City"},{"Raw Address":"27 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"194 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"346 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1106 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"FORT Village 4 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"88 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"115 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"162-D SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"CALLE 11 BUKID ST. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"412 PARADA Valenzuela City"},{"Raw Address":"214 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"190D 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"258 GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"306 CAPT. DAET CPD. PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"291 Parada Valenzuela City"},{"Raw Address":"178 RAMON STREET Parada Valenzuela City"},{"Raw Address":"113 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B1 L10 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"050 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"272 S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"141 UNIT 4 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE VillageE 5-6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"411 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"225 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"274 BO.PARADA Valenzuela City"},{"Raw Address":"10 PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"B1L8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"390 Parada Valenzuela City"},{"Raw Address":"403 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"165 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"412 A P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. PARADA Valenzuela City"},{"Raw Address":"TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"73-B PARADA RD. EXT FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TATA ERO Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"59 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 AGLEHAM COMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"410 A-P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"33 E. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0346 FELISA ST. Parada Valenzuela City"},{"Raw Address":"24 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"19 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"018 EUGENIO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"863 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"31 UNIT 4&5 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"271 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"8F CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"196 MALAVE ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"124 B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"24TH BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"24 B F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD.PARADA Valenzuela City"},{"Raw Address":"36 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"RASILIA 438 PARADA Valenzuela City"},{"Raw Address":"39-C RD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"211 21TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"393 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"212 21ST. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"E & E COMP. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"223 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"455 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"056 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"352 G. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"183 23RD. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"202 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"176 23RD ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"254 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"B5 L11 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"NO 172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"252-A BLOCK 2 LOT 2 S. DE GUZMANS ST. Parada Valenzuela City"},{"Raw Address":"14-B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"188 RAMON ST Parada Valenzuela City"},{"Raw Address":"215 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"199 B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"17 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"168 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"320 Parada Valenzuela City"},{"Raw Address":"8 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"460 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"148 NARRA ST. Parada Valenzuela City"},{"Raw Address":"E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"30 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"140 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR T. DOON CMPD Parada Valenzuela City"},{"Raw Address":"009 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"185C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO Parada Valenzuela City"},{"Raw Address":"121 CONSUELA ST.FV4 Village Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B-4 L-28 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"185 B FELIZA ST Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"365B TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"20 SALAZAR Parada Valenzuela City"},{"Raw Address":"T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ CMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"314 BO.PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"464-A KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"279 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"218 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"142 DALAWAN Parada Valenzuela City"},{"Raw Address":"310 MENES ST. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"127 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"118 C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"153 PINAGPALA PHASE 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"96 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"251 25TH ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"182 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD Parada Valenzuela City"},{"Raw Address":"091 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES B.O Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"130 NARRA ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 B PARADA Valenzuela City"},{"Raw Address":"19TH ST. Parada Valenzuela City"},{"Raw Address":"271 A. MARIA ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"225 AVELARDO ST. Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"413 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"L16 B5 349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA ROAD FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"NO. 199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"181 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"6 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"#113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 PARADA Valenzuela City"},{"Raw Address":"158 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL HIYAS Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"415 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"067 PARADA ST. Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG Parada Valenzuela City"},{"Raw Address":"207 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"18 GP ST. WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ Parada Valenzuela City"},{"Raw Address":"341 PARADA 2OTH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"LOT 8 BLK.3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"116 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"888 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA STREET Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"402 7TH ST. FV. 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"397 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"423 ZAMORA ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"224 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"88 D CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"463 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"351 PHASE 2 PINAGPALA F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"320S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"207 PILISA BUKID Parada Valenzuela City"},{"Raw Address":"LE 116 CAPT. CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B1L10 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"12-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT. CRYZ ST. Parada Valenzuela City"},{"Raw Address":"207 ST. FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 4 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Village 6 Parada Valenzuela City"},{"Raw Address":"217 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 11 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"GINTONG SILANG F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE5 Parada Valenzuela City"},{"Raw Address":"273 PILAR Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOP ST. Parada Valenzuela City"},{"Raw Address":"#88 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"235 S Parada Valenzuela City"},{"Raw Address":"466-C KABERONG KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"439 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City. Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"018 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"9 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"8 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"407 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"188 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"450 NORTH DIVERSION PARADA Valenzuela City"},{"Raw Address":"258 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"22 ST. FORTUNE Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. Parada Valenzuela City"},{"Raw Address":"98 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"36A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"320-E S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"0345 KALYE 11 Parada Valenzuela City"},{"Raw Address":"59 BANDINO CORP. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"290 KAINGIN Parada Valenzuela City"},{"Raw Address":"204 C.F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANAG ST. Parada Valenzuela City"},{"Raw Address":"#468 M KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PUROK 1 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"407 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"136 E LAGDAMEO ST. Fortune Village 4 VIL Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"45 A FSANTIAGO Parada Valenzuela City"},{"Raw Address":"001 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 TH ST. Parada Valenzuela City"},{"Raw Address":"068A PARADA RAOD Parada Valenzuela City"},{"Raw Address":"0317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"86 SALVADOR STREET Parada Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"501 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 43 LOT 23 FORTUNES 5 Parada Valenzuela City"},{"Raw Address":"291 PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"94 PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"199 21 STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 5 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 24TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B 1 L10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"410 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"307 A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. 215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"L1 PHASE 2 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK 1 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"10 5TH FORTUNE Parada Valenzuela City"},{"Raw Address":"18 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"199 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"PILAR ST. FORTUNE Village4 MALINTA Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"FELIZA ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"290 PARADA Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"315 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"294 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"165 SALZAR ST Parada Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B3 L2 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 4. PARADA Valenzuela City"},{"Raw Address":"054 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"132 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"091 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"COR. KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"34A F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"259 25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"78B PARADA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"035 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"039 D.SANTIAGO COMP. RAMON ST. F.V.PH4 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"278 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUMAN ST. Parada Valenzuela City"},{"Raw Address":"412 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"COR. CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"147 DALAWA ST. Parada Valenzuela City"},{"Raw Address":"117 E. LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"378 A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"320 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"90 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR Parada Valenzuela City"},{"Raw Address":"199F 6TH FORTUNE Village Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN Parada Valenzuela City"},{"Raw Address":"FELISA STREET Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ DE GULA COMP Parada Valenzuela City"},{"Raw Address":"93C CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. BO. Parada Valenzuela City"},{"Raw Address":"255 TOMASA Parada Valenzuela City"},{"Raw Address":"125 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"297 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"272-A S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Parada Valenzuela City"},{"Raw Address":"111-C KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"CORNER 120 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"08 MARS ST. Parada Valenzuela City"},{"Raw Address":"299 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"5 PARADA RD Parada Valenzuela City"},{"Raw Address":"39-C PARADA RD. Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"0036 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"145 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. PARADA Valenzuela City"},{"Raw Address":"390 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"302 ABELLARDO Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"13 UNIT 4 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"92 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LACAY APT.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"207 FILIPA BUKID Parada Valenzuela City"},{"Raw Address":"22 AT EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"94 A. FELISA STREEET Parada Valenzuela City"},{"Raw Address":"FORTUNEVillage6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#33 EARTH ST. E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN ST. Parada Valenzuela City"},{"Raw Address":"1740 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 KAINGEN Parada Valenzuela City"},{"Raw Address":"2745 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"7 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"834 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 K. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 A.P. DE GUZMAN TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"267 PETRA ST Parada Valenzuela City"},{"Raw Address":"21 BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD FORTUNE Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST FV5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLEHAM 2IST ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"88 H CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"279 PILAR ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST . Parada Valenzuela City"},{"Raw Address":"177 CAPTIAN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 1/E DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"039 PARADA Valenzuela City"},{"Raw Address":"TATA ERRO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"30 PARADA RD. Parada Valenzuela City"},{"Raw Address":"FELISA ST.PARADA Valenzuela City"},{"Raw Address":"79 CAPT.CRUZST. PARADA Valenzuela City"},{"Raw Address":"39 B UNIT 5 RAMON ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"#201 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"97 B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"067 C PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"239 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PESAHAV Village Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"181 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"232 ABELARDO STREET FORTUNE Village NO.4 Parada Valenzuela City"},{"Raw Address":"152 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"128 Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"513 ABCO COMPD. TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK. 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"96 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"472 PETRA Parada Valenzuela City"},{"Raw Address":"168 ALICIA Parada Valenzuela City"},{"Raw Address":"320 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"140 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"100 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"I207 Parada Valenzuela City"},{"Raw Address":"411 A P. DE GUZMAN TATA ERO Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q-4 289 KAMAGONG ST.PARADA Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. DE GULA CPD. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST.FV 6 PARADA Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"94-D FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"B13 Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"331 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"127 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"038 PARADA RD. Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"L10 &12 UNITE 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"365-J TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 DOON COMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"416 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"1262 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"24 T EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"411 C TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"173 23RD ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City Parada Valenzuela City"},{"Raw Address":"334 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"342 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"UNIT 3-A BLOCK 9 LOT 30 NARRA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"JADE COR. SAPHIRE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"314 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 FRANCISCO G. SILANGAN Parada Valenzuela City"},{"Raw Address":"288 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"468-I KAINGIN ST Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 11-F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"80 Parada Valenzuela City"},{"Raw Address":"45 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMP Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"V.P.S. COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"BLK2 LOT19 HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSEULO ST. Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST.FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 BO. PARADA Valenzuela City"},{"Raw Address":"068 A PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"207 CALLE ONSE BUKID DULO Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"333-C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"172 SALAZAR Parada Valenzuela City"},{"Raw Address":"206 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"176 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0004 BLOCK 4 LOT 3 JADE ST. Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"248 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"282 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"8 M LAUREL DRIVE Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"118 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"232 G. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"LOT5 BLK 5 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"204 22ND ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"330 T. MANANG Parada Valenzuela City"},{"Raw Address":"0331 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"287 SANTOLON RD Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"262 25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"245 RAMON ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. EXTENSION Parada Valenzuela City"},{"Raw Address":"468 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"234 FORTUNE 19 ST. Parada Valenzuela City"},{"Raw Address":"467 A. KAINGIN Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"BLK. 4 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"207 FELISA STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"3204 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185-A MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"249 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"259 ADOR Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 2 TMHOA Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"5 5TH ST. Parada Valenzuela City"},{"Raw Address":"12D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"155 C. ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"114 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICI ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67B PARADA RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"374 TATA ANDREZ STREET Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"415 TAERO ST. Parada Valenzuela City"},{"Raw Address":"229 18TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L2 B6 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 BAN MARIE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPOUND ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"262 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"227 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMES STREET Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"K 39 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"501 NARRA ST. FORYUNE 6 Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100-E DE GULA COMPOUND Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"216 ANTHONY ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"392 ILOCTO COMP. KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"228 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"36 PARADA RD Parada Valenzuela City"},{"Raw Address":"062 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"KABERONG ST. Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"266 24TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"157 SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 B. MOLAVE ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"402 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 6 LOT 5 GINTONG Parada Valenzuela City"},{"Raw Address":"97B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"442 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"248 PARADA RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"258 INT. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"186 FELIZA ST Parada Valenzuela City"},{"Raw Address":"409 BIASON COMPD. P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"88 D CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"152 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT"},{"Raw Address":"148 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"BL10 L5 D NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0343-C FELISA ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST FORTUNE IV Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1 D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"228 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"37 PARADA Valenzuela City"},{"Raw Address":"P DE GUMAN Parada Valenzuela City"},{"Raw Address":"110 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"152 ACACIA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21 ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"278 7TH FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"164 SALAZAR Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0320 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"071 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"42 MARS ST. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"360 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"YAKAL ST. COR. ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"22 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CORNER HIYAS Parada Valenzuela City"},{"Raw Address":"179 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"443 B. WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"313 JEMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. Parada Valenzuela City"},{"Raw Address":"046 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"513 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"156 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"283 MARTHA Parada Valenzuela City"},{"Raw Address":"203 B. VENUS STREET Parada Valenzuela City"},{"Raw Address":"# 94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET SAN MIGUEL COMP Parada Valenzuela City"},{"Raw Address":"351 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 B. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149B 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"#39 D. SANTIAGO COMPD. F4 Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"310 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"287 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"30 C TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. COMP. Parada Valenzuela City"},{"Raw Address":"43 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"242 19 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"362 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"108 CORNER YAKAL KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"2585 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"244 7TH STRET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 1 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"L5 B10 A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"274 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARI COMPOUND 22 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"27 PARADA RD. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"258 INTERIOR M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"0011 ADOR ST. Parada Valenzuela City"},{"Raw Address":"106 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"162-C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"228 - B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"018 BARRIO Parada Valenzuela City"},{"Raw Address":"BLOCK 3 LOT 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 C. SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE VIILAGE 5 Parada Valenzuela City"},{"Raw Address":"Q487 IPIL STREET Parada Valenzuela City"},{"Raw Address":"187 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"0359 J.F. FRANCISCO ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B-7 L-25 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"20 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"F.FRANCISCO S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRE ST. Parada Valenzuela City"},{"Raw Address":"PARADA Valenzuela City"},{"Raw Address":"B4L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"285 25TH ST. FORTUNE Village PH5 Parada Valenzuela City"},{"Raw Address":"469 PARADA KAINGIN Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"317 A T.MANANG ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B 5 L 9 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"1336 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE MARCELO COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 E FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"122B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. PARADA Valenzuela City"},{"Raw Address":"161 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 -G S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"116 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 24TH ST Parada Valenzuela City"},{"Raw Address":"428 SEVICE RD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"A 94 FELISA ST. Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"119 21 ST. BENMARIE COMP. FORTUNE V Parada Valenzuela City"},{"Raw Address":"24 VENUZ E2E COMP. F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5. Parada Valenzuela City"},{"Raw Address":"#109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"456-G KAKAWATE ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"458 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"241 7TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 C S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"243 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"LOT 10 E&E COMPOUND Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"33A. FATIMA COMP. Parada Valenzuela City"},{"Raw Address":"248 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J FRANCISCO Parada Valenzuela City"},{"Raw Address":"415 T MANANG ST. Parada Valenzuela City"},{"Raw Address":"274 S Parada Valenzuela City"},{"Raw Address":"37-D PARADA RD. Parada Valenzuela City"},{"Raw Address":"391 P.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"APB MOLAVE ST. 6TH Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST HIYAS HOMES SUBD Parada Valenzuela City"},{"Raw Address":"B1L4 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"257 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#1 24 ST. FORTUINE 5 Parada Valenzuela City"},{"Raw Address":"165 SALASZAR ST. Parada Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"90 ADOR ST. Parada Valenzuela City"},{"Raw Address":"188 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0042 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"438 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"206 UNIT 1 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 3 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B1L2 TMOA Parada Valenzuela City"},{"Raw Address":"438 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMON Parada Valenzuela City"},{"Raw Address":"10 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 6TH ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"357 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"392-B S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"406 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E. Parada Valenzuela City"},{"Raw Address":"154 C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"106 LAG DAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"172 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"377 18 ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4684 HIYAS HOME SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 20 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B 2 L 13 349 FRACISCO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"450 CARREON CPD. WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"179 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"B2 L14 F. FRANCISCO GUINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"44 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"362 B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"179 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"253 ABVELARDO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"B4 L9 349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"29207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK5 LOT18 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"4480 25TH ST. Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"#244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. Parada Valenzuela City"},{"Raw Address":"#122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"235 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"5880 CORAL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"89 Parada Valenzuela City"},{"Raw Address":"279-3 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 13 LOT 27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. Parada Valenzuela City"},{"Raw Address":"249 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. PARADA Valenzuela City"},{"Raw Address":"384 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"270 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRESS Parada Valenzuela City"},{"Raw Address":"372 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD FORTUNE VILLAGE Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 C. CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"21ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"285 S.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"456 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 TATA IRRO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"47 B. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"56 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"145B NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO EXT. Parada Valenzuela City"},{"Raw Address":"22 IMPONG JUANA ST. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1752 3RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"226 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"424 BUROGOS Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"102 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST Parada Valenzuela City"},{"Raw Address":"440B GOMEZ ST. FORTUNE Village7 MALINTA Parada Valenzuela City"},{"Raw Address":"174 FELIZA Parada Valenzuela City"},{"Raw Address":"152 ALICIA Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"L7 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"B1 L9 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"234 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 PARADA PEARL Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"259 25TH ST. Parada Valenzuela City"},{"Raw Address":"411 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"145-C NARRA STREET Parada Valenzuela City"},{"Raw Address":"256 25TH STREET Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40 PEARL STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"140 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"89 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA RD. Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO CMPD. FV4 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"L8 B6 GINTONG SILANGANAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"99 VENUZ ST. F.SNTIAGO Parada Valenzuela City"},{"Raw Address":"270 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"125 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"351-C F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"243 Fortune Village 5 7TH ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"045 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. BO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"468-O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT41 NARRA ST Parada Valenzuela City"},{"Raw Address":"27A NEW BLOCK 10 NARRA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"CASTILLO COMPD. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENES COMPD. BO. PARADA Valenzuela City"},{"Raw Address":"7 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"384 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 6ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"135 LAGDAMEO ST. Fortune Village 4 VillageE Parada Valenzuela City"},{"Raw Address":"451 ZAMORA Parada Valenzuela City"},{"Raw Address":"168 DOON CMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"246 C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"94 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"456-D KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"218 ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"125 Parada Valenzuela City"},{"Raw Address":"224 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 10 JADE ST. SUBD. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6B F-SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"474 KA BERONG Parada Valenzuela City"},{"Raw Address":"40 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"31 F-SANTIAGO Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"GOMES ST. Parada Valenzuela City"},{"Raw Address":"CITY MM. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD ST Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"96 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"236 19TH ST. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"146 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"19B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. LOT 8 Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"1548-A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"200 A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST Parada Valenzuela City"},{"Raw Address":"200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"184 23RD ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO MANUKAN Parada Valenzuela City"},{"Raw Address":"18A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"169 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"246 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MORONG ST. Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"023 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGOMARS ST. Parada Valenzuela City"},{"Raw Address":"171-A SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"098 Fortune Village 5 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"215 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"276 B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"354 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"199 21ST VF5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"240 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1028 B. KAMAGONG ST. FV6&5 Parada Valenzuela City"},{"Raw Address":"0468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"193 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"135 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"423 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1430 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"229 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"256 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"200 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. 21ST FV5 Parada Valenzuela City"},{"Raw Address":"53 3RD FORTUNE V Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"B1 L12 BURGOS Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"1213 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"3B P.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"91 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"055 PARADA FORTUNE5 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"27 A. PARADA RD. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"004 PARADA Valenzuela City"},{"Raw Address":"117 LAGDAMEO FV 4 Parada Valenzuela City"},{"Raw Address":"462 P GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN Parada Valenzuela City"},{"Raw Address":"147 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"134 E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"220-C 21 ST. Fortune Village 5 SUBD. Parada Valenzuela City"},{"Raw Address":"1 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA Parada Valenzuela City"},{"Raw Address":"6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"274 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"391 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"376 Parada Valenzuela City"},{"Raw Address":"153 6TH ST. FORTUNE FIVE Parada Valenzuela City"},{"Raw Address":"437-M GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"16B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Parada Valenzuela City"},{"Raw Address":"269 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST Parada Valenzuela City"},{"Raw Address":"202 22ND ST. Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"467 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"4560 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36D PARADA RD. Parada Valenzuela City"},{"Raw Address":"190 6TH ST FORTUNE Village 5 &6 Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"201 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"307 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FV7 Parada Valenzuela City"},{"Raw Address":"264 B 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"190 DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"34 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"377 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"# 66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0005 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"122 A. KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"454 7TH ST. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5-6 Parada Valenzuela City"},{"Raw Address":"279 PILAR Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"196 MOLALE ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"4387 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"192 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"119 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"340 2OTH STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATAROMAN ST Parada Valenzuela City"},{"Raw Address":"TATA ERO ST. PARADA Valenzuela City"},{"Raw Address":"S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"168 DOON COMP Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"72 JADE ST. Parada Valenzuela City"},{"Raw Address":"332M T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"216 D DE GUZMAN Parada Valenzuela City"},{"Raw Address":"192 C 6TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT 5 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"313 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"212 21ST STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"137 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"120 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"BLK. 6 LOT 9 JADE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"91 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"139 NARRA STREET Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"FORTUNE IV RAMON ST. Parada Valenzuela City"},{"Raw Address":"198 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LE 116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"311 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 NO.4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"003 PARADA Valenzuela City"},{"Raw Address":"94-B FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"202 MOLAVE Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Parada Valenzuela City"},{"Raw Address":"488 ZAMORA ST Parada Valenzuela City"},{"Raw Address":"068 PARADA FORTUNE Village6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"181 RAMON STREET Parada Valenzuela City"},{"Raw Address":"119 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"377 18 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"31 F Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"#45 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"273 S.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 BLK 9 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"152 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG HOUSING PROJECT Parada Valenzuela City"},{"Raw Address":"FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"176 CAPTAIN CRUZ ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"321 B. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"27A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"306 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"140 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"354 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"19921 ST FORTUNE` Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2150 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"386 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"104 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"231 18ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5F SANTIAGO STREET. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"2507 - FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"22 EUGENIO Parada Valenzuela City"},{"Raw Address":"279 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"348 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"282 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"241 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"512 ABCO COMP FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE VILALGE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"166 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"015 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"162 E.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"329 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"467 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"#199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"63 PARADA RD EXT. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"14 C PEARL ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"199 6TH STREET Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE. FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 C KAMAGONG ST. FORTUNE VI Parada Valenzuela City"},{"Raw Address":"199 21 ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"93 C/ CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD ROMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"106 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L17-B2 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"10 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"#5 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"271 CONSUELO FV 4 Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 DAHOA PARAFORT Parada Valenzuela City"},{"Raw Address":"369 TATAANDRES ST Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"36 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"411 C. TATA ERRO Parada Valenzuela City"},{"Raw Address":"12 Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"365 PARADA TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 15A 207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"19 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA RD. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST.BO.Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 LOT 2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"413 P/ DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 A. EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"FATIMA ANEX CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"330 Parada Valenzuela City"},{"Raw Address":"168 KAMAGONG ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"392-C P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"A334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F BO. Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPD. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"274 TATA ENRONG STREET S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"SAN MIGUEL COMP. ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST Parada Valenzuela City"},{"Raw Address":"0343-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349 F-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"314 SANTIAGO Parada Valenzuela City"},{"Raw Address":"261 25TH STREET Parada Valenzuela City"},{"Raw Address":"259 ADOR ST Parada Valenzuela City"},{"Raw Address":"185 CASTILLO COMPOUND FELIZA ST. Parada Valenzuela City"},{"Raw Address":"PARADA RD. PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"314 PARADA Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"B1L9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUGENIO F.A APT. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"19 B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FV 6 Parada Valenzuela City"},{"Raw Address":"068A PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"242 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-D. CALLE ONSE CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"390S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"90 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"175 A MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET BLK4 LOT5 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 PETRA ST. Parada Valenzuela City"},{"Raw Address":"211 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"036 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"394 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"219 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"377 18 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"15 PARADA ST Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0013 TEMPO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"437 FV7 Parada Valenzuela City"},{"Raw Address":"5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 2 LOT 19 GINTONG Parada Valenzuela City"},{"Raw Address":"39 PARADA Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"68 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"B3 Parada Valenzuela City"},{"Raw Address":"282 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"320B S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"KM 19 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1727 B TATA ERO Parada Valenzuela City"},{"Raw Address":"245 B SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"204 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"187 B FELIZA STREET Parada Valenzuela City"},{"Raw Address":"144 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"345 CAPT FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"144 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"257 S DEGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"PARADA RD. Parada Valenzuela City"},{"Raw Address":"185-D FELIZA STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4781 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE ST. Parada Valenzuela City"},{"Raw Address":"200 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET E.N.E COMPOUND Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CPD. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"449 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"CORNER SAPPHIRE ST. HIYAS SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR Parada Valenzuela City"},{"Raw Address":"7 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"216 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FELISA ST. Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"367 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"SISCARA APT ADOR ST Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B5 L1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"168 21 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG BO. PARADA Valenzuela City"},{"Raw Address":"227 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"182 Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. SAPHIRE Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 10 CARACTA VillageE Parada Valenzuela City"},{"Raw Address":"403 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"269 INT S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"46 P. DE GUZMAN BANDINO STREET Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"40 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0147-E DOON ST. Parada Valenzuela City"},{"Raw Address":"468 - O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"260 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 7 199 BENMARIE COMP. 21 ST. Parada Valenzuela City"},{"Raw Address":"180 FELISA ST. Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"#118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FV5 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"315 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"468 Q KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 BF. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"1882 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CARREON COMPD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"240 7 STREET Parada Valenzuela City"},{"Raw Address":"202A 22 STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FV 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"141 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"252-A LOT 2 BLOCK 2 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"2157 BORNALES CPD.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#94 Parada Valenzuela City"},{"Raw Address":"036 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"313 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN COR TATA ERO Parada Valenzuela City"},{"Raw Address":"161 FELIZA Parada Valenzuela City"},{"Raw Address":"443 ROSELLA ST. Parada Valenzuela City"},{"Raw Address":"130 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"0290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B1 L6 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"1 PARADA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN COR. MARY ANN THIS WAY ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN BARRIO Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"032 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283-D DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"33 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. ST. FORTUNE Village Valenzuela City Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"242 Parada Valenzuela City"},{"Raw Address":"101 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ROAD Parada Valenzuela City"},{"Raw Address":"012 PARADA Valenzuela City"},{"Raw Address":"BL3LT9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village Parada Valenzuela City"},{"Raw Address":"185B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"235 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"336 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"468-E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"151 ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"177 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 UNIT KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"240 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"266 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"210 21ST COR. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"188 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"243 S. D GUZMAN ST Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"30 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"A22 T. EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"309 JEMENES COMP. Parada Valenzuela City"},{"Raw Address":"45A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"3A 144 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"DOOR 1 151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. Parada Valenzuela City"},{"Raw Address":"431-B GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"331 D TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"091FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BEN MARIE COMP. FV6 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"101 M. DE Parada Valenzuela City"},{"Raw Address":"28 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"273 Parada Valenzuela City"},{"Raw Address":"VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"470KAINGIN ST Parada Valenzuela City"},{"Raw Address":"4480 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"99 VENUST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"334 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"098D FORTUNE Village 7TH ST. Parada Valenzuela City"},{"Raw Address":"336 UNIT 2 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"4680 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"114E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0012 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4078 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"131 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"28 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"07 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"222 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"291 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"256 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK5 LOT2 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"200-C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"217 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 C DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"391 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"077 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"297-C T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"824 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"009 Parada Valenzuela City"},{"Raw Address":"308 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1253 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"PETRA ST. PARADA Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"276 E.S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"83 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE GARDENS Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"167 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"#79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"362 TATAANDRES ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE V Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK 5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 6TH ST. Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"200 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"269 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"012 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 E AND E COMPD. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"UNIT 2 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"281 PILAR STREET Parada Valenzuela City"},{"Raw Address":"209 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"269 INT. S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"071 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"200 6TH ST. Parada Valenzuela City"},{"Raw Address":"187 DE GULA COMP CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"228 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"190 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"B2 LOT10 F FRANCISCO ST. G SILANGAN Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. FOTRUNE 4 Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 13 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"Q487 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Parada Valenzuela City"},{"Raw Address":"334 #1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"35C 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"04 KAINGIN Parada Valenzuela City"},{"Raw Address":"28 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"02 157 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"184 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"414 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"1548 Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"50 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"83 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"GULA ST. Parada Valenzuela City"},{"Raw Address":"267 Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"193 AM DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"183 FELIZA Parada Valenzuela City"},{"Raw Address":"243 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"69 Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"154 FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"384 BO. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B7L1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ Parada Valenzuela City"},{"Raw Address":"291KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"0009 BLK 3 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100 DOOR 3 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"88-D CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"308 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"157-A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"158 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE STREET Parada Valenzuela City"},{"Raw Address":"113 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"139 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRV. Parada Valenzuela City"},{"Raw Address":"230 1F EMBUSCADO COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"228 B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"220 C 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZASR Parada Valenzuela City"},{"Raw Address":"B2 L4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"258 INTERIOR S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"255 SALVADOR Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"338 T. MANANG Parada Valenzuela City"},{"Raw Address":"451 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"97B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"207 PELESA BOKED Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO FV4 Parada Valenzuela City"},{"Raw Address":"239 ABELARDO Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA STREET Parada Valenzuela City"},{"Raw Address":"260B RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"152 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"4389 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE COR. 22 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"FELIZA STREET Parada Valenzuela City"},{"Raw Address":"TATAERO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"172 INTERIOR SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"1827 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"230 18TH ST Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"262 OLIVA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"3B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST.Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"9 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"255 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"130 B 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"473 KA BERONG ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"M DE GULA ST Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F FRANCISCO Parada Valenzuela City"},{"Raw Address":"296 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"271 MARTA ST Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village P. 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"#95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.` Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 A FELIZA Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"235 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT SALAZAR ST Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"22 PARADA ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"2626 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"185 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"94 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"B3 L19 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"418-A ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"186 FILISA ST Parada Valenzuela City"},{"Raw Address":"036 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"12 B- KAMAGONG ST. F. Village 6 Parada Valenzuela City"},{"Raw Address":"006 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"230 18ST Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"NO.14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"SINILANGAN Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"32 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"357 J-FRANCISCO Parada Valenzuela City"},{"Raw Address":"KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"320 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"349 F Parada Valenzuela City"},{"Raw Address":"21 BENMARIE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 20 349 FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST Parada Valenzuela City"},{"Raw Address":"283 A S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST. Parada Valenzuela City"},{"Raw Address":"10 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165-G5 ACASIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"245 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 SALAZAR Parada Valenzuela City"},{"Raw Address":"ST. 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168 FELISA ST Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"T. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"91B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"90 F. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E&E COMP Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"19 B.F SANTIAGO E&E COMP. Parada Valenzuela City"},{"Raw Address":"258 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"468-K KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"138 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"341 20TH ST Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"02 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 15 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"305 DAET COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"315 JEMINEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK10 LOT7 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKDI ST. Parada Valenzuela City"},{"Raw Address":"68 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"# 343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 10/12 LOT 12 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"094 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 4 6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"417 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"187 M DE GULA COMPOUD CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"456 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"203 FELIZA ST Parada Valenzuela City"},{"Raw Address":"233 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON CMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"351 FRANCISCO Parada Valenzuela City"},{"Raw Address":"198 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 F. SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"B4 L21 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"254 25TH Parada Valenzuela City"},{"Raw Address":"206C 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"385 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV 7 Parada Valenzuela City"},{"Raw Address":"281 PILAR FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 F. FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37 B PARADA RD. PARADA Valenzuela City"},{"Raw Address":"305 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"077 PARADA RD. EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWNHOUSE Parada Valenzuela City"},{"Raw Address":"106 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"09 R CABRAL Parada Valenzuela City"},{"Raw Address":"135 E FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"129 NARRA ST FV 6 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"# 70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"3651 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"170 Fortune Village 5 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"009 PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST Parada Valenzuela City"},{"Raw Address":"471 KA BERONG Parada Valenzuela City"},{"Raw Address":"55 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"203 6TH STREET Parada Valenzuela City"},{"Raw Address":"377 APT.5 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"208 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"50 RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPPOUND Parada Valenzuela City"},{"Raw Address":"175 A. MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 E & E COMP. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"29 PARADA ST. Parada Valenzuela City"},{"Raw Address":"275-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 FELIA ST. Parada Valenzuela City"},{"Raw Address":"#177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"193 M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"130 D 5TH STREET Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#18 PARADA RD. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 3 199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"395 E.SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 RIZALINA Fortune Village 4 ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"359 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"11 PARADA RD. Parada Valenzuela City"},{"Raw Address":"226 18TH ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"469 KAINGIN Parada Valenzuela City"},{"Raw Address":"14E FRANCISCO ST NLEX CORNER Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"160 NARRA ST Parada Valenzuela City"},{"Raw Address":"101 M. DEGULA ST. ALFONSO APARTMENT"},{"Raw Address":"249 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 CAPT.CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"193 B.M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 14 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"94 SALAZAR Parada Valenzuela City"},{"Raw Address":"31-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"177 24TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"354 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 20 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Parada Valenzuela City"},{"Raw Address":"491 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"456 E KAINGIN Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 BO. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. CORNER KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"168 DOON CMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"4698 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"239 7TH ST. FORTUNE Village 5. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 Parada Valenzuela City"},{"Raw Address":"044 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"387 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOS T. Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES PARADA Valenzuela City"},{"Raw Address":"420 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"37-A PARADA RD.PARADA Valenzuela City"},{"Raw Address":"150 ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"273 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"111E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"04 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"GP.STREET WES SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. CORNER DIAMOND Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"190 M. DEGULA STREET Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CROSS Parada Valenzuela City"},{"Raw Address":"9-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN Parada Valenzuela City"},{"Raw Address":"038 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"FELIZA BUKIT ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"444 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"131 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR STREET Parada Valenzuela City"},{"Raw Address":"ADOR Parada Valenzuela City"},{"Raw Address":"111-E LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"168 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"JEMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"039 RAMON SANTIAGO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"193 A.M DE GULA Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"L10 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"648 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"449 PARADA Valenzuela City"},{"Raw Address":"B3 L5 GINTONG SILANGAN 3497 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"145 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"130 WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"186-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"21ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#13TH 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"305 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1-G EMBUSCADO APT. 230 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"291 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE COR. OF 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA RD Parada Valenzuela City"},{"Raw Address":"391 Parada Valenzuela City"},{"Raw Address":"B4L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"469KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"4181 NARRA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CVOMPD.ST. PARADA Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"056 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"341 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 FELISA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO COMPD. Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"0406 MARTHA ST Parada Valenzuela City"},{"Raw Address":"314 MENES COMP. Parada Valenzuela City"},{"Raw Address":"B2 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"412 B P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"91 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"15 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"297 TANDAND MANANG Parada Valenzuela City"},{"Raw Address":"DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"134 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"67 PARADA RD.VAL.CITY Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"135 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"471 C KABERONG ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"185 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FELISA ST. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 9 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"24 E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"314 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"385 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"130 D. 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"FRANSISCO ST. Parada Valenzuela City"},{"Raw Address":"148 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCSISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"146 NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"268 25TH ST. Parada Valenzuela City"},{"Raw Address":"26F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DE GULA APARTMENT Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"238 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"349 E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"190- B. MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CALYE II ST. Parada Valenzuela City"},{"Raw Address":"182 UNIT G. MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"ALICIA ST. FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"395-DOOK1 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"28 EUGENIO Parada Valenzuela City"},{"Raw Address":"740 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"NO. 51 FORTUNE FIVE THIRD ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON CMP Parada Valenzuela City"},{"Raw Address":"A ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"72 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"#223 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"175 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 02 LOT 14 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLOCK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE Parada Valenzuela City"},{"Raw Address":"BLK13 LOT 27 FORTUNE DRIVE FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"2225 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"220D 21STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPD Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"17 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"216 ANTHONY Parada Valenzuela City"},{"Raw Address":"YAKAL Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"187- A FELISA ST. Parada Valenzuela City"},{"Raw Address":"39 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"317 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"412 Parada Valenzuela City"},{"Raw Address":"244 7ST. ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"443 ROSELLA PARADA Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"828 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"460P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET BEN MARIE COMPD. FORTUNE Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 RD. Parada Valenzuela City"},{"Raw Address":"361 J-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"039 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"435 C. ZAMORA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 C.P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"40 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"214 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"94 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"FATIMA CMPD. PARADA Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"331-A TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"310 MENEZ COMP Parada Valenzuela City"},{"Raw Address":"181 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"339 21ST Parada Valenzuela City"},{"Raw Address":"01-31 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"140 E Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE SIX Parada Valenzuela City"},{"Raw Address":"26 NARRA ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK. 4 349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"087 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"5 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"36 G. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA S. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91-A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"170 RAMON STREET Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"188 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"FELIZA ST. Parada Valenzuela City"},{"Raw Address":"290 BO. PARADA ST. SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"138 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"BLK 1 GINTONG SILANGAN COMP. Parada Valenzuela City"},{"Raw Address":"468- KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 SATURN ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"240 7TH ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"195 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"93 PARADA RD. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS Parada Valenzuela City"},{"Raw Address":"79 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"302 Parada Valenzuela City"},{"Raw Address":"32 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"260 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"285 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"296-B T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"296-B T. MANANG Parada Valenzuela City"},{"Raw Address":"009 PARADA RD Parada Valenzuela City"},{"Raw Address":"237 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"438 PARADA Valenzuela City"},{"Raw Address":"# 488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"001 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"466B KAINGIN Parada Valenzuela City"},{"Raw Address":"320E S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 C CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"UNIT B 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 - AFELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"165-4 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO PARADA Valenzuela City"},{"Raw Address":"0006 LOT 3 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 ST. FRANCIS Parada Valenzuela City"},{"Raw Address":"411C P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 29 A. BLK 9 KAMANGONG ST. FV.6 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"057 Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"09 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 10 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"228 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"128 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"31 P. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"0118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"118 ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SKYLINE SUBD. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BO. Parada Valenzuela City"},{"Raw Address":"297 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village 4 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"22T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"B1 L5 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 M INT. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"468 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"302 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"223 ABELARDO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"470 KAINIGIN ST Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"182-23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"21ST ST. AGLEHAM COMP. Parada Valenzuela City"},{"Raw Address":"#244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"KALYE 11 BUKID Parada Valenzuela City"},{"Raw Address":"277 PILAR Parada Valenzuela City"},{"Raw Address":"279-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"259 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"143 NARRA FORTUNE VIL 6 Parada Valenzuela City"},{"Raw Address":"#257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B3L5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"306 PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"211 21ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"456 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"195 6ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"119 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B4 L17 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"17 PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 11 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"006 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"107 MOLAVE ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"106 E. LAGDAMEO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"243 PASING ST. Parada Valenzuela City"},{"Raw Address":"402 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457 INT SMC DUPLEX -D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"170B SALAZAR Parada Valenzuela City"},{"Raw Address":"135 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0118 A. U2 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"SAN ANDRES Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 A.FRANCISCO Parada Valenzuela City"},{"Raw Address":"349 F. FERNANDO ST. Parada Valenzuela City"},{"Raw Address":"378A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"095 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"114 YAKAL STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"270 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"93-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"308 APT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"34 SALVADOR Parada Valenzuela City"},{"Raw Address":"306 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"33 EARTH ST. Parada Valenzuela City"},{"Raw Address":"320 DIMAUNAHAN CMPD.PARADA Valenzuela City"},{"Raw Address":"264 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"26 Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"157-B SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"234 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"1 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"341 PARADA Valenzuela City"},{"Raw Address":"39D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"BLK 4 LT 12 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466 C. KABERONG ST. Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"9 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"TATA ERO Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. BO. PARADA Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FV 6 Parada Valenzuela City"},{"Raw Address":"114 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"395-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"109 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"157 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"386 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"320 B BS DE GUZMAN Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"255 ROMASA ST. Parada Valenzuela City"},{"Raw Address":"178 Parada Valenzuela City"},{"Raw Address":"UNIT A L17 B9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"93A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"415B TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"111-A LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SAN TIAGO Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B2 L6 BENMARIE 21ST Parada Valenzuela City"},{"Raw Address":"313 MENES COMP. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"198 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"096 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"25TH ST DULO. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"46 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"94 A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"313 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 P DE GUZMAN BANDINO ST Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93 B PARADA STREET Parada Valenzuela City"},{"Raw Address":"7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"99 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"453 B WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"268 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"122 CALYE ONSE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"286 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"002 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"417 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"240 S DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"168 FELISA ST. Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 13 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE FORTUNE5 Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L28 PARADA RD. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"468 N KAINGIN ST Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"234 7TH STREET Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7.PARADA Valenzuela City"},{"Raw Address":"235 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Parada Valenzuela City"},{"Raw Address":"31F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"202 22ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"361 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"290 ILOCT CMPD. PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0257 ES DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"310 MENES T. Parada Valenzuela City"},{"Raw Address":"132 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 TMHAI TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Village 7 Parada Valenzuela City"},{"Raw Address":"250 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 Parada Valenzuela City"},{"Raw Address":"roup Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"336 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B2 L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"159 NARRA Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"60 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 DR. M LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"265 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"237 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"MARS ST. #26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0117 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S . DE GUZMAN Parada Valenzuela City"},{"Raw Address":"462 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252A VillageA PARADA S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"omplete for the precinct. Parada Valenzuela City"},{"Raw Address":"161 Fortune Village 6 YAKAL ST.PARADA Valenzuela City"},{"Raw Address":"297-C T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87C SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"333 A KAMAGONG Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"110 FELISA ST. Parada Valenzuela City"},{"Raw Address":"1112 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"8 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"466 C KA BERONG ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. Parada Valenzuela City"},{"Raw Address":"341 21 ST. BENMARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"413 TATA ERO Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"119 A KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"028 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE 5 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"22 ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"297 C-T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"260 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"440 BO. Parada Valenzuela City"},{"Raw Address":"#68 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"555 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"338 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"225 20 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"370 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE VIL6 Parada Valenzuela City"},{"Raw Address":"289-C P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"283 S.DE GHUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"266 Parada Valenzuela City"},{"Raw Address":"J.M.T.C. LAGDAMEO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"259 RIZALINA ST. Fortune Village 4 RD. Parada Valenzuela City"},{"Raw Address":"17-C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"317 A.T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"339 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"9 31F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"410 DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 19 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"392 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"17 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"061 PARADA RD. Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"01 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"186 6 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"04 5TH ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village PH.7 Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CORNER CORAL Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"161 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS STREET Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"438 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. Fortune Village 6 182 D. Parada Valenzuela City"},{"Raw Address":"05 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"513 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"150 ALICIA Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG Parada Valenzuela City"},{"Raw Address":"L5-207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"13 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK. 13 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"FV 4 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Village Parada Valenzuela City"},{"Raw Address":"447 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGANG Parada Valenzuela City"},{"Raw Address":"#257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"100 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"141 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"451 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"F SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"454 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"294 TADANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"513 JIMENES CMPD. Parada Valenzuela City"},{"Raw Address":"77 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"2510 25 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 D. T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"244 1ST. FV 5 Parada Valenzuela City"},{"Raw Address":"248 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"290 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. FORT. 6 Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST.  Parada Valenzuela City"},{"Raw Address":"320 E. MIURA APT. S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#336 TIA MANANG Parada Valenzuela City"},{"Raw Address":"233 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"38 PARADA STREET Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village NO. 4 Parada Valenzuela City"},{"Raw Address":"407-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"009 PARADA STREET Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"B6 Parada Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"CITY MM Parada Valenzuela City"},{"Raw Address":"371-A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"300 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"179 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"230S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA CALLE ONSE Parada Valenzuela City"},{"Raw Address":"211 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#16B DOON COMP. Parada Valenzuela City"},{"Raw Address":"209 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"88 SAN MIGUEL COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET F SANTIAGO Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"254 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 FELISA Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"258-1 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG BLK 3 LOT 19 HOE Parada Valenzuela City"},{"Raw Address":"101 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village4 ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 20ST Parada Valenzuela City"},{"Raw Address":"169 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"43 CAINGIN Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"2151 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"C-378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"471C KABERONG ST Parada Valenzuela City"},{"Raw Address":"6TH ST. MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2745 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 LOT 8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"449 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"297 Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"474 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH STREET FORTUNE FIVE Village Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"101 M DEGULA ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE5/6 Village Parada Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"115 CPT CRUZ Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"89 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"035 PARADA Valenzuela City"},{"Raw Address":"EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"204 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"145 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"228-B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"834 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"247 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"240 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1EE MARS F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"414 PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO BUKID Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. BIAZON COMPOUND Parada Valenzuela City"},{"Raw Address":"863B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. SALAZAR RD. Parada Valenzuela City"},{"Raw Address":"70 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"CALLE 11 BUKID Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"0260 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"39-A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"35 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2932 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 12 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 STREET BEN MARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"SINILNGAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH & 24TH ST Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANAG ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"86 PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"295 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 BANDIDO ST. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"358-D J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT9 BLK1 SAPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"L9 GINTONG SILANG Parada Valenzuela City"},{"Raw Address":"255 E TOMASA STREET Parada Valenzuela City"},{"Raw Address":"134 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"345 F. FRANCISCO ST BO. Parada Valenzuela City"},{"Raw Address":"137 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH STREET Parada Valenzuela City"},{"Raw Address":"15 SANTIAGO Parada Valenzuela City"},{"Raw Address":"36 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"168 ACACIA Parada Valenzuela City"},{"Raw Address":"233 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"513 ABCO COMP. TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F. SANTAIGO Parada Valenzuela City"},{"Raw Address":"302 - B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"14 PARADA Valenzuela City"},{"Raw Address":"120 25TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5 KAMAGONG Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. BO.PARADA Valenzuela City"},{"Raw Address":"273 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0067 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"473 ABERONG ST Parada Valenzuela City"},{"Raw Address":"182 FELIZA Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"39 AJERO COMP. RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"03 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 DAET COMP. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"182 FELISA Parada Valenzuela City"},{"Raw Address":"169 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 SANTIAGO Parada Valenzuela City"},{"Raw Address":"152 23RD ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"609 7TH ST Parada Valenzuela City"},{"Raw Address":"36 G. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"457 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"208 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"58 A. Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"138 ELAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"366 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA Parada Valenzuela City"},{"Raw Address":"11-A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"136 D NARA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 JADE ST.CORNER SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"253 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA FORTUNE V5 Parada Valenzuela City"},{"Raw Address":"525 EUGENIO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"151 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"10 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"267 CORNER 19TH AND 24TH ST FORTUNE Parada Valenzuela City"},{"Raw Address":"4684 PEARL ST. HIYAS HOMES. Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"410-A PARADA Valenzuela City"},{"Raw Address":"21ST BELMARIE CMPD. AGLEHAM Parada Valenzuela City"},{"Raw Address":"291 KAINGIN Parada Valenzuela City"},{"Raw Address":"90 ADOR ST Parada Valenzuela City"},{"Raw Address":"269B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"KAINGIN Parada Valenzuela City"},{"Raw Address":"FELIZAS ST. BUKID 207 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"35 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"L2 B11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"004 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0250 UNIT 6 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 23RD ST. Parada Valenzuela City"},{"Raw Address":"431 FORTUNE Village 7 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"317 T.MANANANG ST. PARADA Valenzuela City"},{"Raw Address":"330 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUQUINIO ST Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"242 19TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 PARADA F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3661 KAMAGONG ST. COR. YAKAL ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"246 S Parada Valenzuela City"},{"Raw Address":"476 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"187 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"215 21ST ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169D 7ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"A 334 T. MANANG Parada Valenzuela City"},{"Raw Address":"023 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"021 EUGENIO Parada Valenzuela City"},{"Raw Address":"LOT 6 B.F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"# 95 P DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"289 - D SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"409P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"351 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"207 FELEZA BUKID Parada Valenzuela City"},{"Raw Address":"349 Parada Valenzuela City"},{"Raw Address":"150 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B-5 L-8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBDIVISION Parada Valenzuela City"},{"Raw Address":"249 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST FORTUNE VELLAGE4 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"38 D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"40 PEARL Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"073 FORTUNE Village 7 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 P. BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 AP DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 8 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"24-B EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"JADE ST. Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"200A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"265 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5. PARADA Valenzuela City"},{"Raw Address":"352 Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"SMC- DUPLEX D Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 9 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"22 LOT F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"93 D CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"B1L4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"165-G ACACIA STREET Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"202 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"123 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"431 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"241 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"320B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"324 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"UNIT2 LOT17 BLK9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"4815 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"360 J . FRANCISCO Parada Valenzuela City"},{"Raw Address":"L7A BLK8 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. B4L10 GS Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"116 B. CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"33 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"CALYE 11 ST. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. BO.Parada Valenzuela City"},{"Raw Address":"098 Fortune Village 5 DRIVE Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"E LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"244 7 Fortune Village 5 STREET Parada Valenzuela City"},{"Raw Address":"438 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"B4 L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"59 BANDINO ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"457 INT. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"94 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"148 Fortune Village 6 NARRA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"122A KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMPD. Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"09 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD.PARADA Valenzuela City"},{"Raw Address":"13 PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE STREET Parada Valenzuela City"},{"Raw Address":"B3L2 TMHOA Parada Valenzuela City"},{"Raw Address":"14 B NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST FORTUNE Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village6 PARADA Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLEHAM STREET Parada Valenzuela City"},{"Raw Address":"16-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"225 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"167 RAMON STREET Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"450 SERVICE RD Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"28 BARRIO Parada Valenzuela City"},{"Raw Address":"39 RAMON STREET Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"063 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"36 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B7 L26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"0232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"45 A. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"193 M.DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"235 T. MANANG Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 MALINTA Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"11 D EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"423 L3-B3 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"443 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"107 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"210 SALVADOR Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"137 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"391 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"218 ANTHONY FV 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"035 PARADA RD. Parada Valenzuela City"},{"Raw Address":"JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BUKID Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 NARRA ST Parada Valenzuela City"},{"Raw Address":"310 MENEZ SMPD Parada Valenzuela City"},{"Raw Address":"264 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCIS OST. Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"199 21ST STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"340 20 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"SALAZAR ST Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"027 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"19 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"438 Parada Valenzuela City"},{"Raw Address":"431 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"114 KAMAGON ST. PARADA Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"178 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORT Village 6 Parada Valenzuela City"},{"Raw Address":"422 BURGOS STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"216 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"214 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"206F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B4 L13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"128 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"389 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"312 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"294 KAINGIN Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 17 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"327 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"200-B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"320 UNIT 2 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"6ST. COR. KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"199 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"71 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"138 A NARRA ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR ST. Parada Valenzuela City"},{"Raw Address":"B5 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"131 KAMAGONG Parada Valenzuela City"},{"Raw Address":"#362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"400-A ILOCTO ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#281 PILAR ST. FV 4 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"339 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APT. 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"KM.14 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"098 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. Parada Valenzuela City"},{"Raw Address":"1 DR.MARIANO LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"088 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"329 T. MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"185 FELISA ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMP. Parada Valenzuela City"},{"Raw Address":"ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"127 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"095 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA Parada Valenzuela City"},{"Raw Address":"61 PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"144 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FATIMA COMPD. BARRIO Parada Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"10TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"37 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"177 MOLAVE ST. 6TH ST. FORTUN 5 Parada Valenzuela City"},{"Raw Address":"TATAERRO ST. Parada Valenzuela City"},{"Raw Address":"92 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"417 TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"72 PARADA RD. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"164 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"157 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA Valenzuela City"},{"Raw Address":"289-D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 6 VillageParada Valenzuela City"},{"Raw Address":"438 SILENCE RD. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BO.PARADA Valenzuela City"},{"Raw Address":"409 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FATIMA COMP Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"438 PARADA FORTUNE Village7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"04 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO VENUS ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ROMAN ST. FORTUNE Village 4. Parada Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"198 COR. & 21ST. 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST.F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 3 BLK 7 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"333 KAMAGONG ST FV 5 & 6 Parada Valenzuela City"},{"Raw Address":"#287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"317 MENEZ CMPD Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 10 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"LOT 10 FORTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1548 E PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"198 RAMON STREE FV4 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMP. FV4 Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"202 FILISA ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"348 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"308 JIMENEZ Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"204B F.SANTIAGO STR. Parada Valenzuela City"},{"Raw Address":"31 B.O Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 5 NARRA ST. Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN TS. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"96 Parada Valenzuela City"},{"Raw Address":"2039 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"1164 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 C. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"2311 8TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 KANMAGONG ST. FV5 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"185 FELIZA Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD.PARADA Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 FELISA Parada Valenzuela City"},{"Raw Address":"CALE ONSE Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"69 PARADA RD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"175-A MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"JADE ST. JADE HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#5 IPIL ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"448 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"116 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"181- RAMON ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCIS ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN Parada Valenzuela City"},{"Raw Address":"255 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"310 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257-B M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"Q4-176 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"316 MENES COMP. Parada Valenzuela City"},{"Raw Address":"108 COR. YAKAL AND KAMAGONG ST FORTUNE Parada Valenzuela City"},{"Raw Address":"469 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"(Member) Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"039 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"303 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"41 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"211 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TATA ERO P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"69 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B2 LOT 14 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK. 3 LOT 1 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLIA APARTMENT Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"19 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"162 E SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"244 19TH STREET FORTUNE V Village Parada Valenzuela City"},{"Raw Address":"F SANTIAGO Parada Valenzuela City"},{"Raw Address":"TATA ANDRES Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"316 JEMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"108 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"419 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 A. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 PARADA Valenzuela City"},{"Raw Address":"001 INTER ISLAND FEEDS PARADA Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 5TM HOA TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L4 B10 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ACACIA CORNER MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0004 JADE ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. CAPT CRUZ. ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. DULO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"#384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"001 BO Parada Valenzuela City"},{"Raw Address":"B2 L 1O GINTONG SILANGAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"137 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"270 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"32 PARADA RD. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"442 FORTUNE Village 7. Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"13 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"087 PARADA Valenzuela City"},{"Raw Address":"25 ST. FORTUNE VLL. 5 PARADA Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 2 LOT 9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"33 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"391 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. FORTUNE Village4 Valenzuela City Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"ILOCTO CMPD. PARADA Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"367 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"264 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"42 PARADA RD Parada Valenzuela City"},{"Raw Address":"201 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. UNIT 12 Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"169 ACACIA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 2 BLOCK 10 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L4 B10 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"112 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"349F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"26 F Parada Valenzuela City"},{"Raw Address":"89 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"232 Parada Valenzuela City"},{"Raw Address":"349 A. FRANCISCO Parada Valenzuela City"},{"Raw Address":"L-11 BLK-2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"2427 7TH ST. Parada Valenzuela City"},{"Raw Address":"377 I8ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK3 LOT2 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"2646 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"129 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST. PARADA Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11-C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST PARADA Valenzuela City"},{"Raw Address":"343 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE AGLIHAM COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"39 RAMON ST . PARADA Valenzuela City"},{"Raw Address":"199 6ST Parada Valenzuela City"},{"Raw Address":"871 FELIZA ST Parada Valenzuela City"},{"Raw Address":"187 MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"424 A.BURGOS ST. Parada Valenzuela City"},{"Raw Address":"OLIVA COR. RAMON ST. Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"185 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"94 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA RD Parada Valenzuela City"},{"Raw Address":"#8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0411 AP DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO RD. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE PARADA Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"562 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"8 VENANCIO INT. RD. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"272 PILLAR STREET Parada Valenzuela City"},{"Raw Address":"118 1ST ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"140 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"239 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK 2 PARADA ROAD EXT. FORTUNE Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 F. CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"236 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR Parada Valenzuela City"},{"Raw Address":"99 UNI STAR F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"36 Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. BO. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD/ Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST.. PARADA Valenzuela City"},{"Raw Address":"224 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"57 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 6 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"456-K KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"14 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"12 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22ND ST. 207 FORTUEN 5 Village Parada Valenzuela City"},{"Raw Address":"12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"4488 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"273 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"29 Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO Parada Valenzuela City"},{"Raw Address":"Village Parada Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"299 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"L9 B1 HIYAS Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK. 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"458 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"209 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"11 RD. PARADA ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"186 D. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"187-A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA Parada Valenzuela City"},{"Raw Address":"339 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"456-D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"308 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"224 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"243 7ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"299 JIMENES Parada Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"326 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"220-A 21ST STREET Parada Valenzuela City"},{"Raw Address":"308 T MANANG Parada Valenzuela City"},{"Raw Address":"11C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"417 TATA ERO Parada Valenzuela City"},{"Raw Address":"145 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"154 C. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"27 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"109 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"457 E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B5L8 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST/ Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"162 SALAZAR Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. Parada Valenzuela City"},{"Raw Address":"290 A.SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"87 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"124-B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 7 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. P.SANTIAGO Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"# 39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"DOOR F SANTOS TOWNHOUSE P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"261 A 25TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERO Parada Valenzuela City"},{"Raw Address":"61 MARS ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"A. TATAERO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"185- C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"94 PARADA Valenzuela City"},{"Raw Address":"002 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"3200 DIMAUNAHAN CMPD PARADA Valenzuela City"},{"Raw Address":"269 SDEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"225 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"147 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"390 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village V Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"278 PILAR ST FORTUNE VLL.4 Parada Valenzuela City"},{"Raw Address":"345 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"322 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"143 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36 T. ANDRES ST. VAL. MM Parada Valenzuela City"},{"Raw Address":"#002 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"18 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"252 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"365 Parada Valenzuela City"},{"Raw Address":"117-B CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"468 N. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"194 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"135 YAKAL CORNER NARRA STREET Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"420 ZAMORA STREET FV7 Parada Valenzuela City"},{"Raw Address":"101 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"165-G5 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"182 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"067 FURTUNE 6 Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"44B SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"1727B-TATAERO Parada Valenzuela City"},{"Raw Address":"244 7TH ST. PARADA Valenzuela City"},{"Raw Address":"187 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"30 PARADA RD Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FV 4 Parada Valenzuela City"},{"Raw Address":"#223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"342 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"2345 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"415 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"VENUS STREET 207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"B2L23 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"039 PARADA RD. Parada Valenzuela City"},{"Raw Address":"67B. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"314 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"246 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"216 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"187-B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"264 25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"ROOM G 260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"250 25 ST. FORTUNE DRIVE Village. 5&6 Parada Valenzuela City"},{"Raw Address":"45 AF SANTIAGO Parada Valenzuela City"},{"Raw Address":"B3 L22 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"TELIZA BUKID Parada Valenzuela City"},{"Raw Address":"113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"7 F.SANTIAGO PARADA Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 15 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"L6 Parada Valenzuela City"},{"Raw Address":"BLK 11 LOT 24 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"243 PASING Parada Valenzuela City"},{"Raw Address":"# 80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"20 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"240 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"206 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"311 PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"23 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO Parada Valenzuela City"},{"Raw Address":"165 SALAZAR Parada Valenzuela City"},{"Raw Address":"341 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"13 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"245 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"174 FELISA ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENIZ COMPOUND Parada Valenzuela City"},{"Raw Address":"123 CAPT. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"3-B F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"314 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"26 F SANTIAGO PARADA V.C Parada Valenzuela City"},{"Raw Address":"456 B. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"385 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"427 A BURGOS Parada Valenzuela City"},{"Raw Address":"17 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"Q5-151 SAPPHIRE ST. HIYAS SUBD. WEST Parada Valenzuela City"},{"Raw Address":"190 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"158 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39 RAMOS ST. Parada Valenzuela City"},{"Raw Address":"316 BO JIMENEZ Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"21 ST AGLEHAM COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"073 PARADA RD EXT. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 B. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"F FRANCISCO Parada Valenzuela City"},{"Raw Address":"45 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"5-5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237-19 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE Parada Valenzuela City"},{"Raw Address":"241 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 BO. PARADA Valenzuela City"},{"Raw Address":"470 A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"199 BENMARY 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FV6 Parada Valenzuela City"},{"Raw Address":"198 COR 19TH & 21TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"276 UNIT A Parada Valenzuela City"},{"Raw Address":"24TH ST. 266 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"36 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"96 FELIZA Parada Valenzuela City"},{"Raw Address":"52 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"273 S- DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT11 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"093 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"187 24TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"192 M. DEGULA Parada Valenzuela City"},{"Raw Address":"DOON COMPD. 168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA SR. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG Parada Valenzuela City"},{"Raw Address":"185 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24 ST. FORTUNE V-5 Parada Valenzuela City"},{"Raw Address":"113 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"COR. 23 RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"1 PARADA RD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD Parada Valenzuela City"},{"Raw Address":"419 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"412 C. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"271 MARTHA Parada Valenzuela City"},{"Raw Address":"241 7 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L9 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"5TH ST Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 P. SANTIAGO Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"175 MOLAVE Parada Valenzuela City"},{"Raw Address":"225 A. BELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"78 B PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"136 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"187 PARADA STREET Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD DULO Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"2 ACACIA COR. YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"102 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L49 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS Parada Valenzuela City"},{"Raw Address":"356 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"258 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO Parada Valenzuela City"},{"Raw Address":"503 TINDALO ST. ABCO COMPD. Parada Valenzuela City"},{"Raw Address":"230 EMBUSADO S. DE GUZMAN ST.Parada Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0320 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 2 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SSALAZAR ST. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"29A KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"27A PARADA RD Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"258 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"SISCAR APT. Parada Valenzuela City"},{"Raw Address":"260 A. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. PARADA Valenzuela City"},{"Raw Address":"214 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1 E&E MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"188 PARADA Valenzuela City"},{"Raw Address":"1618 PARAFORT M. DELOS REYES Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"147 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"071 Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"2 TINDALO STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"214 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"39 C PARADA RD VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"446 RUMARAO COPMD. PARADA Valenzuela City"},{"Raw Address":"157 A. LITICIA ST. FV 4 Parada Valenzuela City"},{"Raw Address":"175 RAMON STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"76 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"440 ROMARAW COMPOUND Parada Valenzuela City"},{"Raw Address":"204 B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 MARTA STREET Parada Valenzuela City"},{"Raw Address":"039 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"08 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"215 21ST. FORTUNE VillageS 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"24E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"PARADA RD. ST. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"241 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"241 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"26 F. MARS ST. Parada Valenzuela City"},{"Raw Address":"405 P.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 Fortune Village 5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"24 EUGENIO COMP. Parada Valenzuela City"},{"Raw Address":"45 ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA Parada Valenzuela City"},{"Raw Address":"210 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#26 MARS ST. Parada Valenzuela City"},{"Raw Address":"312 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"2411 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"028 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"036-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPD. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"24 VENUS ST. Parada Valenzuela City"},{"Raw Address":"203 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMP. 21ST ST. FV5 Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 19 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"064 PARADA RD Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE Village Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"36 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"APT.14 RIVERA CMPD. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOND Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"22 A. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"167 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"267 PETER ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST.PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0147 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"68 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"513 TINDALO Parada Valenzuela City"},{"Raw Address":"413 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"B3 L11 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"21 ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD Parada Valenzuela City"},{"Raw Address":"198 CORNER 19TH &21ST STS. Parada Valenzuela City"},{"Raw Address":"#39 K. RAMON ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"#22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"188 DE GULA COPD Parada Valenzuela City"},{"Raw Address":"39 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 PARADA ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"995 SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"266 B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 ADOR ST. Parada Valenzuela City"},{"Raw Address":"PUROK 6 207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"126 B CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"668 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLOCK 13 C LOT 8 7TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST FV7 Parada Valenzuela City"},{"Raw Address":"3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"M.M. Parada Valenzuela City"},{"Raw Address":"416 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST.DE GULA CMPD. Parada Valenzuela City"},{"Raw Address":"BLK3 LOT 2 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0320 UNIT 8 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"6 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"96 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"C. CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"369 A TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 PARADA RD. FORTUNE VillageS Parada Valenzuela City"},{"Raw Address":"121 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"73 SAINT MARYS DULO Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"357 J/ FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"384 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"116 CALLEONCE Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"B4 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"469 PARADA ST KAINGIN Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"245 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"273 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"471 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"186 6TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"RUMARAO COMP. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"130 Parada Valenzuela City"},{"Raw Address":"BLOCK 2 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"72 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"133 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B2L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"229 18TH STREET Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"2451 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR. ST. Parada Valenzuela City"},{"Raw Address":"235 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"249 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"328 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"82 RAMON ST. SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"145 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"348 CAPT. F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE Parada Valenzuela City"},{"Raw Address":"091 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"166 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"336 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"24 VENUS E&E COMPD.1 SANTIAGO Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"7 GSR SATIAGO ST. Parada Valenzuela City"},{"Raw Address":"190 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"350 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"0089 B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L41 B10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"888 NARRA ST. Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CMPD. PARADA Valenzuela City"},{"Raw Address":"141 DALAWIN ST. PARADA Valenzuela City"},{"Raw Address":"11 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"382 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"447 FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"31 Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST. FV5 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 13 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"56 FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"251 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"254 A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"23RD ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"#17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ADOR ST Parada Valenzuela City"}]'),Jv=({children:t})=>B.jsxs("div",{className:"layout",children:[B.jsx(GL,{}),B.jsx("div",{className:"content",children:t})]}),dh=async t=>{console.log("logAdminAction called with:",t);try{const a=V3().currentUser;let r=null,i=null;if(a){r=a.uid;const l=await Fc(Di(Ar,"super_admins",a.uid));l.exists()&&(i=l.data().name)}await Mv(Ln(Ar,"admin_logs"),{timestamp:Sfe(),adminId:r,adminName:i,actionType:t.actionType,details:t.details,targetCollection:t.targetCollection||null,targetId:t.targetId||null}),console.log("Log written to Firestore")}catch(e){console.error("Failed to log admin action:",e)}},NNe=t=>ENe.some(e=>e["Raw Address"].toLowerCase().includes(t.toLowerCase())),ONe=(t,e)=>e.some(a=>a.uid===t.uid&&!a.isBanned),VNe=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState(""),[i,l]=ie.useState(1),[c,n]=ie.useState([]),[v,R]=ie.useState(""),[x,N]=ie.useState(1),[I,k]=ie.useState({registered:0,pending:0,rejected:0,total:0}),[Z,$]=ie.useState(null),[H,W]=ie.useState([]),[ee,oe]=ie.useState(""),[pe,le]=ie.useState(null),ge=5,[ue,Re]=ie.useState([]),[we,Ne]=ie.useState(!1);ie.useEffect(()=>{ne(),_e(),ke()},[]);const ne=async()=>{try{const Je=(await gs(Ln(Ar,"approved_users"))).docs.map(dt=>({uid:dt.id,...dt.data()}));e(Je)}catch(Be){console.error("Error fetching registered users:",Be)}},_e=async()=>{try{const[Be,Je]=await Promise.all([gs(Ln(Ar,"pending_users")),gs(Hp(Ln(Ar,"approved_users"),e_("isPending","==",!0)))]),dt=Be.docs.map(Ae=>({uid:Ae.id,...Ae.data()})),ut=Je.docs.map(Ae=>({uid:Ae.id,...Ae.data()}));n([...dt,...ut])}catch(Be){console.error("Error fetching pending users:",Be)}},ke=async()=>{try{const Be=await gs(Ln(Ar,"admins")),Je=new Map;Be.docs.forEach(Lt=>{var Nt;const fa=Lt.data();Je.set(fa.uid,{name:fa.name,role:((Nt=fa.roles)==null?void 0:Nt[0])||"Admin"})});const ut=(await gs(Ln(Ar,"user_reports"))).docs.map(Lt=>{var Ht,wt;const fa=Lt.data(),Nt=Je.get(fa.reportedBy);return{id:Lt.id,...fa,reportedByName:Nt?`${Nt.name} (${Nt.role})`:"Unknown Admin",timestamp:(Ht=fa.createdAt)!=null&&Ht.toDate?fa.createdAt.toDate():new Date(((wt=fa.createdAt)==null?void 0:wt.seconds)*1e3),violationType:fa.violationType||"Not Specified",details:fa.details||"No details provided"}}),Ae=[...new Set(ut.map(Lt=>Lt.userId))],Dt=await Promise.all(Ae.map(async Lt=>{const Nt=(await Fc(Di(Ar,"approved_users",Lt))).data(),Ht=ut.filter(wt=>wt.userId===Lt);return{uid:Lt,...Nt,reports:Ht.map(wt=>({...wt,reportedBy:wt.reportedByName,timestamp:wt.timestamp,violationType:wt.violationType,details:wt.details})),isBanned:(Nt==null?void 0:Nt.isBanned)||!1}}));W(Dt)}catch(Be){console.error("Error fetching flagged users:",Be)}},Pe=async(Be,Je)=>{try{const dt=Di(Ar,"pending_users",Be),Ae=(await Fc(dt)).data();if(Je==="approve"){const Dt=NNe(Ae.address);if(!Dt&&!window.confirm("This address is not in the validated list. Are you sure you want to approve this user?"))return;await Mv(Ln(Ar,"approved_users"),{...Ae,status:"approved",approvedAt:new Date,addressValidated:Dt}),await mX(dt),await dh({actionType:"APPROVE_USER",details:`Approved user with ID: ${Be}`,targetCollection:"users",targetId:Be})}else Je==="reject"&&await Hl(dt,{status:"rejected",rejectedAt:new Date});ne(),_e()}catch(dt){console.error("Error processing user action:",dt)}},Ee=async(Be,Je)=>{try{const dt=Di(Ar,"approved_users",Be);await Hl(dt,{isBanned:Je,bannedAt:Je?new Date:null}),await Mv(Ln(Ar,"user_notifications"),{userId:Be,type:Je?"account_banned":"account_unbanned",title:Je?"Account Banned":"Account Reinstated",message:Je?"Your account has been banned due to violations.":"Your account has been reinstated.",createdAt:new Date,isRead:!1}),ke(),ne(),await dh({actionType:"BAN_USER",details:`Banned user with ID: ${Be}`,targetCollection:"users",targetId:Be})}catch(dt){console.error("Error updating user ban status:",dt)}},De=Be=>{le({userName:`${Be.first_name} ${Be.middle_name} ${Be.surname}`,reports:Be.reports.map((Je,dt)=>{var Ae,Dt;const ut=Je.timestamp instanceof Date?Je.timestamp:(Ae=Je.timestamp)!=null&&Ae.toDate?Je.timestamp.toDate():new Date(((Dt=Je.timestamp)==null?void 0:Dt.seconds)*1e3);return{...Je,timestamp:ut}})})},qe=()=>{le(null)},Oe=ie.useMemo(()=>t.filter(Be=>`${Be.first_name} ${Be.middle_name} ${Be.surname} ${Be.email}`.toLowerCase().includes(a.toLowerCase())),[t,a]),He=Math.ceil(Oe.length/ge),Ue=ie.useMemo(()=>{const Be=(i-1)*ge;return Oe.slice(Be,Be+ge)},[Oe,i]),ct=ie.useMemo(()=>c.filter(Be=>`${Be.first_name} ${Be.middle_name} ${Be.surname} ${Be.email}`.toLowerCase().includes(v.toLowerCase())),[c,v]);ie.useEffect(()=>{(()=>{k({registered:t.length,pending:c.length,rejected:c.filter(Je=>Je.status==="rejected").length,total:t.length+c.length})})()},[t,c]);const Se=({status:Be,addressValidated:Je,isPending:dt,isBanned:ut,isFlagged:Ae,user:Dt,onUnflag:Lt})=>ut?B.jsx("div",{className:"status-container",children:B.jsx("span",{className:"banned-badge",title:"Banned",children:" Banned"})}):Ae?B.jsx("div",{className:"status-container",children:B.jsx("span",{className:"flagged-badge",title:"Flagged",children:" Flagged"})}):Be==="approved"?B.jsxs("div",{className:"status-container",children:[B.jsx(sB,{className:"status-icon approved",title:"Approved"}),dt&&!Je&&B.jsx("span",{className:"warning-text",title:"Address not in validated list",children:""})]}):Be==="pending"?B.jsx(Ffe,{className:"status-icon pending",title:"Pending"}):null,Ie=Be=>{$(Be)},je=()=>{$(null)},Ze=async Be=>{if(window.confirm("Are you sure you want to unflag this user?"))try{const Je=await gs(Hp(Ln(Ar,"user_reports"),e_("userId","==",Be))),dt=yX(Ar);Je.docs.forEach(Dt=>{dt.delete(Di(Ar,"user_reports",Dt.id))}),await dt.commit();const ut=Di(Ar,"approved_users",Be);await Hl(ut,{status:"approved"});const Ae=H.find(Dt=>Dt.uid===Be);Ae&&Re(Dt=>[{uid:Ae.uid,name:`${Ae.first_name} ${Ae.middle_name} ${Ae.surname}`,email:Ae.email,unflaggedAt:new Date},...Dt]),ke(),ne(),alert("User has been unflagged and is now approved."),await dh({actionType:"UNFLAG_USER",details:`Unflagged user with ID: ${Be}`,targetCollection:"users",targetId:Be})}catch(Je){alert("Failed to unflag user."),console.error(Je)}};return B.jsxs(Jv,{children:[B.jsx(cA,{title:"User Management"}),Z&&B.jsx("div",{className:"image-modal",onClick:je,children:B.jsx("img",{src:Z,alt:"Profile",className:"modal-image",onClick:Be=>Be.stopPropagation()})}),pe&&B.jsx("div",{className:"modal-overlay",onClick:qe,children:B.jsxs("div",{className:"modal-content reports-modal",onClick:Be=>Be.stopPropagation(),children:[B.jsxs("h3",{children:["Reports for ",pe.userName]}),B.jsx("div",{className:"reports-list",children:pe.reports.map((Be,Je)=>B.jsxs("div",{className:"report-item",children:[B.jsx("p",{className:"report-date",children:Vi(Be.timestamp).isValid()?Vi(Be.timestamp).format("MMM D, YYYY HH:mm"):"Date not available"}),B.jsxs("p",{className:"report-violation",children:[B.jsx("strong",{children:"Violation Type:"})," ",Be.violationType]}),B.jsxs("p",{className:"report-details",children:[B.jsx("strong",{children:"Details:"})," ",Be.details]}),B.jsxs("p",{className:"report-status",children:[B.jsx("strong",{children:"Status:"})," ",Be.status]}),B.jsxs("p",{className:"report-reporter",children:[B.jsx("strong",{children:"Reported by:"})," ",Be.reportedBy]})]},Je))}),B.jsx("button",{className:"close-btn",onClick:qe,children:"Close"})]})}),B.jsxs("div",{className:"user-management",children:[B.jsxs("div",{className:"stats-container",children:[B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Registered Users"}),B.jsx("p",{children:I.registered})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Pending Users"}),B.jsx("p",{children:I.pending})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Rejected Users"}),B.jsx("p",{children:I.rejected})]}),B.jsxs("div",{className:"stat-card total",children:[B.jsx("h3",{children:"Total Users"}),B.jsx("p",{children:I.total})]})]}),B.jsxs("div",{className:"section",children:[B.jsx("h2",{children:"Pending Users"}),B.jsx("input",{type:"text",placeholder:" Search pending users...",value:v,onChange:Be=>R(Be.target.value),className:"search-box"}),ct.length===0?B.jsx("p",{children:"No pending users found."}):B.jsx("div",{className:"user-list",children:B.jsxs("table",{children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Status"}),B.jsx("th",{children:"Profile Photo"}),B.jsx("th",{children:"ID Photos"}),B.jsx("th",{children:"Name"}),B.jsx("th",{children:"Contact Info"}),B.jsx("th",{children:"Address"}),B.jsx("th",{children:"Actions"})]})}),B.jsx("tbody",{children:ct.map(Be=>B.jsxs("tr",{children:[B.jsx("td",{children:B.jsx(Se,{status:Be.status,addressValidated:Be.addressValidated})}),B.jsx("td",{className:"profile-column",children:Be.profile_photo_url?B.jsx("img",{src:Be.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Ie(Be.profile_photo_url)}):B.jsx("div",{className:"no-photo",children:"No Photo"})}),B.jsx("td",{className:"id-photos-column",children:B.jsxs("div",{className:"id-photos",children:[Be.frontIdUrl&&B.jsx("img",{src:Be.frontIdUrl,alt:"ID Front",className:"id-thumbnail",onClick:()=>Ie(Be.frontIdUrl)}),Be.backIdUrl&&B.jsx("img",{src:Be.backIdUrl,alt:"ID Back",className:"id-thumbnail",onClick:()=>Ie(Be.backIdUrl)})]})}),B.jsx("td",{children:`${Be.first_name} ${Be.middle_name} ${Be.surname}`}),B.jsx("td",{children:B.jsxs("div",{className:"contact-info",children:[B.jsxs("p",{children:[B.jsx("strong",{children:"Phone:"})," ",Be.phone_number]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Email:"})," ",Be.email]}),B.jsxs("p",{children:[B.jsx("strong",{children:"ID Number:"})," ",Be.id_number]})]})}),B.jsx("td",{children:B.jsxs("div",{className:"address-info",children:[B.jsx("p",{children:Be.address}),!Be.addressValidated&&B.jsx("span",{className:"unvalidated-address",children:" Address not in validated list"})]})}),B.jsxs("td",{className:"action-buttons",children:[B.jsxs("button",{onClick:()=>Pe(Be.uid,"approve"),className:"approve-btn",children:[B.jsx(sB,{})," Approve"]}),B.jsxs("button",{onClick:()=>Pe(Be.uid,"reject"),className:"reject-btn",children:[B.jsx(LL,{})," Reject"]})]})]},Be.uid))})]})})]}),B.jsxs("div",{className:"section",children:[B.jsx("h2",{children:"Flagged Users"}),B.jsx("input",{type:"text",placeholder:" Search flagged users...",value:ee,onChange:Be=>oe(Be.target.value),className:"search-box"}),H.length===0?B.jsx("p",{children:"No flagged users found."}):B.jsx("div",{className:"user-list",children:B.jsxs("table",{children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Status"}),B.jsx("th",{className:"profile-column",children:"Profile Photo"}),B.jsx("th",{children:"Name"}),B.jsx("th",{children:"Email"}),B.jsx("th",{children:"Reports"}),B.jsx("th",{children:"Actions"})]})}),B.jsx("tbody",{children:H.filter(Be=>`${Be.first_name} ${Be.middle_name} ${Be.surname} ${Be.email}`.toLowerCase().includes(ee.toLowerCase())).map(Be=>B.jsxs("tr",{children:[B.jsx("td",{children:Be.isBanned?B.jsx("span",{className:"banned-badge",children:"Banned"}):B.jsx("span",{className:"flagged-badge",children:"Flagged"})}),B.jsx("td",{className:"profile-column",children:Be.profile_photo_url?B.jsx("img",{src:Be.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Ie(Be.profile_photo_url)}):B.jsx("div",{className:"no-photo",children:"No Photo"})}),B.jsx("td",{children:`${Be.first_name} ${Be.middle_name} ${Be.surname}`}),B.jsx("td",{children:Be.email}),B.jsx("td",{children:B.jsxs("button",{className:"view-reports-btn",onClick:()=>De(Be),children:["View Reports (",Be.reports.length,")"]})}),B.jsxs("td",{children:[B.jsx("button",{className:Be.isBanned?"unban-btn":"ban-btn",style:{fontSize:12,padding:"2px 8px"},onClick:()=>Ee(Be.uid,!Be.isBanned),children:Be.isBanned?"Unban User":"Ban User"}),!Be.isBanned&&B.jsx("button",{className:"unban-btn",style:{marginLeft:6,fontSize:12,padding:"2px 8px"},onClick:()=>Ze(Be.uid),children:"Unflag"})]})]},Be.uid))})]})}),B.jsxs("div",{className:"flagged-history-section",style:{marginTop:24},children:[B.jsxs("button",{className:"view-reports-btn",style:{marginBottom:8},onClick:()=>Ne(Be=>!Be),children:[we?"Hide":"Show"," Flagged User History"]}),we&&B.jsxs("div",{className:"flagged-history-list",style:{background:"#f8f9fa",borderRadius:8,padding:16,boxShadow:"0 1px 4px rgba(0,0,0,0.04)"},children:[B.jsx("h3",{style:{marginTop:0},children:"Flagged User History"}),ue.length===0?B.jsx("p",{style:{color:"#888"},children:"No flagged user history yet."}):B.jsxs("table",{style:{width:"100%",fontSize:14},children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Name"}),B.jsx("th",{children:"Email"}),B.jsx("th",{children:"Unflagged At"})]})}),B.jsx("tbody",{children:ue.map((Be,Je)=>B.jsxs("tr",{children:[B.jsx("td",{children:Be.name}),B.jsx("td",{children:Be.email}),B.jsx("td",{children:Vi(Be.unflaggedAt).format("MMM D, YYYY HH:mm")})]},Be.uid+Je))})]})]})]})]}),B.jsxs("div",{className:"section",children:[B.jsx("h2",{children:"Registered Users"}),B.jsx("input",{type:"text",placeholder:" Search registered users...",value:a,onChange:Be=>r(Be.target.value),className:"search-box"}),Oe.length===0?B.jsx("p",{children:"No registered users found."}):B.jsxs("div",{className:"user-list",children:[B.jsxs("table",{children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Status"}),B.jsx("th",{children:"Profile Photo"}),B.jsx("th",{children:"ID Photos"}),B.jsx("th",{children:"Name"}),B.jsx("th",{children:"Contact Info"}),B.jsx("th",{children:"Address"})]})}),B.jsx("tbody",{children:Ue.map(Be=>B.jsxs("tr",{children:[B.jsx("td",{children:B.jsx(Se,{status:Be.status,addressValidated:Be.addressValidated,isPending:Be.isPending||!1,isBanned:Be.isBanned,isFlagged:ONe(Be,H)})}),B.jsx("td",{className:"profile-column",children:Be.profile_photo_url?B.jsx("img",{src:Be.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Ie(Be.profile_photo_url)}):B.jsx("div",{className:"no-photo",children:"No Photo"})}),B.jsx("td",{className:"id-photos-column",children:B.jsxs("div",{className:"id-photos",children:[Be.frontIdUrl&&B.jsx("img",{src:Be.frontIdUrl,alt:"ID Front",className:"id-thumbnail",onClick:()=>Ie(Be.frontIdUrl)}),Be.backIdUrl&&B.jsx("img",{src:Be.backIdUrl,alt:"ID Back",className:"id-thumbnail",onClick:()=>Ie(Be.backIdUrl)})]})}),B.jsx("td",{children:`${Be.first_name} ${Be.middle_name} ${Be.surname}`}),B.jsx("td",{children:B.jsxs("div",{className:"contact-info",children:[B.jsxs("p",{children:[B.jsx("strong",{children:"Phone:"})," ",Be.phone_number]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Email:"})," ",Be.email]}),B.jsxs("p",{children:[B.jsx("strong",{children:"ID Number:"})," ",Be.id_number]})]})}),B.jsx("td",{children:B.jsx("div",{className:"address-info",children:B.jsx("p",{children:Be.address})})})]},Be.uid))})]}),B.jsxs("div",{className:"pagination",children:[B.jsx("button",{disabled:i===1,onClick:()=>l(i-1),children:"Previous"}),Array.from({length:He},(Be,Je)=>B.jsx("button",{className:i===Je+1?"active":"",onClick:()=>l(Je+1),children:Je+1},Je)),B.jsx("button",{disabled:i===He,onClick:()=>l(i+1),children:"Next"})]})]})]})]})]})};var Z0={},$D,gq;function zNe(){return gq||(gq=1,$D=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),$D}var KD={},by={},yq;function Qv(){if(yq)return by;yq=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return by.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},by.getSymbolTotalCodewords=function(r){return e[r]},by.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},by.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},by.isKanjiModeEnabled=function(){return typeof t<"u"},by.toSJIS=function(r){return t(r)},by}var WD={},Aq;function H4(){return Aq||(Aq=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}}(WD)),WD}var YD,vq;function DNe(){if(vq)return YD;vq=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let r=0;r<a;r++)this.putBit((e>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}},YD=t,YD}var XD,_q;function MNe(){if(_q)return XD;_q=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,a,r,i){const l=e*this.size+a;this.data[l]=r,i&&(this.reservedBit[l]=!0)},t.prototype.get=function(e,a){return this.data[e*this.size+a]},t.prototype.xor=function(e,a,r){this.data[e*this.size+a]^=r},t.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]},XD=t,XD}var JD={},wq;function INe(){return wq||(wq=1,function(t){const e=Qv().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,l=e(r),c=l===145?26:Math.ceil((l-13)/(2*i-2))*2,n=[l-7];for(let v=1;v<i-1;v++)n[v]=n[v-1]-c;return n.push(6),n.reverse()},t.getPositions=function(r){const i=[],l=t.getRowColCoords(r),c=l.length;for(let n=0;n<c;n++)for(let v=0;v<c;v++)n===0&&v===0||n===0&&v===c-1||n===c-1&&v===0||i.push([l[n],l[v]]);return i}}(JD)),JD}var QD={},Rq;function LNe(){if(Rq)return QD;Rq=1;const t=Qv().getSymbolSize,e=7;return QD.getPositions=function(r){const i=t(r);return[[0,0],[i-e,0],[0,i-e]]},QD}var e5={},Tq;function FNe(){return Tq||(Tq=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const l=i.size;let c=0,n=0,v=0,R=null,x=null;for(let N=0;N<l;N++){n=v=0,R=x=null;for(let I=0;I<l;I++){let k=i.get(N,I);k===R?n++:(n>=5&&(c+=e.N1+(n-5)),R=k,n=1),k=i.get(I,N),k===x?v++:(v>=5&&(c+=e.N1+(v-5)),x=k,v=1)}n>=5&&(c+=e.N1+(n-5)),v>=5&&(c+=e.N1+(v-5))}return c},t.getPenaltyN2=function(i){const l=i.size;let c=0;for(let n=0;n<l-1;n++)for(let v=0;v<l-1;v++){const R=i.get(n,v)+i.get(n,v+1)+i.get(n+1,v)+i.get(n+1,v+1);(R===4||R===0)&&c++}return c*e.N2},t.getPenaltyN3=function(i){const l=i.size;let c=0,n=0,v=0;for(let R=0;R<l;R++){n=v=0;for(let x=0;x<l;x++)n=n<<1&2047|i.get(R,x),x>=10&&(n===1488||n===93)&&c++,v=v<<1&2047|i.get(x,R),x>=10&&(v===1488||v===93)&&c++}return c*e.N3},t.getPenaltyN4=function(i){let l=0;const c=i.data.length;for(let v=0;v<c;v++)l+=i.data[v];return Math.abs(Math.ceil(l*100/c/5)-10)*e.N4};function a(r,i,l){switch(r){case t.Patterns.PATTERN000:return(i+l)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(i+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return i*l%2+i*l%3===0;case t.Patterns.PATTERN110:return(i*l%2+i*l%3)%2===0;case t.Patterns.PATTERN111:return(i*l%3+(i+l)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,l){const c=l.size;for(let n=0;n<c;n++)for(let v=0;v<c;v++)l.isReserved(v,n)||l.xor(v,n,a(i,v,n))},t.getBestMask=function(i,l){const c=Object.keys(t.Patterns).length;let n=0,v=1/0;for(let R=0;R<c;R++){l(R),t.applyMask(R,i);const x=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(R,i),x<v&&(v=x,n=R)}return n}}(e5)),e5}var ob={},Cq;function mte(){if(Cq)return ob;Cq=1;const t=H4(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ob.getBlocksCount=function(i,l){switch(l){case t.L:return e[(i-1)*4+0];case t.M:return e[(i-1)*4+1];case t.Q:return e[(i-1)*4+2];case t.H:return e[(i-1)*4+3];default:return}},ob.getTotalCodewordsCount=function(i,l){switch(l){case t.L:return a[(i-1)*4+0];case t.M:return a[(i-1)*4+1];case t.Q:return a[(i-1)*4+2];case t.H:return a[(i-1)*4+3];default:return}},ob}var t5={},Jw={},Sq;function kNe(){if(Sq)return Jw;Sq=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let i=0;i<255;i++)t[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)t[i]=t[i-255]}(),Jw.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Jw.exp=function(r){return t[r]},Jw.mul=function(r,i){return r===0||i===0?0:t[e[r]+e[i]]},Jw}var bq;function UNe(){return bq||(bq=1,function(t){const e=kNe();t.mul=function(r,i){const l=new Uint8Array(r.length+i.length-1);for(let c=0;c<r.length;c++)for(let n=0;n<i.length;n++)l[c+n]^=e.mul(r[c],i[n]);return l},t.mod=function(r,i){let l=new Uint8Array(r);for(;l.length-i.length>=0;){const c=l[0];for(let v=0;v<i.length;v++)l[v]^=e.mul(i[v],c);let n=0;for(;n<l.length&&l[n]===0;)n++;l=l.slice(n)}return l},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let l=0;l<r;l++)i=t.mul(i,new Uint8Array([1,e.exp(l)]));return i}}(t5)),t5}var a5,xq;function BNe(){if(xq)return a5;xq=1;const t=UNe();function e(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const l=t.mod(i,this.genPoly),c=this.degree-l.length;if(c>0){const n=new Uint8Array(this.degree);return n.set(l,c),n}return l},a5=e,a5}var r5={},n5={},i5={},Pq;function gte(){return Pq||(Pq=1,i5.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),i5}var Em={},Eq;function yte(){if(Eq)return Em;Eq=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;Em.KANJI=new RegExp(a,"g"),Em.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Em.BYTE=new RegExp(r,"g"),Em.NUMERIC=new RegExp(t,"g"),Em.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+a+"$"),l=new RegExp("^"+t+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Em.testKanji=function(v){return i.test(v)},Em.testNumeric=function(v){return l.test(v)},Em.testAlphanumeric=function(v){return c.test(v)},Em}var Nq;function e0(){return Nq||(Nq=1,function(t){const e=gte(),a=yte();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,c){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?l.ccBits[0]:c<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return a.testNumeric(l)?t.NUMERIC:a.testAlphanumeric(l)?t.ALPHANUMERIC:a.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(l,c){if(t.isValid(l))return l;try{return r(l)}catch{return c}}}(n5)),n5}var Oq;function jNe(){return Oq||(Oq=1,function(t){const e=Qv(),a=mte(),r=H4(),i=e0(),l=gte(),c=7973,n=e.getBCHDigit(c);function v(I,k,Z){for(let $=1;$<=40;$++)if(k<=t.getCapacity($,Z,I))return $}function R(I,k){return i.getCharCountIndicator(I,k)+4}function x(I,k){let Z=0;return I.forEach(function($){const H=R($.mode,k);Z+=H+$.getBitsLength()}),Z}function N(I,k){for(let Z=1;Z<=40;Z++)if(x(I,Z)<=t.getCapacity(Z,k,i.MIXED))return Z}t.from=function(k,Z){return l.isValid(k)?parseInt(k,10):Z},t.getCapacity=function(k,Z,$){if(!l.isValid(k))throw new Error("Invalid QR Code version");typeof $>"u"&&($=i.BYTE);const H=e.getSymbolTotalCodewords(k),W=a.getTotalCodewordsCount(k,Z),ee=(H-W)*8;if($===i.MIXED)return ee;const oe=ee-R($,k);switch($){case i.NUMERIC:return Math.floor(oe/10*3);case i.ALPHANUMERIC:return Math.floor(oe/11*2);case i.KANJI:return Math.floor(oe/13);case i.BYTE:default:return Math.floor(oe/8)}},t.getBestVersionForData=function(k,Z){let $;const H=r.from(Z,r.M);if(Array.isArray(k)){if(k.length>1)return N(k,H);if(k.length===0)return 1;$=k[0]}else $=k;return v($.mode,$.getLength(),H)},t.getEncodedBits=function(k){if(!l.isValid(k)||k<7)throw new Error("Invalid QR Code version");let Z=k<<12;for(;e.getBCHDigit(Z)-n>=0;)Z^=c<<e.getBCHDigit(Z)-n;return k<<12|Z}}(r5)),r5}var s5={},Vq;function GNe(){if(Vq)return s5;Vq=1;const t=Qv(),e=1335,a=21522,r=t.getBCHDigit(e);return s5.getEncodedBits=function(l,c){const n=l.bit<<3|c;let v=n<<10;for(;t.getBCHDigit(v)-r>=0;)v^=e<<t.getBCHDigit(v)-r;return(n<<10|v)^a},s5}var o5={},l5,zq;function ZNe(){if(zq)return l5;zq=1;const t=e0();function e(a){this.mode=t.NUMERIC,this.data=a.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,l,c;for(i=0;i+3<=this.data.length;i+=3)l=this.data.substr(i,3),c=parseInt(l,10),r.put(c,10);const n=this.data.length-i;n>0&&(l=this.data.substr(i),c=parseInt(l,10),r.put(c,n*3+1))},l5=e,l5}var u5,Dq;function qNe(){if(Dq)return u5;Dq=1;const t=e0(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=t.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){let l;for(l=0;l+2<=this.data.length;l+=2){let c=e.indexOf(this.data[l])*45;c+=e.indexOf(this.data[l+1]),i.put(c,11)}this.data.length%2&&i.put(e.indexOf(this.data[l]),6)},u5=a,u5}var c5,Mq;function HNe(){if(Mq)return c5;Mq=1;const t=e0();function e(a){this.mode=t.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){for(let r=0,i=this.data.length;r<i;r++)a.put(this.data[r],8)},c5=e,c5}var d5,Iq;function $Ne(){if(Iq)return d5;Iq=1;const t=e0(),e=Qv();function a(r){this.mode=t.KANJI,this.data=r}return a.getBitsLength=function(i){return i*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let l=e.toSJIS(this.data[i]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),r.put(l,13)}},d5=a,d5}var h5={exports:{}},Lq;function KNe(){return Lq||(Lq=1,function(t){var e={single_source_shortest_paths:function(a,r,i){var l={},c={};c[r]=0;var n=e.PriorityQueue.make();n.push(r,0);for(var v,R,x,N,I,k,Z,$,H;!n.empty();){v=n.pop(),R=v.value,N=v.cost,I=a[R]||{};for(x in I)I.hasOwnProperty(x)&&(k=I[x],Z=N+k,$=c[x],H=typeof c[x]>"u",(H||$>Z)&&(c[x]=Z,n.push(x,Z),l[x]=R))}if(typeof i<"u"&&typeof c[i]>"u"){var W=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(W)}return l},extract_shortest_path_from_predecessor_list:function(a,r){for(var i=[],l=r;l;)i.push(l),a[l],l=a[l];return i.reverse(),i},find_path:function(a,r,i){var l=e.single_source_shortest_paths(a,r,i);return e.extract_shortest_path_from_predecessor_list(l,i)},PriorityQueue:{make:function(a){var r=e.PriorityQueue,i={},l;a=a||{};for(l in r)r.hasOwnProperty(l)&&(i[l]=r[l]);return i.queue=[],i.sorter=a.sorter||r.default_sorter,i},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var i={value:a,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(h5)),h5.exports}var Fq;function WNe(){return Fq||(Fq=1,function(t){const e=e0(),a=ZNe(),r=qNe(),i=HNe(),l=$Ne(),c=yte(),n=Qv(),v=KNe();function R(W){return unescape(encodeURIComponent(W)).length}function x(W,ee,oe){const pe=[];let le;for(;(le=W.exec(oe))!==null;)pe.push({data:le[0],index:le.index,mode:ee,length:le[0].length});return pe}function N(W){const ee=x(c.NUMERIC,e.NUMERIC,W),oe=x(c.ALPHANUMERIC,e.ALPHANUMERIC,W);let pe,le;return n.isKanjiModeEnabled()?(pe=x(c.BYTE,e.BYTE,W),le=x(c.KANJI,e.KANJI,W)):(pe=x(c.BYTE_KANJI,e.BYTE,W),le=[]),ee.concat(oe,pe,le).sort(function(ue,Re){return ue.index-Re.index}).map(function(ue){return{data:ue.data,mode:ue.mode,length:ue.length}})}function I(W,ee){switch(ee){case e.NUMERIC:return a.getBitsLength(W);case e.ALPHANUMERIC:return r.getBitsLength(W);case e.KANJI:return l.getBitsLength(W);case e.BYTE:return i.getBitsLength(W)}}function k(W){return W.reduce(function(ee,oe){const pe=ee.length-1>=0?ee[ee.length-1]:null;return pe&&pe.mode===oe.mode?(ee[ee.length-1].data+=oe.data,ee):(ee.push(oe),ee)},[])}function Z(W){const ee=[];for(let oe=0;oe<W.length;oe++){const pe=W[oe];switch(pe.mode){case e.NUMERIC:ee.push([pe,{data:pe.data,mode:e.ALPHANUMERIC,length:pe.length},{data:pe.data,mode:e.BYTE,length:pe.length}]);break;case e.ALPHANUMERIC:ee.push([pe,{data:pe.data,mode:e.BYTE,length:pe.length}]);break;case e.KANJI:ee.push([pe,{data:pe.data,mode:e.BYTE,length:R(pe.data)}]);break;case e.BYTE:ee.push([{data:pe.data,mode:e.BYTE,length:R(pe.data)}])}}return ee}function $(W,ee){const oe={},pe={start:{}};let le=["start"];for(let ge=0;ge<W.length;ge++){const ue=W[ge],Re=[];for(let we=0;we<ue.length;we++){const Ne=ue[we],ne=""+ge+we;Re.push(ne),oe[ne]={node:Ne,lastCount:0},pe[ne]={};for(let _e=0;_e<le.length;_e++){const ke=le[_e];oe[ke]&&oe[ke].node.mode===Ne.mode?(pe[ke][ne]=I(oe[ke].lastCount+Ne.length,Ne.mode)-I(oe[ke].lastCount,Ne.mode),oe[ke].lastCount+=Ne.length):(oe[ke]&&(oe[ke].lastCount=Ne.length),pe[ke][ne]=I(Ne.length,Ne.mode)+4+e.getCharCountIndicator(Ne.mode,ee))}}le=Re}for(let ge=0;ge<le.length;ge++)pe[le[ge]].end=0;return{map:pe,table:oe}}function H(W,ee){let oe;const pe=e.getBestModeForData(W);if(oe=e.from(ee,pe),oe!==e.BYTE&&oe.bit<pe.bit)throw new Error('"'+W+'" cannot be encoded with mode '+e.toString(oe)+`.
 Suggested mode is: `+e.toString(pe));switch(oe===e.KANJI&&!n.isKanjiModeEnabled()&&(oe=e.BYTE),oe){case e.NUMERIC:return new a(W);case e.ALPHANUMERIC:return new r(W);case e.KANJI:return new l(W);case e.BYTE:return new i(W)}}t.fromArray=function(ee){return ee.reduce(function(oe,pe){return typeof pe=="string"?oe.push(H(pe,null)):pe.data&&oe.push(H(pe.data,pe.mode)),oe},[])},t.fromString=function(ee,oe){const pe=N(ee,n.isKanjiModeEnabled()),le=Z(pe),ge=$(le,oe),ue=v.find_path(ge.map,"start","end"),Re=[];for(let we=1;we<ue.length-1;we++)Re.push(ge.table[ue[we]].node);return t.fromArray(k(Re))},t.rawSplit=function(ee){return t.fromArray(N(ee,n.isKanjiModeEnabled()))}}(o5)),o5}var kq;function YNe(){if(kq)return KD;kq=1;const t=Qv(),e=H4(),a=DNe(),r=MNe(),i=INe(),l=LNe(),c=FNe(),n=mte(),v=BNe(),R=jNe(),x=GNe(),N=e0(),I=WNe();function k(ge,ue){const Re=ge.size,we=l.getPositions(ue);for(let Ne=0;Ne<we.length;Ne++){const ne=we[Ne][0],_e=we[Ne][1];for(let ke=-1;ke<=7;ke++)if(!(ne+ke<=-1||Re<=ne+ke))for(let Pe=-1;Pe<=7;Pe++)_e+Pe<=-1||Re<=_e+Pe||(ke>=0&&ke<=6&&(Pe===0||Pe===6)||Pe>=0&&Pe<=6&&(ke===0||ke===6)||ke>=2&&ke<=4&&Pe>=2&&Pe<=4?ge.set(ne+ke,_e+Pe,!0,!0):ge.set(ne+ke,_e+Pe,!1,!0))}}function Z(ge){const ue=ge.size;for(let Re=8;Re<ue-8;Re++){const we=Re%2===0;ge.set(Re,6,we,!0),ge.set(6,Re,we,!0)}}function $(ge,ue){const Re=i.getPositions(ue);for(let we=0;we<Re.length;we++){const Ne=Re[we][0],ne=Re[we][1];for(let _e=-2;_e<=2;_e++)for(let ke=-2;ke<=2;ke++)_e===-2||_e===2||ke===-2||ke===2||_e===0&&ke===0?ge.set(Ne+_e,ne+ke,!0,!0):ge.set(Ne+_e,ne+ke,!1,!0)}}function H(ge,ue){const Re=ge.size,we=R.getEncodedBits(ue);let Ne,ne,_e;for(let ke=0;ke<18;ke++)Ne=Math.floor(ke/3),ne=ke%3+Re-8-3,_e=(we>>ke&1)===1,ge.set(Ne,ne,_e,!0),ge.set(ne,Ne,_e,!0)}function W(ge,ue,Re){const we=ge.size,Ne=x.getEncodedBits(ue,Re);let ne,_e;for(ne=0;ne<15;ne++)_e=(Ne>>ne&1)===1,ne<6?ge.set(ne,8,_e,!0):ne<8?ge.set(ne+1,8,_e,!0):ge.set(we-15+ne,8,_e,!0),ne<8?ge.set(8,we-ne-1,_e,!0):ne<9?ge.set(8,15-ne-1+1,_e,!0):ge.set(8,15-ne-1,_e,!0);ge.set(we-8,8,1,!0)}function ee(ge,ue){const Re=ge.size;let we=-1,Ne=Re-1,ne=7,_e=0;for(let ke=Re-1;ke>0;ke-=2)for(ke===6&&ke--;;){for(let Pe=0;Pe<2;Pe++)if(!ge.isReserved(Ne,ke-Pe)){let Ee=!1;_e<ue.length&&(Ee=(ue[_e]>>>ne&1)===1),ge.set(Ne,ke-Pe,Ee),ne--,ne===-1&&(_e++,ne=7)}if(Ne+=we,Ne<0||Re<=Ne){Ne-=we,we=-we;break}}}function oe(ge,ue,Re){const we=new a;Re.forEach(function(Pe){we.put(Pe.mode.bit,4),we.put(Pe.getLength(),N.getCharCountIndicator(Pe.mode,ge)),Pe.write(we)});const Ne=t.getSymbolTotalCodewords(ge),ne=n.getTotalCodewordsCount(ge,ue),_e=(Ne-ne)*8;for(we.getLengthInBits()+4<=_e&&we.put(0,4);we.getLengthInBits()%8!==0;)we.putBit(0);const ke=(_e-we.getLengthInBits())/8;for(let Pe=0;Pe<ke;Pe++)we.put(Pe%2?17:236,8);return pe(we,ge,ue)}function pe(ge,ue,Re){const we=t.getSymbolTotalCodewords(ue),Ne=n.getTotalCodewordsCount(ue,Re),ne=we-Ne,_e=n.getBlocksCount(ue,Re),ke=we%_e,Pe=_e-ke,Ee=Math.floor(we/_e),De=Math.floor(ne/_e),qe=De+1,Oe=Ee-De,He=new v(Oe);let Ue=0;const ct=new Array(_e),Se=new Array(_e);let Ie=0;const je=new Uint8Array(ge.buffer);for(let ut=0;ut<_e;ut++){const Ae=ut<Pe?De:qe;ct[ut]=je.slice(Ue,Ue+Ae),Se[ut]=He.encode(ct[ut]),Ue+=Ae,Ie=Math.max(Ie,Ae)}const Ze=new Uint8Array(we);let Be=0,Je,dt;for(Je=0;Je<Ie;Je++)for(dt=0;dt<_e;dt++)Je<ct[dt].length&&(Ze[Be++]=ct[dt][Je]);for(Je=0;Je<Oe;Je++)for(dt=0;dt<_e;dt++)Ze[Be++]=Se[dt][Je];return Ze}function le(ge,ue,Re,we){let Ne;if(Array.isArray(ge))Ne=I.fromArray(ge);else if(typeof ge=="string"){let Ee=ue;if(!Ee){const De=I.rawSplit(ge);Ee=R.getBestVersionForData(De,Re)}Ne=I.fromString(ge,Ee||40)}else throw new Error("Invalid data");const ne=R.getBestVersionForData(Ne,Re);if(!ne)throw new Error("The amount of data is too big to be stored in a QR Code");if(!ue)ue=ne;else if(ue<ne)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ne+`.
`);const _e=oe(ue,Re,Ne),ke=t.getSymbolSize(ue),Pe=new r(ke);return k(Pe,ue),Z(Pe),$(Pe,ue),W(Pe,Re,0),ue>=7&&H(Pe,ue),ee(Pe,_e),isNaN(we)&&(we=c.getBestMask(Pe,W.bind(null,Pe,Re))),c.applyMask(we,Pe),W(Pe,Re,we),{modules:Pe,version:ue,errorCorrectionLevel:Re,maskPattern:we,segments:Ne}}return KD.create=function(ue,Re){if(typeof ue>"u"||ue==="")throw new Error("No input text");let we=e.M,Ne,ne;return typeof Re<"u"&&(we=e.from(Re.errorCorrectionLevel,e.M),Ne=R.from(Re.version),ne=c.from(Re.maskPattern),Re.toSJISFunc&&t.setToSJISFunction(Re.toSJISFunc)),le(ue,Ne,we,ne)},KD}var f5={},p5={},Uq;function Ate(){return Uq||(Uq=1,function(t){function e(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(l){return[l,l]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,l=r.width&&r.width>=21?r.width:void 0,c=r.scale||4;return{width:l,scale:l?4:c,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const l=t.getScale(r,i);return Math.floor((r+i.margin*2)*l)},t.qrToImageData=function(r,i,l){const c=i.modules.size,n=i.modules.data,v=t.getScale(c,l),R=Math.floor((c+l.margin*2)*v),x=l.margin*v,N=[l.color.light,l.color.dark];for(let I=0;I<R;I++)for(let k=0;k<R;k++){let Z=(I*R+k)*4,$=l.color.light;if(I>=x&&k>=x&&I<R-x&&k<R-x){const H=Math.floor((I-x)/v),W=Math.floor((k-x)/v);$=N[n[H*c+W]?1:0]}r[Z++]=$.r,r[Z++]=$.g,r[Z++]=$.b,r[Z]=$.a}}}(p5)),p5}var Bq;function XNe(){return Bq||(Bq=1,function(t){const e=Ate();function a(i,l,c){i.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=c,l.width=c,l.style.height=c+"px",l.style.width=c+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,c,n){let v=n,R=c;typeof v>"u"&&(!c||!c.getContext)&&(v=c,c=void 0),c||(R=r()),v=e.getOptions(v);const x=e.getImageWidth(l.modules.size,v),N=R.getContext("2d"),I=N.createImageData(x,x);return e.qrToImageData(I.data,l,v),a(N,R,x),N.putImageData(I,0,0),R},t.renderToDataURL=function(l,c,n){let v=n;typeof v>"u"&&(!c||!c.getContext)&&(v=c,c=void 0),v||(v={});const R=t.render(l,c,v),x=v.type||"image/png",N=v.rendererOpts||{};return R.toDataURL(x,N.quality)}}(f5)),f5}var m5={},jq;function JNe(){if(jq)return m5;jq=1;const t=Ate();function e(i,l){const c=i.a/255,n=l+'="'+i.hex+'"';return c<1?n+" "+l+'-opacity="'+c.toFixed(2).slice(1)+'"':n}function a(i,l,c){let n=i+l;return typeof c<"u"&&(n+=" "+c),n}function r(i,l,c){let n="",v=0,R=!1,x=0;for(let N=0;N<i.length;N++){const I=Math.floor(N%l),k=Math.floor(N/l);!I&&!R&&(R=!0),i[N]?(x++,N>0&&I>0&&i[N-1]||(n+=R?a("M",I+c,.5+k+c):a("m",v,0),v=0,R=!1),I+1<l&&i[N+1]||(n+=a("h",x),x=0)):v++}return n}return m5.render=function(l,c,n){const v=t.getOptions(c),R=l.modules.size,x=l.modules.data,N=R+v.margin*2,I=v.color.light.a?"<path "+e(v.color.light,"fill")+' d="M0 0h'+N+"v"+N+'H0z"/>':"",k="<path "+e(v.color.dark,"stroke")+' d="'+r(x,R,v.margin)+'"/>',Z='viewBox="0 0 '+N+" "+N+'"',H='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+Z+' shape-rendering="crispEdges">'+I+k+`</svg>
`;return typeof n=="function"&&n(null,H),H},m5}var Gq;function QNe(){if(Gq)return Z0;Gq=1;const t=zNe(),e=YNe(),a=XNe(),r=JNe();function i(l,c,n,v,R){const x=[].slice.call(arguments,1),N=x.length,I=typeof x[N-1]=="function";if(!I&&!t())throw new Error("Callback required as last argument");if(I){if(N<2)throw new Error("Too few arguments provided");N===2?(R=n,n=c,c=v=void 0):N===3&&(c.getContext&&typeof R>"u"?(R=v,v=void 0):(R=v,v=n,n=c,c=void 0))}else{if(N<1)throw new Error("Too few arguments provided");return N===1?(n=c,c=v=void 0):N===2&&!c.getContext&&(v=n,n=c,c=void 0),new Promise(function(k,Z){try{const $=e.create(n,v);k(l($,c,v))}catch($){Z($)}})}try{const k=e.create(n,v);R(null,l(k,c,v))}catch(k){R(k)}}return Z0.create=e.create,Z0.toCanvas=i.bind(null,a.render),Z0.toDataURL=i.bind(null,a.renderToDataURL),Z0.toString=i.bind(null,function(l,c,n){return r.render(l,n)}),Z0}var eOe=QNe();const tOe=ss(eOe),aOe="modulepreload",rOe=function(t){return"/ecpcaps/"+t},Zq={},IT=function(e,a,r){let i=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),n=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.allSettled(a.map(v=>{if(v=rOe(v),v in Zq)return;Zq[v]=!0;const R=v.endsWith(".css"),x=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${x}`))return;const N=document.createElement("link");if(N.rel=R?"stylesheet":aOe,R||(N.as="script"),N.crossOrigin="",N.href=v,n&&N.setAttribute("nonce",n),document.head.appendChild(N),R)return new Promise((I,k)=>{N.addEventListener("load",I),N.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(c){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=c,window.dispatchEvent(n),!n.defaultPrevented)throw c}return i.then(c=>{for(const n of c||[])n.status==="rejected"&&l(n.reason);return e().catch(l)})};function qs(t){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(t)}var wd=Uint8Array,wf=Uint16Array,$4=Int32Array,QP=new wd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eE=new wd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),KI=new wd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vte=function(t,e){for(var a=new wf(31),r=0;r<31;++r)a[r]=e+=1<<t[r-1];for(var i=new $4(a[30]),r=1;r<30;++r)for(var l=a[r];l<a[r+1];++l)i[l]=l-a[r]<<5|r;return{b:a,r:i}},_te=vte(QP,2),wte=_te.b,WI=_te.r;wte[28]=258,WI[258]=28;var Rte=vte(eE,0),nOe=Rte.b,qq=Rte.r,YI=new wf(32768);for(var ko=0;ko<32768;++ko){var xy=(ko&43690)>>1|(ko&21845)<<1;xy=(xy&52428)>>2|(xy&13107)<<2,xy=(xy&61680)>>4|(xy&3855)<<4,YI[ko]=((xy&65280)>>8|(xy&255)<<8)>>1}var qm=function(t,e,a){for(var r=t.length,i=0,l=new wf(e);i<r;++i)t[i]&&++l[t[i]-1];var c=new wf(e);for(i=1;i<e;++i)c[i]=c[i-1]+l[i-1]<<1;var n;if(a){n=new wf(1<<e);var v=15-e;for(i=0;i<r;++i)if(t[i])for(var R=i<<4|t[i],x=e-t[i],N=c[t[i]-1]++<<x,I=N|(1<<x)-1;N<=I;++N)n[YI[N]>>v]=R}else for(n=new wf(r),i=0;i<r;++i)t[i]&&(n[i]=YI[c[t[i]-1]++]>>15-t[i]);return n},rA=new wd(288);for(var ko=0;ko<144;++ko)rA[ko]=8;for(var ko=144;ko<256;++ko)rA[ko]=9;for(var ko=256;ko<280;++ko)rA[ko]=7;for(var ko=280;ko<288;++ko)rA[ko]=8;var LT=new wd(32);for(var ko=0;ko<32;++ko)LT[ko]=5;var iOe=qm(rA,9,0),sOe=qm(rA,9,1),oOe=qm(LT,5,0),lOe=qm(LT,5,1),g5=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},Fp=function(t,e,a){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&a},y5=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},K4=function(t){return(t+7)/8|0},Tte=function(t,e,a){return(a==null||a>t.length)&&(a=t.length),new wd(t.subarray(e,a))},uOe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Bp=function(t,e,a){var r=new Error(e||uOe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Bp),!a)throw r;return r},cOe=function(t,e,a,r){var i=t.length,l=0;if(!i||e.f&&!e.l)return a||new wd(0);var c=!a,n=c||e.i!=2,v=e.i;c&&(a=new wd(i*3));var R=function(Dt){var Lt=a.length;if(Dt>Lt){var fa=new wd(Math.max(Lt*2,Dt));fa.set(a),a=fa}},x=e.f||0,N=e.p||0,I=e.b||0,k=e.l,Z=e.d,$=e.m,H=e.n,W=i*8;do{if(!k){x=Fp(t,N,1);var ee=Fp(t,N+1,3);if(N+=3,ee)if(ee==1)k=sOe,Z=lOe,$=9,H=5;else if(ee==2){var ge=Fp(t,N,31)+257,ue=Fp(t,N+10,15)+4,Re=ge+Fp(t,N+5,31)+1;N+=14;for(var we=new wd(Re),Ne=new wd(19),ne=0;ne<ue;++ne)Ne[KI[ne]]=Fp(t,N+ne*3,7);N+=ue*3;for(var _e=g5(Ne),ke=(1<<_e)-1,Pe=qm(Ne,_e,1),ne=0;ne<Re;){var Ee=Pe[Fp(t,N,ke)];N+=Ee&15;var oe=Ee>>4;if(oe<16)we[ne++]=oe;else{var De=0,qe=0;for(oe==16?(qe=3+Fp(t,N,3),N+=2,De=we[ne-1]):oe==17?(qe=3+Fp(t,N,7),N+=3):oe==18&&(qe=11+Fp(t,N,127),N+=7);qe--;)we[ne++]=De}}var Oe=we.subarray(0,ge),He=we.subarray(ge);$=g5(Oe),H=g5(He),k=qm(Oe,$,1),Z=qm(He,H,1)}else Bp(1);else{var oe=K4(N)+4,pe=t[oe-4]|t[oe-3]<<8,le=oe+pe;if(le>i){v&&Bp(0);break}n&&R(I+pe),a.set(t.subarray(oe,le),I),e.b=I+=pe,e.p=N=le*8,e.f=x;continue}if(N>W){v&&Bp(0);break}}n&&R(I+131072);for(var Ue=(1<<$)-1,ct=(1<<H)-1,Se=N;;Se=N){var De=k[y5(t,N)&Ue],Ie=De>>4;if(N+=De&15,N>W){v&&Bp(0);break}if(De||Bp(2),Ie<256)a[I++]=Ie;else if(Ie==256){Se=N,k=null;break}else{var je=Ie-254;if(Ie>264){var ne=Ie-257,Ze=QP[ne];je=Fp(t,N,(1<<Ze)-1)+wte[ne],N+=Ze}var Be=Z[y5(t,N)&ct],Je=Be>>4;Be||Bp(3),N+=Be&15;var He=nOe[Je];if(Je>3){var Ze=eE[Je];He+=y5(t,N)&(1<<Ze)-1,N+=Ze}if(N>W){v&&Bp(0);break}n&&R(I+131072);var dt=I+je;if(I<He){var ut=l-He,Ae=Math.min(He,dt);for(ut+I<0&&Bp(3);I<Ae;++I)a[I]=r[ut+I]}for(;I<dt;++I)a[I]=a[I-He]}}e.l=k,e.p=Se,e.b=I,e.f=x,k&&(x=1,e.m=$,e.d=Z,e.n=H)}while(!x);return I!=a.length&&c?Tte(a,0,I):a.subarray(0,I)},_g=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8},Qw=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8,t[r+2]|=a>>16},A5=function(t,e){for(var a=[],r=0;r<t.length;++r)t[r]&&a.push({s:r,f:t[r]});var i=a.length,l=a.slice();if(!i)return{t:Ste,l:0};if(i==1){var c=new wd(a[0].s+1);return c[a[0].s]=1,{t:c,l:1}}a.sort(function(le,ge){return le.f-ge.f}),a.push({s:-1,f:25001});var n=a[0],v=a[1],R=0,x=1,N=2;for(a[0]={s:-1,f:n.f+v.f,l:n,r:v};x!=i-1;)n=a[a[R].f<a[N].f?R++:N++],v=a[R!=x&&a[R].f<a[N].f?R++:N++],a[x++]={s:-1,f:n.f+v.f,l:n,r:v};for(var I=l[0].s,r=1;r<i;++r)l[r].s>I&&(I=l[r].s);var k=new wf(I+1),Z=XI(a[x-1],k,0);if(Z>e){var r=0,$=0,H=Z-e,W=1<<H;for(l.sort(function(ge,ue){return k[ue.s]-k[ge.s]||ge.f-ue.f});r<i;++r){var ee=l[r].s;if(k[ee]>e)$+=W-(1<<Z-k[ee]),k[ee]=e;else break}for($>>=H;$>0;){var oe=l[r].s;k[oe]<e?$-=1<<e-k[oe]++-1:++r}for(;r>=0&&$;--r){var pe=l[r].s;k[pe]==e&&(--k[pe],++$)}Z=e}return{t:new wd(k),l:Z}},XI=function(t,e,a){return t.s==-1?Math.max(XI(t.l,e,a+1),XI(t.r,e,a+1)):e[t.s]=a},Hq=function(t){for(var e=t.length;e&&!t[--e];);for(var a=new wf(++e),r=0,i=t[0],l=1,c=function(v){a[r++]=v},n=1;n<=e;++n)if(t[n]==i&&n!=e)++l;else{if(!i&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(i),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(i);l=1,i=t[n]}return{c:a.subarray(0,r),n:e}},eR=function(t,e){for(var a=0,r=0;r<e.length;++r)a+=t[r]*e[r];return a},Cte=function(t,e,a){var r=a.length,i=K4(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var l=0;l<r;++l)t[i+l+4]=a[l];return(i+4+r)*8},$q=function(t,e,a,r,i,l,c,n,v,R,x){_g(e,x++,a),++i[256];for(var N=A5(i,15),I=N.t,k=N.l,Z=A5(l,15),$=Z.t,H=Z.l,W=Hq(I),ee=W.c,oe=W.n,pe=Hq($),le=pe.c,ge=pe.n,ue=new wf(19),Re=0;Re<ee.length;++Re)++ue[ee[Re]&31];for(var Re=0;Re<le.length;++Re)++ue[le[Re]&31];for(var we=A5(ue,7),Ne=we.t,ne=we.l,_e=19;_e>4&&!Ne[KI[_e-1]];--_e);var ke=R+5<<3,Pe=eR(i,rA)+eR(l,LT)+c,Ee=eR(i,I)+eR(l,$)+c+14+3*_e+eR(ue,Ne)+2*ue[16]+3*ue[17]+7*ue[18];if(v>=0&&ke<=Pe&&ke<=Ee)return Cte(e,x,t.subarray(v,v+R));var De,qe,Oe,He;if(_g(e,x,1+(Ee<Pe)),x+=2,Ee<Pe){De=qm(I,k,0),qe=I,Oe=qm($,H,0),He=$;var Ue=qm(Ne,ne,0);_g(e,x,oe-257),_g(e,x+5,ge-1),_g(e,x+10,_e-4),x+=14;for(var Re=0;Re<_e;++Re)_g(e,x+3*Re,Ne[KI[Re]]);x+=3*_e;for(var ct=[ee,le],Se=0;Se<2;++Se)for(var Ie=ct[Se],Re=0;Re<Ie.length;++Re){var je=Ie[Re]&31;_g(e,x,Ue[je]),x+=Ne[je],je>15&&(_g(e,x,Ie[Re]>>5&127),x+=Ie[Re]>>12)}}else De=iOe,qe=rA,Oe=oOe,He=LT;for(var Re=0;Re<n;++Re){var Ze=r[Re];if(Ze>255){var je=Ze>>18&31;Qw(e,x,De[je+257]),x+=qe[je+257],je>7&&(_g(e,x,Ze>>23&31),x+=QP[je]);var Be=Ze&31;Qw(e,x,Oe[Be]),x+=He[Be],Be>3&&(Qw(e,x,Ze>>5&8191),x+=eE[Be])}else Qw(e,x,De[Ze]),x+=qe[Ze]}return Qw(e,x,De[256]),x+qe[256]},dOe=new $4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ste=new wd(0),hOe=function(t,e,a,r,i,l){var c=l.z||t.length,n=new wd(r+c+5*(1+Math.ceil(c/7e3))+i),v=n.subarray(r,n.length-i),R=l.l,x=(l.r||0)&7;if(e){x&&(v[0]=l.r>>3);for(var N=dOe[e-1],I=N>>13,k=N&8191,Z=(1<<a)-1,$=l.p||new wf(32768),H=l.h||new wf(Z+1),W=Math.ceil(a/3),ee=2*W,oe=function(Nt){return(t[Nt]^t[Nt+1]<<W^t[Nt+2]<<ee)&Z},pe=new $4(25e3),le=new wf(288),ge=new wf(32),ue=0,Re=0,we=l.i||0,Ne=0,ne=l.w||0,_e=0;we+2<c;++we){var ke=oe(we),Pe=we&32767,Ee=H[ke];if($[Pe]=Ee,H[ke]=Pe,ne<=we){var De=c-we;if((ue>7e3||Ne>24576)&&(De>423||!R)){x=$q(t,v,0,pe,le,ge,Re,Ne,_e,we-_e,x),Ne=ue=Re=0,_e=we;for(var qe=0;qe<286;++qe)le[qe]=0;for(var qe=0;qe<30;++qe)ge[qe]=0}var Oe=2,He=0,Ue=k,ct=Pe-Ee&32767;if(De>2&&ke==oe(we-ct))for(var Se=Math.min(I,De)-1,Ie=Math.min(32767,we),je=Math.min(258,De);ct<=Ie&&--Ue&&Pe!=Ee;){if(t[we+Oe]==t[we+Oe-ct]){for(var Ze=0;Ze<je&&t[we+Ze]==t[we+Ze-ct];++Ze);if(Ze>Oe){if(Oe=Ze,He=ct,Ze>Se)break;for(var Be=Math.min(ct,Ze-2),Je=0,qe=0;qe<Be;++qe){var dt=we-ct+qe&32767,ut=$[dt],Ae=dt-ut&32767;Ae>Je&&(Je=Ae,Ee=dt)}}}Pe=Ee,Ee=$[Pe],ct+=Pe-Ee&32767}if(He){pe[Ne++]=268435456|WI[Oe]<<18|qq[He];var Dt=WI[Oe]&31,Lt=qq[He]&31;Re+=QP[Dt]+eE[Lt],++le[257+Dt],++ge[Lt],ne=we+Oe,++ue}else pe[Ne++]=t[we],++le[t[we]]}}for(we=Math.max(we,ne);we<c;++we)pe[Ne++]=t[we],++le[t[we]];x=$q(t,v,R,pe,le,ge,Re,Ne,_e,we-_e,x),R||(l.r=x&7|v[x/8|0]<<3,x-=7,l.h=H,l.p=$,l.i=we,l.w=ne)}else{for(var we=l.w||0;we<c+R;we+=65535){var fa=we+65535;fa>=c&&(v[x/8|0]=R,fa=c),x=Cte(v,x+1,t.subarray(we,fa))}l.i=c}return Tte(n,0,r+K4(x)+i)},bte=function(){var t=1,e=0;return{p:function(a){for(var r=t,i=e,l=a.length|0,c=0;c!=l;){for(var n=Math.min(c+2655,l);c<n;++c)i+=r+=a[c];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},fOe=function(t,e,a,r,i){if(!i&&(i={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),c=new wd(l.length+t.length);c.set(l),c.set(t,l.length),t=c,i.w=l.length}return hOe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,a,r,i)},xte=function(t,e,a){for(;a;++e)t[e]=a,a>>>=8},pOe=function(t,e){var a=e.level,r=a==0?0:a<6?1:a==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=bte();i.p(e.dictionary),xte(t,2,i.d())}},mOe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Bp(6,"invalid zlib data"),(t[1]>>5&1)==1&&Bp(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function JI(t,e){e||(e={});var a=bte();a.p(t);var r=fOe(t,e,e.dictionary?6:2,4);return pOe(r,e),xte(r,r.length-4,a.d()),r}function gOe(t,e){return cOe(t.subarray(mOe(t),-4),{i:2},e,e)}var yOe=typeof TextDecoder<"u"&&new TextDecoder,AOe=0;try{yOe.decode(Ste,{stream:!0}),AOe=1}catch{}var Qn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function v5(){Qn.console&&typeof Qn.console.log=="function"&&Qn.console.log.apply(Qn.console,arguments)}var fo={log:v5,warn:function(t){Qn.console&&(typeof Qn.console.warn=="function"?Qn.console.warn.apply(Qn.console,arguments):v5.call(null,arguments))},error:function(t){Qn.console&&(typeof Qn.console.error=="function"?Qn.console.error.apply(Qn.console,arguments):v5(t))}};function _5(t,e,a){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){lv(r.response,e,a)},r.onerror=function(){fo.error("could not download file")},r.send()}function Kq(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function lb(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var VR,QI,lv=Qn.saveAs||((typeof window>"u"?"undefined":qs(window))!=="object"||window!==Qn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,a){var r=Qn.URL||Qn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Kq(i.href)?_5(t,e,a):lb(i,i.target="_blank"):lb(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){lb(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download",typeof t=="string")if(Kq(t))_5(t,e,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){lb(r)})}else navigator.msSaveOrOpenBlob(function(i,l){return l===void 0?l={autoBom:!1}:qs(l)!=="object"&&(fo.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,a),e)}:function(t,e,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return _5(t,e,a);var i=t.type==="application/octet-stream",l=/constructor/i.test(Qn.HTMLElement)||Qn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l)&&(typeof FileReader>"u"?"undefined":qs(FileReader))==="object"){var n=new FileReader;n.onloadend=function(){var x=n.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=x:location=x,r=null},n.readAsDataURL(t)}else{var v=Qn.URL||Qn.webkitURL,R=v.createObjectURL(t);r?r.location=R:location.href=R,r=null,setTimeout(function(){v.revokeObjectURL(R)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Pte(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],r=0;r<a.length;r++){var i=a[r].re,l=a[r].process,c=i.exec(t);c&&(e=l(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var n=this.r.toString(16),v=this.g.toString(16),R=this.b.toString(16);return n.length==1&&(n="0"+n),v.length==1&&(v="0"+v),R.length==1&&(R="0"+R),"#"+n+v+R}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function w5(t,e){var a=t[0],r=t[1],i=t[2],l=t[3];a=dd(a,r,i,l,e[0],7,-680876936),l=dd(l,a,r,i,e[1],12,-389564586),i=dd(i,l,a,r,e[2],17,606105819),r=dd(r,i,l,a,e[3],22,-1044525330),a=dd(a,r,i,l,e[4],7,-176418897),l=dd(l,a,r,i,e[5],12,1200080426),i=dd(i,l,a,r,e[6],17,-1473231341),r=dd(r,i,l,a,e[7],22,-45705983),a=dd(a,r,i,l,e[8],7,1770035416),l=dd(l,a,r,i,e[9],12,-1958414417),i=dd(i,l,a,r,e[10],17,-42063),r=dd(r,i,l,a,e[11],22,-1990404162),a=dd(a,r,i,l,e[12],7,1804603682),l=dd(l,a,r,i,e[13],12,-40341101),i=dd(i,l,a,r,e[14],17,-1502002290),a=hd(a,r=dd(r,i,l,a,e[15],22,1236535329),i,l,e[1],5,-165796510),l=hd(l,a,r,i,e[6],9,-1069501632),i=hd(i,l,a,r,e[11],14,643717713),r=hd(r,i,l,a,e[0],20,-373897302),a=hd(a,r,i,l,e[5],5,-701558691),l=hd(l,a,r,i,e[10],9,38016083),i=hd(i,l,a,r,e[15],14,-660478335),r=hd(r,i,l,a,e[4],20,-405537848),a=hd(a,r,i,l,e[9],5,568446438),l=hd(l,a,r,i,e[14],9,-1019803690),i=hd(i,l,a,r,e[3],14,-187363961),r=hd(r,i,l,a,e[8],20,1163531501),a=hd(a,r,i,l,e[13],5,-1444681467),l=hd(l,a,r,i,e[2],9,-51403784),i=hd(i,l,a,r,e[7],14,1735328473),a=fd(a,r=hd(r,i,l,a,e[12],20,-1926607734),i,l,e[5],4,-378558),l=fd(l,a,r,i,e[8],11,-2022574463),i=fd(i,l,a,r,e[11],16,1839030562),r=fd(r,i,l,a,e[14],23,-35309556),a=fd(a,r,i,l,e[1],4,-1530992060),l=fd(l,a,r,i,e[4],11,1272893353),i=fd(i,l,a,r,e[7],16,-155497632),r=fd(r,i,l,a,e[10],23,-1094730640),a=fd(a,r,i,l,e[13],4,681279174),l=fd(l,a,r,i,e[0],11,-358537222),i=fd(i,l,a,r,e[3],16,-722521979),r=fd(r,i,l,a,e[6],23,76029189),a=fd(a,r,i,l,e[9],4,-640364487),l=fd(l,a,r,i,e[12],11,-421815835),i=fd(i,l,a,r,e[15],16,530742520),a=pd(a,r=fd(r,i,l,a,e[2],23,-995338651),i,l,e[0],6,-198630844),l=pd(l,a,r,i,e[7],10,1126891415),i=pd(i,l,a,r,e[14],15,-1416354905),r=pd(r,i,l,a,e[5],21,-57434055),a=pd(a,r,i,l,e[12],6,1700485571),l=pd(l,a,r,i,e[3],10,-1894986606),i=pd(i,l,a,r,e[10],15,-1051523),r=pd(r,i,l,a,e[1],21,-2054922799),a=pd(a,r,i,l,e[8],6,1873313359),l=pd(l,a,r,i,e[15],10,-30611744),i=pd(i,l,a,r,e[6],15,-1560198380),r=pd(r,i,l,a,e[13],21,1309151649),a=pd(a,r,i,l,e[4],6,-145523070),l=pd(l,a,r,i,e[11],10,-1120210379),i=pd(i,l,a,r,e[2],15,718787259),r=pd(r,i,l,a,e[9],21,-343485551),t[0]=Zy(a,t[0]),t[1]=Zy(r,t[1]),t[2]=Zy(i,t[2]),t[3]=Zy(l,t[3])}function tE(t,e,a,r,i,l){return e=Zy(Zy(e,t),Zy(r,l)),Zy(e<<i|e>>>32-i,a)}function dd(t,e,a,r,i,l,c){return tE(e&a|~e&r,t,e,i,l,c)}function hd(t,e,a,r,i,l,c){return tE(e&r|a&~r,t,e,i,l,c)}function fd(t,e,a,r,i,l,c){return tE(e^a^r,t,e,i,l,c)}function pd(t,e,a,r,i,l,c){return tE(a^(e|~r),t,e,i,l,c)}function Ete(t){var e,a=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)w5(r,vOe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(w5(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*a,w5(r,i),r}function vOe(t){var e,a=[];for(e=0;e<64;e+=4)a[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return a}VR=Qn.atob.bind(Qn),QI=Qn.btoa.bind(Qn);var Wq="0123456789abcdef".split("");function _Oe(t){for(var e="",a=0;a<4;a++)e+=Wq[t>>8*a+4&15]+Wq[t>>8*a&15];return e}function wOe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function e3(t){return Ete(t).map(wOe).join("")}var ROe=function(t){for(var e=0;e<t.length;e++)t[e]=_Oe(t[e]);return t.join("")}(Ete("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zy(t,e){if(ROe){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function t3(t,e){var a,r,i,l;if(t!==a){for(var c=(i=t,l=1+(256/t.length>>0),new Array(l+1).join(i)),n=[],v=0;v<256;v++)n[v]=v;var R=0;for(v=0;v<256;v++){var x=n[v];R=(R+x+c.charCodeAt(v))%256,n[v]=n[R],n[R]=x}a=t,r=n}else n=r;var N=e.length,I=0,k=0,Z="";for(v=0;v<N;v++)k=(k+(x=n[I=(I+1)%256]))%256,n[I]=n[k],n[k]=x,c=n[(n[I]+n[k])%256],Z+=String.fromCharCode(e.charCodeAt(v)^c);return Z}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Yq={print:4,modify:8,copy:16,"annot-forms":32};function Y0(t,e,a,r){this.v=1,this.r=2;var i=192;t.forEach(function(n){if(Yq.perm!==void 0)throw new Error("Invalid permission: "+n);i+=Yq[n]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(e+this.padding).substr(0,32),c=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^i)),this.encryptionKey=e3(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=t3(this.encryptionKey,this.padding)}function X0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",a=t.length,r=0;r<a;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Xq(t){if(qs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(a,r,i){if(i=i||!1,typeof a!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(a)||(e[a]={});var l=Math.random().toString(35);return e[a][l]=[r,!!i],l},this.unsubscribe=function(a){for(var r in e)if(e[r][a])return delete e[r][a],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(a){if(e.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var l in e[a]){var c=e[a][l];try{c[0].apply(t,r)}catch(n){Qn.console&&fo.error("jsPDF PubSub Error",n.message,n)}c[1]&&i.push(l)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function p2(t){if(!(this instanceof p2))return new p2(t);var e="opacity,stroke-opacity".split(",");for(var a in t)t.hasOwnProperty(a)&&e.indexOf(a)>=0&&(this[a]=t[a]);this.id="",this.objectNumber=-1}function Nte(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function cv(t,e,a,r,i){if(!(this instanceof cv))return new cv(t,e,a,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=a,Nte.call(this,r,i)}function s_(t,e,a,r,i){if(!(this instanceof s_))return new s_(t,e,a,r,i);this.boundingBox=t,this.xStep=e,this.yStep=a,this.stream="",this.cloneIndex=0,Nte.call(this,r,i)}function Wn(t){var e,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],l=arguments[3],c=[],n=1,v=16,R="S",x=null;qs(t=t||{})==="object"&&(a=t.orientation,r=t.unit||r,i=t.format||i,l=t.compress||t.compressPdf||l,(x=t.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),n=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(v=t.floatPrecision),R=t.defaultPathOperation||"S"),c=t.filters||(l===!0?["FlateEncode"]:c),r=r||"mm",a=(""+(a||"P")).toLowerCase();var N=t.putOnlyUsedFonts||!1,I={},k={internal:{},__private__:{}};k.__private__.PubSub=Xq;var Z="1.3",$=k.__private__.getPdfVersion=function(){return Z};k.__private__.setPdfVersion=function(de){Z=de};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};k.__private__.getPageFormats=function(){return H};var W=k.__private__.getPageFormat=function(de){return H[de]};i=i||"a4";var ee={COMPAT:"compat",ADVANCED:"advanced"},oe=ee.COMPAT;function pe(){this.saveGraphicsState(),wt(new Le(ra,0,0,-ra,0,ru()*ra).toString()+" cm"),this.setFontSize(this.getFontSize()/ra),R="n",oe=ee.ADVANCED}function le(){this.restoreGraphicsState(),R="S",oe=ee.COMPAT}var ge=k.__private__.combineFontStyleAndFontWeight=function(de,Qe){if(de=="bold"&&Qe=="normal"||de=="bold"&&Qe==400||de=="normal"&&Qe=="italic"||de=="bold"&&Qe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Qe&&(de=Qe==400||Qe==="normal"?de==="italic"?"italic":"normal":Qe!=700&&Qe!=="bold"||de!=="normal"?(Qe==700?"bold":Qe)+""+de:"bold"),de};k.advancedAPI=function(de){var Qe=oe===ee.COMPAT;return Qe&&pe.call(this),typeof de!="function"||(de(this),Qe&&le.call(this)),this},k.compatAPI=function(de){var Qe=oe===ee.ADVANCED;return Qe&&le.call(this),typeof de!="function"||(de(this),Qe&&pe.call(this)),this},k.isAdvancedAPI=function(){return oe===ee.ADVANCED};var ue,Re=function(de){if(oe!==ee.ADVANCED)throw new Error(de+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},we=k.roundToPrecision=k.__private__.roundToPrecision=function(de,Qe){var It=e||Qe;if(isNaN(de)||isNaN(It))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return de.toFixed(It).replace(/0+$/,"")};ue=k.hpf=k.__private__.hpf=typeof v=="number"?function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.hpf");return we(de,v)}:v==="smart"?function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.hpf");return we(de,de>-1&&de<1?16:5)}:function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.hpf");return we(de,16)};var Ne=k.f2=k.__private__.f2=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.f2");return we(de,2)},ne=k.__private__.f3=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.f3");return we(de,3)},_e=k.scale=k.__private__.scale=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.scale");return oe===ee.COMPAT?de*ra:oe===ee.ADVANCED?de:void 0},ke=function(de){return oe===ee.COMPAT?ru()-de:oe===ee.ADVANCED?de:void 0},Pe=function(de){return _e(ke(de))};k.__private__.setPrecision=k.setPrecision=function(de){typeof parseInt(de,10)=="number"&&(e=parseInt(de,10))};var Ee,De="00000000000000000000000000000000",qe=k.__private__.getFileId=function(){return De},Oe=k.__private__.setFileId=function(de){return De=de!==void 0&&/^[a-fA-F0-9]{32}$/.test(de)?de.toUpperCase():De.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(go=new Y0(x.userPermissions,x.userPassword,x.ownerPassword,De)),De};k.setFileId=function(de){return Oe(de),this},k.getFileId=function(){return qe()};var He=k.__private__.convertDateToPDFDate=function(de){var Qe=de.getTimezoneOffset(),It=Qe<0?"+":"-",Jt=Math.floor(Math.abs(Qe/60)),pa=Math.abs(Qe%60),La=[It,je(Jt),"'",je(pa),"'"].join("");return["D:",de.getFullYear(),je(de.getMonth()+1),je(de.getDate()),je(de.getHours()),je(de.getMinutes()),je(de.getSeconds()),La].join("")},Ue=k.__private__.convertPDFDateToDate=function(de){var Qe=parseInt(de.substr(2,4),10),It=parseInt(de.substr(6,2),10)-1,Jt=parseInt(de.substr(8,2),10),pa=parseInt(de.substr(10,2),10),La=parseInt(de.substr(12,2),10),ir=parseInt(de.substr(14,2),10);return new Date(Qe,It,Jt,pa,La,ir,0)},ct=k.__private__.setCreationDate=function(de){var Qe;if(de===void 0&&(de=new Date),de instanceof Date)Qe=He(de);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(de))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Qe=de}return Ee=Qe},Se=k.__private__.getCreationDate=function(de){var Qe=Ee;return de==="jsDate"&&(Qe=Ue(Ee)),Qe};k.setCreationDate=function(de){return ct(de),this},k.getCreationDate=function(de){return Se(de)};var Ie,je=k.__private__.padd2=function(de){return("0"+parseInt(de)).slice(-2)},Ze=k.__private__.padd2Hex=function(de){return("00"+(de=de.toString())).substr(de.length)},Be=0,Je=[],dt=[],ut=0,Ae=[],Dt=[],Lt=!1,fa=dt,Nt=function(){Be=0,ut=0,dt=[],Je=[],Ae=[],Yt=Gt(),Kt=Gt()};k.__private__.setCustomOutputDestination=function(de){Lt=!0,fa=de};var Ht=function(de){Lt||(fa=de)};k.__private__.resetCustomOutputDestination=function(){Lt=!1,fa=dt};var wt=k.__private__.out=function(de){return de=de.toString(),ut+=de.length+1,fa.push(de),fa},fr=k.__private__.write=function(de){return wt(arguments.length===1?de.toString():Array.prototype.join.call(arguments," "))},Ca=k.__private__.getArrayBuffer=function(de){for(var Qe=de.length,It=new ArrayBuffer(Qe),Jt=new Uint8Array(It);Qe--;)Jt[Qe]=de.charCodeAt(Qe);return It},za=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];k.__private__.getStandardFonts=function(){return za};var ar=t.fontSize||16;k.__private__.setFontSize=k.setFontSize=function(de){return ar=oe===ee.ADVANCED?de/ra:de,this};var ur,or=k.__private__.getFontSize=k.getFontSize=function(){return oe===ee.COMPAT?ar:ar*ra},Cr=t.R2L||!1;k.__private__.setR2L=k.setR2L=function(de){return Cr=de,this},k.__private__.getR2L=k.getR2L=function(){return Cr};var Ia,Fr=k.__private__.setZoomMode=function(de){var Qe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(de))ur=de;else if(isNaN(de)){if(Qe.indexOf(de)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+de+'" is not recognized.');ur=de}else ur=parseInt(de,10)};k.__private__.getZoomMode=function(){return ur};var tn,lr=k.__private__.setPageMode=function(de){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(de)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+de+'" is not recognized.');Ia=de};k.__private__.getPageMode=function(){return Ia};var wr=k.__private__.setLayoutMode=function(de){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(de)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+de+'" is not recognized.');tn=de};k.__private__.getLayoutMode=function(){return tn},k.__private__.setDisplayMode=k.setDisplayMode=function(de,Qe,It){return Fr(de),wr(Qe),lr(It),this};var na={title:"",subject:"",author:"",keywords:"",creator:""};k.__private__.getDocumentProperty=function(de){if(Object.keys(na).indexOf(de)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return na[de]},k.__private__.getDocumentProperties=function(){return na},k.__private__.setDocumentProperties=k.setProperties=k.setDocumentProperties=function(de){for(var Qe in na)na.hasOwnProperty(Qe)&&de[Qe]&&(na[Qe]=de[Qe]);return this},k.__private__.setDocumentProperty=function(de,Qe){if(Object.keys(na).indexOf(de)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return na[de]=Qe};var Oa,ra,ja,gr,Tn,an={},dn={},Yr=[],Pr={},ki={},gi={},oi={},Cs=null,Aa=0,mr=[],Zr=new Xq(k),ti=t.hotfixes||[],Rn={},Zt={},xe=[],Le=function de(Qe,It,Jt,pa,La,ir){if(!(this instanceof de))return new de(Qe,It,Jt,pa,La,ir);isNaN(Qe)&&(Qe=1),isNaN(It)&&(It=0),isNaN(Jt)&&(Jt=0),isNaN(pa)&&(pa=1),isNaN(La)&&(La=0),isNaN(ir)&&(ir=0),this._matrix=[Qe,It,Jt,pa,La,ir]};Object.defineProperty(Le.prototype,"sx",{get:function(){return this._matrix[0]},set:function(de){this._matrix[0]=de}}),Object.defineProperty(Le.prototype,"shy",{get:function(){return this._matrix[1]},set:function(de){this._matrix[1]=de}}),Object.defineProperty(Le.prototype,"shx",{get:function(){return this._matrix[2]},set:function(de){this._matrix[2]=de}}),Object.defineProperty(Le.prototype,"sy",{get:function(){return this._matrix[3]},set:function(de){this._matrix[3]=de}}),Object.defineProperty(Le.prototype,"tx",{get:function(){return this._matrix[4]},set:function(de){this._matrix[4]=de}}),Object.defineProperty(Le.prototype,"ty",{get:function(){return this._matrix[5]},set:function(de){this._matrix[5]=de}}),Object.defineProperty(Le.prototype,"a",{get:function(){return this._matrix[0]},set:function(de){this._matrix[0]=de}}),Object.defineProperty(Le.prototype,"b",{get:function(){return this._matrix[1]},set:function(de){this._matrix[1]=de}}),Object.defineProperty(Le.prototype,"c",{get:function(){return this._matrix[2]},set:function(de){this._matrix[2]=de}}),Object.defineProperty(Le.prototype,"d",{get:function(){return this._matrix[3]},set:function(de){this._matrix[3]=de}}),Object.defineProperty(Le.prototype,"e",{get:function(){return this._matrix[4]},set:function(de){this._matrix[4]=de}}),Object.defineProperty(Le.prototype,"f",{get:function(){return this._matrix[5]},set:function(de){this._matrix[5]=de}}),Object.defineProperty(Le.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Le.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Le.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Le.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Le.prototype.join=function(de){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ue).join(de)},Le.prototype.multiply=function(de){var Qe=de.sx*this.sx+de.shy*this.shx,It=de.sx*this.shy+de.shy*this.sy,Jt=de.shx*this.sx+de.sy*this.shx,pa=de.shx*this.shy+de.sy*this.sy,La=de.tx*this.sx+de.ty*this.shx+this.tx,ir=de.tx*this.shy+de.ty*this.sy+this.ty;return new Le(Qe,It,Jt,pa,La,ir)},Le.prototype.decompose=function(){var de=this.sx,Qe=this.shy,It=this.shx,Jt=this.sy,pa=this.tx,La=this.ty,ir=Math.sqrt(de*de+Qe*Qe),Er=(de/=ir)*It+(Qe/=ir)*Jt;It-=de*Er,Jt-=Qe*Er;var en=Math.sqrt(It*It+Jt*Jt);return Er/=en,de*(Jt/=en)<Qe*(It/=en)&&(de=-de,Qe=-Qe,Er=-Er,ir=-ir),{scale:new Le(ir,0,0,en,0,0),translate:new Le(1,0,0,1,pa,La),rotate:new Le(de,Qe,-Qe,de,0,0),skew:new Le(1,0,Er,1,0,0)}},Le.prototype.toString=function(de){return this.join(" ")},Le.prototype.inversed=function(){var de=this.sx,Qe=this.shy,It=this.shx,Jt=this.sy,pa=this.tx,La=this.ty,ir=1/(de*Jt-Qe*It),Er=Jt*ir,en=-Qe*ir,On=-It*ir,Fn=de*ir;return new Le(Er,en,On,Fn,-Er*pa-On*La,-en*pa-Fn*La)},Le.prototype.applyToPoint=function(de){var Qe=de.x*this.sx+de.y*this.shx+this.tx,It=de.x*this.shy+de.y*this.sy+this.ty;return new Cu(Qe,It)},Le.prototype.applyToRectangle=function(de){var Qe=this.applyToPoint(de),It=this.applyToPoint(new Cu(de.x+de.w,de.y+de.h));return new Su(Qe.x,Qe.y,It.x-Qe.x,It.y-Qe.y)},Le.prototype.clone=function(){var de=this.sx,Qe=this.shy,It=this.shx,Jt=this.sy,pa=this.tx,La=this.ty;return new Le(de,Qe,It,Jt,pa,La)},k.Matrix=Le;var $e=k.matrixMult=function(de,Qe){return Qe.multiply(de)},yt=new Le(1,0,0,1,0,0);k.unitMatrix=k.identityMatrix=yt;var At=function(de,Qe){if(!ki[de]){var It=(Qe instanceof cv?"Sh":"P")+(Object.keys(Pr).length+1).toString(10);Qe.id=It,ki[de]=It,Pr[It]=Qe,Zr.publish("addPattern",Qe)}};k.ShadingPattern=cv,k.TilingPattern=s_,k.addShadingPattern=function(de,Qe){return Re("addShadingPattern()"),At(de,Qe),this},k.beginTilingPattern=function(de){Re("beginTilingPattern()"),au(de.boundingBox[0],de.boundingBox[1],de.boundingBox[2]-de.boundingBox[0],de.boundingBox[3]-de.boundingBox[1],de.matrix)},k.endTilingPattern=function(de,Qe){Re("endTilingPattern()"),Qe.stream=Dt[Ie].join(`
`),At(de,Qe),Zr.publish("endTilingPattern",Qe),xe.pop().restore()};var bt=k.__private__.newObject=function(){var de=Gt();return Et(de,!0),de},Gt=k.__private__.newObjectDeferred=function(){return Be++,Je[Be]=function(){return ut},Be},Et=function(de,Qe){return Qe=typeof Qe=="boolean"&&Qe,Je[de]=ut,Qe&&wt(de+" 0 obj"),de},Wt=k.__private__.newAdditionalObject=function(){var de={objId:Gt(),content:""};return Ae.push(de),de},Yt=Gt(),Kt=Gt(),Sa=k.__private__.decodeColorString=function(de){var Qe=de.split(" ");if(Qe.length!==2||Qe[1]!=="g"&&Qe[1]!=="G")Qe.length===5&&(Qe[4]==="k"||Qe[4]==="K")&&(Qe=[(1-Qe[0])*(1-Qe[3]),(1-Qe[1])*(1-Qe[3]),(1-Qe[2])*(1-Qe[3]),"r"]);else{var It=parseFloat(Qe[0]);Qe=[It,It,It,"r"]}for(var Jt="#",pa=0;pa<3;pa++)Jt+=("0"+Math.floor(255*parseFloat(Qe[pa])).toString(16)).slice(-2);return Jt},Fa=k.__private__.encodeColorString=function(de){var Qe;typeof de=="string"&&(de={ch1:de});var It=de.ch1,Jt=de.ch2,pa=de.ch3,La=de.ch4,ir=de.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof It=="string"&&It.charAt(0)!=="#"){var Er=new Pte(It);if(Er.ok)It=Er.toHex();else if(!/^\d*\.?\d*$/.test(It))throw new Error('Invalid color "'+It+'" passed to jsPDF.encodeColorString.')}if(typeof It=="string"&&/^#[0-9A-Fa-f]{3}$/.test(It)&&(It="#"+It[1]+It[1]+It[2]+It[2]+It[3]+It[3]),typeof It=="string"&&/^#[0-9A-Fa-f]{6}$/.test(It)){var en=parseInt(It.substr(1),16);It=en>>16&255,Jt=en>>8&255,pa=255&en}if(Jt===void 0||La===void 0&&It===Jt&&Jt===pa)if(typeof It=="string")Qe=It+" "+ir[0];else switch(de.precision){case 2:Qe=Ne(It/255)+" "+ir[0];break;case 3:default:Qe=ne(It/255)+" "+ir[0]}else if(La===void 0||qs(La)==="object"){if(La&&!isNaN(La.a)&&La.a===0)return Qe=["1.","1.","1.",ir[1]].join(" ");if(typeof It=="string")Qe=[It,Jt,pa,ir[1]].join(" ");else switch(de.precision){case 2:Qe=[Ne(It/255),Ne(Jt/255),Ne(pa/255),ir[1]].join(" ");break;default:case 3:Qe=[ne(It/255),ne(Jt/255),ne(pa/255),ir[1]].join(" ")}}else if(typeof It=="string")Qe=[It,Jt,pa,La,ir[2]].join(" ");else switch(de.precision){case 2:Qe=[Ne(It),Ne(Jt),Ne(pa),Ne(La),ir[2]].join(" ");break;case 3:default:Qe=[ne(It),ne(Jt),ne(pa),ne(La),ir[2]].join(" ")}return Qe},qa=k.__private__.getFilters=function(){return c},br=k.__private__.putStream=function(de){var Qe=(de=de||{}).data||"",It=de.filters||qa(),Jt=de.alreadyAppliedFilters||[],pa=de.addLength1||!1,La=Qe.length,ir=de.objectId,Er=function(os){return os};if(x!==null&&ir===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(Er=go.encryptor(ir,0));var en={};It===!0&&(It=["FlateEncode"]);var On=de.additionalKeyValues||[],Fn=(en=Wn.API.processDataByFilters!==void 0?Wn.API.processDataByFilters(Qe,It):{data:Qe,reverseChain:[]}).reverseChain+(Array.isArray(Jt)?Jt.join(" "):Jt.toString());if(en.data.length!==0&&(On.push({key:"Length",value:en.data.length}),pa===!0&&On.push({key:"Length1",value:La})),Fn.length!=0)if(Fn.split("/").length-1==1)On.push({key:"Filter",value:Fn});else{On.push({key:"Filter",value:"["+Fn+"]"});for(var wi=0;wi<On.length;wi+=1)if(On[wi].key==="DecodeParms"){for(var zs=[],Ds=0;Ds<en.reverseChain.split("/").length-1;Ds+=1)zs.push("null");zs.push(On[wi].value),On[wi].value="["+zs.join(" ")+"]"}}wt("<<");for(var io=0;io<On.length;io++)wt("/"+On[io].key+" "+On[io].value);wt(">>"),en.data.length!==0&&(wt("stream"),wt(Er(en.data)),wt("endstream"))},Ir=k.__private__.putPage=function(de){var Qe=de.number,It=de.data,Jt=de.objId,pa=de.contentsObjId;Et(Jt,!0),wt("<</Type /Page"),wt("/Parent "+de.rootDictionaryObjId+" 0 R"),wt("/Resources "+de.resourceDictionaryObjId+" 0 R"),wt("/MediaBox ["+parseFloat(ue(de.mediaBox.bottomLeftX))+" "+parseFloat(ue(de.mediaBox.bottomLeftY))+" "+ue(de.mediaBox.topRightX)+" "+ue(de.mediaBox.topRightY)+"]"),de.cropBox!==null&&wt("/CropBox ["+ue(de.cropBox.bottomLeftX)+" "+ue(de.cropBox.bottomLeftY)+" "+ue(de.cropBox.topRightX)+" "+ue(de.cropBox.topRightY)+"]"),de.bleedBox!==null&&wt("/BleedBox ["+ue(de.bleedBox.bottomLeftX)+" "+ue(de.bleedBox.bottomLeftY)+" "+ue(de.bleedBox.topRightX)+" "+ue(de.bleedBox.topRightY)+"]"),de.trimBox!==null&&wt("/TrimBox ["+ue(de.trimBox.bottomLeftX)+" "+ue(de.trimBox.bottomLeftY)+" "+ue(de.trimBox.topRightX)+" "+ue(de.trimBox.topRightY)+"]"),de.artBox!==null&&wt("/ArtBox ["+ue(de.artBox.bottomLeftX)+" "+ue(de.artBox.bottomLeftY)+" "+ue(de.artBox.topRightX)+" "+ue(de.artBox.topRightY)+"]"),typeof de.userUnit=="number"&&de.userUnit!==1&&wt("/UserUnit "+de.userUnit),Zr.publish("putPage",{objId:Jt,pageContext:mr[Qe],pageNumber:Qe,page:It}),wt("/Contents "+pa+" 0 R"),wt(">>"),wt("endobj");var La=It.join(`
`);return oe===ee.ADVANCED&&(La+=`
Q`),Et(pa,!0),br({data:La,filters:qa(),objectId:pa}),wt("endobj"),Jt},Lr=k.__private__.putPages=function(){var de,Qe,It=[];for(de=1;de<=Aa;de++)mr[de].objId=Gt(),mr[de].contentsObjId=Gt();for(de=1;de<=Aa;de++)It.push(Ir({number:de,data:Dt[de],objId:mr[de].objId,contentsObjId:mr[de].contentsObjId,mediaBox:mr[de].mediaBox,cropBox:mr[de].cropBox,bleedBox:mr[de].bleedBox,trimBox:mr[de].trimBox,artBox:mr[de].artBox,userUnit:mr[de].userUnit,rootDictionaryObjId:Yt,resourceDictionaryObjId:Kt}));Et(Yt,!0),wt("<</Type /Pages");var Jt="/Kids [";for(Qe=0;Qe<Aa;Qe++)Jt+=It[Qe]+" 0 R ";wt(Jt+"]"),wt("/Count "+Aa),wt(">>"),wt("endobj"),Zr.publish("postPutPages")},Wr=function(de){Zr.publish("putFont",{font:de,out:wt,newObject:bt,putStream:br}),de.isAlreadyPutted!==!0&&(de.objectNumber=bt(),wt("<<"),wt("/Type /Font"),wt("/BaseFont /"+X0(de.postScriptName)),wt("/Subtype /Type1"),typeof de.encoding=="string"&&wt("/Encoding /"+de.encoding),wt("/FirstChar 32"),wt("/LastChar 255"),wt(">>"),wt("endobj"))},Un=function(){for(var de in an)an.hasOwnProperty(de)&&(N===!1||N===!0&&I.hasOwnProperty(de))&&Wr(an[de])},ri=function(de){de.objectNumber=bt();var Qe=[];Qe.push({key:"Type",value:"/XObject"}),Qe.push({key:"Subtype",value:"/Form"}),Qe.push({key:"BBox",value:"["+[ue(de.x),ue(de.y),ue(de.x+de.width),ue(de.y+de.height)].join(" ")+"]"}),Qe.push({key:"Matrix",value:"["+de.matrix.toString()+"]"});var It=de.pages[1].join(`
`);br({data:It,additionalKeyValues:Qe,objectId:de.objectNumber}),wt("endobj")},Jr=function(){for(var de in Rn)Rn.hasOwnProperty(de)&&ri(Rn[de])},Cn=function(de,Qe){var It,Jt=[],pa=1/(Qe-1);for(It=0;It<1;It+=pa)Jt.push(It);if(Jt.push(1),de[0].offset!=0){var La={offset:0,color:de[0].color};de.unshift(La)}if(de[de.length-1].offset!=1){var ir={offset:1,color:de[de.length-1].color};de.push(ir)}for(var Er="",en=0,On=0;On<Jt.length;On++){for(It=Jt[On];It>de[en+1].offset;)en++;var Fn=de[en].offset,wi=(It-Fn)/(de[en+1].offset-Fn),zs=de[en].color,Ds=de[en+1].color;Er+=Ze(Math.round((1-wi)*zs[0]+wi*Ds[0]).toString(16))+Ze(Math.round((1-wi)*zs[1]+wi*Ds[1]).toString(16))+Ze(Math.round((1-wi)*zs[2]+wi*Ds[2]).toString(16))}return Er.trim()},Qr=function(de,Qe){Qe||(Qe=21);var It=bt(),Jt=Cn(de.colors,Qe),pa=[];pa.push({key:"FunctionType",value:"0"}),pa.push({key:"Domain",value:"[0.0 1.0]"}),pa.push({key:"Size",value:"["+Qe+"]"}),pa.push({key:"BitsPerSample",value:"8"}),pa.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pa.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),br({data:Jt,additionalKeyValues:pa,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:It}),wt("endobj"),de.objectNumber=bt(),wt("<< /ShadingType "+de.type),wt("/ColorSpace /DeviceRGB");var La="/Coords ["+ue(parseFloat(de.coords[0]))+" "+ue(parseFloat(de.coords[1]))+" ";de.type===2?La+=ue(parseFloat(de.coords[2]))+" "+ue(parseFloat(de.coords[3])):La+=ue(parseFloat(de.coords[2]))+" "+ue(parseFloat(de.coords[3]))+" "+ue(parseFloat(de.coords[4]))+" "+ue(parseFloat(de.coords[5])),wt(La+="]"),de.matrix&&wt("/Matrix ["+de.matrix.toString()+"]"),wt("/Function "+It+" 0 R"),wt("/Extend [true true]"),wt(">>"),wt("endobj")},jn=function(de,Qe){var It=Gt(),Jt=bt();Qe.push({resourcesOid:It,objectOid:Jt}),de.objectNumber=Jt;var pa=[];pa.push({key:"Type",value:"/Pattern"}),pa.push({key:"PatternType",value:"1"}),pa.push({key:"PaintType",value:"1"}),pa.push({key:"TilingType",value:"1"}),pa.push({key:"BBox",value:"["+de.boundingBox.map(ue).join(" ")+"]"}),pa.push({key:"XStep",value:ue(de.xStep)}),pa.push({key:"YStep",value:ue(de.yStep)}),pa.push({key:"Resources",value:It+" 0 R"}),de.matrix&&pa.push({key:"Matrix",value:"["+de.matrix.toString()+"]"}),br({data:de.stream,additionalKeyValues:pa,objectId:de.objectNumber}),wt("endobj")},Ui=function(de){var Qe;for(Qe in Pr)Pr.hasOwnProperty(Qe)&&(Pr[Qe]instanceof cv?Qr(Pr[Qe]):Pr[Qe]instanceof s_&&jn(Pr[Qe],de))},Xi=function(de){for(var Qe in de.objectNumber=bt(),wt("<<"),de)switch(Qe){case"opacity":wt("/ca "+Ne(de[Qe]));break;case"stroke-opacity":wt("/CA "+Ne(de[Qe]))}wt(">>"),wt("endobj")},Ps=function(){var de;for(de in gi)gi.hasOwnProperty(de)&&Xi(gi[de])},Es=function(){for(var de in wt("/XObject <<"),Rn)Rn.hasOwnProperty(de)&&Rn[de].objectNumber>=0&&wt("/"+de+" "+Rn[de].objectNumber+" 0 R");Zr.publish("putXobjectDict"),wt(">>")},Bo=function(){go.oid=bt(),wt("<<"),wt("/Filter /Standard"),wt("/V "+go.v),wt("/R "+go.r),wt("/U <"+go.toHexString(go.U)+">"),wt("/O <"+go.toHexString(go.O)+">"),wt("/P "+go.P),wt(">>"),wt("endobj")},Ns=function(){for(var de in wt("/Font <<"),an)an.hasOwnProperty(de)&&(N===!1||N===!0&&I.hasOwnProperty(de))&&wt("/"+de+" "+an[de].objectNumber+" 0 R");wt(">>")},$s=function(){if(Object.keys(Pr).length>0){for(var de in wt("/Shading <<"),Pr)Pr.hasOwnProperty(de)&&Pr[de]instanceof cv&&Pr[de].objectNumber>=0&&wt("/"+de+" "+Pr[de].objectNumber+" 0 R");Zr.publish("putShadingPatternDict"),wt(">>")}},pc=function(de){if(Object.keys(Pr).length>0){for(var Qe in wt("/Pattern <<"),Pr)Pr.hasOwnProperty(Qe)&&Pr[Qe]instanceof k.TilingPattern&&Pr[Qe].objectNumber>=0&&Pr[Qe].objectNumber<de&&wt("/"+Qe+" "+Pr[Qe].objectNumber+" 0 R");Zr.publish("putTilingPatternDict"),wt(">>")}},al=function(){if(Object.keys(gi).length>0){var de;for(de in wt("/ExtGState <<"),gi)gi.hasOwnProperty(de)&&gi[de].objectNumber>=0&&wt("/"+de+" "+gi[de].objectNumber+" 0 R");Zr.publish("putGStateDict"),wt(">>")}},Bi=function(de){Et(de.resourcesOid,!0),wt("<<"),wt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ns(),$s(),pc(de.objectOid),al(),Es(),wt(">>"),wt("endobj")},Jl=function(){var de=[];Un(),Ps(),Jr(),Ui(de),Zr.publish("putResources"),de.forEach(Bi),Bi({resourcesOid:Kt,objectOid:Number.MAX_SAFE_INTEGER}),Zr.publish("postPutResources")},jo=function(){Zr.publish("putAdditionalObjects");for(var de=0;de<Ae.length;de++){var Qe=Ae[de];Et(Qe.objId,!0),wt(Qe.content),wt("endobj")}Zr.publish("postPutAdditionalObjects")},Ed=function(de){dn[de.fontName]=dn[de.fontName]||{},dn[de.fontName][de.fontStyle]=de.id},Uc=function(de,Qe,It,Jt,pa){var La={id:"F"+(Object.keys(an).length+1).toString(10),postScriptName:de,fontName:Qe,fontStyle:It,encoding:Jt,isStandardFont:pa||!1,metadata:{}};return Zr.publish("addFont",{font:La,instance:this}),an[La.id]=La,Ed(La),La.id},gh=function(de){for(var Qe=0,It=za.length;Qe<It;Qe++){var Jt=Uc.call(this,de[Qe][0],de[Qe][1],de[Qe][2],za[Qe][3],!0);N===!1&&(I[Jt]=!0);var pa=de[Qe][0].split("-");Ed({id:Jt,fontName:pa[0],fontStyle:pa[1]||""})}Zr.publish("addFonts",{fonts:an,dictionary:dn})},wu=function(de){return de.foo=function(){try{return de.apply(this,arguments)}catch(Jt){var Qe=Jt.stack||"";~Qe.indexOf(" at ")&&(Qe=Qe.split(" at ")[1]);var It="Error in function "+Qe.split(`
`)[0].split("<")[0]+": "+Jt.message;if(!Qn.console)throw new Error(It);Qn.console.error(It,Jt),Qn.alert&&alert(It)}},de.foo.bar=de,de.foo},Bc=function(de,Qe){var It,Jt,pa,La,ir,Er,en,On,Fn;if(pa=(Qe=Qe||{}).sourceEncoding||"Unicode",ir=Qe.outputEncoding,(Qe.autoencode||ir)&&an[Oa].metadata&&an[Oa].metadata[pa]&&an[Oa].metadata[pa].encoding&&(La=an[Oa].metadata[pa].encoding,!ir&&an[Oa].encoding&&(ir=an[Oa].encoding),!ir&&La.codePages&&(ir=La.codePages[0]),typeof ir=="string"&&(ir=La[ir]),ir)){for(en=!1,Er=[],It=0,Jt=de.length;It<Jt;It++)(On=ir[de.charCodeAt(It)])?Er.push(String.fromCharCode(On)):Er.push(de[It]),Er[It].charCodeAt(0)>>8&&(en=!0);de=Er.join("")}for(It=de.length;en===void 0&&It!==0;)de.charCodeAt(It-1)>>8&&(en=!0),It--;if(!en)return de;for(Er=Qe.noBOM?[]:[254,255],It=0,Jt=de.length;It<Jt;It++){if((Fn=(On=de.charCodeAt(It))>>8)>>8)throw new Error("Character at position "+It+" of string '"+de+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Er.push(Fn),Er.push(On-(Fn<<8))}return String.fromCharCode.apply(void 0,Er)},Al=k.__private__.pdfEscape=k.pdfEscape=function(de,Qe){return Bc(de,Qe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},no=k.__private__.beginPage=function(de){Dt[++Aa]=[],mr[Aa]={objId:0,contentsObjId:0,userUnit:Number(n),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(de[0]),topRightY:Number(de[1])}},Ru(Aa),Ht(Dt[Ie])},Go=function(de,Qe){var It,Jt,pa;switch(a=Qe||a,typeof de=="string"&&(It=W(de.toLowerCase()),Array.isArray(It)&&(Jt=It[0],pa=It[1])),Array.isArray(de)&&(Jt=de[0]*ra,pa=de[1]*ra),isNaN(Jt)&&(Jt=i[0],pa=i[1]),(Jt>14400||pa>14400)&&(fo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Jt=Math.min(14400,Jt),pa=Math.min(14400,pa)),i=[Jt,pa],a.substr(0,1)){case"l":pa>Jt&&(i=[pa,Jt]);break;case"p":Jt>pa&&(i=[pa,Jt])}no(i),Vd(Mi),wt(zl),Zh!==0&&wt(Zh+" J"),$o!==0&&wt($o+" j"),Zr.publish("addPage",{pageNumber:Aa})},Ql=function(de){de>0&&de<=Aa&&(Dt.splice(de,1),mr.splice(de,1),Aa--,Ie>Aa&&(Ie=Aa),this.setPage(Ie))},Ru=function(de){de>0&&de<=Aa&&(Ie=de)},mo=k.__private__.getNumberOfPages=k.getNumberOfPages=function(){return Dt.length-1},Zo=function(de,Qe,It){var Jt,pa=void 0;return It=It||{},de=de!==void 0?de:an[Oa].fontName,Qe=Qe!==void 0?Qe:an[Oa].fontStyle,Jt=de.toLowerCase(),dn[Jt]!==void 0&&dn[Jt][Qe]!==void 0?pa=dn[Jt][Qe]:dn[de]!==void 0&&dn[de][Qe]!==void 0?pa=dn[de][Qe]:It.disableWarning===!1&&fo.warn("Unable to look up font label for font '"+de+"', '"+Qe+"'. Refer to getFontList() for available fonts."),pa||It.noFallback||(pa=dn.times[Qe])==null&&(pa=dn.times.normal),pa},Nd=k.__private__.putInfo=function(){var de=bt(),Qe=function(Jt){return Jt};for(var It in x!==null&&(Qe=go.encryptor(de,0)),wt("<<"),wt("/Producer ("+Al(Qe("jsPDF "+Wn.version))+")"),na)na.hasOwnProperty(It)&&na[It]&&wt("/"+It.substr(0,1).toUpperCase()+It.substr(1)+" ("+Al(Qe(na[It]))+")");wt("/CreationDate ("+Al(Qe(Ee))+")"),wt(">>"),wt("endobj")},Ku=k.__private__.putCatalog=function(de){var Qe=(de=de||{}).rootDictionaryObjId||Yt;switch(bt(),wt("<<"),wt("/Type /Catalog"),wt("/Pages "+Qe+" 0 R"),ur||(ur="fullwidth"),ur){case"fullwidth":wt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":wt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":wt("/OpenAction [3 0 R /Fit]");break;case"original":wt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var It=""+ur;It.substr(It.length-1)==="%"&&(ur=parseInt(ur)/100),typeof ur=="number"&&wt("/OpenAction [3 0 R /XYZ null null "+Ne(ur)+"]")}switch(tn||(tn="continuous"),tn){case"continuous":wt("/PageLayout /OneColumn");break;case"single":wt("/PageLayout /SinglePage");break;case"two":case"twoleft":wt("/PageLayout /TwoColumnLeft");break;case"tworight":wt("/PageLayout /TwoColumnRight")}Ia&&wt("/PageMode /"+Ia),Zr.publish("putCatalog"),wt(">>"),wt("endobj")},Sf=k.__private__.putTrailer=function(){wt("trailer"),wt("<<"),wt("/Size "+(Be+1)),wt("/Root "+Be+" 0 R"),wt("/Info "+(Be-1)+" 0 R"),x!==null&&wt("/Encrypt "+go.oid+" 0 R"),wt("/ID [ <"+De+"> <"+De+"> ]"),wt(">>")},eu=k.__private__.putHeader=function(){wt("%PDF-"+Z),wt("%")},qo=k.__private__.putXRef=function(){var de="0000000000";wt("xref"),wt("0 "+(Be+1)),wt("0000000000 65535 f ");for(var Qe=1;Qe<=Be;Qe++)typeof Je[Qe]=="function"?wt((de+Je[Qe]()).slice(-10)+" 00000 n "):Je[Qe]!==void 0?wt((de+Je[Qe]).slice(-10)+" 00000 n "):wt("0000000000 00000 n ")},Wu=k.__private__.buildDocument=function(){Nt(),Ht(dt),Zr.publish("buildDocument"),eu(),Lr(),jo(),Jl(),x!==null&&Bo(),Nd(),Ku();var de=ut;return qo(),Sf(),wt("startxref"),wt(""+de),wt("%%EOF"),Ht(Dt[Ie]),dt.join(`
`)},yh=k.__private__.getBlob=function(de){return new Blob([Ca(de)],{type:"application/pdf"})},rl=k.output=k.__private__.output=wu(function(de,Qe){switch(typeof(Qe=Qe||{})=="string"?Qe={filename:Qe}:Qe.filename=Qe.filename||"generated.pdf",de){case void 0:return Wu();case"save":k.save(Qe.filename);break;case"arraybuffer":return Ca(Wu());case"blob":return yh(Wu());case"bloburi":case"bloburl":if(Qn.URL!==void 0&&typeof Qn.URL.createObjectURL=="function")return Qn.URL&&Qn.URL.createObjectURL(yh(Wu()))||void 0;fo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var It="",Jt=Wu();try{It=QI(Jt)}catch{It=QI(unescape(encodeURIComponent(Jt)))}return"data:application/pdf;filename="+Qe.filename+";base64,"+It;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qn)==="[object Window]"){var pa="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",La=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Qe.pdfObjectUrl&&(pa=Qe.pdfObjectUrl,La="");var ir='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pa+'"'+La+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Qe)+");<\/script></body></html>",Er=Qn.open();return Er!==null&&Er.document.write(ir),Er}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qn)==="[object Window]"){var en='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Qe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Qe.filename+'" width="500px" height="400px" /></body></html>',On=Qn.open();if(On!==null){On.document.write(en);var Fn=this;On.document.documentElement.querySelector("#pdfViewer").onload=function(){On.document.title=Qe.filename,On.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Fn.output("bloburl"))}}return On}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Qe)+'"></iframe></body></html>',zs=Qn.open();if(zs!==null&&(zs.document.write(wi),zs.document.title=Qe.filename),zs||typeof safari>"u")return zs;break;case"datauri":case"dataurl":return Qn.document.location.href=this.output("datauristring",Qe);default:return null}}),zn=function(de){return Array.isArray(ti)===!0&&ti.indexOf(de)>-1};switch(r){case"pt":ra=1;break;case"mm":ra=72/25.4;break;case"cm":ra=72/2.54;break;case"in":ra=72;break;case"px":ra=zn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ra=12;break;case"ex":ra=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ra=r}var go=null;ct(),Oe();var vr=function(de){return x!==null?go.encryptor(de,0):function(Qe){return Qe}},jc=k.__private__.getPageInfo=k.getPageInfo=function(de){if(isNaN(de)||de%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mr[de].objId,pageNumber:de,pageContext:mr[de]}},Sn=k.__private__.getPageInfoByObjId=function(de){if(isNaN(de)||de%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Qe in mr)if(mr[Qe].objId===de)break;return jc(Qe)},Ah=k.__private__.getCurrentPageInfo=k.getCurrentPageInfo=function(){return{objId:mr[Ie].objId,pageNumber:Ie,pageContext:mr[Ie]}};k.addPage=function(){return Go.apply(this,arguments),this},k.setPage=function(){return Ru.apply(this,arguments),Ht.call(this,Dt[Ie]),this},k.insertPage=function(de){return this.addPage(),this.movePage(Ie,de),this},k.movePage=function(de,Qe){var It,Jt;if(de>Qe){It=Dt[de],Jt=mr[de];for(var pa=de;pa>Qe;pa--)Dt[pa]=Dt[pa-1],mr[pa]=mr[pa-1];Dt[Qe]=It,mr[Qe]=Jt,this.setPage(Qe)}else if(de<Qe){It=Dt[de],Jt=mr[de];for(var La=de;La<Qe;La++)Dt[La]=Dt[La+1],mr[La]=mr[La+1];Dt[Qe]=It,mr[Qe]=Jt,this.setPage(Qe)}return this},k.deletePage=function(){return Ql.apply(this,arguments),this},k.__private__.text=k.text=function(de,Qe,It,Jt,pa){var La,ir,Er,en,On,Fn,wi,zs,Ds,io=(Jt=Jt||{}).scope||this;if(typeof de=="number"&&typeof Qe=="number"&&(typeof It=="string"||Array.isArray(It))){var os=It;It=Qe,Qe=de,de=os}if(arguments[3]instanceof Le?(Re("The transform parameter of text() with a Matrix value"),Ds=pa):(Er=arguments[4],en=arguments[5],qs(wi=arguments[3])==="object"&&wi!==null||(typeof Er=="string"&&(en=Er,Er=null),typeof wi=="string"&&(en=wi,wi=null),typeof wi=="number"&&(Er=wi,wi=null),Jt={flags:wi,angle:Er,align:en})),isNaN(Qe)||isNaN(It)||de==null)throw new Error("Invalid arguments passed to jsPDF.text");if(de.length===0)return io;var Dr="",cr=!1,vl=typeof Jt.lineHeightFactor=="number"?Jt.lineHeightFactor:Ki,Nr=io.internal.scaleFactor;function bu(ai){return ai=ai.split("	").join(Array(Jt.TabLen||9).join(" ")),Al(ai,wi)}function nu(ai){for(var li,es=ai.concat(),hs=[],ou=es.length;ou--;)typeof(li=es.shift())=="string"?hs.push(li):Array.isArray(ai)&&(li.length===1||li[1]===void 0&&li[2]===void 0)?hs.push(li[0]):hs.push([li[0],li[1],li[2]]);return hs}function xr(ai,li){var es;if(typeof ai=="string")es=li(ai)[0];else if(Array.isArray(ai)){for(var hs,ou,Kc=ai.concat(),sl=[],lu=Kc.length;lu--;)typeof(hs=Kc.shift())=="string"?sl.push(li(hs)[0]):Array.isArray(hs)&&typeof hs[0]=="string"&&(ou=li(hs[0],hs[1],hs[2]),sl.push([ou[0],ou[1],ou[2]]));es=sl}return es}var _h=!1,iu=!0;if(typeof de=="string")_h=!0;else if(Array.isArray(de)){var vc=de.concat();ir=[];for(var Md,Ms=vc.length;Ms--;)(typeof(Md=vc.shift())!="string"||Array.isArray(Md)&&typeof Md[0]!="string")&&(iu=!1);_h=iu}if(_h===!1)throw new Error('Type of text must be string or Array. "'+de+'" is not recognized.');typeof de=="string"&&(de=de.match(/[\r?\n]/)?de.split(/\r\n|\r|\n/g):[de]);var Si=ar/io.internal.scaleFactor,_c=Si*(vl-1);switch(Jt.baseline){case"bottom":It-=_c;break;case"top":It+=Si-_c;break;case"hanging":It+=Si-2*_c;break;case"middle":It+=Si/2-_c}if((Fn=Jt.maxWidth||0)>0&&(typeof de=="string"?de=io.splitTextToSize(de,Fn):Object.prototype.toString.call(de)==="[object Array]"&&(de=de.reduce(function(ai,li){return ai.concat(io.splitTextToSize(li,Fn))},[]))),La={text:de,x:Qe,y:It,options:Jt,mutex:{pdfEscape:Al,activeFontKey:Oa,fonts:an,activeFontSize:ar}},Zr.publish("preProcessText",La),de=La.text,Er=(Jt=La.options).angle,!(Ds instanceof Le)&&Er&&typeof Er=="number"){Er*=Math.PI/180,Jt.rotationDirection===0&&(Er=-Er),oe===ee.ADVANCED&&(Er=-Er);var Da=Math.cos(Er),Id=Math.sin(Er);Ds=new Le(Da,Id,-Id,Da,0,0)}else Er&&Er instanceof Le&&(Ds=Er);oe!==ee.ADVANCED||Ds||(Ds=yt),(On=Jt.charSpace||tu)!==void 0&&(Dr+=ue(_e(On))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(zs=Jt.horizontalScale)!==void 0&&(Dr+=ue(100*zs)+` Tz
`),Jt.lang;var Js=-1,Ao=Jt.renderingMode!==void 0?Jt.renderingMode:Jt.stroke,Pf=io.internal.getCurrentPageInfo().pageContext;switch(Ao){case 0:case!1:case"fill":Js=0;break;case 1:case!0:case"stroke":Js=1;break;case 2:case"fillThenStroke":Js=2;break;case 3:case"invisible":Js=3;break;case 4:case"fillAndAddForClipping":Js=4;break;case 5:case"strokeAndAddPathForClipping":Js=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Js=6;break;case 7:case"addToPathForClipping":Js=7}var qh=Pf.usedRenderingMode!==void 0?Pf.usedRenderingMode:-1;Js!==-1?Dr+=Js+` Tr
`:qh!==-1&&(Dr+=`0 Tr
`),Js!==-1&&(Pf.usedRenderingMode=Js),en=Jt.align||"left";var vo,js=ar*vl,Dl=io.internal.pageSize.getWidth(),Gc=an[Oa];On=Jt.charSpace||tu,Fn=Jt.maxWidth||0,wi=Object.assign({autoencode:!0,noBOM:!0},Jt.flags);var su=[],wh=function(ai){return io.getStringUnitWidth(ai,{font:Gc,charSpace:On,fontSize:ar,doKerning:!1})*ar/Nr};if(Object.prototype.toString.call(de)==="[object Array]"){var Ml;ir=nu(de),en!=="left"&&(vo=ir.map(wh));var No,Ld=0;if(en==="right"){Qe-=vo[0],de=[],Ms=ir.length;for(var Zc=0;Zc<Ms;Zc++)Zc===0?(No=nl(Qe),Ml=ys(It)):(No=_e(Ld-vo[Zc]),Ml=-js),de.push([ir[Zc],No,Ml]),Ld=vo[Zc]}else if(en==="center"){Qe-=vo[0]/2,de=[],Ms=ir.length;for(var Il=0;Il<Ms;Il++)Il===0?(No=nl(Qe),Ml=ys(It)):(No=_e((Ld-vo[Il])/2),Ml=-js),de.push([ir[Il],No,Ml]),Ld=vo[Il]}else if(en==="left"){de=[],Ms=ir.length;for(var wc=0;wc<Ms;wc++)de.push(ir[wc])}else if(en==="justify"&&Gc.encoding==="Identity-H"){de=[],Ms=ir.length,Fn=Fn!==0?Fn:Dl;for(var xu=0,Qi=0;Qi<Ms;Qi++)if(Ml=Qi===0?ys(It):-js,No=Qi===0?nl(Qe):xu,Qi<Ms-1){var Ef=_e((Fn-vo[Qi])/(ir[Qi].split(" ").length-1)),so=ir[Qi].split(" ");de.push([so[0]+" ",No,Ml]),xu=0;for(var _o=1;_o<so.length;_o++){var Fd=(wh(so[_o-1]+" "+so[_o])-wh(so[_o]))*Nr+Ef;_o==so.length-1?de.push([so[_o],Fd,0]):de.push([so[_o]+" ",Fd,0]),xu-=Fd}}else de.push([ir[Qi],No,Ml]);de.push(["",xu,0])}else{if(en!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(de=[],Ms=ir.length,Fn=Fn!==0?Fn:Dl,Qi=0;Qi<Ms;Qi++)Ml=Qi===0?ys(It):-js,No=Qi===0?nl(Qe):0,Qi<Ms-1?su.push(ue(_e((Fn-vo[Qi])/(ir[Qi].split(" ").length-1)))):su.push(0),de.push([ir[Qi],No,Ml])}}var kd=typeof Jt.R2L=="boolean"?Jt.R2L:Cr;kd===!0&&(de=xr(de,function(ai,li,es){return[ai.split("").reverse().join(""),li,es]})),La={text:de,x:Qe,y:It,options:Jt,mutex:{pdfEscape:Al,activeFontKey:Oa,fonts:an,activeFontSize:ar}},Zr.publish("postProcessText",La),de=La.text,cr=La.mutex.isHex||!1;var oo=an[Oa].encoding;oo!=="WinAnsiEncoding"&&oo!=="StandardEncoding"||(de=xr(de,function(ai,li,es){return[bu(ai),li,es]})),ir=nu(de),de=[];for(var qc,Rc,Pu,Hc=0,Eu=1,$c=Array.isArray(ir[0])?Eu:Hc,Tc="",Xu=function(ai,li,es){var hs="";return es instanceof Le?(es=typeof Jt.angle=="number"?$e(es,new Le(1,0,0,1,ai,li)):$e(new Le(1,0,0,1,ai,li),es),oe===ee.ADVANCED&&(es=$e(new Le(1,0,0,-1,0,0),es)),hs=es.join(" ")+` Tm
`):hs=ue(ai)+" "+ue(li)+` Td
`,hs},Ko=0;Ko<ir.length;Ko++){switch(Tc="",$c){case Eu:Pu=(cr?"<":"(")+ir[Ko][0]+(cr?">":")"),qc=parseFloat(ir[Ko][1]),Rc=parseFloat(ir[Ko][2]);break;case Hc:Pu=(cr?"<":"(")+ir[Ko]+(cr?">":")"),qc=nl(Qe),Rc=ys(It)}su!==void 0&&su[Ko]!==void 0&&(Tc=su[Ko]+` Tw
`),Ko===0?de.push(Tc+Xu(qc,Rc,Ds)+Pu):$c===Hc?de.push(Tc+Pu):$c===Eu&&de.push(Tc+Xu(qc,Rc,Ds)+Pu)}de=$c===Hc?de.join(` Tj
T* `):de.join(` Tj
`),de+=` Tj
`;var As=`BT
/`;return As+=Oa+" "+ar+` Tf
`,As+=ue(ar*vl)+` TL
`,As+=Ji+`
`,As+=Dr,As+=de,wt(As+="ET"),I[Oa]=!0,io};var Nn=k.__private__.clip=k.clip=function(de){return wt(de==="evenodd"?"W*":"W"),this};k.clipEvenOdd=function(){return Nn("evenodd")},k.__private__.discardPath=k.discardPath=function(){return wt("n"),this};var Ks=k.__private__.isValidStyle=function(de){var Qe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(de)!==-1&&(Qe=!0),Qe};k.__private__.setDefaultPathOperation=k.setDefaultPathOperation=function(de){return Ks(de)&&(R=de),this};var mc=k.__private__.getStyle=k.getStyle=function(de){var Qe=R;switch(de){case"D":case"S":Qe="S";break;case"F":Qe="f";break;case"FD":case"DF":Qe="B";break;case"f":case"f*":case"B":case"B*":Qe=de}return Qe},gc=k.close=function(){return wt("h"),this};k.stroke=function(){return wt("S"),this},k.fill=function(de){return er("f",de),this},k.fillEvenOdd=function(de){return er("f*",de),this},k.fillStroke=function(de){return er("B",de),this},k.fillStrokeEvenOdd=function(de){return er("B*",de),this};var er=function(de,Qe){qs(Qe)==="object"?Ws(Qe,de):wt(de)},hn=function(de){de===null||oe===ee.ADVANCED&&de===void 0||(de=mc(de),wt(de))};function bn(de,Qe,It,Jt,pa){var La=new s_(Qe||this.boundingBox,It||this.xStep,Jt||this.yStep,this.gState,pa||this.matrix);La.stream=this.stream;var ir=de+"$$"+this.cloneIndex+++"$$";return At(ir,La),La}var Ws=function(de,Qe){var It=ki[de.key],Jt=Pr[It];if(Jt instanceof cv)wt("q"),wt(Od(Qe)),Jt.gState&&k.setGState(Jt.gState),wt(de.matrix.toString()+" cm"),wt("/"+It+" sh"),wt("Q");else if(Jt instanceof s_){var pa=new Le(1,0,0,-1,0,ru());de.matrix&&(pa=pa.multiply(de.matrix||yt),It=bn.call(Jt,de.key,de.boundingBox,de.xStep,de.yStep,pa).id),wt("q"),wt("/Pattern cs"),wt("/"+It+" scn"),Jt.gState&&k.setGState(Jt.gState),wt(Qe),wt("Q")}},Od=function(de){switch(de){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},An=k.moveTo=function(de,Qe){return wt(ue(_e(de))+" "+ue(Pe(Qe))+" m"),this},Ho=k.lineTo=function(de,Qe){return wt(ue(_e(de))+" "+ue(Pe(Qe))+" l"),this},Tu=k.curveTo=function(de,Qe,It,Jt,pa,La){return wt([ue(_e(de)),ue(Pe(Qe)),ue(_e(It)),ue(Pe(Jt)),ue(_e(pa)),ue(Pe(La)),"c"].join(" ")),this};k.__private__.line=k.line=function(de,Qe,It,Jt,pa){if(isNaN(de)||isNaN(Qe)||isNaN(It)||isNaN(Jt)||!Ks(pa))throw new Error("Invalid arguments passed to jsPDF.line");return oe===ee.COMPAT?this.lines([[It-de,Jt-Qe]],de,Qe,[1,1],pa||"S"):this.lines([[It-de,Jt-Qe]],de,Qe,[1,1]).stroke()},k.__private__.lines=k.lines=function(de,Qe,It,Jt,pa,La){var ir,Er,en,On,Fn,wi,zs,Ds,io,os,Dr,cr;if(typeof de=="number"&&(cr=It,It=Qe,Qe=de,de=cr),Jt=Jt||[1,1],La=La||!1,isNaN(Qe)||isNaN(It)||!Array.isArray(de)||!Array.isArray(Jt)||!Ks(pa)||typeof La!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(An(Qe,It),ir=Jt[0],Er=Jt[1],On=de.length,os=Qe,Dr=It,en=0;en<On;en++)(Fn=de[en]).length===2?(os=Fn[0]*ir+os,Dr=Fn[1]*Er+Dr,Ho(os,Dr)):(wi=Fn[0]*ir+os,zs=Fn[1]*Er+Dr,Ds=Fn[2]*ir+os,io=Fn[3]*Er+Dr,os=Fn[4]*ir+os,Dr=Fn[5]*Er+Dr,Tu(wi,zs,Ds,io,os,Dr));return La&&gc(),hn(pa),this},k.path=function(de){for(var Qe=0;Qe<de.length;Qe++){var It=de[Qe],Jt=It.c;switch(It.op){case"m":An(Jt[0],Jt[1]);break;case"l":Ho(Jt[0],Jt[1]);break;case"c":Tu.apply(this,Jt);break;case"h":gc()}}return this},k.__private__.rect=k.rect=function(de,Qe,It,Jt,pa){if(isNaN(de)||isNaN(Qe)||isNaN(It)||isNaN(Jt)||!Ks(pa))throw new Error("Invalid arguments passed to jsPDF.rect");return oe===ee.COMPAT&&(Jt=-Jt),wt([ue(_e(de)),ue(Pe(Qe)),ue(_e(It)),ue(_e(Jt)),"re"].join(" ")),hn(pa),this},k.__private__.triangle=k.triangle=function(de,Qe,It,Jt,pa,La,ir){if(isNaN(de)||isNaN(Qe)||isNaN(It)||isNaN(Jt)||isNaN(pa)||isNaN(La)||!Ks(ir))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[It-de,Jt-Qe],[pa-It,La-Jt],[de-pa,Qe-La]],de,Qe,[1,1],ir,!0),this},k.__private__.roundedRect=k.roundedRect=function(de,Qe,It,Jt,pa,La,ir){if(isNaN(de)||isNaN(Qe)||isNaN(It)||isNaN(Jt)||isNaN(pa)||isNaN(La)||!Ks(ir))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Er=4/3*(Math.SQRT2-1);return pa=Math.min(pa,.5*It),La=Math.min(La,.5*Jt),this.lines([[It-2*pa,0],[pa*Er,0,pa,La-La*Er,pa,La],[0,Jt-2*La],[0,La*Er,-pa*Er,La,-pa,La],[2*pa-It,0],[-pa*Er,0,-pa,-La*Er,-pa,-La],[0,2*La-Jt],[0,-La*Er,pa*Er,-La,pa,-La]],de+pa,Qe,[1,1],ir,!0),this},k.__private__.ellipse=k.ellipse=function(de,Qe,It,Jt,pa){if(isNaN(de)||isNaN(Qe)||isNaN(It)||isNaN(Jt)||!Ks(pa))throw new Error("Invalid arguments passed to jsPDF.ellipse");var La=4/3*(Math.SQRT2-1)*It,ir=4/3*(Math.SQRT2-1)*Jt;return An(de+It,Qe),Tu(de+It,Qe-ir,de+La,Qe-Jt,de,Qe-Jt),Tu(de-La,Qe-Jt,de-It,Qe-ir,de-It,Qe),Tu(de-It,Qe+ir,de-La,Qe+Jt,de,Qe+Jt),Tu(de+La,Qe+Jt,de+It,Qe+ir,de+It,Qe),hn(pa),this},k.__private__.circle=k.circle=function(de,Qe,It,Jt){if(isNaN(de)||isNaN(Qe)||isNaN(It)||!Ks(Jt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(de,Qe,It,It,Jt)},k.setFont=function(de,Qe,It){return It&&(Qe=ge(Qe,It)),Oa=Zo(de,Qe,{disableWarning:!1}),this};var Os=k.__private__.getFont=k.getFont=function(){return an[Zo.apply(k,arguments)]};k.__private__.getFontList=k.getFontList=function(){var de,Qe,It={};for(de in dn)if(dn.hasOwnProperty(de))for(Qe in It[de]=[],dn[de])dn[de].hasOwnProperty(Qe)&&It[de].push(Qe);return It},k.addFont=function(de,Qe,It,Jt,pa){var La=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&La.indexOf(arguments[3])!==-1?pa=arguments[3]:arguments[3]&&La.indexOf(arguments[3])==-1&&(It=ge(It,Jt)),pa=pa||"Identity-H",Uc.call(this,de,Qe,It,pa)};var Ki,Mi=t.lineWidth||.200025,yo=k.__private__.getLineWidth=k.getLineWidth=function(){return Mi},Vd=k.__private__.setLineWidth=k.setLineWidth=function(de){return Mi=de,wt(ue(_e(de))+" w"),this};k.__private__.setLineDash=Wn.API.setLineDash=Wn.API.setLineDashPattern=function(de,Qe){if(de=de||[],Qe=Qe||0,isNaN(Qe)||!Array.isArray(de))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return de=de.map(function(It){return ue(_e(It))}).join(" "),Qe=ue(_e(Qe)),wt("["+de+"] "+Qe+" d"),this};var vh=k.__private__.getLineHeight=k.getLineHeight=function(){return ar*Ki};k.__private__.getLineHeight=k.getLineHeight=function(){return ar*Ki};var yc=k.__private__.setLineHeightFactor=k.setLineHeightFactor=function(de){return typeof(de=de||1.15)=="number"&&(Ki=de),this},Ac=k.__private__.getLineHeightFactor=k.getLineHeightFactor=function(){return Ki};yc(t.lineHeight);var nl=k.__private__.getHorizontalCoordinate=function(de){return _e(de)},ys=k.__private__.getVerticalCoordinate=function(de){return oe===ee.ADVANCED?de:mr[Ie].mediaBox.topRightY-mr[Ie].mediaBox.bottomLeftY-_e(de)},Yu=k.__private__.getHorizontalCoordinateString=k.getHorizontalCoordinateString=function(de){return ue(nl(de))},Vs=k.__private__.getVerticalCoordinateString=k.getVerticalCoordinateString=function(de){return ue(ys(de))},zl=t.strokeColor||"0 G";k.__private__.getStrokeColor=k.getDrawColor=function(){return Sa(zl)},k.__private__.setStrokeColor=k.setDrawColor=function(de,Qe,It,Jt){return zl=Fa({ch1:de,ch2:Qe,ch3:It,ch4:Jt,pdfColorType:"draw",precision:2}),wt(zl),this};var il=t.fillColor||"0 g";k.__private__.getFillColor=k.getFillColor=function(){return Sa(il)},k.__private__.setFillColor=k.setFillColor=function(de,Qe,It,Jt){return il=Fa({ch1:de,ch2:Qe,ch3:It,ch4:Jt,pdfColorType:"fill",precision:2}),wt(il),this};var Ji=t.textColor||"0 g",Ys=k.__private__.getTextColor=k.getTextColor=function(){return Sa(Ji)};k.__private__.setTextColor=k.setTextColor=function(de,Qe,It,Jt){return Ji=Fa({ch1:de,ch2:Qe,ch3:It,ch4:Jt,pdfColorType:"text",precision:3}),this};var tu=t.charSpace,ds=k.__private__.getCharSpace=k.getCharSpace=function(){return parseFloat(tu||0)};k.__private__.setCharSpace=k.setCharSpace=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tu=de,this};var Zh=0;k.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},k.__private__.setLineCap=k.setLineCap=function(de){var Qe=k.CapJoinStyles[de];if(Qe===void 0)throw new Error("Line cap style of '"+de+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zh=Qe,wt(Qe+" J"),this};var $o=0;k.__private__.setLineJoin=k.setLineJoin=function(de){var Qe=k.CapJoinStyles[de];if(Qe===void 0)throw new Error("Line join style of '"+de+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $o=Qe,wt(Qe+" j"),this},k.__private__.setLineMiterLimit=k.__private__.setMiterLimit=k.setLineMiterLimit=k.setMiterLimit=function(de){if(de=de||0,isNaN(de))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return wt(ue(_e(de))+" M"),this},k.GState=p2,k.setGState=function(de){(de=typeof de=="string"?gi[oi[de]]:zd(null,de)).equals(Cs)||(wt("/"+de.id+" gs"),Cs=de)};var zd=function(de,Qe){if(!de||!oi[de]){var It=!1;for(var Jt in gi)if(gi.hasOwnProperty(Jt)&&gi[Jt].equals(Qe)){It=!0;break}if(It)Qe=gi[Jt];else{var pa="GS"+(Object.keys(gi).length+1).toString(10);gi[pa]=Qe,Qe.id=pa}return de&&(oi[de]=Qe.id),Zr.publish("addGState",Qe),Qe}};k.addGState=function(de,Qe){return zd(de,Qe),this},k.saveGraphicsState=function(){return wt("q"),Yr.push({key:Oa,size:ar,color:Ji}),this},k.restoreGraphicsState=function(){wt("Q");var de=Yr.pop();return Oa=de.key,ar=de.size,Ji=de.color,Cs=null,this},k.setCurrentTransformationMatrix=function(de){return wt(de.toString()+" cm"),this},k.comment=function(de){return wt("#"+de),this};var Cu=function(de,Qe){var It=de||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return It},set:function(La){isNaN(La)||(It=parseFloat(La))}});var Jt=Qe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Jt},set:function(La){isNaN(La)||(Jt=parseFloat(La))}});var pa="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pa},set:function(La){pa=La.toString()}}),this},Su=function(de,Qe,It,Jt){Cu.call(this,de,Qe),this.type="rect";var pa=It||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pa},set:function(ir){isNaN(ir)||(pa=parseFloat(ir))}});var La=Jt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return La},set:function(ir){isNaN(ir)||(La=parseFloat(ir))}}),this},lp=function(){this.page=Aa,this.currentPage=Ie,this.pages=Dt.slice(0),this.pagesContext=mr.slice(0),this.x=ja,this.y=gr,this.matrix=Tn,this.width=Xs(Ie),this.height=ru(Ie),this.outputDestination=fa,this.id="",this.objectNumber=-1};lp.prototype.restore=function(){Aa=this.page,Ie=this.currentPage,mr=this.pagesContext,Dt=this.pages,ja=this.x,gr=this.y,Tn=this.matrix,bf(Ie,this.width),xf(Ie,this.height),fa=this.outputDestination};var au=function(de,Qe,It,Jt,pa){xe.push(new lp),Aa=Ie=0,Dt=[],ja=de,gr=Qe,Tn=pa,no([It,Jt])},tg=function(de){if(Zt[de])xe.pop().restore();else{var Qe=new lp,It="Xo"+(Object.keys(Rn).length+1).toString(10);Qe.id=It,Zt[de]=It,Rn[It]=Qe,Zr.publish("addFormObject",Qe),xe.pop().restore()}};for(var Dd in k.beginFormObject=function(de,Qe,It,Jt,pa){return au(de,Qe,It,Jt,pa),this},k.endFormObject=function(de){return tg(de),this},k.doFormObject=function(de,Qe){var It=Rn[Zt[de]];return wt("q"),wt(Qe.toString()+" cm"),wt("/"+It.id+" Do"),wt("Q"),this},k.getFormObject=function(de){var Qe=Rn[Zt[de]];return{x:Qe.x,y:Qe.y,width:Qe.width,height:Qe.height,matrix:Qe.matrix}},k.save=function(de,Qe){return de=de||"generated.pdf",(Qe=Qe||{}).returnPromise=Qe.returnPromise||!1,Qe.returnPromise===!1?(lv(yh(Wu()),de),typeof lv.unload=="function"&&Qn.setTimeout&&setTimeout(lv.unload,911),this):new Promise(function(It,Jt){try{var pa=lv(yh(Wu()),de);typeof lv.unload=="function"&&Qn.setTimeout&&setTimeout(lv.unload,911),It(pa)}catch(La){Jt(La.message)}})},Wn.API)Wn.API.hasOwnProperty(Dd)&&(Dd==="events"&&Wn.API.events.length?function(de,Qe){var It,Jt,pa;for(pa=Qe.length-1;pa!==-1;pa--)It=Qe[pa][0],Jt=Qe[pa][1],de.subscribe.apply(de,[It].concat(typeof Jt=="function"?[Jt]:Jt))}(Zr,Wn.API.events):k[Dd]=Wn.API[Dd]);var Xs=k.getPageWidth=function(de){return(mr[de=de||Ie].mediaBox.topRightX-mr[de].mediaBox.bottomLeftX)/ra},bf=k.setPageWidth=function(de,Qe){mr[de].mediaBox.topRightX=Qe*ra+mr[de].mediaBox.bottomLeftX},ru=k.getPageHeight=function(de){return(mr[de=de||Ie].mediaBox.topRightY-mr[de].mediaBox.bottomLeftY)/ra},xf=k.setPageHeight=function(de,Qe){mr[de].mediaBox.topRightY=Qe*ra+mr[de].mediaBox.bottomLeftY};return k.internal={pdfEscape:Al,getStyle:mc,getFont:Os,getFontSize:or,getCharSpace:ds,getTextColor:Ys,getLineHeight:vh,getLineHeightFactor:Ac,getLineWidth:yo,write:fr,getHorizontalCoordinate:nl,getVerticalCoordinate:ys,getCoordinateString:Yu,getVerticalCoordinateString:Vs,collections:{},newObject:bt,newAdditionalObject:Wt,newObjectDeferred:Gt,newObjectDeferredBegin:Et,getFilters:qa,putStream:br,events:Zr,scaleFactor:ra,pageSize:{getWidth:function(){return Xs(Ie)},setWidth:function(de){bf(Ie,de)},getHeight:function(){return ru(Ie)},setHeight:function(de){xf(Ie,de)}},encryptionOptions:x,encryption:go,getEncryptor:vr,output:rl,getNumberOfPages:mo,pages:Dt,out:wt,f2:Ne,f3:ne,getPageInfo:jc,getPageInfoByObjId:Sn,getCurrentPageInfo:Ah,getPDFVersion:$,Point:Cu,Rectangle:Su,Matrix:Le,hasHotfix:zn},Object.defineProperty(k.internal.pageSize,"width",{get:function(){return Xs(Ie)},set:function(de){bf(Ie,de)},enumerable:!0,configurable:!0}),Object.defineProperty(k.internal.pageSize,"height",{get:function(){return ru(Ie)},set:function(de){xf(Ie,de)},enumerable:!0,configurable:!0}),gh.call(k,za),Oa="F1",Go(i,a),Zr.publish("initialized"),k}Y0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Y0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Y0.prototype.hexToBytes=function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(String.fromCharCode(parseInt(t.substr(a,2),16)));return e.join("")},Y0.prototype.processOwnerPassword=function(t,e){return t3(e3(e).substr(0,5),t)},Y0.prototype.encryptor=function(t,e){var a=e3(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return t3(a,r)}},p2.prototype.equals=function(t){var e,a="id,objectNumber,equals";if(!t||qs(t)!==qs(this))return!1;var r=0;for(e in this)if(!(a.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&a.indexOf(e)<0&&r--;return r===0},Wn.API={events:[]},Wn.version="3.0.1";var Pl=Wn.API,W4=1,t0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},q0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pi=function(t){return t.toFixed(2)},Py=function(t){return t.toFixed(5)};Pl.__acroform__={};var Gh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Jq=function(t){return t*W4},Om=function(t){var e=new Vte,a=un.internal.getHeight(t)||0,r=un.internal.getWidth(t)||0;return e.BBox=[0,0,Number(pi(r)),Number(pi(a))],e},TOe=Pl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},COe=Pl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},SOe=Pl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Kl=Pl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SOe(t,e-1)},Wl=Pl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return TOe(t,e-1)},Yl=Pl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return COe(t,e-1)},bOe=Pl.__acroform__.calculateCoordinates=function(t,e){var a=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],l=t[1],c=t[2],n=t[3],v={};return v.lowerLeft_X=a(i)||0,v.lowerLeft_Y=r(l+n)||0,v.upperRight_X=a(i+c)||0,v.upperRight_Y=r(l)||0,[Number(pi(v.lowerLeft_X)),Number(pi(v.lowerLeft_Y)),Number(pi(v.upperRight_X)),Number(pi(v.upperRight_Y))]},xOe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],a=t._V||t.DV,r=a3(t,a),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+pi(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=Om(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},a3=function(t,e){var a=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(ne){return ne.split(`
`)}):i.map(function(ne){return[ne]});var l=a,c=un.internal.getHeight(t)||0;c=c<0?-c:c;var n=un.internal.getWidth(t)||0;n=n<0?-n:n;var v=function(ne,_e,ke){if(ne+1<i.length){var Pe=_e+" "+i[ne+1][0];return ub(Pe,t,ke).width<=n-4}return!1};l++;e:for(;l>0;){e="",l--;var R,x,N=ub("3",t,l).height,I=t.multiline?c-l:(c-N)/2,k=I+=2,Z=0,$=0,H=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+ub(e,t,l=12).width+", FieldWidth:"+n+`
`;break}for(var W="",ee=0,oe=0;oe<i.length;oe++)if(i.hasOwnProperty(oe)){var pe=!1;if(i[oe].length!==1&&H!==i[oe].length-1){if((N+2)*(ee+2)+2>c)continue e;W+=i[oe][H],pe=!0,$=oe,oe--}else{W=(W+=i[oe][H]+" ").substr(W.length-1)==" "?W.substr(0,W.length-1):W;var le=parseInt(oe),ge=v(le,W,l),ue=oe>=i.length-1;if(ge&&!ue){W+=" ",H=0;continue}if(ge||ue){if(ue)$=le;else if(t.multiline&&(N+2)*(ee+2)+2>c)continue e}else{if(!t.multiline||(N+2)*(ee+2)+2>c)continue e;$=le}}for(var Re="",we=Z;we<=$;we++){var Ne=i[we];if(t.multiline){if(we===$){Re+=Ne[H]+" ",H=(H+1)%Ne.length;continue}if(we===Z){Re+=Ne[Ne.length-1]+" ";continue}}Re+=Ne[0]+" "}switch(Re=Re.substr(Re.length-1)==" "?Re.substr(0,Re.length-1):Re,x=ub(Re,t,l).width,t.textAlign){case"right":R=n-x-2;break;case"center":R=(n-x)/2;break;case"left":default:R=2}e+=pi(R)+" "+pi(k)+` Td
`,e+="("+t0(Re)+`) Tj
`,e+=-pi(R)+` 0 Td
`,k=-(l+2),x=0,Z=pe?$:$+1,ee++,W=""}break}return r.text=e,r.fontSize=l,r},ub=function(t,e,a){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:i}},POe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EOe=function(t,e){var a={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(a)},NOe=function(t,e){for(var a in t)if(t.hasOwnProperty(a)){var r=a,i=t[a];e.internal.newObjectDeferredBegin(i.objId,!0),qs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},OOe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(em.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(POe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");W4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new zte,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var l=r[i];l.objId=void 0,l.hasAnnotation&&EOe(l,a)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(a){(function(r,i){var l=!r;for(var c in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var n=r[c],v=[],R=n.Rect;if(n.Rect&&(n.Rect=bOe(n.Rect,i)),i.internal.newObjectDeferredBegin(n.objId,!0),n.DA=un.createDefaultAppearanceStream(n),qs(n)==="object"&&typeof n.getKeyValueListForStream=="function"&&(v=n.getKeyValueListForStream()),n.Rect=R,n.hasAppearanceStream&&!n.appearanceStreamContent){var x=xOe(n);v.push({key:"AP",value:"<</N "+x+">>"}),i.internal.acroformPlugin.xForms.push(x)}if(n.appearanceStreamContent){var N="";for(var I in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(I)){var k=n.appearanceStreamContent[I];if(N+="/"+I+" ",N+="<<",Object.keys(k).length>=1||Array.isArray(k)){for(var c in k)if(k.hasOwnProperty(c)){var Z=k[c];typeof Z=="function"&&(Z=Z.call(i,n)),N+="/"+c+" "+Z+" ",i.internal.acroformPlugin.xForms.indexOf(Z)>=0||i.internal.acroformPlugin.xForms.push(Z)}}else typeof(Z=k)=="function"&&(Z=Z.call(i,n)),N+="/"+c+" "+Z,i.internal.acroformPlugin.xForms.indexOf(Z)>=0||i.internal.acroformPlugin.xForms.push(Z);N+=">>"}v.push({key:"AP",value:`<<
`+N+">>"})}i.internal.putStream({additionalKeyValues:v,objectId:n.objId}),i.internal.out("endobj")}l&&NOe(i.internal.acroformPlugin.xForms,i)})(a,t)}),t.internal.acroformPlugin.isInitialized=!0}},Ote=Pl.__acroform__.arrayToPdfArray=function(t,e,a){var r=function(c){return c};if(Array.isArray(t)){for(var i="[",l=0;l<t.length;l++)switch(l!==0&&(i+=" "),qs(t[l])){case"boolean":case"number":case"object":i+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&a&&(r=a.internal.getEncryptor(e)),i+="("+t0(r(t[l].toString()))+")"):i+=t[l].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},R5=function(t,e,a){var r=function(i){return i};return e!==void 0&&a&&(r=a.internal.getEncryptor(e)),(t=t||"").toString(),t="("+t0(r(t))+")"},Fm=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Fm.prototype.toString=function(){return this.objId+" 0 R"},Fm.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Fm.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var a in e)if(Object.getOwnPropertyDescriptor(this,e[a]).configurable===!1){var r=e[a],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Ote(i,this.objId,this.scope)}):i instanceof Fm?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Vte=function(){Fm.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){t=a.trim()},get:function(){return t||null}})};Gh(Vte,Fm);var zte=function(){Fm.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+t0(a(t))+")"}},set:function(a){t=a}})};Gh(zte,Fm);var em=function t(){Fm.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute F supplied.');e=W}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Kl(e,3)},set:function(W){W?this.F=Wl(e,3):this.F=Yl(e,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute Ff supplied.');a=W}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(W){r=W!==void 0?W:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(W){r[0]=W}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(W){r[1]=W}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(W){r[2]=W}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(W){r[3]=W}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(W){switch(W){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=W;break;default:throw new Error('Invalid value "'+W+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof m2)return;l="FieldObject"+t.FieldNum++}var W=function(ee){return ee};return this.scope&&(W=this.scope.internal.getEncryptor(this.objId)),"("+t0(W(l))+")"},set:function(W){l=W.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(W){l=W}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(W){c=W}});var n="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return n},set:function(W){n=W}});var v=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return v},set:function(W){v=W}});var R=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return R===void 0?50/W4:R},set:function(W){R=W}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(W){x=W}});var N="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!N||this instanceof m2||this instanceof bv))return R5(N,this.objId,this.scope)},set:function(W){W=W.toString(),N=W}});var I=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(I)return this instanceof uc?I:R5(I,this.objId,this.scope)},set:function(W){W=W.toString(),I=this instanceof uc?W:W.substr(0,1)==="("?q0(W.substr(1,W.length-2)):q0(W)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof uc?q0(I.substr(1,I.length-1)):I},set:function(W){W=W.toString(),I=this instanceof uc?"/"+W:W}});var k=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(k)return k},set:function(W){this.V=W}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(k)return this instanceof uc?k:R5(k,this.objId,this.scope)},set:function(W){W=W.toString(),k=this instanceof uc?W:W.substr(0,1)==="("?q0(W.substr(1,W.length-2)):q0(W)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof uc?q0(k.substr(1,k.length-1)):k},set:function(W){W=W.toString(),k=this instanceof uc?"/"+W:W}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Z,$=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return $},set:function(W){W=!!W,$=W}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Z)return Z},set:function(W){Z=W}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,1)},set:function(W){W?this.Ff=Wl(this.Ff,1):this.Ff=Yl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,2)},set:function(W){W?this.Ff=Wl(this.Ff,2):this.Ff=Yl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,3)},set:function(W){W?this.Ff=Wl(this.Ff,3):this.Ff=Yl(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(W){if([0,1,2].indexOf(W)===-1)throw new Error('Invalid value "'+W+'" for attribute Q supplied.');H=W}}),Object.defineProperty(this,"textAlign",{get:function(){var W;switch(H){case 0:default:W="left";break;case 1:W="center";break;case 2:W="right"}return W},configurable:!0,enumerable:!0,set:function(W){switch(W){case"right":case 2:H=2;break;case"center":case 1:H=1;break;case"left":case 0:default:H=0}}})};Gh(em,Fm);var A_=function(){em.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){t=a}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ote(e,this.objId,this.scope)},set:function(a){var r,i;i=[],typeof(r=a)=="string"&&(i=function(l,c,n){n||(n=1);for(var v,R=[];v=c.exec(l);)R.push(v[n]);return R}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(a){e=a,this.sort&&e.sort()},this.addOption=function(a){a=(a=a||"").toString(),e.push(a),this.sort&&e.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();e.indexOf(a)!==-1&&(e.splice(e.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,18)},set:function(a){a?this.Ff=Wl(this.Ff,18):this.Ff=Yl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Wl(this.Ff,19):this.Ff=Yl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,20)},set:function(a){a?(this.Ff=Wl(this.Ff,20),e.sort()):this.Ff=Yl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,22)},set:function(a){a?this.Ff=Wl(this.Ff,22):this.Ff=Yl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,23)},set:function(a){a?this.Ff=Wl(this.Ff,23):this.Ff=Yl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,27)},set:function(a){a?this.Ff=Wl(this.Ff,27):this.Ff=Yl(this.Ff,27)}}),this.hasAppearanceStream=!1};Gh(A_,em);var v_=function(){A_.call(this),this.fontName="helvetica",this.combo=!1};Gh(v_,A_);var __=function(){v_.call(this),this.combo=!0};Gh(__,v_);var Ob=function(){__.call(this),this.edit=!0};Gh(Ob,__);var uc=function(){em.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,15)},set:function(a){a?this.Ff=Wl(this.Ff,15):this.Ff=Yl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,16)},set:function(a){a?this.Ff=Wl(this.Ff,16):this.Ff=Yl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,17)},set:function(a){a?this.Ff=Wl(this.Ff,17):this.Ff=Yl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,26)},set:function(a){a?this.Ff=Wl(this.Ff,26):this.Ff=Yl(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+t0(a(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(a){qs(a)==="object"&&(e=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(a){typeof a=="string"&&(e.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}})};Gh(uc,em);var Vb=function(){uc.call(this),this.pushButton=!0};Gh(Vb,uc);var w_=function(){uc.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Gh(w_,uc);var m2=function(){var t,e;em.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(n){return n};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),r)c.push("/"+l+" ("+t0(i(r[l]))+")");return c.push(">>"),c.join(`
`)},set:function(i){qs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(i){a=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(i){a="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=un.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Gh(m2,em),w_.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var a=this.Kids[e];a.appearanceStreamContent=t.createAppearanceStream(a.optionName),a.caption=t.getCA()}},w_.prototype.createOption=function(t){var e=new m2;return e.Parent=this,e.optionName=t,this.Kids.push(e),VOe.call(this.scope,e),e};var zb=function(){uc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=un.CheckBox.createAppearanceStream()};Gh(zb,uc);var bv=function(){em.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,13)},set:function(e){e?this.Ff=Wl(this.Ff,13):this.Ff=Yl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,21)},set:function(e){e?this.Ff=Wl(this.Ff,21):this.Ff=Yl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,23)},set:function(e){e?this.Ff=Wl(this.Ff,23):this.Ff=Yl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,24)},set:function(e){e?this.Ff=Wl(this.Ff,24):this.Ff=Yl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,25)},set:function(e){e?this.Ff=Wl(this.Ff,25):this.Ff=Yl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,26)},set:function(e){e?this.Ff=Wl(this.Ff,26):this.Ff=Yl(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Gh(bv,em);var Db=function(){bv.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Kl(this.Ff,14)},set:function(t){t?this.Ff=Wl(this.Ff,14):this.Ff=Yl(this.Ff,14)}}),this.password=!0};Gh(Db,bv);var un={CheckBox:{createAppearanceStream:function(){return{N:{On:un.CheckBox.YesNormal},D:{On:un.CheckBox.YesPushDown,Off:un.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Om(t);e.scope=t.scope;var a=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),l=a3(t,t.caption);return a.push("0.749023 g"),a.push("0 0 "+pi(un.internal.getWidth(t))+" "+pi(un.internal.getHeight(t))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+pi(l.fontSize)+" Tf "+i),a.push("BT"),a.push(l.text),a.push("ET"),a.push("Q"),a.push("EMC"),e.stream=a.join(`
`),e},YesNormal:function(t){var e=Om(t);e.scope=t.scope;var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],l=un.internal.getHeight(t),c=un.internal.getWidth(t),n=a3(t,t.caption);return i.push("1 g"),i.push("0 0 "+pi(c)+" "+pi(l)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+pi(c-1)+" "+pi(l-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+a+" "+pi(n.fontSize)+" Tf "+r),i.push(n.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Om(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+pi(un.internal.getWidth(t))+" "+pi(un.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:un.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=un.RadioButton.Circle.YesNormal,e.D[t]=un.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Om(t);e.scope=t.scope;var a=[],r=un.internal.getWidth(t)<=un.internal.getHeight(t)?un.internal.getWidth(t)/4:un.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=un.internal.Bezier_C,l=Number((r*i).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+Py(un.internal.getWidth(t)/2)+" "+Py(un.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=Om(t);e.scope=t.scope;var a=[],r=un.internal.getWidth(t)<=un.internal.getHeight(t)?un.internal.getWidth(t)/4:un.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*un.internal.Bezier_C).toFixed(5)),c=Number((r*un.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Py(un.internal.getWidth(t)/2)+" "+Py(un.internal.getHeight(t)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),a.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),a.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),a.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+Py(un.internal.getWidth(t)/2)+" "+Py(un.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),a.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),a.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),a.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Om(t);e.scope=t.scope;var a=[],r=un.internal.getWidth(t)<=un.internal.getHeight(t)?un.internal.getWidth(t)/4:un.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*un.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Py(un.internal.getWidth(t)/2)+" "+Py(un.internal.getHeight(t)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),a.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),a.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),a.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:un.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=un.RadioButton.Cross.YesNormal,e.D[t]=un.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Om(t);e.scope=t.scope;var a=[],r=un.internal.calculateCross(t);return a.push("q"),a.push("1 1 "+pi(un.internal.getWidth(t)-2)+" "+pi(un.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(pi(r.x1.x)+" "+pi(r.x1.y)+" m"),a.push(pi(r.x2.x)+" "+pi(r.x2.y)+" l"),a.push(pi(r.x4.x)+" "+pi(r.x4.y)+" m"),a.push(pi(r.x3.x)+" "+pi(r.x3.y)+" l"),a.push("s"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=Om(t);e.scope=t.scope;var a=un.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+pi(un.internal.getWidth(t))+" "+pi(un.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+pi(un.internal.getWidth(t)-2)+" "+pi(un.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(pi(a.x1.x)+" "+pi(a.x1.y)+" m"),r.push(pi(a.x2.x)+" "+pi(a.x2.y)+" l"),r.push(pi(a.x4.x)+" "+pi(a.x4.y)+" m"),r.push(pi(a.x3.x)+" "+pi(a.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Om(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+pi(un.internal.getWidth(t))+" "+pi(un.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+a}};un.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=un.internal.getWidth(t),a=un.internal.getHeight(t),r=Math.min(e,a);return{x1:{x:(e-r)/2,y:(a-r)/2+r},x2:{x:(e-r)/2+r,y:(a-r)/2},x3:{x:(e-r)/2,y:(a-r)/2},x4:{x:(e-r)/2+r,y:(a-r)/2+r}}}},un.internal.getWidth=function(t){var e=0;return qs(t)==="object"&&(e=Jq(t.Rect[2])),e},un.internal.getHeight=function(t){var e=0;return qs(t)==="object"&&(e=Jq(t.Rect[3])),e};var VOe=Pl.addField=function(t){if(OOe(this,t),!(t instanceof em))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Pl.AcroFormChoiceField=A_,Pl.AcroFormListBox=v_,Pl.AcroFormComboBox=__,Pl.AcroFormEditBox=Ob,Pl.AcroFormButton=uc,Pl.AcroFormPushButton=Vb,Pl.AcroFormRadioButton=w_,Pl.AcroFormCheckBox=zb,Pl.AcroFormTextField=bv,Pl.AcroFormPasswordField=Db,Pl.AcroFormAppearance=un,Pl.AcroForm={ChoiceField:A_,ListBox:v_,ComboBox:__,EditBox:Ob,Button:uc,PushButton:Vb,RadioButton:w_,CheckBox:zb,TextField:bv,PasswordField:Db,Appearance:un},Wn.AcroForm={ChoiceField:A_,ListBox:v_,ComboBox:__,EditBox:Ob,Button:uc,PushButton:Vb,RadioButton:w_,CheckBox:zb,TextField:bv,PasswordField:Db,Appearance:un};Wn.AcroForm;function Dte(t){return t.reduce(function(e,a,r){return e[a]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(ne,_e){var ke,Pe,Ee,De,qe,Oe=e;if((_e=_e||e)==="RGBA"||ne.data!==void 0&&ne.data instanceof Uint8ClampedArray&&"height"in ne&&"width"in ne)return"RGBA";if(ge(ne))for(qe in a)for(Ee=a[qe],ke=0;ke<Ee.length;ke+=1){for(De=!0,Pe=0;Pe<Ee[ke].length;Pe+=1)if(Ee[ke][Pe]!==void 0&&Ee[ke][Pe]!==ne[Pe]){De=!1;break}if(De===!0){Oe=qe;break}}else for(qe in a)for(Ee=a[qe],ke=0;ke<Ee.length;ke+=1){for(De=!0,Pe=0;Pe<Ee[ke].length;Pe+=1)if(Ee[ke][Pe]!==void 0&&Ee[ke][Pe]!==ne.charCodeAt(Pe)){De=!1;break}if(De===!0){Oe=qe;break}}return Oe===e&&_e!==e&&(Oe=_e),Oe},i=function ne(_e){for(var ke=this.internal.write,Pe=this.internal.putStream,Ee=(0,this.internal.getFilters)();Ee.indexOf("FlateEncode")!==-1;)Ee.splice(Ee.indexOf("FlateEncode"),1);_e.objectId=this.internal.newObject();var De=[];if(De.push({key:"Type",value:"/XObject"}),De.push({key:"Subtype",value:"/Image"}),De.push({key:"Width",value:_e.width}),De.push({key:"Height",value:_e.height}),_e.colorSpace===H.INDEXED?De.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_e.palette.length/3-1)+" "+("sMask"in _e&&_e.sMask!==void 0?_e.objectId+2:_e.objectId+1)+" 0 R]"}):(De.push({key:"ColorSpace",value:"/"+_e.colorSpace}),_e.colorSpace===H.DEVICE_CMYK&&De.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),De.push({key:"BitsPerComponent",value:_e.bitsPerComponent}),"decodeParameters"in _e&&_e.decodeParameters!==void 0&&De.push({key:"DecodeParms",value:"<<"+_e.decodeParameters+">>"}),"transparency"in _e&&Array.isArray(_e.transparency)){for(var qe="",Oe=0,He=_e.transparency.length;Oe<He;Oe++)qe+=_e.transparency[Oe]+" "+_e.transparency[Oe]+" ";De.push({key:"Mask",value:"["+qe+"]"})}_e.sMask!==void 0&&De.push({key:"SMask",value:_e.objectId+1+" 0 R"});var Ue=_e.filter!==void 0?["/"+_e.filter]:void 0;if(Pe({data:_e.data,additionalKeyValues:De,alreadyAppliedFilters:Ue,objectId:_e.objectId}),ke("endobj"),"sMask"in _e&&_e.sMask!==void 0){var ct="/Predictor "+_e.predictor+" /Colors 1 /BitsPerComponent "+_e.bitsPerComponent+" /Columns "+_e.width,Se={width:_e.width,height:_e.height,colorSpace:"DeviceGray",bitsPerComponent:_e.bitsPerComponent,decodeParameters:ct,data:_e.sMask};"filter"in _e&&(Se.filter=_e.filter),ne.call(this,Se)}if(_e.colorSpace===H.INDEXED){var Ie=this.internal.newObject();Pe({data:Re(new Uint8Array(_e.palette)),objectId:Ie}),ke("endobj")}},l=function(){var ne=this.internal.collections.addImage_images;for(var _e in ne)i.call(this,ne[_e])},c=function(){var ne,_e=this.internal.collections.addImage_images,ke=this.internal.write;for(var Pe in _e)ke("/I"+(ne=_e[Pe]).index,ne.objectId,"0","R")},n=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},v=function(){var ne=this.internal.collections.addImage_images;return n.call(this),ne},R=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(ne){return typeof t["process"+ne.toUpperCase()]=="function"},N=function(ne){return qs(ne)==="object"&&ne.nodeType===1},I=function(ne,_e){if(ne.nodeName==="IMG"&&ne.hasAttribute("src")){var ke=""+ne.getAttribute("src");if(ke.indexOf("data:image/")===0)return VR(unescape(ke).split("base64,").pop());var Pe=t.loadFile(ke,!0);if(Pe!==void 0)return Pe}if(ne.nodeName==="CANVAS"){if(ne.width===0||ne.height===0)throw new Error("Given canvas must have data. Canvas width: "+ne.width+", height: "+ne.height);var Ee;switch(_e){case"PNG":Ee="image/png";break;case"WEBP":Ee="image/webp";break;case"JPEG":case"JPG":default:Ee="image/jpeg"}return VR(ne.toDataURL(Ee,1).split("base64,").pop())}},k=function(ne){var _e=this.internal.collections.addImage_images;if(_e){for(var ke in _e)if(ne===_e[ke].alias)return _e[ke]}},Z=function(ne,_e,ke){return ne||_e||(ne=-96,_e=-96),ne<0&&(ne=-1*ke.width*72/ne/this.internal.scaleFactor),_e<0&&(_e=-1*ke.height*72/_e/this.internal.scaleFactor),ne===0&&(ne=_e*ke.width/ke.height),_e===0&&(_e=ne*ke.height/ke.width),[ne,_e]},$=function(ne,_e,ke,Pe,Ee,De){var qe=Z.call(this,ke,Pe,Ee),Oe=this.internal.getCoordinateString,He=this.internal.getVerticalCoordinateString,Ue=v.call(this);if(ke=qe[0],Pe=qe[1],Ue[Ee.index]=Ee,De){De*=Math.PI/180;var ct=Math.cos(De),Se=Math.sin(De),Ie=function(Ze){return Ze.toFixed(4)},je=[Ie(ct),Ie(Se),Ie(-1*Se),Ie(ct),0,0,"cm"]}this.internal.write("q"),De?(this.internal.write([1,"0","0",1,Oe(ne),He(_e+Pe),"cm"].join(" ")),this.internal.write(je.join(" ")),this.internal.write([Oe(ke),"0","0",Oe(Pe),"0","0","cm"].join(" "))):this.internal.write([Oe(ke),"0","0",Oe(Pe),Oe(ne),He(_e+Pe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ee.index+" Do"),this.internal.write("Q")},H=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var W=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ee=t.__addimage__.sHashCode=function(ne){var _e,ke,Pe=0;if(typeof ne=="string")for(ke=ne.length,_e=0;_e<ke;_e++)Pe=(Pe<<5)-Pe+ne.charCodeAt(_e),Pe|=0;else if(ge(ne))for(ke=ne.byteLength/2,_e=0;_e<ke;_e++)Pe=(Pe<<5)-Pe+ne[_e],Pe|=0;return Pe},oe=t.__addimage__.validateStringAsBase64=function(ne){(ne=ne||"").toString().trim();var _e=!0;return ne.length===0&&(_e=!1),ne.length%4!=0&&(_e=!1),/^[A-Za-z0-9+/]+$/.test(ne.substr(0,ne.length-2))===!1&&(_e=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ne.substr(-2))===!1&&(_e=!1),_e},pe=t.__addimage__.extractImageFromDataUrl=function(ne){if(ne==null||!(ne=ne.trim()).startsWith("data:"))return null;var _e=ne.indexOf(",");return _e<0?null:ne.substring(0,_e).trim().endsWith("base64")?ne.substring(_e+1):null},le=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(ne){return le()&&ne instanceof ArrayBuffer};var ge=t.__addimage__.isArrayBufferView=function(ne){return le()&&typeof Uint32Array<"u"&&(ne instanceof Int8Array||ne instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array)},ue=t.__addimage__.binaryStringToUint8Array=function(ne){for(var _e=ne.length,ke=new Uint8Array(_e),Pe=0;Pe<_e;Pe++)ke[Pe]=ne.charCodeAt(Pe);return ke},Re=t.__addimage__.arrayBufferToBinaryString=function(ne){for(var _e="",ke=ge(ne)?ne:new Uint8Array(ne),Pe=0;Pe<ke.length;Pe+=8192)_e+=String.fromCharCode.apply(null,ke.subarray(Pe,Pe+8192));return _e};t.addImage=function(){var ne,_e,ke,Pe,Ee,De,qe,Oe,He;if(typeof arguments[1]=="number"?(_e=e,ke=arguments[1],Pe=arguments[2],Ee=arguments[3],De=arguments[4],qe=arguments[5],Oe=arguments[6],He=arguments[7]):(_e=arguments[1],ke=arguments[2],Pe=arguments[3],Ee=arguments[4],De=arguments[5],qe=arguments[6],Oe=arguments[7],He=arguments[8]),qs(ne=arguments[0])==="object"&&!N(ne)&&"imageData"in ne){var Ue=ne;ne=Ue.imageData,_e=Ue.format||_e||e,ke=Ue.x||ke||0,Pe=Ue.y||Pe||0,Ee=Ue.w||Ue.width||Ee,De=Ue.h||Ue.height||De,qe=Ue.alias||qe,Oe=Ue.compression||Oe,He=Ue.rotation||Ue.angle||He}var ct=this.internal.getFilters();if(Oe===void 0&&ct.indexOf("FlateEncode")!==-1&&(Oe="SLOW"),isNaN(ke)||isNaN(Pe))throw new Error("Invalid coordinates passed to jsPDF.addImage");n.call(this);var Se=we.call(this,ne,_e,qe,Oe);return $.call(this,ke,Pe,Ee,De,Se,He),this};var we=function(ne,_e,ke,Pe){var Ee,De,qe;if(typeof ne=="string"&&r(ne)===e){ne=unescape(ne);var Oe=Ne(ne,!1);(Oe!==""||(Oe=t.loadFile(ne,!0))!==void 0)&&(ne=Oe)}if(N(ne)&&(ne=I(ne,_e)),_e=r(ne,_e),!x(_e))throw new Error("addImage does not support files of type '"+_e+"', please ensure that a plugin for '"+_e+"' support is added.");if(((qe=ke)==null||qe.length===0)&&(ke=function(He){return typeof He=="string"||ge(He)?ee(He):ge(He.data)?ee(He.data):null}(ne)),(Ee=k.call(this,ke))||(le()&&(ne instanceof Uint8Array||_e==="RGBA"||(De=ne,ne=ue(ne))),Ee=this["process"+_e.toUpperCase()](ne,R.call(this),ke,function(He){return He&&typeof He=="string"&&(He=He.toUpperCase()),He in t.image_compression?He:W.NONE}(Pe),De)),!Ee)throw new Error("An unknown error occurred whilst processing the image.");return Ee},Ne=t.__addimage__.convertBase64ToBinaryString=function(ne,_e){_e=typeof _e!="boolean"||_e;var ke,Pe="";if(typeof ne=="string"){var Ee;ke=(Ee=pe(ne))!==null&&Ee!==void 0?Ee:ne;try{Pe=VR(ke)}catch(De){if(_e)throw oe(ke)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+De.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Pe};t.getImageProperties=function(ne){var _e,ke,Pe="";if(N(ne)&&(ne=I(ne)),typeof ne=="string"&&r(ne)===e&&((Pe=Ne(ne,!1))===""&&(Pe=t.loadFile(ne)||""),ne=Pe),ke=r(ne),!x(ke))throw new Error("addImage does not support files of type '"+ke+"', please ensure that a plugin for '"+ke+"' support is added.");if(!le()||ne instanceof Uint8Array||(ne=ue(ne)),!(_e=this["process"+ke.toUpperCase()](ne)))throw new Error("An unknown error occurred whilst processing the image");return _e.fileType=ke,_e}})(Wn.API),function(t){var e=function(a){if(a!==void 0&&a!="")return!0};Wn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(a){for(var r,i,l,c=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,v=this.internal.getPageInfoByObjId(a.objId),R=a.pageContext.annotations,x=!1,N=0;N<R.length&&!x;N++)switch((r=R[N]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var I=0;I<R.length;I++){r=R[I];var k=this.internal.pdfEscape,Z=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var $=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),W=this.internal.getEncryptor($.objId),ee=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(r.bounds.x)+" "+n(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y)+"] ")+"/Contents ("+k(W(r.contents))+")",l+=" /Popup "+H.objId+" 0 R",l+=" /P "+v.objId+" 0 R",l+=" /T ("+k(W(ee))+") >>",$.content=l;var oe=$.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(r.bounds.x+30)+" "+n(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+n(r.bounds.y)+"] ")+" /Parent "+oe,r.open&&(l+=" /Open true"),l+=" >>",H.content=l,this.internal.write($.objId,"0 R",H.objId,"0 R");break;case"freetext":i="/Rect ["+c(r.bounds.x)+" "+n(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y+r.bounds.h)+"] ";var pe=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+k(Z(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+pe+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var le=this.annotations._nameMap[r.options.name];r.options.pageNumber=le.page,r.options.top=le.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+k(Z(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=n(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},t.link=function(a,r,i,l,c){var n=this.internal.getCurrentPageInfo(),v=this.internal.getCoordinateString,R=this.internal.getVerticalCoordinateString;n.pageContext.annotations.push({finalBounds:{x:v(a),y:R(r),w:v(a+i),h:R(r+l)},options:c,type:"link"})},t.textWithLink=function(a,r,i,l){var c,n,v=this.getTextWidth(a),R=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){n=l.maxWidth;var x=this.splitTextToSize(a,n).length;c=Math.ceil(R*x)}else n=v,c=R;return this.text(a,r,i,l),i+=.2*R,l.align==="center"&&(r-=v/2),l.align==="right"&&(r-=v),this.link(r,i-R,n,c,l),v},t.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(Wn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function($){return e[$.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function($){return typeof $=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test($)},n=t.__arabicParser__.isArabicEndLetter=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length<=2},v=t.__arabicParser__.isArabicAlfLetter=function($){return c($)&&i.indexOf($.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length>=1};var R=t.__arabicParser__.arabicLetterHasFinalForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length>=3};var x=t.__arabicParser__.arabicLetterHasMedialForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length==4},N=t.__arabicParser__.resolveLigatures=function($){var H=0,W=a,ee="",oe=0;for(H=0;H<$.length;H+=1)W[$.charCodeAt(H)]!==void 0?(oe++,typeof(W=W[$.charCodeAt(H)])=="number"&&(ee+=String.fromCharCode(W),W=a,oe=0),H===$.length-1&&(W=a,ee+=$.charAt(H-(oe-1)),H-=oe-1,oe=0)):(W=a,ee+=$.charAt(H-oe),H-=oe,oe=0);return ee};t.__arabicParser__.isArabicDiacritic=function($){return $!==void 0&&r[$.charCodeAt(0)]!==void 0};var I=t.__arabicParser__.getCorrectForm=function($,H,W){return c($)?l($)===!1?-1:!R($)||!c(H)&&!c(W)||!c(W)&&n(H)||n($)&&!c(H)||n($)&&v(H)||n($)&&n(H)?0:x($)&&c(H)&&!n(H)&&c(W)&&R(W)?3:n($)||!c(W)?1:2:-1},k=function($){var H=0,W=0,ee=0,oe="",pe="",le="",ge=($=$||"").split("\\s+"),ue=[];for(H=0;H<ge.length;H+=1){for(ue.push(""),W=0;W<ge[H].length;W+=1)oe=ge[H][W],pe=ge[H][W-1],le=ge[H][W+1],c(oe)?(ee=I(oe,pe,le),ue[H]+=ee!==-1?String.fromCharCode(e[oe.charCodeAt(0)][ee]):oe):ue[H]+=oe;ue[H]=N(ue[H])}return ue.join(" ")},Z=t.__arabicParser__.processArabic=t.processArabic=function(){var $,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,W=[];if(Array.isArray(H)){var ee=0;for(W=[],ee=0;ee<H.length;ee+=1)Array.isArray(H[ee])?W.push([k(H[ee][0]),H[ee][1],H[ee][2]]):W.push([k(H[ee])]);$=W}else $=k(H);return typeof arguments[0]=="string"?$:(arguments[0].text=$,arguments[0])};t.events.push(["preProcessText",Z])}(Wn.API),Wn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(n){a=n}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(n){r=isNaN(n)||Number.isInteger(n)===!1||n<0?150:n,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(n){i=isNaN(n)||Number.isInteger(n)===!1||n<0?300:n,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(n){l=n}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(n){c=n}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(a,r){var i;if((a=a||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Wn.API),function(t){var e={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var v=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return v},set:function($){v=$}});var R=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return R},set:function($){R=$}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function($){x=$}});var N=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return N},set:function($){N=$}});var I=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return I},set:function($){I=$}});var k=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return k},set:function($){k=$}});var Z=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Z},set:function($){Z=$}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(v){return r.call(this),this.internal.__cell__.headerFunction=typeof v=="function"?v:void 0,this},t.getTextDimensions=function(v,R){r.call(this);var x=(R=R||{}).fontSize||this.getFontSize(),N=R.font||this.getFont(),I=R.scaleFactor||this.internal.scaleFactor,k=0,Z=0,$=0,H=this;if(!Array.isArray(v)&&typeof v!="string"){if(typeof v!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");v=String(v)}var W=R.maxWidth;W>0?typeof v=="string"?v=this.splitTextToSize(v,W):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(oe,pe){return oe.concat(H.splitTextToSize(pe,W))},[])):v=Array.isArray(v)?v:[v];for(var ee=0;ee<v.length;ee++)k<($=this.getStringUnitWidth(v[ee],{font:N})*x)&&(k=$);return k!==0&&(Z=v.length),{w:k/=I,h:Math.max((Z*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/I,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var v=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(v.left,v.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var v;v=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var R=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,N=this.internal.__cell__.margins||e,I=this.internal.__cell__.tableHeaderRow,k=this.internal.__cell__.printHeaders;return R.lineNumber!==void 0&&(R.lineNumber===v.lineNumber?(v.x=(R.x||0)+(R.width||0),v.y=R.y||0):R.y+R.height+v.height+N.bottom>this.getPageHeight()?(this.cellAddPage(),v.y=N.top,k&&I&&(this.printHeaderRow(v.lineNumber,!0),v.y+=I[0].height)):v.y=R.y+R.height||v.y),v.text[0]!==void 0&&(this.rect(v.x,v.y,v.width,v.height,a===!0?"FD":void 0),v.align==="right"?this.text(v.text,v.x+v.width-x,v.y+x,{align:"right",baseline:"top"}):v.align==="center"?this.text(v.text,v.x+v.width/2,v.y+x,{align:"center",baseline:"top",maxWidth:v.width-x-x}):this.text(v.text,v.x+x,v.y+x,{align:"left",baseline:"top",maxWidth:v.width-x-x})),this.internal.__cell__.lastCell=v,this};t.table=function(v,R,x,N,I){if(r.call(this),!x)throw new Error("No data for PDF table.");var k,Z,$,H,W=[],ee=[],oe=[],pe={},le={},ge=[],ue=[],Re=(I=I||{}).autoSize||!1,we=I.printHeaders!==!1,Ne=I.css&&I.css["font-size"]!==void 0?16*I.css["font-size"]:I.fontSize||12,ne=I.margins||Object.assign({width:this.getPageWidth()},e),_e=typeof I.padding=="number"?I.padding:3,ke=I.headerBackgroundColor||"#c8c8c8",Pe=I.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=we,this.internal.__cell__.margins=ne,this.internal.__cell__.table_font_size=Ne,this.internal.__cell__.padding=_e,this.internal.__cell__.headerBackgroundColor=ke,this.internal.__cell__.headerTextColor=Pe,this.setFontSize(Ne),N==null)ee=W=Object.keys(x[0]),oe=W.map(function(){return"left"});else if(Array.isArray(N)&&qs(N[0])==="object")for(W=N.map(function(Ue){return Ue.name}),ee=N.map(function(Ue){return Ue.prompt||Ue.name||""}),oe=N.map(function(Ue){return Ue.align||"left"}),k=0;k<N.length;k+=1)le[N[k].name]=N[k].width*(19.049976/25.4);else Array.isArray(N)&&typeof N[0]=="string"&&(ee=W=N,oe=W.map(function(){return"left"}));if(Re||Array.isArray(N)&&typeof N[0]=="string")for(k=0;k<W.length;k+=1){for(pe[H=W[k]]=x.map(function(Ue){return Ue[H]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(ee[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Z=pe[H],this.setFont(void 0,"normal"),$=0;$<Z.length;$+=1)ge.push(this.getTextDimensions(Z[$],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[H]=Math.max.apply(null,ge)+_e+_e,ge=[]}if(we){var Ee={};for(k=0;k<W.length;k+=1)Ee[W[k]]={},Ee[W[k]].text=ee[k],Ee[W[k]].align=oe[k];var De=n.call(this,Ee,le);ue=W.map(function(Ue){return new l(v,R,le[Ue],De,Ee[Ue].text,void 0,Ee[Ue].align)}),this.setTableHeaderRow(ue),this.printHeaderRow(1,!1)}var qe=N.reduce(function(Ue,ct){return Ue[ct.name]=ct.align,Ue},{});for(k=0;k<x.length;k+=1){"rowStart"in I&&I.rowStart instanceof Function&&I.rowStart({row:k,data:x[k]},this);var Oe=n.call(this,x[k],le);for($=0;$<W.length;$+=1){var He=x[k][W[$]];"cellStart"in I&&I.cellStart instanceof Function&&I.cellStart({row:k,col:$,data:He},this),c.call(this,new l(v,R,le[W[$]],Oe,He,k+2,qe[W[$]]))}}return this.internal.__cell__.table_x=v,this.internal.__cell__.table_y=R,this};var n=function(v,R){var x=this.internal.__cell__.padding,N=this.internal.__cell__.table_font_size,I=this.internal.scaleFactor;return Object.keys(v).map(function(k){var Z=v[k];return this.splitTextToSize(Z.hasOwnProperty("text")?Z.text:Z,R[k]-x-x)},this).map(function(k){return this.getLineHeightFactor()*k.length*N/I+x+x},this).reduce(function(k,Z){return Math.max(k,Z)},0)};t.setTableHeaderRow=function(v){r.call(this),this.internal.__cell__.tableHeaderRow=v},t.printHeaderRow=function(v,R){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var N=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(N[0],N[1],N[2],N[3],void 0,-1)}this.setFont(void 0,"bold");for(var I=[],k=0;k<this.internal.__cell__.tableHeaderRow.length;k+=1){x=this.internal.__cell__.tableHeaderRow[k].clone(),R&&(x.y=this.internal.__cell__.margins.top||0,I.push(x)),x.lineNumber=v;var Z=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(Z)}I.length>0&&this.setTableHeaderRow(I),this.setFont(void 0,"normal"),a=!1}}(Wn.API);var Mte={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ite=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],r3=Dte(Ite),Lte=[100,200,300,400,500,600,700,800,900],zOe=Dte(Lte);function n3(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),a=function(l){return Mte[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(l){return typeof r3[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:a,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,a,r].join(" ")}}}function Qq(t,e,a,r){var i;for(i=a;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=a;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var DOe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},eH={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tH(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function MOe(t,e,a){for(var r=(a=a||{}).defaultFontFamily||"times",i=Object.assign({},DOe,a.genericFontFamilies||{}),l=null,c=null,n=0;n<e.length;++n)if(i[(l=n3(e[n])).family]&&(l.family=i[l.family]),t.hasOwnProperty(l.family)){c=t[l.family];break}if(!(c=c||t[r]))throw new Error("Could not find a font-family for the rule '"+tH(l)+"' and default family '"+r+"'.");if(c=function(v,R){if(R[v])return R[v];var x=r3[v],N=x<=r3.normal?-1:1,I=Qq(R,Ite,x,N);if(!I)throw new Error("Could not find a matching font-stretch value for "+v);return I}(l.stretch,c),c=function(v,R){if(R[v])return R[v];for(var x=Mte[v],N=0;N<x.length;++N)if(R[x[N]])return R[x[N]];throw new Error("Could not find a matching font-style for "+v)}(l.style,c),!(c=function(v,R){if(R[v])return R[v];if(v===400&&R[500])return R[500];if(v===500&&R[400])return R[400];var x=zOe[v],N=Qq(R,Lte,x,v<400?-1:1);if(!N)throw new Error("Could not find a matching font-weight for value "+v);return N}(l.weight,c)))throw new Error("Failed to resolve a font for the rule '"+tH(l)+"'.");return c}function aH(t){return t.trimLeft()}function IOe(t,e){for(var a=0;a<t.length;){if(t.charAt(a)===e)return[t.substring(0,a),t.substring(a+1)];a+=1}return null}function LOe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var cb,rH,nH,T5=["times"];(function(t){var e,a,r,i,l,c,n,v,R,x=function(Se){return Se=Se||{},this.isStrokeTransparent=Se.isStrokeTransparent||!1,this.strokeOpacity=Se.strokeOpacity||1,this.strokeStyle=Se.strokeStyle||"#000000",this.fillStyle=Se.fillStyle||"#000000",this.isFillTransparent=Se.isFillTransparent||!1,this.fillOpacity=Se.fillOpacity||1,this.font=Se.font||"10px sans-serif",this.textBaseline=Se.textBaseline||"alphabetic",this.textAlign=Se.textAlign||"left",this.lineWidth=Se.lineWidth||1,this.lineJoin=Se.lineJoin||"miter",this.lineCap=Se.lineCap||"butt",this.path=Se.path||[],this.transform=Se.transform!==void 0?Se.transform.clone():new v,this.globalCompositeOperation=Se.globalCompositeOperation||"normal",this.globalAlpha=Se.globalAlpha||1,this.clip_path=Se.clip_path||[],this.currentPoint=Se.currentPoint||new c,this.miterLimit=Se.miterLimit||10,this.lastPoint=Se.lastPoint||new c,this.lineDashOffset=Se.lineDashOffset||0,this.lineDash=Se.lineDash||[],this.margin=Se.margin||[0,0,0,0],this.prevPageLastElemOffset=Se.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Se.ignoreClearRect!="boolean"||Se.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new N(this),e=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,n=this.internal.Rectangle,v=this.internal.Matrix,R=new x}]);var N=function(Se){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ie=Se;Object.defineProperty(this,"pdf",{get:function(){return Ie}});var je=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return je},set:function(Ht){je=!!Ht}});var Ze=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ze},set:function(Ht){Ze=!!Ht}});var Be=0;Object.defineProperty(this,"posX",{get:function(){return Be},set:function(Ht){isNaN(Ht)||(Be=Ht)}});var Je=0;Object.defineProperty(this,"posY",{get:function(){return Je},set:function(Ht){isNaN(Ht)||(Je=Ht)}}),Object.defineProperty(this,"margin",{get:function(){return R.margin},set:function(Ht){var wt;typeof Ht=="number"?wt=[Ht,Ht,Ht,Ht]:((wt=new Array(4))[0]=Ht[0],wt[1]=Ht.length>=2?Ht[1]:wt[0],wt[2]=Ht.length>=3?Ht[2]:wt[0],wt[3]=Ht.length>=4?Ht[3]:wt[1]),R.margin=wt}});var dt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return dt},set:function(Ht){dt=Ht}});var ut=0;Object.defineProperty(this,"lastBreak",{get:function(){return ut},set:function(Ht){ut=Ht}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(Ht){Ae=Ht}}),Object.defineProperty(this,"ctx",{get:function(){return R},set:function(Ht){Ht instanceof x&&(R=Ht)}}),Object.defineProperty(this,"path",{get:function(){return R.path},set:function(Ht){R.path=Ht}});var Dt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Dt},set:function(Ht){Dt=Ht}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ht){var wt;wt=I(Ht),this.ctx.fillStyle=wt.style,this.ctx.isFillTransparent=wt.a===0,this.ctx.fillOpacity=wt.a,this.pdf.setFillColor(wt.r,wt.g,wt.b,{a:wt.a}),this.pdf.setTextColor(wt.r,wt.g,wt.b,{a:wt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ht){var wt=I(Ht);this.ctx.strokeStyle=wt.style,this.ctx.isStrokeTransparent=wt.a===0,this.ctx.strokeOpacity=wt.a,wt.a===0?this.pdf.setDrawColor(255,255,255):(wt.a,this.pdf.setDrawColor(wt.r,wt.g,wt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ht){["butt","round","square"].indexOf(Ht)!==-1&&(this.ctx.lineCap=Ht,this.pdf.setLineCap(Ht))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ht){isNaN(Ht)||(this.ctx.lineWidth=Ht,this.pdf.setLineWidth(Ht))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ht){["bevel","round","miter"].indexOf(Ht)!==-1&&(this.ctx.lineJoin=Ht,this.pdf.setLineJoin(Ht))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ht){isNaN(Ht)||(this.ctx.miterLimit=Ht,this.pdf.setMiterLimit(Ht))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ht){this.ctx.textBaseline=Ht}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ht){["right","end","center","left","start"].indexOf(Ht)!==-1&&(this.ctx.textAlign=Ht)}});var Lt=null;function fa(Ht,wt){if(Lt===null){var fr=function(Ca){var za=[];return Object.keys(Ca).forEach(function(ar){Ca[ar].forEach(function(ur){var or=null;switch(ur){case"bold":or={family:ar,weight:"bold"};break;case"italic":or={family:ar,style:"italic"};break;case"bolditalic":or={family:ar,weight:"bold",style:"italic"};break;case"":case"normal":or={family:ar}}or!==null&&(or.ref={name:ar,style:ur},za.push(or))})}),za}(Ht.getFontList());Lt=function(Ca){for(var za={},ar=0;ar<Ca.length;++ar){var ur=n3(Ca[ar]),or=ur.family,Cr=ur.stretch,Ia=ur.style,Fr=ur.weight;za[or]=za[or]||{},za[or][Cr]=za[or][Cr]||{},za[or][Cr][Ia]=za[or][Cr][Ia]||{},za[or][Cr][Ia][Fr]=ur}return za}(fr.concat(wt))}return Lt}var Nt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Nt},set:function(Ht){Lt=null,Nt=Ht}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ht){var wt;if(this.ctx.font=Ht,(wt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ht))!==null){var fr=wt[1];wt[2];var Ca=wt[3],za=wt[4];wt[5];var ar=wt[6],ur=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(za)[2];za=Math.floor(ur==="px"?parseFloat(za)*this.pdf.internal.scaleFactor:ur==="em"?parseFloat(za)*this.pdf.getFontSize():parseFloat(za)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(za);var or=function(na){var Oa,ra,ja=[],gr=na.trim();if(gr==="")return T5;if(gr in eH)return[eH[gr]];for(;gr!=="";){switch(ra=null,Oa=(gr=aH(gr)).charAt(0)){case'"':case"'":ra=IOe(gr.substring(1),Oa);break;default:ra=LOe(gr)}if(ra===null||(ja.push(ra[0]),(gr=aH(ra[1]))!==""&&gr.charAt(0)!==","))return T5;gr=gr.replace(/^,/,"")}return ja}(ar);if(this.fontFaces){var Cr=MOe(fa(this.pdf,this.fontFaces),or.map(function(na){return{family:na,stretch:"normal",weight:Ca,style:fr}}));this.pdf.setFont(Cr.ref.name,Cr.ref.style)}else{var Ia="";(Ca==="bold"||parseInt(Ca,10)>=700||fr==="bold")&&(Ia="bold"),fr==="italic"&&(Ia+="italic"),Ia.length===0&&(Ia="normal");for(var Fr="",tn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lr=0;lr<or.length;lr++){if(this.pdf.internal.getFont(or[lr],Ia,{noFallback:!0,disableWarning:!0})!==void 0){Fr=or[lr];break}if(Ia==="bolditalic"&&this.pdf.internal.getFont(or[lr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fr=or[lr],Ia="bold";else if(this.pdf.internal.getFont(or[lr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fr=or[lr],Ia="normal";break}}if(Fr===""){for(var wr=0;wr<or.length;wr++)if(tn[or[wr]]){Fr=tn[or[wr]];break}}Fr=Fr===""?"Times":Fr,this.pdf.setFont(Fr,Ia)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ht){this.ctx.globalCompositeOperation=Ht}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ht){this.ctx.globalAlpha=Ht}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ht){this.ctx.lineDashOffset=Ht,ct.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ht){this.ctx.lineDash=Ht,ct.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ht){this.ctx.ignoreClearRect=!!Ht}})};N.prototype.setLineDash=function(Se){this.lineDash=Se},N.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},N.prototype.fill=function(){pe.call(this,"fill",!1)},N.prototype.stroke=function(){pe.call(this,"stroke",!1)},N.prototype.beginPath=function(){this.path=[{type:"begin"}]},N.prototype.moveTo=function(Se,Ie){if(isNaN(Se)||isNaN(Ie))throw fo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var je=this.ctx.transform.applyToPoint(new c(Se,Ie));this.path.push({type:"mt",x:je.x,y:je.y}),this.ctx.lastPoint=new c(Se,Ie)},N.prototype.closePath=function(){var Se=new c(0,0),Ie=0;for(Ie=this.path.length-1;Ie!==-1;Ie--)if(this.path[Ie].type==="begin"&&qs(this.path[Ie+1])==="object"&&typeof this.path[Ie+1].x=="number"){Se=new c(this.path[Ie+1].x,this.path[Ie+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(Se.x,Se.y)},N.prototype.lineTo=function(Se,Ie){if(isNaN(Se)||isNaN(Ie))throw fo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var je=this.ctx.transform.applyToPoint(new c(Se,Ie));this.path.push({type:"lt",x:je.x,y:je.y}),this.ctx.lastPoint=new c(je.x,je.y)},N.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),pe.call(this,null,!0)},N.prototype.quadraticCurveTo=function(Se,Ie,je,Ze){if(isNaN(je)||isNaN(Ze)||isNaN(Se)||isNaN(Ie))throw fo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Be=this.ctx.transform.applyToPoint(new c(je,Ze)),Je=this.ctx.transform.applyToPoint(new c(Se,Ie));this.path.push({type:"qct",x1:Je.x,y1:Je.y,x:Be.x,y:Be.y}),this.ctx.lastPoint=new c(Be.x,Be.y)},N.prototype.bezierCurveTo=function(Se,Ie,je,Ze,Be,Je){if(isNaN(Be)||isNaN(Je)||isNaN(Se)||isNaN(Ie)||isNaN(je)||isNaN(Ze))throw fo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var dt=this.ctx.transform.applyToPoint(new c(Be,Je)),ut=this.ctx.transform.applyToPoint(new c(Se,Ie)),Ae=this.ctx.transform.applyToPoint(new c(je,Ze));this.path.push({type:"bct",x1:ut.x,y1:ut.y,x2:Ae.x,y2:Ae.y,x:dt.x,y:dt.y}),this.ctx.lastPoint=new c(dt.x,dt.y)},N.prototype.arc=function(Se,Ie,je,Ze,Be,Je){if(isNaN(Se)||isNaN(Ie)||isNaN(je)||isNaN(Ze)||isNaN(Be))throw fo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Je=!!Je,!this.ctx.transform.isIdentity){var dt=this.ctx.transform.applyToPoint(new c(Se,Ie));Se=dt.x,Ie=dt.y;var ut=this.ctx.transform.applyToPoint(new c(0,je)),Ae=this.ctx.transform.applyToPoint(new c(0,0));je=Math.sqrt(Math.pow(ut.x-Ae.x,2)+Math.pow(ut.y-Ae.y,2))}Math.abs(Be-Ze)>=2*Math.PI&&(Ze=0,Be=2*Math.PI),this.path.push({type:"arc",x:Se,y:Ie,radius:je,startAngle:Ze,endAngle:Be,counterclockwise:Je})},N.prototype.arcTo=function(Se,Ie,je,Ze,Be){throw new Error("arcTo not implemented.")},N.prototype.rect=function(Se,Ie,je,Ze){if(isNaN(Se)||isNaN(Ie)||isNaN(je)||isNaN(Ze))throw fo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Se,Ie),this.lineTo(Se+je,Ie),this.lineTo(Se+je,Ie+Ze),this.lineTo(Se,Ie+Ze),this.lineTo(Se,Ie),this.lineTo(Se+je,Ie),this.lineTo(Se,Ie)},N.prototype.fillRect=function(Se,Ie,je,Ze){if(isNaN(Se)||isNaN(Ie)||isNaN(je)||isNaN(Ze))throw fo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!k.call(this)){var Be={};this.lineCap!=="butt"&&(Be.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Be.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Se,Ie,je,Ze),this.fill(),Be.hasOwnProperty("lineCap")&&(this.lineCap=Be.lineCap),Be.hasOwnProperty("lineJoin")&&(this.lineJoin=Be.lineJoin)}},N.prototype.strokeRect=function(Se,Ie,je,Ze){if(isNaN(Se)||isNaN(Ie)||isNaN(je)||isNaN(Ze))throw fo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Z.call(this)||(this.beginPath(),this.rect(Se,Ie,je,Ze),this.stroke())},N.prototype.clearRect=function(Se,Ie,je,Ze){if(isNaN(Se)||isNaN(Ie)||isNaN(je)||isNaN(Ze))throw fo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Se,Ie,je,Ze))},N.prototype.save=function(Se){Se=typeof Se!="boolean"||Se;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,je=0;je<this.pdf.internal.getNumberOfPages();je++)this.pdf.setPage(je+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ie),Se){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ze=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ze}},N.prototype.restore=function(Se){Se=typeof Se!="boolean"||Se;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,je=0;je<this.pdf.internal.getNumberOfPages();je++)this.pdf.setPage(je+1),this.pdf.internal.out("Q");this.pdf.setPage(Ie),Se&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},N.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var I=function(Se){var Ie,je,Ze,Be;if(Se.isCanvasGradient===!0&&(Se=Se.getColor()),!Se)return{r:0,g:0,b:0,a:0,style:Se};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Se))Ie=0,je=0,Ze=0,Be=0;else{var Je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Se);if(Je!==null)Ie=parseInt(Je[1]),je=parseInt(Je[2]),Ze=parseInt(Je[3]),Be=1;else if((Je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Se))!==null)Ie=parseInt(Je[1]),je=parseInt(Je[2]),Ze=parseInt(Je[3]),Be=parseFloat(Je[4]);else{if(Be=1,typeof Se=="string"&&Se.charAt(0)!=="#"){var dt=new Pte(Se);Se=dt.ok?dt.toHex():"#000000"}Se.length===4?(Ie=Se.substring(1,2),Ie+=Ie,je=Se.substring(2,3),je+=je,Ze=Se.substring(3,4),Ze+=Ze):(Ie=Se.substring(1,3),je=Se.substring(3,5),Ze=Se.substring(5,7)),Ie=parseInt(Ie,16),je=parseInt(je,16),Ze=parseInt(Ze,16)}}return{r:Ie,g:je,b:Ze,a:Be,style:Se}},k=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Z=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};N.prototype.fillText=function(Se,Ie,je,Ze){if(isNaN(Ie)||isNaN(je)||typeof Se!="string")throw fo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ze=isNaN(Ze)?void 0:Ze,!k.call(this)){var Be=Oe(this.ctx.transform.rotation),Je=this.ctx.transform.scaleX;_e.call(this,{text:Se,x:Ie,y:je,scale:Je,angle:Be,align:this.textAlign,maxWidth:Ze})}},N.prototype.strokeText=function(Se,Ie,je,Ze){if(isNaN(Ie)||isNaN(je)||typeof Se!="string")throw fo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Z.call(this)){Ze=isNaN(Ze)?void 0:Ze;var Be=Oe(this.ctx.transform.rotation),Je=this.ctx.transform.scaleX;_e.call(this,{text:Se,x:Ie,y:je,scale:Je,renderingMode:"stroke",angle:Be,align:this.textAlign,maxWidth:Ze})}},N.prototype.measureText=function(Se){if(typeof Se!="string")throw fo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ie=this.pdf,je=this.pdf.internal.scaleFactor,Ze=Ie.internal.getFontSize(),Be=Ie.getStringUnitWidth(Se)*Ze/Ie.internal.scaleFactor,Je=function(dt){var ut=(dt=dt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ut}}),this};return new Je({width:Be*=Math.round(96*je/72*1e4)/1e4})},N.prototype.scale=function(Se,Ie){if(isNaN(Se)||isNaN(Ie))throw fo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var je=new v(Se,0,0,Ie,0,0);this.ctx.transform=this.ctx.transform.multiply(je)},N.prototype.rotate=function(Se){if(isNaN(Se))throw fo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ie=new v(Math.cos(Se),Math.sin(Se),-Math.sin(Se),Math.cos(Se),0,0);this.ctx.transform=this.ctx.transform.multiply(Ie)},N.prototype.translate=function(Se,Ie){if(isNaN(Se)||isNaN(Ie))throw fo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var je=new v(1,0,0,1,Se,Ie);this.ctx.transform=this.ctx.transform.multiply(je)},N.prototype.transform=function(Se,Ie,je,Ze,Be,Je){if(isNaN(Se)||isNaN(Ie)||isNaN(je)||isNaN(Ze)||isNaN(Be)||isNaN(Je))throw fo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var dt=new v(Se,Ie,je,Ze,Be,Je);this.ctx.transform=this.ctx.transform.multiply(dt)},N.prototype.setTransform=function(Se,Ie,je,Ze,Be,Je){Se=isNaN(Se)?1:Se,Ie=isNaN(Ie)?0:Ie,je=isNaN(je)?0:je,Ze=isNaN(Ze)?1:Ze,Be=isNaN(Be)?0:Be,Je=isNaN(Je)?0:Je,this.ctx.transform=new v(Se,Ie,je,Ze,Be,Je)};var $=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};N.prototype.drawImage=function(Se,Ie,je,Ze,Be,Je,dt,ut,Ae){var Dt=this.pdf.getImageProperties(Se),Lt=1,fa=1,Nt=1,Ht=1;Ze!==void 0&&ut!==void 0&&(Nt=ut/Ze,Ht=Ae/Be,Lt=Dt.width/Ze*ut/Ze,fa=Dt.height/Be*Ae/Be),Je===void 0&&(Je=Ie,dt=je,Ie=0,je=0),Ze!==void 0&&ut===void 0&&(ut=Ze,Ae=Be),Ze===void 0&&ut===void 0&&(ut=Dt.width,Ae=Dt.height);for(var wt,fr=this.ctx.transform.decompose(),Ca=Oe(fr.rotate.shx),za=new v,ar=(za=(za=(za=za.multiply(fr.translate)).multiply(fr.skew)).multiply(fr.scale)).applyToRectangle(new n(Je-Ie*Nt,dt-je*Ht,Ze*Lt,Be*fa)),ur=H.call(this,ar),or=[],Cr=0;Cr<ur.length;Cr+=1)or.indexOf(ur[Cr])===-1&&or.push(ur[Cr]);if(oe(or),this.autoPaging)for(var Ia=or[0],Fr=or[or.length-1],tn=Ia;tn<Fr+1;tn++){this.pdf.setPage(tn);var lr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wr=tn===1?this.posY+this.margin[0]:this.margin[0],na=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oa=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ra=tn===1?0:na+(tn-2)*Oa;if(this.ctx.clip_path.length!==0){var ja=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(wt,this.posX+this.margin[3],-ra+wr+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=ja}var gr=JSON.parse(JSON.stringify(ar));gr=ee([gr],this.posX+this.margin[3],-ra+wr+this.ctx.prevPageLastElemOffset)[0];var Tn=(tn>Ia||tn<Fr)&&$.call(this);Tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lr,Oa,null).clip().discardPath()),this.pdf.addImage(Se,"JPEG",gr.x,gr.y,gr.w,gr.h,null,null,Ca),Tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Se,"JPEG",ar.x,ar.y,ar.w,ar.h,null,null,Ca)};var H=function(Se,Ie,je){var Ze=[];Ie=Ie||this.pdf.internal.pageSize.width,je=je||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Be=this.posY+this.ctx.prevPageLastElemOffset;switch(Se.type){default:case"mt":case"lt":Ze.push(Math.floor((Se.y+Be)/je)+1);break;case"arc":Ze.push(Math.floor((Se.y+Be-Se.radius)/je)+1),Ze.push(Math.floor((Se.y+Be+Se.radius)/je)+1);break;case"qct":var Je=He(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Se.x1,Se.y1,Se.x,Se.y);Ze.push(Math.floor((Je.y+Be)/je)+1),Ze.push(Math.floor((Je.y+Je.h+Be)/je)+1);break;case"bct":var dt=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Se.x1,Se.y1,Se.x2,Se.y2,Se.x,Se.y);Ze.push(Math.floor((dt.y+Be)/je)+1),Ze.push(Math.floor((dt.y+dt.h+Be)/je)+1);break;case"rect":Ze.push(Math.floor((Se.y+Be)/je)+1),Ze.push(Math.floor((Se.y+Se.h+Be)/je)+1)}for(var ut=0;ut<Ze.length;ut+=1)for(;this.pdf.internal.getNumberOfPages()<Ze[ut];)W.call(this);return Ze},W=function(){var Se=this.fillStyle,Ie=this.strokeStyle,je=this.font,Ze=this.lineCap,Be=this.lineWidth,Je=this.lineJoin;this.pdf.addPage(),this.fillStyle=Se,this.strokeStyle=Ie,this.font=je,this.lineCap=Ze,this.lineWidth=Be,this.lineJoin=Je},ee=function(Se,Ie,je){for(var Ze=0;Ze<Se.length;Ze++)switch(Se[Ze].type){case"bct":Se[Ze].x2+=Ie,Se[Ze].y2+=je;case"qct":Se[Ze].x1+=Ie,Se[Ze].y1+=je;case"mt":case"lt":case"arc":default:Se[Ze].x+=Ie,Se[Ze].y+=je}return Se},oe=function(Se){return Se.sort(function(Ie,je){return Ie-je})},pe=function(Se,Ie){for(var je,Ze,Be=this.fillStyle,Je=this.strokeStyle,dt=this.lineCap,ut=this.lineWidth,Ae=Math.abs(ut*this.ctx.transform.scaleX),Dt=this.lineJoin,Lt=JSON.parse(JSON.stringify(this.path)),fa=JSON.parse(JSON.stringify(this.path)),Nt=[],Ht=0;Ht<fa.length;Ht++)if(fa[Ht].x!==void 0)for(var wt=H.call(this,fa[Ht]),fr=0;fr<wt.length;fr+=1)Nt.indexOf(wt[fr])===-1&&Nt.push(wt[fr]);for(var Ca=0;Ca<Nt.length;Ca++)for(;this.pdf.internal.getNumberOfPages()<Nt[Ca];)W.call(this);if(oe(Nt),this.autoPaging)for(var za=Nt[0],ar=Nt[Nt.length-1],ur=za;ur<ar+1;ur++){this.pdf.setPage(ur),this.fillStyle=Be,this.strokeStyle=Je,this.lineCap=dt,this.lineWidth=Ae,this.lineJoin=Dt;var or=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Cr=ur===1?this.posY+this.margin[0]:this.margin[0],Ia=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tn=ur===1?0:Ia+(ur-2)*Fr;if(this.ctx.clip_path.length!==0){var lr=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(je,this.posX+this.margin[3],-tn+Cr+this.ctx.prevPageLastElemOffset),le.call(this,Se,!0),this.path=lr}if(Ze=JSON.parse(JSON.stringify(Lt)),this.path=ee(Ze,this.posX+this.margin[3],-tn+Cr+this.ctx.prevPageLastElemOffset),Ie===!1||ur===0){var wr=(ur>za||ur<ar)&&$.call(this);wr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],or,Fr,null).clip().discardPath()),le.call(this,Se,Ie),wr&&this.pdf.restoreGraphicsState()}this.lineWidth=ut}else this.lineWidth=Ae,le.call(this,Se,Ie),this.lineWidth=ut;this.path=Lt},le=function(Se,Ie){if((Se!=="stroke"||Ie||!Z.call(this))&&(Se==="stroke"||Ie||!k.call(this))){for(var je,Ze,Be=[],Je=this.path,dt=0;dt<Je.length;dt++){var ut=Je[dt];switch(ut.type){case"begin":Be.push({begin:!0});break;case"close":Be.push({close:!0});break;case"mt":Be.push({start:ut,deltas:[],abs:[]});break;case"lt":var Ae=Be.length;if(Je[dt-1]&&!isNaN(Je[dt-1].x)&&(je=[ut.x-Je[dt-1].x,ut.y-Je[dt-1].y],Ae>0)){for(;Ae>=0;Ae--)if(Be[Ae-1].close!==!0&&Be[Ae-1].begin!==!0){Be[Ae-1].deltas.push(je),Be[Ae-1].abs.push(ut);break}}break;case"bct":je=[ut.x1-Je[dt-1].x,ut.y1-Je[dt-1].y,ut.x2-Je[dt-1].x,ut.y2-Je[dt-1].y,ut.x-Je[dt-1].x,ut.y-Je[dt-1].y],Be[Be.length-1].deltas.push(je);break;case"qct":var Dt=Je[dt-1].x+2/3*(ut.x1-Je[dt-1].x),Lt=Je[dt-1].y+2/3*(ut.y1-Je[dt-1].y),fa=ut.x+2/3*(ut.x1-ut.x),Nt=ut.y+2/3*(ut.y1-ut.y),Ht=ut.x,wt=ut.y;je=[Dt-Je[dt-1].x,Lt-Je[dt-1].y,fa-Je[dt-1].x,Nt-Je[dt-1].y,Ht-Je[dt-1].x,wt-Je[dt-1].y],Be[Be.length-1].deltas.push(je);break;case"arc":Be.push({deltas:[],abs:[],arc:!0}),Array.isArray(Be[Be.length-1].abs)&&Be[Be.length-1].abs.push(ut)}}Ze=Ie?null:Se==="stroke"?"stroke":"fill";for(var fr=!1,Ca=0;Ca<Be.length;Ca++)if(Be[Ca].arc)for(var za=Be[Ca].abs,ar=0;ar<za.length;ar++){var ur=za[ar];ur.type==="arc"?Re.call(this,ur.x,ur.y,ur.radius,ur.startAngle,ur.endAngle,ur.counterclockwise,void 0,Ie,!fr):ke.call(this,ur.x,ur.y),fr=!0}else if(Be[Ca].close===!0)this.pdf.internal.out("h"),fr=!1;else if(Be[Ca].begin!==!0){var or=Be[Ca].start.x,Cr=Be[Ca].start.y;Pe.call(this,Be[Ca].deltas,or,Cr),fr=!0}Ze&&we.call(this,Ze),Ie&&Ne.call(this)}},ge=function(Se){var Ie=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,je=Ie*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Se-je;case"top":return Se+Ie-je;case"hanging":return Se+Ie-2*je;case"middle":return Se+Ie/2-je;case"ideographic":return Se;case"alphabetic":default:return Se}},ue=function(Se){return Se+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};N.prototype.createLinearGradient=function(){var Se=function(){};return Se.colorStops=[],Se.addColorStop=function(Ie,je){this.colorStops.push([Ie,je])},Se.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Se.isCanvasGradient=!0,Se},N.prototype.createPattern=function(){return this.createLinearGradient()},N.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Re=function(Se,Ie,je,Ze,Be,Je,dt,ut,Ae){for(var Dt=De.call(this,je,Ze,Be,Je),Lt=0;Lt<Dt.length;Lt++){var fa=Dt[Lt];Lt===0&&(Ae?ne.call(this,fa.x1+Se,fa.y1+Ie):ke.call(this,fa.x1+Se,fa.y1+Ie)),Ee.call(this,Se,Ie,fa.x2,fa.y2,fa.x3,fa.y3,fa.x4,fa.y4)}ut?Ne.call(this):we.call(this,dt)},we=function(Se){switch(Se){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ne=function(){this.pdf.clip(),this.pdf.discardPath()},ne=function(Se,Ie){this.pdf.internal.out(a(Se)+" "+r(Ie)+" m")},_e=function(Se){var Ie;switch(Se.align){case"right":case"end":Ie="right";break;case"center":Ie="center";break;case"left":case"start":default:Ie="left"}var je=this.pdf.getTextDimensions(Se.text),Ze=ge.call(this,Se.y),Be=ue.call(this,Ze)-je.h,Je=this.ctx.transform.applyToPoint(new c(Se.x,Ze)),dt=this.ctx.transform.decompose(),ut=new v;ut=(ut=(ut=ut.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale);for(var Ae,Dt,Lt,fa=this.ctx.transform.applyToRectangle(new n(Se.x,Ze,je.w,je.h)),Nt=ut.applyToRectangle(new n(Se.x,Be,je.w,je.h)),Ht=H.call(this,Nt),wt=[],fr=0;fr<Ht.length;fr+=1)wt.indexOf(Ht[fr])===-1&&wt.push(Ht[fr]);if(oe(wt),this.autoPaging)for(var Ca=wt[0],za=wt[wt.length-1],ar=Ca;ar<za+1;ar++){this.pdf.setPage(ar);var ur=ar===1?this.posY+this.margin[0]:this.margin[0],or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Cr=this.pdf.internal.pageSize.height-this.margin[2],Ia=Cr-this.margin[0],Fr=this.pdf.internal.pageSize.width-this.margin[1],tn=Fr-this.margin[3],lr=ar===1?0:or+(ar-2)*Ia;if(this.ctx.clip_path.length!==0){var wr=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(Ae,this.posX+this.margin[3],-1*lr+ur),le.call(this,"fill",!0),this.path=wr}var na=ee([JSON.parse(JSON.stringify(Nt))],this.posX+this.margin[3],-lr+ur+this.ctx.prevPageLastElemOffset)[0];Se.scale>=.01&&(Dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dt*Se.scale),Lt=this.lineWidth,this.lineWidth=Lt*Se.scale);var Oa=this.autoPaging!=="text";if(Oa||na.y+na.h<=Cr){if(Oa||na.y>=ur&&na.x<=Fr){var ra=Oa?Se.text:this.pdf.splitTextToSize(Se.text,Se.maxWidth||Fr-na.x)[0],ja=ee([JSON.parse(JSON.stringify(fa))],this.posX+this.margin[3],-lr+ur+this.ctx.prevPageLastElemOffset)[0],gr=Oa&&(ar>Ca||ar<za)&&$.call(this);gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tn,Ia,null).clip().discardPath()),this.pdf.text(ra,ja.x,ja.y,{angle:Se.angle,align:Ie,renderingMode:Se.renderingMode}),gr&&this.pdf.restoreGraphicsState()}}else na.y<Cr&&(this.ctx.prevPageLastElemOffset+=Cr-na.y);Se.scale>=.01&&(this.pdf.setFontSize(Dt),this.lineWidth=Lt)}else Se.scale>=.01&&(Dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dt*Se.scale),Lt=this.lineWidth,this.lineWidth=Lt*Se.scale),this.pdf.text(Se.text,Je.x+this.posX,Je.y+this.posY,{angle:Se.angle,align:Ie,renderingMode:Se.renderingMode,maxWidth:Se.maxWidth}),Se.scale>=.01&&(this.pdf.setFontSize(Dt),this.lineWidth=Lt)},ke=function(Se,Ie,je,Ze){je=je||0,Ze=Ze||0,this.pdf.internal.out(a(Se+je)+" "+r(Ie+Ze)+" l")},Pe=function(Se,Ie,je){return this.pdf.lines(Se,Ie,je,null,null)},Ee=function(Se,Ie,je,Ze,Be,Je,dt,ut){this.pdf.internal.out([e(i(je+Se)),e(l(Ze+Ie)),e(i(Be+Se)),e(l(Je+Ie)),e(i(dt+Se)),e(l(ut+Ie)),"c"].join(" "))},De=function(Se,Ie,je,Ze){for(var Be=2*Math.PI,Je=Math.PI/2;Ie>je;)Ie-=Be;var dt=Math.abs(je-Ie);dt<Be&&Ze&&(dt=Be-dt);for(var ut=[],Ae=Ze?-1:1,Dt=Ie;dt>1e-5;){var Lt=Dt+Ae*Math.min(dt,Je);ut.push(qe.call(this,Se,Dt,Lt)),dt-=Math.abs(Lt-Dt),Dt=Lt}return ut},qe=function(Se,Ie,je){var Ze=(je-Ie)/2,Be=Se*Math.cos(Ze),Je=Se*Math.sin(Ze),dt=Be,ut=-Je,Ae=dt*dt+ut*ut,Dt=Ae+dt*Be+ut*Je,Lt=4/3*(Math.sqrt(2*Ae*Dt)-Dt)/(dt*Je-ut*Be),fa=dt-Lt*ut,Nt=ut+Lt*dt,Ht=fa,wt=-Nt,fr=Ze+Ie,Ca=Math.cos(fr),za=Math.sin(fr);return{x1:Se*Math.cos(Ie),y1:Se*Math.sin(Ie),x2:fa*Ca-Nt*za,y2:fa*za+Nt*Ca,x3:Ht*Ca-wt*za,y3:Ht*za+wt*Ca,x4:Se*Math.cos(je),y4:Se*Math.sin(je)}},Oe=function(Se){return 180*Se/Math.PI},He=function(Se,Ie,je,Ze,Be,Je){var dt=Se+.5*(je-Se),ut=Ie+.5*(Ze-Ie),Ae=Be+.5*(je-Be),Dt=Je+.5*(Ze-Je),Lt=Math.min(Se,Be,dt,Ae),fa=Math.max(Se,Be,dt,Ae),Nt=Math.min(Ie,Je,ut,Dt),Ht=Math.max(Ie,Je,ut,Dt);return new n(Lt,Nt,fa-Lt,Ht-Nt)},Ue=function(Se,Ie,je,Ze,Be,Je,dt,ut){var Ae,Dt,Lt,fa,Nt,Ht,wt,fr,Ca,za,ar,ur,or,Cr,Ia=je-Se,Fr=Ze-Ie,tn=Be-je,lr=Je-Ze,wr=dt-Be,na=ut-Je;for(Dt=0;Dt<41;Dt++)Ca=(wt=(Lt=Se+(Ae=Dt/40)*Ia)+Ae*((Nt=je+Ae*tn)-Lt))+Ae*(Nt+Ae*(Be+Ae*wr-Nt)-wt),za=(fr=(fa=Ie+Ae*Fr)+Ae*((Ht=Ze+Ae*lr)-fa))+Ae*(Ht+Ae*(Je+Ae*na-Ht)-fr),Dt==0?(ar=Ca,ur=za,or=Ca,Cr=za):(ar=Math.min(ar,Ca),ur=Math.min(ur,za),or=Math.max(or,Ca),Cr=Math.max(Cr,za));return new n(Math.round(ar),Math.round(ur),Math.round(or-ar),Math.round(Cr-ur))},ct=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Se,Ie,je=(Se=this.ctx.lineDash,Ie=this.ctx.lineDashOffset,JSON.stringify({lineDash:Se,lineDashOffset:Ie}));this.prevLineDash!==je&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=je)}}})(Wn.API),function(t){var e=function(l){var c,n,v,R,x,N,I,k,Z,$;for(n=[],v=0,R=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;R>v;v+=4)(x=(l.charCodeAt(v)<<24)+(l.charCodeAt(v+1)<<16)+(l.charCodeAt(v+2)<<8)+l.charCodeAt(v+3))!==0?(N=(x=((x=((x=((x=(x-($=x%85))/85)-(Z=x%85))/85)-(k=x%85))/85)-(I=x%85))/85)%85,n.push(N+33,I+33,k+33,Z+33,$+33)):n.push(122);return function(H,W){for(var ee=W;ee>0;ee--)H.pop()}(n,c.length),String.fromCharCode.apply(String,n)+"~>"},a=function(l){var c,n,v,R,x,N=String,I="length",k=255,Z="charCodeAt",$="slice",H="replace";for(l[$](-2),l=l[$](0,-2)[H](/\s/g,"")[H]("z","!!!!!"),v=[],R=0,x=(l+=c="uuuuu"[$](l[I]%5||5))[I];x>R;R+=5)n=52200625*(l[Z](R)-33)+614125*(l[Z](R+1)-33)+7225*(l[Z](R+2)-33)+85*(l[Z](R+3)-33)+(l[Z](R+4)-33),v.push(k&n>>24,k&n>>16,k&n>>8,k&n);return function(W,ee){for(var oe=ee;oe>0;oe--)W.pop()}(v,c[I]),N.fromCharCode.apply(N,v)},r=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var n="",v=0;v<l.length;v+=2)n+=String.fromCharCode("0x"+(l[v]+l[v+1]));return n},i=function(l){for(var c=new Uint8Array(l.length),n=l.length;n--;)c[n]=l.charCodeAt(n);return l=(c=JI(c)).reduce(function(v,R){return v+String.fromCharCode(R)},"")};t.processDataByFilters=function(l,c){var n=0,v=l||"",R=[];for(typeof(c=c||[])=="string"&&(c=[c]),n=0;n<c.length;n+=1)switch(c[n]){case"ASCII85Decode":case"/ASCII85Decode":v=a(v),R.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=e(v),R.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=r(v),R.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=v.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",R.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=i(v),R.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[n]+'" is not implemented')}return{data:v,reverseChain:R.reverse().join(" ")}}}(Wn.API),function(t){t.loadFile=function(e,a,r){return function(i,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var n=void 0;try{n=function(v,R,x){var N=new XMLHttpRequest,I=0,k=function(Z){var $=Z.length,H=[],W=String.fromCharCode;for(I=0;I<$;I+=1)H.push(W(255&Z.charCodeAt(I)));return H.join("")};if(N.open("GET",v,!R),N.overrideMimeType("text/plain; charset=x-user-defined"),R===!1&&(N.onload=function(){N.status===200?x(k(this.responseText)):x(void 0)}),N.send(null),R&&N.status===200)return k(N.responseText)}(i,l,c)}catch{}return n}(e,a,r)},t.loadImageFile=t.loadFile}(Wn.API),function(t){function e(){return(Qn.html2canvas?Promise.resolve(Qn.html2canvas):IT(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function a(){return(Qn.DOMPurify?Promise.resolve(Qn.DOMPurify):IT(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var n=qs(c);return n==="undefined"?"undefined":n==="string"||c instanceof String?"string":n==="number"||c instanceof Number?"number":n==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":n==="object"?"object":"unknown"},i=function(c,n){var v=document.createElement(c);for(var R in n.className&&(v.className=n.className),n.innerHTML&&n.dompurify&&(v.innerHTML=n.dompurify.sanitize(n.innerHTML)),n.style)v.style[R]=n.style[R];return v},l=function c(n){var v=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),R=c.convert(Promise.resolve(),v);return R=(R=R.setProgress(1,c,1,[c])).set(n)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,n){return c.__proto__=n||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,n){return this.then(function(){switch(n=n||function(v){switch(r(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(a).then(function(v){return this.set({src:i("div",{innerHTML:c,dompurify:v})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},n=function v(R,x){for(var N=R.nodeType===3?document.createTextNode(R.nodeValue):R.cloneNode(!1),I=R.firstChild;I;I=I.nextSibling)x!==!0&&I.nodeType===1&&I.nodeName==="SCRIPT"||N.appendChild(v(I,x));return R.nodeType===1&&(R.nodeName==="CANVAS"?(N.width=R.width,N.height=R.height,N.getContext("2d").drawImage(R,0,0)):R.nodeName!=="TEXTAREA"&&R.nodeName!=="SELECT"||(N.value=R.value),N.addEventListener("load",function(){N.scrollTop=R.scrollTop,N.scrollLeft=R.scrollLeft},!0)),N}(this.prop.src,this.opt.html2canvas.javascriptEnabled);n.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(n),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(n){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,n(this.prop.container,v)}).then(function(n){(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(n){var v=this.opt.jsPDF,R=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=R,R)for(var I=0;I<R.length;++I){var k=R[I],Z=k.src.find(function($){return $.format==="truetype"});Z&&v.addFont(Z.url,k.ref.name,k.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,v.context2d.save(!0),n(this.prop.container,N)}).then(function(n){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,n,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(c,n):this.outputPdf(c,n)},l.prototype.outputPdf=function(c,n){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,n)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(r(c)!=="object")return this;var n=Object.keys(c||{}).map(function(v){if(v in l.template.prop)return function(){this.prop[v]=c[v]};switch(v){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[v]=c[v]}}},this);return this.then(function(){return this.thenList(n)})},l.prototype.get=function(c,n){return this.then(function(){var v=c in l.template.prop?this.prop[c]:this.opt[c];return n?n(v):v})},l.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function n(v,R){return Math.floor(v*R/72*96)}return this.then(function(){(c=c||Wn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:n(c.inner.width,c.k),height:n(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,n,v,R){return c!=null&&(this.progress.val=c),n!=null&&(this.progress.state=n),v!=null&&(this.progress.n=v),R!=null&&(this.progress.stack=R),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,n,v,R){return this.setProgress(c?this.progress.val+c:null,n||null,v?this.progress.n+v:null,R?this.progress.stack.concat(R):null)},l.prototype.then=function(c,n){var v=this;return this.thenCore(c,n,function(R,x){return v.updateProgress(null,null,1,[R]),Promise.prototype.then.call(this,function(N){return v.updateProgress(null,R),N}).then(R,x).then(function(N){return v.updateProgress(1),N})})},l.prototype.thenCore=function(c,n,v){v=v||Promise.prototype.then,c&&(c=c.bind(this)),n&&(n=n.bind(this));var R=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),x=v.call(R,c,n);return l.convert(x,this.__proto__)},l.prototype.thenExternal=function(c,n){return Promise.prototype.then.call(this,c,n)},l.prototype.thenList=function(c){var n=this;return c.forEach(function(v){n=n.thenCore(v)}),n},l.prototype.catch=function(c){c&&(c=c.bind(this));var n=Promise.prototype.catch.call(this,c);return l.convert(n,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Wn.getPageSize=function(c,n,v){if(qs(c)==="object"){var R=c;c=R.orientation,n=R.unit||n,v=R.format||v}n=n||"mm",v=v||"a4",c=(""+(c||"P")).toLowerCase();var x,N=(""+v).toLowerCase(),I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(n){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+n}var k,Z=0,$=0;if(I.hasOwnProperty(N))Z=I[N][1]/x,$=I[N][0]/x;else try{Z=v[1],$=v[0]}catch{throw new Error("Invalid format: "+v)}if(c==="p"||c==="portrait")c="p",$>Z&&(k=$,$=Z,Z=k);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",Z>$&&(k=$,$=Z,Z=k)}return{width:$,height:Z,unit:n,k:x,orientation:c}},t.html=function(c,n){(n=n||{}).callback=n.callback||function(){},n.html2canvas=n.html2canvas||{},n.html2canvas.canvas=n.html2canvas.canvas||this.canvas,n.jsPDF=n.jsPDF||this,n.fontFaces=n.fontFaces?n.fontFaces.map(n3):null;var v=new l(n);return n.worker?v:v.from(c).doCallback()}}(Wn.API),Wn.API.addJS=function(t){return nH=t,this.internal.events.subscribe("postPutResources",function(){cb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(cb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),rH=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+nH+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){cb!==void 0&&rH!==void 0&&this.internal.out("/Names <</JavaScript "+cb+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=a.outline.render().split(/\r\n/),l=0;l<i.length;l++){var c=i[l],n=r.exec(c);if(n!=null){var v=n[1];a.internal.newObjectDeferredBegin(v,!1)}a.internal.write(c)}if(this.outline.createNamedDestinations){var R=this.internal.pages.length,x=[];for(l=0;l<R;l++){var N=a.internal.newObject();x.push(N);var I=a.internal.getPageInfo(l+1);a.internal.write("<< /D["+I.objId+" 0 R /XYZ null null null]>> endobj")}var k=a.internal.newObject();for(a.internal.write("<< /Names [ "),l=0;l<x.length;l++)a.internal.write("(page_"+(l+1)+")"+x[l]+" 0 R");a.internal.write(" ] >>","endobj"),e=a.internal.newObject(),a.internal.write("<< /Dests "+k+" 0 R"),a.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,i,l){var c={title:i,options:l,children:[]};return r==null&&(r=this.root),r.children.push(c),c},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var c=r.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var n=this.count=this.count_r({count:0},c);if(n>0&&this.line("/Count "+n),c.options&&c.options.pageNumber){var v=a.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+v.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var R=0;R<r.children.length;R++)this.renderItems(r.children[R])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,i){for(var l=0;l<i.children.length;l++)r.count++,this.count_r(r,i.children[l]);return r.count}}])}(Wn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(a,r,i,l,c,n){var v,R=this.decode.DCT_DECODE,x=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=c||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,(v=function(N){for(var I,k=256*N.charCodeAt(4)+N.charCodeAt(5),Z=N.length,$={width:0,height:0,numcomponents:1},H=4;H<Z;H+=2){if(H+=k,e.indexOf(N.charCodeAt(H+1))!==-1){I=256*N.charCodeAt(H+5)+N.charCodeAt(H+6),$={width:256*N.charCodeAt(H+7)+N.charCodeAt(H+8),height:I,numcomponents:N.charCodeAt(H+9)};break}k=256*N.charCodeAt(H+2)+N.charCodeAt(H+3)}return $}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a)).numcomponents){case 1:n=this.color_spaces.DEVICE_GRAY;break;case 4:n=this.color_spaces.DEVICE_CMYK;break;case 3:n=this.color_spaces.DEVICE_RGB}x={data:a,width:v.width,height:v.height,colorSpace:n,bitsPerComponent:8,filter:R,index:r,alias:i}}return x}}(Wn.API);var H0,db,iH,sH,oH,FOe=function(){var t,e,a;function r(l){var c,n,v,R,x,N,I,k,Z,$,H,W,ee,oe;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},N=null;;){switch(c=this.readUInt32(),Z=(function(){var pe,le;for(le=[],pe=0;pe<4;++pe)le.push(String.fromCharCode(this.data[this.pos++]));return le}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":N&&this.animation.frames.push(N),this.pos+=4,N={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),R=this.readUInt16()||100,N.delay=1e3*x/R,N.disposeOp=this.data[this.pos++],N.blendOp=this.data[this.pos++],N.data=[];break;case"IDAT":case"fdAT":for(Z==="fdAT"&&(this.pos+=4,c-=4),l=(N!=null?N.data:void 0)||this.imgData,W=0;0<=c?W<c:W>c;0<=c?++W:--W)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(v=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>v)throw new Error("More transparent colors than palette size");if(($=v-this.transparency.indexed.length)>0)for(ee=0;0<=$?ee<$:ee>$;0<=$?++ee:--ee)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":I=(H=this.read(c)).indexOf(0),k=String.fromCharCode.apply(String,H.slice(0,I)),this.text[k]=String.fromCharCode.apply(String,H.slice(I+1));break;case"IEND":return N&&this.animation.frames.push(N),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(oe=this.colorType)===4||oe===6,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var c,n;for(n=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var c=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*c),v=0,R=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function x(N,I,k,Z){var $,H,W,ee,oe,pe,le,ge,ue,Re,we,Ne,ne,_e,ke,Pe,Ee,De,qe,Oe,He,Ue=Math.ceil((R.width-N)/k),ct=Math.ceil((R.height-I)/Z),Se=R.width==Ue&&R.height==ct;for(_e=c*Ue,Ne=Se?n:new Uint8Array(_e*ct),pe=l.length,ne=0,H=0;ne<ct&&v<pe;){switch(l[v++]){case 0:for(ee=Ee=0;Ee<_e;ee=Ee+=1)Ne[H++]=l[v++];break;case 1:for(ee=De=0;De<_e;ee=De+=1)$=l[v++],oe=ee<c?0:Ne[H-c],Ne[H++]=($+oe)%256;break;case 2:for(ee=qe=0;qe<_e;ee=qe+=1)$=l[v++],W=(ee-ee%c)/c,ke=ne&&Ne[(ne-1)*_e+W*c+ee%c],Ne[H++]=(ke+$)%256;break;case 3:for(ee=Oe=0;Oe<_e;ee=Oe+=1)$=l[v++],W=(ee-ee%c)/c,oe=ee<c?0:Ne[H-c],ke=ne&&Ne[(ne-1)*_e+W*c+ee%c],Ne[H++]=($+Math.floor((oe+ke)/2))%256;break;case 4:for(ee=He=0;He<_e;ee=He+=1)$=l[v++],W=(ee-ee%c)/c,oe=ee<c?0:Ne[H-c],ne===0?ke=Pe=0:(ke=Ne[(ne-1)*_e+W*c+ee%c],Pe=W&&Ne[(ne-1)*_e+(W-1)*c+ee%c]),le=oe+ke-Pe,ge=Math.abs(le-oe),Re=Math.abs(le-ke),we=Math.abs(le-Pe),ue=ge<=Re&&ge<=we?oe:Re<=we?ke:Pe,Ne[H++]=($+ue)%256;break;default:throw new Error("Invalid filter algorithm: "+l[v-1])}if(!Se){var Ie=((I+ne*Z)*R.width+N)*c,je=ne*_e;for(ee=0;ee<Ue;ee+=1){for(var Ze=0;Ze<c;Ze+=1)n[Ie++]=Ne[je++];Ie+=(k-1)*c}}ne++}}return l=gOe(l),R.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),n},r.prototype.decodePalette=function(){var l,c,n,v,R,x,N,I,k;for(n=this.palette,x=this.transparency.indexed||[],R=new Uint8Array((x.length||0)+n.length),v=0,l=0,c=N=0,I=n.length;N<I;c=N+=3)R[v++]=n[c],R[v++]=n[c+1],R[v++]=n[c+2],R[v++]=(k=x[l++])!=null?k:255;return R},r.prototype.copyToImageData=function(l,c){var n,v,R,x,N,I,k,Z,$,H,W;if(v=this.colors,$=null,n=this.hasAlphaChannel,this.palette.length&&($=(W=this._decodedPalette)!=null?W:this._decodedPalette=this.decodePalette(),v=4,n=!0),Z=(R=l.data||l).length,N=$||c,x=I=0,v===1)for(;x<Z;)k=$?4*c[x/4]:I,H=N[k++],R[x++]=H,R[x++]=H,R[x++]=H,R[x++]=n?N[k++]:255,I=k;else for(;x<Z;)k=$?4*c[x/4]:I,R[x++]=N[k++],R[x++]=N[k++],R[x++]=N[k++],R[x++]=n?N[k++]:255,I=k},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var i=function(){if(Object.prototype.toString.call(Qn)==="[object Window]"){try{e=Qn.document.createElement("canvas"),a=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(l){var c;if(i()===!0)return a.width=l.width,a.height=l.height,a.clearRect(0,0,l.width,l.height),a.putImageData(l,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var c,n,v,R,x,N,I,k;if(this.animation){for(k=[],n=x=0,N=(I=this.animation.frames).length;x<N;n=++x)c=I[n],v=l.createImageData(c.width,c.height),R=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(v,R),c.imageData=v,k.push(c.image=t(v));return k}},r.prototype.renderFrame=function(l,c){var n,v,R;return n=(v=this.animation.frames)[c],R=v[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(R!=null?R.disposeOp:void 0)===1?l.clearRect(R.xOffset,R.yOffset,R.width,R.height):(R!=null?R.disposeOp:void 0)===2&&l.putImageData(R.imageData,R.xOffset,R.yOffset),n.blendOp===0&&l.clearRect(n.xOffset,n.yOffset,n.width,n.height),l.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(l){var c,n,v,R,x,N,I=this;return n=0,N=this.animation,R=N.numFrames,v=N.frames,x=N.numPlays,(c=function(){var k,Z;if(k=n++%R,Z=v[k],I.renderFrame(l,k),R>1&&n/R<x)return I.animation._timeout=setTimeout(c,Z.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var c,n;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(n=c.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),c.putImageData(n,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function kOe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],l=i>>7,c=1<<(7&i)+1;t[e++],t[e++];var n=null,v=null;l&&(n=e,v=c,e+=3*c);var R=!0,x=[],N=0,I=null,k=0,Z=null;for(this.width=a,this.height=r;R&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,Z=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((ne=t[e++])>=0))throw Error("Invalid block size");if(ne===0)break;e+=ne}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var $=t[e++];N=t[e++]|t[e++]<<8,I=t[e++],(1&$)==0&&(I=null),k=$>>2&7,e++;break;case 254:for(;;){if(!((ne=t[e++])>=0))throw Error("Invalid block size");if(ne===0)break;e+=ne}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var H=t[e++]|t[e++]<<8,W=t[e++]|t[e++]<<8,ee=t[e++]|t[e++]<<8,oe=t[e++]|t[e++]<<8,pe=t[e++],le=pe>>6&1,ge=1<<(7&pe)+1,ue=n,Re=v,we=!1;pe>>7&&(we=!0,ue=e,Re=ge,e+=3*ge);var Ne=e;for(e++;;){var ne;if(!((ne=t[e++])>=0))throw Error("Invalid block size");if(ne===0)break;e+=ne}x.push({x:H,y:W,width:ee,height:oe,has_local_palette:we,palette_offset:ue,palette_size:Re,data_offset:Ne,data_length:e-Ne,transparent_index:I,interlaced:!!le,delay:N,disposal:k});break;case 59:R=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return Z},this.frameInfo=function(_e){if(_e<0||_e>=x.length)throw new Error("Frame index out of range.");return x[_e]},this.decodeAndBlitFrameBGRA=function(_e,ke){var Pe=this.frameInfo(_e),Ee=Pe.width*Pe.height,De=new Uint8Array(Ee);lH(t,Pe.data_offset,De,Ee);var qe=Pe.palette_offset,Oe=Pe.transparent_index;Oe===null&&(Oe=256);var He=Pe.width,Ue=a-He,ct=He,Se=4*(Pe.y*a+Pe.x),Ie=4*((Pe.y+Pe.height)*a+Pe.x),je=Se,Ze=4*Ue;Pe.interlaced===!0&&(Ze+=4*a*7);for(var Be=8,Je=0,dt=De.length;Je<dt;++Je){var ut=De[Je];if(ct===0&&(ct=He,(je+=Ze)>=Ie&&(Ze=4*Ue+4*a*(Be-1),je=Se+(He+Ue)*(Be<<1),Be>>=1)),ut===Oe)je+=4;else{var Ae=t[qe+3*ut],Dt=t[qe+3*ut+1],Lt=t[qe+3*ut+2];ke[je++]=Lt,ke[je++]=Dt,ke[je++]=Ae,ke[je++]=255}--ct}},this.decodeAndBlitFrameRGBA=function(_e,ke){var Pe=this.frameInfo(_e),Ee=Pe.width*Pe.height,De=new Uint8Array(Ee);lH(t,Pe.data_offset,De,Ee);var qe=Pe.palette_offset,Oe=Pe.transparent_index;Oe===null&&(Oe=256);var He=Pe.width,Ue=a-He,ct=He,Se=4*(Pe.y*a+Pe.x),Ie=4*((Pe.y+Pe.height)*a+Pe.x),je=Se,Ze=4*Ue;Pe.interlaced===!0&&(Ze+=4*a*7);for(var Be=8,Je=0,dt=De.length;Je<dt;++Je){var ut=De[Je];if(ct===0&&(ct=He,(je+=Ze)>=Ie&&(Ze=4*Ue+4*a*(Be-1),je=Se+(He+Ue)*(Be<<1),Be>>=1)),ut===Oe)je+=4;else{var Ae=t[qe+3*ut],Dt=t[qe+3*ut+1],Lt=t[qe+3*ut+2];ke[je++]=Ae,ke[je++]=Dt,ke[je++]=Lt,ke[je++]=255}--ct}}}function lH(t,e,a,r){for(var i=t[e++],l=1<<i,c=l+1,n=c+1,v=i+1,R=(1<<v)-1,x=0,N=0,I=0,k=t[e++],Z=new Int32Array(4096),$=null;;){for(;x<16&&k!==0;)N|=t[e++]<<x,x+=8,k===1?k=t[e++]:--k;if(x<v)break;var H=N&R;if(N>>=v,x-=v,H!==l){if(H===c)break;for(var W=H<n?H:$,ee=0,oe=W;oe>l;)oe=Z[oe]>>8,++ee;var pe=oe;if(I+ee+(W!==H?1:0)>r)return void fo.log("Warning, gif stream longer than expected.");a[I++]=pe;var le=I+=ee;for(W!==H&&(a[I++]=pe),oe=W;ee--;)oe=Z[oe],a[--le]=255&oe,oe>>=8;$!==null&&n<4096&&(Z[n++]=$<<8|pe,n>=R+1&&v<12&&(++v,R=R<<1|1)),$=H}else n=c+1,R=(1<<(v=i+1))-1,$=null}return I!==r&&fo.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function C5(t){var e,a,r,i,l,c=Math.floor,n=new Array(64),v=new Array(64),R=new Array(64),x=new Array(64),N=new Array(65535),I=new Array(65535),k=new Array(64),Z=new Array(64),$=[],H=0,W=7,ee=new Array(64),oe=new Array(64),pe=new Array(64),le=new Array(256),ge=new Array(2048),ue=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],we=[0,1,2,3,4,5,6,7,8,9,10,11],Ne=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ne=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_e=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ke=[0,1,2,3,4,5,6,7,8,9,10,11],Pe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function De(Se,Ie){for(var je=0,Ze=0,Be=new Array,Je=1;Je<=16;Je++){for(var dt=1;dt<=Se[Je];dt++)Be[Ie[Ze]]=[],Be[Ie[Ze]][0]=je,Be[Ie[Ze]][1]=Je,Ze++,je++;je*=2}return Be}function qe(Se){for(var Ie=Se[0],je=Se[1]-1;je>=0;)Ie&1<<je&&(H|=1<<W),je--,--W<0&&(H==255?(Oe(255),Oe(0)):Oe(H),W=7,H=0)}function Oe(Se){$.push(Se)}function He(Se){Oe(Se>>8&255),Oe(255&Se)}function Ue(Se,Ie,je,Ze,Be){for(var Je,dt=Be[0],ut=Be[240],Ae=function(za,ar){var ur,or,Cr,Ia,Fr,tn,lr,wr,na,Oa,ra=0;for(na=0;na<8;++na){ur=za[ra],or=za[ra+1],Cr=za[ra+2],Ia=za[ra+3],Fr=za[ra+4],tn=za[ra+5],lr=za[ra+6];var ja=ur+(wr=za[ra+7]),gr=ur-wr,Tn=or+lr,an=or-lr,dn=Cr+tn,Yr=Cr-tn,Pr=Ia+Fr,ki=Ia-Fr,gi=ja+Pr,oi=ja-Pr,Cs=Tn+dn,Aa=Tn-dn;za[ra]=gi+Cs,za[ra+4]=gi-Cs;var mr=.707106781*(Aa+oi);za[ra+2]=oi+mr,za[ra+6]=oi-mr;var Zr=.382683433*((gi=ki+Yr)-(Aa=an+gr)),ti=.5411961*gi+Zr,Rn=1.306562965*Aa+Zr,Zt=.707106781*(Cs=Yr+an),xe=gr+Zt,Le=gr-Zt;za[ra+5]=Le+ti,za[ra+3]=Le-ti,za[ra+1]=xe+Rn,za[ra+7]=xe-Rn,ra+=8}for(ra=0,na=0;na<8;++na){ur=za[ra],or=za[ra+8],Cr=za[ra+16],Ia=za[ra+24],Fr=za[ra+32],tn=za[ra+40],lr=za[ra+48];var $e=ur+(wr=za[ra+56]),yt=ur-wr,At=or+lr,bt=or-lr,Gt=Cr+tn,Et=Cr-tn,Wt=Ia+Fr,Yt=Ia-Fr,Kt=$e+Wt,Sa=$e-Wt,Fa=At+Gt,qa=At-Gt;za[ra]=Kt+Fa,za[ra+32]=Kt-Fa;var br=.707106781*(qa+Sa);za[ra+16]=Sa+br,za[ra+48]=Sa-br;var Ir=.382683433*((Kt=Yt+Et)-(qa=bt+yt)),Lr=.5411961*Kt+Ir,Wr=1.306562965*qa+Ir,Un=.707106781*(Fa=Et+bt),ri=yt+Un,Jr=yt-Un;za[ra+40]=Jr+Lr,za[ra+24]=Jr-Lr,za[ra+8]=ri+Wr,za[ra+56]=ri-Wr,ra++}for(na=0;na<64;++na)Oa=za[na]*ar[na],k[na]=Oa>0?Oa+.5|0:Oa-.5|0;return k}(Se,Ie),Dt=0;Dt<64;++Dt)Z[ue[Dt]]=Ae[Dt];var Lt=Z[0]-je;je=Z[0],Lt==0?qe(Ze[0]):(qe(Ze[I[Je=32767+Lt]]),qe(N[Je]));for(var fa=63;fa>0&&Z[fa]==0;)fa--;if(fa==0)return qe(dt),je;for(var Nt,Ht=1;Ht<=fa;){for(var wt=Ht;Z[Ht]==0&&Ht<=fa;)++Ht;var fr=Ht-wt;if(fr>=16){Nt=fr>>4;for(var Ca=1;Ca<=Nt;++Ca)qe(ut);fr&=15}Je=32767+Z[Ht],qe(Be[(fr<<4)+I[Je]]),qe(N[Je]),Ht++}return fa!=63&&qe(dt),je}function ct(Se){Se=Math.min(Math.max(Se,1),100),l!=Se&&(function(Ie){for(var je=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ze=0;Ze<64;Ze++){var Be=c((je[Ze]*Ie+50)/100);Be=Math.min(Math.max(Be,1),255),n[ue[Ze]]=Be}for(var Je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],dt=0;dt<64;dt++){var ut=c((Je[dt]*Ie+50)/100);ut=Math.min(Math.max(ut,1),255),v[ue[dt]]=ut}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Dt=0,Lt=0;Lt<8;Lt++)for(var fa=0;fa<8;fa++)R[Dt]=1/(n[ue[Dt]]*Ae[Lt]*Ae[fa]*8),x[Dt]=1/(v[ue[Dt]]*Ae[Lt]*Ae[fa]*8),Dt++}(Se<50?Math.floor(5e3/Se):Math.floor(200-2*Se)),l=Se)}this.encode=function(Se,Ie){Ie&&ct(Ie),$=new Array,H=0,W=7,He(65496),He(65504),He(16),Oe(74),Oe(70),Oe(73),Oe(70),Oe(0),Oe(1),Oe(1),Oe(0),He(1),He(1),Oe(0),Oe(0),function(){He(65499),He(132),Oe(0);for(var or=0;or<64;or++)Oe(n[or]);Oe(1);for(var Cr=0;Cr<64;Cr++)Oe(v[Cr])}(),function(or,Cr){He(65472),He(17),Oe(8),He(Cr),He(or),Oe(3),Oe(1),Oe(17),Oe(0),Oe(2),Oe(17),Oe(1),Oe(3),Oe(17),Oe(1)}(Se.width,Se.height),function(){He(65476),He(418),Oe(0);for(var or=0;or<16;or++)Oe(Re[or+1]);for(var Cr=0;Cr<=11;Cr++)Oe(we[Cr]);Oe(16);for(var Ia=0;Ia<16;Ia++)Oe(Ne[Ia+1]);for(var Fr=0;Fr<=161;Fr++)Oe(ne[Fr]);Oe(1);for(var tn=0;tn<16;tn++)Oe(_e[tn+1]);for(var lr=0;lr<=11;lr++)Oe(ke[lr]);Oe(17);for(var wr=0;wr<16;wr++)Oe(Pe[wr+1]);for(var na=0;na<=161;na++)Oe(Ee[na])}(),He(65498),He(12),Oe(3),Oe(1),Oe(0),Oe(2),Oe(17),Oe(3),Oe(17),Oe(0),Oe(63),Oe(0);var je=0,Ze=0,Be=0;H=0,W=7,this.encode.displayName="_encode_";for(var Je,dt,ut,Ae,Dt,Lt,fa,Nt,Ht,wt=Se.data,fr=Se.width,Ca=Se.height,za=4*fr,ar=0;ar<Ca;){for(Je=0;Je<za;){for(Dt=za*ar+Je,fa=-1,Nt=0,Ht=0;Ht<64;Ht++)Lt=Dt+(Nt=Ht>>3)*za+(fa=4*(7&Ht)),ar+Nt>=Ca&&(Lt-=za*(ar+1+Nt-Ca)),Je+fa>=za&&(Lt-=Je+fa-za+4),dt=wt[Lt++],ut=wt[Lt++],Ae=wt[Lt++],ee[Ht]=(ge[dt]+ge[ut+256>>0]+ge[Ae+512>>0]>>16)-128,oe[Ht]=(ge[dt+768>>0]+ge[ut+1024>>0]+ge[Ae+1280>>0]>>16)-128,pe[Ht]=(ge[dt+1280>>0]+ge[ut+1536>>0]+ge[Ae+1792>>0]>>16)-128;je=Ue(ee,R,je,e,r),Ze=Ue(oe,x,Ze,a,i),Be=Ue(pe,x,Be,a,i),Je+=32}ar+=8}if(W>=0){var ur=[];ur[1]=W+1,ur[0]=(1<<W+1)-1,qe(ur)}return He(65497),new Uint8Array($)},t=t||50,function(){for(var Se=String.fromCharCode,Ie=0;Ie<256;Ie++)le[Ie]=Se(Ie)}(),e=De(Re,we),a=De(_e,ke),r=De(Ne,ne),i=De(Pe,Ee),function(){for(var Se=1,Ie=2,je=1;je<=15;je++){for(var Ze=Se;Ze<Ie;Ze++)I[32767+Ze]=je,N[32767+Ze]=[],N[32767+Ze][1]=je,N[32767+Ze][0]=Ze;for(var Be=-(Ie-1);Be<=-Se;Be++)I[32767+Be]=je,N[32767+Be]=[],N[32767+Be][1]=je,N[32767+Be][0]=Ie-1+Be;Se<<=1,Ie<<=1}}(),function(){for(var Se=0;Se<256;Se++)ge[Se]=19595*Se,ge[Se+256>>0]=38470*Se,ge[Se+512>>0]=7471*Se+32768,ge[Se+768>>0]=-11059*Se,ge[Se+1024>>0]=-21709*Se,ge[Se+1280>>0]=32768*Se+8421375,ge[Se+1536>>0]=-27439*Se,ge[Se+1792>>0]=-5329*Se}(),ct(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function kp(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uH(t){function e(Re){if(!Re)throw Error("assert :P")}function a(Re,we,Ne){for(var ne=0;4>ne;ne++)if(Re[we+ne]!=Ne.charCodeAt(ne))return!0;return!1}function r(Re,we,Ne,ne,_e){for(var ke=0;ke<_e;ke++)Re[we+ke]=Ne[ne+ke]}function i(Re,we,Ne,ne){for(var _e=0;_e<ne;_e++)Re[we+_e]=Ne}function l(Re){return new Int32Array(Re)}function c(Re,we){for(var Ne=[],ne=0;ne<Re;ne++)Ne.push(new we);return Ne}function n(Re,we){var Ne=[];return function ne(_e,ke,Pe){for(var Ee=Pe[ke],De=0;De<Ee&&(_e.push(Pe.length>ke+1?[]:new we),!(Pe.length<ke+1));De++)ne(_e[De],ke+1,Pe)}(Ne,0,Re),Ne}var v=function(){var Re=this;function we(G,Q){for(var ye=1<<Q-1>>>0;G&ye;)ye>>>=1;return ye?(G&ye-1)+ye:G}function Ne(G,Q,ye,Me,We){e(!(Me%ye));do G[Q+(Me-=ye)]=We;while(0<Me)}function ne(G,Q,ye,Me,We){if(e(2328>=We),512>=We)var rt=l(512);else if((rt=l(We))==null)return 0;return function(it,ht,mt,St,ea,Pt){var wa,sa,Ta=ht,ma=1<<mt,Rt=l(16),aa=l(16);for(e(ea!=0),e(St!=null),e(it!=null),e(0<mt),sa=0;sa<ea;++sa){if(15<St[sa])return 0;++Rt[St[sa]]}if(Rt[0]==ea)return 0;for(aa[1]=0,wa=1;15>wa;++wa){if(Rt[wa]>1<<wa)return 0;aa[wa+1]=aa[wa]+Rt[wa]}for(sa=0;sa<ea;++sa)wa=St[sa],0<St[sa]&&(Pt[aa[wa]++]=sa);if(aa[15]==1)return(St=new _e).g=0,St.value=Pt[0],Ne(it,Ta,1,ma,St),ma;var Ha,Ja=-1,Wa=ma-1,Vr=0,_r=1,fn=1,pr=1<<mt;for(sa=0,wa=1,ea=2;wa<=mt;++wa,ea<<=1){if(_r+=fn<<=1,0>(fn-=Rt[wa]))return 0;for(;0<Rt[wa];--Rt[wa])(St=new _e).g=wa,St.value=Pt[sa++],Ne(it,Ta+Vr,ea,pr,St),Vr=we(Vr,wa)}for(wa=mt+1,ea=2;15>=wa;++wa,ea<<=1){if(_r+=fn<<=1,0>(fn-=Rt[wa]))return 0;for(;0<Rt[wa];--Rt[wa]){if(St=new _e,(Vr&Wa)!=Ja){for(Ta+=pr,Ha=1<<(Ja=wa)-mt;15>Ja&&!(0>=(Ha-=Rt[Ja]));)++Ja,Ha<<=1;ma+=pr=1<<(Ha=Ja-mt),it[ht+(Ja=Vr&Wa)].g=Ha+mt,it[ht+Ja].value=Ta-ht-Ja}St.g=wa-mt,St.value=Pt[sa++],Ne(it,Ta+(Vr>>mt),ea,pr,St),Vr=we(Vr,wa)}}return _r!=2*aa[15]-1?0:ma}(G,Q,ye,Me,We,rt)}function _e(){this.value=this.g=0}function ke(){this.value=this.g=0}function Pe(){this.G=c(5,_e),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ms,ke)}function Ee(G,Q,ye,Me){e(G!=null),e(Q!=null),e(2147483648>Me),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=Q,G.pa=ye,G.Jd=Q,G.Yc=ye+Me,G.Zc=4<=Me?ye+Me-4+1:ye,Je(G)}function De(G,Q){for(var ye=0;0<Q--;)ye|=ut(G,128)<<Q;return ye}function qe(G,Q){var ye=De(G,Q);return dt(G)?-ye:ye}function Oe(G,Q,ye,Me){var We,rt=0;for(e(G!=null),e(Q!=null),e(4294967288>Me),G.Sb=Me,G.Ra=0,G.u=0,G.h=0,4<Me&&(Me=4),We=0;We<Me;++We)rt+=Q[ye+We]<<8*We;G.Ra=rt,G.bb=Me,G.oa=Q,G.pa=ye}function He(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<Da-8>>>0,++G.bb,G.u-=8;je(G)&&(G.h=1,G.u=0)}function Ue(G,Q){if(e(0<=Q),!G.h&&Q<=_c){var ye=Ie(G)&Si[Q];return G.u+=Q,He(G),ye}return G.h=1,G.u=0}function ct(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Se(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ie(G){return G.Ra>>>(G.u&Da-1)>>>0}function je(G){return e(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>Da}function Ze(G,Q){G.u=Q,G.h=je(G)}function Be(G){G.u>=Id&&(e(G.u>=Id),He(G))}function Je(G){e(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(e(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function dt(G){return De(G,1)}function ut(G,Q){var ye=G.Ca;0>G.b&&Je(G);var Me=G.b,We=ye*Q>>>8,rt=(G.I>>>Me>We)+0;for(rt?(ye-=We,G.I-=We+1<<Me>>>0):ye=We+1,Me=ye,We=0;256<=Me;)We+=8,Me>>=8;return Me=7^We+Js[Me],G.b-=Me,G.Ca=(ye<<Me)-1,rt}function Ae(G,Q,ye){G[Q+0]=ye>>24&255,G[Q+1]=ye>>16&255,G[Q+2]=ye>>8&255,G[Q+3]=ye>>0&255}function Dt(G,Q){return G[Q+0]<<0|G[Q+1]<<8}function Lt(G,Q){return Dt(G,Q)|G[Q+2]<<16}function fa(G,Q){return Dt(G,Q)|Dt(G,Q+2)<<16}function Nt(G,Q){var ye=1<<Q;return e(G!=null),e(0<Q),G.X=l(ye),G.X==null?0:(G.Mb=32-Q,G.Xa=Q,1)}function Ht(G,Q){e(G!=null),e(Q!=null),e(G.Xa==Q.Xa),r(Q.X,0,G.X,0,1<<Q.Xa)}function wt(){this.X=[],this.Xa=this.Mb=0}function fr(G,Q,ye,Me){e(ye!=null),e(Me!=null);var We=ye[0],rt=Me[0];return We==0&&(We=(G*rt+Q/2)/Q),rt==0&&(rt=(Q*We+G/2)/G),0>=We||0>=rt?0:(ye[0]=We,Me[0]=rt,1)}function Ca(G,Q){return G+(1<<Q)-1>>>Q}function za(G,Q){return((4278255360&G)+(4278255360&Q)>>>0&4278255360)+((16711935&G)+(16711935&Q)>>>0&16711935)>>>0}function ar(G,Q){Re[Q]=function(ye,Me,We,rt,it,ht,mt){var St;for(St=0;St<it;++St){var ea=Re[G](ht[mt+St-1],We,rt+St);ht[mt+St]=za(ye[Me+St],ea)}}}function ur(){this.ud=this.hd=this.jd=0}function or(G,Q){return((4278124286&(G^Q))>>>1)+(G&Q)>>>0}function Cr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function Ia(G,Q){return Cr(G+(G-Q+.5>>1))}function Fr(G,Q,ye){return Math.abs(Q-ye)-Math.abs(G-ye)}function tn(G,Q,ye,Me,We,rt,it){for(Me=rt[it-1],ye=0;ye<We;++ye)rt[it+ye]=Me=za(G[Q+ye],Me)}function lr(G,Q,ye,Me,We){var rt;for(rt=0;rt<ye;++rt){var it=G[Q+rt],ht=it>>8&255,mt=16711935&(mt=(mt=16711935&it)+((ht<<16)+ht));Me[We+rt]=(4278255360&it)+mt>>>0}}function wr(G,Q){Q.jd=G>>0&255,Q.hd=G>>8&255,Q.ud=G>>16&255}function na(G,Q,ye,Me,We,rt){var it;for(it=0;it<Me;++it){var ht=Q[ye+it],mt=ht>>>8,St=ht,ea=255&(ea=(ea=ht>>>16)+((G.jd<<24>>24)*(mt<<24>>24)>>>5));St=255&(St=(St=St+((G.hd<<24>>24)*(mt<<24>>24)>>>5))+((G.ud<<24>>24)*(ea<<24>>24)>>>5)),We[rt+it]=(4278255360&ht)+(ea<<16)+St}}function Oa(G,Q,ye,Me,We){Re[Q]=function(rt,it,ht,mt,St,ea,Pt,wa,sa){for(mt=Pt;mt<wa;++mt)for(Pt=0;Pt<sa;++Pt)St[ea++]=We(ht[Me(rt[it++])])},Re[G]=function(rt,it,ht,mt,St,ea,Pt){var wa=8>>rt.b,sa=rt.Ea,Ta=rt.K[0],ma=rt.w;if(8>wa)for(rt=(1<<rt.b)-1,ma=(1<<wa)-1;it<ht;++it){var Rt,aa=0;for(Rt=0;Rt<sa;++Rt)Rt&rt||(aa=Me(mt[St++])),ea[Pt++]=We(Ta[aa&ma]),aa>>=wa}else Re["VP8LMapColor"+ye](mt,St,Ta,ma,ea,Pt,it,ht,sa)}}function ra(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var rt=G[Q++];Me[We++]=rt>>16&255,Me[We++]=rt>>8&255,Me[We++]=rt>>0&255}}function ja(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var rt=G[Q++];Me[We++]=rt>>16&255,Me[We++]=rt>>8&255,Me[We++]=rt>>0&255,Me[We++]=rt>>24&255}}function gr(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var rt=(it=G[Q++])>>16&240|it>>12&15,it=it>>0&240|it>>28&15;Me[We++]=rt,Me[We++]=it}}function Tn(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var rt=(it=G[Q++])>>16&248|it>>13&7,it=it>>5&224|it>>3&31;Me[We++]=rt,Me[We++]=it}}function an(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var rt=G[Q++];Me[We++]=rt>>0&255,Me[We++]=rt>>8&255,Me[We++]=rt>>16&255}}function dn(G,Q,ye,Me,We,rt){if(rt==0)for(ye=Q+ye;Q<ye;)Ae(Me,((rt=G[Q++])[0]>>24|rt[1]>>8&65280|rt[2]<<8&16711680|rt[3]<<24)>>>0),We+=32;else r(Me,We,G,Q,ye)}function Yr(G,Q){Re[Q][0]=Re[G+"0"],Re[Q][1]=Re[G+"1"],Re[Q][2]=Re[G+"2"],Re[Q][3]=Re[G+"3"],Re[Q][4]=Re[G+"4"],Re[Q][5]=Re[G+"5"],Re[Q][6]=Re[G+"6"],Re[Q][7]=Re[G+"7"],Re[Q][8]=Re[G+"8"],Re[Q][9]=Re[G+"9"],Re[Q][10]=Re[G+"10"],Re[Q][11]=Re[G+"11"],Re[Q][12]=Re[G+"12"],Re[Q][13]=Re[G+"13"],Re[Q][14]=Re[G+"0"],Re[Q][15]=Re[G+"0"]}function Pr(G){return G==Nu||G==Ju||G==Sc||G==rm}function ki(){this.eb=[],this.size=this.A=this.fb=0}function gi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ki,this.f.kb=new gi,this.sd=null}function Cs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Aa(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mr(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function Zr(G,Q){var ye=G.T,Me=Q.ba.f.RGBA,We=Me.eb,rt=Me.fb+G.ka*Me.A,it=ul[Q.ba.S],ht=G.y,mt=G.O,St=G.f,ea=G.N,Pt=G.ea,wa=G.W,sa=Q.cc,Ta=Q.dc,ma=Q.Mc,Rt=Q.Nc,aa=G.ka,Ha=G.ka+G.T,Ja=G.U,Wa=Ja+1>>1;for(aa==0?it(ht,mt,null,null,St,ea,Pt,wa,St,ea,Pt,wa,We,rt,null,null,Ja):(it(Q.ec,Q.fc,ht,mt,sa,Ta,ma,Rt,St,ea,Pt,wa,We,rt-Me.A,We,rt,Ja),++ye);aa+2<Ha;aa+=2)sa=St,Ta=ea,ma=Pt,Rt=wa,ea+=G.Rc,wa+=G.Rc,rt+=2*Me.A,it(ht,(mt+=2*G.fa)-G.fa,ht,mt,sa,Ta,ma,Rt,St,ea,Pt,wa,We,rt-Me.A,We,rt,Ja);return mt+=G.fa,G.j+Ha<G.o?(r(Q.ec,Q.fc,ht,mt,Ja),r(Q.cc,Q.dc,St,ea,Wa),r(Q.Mc,Q.Nc,Pt,wa,Wa),ye--):1&Ha||it(ht,mt,null,null,St,ea,Pt,wa,St,ea,Pt,wa,We,rt+Me.A,null,null,Ja),ye}function ti(G,Q,ye){var Me=G.F,We=[G.J];if(Me!=null){var rt=G.U,it=Q.ba.S,ht=it==ol||it==Sc;Q=Q.ba.f.RGBA;var mt=[0],St=G.ka;mt[0]=G.T,G.Kb&&(St==0?--mt[0]:(--St,We[0]-=G.width),G.j+G.ka+G.T==G.o&&(mt[0]=G.o-G.j-St));var ea=Q.eb;St=Q.fb+St*Q.A,G=li(Me,We[0],G.width,rt,mt,ea,St+(ht?0:3),Q.A),e(ye==mt),G&&Pr(it)&&As(ea,St,ht,rt,mt,Q.A)}return 0}function Rn(G){var Q=G.ma,ye=Q.ba.S,Me=11>ye,We=ye==Ud||ye==Hh||ye==ol||ye==_l||ye==12||Pr(ye);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!iu(Q.Oa,G,We?11:12))return 0;if(We&&Pr(ye)&&ir(),G.da)alert("todo:use_scaling");else{if(Me){if(Q.Ib=mr,G.Kb){if(ye=G.U+1>>1,Q.memory=l(G.U+2*ye),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+G.U,Q.Mc=Q.cc,Q.Nc=Q.dc+ye,Q.Ib=Zr,ir()}}else alert("todo:EmitYUV");We&&(Q.Jb=ti,Me&&pa())}if(Me&&!ec){for(G=0;256>G;++G)Qc[G]=89858*(G-128)+zu>>Zd,ed[G]=-22014*(G-128)+zu,Hd[G]=-45773*(G-128),cp[G]=113618*(G-128)+zu>>Zd;for(G=qd;G<Jc;++G)Q=76283*(G-16)+zu>>Zd,Gs[G-qd]=vl(Q,255),sm[G-qd]=vl(Q+8>>4,15);ec=1}return 1}function Zt(G){var Q=G.ma,ye=G.U,Me=G.T;return e(!(1&G.ka)),0>=ye||0>=Me?0:(ye=Q.Ib(G,Q),Q.Jb!=null&&Q.Jb(G,Q,ye),Q.Dc+=ye,1)}function xe(G){G.ma.memory=null}function Le(G,Q,ye,Me){return Ue(G,8)!=47?0:(Q[0]=Ue(G,14)+1,ye[0]=Ue(G,14)+1,Me[0]=Ue(G,1),Ue(G,3)!=0?0:!G.h)}function $e(G,Q){if(4>G)return G+1;var ye=G-2>>1;return(2+(1&G)<<ye)+Ue(Q,ye)+1}function yt(G,Q){return 120<Q?Q-120:1<=(ye=((ye=uu[Q-1])>>4)*G+(8-(15&ye)))?ye:1;var ye}function At(G,Q,ye){var Me=Ie(ye),We=G[Q+=255&Me].g-8;return 0<We&&(Ze(ye,ye.u+8),Me=Ie(ye),Q+=G[Q].value,Q+=Me&(1<<We)-1),Ze(ye,ye.u+G[Q].g),G[Q].value}function bt(G,Q,ye){return ye.g+=G.g,ye.value+=G.value<<Q>>>0,e(8>=ye.g),G.g}function Gt(G,Q,ye){var Me=G.xc;return e((Q=Me==0?0:G.vc[G.md*(ye>>Me)+(Q>>Me)])<G.Wb),G.Ya[Q]}function Et(G,Q,ye,Me){var We=G.ab,rt=G.c*Q,it=G.C;Q=it+Q;var ht=ye,mt=Me;for(Me=G.Ta,ye=G.Ua;0<We--;){var St=G.gc[We],ea=it,Pt=Q,wa=ht,sa=mt,Ta=(mt=Me,ht=ye,St.Ea);switch(e(ea<Pt),e(Pt<=St.nc),St.hc){case 2:qh(wa,sa,(Pt-ea)*Ta,mt,ht);break;case 0:var ma=ea,Rt=Pt,aa=mt,Ha=ht,Ja=(pr=St).Ea;ma==0&&(Ao(wa,sa,null,null,1,aa,Ha),tn(wa,sa+1,0,0,Ja-1,aa,Ha+1),sa+=Ja,Ha+=Ja,++ma);for(var Wa=1<<pr.b,Vr=Wa-1,_r=Ca(Ja,pr.b),fn=pr.K,pr=pr.w+(ma>>pr.b)*_r;ma<Rt;){var xi=fn,Ii=pr,Yn=1;for(Pf(wa,sa,aa,Ha-Ja,1,aa,Ha);Yn<Ja;){var ui=(Yn&~Vr)+Wa;ui>Ja&&(ui=Ja),(0,su[xi[Ii++]>>8&15])(wa,sa+ +Yn,aa,Ha+Yn-Ja,ui-Yn,aa,Ha+Yn),Yn=ui}sa+=Ja,Ha+=Ja,++ma&Vr||(pr+=_r)}Pt!=St.nc&&r(mt,ht-Ta,mt,ht+(Pt-ea-1)*Ta,Ta);break;case 1:for(Ta=wa,Rt=sa,Ja=(wa=St.Ea)-(Ha=wa&~(aa=(sa=1<<St.b)-1)),ma=Ca(wa,St.b),Wa=St.K,St=St.w+(ea>>St.b)*ma;ea<Pt;){for(Vr=Wa,_r=St,fn=new ur,pr=Rt+Ha,xi=Rt+wa;Rt<pr;)wr(Vr[_r++],fn),wh(fn,Ta,Rt,sa,mt,ht),Rt+=sa,ht+=sa;Rt<xi&&(wr(Vr[_r++],fn),wh(fn,Ta,Rt,Ja,mt,ht),Rt+=Ja,ht+=Ja),++ea&aa||(St+=ma)}break;case 3:if(wa==mt&&sa==ht&&0<St.b){for(Rt=mt,wa=Ta=ht+(Pt-ea)*Ta-(Ha=(Pt-ea)*Ca(St.Ea,St.b)),sa=mt,aa=ht,ma=[],Ha=(Ja=Ha)-1;0<=Ha;--Ha)ma[Ha]=sa[aa+Ha];for(Ha=Ja-1;0<=Ha;--Ha)Rt[wa+Ha]=ma[Ha];vo(St,ea,Pt,mt,Ta,mt,ht)}else vo(St,ea,Pt,wa,sa,mt,ht)}ht=Me,mt=ye}mt!=ye&&r(Me,ye,ht,mt,rt)}function Wt(G,Q){var ye=G.V,Me=G.Ba+G.c*G.C,We=Q-G.C;if(e(Q<=G.l.o),e(16>=We),0<We){var rt=G.l,it=G.Ta,ht=G.Ua,mt=rt.width;if(Et(G,We,ye,Me),We=ht=[ht],e((ye=G.C)<(Me=Q)),e(rt.v<rt.va),Me>rt.o&&(Me=rt.o),ye<rt.j){var St=rt.j-ye;ye=rt.j,We[0]+=St*mt}if(ye>=Me?ye=0:(We[0]+=4*rt.v,rt.ka=ye-rt.j,rt.U=rt.va-rt.v,rt.T=Me-ye,ye=1),ye){if(ht=ht[0],11>(ye=G.ca).S){var ea=ye.f.RGBA,Pt=(Me=ye.S,We=rt.U,rt=rt.T,St=ea.eb,ea.A),wa=rt;for(ea=ea.fb+G.Ma*ea.A;0<wa--;){var sa=it,Ta=ht,ma=We,Rt=St,aa=ea;switch(Me){case Cc:Ml(sa,Ta,ma,Rt,aa);break;case Ud:No(sa,Ta,ma,Rt,aa);break;case Nu:No(sa,Ta,ma,Rt,aa),As(Rt,aa,0,ma,1,0);break;case yi:Il(sa,Ta,ma,Rt,aa);break;case Hh:dn(sa,Ta,ma,Rt,aa,1);break;case Ju:dn(sa,Ta,ma,Rt,aa,1),As(Rt,aa,0,ma,1,0);break;case ol:dn(sa,Ta,ma,Rt,aa,0);break;case Sc:dn(sa,Ta,ma,Rt,aa,0),As(Rt,aa,1,ma,1,0);break;case _l:Ld(sa,Ta,ma,Rt,aa);break;case rm:Ld(sa,Ta,ma,Rt,aa),ai(Rt,aa,ma,1,0);break;case Yc:Zc(sa,Ta,ma,Rt,aa);break;default:e(0)}ht+=mt,ea+=Pt}G.Ma+=rt}else alert("todo:EmitRescaledRowsYUVA");e(G.Ma<=ye.height)}}G.C=Q,e(G.C<=G.i)}function Yt(G){var Q;if(0<G.ua)return 0;for(Q=0;Q<G.Wb;++Q){var ye=G.Ya[Q].G,Me=G.Ya[Q].H;if(0<ye[1][Me[1]+0].g||0<ye[2][Me[2]+0].g||0<ye[3][Me[3]+0].g)return 0}return 1}function Kt(G,Q,ye,Me,We,rt){if(G.Z!=0){var it=G.qd,ht=G.rd;for(e(wl[G.Z]!=null);Q<ye;++Q)wl[G.Z](it,ht,Me,We,Me,We,rt),it=Me,ht=We,We+=rt;G.qd=it,G.rd=ht}}function Sa(G,Q){var ye=G.l.ma,Me=ye.Z==0||ye.Z==1?G.l.j:G.C;if(Me=G.C<Me?Me:G.C,e(Q<=G.l.o),Q>Me){var We=G.l.width,rt=ye.ca,it=ye.tb+We*Me,ht=G.V,mt=G.Ba+G.c*Me,St=G.gc;e(G.ab==1),e(St[0].hc==3),Dl(St[0],Me,Q,ht,mt,rt,it),Kt(ye,Me,Q,rt,it,We)}G.C=G.Ma=Q}function Fa(G,Q,ye,Me,We,rt,it){var ht=G.$/Me,mt=G.$%Me,St=G.m,ea=G.s,Pt=ye+G.$,wa=Pt;We=ye+Me*We;var sa=ye+Me*rt,Ta=280+ea.ua,ma=G.Pb?ht:16777216,Rt=0<ea.ua?ea.Wa:null,aa=ea.wc,Ha=Pt<sa?Gt(ea,mt,ht):null;e(G.C<rt),e(sa<=We);var Ja=!1;e:for(;;){for(;Ja||Pt<sa;){var Wa=0;if(ht>=ma){var Vr=Pt-ye;e((ma=G).Pb),ma.wd=ma.m,ma.xd=Vr,0<ma.s.ua&&Ht(ma.s.Wa,ma.s.vb),ma=ht+up}if(mt&aa||(Ha=Gt(ea,mt,ht)),e(Ha!=null),Ha.Qb&&(Q[Pt]=Ha.qb,Ja=!0),!Ja)if(Be(St),Ha.jc){Wa=St,Vr=Q;var _r=Pt,fn=Ha.pd[Ie(Wa)&Ms-1];e(Ha.jc),256>fn.g?(Ze(Wa,Wa.u+fn.g),Vr[_r]=fn.value,Wa=0):(Ze(Wa,Wa.u+fn.g-256),e(256<=fn.value),Wa=fn.value),Wa==0&&(Ja=!0)}else Wa=At(Ha.G[0],Ha.H[0],St);if(St.h)break;if(Ja||256>Wa){if(!Ja)if(Ha.nd)Q[Pt]=(Ha.qb|Wa<<8)>>>0;else{if(Be(St),Ja=At(Ha.G[1],Ha.H[1],St),Be(St),Vr=At(Ha.G[2],Ha.H[2],St),_r=At(Ha.G[3],Ha.H[3],St),St.h)break;Q[Pt]=(_r<<24|Ja<<16|Wa<<8|Vr)>>>0}if(Ja=!1,++Pt,++mt>=Me&&(mt=0,++ht,it!=null&&ht<=rt&&!(ht%16)&&it(G,ht),Rt!=null))for(;wa<Pt;)Wa=Q[wa++],Rt.X[(506832829*Wa&4294967295)>>>Rt.Mb]=Wa}else if(280>Wa){if(Wa=$e(Wa-256,St),Vr=At(Ha.G[4],Ha.H[4],St),Be(St),Vr=yt(Me,Vr=$e(Vr,St)),St.h)break;if(Pt-ye<Vr||We-Pt<Wa)break e;for(_r=0;_r<Wa;++_r)Q[Pt+_r]=Q[Pt+_r-Vr];for(Pt+=Wa,mt+=Wa;mt>=Me;)mt-=Me,++ht,it!=null&&ht<=rt&&!(ht%16)&&it(G,ht);if(e(Pt<=We),mt&aa&&(Ha=Gt(ea,mt,ht)),Rt!=null)for(;wa<Pt;)Wa=Q[wa++],Rt.X[(506832829*Wa&4294967295)>>>Rt.Mb]=Wa}else{if(!(Wa<Ta))break e;for(Ja=Wa-280,e(Rt!=null);wa<Pt;)Wa=Q[wa++],Rt.X[(506832829*Wa&4294967295)>>>Rt.Mb]=Wa;Wa=Pt,e(!(Ja>>>(Vr=Rt).Xa)),Q[Wa]=Vr.X[Ja],Ja=!0}Ja||e(St.h==je(St))}if(G.Pb&&St.h&&Pt<We)e(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&Ht(G.s.vb,G.s.Wa);else{if(St.h)break e;it!=null&&it(G,ht>rt?rt:ht),G.a=0,G.$=Pt-ye}return 1}return G.a=3,0}function qa(G){e(G!=null),G.vc=null,G.yc=null,G.Ya=null;var Q=G.Wa;Q!=null&&(Q.X=null),G.vb=null,e(G!=null)}function br(){var G=new tg;return G==null?null:(G.a=0,G.xb=Xh,Yr("Predictor","VP8LPredictors"),Yr("Predictor","VP8LPredictors_C"),Yr("PredictorAdd","VP8LPredictorsAdd"),Yr("PredictorAdd","VP8LPredictorsAdd_C"),qh=lr,wh=na,Ml=ra,No=ja,Ld=gr,Zc=Tn,Il=an,Re.VP8LMapColor32b=js,Re.VP8LMapColor8b=Gc,G)}function Ir(G,Q,ye,Me,We){var rt=1,it=[G],ht=[Q],mt=Me.m,St=Me.s,ea=null,Pt=0;e:for(;;){if(ye)for(;rt&&Ue(mt,1);){var wa=it,sa=ht,Ta=Me,ma=1,Rt=Ta.m,aa=Ta.gc[Ta.ab],Ha=Ue(Rt,2);if(Ta.Oc&1<<Ha)rt=0;else{switch(Ta.Oc|=1<<Ha,aa.hc=Ha,aa.Ea=wa[0],aa.nc=sa[0],aa.K=[null],++Ta.ab,e(4>=Ta.ab),Ha){case 0:case 1:aa.b=Ue(Rt,3)+2,ma=Ir(Ca(aa.Ea,aa.b),Ca(aa.nc,aa.b),0,Ta,aa.K),aa.K=aa.K[0];break;case 3:var Ja,Wa=Ue(Rt,8)+1,Vr=16<Wa?0:4<Wa?1:2<Wa?2:3;if(wa[0]=Ca(aa.Ea,Vr),aa.b=Vr,Ja=ma=Ir(Wa,1,0,Ta,aa.K)){var _r,fn=Wa,pr=aa,xi=1<<(8>>pr.b),Ii=l(xi);if(Ii==null)Ja=0;else{var Yn=pr.K[0],ui=pr.w;for(Ii[0]=pr.K[0][0],_r=1;_r<1*fn;++_r)Ii[_r]=za(Yn[ui+_r],Ii[_r-1]);for(;_r<4*xi;++_r)Ii[_r]=0;pr.K[0]=null,pr.K[0]=Ii,Ja=1}}ma=Ja;break;case 2:break;default:e(0)}rt=ma}}if(it=it[0],ht=ht[0],rt&&Ue(mt,1)&&!(rt=1<=(Pt=Ue(mt,4))&&11>=Pt)){Me.a=3;break e}var as;if(as=rt)t:{var Hn,xn,vs,Wi=Me,$n=it,wo=ht,Pi=Pt,fs=ye,Pn=Wi.m,Hi=Wi.s,Qs=[null],Oo=1,dl=0,kl=Ou[Pi];a:for(;;){if(fs&&Ue(Pn,1)){var Is=Ue(Pn,3)+2,Ul=Ca($n,Is),Du=Ca(wo,Is),Pa=Ul*Du;if(!Ir(Ul,Du,0,Wi,Qs))break a;for(Qs=Qs[0],Hi.xc=Is,Hn=0;Hn<Pa;++Hn){var Ga=Qs[Hn]>>8&65535;Qs[Hn]=Ga,Ga>=Oo&&(Oo=Ga+1)}}if(Pn.h)break a;for(xn=0;5>xn;++xn){var rs=ll[xn];!xn&&0<Pi&&(rs+=1<<Pi),dl<rs&&(dl=rs)}var ji=c(Oo*kl,_e),qt=Oo,lm=c(qt,Pe);if(lm==null)var Th=null;else e(65536>=qt),Th=lm;var Ch=l(dl);if(Th==null||Ch==null||ji==null){Wi.a=1;break a}var Sh=ji;for(Hn=vs=0;Hn<Oo;++Hn){var Mu=Th[Hn],bh=Mu.G,tc=Mu.H,ng=0,dp=1,ig=0;for(xn=0;5>xn;++xn){rs=ll[xn],bh[xn]=Sh,tc[xn]=vs,!xn&&0<Pi&&(rs+=1<<Pi);n:{var xh,Bl=rs,ef=Wi,td=Ch,ad=Sh,hp=vs,rd=0,hl=ef.m,sg=Ue(hl,1);if(i(td,0,0,Bl),sg){var uo=Ue(hl,1)+1,Wg=Ue(hl,1),Ph=Ue(hl,Wg==0?1:8);td[Ph]=1,uo==2&&(td[Ph=Ue(hl,8)]=1);var ci=1}else{var Dn=l(19),fp=Ue(hl,4)+4;if(19<fp){ef.a=3;var Iu=0;break n}for(xh=0;xh<fp;++xh)Dn[bi[xh]]=Ue(hl,3);var $d=void 0,Lu=void 0,nd=ef,Df=Dn,tf=Bl,jl=td,Mf=0,Vo=nd.m,Kd=8,pp=c(128,_e);r:for(;ne(pp,0,7,Df,19);){if(Ue(Vo,1)){var mp=2+2*Ue(Vo,3);if(($d=2+Ue(Vo,mp))>tf)break r}else $d=tf;for(Lu=0;Lu<tf&&$d--;){Be(Vo);var Eh=pp[0+(127&Ie(Vo))];Ze(Vo,Vo.u+Eh.g);var id=Eh.value;if(16>id)jl[Lu++]=id,id!=0&&(Kd=id);else{var sd=id==16,gp=id-16,Wd=Kh[gp],Fu=Ue(Vo,$h[gp])+Wd;if(Lu+Fu>tf)break r;for(var Pc=sd?Kd:0;0<Fu--;)jl[Lu++]=Pc}}Mf=1;break r}Mf||(nd.a=3),ci=Mf}(ci=ci&&!hl.h)&&(rd=ne(ad,hp,8,td,Bl)),ci&&rd!=0?Iu=rd:(ef.a=3,Iu=0)}if(Iu==0)break a;if(dp&&ts[xn]==1&&(dp=Sh[vs].g==0),ng+=Sh[vs].g,vs+=Iu,3>=xn){var cu,Ec=Ch[0];for(cu=1;cu<rs;++cu)Ch[cu]>Ec&&(Ec=Ch[cu]);ig+=Ec}}if(Mu.nd=dp,Mu.Qb=0,dp&&(Mu.qb=(bh[3][tc[3]+0].value<<24|bh[1][tc[1]+0].value<<16|bh[2][tc[2]+0].value)>>>0,ng==0&&256>bh[0][tc[0]+0].value&&(Mu.Qb=1,Mu.qb+=bh[0][tc[0]+0].value<<8)),Mu.jc=!Mu.Qb&&6>ig,Mu.jc){var Ls,du=Mu;for(Ls=0;Ls<Ms;++Ls){var ac=Ls,eo=du.pd[ac],ku=du.G[0][du.H[0]+ac];256<=ku.value?(eo.g=ku.g+256,eo.value=ku.value):(eo.g=0,eo.value=0,ac>>=bt(ku,8,eo),ac>>=bt(du.G[1][du.H[1]+ac],16,eo),ac>>=bt(du.G[2][du.H[2]+ac],0,eo),bt(du.G[3][du.H[3]+ac],24,eo))}}}Hi.vc=Qs,Hi.Wb=Oo,Hi.Ya=Th,Hi.yc=ji,as=1;break t}as=0}if(!(rt=as)){Me.a=3;break e}if(0<Pt){if(St.ua=1<<Pt,!Nt(St.Wa,Pt)){Me.a=1,rt=0;break e}}else St.ua=0;var Nh=Me,yp=it,af=ht,Oh=Nh.s,Yd=Oh.xc;if(Nh.c=yp,Nh.i=af,Oh.md=Ca(yp,Yd),Oh.wc=Yd==0?-1:(1<<Yd)-1,ye){Me.xb=Kg;break e}if((ea=l(it*ht))==null){Me.a=1,rt=0;break e}rt=(rt=Fa(Me,ea,0,it,ht,ht,null))&&!mt.h;break e}return rt?(We!=null?We[0]=ea:(e(ea==null),e(ye)),Me.$=0,ye||qa(St)):qa(St),rt}function Lr(G,Q){var ye=G.c*G.i,Me=ye+Q+16*Q;return e(G.c<=Q),G.V=l(Me),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+ye+Q,1)}function Wr(G,Q){var ye=G.C,Me=Q-ye,We=G.V,rt=G.Ba+G.c*ye;for(e(Q<=G.l.o);0<Me;){var it=16<Me?16:Me,ht=G.l.ma,mt=G.l.width,St=mt*it,ea=ht.ca,Pt=ht.tb+mt*ye,wa=G.Ta,sa=G.Ua;Et(G,it,We,rt),es(wa,sa,ea,Pt,St),Kt(ht,ye,ye+it,ea,Pt,mt),Me-=it,We+=it*G.c,ye+=it}e(ye==Q),G.C=G.Ma=Q}function Un(){this.ub=this.yd=this.td=this.Rb=0}function ri(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Cn(){this.Yb=function(){var G=[];return function Q(ye,Me,We){for(var rt=We[Me],it=0;it<rt&&(ye.push(We.length>Me+1?[]:0),!(We.length<Me+1));it++)Q(ye[it],Me+1,We)}(G,0,[3,11]),G}()}function Qr(){this.jb=l(3),this.Wc=n([4,8],Cn),this.Xc=n([4,17],Cn)}function jn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Ui(){this.ld=this.La=this.dd=this.tc=0}function Xi(){this.Na=this.la=0}function Ps(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Es(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ui),this.Y=0,this.ya=Array(new Es),this.aa=0,this.l=new pc}function Ns(){this.y=l(16),this.f=l(8),this.ea=l(8)}function $s(){this.cb=this.a=0,this.sc="",this.m=new ct,this.Od=new Un,this.Kc=new ri,this.ed=new jn,this.Qa=new Jr,this.Ic=this.$c=this.Aa=0,this.D=new Bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,ct),this.ia=0,this.pb=c(4,Ps),this.Pa=new Qr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ns),this.Hd=0,this.rb=Array(new Xi),this.sb=0,this.wa=Array(new Ui),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Es),this.L=this.aa=0,this.gd=n([4,2],Ui),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function pc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function al(){var G=new $s;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,Bd||(Bd=Ed)),G}function Bi(G,Q,ye){return G.a==0&&(G.a=Q,G.sc=ye,G.cb=0),0}function Jl(G,Q,ye){return 3<=ye&&G[Q+0]==157&&G[Q+1]==1&&G[Q+2]==42}function jo(G,Q){if(G==null)return 0;if(G.a=0,G.sc="OK",Q==null)return Bi(G,2,"null VP8Io passed to VP8GetHeaders()");var ye=Q.data,Me=Q.w,We=Q.ha;if(4>We)return Bi(G,7,"Truncated header.");var rt=ye[Me+0]|ye[Me+1]<<8|ye[Me+2]<<16,it=G.Od;if(it.Rb=!(1&rt),it.td=rt>>1&7,it.yd=rt>>4&1,it.ub=rt>>5,3<it.td)return Bi(G,3,"Incorrect keyframe parameters.");if(!it.yd)return Bi(G,4,"Frame not displayable.");Me+=3,We-=3;var ht=G.Kc;if(it.Rb){if(7>We)return Bi(G,7,"cannot parse picture header");if(!Jl(ye,Me,We))return Bi(G,3,"Bad code word");ht.c=16383&(ye[Me+4]<<8|ye[Me+3]),ht.Td=ye[Me+4]>>6,ht.i=16383&(ye[Me+6]<<8|ye[Me+5]),ht.Ud=ye[Me+6]>>6,Me+=7,We-=7,G.za=ht.c+15>>4,G.Ub=ht.i+15>>4,Q.width=ht.c,Q.height=ht.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,i((rt=G.Pa).jb,0,255,rt.jb.length),e((rt=G.Qa)!=null),rt.Cb=0,rt.Bb=0,rt.Fb=1,i(rt.Zb,0,0,rt.Zb.length),i(rt.Lb,0,0,rt.Lb)}if(it.ub>We)return Bi(G,7,"bad partition length");Ee(rt=G.m,ye,Me,it.ub),Me+=it.ub,We-=it.ub,it.Rb&&(ht.Ld=dt(rt),ht.Kd=dt(rt)),ht=G.Qa;var mt,St=G.Pa;if(e(rt!=null),e(ht!=null),ht.Cb=dt(rt),ht.Cb){if(ht.Bb=dt(rt),dt(rt)){for(ht.Fb=dt(rt),mt=0;4>mt;++mt)ht.Zb[mt]=dt(rt)?qe(rt,7):0;for(mt=0;4>mt;++mt)ht.Lb[mt]=dt(rt)?qe(rt,6):0}if(ht.Bb)for(mt=0;3>mt;++mt)St.jb[mt]=dt(rt)?De(rt,8):255}else ht.Bb=0;if(rt.Ka)return Bi(G,3,"cannot parse segment header");if((ht=G.ed).zd=dt(rt),ht.Tb=De(rt,6),ht.wb=De(rt,3),ht.Pc=dt(rt),ht.Pc&&dt(rt)){for(St=0;4>St;++St)dt(rt)&&(ht.vd[St]=qe(rt,6));for(St=0;4>St;++St)dt(rt)&&(ht.od[St]=qe(rt,6))}if(G.L=ht.Tb==0?0:ht.zd?1:2,rt.Ka)return Bi(G,3,"cannot parse filter header");var ea=We;if(We=mt=Me,Me=mt+ea,ht=ea,G.Xb=(1<<De(G.m,2))-1,ea<3*(St=G.Xb))ye=7;else{for(mt+=3*St,ht-=3*St,ea=0;ea<St;++ea){var Pt=ye[We+0]|ye[We+1]<<8|ye[We+2]<<16;Pt>ht&&(Pt=ht),Ee(G.Jc[+ea],ye,mt,Pt),mt+=Pt,ht-=Pt,We+=3}Ee(G.Jc[+St],ye,mt,ht),ye=mt<Me?0:5}if(ye!=0)return Bi(G,ye,"cannot parse partitions");for(ye=De(mt=G.m,7),We=dt(mt)?qe(mt,4):0,Me=dt(mt)?qe(mt,4):0,ht=dt(mt)?qe(mt,4):0,St=dt(mt)?qe(mt,4):0,mt=dt(mt)?qe(mt,4):0,ea=G.Qa,Pt=0;4>Pt;++Pt){if(ea.Cb){var wa=ea.Zb[Pt];ea.Fb||(wa+=ye)}else{if(0<Pt){G.pb[Pt]=G.pb[0];continue}wa=ye}var sa=G.pb[Pt];sa.Sc[0]=bc[vl(wa+We,127)],sa.Sc[1]=Nf[vl(wa+0,127)],sa.Eb[0]=2*bc[vl(wa+Me,127)],sa.Eb[1]=101581*Nf[vl(wa+ht,127)]>>16,8>sa.Eb[1]&&(sa.Eb[1]=8),sa.Qc[0]=bc[vl(wa+St,117)],sa.Qc[1]=Nf[vl(wa+mt,127)],sa.lc=wa+mt}if(!it.Rb)return Bi(G,4,"Not a key frame.");for(dt(rt),it=G.Pa,ye=0;4>ye;++ye){for(We=0;8>We;++We)for(Me=0;3>Me;++Me)for(ht=0;11>ht;++ht)St=ut(rt,Rh[ye][We][Me][ht])?De(rt,8):Of[ye][We][Me][ht],it.Wc[ye][We].Yb[Me][ht]=St;for(We=0;17>We;++We)it.Xc[ye][We]=it.Wc[ye][$g[We]]}return G.kc=dt(rt),G.kc&&(G.Bd=De(rt,8)),G.cb=1}function Ed(G,Q,ye,Me,We,rt,it){var ht=Q[We].Yb[ye];for(ye=0;16>We;++We){if(!ut(G,ht[ye+0]))return We;for(;!ut(G,ht[ye+1]);)if(ht=Q[++We].Yb[0],ye=0,We==16)return 16;var mt=Q[We+1].Yb;if(ut(G,ht[ye+2])){var St=G,ea=0;if(ut(St,(wa=ht)[(Pt=ye)+3]))if(ut(St,wa[Pt+6])){for(ht=0,Pt=2*(ea=ut(St,wa[Pt+8]))+(wa=ut(St,wa[Pt+9+ea])),ea=0,wa=Wh[Pt];wa[ht];++ht)ea+=ea+ut(St,wa[ht]);ea+=3+(8<<Pt)}else ut(St,wa[Pt+7])?(ea=7+2*ut(St,165),ea+=ut(St,145)):ea=5+ut(St,159);else ea=ut(St,wa[Pt+4])?3+ut(St,wa[Pt+5]):2;ht=mt[2]}else ea=1,ht=mt[1];mt=it+Yh[We],0>(St=G).b&&Je(St);var Pt,wa=St.b,sa=(Pt=St.Ca>>1)-(St.I>>wa)>>31;--St.b,St.Ca+=sa,St.Ca|=1,St.I-=(Pt+1&sa)<<wa,rt[mt]=((ea^sa)-sa)*Me[(0<We)+0]}return 16}function Uc(G){var Q=G.rb[G.sb-1];Q.la=0,Q.Na=0,i(G.zc,0,0,G.zc.length),G.ja=0}function gh(G,Q){if(G==null)return 0;if(Q==null)return Bi(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!jo(G,Q))return 0;if(e(G.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(G.L=0);var ye=zf[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=Q.v-ye>>4,G.zb=Q.j-ye>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=Q.o+15+ye>>4,G.Hb=Q.va+15+ye>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var Me=G.ed;for(ye=0;4>ye;++ye){var We;if(G.Qa.Cb){var rt=G.Qa.Lb[ye];G.Qa.Fb||(rt+=Me.Tb)}else rt=Me.Tb;for(We=0;1>=We;++We){var it=G.gd[ye][We],ht=rt;if(Me.Pc&&(ht+=Me.vd[0],We&&(ht+=Me.od[0])),0<(ht=0>ht?0:63<ht?63:ht)){var mt=ht;0<Me.wb&&(mt=4<Me.wb?mt>>2:mt>>1)>9-Me.wb&&(mt=9-Me.wb),1>mt&&(mt=1),it.dd=mt,it.tc=2*ht+mt,it.ld=40<=ht?2:15<=ht?1:0}else it.tc=0;it.La=We}}}ye=0}else Bi(G,6,"Frame setup failed"),ye=G.a;if(ye=ye==0){if(ye){G.$c=0,0<G.Aa||(G.Ic=lo);e:{ye=G.Ic,Me=4*(mt=G.za);var St=32*mt,ea=mt+1,Pt=0<G.L?mt*(0<G.Aa?2:1):0,wa=(G.Aa==2?2:1)*mt;if((it=Me+832+(We=3*(16*ye+zf[G.L])/2*St)+(rt=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=it)ye=0;else{if(it>G.Vb){if(G.Vb=0,G.Ec=l(it),G.Fc=0,G.Ec==null){ye=Bi(G,1,"no memory during frame initialization.");break e}G.Vb=it}it=G.Ec,ht=G.Fc,G.Ac=it,G.Bc=ht,ht+=Me,G.Gd=c(St,Ns),G.Hd=0,G.rb=c(ea+1,Xi),G.sb=1,G.wa=Pt?c(Pt,Ui):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=mt),e(!0),G.oc=it,G.pc=ht,ht+=832,G.ya=c(wa,Es),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=mt),G.R=16*mt,G.B=8*mt,mt=(St=zf[G.L])*G.R,St=St/2*G.B,G.sa=it,G.ta=ht+mt,G.qa=G.sa,G.ra=G.ta+16*ye*G.R+St,G.Ha=G.qa,G.Ia=G.ra+8*ye*G.B+St,G.$c=0,ht+=We,G.mb=rt?it:null,G.nb=rt?ht:null,e(ht+rt<=G.Fc+G.Vb),Uc(G),i(G.Ac,G.Bc,0,Me),ye=1}}if(ye){if(Q.ka=0,Q.y=G.sa,Q.O=G.ta,Q.f=G.qa,Q.N=G.ra,Q.ea=G.Ha,Q.Vd=G.Ia,Q.fa=G.R,Q.Rc=G.B,Q.F=null,Q.J=0,!lu){for(ye=-255;255>=ye;++ye)hs[255+ye]=0>ye?-ye:ye;for(ye=-1020;1020>=ye;++ye)ou[1020+ye]=-128>ye?-128:127<ye?127:ye;for(ye=-112;112>=ye;++ye)Kc[112+ye]=-16>ye?-16:15<ye?15:ye;for(ye=-255;510>=ye;++ye)sl[255+ye]=0>ye?0:255<ye?255:ye;lu=1}wc=Nd,xu=Ql,Ef=Ru,so=mo,_o=Zo,Qi=Go,Fd=il,kd=Ji,oo=ds,qc=Zh,Rc=Ys,Pu=tu,Hc=$o,Eu=zd,$c=Ac,Tc=nl,Xu=ys,Ko=Yu,Qu[0]=Ks,Qu[1]=Sf,Qu[2]=Ah,Qu[3]=Nn,Qu[4]=mc,Qu[5]=er,Qu[6]=gc,Qu[7]=hn,Qu[8]=Ws,Qu[9]=bn,xc[0]=zn,xc[1]=qo,xc[2]=Wu,xc[3]=yh,xc[4]=go,xc[5]=vr,xc[6]=jc,Vu[0]=Tu,Vu[1]=eu,Vu[2]=Od,Vu[3]=An,Vu[4]=Ki,Vu[5]=Os,Vu[6]=Mi,ye=1}else ye=0}ye&&(ye=function(sa,Ta){for(sa.M=0;sa.M<sa.Va;++sa.M){var ma,Rt=sa.Jc[sa.M&sa.Xb],aa=sa.m,Ha=sa;for(ma=0;ma<Ha.za;++ma){var Ja=aa,Wa=Ha,Vr=Wa.Ac,_r=Wa.Bc+4*ma,fn=Wa.zc,pr=Wa.ya[Wa.aa+ma];if(Wa.Qa.Bb?pr.$b=ut(Ja,Wa.Pa.jb[0])?2+ut(Ja,Wa.Pa.jb[2]):ut(Ja,Wa.Pa.jb[1]):pr.$b=0,Wa.kc&&(pr.Ad=ut(Ja,Wa.Bd)),pr.Za=!ut(Ja,145)+0,pr.Za){var xi=pr.Ob,Ii=0;for(Wa=0;4>Wa;++Wa){var Yn,ui=fn[0+Wa];for(Yn=0;4>Yn;++Yn){ui=ag[Vr[_r+Yn]][ui];for(var as=jd[ut(Ja,ui[0])];0<as;)as=jd[2*as+ut(Ja,ui[as])];ui=-as,Vr[_r+Yn]=ui}r(xi,Ii,Vr,_r,4),Ii+=4,fn[0+Wa]=ui}}else ui=ut(Ja,156)?ut(Ja,128)?1:3:ut(Ja,163)?2:0,pr.Ob[0]=ui,i(Vr,_r,ui,4),i(fn,0,ui,4);pr.Dd=ut(Ja,142)?ut(Ja,114)?ut(Ja,183)?1:3:2:0}if(Ha.m.Ka)return Bi(sa,7,"Premature end-of-partition0 encountered.");for(;sa.ja<sa.za;++sa.ja){if(Ha=Rt,Ja=(aa=sa).rb[aa.sb-1],Vr=aa.rb[aa.sb+aa.ja],ma=aa.ya[aa.aa+aa.ja],_r=aa.kc?ma.Ad:0)Ja.la=Vr.la=0,ma.Za||(Ja.Na=Vr.Na=0),ma.Hc=0,ma.Gc=0,ma.ia=0;else{var Hn,xn;if(Ja=Vr,Vr=Ha,_r=aa.Pa.Xc,fn=aa.ya[aa.aa+aa.ja],pr=aa.pb[fn.$b],Wa=fn.ad,xi=0,Ii=aa.rb[aa.sb-1],ui=Yn=0,i(Wa,xi,0,384),fn.Za)var vs=0,Wi=_r[3];else{as=l(16);var $n=Ja.Na+Ii.Na;if($n=Bd(Vr,_r[1],$n,pr.Eb,0,as,0),Ja.Na=Ii.Na=(0<$n)+0,1<$n)wc(as,0,Wa,xi);else{var wo=as[0]+3>>3;for(as=0;256>as;as+=16)Wa[xi+as]=wo}vs=1,Wi=_r[0]}var Pi=15&Ja.la,fs=15&Ii.la;for(as=0;4>as;++as){var Pn=1&fs;for(wo=xn=0;4>wo;++wo)Pi=Pi>>1|(Pn=($n=Bd(Vr,Wi,$n=Pn+(1&Pi),pr.Sc,vs,Wa,xi))>vs)<<7,xn=xn<<2|(3<$n?3:1<$n?2:Wa[xi+0]!=0),xi+=16;Pi>>=4,fs=fs>>1|Pn<<7,Yn=(Yn<<8|xn)>>>0}for(Wi=Pi,vs=fs>>4,Hn=0;4>Hn;Hn+=2){for(xn=0,Pi=Ja.la>>4+Hn,fs=Ii.la>>4+Hn,as=0;2>as;++as){for(Pn=1&fs,wo=0;2>wo;++wo)$n=Pn+(1&Pi),Pi=Pi>>1|(Pn=0<($n=Bd(Vr,_r[2],$n,pr.Qc,0,Wa,xi)))<<3,xn=xn<<2|(3<$n?3:1<$n?2:Wa[xi+0]!=0),xi+=16;Pi>>=2,fs=fs>>1|Pn<<5}ui|=xn<<4*Hn,Wi|=Pi<<4<<Hn,vs|=(240&fs)<<Hn}Ja.la=Wi,Ii.la=vs,fn.Hc=Yn,fn.Gc=ui,fn.ia=43690&ui?0:pr.ia,_r=!(Yn|ui)}if(0<aa.L&&(aa.wa[aa.Y+aa.ja]=aa.gd[ma.$b][ma.Za],aa.wa[aa.Y+aa.ja].La|=!_r),Ha.Ka)return Bi(sa,7,"Premature end-of-file encountered.")}if(Uc(sa),aa=Ta,Ha=1,ma=(Rt=sa).D,Ja=0<Rt.L&&Rt.M>=Rt.zb&&Rt.M<=Rt.Va,Rt.Aa==0)e:{if(ma.M=Rt.M,ma.uc=Ja,xr(Rt,ma),Ha=1,ma=(xn=Rt.D).Nb,Ja=(ui=zf[Rt.L])*Rt.R,Vr=ui/2*Rt.B,as=16*ma*Rt.R,wo=8*ma*Rt.B,_r=Rt.sa,fn=Rt.ta-Ja+as,pr=Rt.qa,Wa=Rt.ra-Vr+wo,xi=Rt.Ha,Ii=Rt.Ia-Vr+wo,fs=(Pi=xn.M)==0,Yn=Pi>=Rt.Va-1,Rt.Aa==2&&xr(Rt,xn),xn.uc)for(Pn=($n=Rt).D.M,e($n.D.uc),xn=$n.yb;xn<$n.Hb;++xn){vs=xn,Wi=Pn;var Hi=(Qs=(rs=$n).D).Nb;Hn=rs.R;var Qs=Qs.wa[Qs.Y+vs],Oo=rs.sa,dl=rs.ta+16*Hi*Hn+16*vs,kl=Qs.dd,Is=Qs.tc;if(Is!=0)if(e(3<=Is),rs.L==1)0<vs&&Tc(Oo,dl,Hn,Is+4),Qs.La&&Ko(Oo,dl,Hn,Is),0<Wi&&$c(Oo,dl,Hn,Is+4),Qs.La&&Xu(Oo,dl,Hn,Is);else{var Ul=rs.B,Du=rs.qa,Pa=rs.ra+8*Hi*Ul+8*vs,Ga=rs.Ha,rs=rs.Ia+8*Hi*Ul+8*vs;Hi=Qs.ld,0<vs&&(kd(Oo,dl,Hn,Is+4,kl,Hi),qc(Du,Pa,Ga,rs,Ul,Is+4,kl,Hi)),Qs.La&&(Pu(Oo,dl,Hn,Is,kl,Hi),Eu(Du,Pa,Ga,rs,Ul,Is,kl,Hi)),0<Wi&&(Fd(Oo,dl,Hn,Is+4,kl,Hi),oo(Du,Pa,Ga,rs,Ul,Is+4,kl,Hi)),Qs.La&&(Rc(Oo,dl,Hn,Is,kl,Hi),Hc(Du,Pa,Ga,rs,Ul,Is,kl,Hi))}}if(Rt.ia&&alert("todo:DitherRow"),aa.put!=null){if(xn=16*Pi,Pi=16*(Pi+1),fs?(aa.y=Rt.sa,aa.O=Rt.ta+as,aa.f=Rt.qa,aa.N=Rt.ra+wo,aa.ea=Rt.Ha,aa.W=Rt.Ia+wo):(xn-=ui,aa.y=_r,aa.O=fn,aa.f=pr,aa.N=Wa,aa.ea=xi,aa.W=Ii),Yn||(Pi-=ui),Pi>aa.o&&(Pi=aa.o),aa.F=null,aa.J=null,Rt.Fa!=null&&0<Rt.Fa.length&&xn<Pi&&(aa.J=xf(Rt,aa,xn,Pi-xn),aa.F=Rt.mb,aa.F==null&&aa.F.length==0)){Ha=Bi(Rt,3,"Could not decode alpha data.");break e}xn<aa.j&&(ui=aa.j-xn,xn=aa.j,e(!(1&ui)),aa.O+=Rt.R*ui,aa.N+=Rt.B*(ui>>1),aa.W+=Rt.B*(ui>>1),aa.F!=null&&(aa.J+=aa.width*ui)),xn<Pi&&(aa.O+=aa.v,aa.N+=aa.v>>1,aa.W+=aa.v>>1,aa.F!=null&&(aa.J+=aa.v),aa.ka=xn-aa.j,aa.U=aa.va-aa.v,aa.T=Pi-xn,Ha=aa.put(aa))}ma+1!=Rt.Ic||Yn||(r(Rt.sa,Rt.ta-Ja,_r,fn+16*Rt.R,Ja),r(Rt.qa,Rt.ra-Vr,pr,Wa+8*Rt.B,Vr),r(Rt.Ha,Rt.Ia-Vr,xi,Ii+8*Rt.B,Vr))}if(!Ha)return Bi(sa,6,"Output aborted.")}return 1}(G,Q)),Q.bc!=null&&Q.bc(Q),ye&=1}return ye?(G.cb=0,ye):0}function wu(G,Q,ye,Me,We){We=G[Q+ye+32*Me]+(We>>3),G[Q+ye+32*Me]=-256&We?0>We?0:255:We}function Bc(G,Q,ye,Me,We,rt){wu(G,Q,0,ye,Me+We),wu(G,Q,1,ye,Me+rt),wu(G,Q,2,ye,Me-rt),wu(G,Q,3,ye,Me-We)}function Al(G){return(20091*G>>16)+G}function no(G,Q,ye,Me){var We,rt=0,it=l(16);for(We=0;4>We;++We){var ht=G[Q+0]+G[Q+8],mt=G[Q+0]-G[Q+8],St=(35468*G[Q+4]>>16)-Al(G[Q+12]),ea=Al(G[Q+4])+(35468*G[Q+12]>>16);it[rt+0]=ht+ea,it[rt+1]=mt+St,it[rt+2]=mt-St,it[rt+3]=ht-ea,rt+=4,Q++}for(We=rt=0;4>We;++We)ht=(G=it[rt+0]+4)+it[rt+8],mt=G-it[rt+8],St=(35468*it[rt+4]>>16)-Al(it[rt+12]),wu(ye,Me,0,0,ht+(ea=Al(it[rt+4])+(35468*it[rt+12]>>16))),wu(ye,Me,1,0,mt+St),wu(ye,Me,2,0,mt-St),wu(ye,Me,3,0,ht-ea),rt++,Me+=32}function Go(G,Q,ye,Me){var We=G[Q+0]+4,rt=35468*G[Q+4]>>16,it=Al(G[Q+4]),ht=35468*G[Q+1]>>16;Bc(ye,Me,0,We+it,G=Al(G[Q+1]),ht),Bc(ye,Me,1,We+rt,G,ht),Bc(ye,Me,2,We-rt,G,ht),Bc(ye,Me,3,We-it,G,ht)}function Ql(G,Q,ye,Me,We){no(G,Q,ye,Me),We&&no(G,Q+16,ye,Me+4)}function Ru(G,Q,ye,Me){xu(G,Q+0,ye,Me,1),xu(G,Q+32,ye,Me+128,1)}function mo(G,Q,ye,Me){var We;for(G=G[Q+0]+4,We=0;4>We;++We)for(Q=0;4>Q;++Q)wu(ye,Me,Q,We,G)}function Zo(G,Q,ye,Me){G[Q+0]&&so(G,Q+0,ye,Me),G[Q+16]&&so(G,Q+16,ye,Me+4),G[Q+32]&&so(G,Q+32,ye,Me+128),G[Q+48]&&so(G,Q+48,ye,Me+128+4)}function Nd(G,Q,ye,Me){var We,rt=l(16);for(We=0;4>We;++We){var it=G[Q+0+We]+G[Q+12+We],ht=G[Q+4+We]+G[Q+8+We],mt=G[Q+4+We]-G[Q+8+We],St=G[Q+0+We]-G[Q+12+We];rt[0+We]=it+ht,rt[8+We]=it-ht,rt[4+We]=St+mt,rt[12+We]=St-mt}for(We=0;4>We;++We)it=(G=rt[0+4*We]+3)+rt[3+4*We],ht=rt[1+4*We]+rt[2+4*We],mt=rt[1+4*We]-rt[2+4*We],St=G-rt[3+4*We],ye[Me+0]=it+ht>>3,ye[Me+16]=St+mt>>3,ye[Me+32]=it-ht>>3,ye[Me+48]=St-mt>>3,Me+=64}function Ku(G,Q,ye){var Me,We=Q-32,rt=Ll,it=255-G[We-1];for(Me=0;Me<ye;++Me){var ht,mt=rt,St=it+G[Q-1];for(ht=0;ht<ye;++ht)G[Q+ht]=mt[St+G[We+ht]];Q+=32}}function Sf(G,Q){Ku(G,Q,4)}function eu(G,Q){Ku(G,Q,8)}function qo(G,Q){Ku(G,Q,16)}function Wu(G,Q){var ye;for(ye=0;16>ye;++ye)r(G,Q+32*ye,G,Q-32,16)}function yh(G,Q){var ye;for(ye=16;0<ye;--ye)i(G,Q,G[Q-1],16),Q+=32}function rl(G,Q,ye){var Me;for(Me=0;16>Me;++Me)i(Q,ye+32*Me,G,16)}function zn(G,Q){var ye,Me=16;for(ye=0;16>ye;++ye)Me+=G[Q-1+32*ye]+G[Q+ye-32];rl(Me>>5,G,Q)}function go(G,Q){var ye,Me=8;for(ye=0;16>ye;++ye)Me+=G[Q-1+32*ye];rl(Me>>4,G,Q)}function vr(G,Q){var ye,Me=8;for(ye=0;16>ye;++ye)Me+=G[Q+ye-32];rl(Me>>4,G,Q)}function jc(G,Q){rl(128,G,Q)}function Sn(G,Q,ye){return G+2*Q+ye+2>>2}function Ah(G,Q){var ye,Me=Q-32;for(Me=new Uint8Array([Sn(G[Me-1],G[Me+0],G[Me+1]),Sn(G[Me+0],G[Me+1],G[Me+2]),Sn(G[Me+1],G[Me+2],G[Me+3]),Sn(G[Me+2],G[Me+3],G[Me+4])]),ye=0;4>ye;++ye)r(G,Q+32*ye,Me,0,Me.length)}function Nn(G,Q){var ye=G[Q-1],Me=G[Q-1+32],We=G[Q-1+64],rt=G[Q-1+96];Ae(G,Q+0,16843009*Sn(G[Q-1-32],ye,Me)),Ae(G,Q+32,16843009*Sn(ye,Me,We)),Ae(G,Q+64,16843009*Sn(Me,We,rt)),Ae(G,Q+96,16843009*Sn(We,rt,rt))}function Ks(G,Q){var ye,Me=4;for(ye=0;4>ye;++ye)Me+=G[Q+ye-32]+G[Q-1+32*ye];for(Me>>=3,ye=0;4>ye;++ye)i(G,Q+32*ye,Me,4)}function mc(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],rt=G[Q-1-32],it=G[Q+0-32],ht=G[Q+1-32],mt=G[Q+2-32],St=G[Q+3-32];G[Q+0+96]=Sn(Me,We,G[Q-1+96]),G[Q+1+96]=G[Q+0+64]=Sn(ye,Me,We),G[Q+2+96]=G[Q+1+64]=G[Q+0+32]=Sn(rt,ye,Me),G[Q+3+96]=G[Q+2+64]=G[Q+1+32]=G[Q+0+0]=Sn(it,rt,ye),G[Q+3+64]=G[Q+2+32]=G[Q+1+0]=Sn(ht,it,rt),G[Q+3+32]=G[Q+2+0]=Sn(mt,ht,it),G[Q+3+0]=Sn(St,mt,ht)}function gc(G,Q){var ye=G[Q+1-32],Me=G[Q+2-32],We=G[Q+3-32],rt=G[Q+4-32],it=G[Q+5-32],ht=G[Q+6-32],mt=G[Q+7-32];G[Q+0+0]=Sn(G[Q+0-32],ye,Me),G[Q+1+0]=G[Q+0+32]=Sn(ye,Me,We),G[Q+2+0]=G[Q+1+32]=G[Q+0+64]=Sn(Me,We,rt),G[Q+3+0]=G[Q+2+32]=G[Q+1+64]=G[Q+0+96]=Sn(We,rt,it),G[Q+3+32]=G[Q+2+64]=G[Q+1+96]=Sn(rt,it,ht),G[Q+3+64]=G[Q+2+96]=Sn(it,ht,mt),G[Q+3+96]=Sn(ht,mt,mt)}function er(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],rt=G[Q-1-32],it=G[Q+0-32],ht=G[Q+1-32],mt=G[Q+2-32],St=G[Q+3-32];G[Q+0+0]=G[Q+1+64]=rt+it+1>>1,G[Q+1+0]=G[Q+2+64]=it+ht+1>>1,G[Q+2+0]=G[Q+3+64]=ht+mt+1>>1,G[Q+3+0]=mt+St+1>>1,G[Q+0+96]=Sn(We,Me,ye),G[Q+0+64]=Sn(Me,ye,rt),G[Q+0+32]=G[Q+1+96]=Sn(ye,rt,it),G[Q+1+32]=G[Q+2+96]=Sn(rt,it,ht),G[Q+2+32]=G[Q+3+96]=Sn(it,ht,mt),G[Q+3+32]=Sn(ht,mt,St)}function hn(G,Q){var ye=G[Q+0-32],Me=G[Q+1-32],We=G[Q+2-32],rt=G[Q+3-32],it=G[Q+4-32],ht=G[Q+5-32],mt=G[Q+6-32],St=G[Q+7-32];G[Q+0+0]=ye+Me+1>>1,G[Q+1+0]=G[Q+0+64]=Me+We+1>>1,G[Q+2+0]=G[Q+1+64]=We+rt+1>>1,G[Q+3+0]=G[Q+2+64]=rt+it+1>>1,G[Q+0+32]=Sn(ye,Me,We),G[Q+1+32]=G[Q+0+96]=Sn(Me,We,rt),G[Q+2+32]=G[Q+1+96]=Sn(We,rt,it),G[Q+3+32]=G[Q+2+96]=Sn(rt,it,ht),G[Q+3+64]=Sn(it,ht,mt),G[Q+3+96]=Sn(ht,mt,St)}function bn(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],rt=G[Q-1+96];G[Q+0+0]=ye+Me+1>>1,G[Q+2+0]=G[Q+0+32]=Me+We+1>>1,G[Q+2+32]=G[Q+0+64]=We+rt+1>>1,G[Q+1+0]=Sn(ye,Me,We),G[Q+3+0]=G[Q+1+32]=Sn(Me,We,rt),G[Q+3+32]=G[Q+1+64]=Sn(We,rt,rt),G[Q+3+64]=G[Q+2+64]=G[Q+0+96]=G[Q+1+96]=G[Q+2+96]=G[Q+3+96]=rt}function Ws(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],rt=G[Q-1+96],it=G[Q-1-32],ht=G[Q+0-32],mt=G[Q+1-32],St=G[Q+2-32];G[Q+0+0]=G[Q+2+32]=ye+it+1>>1,G[Q+0+32]=G[Q+2+64]=Me+ye+1>>1,G[Q+0+64]=G[Q+2+96]=We+Me+1>>1,G[Q+0+96]=rt+We+1>>1,G[Q+3+0]=Sn(ht,mt,St),G[Q+2+0]=Sn(it,ht,mt),G[Q+1+0]=G[Q+3+32]=Sn(ye,it,ht),G[Q+1+32]=G[Q+3+64]=Sn(Me,ye,it),G[Q+1+64]=G[Q+3+96]=Sn(We,Me,ye),G[Q+1+96]=Sn(rt,We,Me)}function Od(G,Q){var ye;for(ye=0;8>ye;++ye)r(G,Q+32*ye,G,Q-32,8)}function An(G,Q){var ye;for(ye=0;8>ye;++ye)i(G,Q,G[Q-1],8),Q+=32}function Ho(G,Q,ye){var Me;for(Me=0;8>Me;++Me)i(Q,ye+32*Me,G,8)}function Tu(G,Q){var ye,Me=8;for(ye=0;8>ye;++ye)Me+=G[Q+ye-32]+G[Q-1+32*ye];Ho(Me>>4,G,Q)}function Os(G,Q){var ye,Me=4;for(ye=0;8>ye;++ye)Me+=G[Q+ye-32];Ho(Me>>3,G,Q)}function Ki(G,Q){var ye,Me=4;for(ye=0;8>ye;++ye)Me+=G[Q-1+32*ye];Ho(Me>>3,G,Q)}function Mi(G,Q){Ho(128,G,Q)}function yo(G,Q,ye){var Me=G[Q-ye],We=G[Q+0],rt=3*(We-Me)+cn[1020+G[Q-2*ye]-G[Q+ye]],it=Wc[112+(rt+4>>3)];G[Q-ye]=Ll[255+Me+Wc[112+(rt+3>>3)]],G[Q+0]=Ll[255+We-it]}function Vd(G,Q,ye,Me){var We=G[Q+0],rt=G[Q+ye];return ls[255+G[Q-2*ye]-G[Q-ye]]>Me||ls[255+rt-We]>Me}function vh(G,Q,ye,Me){return 4*ls[255+G[Q-ye]-G[Q+0]]+ls[255+G[Q-2*ye]-G[Q+ye]]<=Me}function yc(G,Q,ye,Me,We){var rt=G[Q-3*ye],it=G[Q-2*ye],ht=G[Q-ye],mt=G[Q+0],St=G[Q+ye],ea=G[Q+2*ye],Pt=G[Q+3*ye];return 4*ls[255+ht-mt]+ls[255+it-St]>Me?0:ls[255+G[Q-4*ye]-rt]<=We&&ls[255+rt-it]<=We&&ls[255+it-ht]<=We&&ls[255+Pt-ea]<=We&&ls[255+ea-St]<=We&&ls[255+St-mt]<=We}function Ac(G,Q,ye,Me){var We=2*Me+1;for(Me=0;16>Me;++Me)vh(G,Q+Me,ye,We)&&yo(G,Q+Me,ye)}function nl(G,Q,ye,Me){var We=2*Me+1;for(Me=0;16>Me;++Me)vh(G,Q+Me*ye,1,We)&&yo(G,Q+Me*ye,1)}function ys(G,Q,ye,Me){var We;for(We=3;0<We;--We)Ac(G,Q+=4*ye,ye,Me)}function Yu(G,Q,ye,Me){var We;for(We=3;0<We;--We)nl(G,Q+=4,ye,Me)}function Vs(G,Q,ye,Me,We,rt,it,ht){for(rt=2*rt+1;0<We--;){if(yc(G,Q,ye,rt,it))if(Vd(G,Q,ye,ht))yo(G,Q,ye);else{var mt=G,St=Q,ea=ye,Pt=mt[St-2*ea],wa=mt[St-ea],sa=mt[St+0],Ta=mt[St+ea],ma=mt[St+2*ea],Rt=27*(Ha=cn[1020+3*(sa-wa)+cn[1020+Pt-Ta]])+63>>7,aa=18*Ha+63>>7,Ha=9*Ha+63>>7;mt[St-3*ea]=Ll[255+mt[St-3*ea]+Ha],mt[St-2*ea]=Ll[255+Pt+aa],mt[St-ea]=Ll[255+wa+Rt],mt[St+0]=Ll[255+sa-Rt],mt[St+ea]=Ll[255+Ta-aa],mt[St+2*ea]=Ll[255+ma-Ha]}Q+=Me}}function zl(G,Q,ye,Me,We,rt,it,ht){for(rt=2*rt+1;0<We--;){if(yc(G,Q,ye,rt,it))if(Vd(G,Q,ye,ht))yo(G,Q,ye);else{var mt=G,St=Q,ea=ye,Pt=mt[St-ea],wa=mt[St+0],sa=mt[St+ea],Ta=Wc[112+((ma=3*(wa-Pt))+4>>3)],ma=Wc[112+(ma+3>>3)],Rt=Ta+1>>1;mt[St-2*ea]=Ll[255+mt[St-2*ea]+Rt],mt[St-ea]=Ll[255+Pt+ma],mt[St+0]=Ll[255+wa-Ta],mt[St+ea]=Ll[255+sa-Rt]}Q+=Me}}function il(G,Q,ye,Me,We,rt){Vs(G,Q,ye,1,16,Me,We,rt)}function Ji(G,Q,ye,Me,We,rt){Vs(G,Q,1,ye,16,Me,We,rt)}function Ys(G,Q,ye,Me,We,rt){var it;for(it=3;0<it;--it)zl(G,Q+=4*ye,ye,1,16,Me,We,rt)}function tu(G,Q,ye,Me,We,rt){var it;for(it=3;0<it;--it)zl(G,Q+=4,1,ye,16,Me,We,rt)}function ds(G,Q,ye,Me,We,rt,it,ht){Vs(G,Q,We,1,8,rt,it,ht),Vs(ye,Me,We,1,8,rt,it,ht)}function Zh(G,Q,ye,Me,We,rt,it,ht){Vs(G,Q,1,We,8,rt,it,ht),Vs(ye,Me,1,We,8,rt,it,ht)}function $o(G,Q,ye,Me,We,rt,it,ht){zl(G,Q+4*We,We,1,8,rt,it,ht),zl(ye,Me+4*We,We,1,8,rt,it,ht)}function zd(G,Q,ye,Me,We,rt,it,ht){zl(G,Q+4,1,We,8,rt,it,ht),zl(ye,Me+4,1,We,8,rt,it,ht)}function Cu(){this.ba=new oi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Aa,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Su(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function lp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function au(){this.ua=0,this.Wa=new wt,this.vb=new wt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Pe,this.yc=new _e}function tg(){this.xb=this.a=0,this.l=new pc,this.ca=new oi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Se,this.Pb=0,this.wd=new Se,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new au,this.ab=0,this.gc=c(4,lp),this.Oc=0}function Dd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xs(G,Q,ye,Me,We,rt,it){for(G=G==null?0:G[Q+0],Q=0;Q<it;++Q)We[rt+Q]=G+ye[Me+Q]&255,G=We[rt+Q]}function bf(G,Q,ye,Me,We,rt,it){var ht;if(G==null)Xs(null,null,ye,Me,We,rt,it);else for(ht=0;ht<it;++ht)We[rt+ht]=G[Q+ht]+ye[Me+ht]&255}function ru(G,Q,ye,Me,We,rt,it){if(G==null)Xs(null,null,ye,Me,We,rt,it);else{var ht,mt=G[Q+0],St=mt,ea=mt;for(ht=0;ht<it;++ht)St=ea+(mt=G[Q+ht])-St,ea=ye[Me+ht]+(-256&St?0>St?0:255:St)&255,St=mt,We[rt+ht]=ea}}function xf(G,Q,ye,Me){var We=Q.width,rt=Q.o;if(e(G!=null&&Q!=null),0>ye||0>=Me||ye+Me>rt)return null;if(!G.Cc){if(G.ga==null){var it;if(G.ga=new Dd,(it=G.ga==null)||(it=Q.width*Q.o,e(G.Gb.length==0),G.Gb=l(it),G.Uc=0,G.Gb==null?it=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,it=1),it=!it),!it){it=G.ga;var ht=G.Fa,mt=G.P,St=G.qc,ea=G.mb,Pt=G.nb,wa=mt+1,sa=St-1,Ta=it.l;if(e(ht!=null&&ea!=null&&Q!=null),wl[0]=null,wl[1]=Xs,wl[2]=bf,wl[3]=ru,it.ca=ea,it.tb=Pt,it.c=Q.width,it.i=Q.height,e(0<it.c&&0<it.i),1>=St)Q=0;else if(it.$a=ht[mt+0]>>0&3,it.Z=ht[mt+0]>>2&3,it.Lc=ht[mt+0]>>4&3,mt=ht[mt+0]>>6&3,0>it.$a||1<it.$a||4<=it.Z||1<it.Lc||mt)Q=0;else if(Ta.put=Zt,Ta.ac=Rn,Ta.bc=xe,Ta.ma=it,Ta.width=Q.width,Ta.height=Q.height,Ta.Da=Q.Da,Ta.v=Q.v,Ta.va=Q.va,Ta.j=Q.j,Ta.o=Q.o,it.$a)e:{e(it.$a==1),Q=br();t:for(;;){if(Q==null){Q=0;break e}if(e(it!=null),it.mc=Q,Q.c=it.c,Q.i=it.i,Q.l=it.l,Q.l.ma=it,Q.l.width=it.c,Q.l.height=it.i,Q.a=0,Oe(Q.m,ht,wa,sa),!Ir(it.c,it.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Yt(Q.s)?(it.ic=1,ht=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=l(ht),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(it.ic=0,Q=Lr(Q,it.c)),!Q))break t;Q=1;break e}it.mc=null,Q=0}else Q=sa>=it.c*it.i;it=!Q}if(it)return null;G.ga.Lc!=1?G.Ga=0:Me=rt-ye}e(G.ga!=null),e(ye+Me<=rt);e:{if(Q=(ht=G.ga).c,rt=ht.l.o,ht.$a==0){if(wa=G.rc,sa=G.Vc,Ta=G.Fa,mt=G.P+1+ye*Q,St=G.mb,ea=G.nb+ye*Q,e(mt<=G.P+G.qc),ht.Z!=0)for(e(wl[ht.Z]!=null),it=0;it<Me;++it)wl[ht.Z](wa,sa,Ta,mt,St,ea,Q),wa=St,sa=ea,ea+=Q,mt+=Q;else for(it=0;it<Me;++it)r(St,ea,Ta,mt,Q),wa=St,sa=ea,ea+=Q,mt+=Q;G.rc=wa,G.Vc=sa}else{if(e(ht.mc!=null),Q=ye+Me,e((it=ht.mc)!=null),e(Q<=it.i),it.C>=Q)Q=1;else if(ht.ic||pa(),ht.ic){ht=it.V,wa=it.Ba,sa=it.c;var ma=it.i,Rt=(Ta=1,mt=it.$/sa,St=it.$%sa,ea=it.m,Pt=it.s,it.$),aa=sa*ma,Ha=sa*Q,Ja=Pt.wc,Wa=Rt<Ha?Gt(Pt,St,mt):null;e(Rt<=aa),e(Q<=ma),e(Yt(Pt));t:for(;;){for(;!ea.h&&Rt<Ha;){if(St&Ja||(Wa=Gt(Pt,St,mt)),e(Wa!=null),Be(ea),256>(ma=At(Wa.G[0],Wa.H[0],ea)))ht[wa+Rt]=ma,++Rt,++St>=sa&&(St=0,++mt<=Q&&!(mt%16)&&Sa(it,mt));else{if(!(280>ma)){Ta=0;break t}ma=$e(ma-256,ea);var Vr,_r=At(Wa.G[4],Wa.H[4],ea);if(Be(ea),!(Rt>=(_r=yt(sa,_r=$e(_r,ea)))&&aa-Rt>=ma)){Ta=0;break t}for(Vr=0;Vr<ma;++Vr)ht[wa+Rt+Vr]=ht[wa+Rt+Vr-_r];for(Rt+=ma,St+=ma;St>=sa;)St-=sa,++mt<=Q&&!(mt%16)&&Sa(it,mt);Rt<Ha&&St&Ja&&(Wa=Gt(Pt,St,mt))}e(ea.h==je(ea))}Sa(it,mt>Q?Q:mt);break t}!Ta||ea.h&&Rt<aa?(Ta=0,it.a=ea.h?5:3):it.$=Rt,Q=Ta}else Q=Fa(it,it.V,it.Ba,it.c,it.i,Q,Wr);if(!Q){Me=0;break e}}ye+Me>=rt&&(G.Cc=1),Me=1}if(!Me)return null;if(G.Cc&&((Me=G.ga)!=null&&(Me.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+ye*We}function de(G,Q,ye,Me,We,rt){for(;0<We--;){var it,ht=G,mt=Q+(ye?1:0),St=G,ea=Q+(ye?0:3);for(it=0;it<Me;++it){var Pt=St[ea+4*it];Pt!=255&&(Pt*=32897,ht[mt+4*it+0]=ht[mt+4*it+0]*Pt>>23,ht[mt+4*it+1]=ht[mt+4*it+1]*Pt>>23,ht[mt+4*it+2]=ht[mt+4*it+2]*Pt>>23)}Q+=rt}}function Qe(G,Q,ye,Me,We){for(;0<Me--;){var rt;for(rt=0;rt<ye;++rt){var it=G[Q+2*rt+0],ht=15&(St=G[Q+2*rt+1]),mt=4369*ht,St=(240&St|St>>4)*mt>>16;G[Q+2*rt+0]=(240&it|it>>4)*mt>>16&240|(15&it|it<<4)*mt>>16>>4&15,G[Q+2*rt+1]=240&St|ht}Q+=We}}function It(G,Q,ye,Me,We,rt,it,ht){var mt,St,ea=255;for(St=0;St<We;++St){for(mt=0;mt<Me;++mt){var Pt=G[Q+mt];rt[it+4*mt]=Pt,ea&=Pt}Q+=ye,it+=ht}return ea!=255}function Jt(G,Q,ye,Me,We){var rt;for(rt=0;rt<We;++rt)ye[Me+rt]=G[Q+rt]>>8}function pa(){As=de,ai=Qe,li=It,es=Jt}function La(G,Q,ye){Re[G]=function(Me,We,rt,it,ht,mt,St,ea,Pt,wa,sa,Ta,ma,Rt,aa,Ha,Ja){var Wa,Vr=Ja-1>>1,_r=ht[mt+0]|St[ea+0]<<16,fn=Pt[wa+0]|sa[Ta+0]<<16;e(Me!=null);var pr=3*_r+fn+131074>>2;for(Q(Me[We+0],255&pr,pr>>16,ma,Rt),rt!=null&&(pr=3*fn+_r+131074>>2,Q(rt[it+0],255&pr,pr>>16,aa,Ha)),Wa=1;Wa<=Vr;++Wa){var xi=ht[mt+Wa]|St[ea+Wa]<<16,Ii=Pt[wa+Wa]|sa[Ta+Wa]<<16,Yn=_r+xi+fn+Ii+524296,ui=Yn+2*(xi+fn)>>3;pr=ui+_r>>1,_r=(Yn=Yn+2*(_r+Ii)>>3)+xi>>1,Q(Me[We+2*Wa-1],255&pr,pr>>16,ma,Rt+(2*Wa-1)*ye),Q(Me[We+2*Wa-0],255&_r,_r>>16,ma,Rt+(2*Wa-0)*ye),rt!=null&&(pr=Yn+fn>>1,_r=ui+Ii>>1,Q(rt[it+2*Wa-1],255&pr,pr>>16,aa,Ha+(2*Wa-1)*ye),Q(rt[it+2*Wa+0],255&_r,_r>>16,aa,Ha+(2*Wa+0)*ye)),_r=xi,fn=Ii}1&Ja||(pr=3*_r+fn+131074>>2,Q(Me[We+Ja-1],255&pr,pr>>16,ma,Rt+(Ja-1)*ye),rt!=null&&(pr=3*fn+_r+131074>>2,Q(rt[it+Ja-1],255&pr,pr>>16,aa,Ha+(Ja-1)*ye)))}}function ir(){ul[Cc]=Jh,ul[Ud]=nm,ul[yi]=Gd,ul[Hh]=im,ul[ol]=Xc,ul[_l]=Vf,ul[Yc]=cl,ul[Nu]=nm,ul[Ju]=im,ul[Sc]=Xc,ul[rm]=Vf}function Er(G){return G&-16384?0>G?0:255:G>>Fl}function en(G,Q){return Er((19077*G>>8)+(26149*Q>>8)-14234)}function On(G,Q,ye){return Er((19077*G>>8)-(6419*Q>>8)-(13320*ye>>8)+8708)}function Fn(G,Q){return Er((19077*G>>8)+(33050*Q>>8)-17685)}function wi(G,Q,ye,Me,We){Me[We+0]=en(G,ye),Me[We+1]=On(G,Q,ye),Me[We+2]=Fn(G,Q)}function zs(G,Q,ye,Me,We){Me[We+0]=Fn(G,Q),Me[We+1]=On(G,Q,ye),Me[We+2]=en(G,ye)}function Ds(G,Q,ye,Me,We){var rt=On(G,Q,ye);Q=rt<<3&224|Fn(G,Q)>>3,Me[We+0]=248&en(G,ye)|rt>>5,Me[We+1]=Q}function io(G,Q,ye,Me,We){var rt=240&Fn(G,Q)|15;Me[We+0]=240&en(G,ye)|On(G,Q,ye)>>4,Me[We+1]=rt}function os(G,Q,ye,Me,We){Me[We+0]=255,wi(G,Q,ye,Me,We+1)}function Dr(G,Q,ye,Me,We){zs(G,Q,ye,Me,We),Me[We+3]=255}function cr(G,Q,ye,Me,We){wi(G,Q,ye,Me,We),Me[We+3]=255}function vl(G,Q){return 0>G?0:G>Q?Q:G}function Nr(G,Q,ye){Re[G]=function(Me,We,rt,it,ht,mt,St,ea,Pt){for(var wa=ea+(-2&Pt)*ye;ea!=wa;)Q(Me[We+0],rt[it+0],ht[mt+0],St,ea),Q(Me[We+1],rt[it+0],ht[mt+0],St,ea+ye),We+=2,++it,++mt,ea+=2*ye;1&Pt&&Q(Me[We+0],rt[it+0],ht[mt+0],St,ea)}}function bu(G,Q,ye){return ye==0?G==0?Q==0?6:5:Q==0?4:0:ye}function nu(G,Q,ye,Me,We){switch(G>>>30){case 3:xu(Q,ye,Me,We,0);break;case 2:Qi(Q,ye,Me,We);break;case 1:so(Q,ye,Me,We)}}function xr(G,Q){var ye,Me,We=Q.M,rt=Q.Nb,it=G.oc,ht=G.pc+40,mt=G.oc,St=G.pc+584,ea=G.oc,Pt=G.pc+600;for(ye=0;16>ye;++ye)it[ht+32*ye-1]=129;for(ye=0;8>ye;++ye)mt[St+32*ye-1]=129,ea[Pt+32*ye-1]=129;for(0<We?it[ht-1-32]=mt[St-1-32]=ea[Pt-1-32]=129:(i(it,ht-32-1,127,21),i(mt,St-32-1,127,9),i(ea,Pt-32-1,127,9)),Me=0;Me<G.za;++Me){var wa=Q.ya[Q.aa+Me];if(0<Me){for(ye=-1;16>ye;++ye)r(it,ht+32*ye-4,it,ht+32*ye+12,4);for(ye=-1;8>ye;++ye)r(mt,St+32*ye-4,mt,St+32*ye+4,4),r(ea,Pt+32*ye-4,ea,Pt+32*ye+4,4)}var sa=G.Gd,Ta=G.Hd+Me,ma=wa.ad,Rt=wa.Hc;if(0<We&&(r(it,ht-32,sa[Ta].y,0,16),r(mt,St-32,sa[Ta].f,0,8),r(ea,Pt-32,sa[Ta].ea,0,8)),wa.Za){var aa=it,Ha=ht-32+16;for(0<We&&(Me>=G.za-1?i(aa,Ha,sa[Ta].y[15],4):r(aa,Ha,sa[Ta+1].y,0,4)),ye=0;4>ye;ye++)aa[Ha+128+ye]=aa[Ha+256+ye]=aa[Ha+384+ye]=aa[Ha+0+ye];for(ye=0;16>ye;++ye,Rt<<=2)aa=it,Ha=ht+rg[ye],Qu[wa.Ob[ye]](aa,Ha),nu(Rt,ma,16*+ye,aa,Ha)}else if(aa=bu(Me,We,wa.Ob[0]),xc[aa](it,ht),Rt!=0)for(ye=0;16>ye;++ye,Rt<<=2)nu(Rt,ma,16*+ye,it,ht+rg[ye]);for(ye=wa.Gc,aa=bu(Me,We,wa.Dd),Vu[aa](mt,St),Vu[aa](ea,Pt),Rt=ma,aa=mt,Ha=St,255&(wa=ye>>0)&&(170&wa?Ef(Rt,256,aa,Ha):_o(Rt,256,aa,Ha)),wa=ea,Rt=Pt,255&(ye>>=8)&&(170&ye?Ef(ma,320,wa,Rt):_o(ma,320,wa,Rt)),We<G.Ub-1&&(r(sa[Ta].y,0,it,ht+480,16),r(sa[Ta].f,0,mt,St+224,8),r(sa[Ta].ea,0,ea,Pt+224,8)),ye=8*rt*G.B,sa=G.sa,Ta=G.ta+16*Me+16*rt*G.R,ma=G.qa,wa=G.ra+8*Me+ye,Rt=G.Ha,aa=G.Ia+8*Me+ye,ye=0;16>ye;++ye)r(sa,Ta+ye*G.R,it,ht+32*ye,16);for(ye=0;8>ye;++ye)r(ma,wa+ye*G.B,mt,St+32*ye,8),r(Rt,aa+ye*G.B,ea,Pt+32*ye,8)}}function _h(G,Q,ye,Me,We,rt,it,ht,mt){var St=[0],ea=[0],Pt=0,wa=mt!=null?mt.kd:0,sa=mt??new Su;if(G==null||12>ye)return 7;sa.data=G,sa.w=Q,sa.ha=ye,Q=[Q],ye=[ye],sa.gb=[sa.gb];e:{var Ta=Q,ma=ye,Rt=sa.gb;if(e(G!=null),e(ma!=null),e(Rt!=null),Rt[0]=0,12<=ma[0]&&!a(G,Ta[0],"RIFF")){if(a(G,Ta[0]+8,"WEBP")){Rt=3;break e}var aa=fa(G,Ta[0]+4);if(12>aa||4294967286<aa){Rt=3;break e}if(wa&&aa>ma[0]-8){Rt=7;break e}Rt[0]=aa,Ta[0]+=12,ma[0]-=12}Rt=0}if(Rt!=0)return Rt;for(aa=0<sa.gb[0],ye=ye[0];;){e:{var Ha=G;ma=Q,Rt=ye;var Ja=St,Wa=ea,Vr=Ta=[0];if((pr=Pt=[Pt])[0]=0,8>Rt[0])Rt=7;else{if(!a(Ha,ma[0],"VP8X")){if(fa(Ha,ma[0]+4)!=10){Rt=3;break e}if(18>Rt[0]){Rt=7;break e}var _r=fa(Ha,ma[0]+8),fn=1+Lt(Ha,ma[0]+12);if(2147483648<=fn*(Ha=1+Lt(Ha,ma[0]+15))){Rt=3;break e}Vr!=null&&(Vr[0]=_r),Ja!=null&&(Ja[0]=fn),Wa!=null&&(Wa[0]=Ha),ma[0]+=18,Rt[0]-=18,pr[0]=1}Rt=0}}if(Pt=Pt[0],Ta=Ta[0],Rt!=0)return Rt;if(ma=!!(2&Ta),!aa&&Pt)return 3;if(rt!=null&&(rt[0]=!!(16&Ta)),it!=null&&(it[0]=ma),ht!=null&&(ht[0]=0),it=St[0],Ta=ea[0],Pt&&ma&&mt==null){Rt=0;break}if(4>ye){Rt=7;break}if(aa&&Pt||!aa&&!Pt&&!a(G,Q[0],"ALPH")){ye=[ye],sa.na=[sa.na],sa.P=[sa.P],sa.Sa=[sa.Sa];e:{_r=G,Rt=Q,aa=ye;var pr=sa.gb;Ja=sa.na,Wa=sa.P,Vr=sa.Sa,fn=22,e(_r!=null),e(aa!=null),Ha=Rt[0];var xi=aa[0];for(e(Ja!=null),e(Vr!=null),Ja[0]=null,Wa[0]=null,Vr[0]=0;;){if(Rt[0]=Ha,aa[0]=xi,8>xi){Rt=7;break e}var Ii=fa(_r,Ha+4);if(4294967286<Ii){Rt=3;break e}var Yn=8+Ii+1&-2;if(fn+=Yn,0<pr&&fn>pr){Rt=3;break e}if(!a(_r,Ha,"VP8 ")||!a(_r,Ha,"VP8L")){Rt=0;break e}if(xi[0]<Yn){Rt=7;break e}a(_r,Ha,"ALPH")||(Ja[0]=_r,Wa[0]=Ha+8,Vr[0]=Ii),Ha+=Yn,xi-=Yn}}if(ye=ye[0],sa.na=sa.na[0],sa.P=sa.P[0],sa.Sa=sa.Sa[0],Rt!=0)break}ye=[ye],sa.Ja=[sa.Ja],sa.xa=[sa.xa];e:if(pr=G,Rt=Q,aa=ye,Ja=sa.gb[0],Wa=sa.Ja,Vr=sa.xa,_r=Rt[0],Ha=!a(pr,_r,"VP8 "),fn=!a(pr,_r,"VP8L"),e(pr!=null),e(aa!=null),e(Wa!=null),e(Vr!=null),8>aa[0])Rt=7;else{if(Ha||fn){if(pr=fa(pr,_r+4),12<=Ja&&pr>Ja-12){Rt=3;break e}if(wa&&pr>aa[0]-8){Rt=7;break e}Wa[0]=pr,Rt[0]+=8,aa[0]-=8,Vr[0]=fn}else Vr[0]=5<=aa[0]&&pr[_r+0]==47&&!(pr[_r+4]>>5),Wa[0]=aa[0];Rt=0}if(ye=ye[0],sa.Ja=sa.Ja[0],sa.xa=sa.xa[0],Q=Q[0],Rt!=0)break;if(4294967286<sa.Ja)return 3;if(ht==null||ma||(ht[0]=sa.xa?2:1),it=[it],Ta=[Ta],sa.xa){if(5>ye){Rt=7;break}ht=it,wa=Ta,ma=rt,G==null||5>ye?G=0:5<=ye&&G[Q+0]==47&&!(G[Q+4]>>5)?(aa=[0],pr=[0],Ja=[0],Oe(Wa=new Se,G,Q,ye),Le(Wa,aa,pr,Ja)?(ht!=null&&(ht[0]=aa[0]),wa!=null&&(wa[0]=pr[0]),ma!=null&&(ma[0]=Ja[0]),G=1):G=0):G=0}else{if(10>ye){Rt=7;break}ht=Ta,G==null||10>ye||!Jl(G,Q+3,ye-3)?G=0:(wa=G[Q+0]|G[Q+1]<<8|G[Q+2]<<16,ma=16383&(G[Q+7]<<8|G[Q+6]),G=16383&(G[Q+9]<<8|G[Q+8]),1&wa||3<(wa>>1&7)||!(wa>>4&1)||wa>>5>=sa.Ja||!ma||!G?G=0:(it&&(it[0]=ma),ht&&(ht[0]=G),G=1))}if(!G||(it=it[0],Ta=Ta[0],Pt&&(St[0]!=it||ea[0]!=Ta)))return 3;mt!=null&&(mt[0]=sa,mt.offset=Q-mt.w,e(4294967286>Q-mt.w),e(mt.offset==mt.ha-ye));break}return Rt==0||Rt==7&&Pt&&mt==null?(rt!=null&&(rt[0]|=sa.na!=null&&0<sa.na.length),Me!=null&&(Me[0]=it),We!=null&&(We[0]=Ta),0):Rt}function iu(G,Q,ye){var Me=Q.width,We=Q.height,rt=0,it=0,ht=Me,mt=We;if(Q.Da=G!=null&&0<G.Da,Q.Da&&(ht=G.cd,mt=G.bd,rt=G.v,it=G.j,11>ye||(rt&=-2,it&=-2),0>rt||0>it||0>=ht||0>=mt||rt+ht>Me||it+mt>We))return 0;if(Q.v=rt,Q.j=it,Q.va=rt+ht,Q.o=it+mt,Q.U=ht,Q.T=mt,Q.da=G!=null&&0<G.da,Q.da){if(!fr(ht,mt,ye=[G.ib],rt=[G.hb]))return 0;Q.ib=ye[0],Q.hb=rt[0]}return Q.ob=G!=null&&G.ob,Q.Kb=G==null||!G.Sd,Q.da&&(Q.ob=Q.ib<3*Me/4&&Q.hb<3*We/4,Q.Kb=0),1}function vc(G){if(G==null)return 2;if(11>G.S){var Q=G.f.RGBA;Q.fb+=(G.height-1)*Q.A,Q.A=-Q.A}else Q=G.f.kb,G=G.height,Q.O+=(G-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(G-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(G-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(G-1)*Q.lb,Q.lb=-Q.lb);return 0}function Md(G,Q,ye,Me){if(Me==null||0>=G||0>=Q)return 2;if(ye!=null){if(ye.Da){var We=ye.cd,rt=ye.bd,it=-2&ye.v,ht=-2&ye.j;if(0>it||0>ht||0>=We||0>=rt||it+We>G||ht+rt>Q)return 2;G=We,Q=rt}if(ye.da){if(!fr(G,Q,We=[ye.ib],rt=[ye.hb]))return 2;G=We[0],Q=rt[0]}}Me.width=G,Me.height=Q;e:{var mt=Me.width,St=Me.height;if(G=Me.S,0>=mt||0>=St||!(G>=Cc&&13>G))G=2;else{if(0>=Me.Rd&&Me.sd==null){it=rt=We=Q=0;var ea=(ht=mt*Qh[G])*St;if(11>G||(rt=(St+1)/2*(Q=(mt+1)/2),G==12&&(it=(We=mt)*St)),(St=l(ea+2*rt+it))==null){G=1;break e}Me.sd=St,11>G?((mt=Me.f.RGBA).eb=St,mt.fb=0,mt.A=ht,mt.size=ea):((mt=Me.f.kb).y=St,mt.O=0,mt.fa=ht,mt.Fd=ea,mt.f=St,mt.N=0+ea,mt.Ab=Q,mt.Cd=rt,mt.ea=St,mt.W=0+ea+rt,mt.Db=Q,mt.Ed=rt,G==12&&(mt.F=St,mt.J=0+ea+2*rt),mt.Tc=it,mt.lb=We)}if(Q=1,We=Me.S,rt=Me.width,it=Me.height,We>=Cc&&13>We)if(11>We)G=Me.f.RGBA,Q&=(ht=Math.abs(G.A))*(it-1)+rt<=G.size,Q&=ht>=rt*Qh[We],Q&=G.eb!=null;else{G=Me.f.kb,ht=(rt+1)/2,ea=(it+1)/2,mt=Math.abs(G.fa),St=Math.abs(G.Ab);var Pt=Math.abs(G.Db),wa=Math.abs(G.lb),sa=wa*(it-1)+rt;Q&=mt*(it-1)+rt<=G.Fd,Q&=St*(ea-1)+ht<=G.Cd,Q=(Q&=Pt*(ea-1)+ht<=G.Ed)&mt>=rt&St>=ht&Pt>=ht,Q&=G.y!=null,Q&=G.f!=null,Q&=G.ea!=null,We==12&&(Q&=wa>=rt,Q&=sa<=G.Tc,Q&=G.F!=null)}else Q=0;G=Q?0:2}}return G!=0||ye!=null&&ye.fd&&(G=vc(Me)),G}var Ms=64,Si=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_c=24,Da=32,Id=8,Js=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ar("Predictor0","PredictorAdd0"),Re.Predictor0=function(){return 4278190080},Re.Predictor1=function(G){return G},Re.Predictor2=function(G,Q,ye){return Q[ye+0]},Re.Predictor3=function(G,Q,ye){return Q[ye+1]},Re.Predictor4=function(G,Q,ye){return Q[ye-1]},Re.Predictor5=function(G,Q,ye){return or(or(G,Q[ye+1]),Q[ye+0])},Re.Predictor6=function(G,Q,ye){return or(G,Q[ye-1])},Re.Predictor7=function(G,Q,ye){return or(G,Q[ye+0])},Re.Predictor8=function(G,Q,ye){return or(Q[ye-1],Q[ye+0])},Re.Predictor9=function(G,Q,ye){return or(Q[ye+0],Q[ye+1])},Re.Predictor10=function(G,Q,ye){return or(or(G,Q[ye-1]),or(Q[ye+0],Q[ye+1]))},Re.Predictor11=function(G,Q,ye){var Me=Q[ye+0];return 0>=Fr(Me>>24&255,G>>24&255,(Q=Q[ye-1])>>24&255)+Fr(Me>>16&255,G>>16&255,Q>>16&255)+Fr(Me>>8&255,G>>8&255,Q>>8&255)+Fr(255&Me,255&G,255&Q)?Me:G},Re.Predictor12=function(G,Q,ye){var Me=Q[ye+0];return(Cr((G>>24&255)+(Me>>24&255)-((Q=Q[ye-1])>>24&255))<<24|Cr((G>>16&255)+(Me>>16&255)-(Q>>16&255))<<16|Cr((G>>8&255)+(Me>>8&255)-(Q>>8&255))<<8|Cr((255&G)+(255&Me)-(255&Q)))>>>0},Re.Predictor13=function(G,Q,ye){var Me=Q[ye-1];return(Ia((G=or(G,Q[ye+0]))>>24&255,Me>>24&255)<<24|Ia(G>>16&255,Me>>16&255)<<16|Ia(G>>8&255,Me>>8&255)<<8|Ia(G>>0&255,Me>>0&255))>>>0};var Ao=Re.PredictorAdd0;Re.PredictorAdd1=tn,ar("Predictor2","PredictorAdd2"),ar("Predictor3","PredictorAdd3"),ar("Predictor4","PredictorAdd4"),ar("Predictor5","PredictorAdd5"),ar("Predictor6","PredictorAdd6"),ar("Predictor7","PredictorAdd7"),ar("Predictor8","PredictorAdd8"),ar("Predictor9","PredictorAdd9"),ar("Predictor10","PredictorAdd10"),ar("Predictor11","PredictorAdd11"),ar("Predictor12","PredictorAdd12"),ar("Predictor13","PredictorAdd13");var Pf=Re.PredictorAdd2;Oa("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),Oa("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var qh,vo=Re.ColorIndexInverseTransform,js=Re.MapARGB,Dl=Re.VP8LColorIndexInverseTransformAlpha,Gc=Re.MapAlpha,su=Re.VP8LPredictorsAdd=[];su.length=16,(Re.VP8LPredictors=[]).length=16,(Re.VP8LPredictorsAdd_C=[]).length=16,(Re.VP8LPredictors_C=[]).length=16;var wh,Ml,No,Ld,Zc,Il,wc,xu,Qi,Ef,so,_o,Fd,kd,oo,qc,Rc,Pu,Hc,Eu,$c,Tc,Xu,Ko,As,ai,li,es,hs=l(511),ou=l(2041),Kc=l(225),sl=l(767),lu=0,cn=ou,Wc=Kc,Ll=sl,ls=hs,Cc=0,Ud=1,yi=2,Hh=3,ol=4,_l=5,Yc=6,Nu=7,Ju=8,Sc=9,rm=10,$h=[2,3,7],Kh=[3,3,11],ll=[280,256,256,256,40],ts=[0,1,1,1,0],bi=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uu=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ou=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],up=8,bc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bd=null,Wh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],jd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Of=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ag=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$g=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xc=[],Qu=[],Vu=[],Kg=1,Xh=2,wl=[],ul=[];La("UpsampleRgbLinePair",wi,3),La("UpsampleBgrLinePair",zs,3),La("UpsampleRgbaLinePair",cr,4),La("UpsampleBgraLinePair",Dr,4),La("UpsampleArgbLinePair",os,4),La("UpsampleRgba4444LinePair",io,2),La("UpsampleRgb565LinePair",Ds,2);var Jh=Re.UpsampleRgbLinePair,Gd=Re.UpsampleBgrLinePair,nm=Re.UpsampleRgbaLinePair,im=Re.UpsampleBgraLinePair,Xc=Re.UpsampleArgbLinePair,Vf=Re.UpsampleRgba4444LinePair,cl=Re.UpsampleRgb565LinePair,Zd=16,zu=1<<Zd-1,qd=-227,Jc=482,Fl=6,ec=0,Qc=l(256),cp=l(256),Hd=l(256),ed=l(256),Gs=l(Jc-qd),sm=l(Jc-qd);Nr("YuvToRgbRow",wi,3),Nr("YuvToBgrRow",zs,3),Nr("YuvToRgbaRow",cr,4),Nr("YuvToBgraRow",Dr,4),Nr("YuvToArgbRow",os,4),Nr("YuvToRgba4444Row",io,2),Nr("YuvToRgb565Row",Ds,2);var rg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zf=[0,2,8],om=[8,7,6,4,4,2,2,2,1,1,1,1],lo=1;this.WebPDecodeRGBA=function(G,Q,ye,Me,We){var rt=Ud,it=new Cu,ht=new oi;it.ba=ht,ht.S=rt,ht.width=[ht.width],ht.height=[ht.height];var mt=ht.width,St=ht.height,ea=new Cs;if(ea==null||G==null)var Pt=2;else e(ea!=null),Pt=_h(G,Q,ye,ea.width,ea.height,ea.Pd,ea.Qd,ea.format,null);if(Pt!=0?mt=0:(mt!=null&&(mt[0]=ea.width[0]),St!=null&&(St[0]=ea.height[0]),mt=1),mt){ht.width=ht.width[0],ht.height=ht.height[0],Me!=null&&(Me[0]=ht.width),We!=null&&(We[0]=ht.height);e:{if(Me=new pc,(We=new Su).data=G,We.w=Q,We.ha=ye,We.kd=1,Q=[0],e(We!=null),((G=_h(We.data,We.w,We.ha,null,null,null,Q,null,We))==0||G==7)&&Q[0]&&(G=4),(Q=G)==0){if(e(it!=null),Me.data=We.data,Me.w=We.w+We.offset,Me.ha=We.ha-We.offset,Me.put=Zt,Me.ac=Rn,Me.bc=xe,Me.ma=it,We.xa){if((G=br())==null){it=1;break e}if(function(wa,sa){var Ta=[0],ma=[0],Rt=[0];t:for(;;){if(wa==null)return 0;if(sa==null)return wa.a=2,0;if(wa.l=sa,wa.a=0,Oe(wa.m,sa.data,sa.w,sa.ha),!Le(wa.m,Ta,ma,Rt)){wa.a=3;break t}if(wa.xb=Xh,sa.width=Ta[0],sa.height=ma[0],!Ir(Ta[0],ma[0],1,wa,null))break t;return 1}return e(wa.a!=0),0}(G,Me)){if(Me=(Q=Md(Me.width,Me.height,it.Oa,it.ba))==0){t:{Me=G;a:for(;;){if(Me==null){Me=0;break t}if(e(Me.s.yc!=null),e(Me.s.Ya!=null),e(0<Me.s.Wb),e((ye=Me.l)!=null),e((We=ye.ma)!=null),Me.xb!=0){if(Me.ca=We.ba,Me.tb=We.tb,e(Me.ca!=null),!iu(We.Oa,ye,Hh)){Me.a=2;break a}if(!Lr(Me,ye.width)||ye.da)break a;if((ye.da||Pr(Me.ca.S))&&pa(),11>Me.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Me.ca.f.kb.F!=null&&pa()),Me.Pb&&0<Me.s.ua&&Me.s.vb.X==null&&!Nt(Me.s.vb,Me.s.Wa.Xa)){Me.a=1;break a}Me.xb=0}if(!Fa(Me,Me.V,Me.Ba,Me.c,Me.i,ye.o,Wt))break a;We.Dc=Me.Ma,Me=1;break t}e(Me.a!=0),Me=0}Me=!Me}Me&&(Q=G.a)}else Q=G.a}else{if((G=new al)==null){it=1;break e}if(G.Fa=We.na,G.P=We.P,G.qc=We.Sa,jo(G,Me)){if((Q=Md(Me.width,Me.height,it.Oa,it.ba))==0){if(G.Aa=0,ye=it.Oa,e((We=G)!=null),ye!=null){if(0<(mt=0>(mt=ye.Md)?0:100<mt?255:255*mt/100)){for(St=ea=0;4>St;++St)12>(Pt=We.pb[St]).lc&&(Pt.ia=mt*om[0>Pt.lc?0:Pt.lc]>>3),ea|=Pt.ia;ea&&(alert("todo:VP8InitRandom"),We.ia=1)}We.Ga=ye.Id,100<We.Ga?We.Ga=100:0>We.Ga&&(We.Ga=0)}gh(G,Me)||(Q=G.a)}}else Q=G.a}Q==0&&it.Oa!=null&&it.Oa.fd&&(Q=vc(it.ba))}it=Q}rt=it!=0?null:11>rt?ht.f.RGBA.eb:ht.f.kb.y}else rt=null;return rt};var Qh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function R(Re,we){for(var Ne="",ne=0;ne<4;ne++)Ne+=String.fromCharCode(Re[we++]);return Ne}function x(Re,we){return(Re[we+0]<<0|Re[we+1]<<8|Re[we+2]<<16)>>>0}function N(Re,we){return(Re[we+0]<<0|Re[we+1]<<8|Re[we+2]<<16|Re[we+3]<<24)>>>0}new v;var I=[0],k=[0],Z=[],$=new v,H=t,W=function(Re,we){var Ne={},ne=0,_e=!1,ke=0,Pe=0;if(Ne.frames=[],!function(Ie,je,Ze,Be){for(var Je=0;Je<Be;Je++)if(Ie[je+Je]!=Ze.charCodeAt(Je))return!0;return!1}(Re,we,"RIFF",4)){for(N(Re,we+=4),we+=8;we<Re.length;){var Ee=R(Re,we),De=N(Re,we+=4);we+=4;var qe=De+(1&De);switch(Ee){case"VP8 ":case"VP8L":Ne.frames[ne]===void 0&&(Ne.frames[ne]={}),(Ue=Ne.frames[ne]).src_off=_e?Pe:we-8,Ue.src_size=ke+De+8,ne++,_e&&(_e=!1,ke=0,Pe=0);break;case"VP8X":(Ue=Ne.header={}).feature_flags=Re[we];var Oe=we+4;Ue.canvas_width=1+x(Re,Oe),Oe+=3,Ue.canvas_height=1+x(Re,Oe),Oe+=3;break;case"ALPH":_e=!0,ke=qe+8,Pe=we-8;break;case"ANIM":(Ue=Ne.header).bgcolor=N(Re,we),Oe=we+4,Ue.loop_count=(ct=Re)[(Se=Oe)+0]<<0|ct[Se+1]<<8,Oe+=2;break;case"ANMF":var He,Ue;(Ue=Ne.frames[ne]={}).offset_x=2*x(Re,we),we+=3,Ue.offset_y=2*x(Re,we),we+=3,Ue.width=1+x(Re,we),we+=3,Ue.height=1+x(Re,we),we+=3,Ue.duration=x(Re,we),we+=3,He=Re[we++],Ue.dispose=1&He,Ue.blend=He>>1&1}Ee!="ANMF"&&(we+=qe)}var ct,Se;return Ne}}(H,0);W.response=H,W.rgbaoutput=!0,W.dataurl=!1;var ee=W.header?W.header:null,oe=W.frames?W.frames:null;if(ee){ee.loop_counter=ee.loop_count,I=[ee.canvas_height],k=[ee.canvas_width];for(var pe=0;pe<oe.length&&oe[pe].blend!=0;pe++);}var le=oe[0],ge=$.WebPDecodeRGBA(H,le.src_off,le.src_size,k,I);le.rgba=ge,le.imgwidth=k[0],le.imgheight=I[0];for(var ue=0;ue<k[0]*I[0]*4;ue++)Z[ue]=ge[ue];return this.width=k,this.height=I,this.data=Z,this}(function(t){var e=function(){return typeof JI=="function"},a=function(I,k,Z,$){var H=4,W=c;switch($){case t.image_compression.FAST:H=1,W=l;break;case t.image_compression.MEDIUM:H=6,W=n;break;case t.image_compression.SLOW:H=9,W=v}I=r(I,k,Z,W);var ee=JI(I,{level:H});return t.__addimage__.arrayBufferToBinaryString(ee)},r=function(I,k,Z,$){for(var H,W,ee,oe=I.length/k,pe=new Uint8Array(I.length+oe),le=x(),ge=0;ge<oe;ge+=1){if(ee=ge*k,H=I.subarray(ee,ee+k),$)pe.set($(H,Z,W),ee+ge);else{for(var ue,Re=le.length,we=[];ue<Re;ue+=1)we[ue]=le[ue](H,Z,W);var Ne=N(we.concat());pe.set(we[Ne],ee+ge)}W=H}return pe},i=function(I){var k=Array.apply([],I);return k.unshift(0),k},l=function(I,k){var Z,$=[],H=I.length;$[0]=1;for(var W=0;W<H;W+=1)Z=I[W-k]||0,$[W+1]=I[W]-Z+256&255;return $},c=function(I,k,Z){var $,H=[],W=I.length;H[0]=2;for(var ee=0;ee<W;ee+=1)$=Z&&Z[ee]||0,H[ee+1]=I[ee]-$+256&255;return H},n=function(I,k,Z){var $,H,W=[],ee=I.length;W[0]=3;for(var oe=0;oe<ee;oe+=1)$=I[oe-k]||0,H=Z&&Z[oe]||0,W[oe+1]=I[oe]+256-($+H>>>1)&255;return W},v=function(I,k,Z){var $,H,W,ee,oe=[],pe=I.length;oe[0]=4;for(var le=0;le<pe;le+=1)$=I[le-k]||0,H=Z&&Z[le]||0,W=Z&&Z[le-k]||0,ee=R($,H,W),oe[le+1]=I[le]-ee+256&255;return oe},R=function(I,k,Z){if(I===k&&k===Z)return I;var $=Math.abs(k-Z),H=Math.abs(I-Z),W=Math.abs(I+k-Z-Z);return $<=H&&$<=W?I:H<=W?k:Z},x=function(){return[i,l,c,n,v]},N=function(I){var k=I.map(function(Z){return Z.reduce(function($,H){return $+Math.abs(H)},0)});return k.indexOf(Math.min.apply(null,k))};t.processPNG=function(I,k,Z,$){var H,W,ee,oe,pe,le,ge,ue,Re,we,Ne,ne,_e,ke,Pe,Ee=this.decode.FLATE_DECODE,De="";if(this.__addimage__.isArrayBuffer(I)&&(I=new Uint8Array(I)),this.__addimage__.isArrayBufferView(I)){if(I=(ee=new FOe(I)).imgData,W=ee.bits,H=ee.colorSpace,pe=ee.colors,[4,6].indexOf(ee.colorType)!==-1){if(ee.bits===8){Re=(ue=ee.pixelBitlength==32?new Uint32Array(ee.decodePixels().buffer):ee.pixelBitlength==16?new Uint16Array(ee.decodePixels().buffer):new Uint8Array(ee.decodePixels().buffer)).length,Ne=new Uint8Array(Re*ee.colors),we=new Uint8Array(Re);var qe,Oe=ee.pixelBitlength-ee.bits;for(ke=0,Pe=0;ke<Re;ke++){for(_e=ue[ke],qe=0;qe<Oe;)Ne[Pe++]=_e>>>qe&255,qe+=ee.bits;we[ke]=_e>>>qe&255}}if(ee.bits===16){Re=(ue=new Uint32Array(ee.decodePixels().buffer)).length,Ne=new Uint8Array(Re*(32/ee.pixelBitlength)*ee.colors),we=new Uint8Array(Re*(32/ee.pixelBitlength)),ne=ee.colors>1,ke=0,Pe=0;for(var He=0;ke<Re;)_e=ue[ke++],Ne[Pe++]=_e>>>0&255,ne&&(Ne[Pe++]=_e>>>16&255,_e=ue[ke++],Ne[Pe++]=_e>>>0&255),we[He++]=_e>>>16&255;W=8}$!==t.image_compression.NONE&&e()?(I=a(Ne,ee.width*ee.colors,ee.colors,$),ge=a(we,ee.width,1,$)):(I=Ne,ge=we,Ee=void 0)}if(ee.colorType===3&&(H=this.color_spaces.INDEXED,le=ee.palette,ee.transparency.indexed)){var Ue=ee.transparency.indexed,ct=0;for(ke=0,Re=Ue.length;ke<Re;++ke)ct+=Ue[ke];if((ct/=255)===Re-1&&Ue.indexOf(0)!==-1)oe=[Ue.indexOf(0)];else if(ct!==Re){for(ue=ee.decodePixels(),we=new Uint8Array(ue.length),ke=0,Re=ue.length;ke<Re;ke++)we[ke]=Ue[ue[ke]];ge=a(we,ee.width,1)}}var Se=function(Ie){var je;switch(Ie){case t.image_compression.FAST:je=11;break;case t.image_compression.MEDIUM:je=13;break;case t.image_compression.SLOW:je=14;break;default:je=12}return je}($);return Ee===this.decode.FLATE_DECODE&&(De="/Predictor "+Se+" "),De+="/Colors "+pe+" /BitsPerComponent "+W+" /Columns "+ee.width,(this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:Z,data:I,index:k,filter:Ee,decodeParameters:De,transparency:oe,palette:le,sMask:ge,predictor:Se,width:ee.width,height:ee.height,bitsPerComponent:W,colorSpace:H}}}})(Wn.API),function(t){t.processGIF89A=function(e,a,r,i){var l=new kOe(e),c=l.width,n=l.height,v=[];l.decodeAndBlitFrameRGBA(0,v);var R={data:v,width:c,height:n},x=new C5(100).encode(R,100);return t.processJPEG.call(this,x,a,r,i)},t.processGIF87A=t.processGIF89A}(Wn.API),kp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:a,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},kp.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(a){fo.log("bit decode error:"+a)}},kp.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),a=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*i*4,n=0;n<8&&8*i+n<this.width;n++){var v=this.palette[l>>7-n&1];this.data[c+4*n]=v.blue,this.data[c+4*n+1]=v.green,this.data[c+4*n+2]=v.red,this.data[c+4*n+3]=255}a!==0&&(this.pos+=4-a)}},kp.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,i=0;i<t;i++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*i*4,n=l>>4,v=15&l,R=this.palette[n];if(this.data[c]=R.blue,this.data[c+1]=R.green,this.data[c+2]=R.red,this.data[c+3]=255,2*i+1>=this.width)break;R=this.palette[v],this.data[c+4]=R.blue,this.data[c+4+1]=R.green,this.data[c+4+2]=R.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},kp.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+4*r;if(i<this.palette.length){var c=this.palette[i];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},kp.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,n=(l>>5&e)/e*255|0,v=(l>>10&e)/e*255|0,R=l>>15?255:0,x=r*this.width*4+4*i;this.data[x]=v,this.data[x+1]=n,this.data[x+2]=c,this.data[x+3]=R}this.pos+=t}},kp.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var n=(c&e)/e*255|0,v=(c>>5&a)/a*255|0,R=(c>>11)/e*255|0,x=i*this.width*4+4*l;this.data[x]=R,this.data[x+1]=v,this.data[x+2]=n,this.data[x+3]=255}this.pos+=t}},kp.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*a;this.data[c]=l,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},kp.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),n=e*this.width*4+4*a;this.data[n]=l,this.data[n+1]=i,this.data[n+2]=r,this.data[n+3]=c}},kp.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,a,r,i){var l=new kp(e,!1),c=l.width,n=l.height,v={data:l.getData(),width:c,height:n},R=new C5(100).encode(v,100);return t.processJPEG.call(this,R,a,r,i)}}(Wn.API),uH.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,a,r,i){var l=new uH(e),c=l.width,n=l.height,v={data:l.getData(),width:c,height:n},R=new C5(100).encode(v,100);return t.processJPEG.call(this,R,a,r,i)}}(Wn.API),Wn.API.processRGBA=function(t,e,a){for(var r=t.data,i=r.length,l=new Uint8Array(i/4*3),c=new Uint8Array(i/4),n=0,v=0,R=0;R<i;R+=4){var x=r[R],N=r[R+1],I=r[R+2],k=r[R+3];l[n++]=x,l[n++]=N,l[n++]=I,c[v++]=k}var Z=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:Z,index:e,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Wn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},H0=Wn.API,db=H0.getCharWidthsArray=function(t,e){var a,r,i=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),n=e.widths?e.widths:i.metadata.Unicode.widths,v=n.fof?n.fof:1,R=e.kerning?e.kerning:i.metadata.Unicode.kerning,x=R.fof?R.fof:1,N=e.doKerning!==!1,I=0,k=t.length,Z=0,$=n[0]||v,H=[];for(a=0;a<k;a++)r=t.charCodeAt(a),typeof i.metadata.widthOfString=="function"?H.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+c*(1e3/l)||0)/1e3):(I=N&&qs(R[r])==="object"&&!isNaN(parseInt(R[r][Z],10))?R[r][Z]/x:0,H.push((n[r]||$)/v+I)),Z=r;return H},iH=H0.getStringUnitWidth=function(t,e){var a=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return H0.processArabic&&(t=H0.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,a,i)/a:db.apply(this,arguments).reduce(function(l,c){return l+c},0)},sH=function(t,e,a,r){for(var i=[],l=0,c=t.length,n=0;l!==c&&n+e[l]<a;)n+=e[l],l++;i.push(t.slice(0,l));var v=l;for(n=0;l!==c;)n+e[l]>r&&(i.push(t.slice(v,l)),n=0,v=l),n+=e[l],l++;return v!==l&&i.push(t.slice(v,l)),i},oH=function(t,e,a){a||(a={});var r,i,l,c,n,v,R,x=[],N=[x],I=a.textIndent||0,k=0,Z=0,$=t.split(" "),H=db.apply(this,[" ",a])[0];if(v=a.lineIndent===-1?$[0].length+2:a.lineIndent||0){var W=Array(v).join(" "),ee=[];$.map(function(pe){(pe=pe.split(/\s*\n/)).length>1?ee=ee.concat(pe.map(function(le,ge){return(ge&&le.length?`
`:"")+le})):ee.push(pe[0])}),$=ee,v=iH.apply(this,[W,a])}for(l=0,c=$.length;l<c;l++){var oe=0;if(r=$[l],v&&r[0]==`
`&&(r=r.substr(1),oe=1),I+k+(Z=(i=db.apply(this,[r,a])).reduce(function(pe,le){return pe+le},0))>e||oe){if(Z>e){for(n=sH.apply(this,[r,i,e-(I+k),e]),x.push(n.shift()),x=[n.pop()];n.length;)N.push([n.shift()]);Z=i.slice(r.length-(x[0]?x[0].length:0)).reduce(function(pe,le){return pe+le},0)}else x=[r];N.push(x),I=Z+v,k=H}else x.push(r),I+=k+Z,k=H}return R=v?function(pe,le){return(le?W:"")+pe.join(" ")}:function(pe){return pe.join(" ")},N.map(R)},H0.splitTextToSize=function(t,e,a){var r,i=(a=a||{}).fontSize||this.internal.getFontSize(),l=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var N=this.internal.getFont(x.fontName,x.fontStyle);return N.metadata.Unicode?{widths:N.metadata.Unicode.widths||{0:1},kerning:N.metadata.Unicode.kerning||{}}:{font:N.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/i;l.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/i:0,l.lineIndent=a.lineIndent;var n,v,R=[];for(n=0,v=r.length;n<v;n++)R=R.concat(oH.apply(this,[r[n],c,l]));return R},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",a={},r={},i=0;i<e.length;i++)a[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var l=function(N){return"0x"+parseInt(N,10).toString(16)},c=t.__fontmetrics__.compress=function(N){var I,k,Z,$,H=["{"];for(var W in N){if(I=N[W],isNaN(parseInt(W,10))?k="'"+W+"'":(W=parseInt(W,10),k=(k=l(W).slice(2)).slice(0,-1)+r[k.slice(-1)]),typeof I=="number")I<0?(Z=l(I).slice(3),$="-"):(Z=l(I).slice(2),$=""),Z=$+Z.slice(0,-1)+r[Z.slice(-1)];else{if(qs(I)!=="object")throw new Error("Don't know what to do with value type "+qs(I)+".");Z=c(I)}H.push(k+Z)}return H.push("}"),H.join("")},n=t.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var I,k,Z,$,H={},W=1,ee=H,oe=[],pe="",le="",ge=N.length-1,ue=1;ue<ge;ue+=1)($=N[ue])=="'"?I?(Z=I.join(""),I=void 0):I=[]:I?I.push($):$=="{"?(oe.push([ee,Z]),ee={},Z=void 0):$=="}"?((k=oe.pop())[0][k[1]]=ee,Z=void 0,ee=k[0]):$=="-"?W=-1:Z===void 0?a.hasOwnProperty($)?(pe+=a[$],Z=parseInt(pe,16)*W,W=1,pe=""):pe+=$:a.hasOwnProperty($)?(le+=a[$],ee[Z]=parseInt(le,16)*W,W=1,Z=void 0,le=""):le+=$;return H},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:n("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},R={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},x={Unicode:{"Courier-Oblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":n("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":n("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:n("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:n("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":n("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":n("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(N){var I=N.font,k=x.Unicode[I.postScriptName];k&&(I.metadata.Unicode={},I.metadata.Unicode.widths=k.widths,I.metadata.Unicode.kerning=k.kerning);var Z=R.Unicode[I.postScriptName];Z&&(I.metadata.Unicode.encoding=Z,I.encoding=Z.codePages[0])}])}(Wn.API),function(t){var e=function(a){for(var r=a.length,i=new Uint8Array(r),l=0;l<r;l++)i[l]=a.charCodeAt(l);return i};t.API.events.push(["addFont",function(a){var r=void 0,i=a.font,l=a.instance;if(!i.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=l.existsFileInVFS(i.postScriptName)===!1?l.loadFile(i.postScriptName):l.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(VR(n)),c.metadata=t.API.TTFFont.open(n),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,r)}}])}(Wn),function(t){function e(){return(Qn.canvg?Promise.resolve(Qn.canvg):IT(()=>import("./index.es-D5jaOi64.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load canvg: "+a))}).then(function(a){return a.default?a.default:a})}Wn.API.addSvgAsImage=function(a,r,i,l,c,n,v,R){if(isNaN(r)||isNaN(i))throw fo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(c))throw fo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=l,x.height=c;var N=x.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,x.width,x.height);var I={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},k=this;return e().then(function(Z){return Z.fromString(N,a,I)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Z){return Z.render(I)}).then(function(){k.addImage(x.toDataURL("image/jpeg",1),r,i,l,c,v,R)})}}(),Wn.API.putTotalPages=function(t){var e,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),a=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,a);return this},Wn.API.viewerPreferences=function(t,e){var a;t=t||{},e=e||!1;var r,i,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},n=Object.keys(c),v=[],R=0,x=0,N=0;function I(Z,$){var H,W=!1;for(H=0;H<Z.length;H+=1)Z[H]===$&&(W=!0);return W}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var k=n.length;for(N=0;N<k;N+=1)a[n[N]].value=a[n[N]].defaultValue,a[n[N]].explicitSet=!1}if(qs(t)==="object"){for(i in t)if(l=t[i],I(n,i)&&l!==void 0){if(a[i].type==="boolean"&&typeof l=="boolean")a[i].value=l;else if(a[i].type==="name"&&I(a[i].valueSet,l))a[i].value=l;else if(a[i].type==="integer"&&Number.isInteger(l))a[i].value=l;else if(a[i].type==="array"){for(R=0;R<l.length;R+=1)if(r=!0,l[R].length===1&&typeof l[R][0]=="number")v.push(String(l[R]-1));else if(l[R].length>1){for(x=0;x<l[R].length;x+=1)typeof l[R][x]!="number"&&(r=!1);r===!0&&v.push([l[R][0]-1,l[R][1]-1].join(" "))}a[i].value="["+v.join(" ")+"]"}else a[i].value=a[i].defaultValue;a[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Z,$=[];for(Z in a)a[Z].explicitSet===!0&&(a[Z].type==="name"?$.push("/"+Z+" /"+a[Z].value):$.push("/"+Z+" "+a[Z].value));$.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+$.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),v=unescape(encodeURIComponent("</x:xmpmeta>")),R=l.length+c.length+n.length+i.length+v.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+R+" >>"),this.internal.write("stream"),this.internal.write(i+l+c+n+v),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",e)),this}}(Wn.API),function(t){var e=t.API,a=e.pdfEscape16=function(l,c){for(var n,v=c.metadata.Unicode.widths,R=["","0","00","000","0000"],x=[""],N=0,I=l.length;N<I;++N){if(n=c.metadata.characterToGlyph(l.charCodeAt(N)),c.metadata.glyIdsUsed.push(n),c.metadata.toUnicode[n]=l.charCodeAt(N),v.indexOf(n)==-1&&(v.push(n),v.push([parseInt(c.metadata.widthOfGlyph(n),10)])),n=="0")return x.join("");n=n.toString(16),x.push(R[4-n.length],n)}return x.join("")},r=function(l){var c,n,v,R,x,N,I;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,v=[],N=0,I=(n=Object.keys(l).sort(function(k,Z){return k-Z})).length;N<I;N++)c=n[N],v.length>=100&&(x+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar`,v=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(R=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),v.push("<"+c+"><"+R+">"));return v.length&&(x+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(c){var n=c.font,v=c.out,R=c.newObject,x=c.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="Identity-H"){for(var N=n.metadata.Unicode.widths,I=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),k="",Z=0;Z<I.length;Z++)k+=String.fromCharCode(I[Z]);var $=R();x({data:k,addLength1:!0,objectId:$}),v("endobj");var H=R();x({data:r(n.metadata.toUnicode),addLength1:!0,objectId:H}),v("endobj");var W=R();v("<<"),v("/Type /FontDescriptor"),v("/FontName /"+X0(n.fontName)),v("/FontFile2 "+$+" 0 R"),v("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),v("/Flags "+n.metadata.flags),v("/StemV "+n.metadata.stemV),v("/ItalicAngle "+n.metadata.italicAngle),v("/Ascent "+n.metadata.ascender),v("/Descent "+n.metadata.decender),v("/CapHeight "+n.metadata.capHeight),v(">>"),v("endobj");var ee=R();v("<<"),v("/Type /Font"),v("/BaseFont /"+X0(n.fontName)),v("/FontDescriptor "+W+" 0 R"),v("/W "+t.API.PDFObject.convert(N)),v("/CIDToGIDMap /Identity"),v("/DW 1000"),v("/Subtype /CIDFontType2"),v("/CIDSystemInfo"),v("<<"),v("/Supplement 0"),v("/Registry (Adobe)"),v("/Ordering ("+n.encoding+")"),v(">>"),v(">>"),v("endobj"),n.objectNumber=R(),v("<<"),v("/Type /Font"),v("/Subtype /Type0"),v("/ToUnicode "+H+" 0 R"),v("/BaseFont /"+X0(n.fontName)),v("/Encoding /"+n.encoding),v("/DescendantFonts ["+ee+" 0 R]"),v(">>"),v("endobj"),n.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(c){var n=c.font,v=c.out,R=c.newObject,x=c.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="WinAnsiEncoding"){for(var N=n.metadata.rawData,I="",k=0;k<N.length;k++)I+=String.fromCharCode(N[k]);var Z=R();x({data:I,addLength1:!0,objectId:Z}),v("endobj");var $=R();x({data:r(n.metadata.toUnicode),addLength1:!0,objectId:$}),v("endobj");var H=R();v("<<"),v("/Descent "+n.metadata.decender),v("/CapHeight "+n.metadata.capHeight),v("/StemV "+n.metadata.stemV),v("/Type /FontDescriptor"),v("/FontFile2 "+Z+" 0 R"),v("/Flags 96"),v("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),v("/FontName /"+X0(n.fontName)),v("/ItalicAngle "+n.metadata.italicAngle),v("/Ascent "+n.metadata.ascender),v(">>"),v("endobj"),n.objectNumber=R();for(var W=0;W<n.metadata.hmtx.widths.length;W++)n.metadata.hmtx.widths[W]=parseInt(n.metadata.hmtx.widths[W]*(1e3/n.metadata.head.unitsPerEm));v("<</Subtype/TrueType/Type/Font/ToUnicode "+$+" 0 R/BaseFont/"+X0(n.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),v("endobj"),n.isAlreadyPutted=!0}})(l)}]);var i=function(l){var c,n=l.text||"",v=l.x,R=l.y,x=l.options||{},N=l.mutex||{},I=N.pdfEscape,k=N.activeFontKey,Z=N.fonts,$=k,H="",W=0,ee="",oe=Z[$].encoding;if(Z[$].encoding!=="Identity-H")return{text:n,x:v,y:R,options:x,mutex:N};for(ee=n,$=k,Array.isArray(n)&&(ee=n[0]),W=0;W<ee.length;W+=1)Z[$].metadata.hasOwnProperty("cmap")&&(c=Z[$].metadata.cmap.unicode.codeMap[ee[W].charCodeAt(0)]),c||ee[W].charCodeAt(0)<256&&Z[$].metadata.hasOwnProperty("Unicode")?H+=ee[W]:H+="";var pe="";return parseInt($.slice(1))<14||oe==="WinAnsiEncoding"?pe=I(H,$).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):oe==="Identity-H"&&(pe=a(H,Z[$])),N.isHex=!0,{text:pe,x:v,y:R,options:x,mutex:N}};e.events.push(["postProcessText",function(l){var c=l.text||"",n=[],v={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var R=0;for(R=0;R<c.length;R+=1)Array.isArray(c[R])&&c[R].length===3?n.push([i(Object.assign({},v,{text:c[R][0]})).text,c[R][1],c[R][2]]):n.push(i(Object.assign({},v,{text:c[R]})).text);l.text=n}else l.text=i(Object.assign({},v,{text:c})).text}])}(Wn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0},t.addFileToVFS=function(a,r){return e.call(this),this.internal.vFS[a]=r,this},t.getFileFromVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(Wn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,l,c,n,v,R,x,N=e,I=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],k=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Z={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},$={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],W=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ee=!1,oe=0;this.__bidiEngine__={};var pe=function(ne){var _e=ne.charCodeAt(),ke=_e>>8,Pe=$[ke];return Pe!==void 0?N[256*Pe+(255&_e)]:ke===252||ke===253?"AL":W.test(ke)?"L":ke===8?"R":"N"},le=function(ne){for(var _e,ke=0;ke<ne.length;ke++){if((_e=pe(ne.charAt(ke)))==="L")return!1;if(_e==="R")return!0}return!1},ge=function(ne,_e,ke,Pe){var Ee,De,qe,Oe,He=_e[Pe];switch(He){case"L":case"R":ee=!1;break;case"N":case"AN":break;case"EN":ee&&(He="AN");break;case"AL":ee=!0,He="R";break;case"WS":He="N";break;case"CS":Pe<1||Pe+1>=_e.length||(Ee=ke[Pe-1])!=="EN"&&Ee!=="AN"||(De=_e[Pe+1])!=="EN"&&De!=="AN"?He="N":ee&&(De="AN"),He=De===Ee?De:"N";break;case"ES":He=(Ee=Pe>0?ke[Pe-1]:"B")==="EN"&&Pe+1<_e.length&&_e[Pe+1]==="EN"?"EN":"N";break;case"ET":if(Pe>0&&ke[Pe-1]==="EN"){He="EN";break}if(ee){He="N";break}for(qe=Pe+1,Oe=_e.length;qe<Oe&&_e[qe]==="ET";)qe++;He=qe<Oe&&_e[qe]==="EN"?"EN":"N";break;case"NSM":if(c&&!n){for(Oe=_e.length,qe=Pe+1;qe<Oe&&_e[qe]==="NSM";)qe++;if(qe<Oe){var Ue=ne[Pe],ct=Ue>=1425&&Ue<=2303||Ue===64286;if(Ee=_e[qe],ct&&(Ee==="R"||Ee==="AL")){He="R";break}}}He=Pe<1||(Ee=_e[Pe-1])==="B"?"N":ke[Pe-1];break;case"B":ee=!1,i=!0,He=oe;break;case"S":l=!0,He="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ee=!1;break;case"BN":He="N"}return He},ue=function(ne,_e,ke){var Pe=ne.split("");return ke&&Re(Pe,ke,{hiLevel:oe}),Pe.reverse(),_e&&_e.reverse(),Pe.join("")},Re=function(ne,_e,ke){var Pe,Ee,De,qe,Oe,He=-1,Ue=ne.length,ct=0,Se=[],Ie=oe?k:I,je=[];for(ee=!1,i=!1,l=!1,Ee=0;Ee<Ue;Ee++)je[Ee]=pe(ne[Ee]);for(De=0;De<Ue;De++){if(Oe=ct,Se[De]=ge(ne,je,Se,De),Pe=240&(ct=Ie[Oe][Z[Se[De]]]),ct&=15,_e[De]=qe=Ie[ct][5],Pe>0)if(Pe===16){for(Ee=He;Ee<De;Ee++)_e[Ee]=1;He=-1}else He=-1;if(Ie[ct][6])He===-1&&(He=De);else if(He>-1){for(Ee=He;Ee<De;Ee++)_e[Ee]=qe;He=-1}je[De]==="B"&&(_e[De]=0),ke.hiLevel|=qe}l&&function(Ze,Be,Je){for(var dt=0;dt<Je;dt++)if(Ze[dt]==="S"){Be[dt]=oe;for(var ut=dt-1;ut>=0&&Ze[ut]==="WS";ut--)Be[ut]=oe}}(je,_e,Ue)},we=function(ne,_e,ke,Pe,Ee){if(!(Ee.hiLevel<ne)){if(ne===1&&oe===1&&!i)return _e.reverse(),void(ke&&ke.reverse());for(var De,qe,Oe,He,Ue=_e.length,ct=0;ct<Ue;){if(Pe[ct]>=ne){for(Oe=ct+1;Oe<Ue&&Pe[Oe]>=ne;)Oe++;for(He=ct,qe=Oe-1;He<qe;He++,qe--)De=_e[He],_e[He]=_e[qe],_e[qe]=De,ke&&(De=ke[He],ke[He]=ke[qe],ke[qe]=De);ct=Oe}ct++}}},Ne=function(ne,_e,ke){var Pe=ne.split(""),Ee={hiLevel:oe};return ke||(ke=[]),Re(Pe,ke,Ee),function(De,qe,Oe){if(Oe.hiLevel!==0&&x)for(var He,Ue=0;Ue<De.length;Ue++)qe[Ue]===1&&(He=H.indexOf(De[Ue]))>=0&&(De[Ue]=H[He+1])}(Pe,ke,Ee),we(2,Pe,_e,ke,Ee),we(1,Pe,_e,ke,Ee),Pe.join("")};return this.__bidiEngine__.doBidiReorder=function(ne,_e,ke){if(function(Ee,De){if(De)for(var qe=0;qe<Ee.length;qe++)De[qe]=qe;n===void 0&&(n=le(Ee)),R===void 0&&(R=le(Ee))}(ne,_e),c||!v||R)if(c&&v&&n^R)oe=n?1:0,ne=ue(ne,_e,ke);else if(!c&&v&&R)oe=n?1:0,ne=Ne(ne,_e,ke),ne=ue(ne,_e);else if(!c||n||v||R){if(c&&!v&&n^R)ne=ue(ne,_e),n?(oe=0,ne=Ne(ne,_e,ke)):(oe=1,ne=Ne(ne,_e,ke),ne=ue(ne,_e));else if(c&&n&&!v&&R)oe=1,ne=Ne(ne,_e,ke),ne=ue(ne,_e);else if(!c&&!v&&n^R){var Pe=x;n?(oe=1,ne=Ne(ne,_e,ke),oe=0,x=!1,ne=Ne(ne,_e,ke),x=Pe):(oe=0,ne=Ne(ne,_e,ke),ne=ue(ne,_e),oe=1,x=!1,ne=Ne(ne,_e,ke),x=Pe,ne=ue(ne,_e))}}else oe=0,ne=Ne(ne,_e,ke);else oe=n?1:0,ne=Ne(ne,_e,ke);return ne},this.__bidiEngine__.setOptions=function(ne){ne&&(c=ne.isInputVisual,v=ne.isOutputVisual,n=ne.isInputRtl,R=ne.isOutputRtl,x=ne.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var c=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,a.setOptions(l),Object.prototype.toString.call(i)==="[object Array]"){var n=0;for(c=[],n=0;n<i.length;n+=1)Object.prototype.toString.call(i[n])==="[object Array]"?c.push([a.doBidiReorder(i[n][0]),i[n][1],i[n][2]]):c.push([a.doBidiReorder(i[n])]);r.text=c}else r.text=a.doBidiReorder(i);a.setOptions({isInputVisual:!0})}])}(Wn),Wn.API.TTFFont=function(){function t(e){var a;if(this.rawData=e,a=this.contents=new nA(e),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new eVe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new UOe(this.contents),this.head=new jOe(this),this.name=new $Oe(this),this.cmap=new Fte(this),this.toUnicode={},this.hhea=new GOe(this),this.maxp=new KOe(this),this.hmtx=new WOe(this),this.post=new qOe(this),this.os2=new ZOe(this),this.loca=new QOe(this),this.glyf=new YOe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,a,r,i,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,n,v,R;for(R=[],c=0,n=(v=this.bbox).length;c<n;c++)e=v[c],R.push(Math.round(e*this.scaleFactor));return R}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(a=i>>16))!=0&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var a;return((a=this.cmap.unicode)!=null?a.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*a},t.prototype.widthOfString=function(e,a,r){var i,l,c,n;for(c=0,l=0,n=(e=""+e).length;0<=n?l<n:l>n;l=0<=n?++l:--l)i=e.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/a)||0;return c*(a/1e3)},t.prototype.lineHeight=function(e,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var tm,nA=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var a,r;for(r=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var a,r,i;for(i=[],a=0,r=e.length;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push(this.writeByte(e.charCodeAt(a)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,a,r,i,l,c,n,v;return e=this.readByte(),a=this.readByte(),r=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),n=this.readByte(),v=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^l)+65536*(255^c)+256*(255^n)+(255^v)+1):72057594037927940*e+281474976710656*a+1099511627776*r+4294967296*i+16777216*l+65536*c+256*n+v},t.prototype.writeLongLong=function(e){var a,r;return a=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var a,r;for(a=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)a.push(this.readByte());return a},t.prototype.write=function(e){var a,r,i,l;for(l=[],r=0,i=e.length;r<i;r++)a=e[r],l.push(this.writeByte(a));return l},t}(),UOe=function(){var t;function e(a){var r,i,l;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},i=0,l=this.tableCount;0<=l?i<l:i>l;i=0<=l?++i:--i)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(a){var r,i,l,c,n,v,R,x,N,I,k,Z,$;for($ in k=Object.keys(a).length,v=Math.log(2),N=16*Math.floor(Math.log(k)/v),c=Math.floor(N/v),x=16*k-N,(i=new nA).writeInt(this.scalarType),i.writeShort(k),i.writeShort(N),i.writeShort(c),i.writeShort(x),l=16*k,R=i.pos+l,n=null,Z=[],a)for(I=a[$],i.writeString($),i.writeInt(t(I)),i.writeInt(R),i.writeInt(I.length),Z=Z.concat(I),$==="head"&&(n=R),R+=I.length;R%4;)Z.push(0),R++;return i.write(Z),r=2981146554-t(i.data),i.pos=n+8,i.writeUInt32(r),i.data},t=function(a){var r,i,l,c;for(a=kte.call(a);a.length%4;)a.push(0);for(l=new nA(a),i=0,r=0,c=a.length;r<c;r=r+=4)i+=l.readUInt32();return 4294967295&i},e}(),BOe={}.hasOwnProperty,eg=function(t,e){for(var a in e)BOe.call(e,a)&&(t[a]=e[a]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};tm=function(){function t(e){var a;this.file=e,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var jOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="head",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},e.prototype.encode=function(a){var r;return(r=new nA).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},e}(),cH=function(){function t(e,a){var r,i,l,c,n,v,R,x,N,I,k,Z,$,H,W,ee,oe;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=a+e.readInt(),N=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(v=0;v<256;++v)this.codeMap[v]=e.readByte();break;case 4:for(k=e.readUInt16(),I=k/2,e.pos+=6,l=function(){var pe,le;for(le=[],v=pe=0;0<=I?pe<I:pe>I;v=0<=I?++pe:--pe)le.push(e.readUInt16());return le}(),e.pos+=2,$=function(){var pe,le;for(le=[],v=pe=0;0<=I?pe<I:pe>I;v=0<=I?++pe:--pe)le.push(e.readUInt16());return le}(),R=function(){var pe,le;for(le=[],v=pe=0;0<=I?pe<I:pe>I;v=0<=I?++pe:--pe)le.push(e.readUInt16());return le}(),x=function(){var pe,le;for(le=[],v=pe=0;0<=I?pe<I:pe>I;v=0<=I?++pe:--pe)le.push(e.readUInt16());return le}(),i=(this.length-e.pos+this.offset)/2,n=function(){var pe,le;for(le=[],v=pe=0;0<=i?pe<i:pe>i;v=0<=i?++pe:--pe)le.push(e.readUInt16());return le}(),v=W=0,oe=l.length;W<oe;v=++W)for(H=l[v],r=ee=Z=$[v];Z<=H?ee<=H:ee>=H;r=Z<=H?++ee:--ee)x[v]===0?c=r+R[v]:(c=n[x[v]/2+(r-Z)-(I-v)]||0)!==0&&(c+=R[v]),this.codeMap[r]=65535&c}e.pos=N}return t.encode=function(e,a){var r,i,l,c,n,v,R,x,N,I,k,Z,$,H,W,ee,oe,pe,le,ge,ue,Re,we,Ne,ne,_e,ke,Pe,Ee,De,qe,Oe,He,Ue,ct,Se,Ie,je,Ze,Be,Je,dt,ut,Ae,Dt,Lt;switch(Pe=new nA,c=Object.keys(e).sort(function(fa,Nt){return fa-Nt}),a){case"macroman":for($=0,H=function(){var fa=[];for(Z=0;Z<256;++Z)fa.push(0);return fa}(),ee={0:0},l={},Ee=0,He=c.length;Ee<He;Ee++)ee[ut=e[i=c[Ee]]]==null&&(ee[ut]=++$),l[i]={old:e[i],new:ee[e[i]]},H[i]=ee[e[i]];return Pe.writeUInt16(1),Pe.writeUInt16(0),Pe.writeUInt32(12),Pe.writeUInt16(0),Pe.writeUInt16(262),Pe.writeUInt16(0),Pe.write(H),{charMap:l,subtable:Pe.data,maxGlyphID:$+1};case"unicode":for(_e=[],N=[],oe=0,ee={},r={},W=R=null,De=0,Ue=c.length;De<Ue;De++)ee[le=e[i=c[De]]]==null&&(ee[le]=++oe),r[i]={old:le,new:ee[le]},n=ee[le]-i,W!=null&&n===R||(W&&N.push(W),_e.push(i),R=n),W=i;for(W&&N.push(W),N.push(65535),_e.push(65535),Ne=2*(we=_e.length),Re=2*Math.pow(Math.log(we)/Math.LN2,2),I=Math.log(Re/2)/Math.LN2,ue=2*we-Re,v=[],ge=[],k=[],Z=qe=0,ct=_e.length;qe<ct;Z=++qe){if(ne=_e[Z],x=N[Z],ne===65535){v.push(0),ge.push(0);break}if(ne-(ke=r[ne].new)>=32768)for(v.push(0),ge.push(2*(k.length+we-Z)),i=Oe=ne;ne<=x?Oe<=x:Oe>=x;i=ne<=x?++Oe:--Oe)k.push(r[i].new);else v.push(ke-ne),ge.push(0)}for(Pe.writeUInt16(3),Pe.writeUInt16(1),Pe.writeUInt32(12),Pe.writeUInt16(4),Pe.writeUInt16(16+8*we+2*k.length),Pe.writeUInt16(0),Pe.writeUInt16(Ne),Pe.writeUInt16(Re),Pe.writeUInt16(I),Pe.writeUInt16(ue),Je=0,Se=N.length;Je<Se;Je++)i=N[Je],Pe.writeUInt16(i);for(Pe.writeUInt16(0),dt=0,Ie=_e.length;dt<Ie;dt++)i=_e[dt],Pe.writeUInt16(i);for(Ae=0,je=v.length;Ae<je;Ae++)n=v[Ae],Pe.writeUInt16(n);for(Dt=0,Ze=ge.length;Dt<Ze;Dt++)pe=ge[Dt],Pe.writeUInt16(pe);for(Lt=0,Be=k.length;Lt<Be;Lt++)$=k[Lt],Pe.writeUInt16($);return{charMap:r,subtable:Pe.data,maxGlyphID:oe+1}}},t}(),Fte=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="cmap",e.prototype.parse=function(a){var r,i,l;for(a.pos=this.offset,this.version=a.readUInt16(),l=a.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=l?i<l:i>l;i=0<=l?++i:--i)r=new cH(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(a,r){var i,l;return r==null&&(r="macroman"),i=cH.encode(a,r),(l=new nA).writeUInt16(0),l.writeUInt16(1),i.table=l.data.concat(i.subtable),i},e}(),GOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="hhea",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},e}(),ZOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="OS/2",e.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(a.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(a.readInt());return i}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(a.readInt());return i}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},e}(),qOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="post",e.prototype.parse=function(a){var r,i,l;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:break;case 131072:var c;for(i=a.readUInt16(),this.glyphNameIndex=[],c=0;0<=i?c<i:c>i;c=0<=i?++c:--c)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],l=[];a.pos<this.offset+this.length;)r=a.readByte(),l.push(this.names.push(a.readString(r)));return l;case 151552:return i=a.readUInt16(),this.offsets=a.read(i);case 196608:break;case 262144:return this.map=(function(){var n,v,R;for(R=[],c=n=0,v=this.file.maxp.numGlyphs;0<=v?n<v:n>v;c=0<=v?++n:--n)R.push(a.readUInt32());return R}).call(this)}},e}(),HOe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},$Oe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="name",e.prototype.parse=function(a){var r,i,l,c,n,v,R,x,N,I,k;for(a.pos=this.offset,a.readShort(),r=a.readShort(),v=a.readShort(),i=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)i.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+v+a.readShort()});for(R={},c=N=0,I=i.length;N<I;c=++N)l=i[c],a.pos=l.offset,x=a.readString(l.length),n=new HOe(x,l),R[k=l.nameID]==null&&(R[k]=[]),R[l.nameID].push(n);this.strings=R,this.copyright=R[0],this.fontFamily=R[1],this.fontSubfamily=R[2],this.uniqueSubfamily=R[3],this.fontName=R[4],this.version=R[5];try{this.postscriptName=R[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=R[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=R[7],this.manufacturer=R[8],this.designer=R[9],this.description=R[10],this.vendorUrl=R[11],this.designerUrl=R[12],this.license=R[13],this.licenseUrl=R[14],this.preferredFamily=R[15],this.preferredSubfamily=R[17],this.compatibleFull=R[18],this.sampleText=R[19]},e}(),KOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="maxp",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},e}(),WOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="hmtx",e.prototype.parse=function(a){var r,i,l,c,n,v,R;for(a.pos=this.offset,this.metrics=[],r=0,v=this.file.hhea.numberOfMetrics;0<=v?r<v:r>v;r=0<=v?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,N;for(N=[],r=x=0;0<=l?x<l:x>l;r=0<=l?++x:--x)N.push(a.readInt16());return N}(),this.widths=(function(){var x,N,I,k;for(k=[],x=0,N=(I=this.metrics).length;x<N;x++)c=I[x],k.push(c.advance);return k}).call(this),i=this.widths[this.widths.length-1],R=[],r=n=0;0<=l?n<l:n>l;r=0<=l?++n:--n)R.push(this.widths.push(i));return R},e.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},e}(),kte=[].slice,YOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(a){var r,i,l,c,n,v,R,x,N,I;return a in this.cache?this.cache[a]:(c=this.file.loca,r=this.file.contents,i=c.indexOf(a),(l=c.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+i,n=(v=new nA(r.read(l))).readShort(),x=v.readShort(),I=v.readShort(),R=v.readShort(),N=v.readShort(),this.cache[a]=n===-1?new JOe(v,x,I,R,N):new XOe(v,n,x,I,R,N),this.cache[a]))},e.prototype.encode=function(a,r,i){var l,c,n,v,R;for(n=[],c=[],v=0,R=r.length;v<R;v++)l=a[r[v]],c.push(n.length),l&&(n=n.concat(l.encode(i)));return c.push(n.length),{table:n,offsets:c}},e}(),XOe=function(){function t(e,a,r,i,l,c){this.raw=e,this.numberOfContours=a,this.xMin=r,this.yMin=i,this.xMax=l,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),JOe=function(){function t(e,a,r,i,l){var c,n;for(this.raw=e,this.xMin=a,this.yMin=r,this.xMax=i,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;n=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&n;)c.pos+=1&n?4:2,128&n?c.pos+=8:64&n?c.pos+=4:8&n&&(c.pos+=2)}return t.prototype.encode=function(){var e,a,r;for(a=new nA(kte.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)a.pos=this.glyphOffsets[e];return a.data},t}(),QOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eg(e,tm),e.prototype.tag="loca",e.prototype.parse=function(a){var r,i;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=2)c.push(2*a.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=4)c.push(a.readUInt32());return c}).call(this)},e.prototype.indexOf=function(a){return this.offsets[a]},e.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},e.prototype.encode=function(a,r){for(var i=new Uint32Array(this.offsets.length),l=0,c=0,n=0;n<i.length;++n)if(i[n]=l,c<r.length&&r[c]==n){++c,i[n]=l;var v=this.offsets[n],R=this.offsets[n+1]-v;R>0&&(l+=R)}for(var x=new Array(4*i.length),N=0;N<i.length;++N)x[4*N+3]=255&i[N],x[4*N+2]=(65280&i[N])>>8,x[4*N+1]=(16711680&i[N])>>16,x[4*N]=(4278190080&i[N])>>24;return x},e}(),eVe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,a,r,i,l;for(a in i=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[a],e[a]=i[r];return e},t.prototype.glyphsFor=function(e){var a,r,i,l,c,n,v;for(i={},c=0,n=e.length;c<n;c++)i[l=e[c]]=this.font.glyf.glyphFor(l);for(l in a=[],i)(r=i[l])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(l in v=this.glyphsFor(a))r=v[l],i[l]=r;return i},t.prototype.encode=function(e,a){var r,i,l,c,n,v,R,x,N,I,k,Z,$,H,W;for(i in r=Fte.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),k={0:0},W=r.charMap)k[(v=W[i]).old]=v.new;for(Z in I=r.maxGlyphID,c)Z in k||(k[Z]=I++);return x=function(ee){var oe,pe;for(oe in pe={},ee)pe[ee[oe]]=oe;return pe}(k),N=Object.keys(x).sort(function(ee,oe){return ee-oe}),$=function(){var ee,oe,pe;for(pe=[],ee=0,oe=N.length;ee<oe;ee++)n=N[ee],pe.push(x[n]);return pe}(),l=this.font.glyf.encode(c,$,k),R=this.font.loca.encode(l.offsets,$),H={cmap:this.font.cmap.raw(),glyf:l.table,loca:R,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},t}();Wn.API.PDFObject=function(){var t;function e(){}return t=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},e.convert=function(a){var r,i,l,c;if(Array.isArray(a))return"["+function(){var n,v,R;for(R=[],n=0,v=a.length;n<v;n++)r=a[n],R.push(e.convert(r));return R}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+t(a.getUTCFullYear(),4)+t(a.getUTCMonth(),2)+t(a.getUTCDate(),2)+t(a.getUTCHours(),2)+t(a.getUTCMinutes(),2)+t(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(i in l=["<<"],a)c=a[i],l.push("/"+i+" "+e.convert(c));return l.push(">>"),l.join(`
`)}return""+a},e}();const tVe=()=>{const[t,e]=ie.useState("available"),[a,r]=ie.useState("bike"),[i,l]=ie.useState(null),[c,n]=ie.useState([]),[v,R]=ie.useState(null),[x,N]=ie.useState(""),[I,k]=ie.useState(!1),[Z,$]=ie.useState(!1),[H,W]=ie.useState(null),[ee,oe]=ie.useState(!1),[pe,le]=ie.useState(""),[ge,ue]=ie.useState(""),[Re,we]=ie.useState("all"),[Ne,ne]=ie.useState(1),[_e]=ie.useState(10),[ke,Pe]=ie.useState([]),[Ee,De]=ie.useState([]),[qe,Oe]=ie.useState([]),[He,Ue]=ie.useState(""),[ct,Se]=ie.useState(!1),[Ie,je]=ie.useState("all"),[Ze,Be]=ie.useState(!1),[Je,dt]=ie.useState(1),[ut,Ae]=ie.useState(""),[Dt,Lt]=ie.useState(""),[fa,Nt]=ie.useState(""),[Ht,wt]=ie.useState([]),[fr,Ca]=ie.useState({});ie.useEffect(()=>{const Aa=Ln(Ar,"bikes"),mr=Hp(Aa,eT("bikeId")),Zr=sh(mr,Zt=>{const xe=Zt.docs.map($e=>({id:$e.id,...$e.data()}));n(xe);const Le=xe.filter($e=>!$e.stationAssigned&&$e.bikeStatus==="Available");Pe(Le)}),Rn=(async()=>{const Zt=Ln(Ar,"stations");return sh(Zt,Le=>{const $e=Le.docs.map(yt=>({id:yt.id,...yt.data()}));Oe($e)})})();return()=>{Zr(),Rn.then(Zt=>Zt())}},[]);const za=Aa=>{l(Aa.target.files[0])},ar=()=>{const Aa=c.filter(Rn=>Rn.bikeCategory==="Regular Bicycle").length+1,mr=c.filter(Rn=>Rn.bikeCategory==="Electric Bicycle").length+1;return`${ge==="Regular Bicycle"?"BK":"EBK"}-${String(ge==="Regular Bicycle"?Aa:mr).padStart(3,"0")}`},ur=Aa=>new Promise(mr=>{const Zr=new FileReader;Zr.readAsDataURL(Aa),Zr.onload=ti=>{const Rn=new Image;Rn.src=ti.target.result,Rn.onload=()=>{const Zt=document.createElement("canvas"),xe=Zt.getContext("2d");let Le=Rn.width,$e=Rn.height;const yt=800;Le>$e&&Le>yt?($e=$e*yt/Le,Le=yt):$e>yt&&(Le=Le*yt/$e,$e=yt),Zt.width=Le,Zt.height=$e,xe.drawImage(Rn,0,0,Le,$e),Zt.toBlob(At=>{mr(At)},"image/jpeg",.6)}}}),or=async()=>{if(!i)return null;try{const Aa=await ur(i),mr=`bikes/${Date.now()}_${i.name}`,Zr=RM(),ti=wM(Zr,mr);return await vM(ti,Aa),await _M(ti)}catch(Aa){return console.error("Error uploading image:",Aa),null}},Cr=async Aa=>{Aa.preventDefault();const mr=await or();if(!mr){alert("Image upload failed. Try again.");return}const Zr=ar(),ti={bikeId:Zr,bikeName:pe,bikeCategory:ge,bikeType:a,imageUrl:mr,bikeStatus:"Available",isAvailable:!0,createdAt:new Date};try{await Mv(Ln(Ar,"bikes"),ti),alert("Bike added successfully!"),k(!1),tn(),await dh({actionType:"ADD_BIKE",details:`Added bike: ${Zr}`,targetCollection:"bikes",targetId:Zr})}catch(Rn){console.error("Error adding bike:",Rn)}},Ia=async Aa=>{Aa.preventDefault();const mr=await or(),Zr={bikeName:pe,bikeCategory:ge,bikeType:a,bikeStatus:t,imageUrl:mr||v.imageUrl};try{await Hl(Di(Ar,"bikes",v.id),Zr),alert("Bike updated successfully!"),R(null),$(!1),tn(),await dh({actionType:"UPDATE_BIKE",details:`Updated bike: ${v.bikeId}`,targetCollection:"bikes",targetId:v.bikeId})}catch(ti){console.error("Error updating bike:",ti)}},Fr=(Aa,mr)=>{mr.stopPropagation(),R(Aa),le(Aa.bikeName),ue(Aa.bikeCategory),r(Aa.bikeType),e(Aa.bikeStatus),$(!0)},tn=()=>{le(""),ue(""),r(""),l(null),e("Available"),R(null)},lr=async()=>{const Aa=new Wn,mr=40,Zr=5,ti=3;let Rn=10,Zt=10;for(let xe=0;xe<c.length;xe++){const Le=c[xe];try{const $e=await tOe.toDataURL(Le.id,{type:"image/jpeg"});$e?(Aa.text(`Bike ID: ${Le.bikeId}`,Rn,Zt+mr+5),Aa.addImage($e,"JPEG",Rn,Zt,mr,mr),Rn+=mr+Zr,(xe+1)%ti===0&&(Rn=10,Zt+=mr+20),Zt+mr+20>Aa.internal.pageSize.height&&(Aa.addPage(),Rn=10,Zt=10)):console.error("QR code generation failed for bike:",Le.bikeId)}catch($e){console.error("Error generating QR code: ",$e)}}Aa.save("bike_qr_codes.pdf")},wr=Aa=>{N(Aa.target.value.toUpperCase()),ne(1)},na=Aa=>{we(Aa.target.value),ne(1)},Oa=c.filter(Aa=>Aa.bikeId.toUpperCase().includes(x)&&(Re==="all"||Re==="Regular Bicycle"&&Aa.bikeCategory==="Regular Bicycle"||Re==="Electric Bicycle"&&Aa.bikeCategory==="Electric Bicycle"||Aa.bikeStatus===Re)),ra=Math.ceil(Oa.length/_e),ja=Ne*_e,gr=ja-_e,Tn=Oa.slice(gr,ja),an=()=>({regularBikes:c.filter(Aa=>Aa.bikeCategory==="Regular Bicycle").length,electricBikes:c.filter(Aa=>Aa.bikeCategory==="Electric Bicycle").length,available:c.filter(Aa=>Aa.bikeStatus==="Available").length,inUse:c.filter(Aa=>Aa.bikeStatus==="In Use").length,toRepair:c.filter(Aa=>Aa.bikeStatus==="To Repair").length,toReplace:c.filter(Aa=>Aa.bikeStatus==="To Replace").length,retired:c.filter(Aa=>Aa.bikeStatus==="Retired").length}),dn=Aa=>{De(mr=>mr.includes(Aa)?mr.filter(Zr=>Zr!==Aa):[...mr,Aa])},Yr=async()=>{if(!He||Ee.length===0){alert("Please select a station and at least one bike");return}try{const Aa=Ee.map(mr=>Hl(Di(Ar,"bikes",mr),{stationAssigned:He}));await Promise.all(Aa),De([]),Ue(""),Se(!1)}catch(Aa){console.error("Error assigning bikes:",Aa),alert("Failed to assign bikes to station")}},Pr=()=>ke.filter(Aa=>Ie==="all"?!0:Aa.bikeCategory===Ie),ki=async(Aa,mr)=>{try{const Zr=await ur(mr),ti=`bikes/${Date.now()}_${mr.name}`,Rn=RM(),Zt=wM(Rn,ti);await vM(Zt,Zr);const xe=await _M(Zt);Ca(Le=>({...Le,[Aa]:xe}))}catch(Zr){console.error("Error uploading photo:",Zr),alert("Failed to upload photo")}},gi=async Aa=>{Aa.preventDefault();try{const Zr=Ht.map(ti=>({...ti,imageUrl:fr[ti.bikeId]||null})).map(ti=>Mv(Ln(Ar,"bikes"),ti));await Promise.all(Zr),alert(`${Je} bikes added successfully!`),Be(!1),Cs(),await dh({actionType:"ADD_BIKE",details:`Added ${Je} bikes`,targetCollection:"bikes",targetId:"bulk"})}catch(mr){console.error("Error adding bikes in bulk:",mr),alert("Failed to add bikes in bulk")}},oi=()=>{const Aa=c.filter(ti=>ti.bikeCategory==="Regular Bicycle").length,mr=c.filter(ti=>ti.bikeCategory==="Electric Bicycle").length,Zr=[];for(let ti=0;ti<Je;ti++){const Rn=Dt==="Regular Bicycle"?"BK":"EBK",Zt=Dt==="Regular Bicycle"?Aa+ti+1:mr+ti+1,xe=`${Rn}-${String(Zt).padStart(3,"0")}`;Zr.push({bikeId:xe,bikeName:`${fa} ${String(Zt).padStart(3,"0")}`,bikeCategory:Dt,bikeType:ut,bikeStatus:"Available",isAvailable:!0,createdAt:new Date})}wt(Zr)};ie.useEffect(()=>{Je>0&&Dt&&ut&&fa&&oi()},[Je,Dt,ut,fa]);const Cs=()=>{dt(1),Ae(""),Lt(""),Nt(""),wt([]),Ca({})};return B.jsxs(Jv,{children:[B.jsx(cA,{title:"Bike Management"}),B.jsxs("div",{className:"bike-management-container",children:[B.jsx("div",{className:"bike-management-header",children:B.jsx("h2",{children:"Bike Management"})}),B.jsxs("div",{className:"search-container",children:[B.jsx("input",{type:"text",placeholder:" Search by Bike ID (e.g., BK-001)...",className:"search-box",value:x,onChange:wr}),B.jsx("div",{className:"button-group",children:B.jsxs("button",{className:"bulk-add-btn",onClick:()=>Be(!0),children:[B.jsx(hx,{})," Add Bikes"]})}),B.jsx("button",{className:"generate-pdf-btn",onClick:lr,children:"Generate QR (PDF)"}),B.jsxs("div",{className:"sort-container",children:[B.jsx("label",{className:"sort-label",children:"Sort By:"}),B.jsxs("select",{value:Re,onChange:na,className:"sort-dropdown",children:[B.jsx("option",{value:"all",children:"All Bikes"}),B.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),B.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"}),B.jsxs("optgroup",{label:"Status",children:[B.jsx("option",{value:"Available",children:"Available"}),B.jsx("option",{value:"In Use",children:"In Use"}),B.jsx("option",{value:"To Repair",children:"To Repair"}),B.jsx("option",{value:"To Replace",children:"To Replace"}),B.jsx("option",{value:"Retired",children:"Retired"})]})]})]})]}),I&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsx("h2",{children:"Adding New Bike"}),B.jsxs("form",{className:"bike-form",onSubmit:Cr,children:[B.jsx("div",{className:"upload-box",children:B.jsxs("label",{className:"upload-label",children:[B.jsx(oB,{})," Upload Bike Image",B.jsx("input",{type:"file",accept:"image/*",onChange:za,required:!0})]})}),B.jsx("label",{children:"Bike Name:"}),B.jsx("input",{type:"text",value:pe,onChange:Aa=>le(Aa.target.value),required:!0}),B.jsx("label",{children:"Category of Bike:"}),B.jsxs("select",{value:ge,onChange:Aa=>ue(Aa.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Category"}),B.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),B.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),B.jsx("label",{children:"Bike Type:"}),B.jsxs("select",{value:a,onChange:Aa=>r(Aa.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Bike Type"}),B.jsx("option",{value:"Road Bike",children:"Road Bike"}),B.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),B.jsx("option",{value:"City Bike",children:"City Bike"}),B.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),B.jsx("option",{value:"BMX",children:"BMX"}),B.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),B.jsxs("div",{className:"modal-buttons",children:[B.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),B.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>k(!1),children:"Cancel"})]})]})]})}),B.jsxs("div",{className:"bike-stats-overlay",children:[B.jsxs("div",{className:"stats-row",children:[B.jsxs("div",{className:"stat-card regular",children:[B.jsx("h3",{children:"Regular Bikes"}),B.jsx("p",{children:an().regularBikes})]}),B.jsxs("div",{className:"stat-card electric",children:[B.jsx("h3",{children:"Electric Bikes"}),B.jsx("p",{children:an().electricBikes})]}),B.jsxs("div",{className:"stat-card available",children:[B.jsx("h3",{children:"Available"}),B.jsx("p",{children:an().available})]}),B.jsxs("div",{className:"stat-card in-use",children:[B.jsx("h3",{children:"In Use"}),B.jsx("p",{children:an().inUse})]})]}),B.jsxs("div",{className:"stats-row",children:[B.jsxs("div",{className:"stat-card repair",children:[B.jsx("h3",{children:"To Repair"}),B.jsx("p",{children:an().toRepair})]}),B.jsxs("div",{className:"stat-card replace",children:[B.jsx("h3",{children:"To Replace"}),B.jsx("p",{children:an().toReplace})]}),B.jsxs("div",{className:"stat-card retired",children:[B.jsx("h3",{children:"Retired"}),B.jsx("p",{children:an().retired})]}),B.jsxs("div",{className:"stat-card total",children:[B.jsx("h3",{children:"Total Bikes"}),B.jsx("p",{children:c.length})]})]})]}),B.jsxs("div",{className:"bike-list",children:[B.jsxs("table",{children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Bike Name"}),B.jsx("th",{children:"Bike ID"}),B.jsx("th",{children:"Category"}),B.jsx("th",{children:"Type"}),B.jsx("th",{children:"Image"}),B.jsx("th",{children:"Status"}),B.jsx("th",{children:"Action"})]})}),B.jsx("tbody",{children:Oa.length===0?B.jsx("tr",{children:B.jsx("td",{colSpan:"7",className:"no-results",children:"No bikes found matching your criteria"})}):Tn.map(Aa=>B.jsxs("tr",{onClick:()=>{W(Aa),oe(!0)},className:"clickable-row",children:[B.jsx("td",{children:Aa.bikeName||"No Name"}),B.jsx("td",{children:B.jsx("strong",{children:Aa.bikeId})}),B.jsx("td",{children:Aa.bikeCategory}),B.jsx("td",{children:Aa.bikeType}),B.jsx("td",{children:B.jsx("img",{src:Aa.imageUrl,alt:Aa.bikeName,className:"table-bike-image",onClick:mr=>{mr.stopPropagation(),W(Aa),oe(!0)}})}),B.jsx("td",{children:B.jsx("div",{className:`status-container status-${Aa.bikeStatus.replace(/\s+/g,"-")}`,children:Aa.bikeStatus})}),B.jsx("td",{children:B.jsx("button",{className:"edit-btn",onClick:mr=>Fr(Aa,mr),children:B.jsx(wR,{})})})]},Aa.id))})]}),Oa.length>0&&B.jsxs("div",{className:"pagination-controls",children:[B.jsx("button",{className:"pagination-button",onClick:()=>ne(Ne-1),disabled:Ne===1,children:"Previous"}),B.jsxs("span",{className:"pagination-info",children:["Page ",Ne," of ",ra]}),B.jsx("button",{className:"pagination-button",onClick:()=>ne(Ne+1),disabled:Ne===ra,children:"Next"})]})]}),ee&&H&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsx("h2",{children:"Bike Details"}),B.jsx("div",{className:"bike-image-container",children:B.jsx("img",{src:H.imageUrl,alt:"Bike",className:"bike-preview"})}),B.jsxs("p",{children:[B.jsx("strong",{children:"Bike Name:"})," ",H.bikeName]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Bike ID:"})," ",H.bikeId]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Category:"})," ",H.bikeCategory]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Bike Type:"})," ",H.bikeType]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Status:"})," ",H.bikeStatus]}),B.jsx("div",{className:"modal-buttons",children:B.jsx("button",{className:"cancel-btn",onClick:()=>oe(!1),children:"Close"})})]})}),Z&&v&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsx("h2",{children:"Edit Bike"}),B.jsxs("form",{className:"bike-form",onSubmit:Ia,children:[B.jsxs("div",{className:"upload-box",children:[B.jsxs("label",{className:"upload-label",children:[B.jsx(oB,{})," Upload New Image",B.jsx("input",{type:"file",accept:"image/*",onChange:za})]}),v.imageUrl&&B.jsx("img",{src:v.imageUrl,alt:"Current Bike",className:"bike-preview"})]}),B.jsx("label",{children:"Bike Name:"}),B.jsx("input",{type:"text",value:pe,onChange:Aa=>le(Aa.target.value),required:!0}),B.jsx("label",{children:"Category of Bike:"}),B.jsxs("select",{value:ge,onChange:Aa=>ue(Aa.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Category"}),B.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),B.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),B.jsx("label",{children:"Bike Type:"}),B.jsxs("select",{value:a,onChange:Aa=>r(Aa.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Bike Type"}),B.jsx("option",{value:"Road Bike",children:"Road Bike"}),B.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),B.jsx("option",{value:"City Bike",children:"City Bike"}),B.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),B.jsx("option",{value:"BMX",children:"BMX"}),B.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),B.jsx("label",{children:"Status:"}),B.jsxs("select",{value:t,onChange:Aa=>e(Aa.target.value),required:!0,children:[B.jsx("option",{value:"Available",children:"Available"}),B.jsx("option",{value:"To Repair",children:"To Repair"}),B.jsx("option",{value:"To Replace",children:"To Replace"}),B.jsx("option",{value:"Retired",children:"Retired"})]}),B.jsxs("div",{className:"modal-buttons",children:[B.jsx("button",{type:"submit",className:"save-btn",children:"Update"}),B.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{$(!1),tn()},children:"Cancel"})]})]})]})}),B.jsx("div",{className:"unassigned-inventory-card",children:B.jsxs("div",{className:"inventory-stats",children:[B.jsxs("div",{className:"inventory-total",children:[B.jsx("h3",{children:"Unassigned Bikes Inventory"}),B.jsx("div",{className:"total-count",children:ke.length})]}),B.jsxs("div",{className:"inventory-breakdown",children:[B.jsxs("div",{className:"inventory-item",children:[B.jsx("span",{children:"Regular Bikes:"}),B.jsx("span",{children:ke.filter(Aa=>Aa.bikeCategory==="Regular Bicycle").length})]}),B.jsxs("div",{className:"inventory-item",children:[B.jsx("span",{children:"Electric Bikes:"}),B.jsx("span",{children:ke.filter(Aa=>Aa.bikeCategory==="Electric Bicycle").length})]})]})]})}),B.jsxs("div",{className:"unassigned-bikes-section",children:[B.jsxs("div",{className:"unassigned-header",children:[B.jsx("h2",{children:"Unassigned Bikes"}),B.jsxs("div",{className:"unassigned-filters",children:[B.jsxs("select",{value:Ie,onChange:Aa=>je(Aa.target.value),className:"filter-dropdown",children:[B.jsx("option",{value:"all",children:"All Categories"}),B.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),B.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"})]}),B.jsxs("button",{className:"assign-button",disabled:Ee.length===0,onClick:()=>Se(!0),children:["Assign Selected Bikes (",Ee.length,")"]})]})]}),B.jsx("div",{className:"unassigned-bikes-grid",children:Pr().map(Aa=>B.jsxs("div",{className:`bike-card ${Ee.includes(Aa.id)?"selected":""}`,onClick:()=>dn(Aa.id),children:[B.jsx("img",{src:Aa.imageUrl,alt:Aa.bikeName}),B.jsxs("div",{className:"bike-info",children:[B.jsx("h3",{children:Aa.bikeName}),B.jsxs("p",{children:["ID: ",Aa.bikeId]}),B.jsxs("p",{children:["Category: ",Aa.bikeCategory]}),B.jsxs("p",{children:["Type: ",Aa.bikeType]})]})]},Aa.id))})]}),ct&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsx("h2",{children:"Assign Bikes to Station"}),B.jsxs("p",{children:["Selected Bikes: ",Ee.length]}),B.jsxs("select",{value:He,onChange:Aa=>Ue(Aa.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Station"}),qe.map(Aa=>B.jsx("option",{value:Aa.id,children:Aa.stationName},Aa.id))]}),B.jsxs("div",{className:"modal-buttons",children:[B.jsx("button",{className:"save-btn",onClick:Yr,children:"Assign"}),B.jsx("button",{className:"cancel-btn",onClick:()=>Se(!1),children:"Cancel"})]})]})}),Ze&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content bulk-add-modal",children:[B.jsxs("div",{className:"modal-header",children:[B.jsx("h2",{children:"Add Bikes"}),B.jsx("button",{className:"close-modal-btn",onClick:()=>{Be(!1),Cs()},children:B.jsx(LL,{})})]}),B.jsxs("form",{className:"bike-form",onSubmit:gi,children:[B.jsxs("div",{className:"bulk-form-fields",children:[B.jsx("label",{children:"Base Bike Name:"}),B.jsx("input",{type:"text",value:fa,onChange:Aa=>Nt(Aa.target.value),placeholder:"e.g., EcoRide Bike",required:!0}),B.jsx("label",{children:"Category of Bike:"}),B.jsxs("select",{value:Dt,onChange:Aa=>Lt(Aa.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Category"}),B.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),B.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),B.jsx("label",{children:"Bike Type:"}),B.jsxs("select",{value:ut,onChange:Aa=>Ae(Aa.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Bike Type"}),B.jsx("option",{value:"Road Bike",children:"Road Bike"}),B.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),B.jsx("option",{value:"City Bike",children:"City Bike"}),B.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),B.jsx("option",{value:"BMX",children:"BMX"}),B.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),B.jsx("label",{children:"Quantity:"}),B.jsx("input",{type:"number",min:"1",max:"100",value:Je,onChange:Aa=>dt(parseInt(Aa.target.value)),required:!0})]}),B.jsx("div",{className:"bulk-preview-grid",children:Ht.map(Aa=>B.jsxs("div",{className:"bulk-preview-item",children:[B.jsx("div",{className:"preview-image-container",children:fr[Aa.bikeId]?B.jsx("img",{src:fr[Aa.bikeId],alt:Aa.bikeName}):B.jsx("div",{className:"upload-placeholder",children:B.jsxs("label",{className:"upload-label",children:[B.jsx(hx,{}),B.jsx("input",{type:"file",accept:"image/*",onChange:mr=>ki(Aa.bikeId,mr.target.files[0])})]})})}),B.jsxs("div",{className:"preview-info",children:[B.jsx("h4",{children:Aa.bikeName}),B.jsx("p",{children:Aa.bikeId}),B.jsx("p",{children:Aa.bikeCategory}),B.jsx("p",{children:Aa.bikeType})]})]},Aa.bikeId))}),B.jsxs("div",{className:"modal-buttons",children:[B.jsxs("button",{type:"submit",className:"save-btn",children:["Create ",Je," Bikes"]}),B.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{Be(!1),Cs()},children:"Cancel"})]})]})]})})]})]})};function Ute(t,e){return function(){return t.apply(e,arguments)}}const{toString:aVe}=Object.prototype,{getPrototypeOf:Y4}=Object,aE=(t=>e=>{const a=aVe.call(e);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),am=t=>(t=t.toLowerCase(),e=>aE(e)===t),rE=t=>e=>typeof e===t,{isArray:P1}=Array,FT=rE("undefined");function rVe(t){return t!==null&&!FT(t)&&t.constructor!==null&&!FT(t.constructor)&&Tf(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bte=am("ArrayBuffer");function nVe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Bte(t.buffer),e}const iVe=rE("string"),Tf=rE("function"),jte=rE("number"),nE=t=>t!==null&&typeof t=="object",sVe=t=>t===!0||t===!1,Mb=t=>{if(aE(t)!=="object")return!1;const e=Y4(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},oVe=am("Date"),lVe=am("File"),uVe=am("Blob"),cVe=am("FileList"),dVe=t=>nE(t)&&Tf(t.pipe),hVe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Tf(t.append)&&((e=aE(t))==="formdata"||e==="object"&&Tf(t.toString)&&t.toString()==="[object FormData]"))},fVe=am("URLSearchParams"),[pVe,mVe,gVe,yVe]=["ReadableStream","Request","Response","Headers"].map(am),AVe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function TC(t,e,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),P1(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const l=a?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let n;for(r=0;r<c;r++)n=l[r],e.call(null,t[n],n,t)}}function Gte(t,e){e=e.toLowerCase();const a=Object.keys(t);let r=a.length,i;for(;r-- >0;)if(i=a[r],e===i.toLowerCase())return i;return null}const _v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zte=t=>!FT(t)&&t!==_v;function i3(){const{caseless:t}=Zte(this)&&this||{},e={},a=(r,i)=>{const l=t&&Gte(e,i)||i;Mb(e[l])&&Mb(r)?e[l]=i3(e[l],r):Mb(r)?e[l]=i3({},r):P1(r)?e[l]=r.slice():e[l]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&TC(arguments[r],a);return e}const vVe=(t,e,a,{allOwnKeys:r}={})=>(TC(e,(i,l)=>{a&&Tf(i)?t[l]=Ute(i,a):t[l]=i},{allOwnKeys:r}),t),_Ve=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),wVe=(t,e,a,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),a&&Object.assign(t.prototype,a)},RVe=(t,e,a,r)=>{let i,l,c;const n={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)c=i[l],(!r||r(c,t,e))&&!n[c]&&(e[c]=t[c],n[c]=!0);t=a!==!1&&Y4(t)}while(t&&(!a||a(t,e))&&t!==Object.prototype);return e},TVe=(t,e,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=e.length;const r=t.indexOf(e,a);return r!==-1&&r===a},CVe=t=>{if(!t)return null;if(P1(t))return t;let e=t.length;if(!jte(e))return null;const a=new Array(e);for(;e-- >0;)a[e]=t[e];return a},SVe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Y4(Uint8Array)),bVe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},xVe=(t,e)=>{let a;const r=[];for(;(a=t.exec(e))!==null;)r.push(a);return r},PVe=am("HTMLFormElement"),EVe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,i){return r.toUpperCase()+i}),dH=(({hasOwnProperty:t})=>(e,a)=>t.call(e,a))(Object.prototype),NVe=am("RegExp"),qte=(t,e)=>{const a=Object.getOwnPropertyDescriptors(t),r={};TC(a,(i,l)=>{let c;(c=e(i,l,t))!==!1&&(r[l]=c||i)}),Object.defineProperties(t,r)},OVe=t=>{qte(t,(e,a)=>{if(Tf(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(Tf(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},VVe=(t,e)=>{const a={},r=i=>{i.forEach(l=>{a[l]=!0})};return P1(t)?r(t):r(String(t).split(e)),a},zVe=()=>{},DVe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function MVe(t){return!!(t&&Tf(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const IVe=t=>{const e=new Array(10),a=(r,i)=>{if(nE(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const l=P1(r)?[]:{};return TC(r,(c,n)=>{const v=a(c,i+1);!FT(v)&&(l[n]=v)}),e[i]=void 0,l}}return r};return a(t,0)},LVe=am("AsyncFunction"),FVe=t=>t&&(nE(t)||Tf(t))&&Tf(t.then)&&Tf(t.catch),Hte=((t,e)=>t?setImmediate:e?((a,r)=>(_v.addEventListener("message",({source:i,data:l})=>{i===_v&&l===a&&r.length&&r.shift()()},!1),i=>{r.push(i),_v.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Tf(_v.postMessage)),kVe=typeof queueMicrotask<"u"?queueMicrotask.bind(_v):typeof process<"u"&&process.nextTick||Hte,Ba={isArray:P1,isArrayBuffer:Bte,isBuffer:rVe,isFormData:hVe,isArrayBufferView:nVe,isString:iVe,isNumber:jte,isBoolean:sVe,isObject:nE,isPlainObject:Mb,isReadableStream:pVe,isRequest:mVe,isResponse:gVe,isHeaders:yVe,isUndefined:FT,isDate:oVe,isFile:lVe,isBlob:uVe,isRegExp:NVe,isFunction:Tf,isStream:dVe,isURLSearchParams:fVe,isTypedArray:SVe,isFileList:cVe,forEach:TC,merge:i3,extend:vVe,trim:AVe,stripBOM:_Ve,inherits:wVe,toFlatObject:RVe,kindOf:aE,kindOfTest:am,endsWith:TVe,toArray:CVe,forEachEntry:bVe,matchAll:xVe,isHTMLForm:PVe,hasOwnProperty:dH,hasOwnProp:dH,reduceDescriptors:qte,freezeMethods:OVe,toObjectSet:VVe,toCamelCase:EVe,noop:zVe,toFiniteNumber:DVe,findKey:Gte,global:_v,isContextDefined:Zte,isSpecCompliantForm:MVe,toJSONObject:IVe,isAsyncFn:LVe,isThenable:FVe,setImmediate:Hte,asap:kVe};function Ai(t,e,a,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),a&&(this.config=a),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ba.inherits(Ai,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ba.toJSONObject(this.config),code:this.code,status:this.status}}});const $te=Ai.prototype,Kte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Kte[t]={value:t}});Object.defineProperties(Ai,Kte);Object.defineProperty($te,"isAxiosError",{value:!0});Ai.from=(t,e,a,r,i,l)=>{const c=Object.create($te);return Ba.toFlatObject(t,c,function(v){return v!==Error.prototype},n=>n!=="isAxiosError"),Ai.call(c,t.message,e,a,r,i),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const UVe=null;function s3(t){return Ba.isPlainObject(t)||Ba.isArray(t)}function Wte(t){return Ba.endsWith(t,"[]")?t.slice(0,-2):t}function hH(t,e,a){return t?t.concat(e).map(function(i,l){return i=Wte(i),!a&&l?"["+i+"]":i}).join(a?".":""):e}function BVe(t){return Ba.isArray(t)&&!t.some(s3)}const jVe=Ba.toFlatObject(Ba,{},null,function(e){return/^is[A-Z]/.test(e)});function iE(t,e,a){if(!Ba.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,a=Ba.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,H){return!Ba.isUndefined(H[$])});const r=a.metaTokens,i=a.visitor||x,l=a.dots,c=a.indexes,v=(a.Blob||typeof Blob<"u"&&Blob)&&Ba.isSpecCompliantForm(e);if(!Ba.isFunction(i))throw new TypeError("visitor must be a function");function R(Z){if(Z===null)return"";if(Ba.isDate(Z))return Z.toISOString();if(!v&&Ba.isBlob(Z))throw new Ai("Blob is not supported. Use a Buffer instead.");return Ba.isArrayBuffer(Z)||Ba.isTypedArray(Z)?v&&typeof Blob=="function"?new Blob([Z]):Buffer.from(Z):Z}function x(Z,$,H){let W=Z;if(Z&&!H&&typeof Z=="object"){if(Ba.endsWith($,"{}"))$=r?$:$.slice(0,-2),Z=JSON.stringify(Z);else if(Ba.isArray(Z)&&BVe(Z)||(Ba.isFileList(Z)||Ba.endsWith($,"[]"))&&(W=Ba.toArray(Z)))return $=Wte($),W.forEach(function(oe,pe){!(Ba.isUndefined(oe)||oe===null)&&e.append(c===!0?hH([$],pe,l):c===null?$:$+"[]",R(oe))}),!1}return s3(Z)?!0:(e.append(hH(H,$,l),R(Z)),!1)}const N=[],I=Object.assign(jVe,{defaultVisitor:x,convertValue:R,isVisitable:s3});function k(Z,$){if(!Ba.isUndefined(Z)){if(N.indexOf(Z)!==-1)throw Error("Circular reference detected in "+$.join("."));N.push(Z),Ba.forEach(Z,function(W,ee){(!(Ba.isUndefined(W)||W===null)&&i.call(e,W,Ba.isString(ee)?ee.trim():ee,$,I))===!0&&k(W,$?$.concat(ee):[ee])}),N.pop()}}if(!Ba.isObject(t))throw new TypeError("data must be an object");return k(t),e}function fH(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function X4(t,e){this._pairs=[],t&&iE(t,this,e)}const Yte=X4.prototype;Yte.append=function(e,a){this._pairs.push([e,a])};Yte.toString=function(e){const a=e?function(r){return e.call(this,r,fH)}:fH;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function GVe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xte(t,e,a){if(!e)return t;const r=a&&a.encode||GVe;Ba.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let l;if(i?l=i(e,a):l=Ba.isURLSearchParams(e)?e.toString():new X4(e,a).toString(r),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class pH{constructor(){this.handlers=[]}use(e,a,r){return this.handlers.push({fulfilled:e,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ba.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Jte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZVe=typeof URLSearchParams<"u"?URLSearchParams:X4,qVe=typeof FormData<"u"?FormData:null,HVe=typeof Blob<"u"?Blob:null,$Ve={isBrowser:!0,classes:{URLSearchParams:ZVe,FormData:qVe,Blob:HVe},protocols:["http","https","file","blob","url","data"]},J4=typeof window<"u"&&typeof document<"u",o3=typeof navigator=="object"&&navigator||void 0,KVe=J4&&(!o3||["ReactNative","NativeScript","NS"].indexOf(o3.product)<0),WVe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YVe=J4&&window.location.href||"http://localhost",XVe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:J4,hasStandardBrowserEnv:KVe,hasStandardBrowserWebWorkerEnv:WVe,navigator:o3,origin:YVe},Symbol.toStringTag,{value:"Module"})),Rd={...XVe,...$Ve};function JVe(t,e){return iE(t,new Rd.classes.URLSearchParams,Object.assign({visitor:function(a,r,i,l){return Rd.isNode&&Ba.isBuffer(a)?(this.append(r,a.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function QVe(t){return Ba.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function eze(t){const e={},a=Object.keys(t);let r;const i=a.length;let l;for(r=0;r<i;r++)l=a[r],e[l]=t[l];return e}function Qte(t){function e(a,r,i,l){let c=a[l++];if(c==="__proto__")return!0;const n=Number.isFinite(+c),v=l>=a.length;return c=!c&&Ba.isArray(i)?i.length:c,v?(Ba.hasOwnProp(i,c)?i[c]=[i[c],r]:i[c]=r,!n):((!i[c]||!Ba.isObject(i[c]))&&(i[c]=[]),e(a,r,i[c],l)&&Ba.isArray(i[c])&&(i[c]=eze(i[c])),!n)}if(Ba.isFormData(t)&&Ba.isFunction(t.entries)){const a={};return Ba.forEachEntry(t,(r,i)=>{e(QVe(r),i,a,0)}),a}return null}function tze(t,e,a){if(Ba.isString(t))try{return(e||JSON.parse)(t),Ba.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const CC={transitional:Jte,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const r=a.getContentType()||"",i=r.indexOf("application/json")>-1,l=Ba.isObject(e);if(l&&Ba.isHTMLForm(e)&&(e=new FormData(e)),Ba.isFormData(e))return i?JSON.stringify(Qte(e)):e;if(Ba.isArrayBuffer(e)||Ba.isBuffer(e)||Ba.isStream(e)||Ba.isFile(e)||Ba.isBlob(e)||Ba.isReadableStream(e))return e;if(Ba.isArrayBufferView(e))return e.buffer;if(Ba.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return JVe(e,this.formSerializer).toString();if((n=Ba.isFileList(e))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return iE(n?{"files[]":e}:e,v&&new v,this.formSerializer)}}return l||i?(a.setContentType("application/json",!1),tze(e)):e}],transformResponse:[function(e){const a=this.transitional||CC.transitional,r=a&&a.forcedJSONParsing,i=this.responseType==="json";if(Ba.isResponse(e)||Ba.isReadableStream(e))return e;if(e&&Ba.isString(e)&&(r&&!this.responseType||i)){const c=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(n){if(c)throw n.name==="SyntaxError"?Ai.from(n,Ai.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rd.classes.FormData,Blob:Rd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ba.forEach(["delete","get","head","post","put","patch"],t=>{CC.headers[t]={}});const aze=Ba.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rze=t=>{const e={};let a,r,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),a=c.substring(0,i).trim().toLowerCase(),r=c.substring(i+1).trim(),!(!a||e[a]&&aze[a])&&(a==="set-cookie"?e[a]?e[a].push(r):e[a]=[r]:e[a]=e[a]?e[a]+", "+r:r)}),e},mH=Symbol("internals");function tR(t){return t&&String(t).trim().toLowerCase()}function Ib(t){return t===!1||t==null?t:Ba.isArray(t)?t.map(Ib):String(t)}function nze(t){const e=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)e[r[1]]=r[2];return e}const ize=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function S5(t,e,a,r,i){if(Ba.isFunction(r))return r.call(this,e,a);if(i&&(e=a),!!Ba.isString(e)){if(Ba.isString(r))return e.indexOf(r)!==-1;if(Ba.isRegExp(r))return r.test(e)}}function sze(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,r)=>a.toUpperCase()+r)}function oze(t,e){const a=Ba.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(i,l,c){return this[r].call(this,e,i,l,c)},configurable:!0})})}let Bh=class{constructor(e){e&&this.set(e)}set(e,a,r){const i=this;function l(n,v,R){const x=tR(v);if(!x)throw new Error("header name must be a non-empty string");const N=Ba.findKey(i,x);(!N||i[N]===void 0||R===!0||R===void 0&&i[N]!==!1)&&(i[N||v]=Ib(n))}const c=(n,v)=>Ba.forEach(n,(R,x)=>l(R,x,v));if(Ba.isPlainObject(e)||e instanceof this.constructor)c(e,a);else if(Ba.isString(e)&&(e=e.trim())&&!ize(e))c(rze(e),a);else if(Ba.isHeaders(e))for(const[n,v]of e.entries())l(v,n,r);else e!=null&&l(a,e,r);return this}get(e,a){if(e=tR(e),e){const r=Ba.findKey(this,e);if(r){const i=this[r];if(!a)return i;if(a===!0)return nze(i);if(Ba.isFunction(a))return a.call(this,i,r);if(Ba.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=tR(e),e){const r=Ba.findKey(this,e);return!!(r&&this[r]!==void 0&&(!a||S5(this,this[r],r,a)))}return!1}delete(e,a){const r=this;let i=!1;function l(c){if(c=tR(c),c){const n=Ba.findKey(r,c);n&&(!a||S5(r,r[n],n,a))&&(delete r[n],i=!0)}}return Ba.isArray(e)?e.forEach(l):l(e),i}clear(e){const a=Object.keys(this);let r=a.length,i=!1;for(;r--;){const l=a[r];(!e||S5(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const a=this,r={};return Ba.forEach(this,(i,l)=>{const c=Ba.findKey(r,l);if(c){a[c]=Ib(i),delete a[l];return}const n=e?sze(l):String(l).trim();n!==l&&delete a[l],a[n]=Ib(i),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return Ba.forEach(this,(r,i)=>{r!=null&&r!==!1&&(a[i]=e&&Ba.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,a])=>e+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const r=new this(e);return a.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[mH]=this[mH]={accessors:{}}).accessors,i=this.prototype;function l(c){const n=tR(c);r[n]||(oze(i,c),r[n]=!0)}return Ba.isArray(e)?e.forEach(l):l(e),this}};Bh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ba.reduceDescriptors(Bh.prototype,({value:t},e)=>{let a=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[a]=r}}});Ba.freezeMethods(Bh);function b5(t,e){const a=this||CC,r=e||a,i=Bh.from(r.headers);let l=r.data;return Ba.forEach(t,function(n){l=n.call(a,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function eae(t){return!!(t&&t.__CANCEL__)}function E1(t,e,a){Ai.call(this,t??"canceled",Ai.ERR_CANCELED,e,a),this.name="CanceledError"}Ba.inherits(E1,Ai,{__CANCEL__:!0});function tae(t,e,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):e(new Ai("Request failed with status code "+a.status,[Ai.ERR_BAD_REQUEST,Ai.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function lze(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function uze(t,e){t=t||10;const a=new Array(t),r=new Array(t);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(v){const R=Date.now(),x=r[l];c||(c=R),a[i]=v,r[i]=R;let N=l,I=0;for(;N!==i;)I+=a[N++],N=N%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),R-c<e)return;const k=x&&R-x;return k?Math.round(I*1e3/k):void 0}}function cze(t,e){let a=0,r=1e3/e,i,l;const c=(R,x=Date.now())=>{a=x,i=null,l&&(clearTimeout(l),l=null),t.apply(null,R)};return[(...R)=>{const x=Date.now(),N=x-a;N>=r?c(R,x):(i=R,l||(l=setTimeout(()=>{l=null,c(i)},r-N)))},()=>i&&c(i)]}const g2=(t,e,a=3)=>{let r=0;const i=uze(50,250);return cze(l=>{const c=l.loaded,n=l.lengthComputable?l.total:void 0,v=c-r,R=i(v),x=c<=n;r=c;const N={loaded:c,total:n,progress:n?c/n:void 0,bytes:v,rate:R||void 0,estimated:R&&n&&x?(n-c)/R:void 0,event:l,lengthComputable:n!=null,[e?"download":"upload"]:!0};t(N)},a)},gH=(t,e)=>{const a=t!=null;return[r=>e[0]({lengthComputable:a,total:t,loaded:r}),e[1]]},yH=t=>(...e)=>Ba.asap(()=>t(...e)),dze=Rd.hasStandardBrowserEnv?((t,e)=>a=>(a=new URL(a,Rd.origin),t.protocol===a.protocol&&t.host===a.host&&(e||t.port===a.port)))(new URL(Rd.origin),Rd.navigator&&/(msie|trident)/i.test(Rd.navigator.userAgent)):()=>!0,hze=Rd.hasStandardBrowserEnv?{write(t,e,a,r,i,l){const c=[t+"="+encodeURIComponent(e)];Ba.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),Ba.isString(r)&&c.push("path="+r),Ba.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fze(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function pze(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function aae(t,e,a){let r=!fze(e);return t&&(r||a==!1)?pze(t,e):e}const AH=t=>t instanceof Bh?{...t}:t;function Bv(t,e){e=e||{};const a={};function r(R,x,N,I){return Ba.isPlainObject(R)&&Ba.isPlainObject(x)?Ba.merge.call({caseless:I},R,x):Ba.isPlainObject(x)?Ba.merge({},x):Ba.isArray(x)?x.slice():x}function i(R,x,N,I){if(Ba.isUndefined(x)){if(!Ba.isUndefined(R))return r(void 0,R,N,I)}else return r(R,x,N,I)}function l(R,x){if(!Ba.isUndefined(x))return r(void 0,x)}function c(R,x){if(Ba.isUndefined(x)){if(!Ba.isUndefined(R))return r(void 0,R)}else return r(void 0,x)}function n(R,x,N){if(N in e)return r(R,x);if(N in t)return r(void 0,R)}const v={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:n,headers:(R,x,N)=>i(AH(R),AH(x),N,!0)};return Ba.forEach(Object.keys(Object.assign({},t,e)),function(x){const N=v[x]||i,I=N(t[x],e[x],x);Ba.isUndefined(I)&&N!==n||(a[x]=I)}),a}const rae=t=>{const e=Bv({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:n}=e;e.headers=c=Bh.from(c),e.url=Xte(aae(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),n&&c.set("Authorization","Basic "+btoa((n.username||"")+":"+(n.password?unescape(encodeURIComponent(n.password)):"")));let v;if(Ba.isFormData(a)){if(Rd.hasStandardBrowserEnv||Rd.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((v=c.getContentType())!==!1){const[R,...x]=v?v.split(";").map(N=>N.trim()).filter(Boolean):[];c.setContentType([R||"multipart/form-data",...x].join("; "))}}if(Rd.hasStandardBrowserEnv&&(r&&Ba.isFunction(r)&&(r=r(e)),r||r!==!1&&dze(e.url))){const R=i&&l&&hze.read(l);R&&c.set(i,R)}return e},mze=typeof XMLHttpRequest<"u",gze=mze&&function(t){return new Promise(function(a,r){const i=rae(t);let l=i.data;const c=Bh.from(i.headers).normalize();let{responseType:n,onUploadProgress:v,onDownloadProgress:R}=i,x,N,I,k,Z;function $(){k&&k(),Z&&Z(),i.cancelToken&&i.cancelToken.unsubscribe(x),i.signal&&i.signal.removeEventListener("abort",x)}let H=new XMLHttpRequest;H.open(i.method.toUpperCase(),i.url,!0),H.timeout=i.timeout;function W(){if(!H)return;const oe=Bh.from("getAllResponseHeaders"in H&&H.getAllResponseHeaders()),le={data:!n||n==="text"||n==="json"?H.responseText:H.response,status:H.status,statusText:H.statusText,headers:oe,config:t,request:H};tae(function(ue){a(ue),$()},function(ue){r(ue),$()},le),H=null}"onloadend"in H?H.onloadend=W:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(W)},H.onabort=function(){H&&(r(new Ai("Request aborted",Ai.ECONNABORTED,t,H)),H=null)},H.onerror=function(){r(new Ai("Network Error",Ai.ERR_NETWORK,t,H)),H=null},H.ontimeout=function(){let pe=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const le=i.transitional||Jte;i.timeoutErrorMessage&&(pe=i.timeoutErrorMessage),r(new Ai(pe,le.clarifyTimeoutError?Ai.ETIMEDOUT:Ai.ECONNABORTED,t,H)),H=null},l===void 0&&c.setContentType(null),"setRequestHeader"in H&&Ba.forEach(c.toJSON(),function(pe,le){H.setRequestHeader(le,pe)}),Ba.isUndefined(i.withCredentials)||(H.withCredentials=!!i.withCredentials),n&&n!=="json"&&(H.responseType=i.responseType),R&&([I,Z]=g2(R,!0),H.addEventListener("progress",I)),v&&H.upload&&([N,k]=g2(v),H.upload.addEventListener("progress",N),H.upload.addEventListener("loadend",k)),(i.cancelToken||i.signal)&&(x=oe=>{H&&(r(!oe||oe.type?new E1(null,t,H):oe),H.abort(),H=null)},i.cancelToken&&i.cancelToken.subscribe(x),i.signal&&(i.signal.aborted?x():i.signal.addEventListener("abort",x)));const ee=lze(i.url);if(ee&&Rd.protocols.indexOf(ee)===-1){r(new Ai("Unsupported protocol "+ee+":",Ai.ERR_BAD_REQUEST,t));return}H.send(l||null)})},yze=(t,e)=>{const{length:a}=t=t?t.filter(Boolean):[];if(e||a){let r=new AbortController,i;const l=function(R){if(!i){i=!0,n();const x=R instanceof Error?R:this.reason;r.abort(x instanceof Ai?x:new E1(x instanceof Error?x.message:x))}};let c=e&&setTimeout(()=>{c=null,l(new Ai(`timeout ${e} of ms exceeded`,Ai.ETIMEDOUT))},e);const n=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(R=>{R.unsubscribe?R.unsubscribe(l):R.removeEventListener("abort",l)}),t=null)};t.forEach(R=>R.addEventListener("abort",l));const{signal:v}=r;return v.unsubscribe=()=>Ba.asap(n),v}},Aze=function*(t,e){let a=t.byteLength;if(a<e){yield t;return}let r=0,i;for(;r<a;)i=r+e,yield t.slice(r,i),r=i},vze=async function*(t,e){for await(const a of _ze(t))yield*Aze(a,e)},_ze=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:a,value:r}=await e.read();if(a)break;yield r}}finally{await e.cancel()}},vH=(t,e,a,r)=>{const i=vze(t,e);let l=0,c,n=v=>{c||(c=!0,r&&r(v))};return new ReadableStream({async pull(v){try{const{done:R,value:x}=await i.next();if(R){n(),v.close();return}let N=x.byteLength;if(a){let I=l+=N;a(I)}v.enqueue(new Uint8Array(x))}catch(R){throw n(R),R}},cancel(v){return n(v),i.return()}},{highWaterMark:2})},sE=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",nae=sE&&typeof ReadableStream=="function",wze=sE&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),iae=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Rze=nae&&iae(()=>{let t=!1;const e=new Request(Rd.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),_H=64*1024,l3=nae&&iae(()=>Ba.isReadableStream(new Response("").body)),y2={stream:l3&&(t=>t.body)};sE&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!y2[e]&&(y2[e]=Ba.isFunction(t[e])?a=>a[e]():(a,r)=>{throw new Ai(`Response type '${e}' is not supported`,Ai.ERR_NOT_SUPPORT,r)})})})(new Response);const Tze=async t=>{if(t==null)return 0;if(Ba.isBlob(t))return t.size;if(Ba.isSpecCompliantForm(t))return(await new Request(Rd.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ba.isArrayBufferView(t)||Ba.isArrayBuffer(t))return t.byteLength;if(Ba.isURLSearchParams(t)&&(t=t+""),Ba.isString(t))return(await wze(t)).byteLength},Cze=async(t,e)=>{const a=Ba.toFiniteNumber(t.getContentLength());return a??Tze(e)},Sze=sE&&(async t=>{let{url:e,method:a,data:r,signal:i,cancelToken:l,timeout:c,onDownloadProgress:n,onUploadProgress:v,responseType:R,headers:x,withCredentials:N="same-origin",fetchOptions:I}=rae(t);R=R?(R+"").toLowerCase():"text";let k=yze([i,l&&l.toAbortSignal()],c),Z;const $=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let H;try{if(v&&Rze&&a!=="get"&&a!=="head"&&(H=await Cze(x,r))!==0){let le=new Request(e,{method:"POST",body:r,duplex:"half"}),ge;if(Ba.isFormData(r)&&(ge=le.headers.get("content-type"))&&x.setContentType(ge),le.body){const[ue,Re]=gH(H,g2(yH(v)));r=vH(le.body,_H,ue,Re)}}Ba.isString(N)||(N=N?"include":"omit");const W="credentials"in Request.prototype;Z=new Request(e,{...I,signal:k,method:a.toUpperCase(),headers:x.normalize().toJSON(),body:r,duplex:"half",credentials:W?N:void 0});let ee=await fetch(Z);const oe=l3&&(R==="stream"||R==="response");if(l3&&(n||oe&&$)){const le={};["status","statusText","headers"].forEach(we=>{le[we]=ee[we]});const ge=Ba.toFiniteNumber(ee.headers.get("content-length")),[ue,Re]=n&&gH(ge,g2(yH(n),!0))||[];ee=new Response(vH(ee.body,_H,ue,()=>{Re&&Re(),$&&$()}),le)}R=R||"text";let pe=await y2[Ba.findKey(y2,R)||"text"](ee,t);return!oe&&$&&$(),await new Promise((le,ge)=>{tae(le,ge,{data:pe,headers:Bh.from(ee.headers),status:ee.status,statusText:ee.statusText,config:t,request:Z})})}catch(W){throw $&&$(),W&&W.name==="TypeError"&&/fetch/i.test(W.message)?Object.assign(new Ai("Network Error",Ai.ERR_NETWORK,t,Z),{cause:W.cause||W}):Ai.from(W,W&&W.code,t,Z)}}),u3={http:UVe,xhr:gze,fetch:Sze};Ba.forEach(u3,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const wH=t=>`- ${t}`,bze=t=>Ba.isFunction(t)||t===null||t===!1,sae={getAdapter:t=>{t=Ba.isArray(t)?t:[t];const{length:e}=t;let a,r;const i={};for(let l=0;l<e;l++){a=t[l];let c;if(r=a,!bze(a)&&(r=u3[(c=String(a)).toLowerCase()],r===void 0))throw new Ai(`Unknown adapter '${c}'`);if(r)break;i[c||"#"+l]=r}if(!r){const l=Object.entries(i).map(([n,v])=>`adapter ${n} `+(v===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(wH).join(`
`):" "+wH(l[0]):"as no adapter specified";throw new Ai("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:u3};function x5(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new E1(null,t)}function RH(t){return x5(t),t.headers=Bh.from(t.headers),t.data=b5.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),sae.getAdapter(t.adapter||CC.adapter)(t).then(function(r){return x5(t),r.data=b5.call(t,t.transformResponse,r),r.headers=Bh.from(r.headers),r},function(r){return eae(r)||(x5(t),r&&r.response&&(r.response.data=b5.call(t,t.transformResponse,r.response),r.response.headers=Bh.from(r.response.headers))),Promise.reject(r)})}const oae="1.8.4",oE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{oE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const TH={};oE.transitional=function(e,a,r){function i(l,c){return"[Axios v"+oae+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,n)=>{if(e===!1)throw new Ai(i(c," has been removed"+(a?" in "+a:"")),Ai.ERR_DEPRECATED);return a&&!TH[c]&&(TH[c]=!0,console.warn(i(c," has been deprecated since v"+a+" and will be removed in the near future"))),e?e(l,c,n):!0}};oE.spelling=function(e){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function xze(t,e,a){if(typeof t!="object")throw new Ai("options must be an object",Ai.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const l=r[i],c=e[l];if(c){const n=t[l],v=n===void 0||c(n,l,t);if(v!==!0)throw new Ai("option "+l+" must be "+v,Ai.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Ai("Unknown option "+l,Ai.ERR_BAD_OPTION)}}const Lb={assertOptions:xze,validators:oE},Nm=Lb.validators;let xv=class{constructor(e){this.defaults=e,this.interceptors={request:new pH,response:new pH}}async request(e,a){try{return await this._request(e,a)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,a){typeof e=="string"?(a=a||{},a.url=e):a=e||{},a=Bv(this.defaults,a);const{transitional:r,paramsSerializer:i,headers:l}=a;r!==void 0&&Lb.assertOptions(r,{silentJSONParsing:Nm.transitional(Nm.boolean),forcedJSONParsing:Nm.transitional(Nm.boolean),clarifyTimeoutError:Nm.transitional(Nm.boolean)},!1),i!=null&&(Ba.isFunction(i)?a.paramsSerializer={serialize:i}:Lb.assertOptions(i,{encode:Nm.function,serialize:Nm.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Lb.assertOptions(a,{baseUrl:Nm.spelling("baseURL"),withXsrfToken:Nm.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let c=l&&Ba.merge(l.common,l[a.method]);l&&Ba.forEach(["delete","get","head","post","put","patch","common"],Z=>{delete l[Z]}),a.headers=Bh.concat(c,l);const n=[];let v=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(a)===!1||(v=v&&$.synchronous,n.unshift($.fulfilled,$.rejected))});const R=[];this.interceptors.response.forEach(function($){R.push($.fulfilled,$.rejected)});let x,N=0,I;if(!v){const Z=[RH.bind(this),void 0];for(Z.unshift.apply(Z,n),Z.push.apply(Z,R),I=Z.length,x=Promise.resolve(a);N<I;)x=x.then(Z[N++],Z[N++]);return x}I=n.length;let k=a;for(N=0;N<I;){const Z=n[N++],$=n[N++];try{k=Z(k)}catch(H){$.call(this,H);break}}try{x=RH.call(this,k)}catch(Z){return Promise.reject(Z)}for(N=0,I=R.length;N<I;)x=x.then(R[N++],R[N++]);return x}getUri(e){e=Bv(this.defaults,e);const a=aae(e.baseURL,e.url,e.allowAbsoluteUrls);return Xte(a,e.params,e.paramsSerializer)}};Ba.forEach(["delete","get","head","options"],function(e){xv.prototype[e]=function(a,r){return this.request(Bv(r||{},{method:e,url:a,data:(r||{}).data}))}});Ba.forEach(["post","put","patch"],function(e){function a(r){return function(l,c,n){return this.request(Bv(n||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}xv.prototype[e]=a(),xv.prototype[e+"Form"]=a(!0)});let Pze=class lae{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(l){a=l});const r=this;this.promise.then(i=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](i);r._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(n=>{r.subscribe(n),l=n}).then(i);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,n){r.reason||(r.reason=new E1(l,c,n),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=r=>{e.abort(r)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new lae(function(i){e=i}),cancel:e}}};function Eze(t){return function(a){return t.apply(null,a)}}function Nze(t){return Ba.isObject(t)&&t.isAxiosError===!0}const c3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(c3).forEach(([t,e])=>{c3[e]=t});function uae(t){const e=new xv(t),a=Ute(xv.prototype.request,e);return Ba.extend(a,xv.prototype,e,{allOwnKeys:!0}),Ba.extend(a,e,null,{allOwnKeys:!0}),a.create=function(i){return uae(Bv(t,i))},a}const Xl=uae(CC);Xl.Axios=xv;Xl.CanceledError=E1;Xl.CancelToken=Pze;Xl.isCancel=eae;Xl.VERSION=oae;Xl.toFormData=iE;Xl.AxiosError=Ai;Xl.Cancel=Xl.CanceledError;Xl.all=function(e){return Promise.all(e)};Xl.spread=Eze;Xl.isAxiosError=Nze;Xl.mergeConfig=Bv;Xl.AxiosHeaders=Bh;Xl.formToJSON=t=>Qte(Ba.isHTMLForm(t)?new FormData(t):t);Xl.getAdapter=sae.getAdapter;Xl.HttpStatusCode=c3;Xl.default=Xl;const{Axios:uMe,AxiosError:cMe,CanceledError:dMe,isCancel:hMe,CancelToken:fMe,VERSION:pMe,all:mMe,Cancel:gMe,isAxiosError:yMe,spread:AMe,toFormData:vMe,AxiosHeaders:_Me,HttpStatusCode:wMe,formToJSON:RMe,getAdapter:TMe,mergeConfig:CMe}=Xl,Oze="/ecpcaps/assets/bike_icon-CFICwI6a.png";ap.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const Vze=({onEditStation:t})=>{const[e,a]=ie.useState(null),[r,i]=ie.useState([]),[l,c]=ie.useState(null),[n,v]=ie.useState(!1),[R,x]=ie.useState([]),[N,I]=ie.useState(!0),[k,Z]=ie.useState([]),[$,H]=ie.useState(""),[W,ee]=ie.useState("all"),[oe,pe]=ie.useState([]);ie.useEffect(()=>{if(!e){const ue=new ap.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12});ue.on("load",()=>{a(ue)})}},[e]),ie.useEffect(()=>e?(r.forEach(Re=>Re.remove()),(async()=>{try{const Re=await gs(Ln(Ar,"stations")),we=await gs(Ln(Ar,"admins")),Ne={};we.docs.forEach(_e=>{const ke=_e.data();Ne[_e.id]={name:ke.name,profilePhoto:ke.profilePhoto}});const ne=[];if(Re.docs.forEach(_e=>{const ke=_e.data(),Pe=ke.tanodAssigned||[],Ee=Array.isArray(Pe)?Pe:[Pe],De={id:_e.id,...ke,tanodAssigned:Ee,tanodAssignedName:Ee.map(qe=>{var Oe;return((Oe=Ne[qe])==null?void 0:Oe.name)||"Unknown"}).join(", "),tanodAssignedAvatar:Ee.map(qe=>{var Oe;return(Oe=Ne[qe])==null?void 0:Oe.profilePhoto}).filter(qe=>qe)};if(De.coordinates&&Array.isArray(De.coordinates)&&De.coordinates.length===2){const qe=document.createElement("div");qe.className="custom-marker";const Oe=document.createElement("div");Oe.className="station-name",Oe.textContent=De.stationName,qe.appendChild(Oe);const He=document.createElement("img");He.src=Oze,He.className="marker-icon",qe.appendChild(He),qe.addEventListener("click",()=>{c(De),v(!0)});const Ue=new ap.Marker(qe).setLngLat([De.coordinates[1],De.coordinates[0]]).addTo(e);ne.push(Ue)}}),i(ne),ne.length>0){const _e=new ap.LngLatBounds;Re.docs.forEach(ke=>{const Pe=ke.data();Pe.coordinates&&Array.isArray(Pe.coordinates)&&Pe.coordinates.length===2&&_e.extend([Pe.coordinates[1],Pe.coordinates[0]])}),e.fitBounds(_e,{padding:50})}}catch(Re){console.error("Error fetching stations:",Re)}})(),()=>{r.forEach(Re=>Re.remove())}):void 0,[e]);const le=async()=>{try{const Re=(await gs(Ln(Ar,"admins"))).docs.map(we=>({id:we.id,...we.data()}));pe(Re)}catch(ue){console.error("Error fetching admins:",ue)}};ie.useEffect(()=>{le()},[]);const ge=({station:ue,onClose:Re})=>{const[we,Ne]=ie.useState(!1),[ne,_e]=ie.useState(!1),[ke,Pe]=ie.useState(!1),[Ee,De]=ie.useState([]),[qe,Oe]=ie.useState([]),[He,Ue]=ie.useState([]),[ct,Se]=ie.useState([]),[Ie,je]=ie.useState(0),[Ze,Be]=ie.useState(!1),[Je,dt]=ie.useState(!1),[ut,Ae]=ie.useState(!1),[Dt,Lt]=ie.useState(null),[fa,Nt]=ie.useState(!1),[Ht,wt]=ie.useState([]),[fr,Ca]=ie.useState(!1),[za,ar]=ie.useState(!1),[ur,or]=ie.useState(null),[Cr,Ia]=ie.useState([]);ie.useEffect(()=>{Fr(),tn(),lr()},[ue.id]);const Fr=async()=>{try{const ja=(await gs(Ln(Ar,"bikes"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>gr.stationAssigned===ue.id);Ue(ja)}catch(ra){console.error("Error fetching station bikes:",ra)}},tn=async()=>{try{const ja=(await gs(Ln(Ar,"bikes"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>!gr.stationAssigned);Se(ja)}catch(ra){console.error("Error fetching unassigned bikes:",ra)}},lr=async()=>{try{const ja=(await gs(Ln(Ar,"admins"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>{var Tn;return!((Tn=ue.tanodAssigned)!=null&&Tn.includes(gr.id))&&!gr.stationAssignedTo});wt(ja)}catch(ra){console.error("Error fetching unassigned admins:",ra)}},wr=async()=>{try{Ne(!0);const ra=Ee.map(ja=>Hl(Di(Ar,"bikes",ja),{stationAssigned:null}));await Promise.all(ra),_e(!1),De([]),Fr()}catch(ra){console.error("Error removing bikes:",ra),alert("Failed to remove bikes")}finally{Ne(!1)}},na=async()=>{try{Ne(!0);const ra=qe.map(ja=>Hl(Di(Ar,"bikes",ja),{stationAssigned:ue.id}));await Promise.all(ra),Pe(!1),Oe([]),Fr()}catch(ra){console.error("Error adding bikes:",ra),alert("Failed to add bikes")}finally{Ne(!1)}},Oa=async ra=>{try{Ne(!0);const ja=ue.tanodAssigned||[];await Hl(Di(Ar,"stations",ue.id),{tanodAssigned:[...ja,...ra]});const gr=ra.map(Tn=>Hl(Di(Ar,"admins",Tn),{stationAssignedTo:ue.id}));await Promise.all(gr),Nt(!1),window.location.reload()}catch(ja){console.error("Error assigning admins:",ja),alert("Failed to assign admins")}finally{Ne(!1)}};return B.jsx("div",{className:"map-modal-overlay",children:B.jsxs("div",{className:"map-modal-content large",children:[B.jsxs("div",{className:"modal-header",children:[B.jsxs("div",{className:"station-header",children:[B.jsx("h2",{children:ue.stationName}),B.jsx("p",{className:"station-address",children:ue.stationAddress})]}),B.jsx("button",{className:"close-button",onClick:Re,children:""})]}),B.jsxs("div",{className:"modal-body",children:[B.jsxs("div",{className:"admin-section",children:[B.jsxs("div",{className:"count-card",children:[B.jsxs("div",{className:"count-header",children:[B.jsx("h3",{children:"Station Admin"}),B.jsx("button",{className:"edit-btn",onClick:()=>Nt(!fa),children:B.jsx(wR,{})})]}),fa&&B.jsx("div",{className:"action-dropdown",children:B.jsx("button",{onClick:()=>{Ca(!0),ar(!1),Nt(!1),lr()},children:"Add Admin"})})]}),B.jsx("div",{className:"admin-content",children:fr?B.jsxs("div",{className:"admin-list",children:[B.jsx("h4",{children:"Select Admin to Assign"}),B.jsx("div",{className:"admin-grid",children:Ht.map(ra=>B.jsxs("div",{className:"admin-card",children:[B.jsx("input",{type:"checkbox",className:"admin-checkbox",checked:Cr.includes(ra.id),onChange:ja=>{ja.target.checked?Ia([...Cr,ra.id]):Ia(Cr.filter(gr=>gr!==ra.id))}}),B.jsx("img",{src:ra.profilePhoto||"/default-avatar.png",alt:ra.name,className:"admin-photo"}),B.jsx("span",{className:"admin-name",children:ra.name})]},ra.id))}),B.jsxs("div",{className:"action-buttons",children:[B.jsx("button",{className:"save-btn",onClick:()=>{Cr.length>0&&Oa(Cr)},disabled:Cr.length===0||we,children:we?"Saving...":"Save Changes"}),B.jsx("button",{className:"discard-btn",onClick:()=>{Ca(!1),Ia([])},children:"Discard Changes"})]})]}):B.jsx("div",{className:"admin-profile",children:Array.isArray(ue.tanodAssigned)&&ue.tanodAssigned.length>0?ue.tanodAssigned.map(ra=>{const ja=oe.find(gr=>gr.id===ra);return B.jsxs("div",{className:"admin-avatar",children:[B.jsx("img",{src:(ja==null?void 0:ja.profilePhoto)||"/default-avatar.png",alt:ja==null?void 0:ja.name}),B.jsx("span",{children:(ja==null?void 0:ja.name)||"Unknown Admin"})]},ra)}):B.jsx("div",{className:"no-admin",children:B.jsx("span",{children:"No Admin Assigned"})})})})]}),B.jsxs("div",{className:"bikes-section",children:[B.jsxs("div",{className:"bikes-header-section",children:[B.jsx("h3",{children:"Station Bikes"}),B.jsx("div",{className:"counts-section",children:B.jsxs("div",{className:"count-cards",children:[B.jsxs("div",{className:"count-card",children:[B.jsxs("div",{className:"count-header",children:[B.jsxs("span",{children:["Regular Bikes:"," ",He.filter(ra=>ra.bikeCategory==="Regular Bicycle").length]}),B.jsx("button",{className:"edit-btn",onClick:()=>dt(!Je),children:B.jsx(wR,{})})]}),Je&&B.jsxs("div",{className:"action-dropdown",children:[B.jsx("button",{onClick:()=>{Pe(!0),_e(!1),Lt("Regular"),dt(!1)},children:"Add Bikes"}),B.jsx("button",{onClick:()=>{_e(!0),Pe(!1),Lt("Regular"),dt(!1)},children:"Remove Bikes"})]})]}),B.jsxs("div",{className:"count-card",children:[B.jsxs("div",{className:"count-header",children:[B.jsxs("span",{children:["E-Bikes:"," ",He.filter(ra=>ra.bikeCategory==="Electric Bicycle").length]}),B.jsx("button",{className:"edit-btn",onClick:()=>Ae(!ut),children:B.jsx(wR,{})})]}),ut&&B.jsxs("div",{className:"action-dropdown",children:[B.jsx("button",{onClick:()=>{Pe(!0),_e(!1),Lt("Electric"),Ae(!1)},children:"Add E-Bikes"}),B.jsx("button",{onClick:()=>{_e(!0),Pe(!1),Lt("Electric"),Ae(!1)},children:"Remove E-Bikes"})]})]})]})})]}),B.jsx("div",{className:"bikes-content",children:B.jsx("div",{className:"bikes-grid",children:(ne||ke?ne?He.filter(ra=>Dt==="Regular"?ra.bikeCategory==="Regular Bicycle":ra.bikeCategory==="Electric Bicycle"):ct.filter(ra=>Dt==="Regular"?ra.bikeCategory==="Regular Bicycle":ra.bikeCategory==="Electric Bicycle"):He).slice(Ie*6,(Ie+1)*6).map(ra=>B.jsxs("div",{className:"bike-card",children:[(ne||ke)&&B.jsx("input",{type:"checkbox",className:"bike-checkbox",checked:ne?Ee.includes(ra.id):qe.includes(ra.id),onChange:ja=>{const gr=ne?De:Oe,Tn=ne?Ee:qe;ja.target.checked?gr([...Tn,ra.id]):gr(Tn.filter(an=>an!==ra.id))}}),B.jsx("img",{src:ra.imageUrl||"/default-bike.png",alt:ra.bikeName}),B.jsxs("div",{className:"bike-info",children:[B.jsx("span",{className:"bike-id",children:ra.bikeId}),B.jsx("span",{className:"bike-name",children:ra.bikeName})]})]},ra.id))})}),B.jsxs("div",{className:"bikes-footer",children:[B.jsxs("div",{className:"pagination",children:[B.jsx("button",{onClick:()=>je(ra=>ra-1),disabled:Ie===0,className:"page-btn",children:B.jsx(Ife,{})}),B.jsxs("span",{children:["Page ",Ie+1]}),B.jsx("button",{onClick:()=>je(ra=>ra+1),disabled:(Ie+1)*6>=(ne?He.length:ke?ct.length:He.length),className:"page-btn",children:B.jsx(Lfe,{})})]}),(ne||ke)&&B.jsxs("div",{className:"action-buttons",children:[B.jsx("button",{className:"save-btn",onClick:ne?wr:na,disabled:we||(ne?Ee.length===0:qe.length===0),children:we?"Saving...":"Save Changes"}),B.jsx("button",{className:"discard-btn",onClick:()=>{_e(!1),Pe(!1),De([]),Oe([]),Lt(null)},children:"Discard Changes"})]})]})]})]})]})})};return B.jsxs("div",{className:"map-container",children:[B.jsx("div",{id:"map",className:"map-element"}),n&&B.jsx(ge,{station:l,onClose:()=>v(!1)})]})};ap.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const zze=({onSelectLocation:t,isSelectingLocation:e})=>{const a=ie.useRef(null),r=ie.useRef(null),i=ie.useRef(null);return ie.useEffect(()=>{if(!r.current)return r.current=new ap.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),()=>{r.current&&(r.current.remove(),r.current=null)}},[]),ie.useEffect(()=>{if(!r.current)return;const l=c=>{e&&(i.current&&i.current.remove(),i.current=new ap.Marker({draggable:!0,color:"#FF0000",scale:.8}).setLngLat([c.lngLat.lng,c.lngLat.lat]).addTo(r.current),i.current.on("dragend",()=>{const n=i.current.getLngLat();t([n.lat,n.lng])}),t([c.lngLat.lat,c.lngLat.lng]))};return e?(r.current.getCanvas().style.cursor="crosshair",r.current.on("click",l)):(r.current.getCanvas().style.cursor="",r.current.off("click",l)),()=>{r.current&&(r.current.off("click",l),r.current.getCanvas().style.cursor=""),i.current&&(i.current.remove(),i.current=null)}},[e,t]),B.jsx("div",{ref:a,className:"add-station-map"})},Dze=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState([]),[i,l]=ie.useState(!1),[c,n]=ie.useState(!1),[v,R]=ie.useState(null),[x,N]=ie.useState(!1),[I,k]=ie.useState(null),[Z,$]=ie.useState(""),[H,W]=ie.useState(""),[ee,oe]=ie.useState(""),[pe,le]=ie.useState(""),[ge,ue]=ie.useState([]),[Re,we]=ie.useState([]),[Ne,ne]=ie.useState([]),[_e,ke]=ie.useState([]),[Pe,Ee]=ie.useState(!1),[De,qe]=ie.useState(!1),[Oe,He]=ie.useState(!1),[Ue,ct]=ie.useState(!1),[Se,Ie]=ie.useState([]),[je,Ze]=ie.useState([]),[Be,Je]=ie.useState(!1),[dt,ut]=ie.useState(!1),[Ae,Dt]=ie.useState("");ie.useEffect(()=>{Lt(),fa(),Nt(),Ht()},[]);const Lt=async()=>{try{const Oa=(await gs(Ln(Ar,"admins"))).docs.map(ra=>({id:ra.id,...ra.data()}));Ze(Oa)}catch(na){console.error("Error fetching all admins:",na)}},fa=async()=>{try{const ra=(await gs(Ln(Ar,"admins"))).docs.map(ja=>({id:ja.id,...ja.data()})).filter(ja=>!ja.stationAssignedTo);Ie(ra)}catch(na){console.error("Error fetching unassigned admins:",na)}},Nt=async()=>{try{const na=await gs(Ln(Ar,"admins")),Oa={};na.docs.forEach(dn=>{const Yr=dn.data();Oa[dn.id]=Yr.name});const ja=(await gs(Ln(Ar,"stations"))).docs.map(dn=>{const Yr=dn.data(),Pr=Yr.tanodAssigned||[],ki=Array.isArray(Pr)?Pr:[Pr];return{id:dn.id,...Yr,tanodAssignedID:ki,tanodAssignedName:ki.map(gi=>Oa[gi]||"Unknown").join(", ")||"Not Assigned"}}),Tn=(await gs(Ln(Ar,"bikes"))).docs.map(dn=>({id:dn.id,...dn.data()})),an=ja.map(dn=>{const Yr=Tn.filter(ki=>ki.stationAssigned===dn.id&&ki.bikeCategory==="Regular Bicycle"&&ki.bikeStatus==="Available"&&ki.isAvailable===!0).length,Pr=Tn.filter(ki=>ki.stationAssigned===dn.id&&ki.bikeCategory==="Electric Bicycle"&&ki.bikeStatus==="Available"&&ki.isAvailable===!0).length;return{...dn,totalRegularBikes:Yr,totalElectricBikes:Pr}});e(an)}catch(na){console.error("Error fetching stations:",na)}},Ht=async()=>{const Oa=(await gs(Ln(Ar,"bikes"))).docs.map(ja=>({id:ja.id,...ja.data()})),ra=Oa.filter(ja=>!ja.stationAssigned&&ja.bikeStatus==="Available"&&ja.isAvailable===!0);r(Oa),ne(ra.filter(ja=>ja.bikeCategory==="Regular Bicycle")),ke(ra.filter(ja=>ja.bikeCategory==="Electric Bicycle"))},wt=async na=>{const Oa=t.find(ja=>ja.id===na);if(window.confirm(`Are you sure you want to delete this station?

Station Name: ${Oa.stationName}
Address: ${Oa.stationAddress}
Regular Bikes: ${Oa.totalRegularBikes||0}
Electric Bikes: ${Oa.totalElectricBikes||0}
Tanod Assigned: ${Oa.tanodAssignedName||"None"}

This action cannot be undone!`))try{const ja=Di(Ar,"stations",na),Tn=(await Fc(ja)).data(),an=(Tn==null?void 0:Tn.tanodAssigned)||[],Yr=(Array.isArray(an)?an:[an]).map(oi=>Hl(Di(Ar,"admins",oi),{stationAssignedTo:null}));await Promise.all(Yr);const gi=(await gs(Ln(Ar,"bikes"))).docs.filter(oi=>oi.data().stationAssigned===na).map(oi=>Hl(Di(Ar,"bikes",oi.id),{stationAssigned:null,bikeStatus:"Available",isAvailable:!0}));await Promise.all(gi),await mX(ja),Dt("Station deleted successfully!"),ut(!0),setTimeout(()=>ut(!1),2e3),fa(),Nt(),Ht(),await dh({actionType:"DELETE_STATION",details:`Deleted station: ${na}`,targetCollection:"stations",targetId:na})}catch(ja){console.error("Error deleting station:",ja),alert("Error deleting station. Please try again.")}},fr=async na=>{R(na),$(na.stationName||""),W(na.stationAddress||""),le(na.coordinates||""),oe(na.tanodAssignedID||""),n(!0);const ra=(await gs(Ln(Ar,"bikes"))).docs.map(ja=>({id:ja.id,...ja.data()}));ue(ra.filter(ja=>ja.bikeCategory==="Regular Bicycle"&&ja.stationAssigned===na.id).map(ja=>ja.id)),we(ra.filter(ja=>ja.bikeCategory==="Electric Bicycle"&&ja.stationAssigned===na.id).map(ja=>ja.id)),Ht()},Ca=()=>{R(null),$(""),W(""),le(""),oe(""),ue([]),we([]),Je(!1),l(!0)},za=async(na,Oa)=>{try{const ra=await Xl.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${na}&lon=${Oa}`);W(ra.data.display_name||"Unknown Address")}catch(ra){console.error("Error fetching address:",ra)}},ar=na=>{const Oa=na.target.value;le(Oa);const[ra,ja]=Oa.split(",");ra&&ja&&za(ra.trim(),ja.trim())},ur=na=>{le(na.join(",")),za(na[0],na[1])},or=async na=>{if(na.preventDefault(),!ee){alert("Please select an admin (or allow none).");return}try{const Oa=typeof pe=="string"?pe.split(",").map(gr=>parseFloat(gr.trim())):[],ra=Array.isArray(ee)?ee:[ee];let ja;if(v)ja=Di(Ar,"stations",v.id),await Hl(ja,{stationName:Z,stationAddress:H,coordinates:Oa,tanodAssigned:ra}),Dt("Station updated successfully!"),n(!1);else{const gr={stationName:Z,stationAddress:H,coordinates:Oa,tanodAssigned:ra};ja=await Mv(Ln(Ar,"stations"),gr),Dt("Station added successfully!"),l(!1)}if(ja&&ja.id){const gr=ra.map(Tn=>Hl(Di(Ar,"admins",Tn),{stationAssignedTo:ja.id}));await Promise.all(gr),await Cr(ja.id),fa(),Nt(),ut(!0),setTimeout(()=>{ut(!1)},2e3),await dh({actionType:"UPDATE_STATION",details:`Updated station: ${ja.id}`,targetCollection:"stations",targetId:ja.id})}}catch(Oa){console.error("Error saving station:",Oa)}},Cr=async na=>{try{for(const Oa of ge){const ra=Di(Ar,"bikes",Oa);await Hl(ra,{stationAssigned:na})}for(const Oa of Re){const ra=Di(Ar,"bikes",Oa);await Hl(ra,{stationAssigned:na})}console.log("Bikes assigned successfully:",na)}catch(Oa){console.error("Error assigning bikes:",Oa)}},Ia=na=>{na==="Regular Bicycle"?qe(!0):Ee(!0)},Fr=na=>{na==="Regular Bicycle"?(He(!0),ct(!1)):(ct(!0),He(!1))},tn=async(na,Oa)=>{try{const ra=Di(Ar,"bikes",na);await Hl(ra,{stationAssigned:null}),Oa==="Regular Bicycle"?ue(ja=>ja.filter(gr=>gr!==na)):we(ja=>ja.filter(gr=>gr!==na)),Ht(),console.log(`Bike ${na} unassigned successfully.`)}catch(ra){console.error("Error unassigning bike:",ra)}},lr=({station:na,onClose:Oa})=>B.jsx("div",{className:"modal-overlay",onClick:Oa,children:B.jsxs("div",{className:"modal-content",onClick:ra=>ra.stopPropagation(),children:[B.jsx("h2",{children:na.stationName}),B.jsxs("p",{children:[B.jsx("strong",{children:"Address:"})," ",na.stationAddress]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Coordinates:"})," ",na.coordinates]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Tanod Assigned:"})," ",na.tanodAssignedName||"Not Assigned"]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Total Bikes:"})," ",na.totalRegularBikes||0," ","(Regular), ",na.totalElectricBikes||0," (Electric)"]}),B.jsx("button",{className:"cancel-btn",onClick:Oa,children:"Close"})]})}),wr=({message:na})=>B.jsx("div",{className:"success-overlay",children:B.jsxs("div",{className:"success-content",children:[B.jsx("div",{className:"success-icon",children:""}),B.jsx("p",{children:na})]})});return B.jsxs(Jv,{children:[B.jsx(cA,{title:"Station Management"}),B.jsxs("div",{className:"station-management-container",children:[B.jsxs("div",{className:"station-management-header",children:[B.jsx("h2",{children:"Station Overview"}),B.jsxs("button",{className:"add-station-btn",onClick:Ca,children:[B.jsx(hx,{})," Add New Station"]})]}),B.jsxs("div",{className:"station-map-section",children:[B.jsx("h2",{children:"Station Locations"}),B.jsx("div",{className:"map-container",children:B.jsx(Vze,{onEditStation:na=>{fr(na)}})})]}),B.jsx("div",{className:"station-list",children:B.jsxs("table",{children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Station Name"}),B.jsx("th",{children:"Station Address"}),B.jsx("th",{children:"Total Bikes"}),B.jsx("th",{children:"Total E-Bikes"}),B.jsx("th",{children:"Tanod Assigned"}),B.jsx("th",{children:"Action"})]})}),B.jsx("tbody",{children:t.length>0?t.map(na=>B.jsxs("tr",{children:[B.jsx("td",{children:B.jsx("strong",{children:na.stationName})}),B.jsx("td",{children:B.jsx("span",{onClick:()=>{k(na),N(!0)},style:{cursor:"pointer",color:"#00796b"},children:na.stationAddress})}),B.jsx("td",{children:na.totalRegularBikes||0}),B.jsx("td",{children:na.totalElectricBikes||0}),B.jsx("td",{children:B.jsx("strong",{children:na.tanodAssignedName||"Not Assigned"})}),B.jsx("td",{children:B.jsx("button",{className:"delete-btn",onClick:()=>wt(na.id),children:B.jsx(Bfe,{})})})]},na.id)):B.jsx("tr",{children:B.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"10px"},children:"No stations available"})})})]})}),x&&I&&B.jsx(lr,{station:I,onClose:()=>N(!1)}),i&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content large",children:[B.jsxs("div",{className:"modal-header",children:[B.jsx("h2",{children:"Add Station"}),B.jsx("button",{className:"close-modal-btn",onClick:()=>{Je(!1),l(!1)},children:B.jsx(LL,{})})]}),B.jsxs("form",{onSubmit:or,children:[B.jsx("label",{children:"Station Name:"}),B.jsx("input",{type:"text",value:Z,onChange:na=>$(na.target.value),required:!0}),B.jsx("label",{children:"Location:"}),B.jsxs("div",{className:"location-selection",children:[B.jsxs("div",{className:"coordinates-input",children:[B.jsx("input",{type:"text",value:pe,onChange:ar,placeholder:"Click on map or enter lat,long",readOnly:!0}),B.jsx("button",{type:"button",className:`select-location-btn ${Be?"active":""}`,onClick:()=>Je(!Be),children:Be?"Done Selecting":"Select on Map"})]}),B.jsx("div",{className:"map-container",children:B.jsx(zze,{onSelectLocation:ur,isSelectingLocation:Be})})]}),B.jsx("label",{children:"Address:"}),B.jsx("textarea",{value:H,readOnly:!0}),B.jsx("label",{children:"Tanod Assigned:"}),B.jsxs("select",{value:ee,onChange:na=>oe(na.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Tanod"}),Se.map(na=>B.jsxs("option",{value:na.id,children:[na.name," (",na.email,")"]},na.id))]}),B.jsx("label",{children:"Add Bikes:"}),B.jsxs("div",{className:"bike-selection",children:[B.jsx("button",{type:"button",onClick:()=>Ia("Regular Bicycle"),children:""}),B.jsx("input",{type:"text",value:`${ge.length} Selected`,readOnly:!0})]}),B.jsx("label",{children:"Add E-Bikes:"}),B.jsxs("div",{className:"bike-selection",children:[B.jsx("button",{type:"button",onClick:()=>Ia("Electric Bicycle"),children:""}),B.jsx("input",{type:"text",value:`${Re.length} Selected`,readOnly:!0})]}),B.jsxs("div",{className:"modal-buttons",children:[B.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),B.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>l(!1),children:"Cancel"})]})]})]})}),De&&B.jsx("div",{className:"add-bike-modal-overlay",children:B.jsxs("div",{className:"add-bike-modal",children:[B.jsx("h2",{children:"Select Regular Bikes"}),B.jsx("div",{className:"bike-list-container",children:Ne.length>0?Ne.map(na=>B.jsxs("div",{className:"bike-item",children:[B.jsxs("label",{children:[na.bikeName," (",na.bikeId,")"]}),B.jsx("input",{type:"checkbox",checked:ge.includes(na.id),onChange:()=>{ue(Oa=>Oa.includes(na.id)?Oa.filter(ra=>ra!==na.id):[...Oa,na.id])}})]},na.id)):B.jsx("p",{children:"No unassigned bikes available"})}),B.jsx("button",{className:"save-btn",onClick:()=>qe(!1),children:"Done"})]})}),Pe&&B.jsx("div",{className:"add-bike-modal-overlay",children:B.jsxs("div",{className:"add-bike-modal",children:[B.jsx("h2",{children:"Select Electric Bikes"}),B.jsx("div",{className:"bike-list-container",children:_e.length>0?_e.map(na=>B.jsxs("div",{className:"bike-item",children:[B.jsxs("label",{children:[na.bikeName," (",na.bikeId,")"]}),B.jsx("input",{type:"checkbox",checked:Re.includes(na.id),onChange:()=>{we(Oa=>Oa.includes(na.id)?Oa.filter(ra=>ra!==na.id):[...Oa,na.id])}})]},na.id)):B.jsx("p",{children:"No unassigned e-bikes available"})}),B.jsx("button",{className:"save-btn",onClick:()=>Ee(!1),children:"Done"})]})}),Oe&&B.jsx("div",{className:"assigned-bike-overlay",children:B.jsxs("div",{className:"assigned-bike-modal",children:[B.jsx("h2",{children:"Remove Assigned Regular Bikes"}),B.jsx("div",{className:"bike-list-container",children:ge.length>0?ge.map(na=>{const Oa=a.find(ra=>ra.id===na);return B.jsxs("div",{className:"bike-item",children:[B.jsxs("label",{children:[Oa==null?void 0:Oa.bikeName," (",Oa==null?void 0:Oa.bikeId,")"]}),B.jsx("button",{className:"remove-btn",onClick:()=>tn(na,"Regular Bicycle"),children:" Remove"})]},na)}):B.jsx("p",{children:"No assigned bikes."})}),B.jsx("button",{className:"save-btn",onClick:()=>He(!1),children:"Done"})]})}),Ue&&B.jsx("div",{className:"assigned-bike-overlay",children:B.jsxs("div",{className:"assigned-bike-modal",children:[B.jsx("h2",{children:"Remove Assigned Electric Bikes"}),B.jsx("div",{className:"bike-list-container",children:Re.length>0?Re.map(na=>{const Oa=a.find(ra=>ra.id===na);return B.jsxs("div",{className:"bike-item",children:[B.jsxs("label",{children:[Oa==null?void 0:Oa.bikeName," (",Oa==null?void 0:Oa.bikeId,")"]}),B.jsx("button",{className:"remove-btn",onClick:()=>tn(na,"Electric Bicycle"),children:" Remove"})]},na)}):B.jsx("p",{children:"No assigned e-bikes."})}),B.jsx("button",{className:"save-btn",onClick:()=>ct(!1),children:"Done"})]})}),c&&v&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsx("h2",{children:"Edit Station"}),B.jsxs("form",{onSubmit:or,children:[B.jsx("label",{children:"Station Name:"}),B.jsx("input",{type:"text",value:Z,onChange:na=>$(na.target.value),required:!0}),B.jsx("label",{children:"Coordinates:"}),B.jsx("input",{type:"text",value:pe,onChange:ar,placeholder:"Enter lat,long"}),B.jsx("label",{children:"Address:"}),B.jsx("textarea",{value:H,readOnly:!0}),B.jsx("label",{children:"Tanod Assigned:"}),(()=>{const na=v.tanodAssignedID,Oa=je.find(ja=>ja.id===na);let ra=[...Se];return Oa&&!ra.some(ja=>ja.id===Oa.id)&&ra.unshift(Oa),B.jsxs("select",{value:ee,onChange:ja=>oe(ja.target.value),required:!0,children:[B.jsx("option",{value:"",children:"Select Tanod"}),ra.map(ja=>B.jsxs("option",{value:ja.id,children:[ja.name," (",ja.email,")"]},ja.id))]})})(),B.jsx("label",{children:"Assigned Bikes:"}),B.jsxs("div",{className:"bike-selection",children:[B.jsx("button",{type:"button",onClick:()=>Fr("Regular Bicycle"),children:""}),B.jsx("input",{type:"text",value:`${ge.length} Assigned`,readOnly:!0}),B.jsx("button",{type:"button",onClick:()=>Ia("Regular Bicycle"),children:""})]}),B.jsx("label",{children:"Assigned E-Bikes:"}),B.jsxs("div",{className:"bike-selection",children:[B.jsx("button",{type:"button",onClick:()=>Fr("Electric Bicycle"),children:""}),B.jsx("input",{type:"text",value:`${Re.length} Assigned`,readOnly:!0}),B.jsx("button",{type:"button",onClick:()=>Ia("Electric Bicycle"),children:""})]}),B.jsxs("div",{className:"modal-buttons",children:[B.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),B.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>n(!1),children:"Cancel"})]})]})]})}),dt&&B.jsx(wr,{message:Ae})]})]})},Mze=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState(""),[i,l]=ie.useState(""),[c,n]=ie.useState(""),[v,R]=ie.useState(null),[x,N]=ie.useState(""),[I,k]=ie.useState(!1),[Z,$]=ie.useState("station_manager"),[H,W]=ie.useState(!1),[ee,oe]=ie.useState(null),[pe,le]=ie.useState(null),[ge,ue]=ie.useState({adminId:null,role:""}),[Re,we]=ie.useState([]),[Ne,ne]=ie.useState({total:0,active:0,inactive:0,onBreak:0}),[_e,ke]=ie.useState(null),Pe={ACTIVE:"Active",INACTIVE:"Inactive",ON_BREAK:"On Break"},Ee={Active:"#4CAF50",Inactive:"#F44336","On Break":"#FFC107"},De=Je=>{const dt={total:Je.length,active:0,inactive:0,onBreak:0};return Je.forEach(ut=>{switch(ut.status){case Pe.ACTIVE:dt.active++;break;case Pe.INACTIVE:dt.inactive++;break;case Pe.ON_BREAK:dt.onBreak++;break;default:dt.inactive++;break}}),dt};ie.useEffect(()=>{const Je=async()=>{const ut=await gs(Ln(Ar,"stations")),Ae={};return ut.docs.forEach(Dt=>{Ae[Dt.id]={stationName:Dt.data().stationName,stationAddress:Dt.data().stationAddress}}),we(Ae),Ae},dt=ut=>{const Ae=Ln(Ar,"admins");return sh(Ae,Dt=>{const Lt=Dt.docs.map(fa=>({id:fa.id,...fa.data(),stationDetails:fa.data().stationAssignedTo?ut[fa.data().stationAssignedTo]:null}));e(Lt),ne(De(Lt))})};Je().then(ut=>{const Ae=dt(ut);return()=>Ae()})},[]);const qe=async(Je,dt)=>{try{const ut=Di(Ar,"admins",Je);await Hl(ut,{roles:[dt],updatedAt:new Date});const Ae=await Fc(ut),Dt=Ae.exists()?Ae.data().name:Je;await dh({actionType:"UPDATE_ROLE",details:`Updated role for admin: ${Dt} to ${dt}`,targetCollection:"admins",targetId:Je}),alert("Role updated successfully!")}catch(ut){console.error("Error updating role:",ut),alert("Failed to update admin role. Please try again.")}},Oe=(Je,dt)=>{ue({adminId:Je,role:dt||"Station Manager"})},He=async()=>{if(!ge.adminId||!ge.role){alert("Please select a role");return}try{await qe(ge.adminId,ge.role),ue({adminId:null,role:""})}catch(Je){console.error("Error saving role:",Je),alert("Failed to save role changes")}},Ue=Je=>new Promise(dt=>{const ut=new FileReader;ut.readAsDataURL(Je),ut.onload=Ae=>{const Dt=new Image;Dt.src=Ae.target.result,Dt.onload=()=>{const Lt=document.createElement("canvas"),fa=Lt.getContext("2d");let Nt=Dt.width,Ht=Dt.height;const wt=800;Nt>Ht&&Nt>wt?(Ht=Ht*wt/Nt,Nt=wt):Ht>wt&&(Nt=Nt*wt/Ht,Ht=wt),Lt.width=Nt,Lt.height=Ht,fa.drawImage(Dt,0,0,Nt,Ht),Lt.toBlob(fr=>{dt(fr)},"image/jpeg",.6)}}}),ct=async Je=>{if(!Je)return null;try{const dt=await Ue(Je),ut=`admin_profiles/${Date.now()}_${Je.name}`,Ae=RM(),Dt=wM(Ae,ut);return await vM(Dt,dt),await _M(Dt)}catch(dt){return console.error("Error uploading image:",dt),null}},Se=async Je=>{if(Je.preventDefault(),!a||!i||!c){alert("Please fill in all fields.");return}try{const dt=V3(),Ae=(await hle(dt,i,c)).user;let Dt="";if(v&&(Dt=await ct(v),!Dt)){alert("Failed to upload profile image.");return}const Lt={uid:Ae.uid,name:a,email:i,roles:[Z],profilePhoto:Dt||"",status:"Active",stationAssignedTo:null,createdAt:new Date,updatedAt:new Date},fa=await Mv(Ln(Ar,"admins"),Lt);await dh({actionType:"CREATE_ADMIN",details:`Created admin: ${Lt.name}`,targetCollection:"admins",targetId:fa.id}),alert("Admin added successfully!"),r(""),l(""),n(""),R(null),N(""),k(!1)}catch(dt){console.error("Error creating admin:",dt),alert(dt.message||"There was an error creating the admin. Please try again.")}},Ie=async Je=>{if(window.confirm("Are you sure you want to deactivate this admin?"))try{const dt=Di(Ar,"admins",Je);await Hl(dt,{isDeactivated:!0,status:"Inactive",deactivatedAt:new Date,updatedAt:new Date});const ut=await Fc(dt),Ae=ut.exists()?ut.data().name:Je;await dh({actionType:"DEACTIVATE_ADMIN",details:`Deactivated admin: ${Ae}`,targetCollection:"admins",targetId:Je}),alert("Admin account has been deactivated")}catch(dt){console.error("Error deactivating admin:",dt),alert("Failed to deactivate admin account")}},je=Je=>{oe(Je),W(!0),le(null),$(Je.roles[0])},Ze=async Je=>{if(Je.preventDefault(),!pe){alert("Please select a new profile image.");return}const dt=await ct(pe);if(!dt){alert("Failed to upload new profile image.");return}try{const ut=Di(Ar,"admins",ee.id);await Hl(ut,{profilePhoto:dt});const Ae=await Fc(ut),Dt=Ae.exists()?Ae.data().name:ee.id;await dh({actionType:"UPDATE_PROFILE_PHOTO",details:`Updated profile photo for admin: ${Dt}`,targetCollection:"admins",targetId:ee.id}),alert("Profile photo updated successfully!"),W(!1),oe(null),le(null)}catch(ut){console.error("Error updating admin profile photo:",ut),alert("Failed to update admin profile photo. Please try again.")}},Be=()=>{W(!1),oe(null),le(null)};return B.jsxs(Jv,{children:[B.jsx(cA,{title:"Admin Management"}),B.jsxs("div",{className:"admin-management-container",children:[B.jsxs("div",{className:"stats-container",children:[B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Total Admins"}),B.jsx("p",{children:Ne.total})]}),B.jsxs("div",{className:"stat-card active",children:[B.jsx("h3",{children:"Active"}),B.jsx("p",{children:Ne.active})]}),B.jsxs("div",{className:"stat-card break",children:[B.jsx("h3",{children:"On Break"}),B.jsx("p",{children:Ne.onBreak})]}),B.jsxs("div",{className:"stat-card inactive",children:[B.jsx("h3",{children:"Inactive"}),B.jsx("p",{children:Ne.inactive})]})]}),B.jsxs("div",{className:"admin-management-header",children:[B.jsx("h2",{children:"Admin Creation"}),B.jsxs("button",{className:"btn-create-admin",onClick:()=>k(!0),children:[B.jsx(hx,{})," Create New Admin Account"]})]}),B.jsx("div",{className:"admin-gallery",children:t.length>0?t.map(Je=>{var dt,ut;return B.jsxs("div",{className:"admin-card",children:[B.jsxs("div",{className:"edit-container",children:[B.jsx("button",{className:"edit-toggle",onClick:()=>ke(_e===Je.id?null:Je.id),children:B.jsx(Ufe,{})}),_e===Je.id&&B.jsxs("div",{className:"edit-options",children:[B.jsxs("button",{onClick:()=>{je(Je),ke(null)},children:[B.jsx(Mfe,{})," Change Photo"]}),B.jsxs("button",{onClick:()=>{var Ae;Oe(Je.id,(Ae=Je.roles)==null?void 0:Ae[0]),ke(null)},children:[B.jsx(jfe,{})," Change Role"]}),B.jsxs("button",{onClick:()=>{Ie(Je.id),ke(null)},className:"deactivate-btn",children:[B.jsx(Gfe,{})," Deactivate Admin"]})]})]}),B.jsxs("div",{className:"admin-photo",children:[B.jsxs("div",{className:"status-dot-container",children:[B.jsx("span",{className:`status-dot ${(dt=Je.status)==null?void 0:dt.toLowerCase()}`,style:{backgroundColor:Ee[Je.status]||Ee.Inactive}}),B.jsxs("div",{className:"status-tooltip",children:[Je.status||"Inactive","  Last updated:"," ",Je.statusUpdatedAt?Vi(Je.statusUpdatedAt.toDate()).format("MMM D, HH:mm"):"Not available"]})]}),Je.profilePhoto?B.jsx("img",{src:Je.profilePhoto,alt:"Admin"}):B.jsx("div",{className:"placeholder",children:"No Image"})]}),B.jsxs("div",{className:"admin-info",children:[B.jsx("h4",{children:Je.name}),B.jsx("p",{children:Je.email}),B.jsx("div",{className:"role-badge",children:((ut=Je.roles)==null?void 0:ut[0])||"No Role"}),B.jsx("div",{className:"station-info",children:Je.stationDetails?B.jsxs("span",{className:"station-name",children:[" ",Je.stationDetails.stationName]}):B.jsx("span",{className:"no-station",children:"No Station Assigned"})})]})]},Je.id)}):B.jsx("p",{children:"No admins found"})}),I&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsx("h3",{children:"Create Admin Account"}),B.jsxs("form",{onSubmit:Se,children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Name:"}),B.jsx("input",{type:"text",value:a,onChange:Je=>r(Je.target.value),required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Role:"}),B.jsxs("select",{value:Z,onChange:Je=>$(Je.target.value),children:[B.jsx("option",{value:"Station Manager",children:"Station Manager"}),B.jsx("option",{value:"User Support",children:"User Support"})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Email:"}),B.jsx("input",{type:"email",value:i,onChange:Je=>l(Je.target.value),required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Password:"}),B.jsx("input",{type:"password",value:c,onChange:Je=>n(Je.target.value),required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Profile Picture:"}),B.jsx("input",{type:"file",accept:"image/*",onChange:Je=>R(Je.target.files[0])})]}),v&&B.jsx("div",{className:"preview-image",children:B.jsx("img",{src:URL.createObjectURL(v),alt:"Preview"})}),B.jsx("button",{type:"submit",className:"btn-create",children:"Create"}),B.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>k(!1),children:"Cancel"})]})]})}),H&&ee&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsxs("h3",{children:["Edit Profile Photo for ",ee.name]}),B.jsxs("form",{onSubmit:Ze,children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"New Profile Picture:"}),B.jsx("input",{type:"file",accept:"image/*",onChange:Je=>le(Je.target.files[0])})]}),pe&&B.jsx("div",{className:"preview-image",children:B.jsx("img",{src:URL.createObjectURL(pe),alt:"Preview"})}),B.jsx("button",{type:"submit",className:"btn-update",children:"Update Photo"}),B.jsx("button",{type:"button",className:"btn-cancel",onClick:Be,children:"Cancel"})]})]})}),ge.adminId&&B.jsx("div",{className:"modal-overlay",children:B.jsxs("div",{className:"modal-content",children:[B.jsx("h3",{children:"Change Admin Role"}),B.jsxs("form",{onSubmit:Je=>{Je.preventDefault(),He()},children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Select Role:"}),B.jsxs("select",{value:ge.role,onChange:Je=>ue({...ge,role:Je.target.value}),children:[B.jsx("option",{value:"Station Manager",children:"Station Manager"}),B.jsx("option",{value:"User Support",children:"User Support"})]})]}),B.jsxs("div",{className:"button-group",children:[B.jsx("button",{type:"submit",className:"btn-update",children:"Save Role"}),B.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>ue({adminId:null,role:""}),children:"Cancel"})]})]})]})})]})]})},P5={RegularBicycle:"Regular Bicycle",ElectricBicycle:"Electric Bicycle"},Ize=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState(!0),[i,l]=ie.useState(null),[c,n]=ie.useState(""),[v,R]=ie.useState([]),[x,N]=ie.useState([]),[I,k]=ie.useState(!1),[Z,$]=ie.useState("daily"),[H,W]=ie.useState({daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0},all:{revenue:0,rides:0}}),[ee,oe]=ie.useState({key:"revenue",direction:"desc"}),[pe,le]=ie.useState([]),[ge,ue]=ie.useState(!1),[Re,we]=ie.useState(!1),Ne=async()=>{try{const je=Ln(Ar,"remittances"),Ze=Hp(je,eT("dateSubmitted","desc")),Je=(await gs(Ze)).docs.map(dt=>({id:dt.id,...dt.data()}));le(Je)}catch(je){console.error("Error fetching remittances:",je)}},[ne,_e]=ie.useState([]),[ke,Pe]=ie.useState(!1),Ee=je=>{oe({key:je,direction:ee.key===je&&ee.direction==="asc"?"desc":"asc"})};ie.useEffect(()=>{De(),qe(),He(),Ne()},[]),ie.useEffect(()=>{He()},[Z]);const De=async()=>{try{const Ze=(await gs(Ln(Ar,"rentalRates"))).docs.map(Be=>({id:Be.id,...Be.data()}));e(Ze)}catch(je){console.error("Error fetching rental rates:",je)}finally{r(!1)}},qe=async()=>{try{const je=Ln(Ar,"rateHistory"),Ze=Hp(je,eT("timestamp","desc")),Je=(await gs(Ze)).docs.map(dt=>({id:dt.id,...dt.data()}));R(Je)}catch(je){console.error("Error fetching rate history:",je)}},Oe=(je,Ze)=>{const Be=Vi();switch(Ze){case"daily":return Vi(je).isSame(Be,"day");case"weekly":return Vi(je).isAfter(Be.subtract(1,"week"));case"monthly":return Vi(je).isAfter(Be.subtract(1,"month"));case"all":return!0;default:return!0}},He=async()=>{try{const je=Ln(Ar,"ride_history"),Ze=await gs(je);let Be={},Je={},dt={daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},all:{revenue:0,rides:0}};const ut=Ln(Ar,"stations"),Ae=await gs(ut),Dt=new Map(Ae.docs.map(Nt=>[Nt.id,Nt.data().stationName]));Ze.docs.forEach(Nt=>{const Ht=Nt.data(),wt=Ht.rideEndedAt.toDate(),fr=Number(Ht.amountPaid||0),Ca=Ht.startStation,za=Ht.startStationName||"Unknown Station";Oe(wt,Z)&&(dt[Z].revenue+=fr,dt[Z].rides+=1,Ca&&(Dt.has(Ca)?(Be[Ca]||(Be[Ca]={id:Ca,stationName:Dt.get(Ca),revenue:0,rides:0}),Be[Ca].revenue+=fr,Be[Ca].rides+=1):(Je[Ca]||(Je[Ca]={id:Ca,stationName:za,revenue:0,rides:0,isDeleted:!0}),Je[Ca].revenue+=fr,Je[Ca].rides+=1)))});const Lt=Object.values(Be),fa=Object.values(Je);N(Lt),_e(fa),W(Nt=>({...Nt,[Z]:dt[Z]}))}catch(je){console.error("Error fetching station revenue:",je)}},Ue=je=>{var Ze;l(je),n(((Ze=je.pricePerMinute)==null?void 0:Ze.toString())||"")},ct=()=>{l(null),n("")},Se=async()=>{if(!i)return;const je=parseFloat(c);if(isNaN(je)||je<=0){alert("Please enter a valid number greater than 0 for the price.");return}try{const Ze=eA.currentUser;if(!Ze)throw new Error("No user is signed in");const Be=Di(Ar,"users",Ze.uid),Je=await Fc(Be),dt=Je.exists()?Je.data().name:"Unknown User",ut=Di(Ar,"rentalRates",i.id);await Hl(ut,{pricePerMinute:je}),await dh({actionType:"UPDATE_RATE",details:`Updated rate for ${i.id} from ${i.pricePerMinute} to ${je}`,targetCollection:"rentalRates",targetId:i.id});const Ae=t.map(Dt=>Dt.id===i.id?{...Dt,pricePerMinute:je}:Dt);e(Ae),await qe(),ct()}catch(Ze){console.error("Error updating rate:",Ze),alert("Failed to update the rate. See console for details.")}},Ie=async(je,Ze)=>{if(window.confirm(`Are you sure you want to ${Ze} this remittance?`)){we(!0);try{const Be=Di(Ar,"remittances",je);await Hl(Be,{status:Ze,processedAt:new Date,processedBy:eA.currentUser.uid}),await dh({actionType:`REMITTANCE_${Ze.toUpperCase()}`,details:`Remittance ${je} marked as ${Ze}`,targetCollection:"remittances",targetId:je}),Ne(),alert(`Remittance ${Ze} successfully`)}catch(Be){console.error("Error processing remittance:",Be),alert("Failed to process remittance")}finally{we(!1)}}};return B.jsxs(Jv,{children:[B.jsx(cA,{title:"Bike Management"}),B.jsxs("div",{className:"rate-management-container",children:[B.jsx("h2",{children:"Rental Rate Management"}),a?B.jsx("p",{children:"Loading..."}):B.jsx(B.Fragment,{children:B.jsx("div",{className:"table-container",children:B.jsxs("table",{className:"rate-table",children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Bike Type"}),B.jsx("th",{children:"Price Per Minute ()"}),B.jsx("th",{children:"Actions"})]})}),B.jsx("tbody",{children:t.length>0?t.map(je=>{var Be;const Ze=P5[je.id]||je.id;return B.jsxs("tr",{children:[B.jsx("td",{children:Ze}),B.jsx("td",{children:(Be=je.pricePerMinute)==null?void 0:Be.toFixed(2)}),B.jsx("td",{children:B.jsxs("button",{className:"edit-btn",onClick:()=>Ue(je),children:[B.jsx(wR,{})," Edit"]})})]},je.id)}):B.jsx("tr",{children:B.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No rental rates available."})})})]})})}),B.jsxs("div",{className:"revenue-section",children:[B.jsx("h3",{children:"Station Revenue"}),B.jsx("div",{className:"controls",children:B.jsxs("div",{className:"time-filter",children:[B.jsx("button",{className:`filter-btn ${Z==="all"?"active":""}`,onClick:()=>$("all"),children:"All Time"}),B.jsx("button",{className:`filter-btn ${Z==="daily"?"active":""}`,onClick:()=>$("daily"),children:"Today"}),B.jsx("button",{className:`filter-btn ${Z==="weekly"?"active":""}`,onClick:()=>$("weekly"),children:"This Week"}),B.jsx("button",{className:`filter-btn ${Z==="monthly"?"active":""}`,onClick:()=>$("monthly"),children:"This Month"}),B.jsx("button",{className:`filter-btn ${ke?"active":""}`,onClick:()=>Pe(!ke),children:ke?"Hide Deleted Stations":"Show Deleted Stations"})]})}),B.jsx("div",{className:"table-container",children:B.jsxs("table",{className:"revenue-table",children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsxs("th",{onClick:()=>Ee("stationName"),children:["Station Name"," ",ee.key==="stationName"&&(ee.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Ee("revenue"),children:["Total Revenue ()"," ",ee.key==="revenue"&&(ee.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Ee("rides"),children:["Total Rides"," ",ee.key==="rides"&&(ee.direction==="asc"?"":"")]})]})}),B.jsxs("tbody",{children:[x.sort((je,Ze)=>ee.key==="stationName"?ee.direction==="asc"?je.stationName.localeCompare(Ze.stationName):Ze.stationName.localeCompare(je.stationName):ee.direction==="asc"?je[ee.key]-Ze[ee.key]:Ze[ee.key]-je[ee.key]).map(je=>B.jsxs("tr",{children:[B.jsx("td",{children:je.stationName}),B.jsx("td",{children:je.revenue.toFixed(2)}),B.jsx("td",{children:je.rides})]},je.id)),ke&&ne.sort((je,Ze)=>ee.key==="stationName"?ee.direction==="asc"?je.stationName.localeCompare(Ze.stationName):Ze.stationName.localeCompare(je.stationName):ee.direction==="asc"?je[ee.key]-Ze[ee.key]:Ze[ee.key]-je[ee.key]).map(je=>B.jsxs("tr",{className:"deleted-station",children:[B.jsxs("td",{children:[je.stationName," (Deleted)"]}),B.jsx("td",{children:je.revenue.toFixed(2)}),B.jsx("td",{children:je.rides})]},je.id)),B.jsxs("tr",{className:"total-row",children:[B.jsx("td",{children:B.jsx("strong",{children:"Total"})}),B.jsx("td",{children:B.jsxs("strong",{children:["",H[Z].revenue.toFixed(2)]})}),B.jsx("td",{children:B.jsx("strong",{children:H[Z].rides})})]})]})]})})]}),B.jsxs("div",{className:"history-section",children:[B.jsxs("div",{className:"history-header",children:[B.jsx("h3",{children:"Rate History"}),B.jsxs("button",{className:"history-toggle-btn",onClick:()=>k(!I),children:[B.jsx(wX,{})," ",I?"Hide History":"Show History"]})]}),I&&B.jsx("div",{className:"table-container",children:B.jsxs("table",{className:"history-table",children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Date"}),B.jsx("th",{children:"Bike Type"}),B.jsx("th",{children:"Old Price ()"}),B.jsx("th",{children:"New Price ()"}),B.jsx("th",{children:"Updated By"})]})}),B.jsx("tbody",{children:v.map(je=>{var Ze;return B.jsxs("tr",{children:[B.jsx("td",{children:Vi(je.timestamp.toDate()).format("MMM D, YYYY HH:mm")}),B.jsx("td",{children:P5[je.bikeType]||je.bikeType}),B.jsx("td",{children:(Ze=je.oldPrice)==null?void 0:Ze.toFixed(2)}),B.jsx("td",{children:je.newPrice.toFixed(2)}),B.jsx("td",{children:je.updatedBy})]},je.id)})})]})})]}),i&&B.jsx("div",{className:"modal-overlay",onClick:ct,children:B.jsxs("div",{className:"modal-content",onClick:je=>je.stopPropagation(),children:[B.jsx("h3",{children:"Edit Rental Rate"}),B.jsxs("p",{children:["Bike Type:"," ",B.jsx("strong",{children:P5[i.id]||i.id})]}),B.jsx("label",{children:"Price Per Minute ():"}),B.jsx("input",{type:"number",step:"0.01",value:c,onChange:je=>n(je.target.value)}),B.jsxs("div",{className:"modal-buttons",children:[B.jsx("button",{className:"save-btn",onClick:Se,children:"Save"}),B.jsx("button",{className:"cancel-btn",onClick:ct,children:"Cancel"})]})]})}),B.jsxs("div",{className:"remittance-section",children:[B.jsxs("div",{className:"section-header",children:[B.jsx("h3",{children:"Station Remittances"}),B.jsx("button",{className:"history-toggle-btn",onClick:()=>ue(!ge),children:ge?"Hide Remittances":"Show Remittances"})]}),ge&&B.jsx("div",{className:"table-container",children:B.jsxs("table",{className:"remittance-table",children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Date"}),B.jsx("th",{children:"Station"}),B.jsx("th",{children:"Period"}),B.jsx("th",{children:"Amount ()"}),B.jsx("th",{children:"Status"}),B.jsx("th",{children:"Proof"}),B.jsx("th",{children:"Actions"})]})}),B.jsxs("tbody",{children:[pe.map(je=>{var Ze,Be,Je;return B.jsxs("tr",{className:`status-${je.status}`,children:[B.jsx("td",{children:Vi((Ze=je.dateSubmitted)==null?void 0:Ze.toDate()).format("MMM D, YYYY HH:mm")}),B.jsx("td",{children:je.stationName}),B.jsxs("td",{children:[Vi((Be=je.collectedFrom)==null?void 0:Be.toDate()).format("MMM D")," -"," ",Vi((Je=je.collectedTo)==null?void 0:Je.toDate()).format("MMM D, YYYY")]}),B.jsxs("td",{children:["",je.amount.toFixed(2)]}),B.jsx("td",{children:B.jsx("span",{className:`status-badge ${je.status}`,children:je.status})}),B.jsx("td",{children:je.proofOfPayment&&B.jsx("button",{className:"view-proof-btn",onClick:()=>window.open(je.proofOfPayment,"_blank"),children:"View Proof"})}),B.jsx("td",{children:je.status==="pending"&&B.jsxs("div",{className:"action-buttons",children:[B.jsx("button",{className:"confirm-btn",onClick:()=>Ie(je.id,"confirmed"),disabled:Re,children:"Confirm"}),B.jsx("button",{className:"reject-btn",onClick:()=>Ie(je.id,"rejected"),disabled:Re,children:"Reject"})]})})]},je.id)}),pe.length===0&&B.jsx("tr",{children:B.jsx("td",{colSpan:"7",className:"no-data",children:"No remittances found"})})]})]})})]})]})]})};var Fb={exports:{}},Lze=Fb.exports,CH;function Fze(){return CH||(CH=1,function(t,e){(function(a,r){t.exports=r()})(Lze,function(){var a="week",r="year";return function(i,l,c){var n=l.prototype;n.week=function(v){if(v===void 0&&(v=null),v!==null)return this.add(7*(v-this.week()),"day");var R=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var x=c(this).startOf(r).add(1,r).date(R),N=c(this).endOf(a);if(x.isBefore(N))return 1}var I=c(this).startOf(r).date(R).startOf(a).subtract(1,"millisecond"),k=this.diff(I,a,!0);return k<0?c(this).startOf("week").week():Math.ceil(k)},n.weeks=function(v){return v===void 0&&(v=null),this.week(v)}}})}(Fb)),Fb.exports}var kze=Fze();const Uze=ss(kze);var kb={exports:{}},Bze=kb.exports,SH;function jze(){return SH||(SH=1,function(t,e){(function(a,r){t.exports=r()})(Bze,function(){return function(a,r,i){r.prototype.isBetween=function(l,c,n,v){var R=i(l),x=i(c),N=(v=v||"()")[0]==="(",I=v[1]===")";return(N?this.isAfter(R,n):!this.isBefore(R,n))&&(I?this.isBefore(x,n):!this.isAfter(x,n))||(N?this.isBefore(R,n):!this.isAfter(R,n))&&(I?this.isAfter(x,n):!this.isBefore(x,n))}}})}(kb)),kb.exports}var Gze=jze();const Zze=ss(Gze);Vi.extend(Uze);Vi.extend(Zze);const qze=({text:t})=>{const e=new RegExp("(?<![A-Za-z])(?<!-)(?<!\\/)\\b(\\d+\\.?\\d*)\\b(?![A-Za-z])","g"),a=t.split(e);return B.jsx("span",{children:a.map((r,i)=>e.test(r)?B.jsx("span",{className:"highlighted-number",children:r},i):B.jsx("span",{children:r},i))})},Ey=({title:t,analysis:e})=>B.jsxs("div",{className:"analysis-card",children:[B.jsx("h3",{children:t}),B.jsx("p",{children:B.jsx(qze,{text:e})})]}),Hze=()=>{var ue,Re,we,Ne;const[t,e]=ie.useState([]),[a,r]=ie.useState({calories:[],distance:[],duration:[],carbonSaved:[]}),[i,l]=ie.useState([]),[c,n]=ie.useState([]),[v,R]=ie.useState("monthly"),[x,N]=ie.useState([]),[I,k]=ie.useState([]),Z=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],$=["#009C8C","#4CAF50","#2196F3","#FFA726","#FF5722","#9C27B0","#673AB7","#3F51B5","#00BCD4","#795548"],H=(ne,_e,ke)=>{const Pe=Vi(),Ee=new Map;return _e.filter(qe=>{const Oe=Vi(qe.rideEndedAt);switch(ke){case"daily":return Oe.isSame(Pe,"day");case"weekly":return Oe.isAfter(Pe.subtract(1,"week"));case"monthly":return Oe.isAfter(Pe.subtract(1,"month"));default:return!0}}).forEach(qe=>{qe.startStation&&Ee.set(qe.startStation,(Ee.get(qe.startStation)||0)+1)}),ne.map(qe=>({id:qe.id,stationName:qe.stationName,rides:Ee.get(qe.id)||0})).sort((qe,Oe)=>Oe.rides-qe.rides)},W=(ne,_e)=>{const ke=new Map,Pe=Vi();let Ee,De;switch(_e){case"daily":Ee=Pe.subtract(6,"day").startOf("day"),De=Pe.endOf("day");break;case"weekly":Ee=Pe.subtract(11,"week").startOf("week"),De=Pe.endOf("week");break;case"monthly":Ee=Pe.subtract(11,"month").startOf("month"),De=Pe.endOf("month");break;default:const Oe=ne.map(He=>Vi(He.rideEndedAt));Ee=Vi.min(Oe),De=Pe}let qe=Ee;for(;qe.isBefore(De);){let Oe;switch(_e){case"daily":Oe=qe.format("MMM DD"),qe=qe.add(1,"day");break;case"weekly":Oe=`Week ${qe.week()} - ${qe.format("MMM")}`,qe=qe.add(1,"week");break;case"monthly":Oe=qe.format("MMM YYYY"),qe=qe.add(1,"month");break}ke.set(Oe,{period:Oe,revenue:0,calories:0,distance:0,duration:0,carbonSaved:0,rides:0})}return ne.forEach(Oe=>{const He=Vi(Oe.rideEndedAt);if(He.isBetween(Ee,De,null,"[]")){let Ue;switch(_e){case"daily":Ue=He.format("MMM DD");break;case"weekly":Ue=`Week ${He.week()} - ${He.format("MMM")}`;break;case"monthly":Ue=He.format("MMM YYYY");break}if(ke.has(Ue)){const ct=ke.get(Ue);ct.revenue+=Number(Oe.amountPaid||0),ct.calories+=Number(Oe.caloriesBurned||0),ct.distance+=Number(Oe.distance||0),ct.duration+=Number(Oe.duration||0)/60,ct.carbonSaved+=Number(Oe.carbonSaved||0),ct.rides+=1}}}),Array.from(ke.values()).map(Oe=>({...Oe,avgCalories:Oe.rides>0?Oe.calories/Oe.rides:0,avgDistance:Oe.rides>0?Oe.distance/Oe.rides:0,avgDuration:Oe.rides>0?Oe.duration/Oe.rides:0,avgCarbonSaved:Oe.rides>0?Oe.carbonSaved/Oe.rides:0}))},ee=(ne,_e)=>{const ke=Vi();switch(_e){case"daily":return ne.filter(Pe=>Vi(Pe.rideEndedAt).isSame(ke,"day"));case"weekly":return ne.filter(Pe=>Vi(Pe.rideEndedAt).isAfter(ke.subtract(1,"week")));case"monthly":return ne.filter(Pe=>Vi(Pe.rideEndedAt).isAfter(ke.subtract(1,"month")));default:return ne}},oe=(ne,_e)=>{if(!ne||ne.length===0)return"No data available";const ke=ee(x,v),Pe=ke.reduce((qe,Oe)=>{switch(_e){case"revenue":return qe+(Oe.amountPaid||0);case"calories":return qe+(Oe.caloriesBurned||0);case"distance":return qe+(Oe.distance||0);case"duration":return qe+(Oe.duration||0)/60;case"carbonSaved":return qe+(Oe.carbonSaved||0);default:return qe}},0),Ee=ke.length,De=v==="daily"?"today":v==="weekly"?"this week":"this month";switch(_e){case"revenue":const qe=Ee>0?Pe/Ee:0;return`The EcoRide Parada system generated ${Pe.toFixed(2)} in revenue ${De}. 
                With ${Ee} rides completed, residents spent an average of ${qe.toFixed(2)} per trip. 
                These funds support system maintenance and expansion, creating sustainable transportation
                infrastructure for Barangay Parada while providing an affordable alternative to motor vehicles.`;case"calories":const Oe=Pe*.26;return`Barangay Parada residents burned ${Pe.toFixed(0)} calories through cycling ${De}, 
                equivalent to approximately ${Math.round(Pe/100)} healthy meals worth of energy. 
                This active transportation promotes community health and wellness, generating estimated healthcare 
                cost savings of ${Oe.toFixed(2)} through preventative exercise. Regular cyclists in Parada 
                report improved cardiovascular health and reduced stress levels, creating a healthier community.`;case"distance":const Ue=Pe*.25;return`EcoRide users covered ${Pe.toFixed(2)} km by bike ${De}. 
                Based on Metro Manila traffic research, each bike takes up only 0.25 car units 
                of road space, representing approximately ${Math.round(Ue)} car-equivalent 
                trips removed from local roads. This efficient use of road space helps reduce 
                traffic congestion in Barangay Parada's busiest areas.`;case"duration":const ct=Math.floor(Pe/60),Se=Math.floor(Pe%60),Ie=Ee*5,je=Pe*.3;return`Barangay Parada cyclists spent ${ct} hours and ${Se} minutes riding ${De}. 
                By choosing EcoRide over cars, residents collectively saved approximately ${Math.round(Ie/60+je)} hours 
                on parking and traffic delays. This represents significant quality-of-life improvement for
                community members while reducing road congestion by an estimated ${Math.round(Ee*.8)} vehicles during 
                peak hours, improving mobility for all Parada residents.`;case"carbonSaved":const Ze=(Pe/21).toFixed(1),Be=(Pe/.251).toFixed(1),Je=(Pe*.05).toFixed(1);return`The EcoRide system prevented ${Pe.toFixed(2)} kg of CO2 emissions in Barangay Parada ${De}, 
                equivalent to the yearly CO2 absorption of ${Ze} trees. This translates to approximately 
                ${Be} km of car travel removed from local roads and an estimated ${Je}% 
                improvement in local air quality. Every ride contributes to Parada's sustainability goals, helping 
                transform the barangay into a model for eco-friendly transportation in Metro Manila.`;default:return"No analysis available"}},pe=(ne,_e)=>{const ke=new Map;return Vi(),ne.forEach(Pe=>{const Ee=Vi(Pe.timestamp);let De;switch(_e){case"daily":De=Ee.format("MMM DD");break;case"weekly":De=`Week ${Ee.week()} - ${Ee.format("MMM")}`;break;case"monthly":De=Ee.format("MMM YYYY");break}if(!ke.has(De))ke.set(De,{period:De,averageRating:Pe.rating,totalRatings:1});else{const qe=ke.get(De);qe.averageRating=(qe.averageRating*qe.totalRatings+Pe.rating)/(qe.totalRatings+1),qe.totalRatings+=1}}),Array.from(ke.values())},le=async()=>{try{const ne=Ln(Ar,"ride_history"),ke=(await gs(ne)).docs.map(Be=>{var Je;return{id:Be.id,...Be.data(),rideEndedAt:(Je=Be.data().rideEndedAt)!=null&&Je.toDate?Be.data().rideEndedAt.toDate():new Date(Be.data().rideEndedAt.seconds*1e3)}});N(ke);const Pe=Ln(Ar,"stations"),De=(await gs(Pe)).docs.map(Be=>({id:Be.id,stationName:Be.data().stationName})),qe=H(De,ke,v);n(qe);const Oe=W(ke,"monthly"),He=W(ke,"weekly"),Ue=W(ke,"daily");l({monthly:Oe,weekly:He,daily:Ue});const ct=new Map;De.forEach(Be=>{ct.set(Be.id,{stationName:Be.stationName,revenue:0,rides:0})}),ke.forEach(Be=>{if(Be.startStation){const Je=ct.get(Be.startStation);Je&&(Je.revenue+=Number(Be.amountPaid),Je.rides+=1)}});const Se=Array.from(ct.values()).sort((Be,Je)=>Je.revenue-Be.revenue);e(Se);const Ie=Ln(Ar,"ride_ratings"),Ze=(await gs(Ie)).docs.map(Be=>{var Je;return{id:Be.id,...Be.data(),timestamp:(Je=Be.data().timestamp)!=null&&Je.toDate?Be.data().timestamp.toDate():new Date(Be.data().timestamp.seconds*1e3)}});k(Ze)}catch(ne){console.error("Error fetching analytics:",ne)}};ie.useEffect(()=>{le()},[v]);const ge=(ne,_e)=>ne[_e]||[];return B.jsxs(Jv,{children:[B.jsx(cA,{})," ",B.jsxs("div",{className:"analytics-container",children:[B.jsxs("div",{className:"analytics-header",children:[B.jsx("h1",{children:"System Analytics"}),B.jsx("div",{className:"time-filter",children:Z.map(ne=>B.jsx("button",{className:`filter-btn ${v===ne.value?"active":""}`,onClick:()=>R(ne.value),children:ne.label},ne.value))})]}),B.jsxs("div",{className:"charts-grid",children:[B.jsxs("div",{className:"chart-section full-width",children:[B.jsx("h2",{children:"Revenue Trend"}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:500,children:B.jsxs(Xw,{data:ge(i,v),margin:{top:20,right:30,left:20,bottom:90},children:[B.jsx("defs",{children:B.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:"#009C8C",stopOpacity:.8}),B.jsx("stop",{offset:"95%",stopColor:"#009C8C",stopOpacity:.1})]})}),B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),B.jsx(Ad,{tickFormatter:ne=>`${ne.toFixed(0)}`,label:{value:"Revenue ()",angle:-90,position:"insideLeft",offset:10,dy:50}}),B.jsx(yu,{formatter:ne=>[`${ne.toFixed(2)}`,"Revenue"]}),B.jsx(mf,{verticalAlign:"bottom",height:36,wrapperStyle:{paddingTop:"20px",marginBottom:"10px"}}),B.jsx(Af,{type:"monotone",dataKey:"revenue",stroke:"#009C8C",fill:"url(#revenueGradient)",name:"Revenue",dot:{r:4}})]})}),B.jsx(Ey,{title:"Revenue Analysis",analysis:oe(ge(i,v),"revenue")})]})]}),B.jsxs("div",{className:"chart-section full-width",children:[B.jsx("h2",{children:"Revenue by Station"}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:500,children:B.jsxs($I,{data:t.filter(ne=>ne.revenue>0),margin:{top:20,right:30,left:20,bottom:120},children:[B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"stationName",angle:-45,textAnchor:"end",height:100,interval:0,tick:{fontSize:12}}),B.jsx(Ad,{tickFormatter:ne=>`${ne.toFixed(2)}`}),B.jsx(yu,{formatter:ne=>`${ne.toFixed(2)}`}),B.jsx(Jp,{dataKey:"revenue",children:t.filter(ne=>ne.revenue>0).map((ne,_e)=>B.jsx(I_,{fill:$[_e%$.length]},`cell-${_e}`))})]})}),B.jsx(Ey,{title:"Station Revenue Analysis",analysis:`The top earning station is ${((ue=t[0])==null?void 0:ue.stationName)||"N/A"} with ${(Re=t[0])==null?void 0:Re.revenue.toFixed(2)} in revenue. There are ${t.filter(ne=>ne.revenue>0).length} stations generating revenue, with a total system revenue of ${t.reduce((ne,_e)=>ne+_e.revenue,0).toFixed(2)}.`})]})]}),B.jsxs("div",{className:"chart-section full-width",children:[B.jsx("h2",{children:"Average Calories Burned"}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:500,children:B.jsxs(Xw,{data:ge(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[B.jsx("defs",{children:B.jsxs("linearGradient",{id:"caloriesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:"#FF5722",stopOpacity:.8}),B.jsx("stop",{offset:"95%",stopColor:"#FF5722",stopOpacity:.1})]})}),B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"period"}),B.jsx(Ad,{}),B.jsx(yu,{}),B.jsx(mf,{}),B.jsx(Af,{type:"monotone",dataKey:"calories",stroke:"#FF5722",fill:"url(#caloriesGradient)",name:"Calories Burned",dot:{fill:"#FF5722"}})]})}),B.jsx(Ey,{title:"Health Impact Analysis",analysis:oe(ge(i,v),"calories")})]})]}),B.jsxs("div",{className:"chart-section full-width",children:[B.jsx("h2",{children:"Average Distance Covered"}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:500,children:B.jsxs(Xw,{data:ge(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[B.jsx("defs",{children:B.jsxs("linearGradient",{id:"distanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:"#2196F3",stopOpacity:.8}),B.jsx("stop",{offset:"95%",stopColor:"#2196F3",stopOpacity:.1})]})}),B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"period"}),B.jsx(Ad,{}),B.jsx(yu,{}),B.jsx(mf,{}),B.jsx(Af,{type:"monotone",dataKey:"distance",stroke:"#2196F3",fill:"url(#distanceGradient)",name:"Distance (km)",dot:{fill:"#2196F3"}})]})}),B.jsx(Ey,{title:"Distance Analysis",analysis:oe(ge(i,v),"distance")})]})]}),B.jsxs("div",{className:"chart-section full-width",children:[B.jsx("h2",{children:"Average Ride Duration"}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:500,children:B.jsxs(Xw,{data:ge(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[B.jsx("defs",{children:B.jsxs("linearGradient",{id:"durationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:"#9C27B0",stopOpacity:.8}),B.jsx("stop",{offset:"95%",stopColor:"#9C27B0",stopOpacity:.1})]})}),B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"period"}),B.jsx(Ad,{}),B.jsx(yu,{formatter:(ne,_e)=>[`${ne.toFixed(0)} minutes`,"Duration"]}),B.jsx(mf,{}),B.jsx(Af,{type:"monotone",dataKey:"duration",stroke:"#9C27B0",fill:"url(#durationGradient)",name:"Duration (minutes)",dot:{fill:"#9C27B0"}})]})}),B.jsx(Ey,{title:"Duration Analysis",analysis:oe(ge(i,v),"duration")})]})]}),B.jsxs("div",{className:"chart-section full-width",children:[B.jsx("h2",{children:"Average CO2 Saved"}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:500,children:B.jsxs(Xw,{data:ge(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[B.jsx("defs",{children:B.jsxs("linearGradient",{id:"co2Gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:"#4CAF50",stopOpacity:.8}),B.jsx("stop",{offset:"95%",stopColor:"#4CAF50",stopOpacity:.1})]})}),B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"period"}),B.jsx(Ad,{}),B.jsx(yu,{}),B.jsx(mf,{}),B.jsx(Af,{type:"monotone",dataKey:"carbonSaved",stroke:"#4CAF50",fill:"url(#co2Gradient)",name:"CO2 Saved (kg)",dot:{fill:"#4CAF50"}})]})}),B.jsx(Ey,{title:"Environmental Impact Analysis",analysis:oe(ge(i,v),"carbonSaved")})]})]}),B.jsxs("div",{className:"chart-section full-width",children:[B.jsx("h2",{children:"User Ride Ratings"}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:500,children:B.jsxs(_Ne,{data:pe(I,v),margin:{top:20,right:30,left:20,bottom:70},children:[B.jsx(Gp,{strokeDasharray:"3 3"}),B.jsx(yd,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),B.jsx(Ad,{domain:[0,5],ticks:[0,1,2,3,4,5],label:{value:"Average Rating",angle:-90,position:"insideLeft",offset:10}}),B.jsx(yu,{formatter:(ne,_e)=>[_e==="averageRating"?`${ne.toFixed(2)} stars`:ne,_e==="averageRating"?"Average Rating":"Total Ratings"]}),B.jsx(mf,{}),B.jsx(Jp,{dataKey:"totalRatings",fill:"#82ca9d",name:"Total Ratings",opacity:.3}),B.jsx(Xv,{type:"monotone",dataKey:"averageRating",stroke:"#ff7300",name:"Average Rating",strokeWidth:2,dot:{fill:"#ff7300"}})]})}),B.jsx(Ey,{title:"User Satisfaction Analysis",analysis:(()=>{const ne=pe(I,v);if(ne.length===0)return"No ratings data available for this period.";const _e=ne.reduce((Ee,De)=>Ee+De.totalRatings,0),ke=ne.reduce((Ee,De)=>Ee+De.averageRating*De.totalRatings,0)/_e;return`Users submitted ${_e} ride ratings ${v==="daily"?"today":v==="weekly"?"this week":"this month"}, with an average satisfaction score of ${ke.toFixed(2)} out of 5 stars. ${ke>=4.5?"Users are highly satisfied with the service.":ke>=4?"Users are generally satisfied with the service.":ke>=3.5?"Users find the service acceptable but there's room for improvement.":"User satisfaction needs attention and improvement measures should be considered."}`})()})]})]}),B.jsxs("div",{className:"chart-section full-width",children:[B.jsxs("h2",{children:["Most Popular Stations (",v,")"]}),B.jsxs("div",{className:"chart-with-analysis",children:[B.jsx(Up,{width:"100%",height:600,children:B.jsxs(vNe,{children:[B.jsx(Hg,{data:H(c,x,v).filter(ne=>ne.rides>0).slice(0,5),dataKey:"rides",nameKey:"stationName",cx:"50%",cy:"50%",outerRadius:180,label:({name:ne,percent:_e})=>`${ne} ${(_e*100).toFixed(0)}%`,children:H(c,x,v).filter(ne=>ne.rides>0).slice(0,5).map((ne,_e)=>B.jsx(I_,{fill:$[_e%$.length]},`cell-${_e}`))}),B.jsx(yu,{formatter:(ne,_e)=>[`${ne} rides`,_e]}),B.jsx(mf,{verticalAlign:"bottom",height:36})]})}),B.jsx(Ey,{title:`Station Usage Analysis (${v})`,analysis:`For this ${v} period, the top stations account for ${H(c,x,v).filter(ne=>ne.rides>0).slice(0,5).reduce((ne,_e)=>ne+_e.rides,0)} rides out of ${x.length} total system rides. ${((we=H(c,x,v)[0])==null?void 0:we.stationName)||"N/A"} is currently the most active station with ${((Ne=H(c,x,v)[0])==null?void 0:Ne.rides)||0} rides in this period.`})]})]})]})]})]})},$ze=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState({}),[i,l]=ie.useState({}),[c,n]=ie.useState({}),[v,R]=ie.useState(!0),[x,N]=ie.useState("all"),[I,k]=ie.useState({key:"rideEndedAt",direction:"desc"}),[Z,$]=ie.useState(1),H=10,[W,ee]=ie.useState({totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0}),[oe,pe]=ie.useState("all");ie.useEffect(()=>{le()},[]);const le=async()=>{try{const Ee=Ln(Ar,"bikes"),De=await gs(Ee),qe={};De.docs.forEach(Je=>{qe[Je.id]=Je.data()}),r(qe);const Oe=Ln(Ar,"approved_users"),He=await gs(Oe),Ue={};He.docs.forEach(Je=>{const dt=Je.data();Ue[Je.id]=`${dt.first_name} ${dt.surname}`}),l(Ue);const ct=Ln(Ar,"stations"),Se=await gs(ct),Ie={};Se.docs.forEach(Je=>{Ie[Je.id]=Je.data().stationName}),n(Ie);const je=Ln(Ar,"ride_history"),Be=(await gs(je)).docs.map(Je=>{var dt;return{id:Je.id,...Je.data(),rideEndedAt:((dt=Je.data().rideEndedAt)==null?void 0:dt.toDate())||new Date(Je.data().rideEndedAt.seconds*1e3)}});e(Be),R(!1)}catch(Ee){console.error("Error fetching data:",Ee),R(!1)}},ge=Ee=>{const De=Vi();switch(x){case"today":return Ee.filter(qe=>Vi(qe.rideEndedAt).isSame(De,"day"));case"week":return Ee.filter(qe=>Vi(qe.rideEndedAt).isAfter(De.subtract(1,"week")));case"month":return Ee.filter(qe=>Vi(qe.rideEndedAt).isAfter(De.subtract(1,"month")));default:return Ee}},ue=Ee=>oe==="all"?Ee:Ee.filter(De=>De.endStation===oe);ie.useEffect(()=>{const De=ge(t).reduce((qe,Oe)=>({totalRides:qe.totalRides+1,totalRevenue:qe.totalRevenue+(Oe.amountPaid||0),totalDistance:qe.totalDistance+(Oe.distance||0),totalDuration:qe.totalDuration+(Oe.duration||0),totalCalories:qe.totalCalories+(Oe.caloriesBurned||0),totalCarbonSaved:qe.totalCarbonSaved+(Oe.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});ee(De)},[t,x]);const Re=Ee=>{k({key:Ee,direction:I.key===Ee&&I.direction==="asc"?"desc":"asc"})},we=Vt.useMemo(()=>{const Ee=ge(t);return[...ue(Ee)].sort((qe,Oe)=>I.key==="rideEndedAt"?I.direction==="asc"?qe[I.key]-Oe[I.key]:Oe[I.key]-qe[I.key]:I.direction==="asc"?String(qe[I.key]).localeCompare(String(Oe[I.key])):String(Oe[I.key]).localeCompare(String(qe[I.key])))},[t,x,oe,I]),Ne=we.slice((Z-1)*H,Z*H),ne=Math.ceil(we.length/H),_e=we.reduce((Ee,De)=>({totalRides:Ee.totalRides+1,totalRevenue:Ee.totalRevenue+(De.amountPaid||0),totalDistance:Ee.totalDistance+(De.distance||0),totalDuration:Ee.totalDuration+(De.duration||0),totalCalories:Ee.totalCalories+(De.caloriesBurned||0),totalCarbonSaved:Ee.totalCarbonSaved+(De.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0}),ke=oe==="all"?{text:"All Stations",bold:!0,margin:[0,0,0,8]}:{text:`Station: ${c[oe]||"Unknown"}`,bold:!0,margin:[0,0,0,8]},Pe=async()=>{const Ee=(await IT(async()=>{const{default:He}=await import("./pdfmake-CQXw5Zjc.js").then(Ue=>Ue.p);return{default:He}},[])).default,De=(await IT(async()=>{const{default:He}=await import("./vfs_fonts-Cp_E0cPE.js").then(Ue=>Ue.v);return{default:He}},[])).default;Ee.vfs=De.vfs;const Oe={pageMargins:[40,40,40,40],content:[{columns:[[{text:"EcoRide Parada",style:"header"},{text:"Ride Activity and Revenue Report",style:"subheader"},ke]]},{text:[`This report summarizes ride activity and revenue for ${x==="all"?"All Time":x==="today"?"Today":x==="week"?"This Week":"This Month"} at EcoRide Parada.
`,"Total rides: ",{text:_e.totalRides.toString(),bold:!0},`
`,"Total revenue: ",{text:_e.totalRevenue.toFixed(2),bold:!0},`
`,"Total distance: ",{text:_e.totalDistance.toFixed(2),bold:!0},` km
`,"Total duration: ",{text:Math.round(_e.totalDuration/60).toString(),bold:!0},` min
`,"Calories burned: ",{text:Math.round(_e.totalCalories).toString(),bold:!0},`
`,"CO saved: ",{text:_e.totalCarbonSaved.toFixed(2),bold:!0},` kg
`],style:"summary"},{text:"Rides",style:"tableHeader",margin:[0,10,0,4]},{table:{headerRows:1,widths:["auto","*","*","auto","auto","auto","auto","auto","*","*"],body:[[{text:"Date",bold:!0},{text:"User",bold:!0},{text:"Bike",bold:!0},{text:"Revenue",bold:!0},{text:"Duration (min)",bold:!0},{text:"Distance (km)",bold:!0},{text:"Calories",bold:!0},{text:"CO Saved (kg)",bold:!0},{text:"Start Station",bold:!0},{text:"End Station",bold:!0}],...we.map(He=>{var Ue,ct,Se,Ie;return[Vi(He.rideEndedAt).format("YYYY-MM-DD HH:mm"),i[He.userId]||"Unknown",((Ue=a[He.bikeId])==null?void 0:Ue.bikeName)||"Unknown",((ct=He.amountPaid)==null?void 0:ct.toFixed(2))||0,Math.round(He.duration/60)||0,((Se=He.distance)==null?void 0:Se.toFixed(2))||0,Math.round(He.caloriesBurned)||0,((Ie=He.carbonSaved)==null?void 0:Ie.toFixed(2))||0,c[He.startStation]||"Unknown",c[He.endStation]||"Unknown"]})]},fontSize:9,layout:"lightHorizontalLines"},{text:`Report generated on: ${Vi().format("YYYY-MM-DD HH:mm")}`,style:"footer",margin:[0,20,0,0]}],styles:{header:{fontSize:18,bold:!0,alignment:"left"},subheader:{fontSize:13,bold:!0,margin:[0,4,0,8]},summary:{fontSize:10,margin:[0,0,0,8]},tableHeader:{fontSize:11,bold:!0},footer:{fontSize:8,color:"gray"}}};Ee.createPdf(Oe).download("ecoride_parada_ride_report.pdf")};return B.jsxs(Jv,{children:[B.jsx(cA,{})," ",B.jsxs("div",{className:"ride-details-container",children:[B.jsx("h1",{children:"Ride Details"}),B.jsxs("div",{className:"controls",children:[B.jsxs("div",{className:"time-filter",children:[B.jsx("button",{className:`filter-btn ${x==="all"?"active":""}`,onClick:()=>N("all"),children:"All Time"}),B.jsx("button",{className:`filter-btn ${x==="today"?"active":""}`,onClick:()=>N("today"),children:"Today"}),B.jsx("button",{className:`filter-btn ${x==="week"?"active":""}`,onClick:()=>N("week"),children:"This Week"}),B.jsx("button",{className:`filter-btn ${x==="month"?"active":""}`,onClick:()=>N("month"),children:"This Month"})]}),B.jsxs("div",{className:"controls-right",children:[B.jsx("div",{className:"station-filter",children:B.jsxs("select",{value:oe,onChange:Ee=>pe(Ee.target.value),className:"filter-select",children:[B.jsx("option",{value:"all",children:"All End Stations"}),Object.entries(c).map(([Ee,De])=>B.jsx("option",{value:Ee,children:De},Ee))]})}),B.jsx("button",{className:"generate-report-btn",onClick:Pe,children:"Generate PDF"})]})]}),B.jsxs("div",{className:"stats-grid",children:[B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Total Rides"}),B.jsx("p",{children:_e.totalRides})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Total Revenue"}),B.jsxs("p",{children:["",_e.totalRevenue.toFixed(2)]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Total Distance"}),B.jsxs("p",{children:[_e.totalDistance.toFixed(2)," km"]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Total Duration"}),B.jsxs("p",{children:[Math.round(_e.totalDuration/60)," min"]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"Calories Burned"}),B.jsxs("p",{children:[Math.round(_e.totalCalories)," cal"]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("h3",{children:"CO2 Saved"}),B.jsxs("p",{children:[_e.totalCarbonSaved.toFixed(2)," kg"]})]})]}),v?B.jsx("div",{className:"loading",children:"Loading..."}):B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"table-container",children:B.jsxs("table",{children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsxs("th",{onClick:()=>Re("rideEndedAt"),children:["Date"," ",I.key==="rideEndedAt"&&(I.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Re("userId"),children:["User"," ",I.key==="userId"&&(I.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Re("bikeId"),children:["Bike"," ",I.key==="bikeId"&&(I.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Re("duration"),children:["Duration"," ",I.key==="duration"&&(I.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Re("distance"),children:["Distance"," ",I.key==="distance"&&(I.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Re("caloriesBurned"),children:["Calories"," ",I.key==="caloriesBurned"&&(I.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Re("carbonSaved"),children:["CO2 Saved"," ",I.key==="carbonSaved"&&(I.direction==="asc"?"":"")]}),B.jsxs("th",{onClick:()=>Re("amountPaid"),children:["Amount"," ",I.key==="amountPaid"&&(I.direction==="asc"?"":"")]}),B.jsx("th",{children:"Start Station"}),B.jsx("th",{children:"End Station"})]})}),B.jsx("tbody",{children:Ne.map(Ee=>{var De,qe,Oe,He;return B.jsxs("tr",{children:[B.jsx("td",{children:Vi(Ee.rideEndedAt).format("MMM D, YYYY HH:mm")}),B.jsx("td",{children:i[Ee.userId]||"Unknown User"}),B.jsx("td",{children:((De=a[Ee.bikeId])==null?void 0:De.bikeName)||"Unknown Bike"}),B.jsxs("td",{children:[Math.round(Ee.duration/60)," min"]}),B.jsxs("td",{children:[((qe=Ee.distance)==null?void 0:qe.toFixed(2))||0," km"]}),B.jsxs("td",{children:[Math.round(Ee.caloriesBurned)||0," cal"]}),B.jsxs("td",{children:[((Oe=Ee.carbonSaved)==null?void 0:Oe.toFixed(2))||0," kg"]}),B.jsxs("td",{children:["",((He=Ee.amountPaid)==null?void 0:He.toFixed(2))||0]}),B.jsx("td",{children:c[Ee.startStation]||"Unknown Station"}),B.jsx("td",{children:c[Ee.endStation]||"Unknown Station"})]},Ee.id)})})]})}),B.jsxs("div",{className:"pagination-controls",children:[B.jsx("button",{className:"pagination-button",onClick:()=>$(Ee=>Math.max(1,Ee-1)),disabled:Z===1,children:"Previous"}),B.jsxs("span",{className:"pagination-info",children:["Page ",Z," of ",ne]}),B.jsx("button",{className:"pagination-button",onClick:()=>$(Ee=>Math.min(ne,Ee+1)),disabled:Z===ne,children:"Next"})]})]})]})]})};function kT(t){"@babel/helpers - typeof";return kT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kT(t)}function Kze(t,e){if(kT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(kT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wze(t){var e=Kze(t,"string");return kT(e)=="symbol"?e:e+""}function Za(t,e,a){return(e=Wze(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function cae(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E5,bH;function Yze(){if(bH)return E5;bH=1;var t=function(a,r,i,l,c,n,v,R){if(!a){var x;if(r===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var N=[i,l,c,n,v,R],I=0;x=new Error(r.replace(/%s/g,function(){return N[I++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}};return E5=t,E5}var Xze=Yze(),Hu=cae(Xze),Ci=ie.createContext(null);function Jze(){Hu(!!ie.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=ie.useContext(Ci);return Hu(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function Qze(t,e,a){return Object.keys(t).reduce(function(i,l){return e(i,t[l],l)},a)}function eDe(t,e){Object.keys(t).forEach(a=>e(t[a],a))}function tDe(t,e,a,r){var i={},l=(c,n)=>{var v=a[n];v!==e[n]&&(i[n]=v,c(r,v))};return eDe(t,l),i}function aDe(t,e,a){var r=Qze(a,function(l,c,n){return typeof t[n]=="function"&&l.push(google.maps.event.addListener(e,c,t[n])),l},[]);return r}function rDe(t){google.maps.event.removeListener(t)}function $i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(rDe)}function qi(t){var{updaterMap:e,eventMap:a,prevProps:r,nextProps:i,instance:l}=t,c=aDe(i,l,a);return tDe(e,r,i,l),c}var xH={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},PH={extraMapTypes(t,e){e.forEach(function(r,i){t.mapTypes.set(String(i),r)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function nDe(t){var{children:e,options:a,id:r,mapContainerStyle:i,mapContainerClassName:l,center:c,onClick:n,onDblClick:v,onDrag:R,onDragEnd:x,onDragStart:N,onMouseMove:I,onMouseOut:k,onMouseOver:Z,onMouseDown:$,onMouseUp:H,onRightClick:W,onCenterChanged:ee,onLoad:oe,onUnmount:pe}=t,[le,ge]=ie.useState(null),ue=ie.useRef(null),[Re,we]=ie.useState(null),[Ne,ne]=ie.useState(null),[_e,ke]=ie.useState(null),[Pe,Ee]=ie.useState(null),[De,qe]=ie.useState(null),[Oe,He]=ie.useState(null),[Ue,ct]=ie.useState(null),[Se,Ie]=ie.useState(null),[je,Ze]=ie.useState(null),[Be,Je]=ie.useState(null),[dt,ut]=ie.useState(null),[Ae,Dt]=ie.useState(null);return ie.useEffect(()=>{a&&le!==null&&le.setOptions(a)},[le,a]),ie.useEffect(()=>{le!==null&&typeof c<"u"&&le.setCenter(c)},[le,c]),ie.useEffect(()=>{le&&v&&(Ne!==null&&google.maps.event.removeListener(Ne),ne(google.maps.event.addListener(le,"dblclick",v)))},[v]),ie.useEffect(()=>{le&&x&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(le,"dragend",x)))},[x]),ie.useEffect(()=>{le&&N&&(Pe!==null&&google.maps.event.removeListener(Pe),Ee(google.maps.event.addListener(le,"dragstart",N)))},[N]),ie.useEffect(()=>{le&&$&&(De!==null&&google.maps.event.removeListener(De),qe(google.maps.event.addListener(le,"mousedown",$)))},[$]),ie.useEffect(()=>{le&&I&&(Oe!==null&&google.maps.event.removeListener(Oe),He(google.maps.event.addListener(le,"mousemove",I)))},[I]),ie.useEffect(()=>{le&&k&&(Ue!==null&&google.maps.event.removeListener(Ue),ct(google.maps.event.addListener(le,"mouseout",k)))},[k]),ie.useEffect(()=>{le&&Z&&(Se!==null&&google.maps.event.removeListener(Se),Ie(google.maps.event.addListener(le,"mouseover",Z)))},[Z]),ie.useEffect(()=>{le&&H&&(je!==null&&google.maps.event.removeListener(je),Ze(google.maps.event.addListener(le,"mouseup",H)))},[H]),ie.useEffect(()=>{le&&W&&(Be!==null&&google.maps.event.removeListener(Be),Je(google.maps.event.addListener(le,"rightclick",W)))},[W]),ie.useEffect(()=>{le&&n&&(dt!==null&&google.maps.event.removeListener(dt),ut(google.maps.event.addListener(le,"click",n)))},[n]),ie.useEffect(()=>{le&&R&&(Ae!==null&&google.maps.event.removeListener(Ae),Dt(google.maps.event.addListener(le,"drag",R)))},[R]),ie.useEffect(()=>{le&&ee&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(le,"center_changed",ee)))},[n]),ie.useEffect(()=>{var Lt=ue.current===null?null:new google.maps.Map(ue.current,a);return ge(Lt),Lt!==null&&oe&&oe(Lt),()=>{Lt!==null&&pe&&pe(Lt)}},[]),B.jsx("div",{id:r,ref:ue,style:i,className:l,children:B.jsx(Ci.Provider,{value:le,children:le!==null?e:null})})}ie.memo(nDe);class iDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"state",{map:null}),Za(this,"registeredEvents",[]),Za(this,"mapRef",null),Za(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),Za(this,"panTo",e=>{var a=this.getInstance();a&&a.panTo(e)}),Za(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Za(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=qi({updaterMap:PH,eventMap:xH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:PH,eventMap:xH,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),$i(this.registeredEvents))}render(){return B.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:B.jsx(Ci.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function EH(t,e,a,r,i,l,c){try{var n=t[l](c),v=n.value}catch(R){return void a(R)}n.done?e(v):Promise.resolve(v).then(r,i)}function dae(t){return function(){var e=this,a=arguments;return new Promise(function(r,i){var l=t.apply(e,a);function c(v){EH(l,r,i,c,n,"next",v)}function n(v){EH(l,r,i,c,n,"throw",v)}c(void 0)})}}function hae(t){var{googleMapsApiKey:e,googleMapsClientId:a,version:r="weekly",language:i,region:l,libraries:c,channel:n,mapIds:v,authReferrerPolicy:R}=t,x=[];return Hu(e&&a||!(e&&a),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?x.push("key=".concat(e)):a&&x.push("client=".concat(a)),r&&x.push("v=".concat(r)),i&&x.push("language=".concat(i)),l&&x.push("region=".concat(l)),c&&c.length&&x.push("libraries=".concat(c.sort().join(","))),n&&x.push("channel=".concat(n)),v&&v.length&&x.push("map_ids=".concat(v.join(","))),R&&x.push("auth_referrer_policy=".concat(R)),x.push("loading=async"),x.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(x.join("&"))}var qy=typeof document<"u";function fae(t){var{url:e,id:a,nonce:r}=t;return qy?new Promise(function(l,c){var n=document.getElementById(a),v=window;if(n){var R=n.getAttribute("data-state");if(n.src===e&&R!=="error"){if(R==="ready")return l(a);var x=v.initMap,N=n.onerror;v.initMap=function(){x&&x(),l(a)},n.onerror=function(k){N&&N(k),c(k)};return}else n.remove()}var I=document.createElement("script");I.type="text/javascript",I.src=e,I.id=a,I.async=!0,I.nonce=r||"",I.onerror=function(Z){I.setAttribute("data-state","error"),c(Z)},v.initMap=function(){I.setAttribute("data-state","ready"),l(a)},document.head.appendChild(I)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function NH(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function Q4(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,l){return NH(i)||Reflect.apply(e,t,[i,l]),i};var a=t.appendChild.bind(t);t.appendChild=function(i){return NH(i)||Reflect.apply(a,t,[i]),i}}}var aR=!1;function pae(){return B.jsx("div",{children:"Loading..."})}var UT={id:"script-loader",version:"weekly"};class sDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"check",null),Za(this,"state",{loaded:!1}),Za(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Za(this,"isCleaningUp",dae(function*(){function e(a){if(!aR)a();else if(qy)var r=window.setInterval(function(){aR||(window.clearInterval(r),a())},1)}return new Promise(e)})),Za(this,"cleanup",()=>{aR=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),Za(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&Q4(),Hu(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:hae(this.props)};fae(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(a=>{this.props.onError&&this.props.onError(a),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Za(this,"getRef",e=>{this.check=e})}componentDidMount(){if(qy){if(window.google&&window.google.maps&&!aR){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(a){console.error("Error at injecting script after cleaning up: ",a)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),qy&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(qy){this.cleanup();var e=()=>{this.check||(delete window.google,aR=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return B.jsxs(B.Fragment,{children:[B.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||B.jsx(pae,{})]})}}Za(sDe,"defaultProps",UT);function oDe(t,e){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;a[r]=t[r]}return a}function eF(t,e){if(t==null)return{};var a,r,i=oDe(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)a=l[r],e.includes(a)||{}.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var OH;function lDe(t){var{id:e=UT.id,version:a=UT.version,nonce:r,googleMapsApiKey:i,googleMapsClientId:l,language:c,region:n,libraries:v,preventGoogleFontsLoading:R,channel:x,mapIds:N,authReferrerPolicy:I}=t,k=ie.useRef(!1),[Z,$]=ie.useState(!1),[H,W]=ie.useState(void 0);ie.useEffect(function(){return k.current=!0,()=>{k.current=!1}},[]),ie.useEffect(function(){qy&&R&&Q4()},[R]),ie.useEffect(function(){Z&&Hu(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[Z]);var ee=hae({version:a,googleMapsApiKey:i,googleMapsClientId:l,language:c,region:n,libraries:v,channel:x,mapIds:N,authReferrerPolicy:I});ie.useEffect(function(){if(!qy)return;function le(){k.current&&($(!0),OH=ee)}if(window.google&&window.google.maps&&OH===ee){le();return}fae({id:e,url:ee,nonce:r}).then(le).catch(function(ue){k.current&&W(ue),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(l||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(ue)})},[e,ee,r]);var oe=ie.useRef(void 0);return ie.useEffect(function(){oe.current&&v!==oe.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),oe.current=v},[v]),{isLoaded:Z,loadError:H,url:ee}}var uDe=["loadingElement","onLoad","onError","onUnmount","children"],cDe=B.jsx(pae,{});function dDe(t){var{loadingElement:e,onLoad:a,onError:r,onUnmount:i,children:l}=t,c=eF(t,uDe),{isLoaded:n,loadError:v}=lDe(c);return ie.useEffect(function(){n&&typeof a=="function"&&a()},[n,a]),ie.useEffect(function(){v&&typeof r=="function"&&r(v)},[v,r]),ie.useEffect(function(){return()=>{i&&i()}},[i]),n?l:e||cDe}ie.memo(dDe);function hDe(t,e,a,r){function i(l){return l instanceof a?l:new a(function(c){c(l)})}return new(a||(a=Promise))(function(l,c){function n(x){try{R(r.next(x))}catch(N){c(N)}}function v(x){try{R(r.throw(x))}catch(N){c(N)}}function R(x){x.done?l(x.value):i(x.value).then(n,v)}R((r=r.apply(t,[])).next())})}function fDe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pDe=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=a.length)return!1;for(i=r;i--!==0;)if(!t(e[i],a[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(a).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[i]))return!1;for(i=r;i--!==0;){var c=l[i];if(!t(e[c],a[c]))return!1}return!0}return e!==e&&a!==a},mDe=fDe(pDe),VH="__googleMapsScriptId",o_;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(o_||(o_={}));class dv{constructor(e){var{apiKey:a,authReferrerPolicy:r,channel:i,client:l,id:c=VH,language:n,libraries:v=[],mapIds:R,nonce:x,region:N,retries:I=3,url:k="https://maps.googleapis.com/maps/api/js",version:Z}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=a,this.authReferrerPolicy=r,this.channel=i,this.client=l,this.id=c||VH,this.language=n,this.libraries=v,this.mapIds=R,this.nonce=x,this.region=N,this.retries=I,this.url=k,this.version=Z,dv.instance){if(!mDe(this.options,dv.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(dv.instance.options)));return dv.instance}dv.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?o_.FAILURE:this.done?o_.SUCCESS:this.loading?o_.LOADING:o_.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,a)=>{this.loadCallback(r=>{r?a(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,a;if(document.getElementById(this.id)){this.callback();return}var r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(l=>!r[l]&&delete r[l]),!((a=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||a===void 0)&&a.importLibrary||(l=>{var c,n,v,R="The Google Maps JavaScript API",x="google",N="importLibrary",I="__ib__",k=document,Z=window;Z=Z[x]||(Z[x]={});var $=Z.maps||(Z.maps={}),H=new Set,W=new URLSearchParams,ee=()=>c||(c=new Promise((oe,pe)=>hDe(this,void 0,void 0,function*(){var le;yield n=k.createElement("script"),n.id=this.id,W.set("libraries",[...H]+"");for(v in l)W.set(v.replace(/[A-Z]/g,ge=>"_"+ge[0].toLowerCase()),l[v]);W.set("callback",x+".maps."+I),n.src=this.url+"?"+W,$[I]=oe,n.onerror=()=>c=pe(Error(R+" could not load.")),n.nonce=this.nonce||((le=k.querySelector("script[nonce]"))===null||le===void 0?void 0:le.nonce)||"",k.head.append(n)})));$[N]?console.warn(R+" only loads once. Ignoring:",l):$[N]=function(oe){for(var pe=arguments.length,le=new Array(pe>1?pe-1:0),ge=1;ge<pe;ge++)le[ge-1]=arguments[ge];return H.add(oe)&&ee().then(()=>$[N](oe,...le))}})(r);var i=this.libraries.map(l=>this.importLibrary(l));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),l=>{var c=new ErrorEvent("error",{error:l});this.loadErrorCallback(c)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var a=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(a," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},a)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var gDe=["maps"];function yDe(t){var{id:e=UT.id,version:a=UT.version,nonce:r,googleMapsApiKey:i,language:l,region:c,libraries:n=gDe,preventGoogleFontsLoading:v,mapIds:R,authReferrerPolicy:x}=t,N=ie.useRef(!1),[I,k]=ie.useState(!1),[Z,$]=ie.useState(void 0);ie.useEffect(function(){return N.current=!0,()=>{N.current=!1}},[]);var H=ie.useMemo(()=>new dv({id:e,apiKey:i,version:a,libraries:n,language:l||"en",region:c||"US",mapIds:R||[],nonce:r||"",authReferrerPolicy:x||"origin"}),[e,i,a,n,l,c,R,r,x]);ie.useEffect(function(){I||H.load().then(()=>{N.current&&k(!0)}).catch(oe=>{$(oe)})},[]),ie.useEffect(()=>{qy&&v&&Q4()},[v]);var W=ie.useRef();return ie.useEffect(()=>{W.current&&n!==W.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),W.current=n},[n]),{isLoaded:I,loadError:Z}}function zH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function A2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?zH(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var DH={},MH={options(t,e){t.setOptions(e)}};function ADe(t){var{options:e,onLoad:a,onUnmount:r}=t,i=ie.useContext(Ci),[l,c]=ie.useState(null);return ie.useEffect(()=>{l!==null&&l.setMap(i)},[i]),ie.useEffect(()=>{e&&l!==null&&l.setOptions(e)},[l,e]),ie.useEffect(()=>{var n=new google.maps.TrafficLayer(A2(A2({},e),{},{map:i}));return c(n),a&&a(n),()=>{l!==null&&(r&&r(l),l.setMap(null))}},[]),null}ie.memo(ADe);class vDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"state",{trafficLayer:null}),Za(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Za(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(A2(A2({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:MH,eventMap:DH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:MH,eventMap:DH,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),$i(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Za(vDe,"contextType",Ci);function _De(t){var{onLoad:e,onUnmount:a}=t,r=ie.useContext(Ci),[i,l]=ie.useState(null);return ie.useEffect(()=>{i!==null&&i.setMap(r)},[r]),ie.useEffect(()=>{var c=new google.maps.BicyclingLayer;return l(c),c.setMap(r),e&&e(c),()=>{c!==null&&(a&&a(c),c.setMap(null))}},[]),null}ie.memo(_De);class wDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"state",{bicyclingLayer:null}),Za(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Za(wDe,"contextType",Ci);function RDe(t){var{onLoad:e,onUnmount:a}=t,r=ie.useContext(Ci),[i,l]=ie.useState(null);return ie.useEffect(()=>{i!==null&&i.setMap(r)},[r]),ie.useEffect(()=>{var c=new google.maps.TransitLayer;return l(c),c.setMap(r),e&&e(c),()=>{i!==null&&(a&&a(i),i.setMap(null))}},[]),null}ie.memo(RDe);class TDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"state",{transitLayer:null}),Za(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Za(TDe,"contextType",Ci);function IH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function v2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?IH(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var LH={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},FH={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function CDe(t){var{options:e,drawingMode:a,onCircleComplete:r,onMarkerComplete:i,onOverlayComplete:l,onPolygonComplete:c,onPolylineComplete:n,onRectangleComplete:v,onLoad:R,onUnmount:x}=t,N=ie.useContext(Ci),[I,k]=ie.useState(null),[Z,$]=ie.useState(null),[H,W]=ie.useState(null),[ee,oe]=ie.useState(null),[pe,le]=ie.useState(null),[ge,ue]=ie.useState(null),[Re,we]=ie.useState(null);return ie.useEffect(()=>{I!==null&&I.setMap(N)},[N]),ie.useEffect(()=>{e&&I!==null&&I.setOptions(e)},[I,e]),ie.useEffect(()=>{I!==null&&I.setDrawingMode(a??null)},[I,a]),ie.useEffect(()=>{I&&r&&(Z!==null&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(I,"circlecomplete",r)))},[I,r]),ie.useEffect(()=>{I&&i&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(I,"markercomplete",i)))},[I,i]),ie.useEffect(()=>{I&&l&&(ee!==null&&google.maps.event.removeListener(ee),oe(google.maps.event.addListener(I,"overlaycomplete",l)))},[I,l]),ie.useEffect(()=>{I&&c&&(pe!==null&&google.maps.event.removeListener(pe),le(google.maps.event.addListener(I,"polygoncomplete",c)))},[I,c]),ie.useEffect(()=>{I&&n&&(ge!==null&&google.maps.event.removeListener(ge),ue(google.maps.event.addListener(I,"polylinecomplete",n)))},[I,n]),ie.useEffect(()=>{I&&v&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(I,"rectanglecomplete",v)))},[I,v]),ie.useEffect(()=>{Hu(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var Ne=new google.maps.drawing.DrawingManager(v2(v2({},e),{},{map:N}));return a&&Ne.setDrawingMode(a),r&&$(google.maps.event.addListener(Ne,"circlecomplete",r)),i&&W(google.maps.event.addListener(Ne,"markercomplete",i)),l&&oe(google.maps.event.addListener(Ne,"overlaycomplete",l)),c&&le(google.maps.event.addListener(Ne,"polygoncomplete",c)),n&&ue(google.maps.event.addListener(Ne,"polylinecomplete",n)),v&&we(google.maps.event.addListener(Ne,"rectanglecomplete",v)),k(Ne),R&&R(Ne),()=>{I!==null&&(Z&&google.maps.event.removeListener(Z),H&&google.maps.event.removeListener(H),ee&&google.maps.event.removeListener(ee),pe&&google.maps.event.removeListener(pe),ge&&google.maps.event.removeListener(ge),Re&&google.maps.event.removeListener(Re),x&&x(I),I.setMap(null))}},[]),null}ie.memo(CDe);class mae extends ie.PureComponent{constructor(e){super(e),Za(this,"registeredEvents",[]),Za(this,"state",{drawingManager:null}),Za(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Hu(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(v2(v2({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:FH,eventMap:LH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:FH,eventMap:LH,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),$i(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Za(mae,"contextType",Ci);function kH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function R_(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?kH(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var UH={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},BH={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},_2={};function SDe(t){var{position:e,options:a,clusterer:r,noClustererRedraw:i,children:l,draggable:c,visible:n,animation:v,clickable:R,cursor:x,icon:N,label:I,opacity:k,shape:Z,title:$,zIndex:H,onClick:W,onDblClick:ee,onDrag:oe,onDragEnd:pe,onDragStart:le,onMouseOut:ge,onMouseOver:ue,onMouseUp:Re,onMouseDown:we,onRightClick:Ne,onClickableChanged:ne,onCursorChanged:_e,onAnimationChanged:ke,onDraggableChanged:Pe,onFlatChanged:Ee,onIconChanged:De,onPositionChanged:qe,onShapeChanged:Oe,onTitleChanged:He,onVisibleChanged:Ue,onZindexChanged:ct,onLoad:Se,onUnmount:Ie}=t,je=ie.useContext(Ci),[Ze,Be]=ie.useState(null),[Je,dt]=ie.useState(null),[ut,Ae]=ie.useState(null),[Dt,Lt]=ie.useState(null),[fa,Nt]=ie.useState(null),[Ht,wt]=ie.useState(null),[fr,Ca]=ie.useState(null),[za,ar]=ie.useState(null),[ur,or]=ie.useState(null),[Cr,Ia]=ie.useState(null),[Fr,tn]=ie.useState(null),[lr,wr]=ie.useState(null),[na,Oa]=ie.useState(null),[ra,ja]=ie.useState(null),[gr,Tn]=ie.useState(null),[an,dn]=ie.useState(null),[Yr,Pr]=ie.useState(null),[ki,gi]=ie.useState(null),[oi,Cs]=ie.useState(null),[Aa,mr]=ie.useState(null),[Zr,ti]=ie.useState(null),[Rn,Zt]=ie.useState(null);ie.useEffect(()=>{Ze!==null&&Ze.setMap(je)},[je]),ie.useEffect(()=>{typeof a<"u"&&Ze!==null&&Ze.setOptions(a)},[Ze,a]),ie.useEffect(()=>{typeof c<"u"&&Ze!==null&&Ze.setDraggable(c)},[Ze,c]),ie.useEffect(()=>{e&&Ze!==null&&Ze.setPosition(e)},[Ze,e]),ie.useEffect(()=>{typeof n<"u"&&Ze!==null&&Ze.setVisible(n)},[Ze,n]),ie.useEffect(()=>{Ze==null||Ze.setAnimation(v)},[Ze,v]),ie.useEffect(()=>{Ze&&R!==void 0&&Ze.setClickable(R)},[Ze,R]),ie.useEffect(()=>{Ze&&x!==void 0&&Ze.setCursor(x)},[Ze,x]),ie.useEffect(()=>{Ze&&N!==void 0&&Ze.setIcon(N)},[Ze,N]),ie.useEffect(()=>{Ze&&I!==void 0&&Ze.setLabel(I)},[Ze,I]),ie.useEffect(()=>{Ze&&k!==void 0&&Ze.setOpacity(k)},[Ze,k]),ie.useEffect(()=>{Ze&&Z!==void 0&&Ze.setShape(Z)},[Ze,Z]),ie.useEffect(()=>{Ze&&$!==void 0&&Ze.setTitle($)},[Ze,$]),ie.useEffect(()=>{Ze&&H!==void 0&&Ze.setZIndex(H)},[Ze,H]),ie.useEffect(()=>{Ze&&ee&&(Je!==null&&google.maps.event.removeListener(Je),dt(google.maps.event.addListener(Ze,"dblclick",ee)))},[ee]),ie.useEffect(()=>{Ze&&pe&&(ut!==null&&google.maps.event.removeListener(ut),Ae(google.maps.event.addListener(Ze,"dragend",pe)))},[pe]),ie.useEffect(()=>{Ze&&le&&(Dt!==null&&google.maps.event.removeListener(Dt),Lt(google.maps.event.addListener(Ze,"dragstart",le)))},[le]),ie.useEffect(()=>{Ze&&we&&(fa!==null&&google.maps.event.removeListener(fa),Nt(google.maps.event.addListener(Ze,"mousedown",we)))},[we]),ie.useEffect(()=>{Ze&&ge&&(Ht!==null&&google.maps.event.removeListener(Ht),wt(google.maps.event.addListener(Ze,"mouseout",ge)))},[ge]),ie.useEffect(()=>{Ze&&ue&&(fr!==null&&google.maps.event.removeListener(fr),Ca(google.maps.event.addListener(Ze,"mouseover",ue)))},[ue]),ie.useEffect(()=>{Ze&&Re&&(za!==null&&google.maps.event.removeListener(za),ar(google.maps.event.addListener(Ze,"mouseup",Re)))},[Re]),ie.useEffect(()=>{Ze&&Ne&&(ur!==null&&google.maps.event.removeListener(ur),or(google.maps.event.addListener(Ze,"rightclick",Ne)))},[Ne]),ie.useEffect(()=>{Ze&&W&&(Cr!==null&&google.maps.event.removeListener(Cr),Ia(google.maps.event.addListener(Ze,"click",W)))},[W]),ie.useEffect(()=>{Ze&&oe&&(Fr!==null&&google.maps.event.removeListener(Fr),tn(google.maps.event.addListener(Ze,"drag",oe)))},[oe]),ie.useEffect(()=>{Ze&&ne&&(lr!==null&&google.maps.event.removeListener(lr),wr(google.maps.event.addListener(Ze,"clickable_changed",ne)))},[ne]),ie.useEffect(()=>{Ze&&_e&&(na!==null&&google.maps.event.removeListener(na),Oa(google.maps.event.addListener(Ze,"cursor_changed",_e)))},[_e]),ie.useEffect(()=>{Ze&&ke&&(ra!==null&&google.maps.event.removeListener(ra),ja(google.maps.event.addListener(Ze,"animation_changed",ke)))},[ke]),ie.useEffect(()=>{Ze&&Pe&&(gr!==null&&google.maps.event.removeListener(gr),Tn(google.maps.event.addListener(Ze,"draggable_changed",Pe)))},[Pe]),ie.useEffect(()=>{Ze&&Ee&&(an!==null&&google.maps.event.removeListener(an),dn(google.maps.event.addListener(Ze,"flat_changed",Ee)))},[Ee]),ie.useEffect(()=>{Ze&&De&&(Yr!==null&&google.maps.event.removeListener(Yr),Pr(google.maps.event.addListener(Ze,"icon_changed",De)))},[De]),ie.useEffect(()=>{Ze&&qe&&(ki!==null&&google.maps.event.removeListener(ki),gi(google.maps.event.addListener(Ze,"position_changed",qe)))},[qe]),ie.useEffect(()=>{Ze&&Oe&&(oi!==null&&google.maps.event.removeListener(oi),Cs(google.maps.event.addListener(Ze,"shape_changed",Oe)))},[Oe]),ie.useEffect(()=>{Ze&&He&&(Aa!==null&&google.maps.event.removeListener(Aa),mr(google.maps.event.addListener(Ze,"title_changed",He)))},[He]),ie.useEffect(()=>{Ze&&Ue&&(Zr!==null&&google.maps.event.removeListener(Zr),ti(google.maps.event.addListener(Ze,"visible_changed",Ue)))},[Ue]),ie.useEffect(()=>{Ze&&ct&&(Rn!==null&&google.maps.event.removeListener(Rn),Zt(google.maps.event.addListener(Ze,"zindex_changed",ct)))},[ct]),ie.useEffect(()=>{var Le=R_(R_(R_({},a||_2),r?_2:{map:je}),{},{position:e}),$e=new google.maps.Marker(Le);return r?r.addMarker($e,!!i):$e.setMap(je),e&&$e.setPosition(e),typeof n<"u"&&$e.setVisible(n),typeof c<"u"&&$e.setDraggable(c),typeof R<"u"&&$e.setClickable(R),typeof x=="string"&&$e.setCursor(x),N&&$e.setIcon(N),typeof I<"u"&&$e.setLabel(I),typeof k<"u"&&$e.setOpacity(k),Z&&$e.setShape(Z),typeof $=="string"&&$e.setTitle($),typeof H=="number"&&$e.setZIndex(H),ee&&dt(google.maps.event.addListener($e,"dblclick",ee)),pe&&Ae(google.maps.event.addListener($e,"dragend",pe)),le&&Lt(google.maps.event.addListener($e,"dragstart",le)),we&&Nt(google.maps.event.addListener($e,"mousedown",we)),ge&&wt(google.maps.event.addListener($e,"mouseout",ge)),ue&&Ca(google.maps.event.addListener($e,"mouseover",ue)),Re&&ar(google.maps.event.addListener($e,"mouseup",Re)),Ne&&or(google.maps.event.addListener($e,"rightclick",Ne)),W&&Ia(google.maps.event.addListener($e,"click",W)),oe&&tn(google.maps.event.addListener($e,"drag",oe)),ne&&wr(google.maps.event.addListener($e,"clickable_changed",ne)),_e&&Oa(google.maps.event.addListener($e,"cursor_changed",_e)),ke&&ja(google.maps.event.addListener($e,"animation_changed",ke)),Pe&&Tn(google.maps.event.addListener($e,"draggable_changed",Pe)),Ee&&dn(google.maps.event.addListener($e,"flat_changed",Ee)),De&&Pr(google.maps.event.addListener($e,"icon_changed",De)),qe&&gi(google.maps.event.addListener($e,"position_changed",qe)),Oe&&Cs(google.maps.event.addListener($e,"shape_changed",Oe)),He&&mr(google.maps.event.addListener($e,"title_changed",He)),Ue&&ti(google.maps.event.addListener($e,"visible_changed",Ue)),ct&&Zt(google.maps.event.addListener($e,"zindex_changed",ct)),Be($e),Se&&Se($e),()=>{Je!==null&&google.maps.event.removeListener(Je),ut!==null&&google.maps.event.removeListener(ut),Dt!==null&&google.maps.event.removeListener(Dt),fa!==null&&google.maps.event.removeListener(fa),Ht!==null&&google.maps.event.removeListener(Ht),fr!==null&&google.maps.event.removeListener(fr),za!==null&&google.maps.event.removeListener(za),ur!==null&&google.maps.event.removeListener(ur),Cr!==null&&google.maps.event.removeListener(Cr),lr!==null&&google.maps.event.removeListener(lr),na!==null&&google.maps.event.removeListener(na),ra!==null&&google.maps.event.removeListener(ra),gr!==null&&google.maps.event.removeListener(gr),an!==null&&google.maps.event.removeListener(an),Yr!==null&&google.maps.event.removeListener(Yr),ki!==null&&google.maps.event.removeListener(ki),Aa!==null&&google.maps.event.removeListener(Aa),Zr!==null&&google.maps.event.removeListener(Zr),Rn!==null&&google.maps.event.removeListener(Rn),Ie&&Ie($e),r?r.removeMarker($e,!!i):$e&&$e.setMap(null)}},[]);var xe=ie.useMemo(()=>l?ie.Children.map(l,Le=>{if(!ie.isValidElement(Le))return Le;var $e=Le;return ie.cloneElement($e,{anchor:Ze})}):null,[l,Ze]);return B.jsx(B.Fragment,{children:xe})||null}ie.memo(SDe);class bDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[])}componentDidMount(){var e=this;return dae(function*(){var a=R_(R_(R_({},e.props.options||_2),e.props.clusterer?_2:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(a),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=qi({updaterMap:BH,eventMap:UH,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:BH,eventMap:UH,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),$i(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?ie.Children.map(this.props.children,a=>{if(!ie.isValidElement(a))return a;var r=a;return ie.cloneElement(r,{anchor:this.marker})}):null;return e||null}}Za(bDe,"contextType",Ci);var xDe=function(){function t(e,a){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=a,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var a=this.cluster.getClusterer();if(google.maps.event.trigger(a,"click",this.cluster),google.maps.event.trigger(a,"clusterclick",this.cluster),a.getZoomOnClick()){var r=a.getMaxZoom(),i=this.cluster.getBounds(),l=a.getMap();l!==null&&"fitBounds"in l&&l.fitBounds(i),this.timeOut=window.setTimeout(function(){var c=a.getMap();if(c!==null){"fitBounds"in c&&c.fitBounds(i);var n=c.getZoom()||0;r!==null&&n>r&&c.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var a=this.getMap();a!==null&&(this.boundsChangedListener=google.maps.event.addListener(a,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,a,r,i,l,c;if(this.div&&this.center){var n=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,v=this.backgroundPosition.split(" "),R=parseInt(((e=v[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),x=parseInt(((a=v[1])===null||a===void 0?void 0:a.replace(/^\s+|\s+$/g,""))||"0",10),N=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(N!==null?"".concat(N.y,"px"):"0","; left: ").concat(N!==null?"".concat(N.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var I=document.createElement("img");I.alt=n,I.src=this.url,I.width=this.width,I.height=this.height,I.setAttribute("style","position: absolute; top: ".concat(x,"px; left: ").concat(R,"px")),this.cluster.getClusterer().enableRetinaIcons||(I.style.clip="rect(-".concat(x,"px, -").concat(R+this.width,"px, -").concat(x+this.height,", -").concat(R,")"));var k=document.createElement("div");k.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(k.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((l=this.sums)===null||l===void 0)&&l.html&&(k.innerHTML="".concat((c=this.sums)===null||c===void 0?void 0:c.html)),this.div.innerHTML="",this.div.appendChild(I),this.div.appendChild(k),this.div.title=n,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var a=this.cluster.getClusterer().getStyles(),r=a[Math.min(a.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var a=this.getProjection().fromLatLngToDivPixel(e);return a!==null&&(a.x-=this.anchorIcon[1],a.y-=this.anchorIcon[0]),a},t}(),PDe=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new xDe(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),a=this.getMarkers(),r=0,i=a;r<i.length;r++){var l=i[r],c=l.getPosition();c&&e.extend(c)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var a;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+r.lat())/i,(this.center.lng()*(i-1)+r.lng())/i),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var l=this.markers.length,c=this.markerClusterer.getMaxZoom(),n=(a=this.map)===null||a===void 0?void 0:a.getZoom();if(c!==null&&typeof n<"u"&&n>c)e.getMap()!==this.map&&e.setMap(this.map);else if(l<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(l===this.minClusterSize)for(var v=0,R=this.markers;v<R.length;v++){var x=R[v];x.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var a=e.getPosition();if(a)return this.bounds.contains(a)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,a=this.markers.length,r=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof i<"u"&&i>r){this.clusterIcon.hide();return}if(a<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var a=0;a<this.markers.length;a++)if(e===this.markers[a])return!0;return!1},t}();function EDe(t,e){var a=t.length,r=a.toString().length,i=Math.min(r,e);return{text:a.toString(),index:i,title:""}}var NDe=2e3,ODe=500,VDe="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",zDe="png",DDe=[53,56,66,78,90],MDe="cluster",gae=function(){function t(e,a,r){a===void 0&&(a=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||VDe,this.imageExtension=r.imageExtension||zDe,this.imageSizes=r.imageSizes||DDe,this.calculator=r.calculator||EDe,this.batchSize=r.batchSize||NDe,this.batchSizeIE=r.batchSizeIE||ODe,this.clusterClass=r.clusterClass||MDe,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(a,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,a;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((a=this.getMap())===null||a===void 0?void 0:a.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,a=this.markers;e<a.length;e++){var r=a[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var i=0,l=this.clusters;i<l.length;i++){var c=l[i];c.remove()}this.clusters=[];for(var n=0,v=this.listeners;n<v.length;n++){var R=v[n];google.maps.event.removeListener(R)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),a=new google.maps.LatLngBounds,r=0,i=e;r<i.length;r++){var l=i[r],c=l.getPosition();c&&a.extend(c)}var n=this.getMap();n!==null&&"fitBounds"in n&&n.fitBounds(a)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,a){this.pushMarkerTo(e),a||this.redraw()},t.prototype.addMarkers=function(e,a){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];i&&this.pushMarkerTo(i)}a||this.redraw()},t.prototype.pushMarkerTo=function(e){var a=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){a.ready&&(e.isAdded=!1,a.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var a=-1;if(this.markers.indexOf)a=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){a=r;break}return a===-1?!1:(e.setMap(null),this.markers.splice(a,1),!0)},t.prototype.removeMarker=function(e,a){var r=this.removeMarker_(e);return!a&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,a){for(var r=!1,i=0,l=e;i<l.length;i++){var c=l[i];r=r||this.removeMarker_(c)}return!a&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,i=e;r<i.length;r++){var l=i[r];l.remove()}},0)},t.prototype.getExtendedBounds=function(e){var a=this.getProjection(),r=a.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var i=a.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),r!==null){var l=a.fromDivPixelToLatLng(r);l!==null&&e.extend(l)}if(i!==null){var c=a.fromDivPixelToLatLng(i);c!==null&&e.extend(c)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var a=0,r=this.clusters;a<r.length;a++){var i=r[a];i.remove()}this.clusters=[];for(var l=0,c=this.markers;l<c.length;l++){var n=c[l];n.isAdded=!1,e&&n.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,a){var r=6371,i=(a.lat()-e.lat())*Math.PI/180,l=(a.lng()-e.lng())*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(a.lat()*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return r*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},t.prototype.isMarkerInBounds=function(e,a){var r=e.getPosition();return r?a.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var a,r=4e4,i=null,l=0,c=this.clusters;l<c.length;l++){var n=c[l];a=n;var v=a.getCenter(),R=e.getPosition();if(v&&R){var x=this.distanceBetweenPoints(v,R);x<r&&(r=x,i=a)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(a=new PDe(this),a.addMarker(e),this.clusters.push(a))},t.prototype.createClusters=function(e){var a=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),i=r!==null&&("getBounds"in r)?r.getBounds():null,l=(r==null?void 0:r.getZoom())||0,c=l>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),n=this.getExtendedBounds(c),v=Math.min(e+this.batchSize,this.markers.length),R=e;R<v;R++){var x=this.markers[R];x&&!x.isAdded&&this.isMarkerInBounds(x,n)&&(!this.ignoreHidden||this.ignoreHidden&&x.getVisible())&&this.addToClosestCluster(x)}if(v<this.markers.length)this.timerRefStatic=window.setTimeout(function(){a.createClusters(v)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var N=0,I=this.clusters;N<I.length;N++){var k=I[N];k.updateIcon()}}}},t.prototype.extend=function(e,a){return(function(i){for(var l in i.prototype){var c=l;this.prototype[c]=i.prototype[c]}return this}).apply(e,[a])},t}();function jH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function IDe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?jH(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):jH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var Jf={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},ws={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},LDe={};function FDe(t){var{children:e,options:a,averageCenter:r,batchSizeIE:i,calculator:l,clusterClass:c,enableRetinaIcons:n,gridSize:v,ignoreHidden:R,imageExtension:x,imagePath:N,imageSizes:I,maxZoom:k,minimumClusterSize:Z,styles:$,title:H,zoomOnClick:W,onClick:ee,onClusteringBegin:oe,onClusteringEnd:pe,onMouseOver:le,onMouseOut:ge,onLoad:ue,onUnmount:Re}=t,[we,Ne]=ie.useState(null),ne=ie.useContext(Ci),[_e,ke]=ie.useState(null),[Pe,Ee]=ie.useState(null),[De,qe]=ie.useState(null),[Oe,He]=ie.useState(null),[Ue,ct]=ie.useState(null);return ie.useEffect(()=>{we&&ge&&(Oe!==null&&google.maps.event.removeListener(Oe),He(google.maps.event.addListener(we,Jf.onMouseOut,ge)))},[ge]),ie.useEffect(()=>{we&&le&&(Ue!==null&&google.maps.event.removeListener(Ue),ct(google.maps.event.addListener(we,Jf.onMouseOver,le)))},[le]),ie.useEffect(()=>{we&&ee&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(we,Jf.onClick,ee)))},[ee]),ie.useEffect(()=>{we&&oe&&(Pe!==null&&google.maps.event.removeListener(Pe),Ee(google.maps.event.addListener(we,Jf.onClusteringBegin,oe)))},[oe]),ie.useEffect(()=>{we&&pe&&(De!==null&&google.maps.event.removeListener(De),Ee(google.maps.event.addListener(we,Jf.onClusteringEnd,pe)))},[pe]),ie.useEffect(()=>{typeof r<"u"&&we!==null&&ws.averageCenter(we,r)},[we,r]),ie.useEffect(()=>{typeof i<"u"&&we!==null&&ws.batchSizeIE(we,i)},[we,i]),ie.useEffect(()=>{typeof l<"u"&&we!==null&&ws.calculator(we,l)},[we,l]),ie.useEffect(()=>{typeof c<"u"&&we!==null&&ws.clusterClass(we,c)},[we,c]),ie.useEffect(()=>{typeof n<"u"&&we!==null&&ws.enableRetinaIcons(we,n)},[we,n]),ie.useEffect(()=>{typeof v<"u"&&we!==null&&ws.gridSize(we,v)},[we,v]),ie.useEffect(()=>{typeof R<"u"&&we!==null&&ws.ignoreHidden(we,R)},[we,R]),ie.useEffect(()=>{typeof x<"u"&&we!==null&&ws.imageExtension(we,x)},[we,x]),ie.useEffect(()=>{typeof N<"u"&&we!==null&&ws.imagePath(we,N)},[we,N]),ie.useEffect(()=>{typeof I<"u"&&we!==null&&ws.imageSizes(we,I)},[we,I]),ie.useEffect(()=>{typeof k<"u"&&we!==null&&ws.maxZoom(we,k)},[we,k]),ie.useEffect(()=>{typeof Z<"u"&&we!==null&&ws.minimumClusterSize(we,Z)},[we,Z]),ie.useEffect(()=>{typeof $<"u"&&we!==null&&ws.styles(we,$)},[we,$]),ie.useEffect(()=>{typeof H<"u"&&we!==null&&ws.title(we,H)},[we,H]),ie.useEffect(()=>{typeof W<"u"&&we!==null&&ws.zoomOnClick(we,W)},[we,W]),ie.useEffect(()=>{if(ne){var Se=IDe({},a||LDe),Ie=new gae(ne,[],Se);return r&&ws.averageCenter(Ie,r),i&&ws.batchSizeIE(Ie,i),l&&ws.calculator(Ie,l),c&&ws.clusterClass(Ie,c),n&&ws.enableRetinaIcons(Ie,n),v&&ws.gridSize(Ie,v),R&&ws.ignoreHidden(Ie,R),x&&ws.imageExtension(Ie,x),N&&ws.imagePath(Ie,N),I&&ws.imageSizes(Ie,I),k&&ws.maxZoom(Ie,k),Z&&ws.minimumClusterSize(Ie,Z),$&&ws.styles(Ie,$),H&&ws.title(Ie,H),W&&ws.zoomOnClick(Ie,W),ge&&He(google.maps.event.addListener(Ie,Jf.onMouseOut,ge)),le&&ct(google.maps.event.addListener(Ie,Jf.onMouseOver,le)),ee&&ke(google.maps.event.addListener(Ie,Jf.onClick,ee)),oe&&Ee(google.maps.event.addListener(Ie,Jf.onClusteringBegin,oe)),pe&&qe(google.maps.event.addListener(Ie,Jf.onClusteringEnd,pe)),Ne(Ie),ue&&ue(Ie),()=>{Oe!==null&&google.maps.event.removeListener(Oe),Ue!==null&&google.maps.event.removeListener(Ue),_e!==null&&google.maps.event.removeListener(_e),Pe!==null&&google.maps.event.removeListener(Pe),De!==null&&google.maps.event.removeListener(De),Re&&Re(Ie)}}},[]),we!==null&&e(we)||null}ie.memo(FDe);class kDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{markerClusterer:null}),Za(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new gae(this.context,[],this.props.options);this.registeredEvents=qi({updaterMap:ws,eventMap:Jf,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:ws,eventMap:Jf,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),$i(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Za(kDe,"contextType",Ci);function GH(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var yae=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,a=function(x){x.returnValue=!1,x.preventDefault&&x.preventDefault(),e.enableEventPropagation||GH(x)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var l=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],c=0,n=l;c<n.length;c++){var v=n[c];this.eventListeners.push(google.maps.event.addListener(this.div,v,GH))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",a),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var a=this.getMap();if(a instanceof google.maps.Map){var r=0,i=0,l=a.getBounds();l&&!l.contains(this.position)&&a.setCenter(this.position);var c=a.getDiv(),n=c.offsetWidth,v=c.offsetHeight,R=this.pixelOffset.width,x=this.pixelOffset.height,N=this.div.offsetWidth,I=this.div.offsetHeight,k=this.infoBoxClearance.width,Z=this.infoBoxClearance.height,$=this.getProjection(),H=$.fromLatLngToContainerPixel(this.position);H!==null&&(H.x<-R+k?r=H.x+R-k:H.x+N+R+k>n&&(r=H.x+N+R+k-n),this.alignBottom?H.y<-x+Z+I?i=H.y+x-Z-I:H.y+x+Z>v&&(i=H.y+x+Z-v):H.y<-x+Z?i=H.y+x-Z:H.y+I+x+Z>v&&(i=H.y+I+x+Z-v)),r===0&&i===0||a.panBy(r,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(this.div.style[a]=e[a]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var a=this.div.ownerDocument,r=a&&a.defaultView?a.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),a=e.fromLatLngToDivPixel(this.position);a!==null&&(this.div.style.left=a.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(a.y+this.pixelOffset.height)+"px":this.div.style.top=a.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,a){var r=this;a&&(this.position=a.getPosition(),this.moveListener=google.maps.event.addListener(a,"position_changed",function(){var i=a.getPosition();r.setPosition(i)}),this.mapListener=google.maps.event.addListener(a,"map_changed",function(){r.setMap(a.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,a=this.eventListeners;e<a.length;e++){var r=a[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,a){return(function(i){for(var l in i.prototype)Object.prototype.hasOwnProperty.call(this,l)||(this.prototype[l]=i.prototype[l]);return this}).apply(e,[a])},t}(),UDe=["position"],BDe=["position"];function ZH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function w2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ZH(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ZH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var qH={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},HH={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},jDe={};function GDe(t){var{children:e,anchor:a,options:r,position:i,zIndex:l,onCloseClick:c,onDomReady:n,onContentChanged:v,onPositionChanged:R,onZindexChanged:x,onLoad:N,onUnmount:I}=t,k=ie.useContext(Ci),[Z,$]=ie.useState(null),[H,W]=ie.useState(null),[ee,oe]=ie.useState(null),[pe,le]=ie.useState(null),[ge,ue]=ie.useState(null),[Re,we]=ie.useState(null),Ne=ie.useRef(null);return ie.useEffect(()=>{k&&Z!==null&&(Z.close(),a?Z.open(k,a):Z.getPosition()&&Z.open(k))},[k,Z,a]),ie.useEffect(()=>{r&&Z!==null&&Z.setOptions(r)},[Z,r]),ie.useEffect(()=>{if(i&&Z!==null){var ne=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);Z.setPosition(ne)}},[i]),ie.useEffect(()=>{typeof l=="number"&&Z!==null&&Z.setZIndex(l)},[l]),ie.useEffect(()=>{Z&&c&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(Z,"closeclick",c)))},[c]),ie.useEffect(()=>{Z&&n&&(ee!==null&&google.maps.event.removeListener(ee),oe(google.maps.event.addListener(Z,"domready",n)))},[n]),ie.useEffect(()=>{Z&&v&&(pe!==null&&google.maps.event.removeListener(pe),le(google.maps.event.addListener(Z,"content_changed",v)))},[v]),ie.useEffect(()=>{Z&&R&&(ge!==null&&google.maps.event.removeListener(ge),ue(google.maps.event.addListener(Z,"position_changed",R)))},[R]),ie.useEffect(()=>{Z&&x&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(Z,"zindex_changed",x)))},[x]),ie.useEffect(()=>{if(k){var ne=r||jDe,{position:_e}=ne,ke=eF(ne,UDe),Pe;_e&&!(_e instanceof google.maps.LatLng)&&(Pe=new google.maps.LatLng(_e.lat,_e.lng));var Ee=new yae(w2(w2({},ke),Pe?{position:Pe}:{}));Ne.current=document.createElement("div"),$(Ee),c&&W(google.maps.event.addListener(Ee,"closeclick",c)),n&&oe(google.maps.event.addListener(Ee,"domready",n)),v&&le(google.maps.event.addListener(Ee,"content_changed",v)),R&&ue(google.maps.event.addListener(Ee,"position_changed",R)),x&&we(google.maps.event.addListener(Ee,"zindex_changed",x)),Ee.setContent(Ne.current),a?Ee.open(k,a):Ee.getPosition()?Ee.open(k):Hu(!1,"You must provide either an anchor or a position prop for <InfoBox>."),N&&N(Ee)}return()=>{Z!==null&&(H&&google.maps.event.removeListener(H),pe&&google.maps.event.removeListener(pe),ee&&google.maps.event.removeListener(ee),ge&&google.maps.event.removeListener(ge),Re&&google.maps.event.removeListener(Re),I&&I(Z),Z.close())}},[]),Ne.current?l1.createPortal(ie.Children.only(e),Ne.current):null}ie.memo(GDe);class ZDe extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"containerElement",null),Za(this,"state",{infoBox:null}),Za(this,"open",(e,a)=>{a?this.context!==null&&e.open(this.context,a):e.getPosition()?this.context!==null&&e.open(this.context):Hu(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Za(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:a}=e,r=eF(e,BDe),i;a&&!(a instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(a.lat,a.lng));var l=new yae(w2(w2({},r),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=qi({updaterMap:HH,eventMap:qH,prevProps:{},nextProps:this.props,instance:l}),this.setState({infoBox:l},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:a}=this.state;a!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:HH,eventMap:qH,prevProps:e,nextProps:this.props,instance:a}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:a}=this.state;a!==null&&(e&&e(a),$i(this.registeredEvents),a.close())}render(){return this.containerElement?l1.createPortal(ie.Children.only(this.props.children),this.containerElement):null}}Za(ZDe,"contextType",Ci);var N5,$H;function qDe(){return $H||($H=1,N5=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=a.length)return!1;for(i=r;i--!==0;)if(!t(e[i],a[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(a).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[i]))return!1;for(i=r;i--!==0;){var c=l[i];if(!t(e[c],a[c]))return!1}return!0}return e!==e&&a!==a}),N5}var HDe=qDe(),KH=cae(HDe),WH=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],O5=1,rR=8;class tF{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[a,r]=new Uint8Array(e,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=r>>4;if(i!==O5)throw new Error("Got v".concat(i," data when expected v").concat(O5,"."));var l=WH[r&15];if(!l)throw new Error("Unrecognized array type.");var[c]=new Uint16Array(e,2,1),[n]=new Uint32Array(e,4,1);return new tF(n,c,l,e)}constructor(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var l=WH.indexOf(this.ArrayType),c=e*2*this.ArrayType.BYTES_PER_ELEMENT,n=e*this.IndexArrayType.BYTES_PER_ELEMENT,v=(8-n%8)%8;if(l<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,rR,e),this.coords=new this.ArrayType(this.data,rR+n+v,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(rR+c+n+v),this.ids=new this.IndexArrayType(this.data,rR,e),this.coords=new this.ArrayType(this.data,rR+n+v,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(O5<<4)+l]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=e)}add(e,a){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=a,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return d3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,a,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:l,coords:c,nodeSize:n}=this,v=[0,l.length-1,0],R=[];v.length;){var x=v.pop()||0,N=v.pop()||0,I=v.pop()||0;if(N-I<=n){for(var k=I;k<=N;k++){var Z=c[2*k],$=c[2*k+1];Z>=e&&Z<=r&&$>=a&&$<=i&&R.push(l[k])}continue}var H=I+N>>1,W=c[2*H],ee=c[2*H+1];W>=e&&W<=r&&ee>=a&&ee<=i&&R.push(l[H]),(x===0?e<=W:a<=ee)&&(v.push(I),v.push(H-1),v.push(1-x)),(x===0?r>=W:i>=ee)&&(v.push(H+1),v.push(N),v.push(1-x))}return R}within(e,a,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:l,nodeSize:c}=this,n=[0,i.length-1,0],v=[],R=r*r;n.length;){var x=n.pop()||0,N=n.pop()||0,I=n.pop()||0;if(N-I<=c){for(var k=I;k<=N;k++)YH(l[2*k],l[2*k+1],e,a)<=R&&v.push(i[k]);continue}var Z=I+N>>1,$=l[2*Z],H=l[2*Z+1];YH($,H,e,a)<=R&&v.push(i[Z]),(x===0?e-r<=$:a-r<=H)&&(n.push(I),n.push(Z-1),n.push(1-x)),(x===0?e+r>=$:a+r>=H)&&(n.push(Z+1),n.push(N),n.push(1-x))}return v}}function d3(t,e,a,r,i,l){if(!(i-r<=a)){var c=r+i>>1;Aae(t,e,c,r,i,l),d3(t,e,a,r,c-1,1-l),d3(t,e,a,c+1,i,1-l)}}function Aae(t,e,a,r,i,l){for(;i>r;){if(i-r>600){var c=i-r+1,n=a-r+1,v=Math.log(c),R=.5*Math.exp(2*v/3),x=.5*Math.sqrt(v*R*(c-R)/c)*(n-c/2<0?-1:1),N=Math.max(r,Math.floor(a-n*R/c+x)),I=Math.min(i,Math.floor(a+(c-n)*R/c+x));Aae(t,e,a,N,I,l)}var k=e[2*a+l],Z=r,$=i;for(nR(t,e,r,a),e[2*i+l]>k&&nR(t,e,r,i);Z<$;){for(nR(t,e,Z,$),Z++,$--;e[2*Z+l]<k;)Z++;for(;e[2*$+l]>k;)$--}e[2*r+l]===k?nR(t,e,r,$):($++,nR(t,e,$,i)),$<=a&&(r=$+1),a<=$&&(i=$-1)}}function nR(t,e,a,r){V5(t,a,r),V5(e,2*a,2*r),V5(e,2*a+1,2*r+1)}function V5(t,e,a){var r=t[e];t[e]=t[a],t[a]=r}function YH(t,e,a,r){var i=t-a,l=e-r;return i*i+l*l}var $De={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},XH=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),nv=2,zy=3,z5=4,Oy=5,vae=6;class KDe{constructor(e){this.options=Object.assign(Object.create($De),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:a,minZoom:r,maxZoom:i}=this.options;a&&console.time("total time");var l="prepare ".concat(e.length," points");a&&console.time(l),this.points=e;for(var c=[],n=0;n<e.length;n++){var v=e[n];if(v.geometry){var[R,x]=v.geometry.coordinates,N=XH(hb(R)),I=XH(fb(x));c.push(N,I,1/0,n,-1,1),this.options.reduce&&c.push(0)}}var k=this.trees[i+1]=this._createTree(c);a&&console.timeEnd(l);for(var Z=i;Z>=r;Z--){var $=+Date.now();k=this.trees[Z]=this._createTree(this._cluster(k,Z)),a&&console.log("z%d: %d clusters in %dms",Z,k.numItems,+Date.now()-$)}return a&&console.timeEnd("total time"),this}getClusters(e,a){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),l=e[2]===180?180:((e[2]+180)%360+360)%360-180,c=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,l=180;else if(r>l){var n=this.getClusters([r,i,180,c],a),v=this.getClusters([-180,i,l,c],a);return n.concat(v)}var R=this.trees[this._limitZoom(a)],x=R.range(hb(r),fb(c),hb(l),fb(i)),N=R.data,I=[];for(var k of x){var Z=this.stride*k;I.push(N[Z+Oy]>1?JH(N,Z,this.clusterProps):this.points[N[Z+zy]])}return I}getChildren(e){var a=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",l=this.trees[r];if(!l)throw new Error(i);var c=l.data;if(a*this.stride>=c.length)throw new Error(i);var n=this.options.radius/(this.options.extent*Math.pow(2,r-1)),v=c[a*this.stride],R=c[a*this.stride+1],x=l.within(v,R,n),N=[];for(var I of x){var k=I*this.stride;c[k+z5]===e&&N.push(c[k+Oy]>1?JH(c,k,this.clusterProps):this.points[c[k+zy]])}if(N.length===0)throw new Error(i);return N}getLeaves(e,a,r){a=a||10,r=r||0;var i=[];return this._appendLeaves(i,e,a,r,0),i}getTile(e,a,r){var i=this.trees[this._limitZoom(e)],l=Math.pow(2,e),{extent:c,radius:n}=this.options,v=n/c,R=(r-v)/l,x=(r+1+v)/l,N={features:[]};return this._addTileFeatures(i.range((a-v)/l,R,(a+1+v)/l,x),i.data,a,r,l,N),a===0&&this._addTileFeatures(i.range(1-v/l,R,1,x),i.data,l,r,l,N),a===l-1&&this._addTileFeatures(i.range(0,R,v/l,x),i.data,-1,r,l,N),N.features.length?N:null}getClusterExpansionZoom(e){for(var a=this._getOriginZoom(e)-1;a<=this.options.maxZoom;){var r=this.getChildren(e);if(a++,r.length!==1)break;e=r[0].properties.cluster_id}return a}_appendLeaves(e,a,r,i,l){var c=this.getChildren(a);for(var n of c){var v=n.properties;if(v&&v.cluster?l+v.point_count<=i?l+=v.point_count:l=this._appendLeaves(e,v.cluster_id,r,i,l):l<i?l++:e.push(n),e.length===r)break}return l}_createTree(e){for(var a=new tF(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)a.add(e[r],e[r+1]);return a.finish(),a.data=e,a}_addTileFeatures(e,a,r,i,l,c){for(var n of e){var v=n*this.stride,R=a[v+Oy]>1,x=void 0,N=void 0,I=void 0;if(R)x=_ae(a,v,this.clusterProps),N=a[v],I=a[v+1];else{var k=this.points[a[v+zy]];x=k.properties;var[Z,$]=k.geometry.coordinates;N=hb(Z),I=fb($)}var H={type:1,geometry:[[Math.round(this.options.extent*(N*l-r)),Math.round(this.options.extent*(I*l-i))]],tags:x},W=void 0;R||this.options.generateId?W=a[v+zy]:W=this.points[a[v+zy]].id,W!==void 0&&(H.id=W),c.features.push(H)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,a){for(var{radius:r,extent:i,reduce:l,minPoints:c}=this.options,n=r/(i*Math.pow(2,a)),v=e.data,R=[],x=this.stride,N=0;N<v.length;N+=x)if(!(v[N+nv]<=a)){v[N+nv]=a;var I=v[N],k=v[N+1],Z=e.within(v[N],v[N+1],n),$=v[N+Oy],H=$;for(var W of Z){var ee=W*x;v[ee+nv]>a&&(H+=v[ee+Oy])}if(H>$&&H>=c){var oe=I*$,pe=k*$,le=void 0,ge=-1,ue=((N/x|0)<<5)+(a+1)+this.points.length;for(var Re of Z){var we=Re*x;if(!(v[we+nv]<=a)){v[we+nv]=a;var Ne=v[we+Oy];oe+=v[we]*Ne,pe+=v[we+1]*Ne,v[we+z5]=ue,l&&(le||(le=this._map(v,N,!0),ge=this.clusterProps.length,this.clusterProps.push(le)),l(le,this._map(v,we)))}}v[N+z5]=ue,R.push(oe/H,pe/H,1/0,ue,-1,H),l&&R.push(ge)}else{for(var ne=0;ne<x;ne++)R.push(v[N+ne]);if(H>1)for(var _e of Z){var ke=_e*x;if(!(v[ke+nv]<=a)){v[ke+nv]=a;for(var Pe=0;Pe<x;Pe++)R.push(v[ke+Pe])}}}}return R}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,a,r){if(e[a+Oy]>1){var i=this.clusterProps[e[a+vae]];return r?Object.assign({},i):i}var l=this.points[e[a+zy]].properties,c=this.options.map(l);return r&&c===l?Object.assign({},c):c}}function JH(t,e,a){return{type:"Feature",id:t[e+zy],properties:_ae(t,e,a),geometry:{type:"Point",coordinates:[WDe(t[e]),YDe(t[e+1])]}}}function _ae(t,e,a){var r=t[e+Oy],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,l=t[e+vae],c=l===-1?{}:Object.assign({},a[l]);return Object.assign(c,{cluster:!0,cluster_id:t[e+zy],point_count:r,point_count_abbreviated:i})}function hb(t){return t/360+.5}function fb(t){var e=Math.sin(t*Math.PI/180),a=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return a<0?0:a>1?1:a}function WDe(t){return(t-.5)*360}function YDe(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function XDe(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(a[r[i]]=t[r[i]]);return a}class gf{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,a){this.isAdvancedMarker(e)?e.map=a:e.setMap(a)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class h3{constructor(e){var{markers:a,position:r}=e;this.markers=a,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var a of this.markers)e.extend(gf.getPosition(a));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>gf.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(gf.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class JDe{constructor(e){var{maxZoom:a=16}=e;this.maxZoom=a}noop(e){var{markers:a}=e;return QDe(a)}}var QDe=t=>{var e=t.map(a=>new h3({position:gf.getPosition(a),markers:[a]}));return e};class e5e extends JDe{constructor(e){var{maxZoom:a,radius:r=60}=e,i=XDe(e,["maxZoom","radius"]);super({maxZoom:a}),this.state={zoom:-1},this.superCluster=new KDe(Object.assign({maxZoom:this.maxZoom,radius:r},i))}calculate(e){var a=!1,r={zoom:e.map.getZoom()};if(!KH(e.markers,this.markers)){a=!0,this.markers=[...e.markers];var i=this.markers.map(l=>{var c=gf.getPosition(l),n=[c.lng(),c.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:n},properties:{marker:l}}});this.superCluster.load(i)}return a||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(a=!KH(this.state,r)),this.state=r,a&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:a}}cluster(e){var{map:a}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(a.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[a,r]},properties:i}=e;if(i.cluster)return new h3({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(c=>c.properties.marker),position:{lat:r,lng:a}});var l=i.marker;return new h3({markers:[l],position:gf.getPosition(l)})}}class t5e{constructor(e,a){this.markers={sum:e.length};var r=a.map(l=>l.count),i=r.reduce((l,c)=>l+c,0);this.clusters={count:a.length,markers:{mean:i/a.length,sum:i,min:Math.min(...r),max:Math.max(...r)}}}}class a5e{render(e,a,r){var{count:i,position:l}=e,c=i>Math.max(10,a.clusters.markers.mean)?"#ff0000":"#0000ff",n='<svg fill="'.concat(c,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),v="Cluster of ".concat(i," markers"),R=Number(google.maps.Marker.MAX_ZINDEX)+i;if(gf.isAdvancedMarkerAvailable(r)){var x=new DOMParser,N=x.parseFromString(n,"image/svg+xml").documentElement;N.setAttribute("transform","translate(0 25)");var I={map:r,position:l,zIndex:R,title:v,content:N};return new google.maps.marker.AdvancedMarkerElement(I)}var k={position:l,zIndex:R,title:v,icon:{url:"data:image/svg+xml;base64,".concat(btoa(n)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(k)}}function r5e(t,e){for(var a in e.prototype)t.prototype[a]=e.prototype[a]}class aF{constructor(){r5e(aF,google.maps.OverlayView)}}var zR;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(zR||(zR={}));var n5e=(t,e,a)=>{a.fitBounds(e.bounds)};class i5e extends aF{constructor(e){var{map:a,markers:r=[],algorithmOptions:i={},algorithm:l=new e5e(i),renderer:c=new a5e,onClusterClick:n=n5e}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=l,this.renderer=c,this.onClusterClick=n,a&&this.setMap(a)}addMarker(e,a){this.markers.includes(e)||(this.markers.push(e),a||this.render())}addMarkers(e,a){e.forEach(r=>{this.addMarker(r,!0)}),a||this.render()}removeMarker(e,a){var r=this.markers.indexOf(e);return r===-1?!1:(gf.setMap(e,null),this.markers.splice(r,1),a||this.render(),!0)}removeMarkers(e,a){var r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!a&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,zR.CLUSTERING_BEGIN,this);var{clusters:a,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var i=new Set;for(var l of a)l.markers.length==1&&i.add(l.markers[0]);var c=[];for(var n of this.clusters)n.marker!=null&&(n.markers.length==1?i.has(n.marker)||gf.setMap(n.marker,null):c.push(n.marker));this.clusters=a,this.renderClusters(),requestAnimationFrame(()=>c.forEach(v=>gf.setMap(v,null)))}google.maps.event.trigger(this,zR.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>gf.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new t5e(this.markers,this.clusters),a=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,a),r.markers.forEach(i=>gf.setMap(i,null)),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,zR.CLUSTER_CLICK,r),this.onClusterClick(i,r,a)})),gf.setMap(r.marker,a)})}}function QH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function e$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?QH(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):QH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function s5e(t){var e=Jze(),[a,r]=ie.useState(null);return ie.useEffect(()=>{if(e&&a===null){var i=new i5e(e$(e$({},t),{},{map:e}));r(i)}},[e]),a}function o5e(t){var{children:e,options:a}=t,r=s5e(a);return r!==null?e(r):null}ie.memo(o5e);var t$={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},a$={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function l5e(t){var{children:e,anchor:a,options:r,position:i,zIndex:l,onCloseClick:c,onDomReady:n,onContentChanged:v,onPositionChanged:R,onZindexChanged:x,onLoad:N,onUnmount:I}=t,k=ie.useContext(Ci),[Z,$]=ie.useState(null),[H,W]=ie.useState(null),[ee,oe]=ie.useState(null),[pe,le]=ie.useState(null),[ge,ue]=ie.useState(null),[Re,we]=ie.useState(null),Ne=ie.useRef(null);return ie.useEffect(()=>{Z!==null&&(Z.close(),a?Z.open(k,a):Z.getPosition()&&Z.open(k))},[k,Z,a]),ie.useEffect(()=>{r&&Z!==null&&Z.setOptions(r)},[Z,r]),ie.useEffect(()=>{i&&Z!==null&&Z.setPosition(i)},[i]),ie.useEffect(()=>{typeof l=="number"&&Z!==null&&Z.setZIndex(l)},[l]),ie.useEffect(()=>{Z&&c&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(Z,"closeclick",c)))},[c]),ie.useEffect(()=>{Z&&n&&(ee!==null&&google.maps.event.removeListener(ee),oe(google.maps.event.addListener(Z,"domready",n)))},[n]),ie.useEffect(()=>{Z&&v&&(pe!==null&&google.maps.event.removeListener(pe),le(google.maps.event.addListener(Z,"content_changed",v)))},[v]),ie.useEffect(()=>{Z&&R&&(ge!==null&&google.maps.event.removeListener(ge),ue(google.maps.event.addListener(Z,"position_changed",R)))},[R]),ie.useEffect(()=>{Z&&x&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(Z,"zindex_changed",x)))},[x]),ie.useEffect(()=>{var ne=new google.maps.InfoWindow(r);return $(ne),Ne.current=document.createElement("div"),c&&W(google.maps.event.addListener(ne,"closeclick",c)),n&&oe(google.maps.event.addListener(ne,"domready",n)),v&&le(google.maps.event.addListener(ne,"content_changed",v)),R&&ue(google.maps.event.addListener(ne,"position_changed",R)),x&&we(google.maps.event.addListener(ne,"zindex_changed",x)),ne.setContent(Ne.current),i&&ne.setPosition(i),l&&ne.setZIndex(l),a?ne.open(k,a):ne.getPosition()?ne.open(k):Hu(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),N&&N(ne),()=>{H&&google.maps.event.removeListener(H),pe&&google.maps.event.removeListener(pe),ee&&google.maps.event.removeListener(ee),ge&&google.maps.event.removeListener(ge),Re&&google.maps.event.removeListener(Re),I&&I(ne),ne.close()}},[]),Ne.current?l1.createPortal(ie.Children.only(e),Ne.current):null}ie.memo(l5e);class u5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"containerElement",null),Za(this,"state",{infoWindow:null}),Za(this,"open",(e,a)=>{a?e.open(this.context,a):e.getPosition()?e.open(this.context):Hu(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Za(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=qi({updaterMap:a$,eventMap:t$,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:a$,eventMap:t$,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&($i(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?l1.createPortal(ie.Children.only(this.props.children),this.containerElement):null}}Za(u5e,"contextType",Ci);function r$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function R2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var n$={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},i$={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},c5e={};function d5e(t){var{options:e,draggable:a,editable:r,visible:i,path:l,onDblClick:c,onDragEnd:n,onDragStart:v,onMouseDown:R,onMouseMove:x,onMouseOut:N,onMouseOver:I,onMouseUp:k,onRightClick:Z,onClick:$,onDrag:H,onLoad:W,onUnmount:ee}=t,oe=ie.useContext(Ci),[pe,le]=ie.useState(null),[ge,ue]=ie.useState(null),[Re,we]=ie.useState(null),[Ne,ne]=ie.useState(null),[_e,ke]=ie.useState(null),[Pe,Ee]=ie.useState(null),[De,qe]=ie.useState(null),[Oe,He]=ie.useState(null),[Ue,ct]=ie.useState(null),[Se,Ie]=ie.useState(null),[je,Ze]=ie.useState(null),[Be,Je]=ie.useState(null);return ie.useEffect(()=>{pe!==null&&pe.setMap(oe)},[oe]),ie.useEffect(()=>{typeof e<"u"&&pe!==null&&pe.setOptions(e)},[pe,e]),ie.useEffect(()=>{typeof a<"u"&&pe!==null&&pe.setDraggable(a)},[pe,a]),ie.useEffect(()=>{typeof r<"u"&&pe!==null&&pe.setEditable(r)},[pe,r]),ie.useEffect(()=>{typeof i<"u"&&pe!==null&&pe.setVisible(i)},[pe,i]),ie.useEffect(()=>{typeof l<"u"&&pe!==null&&pe.setPath(l)},[pe,l]),ie.useEffect(()=>{pe&&c&&(ge!==null&&google.maps.event.removeListener(ge),ue(google.maps.event.addListener(pe,"dblclick",c)))},[c]),ie.useEffect(()=>{pe&&n&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(pe,"dragend",n)))},[n]),ie.useEffect(()=>{pe&&v&&(Ne!==null&&google.maps.event.removeListener(Ne),ne(google.maps.event.addListener(pe,"dragstart",v)))},[v]),ie.useEffect(()=>{pe&&R&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(pe,"mousedown",R)))},[R]),ie.useEffect(()=>{pe&&x&&(Pe!==null&&google.maps.event.removeListener(Pe),Ee(google.maps.event.addListener(pe,"mousemove",x)))},[x]),ie.useEffect(()=>{pe&&N&&(De!==null&&google.maps.event.removeListener(De),qe(google.maps.event.addListener(pe,"mouseout",N)))},[N]),ie.useEffect(()=>{pe&&I&&(Oe!==null&&google.maps.event.removeListener(Oe),He(google.maps.event.addListener(pe,"mouseover",I)))},[I]),ie.useEffect(()=>{pe&&k&&(Ue!==null&&google.maps.event.removeListener(Ue),ct(google.maps.event.addListener(pe,"mouseup",k)))},[k]),ie.useEffect(()=>{pe&&Z&&(Se!==null&&google.maps.event.removeListener(Se),Ie(google.maps.event.addListener(pe,"rightclick",Z)))},[Z]),ie.useEffect(()=>{pe&&$&&(je!==null&&google.maps.event.removeListener(je),Ze(google.maps.event.addListener(pe,"click",$)))},[$]),ie.useEffect(()=>{pe&&H&&(Be!==null&&google.maps.event.removeListener(Be),Je(google.maps.event.addListener(pe,"drag",H)))},[H]),ie.useEffect(()=>{var dt=new google.maps.Polyline(R2(R2({},e||c5e),{},{map:oe}));return l&&dt.setPath(l),typeof i<"u"&&dt.setVisible(i),typeof r<"u"&&dt.setEditable(r),typeof a<"u"&&dt.setDraggable(a),c&&ue(google.maps.event.addListener(dt,"dblclick",c)),n&&we(google.maps.event.addListener(dt,"dragend",n)),v&&ne(google.maps.event.addListener(dt,"dragstart",v)),R&&ke(google.maps.event.addListener(dt,"mousedown",R)),x&&Ee(google.maps.event.addListener(dt,"mousemove",x)),N&&qe(google.maps.event.addListener(dt,"mouseout",N)),I&&He(google.maps.event.addListener(dt,"mouseover",I)),k&&ct(google.maps.event.addListener(dt,"mouseup",k)),Z&&Ie(google.maps.event.addListener(dt,"rightclick",Z)),$&&Ze(google.maps.event.addListener(dt,"click",$)),H&&Je(google.maps.event.addListener(dt,"drag",H)),le(dt),W&&W(dt),()=>{ge!==null&&google.maps.event.removeListener(ge),Re!==null&&google.maps.event.removeListener(Re),Ne!==null&&google.maps.event.removeListener(Ne),_e!==null&&google.maps.event.removeListener(_e),Pe!==null&&google.maps.event.removeListener(Pe),De!==null&&google.maps.event.removeListener(De),Oe!==null&&google.maps.event.removeListener(Oe),Ue!==null&&google.maps.event.removeListener(Ue),Se!==null&&google.maps.event.removeListener(Se),je!==null&&google.maps.event.removeListener(je),ee&&ee(dt),dt.setMap(null)}},[]),null}ie.memo(d5e);class h5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{polyline:null}),Za(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(R2(R2({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:i$,eventMap:n$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:i$,eventMap:n$,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),$i(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Za(h5e,"contextType",Ci);function s$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function o$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?s$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var l$={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},u$={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function f5e(t){var{options:e,draggable:a,editable:r,visible:i,path:l,paths:c,onDblClick:n,onDragEnd:v,onDragStart:R,onMouseDown:x,onMouseMove:N,onMouseOut:I,onMouseOver:k,onMouseUp:Z,onRightClick:$,onClick:H,onDrag:W,onLoad:ee,onUnmount:oe,onEdit:pe}=t,le=ie.useContext(Ci),[ge,ue]=ie.useState(null),[Re,we]=ie.useState(null),[Ne,ne]=ie.useState(null),[_e,ke]=ie.useState(null),[Pe,Ee]=ie.useState(null),[De,qe]=ie.useState(null),[Oe,He]=ie.useState(null),[Ue,ct]=ie.useState(null),[Se,Ie]=ie.useState(null),[je,Ze]=ie.useState(null),[Be,Je]=ie.useState(null),[dt,ut]=ie.useState(null);return ie.useEffect(()=>{ge!==null&&ge.setMap(le)},[le]),ie.useEffect(()=>{typeof e<"u"&&ge!==null&&ge.setOptions(e)},[ge,e]),ie.useEffect(()=>{typeof a<"u"&&ge!==null&&ge.setDraggable(a)},[ge,a]),ie.useEffect(()=>{typeof r<"u"&&ge!==null&&ge.setEditable(r)},[ge,r]),ie.useEffect(()=>{typeof i<"u"&&ge!==null&&ge.setVisible(i)},[ge,i]),ie.useEffect(()=>{typeof l<"u"&&ge!==null&&ge.setPath(l)},[ge,l]),ie.useEffect(()=>{typeof c<"u"&&ge!==null&&ge.setPaths(c)},[ge,c]),ie.useEffect(()=>{ge&&typeof n=="function"&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(ge,"dblclick",n)))},[n]),ie.useEffect(()=>{ge&&(google.maps.event.addListener(ge.getPath(),"insert_at",()=>{pe==null||pe(ge)}),google.maps.event.addListener(ge.getPath(),"set_at",()=>{pe==null||pe(ge)}),google.maps.event.addListener(ge.getPath(),"remove_at",()=>{pe==null||pe(ge)}))},[ge,pe]),ie.useEffect(()=>{ge&&typeof v=="function"&&(Ne!==null&&google.maps.event.removeListener(Ne),ne(google.maps.event.addListener(ge,"dragend",v)))},[v]),ie.useEffect(()=>{ge&&typeof R=="function"&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(ge,"dragstart",R)))},[R]),ie.useEffect(()=>{ge&&typeof x=="function"&&(Pe!==null&&google.maps.event.removeListener(Pe),Ee(google.maps.event.addListener(ge,"mousedown",x)))},[x]),ie.useEffect(()=>{ge&&typeof N=="function"&&(De!==null&&google.maps.event.removeListener(De),qe(google.maps.event.addListener(ge,"mousemove",N)))},[N]),ie.useEffect(()=>{ge&&typeof I=="function"&&(Oe!==null&&google.maps.event.removeListener(Oe),He(google.maps.event.addListener(ge,"mouseout",I)))},[I]),ie.useEffect(()=>{ge&&typeof k=="function"&&(Ue!==null&&google.maps.event.removeListener(Ue),ct(google.maps.event.addListener(ge,"mouseover",k)))},[k]),ie.useEffect(()=>{ge&&typeof Z=="function"&&(Se!==null&&google.maps.event.removeListener(Se),Ie(google.maps.event.addListener(ge,"mouseup",Z)))},[Z]),ie.useEffect(()=>{ge&&typeof $=="function"&&(je!==null&&google.maps.event.removeListener(je),Ze(google.maps.event.addListener(ge,"rightclick",$)))},[$]),ie.useEffect(()=>{ge&&typeof H=="function"&&(Be!==null&&google.maps.event.removeListener(Be),Je(google.maps.event.addListener(ge,"click",H)))},[H]),ie.useEffect(()=>{ge&&typeof W=="function"&&(dt!==null&&google.maps.event.removeListener(dt),ut(google.maps.event.addListener(ge,"drag",W)))},[W]),ie.useEffect(()=>{var Ae=new google.maps.Polygon(o$(o$({},e),{},{map:le}));return l&&Ae.setPath(l),c&&Ae.setPaths(c),typeof i<"u"&&Ae.setVisible(i),typeof r<"u"&&Ae.setEditable(r),typeof a<"u"&&Ae.setDraggable(a),n&&we(google.maps.event.addListener(Ae,"dblclick",n)),v&&ne(google.maps.event.addListener(Ae,"dragend",v)),R&&ke(google.maps.event.addListener(Ae,"dragstart",R)),x&&Ee(google.maps.event.addListener(Ae,"mousedown",x)),N&&qe(google.maps.event.addListener(Ae,"mousemove",N)),I&&He(google.maps.event.addListener(Ae,"mouseout",I)),k&&ct(google.maps.event.addListener(Ae,"mouseover",k)),Z&&Ie(google.maps.event.addListener(Ae,"mouseup",Z)),$&&Ze(google.maps.event.addListener(Ae,"rightclick",$)),H&&Je(google.maps.event.addListener(Ae,"click",H)),W&&ut(google.maps.event.addListener(Ae,"drag",W)),ue(Ae),ee&&ee(Ae),()=>{Re!==null&&google.maps.event.removeListener(Re),Ne!==null&&google.maps.event.removeListener(Ne),_e!==null&&google.maps.event.removeListener(_e),Pe!==null&&google.maps.event.removeListener(Pe),De!==null&&google.maps.event.removeListener(De),Oe!==null&&google.maps.event.removeListener(Oe),Ue!==null&&google.maps.event.removeListener(Ue),Se!==null&&google.maps.event.removeListener(Se),je!==null&&google.maps.event.removeListener(je),Be!==null&&google.maps.event.removeListener(Be),oe&&oe(Ae),Ae.setMap(null)}},[]),null}ie.memo(f5e);class wae extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=qi({updaterMap:u$,eventMap:l$,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:u$,eventMap:l$,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),$i(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Za(wae,"contextType",Ci);function c$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function T2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var d$={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},h$={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function p5e(t){var{options:e,bounds:a,draggable:r,editable:i,visible:l,onDblClick:c,onDragEnd:n,onDragStart:v,onMouseDown:R,onMouseMove:x,onMouseOut:N,onMouseOver:I,onMouseUp:k,onRightClick:Z,onClick:$,onDrag:H,onBoundsChanged:W,onLoad:ee,onUnmount:oe}=t,pe=ie.useContext(Ci),[le,ge]=ie.useState(null),[ue,Re]=ie.useState(null),[we,Ne]=ie.useState(null),[ne,_e]=ie.useState(null),[ke,Pe]=ie.useState(null),[Ee,De]=ie.useState(null),[qe,Oe]=ie.useState(null),[He,Ue]=ie.useState(null),[ct,Se]=ie.useState(null),[Ie,je]=ie.useState(null),[Ze,Be]=ie.useState(null),[Je,dt]=ie.useState(null),[ut,Ae]=ie.useState(null);return ie.useEffect(()=>{le!==null&&le.setMap(pe)},[pe]),ie.useEffect(()=>{typeof e<"u"&&le!==null&&le.setOptions(e)},[le,e]),ie.useEffect(()=>{typeof r<"u"&&le!==null&&le.setDraggable(r)},[le,r]),ie.useEffect(()=>{typeof i<"u"&&le!==null&&le.setEditable(i)},[le,i]),ie.useEffect(()=>{typeof l<"u"&&le!==null&&le.setVisible(l)},[le,l]),ie.useEffect(()=>{typeof a<"u"&&le!==null&&le.setBounds(a)},[le,a]),ie.useEffect(()=>{le&&c&&(ue!==null&&google.maps.event.removeListener(ue),Re(google.maps.event.addListener(le,"dblclick",c)))},[c]),ie.useEffect(()=>{le&&n&&(we!==null&&google.maps.event.removeListener(we),Ne(google.maps.event.addListener(le,"dragend",n)))},[n]),ie.useEffect(()=>{le&&v&&(ne!==null&&google.maps.event.removeListener(ne),_e(google.maps.event.addListener(le,"dragstart",v)))},[v]),ie.useEffect(()=>{le&&R&&(ke!==null&&google.maps.event.removeListener(ke),Pe(google.maps.event.addListener(le,"mousedown",R)))},[R]),ie.useEffect(()=>{le&&x&&(Ee!==null&&google.maps.event.removeListener(Ee),De(google.maps.event.addListener(le,"mousemove",x)))},[x]),ie.useEffect(()=>{le&&N&&(qe!==null&&google.maps.event.removeListener(qe),Oe(google.maps.event.addListener(le,"mouseout",N)))},[N]),ie.useEffect(()=>{le&&I&&(He!==null&&google.maps.event.removeListener(He),Ue(google.maps.event.addListener(le,"mouseover",I)))},[I]),ie.useEffect(()=>{le&&k&&(ct!==null&&google.maps.event.removeListener(ct),Se(google.maps.event.addListener(le,"mouseup",k)))},[k]),ie.useEffect(()=>{le&&Z&&(Ie!==null&&google.maps.event.removeListener(Ie),je(google.maps.event.addListener(le,"rightclick",Z)))},[Z]),ie.useEffect(()=>{le&&$&&(Ze!==null&&google.maps.event.removeListener(Ze),Be(google.maps.event.addListener(le,"click",$)))},[$]),ie.useEffect(()=>{le&&H&&(Je!==null&&google.maps.event.removeListener(Je),dt(google.maps.event.addListener(le,"drag",H)))},[H]),ie.useEffect(()=>{le&&W&&(ut!==null&&google.maps.event.removeListener(ut),Ae(google.maps.event.addListener(le,"bounds_changed",W)))},[W]),ie.useEffect(()=>{var Dt=new google.maps.Rectangle(T2(T2({},e),{},{map:pe}));return typeof l<"u"&&Dt.setVisible(l),typeof i<"u"&&Dt.setEditable(i),typeof r<"u"&&Dt.setDraggable(r),typeof a<"u"&&Dt.setBounds(a),c&&Re(google.maps.event.addListener(Dt,"dblclick",c)),n&&Ne(google.maps.event.addListener(Dt,"dragend",n)),v&&_e(google.maps.event.addListener(Dt,"dragstart",v)),R&&Pe(google.maps.event.addListener(Dt,"mousedown",R)),x&&De(google.maps.event.addListener(Dt,"mousemove",x)),N&&Oe(google.maps.event.addListener(Dt,"mouseout",N)),I&&Ue(google.maps.event.addListener(Dt,"mouseover",I)),k&&Se(google.maps.event.addListener(Dt,"mouseup",k)),Z&&je(google.maps.event.addListener(Dt,"rightclick",Z)),$&&Be(google.maps.event.addListener(Dt,"click",$)),H&&dt(google.maps.event.addListener(Dt,"drag",H)),W&&Ae(google.maps.event.addListener(Dt,"bounds_changed",W)),ge(Dt),ee&&ee(Dt),()=>{ue!==null&&google.maps.event.removeListener(ue),we!==null&&google.maps.event.removeListener(we),ne!==null&&google.maps.event.removeListener(ne),ke!==null&&google.maps.event.removeListener(ke),Ee!==null&&google.maps.event.removeListener(Ee),qe!==null&&google.maps.event.removeListener(qe),He!==null&&google.maps.event.removeListener(He),ct!==null&&google.maps.event.removeListener(ct),Ie!==null&&google.maps.event.removeListener(Ie),Ze!==null&&google.maps.event.removeListener(Ze),Je!==null&&google.maps.event.removeListener(Je),ut!==null&&google.maps.event.removeListener(ut),oe&&oe(Dt),Dt.setMap(null)}},[]),null}ie.memo(p5e);class m5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{rectangle:null}),Za(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(T2(T2({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:h$,eventMap:d$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:h$,eventMap:d$,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),$i(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Za(m5e,"contextType",Ci);function f$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function C2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?f$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var p$={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},m$={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},g5e={};function y5e(t){var{options:e,center:a,radius:r,draggable:i,editable:l,visible:c,onDblClick:n,onDragEnd:v,onDragStart:R,onMouseDown:x,onMouseMove:N,onMouseOut:I,onMouseOver:k,onMouseUp:Z,onRightClick:$,onClick:H,onDrag:W,onCenterChanged:ee,onRadiusChanged:oe,onLoad:pe,onUnmount:le}=t,ge=ie.useContext(Ci),[ue,Re]=ie.useState(null),[we,Ne]=ie.useState(null),[ne,_e]=ie.useState(null),[ke,Pe]=ie.useState(null),[Ee,De]=ie.useState(null),[qe,Oe]=ie.useState(null),[He,Ue]=ie.useState(null),[ct,Se]=ie.useState(null),[Ie,je]=ie.useState(null),[Ze,Be]=ie.useState(null),[Je,dt]=ie.useState(null),[ut,Ae]=ie.useState(null),[Dt,Lt]=ie.useState(null),[fa,Nt]=ie.useState(null);return ie.useEffect(()=>{ue!==null&&ue.setMap(ge)},[ge]),ie.useEffect(()=>{typeof e<"u"&&ue!==null&&ue.setOptions(e)},[ue,e]),ie.useEffect(()=>{typeof i<"u"&&ue!==null&&ue.setDraggable(i)},[ue,i]),ie.useEffect(()=>{typeof l<"u"&&ue!==null&&ue.setEditable(l)},[ue,l]),ie.useEffect(()=>{typeof c<"u"&&ue!==null&&ue.setVisible(c)},[ue,c]),ie.useEffect(()=>{typeof r=="number"&&ue!==null&&ue.setRadius(r)},[ue,r]),ie.useEffect(()=>{typeof a<"u"&&ue!==null&&ue.setCenter(a)},[ue,a]),ie.useEffect(()=>{ue&&n&&(we!==null&&google.maps.event.removeListener(we),Ne(google.maps.event.addListener(ue,"dblclick",n)))},[n]),ie.useEffect(()=>{ue&&v&&(ne!==null&&google.maps.event.removeListener(ne),_e(google.maps.event.addListener(ue,"dragend",v)))},[v]),ie.useEffect(()=>{ue&&R&&(ke!==null&&google.maps.event.removeListener(ke),Pe(google.maps.event.addListener(ue,"dragstart",R)))},[R]),ie.useEffect(()=>{ue&&x&&(Ee!==null&&google.maps.event.removeListener(Ee),De(google.maps.event.addListener(ue,"mousedown",x)))},[x]),ie.useEffect(()=>{ue&&N&&(qe!==null&&google.maps.event.removeListener(qe),Oe(google.maps.event.addListener(ue,"mousemove",N)))},[N]),ie.useEffect(()=>{ue&&I&&(He!==null&&google.maps.event.removeListener(He),Ue(google.maps.event.addListener(ue,"mouseout",I)))},[I]),ie.useEffect(()=>{ue&&k&&(ct!==null&&google.maps.event.removeListener(ct),Se(google.maps.event.addListener(ue,"mouseover",k)))},[k]),ie.useEffect(()=>{ue&&Z&&(Ie!==null&&google.maps.event.removeListener(Ie),je(google.maps.event.addListener(ue,"mouseup",Z)))},[Z]),ie.useEffect(()=>{ue&&$&&(Ze!==null&&google.maps.event.removeListener(Ze),Be(google.maps.event.addListener(ue,"rightclick",$)))},[$]),ie.useEffect(()=>{ue&&H&&(Je!==null&&google.maps.event.removeListener(Je),dt(google.maps.event.addListener(ue,"click",H)))},[H]),ie.useEffect(()=>{ue&&W&&(ut!==null&&google.maps.event.removeListener(ut),Ae(google.maps.event.addListener(ue,"drag",W)))},[W]),ie.useEffect(()=>{ue&&ee&&(Dt!==null&&google.maps.event.removeListener(Dt),Lt(google.maps.event.addListener(ue,"center_changed",ee)))},[H]),ie.useEffect(()=>{ue&&oe&&(fa!==null&&google.maps.event.removeListener(fa),Nt(google.maps.event.addListener(ue,"radius_changed",oe)))},[oe]),ie.useEffect(()=>{var Ht=new google.maps.Circle(C2(C2({},e||g5e),{},{map:ge}));return typeof r=="number"&&Ht.setRadius(r),typeof a<"u"&&Ht.setCenter(a),typeof r=="number"&&Ht.setRadius(r),typeof c<"u"&&Ht.setVisible(c),typeof l<"u"&&Ht.setEditable(l),typeof i<"u"&&Ht.setDraggable(i),n&&Ne(google.maps.event.addListener(Ht,"dblclick",n)),v&&_e(google.maps.event.addListener(Ht,"dragend",v)),R&&Pe(google.maps.event.addListener(Ht,"dragstart",R)),x&&De(google.maps.event.addListener(Ht,"mousedown",x)),N&&Oe(google.maps.event.addListener(Ht,"mousemove",N)),I&&Ue(google.maps.event.addListener(Ht,"mouseout",I)),k&&Se(google.maps.event.addListener(Ht,"mouseover",k)),Z&&je(google.maps.event.addListener(Ht,"mouseup",Z)),$&&Be(google.maps.event.addListener(Ht,"rightclick",$)),H&&dt(google.maps.event.addListener(Ht,"click",H)),W&&Ae(google.maps.event.addListener(Ht,"drag",W)),ee&&Lt(google.maps.event.addListener(Ht,"center_changed",ee)),oe&&Nt(google.maps.event.addListener(Ht,"radius_changed",oe)),Re(Ht),pe&&pe(Ht),()=>{we!==null&&google.maps.event.removeListener(we),ne!==null&&google.maps.event.removeListener(ne),ke!==null&&google.maps.event.removeListener(ke),Ee!==null&&google.maps.event.removeListener(Ee),qe!==null&&google.maps.event.removeListener(qe),He!==null&&google.maps.event.removeListener(He),ct!==null&&google.maps.event.removeListener(ct),Ie!==null&&google.maps.event.removeListener(Ie),Ze!==null&&google.maps.event.removeListener(Ze),Je!==null&&google.maps.event.removeListener(Je),Dt!==null&&google.maps.event.removeListener(Dt),fa!==null&&google.maps.event.removeListener(fa),le&&le(Ht),Ht.setMap(null)}},[]),null}ie.memo(y5e);class Rae extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{circle:null}),Za(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(C2(C2({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:m$,eventMap:p$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:m$,eventMap:p$,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),$i(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}Za(Rae,"contextType",Ci);function g$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function S2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var y$={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},A$={add(t,e){t.add(e)},addgeojson(t,e,a){t.addGeoJson(e,a)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,a,r){t.loadGeoJson(e,a,r)},overridestyle(t,e,a){t.overrideStyle(e,a)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function A5e(t){var{options:e,onClick:a,onDblClick:r,onMouseDown:i,onMouseMove:l,onMouseOut:c,onMouseOver:n,onMouseUp:v,onRightClick:R,onAddFeature:x,onRemoveFeature:N,onRemoveProperty:I,onSetGeometry:k,onSetProperty:Z,onLoad:$,onUnmount:H}=t,W=ie.useContext(Ci),[ee,oe]=ie.useState(null),[pe,le]=ie.useState(null),[ge,ue]=ie.useState(null),[Re,we]=ie.useState(null),[Ne,ne]=ie.useState(null),[_e,ke]=ie.useState(null),[Pe,Ee]=ie.useState(null),[De,qe]=ie.useState(null),[Oe,He]=ie.useState(null),[Ue,ct]=ie.useState(null),[Se,Ie]=ie.useState(null),[je,Ze]=ie.useState(null),[Be,Je]=ie.useState(null),[dt,ut]=ie.useState(null);return ie.useEffect(()=>{ee!==null&&ee.setMap(W)},[W]),ie.useEffect(()=>{ee&&r&&(pe!==null&&google.maps.event.removeListener(pe),le(google.maps.event.addListener(ee,"dblclick",r)))},[r]),ie.useEffect(()=>{ee&&i&&(ge!==null&&google.maps.event.removeListener(ge),ue(google.maps.event.addListener(ee,"mousedown",i)))},[i]),ie.useEffect(()=>{ee&&l&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(ee,"mousemove",l)))},[l]),ie.useEffect(()=>{ee&&c&&(Ne!==null&&google.maps.event.removeListener(Ne),ne(google.maps.event.addListener(ee,"mouseout",c)))},[c]),ie.useEffect(()=>{ee&&n&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(ee,"mouseover",n)))},[n]),ie.useEffect(()=>{ee&&v&&(Pe!==null&&google.maps.event.removeListener(Pe),Ee(google.maps.event.addListener(ee,"mouseup",v)))},[v]),ie.useEffect(()=>{ee&&R&&(De!==null&&google.maps.event.removeListener(De),qe(google.maps.event.addListener(ee,"rightclick",R)))},[R]),ie.useEffect(()=>{ee&&a&&(Oe!==null&&google.maps.event.removeListener(Oe),He(google.maps.event.addListener(ee,"click",a)))},[a]),ie.useEffect(()=>{ee&&x&&(Ue!==null&&google.maps.event.removeListener(Ue),ct(google.maps.event.addListener(ee,"addfeature",x)))},[x]),ie.useEffect(()=>{ee&&N&&(Se!==null&&google.maps.event.removeListener(Se),Ie(google.maps.event.addListener(ee,"removefeature",N)))},[N]),ie.useEffect(()=>{ee&&I&&(je!==null&&google.maps.event.removeListener(je),Ze(google.maps.event.addListener(ee,"removeproperty",I)))},[I]),ie.useEffect(()=>{ee&&k&&(Be!==null&&google.maps.event.removeListener(Be),Je(google.maps.event.addListener(ee,"setgeometry",k)))},[k]),ie.useEffect(()=>{ee&&Z&&(dt!==null&&google.maps.event.removeListener(dt),ut(google.maps.event.addListener(ee,"setproperty",Z)))},[Z]),ie.useEffect(()=>{if(W!==null){var Ae=new google.maps.Data(S2(S2({},e),{},{map:W}));r&&le(google.maps.event.addListener(Ae,"dblclick",r)),i&&ue(google.maps.event.addListener(Ae,"mousedown",i)),l&&we(google.maps.event.addListener(Ae,"mousemove",l)),c&&ne(google.maps.event.addListener(Ae,"mouseout",c)),n&&ke(google.maps.event.addListener(Ae,"mouseover",n)),v&&Ee(google.maps.event.addListener(Ae,"mouseup",v)),R&&qe(google.maps.event.addListener(Ae,"rightclick",R)),a&&He(google.maps.event.addListener(Ae,"click",a)),x&&ct(google.maps.event.addListener(Ae,"addfeature",x)),N&&Ie(google.maps.event.addListener(Ae,"removefeature",N)),I&&Ze(google.maps.event.addListener(Ae,"removeproperty",I)),k&&Je(google.maps.event.addListener(Ae,"setgeometry",k)),Z&&ut(google.maps.event.addListener(Ae,"setproperty",Z)),oe(Ae),$&&$(Ae)}return()=>{ee&&(pe!==null&&google.maps.event.removeListener(pe),ge!==null&&google.maps.event.removeListener(ge),Re!==null&&google.maps.event.removeListener(Re),Ne!==null&&google.maps.event.removeListener(Ne),_e!==null&&google.maps.event.removeListener(_e),Pe!==null&&google.maps.event.removeListener(Pe),De!==null&&google.maps.event.removeListener(De),Oe!==null&&google.maps.event.removeListener(Oe),Ue!==null&&google.maps.event.removeListener(Ue),Se!==null&&google.maps.event.removeListener(Se),je!==null&&google.maps.event.removeListener(je),Be!==null&&google.maps.event.removeListener(Be),dt!==null&&google.maps.event.removeListener(dt),H&&H(ee),ee.setMap(null))}},[]),null}ie.memo(A5e);class v5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{data:null}),Za(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(S2(S2({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:A$,eventMap:y$,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:A$,eventMap:y$,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),$i(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Za(v5e,"contextType",Ci);function v$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function _$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?v$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var w$={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},R$={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class _5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{kmlLayer:null}),Za(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(_$(_$({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:R$,eventMap:w$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:R$,eventMap:w$,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),$i(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Za(_5e,"contextType",Ci);function Tae(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function w5e(t,e){return new e(t.lat,t.lng)}function R5e(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function T5e(t,e,a){return t instanceof e?t:a(t,e)}function C5e(t,e,a){return t instanceof e?t:a(t,e)}function S5e(t,e,a){var r=t&&t.fromLatLngToDivPixel(a.getNorthEast()),i=t&&t.fromLatLngToDivPixel(a.getSouthWest());return r&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-i.x-e.x,"px"),height:"".concat(i.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function b5e(t,e,a){var r=t&&t.fromLatLngToDivPixel(a);if(r){var{x:i,y:l}=r;return{left:"".concat(i+e.x,"px"),top:"".concat(l+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function Cae(t,e,a,r){return a!==void 0?S5e(t,e,C5e(a,google.maps.LatLngBounds,R5e)):b5e(t,e,T5e(r,google.maps.LatLng,w5e))}function x5e(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function T$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function P5e(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function E5e(t,e,a,r,i){class l extends google.maps.OverlayView{constructor(n,v,R,x){super(),this.container=n,this.pane=v,this.position=R,this.bounds=x}onAdd(){var n,v=(n=this.getPanes())===null||n===void 0?void 0:n[this.pane];v==null||v.appendChild(this.container)}draw(){var n=this.getProjection(),v=P5e({},this.container?Tae(this.container,i):{x:0,y:0}),R=Cae(n,v,this.bounds,this.position);for(var[x,N]of Object.entries(R))this.container.style[x]=N}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new l(t,e,a,r)}function C$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function N5e(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function S$(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function b$(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function O5e(t){var{position:e,bounds:a,mapPaneName:r,zIndex:i,onLoad:l,onUnmount:c,getPixelPositionOffset:n,children:v}=t,R=ie.useContext(Ci),x=ie.useMemo(()=>{var I=document.createElement("div");return I.style.position="absolute",I},[]),N=ie.useMemo(()=>E5e(x,r,e,a,n),[x,r,e,a]);return ie.useEffect(()=>(l==null||l(N),N==null||N.setMap(R),()=>{c==null||c(N),N==null||N.setMap(null)}),[R,N]),ie.useEffect(()=>{x.style.zIndex="".concat(i)},[i,x]),l1.createPortal(v,x)}ie.memo(O5e);class N1 extends ie.PureComponent{constructor(e){super(e),Za(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Za(this,"updatePane",()=>{var r=this.props.mapPaneName,i=this.overlayView.getPanes();Hu(!!r,"OverlayView requires props.mapPaneName but got %s",r),i?this.setState({paneEl:i[r]}):this.setState({paneEl:null})}),Za(this,"onAdd",()=>{var r,i;this.updatePane(),(r=(i=this.props).onLoad)===null||r===void 0||r.call(i,this.overlayView)}),Za(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),i=N5e({x:0,y:0},this.containerRef.current?Tae(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=Cae(r,i,this.props.bounds,this.props.position);if(!x5e(l,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var c,n,v,R;this.setState({containerStyle:{top:(c=l.top)!==null&&c!==void 0?c:0,left:(n=l.left)!==null&&n!==void 0?n:0,width:(v=l.width)!==null&&v!==void 0?v:0,height:(R=l.height)!==null&&R!==void 0?R:0,position:"absolute"}})}}),Za(this,"draw",()=>{this.onPositionElement()}),Za(this,"onRemove",()=>{var r,i;this.setState(()=>({paneEl:null})),(r=(i=this.props).onUnmount)===null||r===void 0||r.call(i,this.overlayView)}),this.containerRef=ie.createRef();var a=new google.maps.OverlayView;a.onAdd=this.onAdd,a.draw=this.draw,a.onRemove=this.onRemove,this.overlayView=a}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var a=S$(e.position),r=S$(this.props.position),i=b$(e.bounds),l=b$(this.props.bounds);(a!==r||i!==l)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?l1.createPortal(B.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:ie.Children.only(this.props.children)}),e):null}}Za(N1,"FLOAT_PANE","floatPane");Za(N1,"MAP_PANE","mapPane");Za(N1,"MARKER_LAYER","markerLayer");Za(N1,"OVERLAY_LAYER","overlayLayer");Za(N1,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Za(N1,"contextType",Ci);function V5e(){}function x$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function P$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var E$={onDblClick:"dblclick",onClick:"click"},N$={opacity(t,e){t.setOpacity(e)}};function z5e(t){var{url:e,bounds:a,options:r,visible:i}=t,l=ie.useContext(Ci),c=new google.maps.LatLngBounds(new google.maps.LatLng(a.south,a.west),new google.maps.LatLng(a.north,a.east)),n=ie.useMemo(()=>new google.maps.GroundOverlay(e,c,r),[]);return ie.useEffect(()=>{n!==null&&n.setMap(l)},[l]),ie.useEffect(()=>{typeof e<"u"&&n!==null&&(n.set("url",e),n.setMap(l))},[n,e]),ie.useEffect(()=>{typeof i<"u"&&n!==null&&n.setOpacity(i?1:0)},[n,i]),ie.useEffect(()=>{var v=new google.maps.LatLngBounds(new google.maps.LatLng(a.south,a.west),new google.maps.LatLng(a.north,a.east));typeof a<"u"&&n!==null&&(n.set("bounds",v),n.setMap(l))},[n,a]),null}ie.memo(z5e);class Sae extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{groundOverlay:null}),Za(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Hu(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,P$(P$({},this.props.options),{},{map:this.context}));this.registeredEvents=qi({updaterMap:N$,eventMap:E$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:N$,eventMap:E$,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Za(Sae,"defaultProps",{onLoad:V5e});Za(Sae,"contextType",Ci);function O$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function b2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var V$={},z$={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function D5e(t){var{data:e,onLoad:a,onUnmount:r,options:i}=t,l=ie.useContext(Ci),[c,n]=ie.useState(null);return ie.useEffect(()=>{google.maps.visualization||Hu(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),ie.useEffect(()=>{Hu(!!e,"data property is required in HeatmapLayer %s",e)},[e]),ie.useEffect(()=>{c!==null&&c.setMap(l)},[l]),ie.useEffect(()=>{i&&c!==null&&c.setOptions(i)},[c,i]),ie.useEffect(()=>{var v=new google.maps.visualization.HeatmapLayer(b2(b2({},i),{},{data:e,map:l}));return n(v),a&&a(v),()=>{c!==null&&(r&&r(c),c.setMap(null))}},[]),null}ie.memo(D5e);class M5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{heatmapLayer:null}),Za(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Hu(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Hu(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(b2(b2({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=qi({updaterMap:z$,eventMap:V$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){$i(this.registeredEvents),this.registeredEvents=qi({updaterMap:z$,eventMap:V$,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),$i(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Za(M5e,"contextType",Ci);var D$={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},M$={register(t,e,a){t.registerPanoProvider(e,a)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class I5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{streetViewPanorama:null}),Za(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,a,r=(e=(a=this.context)===null||a===void 0?void 0:a.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=qi({updaterMap:M$,eventMap:D$,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:M$,eventMap:D$,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),$i(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Za(I5e,"contextType",Ci);class L5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"state",{streetViewService:null}),Za(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Za(L5e,"contextType",Ci);var I$={onDirectionsChanged:"directions_changed"},L$={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class F5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"state",{directionsRenderer:null}),Za(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=qi({updaterMap:L$,eventMap:I$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:L$,eventMap:I$,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),$i(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Za(F5e,"contextType",Ci);var F$={onPlacesChanged:"places_changed"},k$={bounds(t,e){t.setBounds(e)}};class k5e extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"containerElement",ie.createRef()),Za(this,"state",{searchBox:null}),Za(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Hu(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var a=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=qi({updaterMap:k$,eventMap:F$,prevProps:{},nextProps:this.props,instance:a}),this.setState(function(){return{searchBox:a}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&($i(this.registeredEvents),this.registeredEvents=qi({updaterMap:k$,eventMap:F$,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),$i(this.registeredEvents))}render(){return B.jsx("div",{ref:this.containerElement,children:ie.Children.only(this.props.children)})}}Za(k5e,"contextType",Ci);var U$={onPlaceChanged:"place_changed"},B$={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class bae extends ie.PureComponent{constructor(){super(...arguments),Za(this,"registeredEvents",[]),Za(this,"containerElement",ie.createRef()),Za(this,"state",{autocomplete:null}),Za(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Hu(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var a=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(a){var r=new google.maps.places.Autocomplete(a,this.props.options);this.registeredEvents=qi({updaterMap:B$,eventMap:U$,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){$i(this.registeredEvents),this.registeredEvents=qi({updaterMap:B$,eventMap:U$,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&$i(this.registeredEvents)}render(){return B.jsx("div",{ref:this.containerElement,className:this.props.className,children:ie.Children.only(this.props.children)})}}Za(bae,"defaultProps",{className:""});Za(bae,"contextType",Ci);const U5e={width:"100%",height:"500px"},B5e={lat:14.69583930582976,lng:120.98925961701622},j5e=["drawing"],G5e=()=>{const[t,e]=ie.useState(!0),[a,r]=ie.useState(null),[i,l]=ie.useState("circle"),[c,n]=ie.useState([]),[v,R]=ie.useState(""),[x,N]=ie.useState([]),[I,k]=ie.useState(null),[Z,$]=ie.useState(null),[H,W]=ie.useState(!1),[ee,oe]=ie.useState([]),[pe,le]=ie.useState(-1),[ge,ue]=ie.useState(null),Re=ie.useRef([]),[we,Ne]=ie.useState(!1),[ne,_e]=ie.useState(!1),[ke,Pe]=ie.useState(""),[Ee,De]=ie.useState(!1),[qe,Oe]=ie.useState(!1),[He,Ue]=ie.useState(null),[ct,Se]=ie.useState(null),[Ie,je]=ie.useState(null),[Ze,Be]=ie.useState(!1),[Je,dt]=ie.useState(null),{isLoaded:ut}=yDe({id:"google-map-script",googleMapsApiKey:"AIzaSyCIaoxdmh-5kDnUuVyyCyimR_HwVgQWJYk",libraries:j5e});ie.useEffect(()=>{const lr=Di(Ar,"system_settings","coverage_area"),wr=sh(lr,na=>{if(na.exists()){const Oa=na.data();if(Oa.savedCoverages&&(N(Oa.savedCoverages),!I&&Oa.savedCoverages.length>0)){const ra=Oa.savedCoverages[Oa.savedCoverages.length-1];k(ra.name),n(ra.geometries),R(ra.name),oe([ra.geometries]),le(0)}Oa.geometries&&(!Oa.savedCoverages||Oa.savedCoverages.length===0)&&(n(Oa.geometries),oe([Oa.geometries]),le(0))}});return()=>wr()},[]),ie.useEffect(()=>{(we||ne)&&De(!0)},[c,v]);const Ae=ie.useCallback(lr=>{$(lr),e(!1)},[]),Dt=ie.useCallback(()=>{$(null)},[]),Lt=()=>{Re.current.forEach(lr=>{lr&&typeof lr.setMap=="function"&&lr.setMap(null)}),Re.current=[]};ie.useEffect(()=>{c.length===0&&Lt()},[c]);const fa=lr=>{let wr;if(Re.current.push(lr),i==="circle"){const na=lr;if(!na||typeof na.getCenter!="function"){console.error("Invalid circle object:",lr);return}const Oa=na.getCenter();wr={type:"circle",center:{lat:Oa.lat(),lng:Oa.lng()},radius:na.getRadius()}}else{const na=lr;if(!na||typeof na.getPath!="function"){console.error("Invalid polygon object:",lr);return}wr={type:"polygon",coordinates:na.getPath().getArray().map(ra=>({lat:ra.lat(),lng:ra.lng()}))}}if(wr){const na=[...c,wr];n(na);const Oa=ee.slice(0,pe+1);Oa.push(na),oe(Oa),le(Oa.length-1)}},Nt=lr=>{ue(lr)},Ht=(lr,wr,na)=>{let Oa;if(lr==="circle"){const ja=wr.getCenter();Oa={type:"circle",center:{lat:ja.lat(),lng:ja.lng()},radius:wr.getRadius()}}else Oa={type:"polygon",coordinates:wr.getPath().getArray().map(gr=>({lat:gr.lat(),lng:gr.lng()}))};const ra=c.map((ja,gr)=>gr===na?Oa:ja);n(ra),ue(null)},wt=()=>{if(pe>0){Lt();const lr=pe-1;le(lr),n(ee[lr]),ue(null)}},fr=()=>{if(pe<ee.length-1){Lt();const lr=pe+1;le(lr),n(ee[lr]),ue(null)}},Ca=()=>{Lt(),n([]),ue(null);const lr=ee.slice(0,pe+1);lr.push([]),oe(lr),le(lr.length-1)},za=async()=>{if(!v.trim()){r("Please enter a name for the coverage area");return}try{W(!0);const lr={name:v,geometries:c,updatedAt:new Date().toISOString()},wr=x.filter(na=>na.name!==v);wr.push(lr),await rB(Di(Ar,"system_settings","coverage_area"),{savedCoverages:wr,geometries:c,updatedAt:new Date().toISOString()}),N(wr),k(v),Ne(!1),_e(!1),De(!1),Pe("Coverage area saved successfully!"),setTimeout(()=>Pe(""),3e3),r(null),await dh({adminId:"current_admin_id",adminName:"Current Admin",actionType:"UPDATE_COVERAGE_AREA",details:`Updated coverage area "${v}" (${c.length} geometries)`,targetCollection:"system_settings",targetId:"coverage_area"})}catch(lr){console.error("Error saving coverage areas:",lr),r("Failed to save coverage areas. Please try again.")}finally{W(!1)}},ar=lr=>{if((we||ne)&&Ee){if(!window.confirm("You have unsaved changes. Are you sure you want to load another coverage area? Unsaved changes will be lost."))return;Ne(!1),_e(!1),De(!1)}Lt();const wr=x.find(na=>na.name===lr);wr&&(dt({name:I,geometries:c,history:[...ee],historyIndex:pe}),Se(wr.geometries),je(lr),Be(!0))},ur=async()=>{if(Ie)try{W(!0),await rB(Di(Ar,"system_settings","coverage_area"),{savedCoverages:x,geometries:ct,updatedAt:new Date().toISOString()}),n(ct),k(Ie),R(Ie),oe([ct]),le(0),Be(!1),Se(null),je(null),dt(null),Pe("Coverage area changed successfully!"),setTimeout(()=>Pe(""),3e3)}catch{r("Failed to change coverage area. Please try again.")}finally{W(!1)}},or=()=>{Je&&(n(Je.geometries),k(Je.name),R(Je.name),oe(Je.history),le(Je.historyIndex)),Be(!1),Se(null),je(null),dt(null)},Cr=()=>{l(i==="circle"?"polygon":"circle"),ue(null)},Ia=()=>{I&&(Ne(!0),_e(!1),De(!1))},Fr=()=>{Ue({name:v,geometries:c,selected:I,history:[...ee],historyIndex:pe}),n([]),R(""),k(null),Ne(!1),_e(!0),De(!1),oe([[]]),le(0),Lt()},tn=()=>{He&&(n(He.geometries),R(He.name),k(He.selected),oe(He.history),le(He.historyIndex)),_e(!1),De(!1)};return ut?B.jsxs(B.Fragment,{children:[B.jsx(GL,{}),B.jsx("div",{className:"coverage-area-content",children:B.jsxs("div",{className:"coverage-area-container",children:[B.jsxs("div",{className:"coverage-area-header",children:[B.jsx("h1",{children:"Coverage Area Management"}),B.jsx("p",{children:"Define the allowed registration areas for your system"})]}),Ze&&B.jsxs("div",{className:"warning-message",style:{marginBottom:"1rem",color:"#b85c00",background:"#fffbe6",padding:"1rem",borderRadius:"6px",border:"1px solid #ffe58f"},children:[B.jsx("b",{children:"Warning:"})," Changing the coverage area will immediately affect allowed login locations. Are you sure you want to proceed?"]}),B.jsxs("div",{className:"coverage-controls",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[!ne&&B.jsxs(B.Fragment,{children:[B.jsxs("span",{children:["Current coverage area:"," ",B.jsx("b",{children:I||"No coverage area selected"})]}),B.jsx("button",{className:"action-btn",onClick:()=>Oe(lr=>!lr),disabled:we||ne,children:"Change Coverage Area"}),qe&&B.jsx("div",{className:"coverage-select",children:B.jsxs("select",{value:I||"",onChange:lr=>{ar(lr.target.value),Oe(!1)},className:"coverage-select-dropdown",disabled:we||ne,children:[B.jsx("option",{value:"",children:"Select a coverage area"}),x.map(lr=>B.jsx("option",{value:lr.name,children:lr.name},lr.name))]})}),B.jsx("button",{className:"action-btn",onClick:Ia,disabled:!I||we||ne,children:"Edit"}),B.jsx("button",{className:"action-btn",onClick:Fr,disabled:we||ne,children:"New Coverage"})]}),(we||ne)&&B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"coverage-name-input",children:B.jsx("input",{type:"text",value:v,onChange:lr=>R(lr.target.value),placeholder:"Enter coverage area name",className:"coverage-name-field",disabled:!(we||ne)})}),B.jsx("button",{className:"action-btn save",onClick:za,disabled:H||c.length===0,children:H?"Saving...":"Save"}),B.jsx("button",{className:"action-btn",onClick:ne?tn:()=>Ne(!1),children:"Cancel"})]}),Ze&&B.jsxs(B.Fragment,{children:[B.jsx("button",{className:"action-btn save",onClick:ur,disabled:H,children:H?"Saving...":"Save"}),B.jsx("button",{className:"action-btn",onClick:or,disabled:H,children:"Cancel"})]})]}),(we||ne)&&B.jsxs("div",{className:"map-controls",children:[B.jsx("button",{className:`draw-mode-btn ${i==="circle"?"active":""}`,onClick:Cr,disabled:!(we||ne),children:i==="circle"?"Switch to Polygon":"Switch to Circle"}),B.jsx("button",{className:"action-btn",onClick:wt,disabled:pe<=0||!(we||ne),children:"Undo"}),B.jsx("button",{className:"action-btn",onClick:fr,disabled:pe>=ee.length-1||!(we||ne),children:"Redo"}),B.jsx("button",{className:"action-btn",onClick:Ca,disabled:c.length===0||!(we||ne),children:"Clear"})]}),ke&&B.jsx("div",{className:"success-message",children:ke}),a&&B.jsx("div",{className:"error-message",children:a}),B.jsx("div",{className:"map-container",children:B.jsxs(iDe,{mapContainerStyle:U5e,center:B5e,zoom:15,onLoad:Ae,onUnmount:Dt,children:[!Ze&&B.jsx(mae,{drawingMode:we||ne?i==="circle"?"circle":"polygon":null,options:{drawingControl:!1,circleOptions:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,clickable:we||ne,editable:!1,zIndex:1},polygonOptions:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,clickable:we||ne,editable:!1,zIndex:1}},onCircleComplete:we||ne?fa:void 0,onPolygonComplete:we||ne?fa:void 0}),(Ze?ct:c).map((lr,wr)=>lr.type==="circle"?B.jsx(Rae,{center:lr.center,radius:lr.radius,options:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,editable:(we||ne)&&ge===wr&&!Ze,clickable:we||ne},onClick:we||ne?()=>Nt(wr):void 0,onDragEnd:we||ne?na=>{ge===wr&&Ht("circle",na.overlay,wr)}:void 0},`circle-${wr}`):B.jsx(wae,{paths:lr.coordinates,options:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,editable:(we||ne)&&ge===wr&&!Ze,clickable:we||ne},onClick:we||ne?()=>Nt(wr):void 0,onMouseUp:we||ne?na=>{ge===wr&&Ht("polygon",na.overlay,wr)}:void 0},`polygon-${wr}`))]})}),B.jsxs("div",{className:"instructions",children:[B.jsx("h3",{children:"How to use:"}),B.jsxs("ol",{children:[B.jsxs("li",{children:["Select a coverage area from the dropdown and click ",B.jsx("b",{children:"Edit"})," ","to modify it, or click ",B.jsx("b",{children:"New Coverage"})," to create a new one."]}),B.jsx("li",{children:"When editing or creating, you can draw shapes on the map and enter a name."}),B.jsxs("li",{children:["Click ",B.jsx("b",{children:"Save"})," to save your changes."]}),B.jsxs("li",{children:["Use ",B.jsx("b",{children:"Clear"})," to remove all shapes from the current coverage area you are editing/creating."]}),B.jsx("li",{children:"Switch between Circle and Polygon drawing modes as needed."}),B.jsx("li",{children:"Undo/Redo are available while editing or creating."})]})]})]})})]}):B.jsx("div",{className:"loading",children:"Loading map..."})};class Z5e extends Vt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("Error caught by boundary:",e,a)}render(){return this.state.hasError?B.jsxs("div",{className:"error-container",children:[B.jsx("h2",{children:"Something went wrong."}),B.jsx("p",{children:"Please refresh the page or try again later."})]}):this.props.children}}const q5e=()=>{const[t,e]=ie.useState(null);return ie.useEffect(()=>{eA.onAuthStateChanged(a=>{e(a)})},[]),B.jsx(Z5e,{children:B.jsx(Fie,{children:B.jsxs(mie,{children:[B.jsx(Xf,{path:"/login",element:t?B.jsx(HD,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/dashboard",element:t?B.jsx(HD,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/user-management",element:t?B.jsx(VNe,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/bike-management",element:t?B.jsx(tVe,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/stations",element:t?B.jsx(Dze,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/admin-management",element:t?B.jsx(Mze,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/rate-management",element:t?B.jsx(Ize,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/system-analytics",element:t?B.jsx(Hze,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/ride-details",element:t?B.jsx($ze,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/coverage-area",element:t?B.jsx(G5e,{}):B.jsx(Lp,{})}),B.jsx(Xf,{path:"/",element:t?B.jsx(HD,{}):B.jsx(Lp,{})})]})})})};Sne.createRoot(document.getElementById("root")).render(B.jsx(ie.StrictMode,{children:B.jsx(q5e,{})}));export{qs as _,DS as c,ss as g};
